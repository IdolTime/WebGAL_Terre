var sJ=Object.defineProperty;var lJ=(e,t,r)=>t in e?sJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var nt=(e,t,r)=>(lJ(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uJ(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var k6={exports:{}},E0={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var T3=Object.getOwnPropertySymbols,cJ=Object.prototype.hasOwnProperty,fJ=Object.prototype.propertyIsEnumerable;function hJ(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function dJ(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var XT=dJ()?Object.assign:function(e,t){for(var r,n=hJ(e),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)cJ.call(r,o)&&(n[o]=r[o]);if(T3){i=T3(r);for(var s=0;s<i.length;s++)fJ.call(r,i[s])&&(n[i[s]]=r[i[s]])}}return n};const pJ=Gi(XT);var F6={exports:{}},Sr={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=XT,ph=60103,N6=60106;Sr.Fragment=60107;Sr.StrictMode=60108;Sr.Profiler=60114;var L6=60109,B6=60110,M6=60112;Sr.Suspense=60113;var D6=60115,U6=60116;if(typeof Symbol=="function"&&Symbol.for){var co=Symbol.for;ph=co("react.element"),N6=co("react.portal"),Sr.Fragment=co("react.fragment"),Sr.StrictMode=co("react.strict_mode"),Sr.Profiler=co("react.profiler"),L6=co("react.provider"),B6=co("react.context"),M6=co("react.forward_ref"),Sr.Suspense=co("react.suspense"),D6=co("react.memo"),U6=co("react.lazy")}var A3=typeof Symbol=="function"&&Symbol.iterator;function vJ(e){return e===null||typeof e!="object"?null:(e=A3&&e[A3]||e["@@iterator"],typeof e=="function"?e:null)}function S0(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$6={};function vh(e,t,r){this.props=e,this.context=t,this.refs=$6,this.updater=r||j6}vh.prototype.isReactComponent={};vh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(S0(85));this.updater.enqueueSetState(this,e,t,"setState")};vh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function G6(){}G6.prototype=vh.prototype;function WT(e,t,r){this.props=e,this.context=t,this.refs=$6,this.updater=r||j6}var YT=WT.prototype=new G6;YT.constructor=WT;zT(YT,vh.prototype);YT.isPureReactComponent=!0;var qT={current:null},V6=Object.prototype.hasOwnProperty,H6={key:!0,ref:!0,__self:!0,__source:!0};function X6(e,t,r){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)V6.call(t,n)&&!H6.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:ph,type:e,key:a,ref:o,props:i,_owner:qT.current}}function gJ(e,t){return{$$typeof:ph,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KT(e){return typeof e=="object"&&e!==null&&e.$$typeof===ph}function mJ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var I3=/\/+/g;function G1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mJ(""+e.key):t.toString(36)}function Bg(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ph:case N6:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+G1(o,0):n,Array.isArray(i)?(r="",e!=null&&(r=e.replace(I3,"$&/")+"/"),Bg(i,t,r,"",function(l){return l})):i!=null&&(KT(i)&&(i=gJ(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(I3,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",Array.isArray(e))for(var s=0;s<e.length;s++){a=e[s];var c=n+G1(a,s);o+=Bg(a,t,r,c,i)}else if(c=vJ(e),typeof c=="function")for(e=c.call(e),s=0;!(a=e.next()).done;)a=a.value,c=n+G1(a,s++),o+=Bg(a,t,r,c,i);else if(a==="object")throw t=""+e,Error(S0(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return o}function $v(e,t,r){if(e==null)return e;var n=[],i=0;return Bg(e,n,"","",function(a){return t.call(r,a,i++)}),n}function _J(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var z6={current:null};function Ks(){var e=z6.current;if(e===null)throw Error(S0(321));return e}var yJ={ReactCurrentDispatcher:z6,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:qT,IsSomeRendererActing:{current:!1},assign:zT};Sr.Children={map:$v,forEach:function(e,t,r){$v(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $v(e,function(){t++}),t},toArray:function(e){return $v(e,function(t){return t})||[]},only:function(e){if(!KT(e))throw Error(S0(143));return e}};Sr.Component=vh;Sr.PureComponent=WT;Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yJ;Sr.cloneElement=function(e,t,r){if(e==null)throw Error(S0(267,e));var n=zT({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=qT.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)V6.call(t,c)&&!H6.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:ph,type:e.type,key:i,ref:a,props:n,_owner:o}};Sr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:B6,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:L6,_context:e},e.Consumer=e};Sr.createElement=X6;Sr.createFactory=function(e){var t=X6.bind(null,e);return t.type=e,t};Sr.createRef=function(){return{current:null}};Sr.forwardRef=function(e){return{$$typeof:M6,render:e}};Sr.isValidElement=KT;Sr.lazy=function(e){return{$$typeof:U6,_payload:{_status:-1,_result:e},_init:_J}};Sr.memo=function(e,t){return{$$typeof:D6,type:e,compare:t===void 0?null:t}};Sr.useCallback=function(e,t){return Ks().useCallback(e,t)};Sr.useContext=function(e,t){return Ks().useContext(e,t)};Sr.useDebugValue=function(){};Sr.useEffect=function(e,t){return Ks().useEffect(e,t)};Sr.useImperativeHandle=function(e,t,r){return Ks().useImperativeHandle(e,t,r)};Sr.useLayoutEffect=function(e,t){return Ks().useLayoutEffect(e,t)};Sr.useMemo=function(e,t){return Ks().useMemo(e,t)};Sr.useReducer=function(e,t,r){return Ks().useReducer(e,t,r)};Sr.useRef=function(e){return Ks().useRef(e)};Sr.useState=function(e){return Ks().useState(e)};Sr.version="17.0.2";F6.exports=Sr;var fe=F6.exports;const kr=Gi(fe);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xJ=fe,W6=60103;E0.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var R3=Symbol.for;W6=R3("react.element"),E0.Fragment=R3("react.fragment")}var bJ=xJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wJ=Object.prototype.hasOwnProperty,EJ={key:!0,ref:!0,__self:!0,__source:!0};function Y6(e,t,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)wJ.call(t,n)&&!EJ.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:W6,type:e,key:a,ref:o,props:i,_owner:bJ.current}}E0.jsx=Y6;E0.jsxs=Y6;k6.exports=E0;var L=k6.exports,q6={exports:{}},io={},K6={exports:{}},Z6={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}if(typeof window>"u"||typeof MessageChannel!="function"){var c=null,l=null,u=function(){if(c!==null)try{var U=e.unstable_now();c(!0,U),c=null}catch(z){throw setTimeout(u,0),z}};t=function(U){c!==null?setTimeout(t,0,U):(c=U,setTimeout(u,0))},r=function(U,z){l=setTimeout(U,z)},n=function(){clearTimeout(l)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if(typeof console<"u"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var d=!1,g=null,_=-1,v=5,m=0;e.unstable_shouldYield=function(){return e.unstable_now()>=m},i=function(){},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<U?Math.floor(1e3/U):5};var y=new MessageChannel,b=y.port2;y.port1.onmessage=function(){if(g!==null){var U=e.unstable_now();m=U+v;try{g(!0,U)?b.postMessage(null):(d=!1,g=null)}catch(z){throw b.postMessage(null),z}}else d=!1},t=function(U){g=U,d||(d=!0,b.postMessage(null))},r=function(U,z){_=f(function(){U(e.unstable_now())},z)},n=function(){h(_),_=-1}}function w(U,z){var j=U.length;U.push(z);e:for(;;){var V=j-1>>>1,ne=U[V];if(ne!==void 0&&0<T(ne,z))U[V]=z,U[j]=ne,j=V;else break e}}function E(U){return U=U[0],U===void 0?null:U}function C(U){var z=U[0];if(z!==void 0){var j=U.pop();if(j!==z){U[0]=j;e:for(var V=0,ne=U.length;V<ne;){var ae=2*(V+1)-1,pe=U[ae],se=ae+1,_e=U[se];if(pe!==void 0&&0>T(pe,j))_e!==void 0&&0>T(_e,pe)?(U[V]=_e,U[se]=j,V=se):(U[V]=pe,U[ae]=j,V=ae);else if(_e!==void 0&&0>T(_e,j))U[V]=_e,U[se]=j,V=se;else break e}}return z}return null}function T(U,z){var j=U.sortIndex-z.sortIndex;return j!==0?j:U.id-z.id}var A=[],I=[],O=1,P=null,k=3,F=!1,M=!1,D=!1;function G(U){for(var z=E(I);z!==null;){if(z.callback===null)C(I);else if(z.startTime<=U)C(I),z.sortIndex=z.expirationTime,w(A,z);else break;z=E(I)}}function Q(U){if(D=!1,G(U),!M)if(E(A)!==null)M=!0,t(te);else{var z=E(I);z!==null&&r(Q,z.startTime-U)}}function te(U,z){M=!1,D&&(D=!1,n()),F=!0;var j=k;try{for(G(z),P=E(A);P!==null&&(!(P.expirationTime>z)||U&&!e.unstable_shouldYield());){var V=P.callback;if(typeof V=="function"){P.callback=null,k=P.priorityLevel;var ne=V(P.expirationTime<=z);z=e.unstable_now(),typeof ne=="function"?P.callback=ne:P===E(A)&&C(A),G(z)}else C(A);P=E(A)}if(P!==null)var ae=!0;else{var pe=E(I);pe!==null&&r(Q,pe.startTime-z),ae=!1}return ae}finally{P=null,k=j,F=!1}}var Y=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){M||F||(M=!0,t(te))},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return E(A)},e.unstable_next=function(U){switch(k){case 1:case 2:case 3:var z=3;break;default:z=k}var j=k;k=z;try{return U()}finally{k=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Y,e.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=k;k=U;try{return z()}finally{k=j}},e.unstable_scheduleCallback=function(U,z,j){var V=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,U){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=j+ne,U={id:O++,callback:z,priorityLevel:U,startTime:j,expirationTime:ne,sortIndex:-1},j>V?(U.sortIndex=j,w(I,U),E(A)===null&&U===E(I)&&(D?n():D=!0,r(Q,j-V))):(U.sortIndex=ne,w(A,U),M||F||(M=!0,t(te))),U},e.unstable_wrapCallback=function(U){var z=k;return function(){var j=k;k=z;try{return U.apply(this,arguments)}finally{k=j}}}})(Z6);K6.exports=Z6;var SJ=K6.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=fe,fn=XT,gi=SJ;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!R_)throw Error(et(227));var J6=new Set,Ep={};function xc(e,t){qf(e,t),qf(e+"Capture",t)}function qf(e,t){for(Ep[e]=t,e=0;e<t.length;e++)J6.add(t[e])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P3=Object.prototype.hasOwnProperty,O3={},k3={};function TJ(e){return P3.call(k3,e)?!0:P3.call(O3,e)?!1:CJ.test(e)?k3[e]=!0:(O3[e]=!0,!1)}function AJ(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IJ(e,t,r,n){if(t===null||typeof t>"u"||AJ(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ia(e,t,r,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ri[e]=new ia(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ri[t]=new ia(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ri[e]=new ia(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ri[e]=new ia(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ri[e]=new ia(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ri[e]=new ia(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ri[e]=new ia(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ri[e]=new ia(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ri[e]=new ia(e,5,!1,e.toLowerCase(),null,!1,!1)});var ZT=/[\-:]([a-z])/g;function JT(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ZT,JT);Ri[t]=new ia(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ZT,JT);Ri[t]=new ia(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ZT,JT);Ri[t]=new ia(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ri[e]=new ia(e,1,!1,e.toLowerCase(),null,!1,!1)});Ri.xlinkHref=new ia("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ri[e]=new ia(e,1,!1,e.toLowerCase(),null,!0,!0)});function QT(e,t,r,n){var i=Ri.hasOwnProperty(t)?Ri[t]:null,a=i!==null?i.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(IJ(t,r,i,n)&&(r=null),n||i===null?TJ(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var bc=R_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xd=60103,Hu=60106,bl=60107,eA=60108,ep=60114,tA=60109,rA=60110,P_=60112,tp=60113,dm=60120,O_=60115,nA=60116,iA=60121,aA=60128,Q6=60129,oA=60130,tS=60131;if(typeof Symbol=="function"&&Symbol.for){var li=Symbol.for;Xd=li("react.element"),Hu=li("react.portal"),bl=li("react.fragment"),eA=li("react.strict_mode"),ep=li("react.profiler"),tA=li("react.provider"),rA=li("react.context"),P_=li("react.forward_ref"),tp=li("react.suspense"),dm=li("react.suspense_list"),O_=li("react.memo"),nA=li("react.lazy"),iA=li("react.block"),li("react.scope"),aA=li("react.opaque.id"),Q6=li("react.debug_trace_mode"),oA=li("react.offscreen"),tS=li("react.legacy_hidden")}var F3=typeof Symbol=="function"&&Symbol.iterator;function fd(e){return e===null||typeof e!="object"?null:(e=F3&&e[F3]||e["@@iterator"],typeof e=="function"?e:null)}var V1;function zd(e){if(V1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);V1=t&&t[1]||""}return`
`+V1+e}var H1=!1;function Gv(e,t){if(!e||H1)return"";H1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=s);break}}}finally{H1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zd(e):""}function RJ(e){switch(e.tag){case 5:return zd(e.type);case 16:return zd("Lazy");case 13:return zd("Suspense");case 19:return zd("SuspenseList");case 0:case 2:case 15:return e=Gv(e.type,!1),e;case 11:return e=Gv(e.type.render,!1),e;case 22:return e=Gv(e.type._render,!1),e;case 1:return e=Gv(e.type,!0),e;default:return""}}function Of(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bl:return"Fragment";case Hu:return"Portal";case ep:return"Profiler";case eA:return"StrictMode";case tp:return"Suspense";case dm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rA:return(e.displayName||"Context")+".Consumer";case tA:return(e._context.displayName||"Context")+".Provider";case P_:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case O_:return Of(e.type);case iA:return Of(e._render);case nA:t=e._payload,e=e._init;try{return Of(e(t))}catch{}}return null}function zl(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function e5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PJ(e){var t=e5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vv(e){e._valueTracker||(e._valueTracker=PJ(e))}function t5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=e5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function pm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rS(e,t){var r=t.checked;return fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function N3(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=zl(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r5(e,t){t=t.checked,t!=null&&QT(e,"checked",t,!1)}function nS(e,t){r5(e,t);var r=zl(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?iS(e,t.type,r):t.hasOwnProperty("defaultValue")&&iS(e,t.type,zl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function iS(e,t,r){(t!=="number"||pm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function OJ(e){var t="";return R_.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function aS(e,t){return e=fn({children:void 0},t),(t=OJ(t.children))&&(e.children=t),e}function kf(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+zl(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function oS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function B3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zl(r)}}function n5(e,t){var r=zl(t.value),n=zl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function M3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var sS={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function i5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?i5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hv,a5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!==sS.svg||"innerHTML"in e)e.innerHTML=t;else{for(Hv=Hv||document.createElement("div"),Hv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kJ=["Webkit","ms","Moz","O"];Object.keys(rp).forEach(function(e){kJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rp[t]=rp[e]})});function o5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rp.hasOwnProperty(e)&&rp[e]?(""+t).trim():t+"px"}function s5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=o5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var FJ=fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uS(e,t){if(t){if(FJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function cS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function sA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fS=null,Ff=null,Nf=null;function D3(e){if(e=T0(e)){if(typeof fS!="function")throw Error(et(280));var t=e.stateNode;t&&(t=M_(t),fS(e.stateNode,e.type,t))}}function l5(e){Ff?Nf?Nf.push(e):Nf=[e]:Ff=e}function u5(){if(Ff){var e=Ff,t=Nf;if(Nf=Ff=null,D3(e),t)for(e=0;e<t.length;e++)D3(t[e])}}function lA(e,t){return e(t)}function c5(e,t,r,n,i){return e(t,r,n,i)}function uA(){}var f5=lA,Xu=!1,X1=!1;function cA(){(Ff!==null||Nf!==null)&&(uA(),u5())}function NJ(e,t,r){if(X1)return e(t,r);X1=!0;try{return f5(e,t,r)}finally{X1=!1,cA()}}function Cp(e,t){var r=e.stateNode;if(r===null)return null;var n=M_(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var hS=!1;if(zs)try{var hd={};Object.defineProperty(hd,"passive",{get:function(){hS=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{hS=!1}function LJ(e,t,r,n,i,a,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(u){this.onError(u)}}var np=!1,vm=null,gm=!1,dS=null,BJ={onError:function(e){np=!0,vm=e}};function MJ(e,t,r,n,i,a,o,s,c){np=!1,vm=null,LJ.apply(BJ,arguments)}function DJ(e,t,r,n,i,a,o,s,c){if(MJ.apply(this,arguments),np){if(np){var l=vm;np=!1,vm=null}else throw Error(et(198));gm||(gm=!0,dS=l)}}function wc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function h5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function U3(e){if(wc(e)!==e)throw Error(et(188))}function UJ(e){var t=e.alternate;if(!t){if(t=wc(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return U3(i),e;if(a===n)return U3(i),t;a=a.sibling}throw Error(et(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(et(189))}}if(r.alternate!==n)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function d5(e){if(e=UJ(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function j3(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var p5,fA,v5,g5,pS=!1,qo=[],kl=null,Fl=null,Nl=null,Tp=new Map,Ap=new Map,dd=[],$3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vS(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function G3(e,t){switch(e){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":Tp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ap.delete(t.pointerId)}}function pd(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e=vS(t,r,n,i,a),t!==null&&(t=T0(t),t!==null&&fA(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function jJ(e,t,r,n,i){switch(t){case"focusin":return kl=pd(kl,e,t,r,n,i),!0;case"dragenter":return Fl=pd(Fl,e,t,r,n,i),!0;case"mouseover":return Nl=pd(Nl,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Tp.set(a,pd(Tp.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Ap.set(a,pd(Ap.get(a)||null,e,t,r,n,i)),!0}return!1}function $J(e){var t=zu(e.target);if(t!==null){var r=wc(t);if(r!==null){if(t=r.tag,t===13){if(t=h5(r),t!==null){e.blockedOn=t,g5(e.lanePriority,function(){gi.unstable_runWithPriority(e.priority,function(){v5(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=T0(r),t!==null&&fA(t),e.blockedOn=r,!1;t.shift()}return!0}function V3(e,t,r){Mg(e)&&r.delete(t)}function GJ(){for(pS=!1;0<qo.length;){var e=qo[0];if(e.blockedOn!==null){e=T0(e.blockedOn),e!==null&&p5(e);break}for(var t=e.targetContainers;0<t.length;){var r=vA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&qo.shift()}kl!==null&&Mg(kl)&&(kl=null),Fl!==null&&Mg(Fl)&&(Fl=null),Nl!==null&&Mg(Nl)&&(Nl=null),Tp.forEach(V3),Ap.forEach(V3)}function vd(e,t){e.blockedOn===t&&(e.blockedOn=null,pS||(pS=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,GJ)))}function m5(e){function t(i){return vd(i,e)}if(0<qo.length){vd(qo[0],e);for(var r=1;r<qo.length;r++){var n=qo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(kl!==null&&vd(kl,e),Fl!==null&&vd(Fl,e),Nl!==null&&vd(Nl,e),Tp.forEach(t),Ap.forEach(t),r=0;r<dd.length;r++)n=dd[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<dd.length&&(r=dd[0],r.blockedOn===null);)$J(r),r.blockedOn===null&&dd.shift()}function Xv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var mf={animationend:Xv("Animation","AnimationEnd"),animationiteration:Xv("Animation","AnimationIteration"),animationstart:Xv("Animation","AnimationStart"),transitionend:Xv("Transition","TransitionEnd")},z1={},_5={};zs&&(_5=document.createElement("div").style,"AnimationEvent"in window||(delete mf.animationend.animation,delete mf.animationiteration.animation,delete mf.animationstart.animation),"TransitionEvent"in window||delete mf.transitionend.transition);function k_(e){if(z1[e])return z1[e];if(!mf[e])return e;var t=mf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _5)return z1[e]=t[r];return e}var y5=k_("animationend"),x5=k_("animationiteration"),b5=k_("animationstart"),w5=k_("transitionend"),E5=new Map,hA=new Map,VJ=["abort","abort",y5,"animationEnd",x5,"animationIteration",b5,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",w5,"transitionEnd","waiting","waiting"];function dA(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),hA.set(n,t),E5.set(n,i),xc(i,[n])}}var HJ=gi.unstable_now;HJ();var Wr=8;function pf(e){if(1&e)return Wr=15,1;if(2&e)return Wr=14,2;if(4&e)return Wr=13,4;var t=24&e;return t!==0?(Wr=12,t):e&32?(Wr=11,32):(t=192&e,t!==0?(Wr=10,t):e&256?(Wr=9,256):(t=3584&e,t!==0?(Wr=8,t):e&4096?(Wr=7,4096):(t=4186112&e,t!==0?(Wr=6,t):(t=62914560&e,t!==0?(Wr=5,t):e&67108864?(Wr=4,67108864):e&134217728?(Wr=3,134217728):(t=805306368&e,t!==0?(Wr=2,t):1073741824&e?(Wr=1,1073741824):(Wr=8,e))))))}function XJ(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function zJ(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(et(358,e))}}function Ip(e,t){var r=e.pendingLanes;if(r===0)return Wr=0;var n=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(a!==0)n=a,i=Wr=15;else if(a=r&134217727,a!==0){var c=a&~o;c!==0?(n=pf(c),i=Wr):(s&=a,s!==0&&(n=pf(s),i=Wr))}else a=r&~o,a!==0?(n=pf(a),i=Wr):s!==0&&(n=pf(s),i=Wr);if(n===0)return 0;if(n=31-Wl(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&!(t&o)){if(pf(t),i<=Wr)return t;Wr=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Wl(t),i=1<<r,n|=e[r],t&=~i;return n}function S5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mm(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=vf(24&~t),e===0?mm(10,t):e;case 10:return e=vf(192&~t),e===0?mm(8,t):e;case 8:return e=vf(3584&~t),e===0&&(e=vf(4186112&~t),e===0&&(e=512)),e;case 2:return t=vf(805306368&~t),t===0&&(t=268435456),t}throw Error(et(358,e))}function vf(e){return e&-e}function W1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function F_(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-Wl(t),e[t]=r}var Wl=Math.clz32?Math.clz32:qJ,WJ=Math.log,YJ=Math.LN2;function qJ(e){return e===0?32:31-(WJ(e)/YJ|0)|0}var KJ=gi.unstable_UserBlockingPriority,ZJ=gi.unstable_runWithPriority,Dg=!0;function JJ(e,t,r,n){Xu||uA();var i=pA,a=Xu;Xu=!0;try{c5(i,e,t,r,n)}finally{(Xu=a)||cA()}}function QJ(e,t,r,n){ZJ(KJ,pA.bind(null,e,t,r,n))}function pA(e,t,r,n){if(Dg){var i;if((i=(t&4)===0)&&0<qo.length&&-1<$3.indexOf(e))e=vS(null,e,t,r,n),qo.push(e);else{var a=vA(e,t,r,n);if(a===null)i&&G3(e,n);else{if(i){if(-1<$3.indexOf(e)){e=vS(a,e,t,r,n),qo.push(e);return}if(jJ(a,e,t,r,n))return;G3(e,n)}M5(e,t,n,null,r)}}}}function vA(e,t,r,n){var i=sA(n);if(i=zu(i),i!==null){var a=wc(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=h5(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return M5(e,t,n,i,r),null}var Cl=null,gA=null,Ug=null;function C5(){if(Ug)return Ug;var e,t=gA,r=t.length,n,i="value"in Cl?Cl.value:Cl.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return Ug=i.slice(e,1<n?1-n:void 0)}function jg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zv(){return!0}function H3(){return!1}function La(e){function t(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zv:H3,this.isPropagationStopped=H3,this}return fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zv)},persist:function(){},isPersistent:zv}),t}var gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mA=La(gh),C0=fn({},gh,{view:0,detail:0}),eQ=La(C0),Y1,q1,gd,N_=fn({},C0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_A,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gd&&(gd&&e.type==="mousemove"?(Y1=e.screenX-gd.screenX,q1=e.screenY-gd.screenY):q1=Y1=0,gd=e),Y1)},movementY:function(e){return"movementY"in e?e.movementY:q1}}),X3=La(N_),tQ=fn({},N_,{dataTransfer:0}),rQ=La(tQ),nQ=fn({},C0,{relatedTarget:0}),K1=La(nQ),iQ=fn({},gh,{animationName:0,elapsedTime:0,pseudoElement:0}),aQ=La(iQ),oQ=fn({},gh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sQ=La(oQ),lQ=fn({},gh,{data:0}),z3=La(lQ),uQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fQ[e])?!!t[e]:!1}function _A(){return hQ}var dQ=fn({},C0,{key:function(e){if(e.key){var t=uQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_A,charCode:function(e){return e.type==="keypress"?jg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pQ=La(dQ),vQ=fn({},N_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W3=La(vQ),gQ=fn({},C0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_A}),mQ=La(gQ),_Q=fn({},gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),yQ=La(_Q),xQ=fn({},N_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bQ=La(xQ),wQ=[9,13,27,32],yA=zs&&"CompositionEvent"in window,ip=null;zs&&"documentMode"in document&&(ip=document.documentMode);var EQ=zs&&"TextEvent"in window&&!ip,T5=zs&&(!yA||ip&&8<ip&&11>=ip),Y3=String.fromCharCode(32),q3=!1;function A5(e,t){switch(e){case"keyup":return wQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _f=!1;function SQ(e,t){switch(e){case"compositionend":return I5(t);case"keypress":return t.which!==32?null:(q3=!0,Y3);case"textInput":return e=t.data,e===Y3&&q3?null:e;default:return null}}function CQ(e,t){if(_f)return e==="compositionend"||!yA&&A5(e,t)?(e=C5(),Ug=gA=Cl=null,_f=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return T5&&t.locale!=="ko"?null:t.data;default:return null}}var TQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K3(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!TQ[e.type]:t==="textarea"}function R5(e,t,r,n){l5(n),t=_m(t,"onChange"),0<t.length&&(r=new mA("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ap=null,Rp=null;function AQ(e){N5(e,0)}function L_(e){var t=xf(e);if(t5(t))return e}function IQ(e,t){if(e==="change")return t}var P5=!1;if(zs){var Z1;if(zs){var J1="oninput"in document;if(!J1){var Z3=document.createElement("div");Z3.setAttribute("oninput","return;"),J1=typeof Z3.oninput=="function"}Z1=J1}else Z1=!1;P5=Z1&&(!document.documentMode||9<document.documentMode)}function J3(){ap&&(ap.detachEvent("onpropertychange",O5),Rp=ap=null)}function O5(e){if(e.propertyName==="value"&&L_(Rp)){var t=[];if(R5(t,Rp,e,sA(e)),e=AQ,Xu)e(t);else{Xu=!0;try{lA(e,t)}finally{Xu=!1,cA()}}}}function RQ(e,t,r){e==="focusin"?(J3(),ap=t,Rp=r,ap.attachEvent("onpropertychange",O5)):e==="focusout"&&J3()}function PQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return L_(Rp)}function OQ(e,t){if(e==="click")return L_(t)}function kQ(e,t){if(e==="input"||e==="change")return L_(t)}function FQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ka=typeof Object.is=="function"?Object.is:FQ,NQ=Object.prototype.hasOwnProperty;function Pp(e,t){if(Ka(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!NQ.call(t,r[n])||!Ka(e[r[n]],t[r[n]]))return!1;return!0}function Q3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eF(e,t){var r=Q3(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Q3(r)}}function k5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?k5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tF(){for(var e=window,t=pm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=pm(e.document)}return t}function gS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var LQ=zs&&"documentMode"in document&&11>=document.documentMode,yf=null,mS=null,op=null,_S=!1;function rF(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_S||yf==null||yf!==pm(n)||(n=yf,"selectionStart"in n&&gS(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),op&&Pp(op,n)||(op=n,n=_m(mS,"onSelect"),0<n.length&&(t=new mA("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yf)))}dA("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);dA("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);dA(VJ,2);for(var nF="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Q1=0;Q1<nF.length;Q1++)hA.set(nF[Q1],0);qf("onMouseEnter",["mouseout","mouseover"]);qf("onMouseLeave",["mouseout","mouseover"]);qf("onPointerEnter",["pointerout","pointerover"]);qf("onPointerLeave",["pointerout","pointerover"]);xc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xc("onBeforeInput",["compositionend","keypress","textInput","paste"]);xc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wd));function iF(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,DJ(n,t,void 0,e),e.currentTarget=null}function N5(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break e;iF(i,s,l),a=c}else for(o=0;o<n.length;o++){if(s=n[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break e;iF(i,s,l),a=c}}}if(gm)throw e=dS,gm=!1,dS=null,e}function Kr(e,t){var r=U5(t),n=e+"__bubble";r.has(n)||(B5(t,e,2,!1),r.add(n))}var aF="_reactListening"+Math.random().toString(36).slice(2);function L5(e){e[aF]||(e[aF]=!0,J6.forEach(function(t){F5.has(t)||oF(t,!1,e,null),oF(t,!0,e,null)}))}function oF(e,t,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=r;if(e==="selectionchange"&&r.nodeType!==9&&(a=r.ownerDocument),n!==null&&!t&&F5.has(e)){if(e!=="scroll")return;i|=2,a=n}var o=U5(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),B5(a,e,i,t),o.add(s))}function B5(e,t,r,n){var i=hA.get(t);switch(i===void 0?2:i){case 0:i=JJ;break;case 1:i=QJ;break;default:i=pA}r=i.bind(null,t,r,e),i=void 0,!hS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function M5(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;s!==null;){if(o=zu(s),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}s=s.parentNode}}n=n.return}NJ(function(){var l=a,u=sA(r),f=[];e:{var h=E5.get(e);if(h!==void 0){var p=mA,d=e;switch(e){case"keypress":if(jg(r)===0)break e;case"keydown":case"keyup":p=pQ;break;case"focusin":d="focus",p=K1;break;case"focusout":d="blur",p=K1;break;case"beforeblur":case"afterblur":p=K1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=X3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=rQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=mQ;break;case y5:case x5:case b5:p=aQ;break;case w5:p=yQ;break;case"scroll":p=eQ;break;case"wheel":p=bQ;break;case"copy":case"cut":case"paste":p=sQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=W3}var g=(t&4)!==0,_=!g&&e==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var m=l,y;m!==null;){y=m;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,v!==null&&(b=Cp(m,v),b!=null&&g.push(Op(m,b,y)))),_)break;m=m.return}0<g.length&&(h=new p(h,d,null,r,u),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&!(t&16)&&(d=r.relatedTarget||r.fromElement)&&(zu(d)||d[mh]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(d=r.relatedTarget||r.toElement,p=l,d=d?zu(d):null,d!==null&&(_=wc(d),d!==_||d.tag!==5&&d.tag!==6)&&(d=null)):(p=null,d=l),p!==d)){if(g=X3,b="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=W3,b="onPointerLeave",v="onPointerEnter",m="pointer"),_=p==null?h:xf(p),y=d==null?h:xf(d),h=new g(b,m+"leave",p,r,u),h.target=_,h.relatedTarget=y,b=null,zu(u)===l&&(g=new g(v,m+"enter",d,r,u),g.target=y,g.relatedTarget=_,b=g),_=b,p&&d)t:{for(g=p,v=d,m=0,y=g;y;y=Kc(y))m++;for(y=0,b=v;b;b=Kc(b))y++;for(;0<m-y;)g=Kc(g),m--;for(;0<y-m;)v=Kc(v),y--;for(;m--;){if(g===v||v!==null&&g===v.alternate)break t;g=Kc(g),v=Kc(v)}g=null}else g=null;p!==null&&sF(f,h,p,g,!1),d!==null&&_!==null&&sF(f,_,d,g,!0)}}e:{if(h=l?xf(l):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=IQ;else if(K3(h))if(P5)w=kQ;else{w=PQ;var E=RQ}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=OQ);if(w&&(w=w(e,l))){R5(f,w,r,u);break e}E&&E(e,h,l),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&iS(h,"number",h.value)}switch(E=l?xf(l):window,e){case"focusin":(K3(E)||E.contentEditable==="true")&&(yf=E,mS=l,op=null);break;case"focusout":op=mS=yf=null;break;case"mousedown":_S=!0;break;case"contextmenu":case"mouseup":case"dragend":_S=!1,rF(f,r,u);break;case"selectionchange":if(LQ)break;case"keydown":case"keyup":rF(f,r,u)}var C;if(yA)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else _f?A5(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(T5&&r.locale!=="ko"&&(_f||T!=="onCompositionStart"?T==="onCompositionEnd"&&_f&&(C=C5()):(Cl=u,gA="value"in Cl?Cl.value:Cl.textContent,_f=!0)),E=_m(l,T),0<E.length&&(T=new z3(T,e,null,r,u),f.push({event:T,listeners:E}),C?T.data=C:(C=I5(r),C!==null&&(T.data=C)))),(C=EQ?SQ(e,r):CQ(e,r))&&(l=_m(l,"onBeforeInput"),0<l.length&&(u=new z3("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:l}),u.data=C))}N5(f,t)})}function Op(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _m(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Cp(e,r),a!=null&&n.unshift(Op(e,a,i)),a=Cp(e,t),a!=null&&n.push(Op(e,a,i))),e=e.return}return n}function Kc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sF(e,t,r,n,i){for(var a=t._reactName,o=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=Cp(r,a),c!=null&&o.unshift(Op(r,c,s))):i||(c=Cp(r,a),c!=null&&o.push(Op(r,c,s)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}function ym(){}var eb=null,tb=null;function D5(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yS(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lF=typeof setTimeout=="function"?setTimeout:void 0,BQ=typeof clearTimeout=="function"?clearTimeout:void 0;function xA(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Lf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function uF(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rb=0;function MQ(e){return{$$typeof:aA,toString:e,valueOf:e}}var B_=Math.random().toString(36).slice(2),Tl="__reactFiber$"+B_,xm="__reactProps$"+B_,mh="__reactContainer$"+B_,cF="__reactEvents$"+B_;function zu(e){var t=e[Tl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mh]||r[Tl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=uF(e);e!==null;){if(r=e[Tl])return r;e=uF(e)}return t}e=r,r=e.parentNode}return null}function T0(e){return e=e[Tl]||e[mh],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function M_(e){return e[xm]||null}function U5(e){var t=e[cF];return t===void 0&&(t=e[cF]=new Set),t}var xS=[],bf=-1;function su(e){return{current:e}}function Jr(e){0>bf||(e.current=xS[bf],xS[bf]=null,bf--)}function Sn(e,t){bf++,xS[bf]=e.current,e.current=t}var Yl={},ji=su(Yl),va=su(!1),uc=Yl;function Kf(e,t){var r=e.type.contextTypes;if(!r)return Yl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ga(e){return e=e.childContextTypes,e!=null}function bm(){Jr(va),Jr(ji)}function fF(e,t,r){if(ji.current!==Yl)throw Error(et(168));Sn(ji,t),Sn(va,r)}function j5(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(et(108,Of(t)||"Unknown",i));return fn({},r,n)}function $g(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yl,uc=ji.current,Sn(ji,e),Sn(va,va.current),!0}function hF(e,t,r){var n=e.stateNode;if(!n)throw Error(et(169));r?(e=j5(e,t,uc),n.__reactInternalMemoizedMergedChildContext=e,Jr(va),Jr(ji),Sn(ji,e)):Jr(va),Sn(va,r)}var bA=null,tc=null,DQ=gi.unstable_runWithPriority,wA=gi.unstable_scheduleCallback,bS=gi.unstable_cancelCallback,UQ=gi.unstable_shouldYield,dF=gi.unstable_requestPaint,wS=gi.unstable_now,jQ=gi.unstable_getCurrentPriorityLevel,D_=gi.unstable_ImmediatePriority,$5=gi.unstable_UserBlockingPriority,G5=gi.unstable_NormalPriority,V5=gi.unstable_LowPriority,H5=gi.unstable_IdlePriority,nb={},$Q=dF!==void 0?dF:function(){},Ns=null,Gg=null,ib=!1,pF=wS(),Di=1e4>pF?wS:function(){return wS()-pF};function Zf(){switch(jQ()){case D_:return 99;case $5:return 98;case G5:return 97;case V5:return 96;case H5:return 95;default:throw Error(et(332))}}function X5(e){switch(e){case 99:return D_;case 98:return $5;case 97:return G5;case 96:return V5;case 95:return H5;default:throw Error(et(332))}}function cc(e,t){return e=X5(e),DQ(e,t)}function kp(e,t,r){return e=X5(e),wA(e,t,r)}function hs(){if(Gg!==null){var e=Gg;Gg=null,bS(e)}z5()}function z5(){if(!ib&&Ns!==null){ib=!0;var e=0;try{var t=Ns;cc(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Ns=null}catch(r){throw Ns!==null&&(Ns=Ns.slice(e+1)),wA(D_,hs),r}finally{ib=!1}}}var GQ=bc.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){t=fn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var wm=su(null),Em=null,wf=null,Sm=null;function EA(){Sm=wf=Em=null}function SA(e){var t=wm.current;Jr(wm),e.type._context._currentValue=t}function W5(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Bf(e,t){Em=e,Sm=wf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Eo=!0),e.firstContext=null)}function to(e,t){if(Sm!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Sm=e,t=1073741823),t={context:e,observedBits:t,next:null},wf===null){if(Em===null)throw Error(et(308));wf=t,Em.dependencies={lanes:0,firstContext:t,responders:null}}else wf=wf.next=t;return e._currentValue}var yl=!1;function CA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Y5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ll(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bl(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function vF(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Fp(e,t,r,n){var i=e.updateQueue;yl=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;if(u!==null){u=u.updateQueue;var f=u.lastBaseUpdate;f!==o&&(f===null?u.firstBaseUpdate=l:f.next=l,u.lastBaseUpdate=c)}}if(a!==null){f=i.baseState,o=0,u=l=c=null;do{s=a.lane;var h=a.eventTime;if((n&s)===s){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,d=a;switch(s=t,h=r,d.tag){case 1:if(p=d.payload,typeof p=="function"){f=p.call(h,f,s);break e}f=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=d.payload,s=typeof p=="function"?p.call(h,f,s):p,s==null)break e;f=fn({},f,s);break e;case 2:yl=!0}}a.callback!==null&&(e.flags|=32,s=i.effects,s===null?i.effects=[a]:s.push(a))}else h={eventTime:h,lane:s,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=f):u=u.next=h,o|=s;if(a=a.next,a===null){if(s=i.shared.pending,s===null)break;a=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}while(1);u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,I0|=o,e.lanes=o,e.memoizedState=f}}function gF(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(et(191,i));i.call(n)}}}var q5=new R_.Component().refs;function Cm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var U_={isMounted:function(e){return(e=e._reactInternals)?wc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Oa(),i=Ml(e),a=Ll(n,i);a.payload=t,r!=null&&(a.callback=r),Bl(e,a),Dl(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Oa(),i=Ml(e),a=Ll(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),Bl(e,a),Dl(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Oa(),n=Ml(e),i=Ll(r,n);i.tag=2,t!=null&&(i.callback=t),Bl(e,i),Dl(e,n,r)}};function mF(e,t,r,n,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Pp(r,n)||!Pp(i,a):!0}function K5(e,t,r){var n=!1,i=Yl,a=t.contextType;return typeof a=="object"&&a!==null?a=to(a):(i=ga(t)?uc:ji.current,n=t.contextTypes,a=(n=n!=null)?Kf(e,i):Yl),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=U_,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _F(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&U_.enqueueReplaceState(t,t.state,null)}function ES(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=q5,CA(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=to(a):(a=ga(t)?uc:ji.current,i.context=Kf(e,a)),Fp(e,r,i,n),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Cm(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&U_.enqueueReplaceState(i,i.state,null),Fp(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var Wv=Array.isArray;function md(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var n=r.stateNode}if(!n)throw Error(et(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var o=n.refs;o===q5&&(o=n.refs={}),a===null?delete o[i]:o[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function Yv(e,t){if(e.type!=="textarea")throw Error(et(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Z5(e){function t(_,v){if(e){var m=_.lastEffect;m!==null?(m.nextEffect=v,_.lastEffect=v):_.firstEffect=_.lastEffect=v,v.nextEffect=null,v.flags=8}}function r(_,v){if(!e)return null;for(;v!==null;)t(_,v),v=v.sibling;return null}function n(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=Kl(_,v),_.index=0,_.sibling=null,_}function a(_,v,m){return _.index=m,e?(m=_.alternate,m!==null?(m=m.index,m<v?(_.flags=2,v):m):(_.flags=2,v)):v}function o(_){return e&&_.alternate===null&&(_.flags=2),_}function s(_,v,m,y){return v===null||v.tag!==6?(v=ub(m,_.mode,y),v.return=_,v):(v=i(v,m),v.return=_,v)}function c(_,v,m,y){return v!==null&&v.elementType===m.type?(y=i(v,m.props),y.ref=md(_,v,m),y.return=_,y):(y=zg(m.type,m.key,m.props,null,_.mode,y),y.ref=md(_,v,m),y.return=_,y)}function l(_,v,m,y){return v===null||v.tag!==4||v.stateNode.containerInfo!==m.containerInfo||v.stateNode.implementation!==m.implementation?(v=cb(m,_.mode,y),v.return=_,v):(v=i(v,m.children||[]),v.return=_,v)}function u(_,v,m,y,b){return v===null||v.tag!==7?(v=jf(m,_.mode,y,b),v.return=_,v):(v=i(v,m),v.return=_,v)}function f(_,v,m){if(typeof v=="string"||typeof v=="number")return v=ub(""+v,_.mode,m),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xd:return m=zg(v.type,v.key,v.props,null,_.mode,m),m.ref=md(_,null,v),m.return=_,m;case Hu:return v=cb(v,_.mode,m),v.return=_,v}if(Wv(v)||fd(v))return v=jf(v,_.mode,m,null),v.return=_,v;Yv(_,v)}return null}function h(_,v,m,y){var b=v!==null?v.key:null;if(typeof m=="string"||typeof m=="number")return b!==null?null:s(_,v,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Xd:return m.key===b?m.type===bl?u(_,v,m.props.children,y,b):c(_,v,m,y):null;case Hu:return m.key===b?l(_,v,m,y):null}if(Wv(m)||fd(m))return b!==null?null:u(_,v,m,y,null);Yv(_,m)}return null}function p(_,v,m,y,b){if(typeof y=="string"||typeof y=="number")return _=_.get(m)||null,s(v,_,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xd:return _=_.get(y.key===null?m:y.key)||null,y.type===bl?u(v,_,y.props.children,b,y.key):c(v,_,y,b);case Hu:return _=_.get(y.key===null?m:y.key)||null,l(v,_,y,b)}if(Wv(y)||fd(y))return _=_.get(m)||null,u(v,_,y,b,null);Yv(v,y)}return null}function d(_,v,m,y){for(var b=null,w=null,E=v,C=v=0,T=null;E!==null&&C<m.length;C++){E.index>C?(T=E,E=null):T=E.sibling;var A=h(_,E,m[C],y);if(A===null){E===null&&(E=T);break}e&&E&&A.alternate===null&&t(_,E),v=a(A,v,C),w===null?b=A:w.sibling=A,w=A,E=T}if(C===m.length)return r(_,E),b;if(E===null){for(;C<m.length;C++)E=f(_,m[C],y),E!==null&&(v=a(E,v,C),w===null?b=E:w.sibling=E,w=E);return b}for(E=n(_,E);C<m.length;C++)T=p(E,_,C,m[C],y),T!==null&&(e&&T.alternate!==null&&E.delete(T.key===null?C:T.key),v=a(T,v,C),w===null?b=T:w.sibling=T,w=T);return e&&E.forEach(function(I){return t(_,I)}),b}function g(_,v,m,y){var b=fd(m);if(typeof b!="function")throw Error(et(150));if(m=b.call(m),m==null)throw Error(et(151));for(var w=b=null,E=v,C=v=0,T=null,A=m.next();E!==null&&!A.done;C++,A=m.next()){E.index>C?(T=E,E=null):T=E.sibling;var I=h(_,E,A.value,y);if(I===null){E===null&&(E=T);break}e&&E&&I.alternate===null&&t(_,E),v=a(I,v,C),w===null?b=I:w.sibling=I,w=I,E=T}if(A.done)return r(_,E),b;if(E===null){for(;!A.done;C++,A=m.next())A=f(_,A.value,y),A!==null&&(v=a(A,v,C),w===null?b=A:w.sibling=A,w=A);return b}for(E=n(_,E);!A.done;C++,A=m.next())A=p(E,_,C,A.value,y),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?C:A.key),v=a(A,v,C),w===null?b=A:w.sibling=A,w=A);return e&&E.forEach(function(O){return t(_,O)}),b}return function(_,v,m,y){var b=typeof m=="object"&&m!==null&&m.type===bl&&m.key===null;b&&(m=m.props.children);var w=typeof m=="object"&&m!==null;if(w)switch(m.$$typeof){case Xd:e:{for(w=m.key,b=v;b!==null;){if(b.key===w){switch(b.tag){case 7:if(m.type===bl){r(_,b.sibling),v=i(b,m.props.children),v.return=_,_=v;break e}break;default:if(b.elementType===m.type){r(_,b.sibling),v=i(b,m.props),v.ref=md(_,b,m),v.return=_,_=v;break e}}r(_,b);break}else t(_,b);b=b.sibling}m.type===bl?(v=jf(m.props.children,_.mode,y,m.key),v.return=_,_=v):(y=zg(m.type,m.key,m.props,null,_.mode,y),y.ref=md(_,v,m),y.return=_,_=y)}return o(_);case Hu:e:{for(b=m.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===m.containerInfo&&v.stateNode.implementation===m.implementation){r(_,v.sibling),v=i(v,m.children||[]),v.return=_,_=v;break e}else{r(_,v);break}else t(_,v);v=v.sibling}v=cb(m,_.mode,y),v.return=_,_=v}return o(_)}if(typeof m=="string"||typeof m=="number")return m=""+m,v!==null&&v.tag===6?(r(_,v.sibling),v=i(v,m),v.return=_,_=v):(r(_,v),v=ub(m,_.mode,y),v.return=_,_=v),o(_);if(Wv(m))return d(_,v,m,y);if(fd(m))return g(_,v,m,y);if(w&&Yv(_,m),typeof m>"u"&&!b)switch(_.tag){case 1:case 22:case 0:case 11:case 15:throw Error(et(152,Of(_.type)||"Component"))}return r(_,v)}}var Tm=Z5(!0),J5=Z5(!1),A0={},Qo=su(A0),Np=su(A0),Lp=su(A0);function Wu(e){if(e===A0)throw Error(et(174));return e}function SS(e,t){switch(Sn(Lp,t),Sn(Np,e),Sn(Qo,A0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lS(t,e)}Jr(Qo),Sn(Qo,t)}function Jf(){Jr(Qo),Jr(Np),Jr(Lp)}function yF(e){Wu(Lp.current);var t=Wu(Qo.current),r=lS(t,e.type);t!==r&&(Sn(Np,e),Sn(Qo,r))}function TA(e){Np.current===e&&(Jr(Qo),Jr(Np))}var En=su(0);function Am(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ds=null,Al=null,es=!1;function Q5(e,t){var r=Za(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function xF(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function CS(e){if(es){var t=Al;if(t){var r=t;if(!xF(e,t)){if(t=Lf(r.nextSibling),!t||!xF(e,t)){e.flags=e.flags&-1025|2,es=!1,Ds=e;return}Q5(Ds,r)}Ds=e,Al=Lf(t.firstChild)}else e.flags=e.flags&-1025|2,es=!1,Ds=e}}function bF(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ds=e}function qv(e){if(e!==Ds)return!1;if(!es)return bF(e),es=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!yS(t,e.memoizedProps))for(t=Al;t;)Q5(e,t),t=Lf(t.nextSibling);if(bF(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Al=Lf(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Al=null}}else Al=Ds?Lf(e.stateNode.nextSibling):null;return!0}function ab(){Al=Ds=null,es=!1}var Mf=[];function AA(){for(var e=0;e<Mf.length;e++)Mf[e]._workInProgressVersionPrimary=null;Mf.length=0}var sp=bc.ReactCurrentDispatcher,Qa=bc.ReactCurrentBatchConfig,Bp=0,Dn=null,Mi=null,Ci=null,Im=!1,lp=!1;function fa(){throw Error(et(321))}function IA(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ka(e[r],t[r]))return!1;return!0}function RA(e,t,r,n,i,a){if(Bp=a,Dn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sp.current=e===null||e.memoizedState===null?HQ:XQ,e=r(n,i),lp){a=0;do{if(lp=!1,!(25>a))throw Error(et(301));a+=1,Ci=Mi=null,t.updateQueue=null,sp.current=zQ,e=r(n,i)}while(lp)}if(sp.current=km,t=Mi!==null&&Mi.next!==null,Bp=0,Ci=Mi=Dn=null,Im=!1,t)throw Error(et(300));return e}function Yu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Dn.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Ec(){if(Mi===null){var e=Dn.alternate;e=e!==null?e.memoizedState:null}else e=Mi.next;var t=Ci===null?Dn.memoizedState:Ci.next;if(t!==null)Ci=t,Mi=e;else{if(e===null)throw Error(et(310));Mi=e,e={memoizedState:Mi.memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},Ci===null?Dn.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Ko(e,t){return typeof t=="function"?t(e):t}function _d(e){var t=Ec(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=Mi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var s=o=a=null,c=i;do{var l=c.lane;if((Bp&l)===l)s!==null&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===e?c.eagerState:e(n,c.action);else{var u={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};s===null?(o=s=u,a=n):s=s.next=u,Dn.lanes|=l,I0|=l}c=c.next}while(c!==null&&c!==i);s===null?a=n:s.next=o,Ka(n,t.memoizedState)||(Eo=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=s,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function yd(e){var t=Ec(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Ka(a,t.memoizedState)||(Eo=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function wF(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===n:(e=e.mutableReadLanes,(e=(Bp&e)===e)&&(t._workInProgressVersionPrimary=n,Mf.push(t))),e)return r(t._source);throw Mf.push(t),Error(et(350))}function eU(e,t,r,n){var i=ea;if(i===null)throw Error(et(349));var a=t._getVersion,o=a(t._source),s=sp.current,c=s.useState(function(){return wF(i,t,r)}),l=c[1],u=c[0];c=Ci;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,d=f.source;f=f.subscribe;var g=Dn;return e.memoizedState={refs:h,source:t,subscribe:n},s.useEffect(function(){h.getSnapshot=r,h.setSnapshot=l;var _=a(t._source);if(!Ka(o,_)){_=r(t._source),Ka(u,_)||(l(_),_=Ml(g),i.mutableReadLanes|=_&i.pendingLanes),_=i.mutableReadLanes,i.entangledLanes|=_;for(var v=i.entanglements,m=_;0<m;){var y=31-Wl(m),b=1<<y;v[y]|=_,m&=~b}}},[r,t,n]),s.useEffect(function(){return n(t._source,function(){var _=h.getSnapshot,v=h.setSnapshot;try{v(_(t._source));var m=Ml(g);i.mutableReadLanes|=m&i.pendingLanes}catch(y){v(function(){throw y})}})},[t,n]),Ka(p,r)&&Ka(d,t)&&Ka(f,n)||(e={pending:null,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:u},e.dispatch=l=kA.bind(null,Dn,e),c.queue=e,c.baseQueue=null,u=wF(i,t,r),c.memoizedState=c.baseState=u),u}function tU(e,t,r){var n=Ec();return eU(n,e,t,r)}function xd(e){var t=Yu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:e},e=e.dispatch=kA.bind(null,Dn,e),[t.memoizedState,e]}function Rm(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Dn.updateQueue,t===null?(t={lastEffect:null},Dn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function EF(e){var t=Yu();return e={current:e},t.memoizedState=e}function Pm(){return Ec().memoizedState}function TS(e,t,r,n){var i=Yu();Dn.flags|=e,i.memoizedState=Rm(1|t,r,void 0,n===void 0?null:n)}function PA(e,t,r,n){var i=Ec();n=n===void 0?null:n;var a=void 0;if(Mi!==null){var o=Mi.memoizedState;if(a=o.destroy,n!==null&&IA(n,o.deps)){Rm(t,r,a,n);return}}Dn.flags|=e,i.memoizedState=Rm(1|t,r,a,n)}function SF(e,t){return TS(516,4,e,t)}function Om(e,t){return PA(516,4,e,t)}function rU(e,t){return PA(4,2,e,t)}function nU(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iU(e,t,r){return r=r!=null?r.concat([e]):null,PA(4,2,nU.bind(null,t,e),r)}function OA(){}function aU(e,t){var r=Ec();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&IA(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function oU(e,t){var r=Ec();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&IA(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function VQ(e,t){var r=Zf();cc(98>r?98:r,function(){e(!0)}),cc(97<r?97:r,function(){var n=Qa.transition;Qa.transition=1;try{e(!1),t()}finally{Qa.transition=n}})}function kA(e,t,r){var n=Oa(),i=Ml(e),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(o===null?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Dn||o!==null&&o===Dn)lp=Im=!0;else{if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,c=o(s,r);if(a.eagerReducer=o,a.eagerState=c,Ka(c,s))return}catch{}finally{}Dl(e,i,n)}}var km={readContext:to,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useOpaqueIdentifier:fa,unstable_isNewReconciler:!1},HQ={readContext:to,useCallback:function(e,t){return Yu().memoizedState=[e,t===void 0?null:t],e},useContext:to,useEffect:SF,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,TS(4,2,nU.bind(null,t,e),r)},useLayoutEffect:function(e,t){return TS(4,2,e,t)},useMemo:function(e,t){var r=Yu();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Yu();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=kA.bind(null,Dn,e),[n.memoizedState,e]},useRef:EF,useState:xd,useDebugValue:OA,useDeferredValue:function(e){var t=xd(e),r=t[0],n=t[1];return SF(function(){var i=Qa.transition;Qa.transition=1;try{n(e)}finally{Qa.transition=i}},[e]),r},useTransition:function(){var e=xd(!1),t=e[0];return e=VQ.bind(null,e[1]),EF(e),[e,t]},useMutableSource:function(e,t,r){var n=Yu();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},eU(n,e,t,r)},useOpaqueIdentifier:function(){if(es){var e=!1,t=MQ(function(){throw e||(e=!0,r("r:"+(rb++).toString(36))),Error(et(355))}),r=xd(t)[1];return!(Dn.mode&2)&&(Dn.flags|=516,Rm(5,function(){r("r:"+(rb++).toString(36))},void 0,null)),t}return t="r:"+(rb++).toString(36),xd(t),t},unstable_isNewReconciler:!1},XQ={readContext:to,useCallback:aU,useContext:to,useEffect:Om,useImperativeHandle:iU,useLayoutEffect:rU,useMemo:oU,useReducer:_d,useRef:Pm,useState:function(){return _d(Ko)},useDebugValue:OA,useDeferredValue:function(e){var t=_d(Ko),r=t[0],n=t[1];return Om(function(){var i=Qa.transition;Qa.transition=1;try{n(e)}finally{Qa.transition=i}},[e]),r},useTransition:function(){var e=_d(Ko)[0];return[Pm().current,e]},useMutableSource:tU,useOpaqueIdentifier:function(){return _d(Ko)[0]},unstable_isNewReconciler:!1},zQ={readContext:to,useCallback:aU,useContext:to,useEffect:Om,useImperativeHandle:iU,useLayoutEffect:rU,useMemo:oU,useReducer:yd,useRef:Pm,useState:function(){return yd(Ko)},useDebugValue:OA,useDeferredValue:function(e){var t=yd(Ko),r=t[0],n=t[1];return Om(function(){var i=Qa.transition;Qa.transition=1;try{n(e)}finally{Qa.transition=i}},[e]),r},useTransition:function(){var e=yd(Ko)[0];return[Pm().current,e]},useMutableSource:tU,useOpaqueIdentifier:function(){return yd(Ko)[0]},unstable_isNewReconciler:!1},WQ=bc.ReactCurrentOwner,Eo=!1;function ha(e,t,r,n){t.child=e===null?J5(t,null,r,n):Tm(t,e.child,r,n)}function CF(e,t,r,n,i){r=r.render;var a=t.ref;return Bf(t,i),n=RA(e,t,r,n,a,i),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Us(e,t,i)):(t.flags|=1,ha(e,t,n,i),t.child)}function TF(e,t,r,n,i,a){if(e===null){var o=r.type;return typeof o=="function"&&!DA(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,sU(e,t,o,n,i,a)):(e=zg(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return o=e.child,!(i&a)&&(i=o.memoizedProps,r=r.compare,r=r!==null?r:Pp,r(i,n)&&e.ref===t.ref)?Us(e,t,a):(t.flags|=1,e=Kl(o,n),e.ref=t.ref,e.return=t,t.child=e)}function sU(e,t,r,n,i,a){if(e!==null&&Pp(e.memoizedProps,n)&&e.ref===t.ref)if(Eo=!1,(a&i)!==0)e.flags&16384&&(Eo=!0);else return t.lanes=e.lanes,Us(e,t,a);return AS(e,t,r,n,a)}function ob(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if(!(t.mode&4))t.memoizedState={baseLanes:0},Zv(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},Zv(t,a!==null?a.baseLanes:r);else return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Zv(t,e),null;else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Zv(t,n);return ha(e,t,i,r),t.child}function lU(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function AS(e,t,r,n,i){var a=ga(r)?uc:ji.current;return a=Kf(t,a),Bf(t,i),r=RA(e,t,r,n,a,i),e!==null&&!Eo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Us(e,t,i)):(t.flags|=1,ha(e,t,r,i),t.child)}function AF(e,t,r,n,i){if(ga(r)){var a=!0;$g(t)}else a=!1;if(Bf(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),K5(t,r,n),ES(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=to(l):(l=ga(r)?uc:ji.current,l=Kf(t,l));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||c!==l)&&_F(t,o,n,l),yl=!1;var h=t.memoizedState;o.state=h,Fp(t,n,o,i),c=t.memoizedState,s!==n||h!==c||va.current||yl?(typeof u=="function"&&(Cm(t,r,u,n),c=t.memoizedState),(s=yl||mF(t,r,s,n,h,c,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4)):(typeof o.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=l,n=s):(typeof o.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{o=t.stateNode,Y5(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:yo(t.type,s),o.props=l,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=to(c):(c=ga(r)?uc:ji.current,c=Kf(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==c)&&_F(t,o,n,c),yl=!1,h=t.memoizedState,o.state=h,Fp(t,n,o,i);var d=t.memoizedState;s!==f||h!==d||va.current||yl?(typeof p=="function"&&(Cm(t,r,p,n),d=t.memoizedState),(l=yl||mF(t,r,l,n,h,d,c))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,d,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,d,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),n=!1)}return IS(e,t,r,n,a,i)}function IS(e,t,r,n,i,a){lU(e,t);var o=(t.flags&64)!==0;if(!n&&!o)return i&&hF(t,r,!1),Us(e,t,a);n=t.stateNode,WQ.current=t;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Tm(t,e.child,null,a),t.child=Tm(t,null,s,a)):ha(e,t,s,a),t.memoizedState=n.state,i&&hF(t,r,!0),t.child}function IF(e){var t=e.stateNode;t.pendingContext?fF(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fF(e,t.context,!1),SS(e,t.containerInfo)}var Kv={dehydrated:null,retryLane:0};function RF(e,t,r){var n=t.pendingProps,i=En.current,a=!1,o;return(o=(t.flags&64)!==0)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Sn(En,i&1),e===null?(n.fallback!==void 0&&CS(t),e=n.children,i=n.fallback,a?(e=PF(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Kv,e):typeof n.unstable_expectedLoadTime=="number"?(e=PF(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Kv,t.lanes=33554432,e):(r=UA({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?a?(n=kF(e,t,n.children,n.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Kv,n):(r=OF(e,t,n.children,r),t.memoizedState=null,r):a?(n=kF(e,t,n.children,n.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Kv,n):(r=OF(e,t,n.children,r),t.memoizedState=null,r)}function PF(e,t,r,n){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},!(i&2)&&a!==null?(a.childLanes=0,a.pendingProps=t):a=UA(t,i,0,null),r=jf(r,i,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function OF(e,t,r,n){var i=e.child;return e=i.sibling,r=Kl(i,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function kF(e,t,r,n,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:r};return!(a&2)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=s,o=r.lastEffect,o!==null?(t.firstEffect=r.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Kl(o,s),e!==null?n=Kl(e,n):(n=jf(n,a,i,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function FF(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),W5(e.return,t)}function sb(e,t,r,n,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=a)}function NF(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(ha(e,t,n.children,r),n=En.current,n&2)n=n&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&FF(e,r);else if(e.tag===19)FF(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Sn(En,n),!(t.mode&2))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Am(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),sb(t,!1,i,r,a,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Am(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}sb(t,!0,r,null,a,t.lastEffect);break;case"together":sb(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Us(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),I0|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=Kl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var uU,RS,cU,fU;uU=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};RS=function(){};cU=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Wu(Qo.current);var a=null;switch(r){case"input":i=rS(e,i),n=rS(e,n),a=[];break;case"option":i=aS(e,i),n=aS(e,n),a=[];break;case"select":i=fn({},i,{value:void 0}),n=fn({},n,{value:void 0}),a=[];break;case"textarea":i=oS(e,i),n=oS(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ym)}uS(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ep.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(a=a||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ep.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Kr("scroll",e),a||s===c||(a=[])):typeof c=="object"&&c!==null&&c.$$typeof===aA?c.toString():(a=a||[]).push(l,c))}r&&(a=a||[]).push("style",r);var l=a;(t.updateQueue=l)&&(t.flags|=4)}};fU=function(e,t,r,n){r!==n&&(t.flags|=4)};function bd(e,t){if(!es)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function YQ(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ga(t.type)&&bm(),null;case 3:return Jf(),Jr(va),Jr(ji),AA(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(qv(t)?t.flags|=4:n.hydrate||(t.flags|=256)),RS(t),null;case 5:TA(t);var i=Wu(Lp.current);if(r=t.type,e!==null&&t.stateNode!=null)cU(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(et(166));return null}if(e=Wu(Qo.current),qv(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Tl]=t,n[xm]=a,r){case"dialog":Kr("cancel",n),Kr("close",n);break;case"iframe":case"object":case"embed":Kr("load",n);break;case"video":case"audio":for(e=0;e<Wd.length;e++)Kr(Wd[e],n);break;case"source":Kr("error",n);break;case"img":case"image":case"link":Kr("error",n),Kr("load",n);break;case"details":Kr("toggle",n);break;case"input":N3(n,a),Kr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Kr("invalid",n);break;case"textarea":B3(n,a),Kr("invalid",n)}uS(r,a),e=null;for(var o in a)a.hasOwnProperty(o)&&(i=a[o],o==="children"?typeof i=="string"?n.textContent!==i&&(e=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(e=["children",""+i]):Ep.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Kr("scroll",n));switch(r){case"input":Vv(n),L3(n,a,!0);break;case"textarea":Vv(n),M3(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=ym)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,e===sS.html&&(e=i5(r)),e===sS.html?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Tl]=t,e[xm]=n,uU(e,t,!1,!1),t.stateNode=e,o=cS(r,n),r){case"dialog":Kr("cancel",e),Kr("close",e),i=n;break;case"iframe":case"object":case"embed":Kr("load",e),i=n;break;case"video":case"audio":for(i=0;i<Wd.length;i++)Kr(Wd[i],e);i=n;break;case"source":Kr("error",e),i=n;break;case"img":case"image":case"link":Kr("error",e),Kr("load",e),i=n;break;case"details":Kr("toggle",e),i=n;break;case"input":N3(e,n),i=rS(e,n),Kr("invalid",e);break;case"option":i=aS(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=fn({},n,{value:void 0}),Kr("invalid",e);break;case"textarea":B3(e,n),i=oS(e,n),Kr("invalid",e);break;default:i=n}uS(r,i);var s=i;for(a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="style"?s5(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&a5(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Sp(e,c):typeof c=="number"&&Sp(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ep.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Kr("scroll",e):c!=null&&QT(e,a,c,o))}switch(r){case"input":Vv(e),L3(e,n,!1);break;case"textarea":Vv(e),M3(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zl(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?kf(e,!!n.multiple,a,!1):n.defaultValue!=null&&kf(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ym)}D5(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)fU(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(et(166));r=Wu(Lp.current),Wu(Qo.current),qv(t)?(n=t.stateNode,r=t.memoizedProps,n[Tl]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Tl]=t,t.stateNode=n)}return null;case 13:return Jr(En),n=t.memoizedState,t.flags&64?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&qv(t):r=e.memoizedState!==null,n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||En.current&1?Ii===0&&(Ii=3):((Ii===0||Ii===3)&&(Ii=4),ea===null||!(I0&134217727)&&!(yh&134217727)||Df(ea,Ui))),(n||r)&&(t.flags|=4),null);case 4:return Jf(),RS(t),e===null&&L5(t.stateNode.containerInfo),null;case 10:return SA(t),null;case 17:return ga(t.type)&&bm(),null;case 19:if(Jr(En),n=t.memoizedState,n===null)return null;if(a=(t.flags&64)!==0,o=n.rendering,o===null)if(a)bd(n,!1);else{if(Ii!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(o=Am(e),o!==null){for(t.flags|=64,bd(n,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sn(En,En.current&1|2),t.child}e=e.sibling}n.tail!==null&&Di()>LS&&(t.flags|=64,a=!0,bd(n,!1),t.lanes=33554432)}else{if(!a)if(e=Am(o),e!==null){if(t.flags|=64,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),bd(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!es)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Di()-n.renderingStartTime>LS&&r!==1073741824&&(t.flags|=64,a=!0,bd(n,!1),t.lanes=33554432);n.isBackwards?(o.sibling=t.child,t.child=o):(r=n.last,r!==null?r.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Di(),r.sibling=null,t=En.current,Sn(En,a?t&1|2:t&1),r):null;case 23:case 24:return MA(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(et(156,t.tag))}function qQ(e){switch(e.tag){case 1:ga(e.type)&&bm();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Jf(),Jr(va),Jr(ji),AA(),t=e.flags,t&64)throw Error(et(285));return e.flags=t&-4097|64,e;case 5:return TA(e),null;case 13:return Jr(En),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Jr(En),null;case 4:return Jf(),null;case 10:return SA(e),null;case 23:case 24:return MA(),null;default:return null}}function FA(e,t){try{var r="",n=t;do r+=RJ(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i}}function PS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var KQ=typeof WeakMap=="function"?WeakMap:Map;function hU(e,t,r){r=Ll(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Nm||(Nm=!0,BS=n),PS(e,t)},r}function dU(e,t,r){r=Ll(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return PS(e,t),n(i)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this),PS(e,t));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}var ZQ=typeof WeakSet=="function"?WeakSet:Set;function LF(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ul(e,r)}else t.current=null}function JQ(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:yo(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&xA(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(et(163))}function QQ(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;n=i.next,i=i.tag,i&4&&i&1&&(wU(r,e),see(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:yo(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&gF(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}gF(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&D5(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&m5(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(et(163))}function BF(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=o5("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function MF(e,t){if(tc&&typeof tc.onCommitFiberUnmount=="function")try{tc.onCommitFiberUnmount(bA,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)wU(t,r);else{n=t;try{i()}catch(a){Ul(n,a)}}r=r.next}while(r!==e)}break;case 1:if(LF(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Ul(t,a)}break;case 5:LF(t);break;case 4:pU(e,t)}}function DF(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function UF(e){return e.tag===5||e.tag===3||e.tag===4}function jF(e){e:{for(var t=e.return;t!==null;){if(UF(t))break e;t=t.return}throw Error(et(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(et(161))}r.flags&16&&(Sp(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||UF(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?OS(e,r,t):kS(e,r,t)}function OS(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ym));else if(n!==4&&(e=e.child,e!==null))for(OS(e,t,r),e=e.sibling;e!==null;)OS(e,t,r),e=e.sibling}function kS(e,t,r){var n=e.tag,i=n===5||n===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(kS(e,t,r),e=e.sibling;e!==null;)kS(e,t,r),e=e.sibling}function pU(e,t){for(var r=t,n=!1,i,a;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(et(160));switch(i=n.stateNode,n.tag){case 5:a=!1;break e;case 3:i=i.containerInfo,a=!0;break e;case 4:i=i.containerInfo,a=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var o=e,s=r,c=s;;)if(MF(o,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}a?(o=i,s=r.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(MF(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function lb(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var i=e!==null?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(r[xm]=n,e==="input"&&n.type==="radio"&&n.name!=null&&r5(r,n),cS(e,i),t=cS(e,n),i=0;i<a.length;i+=2){var o=a[i],s=a[i+1];o==="style"?s5(r,s):o==="dangerouslySetInnerHTML"?a5(r,s):o==="children"?Sp(r,s):QT(r,o,s,t)}switch(e){case"input":nS(r,n);break;case"textarea":n5(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,a=n.value,a!=null?kf(r,!!n.multiple,a,!1):e!==!!n.multiple&&(n.defaultValue!=null?kf(r,!!n.multiple,n.defaultValue,!0):kf(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(et(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,m5(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(BA=Di(),BF(t.child,!0)),$F(t);return;case 19:$F(t);return;case 17:return;case 23:case 24:BF(t,t.memoizedState!==null);return}throw Error(et(163))}function $F(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ZQ),t.forEach(function(n){var i=cee.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function eee(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var tee=Math.ceil,Fm=bc.ReactCurrentDispatcher,NA=bc.ReactCurrentOwner,jt=0,ea=null,ni=null,Ui=0,fc=0,FS=su(0),Ii=0,j_=null,_h=0,I0=0,yh=0,LA=0,NS=null,BA=0,LS=1/0;function xh(){LS=Di()+500}var mt=null,Nm=!1,BS=null,Zo=null,ql=!1,up=null,Yd=90,MS=[],DS=[],Hs=null,cp=0,US=null,Vg=-1,Bs=0,Hg=0,fp=null,Xg=!1;function Oa(){return jt&48?Di():Vg!==-1?Vg:Vg=Di()}function Ml(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return Zf()===99?1:2;if(Bs===0&&(Bs=_h),GQ.transition!==0){Hg!==0&&(Hg=NS!==null?NS.pendingLanes:0),e=Bs;var t=4186112&~Hg;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Zf(),jt&4&&e===98?e=mm(12,Bs):(e=XJ(e),e=mm(e,Bs)),e}function Dl(e,t,r){if(50<cp)throw cp=0,US=null,Error(et(185));if(e=$_(e,t),e===null)return null;F_(e,t,r),e===ea&&(yh|=t,Ii===4&&Df(e,Ui));var n=Zf();t===1?jt&8&&!(jt&48)?jS(e):(ro(e,r),jt===0&&(xh(),hs())):(!(jt&4)||n!==98&&n!==99||(Hs===null?Hs=new Set([e]):Hs.add(e)),ro(e,r)),NS=e}function $_(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function ro(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Wl(o),c=1<<s,l=a[s];if(l===-1){if(!(c&n)||c&i){l=t,pf(c);var u=Wr;a[s]=10<=u?l+250:6<=u?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);o&=~c}if(n=Ip(e,e===ea?Ui:0),t=Wr,n===0)r!==null&&(r!==nb&&bS(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==nb&&bS(r)}t===15?(r=jS.bind(null,e),Ns===null?(Ns=[r],Gg=wA(D_,z5)):Ns.push(r),r=nb):t===14?r=kp(99,jS.bind(null,e)):(r=zJ(t),r=kp(r,vU.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function vU(e){if(Vg=-1,Hg=Bs=0,jt&48)throw Error(et(327));var t=e.callbackNode;if(lu()&&e.callbackNode!==t)return null;var r=Ip(e,e===ea?Ui:0);if(r===0)return null;var n=r,i=jt;jt|=16;var a=yU();(ea!==e||Ui!==n)&&(xh(),Uf(e,n));do try{iee();break}catch(s){_U(e,s)}while(1);if(EA(),Fm.current=a,jt=i,ni!==null?n=0:(ea=null,Ui=0,n=Ii),_h&yh)Uf(e,0);else if(n!==0){if(n===2&&(jt|=64,e.hydrate&&(e.hydrate=!1,xA(e.containerInfo)),r=S5(e),r!==0&&(n=qd(e,r))),n===1)throw t=j_,Uf(e,0),Df(e,r),ro(e,Di()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(et(345));case 2:ku(e);break;case 3:if(Df(e,r),(r&62914560)===r&&(n=BA+500-Di(),10<n)){if(Ip(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Oa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=lF(ku.bind(null,e),n);break}ku(e);break;case 4:if(Df(e,r),(r&4186112)===r)break;for(n=e.eventTimes,i=-1;0<r;){var o=31-Wl(r);a=1<<o,o=n[o],o>i&&(i=o),r&=~a}if(r=i,r=Di()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tee(r/1960))-r,10<r){e.timeoutHandle=lF(ku.bind(null,e),r);break}ku(e);break;case 5:ku(e);break;default:throw Error(et(329))}}return ro(e,Di()),e.callbackNode===t?vU.bind(null,e):null}function Df(e,t){for(t&=~LA,t&=~yh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Wl(t),n=1<<r;e[r]=-1,t&=~n}}function jS(e){if(jt&48)throw Error(et(327));if(lu(),e===ea&&e.expiredLanes&Ui){var t=Ui,r=qd(e,t);_h&yh&&(t=Ip(e,t),r=qd(e,t))}else t=Ip(e,0),r=qd(e,t);if(e.tag!==0&&r===2&&(jt|=64,e.hydrate&&(e.hydrate=!1,xA(e.containerInfo)),t=S5(e),t!==0&&(r=qd(e,t))),r===1)throw r=j_,Uf(e,0),Df(e,t),ro(e,Di()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e),ro(e,Di()),null}function ree(){if(Hs!==null){var e=Hs;Hs=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,ro(t,Di())})}hs()}function gU(e,t){var r=jt;jt|=1;try{return e(t)}finally{jt=r,jt===0&&(xh(),hs())}}function mU(e,t){var r=jt;jt&=-2,jt|=8;try{return e(t)}finally{jt=r,jt===0&&(xh(),hs())}}function Zv(e,t){Sn(FS,fc),fc|=t,_h|=t}function MA(){fc=FS.current,Jr(FS)}function Uf(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,BQ(r)),ni!==null)for(r=ni.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&bm();break;case 3:Jf(),Jr(va),Jr(ji),AA();break;case 5:TA(n);break;case 4:Jf();break;case 13:Jr(En);break;case 19:Jr(En);break;case 10:SA(n);break;case 23:case 24:MA()}r=r.return}ea=e,ni=Kl(e.current,null),Ui=fc=_h=t,Ii=0,j_=null,LA=yh=I0=0}function _U(e,t){do{var r=ni;try{if(EA(),sp.current=km,Im){for(var n=Dn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Im=!1}if(Bp=0,Ci=Mi=Dn=null,lp=!1,NA.current=null,r===null||r.return===null){Ii=1,j_=t,ni=null;break}e:{var a=e,o=r.return,s=r,c=t;if(t=Ui,s.flags|=2048,s.firstEffect=s.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c;if(!(s.mode&2)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=(En.current&1)!==0,h=o;do{var p;if(p=h.tag===13){var d=h.memoizedState;if(d!==null)p=d.dehydrated!==null;else{var g=h.memoizedProps;p=g.fallback===void 0?!1:g.unstable_avoidThisFallback!==!0?!0:!f}}if(p){var _=h.updateQueue;if(_===null){var v=new Set;v.add(l),h.updateQueue=v}else _.add(l);if(!(h.mode&2)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var m=Ll(-1,1);m.tag=2,Bl(s,m)}s.lanes|=1;break e}c=void 0,s=t;var y=a.pingCache;if(y===null?(y=a.pingCache=new KQ,c=new Set,y.set(l,c)):(c=y.get(l),c===void 0&&(c=new Set,y.set(l,c))),!c.has(s)){c.add(s);var b=uee.bind(null,a,l,s);l.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(h!==null);c=Error((Of(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ii!==5&&(Ii=2),c=FA(c,s),h=o;do{switch(h.tag){case 3:a=c,h.flags|=4096,t&=-t,h.lanes|=t;var w=hU(h,a,t);vF(h,w);break e;case 1:a=c;var E=h.type,C=h.stateNode;if(!(h.flags&64)&&(typeof E.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Zo===null||!Zo.has(C)))){h.flags|=4096,t&=-t,h.lanes|=t;var T=dU(h,a,t);vF(h,T);break e}}h=h.return}while(h!==null)}bU(r)}catch(A){t=A,ni===r&&r!==null&&(ni=r=r.return);continue}break}while(1)}function yU(){var e=Fm.current;return Fm.current=km,e===null?km:e}function qd(e,t){var r=jt;jt|=16;var n=yU();ea===e&&Ui===t||Uf(e,t);do try{nee();break}catch(i){_U(e,i)}while(1);if(EA(),jt=r,Fm.current=n,ni!==null)throw Error(et(261));return ea=null,Ui=0,Ii}function nee(){for(;ni!==null;)xU(ni)}function iee(){for(;ni!==null&&!UQ();)xU(ni)}function xU(e){var t=EU(e.alternate,e,fc);e.memoizedProps=e.pendingProps,t===null?bU(e):ni=t,NA.current=null}function bU(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=qQ(t),r!==null){r.flags&=2047,ni=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=YQ(r,t,fc),r!==null){ni=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||fc&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){ni=t;return}ni=t=e}while(t!==null);Ii===0&&(Ii=5)}function ku(e){var t=Zf();return cc(99,aee.bind(null,e,t)),null}function aee(e,t){do lu();while(up!==null);if(jt&48)throw Error(et(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var o=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Wl(a),l=1<<c;i[c]=0,o[c]=-1,s[c]=-1,a&=~l}if(Hs!==null&&!(n&24)&&Hs.has(e)&&Hs.delete(e),e===ea&&(ni=ea=null,Ui=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=jt,jt|=32,NA.current=null,eb=Dg,o=tF(),gS(o)){if("selectionStart"in o)s={start:o.selectionStart,end:o.selectionEnd};else e:if(s=(s=o.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&l.rangeCount!==0){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var u=0,f=-1,h=-1,p=0,d=0,g=o,_=null;t:for(;;){for(var v;g!==s||a!==0&&g.nodeType!==3||(f=u+a),g!==c||l!==0&&g.nodeType!==3||(h=u+l),g.nodeType===3&&(u+=g.nodeValue.length),(v=g.firstChild)!==null;)_=g,g=v;for(;;){if(g===o)break t;if(_===s&&++p===a&&(f=u),_===c&&++d===l&&(h=u),(v=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=v}s=f===-1||h===-1?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;tb={focusedElem:o,selectionRange:s},Dg=!1,fp=null,Xg=!1,mt=n;do try{oee()}catch(A){if(mt===null)throw Error(et(330));Ul(mt,A),mt=mt.nextEffect}while(mt!==null);fp=null,mt=n;do try{for(o=e;mt!==null;){var m=mt.flags;if(m&16&&Sp(mt.stateNode,""),m&128){var y=mt.alternate;if(y!==null){var b=y.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(m&1038){case 2:jF(mt),mt.flags&=-3;break;case 6:jF(mt),mt.flags&=-3,lb(mt.alternate,mt);break;case 1024:mt.flags&=-1025;break;case 1028:mt.flags&=-1025,lb(mt.alternate,mt);break;case 4:lb(mt.alternate,mt);break;case 8:s=mt,pU(o,s);var w=s.alternate;DF(s),w!==null&&DF(w)}mt=mt.nextEffect}}catch(A){if(mt===null)throw Error(et(330));Ul(mt,A),mt=mt.nextEffect}while(mt!==null);if(b=tb,y=tF(),m=b.focusedElem,o=b.selectionRange,y!==m&&m&&m.ownerDocument&&k5(m.ownerDocument.documentElement,m)){for(o!==null&&gS(m)&&(y=o.start,b=o.end,b===void 0&&(b=y),"selectionStart"in m?(m.selectionStart=y,m.selectionEnd=Math.min(b,m.value.length)):(b=(y=m.ownerDocument||document)&&y.defaultView||window,b.getSelection&&(b=b.getSelection(),s=m.textContent.length,w=Math.min(o.start,s),o=o.end===void 0?w:Math.min(o.end,s),!b.extend&&w>o&&(s=o,o=w,w=s),s=eF(m,w),a=eF(m,o),s&&a&&(b.rangeCount!==1||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&(y=y.createRange(),y.setStart(s.node,s.offset),b.removeAllRanges(),w>o?(b.addRange(y),b.extend(a.node,a.offset)):(y.setEnd(a.node,a.offset),b.addRange(y)))))),y=[],b=m;b=b.parentNode;)b.nodeType===1&&y.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<y.length;m++)b=y[m],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}Dg=!!eb,tb=eb=null,e.current=r,mt=n;do try{for(m=e;mt!==null;){var E=mt.flags;if(E&36&&QQ(m,mt.alternate,mt),E&128){y=void 0;var C=mt.ref;if(C!==null){var T=mt.stateNode;switch(mt.tag){case 5:y=T;break;default:y=T}typeof C=="function"?C(y):C.current=y}}mt=mt.nextEffect}}catch(A){if(mt===null)throw Error(et(330));Ul(mt,A),mt=mt.nextEffect}while(mt!==null);mt=null,$Q(),jt=i}else e.current=r;if(ql)ql=!1,up=e,Yd=t;else for(mt=n;mt!==null;)t=mt.nextEffect,mt.nextEffect=null,mt.flags&8&&(E=mt,E.sibling=null,E.stateNode=null),mt=t;if(n=e.pendingLanes,n===0&&(Zo=null),n===1?e===US?cp++:(cp=0,US=e):cp=0,r=r.stateNode,tc&&typeof tc.onCommitFiberRoot=="function")try{tc.onCommitFiberRoot(bA,r,void 0,(r.current.flags&64)===64)}catch{}if(ro(e,Di()),Nm)throw Nm=!1,e=BS,BS=null,e;return jt&8||hs(),null}function oee(){for(;mt!==null;){var e=mt.alternate;Xg||fp===null||(mt.flags&8?j3(mt,fp)&&(Xg=!0):mt.tag===13&&eee(e,mt)&&j3(mt,fp)&&(Xg=!0));var t=mt.flags;t&256&&JQ(e,mt),!(t&512)||ql||(ql=!0,kp(97,function(){return lu(),null})),mt=mt.nextEffect}}function lu(){if(Yd!==90){var e=97<Yd?97:Yd;return Yd=90,cc(e,lee)}return!1}function see(e,t){MS.push(t,e),ql||(ql=!0,kp(97,function(){return lu(),null}))}function wU(e,t){DS.push(t,e),ql||(ql=!0,kp(97,function(){return lu(),null}))}function lee(){if(up===null)return!1;var e=up;if(up=null,jt&48)throw Error(et(331));var t=jt;jt|=32;var r=DS;DS=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(c){if(a===null)throw Error(et(330));Ul(a,c)}}for(r=MS,MS=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var s=i.create;i.destroy=s()}catch(c){if(a===null)throw Error(et(330));Ul(a,c)}}for(s=e.current.firstEffect;s!==null;)e=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=e;return jt=t,hs(),!0}function GF(e,t,r){t=FA(r,t),t=hU(e,t,1),Bl(e,t),t=Oa(),e=$_(e,1),e!==null&&(F_(e,1,t),ro(e,t))}function Ul(e,t){if(e.tag===3)GF(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){GF(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zo===null||!Zo.has(n))){e=FA(t,e);var i=dU(r,e,1);if(Bl(r,i),i=Oa(),r=$_(r,1),r!==null)F_(r,1,i),ro(r,i);else if(typeof n.componentDidCatch=="function"&&(Zo===null||!Zo.has(n)))try{n.componentDidCatch(t,e)}catch{}break}}r=r.return}}function uee(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Oa(),e.pingedLanes|=e.suspendedLanes&r,ea===e&&(Ui&r)===r&&(Ii===4||Ii===3&&(Ui&62914560)===Ui&&500>Di()-BA?Uf(e,0):LA|=r),ro(e,t)}function cee(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Bs===0&&(Bs=_h),t=vf(62914560&~Bs),t===0&&(t=4194304)):t=Zf()===99?1:2:t=1),r=Oa(),e=$_(e,t),e!==null&&(F_(e,t,r),ro(e,r))}var EU;EU=function(e,t,r){var n=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||va.current)Eo=!0;else if(r&n)Eo=!!(e.flags&16384);else{switch(Eo=!1,t.tag){case 3:IF(t),ab();break;case 5:yF(t);break;case 1:ga(t.type)&&$g(t);break;case 4:SS(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;Sn(wm,i._currentValue),i._currentValue=n;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?RF(e,t,r):(Sn(En,En.current&1),t=Us(e,t,r),t!==null?t.sibling:null);Sn(En,En.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&64){if(n)return NF(e,t,r);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Sn(En,En.current),n)break;return null;case 23:case 24:return t.lanes=0,ob(e,t,r)}return Us(e,t,r)}else Eo=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Kf(t,ji.current),Bf(t,r),i=RA(null,t,n,e,i,r),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(n)){var a=!0;$g(t)}else a=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,CA(t);var o=n.getDerivedStateFromProps;typeof o=="function"&&Cm(t,n,o,e),i.updater=U_,t.stateNode=i,i._reactInternals=t,ES(t,n,e,r),t=IS(null,t,n,!0,a,r)}else t.tag=0,ha(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=hee(i),e=yo(i,e),a){case 0:t=AS(null,t,i,e,r);break e;case 1:t=AF(null,t,i,e,r);break e;case 11:t=CF(null,t,i,e,r);break e;case 14:t=TF(null,t,i,yo(i.type,e),n,r);break e}throw Error(et(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yo(n,i),AS(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yo(n,i),AF(e,t,n,i,r);case 3:if(IF(t),n=t.updateQueue,e===null||n===null)throw Error(et(282));if(n=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,Y5(e,t),Fp(t,n,null,r),n=t.memoizedState.element,n===i)ab(),t=Us(e,t,r);else{if(i=t.stateNode,(a=i.hydrate)&&(Al=Lf(t.stateNode.containerInfo.firstChild),Ds=t,a=es=!0),a){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)a=e[i],a._workInProgressVersionPrimary=e[i+1],Mf.push(a);for(r=J5(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else ha(e,t,n,r),ab();t=t.child}return t;case 5:return yF(t),e===null&&CS(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,yS(n,i)?o=null:a!==null&&yS(n,a)&&(t.flags|=16),lU(e,t),ha(e,t,o,r),t.child;case 6:return e===null&&CS(t),null;case 13:return RF(e,t,r);case 4:return SS(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Tm(t,null,n,r):ha(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yo(n,i),CF(e,t,n,i,r);case 7:return ha(e,t,t.pendingProps,r),t.child;case 8:return ha(e,t,t.pendingProps.children,r),t.child;case 12:return ha(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;var s=t.type._context;if(Sn(wm,s._currentValue),s._currentValue=a,o!==null)if(s=o.value,a=Ka(s,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(s,a):1073741823)|0,a===0){if(o.children===i.children&&!va.current){t=Us(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var l=c.firstContext;l!==null;){if(l.context===n&&l.observedBits&a){s.tag===1&&(l=Ll(-1,r&-r),l.tag=2,Bl(s,l)),s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),W5(s.return,r),c.lanes|=r;break}l=l.next}}else o=s.tag===10&&s.type===t.type?null:s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ha(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps,n=a.children,Bf(t,r),i=to(i,a.unstable_observedBits),n=n(i),t.flags|=1,ha(e,t,n,r),t.child;case 14:return i=t.type,a=yo(i,t.pendingProps),a=yo(i.type,a),TF(e,t,i,a,n,r);case 15:return sU(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yo(n,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ga(n)?(e=!0,$g(t)):e=!1,Bf(t,r),K5(t,n,i),ES(t,n,i,r),IS(null,t,n,!0,e,r);case 19:return NF(e,t,r);case 23:return ob(e,t,r);case 24:return ob(e,t,r)}throw Error(et(156,t.tag))};function fee(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(e,t,r,n){return new fee(e,t,r,n)}function DA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hee(e){if(typeof e=="function")return DA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===P_)return 11;if(e===O_)return 14}return 2}function Kl(e,t){var r=e.alternate;return r===null?(r=Za(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zg(e,t,r,n,i,a){var o=2;if(n=e,typeof e=="function")DA(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case bl:return jf(r.children,i,a,t);case Q6:o=8,i|=16;break;case eA:o=8,i|=1;break;case ep:return e=Za(12,r,t,i|8),e.elementType=ep,e.type=ep,e.lanes=a,e;case tp:return e=Za(13,r,t,i),e.type=tp,e.elementType=tp,e.lanes=a,e;case dm:return e=Za(19,r,t,i),e.elementType=dm,e.lanes=a,e;case oA:return UA(r,i,a,t);case tS:return e=Za(24,r,t,i),e.elementType=tS,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tA:o=10;break e;case rA:o=9;break e;case P_:o=11;break e;case O_:o=14;break e;case nA:o=16,n=null;break e;case iA:o=22;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=Za(o,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function jf(e,t,r,n){return e=Za(7,e,n,t),e.lanes=r,e}function UA(e,t,r,n){return e=Za(23,e,n,t),e.elementType=oA,e.lanes=r,e}function ub(e,t,r){return e=Za(6,e,null,t),e.lanes=r,e}function cb(e,t,r){return t=Za(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dee(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=W1(0),this.expirationTimes=W1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W1(0),this.mutableSourceEagerHydrationData=null}function pee(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hu,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Lm(e,t,r,n){var i=t.current,a=Oa(),o=Ml(i);e:if(r){r=r._reactInternals;t:{if(wc(r)!==r||r.tag!==1)throw Error(et(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ga(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(et(171))}if(r.tag===1){var c=r.type;if(ga(c)){r=j5(r,c,s);break e}}r=s}else r=Yl;return t.context===null?t.context=r:t.pendingContext=r,t=Ll(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Bl(i,t),Dl(i,o,a),o}function fb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function VF(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jA(e,t){VF(e,t),(e=e.alternate)&&VF(e,t)}function vee(){return null}function $A(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new dee(e,t,r!=null&&r.hydrate===!0),t=Za(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,CA(t),e[mh]=r.current,L5(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var i=t._getVersion;i=i(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}$A.prototype.render=function(e){Lm(e,this._internalRoot,null,null)};$A.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Lm(null,e,null,function(){t[mh]=null})};function R0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gee(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new $A(e,0,t?{hydrate:!0}:void 0)}function G_(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a._internalRoot;if(typeof i=="function"){var s=i;i=function(){var l=fb(o);s.call(l)}}Lm(t,o,e,i)}else{if(a=r._reactRootContainer=gee(r,n),o=a._internalRoot,typeof i=="function"){var c=i;i=function(){var l=fb(o);c.call(l)}}mU(function(){Lm(t,o,e,i)})}return fb(o)}p5=function(e){if(e.tag===13){var t=Oa();Dl(e,4,t),jA(e,4)}};fA=function(e){if(e.tag===13){var t=Oa();Dl(e,67108864,t),jA(e,67108864)}};v5=function(e){if(e.tag===13){var t=Oa(),r=Ml(e);Dl(e,r,t),jA(e,r)}};g5=function(e,t){return t()};fS=function(e,t,r){switch(t){case"input":if(nS(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=M_(n);if(!i)throw Error(et(90));t5(n),nS(n,i)}}}break;case"textarea":n5(e,r);break;case"select":t=r.value,t!=null&&kf(e,!!r.multiple,t,!1)}};lA=gU;c5=function(e,t,r,n,i){var a=jt;jt|=4;try{return cc(98,e.bind(null,t,r,n,i))}finally{jt=a,jt===0&&(xh(),hs())}};uA=function(){!(jt&49)&&(ree(),lu())};f5=function(e,t){var r=jt;jt|=2;try{return e(t)}finally{jt=r,jt===0&&(xh(),hs())}};function SU(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R0(t))throw Error(et(200));return pee(e,t,null,r)}var mee={Events:[T0,xf,M_,l5,u5,lu,{current:!1}]},wd={findFiberByHostInstance:zu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},_ee={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=d5(e),e===null?null:e.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||vee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jv.isDisabled&&Jv.supportsFiber)try{bA=Jv.inject(_ee),tc=Jv}catch{}}io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mee;io.createPortal=SU;io.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):Error(et(268,Object.keys(e)));return e=d5(t),e=e===null?null:e.stateNode,e};io.flushSync=function(e,t){var r=jt;if(r&48)return e(t);jt|=1;try{if(e)return cc(99,e.bind(null,t))}finally{jt=r,hs()}};io.hydrate=function(e,t,r){if(!R0(t))throw Error(et(200));return G_(null,e,t,!0,r)};io.render=function(e,t,r){if(!R0(t))throw Error(et(200));return G_(null,e,t,!1,r)};io.unmountComponentAtNode=function(e){if(!R0(e))throw Error(et(40));return e._reactRootContainer?(mU(function(){G_(null,null,e,!1,function(){e._reactRootContainer=null,e[mh]=null})}),!0):!1};io.unstable_batchedUpdates=gU;io.unstable_createPortal=function(e,t){return SU(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};io.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!R0(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return G_(e,t,r,!1,n)};io.version="17.0.2";function CU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CU)}catch(e){console.error(e)}}CU(),q6.exports=io;var TU=q6.exports;const Zl=Gi(TU);function wo(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Jl(e){return!!e&&!!e[sn]}function Ws(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Aee}(e)||Array.isArray(e)||!!e[KF]||!!(!((t=e.constructor)===null||t===void 0)&&t[KF])||GA(e)||VA(e))}function hc(e,t,r){r===void 0&&(r=!1),bh(e)===0?(r?Object.keys:Gf)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function bh(e){var t=e[sn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:GA(e)?2:VA(e)?3:0}function $f(e,t){return bh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yee(e,t){return bh(e)===2?e.get(t):e[t]}function AU(e,t,r){var n=bh(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function IU(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function GA(e){return Cee&&e instanceof Map}function VA(e){return Tee&&e instanceof Set}function Fu(e){return e.o||e.t}function HA(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=PU(e);delete t[sn];for(var r=Gf(t),n=0;n<r.length;n++){var i=r[n],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function XA(e,t){return t===void 0&&(t=!1),zA(e)||Jl(e)||!Ws(e)||(bh(e)>1&&(e.set=e.add=e.clear=e.delete=xee),Object.freeze(e),t&&hc(e,function(r,n){return XA(n,!0)},!0)),e}function xee(){wo(2)}function zA(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ts(e){var t=HS[e];return t||wo(18,e),t}function bee(e,t){HS[e]||(HS[e]=t)}function $S(){return Mp}function hb(e,t){t&&(ts("Patches"),e.u=[],e.s=[],e.v=t)}function Bm(e){GS(e),e.p.forEach(wee),e.p=null}function GS(e){e===Mp&&(Mp=e.l)}function HF(e){return Mp={p:[],l:Mp,h:e,m:!0,_:0}}function wee(e){var t=e[sn];t.i===0||t.i===1?t.j():t.g=!0}function db(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||ts("ES5").S(t,e,n),n?(r[sn].P&&(Bm(t),wo(4)),Ws(e)&&(e=Mm(t,e),t.l||Dm(t,e)),t.u&&ts("Patches").M(r[sn].t,e,t.u,t.s)):e=Mm(t,r,[]),Bm(t),t.u&&t.v(t.u,t.s),e!==RU?e:void 0}function Mm(e,t,r){if(zA(t))return t;var n=t[sn];if(!n)return hc(t,function(s,c){return XF(e,n,t,s,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Dm(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=HA(n.k):n.o,a=i,o=!1;n.i===3&&(a=new Set(i),i.clear(),o=!0),hc(a,function(s,c){return XF(e,n,i,s,c,r,o)}),Dm(e,i,!1),r&&e.u&&ts("Patches").N(n,r,e.u,e.s)}return n.o}function XF(e,t,r,n,i,a,o){if(Jl(i)){var s=Mm(e,i,a&&t&&t.i!==3&&!$f(t.R,n)?a.concat(n):void 0);if(AU(r,n,s),!Jl(s))return;e.m=!1}else o&&r.add(i);if(Ws(i)&&!zA(i)){if(!e.h.D&&e._<1)return;Mm(e,i),t&&t.A.l||Dm(e,i)}}function Dm(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&XA(t,r)}function pb(e,t){var r=e[sn];return(r?Fu(r):e)[t]}function zF(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function wl(e){e.P||(e.P=!0,e.l&&wl(e.l))}function vb(e){e.o||(e.o=HA(e.t))}function VS(e,t,r){var n=GA(t)?ts("MapSet").F(t,r):VA(t)?ts("MapSet").T(t,r):e.O?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:$S(),P:!1,I:!1,R:{},l:a,t:i,k:null,o:null,j:null,C:!1},c=s,l=Dp;o&&(c=[s],l=Kd);var u=Proxy.revocable(c,l),f=u.revoke,h=u.proxy;return s.k=h,s.j=f,h}(t,r):ts("ES5").J(t,r);return(r?r.A:$S()).p.push(n),n}function Eee(e){return Jl(e)||wo(22,e),function t(r){if(!Ws(r))return r;var n,i=r[sn],a=bh(r);if(i){if(!i.P&&(i.i<4||!ts("ES5").K(i)))return i.t;i.I=!0,n=WF(r,a),i.I=!1}else n=WF(r,a);return hc(n,function(o,s){i&&yee(i.t,o)===s||AU(n,o,t(s))}),a===3?new Set(n):n}(e)}function WF(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return HA(e)}function See(){function e(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var c=this[sn];return Dp.get(c,a)},set:function(c){var l=this[sn];Dp.set(l,a,c)}},s}function t(a){for(var o=a.length-1;o>=0;o--){var s=a[o][sn];if(!s.P)switch(s.i){case 5:n(s)&&wl(s);break;case 4:r(s)&&wl(s)}}}function r(a){for(var o=a.t,s=a.k,c=Gf(s),l=c.length-1;l>=0;l--){var u=c[l];if(u!==sn){var f=o[u];if(f===void 0&&!$f(o,u))return!0;var h=s[u],p=h&&h[sn];if(p?p.t!==f:!IU(h,f))return!0}}var d=!!o[sn];return c.length!==Gf(o).length+(d?0:1)}function n(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var i={};bee("ES5",{J:function(a,o){var s=Array.isArray(a),c=function(u,f){if(u){for(var h=Array(f.length),p=0;p<f.length;p++)Object.defineProperty(h,""+p,e(p,!0));return h}var d=PU(f);delete d[sn];for(var g=Gf(d),_=0;_<g.length;_++){var v=g[_];d[v]=e(v,u||!!d[v].enumerable)}return Object.create(Object.getPrototypeOf(f),d)}(s,a),l={i:s?5:4,A:o?o.A:$S(),P:!1,I:!1,R:{},l:o,t:a,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,sn,{value:l,writable:!0}),c},S:function(a,o,s){s?Jl(o)&&o[sn].A===a&&t(a.p):(a.u&&function c(l){if(l&&typeof l=="object"){var u=l[sn];if(u){var f=u.t,h=u.k,p=u.R,d=u.i;if(d===4)hc(h,function(y){y!==sn&&(f[y]!==void 0||$f(f,y)?p[y]||c(h[y]):(p[y]=!0,wl(u)))}),hc(f,function(y){h[y]!==void 0||$f(h,y)||(p[y]=!1,wl(u))});else if(d===5){if(n(u)&&(wl(u),p.length=!0),h.length<f.length)for(var g=h.length;g<f.length;g++)p[g]=!1;else for(var _=f.length;_<h.length;_++)p[_]=!0;for(var v=Math.min(h.length,f.length),m=0;m<v;m++)h.hasOwnProperty(m)||(p[m]=!0),p[m]===void 0&&c(h[m])}}}}(a.p[0]),t(a.p))},K:function(a){return a.i===4?r(a):n(a)}})}var YF,Mp,WA=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Cee=typeof Map<"u",Tee=typeof Set<"u",qF=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",RU=WA?Symbol.for("immer-nothing"):((YF={})["immer-nothing"]=!0,YF),KF=WA?Symbol.for("immer-draftable"):"__$immer_draftable",sn=WA?Symbol.for("immer-state"):"__$immer_state",Aee=""+Object.prototype.constructor,Gf=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,PU=Object.getOwnPropertyDescriptors||function(e){var t={};return Gf(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},HS={},Dp={get:function(e,t){if(t===sn)return e;var r=Fu(e);if(!$f(r,t))return function(i,a,o){var s,c=zF(a,o);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Ws(n)?n:n===pb(e.t,t)?(vb(e),e.o[t]=VS(e.A.h,n,e)):n},has:function(e,t){return t in Fu(e)},ownKeys:function(e){return Reflect.ownKeys(Fu(e))},set:function(e,t,r){var n=zF(Fu(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=pb(Fu(e),t),a=i==null?void 0:i[sn];if(a&&a.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(IU(r,i)&&(r!==void 0||$f(e.t,t)))return!0;vb(e),wl(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return pb(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,vb(e),wl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Fu(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){wo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){wo(12)}},Kd={};hc(Dp,function(e,t){Kd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Kd.deleteProperty=function(e,t){return Kd.set.call(this,e,t,void 0)},Kd.set=function(e,t,r){return Dp.set.call(this,e[0],t,r,e[0])};var Iee=function(){function e(r){var n=this;this.O=qF,this.D=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var c=n;return function(g){var _=this;g===void 0&&(g=s);for(var v=arguments.length,m=Array(v>1?v-1:0),y=1;y<v;y++)m[y-1]=arguments[y];return c.produce(g,function(b){var w;return(w=a).call.apply(w,[_,b].concat(m))})}}var l;if(typeof a!="function"&&wo(6),o!==void 0&&typeof o!="function"&&wo(7),Ws(i)){var u=HF(n),f=VS(n,i,void 0),h=!0;try{l=a(f),h=!1}finally{h?Bm(u):GS(u)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(g){return hb(u,o),db(g,u)},function(g){throw Bm(u),g}):(hb(u,o),db(l,u))}if(!i||typeof i!="object"){if((l=a(i))===void 0&&(l=i),l===RU&&(l=void 0),n.D&&XA(l,!0),o){var p=[],d=[];ts("Patches").M(i,l,p,d),o(p,d)}return l}wo(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(l){for(var u=arguments.length,f=Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];return n.produceWithPatches(l,function(p){return i.apply(void 0,[p].concat(f))})};var o,s,c=n.produce(i,a,function(l,u){o=l,s=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(l){return[l,o,s]}):[c,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Ws(r)||wo(8),Jl(r)&&(r=Eee(r));var n=HF(this),i=VS(this,r,void 0);return i[sn].C=!0,GS(n),i},t.finishDraft=function(r,n){var i=r&&r[sn],a=i.A;return hb(a,n),db(void 0,a)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!qF&&wo(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}i>-1&&(n=n.slice(i+1));var o=ts("Patches").$;return Jl(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},e}(),Na=new Iee,OU=Na.produce;Na.produceWithPatches.bind(Na);Na.setAutoFreeze.bind(Na);Na.setUseProxies.bind(Na);Na.applyPatches.bind(Na);Na.createDraft.bind(Na);Na.finishDraft.bind(Na);function di(e){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(e)}function Ree(e,t){if(di(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(di(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kU(e){var t=Ree(e,"string");return di(t)=="symbol"?t:t+""}function Ba(e,t,r){return t=kU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function JF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZF(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Li(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var QF=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gb=function(){return Math.random().toString(36).substring(7).split("").join(".")},Um={INIT:"@@redux/INIT"+gb(),REPLACE:"@@redux/REPLACE"+gb(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gb()}};function Pee(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function FU(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Li(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Li(1));return r(FU)(e,t)}if(typeof e!="function")throw new Error(Li(2));var i=e,a=t,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw new Error(Li(3));return a}function f(g){if(typeof g!="function")throw new Error(Li(4));if(c)throw new Error(Li(5));var _=!0;return l(),s.push(g),function(){if(_){if(c)throw new Error(Li(6));_=!1,l();var m=s.indexOf(g);s.splice(m,1),o=null}}}function h(g){if(!Pee(g))throw new Error(Li(7));if(typeof g.type>"u")throw new Error(Li(8));if(c)throw new Error(Li(9));try{c=!0,a=i(a,g)}finally{c=!1}for(var _=o=s,v=0;v<_.length;v++){var m=_[v];m()}return g}function p(g){if(typeof g!="function")throw new Error(Li(10));i=g,h({type:Um.REPLACE})}function d(){var g,_=f;return g={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(Li(11));function y(){m.next&&m.next(u())}y();var b=_(y);return{unsubscribe:b}}},g[QF]=function(){return this},g}return h({type:Um.INIT}),n={dispatch:h,subscribe:f,getState:u,replaceReducer:p},n[QF]=d,n}function Oee(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:Um.INIT});if(typeof n>"u")throw new Error(Li(12));if(typeof r(void 0,{type:Um.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Li(13))})}function kee(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}var a=Object.keys(r),o;try{Oee(r)}catch(s){o=s}return function(c,l){if(c===void 0&&(c={}),o)throw o;for(var u=!1,f={},h=0;h<a.length;h++){var p=a[h],d=r[p],g=c[p],_=d(g,l);if(typeof _>"u")throw l&&l.type,new Error(Li(14));f[p]=_,u=u||_!==g}return u=u||a.length!==Object.keys(c).length,u?f:c}}function jm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function Fee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),a=function(){throw new Error(Li(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=t.map(function(c){return c(o)});return a=jm.apply(void 0,s)(i.dispatch),JF(JF({},i),{},{dispatch:a})}}}function NU(e){var t=function(n){var i=n.dispatch,a=n.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,e):o(s)}}};return t}var LU=NU();LU.withExtraArgument=NU;const eN=LU;var BU=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nee=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Qf=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},Lee=Object.defineProperty,Bee=Object.defineProperties,Mee=Object.getOwnPropertyDescriptors,tN=Object.getOwnPropertySymbols,Dee=Object.prototype.hasOwnProperty,Uee=Object.prototype.propertyIsEnumerable,rN=function(e,t,r){return t in e?Lee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},jl=function(e,t){for(var r in t||(t={}))Dee.call(t,r)&&rN(e,r,t[r]);if(tN)for(var n=0,i=tN(t);n<i.length;n++){var r=i[n];Uee.call(t,r)&&rN(e,r,t[r])}return e},mb=function(e,t){return Bee(e,Mee(t))},jee=function(e,t,r){return new Promise(function(n,i){var a=function(c){try{s(r.next(c))}catch(l){i(l)}},o=function(c){try{s(r.throw(c))}catch(l){i(l)}},s=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(a,o)};s((r=r.apply(e,t)).next())})},$ee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jm:jm.apply(null,arguments)};function Gee(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function $l(e,t){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t){var a=t.apply(void 0,n);if(!a)throw new Error("prepareAction did not return an object");return jl(jl({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var Vee=function(e){BU(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qf([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qf([void 0],r.concat(this))))},t}(Array),Hee=function(e){BU(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qf([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qf([void 0],r.concat(this))))},t}(Array);function XS(e){return Ws(e)?OU(e,function(){}):e}function Xee(e){return typeof e=="boolean"}function zee(){return function(t){return MU(t)}}function MU(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new Vee;return r&&(Xee(r)?n.push(eN):n.push(eN.withExtraArgument(r.extraArgument))),n}var Wee=!0;function Yee(e){var t=zee(),r=e||{},n=r.reducer,i=n===void 0?void 0:n,a=r.middleware,o=a===void 0?t():a,s=r.devTools,c=s===void 0?!0:s,l=r.preloadedState,u=l===void 0?void 0:l,f=r.enhancers,h=f===void 0?void 0:f,p;if(typeof i=="function")p=i;else if(Gee(i))p=kee(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var d=o;typeof d=="function"&&(d=d(t));var g=Fee.apply(void 0,d),_=jm;c&&(_=$ee(jl({trace:!Wee},typeof c=="object"&&c)));var v=new Hee(g),m=v;Array.isArray(h)?m=Qf([g],h):typeof h=="function"&&(m=h(v));var y=_.apply(void 0,m);return FU(p,u,y)}function DU(e){var t={},r=[],n,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=o,i},addMatcher:function(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return n=a,i}};return e(i),[t,r,n]}function qee(e){return typeof e=="function"}function Kee(e,t,r,n){r===void 0&&(r=[]);var i=typeof t=="function"?DU(t):[t,r,n],a=i[0],o=i[1],s=i[2],c;if(qee(e))c=function(){return XS(e())};else{var l=XS(e);c=function(){return l}}function u(f,h){f===void 0&&(f=c());var p=Qf([a[h.type]],o.filter(function(d){var g=d.matcher;return g(h)}).map(function(d){var g=d.reducer;return g}));return p.filter(function(d){return!!d}).length===0&&(p=[s]),p.reduce(function(d,g){if(g)if(Jl(d)){var _=d,v=g(_,h);return v===void 0?d:v}else{if(Ws(d))return OU(d,function(m){return g(m,h)});var v=g(d,h);if(v===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return d},f)}return u.getInitialState=c,u}function Zee(e,t){return e+"/"+t}function P0(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:XS(e.initialState),n=e.reducers||{},i=Object.keys(n),a={},o={},s={};i.forEach(function(u){var f=n[u],h=Zee(t,u),p,d;"reducer"in f?(p=f.reducer,d=f.prepare):p=f,a[u]=p,o[h]=p,s[u]=d?$l(h,d):$l(h)});function c(){var u=typeof e.extraReducers=="function"?DU(e.extraReducers):[e.extraReducers],f=u[0],h=f===void 0?{}:f,p=u[1],d=p===void 0?[]:p,g=u[2],_=g===void 0?void 0:g,v=jl(jl({},h),o);return Kee(r,function(m){for(var y in v)m.addCase(y,v[y]);for(var b=0,w=d;b<w.length;b++){var E=w[b];m.addMatcher(E.matcher,E.reducer)}_&&m.addDefaultCase(_)})}var l;return{name:t,reducer:function(u,f){return l||(l=c()),l(u,f)},actions:s,caseReducers:a,getInitialState:function(){return l||(l=c()),l.getInitialState()}}}var Jee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Qee=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=Jee[Math.random()*64|0];return t},ete=["name","message","stack","code"],_b=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),nN=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),tte=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=ete;r<n.length;r++){var i=n[r];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,r,n){var i=$l(t+"/fulfilled",function(l,u,f,h){return{payload:l,meta:mb(jl({},h||{}),{arg:f,requestId:u,requestStatus:"fulfilled"})}}),a=$l(t+"/pending",function(l,u,f){return{payload:void 0,meta:mb(jl({},f||{}),{arg:u,requestId:l,requestStatus:"pending"})}}),o=$l(t+"/rejected",function(l,u,f,h,p){return{payload:h,error:(n&&n.serializeError||tte)(l||"Rejected"),meta:mb(jl({},p||{}),{arg:f,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(u,f,h){var p=n!=null&&n.idGenerator?n.idGenerator(l):Qee(),d=new s,g;function _(m){g=m,d.abort()}var v=function(){return jee(this,null,function(){var m,y,b,w,E,C,T;return Nee(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),w=(m=n==null?void 0:n.condition)==null?void 0:m.call(n,l,{getState:f,extra:h}),nte(w)?[4,w]:[3,2];case 1:w=A.sent(),A.label=2;case 2:if(w===!1||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(I,O){return d.signal.addEventListener("abort",function(){return O({name:"AbortError",message:g||"Aborted"})})}),u(a(p,l,(y=n==null?void 0:n.getPendingMeta)==null?void 0:y.call(n,{requestId:p,arg:l},{getState:f,extra:h}))),[4,Promise.race([E,Promise.resolve(r(l,{dispatch:u,getState:f,extra:h,requestId:p,signal:d.signal,abort:_,rejectWithValue:function(I,O){return new _b(I,O)},fulfillWithValue:function(I,O){return new nN(I,O)}})).then(function(I){if(I instanceof _b)throw I;return I instanceof nN?i(I.payload,p,l,I.meta):i(I,p,l)})])];case 3:return b=A.sent(),[3,5];case 4:return C=A.sent(),b=C instanceof _b?o(null,p,l,C.payload,C.meta):o(C,p,l),[3,5];case 5:return T=n&&!n.dispatchConditionRejection&&o.match(b)&&b.meta.condition,T||u(b),[2,b]}})})}();return Object.assign(v,{abort:_,requestId:p,arg:l,unwrap:function(){return v.then(rte)}})}}return Object.assign(c,{pending:a,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function rte(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function nte(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var YA="listenerMiddleware";$l(YA+"/add");$l(YA+"/removeAll");$l(YA+"/remove");var iN;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);See();function ite(){this.__data__=[],this.size=0}var ate=ite;function ote(e,t){return e===t||e!==e&&t!==t}var qA=ote,ste=qA;function lte(e,t){for(var r=e.length;r--;)if(ste(e[r][0],t))return r;return-1}var V_=lte,ute=V_,cte=Array.prototype,fte=cte.splice;function hte(e){var t=this.__data__,r=ute(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():fte.call(t,r,1),--this.size,!0}var dte=hte,pte=V_;function vte(e){var t=this.__data__,r=pte(t,e);return r<0?void 0:t[r][1]}var gte=vte,mte=V_;function _te(e){return mte(this.__data__,e)>-1}var yte=_te,xte=V_;function bte(e,t){var r=this.__data__,n=xte(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var wte=bte,Ete=ate,Ste=dte,Cte=gte,Tte=yte,Ate=wte;function wh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}wh.prototype.clear=Ete;wh.prototype.delete=Ste;wh.prototype.get=Cte;wh.prototype.has=Tte;wh.prototype.set=Ate;var H_=wh,Ite=H_;function Rte(){this.__data__=new Ite,this.size=0}var Pte=Rte;function Ote(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var kte=Ote;function Fte(e){return this.__data__.get(e)}var Nte=Fte;function Lte(e){return this.__data__.has(e)}var Bte=Lte,Mte=typeof Ct=="object"&&Ct&&Ct.Object===Object&&Ct,UU=Mte,Dte=UU,Ute=typeof self=="object"&&self&&self.Object===Object&&self,jte=Dte||Ute||Function("return this")(),Oo=jte,$te=Oo,Gte=$te.Symbol,O0=Gte,aN=O0,jU=Object.prototype,Vte=jU.hasOwnProperty,Hte=jU.toString,Ed=aN?aN.toStringTag:void 0;function Xte(e){var t=Vte.call(e,Ed),r=e[Ed];try{e[Ed]=void 0;var n=!0}catch{}var i=Hte.call(e);return n&&(t?e[Ed]=r:delete e[Ed]),i}var zte=Xte,Wte=Object.prototype,Yte=Wte.toString;function qte(e){return Yte.call(e)}var Kte=qte,oN=O0,Zte=zte,Jte=Kte,Qte="[object Null]",ere="[object Undefined]",sN=oN?oN.toStringTag:void 0;function tre(e){return e==null?e===void 0?ere:Qte:sN&&sN in Object(e)?Zte(e):Jte(e)}var k0=tre;function rre(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ds=rre,nre=k0,ire=ds,are="[object AsyncFunction]",ore="[object Function]",sre="[object GeneratorFunction]",lre="[object Proxy]";function ure(e){if(!ire(e))return!1;var t=nre(e);return t==ore||t==sre||t==are||t==lre}var $U=ure,cre=Oo,fre=cre["__core-js_shared__"],hre=fre,yb=hre,lN=function(){var e=/[^.]+$/.exec(yb&&yb.keys&&yb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function dre(e){return!!lN&&lN in e}var pre=dre,vre=Function.prototype,gre=vre.toString;function mre(e){if(e!=null){try{return gre.call(e)}catch{}try{return e+""}catch{}}return""}var GU=mre,_re=$U,yre=pre,xre=ds,bre=GU,wre=/[\\^$.*+?()[\]{}|]/g,Ere=/^\[object .+?Constructor\]$/,Sre=Function.prototype,Cre=Object.prototype,Tre=Sre.toString,Are=Cre.hasOwnProperty,Ire=RegExp("^"+Tre.call(Are).replace(wre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rre(e){if(!xre(e)||yre(e))return!1;var t=_re(e)?Ire:Ere;return t.test(bre(e))}var Pre=Rre;function Ore(e,t){return e==null?void 0:e[t]}var kre=Ore,Fre=Pre,Nre=kre;function Lre(e,t){var r=Nre(e,t);return Fre(r)?r:void 0}var Sc=Lre,Bre=Sc,Mre=Oo,Dre=Bre(Mre,"Map"),KA=Dre,Ure=Sc,jre=Ure(Object,"create"),X_=jre,uN=X_;function $re(){this.__data__=uN?uN(null):{},this.size=0}var Gre=$re;function Vre(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Hre=Vre,Xre=X_,zre="__lodash_hash_undefined__",Wre=Object.prototype,Yre=Wre.hasOwnProperty;function qre(e){var t=this.__data__;if(Xre){var r=t[e];return r===zre?void 0:r}return Yre.call(t,e)?t[e]:void 0}var Kre=qre,Zre=X_,Jre=Object.prototype,Qre=Jre.hasOwnProperty;function ene(e){var t=this.__data__;return Zre?t[e]!==void 0:Qre.call(t,e)}var tne=ene,rne=X_,nne="__lodash_hash_undefined__";function ine(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rne&&t===void 0?nne:t,this}var ane=ine,one=Gre,sne=Hre,lne=Kre,une=tne,cne=ane;function Eh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eh.prototype.clear=one;Eh.prototype.delete=sne;Eh.prototype.get=lne;Eh.prototype.has=une;Eh.prototype.set=cne;var fne=Eh,cN=fne,hne=H_,dne=KA;function pne(){this.size=0,this.__data__={hash:new cN,map:new(dne||hne),string:new cN}}var vne=pne;function gne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mne=gne,_ne=mne;function yne(e,t){var r=e.__data__;return _ne(t)?r[typeof t=="string"?"string":"hash"]:r.map}var z_=yne,xne=z_;function bne(e){var t=xne(this,e).delete(e);return this.size-=t?1:0,t}var wne=bne,Ene=z_;function Sne(e){return Ene(this,e).get(e)}var Cne=Sne,Tne=z_;function Ane(e){return Tne(this,e).has(e)}var Ine=Ane,Rne=z_;function Pne(e,t){var r=Rne(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var One=Pne,kne=vne,Fne=wne,Nne=Cne,Lne=Ine,Bne=One;function Sh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Sh.prototype.clear=kne;Sh.prototype.delete=Fne;Sh.prototype.get=Nne;Sh.prototype.has=Lne;Sh.prototype.set=Bne;var ZA=Sh,Mne=H_,Dne=KA,Une=ZA,jne=200;function $ne(e,t){var r=this.__data__;if(r instanceof Mne){var n=r.__data__;if(!Dne||n.length<jne-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Une(n)}return r.set(e,t),this.size=r.size,this}var Gne=$ne,Vne=H_,Hne=Pte,Xne=kte,zne=Nte,Wne=Bte,Yne=Gne;function Ch(e){var t=this.__data__=new Vne(e);this.size=t.size}Ch.prototype.clear=Hne;Ch.prototype.delete=Xne;Ch.prototype.get=zne;Ch.prototype.has=Wne;Ch.prototype.set=Yne;var JA=Ch;function qne(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Kne=qne,Zne=Sc,Jne=function(){try{var e=Zne(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Qne=Jne,fN=Qne;function eie(e,t,r){t=="__proto__"&&fN?fN(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var VU=eie,tie=VU,rie=qA,nie=Object.prototype,iie=nie.hasOwnProperty;function aie(e,t,r){var n=e[t];(!(iie.call(e,t)&&rie(n,r))||r===void 0&&!(t in e))&&tie(e,t,r)}var QA=aie,oie=QA,sie=VU;function lie(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;c===void 0&&(c=e[s]),i?sie(r,s,c):oie(r,s,c)}return r}var W_=lie;function uie(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var cie=uie;function fie(e){return e!=null&&typeof e=="object"}var Cc=fie,hie=k0,die=Cc,pie="[object Arguments]";function vie(e){return die(e)&&hie(e)==pie}var gie=vie,hN=gie,mie=Cc,HU=Object.prototype,_ie=HU.hasOwnProperty,yie=HU.propertyIsEnumerable,xie=hN(function(){return arguments}())?hN:function(e){return mie(e)&&_ie.call(e,"callee")&&!yie.call(e,"callee")},XU=xie,bie=Array.isArray,Zs=bie,$m={exports:{}};function wie(){return!1}var Eie=wie;$m.exports;(function(e,t){var r=Oo,n=Eie,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o?r.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||n;e.exports=l})($m,$m.exports);var eI=$m.exports,Sie=9007199254740991,Cie=/^(?:0|[1-9]\d*)$/;function Tie(e,t){var r=typeof e;return t=t??Sie,!!t&&(r=="number"||r!="symbol"&&Cie.test(e))&&e>-1&&e%1==0&&e<t}var tI=Tie,Aie=9007199254740991;function Iie(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Aie}var rI=Iie,Rie=k0,Pie=rI,Oie=Cc,kie="[object Arguments]",Fie="[object Array]",Nie="[object Boolean]",Lie="[object Date]",Bie="[object Error]",Mie="[object Function]",Die="[object Map]",Uie="[object Number]",jie="[object Object]",$ie="[object RegExp]",Gie="[object Set]",Vie="[object String]",Hie="[object WeakMap]",Xie="[object ArrayBuffer]",zie="[object DataView]",Wie="[object Float32Array]",Yie="[object Float64Array]",qie="[object Int8Array]",Kie="[object Int16Array]",Zie="[object Int32Array]",Jie="[object Uint8Array]",Qie="[object Uint8ClampedArray]",eae="[object Uint16Array]",tae="[object Uint32Array]",Zr={};Zr[Wie]=Zr[Yie]=Zr[qie]=Zr[Kie]=Zr[Zie]=Zr[Jie]=Zr[Qie]=Zr[eae]=Zr[tae]=!0;Zr[kie]=Zr[Fie]=Zr[Xie]=Zr[Nie]=Zr[zie]=Zr[Lie]=Zr[Bie]=Zr[Mie]=Zr[Die]=Zr[Uie]=Zr[jie]=Zr[$ie]=Zr[Gie]=Zr[Vie]=Zr[Hie]=!1;function rae(e){return Oie(e)&&Pie(e.length)&&!!Zr[Rie(e)]}var nae=rae;function iae(e){return function(t){return e(t)}}var nI=iae,Gm={exports:{}};Gm.exports;(function(e,t){var r=UU,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(Gm,Gm.exports);var iI=Gm.exports,aae=nae,oae=nI,dN=iI,pN=dN&&dN.isTypedArray,sae=pN?oae(pN):aae,zU=sae,lae=cie,uae=XU,cae=Zs,fae=eI,hae=tI,dae=zU,pae=Object.prototype,vae=pae.hasOwnProperty;function gae(e,t){var r=cae(e),n=!r&&uae(e),i=!r&&!n&&fae(e),a=!r&&!n&&!i&&dae(e),o=r||n||i||a,s=o?lae(e.length,String):[],c=s.length;for(var l in e)(t||vae.call(e,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||hae(l,c)))&&s.push(l);return s}var WU=gae,mae=Object.prototype;function _ae(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||mae;return e===r}var aI=_ae;function yae(e,t){return function(r){return e(t(r))}}var YU=yae,xae=YU,bae=xae(Object.keys,Object),wae=bae,Eae=aI,Sae=wae,Cae=Object.prototype,Tae=Cae.hasOwnProperty;function Aae(e){if(!Eae(e))return Sae(e);var t=[];for(var r in Object(e))Tae.call(e,r)&&r!="constructor"&&t.push(r);return t}var Iae=Aae,Rae=$U,Pae=rI;function Oae(e){return e!=null&&Pae(e.length)&&!Rae(e)}var qU=Oae,kae=WU,Fae=Iae,Nae=qU;function Lae(e){return Nae(e)?kae(e):Fae(e)}var Y_=Lae,Bae=W_,Mae=Y_;function Dae(e,t){return e&&Bae(t,Mae(t),e)}var Uae=Dae;function jae(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var $ae=jae,Gae=ds,Vae=aI,Hae=$ae,Xae=Object.prototype,zae=Xae.hasOwnProperty;function Wae(e){if(!Gae(e))return Hae(e);var t=Vae(e),r=[];for(var n in e)n=="constructor"&&(t||!zae.call(e,n))||r.push(n);return r}var Yae=Wae,qae=WU,Kae=Yae,Zae=qU;function Jae(e){return Zae(e)?qae(e,!0):Kae(e)}var oI=Jae,Qae=W_,eoe=oI;function toe(e,t){return e&&Qae(t,eoe(t),e)}var roe=toe,Vm={exports:{}};Vm.exports;(function(e,t){var r=Oo,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var f=l.length,h=s?s(f):new l.constructor(f);return l.copy(h),h}e.exports=c})(Vm,Vm.exports);var noe=Vm.exports;function ioe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var aoe=ioe;function ooe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}var soe=ooe;function loe(){return[]}var KU=loe,uoe=soe,coe=KU,foe=Object.prototype,hoe=foe.propertyIsEnumerable,vN=Object.getOwnPropertySymbols,doe=vN?function(e){return e==null?[]:(e=Object(e),uoe(vN(e),function(t){return hoe.call(e,t)}))}:coe,sI=doe,poe=W_,voe=sI;function goe(e,t){return poe(e,voe(e),t)}var moe=goe;function _oe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var ZU=_oe,yoe=YU,xoe=yoe(Object.getPrototypeOf,Object),JU=xoe,boe=ZU,woe=JU,Eoe=sI,Soe=KU,Coe=Object.getOwnPropertySymbols,Toe=Coe?function(e){for(var t=[];e;)boe(t,Eoe(e)),e=woe(e);return t}:Soe,QU=Toe,Aoe=W_,Ioe=QU;function Roe(e,t){return Aoe(e,Ioe(e),t)}var Poe=Roe,Ooe=ZU,koe=Zs;function Foe(e,t,r){var n=t(e);return koe(e)?n:Ooe(n,r(e))}var ej=Foe,Noe=ej,Loe=sI,Boe=Y_;function Moe(e){return Noe(e,Boe,Loe)}var tj=Moe,Doe=ej,Uoe=QU,joe=oI;function $oe(e){return Doe(e,joe,Uoe)}var rj=$oe,Goe=Sc,Voe=Oo,Hoe=Goe(Voe,"DataView"),Xoe=Hoe,zoe=Sc,Woe=Oo,Yoe=zoe(Woe,"Promise"),qoe=Yoe,Koe=Sc,Zoe=Oo,Joe=Koe(Zoe,"Set"),nj=Joe,Qoe=Sc,ese=Oo,tse=Qoe(ese,"WeakMap"),rse=tse,zS=Xoe,WS=KA,YS=qoe,qS=nj,KS=rse,ij=k0,Th=GU,gN="[object Map]",nse="[object Object]",mN="[object Promise]",_N="[object Set]",yN="[object WeakMap]",xN="[object DataView]",ise=Th(zS),ase=Th(WS),ose=Th(YS),sse=Th(qS),lse=Th(KS),Nu=ij;(zS&&Nu(new zS(new ArrayBuffer(1)))!=xN||WS&&Nu(new WS)!=gN||YS&&Nu(YS.resolve())!=mN||qS&&Nu(new qS)!=_N||KS&&Nu(new KS)!=yN)&&(Nu=function(e){var t=ij(e),r=t==nse?e.constructor:void 0,n=r?Th(r):"";if(n)switch(n){case ise:return xN;case ase:return gN;case ose:return mN;case sse:return _N;case lse:return yN}return t});var q_=Nu,use=Object.prototype,cse=use.hasOwnProperty;function fse(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&cse.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var hse=fse,dse=Oo,pse=dse.Uint8Array,aj=pse,bN=aj;function vse(e){var t=new e.constructor(e.byteLength);return new bN(t).set(new bN(e)),t}var lI=vse,gse=lI;function mse(e,t){var r=t?gse(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _se=mse,yse=/\w*$/;function xse(e){var t=new e.constructor(e.source,yse.exec(e));return t.lastIndex=e.lastIndex,t}var bse=xse,wN=O0,EN=wN?wN.prototype:void 0,SN=EN?EN.valueOf:void 0;function wse(e){return SN?Object(SN.call(e)):{}}var Ese=wse,Sse=lI;function Cse(e,t){var r=t?Sse(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Tse=Cse,Ase=lI,Ise=_se,Rse=bse,Pse=Ese,Ose=Tse,kse="[object Boolean]",Fse="[object Date]",Nse="[object Map]",Lse="[object Number]",Bse="[object RegExp]",Mse="[object Set]",Dse="[object String]",Use="[object Symbol]",jse="[object ArrayBuffer]",$se="[object DataView]",Gse="[object Float32Array]",Vse="[object Float64Array]",Hse="[object Int8Array]",Xse="[object Int16Array]",zse="[object Int32Array]",Wse="[object Uint8Array]",Yse="[object Uint8ClampedArray]",qse="[object Uint16Array]",Kse="[object Uint32Array]";function Zse(e,t,r){var n=e.constructor;switch(t){case jse:return Ase(e);case kse:case Fse:return new n(+e);case $se:return Ise(e,r);case Gse:case Vse:case Hse:case Xse:case zse:case Wse:case Yse:case qse:case Kse:return Ose(e,r);case Nse:return new n;case Lse:case Dse:return new n(e);case Bse:return Rse(e);case Mse:return new n;case Use:return Pse(e)}}var Jse=Zse,Qse=ds,CN=Object.create,ele=function(){function e(){}return function(t){if(!Qse(t))return{};if(CN)return CN(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),tle=ele,rle=tle,nle=JU,ile=aI;function ale(e){return typeof e.constructor=="function"&&!ile(e)?rle(nle(e)):{}}var ole=ale,sle=q_,lle=Cc,ule="[object Map]";function cle(e){return lle(e)&&sle(e)==ule}var fle=cle,hle=fle,dle=nI,TN=iI,AN=TN&&TN.isMap,ple=AN?dle(AN):hle,vle=ple,gle=q_,mle=Cc,_le="[object Set]";function yle(e){return mle(e)&&gle(e)==_le}var xle=yle,ble=xle,wle=nI,IN=iI,RN=IN&&IN.isSet,Ele=RN?wle(RN):ble,Sle=Ele,Cle=JA,Tle=Kne,Ale=QA,Ile=Uae,Rle=roe,Ple=noe,Ole=aoe,kle=moe,Fle=Poe,Nle=tj,Lle=rj,Ble=q_,Mle=hse,Dle=Jse,Ule=ole,jle=Zs,$le=eI,Gle=vle,Vle=ds,Hle=Sle,Xle=Y_,zle=oI,Wle=1,Yle=2,qle=4,oj="[object Arguments]",Kle="[object Array]",Zle="[object Boolean]",Jle="[object Date]",Qle="[object Error]",sj="[object Function]",eue="[object GeneratorFunction]",tue="[object Map]",rue="[object Number]",lj="[object Object]",nue="[object RegExp]",iue="[object Set]",aue="[object String]",oue="[object Symbol]",sue="[object WeakMap]",lue="[object ArrayBuffer]",uue="[object DataView]",cue="[object Float32Array]",fue="[object Float64Array]",hue="[object Int8Array]",due="[object Int16Array]",pue="[object Int32Array]",vue="[object Uint8Array]",gue="[object Uint8ClampedArray]",mue="[object Uint16Array]",_ue="[object Uint32Array]",zr={};zr[oj]=zr[Kle]=zr[lue]=zr[uue]=zr[Zle]=zr[Jle]=zr[cue]=zr[fue]=zr[hue]=zr[due]=zr[pue]=zr[tue]=zr[rue]=zr[lj]=zr[nue]=zr[iue]=zr[aue]=zr[oue]=zr[vue]=zr[gue]=zr[mue]=zr[_ue]=!0;zr[Qle]=zr[sj]=zr[sue]=!1;function Wg(e,t,r,n,i,a){var o,s=t&Wle,c=t&Yle,l=t&qle;if(r&&(o=i?r(e,n,i,a):r(e)),o!==void 0)return o;if(!Vle(e))return e;var u=jle(e);if(u){if(o=Mle(e),!s)return Ole(e,o)}else{var f=Ble(e),h=f==sj||f==eue;if($le(e))return Ple(e,s);if(f==lj||f==oj||h&&!i){if(o=c||h?{}:Ule(e),!s)return c?Fle(e,Rle(o,e)):kle(e,Ile(o,e))}else{if(!zr[f])return i?e:{};o=Dle(e,f,s)}}a||(a=new Cle);var p=a.get(e);if(p)return p;a.set(e,o),Hle(e)?e.forEach(function(_){o.add(Wg(_,t,r,_,e,a))}):Gle(e)&&e.forEach(function(_,v){o.set(v,Wg(_,t,r,v,e,a))});var d=l?c?Lle:Nle:c?zle:Xle,g=u?void 0:d(e);return Tle(g||e,function(_,v){g&&(v=_,_=e[v]),Ale(o,v,Wg(_,t,r,v,e,a))}),o}var yue=Wg,xue=yue,bue=1,wue=4;function Eue(e){return xue(e,bue|wue)}var Sue=Eue;const cn=Gi(Sue);var Bt=(e=>(e[e.say=0]="say",e[e.changeBg=1]="changeBg",e[e.changeFigure=2]="changeFigure",e[e.bgm=3]="bgm",e[e.video=4]="video",e[e.pixi=5]="pixi",e[e.pixiInit=6]="pixiInit",e[e.intro=7]="intro",e[e.miniAvatar=8]="miniAvatar",e[e.changeScene=9]="changeScene",e[e.choose=10]="choose",e[e.end=11]="end",e[e.setComplexAnimation=12]="setComplexAnimation",e[e.setFilter=13]="setFilter",e[e.label=14]="label",e[e.jumpLabel=15]="jumpLabel",e[e.chooseLabel=16]="chooseLabel",e[e.setVar=17]="setVar",e[e.if=18]="if",e[e.callScene=19]="callScene",e[e.showVars=20]="showVars",e[e.unlockCg=21]="unlockCg",e[e.unlockBgm=22]="unlockBgm",e[e.filmMode=23]="filmMode",e[e.setTextbox=24]="setTextbox",e[e.setAnimation=25]="setAnimation",e[e.playEffect=26]="playEffect",e[e.setTempAnimation=27]="setTempAnimation",e[e.comment=28]="comment",e[e.setTransform=29]="setTransform",e[e.setTransition=30]="setTransition",e[e.getUserInput=31]="getUserInput",e[e.applyStyle=32]="applyStyle",e[e.unlockAchieve=33]="unlockAchieve",e[e.unlockStoryline=34]="unlockStoryline",e[e.showValue=35]="showValue",e[e.payProduct=36]="payProduct",e[e.finishTrial=37]="finishTrial",e[e.moveCamera=38]="moveCamera",e[e.changeAffinity=39]="changeAffinity",e[e.unlockAffinity=40]="unlockAffinity",e[e.popUpImage=41]="popUpImage",e[e.clearScreen=42]="clearScreen",e[e.showUI=43]="showUI",e[e.eventData=44]="eventData",e))(Bt||{});const K_={oldBgName:"",bgName:"",bgX:0,bgY:0,figName:"",figNameLeft:"",figNameRight:"",freeFigure:[],figureAssociatedAnimation:[],popUpImageName:"",popUpImageNameLeft:"",popUpImageNameRight:"",freePopUpImage:[],popUpImageAssociatedAnimation:[],popImgLive2dMotion:[],popImgLive2dExpression:[],showText:"",showTextSize:-1,showName:"",command:"",choose:[],vocal:"",playVocal:"",vocalVolume:100,bgm:{src:"",enter:0,volume:100},currentPlayAudio:null,uiSe:"",gameSe:"",hasCustomClickSe:!1,gameScounds:[],menuScounds:[],miniAvatar:"",GameVar:{},effects:[],bgFilter:"",bgTransform:"",PerformList:[],currentDialogKey:"initial",dialogueMode:"role",live2dMotion:[],live2dExpression:[],currentConcatDialogPrev:"",enableFilm:"",isDisableTextbox:!1,replacedUIlable:{}},uI=P0({name:"stage",initialState:cn(K_),reducers:{resetStageState:(e,t)=>{Object.assign(e,t.payload)},setStage:(e,t)=>{e[t.payload.key]=t.payload.value},setStageVar:(e,t)=>{e.GameVar[t.payload.key]=t.payload.value},updateEffect:(e,t)=>{const{target:r,transform:n}=t.payload,i=e.effects.findIndex(a=>a.target===r);i>=0?e.effects[i].transform=n:e.effects.push({target:r,transform:n})},removeEffectByTargetId:(e,t)=>{const r=e.effects.findIndex(n=>n.target===t.payload);r>=0&&e.effects.splice(r,1)},addPerform:(e,t)=>{e.PerformList.push(t.payload)},removePerformByName:(e,t)=>{for(let r=0;r<e.PerformList.length;r++)e.PerformList[r].id===t.payload&&(e.PerformList.splice(r,1),r--)},removeAllPerform:(e,t)=>{e.PerformList=[]},removeAllPixiPerforms:(e,t)=>{for(let r=0;r<e.PerformList.length;r++)e.PerformList[r].script.command===Bt.pixi&&(e.PerformList.splice(r,1),r--)},setFreeFigureByKey:(e,t)=>{const r=e.freeFigure,n=t.payload,i=r.findIndex(a=>a.key===n.key);i>=0?(r[i].basePosition=n.basePosition,r[i].name=n.name):n.name!==""&&r.push(n)},setFreePopupImageBykey:(e,t)=>{const r=e.freePopUpImage,n=t.payload,i=r.findIndex(a=>a.key===n.key);i>=0?(r[i].basePosition=n.basePosition,r[i].name=n.name):n.name!==""&&r.push(n)},setLive2dMotion:(e,t)=>{const{target:r,motion:n}=t.payload,i=e.live2dMotion.findIndex(a=>a.target===r);i<0?e.live2dMotion.push({target:r,motion:n}):e.live2dMotion[i].motion=n},setLive2dExpression:(e,t)=>{const{target:r,expression:n}=t.payload,i=e.live2dExpression.findIndex(a=>a.target===r);i<0?e.live2dExpression.push({target:r,expression:n}):e.live2dExpression[i].expression=n},setPopUpImageLive2dMotion:(e,t)=>{const{target:r,motion:n}=t.payload,i=e.popImgLive2dMotion.findIndex(a=>a.target===r);i<0?e.popImgLive2dMotion.push({target:r,motion:n}):e.popImgLive2dMotion[i].motion=n},setPopUpImageLive2dExpression:(e,t)=>{const{target:r,expression:n}=t.payload,i=e.popImgLive2dExpression.findIndex(a=>a.target===r);i<0?e.popImgLive2dExpression.push({target:r,expression:n}):e.popImgLive2dExpression[i].expression=n},replaceUIlable:(e,t)=>{e.replacedUIlable[t.payload[0]]=t.payload[1]}}}),{resetStageState:dc,setStage:$t,setStageVar:uj,removeAllPerform:Cue}=uI.actions,Bn=uI.actions,Tue=uI.reducer;var Bi=(e=>(e.Game_start_button="Game_start_button",e.Game_achievement_button="Game_achievement_button",e.Game_storyline_button="Game_storyline_button",e.Game_extra_button="Game_extra_button",e.Game_collection_button="Game_collection_button",e.Game_option_button="Game_option_button",e.Game_load_button="Game_load_button",e.Game_continue_button="Game_continue_button",e.Game_progression_button="Game_progression_button",e.Game_affinity_button="Game_affinity_button",e.Game_link_button="Game_link_button",e))(Bi||{}),Yg=(e=>(e.slider="slider",e.sliderBg="sliderBg",e.sliderThumb="sliderThumb",e))(Yg||{}),cI=(e=>(e.Load_back_button="Load_back_button",e))(cI||{}),fI=(e=>(e.Storyline_back_button="Storyline_back_button",e))(fI||{}),hI=(e=>(e.Achievement_back_button="Achievement_back_button",e))(hI||{}),dI=(e=>(e.Extra_back_button="Extra_back_button",e.Extra_bgm_button="Extra_bgm_button",e.Extra_video_button="Extra_video_button",e))(dI||{}),pI=(e=>(e.Progress_back_button="Progress_back_button",e.Progress_chapter_button="Progress_chapter_button",e.Progress_achievement_button="Progress_achievement_button",e.Progress_affinity_button="Progress_affinity_button",e))(pI||{}),vI=(e=>(e.Affinity_back_button="Affinity_back_button",e))(vI||{}),Z_=(e=>(e.Extra_title="Extra_title",e.Extra_bg="Extra_bg",e.Extra_bgm_locked_item_bg="Extra_bgm_locked_item_bg",e.Extra_bgm_unlocked_item="Extra_bgm_unlocked_item",e.Extra_video_unlocked_item="Extra_video_unlocked_item",e.Extra_indicator="Extra_indicator",e.Extra_video_locked_item_bg="Extra_video_locked_item_bg",e))(Z_||{}),an=(e=>(e.Collection_title="Collection_title",e.Collection_bg="Collection_bg",e.Collection_img1="Collection_img1",e.Collection_img2="Collection_img2",e.Collection_img3="Collection_img3",e.Collection_detail_bg="Collection_detail_bg",e.Collection_detail_title="Collection_detail_title",e.Collection_detail_dialog_bg="Collection_detail_dialog_bg",e.Collection_detail_dialog_text="Collection_detail_dialog_text",e.Collection_detail_left_bg="Collection_detail_left_bg",e.Collection_detail_right_content_bg="Collection_detail_right_content_bg",e.Collection_detail_right_thumbnail_bg="Collection_detail_right_thumbnail_bg",e.Collection_detail_right_desc_bg="Collection_detail_right_desc_bg",e))(an||{}),J_=(e=>(e.Option_back_button="Option_back_button",e))(J_||{}),gI=(e=>(e.Collection_back_button="Collection_back_button",e.Collection_detail_dialog_prev_button="Collection_detail_dialog_prev_button",e.Collection_detail_dialog_next_button="Collection_detail_dialog_next_button",e))(gI||{}),Up=(e=>(e.Progress_title="Progress_title",e.Progress_bg="Progress_bg",e.Progress_content_container="Progress_content_container",e))(Up||{}),jp=(e=>(e.Affinity_title="Affinity_title",e.Affinity_bg="Affinity_bg",e.Affinity_item_container="Affinity_item_container",e.Affinity_locked_item="Affinity_locked_item",e.Affinity_unlocked_item="Affinity_unlocked_item",e))(jp||{}),Q_=(e=>(e.Option_title="Option_title",e.Option_bg="Option_bg",e.Option_window_label="Option_window_label",e.Option_text_speed_label="Option_text_speed_label",e.Option_global_volume_label="Option_global_volume_label",e.Option_bg_music_volume_label="Option_bg_music_volume_label",e.Option_effect_volume_label="Option_effect_volume_label",e.Option_voice_volume_label="Option_voice_volume_label",e.Option_voice_slider="Option_voice_slider",e.Option_text_speed_slider="Option_text_speed_slider",e.Option_global_volume_slider="Option_global_volume_slider",e.Option_bg_music_volume_slider="Option_bg_music_volume_slider",e.Option_effect_volume_slider="Option_effect_volume_slider",e.Option_fullscreen_checkbox_label="Option_fullscreen_checkbox_label",e.Option_window_checkbox_label="Option_window_checkbox_label",e.Option_fullscreen_checkbox="Option_fullscreen_checkbox",e.Option_window_checkbox="Option_window_checkbox",e.Option_videoSize1080_checkbox="Option_videoSize1080_checkbox",e.Option_videoSize720_checkbox="Option_videoSize720_checkbox",e.Options_light_slider="Options_light_slider",e))(Q_||{}),mI=(e=>(e.Achievement_title="Achievement_title",e))(mI||{}),_I=(e=>(e.Storyline_title="Storyline_title",e.Storyline_item="Storyline_item",e))(_I||{}),ey=(e=>(e.Load_bg="Load_bg",e.Load_title="Load_title",e.Load_item="Load_item",e.Load_locked_item="Load_locked_item",e.Load_indicator="Load_indicator",e))(ey||{}),$p=(e=>(e.Title_img="Title_img",e.Title_bgm="Title_bgm",e))($p||{}),mn=(e=>(e.title="title",e.load="load",e.storyline="storyline",e.achievement="achievement",e.extra="extra",e.option="option",e.collection="collection",e.progressAndAchievement="progressAndAchievement",e.affinity="affinity",e))(mn||{});const xb={title:{buttons:Bi,other:$p},load:{buttons:cI,other:ey},storyline:{buttons:fI,other:_I},achievement:{buttons:hI,other:mI},extra:{buttons:dI,other:Z_},option:{buttons:J_,other:Q_},collection:{buttons:gI,other:an},progressAndAchievement:{buttons:pI,other:Up},affinity:{buttons:vI,other:jp}},at=(e=[])=>{const t={hide:!1,style:{}};return e.forEach(r=>{t[r]={}}),t},Aue={title:{key:"title",other:{Title_img:{key:"Title_img",content:"",args:{hide:!1,style:{}}},Title_bgm:{key:"Title_bgm",content:"",args:at()}},buttons:{Game_start_button:{key:"Game_start_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_load_button:{key:"Game_load_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_option_button:{key:"Game_option_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_storyline_button:{key:"Game_storyline_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_achievement_button:{key:"Game_achievement_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_extra_button:{key:"Game_extra_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_collection_button:{key:"Game_collection_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_continue_button:{key:"Game_continue_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_progression_button:{key:"Game_progression_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_affinity_button:{key:"Game_affinity_button",content:"",args:at(["hoverStyle","activeStyle"])},Game_link_button:{key:"Game_link_button",content:"",args:at(["hoverStyle","buttonLink","activeStyle"])}}},load:{key:"load",other:{Load_bg:{key:"Load_bg",content:"",args:at()},Load_title:{key:"Load_title",content:"",args:at(["hoverStyle","activeStyle"])},Load_item:{key:"Load_item",content:"",args:at(["contentStyle","backgroundStyle","extraStyle","contentHoverStyle","backgroundHoverStyle","extraHoverStyle"])},Load_indicator:{key:"Load_indicator",content:"",args:at(["indicatorStyle","indicatorHoverStyle","indicatorLeftStyle","indicatorLeftHoverStyle","indicatorRightStyle","indicatorRightHoverStyle"])},Load_locked_item:{key:"Load_locked_item",content:"",args:at(["hoverStyle","activeStyle"])}},buttons:{Load_back_button:{key:"Load_back_button",content:"",args:at(["hoverStyle","activeStyle"])}}},storyline:{key:"storyline",other:{Storyline_title:{key:"Storyline_title",content:"",args:at(["hoverStyle","activeStyle"])},Storyline_item:{key:"Storyline_item",content:"",args:at(["hoverStyle","activeStyle"])}},buttons:{Storyline_back_button:{key:"Storyline_back_button",content:"",args:at(["hoverStyle","activeStyle"])}}},achievement:{key:"achievement",other:{Achievement_title:{key:"Achievement_title",content:"",args:at(["hoverStyle","activeStyle"])}},buttons:{Achievement_back_button:{key:"Achievement_back_button",content:"",args:at(["hoverStyle","activeStyle"])}}},extra:{key:"extra",other:{Extra_title:{key:"Extra_title",content:"",args:at(["hoverStyle","activeStyle"])},Extra_bgm_unlocked_item:{key:"Extra_bgm_unlocked_item",content:"",args:at(["contentStyle","backgroundStyle","extraStyle","backgroundHoverStyle","extraHoverStyle"])},Extra_bgm_locked_item_bg:{key:"Extra_bgm_locked_item_bg",content:"",args:at()},Extra_indicator:{key:"Extra_indicator",content:"",args:at(["indicatorStyle","indicatorHoverStyle","indicatorLeftStyle","indicatorLeftHoverStyle","indicatorRightStyle","indicatorRightHoverStyle"])},Extra_bg:{key:"Extra_bg",content:"",args:at()},Extra_video_locked_item_bg:{key:"Extra_video_locked_item_bg",content:"",args:at()},Extra_video_unlocked_item:{key:"Extra_video_unlocked_item",content:"",args:at(["contentStyle","backgroundStyle","extraStyle","contentHoverStyle","backgroundHoverStyle","extraHoverStyle"])}},buttons:{Extra_back_button:{key:"Extra_back_button",content:"",args:at(["hoverStyle","activeStyle"])},Extra_video_button:{key:"Extra_video_button",content:"",args:at(["hoverStyle","activeStyle"])},Extra_bgm_button:{key:"Extra_bgm_button",content:"",args:at(["hoverStyle","activeStyle"])}}},option:{key:"option",other:{Option_bg:{key:"Option_bg",content:"",args:at()},Option_title:{key:"Option_title",content:"",args:at(["hoverStyle","activeStyle"])},Option_window_label:{key:"Option_window_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_text_speed_label:{key:"Option_text_speed_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_voice_volume_label:{key:"Option_voice_volume_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_window_checkbox_label:{key:"Option_text_speed_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_global_volume_label:{key:"Option_global_volume_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_bg_music_volume_label:{key:"Option_bg_music_volume_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_effect_volume_label:{key:"Option_effect_volume_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_fullscreen_checkbox_label:{key:"Option_fullscreen_checkbox_label",content:"",args:at(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_bg_music_volume_slider:{key:"Option_bg_music_volume_slider",content:"",args:at(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_effect_volume_slider:{key:"Option_effect_volume_slider",content:"",args:at(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_text_speed_slider:{key:"Option_text_speed_slider",content:"",args:at(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_fullscreen_checkbox:{key:"Option_fullscreen_checkbox",content:"",args:at(["hoverStyle","activeStyle"])},Option_window_checkbox:{key:"Option_window_checkbox",content:"",args:at(["hoverStyle","activeStyle"])},Option_videoSize1080_checkbox:{key:"Option_videoSize1080_checkbox",content:"",args:at(["hoverStyle","activeStyle"])},Option_videoSize720_checkbox:{key:"Option_videoSize720_checkbox",content:"",args:at(["hoverStyle","activeStyle"])},Options_light_slider:{key:"Options_light_slider",content:"",args:at(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_global_volume_slider:{key:"Option_global_volume_slider",content:"",args:at(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_voice_slider:{key:"Option_voice_slider",content:"",args:at(["sliderStyle","sliderBgStyle","sliderThumbStyle"])}},buttons:{Option_back_button:{key:"Option_back_button",content:"",args:at(["hoverStyle","activeStyle"])}}},collection:{key:"collection",other:{Collection_title:{key:"Collection_title",content:"",args:at(["hoverStyle","activeStyle"])},Collection_bg:{key:"Collection_bg",content:"",args:at()},Collection_img1:{key:"Collection_img1",content:"",args:at()},Collection_img2:{key:"Collection_img2",content:"",args:at()},Collection_img3:{key:"Collection_img3",content:"",args:at()},Collection_detail_title:{key:"Collection_detail_title",content:"",args:at(["hoverStyle","activeStyle"])},Collection_detail_bg:{key:"Collection_detail_bg",content:"",args:at()},Collection_detail_dialog_bg:{key:"Collection_detail_dialog_bg",content:"",args:at()},Collection_detail_dialog_text:{key:"Collection_detail_dialog_text",content:"",args:at()},Collection_detail_left_bg:{key:"Collection_detail_left_bg",content:"",args:at()},Collection_detail_right_content_bg:{key:"Collection_detail_right_content_bg",content:"",args:at()},Collection_detail_right_thumbnail_bg:{key:"Collection_detail_right_thumbnail_bg",content:"",args:at()},Collection_detail_right_desc_bg:{key:"Collection_detail_right_desc_bg",content:"",args:at()}},buttons:{Collection_back_button:{key:"Collection_back_button",content:"",args:at(["hoverStyle","activeStyle"])},Collection_detail_dialog_prev_button:{key:"Collection_detail_dialog_prev_button",content:"",args:at(["hoverStyle","activeStyle"])},Collection_detail_dialog_next_button:{key:"Collection_detail_dialog_next_button",content:"",args:at(["hoverStyle","activeStyle"])}}},progressAndAchievement:{key:"progressAndAchievement",other:{Progress_title:{key:"Progress_title",content:"",args:at(["hoverStyle"])},Progress_bg:{key:"Progress_bg",content:"",args:at()},Progress_content_container:{key:"Progress_content_container",content:"",args:at()}},buttons:{Progress_back_button:{key:"Progress_back_button",content:"",args:at(["hoverStyle","activeStyle"])},Progress_achievement_button:{key:"Progress_achievement_button",content:"",args:at(["hoverStyle","activeStyle"])},Progress_chapter_button:{key:"Progress_chapter_button",content:"",args:at(["hoverStyle","activeStyle"])},Progress_affinity_button:{key:"Progress_affinity_button",content:"",args:at(["hoverStyle","activeStyle"])}}},affinity:{key:"affinity",other:{Affinity_title:{key:"Affinity_title",content:"",args:at(["hoverStyle"])},Affinity_item_container:{key:"Affinity_item_container",content:"",args:at()},Affinity_bg:{key:"Affinity_bg",content:"",args:at()},Affinity_locked_item:{key:"Affinity_locked_item",content:"",args:at(["hoverStyle"])},Affinity_unlocked_item:{key:"Affinity_unlocked_item",content:"",args:at(["contentStyle","extraStyle","contentHoverStyle","extraHoverStyle"])}},buttons:{Affinity_back_button:{key:"Affinity_back_button",content:"",args:at(["hoverStyle","activeStyle"])}}}},Iue={Title_img:1,Load_bg:1,Extra_bg:1,Option_bg:1,Collection_bg:1,Collection_detail_bg:1,Collection_detail_dialog_bg:1,Progress_bg:1,Affinity_bg:1,Collection_detail_left_bg:1,Collection_detail_right_content_bg:1,Collection_detail_right_thumbnail_bg:1,Collection_detail_right_desc_bg:1};var Lr=(e=>(e[e.Save=0]="Save",e[e.Load=1]="Load",e[e.Option=2]="Option",e))(Lr||{}),Lu=(e=>(e.Esc_continueGame_button="Esc_continueGame_button",e.Esc_backToLevel_button="Esc_backToLevel_button",e.Esc_setting_button="Esc_setting_button",e.Esc_exitGame_button="Esc_exitGame_button",e))(Lu||{}),Bu=(e=>(e.Achievement_back_button="Achievement_back_button",e.Achievement_title="Achievement_title",e.Achievement_progress_bg="Achievement_progress_bg",e.Achievement_progress_text="Achievement_progress_text",e.Achievement_progress="Achievement_progress",e.Achievement_notUnlock="Achievement_notUnlock",e))(Bu||{});const Zc={content:"",args:{hide:!0,style:{},hoverStyle:{}}},Qv={content:"",args:{hide:!1,style:{x:0,y:0,scale:1,fontSize:0,fontColor:"",btnImage:"",btnSound:"",btnPosition:"",align:"",fontFamily:""}}},Hm={isInGaming:!1,showBacklog:!1,showStarter:!0,showTitle:!0,showMenuPanel:!1,showTextBox:!0,showControls:!0,controlsVisibility:!0,currentMenuTag:Lr.Option,titleBg:"",titleBgm:"",logoImage:[],showExtra:!1,showGlobalDialog:!1,showPanicOverlay:!1,isEnterGame:!1,isShowLogo:!0,showStoryLine:!1,showAchievement:!1,showFavorited:!1,gameUIConfigs:Aue,showBeautyGuide:!1,showBeautyGuideDetail:!1,showBeautyGuideImageDialog:!1,isShowR18Modal:!1,openR18Modal:!1,showProgressAndAchievement:!1,showAffinity:!1,isShowGameMenu:!1,escMenus:{Esc_continueGame_button:Qv,Esc_backToLevel_button:Qv,Esc_setting_button:Qv,Esc_exitGame_button:Qv},achievementUI:{Achievement_progress_bg:Zc,Achievement_progress_text:Zc,Achievement_progress:Zc,Achievement_notUnlock:Zc,Achievement_back_button:Zc,Achievement_title:Zc},currentPlayAudio:null,showAffinityChangeList:[],showValueList:[]},cj=P0({name:"gui",initialState:Hm,reducers:{setVisibility:(e,t)=>{const{component:r,visibility:n}=t.payload;e[r]=n},setMenuPanelTag:(e,t)=>{e.currentMenuTag=t.payload},setGuiAsset:(e,t)=>{const{asset:r,value:n}=t.payload;e[r]=n},setLogoImage:(e,t)=>{e.logoImage=[...t.payload]},setShowStoryLine:(e,t)=>{e.showStoryLine=t.payload},setshowFavorited:(e,t)=>{e.showFavorited=t.payload},setGameUIConfigs:(e,t)=>{e.gameUIConfigs=t.payload},setGameR18:(e,t)=>{e.isShowR18Modal=t.payload},setEscMenus:(e,t)=>{e.escMenus=t.payload},setAchievementUI:(e,t)=>{e.achievementUI=t.payload},setCurrentPlayAudio:(e,t)=>{e.currentPlayAudio=t.payload},addShowValueList:(e,t)=>{const r=e.showValueList.findIndex(n=>n.showValueName===t.payload.showValueName);if(r>-1){const n=[...e.showValueList];n[r]=t.payload,e.showValueList=n}else e.showValueList=[...e.showValueList,t.payload]},updateShowValueList:(e,t)=>{e.showValueList=t.payload},addShowAffinityChangeList:(e,t)=>{e.showAffinityChangeList=[...e.showAffinityChangeList,t.payload]},updateShowAffinityChangeList:(e,t)=>{e.showAffinityChangeList=t.payload},removeAffinityChange:(e,t)=>{e.showAffinityChangeList=e.showAffinityChangeList.filter(r=>r.key!==t.payload)}}}),{setVisibility:vt,setMenuPanelTag:rc,setGuiAsset:ZS,setLogoImage:Rue,setShowStoryLine:JS,setshowFavorited:QS,setGameUIConfigs:Pue,setGameR18:fj,setEscMenus:Oue,setAchievementUI:kue,setCurrentPlayAudio:e2,addShowAffinityChangeList:Fue,updateShowAffinityChangeList:l9e,removeAffinityChange:Nue,addShowValueList:Lue,updateShowValueList:Bue}=cj.actions,Mue=cj.reducer,Due={common:{yes:"OK",no:"Cancel"},menu:{options:{title:"OPTIONS",pages:{system:{title:"System",options:{autoSpeed:{title:"Autoplay Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},language:{title:"Language"},resetData:{title:"Clear or Reset Data",options:{clearGameSave:"Clear game saving",resetSettings:"Reset settings",clearAll:"Clear all data"},dialogs:{clearGameSave:"Are you sure you want to clear game saving",resetSettings:"Are you sure you want to reset all settings",clearAll:"Are you sure you want to clear all data"}},gameSave:{title:"Import or Export Game Saving and Options",options:{export:"Export game saving and options",import:"Import game saving and options"},dialogs:{import:{title:"Are you sure you want to import game saving and options",tip:"Import game saving",error:"Parse game saving failed"}}},about:{title:"About WebGAL",subTitle:"WebGAL: An Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Display",options:{fullScreen:{title:"Full Screen",options:{on:"ON",off:"OFF"}},textSpeed:{title:"Text Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},textSize:{title:"Text Size",options:{small:"Small",medium:"Medium",large:"Large"}},textFont:{title:"Text Font",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Preview Text Showing",text:"You are previewing the text's font, size and playback speed, now. You can adjust the above options according to your perception."}}},sound:{title:"Sound",options:{volumeMain:{title:"Main Volume"},vocalVolume:{title:"Vocal Volume"},bgmVolume:{title:"BGM Volume"},seVolume:{title:"Sound Effects Volume"},uiSeVolume:{title:"UI Sound Effects Volume"}}}}},saving:{title:"SAVE",isOverwrite:"Are you sure you want to overwrite this save?"},loadSaving:{title:"LOAD"},title:{title:"TITLE"},exit:{title:"BACK"}},title:{start:{title:"START",subtitle:""},continue:{title:"CONTINUE",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"LOAD",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"No saving",buttons:{hide:"Hide",show:"Show",backlog:"Backlog",replay:"Replay",auto:"Auto",forward:"Forward",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Save",load:"Load",options:"Options",title:"Title",titleTips:"Confirm return to the title screen"}},extra:{title:"EXTRA"},r18:{title:"Welcome!",desction:"Please verify that you are 18 years of age or older to enter this site.",agree:"Agree",disagree:"Disagree"}},Uue={common:{yes:"",no:""},menu:{options:{title:"CONFIG",pages:{system:{title:"",options:{autoSpeed:{title:"",options:{slow:"",medium:"",fast:""}},language:{title:""},resetData:{title:"",options:{clearGameSave:"",resetSettings:"",clearAll:""},dialogs:{clearGameSave:"",resetSettings:"",clearAll:""}},gameSave:{title:"",options:{export:"",import:""},dialogs:{import:{title:"",tip:"",error:""}}},about:{title:"WebGAL",subTitle:"WebGAL",version:"",source:"",contributors:"",website:""}}},display:{title:"",options:{textSpeed:{title:"",options:{slow:"",medium:"",fast:""}},textSize:{title:"",options:{small:"",medium:"",large:""}},textFont:{title:"",options:{siYuanSimSun:"",SimHei:"",lxgw:""}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"",text:""}}},sound:{title:"",options:{volumeMain:{title:"MAIN "},vocalVolume:{title:"VOICE "},bgmVolume:{title:"BGM "},seVolume:{title:"SE "},uiSeVolume:{title:"UI "}}}}},saving:{title:"SAVE",isOverwrite:""},loadSaving:{title:"LOAD"},title:{title:"HOME"},exit:{title:"BACK"}},title:{start:{title:"",subtitle:"START"},continue:{title:"",subtitle:"CONTINUE"},options:{title:"",subtitle:"CONFIG"},load:{title:"",subtitle:"LOAD"},extra:{title:"",subtitle:"EXTRA"}},gaming:{noSaving:"",buttons:{hide:"CLOSE",show:"SHOW",backlog:"LOG",replay:"REPLAY",auto:"AUTO",forward:"SKIP",quicklySave:"QUICK SAVE",quicklyLoad:"QUICK LOAD",save:"SAVE",load:"LOAD",options:"CONFIG",title:"HOME",titleTips:""}},extra:{title:""}},jue={common:{yes:"",no:"",cancel:"",confirm:""},menu:{options:{title:"",pages:{system:{title:"",options:{autoSpeed:{title:"",options:{slow:"",medium:"",fast:""}},language:{title:""},resetData:{title:"",options:{clearGameSave:"",resetSettings:"",clearAll:""},dialogs:{clearGameSave:"",resetSettings:"",clearAll:""}},gameSave:{title:"",options:{export:"",import:""},dialogs:{import:{title:"",tip:"",error:""}}},about:{title:" WebGAL",subTitle:"WebGAL",version:"",source:"",contributors:"",website:""}}},display:{title:"",options:{fullScreen:{title:"",options:{on:"",off:""}},textSpeed:{title:"",options:{slow:"",medium:"",fast:""}},textSize:{title:"",options:{small:"",medium:"",large:""}},textFont:{title:"",options:{siYuanSimSun:"",SimHei:"",lxgw:""}},textboxOpacity:{title:""},textPreview:{title:"",text:""}}},sound:{title:"",options:{volumeMain:{title:""},vocalVolume:{title:""},bgmVolume:{title:""},seVolume:{title:""},uiSeVolume:{title:""},voiceOption:{title:""},voiceStop:{title:""},voiceContinue:{title:""}}}}},saving:{title:"",isOverwrite:""},extra:{title:""},loadSaving:{title:""},title:{title:"",options:{load:"",extra:""}},exit:{title:""}},title:{start:{title:"",subtitle:"START"},continue:{title:"",subtitle:"CONTINUE"},options:{title:"",subtitle:"OPTIONS"},load:{title:"",subtitle:"LOAD"},extra:{title:"",subtitle:"EXTRA"},quit:{title:"",subtitle:"QUIT"},storyLine:{title:"",subtitle:"STORYLINE"},achievement:{title:"",subtitle:"ACHIEVEMENT"},beautyGuide:{title:"",subtitle:"BEAUTYGUIDE"}},gaming:{noSaving:"",buttons:{hide:"",show:"",backlog:"",replay:"",auto:"",forward:"",quicklySave:"",quicklyLoad:"",save:"",load:"",options:"",title:"",titleTips:"",quitTips:`
`,backToGame:"",preserve:"",read:"",setting:"",backToTitle:"",collection:"",collected:"",continue:"",backToLevel:"",backToHome:""}},extra:{title:""},r18:{title:"",desction:" 18 ",agree:"",disagree:""}},$ue={common:{yes:"OK",no:"Annuler"},menu:{options:{title:"OPTIONS",pages:{system:{title:"Systme",options:{autoSpeed:{title:"Vitesse de lecture automatique",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},language:{title:"Langue"},resetData:{title:"Effacer ou rinitialiser les donnes",options:{clearGameSave:"Effacer la sauvegarde du jeu",resetSettings:"Rinitialiser les paramtres",clearAll:"Tout effacer"},dialogs:{clearGameSave:"tes-vous sr de vouloir effacer la sauvegarde du jeu",resetSettings:"tes-vous sr de vouloir rinitialiser tous les paramtres",clearAll:"tes-vous sr de vouloir tout effacer"}},gameSave:{title:"Importer ou exporter la sauvegarde du jeu et les options",options:{export:"Exporter la sauvegarde du jeu et les options",import:"Importer la sauvegarde du jeu et les options"},dialogs:{import:{title:"tes-vous sr de vouloir importer la sauvegarde du jeu et les options",tip:"Importer la sauvegarde du jeu",error:"Impossible d'analyser la sauvegarde du jeu"}}},about:{title:" propos de WebGAL",subTitle:"WebGAL: Un moteur de visual novel bas sur le web en open-source",version:"Version",source:"Dpt de code source",contributors:"Contributeurs",website:"Site web"}}},display:{title:"Affichage",options:{textSpeed:{title:"Vitesse d'affichage du texte",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},textSize:{title:"Taille du texte",options:{small:"Petite",medium:"Moyenne",large:"Grande"}},textFont:{title:"Police du texte",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Aperu de l'affichage du texte",text:"Vous prvisualisez la police, la taille et la vitesse de lecture du texte, maintenant. Vous pouvez ajuster les options ci-dessus selon votre perception."}}},sound:{title:"Son",options:{volumeMain:{title:"Volume principal"},vocalVolume:{title:"Volume des voix"},bgmVolume:{title:"Volume de la musique de fond"},seVolume:{title:"Volume des effets sonores"},uiSeVolume:{title:"Volume de linterface utilisateur"}}}}},saving:{title:"SAUVEGARDER",isOverwrite:"tes-vous sr de vouloir craser cette sauvegarde ?"},loadSaving:{title:"CHARGER"},title:{title:"TITRE"},exit:{title:"RETOUR"}},title:{start:{title:"COMMENCER",subtitle:""},continue:{title:"CONTINUER",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"CHARGER",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Aucune sauvegarde",buttons:{hide:"Masquer",show:"Afficher",backlog:"Journal",replay:"Rejouer",auto:"Automatique",forward:"Avancer",quicklySave:"Sauvegarde rapide",quicklyLoad:"Chargement rapide",save:"Sauvegarder",load:"Charger",options:"Options",title:"Titre",titleTips:"Confirmer le retour  l'cran titre"}},extra:{title:"EXTRA"}},Gue={common:{yes:"Ja",no:"Nein"},menu:{options:{title:"OPTIONEN",pages:{system:{title:"System",options:{autoSpeed:{title:"Auto-Geschwindigkeit",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},language:{title:"Sprache"},resetData:{title:"Daten lschen oder zurcksetzen",options:{clearGameSave:"Alle Spielstnde lschen",resetSettings:"Alle Einstellungen zurcksetzen",clearAll:"Alle Daten lschen"},dialogs:{clearGameSave:"Sind Sie sicher, dass Sie den Spielstand lschen mchten?",resetSettings:"Sind Sie sicher, dass Sie alle Einstellungen zurcksetzen mchten?",clearAll:"Sind Sie sicher, dass Sie alle Daten lschen mchten?"}},gameSave:{title:"Spielstand und Optionen importieren oder exportieren",options:{export:"Spielstand und Optionen exportieren",import:"Spielstand und Optionen importieren"},dialogs:{import:{title:"Sind Sie sicher, dass Sie den Spielstand und die Optionen importieren mchten?",tip:"Spielstand importieren",error:"Ein Fehler ist beim Analysieren des Spielstands aufgetreten"}}},about:{title:"ber WebGAL",subTitle:"WebGAL: Eine Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Darstellung",options:{textSpeed:{title:"Geschwindigkeit der Textanzeige",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},textSize:{title:"Textgre",options:{small:"Klein",medium:"Normal",large:"Gro"}},textFont:{title:"Schriftart",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Vorschautext wird angezeigt",text:"Sie knnen jederzeit die Schriftart, Gre und Wiedergabegeschwindigkeit des Textes nach Ihrer Vorliebe anpassen."}}},sound:{title:"Ton",options:{volumeMain:{title:"Hauptlautstrke"},vocalVolume:{title:"Stimmlautstrke"},bgmVolume:{title:"Musiklautstrke"},seVolume:{title:"Soundeffektlautstrke"},uiSeVolume:{title:"UI Soundeffektlautstrke"}}}}},saving:{title:"SPEICHERN",isOverwrite:"Sind Sie sicher, dass Sie diesen Spielstand berschreiben mchten?"},loadSaving:{title:"LADEN"},title:{title:"TITEL"},exit:{title:"ZURCK"}},title:{start:{title:"STARTEN",subtitle:""},continue:{title:"WEITERLESEN",subtitle:""},options:{title:"OPTIONEN",subtitle:""},load:{title:"LADEN",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Keine Speicherung",buttons:{hide:"Verstecken",show:"Anzeigen",backlog:"Verlauf",replay:"Wiedergabe",auto:"Auto",forward:"berspringen",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Speichern",load:"Laden",options:"Optionen",title:"Titel"}},extra:{title:"EXTRA"}},Vue={common:{yes:"",no:""},menu:{options:{title:"",pages:{system:{title:"",options:{autoSpeed:{title:"",options:{slow:"",medium:"",fast:""}},language:{title:""},resetData:{title:"",options:{clearGameSave:"",resetSettings:"",clearAll:""},dialogs:{clearGameSave:"",resetSettings:"",clearAll:""}},gameSave:{title:"",options:{export:"",import:""},dialogs:{import:{title:"",tip:"",error:""}}},about:{title:" WebGAL",subTitle:"WebGAL",version:"",source:"",contributors:"",website:""}}},display:{title:"",options:{textSpeed:{title:"",options:{slow:"",medium:"",fast:""}},textSize:{title:"",options:{small:"",medium:"",large:""}},textFont:{title:"",options:{siYuanSimSun:"",SimHei:""}},textboxOpacity:{title:""},textPreview:{title:"",text:""}}},sound:{title:"",options:{volumeMain:{title:""},vocalVolume:{title:""},bgmVolume:{title:""},seVolume:{title:""},uiSeVolume:{title:""}}}}},saving:{title:"",isOverwrite:"?"},loadSaving:{title:""},title:{title:"",options:{load:"",extra:"CG"}},exit:{title:""}},title:{start:{title:"",subtitle:"START"},continue:{title:"",subtitle:"CONTINUE"},options:{title:"",subtitle:"OPTIONS"},load:{title:"",subtitle:"LOAD"},extra:{title:"CG",subtitle:"EXTRA"}},gaming:{noSaving:"",buttons:{hide:"",show:"",backlog:"",replay:"",auto:"",forward:"",quicklySave:"",quicklyLoad:"",save:"",load:"",options:"",title:"",titleTips:""}},extra:{title:"CG"}};var Ah=(e=>(e[e.zhCn=0]="zhCn",e[e.en=1]="en",e[e.jp=2]="jp",e[e.fr=3]="fr",e[e.de=4]="de",e[e.zhTw=5]="zhTw",e))(Ah||{});const PN={zhCn:"",en:"English",jp:"",fr:"Franais",de:"Deutsch",zhTw:""},Hue={en:{translation:Due},zhCn:{translation:jue},jp:{translation:Uue},fr:{translation:$ue},de:{translation:Gue},zhTw:{translation:Vue}},Xue=0;var hj=(e=>(e[e.slow=0]="slow",e[e.normal=1]="normal",e[e.fast=2]="fast",e))(hj||{}),Gl=(e=>(e[e.small=0]="small",e[e.medium=1]="medium",e[e.large=2]="large",e))(Gl||{}),nc=(e=>(e[e.song=0]="song",e[e.hei=1]="hei",e[e.lxgw=2]="lxgw",e))(nc||{}),yI=(e=>(e[e.yes=0]="yes",e[e.no=1]="no",e))(yI||{}),rs=(e=>(e[e.on=0]="on",e[e.off=1]="off",e))(rs||{}),dj=(e=>(e.Size1080P="1920x1080",e.Size720P="1280x720",e))(dj||{});const pj={slPage:1,volumeMain:100,textSpeed:50,autoSpeed:hj.normal,textSize:Gl.medium,vocalVolume:100,bgmVolume:25,seVolume:100,uiSeVolume:50,textboxFont:nc.song,textboxOpacity:75,language:Ah.zhCn,voiceInterruption:yI.yes,fullScreen:rs.off,uiLight:100,videoSize:dj.Size720P},t2={optionData:pj,globalGameVar:{},appreciationData:{bgm:[],cg:[]},token:"",userInfo:{nickName:"",userId:0},showValues:[]},vj=P0({name:"userData",initialState:cn(t2),reducers:{setUserData:(e,t)=>{const{key:r,value:n}=t.payload;e[r]=n},addShowValues:(e,t)=>{const r=e.showValues.reduce((n,i)=>(n[i.key]=i,n),{});r[t.payload.key]=t.payload,e.showValues=Object.values(r)},unlockCgInUserData:(e,t)=>{const{name:r,url:n,series:i,poster:a}=t.payload;let o=!1;e.appreciationData.cg.forEach(s=>{n===s.url&&(o=!0,s.url=n,s.series=i,s.name=r||n,s.poster=a||"")}),o||e.appreciationData.cg.push(t.payload)},unlockBgmInUserData:(e,t)=>{const{name:r,url:n,series:i}=t.payload;let a=!1;e.appreciationData.bgm.forEach(o=>{n===o.url&&(a=!0,o.url=n,o.series=i,o.name=r||n)}),a||e.appreciationData.bgm.push(t.payload)},resetUserData:(e,t)=>{Object.assign(e,t.payload)},setOptionData:(e,t)=>{const{key:r,value:n}=t.payload;e.optionData[r]=n},setGlobalVar:(e,t)=>{e.globalGameVar[t.payload.key]=t.payload.value},setSlPage:(e,t)=>{e.optionData.slPage=t.payload},resetOptionSet(e){Object.assign(e.optionData,pj)},resetAllData(e){Object.assign(e,cn(t2))},setToken(e,t){e.token=t.payload},setUserInfo(e,t){e.userInfo=t.payload}}}),{setUserData:u9e,resetUserData:ty,setOptionData:xo,setGlobalVar:zue,setSlPage:Xm,unlockCgInUserData:gj,unlockBgmInUserData:mj,resetOptionSet:c9e,resetAllData:f9e,setToken:Wue,setUserInfo:h9e,addShowValues:Jc}=vj.actions,Yue=vj.reducer,que={saveData:[],quickSaveData:null,unlockStorylineList:[],saveVideoData:null,unlockAchieveData:[],isShowUnlock:!1,unlockAchieveAllTotal:0,unlockAchieveListAll:[],isLoadVideo:!1,isUnlockStoryline:!1,allUnlockAchieveList:[],allStorylineData:[],unlockAffinityData:[],uiSeAudioElement:null,gameScounds:{},menuScounds:{}},_j=P0({name:"saveData",initialState:cn(que),reducers:{setFastSave:(e,t)=>{e.quickSaveData=t.payload},resetFastSave:e=>{e.quickSaveData=null},resetSaves:e=>{e.quickSaveData=null,e.saveData=[]},saveGame:(e,t)=>{e.saveData[t.payload.index]=t.payload.saveData},replaceSaveGame:(e,t)=>{e.saveData=t.payload},setStorylineListFromStorage:(e,t)=>{e.unlockStorylineList=t.payload},addStorylineList:(e,t)=>{e.unlockStorylineList.push(t.payload)},replaceStorylineList:(e,t)=>{e.unlockStorylineList[t.payload.index]={...e.unlockStorylineList[t.payload.index],storyLine:t.payload.data.storyLine,videoData:t.payload.data.videoData}},setSaveVideoData:(e,t)=>{e.saveVideoData=t.payload},setUnlockAchieveData:(e,t)=>{e.unlockAchieveData=[...t.payload]},resetStorylineList:e=>{e.unlockStorylineList=[]},resetUnlockAchieveData:e=>{e.unlockAchieveData=[]},addUnlockAchieveData:(e,t)=>{const r=[...e.unlockAchieveData,t.payload];e.unlockAchieveData=r},replaceUnlockAchieveData:(e,t)=>{e.unlockAchieveData[t.payload.index]=t.payload.data},setIsShowUnlock:(e,t)=>{e.isShowUnlock=t.payload},setShowStoryline:(e,t)=>{e.isUnlockStoryline=t.payload},setUnlockAchieveAllTotal:(e,t)=>{e.unlockAchieveAllTotal=t.payload},setUnlockAchieveAll:(e,t)=>{e.unlockAchieveListAll=t.payload},setLoadVideo:(e,t)=>{e.isLoadVideo=t.payload},saveAllUnlockAchieveList:(e,t)=>{e.allUnlockAchieveList=t.payload},updateAffinityData:(e,t)=>{e.unlockAffinityData=t.payload},saveAllStorylineData:(e,t)=>{e.allStorylineData=t.payload},setSaveStatus:(e,t)=>{e[t.payload.key]=t.payload.value}}}),or=_j.actions,Kue=_j.reducer,Zue={paymentConfigurationList:[],gameInfo:null,isEditorPreviewMode:!1,userInfo:null},yj=P0({name:"storeData",initialState:cn(Zue),reducers:{setPaymentConfigurationList(e,t){e.paymentConfigurationList=t.payload},setGameInfo(e,t){e.gameInfo=t.payload},setIsEditorPreviewMode(e,t){e.isEditorPreviewMode=t.payload},setUserInfo(e,t){e.userInfo=t.payload}}}),{setPaymentConfigurationList:Jue,setGameInfo:r2,setIsEditorPreviewMode:Que,setUserInfo:ece}=yj.actions,tce=yj.reducer,le=Yee({reducer:{stage:Tue,GUI:Mue,userData:Yue,saveData:Kue,storeData:tce},middleware:MU({serializableCheck:!1})});window.webgalStore=le;var xI={exports:{}},xj=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}},rce=xj,Tc=Object.prototype.toString;function bI(e){return Tc.call(e)==="[object Array]"}function n2(e){return typeof e>"u"}function nce(e){return e!==null&&!n2(e)&&e.constructor!==null&&!n2(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ice(e){return Tc.call(e)==="[object ArrayBuffer]"}function ace(e){return typeof FormData<"u"&&e instanceof FormData}function oce(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function sce(e){return typeof e=="string"}function lce(e){return typeof e=="number"}function bj(e){return e!==null&&typeof e=="object"}function qg(e){if(Tc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function uce(e){return Tc.call(e)==="[object Date]"}function cce(e){return Tc.call(e)==="[object File]"}function fce(e){return Tc.call(e)==="[object Blob]"}function wj(e){return Tc.call(e)==="[object Function]"}function hce(e){return bj(e)&&wj(e.pipe)}function dce(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function pce(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function vce(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function wI(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),bI(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function i2(){var e={};function t(i,a){qg(e[a])&&qg(i)?e[a]=i2(e[a],i):qg(i)?e[a]=i2({},i):bI(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)wI(arguments[r],t);return e}function gce(e,t,r){return wI(t,function(i,a){r&&typeof i=="function"?e[a]=rce(i,r):e[a]=i}),e}function mce(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Ma={isArray:bI,isArrayBuffer:ice,isBuffer:nce,isFormData:ace,isArrayBufferView:oce,isString:sce,isNumber:lce,isObject:bj,isPlainObject:qg,isUndefined:n2,isDate:uce,isFile:cce,isBlob:fce,isFunction:wj,isStream:hce,isURLSearchParams:dce,isStandardBrowserEnv:vce,forEach:wI,merge:i2,extend:gce,trim:pce,stripBOM:mce},Qc=Ma;function ON(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ej=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(Qc.isURLSearchParams(r))i=r.toString();else{var a=[];Qc.forEach(r,function(c,l){c===null||typeof c>"u"||(Qc.isArray(c)?l=l+"[]":c=[c],Qc.forEach(c,function(f){Qc.isDate(f)?f=f.toISOString():Qc.isObject(f)&&(f=JSON.stringify(f)),a.push(ON(l)+"="+ON(f))}))}),i=a.join("&")}if(i){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},_ce=Ma;function ry(){this.handlers=[]}ry.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ry.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};ry.prototype.forEach=function(t){_ce.forEach(this.handlers,function(n){n!==null&&t(n)})};var yce=ry,xce=Ma,bce=function(t,r){xce.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})},Sj=function(t,r,n,i,a){return t.config=r,n&&(t.code=n),t.request=i,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},bb,kN;function Cj(){if(kN)return bb;kN=1;var e=Sj;return bb=function(r,n,i,a,o){var s=new Error(r);return e(s,n,i,a,o)},bb}var wb,FN;function wce(){if(FN)return wb;FN=1;var e=Cj();return wb=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(e("Request failed with status code "+i.status,i.config,null,i.request,i))},wb}var Eb,NN;function Ece(){if(NN)return Eb;NN=1;var e=Ma;return Eb=e.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var l=[];l.push(n+"="+encodeURIComponent(i)),e.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),e.isString(o)&&l.push("path="+o),e.isString(s)&&l.push("domain="+s),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Eb}var Sb,LN;function Sce(){return LN||(LN=1,Sb=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Sb}var Cb,BN;function Cce(){return BN||(BN=1,Cb=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),Cb}var Tb,MN;function Tce(){if(MN)return Tb;MN=1;var e=Sce(),t=Cce();return Tb=function(n,i){return n&&!e(i)?t(n,i):i},Tb}var Ab,DN;function Ace(){if(DN)return Ab;DN=1;var e=Ma,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ab=function(n){var i={},a,o,s;return n&&e.forEach(n.split(`
`),function(l){if(s=l.indexOf(":"),a=e.trim(l.substr(0,s)).toLowerCase(),o=e.trim(l.substr(s+1)),a){if(i[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},Ab}var Ib,UN;function Ice(){if(UN)return Ib;UN=1;var e=Ma;return Ib=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=e.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Ib}var Rb,jN;function ny(){if(jN)return Rb;jN=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Rb=e,Rb}var Pb,$N;function GN(){if($N)return Pb;$N=1;var e=Ma,t=wce(),r=Ece(),n=Ej,i=Tce(),a=Ace(),o=Ice(),s=Cj(),c=iy(),l=ny();return Pb=function(f){return new Promise(function(p,d){var g=f.data,_=f.headers,v=f.responseType,m;function y(){f.cancelToken&&f.cancelToken.unsubscribe(m),f.signal&&f.signal.removeEventListener("abort",m)}e.isFormData(g)&&delete _["Content-Type"];var b=new XMLHttpRequest;if(f.auth){var w=f.auth.username||"",E=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";_.Authorization="Basic "+btoa(w+":"+E)}var C=i(f.baseURL,f.url);b.open(f.method.toUpperCase(),n(C,f.params,f.paramsSerializer),!0),b.timeout=f.timeout;function T(){if(b){var I="getAllResponseHeaders"in b?a(b.getAllResponseHeaders()):null,O=!v||v==="text"||v==="json"?b.responseText:b.response,P={data:O,status:b.status,statusText:b.statusText,headers:I,config:f,request:b};t(function(F){p(F),y()},function(F){d(F),y()},P),b=null}}if("onloadend"in b?b.onloadend=T:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(T)},b.onabort=function(){b&&(d(s("Request aborted",f,"ECONNABORTED",b)),b=null)},b.onerror=function(){d(s("Network Error",f,null,b)),b=null},b.ontimeout=function(){var O=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",P=f.transitional||c.transitional;f.timeoutErrorMessage&&(O=f.timeoutErrorMessage),d(s(O,f,P.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},e.isStandardBrowserEnv()){var A=(f.withCredentials||o(C))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;A&&(_[f.xsrfHeaderName]=A)}"setRequestHeader"in b&&e.forEach(_,function(O,P){typeof g>"u"&&P.toLowerCase()==="content-type"?delete _[P]:b.setRequestHeader(P,O)}),e.isUndefined(f.withCredentials)||(b.withCredentials=!!f.withCredentials),v&&v!=="json"&&(b.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&b.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(m=function(I){b&&(d(!I||I&&I.type?new l("canceled"):I),b.abort(),b=null)},f.cancelToken&&f.cancelToken.subscribe(m),f.signal&&(f.signal.aborted?m():f.signal.addEventListener("abort",m))),g||(g=null),b.send(g)})},Pb}var Ob,VN;function iy(){if(VN)return Ob;VN=1;var e=Ma,t=bce,r=Sj,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!e.isUndefined(c)&&e.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function a(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=GN()),c}function o(c,l,u){if(e.isString(c))try{return(l||JSON.parse)(c),e.trim(c)}catch(f){if(f.name!=="SyntaxError")throw f}return(u||JSON.stringify)(c)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(l,u){return t(u,"Accept"),t(u,"Content-Type"),e.isFormData(l)||e.isArrayBuffer(l)||e.isBuffer(l)||e.isStream(l)||e.isFile(l)||e.isBlob(l)?l:e.isArrayBufferView(l)?l.buffer:e.isURLSearchParams(l)?(i(u,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):e.isObject(l)||u&&u["Content-Type"]==="application/json"?(i(u,"application/json"),o(l)):l}],transformResponse:[function(l){var u=this.transitional||s.transitional,f=u&&u.silentJSONParsing,h=u&&u.forcedJSONParsing,p=!f&&this.responseType==="json";if(p||h&&e.isString(l)&&l.length)try{return JSON.parse(l)}catch(d){if(p)throw d.name==="SyntaxError"?r(d,this,"E_JSON_PARSE"):d}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return e.forEach(["delete","get","head"],function(l){s.headers[l]={}}),e.forEach(["post","put","patch"],function(l){s.headers[l]=e.merge(n)}),Ob=s,Ob}var Rce=Ma,Pce=iy(),Oce=function(t,r,n){var i=this||Pce;return Rce.forEach(n,function(o){t=o.call(i,t,r)}),t},kb,HN;function Tj(){return HN||(HN=1,kb=function(t){return!!(t&&t.__CANCEL__)}),kb}var XN=Ma,Fb=Oce,kce=Tj(),Fce=iy(),Nce=ny();function Nb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nce("canceled")}var Lce=function(t){Nb(t),t.headers=t.headers||{},t.data=Fb.call(t,t.data,t.headers,t.transformRequest),t.headers=XN.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),XN.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||Fce.adapter;return r(t).then(function(i){return Nb(t),i.data=Fb.call(t,i.data,i.headers,t.transformResponse),i},function(i){return kce(i)||(Nb(t),i&&i.response&&(i.response.data=Fb.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Ia=Ma,Aj=function(t,r){r=r||{};var n={};function i(u,f){return Ia.isPlainObject(u)&&Ia.isPlainObject(f)?Ia.merge(u,f):Ia.isPlainObject(f)?Ia.merge({},f):Ia.isArray(f)?f.slice():f}function a(u){if(Ia.isUndefined(r[u])){if(!Ia.isUndefined(t[u]))return i(void 0,t[u])}else return i(t[u],r[u])}function o(u){if(!Ia.isUndefined(r[u]))return i(void 0,r[u])}function s(u){if(Ia.isUndefined(r[u])){if(!Ia.isUndefined(t[u]))return i(void 0,t[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(t[u],r[u]);if(u in t)return i(void 0,t[u])}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return Ia.forEach(Object.keys(t).concat(Object.keys(r)),function(f){var h=l[f]||a,p=h(f);Ia.isUndefined(p)&&h!==c||(n[f]=p)}),n},Lb,zN;function Ij(){return zN||(zN=1,Lb={version:"0.24.0"}),Lb}var Bce=Ij().version,EI={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){EI[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var WN={};EI.transitional=function(t,r,n){function i(a,o){return"[Axios v"+Bce+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(t===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!WN[o]&&(WN[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};function Mce(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],o=t[a];if(o){var s=e[a],c=s===void 0||o(s,a,e);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var Dce={assertOptions:Mce,validators:EI},Rj=Ma,Uce=Ej,YN=yce,qN=Lce,ay=Aj,Pj=Dce,ef=Pj.validators;function F0(e){this.defaults=e,this.interceptors={request:new YN,response:new YN}}F0.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=ay(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&Pj.assertOptions(r,{silentJSONParsing:ef.transitional(ef.boolean),forcedJSONParsing:ef.transitional(ef.boolean),clarifyTimeoutError:ef.transitional(ef.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(t)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var a=[];this.interceptors.response.forEach(function(h){a.push(h.fulfilled,h.rejected)});var o;if(!i){var s=[qN,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=t;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{o=qN(c)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};F0.prototype.getUri=function(t){return t=ay(this.defaults,t),Uce(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Rj.forEach(["delete","get","head","options"],function(t){F0.prototype[t]=function(r,n){return this.request(ay(n||{},{method:t,url:r,data:(n||{}).data}))}});Rj.forEach(["post","put","patch"],function(t){F0.prototype[t]=function(r,n,i){return this.request(ay(i||{},{method:t,url:r,data:n}))}});var jce=F0,Bb,KN;function $ce(){if(KN)return Bb;KN=1;var e=ny();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new e(o),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(o){n=o});return{token:i,cancel:n}},Bb=t,Bb}var Mb,ZN;function Gce(){return ZN||(ZN=1,Mb=function(t){return function(n){return t.apply(null,n)}}),Mb}var Db,JN;function Vce(){return JN||(JN=1,Db=function(t){return typeof t=="object"&&t.isAxiosError===!0}),Db}var QN=Ma,Hce=xj,Kg=jce,Xce=Aj,zce=iy();function Oj(e){var t=new Kg(e),r=Hce(Kg.prototype.request,t);return QN.extend(r,Kg.prototype,t),QN.extend(r,t),r.create=function(i){return Oj(Xce(e,i))},r}var ps=Oj(zce);ps.Axios=Kg;ps.Cancel=ny();ps.CancelToken=$ce();ps.isCancel=Tj();ps.VERSION=Ij().version;ps.all=function(t){return Promise.all(t)};ps.spread=Gce();ps.isAxiosError=Vce();xI.exports=ps;xI.exports.default=ps;var Wce=xI.exports,Yce=Wce;const qce=Yce;class Kce{constructor(){this.url="",this.level="all",this.mongoUrl="mongodb://localhost:27017/",this.collection="main",this.isUpload=!0}init(t,r){this.url=t,r&&(this.mongoUrl=r)}setUpload(t){this.isUpload=t}setCollection(t){this.collection=t}setLevel(t){this.level=t.toUpperCase()}upload(t,r,n,i){typeof t!="string"&&this.error("log",void 0,!1);let a={log:{info:t,data:r,level:n,now:i},mongoUrl:this.mongoUrl,collection:this.collection};const o=this;this.url!==""&&this.isUpload&&qce.post(this.url+"/log",a).then(s=>{o.trace("Logged to cloud.",void 0,!1)}).catch(s=>{o.error("Logging to cloud failed!",void 0,!1)})}clog(t,r,n,i,a,o){const s={all:7,ALL:7,TRACE:6,DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,NONE:0,none:0};s[n]<=s[this.level]&&(console.log("%c%s%c%s%c%s%c %s","color:white;background-color:"+i,"["+n+"]",""," ","color:"+i,"["+a.toLocaleString()+"]","",t),r&&(console.log(r),console.log("------------------------"))),o===void 0&&this.upload(t,r,n,a),o!==void 0&&o&&this.upload(t,r,n,a)}trace(t,r,n){const i=new Date,a="TRACE",o="#005CAF";this.clog(t,r,a,o,i,n)}debug(t,r,n){const i=new Date,a="DEBUG",o="#0089A7";this.clog(t,r,a,o,i,n)}info(t,r,n){const i=new Date,a="INFO",o="#00896C";this.clog(t,r,a,o,i,n)}warn(t,r,n){const i=new Date,a="WARN",o="#DDA52D";this.clog(t,r,a,o,i,n)}error(t,r,n){const i=new Date,a="ERROR",o="#AB3B3A";this.clog(t,r,a,o,i,n)}fatal(t,r,n){const i=new Date,a="FATAL",o="#E16B8C";this.clog(t,r,a,o,i,n)}}var Zce=Kce;const Jce=Gi(Zce),qe=new Jce;let eL;function SI(e,t=0,r=100){if(qe.info("playing bgm"+e),e===""){eL=setTimeout(()=>{le.dispatch($t({key:"bgm",value:{src:"",enter:0,volume:100}}))},t);const i=le.getState().stage.bgm.src;le.dispatch($t({key:"bgm",value:{src:i,enter:-t,volume:r}}))}else clearTimeout(eL),le.dispatch($t({key:"bgm",value:{src:e,enter:t,volume:r}}));const n=document.getElementById("currentBgm");n.src&&(n==null||n.play())}var Et=(e=>(e[e.background=0]="background",e[e.bgm=1]="bgm",e[e.figure=2]="figure",e[e.scene=3]="scene",e[e.tex=4]="tex",e[e.vocal=5]="vocal",e[e.video=6]="video",e[e.ui=7]="ui",e[e.image=8]="image",e[e.font=9]="font",e))(Et||{});const At=(e,t)=>{if(e.match("http://")||e.match("https://"))return e;{let r;switch(t){case 0:r=`./game/background/${e}`;break;case 3:r=`./game/scene/${e}`;break;case 5:r=`./game/vocal/${e}`;break;case 2:r=`./game/figure/${e}`;break;case 1:r=`./game/bgm/${e}`;break;case 6:r=`./game/video/${e}`;break;case 7:r=`./game/ui/${e}`;break;case 8:r=`./game/image/${e}`;break;case 9:r=`./game/font/${e}`;break;default:r="";break}return r}};function kj(e,t){return function(){return e.apply(t,arguments)}}const{toString:Qce}=Object.prototype,{getPrototypeOf:CI}=Object,oy=(e=>t=>{const r=Qce.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ko=e=>(e=e.toLowerCase(),t=>oy(t)===e),sy=e=>t=>typeof t===e,{isArray:Ih}=Array,Gp=sy("undefined");function efe(e){return e!==null&&!Gp(e)&&e.constructor!==null&&!Gp(e.constructor)&&ka(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fj=ko("ArrayBuffer");function tfe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Fj(e.buffer),t}const rfe=sy("string"),ka=sy("function"),Nj=sy("number"),ly=e=>e!==null&&typeof e=="object",nfe=e=>e===!0||e===!1,Zg=e=>{if(oy(e)!=="object")return!1;const t=CI(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ife=ko("Date"),afe=ko("File"),ofe=ko("Blob"),sfe=ko("FileList"),lfe=e=>ly(e)&&ka(e.pipe),ufe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ka(e.append)&&((t=oy(e))==="formdata"||t==="object"&&ka(e.toString)&&e.toString()==="[object FormData]"))},cfe=ko("URLSearchParams"),[ffe,hfe,dfe,pfe]=["ReadableStream","Request","Response","Headers"].map(ko),vfe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function N0(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Ih(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,e[s],s,e)}}function Lj(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const qu=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Bj=e=>!Gp(e)&&e!==qu;function a2(){const{caseless:e}=Bj(this)&&this||{},t={},r=(n,i)=>{const a=e&&Lj(t,i)||i;Zg(t[a])&&Zg(n)?t[a]=a2(t[a],n):Zg(n)?t[a]=a2({},n):Ih(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&N0(arguments[n],r);return t}const gfe=(e,t,r,{allOwnKeys:n}={})=>(N0(t,(i,a)=>{r&&ka(i)?e[a]=kj(i,r):e[a]=i},{allOwnKeys:n}),e),mfe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_fe=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},yfe=(e,t,r,n)=>{let i,a,o;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!n||n(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=r!==!1&&CI(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},xfe=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},bfe=e=>{if(!e)return null;if(Ih(e))return e;let t=e.length;if(!Nj(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},wfe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&CI(Uint8Array)),Efe=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Sfe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Cfe=ko("HTMLFormElement"),Tfe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),tL=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Afe=ko("RegExp"),Mj=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};N0(r,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(n[a]=o||i)}),Object.defineProperties(e,n)},Ife=e=>{Mj(e,(t,r)=>{if(ka(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ka(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Rfe=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return Ih(e)?n(e):n(String(e).split(t)),r},Pfe=()=>{},Ofe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Ub="abcdefghijklmnopqrstuvwxyz",rL="0123456789",Dj={DIGIT:rL,ALPHA:Ub,ALPHA_DIGIT:Ub+Ub.toUpperCase()+rL},kfe=(e=16,t=Dj.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Ffe(e){return!!(e&&ka(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Nfe=e=>{const t=new Array(10),r=(n,i)=>{if(ly(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=Ih(n)?[]:{};return N0(n,(o,s)=>{const c=r(o,i+1);!Gp(c)&&(a[s]=c)}),t[i]=void 0,a}}return n};return r(e,0)},Lfe=ko("AsyncFunction"),Bfe=e=>e&&(ly(e)||ka(e))&&ka(e.then)&&ka(e.catch),Uj=((e,t)=>e?setImmediate:t?((r,n)=>(qu.addEventListener("message",({source:i,data:a})=>{i===qu&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),qu.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ka(qu.postMessage)),Mfe=typeof queueMicrotask<"u"?queueMicrotask.bind(qu):typeof process<"u"&&process.nextTick||Uj,Be={isArray:Ih,isArrayBuffer:Fj,isBuffer:efe,isFormData:ufe,isArrayBufferView:tfe,isString:rfe,isNumber:Nj,isBoolean:nfe,isObject:ly,isPlainObject:Zg,isReadableStream:ffe,isRequest:hfe,isResponse:dfe,isHeaders:pfe,isUndefined:Gp,isDate:ife,isFile:afe,isBlob:ofe,isRegExp:Afe,isFunction:ka,isStream:lfe,isURLSearchParams:cfe,isTypedArray:wfe,isFileList:sfe,forEach:N0,merge:a2,extend:gfe,trim:vfe,stripBOM:mfe,inherits:_fe,toFlatObject:yfe,kindOf:oy,kindOfTest:ko,endsWith:xfe,toArray:bfe,forEachEntry:Efe,matchAll:Sfe,isHTMLForm:Cfe,hasOwnProperty:tL,hasOwnProp:tL,reduceDescriptors:Mj,freezeMethods:Ife,toObjectSet:Rfe,toCamelCase:Tfe,noop:Pfe,toFiniteNumber:Ofe,findKey:Lj,global:qu,isContextDefined:Bj,ALPHABET:Dj,generateString:kfe,isSpecCompliantForm:Ffe,toJSONObject:Nfe,isAsyncFn:Lfe,isThenable:Bfe,setImmediate:Uj,asap:Mfe};function zt(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Be.inherits(zt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const jj=zt.prototype,$j={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{$j[e]={value:e}});Object.defineProperties(zt,$j);Object.defineProperty(jj,"isAxiosError",{value:!0});zt.from=(e,t,r,n,i,a)=>{const o=Object.create(jj);return Be.toFlatObject(e,o,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),zt.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const Dfe=null;function o2(e){return Be.isPlainObject(e)||Be.isArray(e)}function Gj(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function nL(e,t,r){return e?e.concat(t).map(function(i,a){return i=Gj(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function Ufe(e){return Be.isArray(e)&&!e.some(o2)}const jfe=Be.toFlatObject(Be,{},null,function(t){return/^is[A-Z]/.test(t)});function uy(e,t,r){if(!Be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Be.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,_){return!Be.isUndefined(_[g])});const n=r.metaTokens,i=r.visitor||u,a=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(t);if(!Be.isFunction(i))throw new TypeError("visitor must be a function");function l(d){if(d===null)return"";if(Be.isDate(d))return d.toISOString();if(!c&&Be.isBlob(d))throw new zt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(d)||Be.isTypedArray(d)?c&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,g,_){let v=d;if(d&&!_&&typeof d=="object"){if(Be.endsWith(g,"{}"))g=n?g:g.slice(0,-2),d=JSON.stringify(d);else if(Be.isArray(d)&&Ufe(d)||(Be.isFileList(d)||Be.endsWith(g,"[]"))&&(v=Be.toArray(d)))return g=Gj(g),v.forEach(function(y,b){!(Be.isUndefined(y)||y===null)&&t.append(o===!0?nL([g],b,a):o===null?g:g+"[]",l(y))}),!1}return o2(d)?!0:(t.append(nL(_,g,a),l(d)),!1)}const f=[],h=Object.assign(jfe,{defaultVisitor:u,convertValue:l,isVisitable:o2});function p(d,g){if(!Be.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(d),Be.forEach(d,function(v,m){(!(Be.isUndefined(v)||v===null)&&i.call(t,v,Be.isString(m)?m.trim():m,g,h))===!0&&p(v,g?g.concat(m):[m])}),f.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return p(e),t}function iL(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function TI(e,t){this._pairs=[],e&&uy(e,this,t)}const Vj=TI.prototype;Vj.append=function(t,r){this._pairs.push([t,r])};Vj.toString=function(t){const r=t?function(n){return t.call(this,n,iL)}:iL;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function $fe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hj(e,t,r){if(!t)return e;const n=r&&r.encode||$fe,i=r&&r.serialize;let a;if(i?a=i(t,r):a=Be.isURLSearchParams(t)?t.toString():new TI(t,r).toString(n),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Gfe{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Be.forEach(this.handlers,function(n){n!==null&&t(n)})}}const aL=Gfe,Xj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vfe=typeof URLSearchParams<"u"?URLSearchParams:TI,Hfe=typeof FormData<"u"?FormData:null,Xfe=typeof Blob<"u"?Blob:null,zfe={isBrowser:!0,classes:{URLSearchParams:Vfe,FormData:Hfe,Blob:Xfe},protocols:["http","https","file","blob","url","data"]},AI=typeof window<"u"&&typeof document<"u",Wfe=(e=>AI&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Yfe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),qfe=AI&&window.location.href||"http://localhost",Kfe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:AI,hasStandardBrowserEnv:Wfe,hasStandardBrowserWebWorkerEnv:Yfe,origin:qfe},Symbol.toStringTag,{value:"Module"})),Co={...Kfe,...zfe};function Zfe(e,t){return uy(e,new Co.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return Co.isNode&&Be.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function Jfe(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qfe(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function zj(e){function t(r,n,i,a){let o=r[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),c=a>=r.length;return o=!o&&Be.isArray(i)?i.length:o,c?(Be.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!Be.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],a)&&Be.isArray(i[o])&&(i[o]=Qfe(i[o])),!s)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const r={};return Be.forEachEntry(e,(n,i)=>{t(Jfe(n),i,r,0)}),r}return null}function ehe(e,t,r){if(Be.isString(e))try{return(t||JSON.parse)(e),Be.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const II={transitional:Xj,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=Be.isObject(t);if(a&&Be.isHTMLForm(t)&&(t=new FormData(t)),Be.isFormData(t))return i?JSON.stringify(zj(t)):t;if(Be.isArrayBuffer(t)||Be.isBuffer(t)||Be.isStream(t)||Be.isFile(t)||Be.isBlob(t)||Be.isReadableStream(t))return t;if(Be.isArrayBufferView(t))return t.buffer;if(Be.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Zfe(t,this.formSerializer).toString();if((s=Be.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return uy(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),ehe(t)):t}],transformResponse:[function(t){const r=this.transitional||II.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Be.isResponse(t)||Be.isReadableStream(t))return t;if(t&&Be.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?zt.from(s,zt.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Co.classes.FormData,Blob:Co.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{II.headers[e]={}});const RI=II,the=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rhe=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&the[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},oL=Symbol("internals");function Sd(e){return e&&String(e).trim().toLowerCase()}function Jg(e){return e===!1||e==null?e:Be.isArray(e)?e.map(Jg):String(e)}function nhe(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const ihe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function jb(e,t,r,n,i){if(Be.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!Be.isString(t)){if(Be.isString(n))return t.indexOf(n)!==-1;if(Be.isRegExp(n))return n.test(t)}}function ahe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function ohe(e,t){const r=Be.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,o){return this[n].call(this,t,i,a,o)},configurable:!0})})}class cy{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(s,c,l){const u=Sd(c);if(!u)throw new Error("header name must be a non-empty string");const f=Be.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=Jg(s))}const o=(s,c)=>Be.forEach(s,(l,u)=>a(l,u,c));if(Be.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Be.isString(t)&&(t=t.trim())&&!ihe(t))o(rhe(t),r);else if(Be.isHeaders(t))for(const[s,c]of t.entries())a(c,s,n);else t!=null&&a(r,t,n);return this}get(t,r){if(t=Sd(t),t){const n=Be.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return nhe(i);if(Be.isFunction(r))return r.call(this,i,n);if(Be.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Sd(t),t){const n=Be.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||jb(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(o){if(o=Sd(o),o){const s=Be.findKey(n,o);s&&(!r||jb(n,n[s],s,r))&&(delete n[s],i=!0)}}return Be.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||jb(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return Be.forEach(this,(i,a)=>{const o=Be.findKey(n,a);if(o){r[o]=Jg(i),delete r[a];return}const s=t?ahe(a):String(a).trim();s!==a&&delete r[a],r[s]=Jg(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Be.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&Be.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[oL]=this[oL]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=Sd(o);n[s]||(ohe(i,o),n[s]=!0)}return Be.isArray(t)?t.forEach(a):a(t),this}}cy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(cy.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Be.freezeMethods(cy);const To=cy;function $b(e,t){const r=this||RI,n=t||r,i=To.from(n.headers);let a=n.data;return Be.forEach(e,function(s){a=s.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Wj(e){return!!(e&&e.__CANCEL__)}function Rh(e,t,r){zt.call(this,e??"canceled",zt.ERR_CANCELED,t,r),this.name="CanceledError"}Be.inherits(Rh,zt,{__CANCEL__:!0});function Yj(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new zt("Request failed with status code "+r.status,[zt.ERR_BAD_REQUEST,zt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function she(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function lhe(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=n[a];o||(o=l),r[i]=c,n[i]=l;let f=a,h=0;for(;f!==i;)h+=r[f++],f=f%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-o<t)return;const p=u&&l-u;return p?Math.round(h*1e3/p):void 0}}function uhe(e,t){let r=0,n=1e3/t,i,a;const o=(l,u=Date.now())=>{r=u,i=null,a&&(clearTimeout(a),a=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),f=u-r;f>=n?o(l,u):(i=l,a||(a=setTimeout(()=>{a=null,o(i)},n-f)))},()=>i&&o(i)]}const zm=(e,t,r=3)=>{let n=0;const i=lhe(50,250);return uhe(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,c=o-n,l=i(c),u=o<=s;n=o;const f={loaded:o,total:s,progress:s?o/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-o)/l:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(f)},r)},sL=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},lL=e=>(...t)=>Be.asap(()=>e(...t)),che=Co.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(a){let o=a;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const s=Be.isString(o)?i(o):o;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}(),fhe=Co.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const o=[e+"="+encodeURIComponent(t)];Be.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Be.isString(n)&&o.push("path="+n),Be.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hhe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function dhe(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function qj(e,t){return e&&!hhe(t)?dhe(e,t):t}const uL=e=>e instanceof To?{...e}:e;function pc(e,t){t=t||{};const r={};function n(l,u,f){return Be.isPlainObject(l)&&Be.isPlainObject(u)?Be.merge.call({caseless:f},l,u):Be.isPlainObject(u)?Be.merge({},u):Be.isArray(u)?u.slice():u}function i(l,u,f){if(Be.isUndefined(u)){if(!Be.isUndefined(l))return n(void 0,l,f)}else return n(l,u,f)}function a(l,u){if(!Be.isUndefined(u))return n(void 0,u)}function o(l,u){if(Be.isUndefined(u)){if(!Be.isUndefined(l))return n(void 0,l)}else return n(void 0,u)}function s(l,u,f){if(f in t)return n(l,u);if(f in e)return n(void 0,l)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(l,u)=>i(uL(l),uL(u),!0)};return Be.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=c[u]||i,h=f(e[u],t[u],u);Be.isUndefined(h)&&f!==s||(r[u]=h)}),r}const Kj=e=>{const t=pc({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;t.headers=o=To.from(o),t.url=Hj(qj(t.baseURL,t.url),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(Be.isFormData(r)){if(Co.hasStandardBrowserEnv||Co.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(Co.hasStandardBrowserEnv&&(n&&Be.isFunction(n)&&(n=n(t)),n||n!==!1&&che(t.url))){const l=i&&a&&fhe.read(a);l&&o.set(i,l)}return t},phe=typeof XMLHttpRequest<"u",vhe=phe&&function(e){return new Promise(function(r,n){const i=Kj(e);let a=i.data;const o=To.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,f,h,p,d;function g(){p&&p(),d&&d(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function v(){if(!_)return;const y=To.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),w={data:!s||s==="text"||s==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:y,config:e,request:_};Yj(function(C){r(C),g()},function(C){n(C),g()},w),_=null}"onloadend"in _?_.onloadend=v:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(v)},_.onabort=function(){_&&(n(new zt("Request aborted",zt.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new zt("Network Error",zt.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const w=i.transitional||Xj;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),n(new zt(b,w.clarifyTimeoutError?zt.ETIMEDOUT:zt.ECONNABORTED,e,_)),_=null},a===void 0&&o.setContentType(null),"setRequestHeader"in _&&Be.forEach(o.toJSON(),function(b,w){_.setRequestHeader(w,b)}),Be.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),s&&s!=="json"&&(_.responseType=i.responseType),l&&([h,d]=zm(l,!0),_.addEventListener("progress",h)),c&&_.upload&&([f,p]=zm(c),_.upload.addEventListener("progress",f),_.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=y=>{_&&(n(!y||y.type?new Rh(null,e,_):y),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const m=she(i.url);if(m&&Co.protocols.indexOf(m)===-1){n(new zt("Unsupported protocol "+m+":",zt.ERR_BAD_REQUEST,e));return}_.send(a||null)})},ghe=(e,t)=>{let r=new AbortController,n;const i=function(c){if(!n){n=!0,o();const l=c instanceof Error?c:this.reason;r.abort(l instanceof zt?l:new Rh(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{i(new zt(`timeout ${t} of ms exceeded`,zt.ETIMEDOUT))},t);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",i):c.unsubscribe(i))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",i));const{signal:s}=r;return s.unsubscribe=o,[s,()=>{a&&clearTimeout(a),a=null}]},mhe=ghe,_he=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},yhe=async function*(e,t,r){for await(const n of e)yield*_he(ArrayBuffer.isView(n)?n:await r(String(n)),t)},cL=(e,t,r,n,i)=>{const a=yhe(e,t,i);let o=0,s,c=l=>{s||(s=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:f}=await a.next();if(u){c(),l.close();return}let h=f.byteLength;if(r){let p=o+=h;r(p)}l.enqueue(new Uint8Array(f))}catch(u){throw c(u),u}},cancel(l){return c(l),a.return()}},{highWaterMark:2})},fy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Zj=fy&&typeof ReadableStream=="function",s2=fy&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Jj=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xhe=Zj&&Jj(()=>{let e=!1;const t=new Request(Co.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),fL=64*1024,l2=Zj&&Jj(()=>Be.isReadableStream(new Response("").body)),Wm={stream:l2&&(e=>e.body)};fy&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Wm[t]&&(Wm[t]=Be.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new zt(`Response type '${t}' is not supported`,zt.ERR_NOT_SUPPORT,n)})})})(new Response);const bhe=async e=>{if(e==null)return 0;if(Be.isBlob(e))return e.size;if(Be.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(Be.isArrayBufferView(e)||Be.isArrayBuffer(e))return e.byteLength;if(Be.isURLSearchParams(e)&&(e=e+""),Be.isString(e))return(await s2(e)).byteLength},whe=async(e,t)=>{const r=Be.toFiniteNumber(e.getContentLength());return r??bhe(t)},Ehe=fy&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:h}=Kj(e);l=l?(l+"").toLowerCase():"text";let[p,d]=i||a||o?mhe([i,a],o):[],g,_;const v=()=>{!g&&setTimeout(()=>{p&&p.unsubscribe()}),g=!0};let m;try{if(c&&xhe&&r!=="get"&&r!=="head"&&(m=await whe(u,n))!==0){let E=new Request(t,{method:"POST",body:n,duplex:"half"}),C;if(Be.isFormData(n)&&(C=E.headers.get("content-type"))&&u.setContentType(C),E.body){const[T,A]=sL(m,zm(lL(c)));n=cL(E.body,fL,T,A,s2)}}Be.isString(f)||(f=f?"include":"omit"),_=new Request(t,{...h,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:f});let y=await fetch(_);const b=l2&&(l==="stream"||l==="response");if(l2&&(s||b)){const E={};["status","statusText","headers"].forEach(I=>{E[I]=y[I]});const C=Be.toFiniteNumber(y.headers.get("content-length")),[T,A]=s&&sL(C,zm(lL(s),!0))||[];y=new Response(cL(y.body,fL,T,()=>{A&&A(),b&&v()},s2),E)}l=l||"text";let w=await Wm[Be.findKey(Wm,l)||"text"](y,e);return!b&&v(),d&&d(),await new Promise((E,C)=>{Yj(E,C,{data:w,headers:To.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:_})})}catch(y){throw v(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new zt("Network Error",zt.ERR_NETWORK,e,_),{cause:y.cause||y}):zt.from(y,y&&y.code,e,_)}}),u2={http:Dfe,xhr:vhe,fetch:Ehe};Be.forEach(u2,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const hL=e=>`- ${e}`,She=e=>Be.isFunction(e)||e===null||e===!1,Qj={getAdapter:e=>{e=Be.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let a=0;a<t;a++){r=e[a];let o;if(n=r,!She(r)&&(n=u2[(o=String(r)).toLowerCase()],n===void 0))throw new zt(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+a]=n}if(!n){const a=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(hL).join(`
`):" "+hL(a[0]):"as no adapter specified";throw new zt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:u2};function Gb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rh(null,e)}function dL(e){return Gb(e),e.headers=To.from(e.headers),e.data=$b.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Qj.getAdapter(e.adapter||RI.adapter)(e).then(function(n){return Gb(e),n.data=$b.call(e,e.transformResponse,n),n.headers=To.from(n.headers),n},function(n){return Wj(n)||(Gb(e),n&&n.response&&(n.response.data=$b.call(e,e.transformResponse,n.response),n.response.headers=To.from(n.response.headers))),Promise.reject(n)})}const e$="1.7.3",PI={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{PI[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const pL={};PI.transitional=function(t,r,n){function i(a,o){return"[Axios v"+e$+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(t===!1)throw new zt(i(o," has been removed"+(r?" in "+r:"")),zt.ERR_DEPRECATED);return r&&!pL[o]&&(pL[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};function Che(e,t,r){if(typeof e!="object")throw new zt("options must be an object",zt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],o=t[a];if(o){const s=e[a],c=s===void 0||o(s,a,e);if(c!==!0)throw new zt("option "+a+" must be "+c,zt.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new zt("Unknown option "+a,zt.ERR_BAD_OPTION)}}const c2={assertOptions:Che,validators:PI},dl=c2.validators;class Ym{constructor(t){this.defaults=t,this.interceptors={request:new aL,response:new aL}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=pc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&c2.assertOptions(n,{silentJSONParsing:dl.transitional(dl.boolean),forcedJSONParsing:dl.transitional(dl.boolean),clarifyTimeoutError:dl.transitional(dl.boolean)},!1),i!=null&&(Be.isFunction(i)?r.paramsSerializer={serialize:i}:c2.assertOptions(i,{encode:dl.function,serialize:dl.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&Be.merge(a.common,a[r.method]);a&&Be.forEach(["delete","get","head","post","put","patch","common"],d=>{delete a[d]}),r.headers=To.concat(o,a);const s=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let u,f=0,h;if(!c){const d=[dL.bind(this),void 0];for(d.unshift.apply(d,s),d.push.apply(d,l),h=d.length,u=Promise.resolve(r);f<h;)u=u.then(d[f++],d[f++]);return u}h=s.length;let p=r;for(f=0;f<h;){const d=s[f++],g=s[f++];try{p=d(p)}catch(_){g.call(this,_);break}}try{u=dL.call(this,p)}catch(d){return Promise.reject(d)}for(f=0,h=l.length;f<h;)u=u.then(l[f++],l[f++]);return u}getUri(t){t=pc(this.defaults,t);const r=qj(t.baseURL,t.url);return Hj(r,t.params,t.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(t){Ym.prototype[t]=function(r,n){return this.request(pc(n||{},{method:t,url:r,data:(n||{}).data}))}});Be.forEach(["post","put","patch"],function(t){function r(n){return function(a,o,s){return this.request(pc(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Ym.prototype[t]=r(),Ym.prototype[t+"Form"]=r(!0)});const Qg=Ym;class OI{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},t(function(a,o,s){n.reason||(n.reason=new Rh(a,o,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new OI(function(i){t=i}),cancel:t}}}const The=OI;function Ahe(e){return function(r){return e.apply(null,r)}}function Ihe(e){return Be.isObject(e)&&e.isAxiosError===!0}const f2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(f2).forEach(([e,t])=>{f2[t]=e});const Rhe=f2;function t$(e){const t=new Qg(e),r=kj(Qg.prototype.request,t);return Be.extend(r,Qg.prototype,t,{allOwnKeys:!0}),Be.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return t$(pc(e,i))},r}const Zn=t$(RI);Zn.Axios=Qg;Zn.CanceledError=Rh;Zn.CancelToken=The;Zn.isCancel=Wj;Zn.VERSION=e$;Zn.toFormData=uy;Zn.AxiosError=zt;Zn.Cancel=Zn.CanceledError;Zn.all=function(t){return Promise.all(t)};Zn.spread=Ahe;Zn.isAxiosError=Ihe;Zn.mergeConfig=pc;Zn.AxiosHeaders=To;Zn.formToJSON=e=>zj(Be.isHTMLForm(e)?new FormData(e):e);Zn.getAdapter=Qj.getAdapter;Zn.HttpStatusCode=Rhe;Zn.default=Zn;const Ql=Zn,aa=e=>new Promise(t=>{Ql.get(e).then(r=>{const n=r.data.toString();t(n)})}),Phe={backlog_size:20,fast_timeout:50},Ohe={textInitialDelay:80};class khe{constructor(t){nt(this,"isSaveBacklogNext",!1);nt(this,"backlog",[]);nt(this,"sceneManager");this.sceneManager=t}getBacklog(){return this.backlog}editLastBacklogItemEffect(t){this.backlog[this.backlog.length-1].currentStageState.effects=t}makeBacklogEmpty(){this.backlog.splice(0,this.backlog.length)}insertBacklogItem(t){this.backlog.push(t)}saveCurrentStateToBacklog(){const t=le.getState().stage,r=cn(t);r.PerformList.forEach(i=>{i.script.args.forEach(a=>{a.key==="concat"&&(a.value=!1,i.script.content=r.showText)})});const n={currentStageState:r,saveScene:{currentSentenceId:this.sceneManager.sceneData.currentSentenceId,sceneStack:cn(this.sceneManager.sceneData.sceneStack),sceneName:this.sceneManager.sceneData.currentScene.sceneName,sceneUrl:this.sceneManager.sceneData.currentScene.sceneUrl}};for(this.getBacklog().push(n);this.getBacklog().length>Phe.backlog_size;)this.getBacklog().shift()}}const h2=(e,t)=>{(!$.sceneManager.sceneAssetsList[t]||!Object.values($.sceneManager.sceneAssetsList[t]).length)&&($.sceneManager.sceneAssetsList[t]=e.reduce((r,n)=>(r[n.url]="",r),{}));for(const r of e){const n=$.sceneManager.sceneAssetsList[t];n[r.url]==="success"||n[r.url]==="loading"?(Cd(t),qe.warn("")):(console.log("",r.url),r.url.endsWith(".mp4")||r.url.endsWith(".flv")?(n[r.url]="success",Cd(t),$.videoManager.preloadVideo(r.url)):(n[r.url]="loading",Fhe(r.url,3,1e3,()=>{n[r.url]="success",Cd(t)},()=>{n[r.url]="error",Cd(t);const i=$.sceneManager.settledAssets.findIndex(a=>a===r.url);i>-1&&$.sceneManager.settledAssets.splice(i,1)}),$.sceneManager.settledAssets.push(r.url)))}e.length===0&&Cd(t)},Cd=e=>{const t=$.sceneManager.sceneAssetsList[e],r=Object.values(t).every(n=>n==="error"||n==="success");$.sceneManager.sceneAssetsLoadedList[e]=Object.values(t).every(n=>n==="success"),r&&window.pubsub.publish("sceneAssetsLoaded",{sceneName:e})},Fhe=(e,t,r,n,i)=>{const a=(o,s)=>{const c=()=>{n()},l=()=>{o>0?(console.log(`${e}${o}${s}ms`),setTimeout(()=>{a(o-1,s*2)},s)):i()};if(document.createElement("link"),window.isSafari)fetch(e).then(u=>{if(!u.ok)throw new Error("Error!");const f=e.split(".").pop()||"",h=["jpg","jpeg","png","gif","bmp","svg","webp"],p=["mp4","webm","ogg","flv"],d=["wav","mp3","ogg"];return h.includes(f)?u.blob():d.includes(f)||p.includes(f)?u.arrayBuffer():u.blob()}).then(c).catch(l);else{const u=document.createElement("link");u.setAttribute("rel","prefetch"),u.setAttribute("href",e);const f=document.getElementsByTagName("head");u.onload=c,u.onerror=l,f.length&&f[0].appendChild(u)}};a(t,r)};var ot;(function(e){e[e.say=0]="say",e[e.changeBg=1]="changeBg",e[e.changeFigure=2]="changeFigure",e[e.bgm=3]="bgm",e[e.video=4]="video",e[e.pixi=5]="pixi",e[e.pixiInit=6]="pixiInit",e[e.intro=7]="intro",e[e.miniAvatar=8]="miniAvatar",e[e.changeScene=9]="changeScene",e[e.choose=10]="choose",e[e.end=11]="end",e[e.setComplexAnimation=12]="setComplexAnimation",e[e.setFilter=13]="setFilter",e[e.label=14]="label",e[e.jumpLabel=15]="jumpLabel",e[e.chooseLabel=16]="chooseLabel",e[e.setVar=17]="setVar",e[e.if=18]="if",e[e.callScene=19]="callScene",e[e.showVars=20]="showVars",e[e.unlockCg=21]="unlockCg",e[e.unlockBgm=22]="unlockBgm",e[e.filmMode=23]="filmMode",e[e.setTextbox=24]="setTextbox",e[e.setAnimation=25]="setAnimation",e[e.playEffect=26]="playEffect",e[e.setTempAnimation=27]="setTempAnimation",e[e.comment=28]="comment",e[e.setTransform=29]="setTransform",e[e.setTransition=30]="setTransition",e[e.getUserInput=31]="getUserInput",e[e.applyStyle=32]="applyStyle",e[e.unlockAchieve=33]="unlockAchieve",e[e.unlockStoryline=34]="unlockStoryline",e[e.showValue=35]="showValue",e[e.payProduct=36]="payProduct",e[e.finishTrial=37]="finishTrial",e[e.moveCamera=38]="moveCamera",e[e.changeAffinity=39]="changeAffinity",e[e.unlockAffinity=40]="unlockAffinity",e[e.popUpImage=41]="popUpImage",e[e.clearScreen=42]="clearScreen",e[e.showUI=43]="showUI",e[e.eventData=44]="eventData"})(ot||(ot={}));ot.intro,ot.changeBg,ot.changeFigure,ot.miniAvatar,ot.changeScene,ot.choose,ot.end,ot.bgm,ot.video,ot.setComplexAnimation,ot.setFilter,ot.pixiInit,ot.pixi,ot.label,ot.jumpLabel,ot.setVar,ot.callScene,ot.showVars,ot.unlockCg,ot.unlockBgm,ot.say,ot.filmMode,ot.callScene,ot.setTextbox,ot.setAnimation,ot.playEffect,ot.applyStyle,ot.unlockAchieve,ot.unlockStoryline,ot.showValue,ot.payProduct,ot.finishTrial,ot.moveCamera,ot.changeAffinity,ot.unlockAffinity,ot.popUpImage,ot.clearScreen,ot.showUI,ot.eventData;ot.bgm,ot.pixi,ot.pixiInit,ot.label,ot.if,ot.miniAvatar,ot.setVar,ot.unlockBgm,ot.unlockCg,ot.filmMode,ot.playEffect,ot.showValue;var Nn;(function(e){e[e.background=0]="background",e[e.bgm=1]="bgm",e[e.figure=2]="figure",e[e.scene=3]="scene",e[e.tex=4]="tex",e[e.vocal=5]="vocal",e[e.video=6]="video",e[e.ui=7]="ui",e[e.image=8]="image",e[e.font=9]="font"})(Nn||(Nn={}));function r$(e,t){const r=[];let i=e.replace(/ /g," ").split(" -");return i=i.filter(a=>a!==""),i.forEach(a=>{const o=a.indexOf("=");let s=a.slice(0,o),c=a.slice(o+1);o<0&&(s=a,c=void 0),s.toLowerCase().match(/.ogg|.mp3|.wav/)?r.push({key:"vocal",value:t(a,Nn.vocal)}):c===void 0?r.push({key:s,value:!0}):c==="true"||c==="false"?r.push({key:s,value:c==="true"}):isNaN(Number(c))?r.push({key:s,value:c}):r.push({key:s,value:Number(c)})}),r}function Nhe(e){const t=[];let r,n=e.split(";")[0];if(n==="")return{command:"",args:[],options:[]};const i=/:/.exec(n);i===null?r="":(r=n.substring(0,i.index),n=n.substring(i.index+1,n.length));const a=/ -/.exec(n);if(a){const o=n.substring(a.index,n.length);n=n.substring(0,a.index);for(const s of r$(o,(c,l)=>c))t.push(s)}return{command:r,args:n.split("|").map(o=>o.trim()).filter(o=>o!==""),options:t}}function Lhe(e){return e.replaceAll("\r","").split(`
`).map(r=>Nhe(r)).filter(r=>r.command!=="")}const vL=(e,t,r)=>{let n={type:ot.say,additionalArgs:[]};const i=Bhe(e,t,r);return n.type=i,i===ot.say&&e!=="say"&&n.additionalArgs.push({key:"speaker",value:e}),n=Mhe(n,i,t),n};function Bhe(e,t,r){var n;return((n=r.get(e))==null?void 0:n.scriptType)??ot.say}function Mhe(e,t,r){return r.includes(t)&&e.additionalArgs.push({key:"next",value:!0}),e}const Dhe=(e,t,r)=>{if(e==="none"||e==="")return"";switch(t){case ot.playEffect:return r(e,Nn.vocal);case ot.changeBg:return r(e,Nn.background);case ot.changeFigure:return r(e,Nn.figure);case ot.popUpImage:return r(e,Nn.image);case ot.bgm:return r(e,Nn.bgm);case ot.callScene:return r(e,Nn.scene);case ot.changeScene:return r(e,Nn.scene);case ot.miniAvatar:return r(e,Nn.figure);case ot.video:return r(e,Nn.video);case ot.choose:return Uhe(e,r);case ot.unlockBgm:return r(e,Nn.bgm);case ot.unlockCg:default:return e}};function Uhe(e,t){const r=e.split("|"),n=[],i=[];for(const s of r)n.push(s.split(":")[0]??""),i.push(s.split(":")[1]??"");const a=i.map(s=>s.match(/\./)?t(s,Nn.scene):s);let o="";for(let s=0;s<n.length;s++)s!==0&&(o=o+"|"),o=o+`${n[s]}:${a[s]}`;return o}const jhe=(e,t,r)=>{const n=[];return e===ot.say&&r.forEach(i=>{i.key==="vocal"&&n.push({name:i.value,url:i.value,lineNumber:0,type:Nn.vocal})}),t==="none"||t===""||(e===ot.changeBg&&n.push({name:t,url:t,lineNumber:0,type:Nn.background}),e===ot.changeFigure&&n.push({name:t,url:t,lineNumber:0,type:Nn.figure}),e===ot.popUpImage&&n.push({name:t,url:t,lineNumber:0,type:Nn.image}),e===ot.miniAvatar&&n.push({name:t,url:t,lineNumber:0,type:Nn.figure}),e===ot.video&&n.push({name:t,url:t,lineNumber:0,type:Nn.video}),e===ot.bgm&&n.push({name:t,url:t,lineNumber:0,type:Nn.bgm})),n},$he=(e,t)=>{const r=[];return(e===ot.changeScene||e===ot.callScene)&&r.push(t),(e===ot.choose||e===ot.video)&&t.split("|").map(a=>a.split(":")[1]??"").forEach(a=>{a.match(/\./)&&r.push(a)}),r},Ghe=(e,t,r,n)=>{let i,a,o;const s=[];let c,l,u,f=e.split(";")[0];if(f==="")return{command:ot.comment,commandRaw:"comment",content:e.split(";")[1]??"",args:[{key:"next",value:!0}],sentenceAssets:[],subScene:[]};const h=/:/.exec(f);if(h===null){u=f,l=vL(u,r,n),i=l.type;for(const d of l.additionalArgs)i===ot.say&&d.key==="speaker"||s.push(d)}else{u=f.substring(0,h.index),f=f.substring(h.index+1,f.length),l=vL(u,r,n),i=l.type;for(const d of l.additionalArgs)s.push(d)}const p=/ -/.exec(f);if(p){const d=f.substring(p.index,e.length);f=f.substring(0,p.index);for(const g of r$(d,t))s.push(g)}return a=Dhe(f,i,t),c=jhe(i,a,s),o=$he(i,a),{command:i,commandRaw:u,content:a,args:s,sentenceAssets:c,subScene:o}};var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vhe=typeof eg=="object"&&eg&&eg.Object===Object&&eg,Hhe=Vhe,Xhe=Hhe,zhe=typeof self=="object"&&self&&self.Object===Object&&self,Whe=Xhe||zhe||Function("return this")(),hy=Whe,Yhe=hy,qhe=Yhe.Symbol,n$=qhe,gL=n$,i$=Object.prototype,Khe=i$.hasOwnProperty,Zhe=i$.toString,Td=gL?gL.toStringTag:void 0;function Jhe(e){var t=Khe.call(e,Td),r=e[Td];try{e[Td]=void 0;var n=!0}catch{}var i=Zhe.call(e);return n&&(t?e[Td]=r:delete e[Td]),i}var Qhe=Jhe,ede=Object.prototype,tde=ede.toString;function rde(e){return tde.call(e)}var nde=rde,mL=n$,ide=Qhe,ade=nde,ode="[object Null]",sde="[object Undefined]",_L=mL?mL.toStringTag:void 0;function lde(e){return e==null?e===void 0?sde:ode:_L&&_L in Object(e)?ide(e):ade(e)}var ude=lde;function cde(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var a$=cde,fde=ude,hde=a$,dde="[object AsyncFunction]",pde="[object Function]",vde="[object GeneratorFunction]",gde="[object Proxy]";function mde(e){if(!hde(e))return!1;var t=fde(e);return t==pde||t==vde||t==dde||t==gde}var _de=mde,yde=hy,xde=yde["__core-js_shared__"],bde=xde,Vb=bde,yL=function(){var e=/[^.]+$/.exec(Vb&&Vb.keys&&Vb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wde(e){return!!yL&&yL in e}var Ede=wde,Sde=Function.prototype,Cde=Sde.toString;function Tde(e){if(e!=null){try{return Cde.call(e)}catch{}try{return e+""}catch{}}return""}var Ade=Tde,Ide=_de,Rde=Ede,Pde=a$,Ode=Ade,kde=/[\\^$.*+?()[\]{}|]/g,Fde=/^\[object .+?Constructor\]$/,Nde=Function.prototype,Lde=Object.prototype,Bde=Nde.toString,Mde=Lde.hasOwnProperty,Dde=RegExp("^"+Bde.call(Mde).replace(kde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ude(e){if(!Pde(e)||Rde(e))return!1;var t=Ide(e)?Dde:Fde;return t.test(Ode(e))}var jde=Ude;function $de(e,t){return e==null?void 0:e[t]}var Gde=$de,Vde=jde,Hde=Gde;function Xde(e,t){var r=Hde(e,t);return Vde(r)?r:void 0}var kI=Xde,zde=kI,Wde=zde(Object,"create"),dy=Wde,xL=dy;function Yde(){this.__data__=xL?xL(null):{},this.size=0}var qde=Yde;function Kde(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Zde=Kde,Jde=dy,Qde="__lodash_hash_undefined__",epe=Object.prototype,tpe=epe.hasOwnProperty;function rpe(e){var t=this.__data__;if(Jde){var r=t[e];return r===Qde?void 0:r}return tpe.call(t,e)?t[e]:void 0}var npe=rpe,ipe=dy,ape=Object.prototype,ope=ape.hasOwnProperty;function spe(e){var t=this.__data__;return ipe?t[e]!==void 0:ope.call(t,e)}var lpe=spe,upe=dy,cpe="__lodash_hash_undefined__";function fpe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=upe&&t===void 0?cpe:t,this}var hpe=fpe,dpe=qde,ppe=Zde,vpe=npe,gpe=lpe,mpe=hpe;function Ph(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ph.prototype.clear=dpe;Ph.prototype.delete=ppe;Ph.prototype.get=vpe;Ph.prototype.has=gpe;Ph.prototype.set=mpe;var _pe=Ph;function ype(){this.__data__=[],this.size=0}var xpe=ype;function bpe(e,t){return e===t||e!==e&&t!==t}var wpe=bpe,Epe=wpe;function Spe(e,t){for(var r=e.length;r--;)if(Epe(e[r][0],t))return r;return-1}var py=Spe,Cpe=py,Tpe=Array.prototype,Ape=Tpe.splice;function Ipe(e){var t=this.__data__,r=Cpe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Ape.call(t,r,1),--this.size,!0}var Rpe=Ipe,Ppe=py;function Ope(e){var t=this.__data__,r=Ppe(t,e);return r<0?void 0:t[r][1]}var kpe=Ope,Fpe=py;function Npe(e){return Fpe(this.__data__,e)>-1}var Lpe=Npe,Bpe=py;function Mpe(e,t){var r=this.__data__,n=Bpe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Dpe=Mpe,Upe=xpe,jpe=Rpe,$pe=kpe,Gpe=Lpe,Vpe=Dpe;function Oh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Oh.prototype.clear=Upe;Oh.prototype.delete=jpe;Oh.prototype.get=$pe;Oh.prototype.has=Gpe;Oh.prototype.set=Vpe;var Hpe=Oh,Xpe=kI,zpe=hy,Wpe=Xpe(zpe,"Map"),Ype=Wpe,bL=_pe,qpe=Hpe,Kpe=Ype;function Zpe(){this.size=0,this.__data__={hash:new bL,map:new(Kpe||qpe),string:new bL}}var Jpe=Zpe;function Qpe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var e0e=Qpe,t0e=e0e;function r0e(e,t){var r=e.__data__;return t0e(t)?r[typeof t=="string"?"string":"hash"]:r.map}var vy=r0e,n0e=vy;function i0e(e){var t=n0e(this,e).delete(e);return this.size-=t?1:0,t}var a0e=i0e,o0e=vy;function s0e(e){return o0e(this,e).get(e)}var l0e=s0e,u0e=vy;function c0e(e){return u0e(this,e).has(e)}var f0e=c0e,h0e=vy;function d0e(e,t){var r=h0e(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var p0e=d0e,v0e=Jpe,g0e=a0e,m0e=l0e,_0e=f0e,y0e=p0e;function kh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}kh.prototype.clear=v0e;kh.prototype.delete=g0e;kh.prototype.get=m0e;kh.prototype.has=_0e;kh.prototype.set=y0e;var x0e=kh,b0e="__lodash_hash_undefined__";function w0e(e){return this.__data__.set(e,b0e),this}var E0e=w0e;function S0e(e){return this.__data__.has(e)}var C0e=S0e,T0e=x0e,A0e=E0e,I0e=C0e;function qm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new T0e;++t<r;)this.add(e[t])}qm.prototype.add=qm.prototype.push=A0e;qm.prototype.has=I0e;var R0e=qm;function P0e(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var O0e=P0e;function k0e(e){return e!==e}var F0e=k0e;function N0e(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var L0e=N0e,B0e=O0e,M0e=F0e,D0e=L0e;function U0e(e,t,r){return t===t?D0e(e,t,r):B0e(e,M0e,r)}var j0e=U0e,$0e=j0e;function G0e(e,t){var r=e==null?0:e.length;return!!r&&$0e(e,t,0)>-1}var V0e=G0e;function H0e(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var X0e=H0e;function z0e(e,t){return e.has(t)}var W0e=z0e,Y0e=kI,q0e=hy,K0e=Y0e(q0e,"Set"),Z0e=K0e;function J0e(){}var Q0e=J0e;function eve(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var o$=eve,Hb=Z0e,tve=Q0e,rve=o$,nve=1/0,ive=Hb&&1/rve(new Hb([,-0]))[1]==nve?function(e){return new Hb(e)}:tve,ave=ive,ove=R0e,sve=V0e,lve=X0e,uve=W0e,cve=ave,fve=o$,hve=200;function dve(e,t,r){var n=-1,i=sve,a=e.length,o=!0,s=[],c=s;if(r)o=!1,i=lve;else if(a>=hve){var l=t?null:cve(e);if(l)return fve(l);o=!1,i=uve,c=new ove}else c=t?[]:s;e:for(;++n<a;){var u=e[n],f=t?t(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),s.push(u)}else i(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}var pve=dve,vve=pve;function gve(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?vve(e,void 0,t):[]}var mve=gve;const _ve=(e,t,r,n,i,a,o)=>{const c=e.split(`
`);let l=[],u=[];const f=c.map(p=>{const d=Ghe(p,i,a,o);return l=[...l,...d.sentenceAssets],u=[...u,...d.subScene],d});l=mve(l);const h=["jpg","jpeg","png","gif","bmp","svg","webp","mp4","webm","ogg","flv","wav","mp3","ogg"];return l=l.filter(p=>h.includes(p.url.split(".").pop())),n(l,t),{sceneName:t,sceneUrl:r,sentenceList:f,assetsList:l,subSceneList:u}};function yve(e){const[t,r]=xve(e);return{classNameStyles:t,others:r}}function xve(e){const t={};let r="",n;const i=/\.([^{\s]+)\s*{((?:[^{}]*|{[^}]*})*)}/g,a=/(@[^{]+{\s*(?:[^{}]*{[^}]*}[^{}]*)+\s*})/g;for(;(n=i.exec(e))!==null;){const o=n[1],s=n[2].trim().replace(/\s*;\s*/g,`;
`);t[o]=s}for(;(n=a.exec(e))!==null;)r+=n[1].trim()+`
`;return[t,r.trim()]}class bve{constructor(t,r,n,i){nt(this,"assetsPrefetcher");nt(this,"assetSetter");nt(this,"ADD_NEXT_ARG_LIST");nt(this,"SCRIPT_CONFIG_MAP");this.assetsPrefetcher=t,this.assetSetter=r,this.ADD_NEXT_ARG_LIST=n,Array.isArray(i)?(this.SCRIPT_CONFIG_MAP=new Map,i.forEach(a=>{this.SCRIPT_CONFIG_MAP.set(a.scriptString,a)})):this.SCRIPT_CONFIG_MAP=i}parse(t,r,n){return _ve(t,r,n,this.assetsPrefetcher,this.assetSetter,this.ADD_NEXT_ARG_LIST,this.SCRIPT_CONFIG_MAP)}parseConfig(t){return Lhe(t)}stringifyConfig(t){return t.reduce((r,n)=>r+`${n.command}:${n.args.join("|")}${n.options.length<=0?"":n.options.reduce((i,a)=>i+" -"+a.key+"="+a.value,"")};
`,"")}parseScssToWebgalStyleObj(t){return yve(t)}}function Wt(e,t){const n=e.args.find(i=>i.key===t);return n?n.value:null}const wve=e=>{let t=e.content,r="",n="default";e.args.forEach(o=>{o.key==="unlockname"&&(r=o.value.toString()),o.key==="series"&&(n=o.value.toString())});const i=Wt(e,"enter"),a=Wt(e,"volume");return r!==""&&le.dispatch(mj({name:r,url:t,series:n})),SI(t,typeof i=="number"&&i>=0?i:0,typeof a=="number"&&a>=0&&a<=100?a:100),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Eve={performName:"",duration:100,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0},gy=e=>{var n;let t=Eve;t=(((n=q$[e.command])==null?void 0:n.scriptFunction)??q9.say.scriptFunction)(e),t.arrangePerformPromise?t.arrangePerformPromise.then(i=>$.gameplay.performController.arrangeNewPerform(i,e)):$.gameplay.performController.arrangeNewPerform(t,e)},Sve=e=>{$.sceneManager.lockSceneWrite||($.sceneManager.lockSceneWrite=!0,aa(e.sceneUrl).then(t=>{$.sceneManager.sceneData.currentScene=tu(t,e.sceneName,e.sceneUrl),$.sceneManager.sceneData.currentSentenceId=e.continueLine+1,qe.debug("",$.sceneManager.sceneData.currentScene),$.sceneManager.lockSceneWrite=!1,jn()}).catch(t=>{qe.error("",t),$.sceneManager.lockSceneWrite=!1}))};var FI={},Vp={document:{}},s$=Object.prototype.hasOwnProperty,l$=function(e){return my(e)?e.toLowerCase():e},hp=Array.isArray,Cve=function(e){return my(e)?e.replace(/[A-Z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)|32)}):e};"I".toLowerCase()!=="i"&&(l$=Cve);var Tve,NI=Object.prototype.toString,u$=Object.getPrototypeOf,Xb=p$("ng");Vp.angular||(Vp.angular={});Vp.document.documentMode;function Ave(e){if(e==null||MI(e))return!1;if(hp(e)||my(e)||Tve)return!0;var t="length"in Object(e)&&e.length;return BI(t)&&(t>=0&&(t-1 in e||e instanceof Array)||typeof e.item=="function")}function gn(e,t,r){var n,i;if(e)if(h$(e))for(n in e)n!=="prototype"&&n!=="length"&&n!=="name"&&e.hasOwnProperty(n)&&t.call(r,e[n],n,e);else if(hp(e)||Ave(e)){var a=typeof e!="object";for(n=0,i=e.length;n<i;n++)(a||n in e)&&t.call(r,e[n],n,e)}else if(e.forEach&&e.forEach!==gn)e.forEach(t,r,e);else if(f$(e))for(n in e)t.call(r,e[n],n,e);else if(typeof e.hasOwnProperty=="function")for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e);else for(n in e)s$.call(e,n)&&t.call(r,e[n],n,e);return e}function Ive(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function LI(){}LI.$inject=[];function Rve(e){return typeof e>"u"}function Ef(e){return typeof e<"u"}function c$(e){return e!==null&&typeof e=="object"}function f$(e){return e!==null&&typeof e=="object"&&!u$(e)}function my(e){return typeof e=="string"}function BI(e){return typeof e=="number"}function h$(e){return typeof e=="function"}function MI(e){return e&&e.window===e}function d$(e){return e&&e.$evalAsync&&e.$watch}var Pve=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function Ove(e){return e&&BI(e.length)&&Pve.test(NI.call(e))}function kve(e){return NI.call(e)==="[object ArrayBuffer]"}function Fve(e,t){var r=[],n=[];if(t){if(Ove(t)||kve(t))throw Xb("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw Xb("cpi","Can't copy! Source and destination are identical.");return hp(t)?t.length=0:gn(t,function(s,c){c!=="$$hashKey"&&delete t[c]}),r.push(e),n.push(t),i(e,t)}return a(e);function i(s,c){var l=c.$$hashKey,u;if(hp(s))for(var f=0,h=s.length;f<h;f++)c.push(a(s[f]));else if(f$(s))for(u in s)c[u]=a(s[u]);else if(s&&typeof s.hasOwnProperty=="function")for(u in s)s.hasOwnProperty(u)&&(c[u]=a(s[u]));else for(u in s)s$.call(s,u)&&(c[u]=a(s[u]));return Ive(c,l),c}function a(s){if(!c$(s))return s;var c=r.indexOf(s);if(c!==-1)return n[c];if(MI(s)||d$(s))throw Xb("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var l=!1,u=o(s);return u===void 0&&(u=hp(s)?[]:Object.create(u$(s)),l=!0),r.push(s),n.push(u),l?i(s,u):u}function o(s){switch(NI.call(s)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new s.constructor(a(s.buffer),s.byteOffset,s.length);case"[object ArrayBuffer]":if(!s.slice){var c=new ArrayBuffer(s.byteLength);return new Uint8Array(c).set(new Uint8Array(s)),c}return s.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new s.constructor(s.valueOf());case"[object RegExp]":var l=new RegExp(s.source,s.toString().match(/[^\/]*$/)[0]);return l.lastIndex=s.lastIndex,l;case"[object Blob]":return new s.constructor([s],{type:s.type})}if(h$(s.cloneNode))return s.cloneNode(!0)}}function Nve(e,t){var r=t;return typeof e=="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"?r=void 0:MI(t)?r="$WINDOW":t&&Vp.document===t?r="$DOCUMENT":d$(t)&&(r="$SCOPE"),r}function Lve(e){if(!e.currentScript)return!0;var t=e.currentScript.getAttribute("src"),r=e.createElement("a");r.href=t;var n=r.protocol,i=e.location.protocol;return!((n==="resource:"||n==="chrome-extension:")&&i!==n)}Lve(Vp.document);function Bve(){return Object.create(null)}function Mve(e){var t=[];return JSON.stringify(e,function(r,n){if(n=Nve(r,n),c$(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function wL(e){return typeof e=="function"?e.toString().replace(/ \{[\s\S]*$/,""):Rve(e)?"undefined":typeof e!="string"?Mve(e):e}function p$(e,t){return t=t||Error,function(){var r=2,n=arguments,i=n[0],a="["+(e?e+":":"")+i+"] ",o=n[1],s,c;for(a+=o.replace(/\{\d+\}/g,function(l){var u=+l.slice(1,-1),f=u+r;return f<n.length?wL(n[f]):l}),a+=`
http://errors.angularjs.org/"NG_VERSION_FULL"/`+(e?e+"/":"")+i,c=r,s="?";c<n.length;c++,s="&")a+=s+"p"+(c-r)+"="+encodeURIComponent(wL(n[c]));return new t(a)}}var Sf=p$("$parse");({}).constructor.prototype.valueOf;function v$(e){return e+""}var em=Bve();gn("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){em[e]=!0});var Dve={n:`
`,f:"\f",r:"\r",t:"	",v:"\v","'":"'",'"':'"'},d2=function(t){this.options=t};d2.prototype={constructor:d2,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if(t==='"'||t==="'")this.readString(t);else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var r=t+this.peek(),n=r+this.peek(2),i=em[t],a=em[r],o=em[n];if(i||a||o){var s=o?n:a?r:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return"0"<=e&&e<="9"&&typeof e=="string"},isWhitespace:function(e){return e===" "||e==="\r"||e==="	"||e===`
`||e==="\v"||e===""},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||e==="_"||e==="$"},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return e.length===1?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var r=e.charCodeAt(0),n=t.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?e+t:e},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,r){r=r||this.index;var n=Ef(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,r)+"]":" "+r;throw Sf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,n,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var r=l$(this.text.charAt(this.index));if(r==="."||this.isNumber(r))e+=r;else{var n=this.peek();if(r==="e"&&this.isExpOperator(n))e+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&e.charAt(e.length-1)==="e")e+=r;else if(this.isExpOperator(r)&&(!n||!this.isNumber(n))&&e.charAt(e.length-1)==="e")this.throwError("Invalid exponent");else break}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var r="",n=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(n+=a,i){if(a==="u"){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,r+=String.fromCharCode(parseInt(o,16))}else{var s=Dve[a];r=r+(s||a)}i=!1}else if(a==="\\")i=!0;else if(a===e){this.index++,this.tokens.push({index:t,text:n,constant:!0,value:r});return}else r+=a;this.index++}this.throwError("Unterminated quote",t)}};var Ye=function(t,r){this.lexer=t,this.options=r};Ye.Program="Program";Ye.ExpressionStatement="ExpressionStatement";Ye.AssignmentExpression="AssignmentExpression";Ye.ConditionalExpression="ConditionalExpression";Ye.LogicalExpression="LogicalExpression";Ye.BinaryExpression="BinaryExpression";Ye.UnaryExpression="UnaryExpression";Ye.CallExpression="CallExpression";Ye.MemberExpression="MemberExpression";Ye.Identifier="Identifier";Ye.Literal="Literal";Ye.ArrayExpression="ArrayExpression";Ye.Property="Property";Ye.ObjectExpression="ObjectExpression";Ye.ThisExpression="ThisExpression";Ye.LocalsExpression="LocalsExpression";Ye.NGValueParameter="NGValueParameter";Ye.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ye.Program,body:e}},expressionStatement:function(){return{type:Ye.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!_$(e))throw Sf("lval","Trying to assign a value to a non l-value");e={type:Ye.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e=this.logicalOR(),t,r;return this.expect("?")&&(t=this.expression(),this.consume(":"))?(r=this.expression(),{type:Ye.ConditionalExpression,test:e,alternate:t,consequent:r}):e},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ye.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ye.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e=this.relational(),t;t=this.expect("==","!=","===","!==");)e={type:Ye.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var e=this.additive(),t;t=this.expect("<",">","<=",">=");)e={type:Ye.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var e=this.multiplicative(),t;t=this.expect("+","-");)e={type:Ye.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var e=this.unary(),t;t=this.expect("*","/","%");)e={type:Ye.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ye.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=Fve(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ye.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)t.text==="("?(e={type:Ye.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):t.text==="["?(e={type:Ye.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):t.text==="."?e={type:Ye.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],r={type:Ye.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return r},parseArguments:function(){var e=[];if(this.peekToken().text!==")")do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ye.Identifier,name:e.text}},constant:function(){return{type:Ye.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ye.ArrayExpression,elements:e}},object:function(){var e=[],t;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;t={type:Ye.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Ye.ObjectExpression,properties:e}},throwError:function(e,t){throw Sf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(this.tokens.length===0)throw Sf("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(this.tokens.length===0)throw Sf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,r,n){return this.peekAhead(0,e,t,r,n)},peekAhead:function(e,t,r,n,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===r||o===n||o===i||!t&&!r&&!n&&!i)return a}return!1},expect:function(e,t,r,n){var i=this.peek(e,t,r,n);return i?(this.tokens.shift(),i):!1},selfReferential:{this:{type:Ye.ThisExpression},$locals:{type:Ye.LocalsExpression}}};function Uve(e,t){return typeof e<"u"?e:t}function g$(e,t){return typeof e>"u"?t:typeof t>"u"?e:e+t}function jve(e,t){var r=e(t);if(!r)throw new Error("Filter '"+t+"' is not defined");return!r.$stateful}function ci(e,t){var r,n,i;switch(e.type){case Ye.Program:r=!0,gn(e.body,function(a){ci(a.expression,t),r=r&&a.expression.constant}),e.constant=r;break;case Ye.Literal:e.constant=!0,e.toWatch=[];break;case Ye.UnaryExpression:ci(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ye.BinaryExpression:ci(e.left,t),ci(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ye.LogicalExpression:ci(e.left,t),ci(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ye.ConditionalExpression:ci(e.test,t),ci(e.alternate,t),ci(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ye.Identifier:e.constant=!1,e.toWatch=[e];break;case Ye.MemberExpression:ci(e.object,t),e.computed&&ci(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ye.CallExpression:i=e.filter?jve(t,e.callee.name):!1,r=i,n=[],gn(e.arguments,function(a){ci(a,t),r=r&&a.constant,a.constant||n.push.apply(n,a.toWatch)}),e.constant=r,e.toWatch=i?n:[e];break;case Ye.AssignmentExpression:ci(e.left,t),ci(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ye.ArrayExpression:r=!0,n=[],gn(e.elements,function(a){ci(a,t),r=r&&a.constant,a.constant||n.push.apply(n,a.toWatch)}),e.constant=r,e.toWatch=n;break;case Ye.ObjectExpression:r=!0,n=[],gn(e.properties,function(a){ci(a.value,t),r=r&&a.value.constant&&!a.computed,a.value.constant||n.push.apply(n,a.value.toWatch)}),e.constant=r,e.toWatch=n;break;case Ye.ThisExpression:e.constant=!1,e.toWatch=[];break;case Ye.LocalsExpression:e.constant=!1,e.toWatch=[];break}}function m$(e){if(e.length===1){var t=e[0].expression,r=t.toWatch;return r.length!==1||r[0]!==t?r:void 0}}function _$(e){return e.type===Ye.Identifier||e.type===Ye.MemberExpression}function y$(e){if(e.body.length===1&&_$(e.body[0].expression))return{type:Ye.AssignmentExpression,left:e.body[0].expression,right:{type:Ye.NGValueParameter},operator:"="}}function x$(e){return e.body.length===0||e.body.length===1&&(e.body[0].expression.type===Ye.Literal||e.body[0].expression.type===Ye.ArrayExpression||e.body[0].expression.type===Ye.ObjectExpression)}function b$(e){return e.constant}function w$(e,t){this.astBuilder=e,this.$filter=t}w$.prototype={compile:function(e){var t=this,r=this.astBuilder.ast(e);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},ci(r,t.$filter);var n="",i;if(this.stage="assign",i=y$(r)){this.state.computing="assign";var a=this.nextId();this.recurse(i,a),this.return_(a),n="fn.assign="+this.generateFunction("assign","s,v,l")}var o=m$(r.body);t.stage="inputs",gn(o,function(l,u){var f="fn"+u;t.state[f]={vars:[],body:[],own:{}},t.state.computing=f;var h=t.nextId();t.recurse(l,h),t.return_(h),t.state.inputs.push(f),l.watchId=u}),this.state.computing="fn",this.stage="main",this.recurse(r);var s='"'+this.USE+" "+this.STRICT+`";
`+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",c=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,v$,Uve,g$);return this.state=this.stage=void 0,c.ast=r,c.literal=x$(r),c.constant=b$(r),c},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,r=this;return gn(t,function(n){e.push("var "+n+"="+r.generateFunction(n,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return gn(this.state.filters,function(r,n){e.push(r+"=$filter("+t.escape(n)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,n,i,a){var o,s,c=this,l,u,f;if(n=n||LI,!a&&Ef(e.watchId)){t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.unsafeComputedMember("i",e.watchId)),this.lazyRecurse(e,t,r,n,i,!0));return}switch(e.type){case Ye.Program:gn(e.body,function(p,d){c.recurse(p.expression,void 0,void 0,function(g){s=g}),d!==e.body.length-1?c.current().body.push(s,";"):c.return_(s)});break;case Ye.Literal:u=this.escape(e.value),this.assign(t,u),n(t||u);break;case Ye.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(p){s=p}),u=e.operator+"("+this.ifDefined(s,0)+")",this.assign(t,u),n(u);break;case Ye.BinaryExpression:this.recurse(e.left,void 0,void 0,function(p){o=p}),this.recurse(e.right,void 0,void 0,function(p){s=p}),e.operator==="+"?u=this.plus(o,s):e.operator==="-"?u=this.ifDefined(o,0)+e.operator+this.ifDefined(s,0):u="("+o+")"+e.operator+"("+s+")",this.assign(t,u),n(u);break;case Ye.LogicalExpression:t=t||this.nextId(),c.recurse(e.left,t),c.if_(e.operator==="&&"?t:c.not(t),c.lazyRecurse(e.right,t)),n(t);break;case Ye.ConditionalExpression:t=t||this.nextId(),c.recurse(e.test,t),c.if_(t,c.lazyRecurse(e.alternate,t),c.lazyRecurse(e.consequent,t)),n(t);break;case Ye.Identifier:t=t||this.nextId();var h=c.current().inAssignment;r&&(h?r.context=this.assign(this.nextId(),"s"):r.context=c.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),c.if_(c.stage==="inputs"||c.not(c.getHasOwnProperty("l",e.name)),function(){c.if_(c.stage==="inputs"||c.and_("s",c.or_(c.isNull(c.nonComputedMember("s",e.name)),c.hasOwnProperty_("s",e.name))),function(){i&&i!==1&&c.if_(c.isNull(c.nonComputedMember("s",e.name)),c.lazyAssign(c.nonComputedMember("s",e.name),"{}")),c.assign(t,c.nonComputedMember("s",e.name))})},t&&c.lazyAssign(t,c.nonComputedMember("l",e.name))),n(t);break;case Ye.MemberExpression:o=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),c.recurse(e.object,o,void 0,function(){var p=null,d=c.current().inAssignment;e.computed?(s=c.nextId(),d||c.state.computing==="assign"?p=c.unsafeComputedMember(o,s):p=c.computedMember(o,s)):(d||c.state.computing==="assign"?p=c.unsafeNonComputedMember(o,e.property.name):p=c.nonComputedMember(o,e.property.name),s=e.property.name),e.computed&&e.property.type===Ye.Literal&&c.recurse(e.property,s),c.if_(c.and_(c.notNull(o),c.or_(c.isNull(p),c.hasOwnProperty_(o,s,e.computed))),function(){e.computed?(e.property.type!==Ye.Literal&&c.recurse(e.property,s),i&&i!==1&&c.if_(c.not(p),c.lazyAssign(p,"{}")),c.assign(t,p),r&&(r.computed=!0,r.name=s)):(i&&i!==1&&c.if_(c.isNull(p),c.lazyAssign(p,"{}")),c.assign(t,p),r&&(r.computed=!1,r.name=e.property.name))},function(){c.assign(t,"undefined")}),n(t)},!!i);break;case Ye.CallExpression:t=t||this.nextId(),e.filter?(s=c.filter(e.callee.name),l=[],gn(e.arguments,function(p){var d=c.nextId();c.recurse(p,d),l.push(d)}),u=s+".call("+s+","+l.join(",")+")",c.assign(t,u),n(t)):(s=c.nextId(),o={},l=[],c.recurse(e.callee,s,o,function(){c.if_(c.notNull(s),function(){if(gn(e.arguments,function(d){c.recurse(d,e.constant?void 0:c.nextId(),void 0,function(g){l.push(g)})}),o.name){var p=c.member(o.context,o.name,o.computed);u="("+p+" === null ? null : "+c.unsafeMember(o.context,o.name,o.computed)+".call("+[o.context].concat(l).join(",")+"))"}else u=s+"("+l.join(",")+")";c.assign(t,u)},function(){c.assign(t,"undefined")}),n(t)}));break;case Ye.AssignmentExpression:s=this.nextId(),o={},c.current().inAssignment=!0,this.recurse(e.left,void 0,o,function(){c.if_(c.and_(c.notNull(o.context),c.or_(c.hasOwnProperty_(o.context,o.name),c.isNull(c.member(o.context,o.name,o.computed)))),function(){c.recurse(e.right,s),u=c.member(o.context,o.name,o.computed)+e.operator+s,c.assign(t,u),n(t||u)}),c.current().inAssignment=!1,c.recurse(e.right,s),c.current().inAssignment=!0},1),c.current().inAssignment=!1;break;case Ye.ArrayExpression:l=[],gn(e.elements,function(p){c.recurse(p,e.constant?void 0:c.nextId(),void 0,function(d){l.push(d)})}),u="["+l.join(",")+"]",this.assign(t,u),n(t||u);break;case Ye.ObjectExpression:l=[],f=!1,gn(e.properties,function(p){p.computed&&(f=!0)}),f?(t=t||this.nextId(),this.assign(t,"{}"),gn(e.properties,function(p){p.computed?(o=c.nextId(),c.recurse(p.key,o)):o=p.key.type===Ye.Identifier?p.key.name:""+p.key.value,s=c.nextId(),c.recurse(p.value,s),c.assign(c.unsafeMember(t,o,p.computed),s)})):(gn(e.properties,function(p){c.recurse(p.value,e.constant?void 0:c.nextId(),void 0,function(d){l.push(c.escape(p.key.type===Ye.Identifier?p.key.name:""+p.key.value)+":"+d)})}),u="{"+l.join(",")+"}",this.assign(t,u)),n(t||u);break;case Ye.ThisExpression:this.assign(t,"s"),n(t||"s");break;case Ye.LocalsExpression:this.assign(t,"l"),n(t||"l");break;case Ye.NGValueParameter:this.assign(t,"v"),n(t||"v");break}},getHasOwnProperty:function(e,t){var r=e+"."+t,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),n[r]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,r){if(e===!0)t();else{var n=this.current().body;n.push("if(",e,"){"),t(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},or_:function(e,t){return"("+e+") || ("+t+")"},hasOwnProperty_:function(e,t,r){return r?"(Object.prototype.hasOwnProperty.call("+e+","+t+"))":"(Object.prototype.hasOwnProperty.call("+e+",'"+t+"'))"},and_:function(e,t){return"("+e+") && ("+t+")"},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,n=/[^$_a-zA-Z0-9]/g,i="";return r.test(t)?i=e+"."+t:(t=t.replace(n,this.stringEscapeFn),i=e+'["'+t+'"]'),i},unsafeComputedMember:function(e,t){return e+"["+t+"]"},unsafeNonComputedMember:function(e,t){return this.nonComputedMember(e,t)},computedMember:function(e,t){return this.state.computing==="assign"?this.unsafeComputedMember(e,t):"("+e+".hasOwnProperty("+t+") ? "+e+"["+t+"] : null)"},unsafeMember:function(e,t,r){return r?this.unsafeComputedMember(e,t):this.unsafeNonComputedMember(e,t)},member:function(e,t,r){return r?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,r,n,i,a){var o=this;return function(){o.recurse(e,t,r,n,i,a)}},lazyAssign:function(e,t){var r=this;return function(){r.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(my(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(BI(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(e===null)return"null";if(typeof e>"u")return"undefined";throw Sf("esc","IMPOSSIBLE")},nextId:function(e,t){var r="v"+this.state.nextId++;return e||this.current().vars.push(r+(t?"="+t:"")),r},current:function(){return this.state[this.state.computing]}};function E$(e,t){this.astBuilder=e,this.$filter=t}E$.prototype={compile:function(e){var t=this,r=this.astBuilder.ast(e);ci(r,t.$filter);var n,i;(n=y$(r))&&(i=this.recurse(n));var a=m$(r.body),o;a&&(o=[],gn(a,function(l,u){var f=t.recurse(l);l.input=f,o.push(f),l.watchId=u}));var s=[];gn(r.body,function(l){s.push(t.recurse(l.expression))});var c=r.body.length===0?LI:r.body.length===1?s[0]:function(l,u){var f;return gn(s,function(h){f=h(l,u)}),f};return i&&(c.assign=function(l,u,f){return i(l,f,u)}),o&&(c.inputs=o),c.ast=r,c.literal=x$(r),c.constant=b$(r),c},recurse:function(e,t,r){var n,i,a=this,o;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ye.Literal:return this.value(e.value,t);case Ye.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case Ye.BinaryExpression:return n=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](n,i,t);case Ye.LogicalExpression:return n=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](n,i,t);case Ye.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Ye.Identifier:return a.identifier(e.name,t,r);case Ye.MemberExpression:return n=this.recurse(e.object,!1,!!r),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(n,i,t,r):this.nonComputedMember(n,i,t,r);case Ye.CallExpression:return o=[],gn(e.arguments,function(s){o.push(a.recurse(s))}),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(s,c,l,u){for(var f=[],h=0;h<o.length;++h)f.push(o[h](s,c,l,u));var p=i.apply(void 0,f,u);return t?{context:void 0,name:void 0,value:p}:p}:function(s,c,l,u){var f=i(s,c,l,u),h;if(f.value!=null){for(var p=[],d=0;d<o.length;++d)p.push(o[d](s,c,l,u));h=f.value.apply(f.context,p)}return t?{value:h}:h};case Ye.AssignmentExpression:return n=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(s,c,l,u){var f=n(s,!1,l,u),h=i(s,c,l,u);return f.context[f.name]=h,t?{value:h}:h};case Ye.ArrayExpression:return o=[],gn(e.elements,function(s){o.push(a.recurse(s))}),function(s,c,l,u){for(var f=[],h=0;h<o.length;++h)f.push(o[h](s,c,l,u));return t?{value:f}:f};case Ye.ObjectExpression:return o=[],gn(e.properties,function(s){s.computed?o.push({key:a.recurse(s.key),computed:!0,value:a.recurse(s.value)}):o.push({key:s.key.type===Ye.Identifier?s.key.name:""+s.key.value,computed:!1,value:a.recurse(s.value)})}),function(s,c,l,u){for(var f={},h=0;h<o.length;++h)o[h].computed?f[o[h].key(s,c,l,u)]=o[h].value(s,c,l,u):f[o[h].key]=o[h].value(s,c,l,u);return t?{value:f}:f};case Ye.ThisExpression:return function(s){return t?{value:s}:s};case Ye.LocalsExpression:return function(s,c){return t?{value:c}:c};case Ye.NGValueParameter:return function(s,c,l){return t?{value:l}:l}}},"unary+":function(e,t){return function(r,n,i,a){var o=e(r,n,i,a);return Ef(o)?o=+o:o=0,t?{value:o}:o}},"unary-":function(e,t){return function(r,n,i,a){var o=e(r,n,i,a);return Ef(o)?o=-o:o=-0,t?{value:o}:o}},"unary!":function(e,t){return function(r,n,i,a){var o=!e(r,n,i,a);return t?{value:o}:o}},"binary+":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o),c=t(n,i,a,o),l=g$(s,c);return r?{value:l}:l}},"binary-":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o),c=t(n,i,a,o),l=(Ef(s)?s:0)-(Ef(c)?c:0);return r?{value:l}:l}},"binary*":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)*t(n,i,a,o);return r?{value:s}:s}},"binary/":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)/t(n,i,a,o);return r?{value:s}:s}},"binary%":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)%t(n,i,a,o);return r?{value:s}:s}},"binary===":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)===t(n,i,a,o);return r?{value:s}:s}},"binary!==":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)!==t(n,i,a,o);return r?{value:s}:s}},"binary==":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)==t(n,i,a,o);return r?{value:s}:s}},"binary!=":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)!=t(n,i,a,o);return r?{value:s}:s}},"binary<":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)<t(n,i,a,o);return r?{value:s}:s}},"binary>":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)>t(n,i,a,o);return r?{value:s}:s}},"binary<=":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)<=t(n,i,a,o);return r?{value:s}:s}},"binary>=":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)>=t(n,i,a,o);return r?{value:s}:s}},"binary&&":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)&&t(n,i,a,o);return r?{value:s}:s}},"binary||":function(e,t,r){return function(n,i,a,o){var s=e(n,i,a,o)||t(n,i,a,o);return r?{value:s}:s}},"ternary?:":function(e,t,r,n){return function(i,a,o,s){var c=e(i,a,o,s)?t(i,a,o,s):r(i,a,o,s);return n?{value:c}:c}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,r){return function(n,i,a,o){var s=i&&e in i?i:n;r&&r!==1&&s&&s[e]==null&&(s[e]={});var c=s?s[e]:void 0;return t?{context:s,name:e,value:c}:c}},computedMember:function(e,t,r,n){return function(i,a,o,s){var c=e(i,a,o,s),l,u;return c!=null&&(l=t(i,a,o,s),l=v$(l),n&&n!==1&&c&&!c[l]&&(c[l]={}),Object.prototype.hasOwnProperty.call(c,l)&&(u=c[l])),r?{context:c,name:l,value:u}:u}},nonComputedMember:function(e,t,r,n){return function(i,a,o,s){var c=e(i,a,o,s);n&&n!==1&&c&&c[t]==null&&(c[t]={});var l=void 0;return c!=null&&Object.prototype.hasOwnProperty.call(c,t)&&(l=c[t]),r?{context:c,name:t,value:l}:l}},inputs:function(e,t){return function(r,n,i,a){return a?a[t]:e(r,n,i)}}};var p2=function(t,r,n){this.lexer=t,this.$filter=r,this.options=n,this.ast=new Ye(t,n),this.astCompiler=n.csp?new E$(this.ast,r):new w$(this.ast,r)};p2.prototype={constructor:p2,parse:function(e){return this.astCompiler.compile(e)}};FI.Lexer=d2;FI.Parser=p2;var S$=FI,$ve={},Gve=S$.Lexer,Vve=S$.Parser;function DI(e,t){t=t||{};var r=t.filters||$ve,n=t.filters?t.cache||{}:DI.cache,i=t,a;if(typeof e!="string")throw new TypeError("src must be a string, instead saw '"+typeof e+"'");var o={csp:t.csp!=null?t.csp:!1,literals:t.literals!=null?t.literals:{true:!0,false:!1,null:null,undefined:void 0}},s=new Gve(i),c=new Vve(s,function(u){return r[u]},o);return n?(a=n[e],a||(a=n[e]=c.parse(e)),a):c.parse(e)}DI.cache=Object.create(null);var C$=DI;function Cf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var T$={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,a){function o(l,u){if(!i[l]){if(!n[l]){var f=typeof Cf=="function"&&Cf;if(!u&&f)return f(l,!0);if(s)return s(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[l]={exports:{}};n[l][0].call(p.exports,function(d){var g=n[l][1][d];return o(g||d)},p,p.exports,r,n,i,a)}return i[l].exports}for(var s=typeof Cf=="function"&&Cf,c=0;c<a.length;c++)o(a[c]);return o}({1:[function(r,n,i){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,s;if(o){var c=0,l=new o(d),u=a.document.createTextNode("");l.observe(u,{characterData:!0}),s=function(){u.data=c=++c%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var f=new a.MessageChannel;f.port1.onmessage=d,s=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?s=function(){var _=a.document.createElement("script");_.onreadystatechange=function(){d(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},a.document.documentElement.appendChild(_)}:s=function(){setTimeout(d,0)};var h,p=[];function d(){h=!0;for(var _,v,m=p.length;m;){for(v=p,p=[],_=-1;++_<m;)v[_]();m=p.length}h=!1}n.exports=g;function g(_){p.push(_)===1&&!h&&s()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var a=r(1);function o(){}var s={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];n.exports=f;function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,w!==o&&g(this,w)}f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,E){if(typeof w!="function"&&this.state===l||typeof E!="function"&&this.state===c)return this;var C=new this.constructor(o);if(this.state!==u){var T=this.state===l?w:E;p(C,T,this.outcome)}else this.queue.push(new h(C,w,E));return C};function h(w,E,C){this.promise=w,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(w){s.resolve(this.promise,w)},h.prototype.otherCallFulfilled=function(w){p(this.promise,this.onFulfilled,w)},h.prototype.callRejected=function(w){s.reject(this.promise,w)},h.prototype.otherCallRejected=function(w){p(this.promise,this.onRejected,w)};function p(w,E,C){a(function(){var T;try{T=E(C)}catch(A){return s.reject(w,A)}T===w?s.reject(w,new TypeError("Cannot resolve promise with itself")):s.resolve(w,T)})}s.resolve=function(w,E){var C=_(d,E);if(C.status==="error")return s.reject(w,C.value);var T=C.value;if(T)g(w,T);else{w.state=l,w.outcome=E;for(var A=-1,I=w.queue.length;++A<I;)w.queue[A].callFulfilled(E)}return w},s.reject=function(w,E){w.state=c,w.outcome=E;for(var C=-1,T=w.queue.length;++C<T;)w.queue[C].callRejected(E);return w};function d(w){var E=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof E=="function")return function(){E.apply(w,arguments)}}function g(w,E){var C=!1;function T(P){C||(C=!0,s.reject(w,P))}function A(P){C||(C=!0,s.resolve(w,P))}function I(){E(A,T)}var O=_(I);O.status==="error"&&T(O.value)}function _(w,E){var C={};try{C.value=w(E),C.status="success"}catch(T){C.status="error",C.value=T}return C}f.resolve=v;function v(w){return w instanceof this?w:s.resolve(new this(o),w)}f.reject=m;function m(w){var E=new this(o);return s.reject(E,w)}f.all=y;function y(w){var E=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=w.length,T=!1;if(!C)return this.resolve([]);for(var A=new Array(C),I=0,O=-1,P=new this(o);++O<C;)k(w[O],O);return P;function k(F,M){E.resolve(F).then(D,function(G){T||(T=!0,s.reject(P,G))});function D(G){A[M]=G,++I===C&&!T&&(T=!0,s.resolve(P,A))}}}f.race=b;function b(w){var E=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=w.length,T=!1;if(!C)return this.resolve([]);for(var A=-1,I=new this(o);++A<C;)O(w[A]);return I;function O(P){E.resolve(P).then(function(k){T||(T=!0,s.resolve(I,k))},function(k){T||(T=!0,s.reject(I,k))})}}},{1:1}],3:[function(r,n,i){(function(a){typeof a.Promise!="function"&&(a.Promise=r(2))}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J};function o(J,he){if(!(J instanceof he))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=s();function l(){try{if(!c||!c.open)return!1;var J=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),he=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!J||he)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(J,he){J=J||[],he=he||{};try{return new Blob(J,he)}catch(ge){if(ge.name!=="TypeError")throw ge;for(var ie=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,me=new ie,we=0;we<J.length;we+=1)me.append(J[we]);return me.getBlob(he.type)}}typeof Promise>"u"&&r(3);var f=Promise;function h(J,he){he&&J.then(function(ie){he(null,ie)},function(ie){he(ie)})}function p(J,he,ie){typeof he=="function"&&J.then(he),typeof ie=="function"&&J.catch(ie)}function d(J){return typeof J!="string"&&(console.warn(J+" used as a key, but it is not a string."),J=String(J)),J}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var _="local-forage-detect-blob-support",v=void 0,m={},y=Object.prototype.toString,b="readonly",w="readwrite";function E(J){for(var he=J.length,ie=new ArrayBuffer(he),me=new Uint8Array(ie),we=0;we<he;we++)me[we]=J.charCodeAt(we);return ie}function C(J){return new f(function(he){var ie=J.transaction(_,w),me=u([""]);ie.objectStore(_).put(me,"key"),ie.onabort=function(we){we.preventDefault(),we.stopPropagation(),he(!1)},ie.oncomplete=function(){var we=navigator.userAgent.match(/Chrome\/(\d+)/),ge=navigator.userAgent.match(/Edge\//);he(ge||!we||parseInt(we[1],10)>=43)}}).catch(function(){return!1})}function T(J){return typeof v=="boolean"?f.resolve(v):C(J).then(function(he){return v=he,v})}function A(J){var he=m[J.name],ie={};ie.promise=new f(function(me,we){ie.resolve=me,ie.reject=we}),he.deferredOperations.push(ie),he.dbReady?he.dbReady=he.dbReady.then(function(){return ie.promise}):he.dbReady=ie.promise}function I(J){var he=m[J.name],ie=he.deferredOperations.pop();if(ie)return ie.resolve(),ie.promise}function O(J,he){var ie=m[J.name],me=ie.deferredOperations.pop();if(me)return me.reject(he),me.promise}function P(J,he){return new f(function(ie,me){if(m[J.name]=m[J.name]||z(),J.db)if(he)A(J),J.db.close();else return ie(J.db);var we=[J.name];he&&we.push(J.version);var ge=c.open.apply(c,we);he&&(ge.onupgradeneeded=function(De){var ze=ge.result;try{ze.createObjectStore(J.storeName),De.oldVersion<=1&&ze.createObjectStore(_)}catch(Ze){if(Ze.name==="ConstraintError")console.warn('The database "'+J.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+J.storeName+'" already exists.');else throw Ze}}),ge.onerror=function(De){De.preventDefault(),me(ge.error)},ge.onsuccess=function(){var De=ge.result;De.onversionchange=function(ze){ze.target.close()},ie(De),I(J)}})}function k(J){return P(J,!1)}function F(J){return P(J,!0)}function M(J,he){if(!J.db)return!0;var ie=!J.db.objectStoreNames.contains(J.storeName),me=J.version<J.db.version,we=J.version>J.db.version;if(me&&(J.version!==he&&console.warn('The database "'+J.name+`" can't be downgraded from version `+J.db.version+" to version "+J.version+"."),J.version=J.db.version),we||ie){if(ie){var ge=J.db.version+1;ge>J.version&&(J.version=ge)}return!0}return!1}function D(J){return new f(function(he,ie){var me=new FileReader;me.onerror=ie,me.onloadend=function(we){var ge=btoa(we.target.result||"");he({__local_forage_encoded_blob:!0,data:ge,type:J.type})},me.readAsBinaryString(J)})}function G(J){var he=E(atob(J.data));return u([he],{type:J.type})}function Q(J){return J&&J.__local_forage_encoded_blob}function te(J){var he=this,ie=he._initReady().then(function(){var me=m[he._dbInfo.name];if(me&&me.dbReady)return me.dbReady});return p(ie,J,J),ie}function Y(J){A(J);for(var he=m[J.name],ie=he.forages,me=0;me<ie.length;me++){var we=ie[me];we._dbInfo.db&&(we._dbInfo.db.close(),we._dbInfo.db=null)}return J.db=null,k(J).then(function(ge){return J.db=ge,M(J)?F(J):ge}).then(function(ge){J.db=he.db=ge;for(var De=0;De<ie.length;De++)ie[De]._dbInfo.db=ge}).catch(function(ge){throw O(J,ge),ge})}function U(J,he,ie,me){me===void 0&&(me=1);try{var we=J.db.transaction(J.storeName,he);ie(null,we)}catch(ge){if(me>0&&(!J.db||ge.name==="InvalidStateError"||ge.name==="NotFoundError"))return f.resolve().then(function(){if(!J.db||ge.name==="NotFoundError"&&!J.db.objectStoreNames.contains(J.storeName)&&J.version<=J.db.version)return J.db&&(J.version=J.db.version+1),F(J)}).then(function(){return Y(J).then(function(){U(J,he,ie,me-1)})}).catch(ie);ie(ge)}}function z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(J){var he=this,ie={db:null};if(J)for(var me in J)ie[me]=J[me];var we=m[ie.name];we||(we=z(),m[ie.name]=we),we.forages.push(he),he._initReady||(he._initReady=he.ready,he.ready=te);var ge=[];function De(){return f.resolve()}for(var ze=0;ze<we.forages.length;ze++){var Ze=we.forages[ze];Ze!==he&&ge.push(Ze._initReady().catch(De))}var Je=we.forages.slice(0);return f.all(ge).then(function(){return ie.db=we.db,k(ie)}).then(function(tt){return ie.db=tt,M(ie,he._defaultConfig.version)?F(ie):tt}).then(function(tt){ie.db=we.db=tt,he._dbInfo=ie;for(var _t=0;_t<Je.length;_t++){var tr=Je[_t];tr!==he&&(tr._dbInfo.db=ie.db,tr._dbInfo.version=ie.version)}})}function V(J,he){var ie=this;J=d(J);var me=new f(function(we,ge){ie.ready().then(function(){U(ie._dbInfo,b,function(De,ze){if(De)return ge(De);try{var Ze=ze.objectStore(ie._dbInfo.storeName),Je=Ze.get(J);Je.onsuccess=function(){var tt=Je.result;tt===void 0&&(tt=null),Q(tt)&&(tt=G(tt)),we(tt)},Je.onerror=function(){ge(Je.error)}}catch(tt){ge(tt)}})}).catch(ge)});return h(me,he),me}function ne(J,he){var ie=this,me=new f(function(we,ge){ie.ready().then(function(){U(ie._dbInfo,b,function(De,ze){if(De)return ge(De);try{var Ze=ze.objectStore(ie._dbInfo.storeName),Je=Ze.openCursor(),tt=1;Je.onsuccess=function(){var _t=Je.result;if(_t){var tr=_t.value;Q(tr)&&(tr=G(tr));var br=J(tr,_t.key,tt++);br!==void 0?we(br):_t.continue()}else we()},Je.onerror=function(){ge(Je.error)}}catch(_t){ge(_t)}})}).catch(ge)});return h(me,he),me}function ae(J,he,ie){var me=this;J=d(J);var we=new f(function(ge,De){var ze;me.ready().then(function(){return ze=me._dbInfo,y.call(he)==="[object Blob]"?T(ze.db).then(function(Ze){return Ze?he:D(he)}):he}).then(function(Ze){U(me._dbInfo,w,function(Je,tt){if(Je)return De(Je);try{var _t=tt.objectStore(me._dbInfo.storeName);Ze===null&&(Ze=void 0);var tr=_t.put(Ze,J);tt.oncomplete=function(){Ze===void 0&&(Ze=null),ge(Ze)},tt.onabort=tt.onerror=function(){var br=tr.error?tr.error:tr.transaction.error;De(br)}}catch(br){De(br)}})}).catch(De)});return h(we,ie),we}function pe(J,he){var ie=this;J=d(J);var me=new f(function(we,ge){ie.ready().then(function(){U(ie._dbInfo,w,function(De,ze){if(De)return ge(De);try{var Ze=ze.objectStore(ie._dbInfo.storeName),Je=Ze.delete(J);ze.oncomplete=function(){we()},ze.onerror=function(){ge(Je.error)},ze.onabort=function(){var tt=Je.error?Je.error:Je.transaction.error;ge(tt)}}catch(tt){ge(tt)}})}).catch(ge)});return h(me,he),me}function se(J){var he=this,ie=new f(function(me,we){he.ready().then(function(){U(he._dbInfo,w,function(ge,De){if(ge)return we(ge);try{var ze=De.objectStore(he._dbInfo.storeName),Ze=ze.clear();De.oncomplete=function(){me()},De.onabort=De.onerror=function(){var Je=Ze.error?Ze.error:Ze.transaction.error;we(Je)}}catch(Je){we(Je)}})}).catch(we)});return h(ie,J),ie}function _e(J){var he=this,ie=new f(function(me,we){he.ready().then(function(){U(he._dbInfo,b,function(ge,De){if(ge)return we(ge);try{var ze=De.objectStore(he._dbInfo.storeName),Ze=ze.count();Ze.onsuccess=function(){me(Ze.result)},Ze.onerror=function(){we(Ze.error)}}catch(Je){we(Je)}})}).catch(we)});return h(ie,J),ie}function Le(J,he){var ie=this,me=new f(function(we,ge){if(J<0){we(null);return}ie.ready().then(function(){U(ie._dbInfo,b,function(De,ze){if(De)return ge(De);try{var Ze=ze.objectStore(ie._dbInfo.storeName),Je=!1,tt=Ze.openKeyCursor();tt.onsuccess=function(){var _t=tt.result;if(!_t){we(null);return}J===0||Je?we(_t.key):(Je=!0,_t.advance(J))},tt.onerror=function(){ge(tt.error)}}catch(_t){ge(_t)}})}).catch(ge)});return h(me,he),me}function Pe(J){var he=this,ie=new f(function(me,we){he.ready().then(function(){U(he._dbInfo,b,function(ge,De){if(ge)return we(ge);try{var ze=De.objectStore(he._dbInfo.storeName),Ze=ze.openKeyCursor(),Je=[];Ze.onsuccess=function(){var tt=Ze.result;if(!tt){me(Je);return}Je.push(tt.key),tt.continue()},Ze.onerror=function(){we(Ze.error)}}catch(tt){we(tt)}})}).catch(we)});return h(ie,J),ie}function Ee(J,he){he=g.apply(this,arguments);var ie=this.config();J=typeof J!="function"&&J||{},J.name||(J.name=J.name||ie.name,J.storeName=J.storeName||ie.storeName);var me=this,we;if(!J.name)we=f.reject("Invalid arguments");else{var ge=J.name===ie.name&&me._dbInfo.db,De=ge?f.resolve(me._dbInfo.db):k(J).then(function(ze){var Ze=m[J.name],Je=Ze.forages;Ze.db=ze;for(var tt=0;tt<Je.length;tt++)Je[tt]._dbInfo.db=ze;return ze});J.storeName?we=De.then(function(ze){if(ze.objectStoreNames.contains(J.storeName)){var Ze=ze.version+1;A(J);var Je=m[J.name],tt=Je.forages;ze.close();for(var _t=0;_t<tt.length;_t++){var tr=tt[_t];tr._dbInfo.db=null,tr._dbInfo.version=Ze}var br=new f(function(wr,rn){var Mr=c.open(J.name,Ze);Mr.onerror=function(Xi){var nl=Mr.result;nl.close(),rn(Xi)},Mr.onupgradeneeded=function(){var Xi=Mr.result;Xi.deleteObjectStore(J.storeName)},Mr.onsuccess=function(){var Xi=Mr.result;Xi.close(),wr(Xi)}});return br.then(function(wr){Je.db=wr;for(var rn=0;rn<tt.length;rn++){var Mr=tt[rn];Mr._dbInfo.db=wr,I(Mr._dbInfo)}}).catch(function(wr){throw(O(J,wr)||f.resolve()).catch(function(){}),wr})}}):we=De.then(function(ze){A(J);var Ze=m[J.name],Je=Ze.forages;ze.close();for(var tt=0;tt<Je.length;tt++){var _t=Je[tt];_t._dbInfo.db=null}var tr=new f(function(br,wr){var rn=c.deleteDatabase(J.name);rn.onerror=function(){var Mr=rn.result;Mr&&Mr.close(),wr(rn.error)},rn.onblocked=function(){console.warn('dropInstance blocked for database "'+J.name+'" until all open connections are closed')},rn.onsuccess=function(){var Mr=rn.result;Mr&&Mr.close(),br(Mr)}});return tr.then(function(br){Ze.db=br;for(var wr=0;wr<Je.length;wr++){var rn=Je[wr];I(rn._dbInfo)}}).catch(function(br){throw(O(J,br)||f.resolve()).catch(function(){}),br})})}return h(we,he),we}var Se={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:ne,getItem:V,setItem:ae,removeItem:pe,clear:se,length:_e,key:Le,keys:Pe,dropInstance:Ee};function Ge(){return typeof openDatabase=="function"}var We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ve="~~local_forage_type~",Xe=/^~~local_forage_type~([^~]+)~/,Ke="__lfsc__:",bt=Ke.length,Rt="arbf",ct="blob",gt="si08",It="ui08",fr="uic8",er="si16",hr="si32",qt="ur16",wt="ui32",sr="fl32",ke="fl64",H=bt+Rt.length,ve=Object.prototype.toString;function Te(J){var he=J.length*.75,ie=J.length,me,we=0,ge,De,ze,Ze;J[J.length-1]==="="&&(he--,J[J.length-2]==="="&&he--);var Je=new ArrayBuffer(he),tt=new Uint8Array(Je);for(me=0;me<ie;me+=4)ge=We.indexOf(J[me]),De=We.indexOf(J[me+1]),ze=We.indexOf(J[me+2]),Ze=We.indexOf(J[me+3]),tt[we++]=ge<<2|De>>4,tt[we++]=(De&15)<<4|ze>>2,tt[we++]=(ze&3)<<6|Ze&63;return Je}function Fe(J){var he=new Uint8Array(J),ie="",me;for(me=0;me<he.length;me+=3)ie+=We[he[me]>>2],ie+=We[(he[me]&3)<<4|he[me+1]>>4],ie+=We[(he[me+1]&15)<<2|he[me+2]>>6],ie+=We[he[me+2]&63];return he.length%3===2?ie=ie.substring(0,ie.length-1)+"=":he.length%3===1&&(ie=ie.substring(0,ie.length-2)+"=="),ie}function oe(J,he){var ie="";if(J&&(ie=ve.call(J)),J&&(ie==="[object ArrayBuffer]"||J.buffer&&ve.call(J.buffer)==="[object ArrayBuffer]")){var me,we=Ke;J instanceof ArrayBuffer?(me=J,we+=Rt):(me=J.buffer,ie==="[object Int8Array]"?we+=gt:ie==="[object Uint8Array]"?we+=It:ie==="[object Uint8ClampedArray]"?we+=fr:ie==="[object Int16Array]"?we+=er:ie==="[object Uint16Array]"?we+=qt:ie==="[object Int32Array]"?we+=hr:ie==="[object Uint32Array]"?we+=wt:ie==="[object Float32Array]"?we+=sr:ie==="[object Float64Array]"?we+=ke:he(new Error("Failed to get type for BinaryArray"))),he(we+Fe(me))}else if(ie==="[object Blob]"){var ge=new FileReader;ge.onload=function(){var De=Ve+J.type+"~"+Fe(this.result);he(Ke+ct+De)},ge.readAsArrayBuffer(J)}else try{he(JSON.stringify(J))}catch(De){console.error("Couldn't convert value into a JSON string: ",J),he(null,De)}}function Ie(J){if(J.substring(0,bt)!==Ke)return JSON.parse(J);var he=J.substring(H),ie=J.substring(bt,H),me;if(ie===ct&&Xe.test(he)){var we=he.match(Xe);me=we[1],he=he.substring(we[0].length)}var ge=Te(he);switch(ie){case Rt:return ge;case ct:return u([ge],{type:me});case gt:return new Int8Array(ge);case It:return new Uint8Array(ge);case fr:return new Uint8ClampedArray(ge);case er:return new Int16Array(ge);case qt:return new Uint16Array(ge);case hr:return new Int32Array(ge);case wt:return new Uint32Array(ge);case sr:return new Float32Array(ge);case ke:return new Float64Array(ge);default:throw new Error("Unkown type: "+ie)}}var W={serialize:oe,deserialize:Ie,stringToBuffer:Te,bufferToString:Fe};function Ue(J,he,ie,me){J.executeSql("CREATE TABLE IF NOT EXISTS "+he.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ie,me)}function dt(J){var he=this,ie={db:null};if(J)for(var me in J)ie[me]=typeof J[me]!="string"?J[me].toString():J[me];var we=new f(function(ge,De){try{ie.db=openDatabase(ie.name,String(ie.version),ie.description,ie.size)}catch(ze){return De(ze)}ie.db.transaction(function(ze){Ue(ze,ie,function(){he._dbInfo=ie,ge()},function(Ze,Je){De(Je)})},De)});return ie.serializer=W,we}function N(J,he,ie,me,we,ge){J.executeSql(ie,me,we,function(De,ze){ze.code===ze.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[he.storeName],function(Ze,Je){Je.rows.length?ge(Ze,ze):Ue(Ze,he,function(){Ze.executeSql(ie,me,we,ge)},ge)},ge):ge(De,ze)},ge)}function Re(J,he){var ie=this;J=d(J);var me=new f(function(we,ge){ie.ready().then(function(){var De=ie._dbInfo;De.db.transaction(function(ze){N(ze,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[J],function(Ze,Je){var tt=Je.rows.length?Je.rows.item(0).value:null;tt&&(tt=De.serializer.deserialize(tt)),we(tt)},function(Ze,Je){ge(Je)})})}).catch(ge)});return h(me,he),me}function Oe(J,he){var ie=this,me=new f(function(we,ge){ie.ready().then(function(){var De=ie._dbInfo;De.db.transaction(function(ze){N(ze,De,"SELECT * FROM "+De.storeName,[],function(Ze,Je){for(var tt=Je.rows,_t=tt.length,tr=0;tr<_t;tr++){var br=tt.item(tr),wr=br.value;if(wr&&(wr=De.serializer.deserialize(wr)),wr=J(wr,br.key,tr+1),wr!==void 0){we(wr);return}}we()},function(Ze,Je){ge(Je)})})}).catch(ge)});return h(me,he),me}function q(J,he,ie,me){var we=this;J=d(J);var ge=new f(function(De,ze){we.ready().then(function(){he===void 0&&(he=null);var Ze=he,Je=we._dbInfo;Je.serializer.serialize(he,function(tt,_t){_t?ze(_t):Je.db.transaction(function(tr){N(tr,Je,"INSERT OR REPLACE INTO "+Je.storeName+" (key, value) VALUES (?, ?)",[J,tt],function(){De(Ze)},function(br,wr){ze(wr)})},function(tr){if(tr.code===tr.QUOTA_ERR){if(me>0){De(q.apply(we,[J,Ze,ie,me-1]));return}ze(tr)}})})}).catch(ze)});return h(ge,ie),ge}function ce(J,he,ie){return q.apply(this,[J,he,ie,1])}function Ce(J,he){var ie=this;J=d(J);var me=new f(function(we,ge){ie.ready().then(function(){var De=ie._dbInfo;De.db.transaction(function(ze){N(ze,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[J],function(){we()},function(Ze,Je){ge(Je)})})}).catch(ge)});return h(me,he),me}function ft(J){var he=this,ie=new f(function(me,we){he.ready().then(function(){var ge=he._dbInfo;ge.db.transaction(function(De){N(De,ge,"DELETE FROM "+ge.storeName,[],function(){me()},function(ze,Ze){we(Ze)})})}).catch(we)});return h(ie,J),ie}function Qe(J){var he=this,ie=new f(function(me,we){he.ready().then(function(){var ge=he._dbInfo;ge.db.transaction(function(De){N(De,ge,"SELECT COUNT(key) as c FROM "+ge.storeName,[],function(ze,Ze){var Je=Ze.rows.item(0).c;me(Je)},function(ze,Ze){we(Ze)})})}).catch(we)});return h(ie,J),ie}function st(J,he){var ie=this,me=new f(function(we,ge){ie.ready().then(function(){var De=ie._dbInfo;De.db.transaction(function(ze){N(ze,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[J+1],function(Ze,Je){var tt=Je.rows.length?Je.rows.item(0).key:null;we(tt)},function(Ze,Je){ge(Je)})})}).catch(ge)});return h(me,he),me}function kt(J){var he=this,ie=new f(function(me,we){he.ready().then(function(){var ge=he._dbInfo;ge.db.transaction(function(De){N(De,ge,"SELECT key FROM "+ge.storeName,[],function(ze,Ze){for(var Je=[],tt=0;tt<Ze.rows.length;tt++)Je.push(Ze.rows.item(tt).key);me(Je)},function(ze,Ze){we(Ze)})})}).catch(we)});return h(ie,J),ie}function Rn(J){return new f(function(he,ie){J.transaction(function(me){me.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(we,ge){for(var De=[],ze=0;ze<ge.rows.length;ze++)De.push(ge.rows.item(ze).name);he({db:J,storeNames:De})},function(we,ge){ie(ge)})},function(me){ie(me)})})}function ir(J,he){he=g.apply(this,arguments);var ie=this.config();J=typeof J!="function"&&J||{},J.name||(J.name=J.name||ie.name,J.storeName=J.storeName||ie.storeName);var me=this,we;return J.name?we=new f(function(ge){var De;J.name===ie.name?De=me._dbInfo.db:De=openDatabase(J.name,"","",0),J.storeName?ge({db:De,storeNames:[J.storeName]}):ge(Rn(De))}).then(function(ge){return new f(function(De,ze){ge.db.transaction(function(Ze){function Je(br){return new f(function(wr,rn){Ze.executeSql("DROP TABLE IF EXISTS "+br,[],function(){wr()},function(Mr,Xi){rn(Xi)})})}for(var tt=[],_t=0,tr=ge.storeNames.length;_t<tr;_t++)tt.push(Je(ge.storeNames[_t]));f.all(tt).then(function(){De()}).catch(function(br){ze(br)})},function(Ze){ze(Ze)})})}):we=f.reject("Invalid arguments"),h(we,he),we}var St={_driver:"webSQLStorage",_initStorage:dt,_support:Ge(),iterate:Oe,getItem:Re,setItem:ce,removeItem:Ce,clear:ft,length:Qe,key:st,keys:kt,dropInstance:ir};function xr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function en(J,he){var ie=J.name+"/";return J.storeName!==he.storeName&&(ie+=J.storeName+"/"),ie}function Gn(){var J="_localforage_support_test";try{return localStorage.setItem(J,!0),localStorage.removeItem(J),!1}catch{return!0}}function el(){return!Gn()||localStorage.length>0}function tl(J){var he=this,ie={};if(J)for(var me in J)ie[me]=J[me];return ie.keyPrefix=en(J,he._defaultConfig),el()?(he._dbInfo=ie,ie.serializer=W,f.resolve()):f.reject()}function tn(J){var he=this,ie=he.ready().then(function(){for(var me=he._dbInfo.keyPrefix,we=localStorage.length-1;we>=0;we--){var ge=localStorage.key(we);ge.indexOf(me)===0&&localStorage.removeItem(ge)}});return h(ie,J),ie}function Pi(J,he){var ie=this;J=d(J);var me=ie.ready().then(function(){var we=ie._dbInfo,ge=localStorage.getItem(we.keyPrefix+J);return ge&&(ge=we.serializer.deserialize(ge)),ge});return h(me,he),me}function Pn(J,he){var ie=this,me=ie.ready().then(function(){for(var we=ie._dbInfo,ge=we.keyPrefix,De=ge.length,ze=localStorage.length,Ze=1,Je=0;Je<ze;Je++){var tt=localStorage.key(Je);if(tt.indexOf(ge)===0){var _t=localStorage.getItem(tt);if(_t&&(_t=we.serializer.deserialize(_t)),_t=J(_t,tt.substring(De),Ze++),_t!==void 0)return _t}}});return h(me,he),me}function ba(J,he){var ie=this,me=ie.ready().then(function(){var we=ie._dbInfo,ge;try{ge=localStorage.key(J)}catch{ge=null}return ge&&(ge=ge.substring(we.keyPrefix.length)),ge});return h(me,he),me}function Hi(J){var he=this,ie=he.ready().then(function(){for(var me=he._dbInfo,we=localStorage.length,ge=[],De=0;De<we;De++){var ze=localStorage.key(De);ze.indexOf(me.keyPrefix)===0&&ge.push(ze.substring(me.keyPrefix.length))}return ge});return h(ie,J),ie}function Fc(J){var he=this,ie=he.keys().then(function(me){return me.length});return h(ie,J),ie}function Cx(J,he){var ie=this;J=d(J);var me=ie.ready().then(function(){var we=ie._dbInfo;localStorage.removeItem(we.keyPrefix+J)});return h(me,he),me}function Tx(J,he,ie){var me=this;J=d(J);var we=me.ready().then(function(){he===void 0&&(he=null);var ge=he;return new f(function(De,ze){var Ze=me._dbInfo;Ze.serializer.serialize(he,function(Je,tt){if(tt)ze(tt);else try{localStorage.setItem(Ze.keyPrefix+J,Je),De(ge)}catch(_t){(_t.name==="QuotaExceededError"||_t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ze(_t),ze(_t)}})})});return h(we,ie),we}function Ax(J,he){if(he=g.apply(this,arguments),J=typeof J!="function"&&J||{},!J.name){var ie=this.config();J.name=J.name||ie.name,J.storeName=J.storeName||ie.storeName}var me=this,we;return J.name?we=new f(function(ge){J.storeName?ge(en(J,me._defaultConfig)):ge(J.name+"/")}).then(function(ge){for(var De=localStorage.length-1;De>=0;De--){var ze=localStorage.key(De);ze.indexOf(ge)===0&&localStorage.removeItem(ze)}}):we=f.reject("Invalid arguments"),h(we,he),we}var Ix={_driver:"localStorageWrapper",_initStorage:tl,_support:xr(),iterate:Pn,getItem:Pi,setItem:Tx,removeItem:Cx,clear:tn,length:Fc,key:ba,keys:Hi,dropInstance:Ax},Rx=function(he,ie){return he===ie||typeof he=="number"&&typeof ie=="number"&&isNaN(he)&&isNaN(ie)},Nc=function(he,ie){for(var me=he.length,we=0;we<me;){if(Rx(he[we],ie))return!0;we++}return!1},K0=Array.isArray||function(J){return Object.prototype.toString.call(J)==="[object Array]"},Do={},Z0={},rl={INDEXEDDB:Se,WEBSQL:St,LOCALSTORAGE:Ix},Px=[rl.INDEXEDDB._driver,rl.WEBSQL._driver,rl.LOCALSTORAGE._driver],pu=["dropInstance"],Lc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(pu),J0={description:"",driver:Px.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ox(J,he){J[he]=function(){var ie=arguments;return J.ready().then(function(){return J[he].apply(J,ie)})}}function Yh(){for(var J=1;J<arguments.length;J++){var he=arguments[J];if(he)for(var ie in he)he.hasOwnProperty(ie)&&(K0(he[ie])?arguments[0][ie]=he[ie].slice():arguments[0][ie]=he[ie])}return arguments[0]}var kx=function(){function J(he){o(this,J);for(var ie in rl)if(rl.hasOwnProperty(ie)){var me=rl[ie],we=me._driver;this[ie]=we,Do[we]||this.defineDriver(me)}this._defaultConfig=Yh({},J0),this._config=Yh({},this._defaultConfig,he),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return J.prototype.config=function(ie){if((typeof ie>"u"?"undefined":a(ie))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var me in ie){if(me==="storeName"&&(ie[me]=ie[me].replace(/\W/g,"_")),me==="version"&&typeof ie[me]!="number")return new Error("Database version must be a number.");this._config[me]=ie[me]}return"driver"in ie&&ie.driver?this.setDriver(this._config.driver):!0}else return typeof ie=="string"?this._config[ie]:this._config},J.prototype.defineDriver=function(ie,me,we){var ge=new f(function(De,ze){try{var Ze=ie._driver,Je=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ie._driver){ze(Je);return}for(var tt=Lc.concat("_initStorage"),_t=0,tr=tt.length;_t<tr;_t++){var br=tt[_t],wr=!Nc(pu,br);if((wr||ie[br])&&typeof ie[br]!="function"){ze(Je);return}}var rn=function(){for(var nl=function(ev){return function(){var Lx=new Error("Method "+ev+" is not implemented by the current driver"),tv=f.reject(Lx);return h(tv,arguments[arguments.length-1]),tv}},qh=0,Q0=pu.length;qh<Q0;qh++){var Bc=pu[qh];ie[Bc]||(ie[Bc]=nl(Bc))}};rn();var Mr=function(nl){Do[Ze]&&console.info("Redefining LocalForage driver: "+Ze),Do[Ze]=ie,Z0[Ze]=nl,De()};"_support"in ie?ie._support&&typeof ie._support=="function"?ie._support().then(Mr,ze):Mr(!!ie._support):Mr(!0)}catch(Xi){ze(Xi)}});return p(ge,me,we),ge},J.prototype.driver=function(){return this._driver||null},J.prototype.getDriver=function(ie,me,we){var ge=Do[ie]?f.resolve(Do[ie]):f.reject(new Error("Driver not found."));return p(ge,me,we),ge},J.prototype.getSerializer=function(ie){var me=f.resolve(W);return p(me,ie),me},J.prototype.ready=function(ie){var me=this,we=me._driverSet.then(function(){return me._ready===null&&(me._ready=me._initDriver()),me._ready});return p(we,ie,ie),we},J.prototype.setDriver=function(ie,me,we){var ge=this;K0(ie)||(ie=[ie]);var De=this._getSupportedDrivers(ie);function ze(){ge._config.driver=ge.driver()}function Ze(_t){return ge._extend(_t),ze(),ge._ready=ge._initStorage(ge._config),ge._ready}function Je(_t){return function(){var tr=0;function br(){for(;tr<_t.length;){var wr=_t[tr];return tr++,ge._dbInfo=null,ge._ready=null,ge.getDriver(wr).then(Ze).catch(br)}ze();var rn=new Error("No available storage method found.");return ge._driverSet=f.reject(rn),ge._driverSet}return br()}}var tt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=tt.then(function(){var _t=De[0];return ge._dbInfo=null,ge._ready=null,ge.getDriver(_t).then(function(tr){ge._driver=tr._driver,ze(),ge._wrapLibraryMethodsWithReady(),ge._initDriver=Je(De)})}).catch(function(){ze();var _t=new Error("No available storage method found.");return ge._driverSet=f.reject(_t),ge._driverSet}),p(this._driverSet,me,we),this._driverSet},J.prototype.supports=function(ie){return!!Z0[ie]},J.prototype._extend=function(ie){Yh(this,ie)},J.prototype._getSupportedDrivers=function(ie){for(var me=[],we=0,ge=ie.length;we<ge;we++){var De=ie[we];this.supports(De)&&me.push(De)}return me},J.prototype._wrapLibraryMethodsWithReady=function(){for(var ie=0,me=Lc.length;ie<me;ie++)Ox(this,Lc[ie])},J.prototype.createInstance=function(ie){return new J(ie)},J}(),Fx=new kx;n.exports=Fx},{3:3}]},{},[4])(4)})})(T$);var Fh=T$.exports;const vs=Gi(Fh),_y=Ql.create();_y.defaults.baseURL="https://test-api.idoltime.games";_y.defaults.headers.common["Content-Type"]="application/json";_y.interceptors.request.use(e=>{const t=new URLSearchParams(window.location.search).get("token")||le.getState().userData.token,r=le.getState().storeData.isEditorPreviewMode,n=localStorage.getItem("editor-token");return e.headers=r?{...e.headers,editorToken:n,source:"editor"}:{...e.headers,token:t,source:"web"},e},e=>Promise.reject(e));const oa=_y,Hve="_GlobalDialog_main_awvoa_2",Xve="_showGlobalDialog_awvoa_1",zve="_glabalDialog_container_inner_awvoa_18",Wve="_GlobalDialog_pay_container_awvoa_31",Yve="_GlobalDialog_pay_tip_awvoa_41",qve="_GlobalDialog_pay_close_awvoa_54",Kve="_GlobalDialog_pay_title_awvoa_67",Zve="_GlobalDialog_pay_content_awvoa_79",Jve="_GlobalDialog_star_stone_awvoa_90",Qve="_GlobalDialog_pay_btns_awvoa_100",ege="_GlobalDialog_pay_btn_awvoa_100",tge="_GlobalDialog_pay_cancel_awvoa_120",rge="_GlobalDialog_pay_confirm_awvoa_126",nge="_glabalDialog_container_awvoa_18",ige="_title_awvoa_140",age="_button_list_awvoa_152",oge="_button_awvoa_152",Er={GlobalDialog_main:Hve,showGlobalDialog:Xve,glabalDialog_container_inner:zve,GlobalDialog_pay_container:Wve,GlobalDialog_pay_tip:Yve,GlobalDialog_pay_close:qve,GlobalDialog_pay_title:Kve,GlobalDialog_pay_content:Zve,GlobalDialog_star_stone:Jve,GlobalDialog_pay_btns:Qve,GlobalDialog_pay_btn:ege,GlobalDialog_pay_cancel:tge,GlobalDialog_pay_confirm:rge,glabalDialog_container:nge,title:ige,button_list:age,button:oge};var A$={exports:{}},I$={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh=fe;function sge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lge=typeof Object.is=="function"?Object.is:sge,uge=eh.useState,cge=eh.useEffect,fge=eh.useLayoutEffect,hge=eh.useDebugValue;function dge(e,t){var r=t(),n=uge({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return fge(function(){i.value=r,i.getSnapshot=t,zb(i)&&a({inst:i})},[e,r,t]),cge(function(){return zb(i)&&a({inst:i}),e(function(){zb(i)&&a({inst:i})})},[e]),hge(r),r}function zb(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lge(e,r)}catch{return!0}}function pge(e,t){return t()}var vge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pge:dge;I$.useSyncExternalStore=eh.useSyncExternalStore!==void 0?eh.useSyncExternalStore:vge;A$.exports=I$;var gge=A$.exports,R$={exports:{}},P$={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=fe,mge=gge;function _ge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yge=typeof Object.is=="function"?Object.is:_ge,xge=mge.useSyncExternalStore,bge=yy.useRef,wge=yy.useEffect,Ege=yy.useMemo,Sge=yy.useDebugValue;P$.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=bge(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Ege(function(){function c(p){if(!l){if(l=!0,u=p,p=n(p),i!==void 0&&o.hasValue){var d=o.value;if(i(d,p))return f=d}return f=p}if(d=f,yge(u,p))return d;var g=n(p);return i!==void 0&&i(d,g)?d:(u=p,f=g)}var l=!1,u,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,i]);var s=xge(e,a[0],a[1]);return wge(function(){o.hasValue=!0,o.value=s},[s]),Sge(s),s};R$.exports=P$;var Cge=R$.exports;function Tge(e){e()}let O$=Tge;const Age=e=>O$=e,Ige=()=>O$,EL=Symbol.for("react-redux-context"),SL=typeof globalThis<"u"?globalThis:{};function Rge(){var e;if(!fe.createContext)return{};const t=(e=SL[EL])!=null?e:SL[EL]=new Map;let r=t.get(fe.createContext);return r||(r=fe.createContext(null),t.set(fe.createContext,r)),r}const eu=Rge();function UI(e=eu){return function(){return fe.useContext(e)}}const k$=UI(),Pge=()=>{throw new Error("uSES not initialized!")};let F$=Pge;const Oge=e=>{F$=e},kge=(e,t)=>e===t;function Fge(e=eu){const t=e===eu?k$:UI(e);return function(n,i={}){const{equalityFn:a=kge,stabilityCheck:o=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:c,subscription:l,getServerState:u,stabilityCheck:f,noopCheck:h}=t();fe.useRef(!0);const p=fe.useCallback({[n.name](g){return n(g)}}[n.name],[n,f,o]),d=F$(l.addNestedSub,c.getState,u||c.getState,p,a);return fe.useDebugValue(d),d}}const ht=Fge();function Nge(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var N$={exports:{}},Br={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yi=typeof Symbol=="function"&&Symbol.for,jI=yi?Symbol.for("react.element"):60103,$I=yi?Symbol.for("react.portal"):60106,xy=yi?Symbol.for("react.fragment"):60107,by=yi?Symbol.for("react.strict_mode"):60108,wy=yi?Symbol.for("react.profiler"):60114,Ey=yi?Symbol.for("react.provider"):60109,Sy=yi?Symbol.for("react.context"):60110,GI=yi?Symbol.for("react.async_mode"):60111,Cy=yi?Symbol.for("react.concurrent_mode"):60111,Ty=yi?Symbol.for("react.forward_ref"):60112,Ay=yi?Symbol.for("react.suspense"):60113,Lge=yi?Symbol.for("react.suspense_list"):60120,Iy=yi?Symbol.for("react.memo"):60115,Ry=yi?Symbol.for("react.lazy"):60116,Bge=yi?Symbol.for("react.block"):60121,Mge=yi?Symbol.for("react.fundamental"):60117,Dge=yi?Symbol.for("react.responder"):60118,Uge=yi?Symbol.for("react.scope"):60119;function Da(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jI:switch(e=e.type,e){case GI:case Cy:case xy:case wy:case by:case Ay:return e;default:switch(e=e&&e.$$typeof,e){case Sy:case Ty:case Ry:case Iy:case Ey:return e;default:return t}}case $I:return t}}}function L$(e){return Da(e)===Cy}Br.AsyncMode=GI;Br.ConcurrentMode=Cy;Br.ContextConsumer=Sy;Br.ContextProvider=Ey;Br.Element=jI;Br.ForwardRef=Ty;Br.Fragment=xy;Br.Lazy=Ry;Br.Memo=Iy;Br.Portal=$I;Br.Profiler=wy;Br.StrictMode=by;Br.Suspense=Ay;Br.isAsyncMode=function(e){return L$(e)||Da(e)===GI};Br.isConcurrentMode=L$;Br.isContextConsumer=function(e){return Da(e)===Sy};Br.isContextProvider=function(e){return Da(e)===Ey};Br.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jI};Br.isForwardRef=function(e){return Da(e)===Ty};Br.isFragment=function(e){return Da(e)===xy};Br.isLazy=function(e){return Da(e)===Ry};Br.isMemo=function(e){return Da(e)===Iy};Br.isPortal=function(e){return Da(e)===$I};Br.isProfiler=function(e){return Da(e)===wy};Br.isStrictMode=function(e){return Da(e)===by};Br.isSuspense=function(e){return Da(e)===Ay};Br.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xy||e===Cy||e===wy||e===by||e===Ay||e===Lge||typeof e=="object"&&e!==null&&(e.$$typeof===Ry||e.$$typeof===Iy||e.$$typeof===Ey||e.$$typeof===Sy||e.$$typeof===Ty||e.$$typeof===Mge||e.$$typeof===Dge||e.$$typeof===Uge||e.$$typeof===Bge)};Br.typeOf=Da;N$.exports=Br;var jge=N$.exports,B$=jge,$ge={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gge={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},M$={};M$[B$.ForwardRef]=$ge;M$[B$.Memo]=Gge;var jr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI=Symbol.for("react.element"),HI=Symbol.for("react.portal"),Py=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),ky=Symbol.for("react.profiler"),Fy=Symbol.for("react.provider"),Ny=Symbol.for("react.context"),Vge=Symbol.for("react.server_context"),Ly=Symbol.for("react.forward_ref"),By=Symbol.for("react.suspense"),My=Symbol.for("react.suspense_list"),Dy=Symbol.for("react.memo"),Uy=Symbol.for("react.lazy"),Hge=Symbol.for("react.offscreen"),D$;D$=Symbol.for("react.module.reference");function ao(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case VI:switch(e=e.type,e){case Py:case ky:case Oy:case By:case My:return e;default:switch(e=e&&e.$$typeof,e){case Vge:case Ny:case Ly:case Uy:case Dy:case Fy:return e;default:return t}}case HI:return t}}}jr.ContextConsumer=Ny;jr.ContextProvider=Fy;jr.Element=VI;jr.ForwardRef=Ly;jr.Fragment=Py;jr.Lazy=Uy;jr.Memo=Dy;jr.Portal=HI;jr.Profiler=ky;jr.StrictMode=Oy;jr.Suspense=By;jr.SuspenseList=My;jr.isAsyncMode=function(){return!1};jr.isConcurrentMode=function(){return!1};jr.isContextConsumer=function(e){return ao(e)===Ny};jr.isContextProvider=function(e){return ao(e)===Fy};jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===VI};jr.isForwardRef=function(e){return ao(e)===Ly};jr.isFragment=function(e){return ao(e)===Py};jr.isLazy=function(e){return ao(e)===Uy};jr.isMemo=function(e){return ao(e)===Dy};jr.isPortal=function(e){return ao(e)===HI};jr.isProfiler=function(e){return ao(e)===ky};jr.isStrictMode=function(e){return ao(e)===Oy};jr.isSuspense=function(e){return ao(e)===By};jr.isSuspenseList=function(e){return ao(e)===My};jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Py||e===ky||e===Oy||e===By||e===My||e===Hge||typeof e=="object"&&e!==null&&(e.$$typeof===Uy||e.$$typeof===Dy||e.$$typeof===Fy||e.$$typeof===Ny||e.$$typeof===Ly||e.$$typeof===D$||e.getModuleId!==void 0)};jr.typeOf=ao;function Xge(){const e=Ige();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,a=r={callback:n,next:null,prev:r};return a.prev?a.prev.next=a:t=a,function(){!i||t===null||(i=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}const CL={notify(){},get:()=>[]};function zge(e,t){let r,n=CL,i=0,a=!1;function o(g){u();const _=n.subscribe(g);let v=!1;return()=>{v||(v=!0,_(),f())}}function s(){n.notify()}function c(){d.onStateChange&&d.onStateChange()}function l(){return a}function u(){i++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=Xge())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=CL)}function h(){a||(a=!0,u())}function p(){a&&(a=!1,f())}const d={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:l,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return d}const Wge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Yge=Wge?fe.useLayoutEffect:fe.useEffect;function qge({store:e,context:t,children:r,serverState:n,stabilityCheck:i="once",noopCheck:a="once"}){const o=fe.useMemo(()=>{const l=zge(e);return{store:e,subscription:l,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:a}},[e,n,i,a]),s=fe.useMemo(()=>e.getState(),[e]);Yge(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,s]);const c=t||eu;return fe.createElement(c.Provider,{value:o},r)}function U$(e=eu){const t=e===eu?k$:UI(e);return function(){const{store:n}=t();return n}}const Kge=U$();function Zge(e=eu){const t=e===eu?Kge:U$(e);return function(){return t().dispatch}}const Hr=Zge();Oge(Cge.useSyncExternalStoreWithSelector);Age(TU.unstable_batchedUpdates);const XI={alpha:1,scale:{x:1,y:1},position:{x:0,y:0},rotation:0,blur:0};var Mu=(e=>(e.Click="click",e.Move="move",e.Error="error",e.Alert="alert",e))(Mu||{});const Jge=""+new URL("page-flip-1.mp3",import.meta.url).href,Qge=""+new URL("switch-1.mp3",import.meta.url).href,j$=""+new URL("mouse-enter.mp3",import.meta.url).href,eme=""+new URL("dialog.mp3",import.meta.url).href,$$=""+new URL("click.mp3",import.meta.url).href,bn=()=>{const e=Hr();let t=!1;const r=(c,l)=>{var f,h;const u=le.getState().GUI.currentPlayAudio;c&&typeof c=="boolean"||(u&&((f=u==null?void 0:u.pause)==null||f.call(u),u.volume=0,(h=u==null?void 0:u.remove)==null||h.call(u),le.dispatch(e2(null))),e($t({key:"uiSe",value:c||l})),t=!1)};return{playSeEnter:()=>{var u,f;if(t)return;t=!0;const c=le.getState().saveData,l=le.getState().GUI.isInGaming?(u=c.gameScounds)==null?void 0:u[Mu.Move]:(f=c.menuScounds)==null?void 0:f[Mu.Move];r(l,j$)},playSeClick:c=>{var f,h;const l=le.getState().saveData,u=le.getState().GUI.isInGaming?(f=l.gameScounds)==null?void 0:f[Mu.Click]:(h=l.menuScounds)==null?void 0:h[Mu.Click];c?e($t({key:"uiSe",value:c})):r(u,$$)},playSePageChange:()=>{e($t({key:"uiSe",value:Jge}))},playSeDialogOpen:()=>{var u,f;const c=le.getState().saveData,l=le.getState().GUI.isInGaming?(u=c.gameScounds)==null?void 0:u[Mu.Alert]:(f=c.menuScounds)==null?void 0:f[Mu.Alert];r(l,eme)},playSeSwitch:()=>{e($t({key:"uiSe",value:Qge}))}}},Nh=()=>({playSeEnter:()=>{le.dispatch($t({key:"uiSe",value:j$}))},playSeClick:()=>{le.dispatch($t({key:"uiSe",value:$$}))}});Bi.Game_start_button;function tme(){const e=ht(t=>t.GUI.showGlobalDialog);return L.jsx(L.Fragment,{children:e&&L.jsx("div",{id:"globalDialogContainer"})})}function ma(e){const{playSeClick:t,playSeEnter:r}=Nh(),n=e.type??"normal";le.dispatch(vt({component:"showGlobalDialog",visibility:!0}));const i=()=>{var c;t(),(c=e.leftFunc)==null||c.call(e),Wb()},a=()=>{t(),e.rightFunc(),Wb()};let o=null,s=0;n==="normal"?o=L.jsx("div",{className:Er.GlobalDialog_main,children:L.jsx("div",{className:Er.glabalDialog_container,children:L.jsxs("div",{className:Er.glabalDialog_container_inner,children:[L.jsx("div",{className:Er.title,children:e.title}),L.jsxs("div",{className:Er.button_list,children:[!!e.leftText&&L.jsx("div",{className:`${Er.button} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Er.button} interactive btn-clicked`,s=Date.now()},onMouseUp:c=>{const l=Date.now()-s;let u=c.currentTarget;setTimeout(()=>{u.className=`${Er.button} interactive`,u=null,setTimeout(()=>{i()},320)},l-350>0?0:350-l)},children:e.leftText}),L.jsx("div",{className:`${Er.button} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Er.button} interactive btn-clicked`,s=Date.now()},onMouseUp:c=>{const l=Date.now()-s;let u=c.currentTarget;setTimeout(()=>{u.className=`${Er.button} interactive`,u=null,setTimeout(()=>{a()},320)},l-350>0?0:350-l)},children:e.rightText})]})]})})}):n==="pay"&&(o=L.jsx("div",{className:Er.GlobalDialog_main,children:L.jsxs("div",{className:Er.GlobalDialog_pay_container,children:[L.jsx("div",{className:Er.GlobalDialog_pay_tip}),L.jsx("div",{className:`${Er.GlobalDialog_pay_close} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Er.GlobalDialog_pay_close} interactive btn-clicked`,s=Date.now()},onMouseUp:c=>{const l=Date.now()-s;let u=c.currentTarget;setTimeout(()=>{u.className=`${Er.GlobalDialog_pay_close} interactive`,u=null,setTimeout(()=>{t(),i(),Wb()},320)},l-350>0?0:350-l)}}),L.jsx("div",{className:Er.GlobalDialog_pay_title,children:e.title}),L.jsxs("div",{className:Er.GlobalDialog_pay_content,children:[e.content,L.jsx("span",{className:Er.GlobalDialog_star_stone}),e.suffixContent]}),L.jsxs("div",{className:Er.GlobalDialog_pay_btns,children:[L.jsx("div",{className:`${Er.GlobalDialog_pay_btn} ${Er.GlobalDialog_pay_cancel} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Er.GlobalDialog_pay_btn} ${Er.GlobalDialog_pay_cancel} interactive btn-clicked`,s=Date.now()},onMouseUp:c=>{const l=Date.now()-s;let u=c.currentTarget;setTimeout(()=>{u.className=`${Er.GlobalDialog_pay_btn} ${Er.GlobalDialog_pay_cancel} interactive`,u=null,setTimeout(()=>{i()},320)},l-350>0?0:350-l)}}),L.jsx("div",{className:`${Er.GlobalDialog_pay_btn} ${Er.GlobalDialog_pay_confirm} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Er.GlobalDialog_pay_btn} ${Er.GlobalDialog_pay_confirm}  interactive btn-clicked`,s=Date.now()},onMouseUp:c=>{const l=Date.now()-s;let u=c.currentTarget;setTimeout(()=>{u.className=`${Er.GlobalDialog_pay_btn} ${Er.GlobalDialog_pay_confirm} interactive`,u=null,setTimeout(()=>{a()},320)},l-350>0?0:350-l)}})]})]})})),setTimeout(()=>{Zl.render(o,document.getElementById("globalDialogContainer"))},100)}function Wb(){le.dispatch(vt({component:"showGlobalDialog",visibility:!1}))}let TL=0,AL=0,IL=0,RL=0,PL=0;const Js=()=>{var e;return $.channel==="0"?String(((e=le.getState().userData.userInfo)==null?void 0:e.userId)||0):sessionStorage.getItem("sdk-userId")};function rme(e,t){if(!$.gameId){for(let r=e;r<=t;r++){const n=le.getState().saveData.saveData[r];n&&vs.setItem(`${$.gameKey}-saves${r}`,n).then(()=>{qe.info(`${r}`)})}return}nme(e,t)}async function nme(e,t){const r=[],n={};window.pubsub.publish("loading",{loading:!0});for(let a=e;a<=t;a++){const o=le.getState().saveData.saveData[a];if(o){const s=oa.post("/editor/game/file_save",{userId:Js(),gId:$.gameId,fileType:2,key:`${$.gameKey}-saves${a}`,value:JSON.stringify(o)}).then(c=>{if(c.data.code===0)qe.info(`${a}`),window.pubsub.publish("toaster",{show:!0,text:""});else throw new Error(c.data.message)}).catch(c=>{qe.error(`${a}: ${c.message}`),n[`${$.gameKey}-saves${a}`]=o});r.push(s)}}await Promise.all(r).finally(()=>{window.pubsub.publish("loading",{loading:!1})});const i=Object.values(n).length;i>0&&ma({title:"",content:`${i}, ?`,leftText:"",rightText:"",leftFunc:()=>{},rightFunc:()=>{zI(n,2)}})}async function Lh(e,t,r=!0){const n=[],i={};if(r||window.pubsub.publish("loading",{loading:!0}),t){const o=oa.post("/editor/game/file_save",{userId:Js(),gId:$.gameId,fileType:1,key:e,value:JSON.stringify(t)}).then(s=>{if(s.data.code===0)qe.info(`${e}`);else throw new Error(s.data.message)}).catch(s=>{qe.error(`${e}: ${s.message}`),i[e]=t});n.push(o)}await Promise.all(n).finally(()=>{r&&window.pubsub.publish("loading",{loading:!1})}),Object.values(i).length&&ma({title:"",content:`${i.length}, ?`,leftText:"",rightText:"",leftFunc:()=>{},rightFunc:()=>{zI(i,1)}})}async function zI(e,t){const r=Object.keys(e),n={},i=r.map(o=>{const s=e[o];return s?oa.post("/editor/game/file_save",{userId:Js(),gId:$.gameId,fileType:t,key:o,value:JSON.stringify(s)}).then(c=>{if(c.data.code===0)qe.info(`${o}`);else throw new Error(c.data.message)}).catch(c=>{qe.error(`${o}: ${c.message}`),n[o]=s}):Promise.resolve()});await Promise.all(i);const a=Object.values(n).length;a>0&&ma({title:"",content:`${a}, ?`,leftText:"",rightText:"",leftFunc:()=>{},rightFunc:()=>{zI(n,t)}})}async function ime(e,t){if(qe.info(`${e}-${t}`),$.gameId)await no(2);else for(let r=e;r<=t;r++){const n=await vs.getItem(`${$.gameKey}-saves${r}`);le.dispatch(or.saveGame({index:r,saveData:n})),qe.info(`${r}`)}}async function no(e,t=1,r=10){if(!(e===1&&Date.now()-TL<3e3)&&!(e===2&&t===1&&Date.now()-AL<3e3)){if(e===2){if(t>3)return;window.pubsub.publish("loading",{loading:!0}),AL=Date.now()}else TL=Date.now();try{const n=await oa.post("/editor/game/file_list",{userId:Js(),page:t,pageSize:r,fileType:e,gId:$.gameId}),i=n.data.data;if(n.data.code===0){const a=i.data||[];for(const o of a){const s=cme(o.value),c=JSON.parse(s);o.key===`${$.gameKey}-saves-fast`?le.dispatch(or.setFastSave(c)):new RegExp(`${$.gameKey}-saves[0-9]+`).test(o.key)?le.dispatch(or.saveGame({index:Number(o.key.replace(`${$.gameKey}-saves`,"")),saveData:c})):o.key===`${$.gameKey}-storyline`?le.dispatch(or.setStorylineListFromStorage(c.data)):o.key===`${$.gameKey}-unlock-affinity`?le.dispatch(or.updateAffinityData(c.data)):o.key===`${$.gameKey}-unlock-achieve`?le.dispatch(or.setUnlockAchieveData(c.data)):o.key===$.gameKey&&le.dispatch(ty(c))}e===2&&le.getState().saveData.saveData.filter(s=>s).length<i.total&&await no(2,t+1,r)}else throw console.error(n.data.message),new Error(n.data.message)}catch(n){console.error(n),ma({title:"",content:n.message,leftText:"",rightText:"",leftFunc:()=>{},rightFunc:()=>{no(e)}})}finally{window.pubsub.publish("loading",{loading:!1})}}}async function ame(){const e=le.getState().saveData.quickSaveData;$.gameId?await Lh(`${$.gameKey}-saves-fast`,e):(await vs.setItem(`${$.gameKey}-saves-fast`,e),qe.info(""))}async function ome(){if(qe.info(""),$.gameId)await no(1);else{const e=await vs.getItem(`${$.gameKey}-saves-fast`);le.dispatch(or.setFastSave(e))}}async function G$(){const e=le.getState().saveData.unlockStorylineList;if(!$.gameId&&(e==null?void 0:e.length)>0)await vs.setItem(`${$.gameKey}-storyline`,{data:e}),qe.info(" >> ");else{if(Date.now()-IL<3e3)return;IL=Date.now(),(e==null?void 0:e.length)>0&&await Lh(`${$.gameKey}-storyline`,{data:e})}}async function WI(){if($.gameId)await no(1);else{qe.info("");const e=await vs.getItem(`${$.gameKey}-storyline`);le.dispatch(or.setStorylineListFromStorage((e==null?void 0:e.data)??[]))}}async function sme(){const e=le.getState().saveData.unlockAffinityData;if(!$.gameId)await vs.setItem(`${$.gameKey}-unlock-affinity`,{data:e}),qe.info(" >> ");else{if(Date.now()-RL<3e3)return;RL=Date.now(),await Lh(`${$.gameKey}-unlock-affinity`,{data:e})}}async function lme(){if(qe.info(""),$.gameId)await no(1);else{const e=await vs.getItem(`${$.gameKey}-unlock-affinity`);le.dispatch(or.updateAffinityData((e==null?void 0:e.data)??[])),qe.info(" >> ")}}async function V$(){const e=le.getState().saveData.unlockAchieveData;if(!$.gameId)await vs.setItem(`${$.gameKey}-unlock-achieve`,{data:e}),qe.info(" >>> ");else{if(Date.now()-PL<3e3)return;PL=Date.now(),await Lh(`${$.gameKey}-unlock-achieve`,{data:e})}}async function ume(){if(qe.info(""),$.gameId)await no(1);else{const e=await vs.getItem(`${$.gameKey}-unlock-achieve`);le.dispatch(or.setUnlockAchieveData((e==null?void 0:e.data)||[])),qe.info(" >>> ")}}function cme(e){return e.replace(/\"(content|value)\":\"(.*?)\"(,|})/g,function(t,r,n,i){const a=n.replace(/\"/g,'\\"');return`"${r}":"${a}"${i}`})}const Ao=X$(()=>{const e=le.getState().userData;$.gameId?Lh($.gameKey,e):Fh.setItem($.gameKey,e).then(()=>{qe.info("")})},100),H$=X$(()=>{let e;const t=r=>{const n={...r};if(n&&n.token&&delete n.token,!n||!W$(n,!0)){qe.warn(""),Ao();return}le.dispatch(ty(n))};$.gameId?no(1).then(()=>{e=le.getState().userData,t(e)}):e=Fh.getItem($.gameKey).then(r=>{t(r)})},100);function X$(e,t){let r;function n(...i){clearTimeout(r);let a;return r=setTimeout(()=>{a=e.apply(n,i)},t),a}return n}const z$=()=>{const e=t=>{const r={...t};if(r&&r.token&&delete r.token,!r){Ao();return}le.dispatch(ty(r)),qe.info("")};Y$().then(async()=>{if($.gameId){await no(1);const t=le.getState().userData;e(t)}else{let t=Fh.getItem($.gameKey);e(t)}})};function W$(e,t){let r=!0;for(const n in t2)t&&n==="token"||e.hasOwnProperty(n)||(r=!1);return r}async function Y$(){const e=le.getState().userData;return $.gameId?await Lh($.gameKey,e):await Fh.setItem($.gameKey,e)}async function fme(){let e;if($.gameId?(await no(1),e=le.getState().userData):e=await Fh.getItem($.gameKey),!e||!W$(e))return qe.warn(""),await Y$();le.dispatch(ty(e))}function hme(e,t){return typeof e!="number"&&(e=0),typeof t!="number"&&(e=0),e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e-1))+e+1}var Km={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Km.exports;(function(e,t){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,h=2,p=4,d=1,g=2,_=1,v=2,m=4,y=8,b=16,w=32,E=64,C=128,T=256,A=512,I=30,O="...",P=800,k=16,F=1,M=2,D=3,G=1/0,Q=9007199254740991,te=17976931348623157e292,Y=0/0,U=4294967295,z=U-1,j=U>>>1,V=[["ary",C],["bind",_],["bindKey",v],["curry",y],["curryRight",b],["flip",A],["partial",w],["partialRight",E],["rearg",T]],ne="[object Arguments]",ae="[object Array]",pe="[object AsyncFunction]",se="[object Boolean]",_e="[object Date]",Le="[object DOMException]",Pe="[object Error]",Ee="[object Function]",Se="[object GeneratorFunction]",Ge="[object Map]",We="[object Number]",Ve="[object Null]",Xe="[object Object]",Ke="[object Promise]",bt="[object Proxy]",Rt="[object RegExp]",ct="[object Set]",gt="[object String]",It="[object Symbol]",fr="[object Undefined]",er="[object WeakMap]",hr="[object WeakSet]",qt="[object ArrayBuffer]",wt="[object DataView]",sr="[object Float32Array]",ke="[object Float64Array]",H="[object Int8Array]",ve="[object Int16Array]",Te="[object Int32Array]",Fe="[object Uint8Array]",oe="[object Uint8ClampedArray]",Ie="[object Uint16Array]",W="[object Uint32Array]",Ue=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Re=/&(?:amp|lt|gt|quot|#39);/g,Oe=/[&<>"']/g,q=RegExp(Re.source),ce=RegExp(Oe.source),Ce=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,Qe=/<%=([\s\S]+?)%>/g,st=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kt=/^\w*$/,Rn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ir=/[\\^$.*+?()[\]{}|]/g,St=RegExp(ir.source),xr=/^\s+/,en=/\s/,Gn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,el=/\{\n\/\* \[wrapped with (.+)\] \*/,tl=/,? & /,tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pi=/[()=,{}\[\]\/\s]/,Pn=/\\(\\)?/g,ba=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hi=/\w*$/,Fc=/^[-+]0x[0-9a-f]+$/i,Cx=/^0b[01]+$/i,Tx=/^\[object .+?Constructor\]$/,Ax=/^0o[0-7]+$/i,Ix=/^(?:0|[1-9]\d*)$/,Rx=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nc=/($^)/,K0=/['\n\r\u2028\u2029\\]/g,Do="\\ud800-\\udfff",Z0="\\u0300-\\u036f",rl="\\ufe20-\\ufe2f",Px="\\u20d0-\\u20ff",pu=Z0+rl+Px,Lc="\\u2700-\\u27bf",J0="a-z\\xdf-\\xf6\\xf8-\\xff",Ox="\\xac\\xb1\\xd7\\xf7",Yh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kx="\\u2000-\\u206f",Fx=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",J="A-Z\\xc0-\\xd6\\xd8-\\xde",he="\\ufe0e\\ufe0f",ie=Ox+Yh+kx+Fx,me="[']",we="["+Do+"]",ge="["+ie+"]",De="["+pu+"]",ze="\\d+",Ze="["+Lc+"]",Je="["+J0+"]",tt="[^"+Do+ie+ze+Lc+J0+J+"]",_t="\\ud83c[\\udffb-\\udfff]",tr="(?:"+De+"|"+_t+")",br="[^"+Do+"]",wr="(?:\\ud83c[\\udde6-\\uddff]){2}",rn="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="["+J+"]",Xi="\\u200d",nl="(?:"+Je+"|"+tt+")",qh="(?:"+Mr+"|"+tt+")",Q0="(?:"+me+"(?:d|ll|m|re|s|t|ve))?",Bc="(?:"+me+"(?:D|LL|M|RE|S|T|VE))?",Nx=tr+"?",ev="["+he+"]?",Lx="(?:"+Xi+"(?:"+[br,wr,rn].join("|")+")"+ev+Nx+")*",tv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dX="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_O=ev+Nx+Lx,pX="(?:"+[Ze,wr,rn].join("|")+")"+_O,vX="(?:"+[br+De+"?",De,wr,rn,we].join("|")+")",gX=RegExp(me,"g"),mX=RegExp(De,"g"),Bx=RegExp(_t+"(?="+_t+")|"+vX+_O,"g"),_X=RegExp([Mr+"?"+Je+"+"+Q0+"(?="+[ge,Mr,"$"].join("|")+")",qh+"+"+Bc+"(?="+[ge,Mr+nl,"$"].join("|")+")",Mr+"?"+nl+"+"+Q0,Mr+"+"+Bc,dX,tv,ze,pX].join("|"),"g"),yX=RegExp("["+Xi+Do+pu+he+"]"),xX=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bX=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wX=-1,qr={};qr[sr]=qr[ke]=qr[H]=qr[ve]=qr[Te]=qr[Fe]=qr[oe]=qr[Ie]=qr[W]=!0,qr[ne]=qr[ae]=qr[qt]=qr[se]=qr[wt]=qr[_e]=qr[Pe]=qr[Ee]=qr[Ge]=qr[We]=qr[Xe]=qr[Rt]=qr[ct]=qr[gt]=qr[er]=!1;var Xr={};Xr[ne]=Xr[ae]=Xr[qt]=Xr[wt]=Xr[se]=Xr[_e]=Xr[sr]=Xr[ke]=Xr[H]=Xr[ve]=Xr[Te]=Xr[Ge]=Xr[We]=Xr[Xe]=Xr[Rt]=Xr[ct]=Xr[gt]=Xr[It]=Xr[Fe]=Xr[oe]=Xr[Ie]=Xr[W]=!0,Xr[Pe]=Xr[Ee]=Xr[er]=!1;var EX={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},SX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},CX={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},TX={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},AX=parseFloat,IX=parseInt,yO=typeof Ct=="object"&&Ct&&Ct.Object===Object&&Ct,RX=typeof self=="object"&&self&&self.Object===Object&&self,bi=yO||RX||Function("return this")(),Mx=t&&!t.nodeType&&t,vu=Mx&&!0&&e&&!e.nodeType&&e,xO=vu&&vu.exports===Mx,Dx=xO&&yO.process,Ua=function(){try{var ye=vu&&vu.require&&vu.require("util").types;return ye||Dx&&Dx.binding&&Dx.binding("util")}catch{}}(),bO=Ua&&Ua.isArrayBuffer,wO=Ua&&Ua.isDate,EO=Ua&&Ua.isMap,SO=Ua&&Ua.isRegExp,CO=Ua&&Ua.isSet,TO=Ua&&Ua.isTypedArray;function wa(ye,Me,Ne){switch(Ne.length){case 0:return ye.call(Me);case 1:return ye.call(Me,Ne[0]);case 2:return ye.call(Me,Ne[0],Ne[1]);case 3:return ye.call(Me,Ne[0],Ne[1],Ne[2])}return ye.apply(Me,Ne)}function PX(ye,Me,Ne,pt){for(var Vt=-1,Tr=ye==null?0:ye.length;++Vt<Tr;){var Jn=ye[Vt];Me(pt,Jn,Ne(Jn),ye)}return pt}function ja(ye,Me){for(var Ne=-1,pt=ye==null?0:ye.length;++Ne<pt&&Me(ye[Ne],Ne,ye)!==!1;);return ye}function OX(ye,Me){for(var Ne=ye==null?0:ye.length;Ne--&&Me(ye[Ne],Ne,ye)!==!1;);return ye}function AO(ye,Me){for(var Ne=-1,pt=ye==null?0:ye.length;++Ne<pt;)if(!Me(ye[Ne],Ne,ye))return!1;return!0}function il(ye,Me){for(var Ne=-1,pt=ye==null?0:ye.length,Vt=0,Tr=[];++Ne<pt;){var Jn=ye[Ne];Me(Jn,Ne,ye)&&(Tr[Vt++]=Jn)}return Tr}function rv(ye,Me){var Ne=ye==null?0:ye.length;return!!Ne&&Mc(ye,Me,0)>-1}function Ux(ye,Me,Ne){for(var pt=-1,Vt=ye==null?0:ye.length;++pt<Vt;)if(Ne(Me,ye[pt]))return!0;return!1}function nn(ye,Me){for(var Ne=-1,pt=ye==null?0:ye.length,Vt=Array(pt);++Ne<pt;)Vt[Ne]=Me(ye[Ne],Ne,ye);return Vt}function al(ye,Me){for(var Ne=-1,pt=Me.length,Vt=ye.length;++Ne<pt;)ye[Vt+Ne]=Me[Ne];return ye}function jx(ye,Me,Ne,pt){var Vt=-1,Tr=ye==null?0:ye.length;for(pt&&Tr&&(Ne=ye[++Vt]);++Vt<Tr;)Ne=Me(Ne,ye[Vt],Vt,ye);return Ne}function kX(ye,Me,Ne,pt){var Vt=ye==null?0:ye.length;for(pt&&Vt&&(Ne=ye[--Vt]);Vt--;)Ne=Me(Ne,ye[Vt],Vt,ye);return Ne}function $x(ye,Me){for(var Ne=-1,pt=ye==null?0:ye.length;++Ne<pt;)if(Me(ye[Ne],Ne,ye))return!0;return!1}var FX=Gx("length");function NX(ye){return ye.split("")}function LX(ye){return ye.match(tn)||[]}function IO(ye,Me,Ne){var pt;return Ne(ye,function(Vt,Tr,Jn){if(Me(Vt,Tr,Jn))return pt=Tr,!1}),pt}function nv(ye,Me,Ne,pt){for(var Vt=ye.length,Tr=Ne+(pt?1:-1);pt?Tr--:++Tr<Vt;)if(Me(ye[Tr],Tr,ye))return Tr;return-1}function Mc(ye,Me,Ne){return Me===Me?WX(ye,Me,Ne):nv(ye,RO,Ne)}function BX(ye,Me,Ne,pt){for(var Vt=Ne-1,Tr=ye.length;++Vt<Tr;)if(pt(ye[Vt],Me))return Vt;return-1}function RO(ye){return ye!==ye}function PO(ye,Me){var Ne=ye==null?0:ye.length;return Ne?Hx(ye,Me)/Ne:Y}function Gx(ye){return function(Me){return Me==null?r:Me[ye]}}function Vx(ye){return function(Me){return ye==null?r:ye[Me]}}function OO(ye,Me,Ne,pt,Vt){return Vt(ye,function(Tr,Jn,$r){Ne=pt?(pt=!1,Tr):Me(Ne,Tr,Jn,$r)}),Ne}function MX(ye,Me){var Ne=ye.length;for(ye.sort(Me);Ne--;)ye[Ne]=ye[Ne].value;return ye}function Hx(ye,Me){for(var Ne,pt=-1,Vt=ye.length;++pt<Vt;){var Tr=Me(ye[pt]);Tr!==r&&(Ne=Ne===r?Tr:Ne+Tr)}return Ne}function Xx(ye,Me){for(var Ne=-1,pt=Array(ye);++Ne<ye;)pt[Ne]=Me(Ne);return pt}function DX(ye,Me){return nn(Me,function(Ne){return[Ne,ye[Ne]]})}function kO(ye){return ye&&ye.slice(0,BO(ye)+1).replace(xr,"")}function Ea(ye){return function(Me){return ye(Me)}}function zx(ye,Me){return nn(Me,function(Ne){return ye[Ne]})}function Kh(ye,Me){return ye.has(Me)}function FO(ye,Me){for(var Ne=-1,pt=ye.length;++Ne<pt&&Mc(Me,ye[Ne],0)>-1;);return Ne}function NO(ye,Me){for(var Ne=ye.length;Ne--&&Mc(Me,ye[Ne],0)>-1;);return Ne}function UX(ye,Me){for(var Ne=ye.length,pt=0;Ne--;)ye[Ne]===Me&&++pt;return pt}var jX=Vx(EX),$X=Vx(SX);function GX(ye){return"\\"+TX[ye]}function VX(ye,Me){return ye==null?r:ye[Me]}function Dc(ye){return yX.test(ye)}function HX(ye){return xX.test(ye)}function XX(ye){for(var Me,Ne=[];!(Me=ye.next()).done;)Ne.push(Me.value);return Ne}function Wx(ye){var Me=-1,Ne=Array(ye.size);return ye.forEach(function(pt,Vt){Ne[++Me]=[Vt,pt]}),Ne}function LO(ye,Me){return function(Ne){return ye(Me(Ne))}}function ol(ye,Me){for(var Ne=-1,pt=ye.length,Vt=0,Tr=[];++Ne<pt;){var Jn=ye[Ne];(Jn===Me||Jn===u)&&(ye[Ne]=u,Tr[Vt++]=Ne)}return Tr}function iv(ye){var Me=-1,Ne=Array(ye.size);return ye.forEach(function(pt){Ne[++Me]=pt}),Ne}function zX(ye){var Me=-1,Ne=Array(ye.size);return ye.forEach(function(pt){Ne[++Me]=[pt,pt]}),Ne}function WX(ye,Me,Ne){for(var pt=Ne-1,Vt=ye.length;++pt<Vt;)if(ye[pt]===Me)return pt;return-1}function YX(ye,Me,Ne){for(var pt=Ne+1;pt--;)if(ye[pt]===Me)return pt;return pt}function Uc(ye){return Dc(ye)?KX(ye):FX(ye)}function oo(ye){return Dc(ye)?ZX(ye):NX(ye)}function BO(ye){for(var Me=ye.length;Me--&&en.test(ye.charAt(Me)););return Me}var qX=Vx(CX);function KX(ye){for(var Me=Bx.lastIndex=0;Bx.test(ye);)++Me;return Me}function ZX(ye){return ye.match(Bx)||[]}function JX(ye){return ye.match(_X)||[]}var QX=function ye(Me){Me=Me==null?bi:jc.defaults(bi.Object(),Me,jc.pick(bi,bX));var Ne=Me.Array,pt=Me.Date,Vt=Me.Error,Tr=Me.Function,Jn=Me.Math,$r=Me.Object,Yx=Me.RegExp,ez=Me.String,$a=Me.TypeError,av=Ne.prototype,tz=Tr.prototype,$c=$r.prototype,ov=Me["__core-js_shared__"],sv=tz.toString,Nr=$c.hasOwnProperty,rz=0,MO=function(){var x=/[^.]+$/.exec(ov&&ov.keys&&ov.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),lv=$c.toString,nz=sv.call($r),iz=bi._,az=Yx("^"+sv.call(Nr).replace(ir,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uv=xO?Me.Buffer:r,sl=Me.Symbol,cv=Me.Uint8Array,DO=uv?uv.allocUnsafe:r,fv=LO($r.getPrototypeOf,$r),UO=$r.create,jO=$c.propertyIsEnumerable,hv=av.splice,$O=sl?sl.isConcatSpreadable:r,Zh=sl?sl.iterator:r,gu=sl?sl.toStringTag:r,dv=function(){try{var x=bu($r,"defineProperty");return x({},"",{}),x}catch{}}(),oz=Me.clearTimeout!==bi.clearTimeout&&Me.clearTimeout,sz=pt&&pt.now!==bi.Date.now&&pt.now,lz=Me.setTimeout!==bi.setTimeout&&Me.setTimeout,pv=Jn.ceil,vv=Jn.floor,qx=$r.getOwnPropertySymbols,uz=uv?uv.isBuffer:r,GO=Me.isFinite,cz=av.join,fz=LO($r.keys,$r),Qn=Jn.max,Oi=Jn.min,hz=pt.now,dz=Me.parseInt,VO=Jn.random,pz=av.reverse,Kx=bu(Me,"DataView"),Jh=bu(Me,"Map"),Zx=bu(Me,"Promise"),Gc=bu(Me,"Set"),Qh=bu(Me,"WeakMap"),ed=bu($r,"create"),gv=Qh&&new Qh,Vc={},vz=wu(Kx),gz=wu(Jh),mz=wu(Zx),_z=wu(Gc),yz=wu(Qh),mv=sl?sl.prototype:r,td=mv?mv.valueOf:r,HO=mv?mv.toString:r;function K(x){if(wn(x)&&!Ht(x)&&!(x instanceof pr)){if(x instanceof Ga)return x;if(Nr.call(x,"__wrapped__"))return Xk(x)}return new Ga(x)}var Hc=function(){function x(){}return function(S){if(!dn(S))return{};if(UO)return UO(S);x.prototype=S;var R=new x;return x.prototype=r,R}}();function _v(){}function Ga(x,S){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=r}K.templateSettings={escape:Ce,evaluate:ft,interpolate:Qe,variable:"",imports:{_:K}},K.prototype=_v.prototype,K.prototype.constructor=K,Ga.prototype=Hc(_v.prototype),Ga.prototype.constructor=Ga;function pr(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function xz(){var x=new pr(this.__wrapped__);return x.__actions__=sa(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=sa(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=sa(this.__views__),x}function bz(){if(this.__filtered__){var x=new pr(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function wz(){var x=this.__wrapped__.value(),S=this.__dir__,R=Ht(x),B=S<0,X=R?x.length:0,ee=NW(0,X,this.__views__),ue=ee.start,de=ee.end,be=de-ue,je=B?de:ue-1,$e=this.__iteratees__,He=$e.length,lt=0,xt=Oi(be,this.__takeCount__);if(!R||!B&&X==be&&xt==be)return pk(x,this.__actions__);var Ft=[];e:for(;be--&&lt<xt;){je+=S;for(var rr=-1,Nt=x[je];++rr<He;){var dr=$e[rr],mr=dr.iteratee,Ta=dr.type,Yi=mr(Nt);if(Ta==M)Nt=Yi;else if(!Yi){if(Ta==F)continue e;break e}}Ft[lt++]=Nt}return Ft}pr.prototype=Hc(_v.prototype),pr.prototype.constructor=pr;function mu(x){var S=-1,R=x==null?0:x.length;for(this.clear();++S<R;){var B=x[S];this.set(B[0],B[1])}}function Ez(){this.__data__=ed?ed(null):{},this.size=0}function Sz(x){var S=this.has(x)&&delete this.__data__[x];return this.size-=S?1:0,S}function Cz(x){var S=this.__data__;if(ed){var R=S[x];return R===c?r:R}return Nr.call(S,x)?S[x]:r}function Tz(x){var S=this.__data__;return ed?S[x]!==r:Nr.call(S,x)}function Az(x,S){var R=this.__data__;return this.size+=this.has(x)?0:1,R[x]=ed&&S===r?c:S,this}mu.prototype.clear=Ez,mu.prototype.delete=Sz,mu.prototype.get=Cz,mu.prototype.has=Tz,mu.prototype.set=Az;function _s(x){var S=-1,R=x==null?0:x.length;for(this.clear();++S<R;){var B=x[S];this.set(B[0],B[1])}}function Iz(){this.__data__=[],this.size=0}function Rz(x){var S=this.__data__,R=yv(S,x);if(R<0)return!1;var B=S.length-1;return R==B?S.pop():hv.call(S,R,1),--this.size,!0}function Pz(x){var S=this.__data__,R=yv(S,x);return R<0?r:S[R][1]}function Oz(x){return yv(this.__data__,x)>-1}function kz(x,S){var R=this.__data__,B=yv(R,x);return B<0?(++this.size,R.push([x,S])):R[B][1]=S,this}_s.prototype.clear=Iz,_s.prototype.delete=Rz,_s.prototype.get=Pz,_s.prototype.has=Oz,_s.prototype.set=kz;function ys(x){var S=-1,R=x==null?0:x.length;for(this.clear();++S<R;){var B=x[S];this.set(B[0],B[1])}}function Fz(){this.size=0,this.__data__={hash:new mu,map:new(Jh||_s),string:new mu}}function Nz(x){var S=Ov(this,x).delete(x);return this.size-=S?1:0,S}function Lz(x){return Ov(this,x).get(x)}function Bz(x){return Ov(this,x).has(x)}function Mz(x,S){var R=Ov(this,x),B=R.size;return R.set(x,S),this.size+=R.size==B?0:1,this}ys.prototype.clear=Fz,ys.prototype.delete=Nz,ys.prototype.get=Lz,ys.prototype.has=Bz,ys.prototype.set=Mz;function _u(x){var S=-1,R=x==null?0:x.length;for(this.__data__=new ys;++S<R;)this.add(x[S])}function Dz(x){return this.__data__.set(x,c),this}function Uz(x){return this.__data__.has(x)}_u.prototype.add=_u.prototype.push=Dz,_u.prototype.has=Uz;function so(x){var S=this.__data__=new _s(x);this.size=S.size}function jz(){this.__data__=new _s,this.size=0}function $z(x){var S=this.__data__,R=S.delete(x);return this.size=S.size,R}function Gz(x){return this.__data__.get(x)}function Vz(x){return this.__data__.has(x)}function Hz(x,S){var R=this.__data__;if(R instanceof _s){var B=R.__data__;if(!Jh||B.length<i-1)return B.push([x,S]),this.size=++R.size,this;R=this.__data__=new ys(B)}return R.set(x,S),this.size=R.size,this}so.prototype.clear=jz,so.prototype.delete=$z,so.prototype.get=Gz,so.prototype.has=Vz,so.prototype.set=Hz;function XO(x,S){var R=Ht(x),B=!R&&Eu(x),X=!R&&!B&&hl(x),ee=!R&&!B&&!X&&Yc(x),ue=R||B||X||ee,de=ue?Xx(x.length,ez):[],be=de.length;for(var je in x)(S||Nr.call(x,je))&&!(ue&&(je=="length"||X&&(je=="offset"||je=="parent")||ee&&(je=="buffer"||je=="byteLength"||je=="byteOffset")||Es(je,be)))&&de.push(je);return de}function zO(x){var S=x.length;return S?x[l1(0,S-1)]:r}function Xz(x,S){return kv(sa(x),yu(S,0,x.length))}function zz(x){return kv(sa(x))}function Jx(x,S,R){(R!==r&&!lo(x[S],R)||R===r&&!(S in x))&&xs(x,S,R)}function rd(x,S,R){var B=x[S];(!(Nr.call(x,S)&&lo(B,R))||R===r&&!(S in x))&&xs(x,S,R)}function yv(x,S){for(var R=x.length;R--;)if(lo(x[R][0],S))return R;return-1}function Wz(x,S,R,B){return ll(x,function(X,ee,ue){S(B,X,R(X),ue)}),B}function WO(x,S){return x&&jo(S,si(S),x)}function Yz(x,S){return x&&jo(S,ua(S),x)}function xs(x,S,R){S=="__proto__"&&dv?dv(x,S,{configurable:!0,enumerable:!0,value:R,writable:!0}):x[S]=R}function Qx(x,S){for(var R=-1,B=S.length,X=Ne(B),ee=x==null;++R<B;)X[R]=ee?r:F1(x,S[R]);return X}function yu(x,S,R){return x===x&&(R!==r&&(x=x<=R?x:R),S!==r&&(x=x>=S?x:S)),x}function Va(x,S,R,B,X,ee){var ue,de=S&f,be=S&h,je=S&p;if(R&&(ue=X?R(x,B,X,ee):R(x)),ue!==r)return ue;if(!dn(x))return x;var $e=Ht(x);if($e){if(ue=BW(x),!de)return sa(x,ue)}else{var He=ki(x),lt=He==Ee||He==Se;if(hl(x))return mk(x,de);if(He==Xe||He==ne||lt&&!X){if(ue=be||lt?{}:Bk(x),!de)return be?CW(x,Yz(ue,x)):SW(x,WO(ue,x))}else{if(!Xr[He])return X?x:{};ue=MW(x,He,de)}}ee||(ee=new so);var xt=ee.get(x);if(xt)return xt;ee.set(x,ue),f3(x)?x.forEach(function(Nt){ue.add(Va(Nt,S,R,Nt,x,ee))}):u3(x)&&x.forEach(function(Nt,dr){ue.set(dr,Va(Nt,S,R,dr,x,ee))});var Ft=je?be?y1:_1:be?ua:si,rr=$e?r:Ft(x);return ja(rr||x,function(Nt,dr){rr&&(dr=Nt,Nt=x[dr]),rd(ue,dr,Va(Nt,S,R,dr,x,ee))}),ue}function qz(x){var S=si(x);return function(R){return YO(R,x,S)}}function YO(x,S,R){var B=R.length;if(x==null)return!B;for(x=$r(x);B--;){var X=R[B],ee=S[X],ue=x[X];if(ue===r&&!(X in x)||!ee(ue))return!1}return!0}function qO(x,S,R){if(typeof x!="function")throw new $a(o);return ud(function(){x.apply(r,R)},S)}function nd(x,S,R,B){var X=-1,ee=rv,ue=!0,de=x.length,be=[],je=S.length;if(!de)return be;R&&(S=nn(S,Ea(R))),B?(ee=Ux,ue=!1):S.length>=i&&(ee=Kh,ue=!1,S=new _u(S));e:for(;++X<de;){var $e=x[X],He=R==null?$e:R($e);if($e=B||$e!==0?$e:0,ue&&He===He){for(var lt=je;lt--;)if(S[lt]===He)continue e;be.push($e)}else ee(S,He,B)||be.push($e)}return be}var ll=wk(Uo),KO=wk(t1,!0);function Kz(x,S){var R=!0;return ll(x,function(B,X,ee){return R=!!S(B,X,ee),R}),R}function xv(x,S,R){for(var B=-1,X=x.length;++B<X;){var ee=x[B],ue=S(ee);if(ue!=null&&(de===r?ue===ue&&!Ca(ue):R(ue,de)))var de=ue,be=ee}return be}function Zz(x,S,R,B){var X=x.length;for(R=Kt(R),R<0&&(R=-R>X?0:X+R),B=B===r||B>X?X:Kt(B),B<0&&(B+=X),B=R>B?0:d3(B);R<B;)x[R++]=S;return x}function ZO(x,S){var R=[];return ll(x,function(B,X,ee){S(B,X,ee)&&R.push(B)}),R}function wi(x,S,R,B,X){var ee=-1,ue=x.length;for(R||(R=UW),X||(X=[]);++ee<ue;){var de=x[ee];S>0&&R(de)?S>1?wi(de,S-1,R,B,X):al(X,de):B||(X[X.length]=de)}return X}var e1=Ek(),JO=Ek(!0);function Uo(x,S){return x&&e1(x,S,si)}function t1(x,S){return x&&JO(x,S,si)}function bv(x,S){return il(S,function(R){return Ss(x[R])})}function xu(x,S){S=cl(S,x);for(var R=0,B=S.length;x!=null&&R<B;)x=x[$o(S[R++])];return R&&R==B?x:r}function QO(x,S,R){var B=S(x);return Ht(x)?B:al(B,R(x))}function zi(x){return x==null?x===r?fr:Ve:gu&&gu in $r(x)?FW(x):zW(x)}function r1(x,S){return x>S}function Jz(x,S){return x!=null&&Nr.call(x,S)}function Qz(x,S){return x!=null&&S in $r(x)}function eW(x,S,R){return x>=Oi(S,R)&&x<Qn(S,R)}function n1(x,S,R){for(var B=R?Ux:rv,X=x[0].length,ee=x.length,ue=ee,de=Ne(ee),be=1/0,je=[];ue--;){var $e=x[ue];ue&&S&&($e=nn($e,Ea(S))),be=Oi($e.length,be),de[ue]=!R&&(S||X>=120&&$e.length>=120)?new _u(ue&&$e):r}$e=x[0];var He=-1,lt=de[0];e:for(;++He<X&&je.length<be;){var xt=$e[He],Ft=S?S(xt):xt;if(xt=R||xt!==0?xt:0,!(lt?Kh(lt,Ft):B(je,Ft,R))){for(ue=ee;--ue;){var rr=de[ue];if(!(rr?Kh(rr,Ft):B(x[ue],Ft,R)))continue e}lt&&lt.push(Ft),je.push(xt)}}return je}function tW(x,S,R,B){return Uo(x,function(X,ee,ue){S(B,R(X),ee,ue)}),B}function id(x,S,R){S=cl(S,x),x=jk(x,S);var B=x==null?x:x[$o(Xa(S))];return B==null?r:wa(B,x,R)}function ek(x){return wn(x)&&zi(x)==ne}function rW(x){return wn(x)&&zi(x)==qt}function nW(x){return wn(x)&&zi(x)==_e}function ad(x,S,R,B,X){return x===S?!0:x==null||S==null||!wn(x)&&!wn(S)?x!==x&&S!==S:iW(x,S,R,B,ad,X)}function iW(x,S,R,B,X,ee){var ue=Ht(x),de=Ht(S),be=ue?ae:ki(x),je=de?ae:ki(S);be=be==ne?Xe:be,je=je==ne?Xe:je;var $e=be==Xe,He=je==Xe,lt=be==je;if(lt&&hl(x)){if(!hl(S))return!1;ue=!0,$e=!1}if(lt&&!$e)return ee||(ee=new so),ue||Yc(x)?Fk(x,S,R,B,X,ee):OW(x,S,be,R,B,X,ee);if(!(R&d)){var xt=$e&&Nr.call(x,"__wrapped__"),Ft=He&&Nr.call(S,"__wrapped__");if(xt||Ft){var rr=xt?x.value():x,Nt=Ft?S.value():S;return ee||(ee=new so),X(rr,Nt,R,B,ee)}}return lt?(ee||(ee=new so),kW(x,S,R,B,X,ee)):!1}function aW(x){return wn(x)&&ki(x)==Ge}function i1(x,S,R,B){var X=R.length,ee=X,ue=!B;if(x==null)return!ee;for(x=$r(x);X--;){var de=R[X];if(ue&&de[2]?de[1]!==x[de[0]]:!(de[0]in x))return!1}for(;++X<ee;){de=R[X];var be=de[0],je=x[be],$e=de[1];if(ue&&de[2]){if(je===r&&!(be in x))return!1}else{var He=new so;if(B)var lt=B(je,$e,be,x,S,He);if(!(lt===r?ad($e,je,d|g,B,He):lt))return!1}}return!0}function tk(x){if(!dn(x)||$W(x))return!1;var S=Ss(x)?az:Tx;return S.test(wu(x))}function oW(x){return wn(x)&&zi(x)==Rt}function sW(x){return wn(x)&&ki(x)==ct}function lW(x){return wn(x)&&Dv(x.length)&&!!qr[zi(x)]}function rk(x){return typeof x=="function"?x:x==null?ca:typeof x=="object"?Ht(x)?ak(x[0],x[1]):ik(x):S3(x)}function a1(x){if(!ld(x))return fz(x);var S=[];for(var R in $r(x))Nr.call(x,R)&&R!="constructor"&&S.push(R);return S}function uW(x){if(!dn(x))return XW(x);var S=ld(x),R=[];for(var B in x)B=="constructor"&&(S||!Nr.call(x,B))||R.push(B);return R}function o1(x,S){return x<S}function nk(x,S){var R=-1,B=la(x)?Ne(x.length):[];return ll(x,function(X,ee,ue){B[++R]=S(X,ee,ue)}),B}function ik(x){var S=b1(x);return S.length==1&&S[0][2]?Dk(S[0][0],S[0][1]):function(R){return R===x||i1(R,x,S)}}function ak(x,S){return E1(x)&&Mk(S)?Dk($o(x),S):function(R){var B=F1(R,x);return B===r&&B===S?N1(R,x):ad(S,B,d|g)}}function wv(x,S,R,B,X){x!==S&&e1(S,function(ee,ue){if(X||(X=new so),dn(ee))cW(x,S,ue,R,wv,B,X);else{var de=B?B(C1(x,ue),ee,ue+"",x,S,X):r;de===r&&(de=ee),Jx(x,ue,de)}},ua)}function cW(x,S,R,B,X,ee,ue){var de=C1(x,R),be=C1(S,R),je=ue.get(be);if(je){Jx(x,R,je);return}var $e=ee?ee(de,be,R+"",x,S,ue):r,He=$e===r;if(He){var lt=Ht(be),xt=!lt&&hl(be),Ft=!lt&&!xt&&Yc(be);$e=be,lt||xt||Ft?Ht(de)?$e=de:On(de)?$e=sa(de):xt?(He=!1,$e=mk(be,!0)):Ft?(He=!1,$e=_k(be,!0)):$e=[]:cd(be)||Eu(be)?($e=de,Eu(de)?$e=p3(de):(!dn(de)||Ss(de))&&($e=Bk(be))):He=!1}He&&(ue.set(be,$e),X($e,be,B,ee,ue),ue.delete(be)),Jx(x,R,$e)}function ok(x,S){var R=x.length;if(R)return S+=S<0?R:0,Es(S,R)?x[S]:r}function sk(x,S,R){S.length?S=nn(S,function(ee){return Ht(ee)?function(ue){return xu(ue,ee.length===1?ee[0]:ee)}:ee}):S=[ca];var B=-1;S=nn(S,Ea(Pt()));var X=nk(x,function(ee,ue,de){var be=nn(S,function(je){return je(ee)});return{criteria:be,index:++B,value:ee}});return MX(X,function(ee,ue){return EW(ee,ue,R)})}function fW(x,S){return lk(x,S,function(R,B){return N1(x,B)})}function lk(x,S,R){for(var B=-1,X=S.length,ee={};++B<X;){var ue=S[B],de=xu(x,ue);R(de,ue)&&od(ee,cl(ue,x),de)}return ee}function hW(x){return function(S){return xu(S,x)}}function s1(x,S,R,B){var X=B?BX:Mc,ee=-1,ue=S.length,de=x;for(x===S&&(S=sa(S)),R&&(de=nn(x,Ea(R)));++ee<ue;)for(var be=0,je=S[ee],$e=R?R(je):je;(be=X(de,$e,be,B))>-1;)de!==x&&hv.call(de,be,1),hv.call(x,be,1);return x}function uk(x,S){for(var R=x?S.length:0,B=R-1;R--;){var X=S[R];if(R==B||X!==ee){var ee=X;Es(X)?hv.call(x,X,1):f1(x,X)}}return x}function l1(x,S){return x+vv(VO()*(S-x+1))}function dW(x,S,R,B){for(var X=-1,ee=Qn(pv((S-x)/(R||1)),0),ue=Ne(ee);ee--;)ue[B?ee:++X]=x,x+=R;return ue}function u1(x,S){var R="";if(!x||S<1||S>Q)return R;do S%2&&(R+=x),S=vv(S/2),S&&(x+=x);while(S);return R}function ar(x,S){return T1(Uk(x,S,ca),x+"")}function pW(x){return zO(qc(x))}function vW(x,S){var R=qc(x);return kv(R,yu(S,0,R.length))}function od(x,S,R,B){if(!dn(x))return x;S=cl(S,x);for(var X=-1,ee=S.length,ue=ee-1,de=x;de!=null&&++X<ee;){var be=$o(S[X]),je=R;if(be==="__proto__"||be==="constructor"||be==="prototype")return x;if(X!=ue){var $e=de[be];je=B?B($e,be,de):r,je===r&&(je=dn($e)?$e:Es(S[X+1])?[]:{})}rd(de,be,je),de=de[be]}return x}var ck=gv?function(x,S){return gv.set(x,S),x}:ca,gW=dv?function(x,S){return dv(x,"toString",{configurable:!0,enumerable:!1,value:B1(S),writable:!0})}:ca;function mW(x){return kv(qc(x))}function Ha(x,S,R){var B=-1,X=x.length;S<0&&(S=-S>X?0:X+S),R=R>X?X:R,R<0&&(R+=X),X=S>R?0:R-S>>>0,S>>>=0;for(var ee=Ne(X);++B<X;)ee[B]=x[B+S];return ee}function _W(x,S){var R;return ll(x,function(B,X,ee){return R=S(B,X,ee),!R}),!!R}function Ev(x,S,R){var B=0,X=x==null?B:x.length;if(typeof S=="number"&&S===S&&X<=j){for(;B<X;){var ee=B+X>>>1,ue=x[ee];ue!==null&&!Ca(ue)&&(R?ue<=S:ue<S)?B=ee+1:X=ee}return X}return c1(x,S,ca,R)}function c1(x,S,R,B){var X=0,ee=x==null?0:x.length;if(ee===0)return 0;S=R(S);for(var ue=S!==S,de=S===null,be=Ca(S),je=S===r;X<ee;){var $e=vv((X+ee)/2),He=R(x[$e]),lt=He!==r,xt=He===null,Ft=He===He,rr=Ca(He);if(ue)var Nt=B||Ft;else je?Nt=Ft&&(B||lt):de?Nt=Ft&&lt&&(B||!xt):be?Nt=Ft&&lt&&!xt&&(B||!rr):xt||rr?Nt=!1:Nt=B?He<=S:He<S;Nt?X=$e+1:ee=$e}return Oi(ee,z)}function fk(x,S){for(var R=-1,B=x.length,X=0,ee=[];++R<B;){var ue=x[R],de=S?S(ue):ue;if(!R||!lo(de,be)){var be=de;ee[X++]=ue===0?0:ue}}return ee}function hk(x){return typeof x=="number"?x:Ca(x)?Y:+x}function Sa(x){if(typeof x=="string")return x;if(Ht(x))return nn(x,Sa)+"";if(Ca(x))return HO?HO.call(x):"";var S=x+"";return S=="0"&&1/x==-G?"-0":S}function ul(x,S,R){var B=-1,X=rv,ee=x.length,ue=!0,de=[],be=de;if(R)ue=!1,X=Ux;else if(ee>=i){var je=S?null:RW(x);if(je)return iv(je);ue=!1,X=Kh,be=new _u}else be=S?[]:de;e:for(;++B<ee;){var $e=x[B],He=S?S($e):$e;if($e=R||$e!==0?$e:0,ue&&He===He){for(var lt=be.length;lt--;)if(be[lt]===He)continue e;S&&be.push(He),de.push($e)}else X(be,He,R)||(be!==de&&be.push(He),de.push($e))}return de}function f1(x,S){return S=cl(S,x),x=jk(x,S),x==null||delete x[$o(Xa(S))]}function dk(x,S,R,B){return od(x,S,R(xu(x,S)),B)}function Sv(x,S,R,B){for(var X=x.length,ee=B?X:-1;(B?ee--:++ee<X)&&S(x[ee],ee,x););return R?Ha(x,B?0:ee,B?ee+1:X):Ha(x,B?ee+1:0,B?X:ee)}function pk(x,S){var R=x;return R instanceof pr&&(R=R.value()),jx(S,function(B,X){return X.func.apply(X.thisArg,al([B],X.args))},R)}function h1(x,S,R){var B=x.length;if(B<2)return B?ul(x[0]):[];for(var X=-1,ee=Ne(B);++X<B;)for(var ue=x[X],de=-1;++de<B;)de!=X&&(ee[X]=nd(ee[X]||ue,x[de],S,R));return ul(wi(ee,1),S,R)}function vk(x,S,R){for(var B=-1,X=x.length,ee=S.length,ue={};++B<X;){var de=B<ee?S[B]:r;R(ue,x[B],de)}return ue}function d1(x){return On(x)?x:[]}function p1(x){return typeof x=="function"?x:ca}function cl(x,S){return Ht(x)?x:E1(x,S)?[x]:Hk(Pr(x))}var yW=ar;function fl(x,S,R){var B=x.length;return R=R===r?B:R,!S&&R>=B?x:Ha(x,S,R)}var gk=oz||function(x){return bi.clearTimeout(x)};function mk(x,S){if(S)return x.slice();var R=x.length,B=DO?DO(R):new x.constructor(R);return x.copy(B),B}function v1(x){var S=new x.constructor(x.byteLength);return new cv(S).set(new cv(x)),S}function xW(x,S){var R=S?v1(x.buffer):x.buffer;return new x.constructor(R,x.byteOffset,x.byteLength)}function bW(x){var S=new x.constructor(x.source,Hi.exec(x));return S.lastIndex=x.lastIndex,S}function wW(x){return td?$r(td.call(x)):{}}function _k(x,S){var R=S?v1(x.buffer):x.buffer;return new x.constructor(R,x.byteOffset,x.length)}function yk(x,S){if(x!==S){var R=x!==r,B=x===null,X=x===x,ee=Ca(x),ue=S!==r,de=S===null,be=S===S,je=Ca(S);if(!de&&!je&&!ee&&x>S||ee&&ue&&be&&!de&&!je||B&&ue&&be||!R&&be||!X)return 1;if(!B&&!ee&&!je&&x<S||je&&R&&X&&!B&&!ee||de&&R&&X||!ue&&X||!be)return-1}return 0}function EW(x,S,R){for(var B=-1,X=x.criteria,ee=S.criteria,ue=X.length,de=R.length;++B<ue;){var be=yk(X[B],ee[B]);if(be){if(B>=de)return be;var je=R[B];return be*(je=="desc"?-1:1)}}return x.index-S.index}function xk(x,S,R,B){for(var X=-1,ee=x.length,ue=R.length,de=-1,be=S.length,je=Qn(ee-ue,0),$e=Ne(be+je),He=!B;++de<be;)$e[de]=S[de];for(;++X<ue;)(He||X<ee)&&($e[R[X]]=x[X]);for(;je--;)$e[de++]=x[X++];return $e}function bk(x,S,R,B){for(var X=-1,ee=x.length,ue=-1,de=R.length,be=-1,je=S.length,$e=Qn(ee-de,0),He=Ne($e+je),lt=!B;++X<$e;)He[X]=x[X];for(var xt=X;++be<je;)He[xt+be]=S[be];for(;++ue<de;)(lt||X<ee)&&(He[xt+R[ue]]=x[X++]);return He}function sa(x,S){var R=-1,B=x.length;for(S||(S=Ne(B));++R<B;)S[R]=x[R];return S}function jo(x,S,R,B){var X=!R;R||(R={});for(var ee=-1,ue=S.length;++ee<ue;){var de=S[ee],be=B?B(R[de],x[de],de,R,x):r;be===r&&(be=x[de]),X?xs(R,de,be):rd(R,de,be)}return R}function SW(x,S){return jo(x,w1(x),S)}function CW(x,S){return jo(x,Nk(x),S)}function Cv(x,S){return function(R,B){var X=Ht(R)?PX:Wz,ee=S?S():{};return X(R,x,Pt(B,2),ee)}}function Xc(x){return ar(function(S,R){var B=-1,X=R.length,ee=X>1?R[X-1]:r,ue=X>2?R[2]:r;for(ee=x.length>3&&typeof ee=="function"?(X--,ee):r,ue&&Wi(R[0],R[1],ue)&&(ee=X<3?r:ee,X=1),S=$r(S);++B<X;){var de=R[B];de&&x(S,de,B,ee)}return S})}function wk(x,S){return function(R,B){if(R==null)return R;if(!la(R))return x(R,B);for(var X=R.length,ee=S?X:-1,ue=$r(R);(S?ee--:++ee<X)&&B(ue[ee],ee,ue)!==!1;);return R}}function Ek(x){return function(S,R,B){for(var X=-1,ee=$r(S),ue=B(S),de=ue.length;de--;){var be=ue[x?de:++X];if(R(ee[be],be,ee)===!1)break}return S}}function TW(x,S,R){var B=S&_,X=sd(x);function ee(){var ue=this&&this!==bi&&this instanceof ee?X:x;return ue.apply(B?R:this,arguments)}return ee}function Sk(x){return function(S){S=Pr(S);var R=Dc(S)?oo(S):r,B=R?R[0]:S.charAt(0),X=R?fl(R,1).join(""):S.slice(1);return B[x]()+X}}function zc(x){return function(S){return jx(w3(b3(S).replace(gX,"")),x,"")}}function sd(x){return function(){var S=arguments;switch(S.length){case 0:return new x;case 1:return new x(S[0]);case 2:return new x(S[0],S[1]);case 3:return new x(S[0],S[1],S[2]);case 4:return new x(S[0],S[1],S[2],S[3]);case 5:return new x(S[0],S[1],S[2],S[3],S[4]);case 6:return new x(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new x(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var R=Hc(x.prototype),B=x.apply(R,S);return dn(B)?B:R}}function AW(x,S,R){var B=sd(x);function X(){for(var ee=arguments.length,ue=Ne(ee),de=ee,be=Wc(X);de--;)ue[de]=arguments[de];var je=ee<3&&ue[0]!==be&&ue[ee-1]!==be?[]:ol(ue,be);if(ee-=je.length,ee<R)return Rk(x,S,Tv,X.placeholder,r,ue,je,r,r,R-ee);var $e=this&&this!==bi&&this instanceof X?B:x;return wa($e,this,ue)}return X}function Ck(x){return function(S,R,B){var X=$r(S);if(!la(S)){var ee=Pt(R,3);S=si(S),R=function(de){return ee(X[de],de,X)}}var ue=x(S,R,B);return ue>-1?X[ee?S[ue]:ue]:r}}function Tk(x){return ws(function(S){var R=S.length,B=R,X=Ga.prototype.thru;for(x&&S.reverse();B--;){var ee=S[B];if(typeof ee!="function")throw new $a(o);if(X&&!ue&&Pv(ee)=="wrapper")var ue=new Ga([],!0)}for(B=ue?B:R;++B<R;){ee=S[B];var de=Pv(ee),be=de=="wrapper"?x1(ee):r;be&&S1(be[0])&&be[1]==(C|y|w|T)&&!be[4].length&&be[9]==1?ue=ue[Pv(be[0])].apply(ue,be[3]):ue=ee.length==1&&S1(ee)?ue[de]():ue.thru(ee)}return function(){var je=arguments,$e=je[0];if(ue&&je.length==1&&Ht($e))return ue.plant($e).value();for(var He=0,lt=R?S[He].apply(this,je):$e;++He<R;)lt=S[He].call(this,lt);return lt}})}function Tv(x,S,R,B,X,ee,ue,de,be,je){var $e=S&C,He=S&_,lt=S&v,xt=S&(y|b),Ft=S&A,rr=lt?r:sd(x);function Nt(){for(var dr=arguments.length,mr=Ne(dr),Ta=dr;Ta--;)mr[Ta]=arguments[Ta];if(xt)var Yi=Wc(Nt),Aa=UX(mr,Yi);if(B&&(mr=xk(mr,B,X,xt)),ee&&(mr=bk(mr,ee,ue,xt)),dr-=Aa,xt&&dr<je){var kn=ol(mr,Yi);return Rk(x,S,Tv,Nt.placeholder,R,mr,kn,de,be,je-dr)}var uo=He?R:this,Ts=lt?uo[x]:x;return dr=mr.length,de?mr=WW(mr,de):Ft&&dr>1&&mr.reverse(),$e&&be<dr&&(mr.length=be),this&&this!==bi&&this instanceof Nt&&(Ts=rr||sd(Ts)),Ts.apply(uo,mr)}return Nt}function Ak(x,S){return function(R,B){return tW(R,x,S(B),{})}}function Av(x,S){return function(R,B){var X;if(R===r&&B===r)return S;if(R!==r&&(X=R),B!==r){if(X===r)return B;typeof R=="string"||typeof B=="string"?(R=Sa(R),B=Sa(B)):(R=hk(R),B=hk(B)),X=x(R,B)}return X}}function g1(x){return ws(function(S){return S=nn(S,Ea(Pt())),ar(function(R){var B=this;return x(S,function(X){return wa(X,B,R)})})})}function Iv(x,S){S=S===r?" ":Sa(S);var R=S.length;if(R<2)return R?u1(S,x):S;var B=u1(S,pv(x/Uc(S)));return Dc(S)?fl(oo(B),0,x).join(""):B.slice(0,x)}function IW(x,S,R,B){var X=S&_,ee=sd(x);function ue(){for(var de=-1,be=arguments.length,je=-1,$e=B.length,He=Ne($e+be),lt=this&&this!==bi&&this instanceof ue?ee:x;++je<$e;)He[je]=B[je];for(;be--;)He[je++]=arguments[++de];return wa(lt,X?R:this,He)}return ue}function Ik(x){return function(S,R,B){return B&&typeof B!="number"&&Wi(S,R,B)&&(R=B=r),S=Cs(S),R===r?(R=S,S=0):R=Cs(R),B=B===r?S<R?1:-1:Cs(B),dW(S,R,B,x)}}function Rv(x){return function(S,R){return typeof S=="string"&&typeof R=="string"||(S=za(S),R=za(R)),x(S,R)}}function Rk(x,S,R,B,X,ee,ue,de,be,je){var $e=S&y,He=$e?ue:r,lt=$e?r:ue,xt=$e?ee:r,Ft=$e?r:ee;S|=$e?w:E,S&=~($e?E:w),S&m||(S&=~(_|v));var rr=[x,S,X,xt,He,Ft,lt,de,be,je],Nt=R.apply(r,rr);return S1(x)&&$k(Nt,rr),Nt.placeholder=B,Gk(Nt,x,S)}function m1(x){var S=Jn[x];return function(R,B){if(R=za(R),B=B==null?0:Oi(Kt(B),292),B&&GO(R)){var X=(Pr(R)+"e").split("e"),ee=S(X[0]+"e"+(+X[1]+B));return X=(Pr(ee)+"e").split("e"),+(X[0]+"e"+(+X[1]-B))}return S(R)}}var RW=Gc&&1/iv(new Gc([,-0]))[1]==G?function(x){return new Gc(x)}:U1;function Pk(x){return function(S){var R=ki(S);return R==Ge?Wx(S):R==ct?zX(S):DX(S,x(S))}}function bs(x,S,R,B,X,ee,ue,de){var be=S&v;if(!be&&typeof x!="function")throw new $a(o);var je=B?B.length:0;if(je||(S&=~(w|E),B=X=r),ue=ue===r?ue:Qn(Kt(ue),0),de=de===r?de:Kt(de),je-=X?X.length:0,S&E){var $e=B,He=X;B=X=r}var lt=be?r:x1(x),xt=[x,S,R,B,X,$e,He,ee,ue,de];if(lt&&HW(xt,lt),x=xt[0],S=xt[1],R=xt[2],B=xt[3],X=xt[4],de=xt[9]=xt[9]===r?be?0:x.length:Qn(xt[9]-je,0),!de&&S&(y|b)&&(S&=~(y|b)),!S||S==_)var Ft=TW(x,S,R);else S==y||S==b?Ft=AW(x,S,de):(S==w||S==(_|w))&&!X.length?Ft=IW(x,S,R,B):Ft=Tv.apply(r,xt);var rr=lt?ck:$k;return Gk(rr(Ft,xt),x,S)}function Ok(x,S,R,B){return x===r||lo(x,$c[R])&&!Nr.call(B,R)?S:x}function kk(x,S,R,B,X,ee){return dn(x)&&dn(S)&&(ee.set(S,x),wv(x,S,r,kk,ee),ee.delete(S)),x}function PW(x){return cd(x)?r:x}function Fk(x,S,R,B,X,ee){var ue=R&d,de=x.length,be=S.length;if(de!=be&&!(ue&&be>de))return!1;var je=ee.get(x),$e=ee.get(S);if(je&&$e)return je==S&&$e==x;var He=-1,lt=!0,xt=R&g?new _u:r;for(ee.set(x,S),ee.set(S,x);++He<de;){var Ft=x[He],rr=S[He];if(B)var Nt=ue?B(rr,Ft,He,S,x,ee):B(Ft,rr,He,x,S,ee);if(Nt!==r){if(Nt)continue;lt=!1;break}if(xt){if(!$x(S,function(dr,mr){if(!Kh(xt,mr)&&(Ft===dr||X(Ft,dr,R,B,ee)))return xt.push(mr)})){lt=!1;break}}else if(!(Ft===rr||X(Ft,rr,R,B,ee))){lt=!1;break}}return ee.delete(x),ee.delete(S),lt}function OW(x,S,R,B,X,ee,ue){switch(R){case wt:if(x.byteLength!=S.byteLength||x.byteOffset!=S.byteOffset)return!1;x=x.buffer,S=S.buffer;case qt:return!(x.byteLength!=S.byteLength||!ee(new cv(x),new cv(S)));case se:case _e:case We:return lo(+x,+S);case Pe:return x.name==S.name&&x.message==S.message;case Rt:case gt:return x==S+"";case Ge:var de=Wx;case ct:var be=B&d;if(de||(de=iv),x.size!=S.size&&!be)return!1;var je=ue.get(x);if(je)return je==S;B|=g,ue.set(x,S);var $e=Fk(de(x),de(S),B,X,ee,ue);return ue.delete(x),$e;case It:if(td)return td.call(x)==td.call(S)}return!1}function kW(x,S,R,B,X,ee){var ue=R&d,de=_1(x),be=de.length,je=_1(S),$e=je.length;if(be!=$e&&!ue)return!1;for(var He=be;He--;){var lt=de[He];if(!(ue?lt in S:Nr.call(S,lt)))return!1}var xt=ee.get(x),Ft=ee.get(S);if(xt&&Ft)return xt==S&&Ft==x;var rr=!0;ee.set(x,S),ee.set(S,x);for(var Nt=ue;++He<be;){lt=de[He];var dr=x[lt],mr=S[lt];if(B)var Ta=ue?B(mr,dr,lt,S,x,ee):B(dr,mr,lt,x,S,ee);if(!(Ta===r?dr===mr||X(dr,mr,R,B,ee):Ta)){rr=!1;break}Nt||(Nt=lt=="constructor")}if(rr&&!Nt){var Yi=x.constructor,Aa=S.constructor;Yi!=Aa&&"constructor"in x&&"constructor"in S&&!(typeof Yi=="function"&&Yi instanceof Yi&&typeof Aa=="function"&&Aa instanceof Aa)&&(rr=!1)}return ee.delete(x),ee.delete(S),rr}function ws(x){return T1(Uk(x,r,Yk),x+"")}function _1(x){return QO(x,si,w1)}function y1(x){return QO(x,ua,Nk)}var x1=gv?function(x){return gv.get(x)}:U1;function Pv(x){for(var S=x.name+"",R=Vc[S],B=Nr.call(Vc,S)?R.length:0;B--;){var X=R[B],ee=X.func;if(ee==null||ee==x)return X.name}return S}function Wc(x){var S=Nr.call(K,"placeholder")?K:x;return S.placeholder}function Pt(){var x=K.iteratee||M1;return x=x===M1?rk:x,arguments.length?x(arguments[0],arguments[1]):x}function Ov(x,S){var R=x.__data__;return jW(S)?R[typeof S=="string"?"string":"hash"]:R.map}function b1(x){for(var S=si(x),R=S.length;R--;){var B=S[R],X=x[B];S[R]=[B,X,Mk(X)]}return S}function bu(x,S){var R=VX(x,S);return tk(R)?R:r}function FW(x){var S=Nr.call(x,gu),R=x[gu];try{x[gu]=r;var B=!0}catch{}var X=lv.call(x);return B&&(S?x[gu]=R:delete x[gu]),X}var w1=qx?function(x){return x==null?[]:(x=$r(x),il(qx(x),function(S){return jO.call(x,S)}))}:j1,Nk=qx?function(x){for(var S=[];x;)al(S,w1(x)),x=fv(x);return S}:j1,ki=zi;(Kx&&ki(new Kx(new ArrayBuffer(1)))!=wt||Jh&&ki(new Jh)!=Ge||Zx&&ki(Zx.resolve())!=Ke||Gc&&ki(new Gc)!=ct||Qh&&ki(new Qh)!=er)&&(ki=function(x){var S=zi(x),R=S==Xe?x.constructor:r,B=R?wu(R):"";if(B)switch(B){case vz:return wt;case gz:return Ge;case mz:return Ke;case _z:return ct;case yz:return er}return S});function NW(x,S,R){for(var B=-1,X=R.length;++B<X;){var ee=R[B],ue=ee.size;switch(ee.type){case"drop":x+=ue;break;case"dropRight":S-=ue;break;case"take":S=Oi(S,x+ue);break;case"takeRight":x=Qn(x,S-ue);break}}return{start:x,end:S}}function LW(x){var S=x.match(el);return S?S[1].split(tl):[]}function Lk(x,S,R){S=cl(S,x);for(var B=-1,X=S.length,ee=!1;++B<X;){var ue=$o(S[B]);if(!(ee=x!=null&&R(x,ue)))break;x=x[ue]}return ee||++B!=X?ee:(X=x==null?0:x.length,!!X&&Dv(X)&&Es(ue,X)&&(Ht(x)||Eu(x)))}function BW(x){var S=x.length,R=new x.constructor(S);return S&&typeof x[0]=="string"&&Nr.call(x,"index")&&(R.index=x.index,R.input=x.input),R}function Bk(x){return typeof x.constructor=="function"&&!ld(x)?Hc(fv(x)):{}}function MW(x,S,R){var B=x.constructor;switch(S){case qt:return v1(x);case se:case _e:return new B(+x);case wt:return xW(x,R);case sr:case ke:case H:case ve:case Te:case Fe:case oe:case Ie:case W:return _k(x,R);case Ge:return new B;case We:case gt:return new B(x);case Rt:return bW(x);case ct:return new B;case It:return wW(x)}}function DW(x,S){var R=S.length;if(!R)return x;var B=R-1;return S[B]=(R>1?"& ":"")+S[B],S=S.join(R>2?", ":" "),x.replace(Gn,`{
/* [wrapped with `+S+`] */
`)}function UW(x){return Ht(x)||Eu(x)||!!($O&&x&&x[$O])}function Es(x,S){var R=typeof x;return S=S??Q,!!S&&(R=="number"||R!="symbol"&&Ix.test(x))&&x>-1&&x%1==0&&x<S}function Wi(x,S,R){if(!dn(R))return!1;var B=typeof S;return(B=="number"?la(R)&&Es(S,R.length):B=="string"&&S in R)?lo(R[S],x):!1}function E1(x,S){if(Ht(x))return!1;var R=typeof x;return R=="number"||R=="symbol"||R=="boolean"||x==null||Ca(x)?!0:kt.test(x)||!st.test(x)||S!=null&&x in $r(S)}function jW(x){var S=typeof x;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?x!=="__proto__":x===null}function S1(x){var S=Pv(x),R=K[S];if(typeof R!="function"||!(S in pr.prototype))return!1;if(x===R)return!0;var B=x1(R);return!!B&&x===B[0]}function $W(x){return!!MO&&MO in x}var GW=ov?Ss:$1;function ld(x){var S=x&&x.constructor,R=typeof S=="function"&&S.prototype||$c;return x===R}function Mk(x){return x===x&&!dn(x)}function Dk(x,S){return function(R){return R==null?!1:R[x]===S&&(S!==r||x in $r(R))}}function VW(x){var S=Bv(x,function(B){return R.size===l&&R.clear(),B}),R=S.cache;return S}function HW(x,S){var R=x[1],B=S[1],X=R|B,ee=X<(_|v|C),ue=B==C&&R==y||B==C&&R==T&&x[7].length<=S[8]||B==(C|T)&&S[7].length<=S[8]&&R==y;if(!(ee||ue))return x;B&_&&(x[2]=S[2],X|=R&_?0:m);var de=S[3];if(de){var be=x[3];x[3]=be?xk(be,de,S[4]):de,x[4]=be?ol(x[3],u):S[4]}return de=S[5],de&&(be=x[5],x[5]=be?bk(be,de,S[6]):de,x[6]=be?ol(x[5],u):S[6]),de=S[7],de&&(x[7]=de),B&C&&(x[8]=x[8]==null?S[8]:Oi(x[8],S[8])),x[9]==null&&(x[9]=S[9]),x[0]=S[0],x[1]=X,x}function XW(x){var S=[];if(x!=null)for(var R in $r(x))S.push(R);return S}function zW(x){return lv.call(x)}function Uk(x,S,R){return S=Qn(S===r?x.length-1:S,0),function(){for(var B=arguments,X=-1,ee=Qn(B.length-S,0),ue=Ne(ee);++X<ee;)ue[X]=B[S+X];X=-1;for(var de=Ne(S+1);++X<S;)de[X]=B[X];return de[S]=R(ue),wa(x,this,de)}}function jk(x,S){return S.length<2?x:xu(x,Ha(S,0,-1))}function WW(x,S){for(var R=x.length,B=Oi(S.length,R),X=sa(x);B--;){var ee=S[B];x[B]=Es(ee,R)?X[ee]:r}return x}function C1(x,S){if(!(S==="constructor"&&typeof x[S]=="function")&&S!="__proto__")return x[S]}var $k=Vk(ck),ud=lz||function(x,S){return bi.setTimeout(x,S)},T1=Vk(gW);function Gk(x,S,R){var B=S+"";return T1(x,DW(B,YW(LW(B),R)))}function Vk(x){var S=0,R=0;return function(){var B=hz(),X=k-(B-R);if(R=B,X>0){if(++S>=P)return arguments[0]}else S=0;return x.apply(r,arguments)}}function kv(x,S){var R=-1,B=x.length,X=B-1;for(S=S===r?B:S;++R<S;){var ee=l1(R,X),ue=x[ee];x[ee]=x[R],x[R]=ue}return x.length=S,x}var Hk=VW(function(x){var S=[];return x.charCodeAt(0)===46&&S.push(""),x.replace(Rn,function(R,B,X,ee){S.push(X?ee.replace(Pn,"$1"):B||R)}),S});function $o(x){if(typeof x=="string"||Ca(x))return x;var S=x+"";return S=="0"&&1/x==-G?"-0":S}function wu(x){if(x!=null){try{return sv.call(x)}catch{}try{return x+""}catch{}}return""}function YW(x,S){return ja(V,function(R){var B="_."+R[0];S&R[1]&&!rv(x,B)&&x.push(B)}),x.sort()}function Xk(x){if(x instanceof pr)return x.clone();var S=new Ga(x.__wrapped__,x.__chain__);return S.__actions__=sa(x.__actions__),S.__index__=x.__index__,S.__values__=x.__values__,S}function qW(x,S,R){(R?Wi(x,S,R):S===r)?S=1:S=Qn(Kt(S),0);var B=x==null?0:x.length;if(!B||S<1)return[];for(var X=0,ee=0,ue=Ne(pv(B/S));X<B;)ue[ee++]=Ha(x,X,X+=S);return ue}function KW(x){for(var S=-1,R=x==null?0:x.length,B=0,X=[];++S<R;){var ee=x[S];ee&&(X[B++]=ee)}return X}function ZW(){var x=arguments.length;if(!x)return[];for(var S=Ne(x-1),R=arguments[0],B=x;B--;)S[B-1]=arguments[B];return al(Ht(R)?sa(R):[R],wi(S,1))}var JW=ar(function(x,S){return On(x)?nd(x,wi(S,1,On,!0)):[]}),QW=ar(function(x,S){var R=Xa(S);return On(R)&&(R=r),On(x)?nd(x,wi(S,1,On,!0),Pt(R,2)):[]}),eY=ar(function(x,S){var R=Xa(S);return On(R)&&(R=r),On(x)?nd(x,wi(S,1,On,!0),r,R):[]});function tY(x,S,R){var B=x==null?0:x.length;return B?(S=R||S===r?1:Kt(S),Ha(x,S<0?0:S,B)):[]}function rY(x,S,R){var B=x==null?0:x.length;return B?(S=R||S===r?1:Kt(S),S=B-S,Ha(x,0,S<0?0:S)):[]}function nY(x,S){return x&&x.length?Sv(x,Pt(S,3),!0,!0):[]}function iY(x,S){return x&&x.length?Sv(x,Pt(S,3),!0):[]}function aY(x,S,R,B){var X=x==null?0:x.length;return X?(R&&typeof R!="number"&&Wi(x,S,R)&&(R=0,B=X),Zz(x,S,R,B)):[]}function zk(x,S,R){var B=x==null?0:x.length;if(!B)return-1;var X=R==null?0:Kt(R);return X<0&&(X=Qn(B+X,0)),nv(x,Pt(S,3),X)}function Wk(x,S,R){var B=x==null?0:x.length;if(!B)return-1;var X=B-1;return R!==r&&(X=Kt(R),X=R<0?Qn(B+X,0):Oi(X,B-1)),nv(x,Pt(S,3),X,!0)}function Yk(x){var S=x==null?0:x.length;return S?wi(x,1):[]}function oY(x){var S=x==null?0:x.length;return S?wi(x,G):[]}function sY(x,S){var R=x==null?0:x.length;return R?(S=S===r?1:Kt(S),wi(x,S)):[]}function lY(x){for(var S=-1,R=x==null?0:x.length,B={};++S<R;){var X=x[S];B[X[0]]=X[1]}return B}function qk(x){return x&&x.length?x[0]:r}function uY(x,S,R){var B=x==null?0:x.length;if(!B)return-1;var X=R==null?0:Kt(R);return X<0&&(X=Qn(B+X,0)),Mc(x,S,X)}function cY(x){var S=x==null?0:x.length;return S?Ha(x,0,-1):[]}var fY=ar(function(x){var S=nn(x,d1);return S.length&&S[0]===x[0]?n1(S):[]}),hY=ar(function(x){var S=Xa(x),R=nn(x,d1);return S===Xa(R)?S=r:R.pop(),R.length&&R[0]===x[0]?n1(R,Pt(S,2)):[]}),dY=ar(function(x){var S=Xa(x),R=nn(x,d1);return S=typeof S=="function"?S:r,S&&R.pop(),R.length&&R[0]===x[0]?n1(R,r,S):[]});function pY(x,S){return x==null?"":cz.call(x,S)}function Xa(x){var S=x==null?0:x.length;return S?x[S-1]:r}function vY(x,S,R){var B=x==null?0:x.length;if(!B)return-1;var X=B;return R!==r&&(X=Kt(R),X=X<0?Qn(B+X,0):Oi(X,B-1)),S===S?YX(x,S,X):nv(x,RO,X,!0)}function gY(x,S){return x&&x.length?ok(x,Kt(S)):r}var mY=ar(Kk);function Kk(x,S){return x&&x.length&&S&&S.length?s1(x,S):x}function _Y(x,S,R){return x&&x.length&&S&&S.length?s1(x,S,Pt(R,2)):x}function yY(x,S,R){return x&&x.length&&S&&S.length?s1(x,S,r,R):x}var xY=ws(function(x,S){var R=x==null?0:x.length,B=Qx(x,S);return uk(x,nn(S,function(X){return Es(X,R)?+X:X}).sort(yk)),B});function bY(x,S){var R=[];if(!(x&&x.length))return R;var B=-1,X=[],ee=x.length;for(S=Pt(S,3);++B<ee;){var ue=x[B];S(ue,B,x)&&(R.push(ue),X.push(B))}return uk(x,X),R}function A1(x){return x==null?x:pz.call(x)}function wY(x,S,R){var B=x==null?0:x.length;return B?(R&&typeof R!="number"&&Wi(x,S,R)?(S=0,R=B):(S=S==null?0:Kt(S),R=R===r?B:Kt(R)),Ha(x,S,R)):[]}function EY(x,S){return Ev(x,S)}function SY(x,S,R){return c1(x,S,Pt(R,2))}function CY(x,S){var R=x==null?0:x.length;if(R){var B=Ev(x,S);if(B<R&&lo(x[B],S))return B}return-1}function TY(x,S){return Ev(x,S,!0)}function AY(x,S,R){return c1(x,S,Pt(R,2),!0)}function IY(x,S){var R=x==null?0:x.length;if(R){var B=Ev(x,S,!0)-1;if(lo(x[B],S))return B}return-1}function RY(x){return x&&x.length?fk(x):[]}function PY(x,S){return x&&x.length?fk(x,Pt(S,2)):[]}function OY(x){var S=x==null?0:x.length;return S?Ha(x,1,S):[]}function kY(x,S,R){return x&&x.length?(S=R||S===r?1:Kt(S),Ha(x,0,S<0?0:S)):[]}function FY(x,S,R){var B=x==null?0:x.length;return B?(S=R||S===r?1:Kt(S),S=B-S,Ha(x,S<0?0:S,B)):[]}function NY(x,S){return x&&x.length?Sv(x,Pt(S,3),!1,!0):[]}function LY(x,S){return x&&x.length?Sv(x,Pt(S,3)):[]}var BY=ar(function(x){return ul(wi(x,1,On,!0))}),MY=ar(function(x){var S=Xa(x);return On(S)&&(S=r),ul(wi(x,1,On,!0),Pt(S,2))}),DY=ar(function(x){var S=Xa(x);return S=typeof S=="function"?S:r,ul(wi(x,1,On,!0),r,S)});function UY(x){return x&&x.length?ul(x):[]}function jY(x,S){return x&&x.length?ul(x,Pt(S,2)):[]}function $Y(x,S){return S=typeof S=="function"?S:r,x&&x.length?ul(x,r,S):[]}function I1(x){if(!(x&&x.length))return[];var S=0;return x=il(x,function(R){if(On(R))return S=Qn(R.length,S),!0}),Xx(S,function(R){return nn(x,Gx(R))})}function Zk(x,S){if(!(x&&x.length))return[];var R=I1(x);return S==null?R:nn(R,function(B){return wa(S,r,B)})}var GY=ar(function(x,S){return On(x)?nd(x,S):[]}),VY=ar(function(x){return h1(il(x,On))}),HY=ar(function(x){var S=Xa(x);return On(S)&&(S=r),h1(il(x,On),Pt(S,2))}),XY=ar(function(x){var S=Xa(x);return S=typeof S=="function"?S:r,h1(il(x,On),r,S)}),zY=ar(I1);function WY(x,S){return vk(x||[],S||[],rd)}function YY(x,S){return vk(x||[],S||[],od)}var qY=ar(function(x){var S=x.length,R=S>1?x[S-1]:r;return R=typeof R=="function"?(x.pop(),R):r,Zk(x,R)});function Jk(x){var S=K(x);return S.__chain__=!0,S}function KY(x,S){return S(x),x}function Fv(x,S){return S(x)}var ZY=ws(function(x){var S=x.length,R=S?x[0]:0,B=this.__wrapped__,X=function(ee){return Qx(ee,x)};return S>1||this.__actions__.length||!(B instanceof pr)||!Es(R)?this.thru(X):(B=B.slice(R,+R+(S?1:0)),B.__actions__.push({func:Fv,args:[X],thisArg:r}),new Ga(B,this.__chain__).thru(function(ee){return S&&!ee.length&&ee.push(r),ee}))});function JY(){return Jk(this)}function QY(){return new Ga(this.value(),this.__chain__)}function eq(){this.__values__===r&&(this.__values__=h3(this.value()));var x=this.__index__>=this.__values__.length,S=x?r:this.__values__[this.__index__++];return{done:x,value:S}}function tq(){return this}function rq(x){for(var S,R=this;R instanceof _v;){var B=Xk(R);B.__index__=0,B.__values__=r,S?X.__wrapped__=B:S=B;var X=B;R=R.__wrapped__}return X.__wrapped__=x,S}function nq(){var x=this.__wrapped__;if(x instanceof pr){var S=x;return this.__actions__.length&&(S=new pr(this)),S=S.reverse(),S.__actions__.push({func:Fv,args:[A1],thisArg:r}),new Ga(S,this.__chain__)}return this.thru(A1)}function iq(){return pk(this.__wrapped__,this.__actions__)}var aq=Cv(function(x,S,R){Nr.call(x,R)?++x[R]:xs(x,R,1)});function oq(x,S,R){var B=Ht(x)?AO:Kz;return R&&Wi(x,S,R)&&(S=r),B(x,Pt(S,3))}function sq(x,S){var R=Ht(x)?il:ZO;return R(x,Pt(S,3))}var lq=Ck(zk),uq=Ck(Wk);function cq(x,S){return wi(Nv(x,S),1)}function fq(x,S){return wi(Nv(x,S),G)}function hq(x,S,R){return R=R===r?1:Kt(R),wi(Nv(x,S),R)}function Qk(x,S){var R=Ht(x)?ja:ll;return R(x,Pt(S,3))}function e3(x,S){var R=Ht(x)?OX:KO;return R(x,Pt(S,3))}var dq=Cv(function(x,S,R){Nr.call(x,R)?x[R].push(S):xs(x,R,[S])});function pq(x,S,R,B){x=la(x)?x:qc(x),R=R&&!B?Kt(R):0;var X=x.length;return R<0&&(R=Qn(X+R,0)),Uv(x)?R<=X&&x.indexOf(S,R)>-1:!!X&&Mc(x,S,R)>-1}var vq=ar(function(x,S,R){var B=-1,X=typeof S=="function",ee=la(x)?Ne(x.length):[];return ll(x,function(ue){ee[++B]=X?wa(S,ue,R):id(ue,S,R)}),ee}),gq=Cv(function(x,S,R){xs(x,R,S)});function Nv(x,S){var R=Ht(x)?nn:nk;return R(x,Pt(S,3))}function mq(x,S,R,B){return x==null?[]:(Ht(S)||(S=S==null?[]:[S]),R=B?r:R,Ht(R)||(R=R==null?[]:[R]),sk(x,S,R))}var _q=Cv(function(x,S,R){x[R?0:1].push(S)},function(){return[[],[]]});function yq(x,S,R){var B=Ht(x)?jx:OO,X=arguments.length<3;return B(x,Pt(S,4),R,X,ll)}function xq(x,S,R){var B=Ht(x)?kX:OO,X=arguments.length<3;return B(x,Pt(S,4),R,X,KO)}function bq(x,S){var R=Ht(x)?il:ZO;return R(x,Mv(Pt(S,3)))}function wq(x){var S=Ht(x)?zO:pW;return S(x)}function Eq(x,S,R){(R?Wi(x,S,R):S===r)?S=1:S=Kt(S);var B=Ht(x)?Xz:vW;return B(x,S)}function Sq(x){var S=Ht(x)?zz:mW;return S(x)}function Cq(x){if(x==null)return 0;if(la(x))return Uv(x)?Uc(x):x.length;var S=ki(x);return S==Ge||S==ct?x.size:a1(x).length}function Tq(x,S,R){var B=Ht(x)?$x:_W;return R&&Wi(x,S,R)&&(S=r),B(x,Pt(S,3))}var Aq=ar(function(x,S){if(x==null)return[];var R=S.length;return R>1&&Wi(x,S[0],S[1])?S=[]:R>2&&Wi(S[0],S[1],S[2])&&(S=[S[0]]),sk(x,wi(S,1),[])}),Lv=sz||function(){return bi.Date.now()};function Iq(x,S){if(typeof S!="function")throw new $a(o);return x=Kt(x),function(){if(--x<1)return S.apply(this,arguments)}}function t3(x,S,R){return S=R?r:S,S=x&&S==null?x.length:S,bs(x,C,r,r,r,r,S)}function r3(x,S){var R;if(typeof S!="function")throw new $a(o);return x=Kt(x),function(){return--x>0&&(R=S.apply(this,arguments)),x<=1&&(S=r),R}}var R1=ar(function(x,S,R){var B=_;if(R.length){var X=ol(R,Wc(R1));B|=w}return bs(x,B,S,R,X)}),n3=ar(function(x,S,R){var B=_|v;if(R.length){var X=ol(R,Wc(n3));B|=w}return bs(S,B,x,R,X)});function i3(x,S,R){S=R?r:S;var B=bs(x,y,r,r,r,r,r,S);return B.placeholder=i3.placeholder,B}function a3(x,S,R){S=R?r:S;var B=bs(x,b,r,r,r,r,r,S);return B.placeholder=a3.placeholder,B}function o3(x,S,R){var B,X,ee,ue,de,be,je=0,$e=!1,He=!1,lt=!0;if(typeof x!="function")throw new $a(o);S=za(S)||0,dn(R)&&($e=!!R.leading,He="maxWait"in R,ee=He?Qn(za(R.maxWait)||0,S):ee,lt="trailing"in R?!!R.trailing:lt);function xt(kn){var uo=B,Ts=X;return B=X=r,je=kn,ue=x.apply(Ts,uo),ue}function Ft(kn){return je=kn,de=ud(dr,S),$e?xt(kn):ue}function rr(kn){var uo=kn-be,Ts=kn-je,C3=S-uo;return He?Oi(C3,ee-Ts):C3}function Nt(kn){var uo=kn-be,Ts=kn-je;return be===r||uo>=S||uo<0||He&&Ts>=ee}function dr(){var kn=Lv();if(Nt(kn))return mr(kn);de=ud(dr,rr(kn))}function mr(kn){return de=r,lt&&B?xt(kn):(B=X=r,ue)}function Ta(){de!==r&&gk(de),je=0,B=be=X=de=r}function Yi(){return de===r?ue:mr(Lv())}function Aa(){var kn=Lv(),uo=Nt(kn);if(B=arguments,X=this,be=kn,uo){if(de===r)return Ft(be);if(He)return gk(de),de=ud(dr,S),xt(be)}return de===r&&(de=ud(dr,S)),ue}return Aa.cancel=Ta,Aa.flush=Yi,Aa}var Rq=ar(function(x,S){return qO(x,1,S)}),Pq=ar(function(x,S,R){return qO(x,za(S)||0,R)});function Oq(x){return bs(x,A)}function Bv(x,S){if(typeof x!="function"||S!=null&&typeof S!="function")throw new $a(o);var R=function(){var B=arguments,X=S?S.apply(this,B):B[0],ee=R.cache;if(ee.has(X))return ee.get(X);var ue=x.apply(this,B);return R.cache=ee.set(X,ue)||ee,ue};return R.cache=new(Bv.Cache||ys),R}Bv.Cache=ys;function Mv(x){if(typeof x!="function")throw new $a(o);return function(){var S=arguments;switch(S.length){case 0:return!x.call(this);case 1:return!x.call(this,S[0]);case 2:return!x.call(this,S[0],S[1]);case 3:return!x.call(this,S[0],S[1],S[2])}return!x.apply(this,S)}}function kq(x){return r3(2,x)}var Fq=yW(function(x,S){S=S.length==1&&Ht(S[0])?nn(S[0],Ea(Pt())):nn(wi(S,1),Ea(Pt()));var R=S.length;return ar(function(B){for(var X=-1,ee=Oi(B.length,R);++X<ee;)B[X]=S[X].call(this,B[X]);return wa(x,this,B)})}),P1=ar(function(x,S){var R=ol(S,Wc(P1));return bs(x,w,r,S,R)}),s3=ar(function(x,S){var R=ol(S,Wc(s3));return bs(x,E,r,S,R)}),Nq=ws(function(x,S){return bs(x,T,r,r,r,S)});function Lq(x,S){if(typeof x!="function")throw new $a(o);return S=S===r?S:Kt(S),ar(x,S)}function Bq(x,S){if(typeof x!="function")throw new $a(o);return S=S==null?0:Qn(Kt(S),0),ar(function(R){var B=R[S],X=fl(R,0,S);return B&&al(X,B),wa(x,this,X)})}function Mq(x,S,R){var B=!0,X=!0;if(typeof x!="function")throw new $a(o);return dn(R)&&(B="leading"in R?!!R.leading:B,X="trailing"in R?!!R.trailing:X),o3(x,S,{leading:B,maxWait:S,trailing:X})}function Dq(x){return t3(x,1)}function Uq(x,S){return P1(p1(S),x)}function jq(){if(!arguments.length)return[];var x=arguments[0];return Ht(x)?x:[x]}function $q(x){return Va(x,p)}function Gq(x,S){return S=typeof S=="function"?S:r,Va(x,p,S)}function Vq(x){return Va(x,f|p)}function Hq(x,S){return S=typeof S=="function"?S:r,Va(x,f|p,S)}function Xq(x,S){return S==null||YO(x,S,si(S))}function lo(x,S){return x===S||x!==x&&S!==S}var zq=Rv(r1),Wq=Rv(function(x,S){return x>=S}),Eu=ek(function(){return arguments}())?ek:function(x){return wn(x)&&Nr.call(x,"callee")&&!jO.call(x,"callee")},Ht=Ne.isArray,Yq=bO?Ea(bO):rW;function la(x){return x!=null&&Dv(x.length)&&!Ss(x)}function On(x){return wn(x)&&la(x)}function qq(x){return x===!0||x===!1||wn(x)&&zi(x)==se}var hl=uz||$1,Kq=wO?Ea(wO):nW;function Zq(x){return wn(x)&&x.nodeType===1&&!cd(x)}function Jq(x){if(x==null)return!0;if(la(x)&&(Ht(x)||typeof x=="string"||typeof x.splice=="function"||hl(x)||Yc(x)||Eu(x)))return!x.length;var S=ki(x);if(S==Ge||S==ct)return!x.size;if(ld(x))return!a1(x).length;for(var R in x)if(Nr.call(x,R))return!1;return!0}function Qq(x,S){return ad(x,S)}function eK(x,S,R){R=typeof R=="function"?R:r;var B=R?R(x,S):r;return B===r?ad(x,S,r,R):!!B}function O1(x){if(!wn(x))return!1;var S=zi(x);return S==Pe||S==Le||typeof x.message=="string"&&typeof x.name=="string"&&!cd(x)}function tK(x){return typeof x=="number"&&GO(x)}function Ss(x){if(!dn(x))return!1;var S=zi(x);return S==Ee||S==Se||S==pe||S==bt}function l3(x){return typeof x=="number"&&x==Kt(x)}function Dv(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Q}function dn(x){var S=typeof x;return x!=null&&(S=="object"||S=="function")}function wn(x){return x!=null&&typeof x=="object"}var u3=EO?Ea(EO):aW;function rK(x,S){return x===S||i1(x,S,b1(S))}function nK(x,S,R){return R=typeof R=="function"?R:r,i1(x,S,b1(S),R)}function iK(x){return c3(x)&&x!=+x}function aK(x){if(GW(x))throw new Vt(a);return tk(x)}function oK(x){return x===null}function sK(x){return x==null}function c3(x){return typeof x=="number"||wn(x)&&zi(x)==We}function cd(x){if(!wn(x)||zi(x)!=Xe)return!1;var S=fv(x);if(S===null)return!0;var R=Nr.call(S,"constructor")&&S.constructor;return typeof R=="function"&&R instanceof R&&sv.call(R)==nz}var k1=SO?Ea(SO):oW;function lK(x){return l3(x)&&x>=-Q&&x<=Q}var f3=CO?Ea(CO):sW;function Uv(x){return typeof x=="string"||!Ht(x)&&wn(x)&&zi(x)==gt}function Ca(x){return typeof x=="symbol"||wn(x)&&zi(x)==It}var Yc=TO?Ea(TO):lW;function uK(x){return x===r}function cK(x){return wn(x)&&ki(x)==er}function fK(x){return wn(x)&&zi(x)==hr}var hK=Rv(o1),dK=Rv(function(x,S){return x<=S});function h3(x){if(!x)return[];if(la(x))return Uv(x)?oo(x):sa(x);if(Zh&&x[Zh])return XX(x[Zh]());var S=ki(x),R=S==Ge?Wx:S==ct?iv:qc;return R(x)}function Cs(x){if(!x)return x===0?x:0;if(x=za(x),x===G||x===-G){var S=x<0?-1:1;return S*te}return x===x?x:0}function Kt(x){var S=Cs(x),R=S%1;return S===S?R?S-R:S:0}function d3(x){return x?yu(Kt(x),0,U):0}function za(x){if(typeof x=="number")return x;if(Ca(x))return Y;if(dn(x)){var S=typeof x.valueOf=="function"?x.valueOf():x;x=dn(S)?S+"":S}if(typeof x!="string")return x===0?x:+x;x=kO(x);var R=Cx.test(x);return R||Ax.test(x)?IX(x.slice(2),R?2:8):Fc.test(x)?Y:+x}function p3(x){return jo(x,ua(x))}function pK(x){return x?yu(Kt(x),-Q,Q):x===0?x:0}function Pr(x){return x==null?"":Sa(x)}var vK=Xc(function(x,S){if(ld(S)||la(S)){jo(S,si(S),x);return}for(var R in S)Nr.call(S,R)&&rd(x,R,S[R])}),v3=Xc(function(x,S){jo(S,ua(S),x)}),jv=Xc(function(x,S,R,B){jo(S,ua(S),x,B)}),gK=Xc(function(x,S,R,B){jo(S,si(S),x,B)}),mK=ws(Qx);function _K(x,S){var R=Hc(x);return S==null?R:WO(R,S)}var yK=ar(function(x,S){x=$r(x);var R=-1,B=S.length,X=B>2?S[2]:r;for(X&&Wi(S[0],S[1],X)&&(B=1);++R<B;)for(var ee=S[R],ue=ua(ee),de=-1,be=ue.length;++de<be;){var je=ue[de],$e=x[je];($e===r||lo($e,$c[je])&&!Nr.call(x,je))&&(x[je]=ee[je])}return x}),xK=ar(function(x){return x.push(r,kk),wa(g3,r,x)});function bK(x,S){return IO(x,Pt(S,3),Uo)}function wK(x,S){return IO(x,Pt(S,3),t1)}function EK(x,S){return x==null?x:e1(x,Pt(S,3),ua)}function SK(x,S){return x==null?x:JO(x,Pt(S,3),ua)}function CK(x,S){return x&&Uo(x,Pt(S,3))}function TK(x,S){return x&&t1(x,Pt(S,3))}function AK(x){return x==null?[]:bv(x,si(x))}function IK(x){return x==null?[]:bv(x,ua(x))}function F1(x,S,R){var B=x==null?r:xu(x,S);return B===r?R:B}function RK(x,S){return x!=null&&Lk(x,S,Jz)}function N1(x,S){return x!=null&&Lk(x,S,Qz)}var PK=Ak(function(x,S,R){S!=null&&typeof S.toString!="function"&&(S=lv.call(S)),x[S]=R},B1(ca)),OK=Ak(function(x,S,R){S!=null&&typeof S.toString!="function"&&(S=lv.call(S)),Nr.call(x,S)?x[S].push(R):x[S]=[R]},Pt),kK=ar(id);function si(x){return la(x)?XO(x):a1(x)}function ua(x){return la(x)?XO(x,!0):uW(x)}function FK(x,S){var R={};return S=Pt(S,3),Uo(x,function(B,X,ee){xs(R,S(B,X,ee),B)}),R}function NK(x,S){var R={};return S=Pt(S,3),Uo(x,function(B,X,ee){xs(R,X,S(B,X,ee))}),R}var LK=Xc(function(x,S,R){wv(x,S,R)}),g3=Xc(function(x,S,R,B){wv(x,S,R,B)}),BK=ws(function(x,S){var R={};if(x==null)return R;var B=!1;S=nn(S,function(ee){return ee=cl(ee,x),B||(B=ee.length>1),ee}),jo(x,y1(x),R),B&&(R=Va(R,f|h|p,PW));for(var X=S.length;X--;)f1(R,S[X]);return R});function MK(x,S){return m3(x,Mv(Pt(S)))}var DK=ws(function(x,S){return x==null?{}:fW(x,S)});function m3(x,S){if(x==null)return{};var R=nn(y1(x),function(B){return[B]});return S=Pt(S),lk(x,R,function(B,X){return S(B,X[0])})}function UK(x,S,R){S=cl(S,x);var B=-1,X=S.length;for(X||(X=1,x=r);++B<X;){var ee=x==null?r:x[$o(S[B])];ee===r&&(B=X,ee=R),x=Ss(ee)?ee.call(x):ee}return x}function jK(x,S,R){return x==null?x:od(x,S,R)}function $K(x,S,R,B){return B=typeof B=="function"?B:r,x==null?x:od(x,S,R,B)}var _3=Pk(si),y3=Pk(ua);function GK(x,S,R){var B=Ht(x),X=B||hl(x)||Yc(x);if(S=Pt(S,4),R==null){var ee=x&&x.constructor;X?R=B?new ee:[]:dn(x)?R=Ss(ee)?Hc(fv(x)):{}:R={}}return(X?ja:Uo)(x,function(ue,de,be){return S(R,ue,de,be)}),R}function VK(x,S){return x==null?!0:f1(x,S)}function HK(x,S,R){return x==null?x:dk(x,S,p1(R))}function XK(x,S,R,B){return B=typeof B=="function"?B:r,x==null?x:dk(x,S,p1(R),B)}function qc(x){return x==null?[]:zx(x,si(x))}function zK(x){return x==null?[]:zx(x,ua(x))}function WK(x,S,R){return R===r&&(R=S,S=r),R!==r&&(R=za(R),R=R===R?R:0),S!==r&&(S=za(S),S=S===S?S:0),yu(za(x),S,R)}function YK(x,S,R){return S=Cs(S),R===r?(R=S,S=0):R=Cs(R),x=za(x),eW(x,S,R)}function qK(x,S,R){if(R&&typeof R!="boolean"&&Wi(x,S,R)&&(S=R=r),R===r&&(typeof S=="boolean"?(R=S,S=r):typeof x=="boolean"&&(R=x,x=r)),x===r&&S===r?(x=0,S=1):(x=Cs(x),S===r?(S=x,x=0):S=Cs(S)),x>S){var B=x;x=S,S=B}if(R||x%1||S%1){var X=VO();return Oi(x+X*(S-x+AX("1e-"+((X+"").length-1))),S)}return l1(x,S)}var KK=zc(function(x,S,R){return S=S.toLowerCase(),x+(R?x3(S):S)});function x3(x){return L1(Pr(x).toLowerCase())}function b3(x){return x=Pr(x),x&&x.replace(Rx,jX).replace(mX,"")}function ZK(x,S,R){x=Pr(x),S=Sa(S);var B=x.length;R=R===r?B:yu(Kt(R),0,B);var X=R;return R-=S.length,R>=0&&x.slice(R,X)==S}function JK(x){return x=Pr(x),x&&ce.test(x)?x.replace(Oe,$X):x}function QK(x){return x=Pr(x),x&&St.test(x)?x.replace(ir,"\\$&"):x}var eZ=zc(function(x,S,R){return x+(R?"-":"")+S.toLowerCase()}),tZ=zc(function(x,S,R){return x+(R?" ":"")+S.toLowerCase()}),rZ=Sk("toLowerCase");function nZ(x,S,R){x=Pr(x),S=Kt(S);var B=S?Uc(x):0;if(!S||B>=S)return x;var X=(S-B)/2;return Iv(vv(X),R)+x+Iv(pv(X),R)}function iZ(x,S,R){x=Pr(x),S=Kt(S);var B=S?Uc(x):0;return S&&B<S?x+Iv(S-B,R):x}function aZ(x,S,R){x=Pr(x),S=Kt(S);var B=S?Uc(x):0;return S&&B<S?Iv(S-B,R)+x:x}function oZ(x,S,R){return R||S==null?S=0:S&&(S=+S),dz(Pr(x).replace(xr,""),S||0)}function sZ(x,S,R){return(R?Wi(x,S,R):S===r)?S=1:S=Kt(S),u1(Pr(x),S)}function lZ(){var x=arguments,S=Pr(x[0]);return x.length<3?S:S.replace(x[1],x[2])}var uZ=zc(function(x,S,R){return x+(R?"_":"")+S.toLowerCase()});function cZ(x,S,R){return R&&typeof R!="number"&&Wi(x,S,R)&&(S=R=r),R=R===r?U:R>>>0,R?(x=Pr(x),x&&(typeof S=="string"||S!=null&&!k1(S))&&(S=Sa(S),!S&&Dc(x))?fl(oo(x),0,R):x.split(S,R)):[]}var fZ=zc(function(x,S,R){return x+(R?" ":"")+L1(S)});function hZ(x,S,R){return x=Pr(x),R=R==null?0:yu(Kt(R),0,x.length),S=Sa(S),x.slice(R,R+S.length)==S}function dZ(x,S,R){var B=K.templateSettings;R&&Wi(x,S,R)&&(S=r),x=Pr(x),S=jv({},S,B,Ok);var X=jv({},S.imports,B.imports,Ok),ee=si(X),ue=zx(X,ee),de,be,je=0,$e=S.interpolate||Nc,He="__p += '",lt=Yx((S.escape||Nc).source+"|"+$e.source+"|"+($e===Qe?ba:Nc).source+"|"+(S.evaluate||Nc).source+"|$","g"),xt="//# sourceURL="+(Nr.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wX+"]")+`
`;x.replace(lt,function(Nt,dr,mr,Ta,Yi,Aa){return mr||(mr=Ta),He+=x.slice(je,Aa).replace(K0,GX),dr&&(de=!0,He+=`' +
__e(`+dr+`) +
'`),Yi&&(be=!0,He+=`';
`+Yi+`;
__p += '`),mr&&(He+=`' +
((__t = (`+mr+`)) == null ? '' : __t) +
'`),je=Aa+Nt.length,Nt}),He+=`';
`;var Ft=Nr.call(S,"variable")&&S.variable;if(!Ft)He=`with (obj) {
`+He+`
}
`;else if(Pi.test(Ft))throw new Vt(s);He=(be?He.replace(Ue,""):He).replace(dt,"$1").replace(N,"$1;"),He="function("+(Ft||"obj")+`) {
`+(Ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(de?", __e = _.escape":"")+(be?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var rr=E3(function(){return Tr(ee,xt+"return "+He).apply(r,ue)});if(rr.source=He,O1(rr))throw rr;return rr}function pZ(x){return Pr(x).toLowerCase()}function vZ(x){return Pr(x).toUpperCase()}function gZ(x,S,R){if(x=Pr(x),x&&(R||S===r))return kO(x);if(!x||!(S=Sa(S)))return x;var B=oo(x),X=oo(S),ee=FO(B,X),ue=NO(B,X)+1;return fl(B,ee,ue).join("")}function mZ(x,S,R){if(x=Pr(x),x&&(R||S===r))return x.slice(0,BO(x)+1);if(!x||!(S=Sa(S)))return x;var B=oo(x),X=NO(B,oo(S))+1;return fl(B,0,X).join("")}function _Z(x,S,R){if(x=Pr(x),x&&(R||S===r))return x.replace(xr,"");if(!x||!(S=Sa(S)))return x;var B=oo(x),X=FO(B,oo(S));return fl(B,X).join("")}function yZ(x,S){var R=I,B=O;if(dn(S)){var X="separator"in S?S.separator:X;R="length"in S?Kt(S.length):R,B="omission"in S?Sa(S.omission):B}x=Pr(x);var ee=x.length;if(Dc(x)){var ue=oo(x);ee=ue.length}if(R>=ee)return x;var de=R-Uc(B);if(de<1)return B;var be=ue?fl(ue,0,de).join(""):x.slice(0,de);if(X===r)return be+B;if(ue&&(de+=be.length-de),k1(X)){if(x.slice(de).search(X)){var je,$e=be;for(X.global||(X=Yx(X.source,Pr(Hi.exec(X))+"g")),X.lastIndex=0;je=X.exec($e);)var He=je.index;be=be.slice(0,He===r?de:He)}}else if(x.indexOf(Sa(X),de)!=de){var lt=be.lastIndexOf(X);lt>-1&&(be=be.slice(0,lt))}return be+B}function xZ(x){return x=Pr(x),x&&q.test(x)?x.replace(Re,qX):x}var bZ=zc(function(x,S,R){return x+(R?" ":"")+S.toUpperCase()}),L1=Sk("toUpperCase");function w3(x,S,R){return x=Pr(x),S=R?r:S,S===r?HX(x)?JX(x):LX(x):x.match(S)||[]}var E3=ar(function(x,S){try{return wa(x,r,S)}catch(R){return O1(R)?R:new Vt(R)}}),wZ=ws(function(x,S){return ja(S,function(R){R=$o(R),xs(x,R,R1(x[R],x))}),x});function EZ(x){var S=x==null?0:x.length,R=Pt();return x=S?nn(x,function(B){if(typeof B[1]!="function")throw new $a(o);return[R(B[0]),B[1]]}):[],ar(function(B){for(var X=-1;++X<S;){var ee=x[X];if(wa(ee[0],this,B))return wa(ee[1],this,B)}})}function SZ(x){return qz(Va(x,f))}function B1(x){return function(){return x}}function CZ(x,S){return x==null||x!==x?S:x}var TZ=Tk(),AZ=Tk(!0);function ca(x){return x}function M1(x){return rk(typeof x=="function"?x:Va(x,f))}function IZ(x){return ik(Va(x,f))}function RZ(x,S){return ak(x,Va(S,f))}var PZ=ar(function(x,S){return function(R){return id(R,x,S)}}),OZ=ar(function(x,S){return function(R){return id(x,R,S)}});function D1(x,S,R){var B=si(S),X=bv(S,B);R==null&&!(dn(S)&&(X.length||!B.length))&&(R=S,S=x,x=this,X=bv(S,si(S)));var ee=!(dn(R)&&"chain"in R)||!!R.chain,ue=Ss(x);return ja(X,function(de){var be=S[de];x[de]=be,ue&&(x.prototype[de]=function(){var je=this.__chain__;if(ee||je){var $e=x(this.__wrapped__),He=$e.__actions__=sa(this.__actions__);return He.push({func:be,args:arguments,thisArg:x}),$e.__chain__=je,$e}return be.apply(x,al([this.value()],arguments))})}),x}function kZ(){return bi._===this&&(bi._=iz),this}function U1(){}function FZ(x){return x=Kt(x),ar(function(S){return ok(S,x)})}var NZ=g1(nn),LZ=g1(AO),BZ=g1($x);function S3(x){return E1(x)?Gx($o(x)):hW(x)}function MZ(x){return function(S){return x==null?r:xu(x,S)}}var DZ=Ik(),UZ=Ik(!0);function j1(){return[]}function $1(){return!1}function jZ(){return{}}function $Z(){return""}function GZ(){return!0}function VZ(x,S){if(x=Kt(x),x<1||x>Q)return[];var R=U,B=Oi(x,U);S=Pt(S),x-=U;for(var X=Xx(B,S);++R<x;)S(R);return X}function HZ(x){return Ht(x)?nn(x,$o):Ca(x)?[x]:sa(Hk(Pr(x)))}function XZ(x){var S=++rz;return Pr(x)+S}var zZ=Av(function(x,S){return x+S},0),WZ=m1("ceil"),YZ=Av(function(x,S){return x/S},1),qZ=m1("floor");function KZ(x){return x&&x.length?xv(x,ca,r1):r}function ZZ(x,S){return x&&x.length?xv(x,Pt(S,2),r1):r}function JZ(x){return PO(x,ca)}function QZ(x,S){return PO(x,Pt(S,2))}function eJ(x){return x&&x.length?xv(x,ca,o1):r}function tJ(x,S){return x&&x.length?xv(x,Pt(S,2),o1):r}var rJ=Av(function(x,S){return x*S},1),nJ=m1("round"),iJ=Av(function(x,S){return x-S},0);function aJ(x){return x&&x.length?Hx(x,ca):0}function oJ(x,S){return x&&x.length?Hx(x,Pt(S,2)):0}return K.after=Iq,K.ary=t3,K.assign=vK,K.assignIn=v3,K.assignInWith=jv,K.assignWith=gK,K.at=mK,K.before=r3,K.bind=R1,K.bindAll=wZ,K.bindKey=n3,K.castArray=jq,K.chain=Jk,K.chunk=qW,K.compact=KW,K.concat=ZW,K.cond=EZ,K.conforms=SZ,K.constant=B1,K.countBy=aq,K.create=_K,K.curry=i3,K.curryRight=a3,K.debounce=o3,K.defaults=yK,K.defaultsDeep=xK,K.defer=Rq,K.delay=Pq,K.difference=JW,K.differenceBy=QW,K.differenceWith=eY,K.drop=tY,K.dropRight=rY,K.dropRightWhile=nY,K.dropWhile=iY,K.fill=aY,K.filter=sq,K.flatMap=cq,K.flatMapDeep=fq,K.flatMapDepth=hq,K.flatten=Yk,K.flattenDeep=oY,K.flattenDepth=sY,K.flip=Oq,K.flow=TZ,K.flowRight=AZ,K.fromPairs=lY,K.functions=AK,K.functionsIn=IK,K.groupBy=dq,K.initial=cY,K.intersection=fY,K.intersectionBy=hY,K.intersectionWith=dY,K.invert=PK,K.invertBy=OK,K.invokeMap=vq,K.iteratee=M1,K.keyBy=gq,K.keys=si,K.keysIn=ua,K.map=Nv,K.mapKeys=FK,K.mapValues=NK,K.matches=IZ,K.matchesProperty=RZ,K.memoize=Bv,K.merge=LK,K.mergeWith=g3,K.method=PZ,K.methodOf=OZ,K.mixin=D1,K.negate=Mv,K.nthArg=FZ,K.omit=BK,K.omitBy=MK,K.once=kq,K.orderBy=mq,K.over=NZ,K.overArgs=Fq,K.overEvery=LZ,K.overSome=BZ,K.partial=P1,K.partialRight=s3,K.partition=_q,K.pick=DK,K.pickBy=m3,K.property=S3,K.propertyOf=MZ,K.pull=mY,K.pullAll=Kk,K.pullAllBy=_Y,K.pullAllWith=yY,K.pullAt=xY,K.range=DZ,K.rangeRight=UZ,K.rearg=Nq,K.reject=bq,K.remove=bY,K.rest=Lq,K.reverse=A1,K.sampleSize=Eq,K.set=jK,K.setWith=$K,K.shuffle=Sq,K.slice=wY,K.sortBy=Aq,K.sortedUniq=RY,K.sortedUniqBy=PY,K.split=cZ,K.spread=Bq,K.tail=OY,K.take=kY,K.takeRight=FY,K.takeRightWhile=NY,K.takeWhile=LY,K.tap=KY,K.throttle=Mq,K.thru=Fv,K.toArray=h3,K.toPairs=_3,K.toPairsIn=y3,K.toPath=HZ,K.toPlainObject=p3,K.transform=GK,K.unary=Dq,K.union=BY,K.unionBy=MY,K.unionWith=DY,K.uniq=UY,K.uniqBy=jY,K.uniqWith=$Y,K.unset=VK,K.unzip=I1,K.unzipWith=Zk,K.update=HK,K.updateWith=XK,K.values=qc,K.valuesIn=zK,K.without=GY,K.words=w3,K.wrap=Uq,K.xor=VY,K.xorBy=HY,K.xorWith=XY,K.zip=zY,K.zipObject=WY,K.zipObjectDeep=YY,K.zipWith=qY,K.entries=_3,K.entriesIn=y3,K.extend=v3,K.extendWith=jv,D1(K,K),K.add=zZ,K.attempt=E3,K.camelCase=KK,K.capitalize=x3,K.ceil=WZ,K.clamp=WK,K.clone=$q,K.cloneDeep=Vq,K.cloneDeepWith=Hq,K.cloneWith=Gq,K.conformsTo=Xq,K.deburr=b3,K.defaultTo=CZ,K.divide=YZ,K.endsWith=ZK,K.eq=lo,K.escape=JK,K.escapeRegExp=QK,K.every=oq,K.find=lq,K.findIndex=zk,K.findKey=bK,K.findLast=uq,K.findLastIndex=Wk,K.findLastKey=wK,K.floor=qZ,K.forEach=Qk,K.forEachRight=e3,K.forIn=EK,K.forInRight=SK,K.forOwn=CK,K.forOwnRight=TK,K.get=F1,K.gt=zq,K.gte=Wq,K.has=RK,K.hasIn=N1,K.head=qk,K.identity=ca,K.includes=pq,K.indexOf=uY,K.inRange=YK,K.invoke=kK,K.isArguments=Eu,K.isArray=Ht,K.isArrayBuffer=Yq,K.isArrayLike=la,K.isArrayLikeObject=On,K.isBoolean=qq,K.isBuffer=hl,K.isDate=Kq,K.isElement=Zq,K.isEmpty=Jq,K.isEqual=Qq,K.isEqualWith=eK,K.isError=O1,K.isFinite=tK,K.isFunction=Ss,K.isInteger=l3,K.isLength=Dv,K.isMap=u3,K.isMatch=rK,K.isMatchWith=nK,K.isNaN=iK,K.isNative=aK,K.isNil=sK,K.isNull=oK,K.isNumber=c3,K.isObject=dn,K.isObjectLike=wn,K.isPlainObject=cd,K.isRegExp=k1,K.isSafeInteger=lK,K.isSet=f3,K.isString=Uv,K.isSymbol=Ca,K.isTypedArray=Yc,K.isUndefined=uK,K.isWeakMap=cK,K.isWeakSet=fK,K.join=pY,K.kebabCase=eZ,K.last=Xa,K.lastIndexOf=vY,K.lowerCase=tZ,K.lowerFirst=rZ,K.lt=hK,K.lte=dK,K.max=KZ,K.maxBy=ZZ,K.mean=JZ,K.meanBy=QZ,K.min=eJ,K.minBy=tJ,K.stubArray=j1,K.stubFalse=$1,K.stubObject=jZ,K.stubString=$Z,K.stubTrue=GZ,K.multiply=rJ,K.nth=gY,K.noConflict=kZ,K.noop=U1,K.now=Lv,K.pad=nZ,K.padEnd=iZ,K.padStart=aZ,K.parseInt=oZ,K.random=qK,K.reduce=yq,K.reduceRight=xq,K.repeat=sZ,K.replace=lZ,K.result=UK,K.round=nJ,K.runInContext=ye,K.sample=wq,K.size=Cq,K.snakeCase=uZ,K.some=Tq,K.sortedIndex=EY,K.sortedIndexBy=SY,K.sortedIndexOf=CY,K.sortedLastIndex=TY,K.sortedLastIndexBy=AY,K.sortedLastIndexOf=IY,K.startCase=fZ,K.startsWith=hZ,K.subtract=iJ,K.sum=aJ,K.sumBy=oJ,K.template=dZ,K.times=VZ,K.toFinite=Cs,K.toInteger=Kt,K.toLength=d3,K.toLower=pZ,K.toNumber=za,K.toSafeInteger=pK,K.toString=Pr,K.toUpper=vZ,K.trim=gZ,K.trimEnd=mZ,K.trimStart=_Z,K.truncate=yZ,K.unescape=xZ,K.uniqueId=XZ,K.upperCase=bZ,K.upperFirst=L1,K.each=Qk,K.eachRight=e3,K.first=qk,D1(K,function(){var x={};return Uo(K,function(S,R){Nr.call(K.prototype,R)||(x[R]=S)}),x}(),{chain:!1}),K.VERSION=n,ja(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){K[x].placeholder=K}),ja(["drop","take"],function(x,S){pr.prototype[x]=function(R){R=R===r?1:Qn(Kt(R),0);var B=this.__filtered__&&!S?new pr(this):this.clone();return B.__filtered__?B.__takeCount__=Oi(R,B.__takeCount__):B.__views__.push({size:Oi(R,U),type:x+(B.__dir__<0?"Right":"")}),B},pr.prototype[x+"Right"]=function(R){return this.reverse()[x](R).reverse()}}),ja(["filter","map","takeWhile"],function(x,S){var R=S+1,B=R==F||R==D;pr.prototype[x]=function(X){var ee=this.clone();return ee.__iteratees__.push({iteratee:Pt(X,3),type:R}),ee.__filtered__=ee.__filtered__||B,ee}}),ja(["head","last"],function(x,S){var R="take"+(S?"Right":"");pr.prototype[x]=function(){return this[R](1).value()[0]}}),ja(["initial","tail"],function(x,S){var R="drop"+(S?"":"Right");pr.prototype[x]=function(){return this.__filtered__?new pr(this):this[R](1)}}),pr.prototype.compact=function(){return this.filter(ca)},pr.prototype.find=function(x){return this.filter(x).head()},pr.prototype.findLast=function(x){return this.reverse().find(x)},pr.prototype.invokeMap=ar(function(x,S){return typeof x=="function"?new pr(this):this.map(function(R){return id(R,x,S)})}),pr.prototype.reject=function(x){return this.filter(Mv(Pt(x)))},pr.prototype.slice=function(x,S){x=Kt(x);var R=this;return R.__filtered__&&(x>0||S<0)?new pr(R):(x<0?R=R.takeRight(-x):x&&(R=R.drop(x)),S!==r&&(S=Kt(S),R=S<0?R.dropRight(-S):R.take(S-x)),R)},pr.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},pr.prototype.toArray=function(){return this.take(U)},Uo(pr.prototype,function(x,S){var R=/^(?:filter|find|map|reject)|While$/.test(S),B=/^(?:head|last)$/.test(S),X=K[B?"take"+(S=="last"?"Right":""):S],ee=B||/^find/.test(S);X&&(K.prototype[S]=function(){var ue=this.__wrapped__,de=B?[1]:arguments,be=ue instanceof pr,je=de[0],$e=be||Ht(ue),He=function(dr){var mr=X.apply(K,al([dr],de));return B&&lt?mr[0]:mr};$e&&R&&typeof je=="function"&&je.length!=1&&(be=$e=!1);var lt=this.__chain__,xt=!!this.__actions__.length,Ft=ee&&!lt,rr=be&&!xt;if(!ee&&$e){ue=rr?ue:new pr(this);var Nt=x.apply(ue,de);return Nt.__actions__.push({func:Fv,args:[He],thisArg:r}),new Ga(Nt,lt)}return Ft&&rr?x.apply(this,de):(Nt=this.thru(He),Ft?B?Nt.value()[0]:Nt.value():Nt)})}),ja(["pop","push","shift","sort","splice","unshift"],function(x){var S=av[x],R=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",B=/^(?:pop|shift)$/.test(x);K.prototype[x]=function(){var X=arguments;if(B&&!this.__chain__){var ee=this.value();return S.apply(Ht(ee)?ee:[],X)}return this[R](function(ue){return S.apply(Ht(ue)?ue:[],X)})}}),Uo(pr.prototype,function(x,S){var R=K[S];if(R){var B=R.name+"";Nr.call(Vc,B)||(Vc[B]=[]),Vc[B].push({name:S,func:R})}}),Vc[Tv(r,v).name]=[{name:"wrapper",func:r}],pr.prototype.clone=xz,pr.prototype.reverse=bz,pr.prototype.value=wz,K.prototype.at=ZY,K.prototype.chain=JY,K.prototype.commit=QY,K.prototype.next=eq,K.prototype.plant=rq,K.prototype.reverse=nq,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=iq,K.prototype.first=K.prototype.head,Zh&&(K.prototype[Zh]=tq),K},jc=QX();vu?((vu.exports=jc)._=jc,Mx._=jc):bi._=jc}).call(Ct)})(Km,Km.exports);var YI=Km.exports;function Xt(e,t,r){return{scriptType:e,scriptFunction:t,...r}}const q$={};function dme(e){const t={};for(const[r,n]of Object.entries(e))t[r]=q$[n.scriptType]={scriptString:r,...n};return t}const Mt=e=>(typeof e=="string"?Number(e):e)/.5;function qn(e){const t={};return e&&(e.x!==void 0&&(t.left=Mt(e.x)+"px",t.position="absolute"),e.y!==void 0&&(t.top=Mt(e.y)+"px",t.position="absolute"),e.scale!==void 0&&(t.transform?t.transform+=` scale(${e.scale})`:t.transform=`scale(${e.scale})`),e.fontSize!==void 0&&(t.fontSize=Mt(e.fontSize)+"px"),e.fontColor!==void 0&&(t.color=e.fontColor),e.width!==void 0&&(t.width=Mt(e.width)+"px"),e.height!==void 0&&(t.height=Mt(e.height)+"px"),e.marginLeft!==void 0&&(t.marginLeft=Mt(e.marginLeft)+"px"),e.marginRight!==void 0&&(t.marginRight=Mt(e.marginRight)+"px"),e.marginTop!==void 0&&(t.marginTop=Mt(e.marginTop)+"px"),e.marginBottom!==void 0&&(t.marginBottom=Mt(e.marginBottom)+"px"),e.gap!==void 0&&(t.gap=Mt(e.gap)+"px"),e.rowGap!==void 0&&(t.rowGap=Mt(e.rowGap)+"px"),e.columnGap!==void 0&&(t.columnGap=Mt(e.columnGap)+"px"),e.position&&(t.position=e.position),e.alignPosition!==void 0&&(e.alignPosition==="top-center"?t.top="0":e.alignPosition==="bottom-center"&&(t.top="auto",t.bottom="0")),e.fontColor===void 0&&e.customColor!==void 0&&(t.color=e.customColor),e.fontColor===void 0&&e.customFontSize!==void 0&&(t.fontSize=Mt(e.customFontSize)+"px")),t}function pme(e){if(!e||YI.isEmpty(e))return[];const t=[];return Object.keys(e).forEach(r=>{const n=e[r];t.push({key:r,type:"image",url:At(n,Et.ui)})}),t}function qI(){var r;const e=(r=$.sceneManager.sceneData.currentScene)==null?void 0:r.sceneName,t={[ta.Affinity]:1,[ta.Achieve]:1,[ta.Storyline]:1,"config.txt":1};return!(!e||t[e])}function vme(e){if(!e||YI.isEmpty(e))return[];const t=[];return Object.keys(e).forEach(r=>{const n=e[r];t.push({key:r,type:"video",url:At(n,Et.video)})}),t}function OL(e,t){const r=document.createElement("style");let n=`
    @keyframes ${t==="normal"?"":"active-"}cursor-animation {
  `;if(!e.imgs||e.imgs.length===0)return;e.imgs.forEach((a,o)=>{const s=At(a,Et.ui),c=o/e.imgs.length*100;n+=`
      ${c}% { cursor: url(${s}), pointer; }
    `}),n+=`
    100% { cursor: url(${At(e.imgs[0],Et.ui)}), pointer; }
    }
  `;const i=[n];t==="normal"?i.push(`#root { animation: cursor-animation ${e.interval*e.imgs.length}ms infinite steps(${e.imgs.length}); }`):i.push(`.interactive { animation: active-cursor-animation ${e.interval*e.imgs.length}ms infinite steps(${e.imgs.length}); }`),r.innerHTML=i.join(`
`),document.head.appendChild(r)}function K$(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}const Kn=e=>(e?e+".":"")+Math.random().toString().substring(0,10);class gme{constructor(){nt(this,"performList",[]);nt(this,"timeoutList",[])}arrangeNewPerform(t,r,n=!0){if(t.performName!=="none"){if(n){const i={id:t.performName,isHoldOn:t.isHoldOn,script:r};le.dispatch(Bn.addPerform(i))}t.stopTimeout=setTimeout(()=>{t.isHoldOn||this.unmountPerform(t.performName)},t.duration),r.args.find(i=>i.key==="continue"&&i.value===!0)&&(t.goNextWhenOver=!0),this.performList.push(t)}}unmountPerform(t,r=!1){if(r)for(let n=0;n<this.performList.length;n++){const i=this.performList[n];i.performName===t&&(i.stopFunction(),clearTimeout(i.stopTimeout),i.goNextWhenOver&&this.goNextWhenOver(),this.performList.splice(n,1),n--,this.erasePerformFromState(t))}else for(let n=0;n<this.performList.length;n++){const i=this.performList[n];!i.isHoldOn&&i.performName===t&&(i.stopFunction(),clearTimeout(i.stopTimeout),i.goNextWhenOver&&this.goNextWhenOver(),this.performList.splice(n,1),n--)}}erasePerformFromState(t){le.dispatch(Bn.removePerformByName(t))}removeAllPerform(){for(const t of this.performList)t.stopFunction();this.performList=[];for(const t of this.timeoutList)clearTimeout(t)}resetPerformList(){this.performList=[]}goNextWhenOver(){var r;let t=!1;(r=this.performList)==null||r.forEach(n=>{n.blockingAuto()&&(t=!0)}),t?setTimeout(this.goNextWhenOver,100):jn()}}const mme=e=>{let t=!1,r=null,n=null,i=!1,a=0;e.args.forEach(s=>{s.key==="global"?t=!0:s.key==="minValue"?r=s.value:s.key==="maxValue"?n=s.value:s.key==="random"&&(i=s.value)}),i&&r!==null&&n!==null&&(a=hme(r,n));let o;if(t?o=zue:o=uj,e.content.match(/=/)){const s=e.content.split(/=/)[0],c=e.content.split(/=/)[1];if(c==="random()"){const l=i?a:Math.random();le.dispatch(o({key:s,value:l})),le.dispatch(Jc({key:s,value:l}))}else if(c.match(/[+\-*\/()]/)&&!i){const u=c.split(/([+\-*\/()])/g).map(p=>p.match(/[a-zA-Z]/)?KI(p).toString():p).reduce((p,d)=>p+d,"");let h=C$(u)();typeof h=="number"&&(typeof r=="number"&&h<r&&(h=r),typeof n=="number"&&h>n&&(h=n)),le.dispatch(o({key:s,value:h})),le.dispatch(Jc({key:s,value:h}))}else c.match(/true|false/)&&!i?(c.match(/true/)&&(le.dispatch(o({key:s,value:!0})),le.dispatch(Jc({key:s,value:!0}))),c.match(/false/)&&(le.dispatch(o({key:s,value:!1})),le.dispatch(Jc({key:s,value:!1})))):isNaN(Number(c))?(le.dispatch(o({key:s,value:i?a:c})),le.dispatch(Jc({key:s,value:i?a:c}))):(le.dispatch(o({key:s,value:i?a:Number(c)})),le.dispatch(Jc({key:s,value:i?a:Number(c)})));t?(qe.debug("",{key:s,value:le.getState().userData.globalGameVar[s]}),qI()&&z$()):qe.debug("",{key:s,value:le.getState().stage.GameVar[s]})}return{performName:"setVar."+Kn(),duration:16,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0}};function KI(e){let t=0;return le.getState().stage.GameVar.hasOwnProperty(e)?t=le.getState().stage.GameVar[e]:le.getState().userData.globalGameVar.hasOwnProperty(e)&&(t=le.getState().userData.globalGameVar[e]),t}function _me(e){return C$(e)()}const v2=e=>{if(e===void 0)return!0;const t=e.split(/([+\-*\/()><!]|>=|<=|==|&&|\|\||!=)/g);if(t.every(n=>n.length)){const n=t.map(i=>i.match(/[a-zA-Z]/)?i.match(/true/)||i.match(/false/)?i:KI(i).toString():i).reduce((i,a)=>i+a,"");return!!_me(n)}return!0},Z$=()=>{if($.sceneManager.sceneData.currentScene.sceneName,$.sceneManager.sceneData.currentSentenceId>$.sceneManager.sceneData.currentScene.sentenceList.length-1){if($.sceneManager.sceneData.sceneStack.length!==0){const l=$.sceneManager.sceneData.sceneStack.pop();l!==void 0&&Sve(l)}return}const e=$.sceneManager.sceneData.currentScene.sentenceList[$.sceneManager.sceneData.currentSentenceId],t=l=>{let u=l,f;if(window.isSafari){const h=u.match(/\{.*?\}/g);h?f=h.filter((p,d)=>{const g=u.indexOf(p,d?u.indexOf(h[d-1])+h[d-1].length:0);return g===0||u[g-1]!=="\\"}):f=null}else f=u.match(new RegExp("(?<!\\\\)\\{(.*?)\\}","g"));return f!==null&&f.forEach(h=>{const p=KI(window.isSafari?h.slice(1,-1):h.replace(new RegExp("(?<!\\\\)\\{(.*)\\}"),"$1"));u=u.replace(h,p?p.toString():h)}),u=u.replace(/\\{/g,"{").replace(/\\}/g,"}"),u};(()=>{e.content=t((e==null?void 0:e.content)??""),e.args.forEach(l=>{l.value&&typeof l.value=="string"&&(l.value=t(l.value))})})();let n=!0,i=!1,a="";if(e.args.forEach(l=>{l.key==="when"&&(i=!0,a=l.value.toString())}),i&&(n=v2(a)),!n){qe.warn(""),$.sceneManager.sceneData.currentSentenceId++,jn();return}gy(e);let o=!1;e.args.forEach(l=>{l.key==="next"&&l.value&&(o=!0)});let s=e.command===Bt.say;e.args.forEach(l=>{l.key==="notend"&&l.value===!0&&(s=!1)});let c;if(o){$.sceneManager.sceneData.currentSentenceId++,Z$();return}setTimeout(()=>{c=le.getState().stage;const l={currentStageState:c,globalGameVar:le.getState().userData.globalGameVar};qe.debug("",l),s&&$.backlogManager.saveCurrentStateToBacklog()},0),$.sceneManager.sceneData.currentSentenceId++},jn=()=>{$.events.userInteractNext.emit();const e=le.getState().GUI;if(e.showTitle&&!e.showStoryLine&&!e.showAchievement){qe.warn("");return}let t=!1;if($.gameplay.performController.performList.forEach(i=>{i.blockingNext()&&(i.performName.startsWith("videoPlay")?!$.gameplay.isFast&&!$.gameplay.isSyncingWithOrigine&&(t=!0):t=!0)}),t){qe.warn("next ");return}let r=!0;if($.gameplay.performController.performList.forEach(i=>{!i.isHoldOn&&!i.skipNextCollect&&(r=!1)}),r){const i=le.getState().stage,a=cn(i);for(let o=0;o<a.PerformList.length;o++)a.PerformList[o].isHoldOn||(a.PerformList.splice(o,1),o--);qe.warn(""),le.dispatch(dc(a)),Z$();return}qe.debug("");let n=!1;for(let i=0;i<$.gameplay.performController.performList.length;i++){const a=$.gameplay.performController.performList[i];a.isHoldOn||(a.goNextWhenOver&&(n=!0),a.skipNextCollect||(a.stopFunction(),clearTimeout(a.stopTimeout),$.gameplay.performController.performList.splice(i,1),i--))}n&&jn()};var yme="__lodash_hash_undefined__";function xme(e){return this.__data__.set(e,yme),this}var bme=xme;function wme(e){return this.__data__.has(e)}var Eme=wme,Sme=ZA,Cme=bme,Tme=Eme;function Zm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Sme;++t<r;)this.add(e[t])}Zm.prototype.add=Zm.prototype.push=Cme;Zm.prototype.has=Tme;var J$=Zm;function Ame(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var Ime=Ame;function Rme(e){return e!==e}var Pme=Rme;function Ome(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var kme=Ome,Fme=Ime,Nme=Pme,Lme=kme;function Bme(e,t,r){return t===t?Lme(e,t,r):Fme(e,Nme,r)}var Mme=Bme,Dme=Mme;function Ume(e,t){var r=e==null?0:e.length;return!!r&&Dme(e,t,0)>-1}var jme=Ume;function $me(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Gme=$me;function Vme(e,t){return e.has(t)}var Q$=Vme;function Hme(){}var Xme=Hme;function zme(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ZI=zme,Yb=nj,Wme=Xme,Yme=ZI,qme=1/0,Kme=Yb&&1/Yme(new Yb([,-0]))[1]==qme?function(e){return new Yb(e)}:Wme,Zme=Kme,Jme=J$,Qme=jme,e_e=Gme,t_e=Q$,r_e=Zme,n_e=ZI,i_e=200;function a_e(e,t,r){var n=-1,i=Qme,a=e.length,o=!0,s=[],c=s;if(r)o=!1,i=e_e;else if(a>=i_e){var l=t?null:r_e(e);if(l)return n_e(l);o=!1,i=t_e,c=new Jme}else c=t?[]:s;e:for(;++n<a;){var u=e[n],f=t?t(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),s.push(u)}else i(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}var o_e=a_e,s_e=o_e;function l_e(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?s_e(e,void 0,t):[]}var u_e=l_e;const L0=Gi(u_e),Bh=e=>{for(const t of e)$.sceneManager.settledScenes.includes(t)?qe.warn(`${t}`):(qe.info(`${t}`),aa(t).then(r=>{const n=t.split("./game/scene/")[1];tu(r,n||"",t)}))},c_e=(e,t)=>{$.sceneManager.lockSceneWrite||($.sceneManager.lockSceneWrite=!0,$.sceneManager.sceneData.sceneStack.push({sceneName:$.sceneManager.sceneData.currentScene.sceneName,sceneUrl:$.sceneManager.sceneData.currentScene.sceneUrl,continueLine:$.sceneManager.sceneData.currentSentenceId}),aa(e).then(r=>{$.sceneManager.sceneData.currentScene=tu(r,t,e),$.sceneManager.sceneData.currentSentenceId=0;const n=$.sceneManager.sceneData.currentScene.subSceneList;$.sceneManager.settledScenes.push(e);const i=L0(n);Bh(i),qe.debug("",$.sceneManager.sceneData),$.sceneManager.lockSceneWrite=!1,jn()}).catch(r=>{qe.error("",r),$.sceneManager.lockSceneWrite=!1}))},f_e=e=>{const t=e.content.split("/"),r=t[t.length-1];return c_e(e.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function vc(e,t,r){let n;const a=le.getState().stage.effects.find(o=>o.target===e);if(t.duration=500,r&&typeof r=="number"&&(t.duration=r),n=[t],a){const o={...a.transform,duration:0};n.unshift(o)}else{const o={...t,alpha:0,duration:0};n.unshift(o)}return n}function e9(e,t){const r=$.gameplay.pixiStage.getStageObjByKey(e);function n(){r&&(r.pixiContainer.alpha=0)}function i(){r&&(r.pixiContainer.alpha=1)}function a(o){if(r){const s=r.pixiContainer,c=$.gameplay.pixiStage.frameDuration,u=1/(t/c*o);s.alpha<1&&(s.alpha+=u)}}return{setStartState:n,setEndState:i,tickerFunc:a}}function t9(e,t){const r=$.gameplay.pixiStage.getStageObjByKey(e);function n(){}function i(){r&&(r.pixiContainer.alpha=0)}function a(o){if(r){const s=r.pixiContainer,c=$.gameplay.pixiStage.frameDuration,u=1/(t/c*o);s.alpha>0&&(s.alpha-=u)}}return{setStartState:n,setEndState:i,tickerFunc:a}}function r9(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var h_e=function(){},kL=function(){};const g2=(e,t,r)=>Math.min(Math.max(r,e),t),qb=.001,d_e=.01,FL=10,p_e=.05,v_e=1;function g_e({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,a;h_e(e<=FL*1e3);let o=1-t;o=g2(p_e,v_e,o),e=g2(d_e,FL,e/1e3),o<1?(i=l=>{const u=l*o,f=u*e,h=u-r,p=m2(l,o),d=Math.exp(-f);return qb-h/p*d},a=l=>{const f=l*o*e,h=f*r+r,p=Math.pow(o,2)*Math.pow(l,2)*e,d=Math.exp(-f),g=m2(Math.pow(l,2),o);return(-i(l)+qb>0?-1:1)*((h-p)*d)/g}):(i=l=>{const u=Math.exp(-l*e),f=(l-r)*e+1;return-qb+u*f},a=l=>{const u=Math.exp(-l*e),f=(r-l)*(e*e);return u*f});const s=5/e,c=__e(i,a,s);if(e=e*1e3,isNaN(c))return{stiffness:100,damping:10,duration:e};{const l=Math.pow(c,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:e}}}const m_e=12;function __e(e,t,r){let n=r;for(let i=1;i<m_e;i++)n=n-e(n)/t(n);return n}function m2(e,t){return e*Math.sqrt(1-t*t)}const y_e=["duration","bounce"],x_e=["stiffness","damping","mass"];function NL(e,t){return t.some(r=>e[r]!==void 0)}function b_e(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!NL(e,x_e)&&NL(e,y_e)){const r=g_e(e);t=Object.assign(Object.assign(Object.assign({},t),r),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}function JI(e){var{from:t=0,to:r=1,restSpeed:n=2,restDelta:i}=e,a=r9(e,["from","to","restSpeed","restDelta"]);const o={done:!1,value:t};let{stiffness:s,damping:c,mass:l,velocity:u,duration:f,isResolvedFromDuration:h}=b_e(a),p=LL,d=LL;function g(){const _=u?-(u/1e3):0,v=r-t,m=c/(2*Math.sqrt(s*l)),y=Math.sqrt(s/l)/1e3;if(i===void 0&&(i=Math.min(Math.abs(r-t)/100,.4)),m<1){const b=m2(y,m);p=w=>{const E=Math.exp(-m*y*w);return r-E*((_+m*y*v)/b*Math.sin(b*w)+v*Math.cos(b*w))},d=w=>{const E=Math.exp(-m*y*w);return m*y*E*(Math.sin(b*w)*(_+m*y*v)/b+v*Math.cos(b*w))-E*(Math.cos(b*w)*(_+m*y*v)-b*v*Math.sin(b*w))}}else if(m===1)p=b=>r-Math.exp(-y*b)*(v+(_+y*v)*b);else{const b=y*Math.sqrt(m*m-1);p=w=>{const E=Math.exp(-m*y*w),C=Math.min(b*w,300);return r-E*((_+m*y*v)*Math.sinh(C)+b*v*Math.cosh(C))/b}}}return g(),{next:_=>{const v=p(_);if(h)o.done=_>=f;else{const m=d(_)*1e3,y=Math.abs(m)<=n,b=Math.abs(r-v)<=i;o.done=y&&b}return o.value=o.done?r:v,o},flipTarget:()=>{u=-u,[t,r]=[r,t],g()}}}JI.needsInterpolation=(e,t)=>typeof e=="string"||typeof t=="string";const LL=e=>0,n9=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},QI=(e,t,r)=>-r*e+r*t+e,i9=(e,t)=>r=>Math.max(Math.min(r,t),e),dp=e=>e%1?Number(e.toFixed(5)):e,Jm=/(-)?([\d]*\.?[\d])+/g,_2=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,w_e=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function B0(e){return typeof e=="string"}const jy={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},a9=Object.assign(Object.assign({},jy),{transform:i9(0,1)});Object.assign(Object.assign({},jy),{default:1});const E_e=e=>({test:t=>B0(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),pp=E_e("%");Object.assign(Object.assign({},pp),{parse:e=>pp.parse(e)/100,transform:e=>pp.transform(e*100)});const eR=(e,t)=>r=>!!(B0(r)&&w_e.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),o9=(e,t,r)=>n=>{if(!B0(n))return n;const[i,a,o,s]=n.match(Jm);return{[e]:parseFloat(i),[t]:parseFloat(a),[r]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},Ku={test:eR("hsl","hue"),parse:o9("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+pp.transform(dp(t))+", "+pp.transform(dp(r))+", "+dp(a9.transform(n))+")"},S_e=i9(0,255),Kb=Object.assign(Object.assign({},jy),{transform:e=>Math.round(S_e(e))}),Il={test:eR("rgb","red"),parse:o9("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Kb.transform(e)+", "+Kb.transform(t)+", "+Kb.transform(r)+", "+dp(a9.transform(n))+")"};function C_e(e){let t="",r="",n="",i="";return e.length>5?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),i=e.substr(4,1),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const y2={test:eR("#"),parse:C_e,transform:Il.transform},$y={test:e=>Il.test(e)||y2.test(e)||Ku.test(e),parse:e=>Il.test(e)?Il.parse(e):Ku.test(e)?Ku.parse(e):y2.parse(e),transform:e=>B0(e)?e:e.hasOwnProperty("red")?Il.transform(e):Ku.transform(e)},s9="${c}",l9="${n}";function T_e(e){var t,r,n,i;return isNaN(e)&&B0(e)&&((r=(t=e.match(Jm))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)+((i=(n=e.match(_2))===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0}function u9(e){typeof e=="number"&&(e=`${e}`);const t=[];let r=0;const n=e.match(_2);n&&(r=n.length,e=e.replace(_2,s9),t.push(...n.map($y.parse)));const i=e.match(Jm);return i&&(e=e.replace(Jm,l9),t.push(...i.map(jy.parse))),{values:t,numColors:r,tokenised:e}}function c9(e){return u9(e).values}function f9(e){const{values:t,numColors:r,tokenised:n}=u9(e),i=t.length;return a=>{let o=n;for(let s=0;s<i;s++)o=o.replace(s<r?s9:l9,s<r?$y.transform(a[s]):dp(a[s]));return o}}const A_e=e=>typeof e=="number"?0:e;function I_e(e){const t=c9(e);return f9(e)(t.map(A_e))}const h9={test:T_e,parse:c9,createTransformer:f9,getAnimatableNone:I_e};function Zb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function BL({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,a=0,o=0;if(!t)i=a=o=r;else{const s=r<.5?r*(1+t):r+t-r*t,c=2*r-s;i=Zb(c,s,e+1/3),a=Zb(c,s,e),o=Zb(c,s,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const R_e=(e,t,r)=>{const n=e*e,i=t*t;return Math.sqrt(Math.max(0,r*(i-n)+n))},P_e=[y2,Il,Ku],ML=e=>P_e.find(t=>t.test(e)),d9=(e,t)=>{let r=ML(e),n=ML(t),i=r.parse(e),a=n.parse(t);r===Ku&&(i=BL(i),r=Il),n===Ku&&(a=BL(a),n=Il);const o=Object.assign({},i);return s=>{for(const c in o)c!=="alpha"&&(o[c]=R_e(i[c],a[c],s));return o.alpha=QI(i.alpha,a.alpha,s),r.transform(o)}},O_e=e=>typeof e=="number",k_e=(e,t)=>r=>t(e(r)),p9=(...e)=>e.reduce(k_e);function v9(e,t){return O_e(e)?r=>QI(e,t,r):$y.test(e)?d9(e,t):m9(e,t)}const g9=(e,t)=>{const r=[...e],n=r.length,i=e.map((a,o)=>v9(a,t[o]));return a=>{for(let o=0;o<n;o++)r[o]=i[o](a);return r}},F_e=(e,t)=>{const r=Object.assign(Object.assign({},e),t),n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=v9(e[i],t[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}};function DL(e){const t=h9.parse(e),r=t.length;let n=0,i=0,a=0;for(let o=0;o<r;o++)n||typeof t[o]=="number"?n++:t[o].hue!==void 0?a++:i++;return{parsed:t,numNumbers:n,numRGB:i,numHSL:a}}const m9=(e,t)=>{const r=h9.createTransformer(t),n=DL(e),i=DL(t);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?p9(g9(n.parsed,i.parsed),r):o=>`${o>0?t:e}`},N_e=(e,t)=>r=>QI(e,t,r);function L_e(e){if(typeof e=="number")return N_e;if(typeof e=="string")return $y.test(e)?d9:m9;if(Array.isArray(e))return g9;if(typeof e=="object")return F_e}function B_e(e,t,r){const n=[],i=r||L_e(e[0]),a=e.length-1;for(let o=0;o<a;o++){let s=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]:t;s=p9(c,s)}n.push(s)}return n}function M_e([e,t],[r]){return n=>r(n9(e,t,n))}function D_e(e,t){const r=e.length,n=r-1;return i=>{let a=0,o=!1;if(i<=e[0]?o=!0:i>=e[n]&&(a=n-1,o=!0),!o){let c=1;for(;c<r&&!(e[c]>i||c===n);c++);a=c-1}const s=n9(e[a],e[a+1],i);return t[a](s)}}function _9(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const a=e.length;kL(a===t.length),kL(!n||!Array.isArray(n)||n.length===a-1),e[0]>e[a-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const o=B_e(t,n,i),s=a===2?M_e(e,o):D_e(e,o);return r?c=>s(g2(e[0],e[a-1],c)):s}const U_e=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,j_e=e=>t=>Math.pow(t,e),$_e=e=>t=>t*t*((e+1)*t-e),G_e=e=>{const t=$_e(e);return r=>(r*=2)<1?.5*t(r):.5*(2-Math.pow(2,-10*(r-1)))},V_e=1.525,H_e=j_e(2),X_e=U_e(H_e);G_e(V_e);function z_e(e,t){return e.map(()=>t||X_e).splice(0,e.length-1)}function W_e(e){const t=e.length;return e.map((r,n)=>n!==0?n/(t-1):0)}function Y_e(e,t){return e.map(r=>r*t)}function tm({from:e=0,to:t=1,ease:r,offset:n,duration:i=300}){const a={done:!1,value:e},o=Array.isArray(t)?t:[e,t],s=Y_e(n&&n.length===o.length?n:W_e(o),i);function c(){return _9(s,o,{ease:Array.isArray(r)?r:z_e(o,r)})}let l=c();return{next:u=>(a.value=l(u),a.done=u>=i,a),flipTarget:()=>{o.reverse(),l=c()}}}function q_e({velocity:e=0,from:t=0,power:r=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:a}){const o={done:!1,value:t};let s=r*e;const c=t+s,l=a===void 0?c:a(c);return l!==c&&(s=l-t),{next:u=>{const f=-s*Math.exp(-u/n);return o.done=!(f>i||f<-i),o.value=o.done?l:l+f,o},flipTarget:()=>{}}}const UL={keyframes:tm,spring:JI,decay:q_e};function K_e(e){if(Array.isArray(e.to))return tm;if(UL[e.type])return UL[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?tm:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?JI:tm}const y9=1/60*1e3,Z_e=typeof performance<"u"?()=>performance.now():()=>Date.now(),x9=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(()=>e(Z_e()),y9);function J_e(e){let t=[],r=[],n=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(c,l=!1,u=!1)=>{const f=u&&i,h=f?t:r;return l&&o.add(c),h.indexOf(c)===-1&&(h.push(c),f&&i&&(n=t.length)),c},cancel:c=>{const l=r.indexOf(c);l!==-1&&r.splice(l,1),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[t,r]=[r,t],r.length=0,n=t.length,n)for(let l=0;l<n;l++){const u=t[l];u(c),o.has(u)&&(s.schedule(u),e())}i=!1,a&&(a=!1,s.process(c))}};return s}const Q_e=40;let x2=!0,Hp=!1,b2=!1;const vp={delta:0,timestamp:0},M0=["read","update","preRender","render","postRender"],Gy=M0.reduce((e,t)=>(e[t]=J_e(()=>Hp=!0),e),{}),eye=M0.reduce((e,t)=>{const r=Gy[t];return e[t]=(n,i=!1,a=!1)=>(Hp||nye(),r.schedule(n,i,a)),e},{}),tye=M0.reduce((e,t)=>(e[t]=Gy[t].cancel,e),{});M0.reduce((e,t)=>(e[t]=()=>Gy[t].process(vp),e),{});const rye=e=>Gy[e].process(vp),b9=e=>{Hp=!1,vp.delta=x2?y9:Math.max(Math.min(e-vp.timestamp,Q_e),1),vp.timestamp=e,b2=!0,M0.forEach(rye),b2=!1,Hp&&(x2=!1,x9(b9))},nye=()=>{Hp=!0,x2=!0,b2||x9(b9)},iye=eye;function w9(e,t,r=0){return e-t-r}function aye(e,t,r=0,n=!0){return n?w9(t+-e,t,r):t-(e-t)+r}function oye(e,t,r,n){return n?e>=t+r:e<=-r}const sye=e=>{const t=({delta:r})=>e(r);return{start:()=>iye.update(t,!0),stop:()=>tye.update(t)}};function lye(e){var t,r,{from:n,autoplay:i=!0,driver:a=sye,elapsed:o=0,repeat:s=0,repeatType:c="loop",repeatDelay:l=0,onPlay:u,onStop:f,onComplete:h,onRepeat:p,onUpdate:d}=e,g=r9(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:_}=g,v,m=0,y=g.duration,b,w=!1,E=!0,C;const T=K_e(g);!((r=(t=T).needsInterpolation)===null||r===void 0)&&r.call(t,n,_)&&(C=_9([0,100],[n,_],{clamp:!1}),n=0,_=100);const A=T(Object.assign(Object.assign({},g),{from:n,to:_}));function I(){m++,c==="reverse"?(E=m%2===0,o=aye(o,y,l,E)):(o=w9(o,y,l),c==="mirror"&&A.flipTarget()),w=!1,p&&p()}function O(){v.stop(),h&&h()}function P(F){if(E||(F=-F),o+=F,!w){const M=A.next(Math.max(0,o));b=M.value,C&&(b=C(b)),w=E?M.done:o<=0}d==null||d(b),w&&(m===0&&(y??(y=o)),m<s?oye(o,y,l,E)&&I():O())}function k(){u==null||u(),v=a(P),v.start()}return i&&k(),{stop:()=>{f==null||f(),v.stop()}}}function uye(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var cye=uye,fye=J$,hye=cye,dye=Q$,pye=1,vye=2;function gye(e,t,r,n,i,a){var o=r&pye,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var f=-1,h=!0,p=r&vye?new fye:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var d=e[f],g=t[f];if(n)var _=o?n(g,d,f,t,e,a):n(d,g,f,e,t,a);if(_!==void 0){if(_)continue;h=!1;break}if(p){if(!hye(t,function(v,m){if(!dye(p,m)&&(d===v||i(d,v,r,n,a)))return p.push(m)})){h=!1;break}}else if(!(d===g||i(d,g,r,n,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var E9=gye;function mye(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var _ye=mye,jL=O0,$L=aj,yye=qA,xye=E9,bye=_ye,wye=ZI,Eye=1,Sye=2,Cye="[object Boolean]",Tye="[object Date]",Aye="[object Error]",Iye="[object Map]",Rye="[object Number]",Pye="[object RegExp]",Oye="[object Set]",kye="[object String]",Fye="[object Symbol]",Nye="[object ArrayBuffer]",Lye="[object DataView]",GL=jL?jL.prototype:void 0,Jb=GL?GL.valueOf:void 0;function Bye(e,t,r,n,i,a,o){switch(r){case Lye:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Nye:return!(e.byteLength!=t.byteLength||!a(new $L(e),new $L(t)));case Cye:case Tye:case Rye:return yye(+e,+t);case Aye:return e.name==t.name&&e.message==t.message;case Pye:case kye:return e==t+"";case Iye:var s=bye;case Oye:var c=n&Eye;if(s||(s=wye),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;n|=Sye,o.set(e,t);var u=xye(s(e),s(t),n,i,a,o);return o.delete(e),u;case Fye:if(Jb)return Jb.call(e)==Jb.call(t)}return!1}var Mye=Bye,VL=tj,Dye=1,Uye=Object.prototype,jye=Uye.hasOwnProperty;function $ye(e,t,r,n,i,a){var o=r&Dye,s=VL(e),c=s.length,l=VL(t),u=l.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=s[f];if(!(o?h in t:jye.call(t,h)))return!1}var p=a.get(e),d=a.get(t);if(p&&d)return p==t&&d==e;var g=!0;a.set(e,t),a.set(t,e);for(var _=o;++f<c;){h=s[f];var v=e[h],m=t[h];if(n)var y=o?n(m,v,h,t,e,a):n(v,m,h,e,t,a);if(!(y===void 0?v===m||i(v,m,r,n,a):y)){g=!1;break}_||(_=h=="constructor")}if(g&&!_){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(g=!1)}return a.delete(e),a.delete(t),g}var Gye=$ye,Qb=JA,Vye=E9,Hye=Mye,Xye=Gye,HL=q_,XL=Zs,zL=eI,zye=zU,Wye=1,WL="[object Arguments]",YL="[object Array]",tg="[object Object]",Yye=Object.prototype,qL=Yye.hasOwnProperty;function qye(e,t,r,n,i,a){var o=XL(e),s=XL(t),c=o?YL:HL(e),l=s?YL:HL(t);c=c==WL?tg:c,l=l==WL?tg:l;var u=c==tg,f=l==tg,h=c==l;if(h&&zL(e)){if(!zL(t))return!1;o=!0,u=!1}if(h&&!u)return a||(a=new Qb),o||zye(e)?Vye(e,t,r,n,i,a):Hye(e,t,c,r,n,i,a);if(!(r&Wye)){var p=u&&qL.call(e,"__wrapped__"),d=f&&qL.call(t,"__wrapped__");if(p||d){var g=p?e.value():e,_=d?t.value():t;return a||(a=new Qb),i(g,_,r,n,a)}}return h?(a||(a=new Qb),Xye(e,t,r,n,i,a)):!1}var Kye=qye,Zye=Kye,KL=Cc;function S9(e,t,r,n,i){return e===t?!0:e==null||t==null||!KL(e)&&!KL(t)?e!==e&&t!==t:Zye(e,t,r,n,S9,i)}var C9=S9,Jye=JA,Qye=C9,exe=1,txe=2;function rxe(e,t,r,n){var i=r.length,a=i,o=!n;if(e==null)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=r[i];var c=s[0],l=e[c],u=s[1];if(o&&s[2]){if(l===void 0&&!(c in e))return!1}else{var f=new Jye;if(n)var h=n(l,u,c,e,t,f);if(!(h===void 0?Qye(u,l,exe|txe,n,f):h))return!1}}return!0}var nxe=rxe,ixe=ds;function axe(e){return e===e&&!ixe(e)}var T9=axe,oxe=T9,sxe=Y_;function lxe(e){for(var t=sxe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,oxe(i)]}return t}var uxe=lxe;function cxe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var A9=cxe,fxe=nxe,hxe=uxe,dxe=A9;function pxe(e){var t=hxe(e);return t.length==1&&t[0][2]?dxe(t[0][0],t[0][1]):function(r){return r===e||fxe(r,e,t)}}var vxe=pxe,gxe=k0,mxe=Cc,_xe="[object Symbol]";function yxe(e){return typeof e=="symbol"||mxe(e)&&gxe(e)==_xe}var Vy=yxe,xxe=Zs,bxe=Vy,wxe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Exe=/^\w*$/;function Sxe(e,t){if(xxe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||bxe(e)?!0:Exe.test(e)||!wxe.test(e)||t!=null&&e in Object(t)}var tR=Sxe,I9=ZA,Cxe="Expected a function";function rR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Cxe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(rR.Cache||I9),r}rR.Cache=I9;var Txe=rR,Axe=Txe,Ixe=500;function Rxe(e){var t=Axe(e,function(n){return r.size===Ixe&&r.clear(),n}),r=t.cache;return t}var Pxe=Rxe,Oxe=Pxe,kxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fxe=/\\(\\)?/g,Nxe=Oxe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(kxe,function(r,n,i,a){t.push(i?a.replace(Fxe,"$1"):n||r)}),t}),Lxe=Nxe;function Bxe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var R9=Bxe,ZL=O0,Mxe=R9,Dxe=Zs,Uxe=Vy,jxe=1/0,JL=ZL?ZL.prototype:void 0,QL=JL?JL.toString:void 0;function P9(e){if(typeof e=="string")return e;if(Dxe(e))return Mxe(e,P9)+"";if(Uxe(e))return QL?QL.call(e):"";var t=e+"";return t=="0"&&1/e==-jxe?"-0":t}var $xe=P9,Gxe=$xe;function Vxe(e){return e==null?"":Gxe(e)}var Hxe=Vxe,Xxe=Zs,zxe=tR,Wxe=Lxe,Yxe=Hxe;function qxe(e,t){return Xxe(e)?e:zxe(e,t)?[e]:Wxe(Yxe(e))}var Hy=qxe,Kxe=Vy,Zxe=1/0;function Jxe(e){if(typeof e=="string"||Kxe(e))return e;var t=e+"";return t=="0"&&1/e==-Zxe?"-0":t}var D0=Jxe,Qxe=Hy,e1e=D0;function t1e(e,t){t=Qxe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[e1e(t[r++])];return r&&r==n?e:void 0}var nR=t1e,r1e=nR;function n1e(e,t,r){var n=e==null?void 0:r1e(e,t);return n===void 0?r:n}var i1e=n1e;function a1e(e,t){return e!=null&&t in Object(e)}var o1e=a1e,s1e=Hy,l1e=XU,u1e=Zs,c1e=tI,f1e=rI,h1e=D0;function d1e(e,t,r){t=s1e(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var o=h1e(t[n]);if(!(a=e!=null&&r(e,o)))break;e=e[o]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&f1e(i)&&c1e(o,i)&&(u1e(e)||l1e(e)))}var p1e=d1e,v1e=o1e,g1e=p1e;function m1e(e,t){return e!=null&&g1e(e,t,v1e)}var _1e=m1e,y1e=C9,x1e=i1e,b1e=_1e,w1e=tR,E1e=T9,S1e=A9,C1e=D0,T1e=1,A1e=2;function I1e(e,t){return w1e(e)&&E1e(t)?S1e(C1e(e),t):function(r){var n=x1e(r,e);return n===void 0&&n===t?b1e(r,e):y1e(t,n,T1e|A1e)}}var R1e=I1e;function P1e(e){return e}var O1e=P1e;function k1e(e){return function(t){return t==null?void 0:t[e]}}var F1e=k1e,N1e=nR;function L1e(e){return function(t){return N1e(t,e)}}var B1e=L1e,M1e=F1e,D1e=B1e,U1e=tR,j1e=D0;function $1e(e){return U1e(e)?M1e(j1e(e)):D1e(e)}var G1e=$1e,V1e=vxe,H1e=R1e,X1e=O1e,z1e=Zs,W1e=G1e;function Y1e(e){return typeof e=="function"?e:e==null?X1e:typeof e=="object"?z1e(e)?H1e(e[0],e[1]):V1e(e):W1e(e)}var O9=Y1e,q1e="Expected a function";function K1e(e){if(typeof e!="function")throw new TypeError(q1e);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var Z1e=K1e,J1e=QA,Q1e=Hy,ebe=tI,e4=ds,tbe=D0;function rbe(e,t,r,n){if(!e4(e))return e;t=Q1e(t,e);for(var i=-1,a=t.length,o=a-1,s=e;s!=null&&++i<a;){var c=tbe(t[i]),l=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(i!=o){var u=s[c];l=n?n(u,c,s):void 0,l===void 0&&(l=e4(u)?u:ebe(t[i+1])?[]:{})}J1e(s,c,l),s=s[c]}return e}var nbe=rbe,ibe=nR,abe=nbe,obe=Hy;function sbe(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=ibe(e,o);r(s,o)&&abe(a,obe(o,e),s)}return a}var lbe=sbe,ube=R9,cbe=O9,fbe=lbe,hbe=rj;function dbe(e,t){if(e==null)return{};var r=ube(hbe(e),function(n){return[n]});return t=cbe(t),fbe(e,r,function(n,i){return t(n,i[0])})}var pbe=dbe,vbe=O9,gbe=Z1e,mbe=pbe;function _be(e,t){return mbe(e,gbe(vbe(t)))}var ybe=_be;const ew=Gi(ybe);function xbe(e){return e===void 0}var bbe=xbe;const As=Gi(bbe);function k9(e,t,r){const n=$.gameplay.pixiStage.getStageObjByKey(t);let i=0;const a=[],o=[];for(const v of e){const m=v.duration;i+=m;const{position:y,scale:b,...w}=v;a.push({x:y.x,y:y.y,scaleX:b.x,scaleY:b.y,...w}),r!==0?o.push(i/r):o.push(0)}const s=n==null?void 0:n.pixiContainer;let c=null;r>0&&(c=lye({to:a,offset:o,duration:r,onUpdate:v=>{if(s){const{scaleX:m,scaleY:y,...b}=v;Object.assign(s,ew(b,As)),As(m)||(s.scale.x=m),As(y)||(s.scale.y=y)}}}));const{duration:l,...u}=g();le.dispatch(Bn.updateEffect({target:t,transform:u}));function f(){if(n!=null&&n.pixiContainer){const{position:v,scale:m,...y}=d(),b=ew({x:v.x,y:v.y,...y},As);Object.assign(n==null?void 0:n.pixiContainer,b),n!=null&&n.pixiContainer&&(As(m.x)||(n.pixiContainer.scale.x=m.x),As(m==null?void 0:m.y)||(n.pixiContainer.scale.y=m.y))}}function h(){if(c&&c.stop(),c=null,n!=null&&n.pixiContainer){const{position:v,scale:m,...y}=g(),b=ew({x:v.x,y:v.y,...y},As);Object.assign(n==null?void 0:n.pixiContainer,b),n!=null&&n.pixiContainer&&(As(m.x)||(n.pixiContainer.scale.x=m.x),As(m==null?void 0:m.y)||(n.pixiContainer.scale.y=m.y))}}function p(v){}function d(){return e[0]}function g(){return e[e.length-1]}function _(){const v=e[e.length-1],{alpha:m,rotation:y,blur:b,duration:w,scale:E,position:C,...T}=v;return T}return{setStartState:f,setEndState:h,tickerFunc:p,getEndFilterEffect:_}}function Qm(e,t,r){const n=$.animationManager.getAnimations().find(i=>i.name===e);if(n){const i=n.effects.map(a=>{const o=le.getState().stage.effects.find(c=>c.target===t),s=cn({...(o==null?void 0:o.transform)??XI,duration:0});return Object.assign(s,a),s.duration=a.duration,s});return qe.debug("",i),k9(i,t,r)}return null}function pi(e){const t=$.animationManager.getAnimations().find(r=>r.name===e);if(t){let r=0;return t.effects.forEach(n=>{r+=n.duration}),r}return 0}function ns(e,t,r=!1){if(t==="enter"){let n=500;r&&(n=1500);let i=e9(e,n);const a=$.animationManager.nextEnterAnimationName.get(e);return a&&(qe.debug("",e),i=Qm(a,e,pi(a)),n=pi(a),$.animationManager.nextEnterAnimationName.delete(e)),{duration:n,animation:i}}else{let n=750;r&&(n=1500);let i=t9(e,n);const a=$.animationManager.nextExitAnimationName.get(e);return a&&(qe.debug("",e),i=Qm(a,e,pi(a)),n=pi(a),$.animationManager.nextExitAnimationName.delete(e)),{duration:n,animation:i}}}const wbe=e=>{const t=e.content,r=le.dispatch;if(le.getState().GUI.showStoryLine)return{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};if(le.getState().GUI.showAchievement)return{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};let n="",i="default",a=0,o=0;e.args.forEach(f=>{switch(f.key){case"unlockname":n=f.value.toString();break;case"series":i=f.value.toString();break;case"x":a=Number((f==null?void 0:f.value)??0);break;case"y":o=Number((f==null?void 0:f.value)??0);break}}),n!==""&&r(gj({name:n,url:t,series:i})),r(Bn.removeEffectByTargetId("bg-main"));const s=Wt(e,"transform");let c=Wt(e,"duration");(!c||typeof c!="number")&&(c=1e3);let l;if(s)try{const f=JSON.parse(s.toString());l=vc("bg-main",f,c),l[0].alpha=0;const h=(Math.random()*10).toString(16),p={name:h,effects:l};$.animationManager.addAnimation(p),c=pi(h),$.animationManager.nextEnterAnimationName.set("bg-main",h)}catch{u()}else u();function u(){l=vc("bg-main",{},c),l[0].alpha=0;const h=(Math.random()*10).toString(16),p={name:h,effects:l};$.animationManager.addAnimation(p),c=pi(h),$.animationManager.nextEnterAnimationName.set("bg-main",h)}return Wt(e,"enter")&&($.animationManager.nextEnterAnimationName.set("bg-main",Wt(e,"enter").toString()),c=pi(Wt(e,"enter").toString())),Wt(e,"exit")&&($.animationManager.nextExitAnimationName.set("bg-main-off",Wt(e,"exit").toString()),c=pi(Wt(e,"exit").toString())),a&&r($t({key:"bgX",value:a})),o&&r($t({key:"bgY",value:o})),r($t({key:"bgName",value:e.content})),{performName:"changeBg."+Kn(),duration:c,isHoldOn:!1,skipNextCollect:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Ebe(e){let t="center",r=e.content,n=!1,i="",a="",o="",s=500,c="",l="",u="",f="",h="",p="";const d=le.dispatch;for(const w of e.args)switch(w.key){case"left":w.value===!0&&(t="left");break;case"right":w.value===!0&&(t="right");break;case"clear":w.value===!0&&(r="");break;case"id":n=!0,o=w.value.toString();break;case"motion":i=w.value.toString();break;case"expression":a=w.value.toString();break;case"mouthOpen":c=w.value.toString(),c=At(c,Et.figure);break;case"mouthClose":l=w.value.toString(),l=At(l,Et.figure);break;case"mouthHalfOpen":u=w.value.toString(),u=At(u,Et.figure);break;case"eyesOpen":f=w.value.toString(),f=At(f,Et.figure);break;case"eyesClose":h=w.value.toString(),h=At(h,Et.figure);break;case"animationFlag":p=w.value.toString();break;case"none":r="";break}const g=o||`fig-${t}`,v=le.getState().stage.figureAssociatedAnimation.filter(w=>w.targetId!==g),m={targetId:g,animationFlag:p,mouthAnimation:{open:c,close:l,halfOpen:u},blinkAnimation:{open:f,close:h}};v.push(m),d($t({key:"figureAssociatedAnimation",value:v}));let y=!0;if(o!==""){const w=le.getState().stage.freeFigure.find(E=>E.key===o);w&&w.name===e.content&&(y=!1)}else t==="center"&&le.getState().stage.figName===e.content&&(y=!1),t==="left"&&le.getState().stage.figNameLeft===e.content&&(y=!1),t==="right"&&le.getState().stage.figNameRight===e.content&&(y=!1);if(y){const w=`fig-${t}`,E=`${o}`;le.dispatch(Bn.removeEffectByTargetId(w)),le.dispatch(Bn.removeEffectByTargetId(E))}const b=(w,E)=>{const C=Wt(E,"transform"),T=Wt(E,"duration");T&&typeof T=="number"&&(s=T);let A;if(C){console.log(C);try{const k=JSON.parse(C.toString());A=vc(w,k,s),A[0].alpha=typeof k.alpha=="number"?0:1;const F=(Math.random()*10).toString(16),M={name:F,effects:A};$.animationManager.addAnimation(M),s=pi(F),$.animationManager.nextEnterAnimationName.set(w,F)}catch{I()}}else I();function I(){A=vc(w,{},s),A[0].alpha=0;const F=(Math.random()*10).toString(16),M={name:F,effects:A};$.animationManager.addAnimation(M),s=pi(F),$.animationManager.nextEnterAnimationName.set(w,F)}const O=Wt(E,"enter"),P=Wt(E,"exit");O&&($.animationManager.nextEnterAnimationName.set(w,O.toString()),s=pi(O.toString())),P&&($.animationManager.nextExitAnimationName.set(w+"-off",P.toString()),s=pi(P.toString()))};if(n){le.getState().stage.freeFigure;const w={key:o,name:r,basePosition:t};b(o,e),i&&d(Bn.setLive2dMotion({target:o,motion:i})),a&&d(Bn.setLive2dExpression({target:o,expression:a})),d(Bn.setFreeFigureByKey(w))}else{const w={center:"fig-center",left:"fig-left",right:"fig-right"},E={center:"figName",left:"figNameLeft",right:"figNameRight"};o=w[t],b(o,e),i&&d(Bn.setLive2dMotion({target:o,motion:i})),a&&d(Bn.setLive2dExpression({target:o,expression:a})),d($t({key:E[t],value:r}))}return{performName:"changeFigure."+Kn(),duration:s,isHoldOn:!1,skipNextCollect:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}}const F9=(e,t)=>{var r;$.sceneManager.lockSceneWrite||($.sceneManager.lockSceneWrite=!0,(r=window==null?void 0:window.pubsub)==null||r.publish("loading",{loading:!0}),aa(e).then(async n=>{var a;const i=await $.sceneManager.setCurrentScene(n,t,e,!0);if((a=window==null?void 0:window.pubsub)==null||a.publish("loading",{loading:!1}),i){$.sceneManager.sceneData.currentSentenceId=0;const o=[];$.sceneManager.sceneData.currentScene.assetsList.forEach(l=>{(l.url.endsWith(".mp4")||l.url.endsWith(".flv"))&&o.push(l.url)}),$.videoManager.destroyExcept(o);const s=$.sceneManager.sceneData.currentScene.subSceneList;$.sceneManager.settledScenes.push(e);const c=L0(s);Bh(c),qe.debug("",$.sceneManager.sceneData),$.sceneManager.lockSceneWrite=!1,jn()}}).catch(n=>{qe.error("",n),$.sceneManager.lockSceneWrite=!1}))},Sbe=e=>{const t=e.content.split("/"),r=t[t.length-1];return F9(e.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},N9=e=>{const t=$.sceneManager.sceneData.currentSentenceId;let r=t;$.sceneManager.sceneData.currentScene.sentenceList.forEach((n,i)=>{n.command===Bt.label&&n.content===e&&i!==t&&(r=i)}),$.sceneManager.sceneData.currentSentenceId=r,setTimeout(jn,1)},Cbe="_Choose_Main_wn0n1_1",Tbe="_Choose_item_wn0n1_15",Abe="_Choose_item_image_wn0n1_37",Ibe="_Choose_item_countdown_wn0n1_52",Rbe="_Choose_item_countdown_disabled_wn0n1_59",Pbe="_Choose_item_progress_bar_wn0n1_66",Obe="_Choose_item_disabled_wn0n1_75",Su={Choose_Main:Cbe,Choose_item:Tbe,Choose_item_image:Abe,Choose_item_countdown:Ibe,Choose_item_countdown_disabled:Rbe,Choose_item_progress_bar:Pbe,Choose_item_disabled:Obe},kbe=""+new URL("progress-bar-bg.png",import.meta.url).href,Fbe=""+new URL("progress-bar.png",import.meta.url).href,L9=e=>oa.post("/game/buy_chapter",{gId:$.gameId,productId:e}).then(t=>t.data).catch(t=>(console.error(t),{code:-999,data:null,message:""})),Nbe=()=>oa.post("/game/buy",{gId:$.gameId}).then(e=>(e.data.code===0&&Lbe(),e.data)).catch(e=>(console.error(e),{code:-999,data:!1,message:""})),e_=e=>oa.post("/game/product_id_is_buy",{gId:$.gameId,productId:e}).then(t=>{if(t.data.code===0){const r=[...le.getState().storeData.paymentConfigurationList],n=r.findIndex(i=>i.product_id===e);if(n>-1){const i={...r[n]};i.is_buy=t.data.data,r[n]=i,le.dispatch(Jue(r))}}return t.data}).catch(t=>(console.error(t),{code:-999,data:!1,message:""})),Lbe=()=>oa.get("/game/get_game_info?gId="+$.gameId).then(e=>(e.data.code===0&&le.dispatch(r2(e.data.data)),e.data)).catch(e=>(console.error(e),{code:-999,data:null,message:""})),Bbe=()=>oa.post("/user/recharge_config_list",{is_show:1}).then(e=>e.data).catch(e=>(console.error(e),{code:-999,data:null,message:""})),Mbe=e=>oa.post("/user/recharge",{recharge_id:e}).then(t=>t.data).catch(t=>(console.error(t),{code:-999,data:null,message:""})),Dbe=e=>oa.post("/user/recharge_status",{order_no:e}).then(t=>t.data).catch(t=>(console.error(t),{code:-999,data:null,message:""}));function eo(e){return new Promise(t=>{setTimeout(t,e)})}const Ube="_main_1qr2u_1",jbe="_singleButton_1qr2u_12",$be="_singleButton_fast_1qr2u_19",Gbe="_singleButton_auto_1qr2u_23",Vbe="_singleButton_auto_active_1qr2u_27",Hbe="_singleButton_fast_active_1qr2u_31",Xbe="_autoIcon_1qr2u_35",zbe="_fastIcon_1qr2u_48",Wbe="_historyIcon_1qr2u_61",Ybe="_fastSlPreview_1qr2u_74",qbe="_fastSlEnter_1qr2u_1",Kbe="_fastsave_1qr2u_88",Zbe="_fastSPreview_1qr2u_88",Jbe="_fastload_1qr2u_92",Qbe="_fastLPreview_1qr2u_92",ewe="_slPreviewMain_1qr2u_104",twe="_imgContainer_1qr2u_112",rwe="_textContainer_1qr2u_120",Ur={main:Ube,singleButton:jbe,singleButton_fast:$be,singleButton_auto:Gbe,singleButton_auto_active:Vbe,singleButton_fast_active:Hbe,autoIcon:Xbe,fastIcon:zbe,historyIcon:Wbe,fastSlPreview:Ybe,fastSlEnter:qbe,fastsave:Kbe,fastSPreview:Zbe,fastload:Jbe,fastLPreview:Qbe,slPreviewMain:ewe,imgContainer:twe,textContainer:rwe},B9=e=>{const t=document.getElementById("Button_ControlPanel_auto");if(t){let r=Ur.singleButton+" "+Ur.singleButton_auto;e?t.className=r+" "+Ur.singleButton_auto_active:t.className=r}},Xy=()=>{$.gameplay.isAuto=!1,B9(!1),$.gameplay.autoInterval!==null&&(clearInterval($.gameplay.autoInterval),$.gameplay.autoInterval=null),$.gameplay.autoTimeout!==null&&(clearTimeout($.gameplay.autoTimeout),$.gameplay.autoTimeout=null)},M9=()=>{$.gameplay.isAuto?Xy():($.gameplay.isAuto=!0,B9(!0),$.gameplay.autoInterval=setInterval(iwe,100))},nwe=()=>{jn(),$.gameplay.autoTimeout=null},iwe=()=>{const t=750-250*le.getState().userData.optionData.autoSpeed;let r=!1;$.gameplay.performController.performList.forEach(n=>{n.blockingAuto()&&(r=!0)}),!r&&$.gameplay.autoTimeout===null&&($.gameplay.autoTimeout=setTimeout(nwe,t))},w2=e=>{const t=document.getElementById("Button_ControlPanel_fast"),r=Ur.singleButton+" "+Ur.singleButton_fast;t&&(e?t.className=r+" "+Ur.singleButton_fast_active:t.className=r)},is=()=>{E2()&&($.gameplay.isFast=!1,w2(!1),$.gameplay.fastTimeout!==null&&(clearTimeout($.gameplay.fastTimeout),$.gameplay.fastTimeout=null))},D9=()=>{if(E2())return;$.gameplay.isFast=!0,w2(!0);let e=0;const t=()=>{if(!E2()){$.gameplay.fastTimeout&&clearTimeout($.gameplay.fastTimeout),$.gameplay.fastTimeout=null,w2(!1);return}if(e>=19){is();return}console.log(""),jn(),e++,$.gameplay.fastTimeout=setTimeout(t,200)};t()},E2=function(){return $.gameplay.isFast},iR=()=>{is(),Xy()},U9=()=>{$.gameplay.isFast?is():D9()},awe=async e=>{await oa.post("/third_payment_record_report",e).then(()=>{console.log("")}).catch(t=>{console.error(": ",t)})},owe=async e=>{await oa.post("/third_user_online_report",e).then(()=>{console.log("")}).catch(t=>{console.error(": ",t)})},swe=async e=>{await oa.post("/third_user_online_log_report",e).then(()=>{console.log(" ")}).catch(t=>{console.error(" : ",t)})},j9=async e=>{await oa.post("/third_product_chapter_report",e).then(()=>{console.log(" ")}).catch(t=>{console.error(" : ",t)})};function U0(){let e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}-${r}-${n} ${i}:${a}:${o}`}class aR{constructor(t,r){nt(this,"text");nt(this,"jump");nt(this,"jumpToScene");nt(this,"showCondition");nt(this,"enableCondition");nt(this,"shouldPay");nt(this,"amount");nt(this,"salesType");nt(this,"productId");nt(this,"hasBought");nt(this,"style");this.text=t,this.jump=r,this.jumpToScene=r.match(/\./)!==null}static parse(t,r){const n=t.split("->"),i=n.length>1?n[0]:null,a=n.length>1?n[1]:n[0],o=a.split(":"),s=o[0].replace(/[\$\#]{[^{}]*}/,""),c=new aR(s,o[1]),l=/\$\{(.*?)\}/,u=a.match(l);if(u){const p=u[1].split(","),d={};p.forEach(g=>{const[_,v]=g.split("=");_&&v&&(d[_.trim()]=isNaN(Number(v.trim()))?v.trim():Number(v.trim()))}),c.style=d}const f=/\#\{(.*?)\}/.exec(a);if(f&&le.getState().storeData.isEditorPreviewMode===!0){const p=f[1].split(",");let d=0,g=0,_=1;p.forEach(m=>{const[y,b]=m.split("=");y==="productId"?d=isNaN(Number(b.trim()))?0:Number(b.trim()):y==="amount"?g=isNaN(Number(b.trim()))?0:Number(b.trim()):y==="salesType"&&(_=isNaN(Number(b.trim()))?1:Number(b.trim()))});const v=le.getState().storeData.paymentConfigurationList.find(m=>m.product_id===d);d>0&&g>0&&(c.shouldPay=!0,c.productId=d,c.amount=g,c.salesType=_,e_(d).then(m=>{r.current[d]=!0})),(v==null?void 0:v.is_buy)===!0&&(c.hasBought=!0)}if(i!==null){const h=i.match(/\((.*)\)/);h&&(c.showCondition=h[1]);const p=i.match(/\[(.*)\]/);p&&(c.enableCondition=p[1])}return c}}const S2=(e,t)=>{var g;const r=e.content.split("|");let n=!1,i="";const a={current:{}},o=r.map(_=>aR.parse(_,a)),c=le.getState().userData.optionData.textboxFont===nc.song?'"", serif':'"WebgalUI", serif',{playSeEnter:l,playSeClick:u}=Nh();let f={current:!1},h={current:null};(g=e==null?void 0:e.args)==null||g.forEach(_=>{var v;_.key==="isChooseEvent"&&(n=!!_.value),_.key==="chooseEventId"&&(i=(v=_.value)==null?void 0:v.toString())}),is();function p(_){if(n&&i){const v={thirdUserId:Js(),productId:String($.gameId),optionId:String(i),reportTime:U0(),channel:sessionStorage.getItem("sdk-userId")?1:0,optionName:_};j9(v)}}const d=_=>_.filter((v,m)=>v2(v.showCondition)).map((v,m)=>{var T,A,I,O;const y=v2(v.enableCondition);let b=y?`${Su.Choose_item} interactive`:Su.Choose_item_disabled,w=Date.now();const E=()=>{if(!y&&!f.current)return;u();const P=()=>{if(t==null||t(),h.current&&(clearTimeout(h.current),h.current=null),v.jumpToScene){const k=v.jump.split("./game/scene/")[1];F9(v.jump,k)}else N9(v.jump);p(v.text),f.current=!1,$.gameplay.performController.unmountPerform("choose")};if(v.shouldPay){const k=()=>{window.pubsub.publish("loading",{loading:!0}),L9(v.productId??0).then(async G=>{window.pubsub.publish("loading",{loading:!1}),await eo(2e3),G.code===0?(window.pubsub.publish("toaster",{show:!0,text:""}),P()):G.code===10014?(window.pubsub.publish("toaster",{show:!0,text:""}),window.pubsub.publish("rechargeModal",{})):window.pubsub.publish("toaster",{show:!0,text:G.message})}).catch(()=>{window.pubsub.publish("loading",{loading:!1})})};let F=!1;const M=le.getState().storeData.paymentConfigurationList.find(G=>G.product_id===v.productId);M&&(F=M.is_buy);const D=()=>{ma({title:"",content:`${v.amount}${v.salesType===1?"":""}`,suffixContent:"",leftText:"",rightText:"",type:"pay",leftFunc:()=>{},rightFunc:k})};if(F){a.current[v.productId||""]?P():e_(v.productId??0).then(G=>{G.code===0&&(a.current[v.productId||""]=!0,G.data.is_buy?P():D())});return}a.current[v.productId||""]&&!F?D():e_(v.productId??0).then(G=>{G.code===0&&(a.current[v.productId||""]=!0,G.data.is_buy?P():D())});return}else P()};let C={fontFamily:c};if(v.style&&(C=qn(v.style)),y||(C.cursor="not-allowed"),typeof((T=v.style)==null?void 0:T.countdown)=="number"){b=y?Su.Choose_item_countdown:Su.Choose_item_countdown_disabled;let P=v.style.countdown,k=1082,F=1082/(P*1e3/16);const M=()=>{P<=0&&h.current?(clearTimeout(h),h.current=null,f.current=!y,E()):h.current=setTimeout(()=>{P-=.016,k-=F;let D=document.getElementById("rect");D==null||D.setAttribute("width",Math.max(0,k).toString()),M()},16)};return M(),L.jsxs(kr.Fragment,{children:[L.jsxs("div",{className:b,style:C,children:[L.jsx("img",{src:kbe,alt:v.text,style:{width:"1082px",height:"106px"}}),L.jsx("img",{src:Fbe,className:Su.Choose_item_progress_bar})]}),L.jsx("svg",{width:"0",height:"0",children:L.jsx("defs",{children:L.jsx("clipPath",{id:"myClip",children:L.jsx("rect",{id:"rect",width:"1082",height:"106",rx:"53",ry:"53",style:{fill:"#ffffff"}})})})})]},v.jump+m)}if((A=v.style)!=null&&A.image){let P="";((I=v.style)!=null&&I.image.includes("-idle.png")||(O=v.style)!=null&&O.image.includes("-active.png"))&&(P="-18px"),b=`${Su.Choose_item_image} interactive`;const k=At(v.style.image,Et.ui),F=`img-option-${m}`,M=new Image;return M.src=k,M.onload=function(){let D=document.getElementById(F),G=D==null?void 0:D.querySelectorAll("img");G==null||G.forEach(function(Y){Y.remove()});const Q=Mt(M.naturalWidth)+"px",te=Mt(M.naturalHeight)+"px";M.style.width=Q,M.style.height=te,M.style.position="absolute",P&&(M.style.top=P),M.alt=v.text,D&&(D.style.width=Q,D.style.height=te,D==null||D.prepend(M),D=null)},L.jsx("div",{id:F,className:b,style:C,onMouseEnter:y?l:void 0,onMouseDown:y?D=>{const G=D.currentTarget;G.className=`${b} btn-clicked`,w=Date.now()}:void 0,onMouseUp:y?D=>{const G=Date.now()-w;let Q=D.currentTarget;setTimeout(()=>{Q.className=b,Q=null,setTimeout(E,320)},G-350>0?0:350-G)}:void 0,children:L.jsxs("span",{children:[v.text,!v.hasBought&&v.shouldPay&&L.jsxs("span",{style:{marginLeft:8,fontSize:"0.7em"},children:["(",v.amount,v.salesType===1?"":"",")"]})]})},v.jump+m)}return L.jsxs("div",{className:b,style:C,onMouseEnter:y?l:void 0,onMouseDown:y?P=>{const k=P.currentTarget;k.className=`${b} btn-clicked`,w=Date.now()}:void 0,onMouseUp:y?P=>{const k=Date.now()-w;let F=P.currentTarget;setTimeout(()=>{F.className=b,F=null,setTimeout(E,320)},k-350>0?0:350-k)}:void 0,children:[v.text,!v.hasBought&&v.shouldPay&&L.jsxs("span",{style:{marginLeft:8,fontSize:"0.7em"},children:["(",v.amount,")"]})]},v.jump+m)});return Zl.render(L.jsx("div",{className:Su.Choose_Main,children:d(o)}),document.getElementById("chooseContainer")),{performName:"choose",duration:1e3*60*60*24*3650,isHoldOn:!1,stopFunction:()=>{Zl.render(L.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},lwe=e=>(qe.debug(`${e.content}`),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),uwe=e=>(e.content!==""&&e.content!=="none"?le.dispatch($t({key:"enableFilm",value:e.content})):le.dispatch($t({key:"enableFilm",value:""})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),cwe="_Choose_Main_bjhyz_1",fwe="_Choose_item_bjhyz_13",hwe="_glabalDialog_container_inner_bjhyz_28",dwe="_glabalDialog_container_bjhyz_28",pwe="_title_bjhyz_47",vwe="_button_bjhyz_59",pl={Choose_Main:cwe,Choose_item:fwe,glabalDialog_container_inner:hwe,glabalDialog_container:dwe,title:pwe,button:vwe},gwe=e=>{const t=e.content.toString().trim(),r=Wt(e,"title"),n=(r===0?"Please Input":r)??"Please Input",i=Wt(e,"buttonText"),a=(i===0?"OK":i)??"OK",s=le.getState().userData.optionData.textboxFont===nc.song?'"", serif':'"WebgalUI", serif',{playSeEnter:c,playSeClick:l}=Nh();let u=Date.now();const f=L.jsx("div",{style:{fontFamily:s},className:pl.glabalDialog_container,children:L.jsxs("div",{className:pl.glabalDialog_container_inner,children:[L.jsx("div",{className:pl.title,children:n}),L.jsx("input",{id:"user-input",className:pl.Choose_item}),L.jsx("div",{onMouseEnter:c,onMouseDown:h=>{const p=h.currentTarget;p.className=`${pl.button} interactive btn-clicked`,u=Date.now()},onMouseUp:h=>{const p=Date.now()-u;let d=h.currentTarget;setTimeout(()=>{d.className=pl.button,d=null;const g=document.getElementById("user-input");g&&le.dispatch(uj({key:t,value:((g==null?void 0:g.value)??"")===""?" ":(g==null?void 0:g.value)??""})),l(),$.gameplay.performController.unmountPerform("userInput"),jn()},p-350>0?0:350-p)},className:`${pl.button} interactive`,children:a})]})});return Zl.render(L.jsx("div",{className:pl.Choose_Main,children:f}),document.getElementById("chooseContainer")),{performName:"userInput",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{Zl.render(L.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},mwe="_FullScreenPerform_main_7er8a_2",_we="_FullScreenPerform_element_7er8a_9",ywe="_fullScreen_video_7er8a_17",xwe="_fadeIn_7er8a_74",bwe="_intro_showSoftly_7er8a_1",wwe="_slideIn_7er8a_80",Ewe="_typingEffect_7er8a_86",Swe="_typing_7er8a_86",Cwe="_blinkCursor_7er8a_1",Twe="_pixelateEffect_7er8a_95",Awe="_pixelateAnimation_7er8a_1",Iwe="_revealAnimation_7er8a_101",Rwe="_videoContainer_7er8a_115",_l={FullScreenPerform_main:mwe,FullScreenPerform_element:_we,fullScreen_video:ywe,fadeIn:xwe,intro_showSoftly:bwe,slideIn:wwe,typingEffect:Ewe,typing:Swe,blinkCursor:Cwe,pixelateEffect:Twe,pixelateAnimation:Awe,revealAnimation:Iwe,videoContainer:Rwe},Pwe=e=>{const t=`introPerform${Math.random().toString()}`;let r,n="rgba(0, 0, 0, 1)",i="rgba(255, 255, 255, 1)";const a=(w,E=0)=>{switch(w){case"fadeIn":return _l.fadeIn;case"slideIn":return _l.slideIn;case"typingEffect":return`${_l.typingEffect} ${E}`;case"pixelateEffect":return _l.pixelateEffect;case"revealAnimation":return _l.revealAnimation;default:return _l.fadeIn}};let o=_l.fadeIn,s=1500,c=!1;for(const w of e.args){if(w.key==="backgroundColor"&&(n=w.value||"rgba(0, 0, 0, 1)"),w.key==="fontColor"&&(i=w.value||"rgba(255, 255, 255, 1)"),w.key==="fontSize")switch(w.value){case"small":r="280%";break;case"medium":r="350%";break;case"large":r="420%";break}if(w.key==="animation"&&(o=a(w.value)),w.key==="delayTime"){const E=parseInt(w.value.toString(),10);s=isNaN(E)?s:E}w.key==="hold"&&w.value===!0&&(c=!0)}const l={background:n,color:i,fontSize:r||"350%",width:"100%",height:"100%"},u=e.content.split(/\|/);let h=1e3+s*u.length;const p=c?1e3*60*60*24:1e3+s*u.length;let d=!0,g=setTimeout(()=>{d=!1},h),_=setTimeout(()=>{});const v=()=>{const w=document.getElementById("introContainer");if(h-=s,clearTimeout(g),g=setTimeout(()=>{d=!1},h),w){const E=w.childNodes[0].childNodes[0].childNodes,C=E.length;E.forEach((T,A)=>{const I=Number(T.style.animationDelay.split("ms")[0]);I>0&&(T.style.animationDelay=`${I-s}ms`),A===C-1&&(I===0?(clearTimeout(_),$.gameplay.performController.unmountPerform(t)):(clearTimeout(_),c||(_=setTimeout(()=>{$.gameplay.performController.unmountPerform(t),setTimeout(jn,0)},h))))})}};$.events.userInteractNext.on(v);const m=u.map((w,E)=>L.jsxs("div",{style:{animationDelay:`${s*E}ms`},className:o,children:[w,w===""?"":""]},"introtext"+E+Math.random().toString())),y=L.jsx("div",{style:l,children:L.jsx("div",{style:{padding:"3em 4em 3em 4em"},children:m})});Zl.render(y,document.getElementById("introContainer"));const b=document.getElementById("introContainer");return b&&(b.style.display="block"),{performName:t,duration:p,isHoldOn:!1,stopFunction:()=>{const w=document.getElementById("introContainer");w&&(w.style.display="none"),$.events.userInteractNext.off(v)},blockingNext:()=>d,blockingAuto:()=>d,stopTimeout:void 0,goNextWhenOver:!0}},Owe=e=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),kwe=e=>{let t=e.content;return(e.content==="none"||e.content==="")&&(t=""),le.dispatch($t({key:"miniAvatar",value:t})),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Fwe="modulepreload",Nwe=function(e,t){return new URL(e,t).href},t4={},Lwe=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=Nwe(a,n),a in t4)return;t4[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Fwe,o||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),o)return new Promise((u,f)=>{l.addEventListener("load",u),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},$9=new Map;function Bwe(e){return e?typeof e=="string"?e:e():null}function G9(e){const t=Bwe(e);return t||(qe.error("Get name of perform failed. There no name of the perform."),"")}function d9e(e,t){if(!t||typeof t!="function")throw new Error(`"${e}" is not a callback.`);$9.set(G9(e),t)}function Mwe(e,t=[]){const r=$9.get(G9(e));if(!r||!(r instanceof Function))throw qe.error(`Can't call the perform named "${e}"`),new Error(`"${e}" don't have the pixiPerform callback.`);return r(...t)}Lwe(()=>import("./initRegister-85fea3f2.js"),[],import.meta.url);const Dwe=e=>{const t="PixiPerform"+e.content;$.gameplay.performController.performList.forEach(a=>{if(a.performName===t)return{performName:"none",duration:0,isOver:!1,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}});const r=Mwe(e.content),{container:n,tickerKey:i}=r;return{performName:t,duration:0,isHoldOn:!0,stopFunction:()=>{var a,o;qe.warn("pixi"),n.destroy({texture:!0,baseTexture:!0}),(a=$.gameplay.pixiStage)==null||a.effectsContainer.removeChild(n),(o=$.gameplay.pixiStage)==null||o.removeAnimation(i)},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}};async function gp(e){if(!window.isSafari||!e.toLowerCase().endsWith(".ogg"))return e;const r=await(await fetch(e)).arrayBuffer();return new Promise((n,i)=>{const a=new Worker(new URL(""+new URL("audio-worker-2c7e7131.js",import.meta.url).href,self.location),{type:"module"});a.postMessage({arrayBuffer:r}),a.onmessage=o=>{if(o.data.errorMessage)console.error(o.data.errorMessage,o.data.error),i(o.data.error),a.terminate();else if(o.data.message)console.info(o.data.message);else{const s=o.data.audioData,c=Uwe(s);n(c),a.terminate()}},a.onerror=o=>{i(new Error("Worker error: "+o.message)),a.terminate()}})}function Uwe(e){const r=new(window.AudioContext||window.webkitAudioContext)().createBuffer(e.channelData.length,e.samplesDecoded,e.sampleRate);for(let a=0;a<e.channelData.length;a++)r.copyToChannel(e.channelData[a],a);const n=new OfflineAudioContext(r.numberOfChannels,r.length,r.sampleRate),i=n.createBufferSource();return i.buffer=r,i.connect(n.destination),i.start(),n.startRendering().then(a=>{const o=jwe(a),s=new Blob([o],{type:"audio/wav"});return URL.createObjectURL(s)})}function jwe(e){const t=e.numberOfChannels,r=e.length*t*2+44,n=new ArrayBuffer(r),i=new DataView(n),a=[];let o,s=0,c=0;u(1179011410),u(r-8),u(1163280727),u(544501094),u(16),l(1),l(t),u(e.sampleRate),u(e.sampleRate*2*t),l(t*2),l(16),u(1635017060),u(r-c-4);for(let f=0;f<e.numberOfChannels;f++)a.push(e.getChannelData(f));for(;c<r;){for(let f=0;f<t;f++)o=Math.max(-1,Math.min(1,a[f][s])),o=(.5+o<0?o*32768:o*32767)|0,i.setInt16(c,o,!0),c+=2;s++}function l(f){i.setUint16(c,f,!0),c+=2}function u(f){i.setUint32(c,f,!0),c+=4}return n}const V9=e=>{var a;qe.debug("play SE",e);let t="effect-sound";$.gameplay.performController.unmountPerform(t,!0);let r=e.content,n=!1;if(Wt(e,"id")&&(t=`effect-sound-${((a=Wt(e,"id"))==null?void 0:a.toString())??""}`,$.gameplay.performController.unmountPerform(t,!0),n=!0,!r))return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};let i=!1;return{performName:"none",blockingAuto(){return!1},blockingNext(){return!1},isHoldOn:!1,stopFunction(){},stopTimeout:void 0,duration:1e3*60*60,arrangePerformPromise:new Promise(o=>{setTimeout(async()=>{var d;const s=Wt(e,"volume");let c=document.createElement("audio");c.src=await gp(r),c.load(),n&&(c.loop=!0);const l=le.getState().userData,u=l.optionData.volumeMain,f=typeof s=="number"&&s>=0&&s<=100?s:100,h=u*.01*(((d=l.optionData)==null?void 0:d.seVolume)??100)*.01*f*.01;c.volume=h,c.currentTime=0;const p={performName:t,duration:1e3*60*60,isHoldOn:n,skipNextCollect:!0,stopFunction:()=>{setTimeout(()=>{$.gameplay.performController.erasePerformFromState(t)},16),c.pause(),c.src="",c.load()},blockingNext:()=>!1,blockingAuto:()=>n?!1:!i,stopTimeout:void 0};o(p),c==null||c.play(),c.onended=()=>{for(const g of $.gameplay.performController.performList)g.performName===t&&(i=!0,g.stopFunction(),$.gameplay.performController.unmountPerform(g.performName))}},1)})}},r4=async(e,t,r)=>{const n=await H9(e,!0,t,r);le.dispatch(or.saveGame({index:e,saveData:n})),rme(e,e)};async function H9(e,t=!0,r,n){var l;const i=le.getState().stage,a=cn($.backlogManager.getBacklog());let o="";if(t){const u=document.getElementById("pixiCanvas"),f=document.createElement("canvas"),h=f.getContext("2d");f.width=480,f.height=270,h.drawImage(u,0,0,480,270),o=f.toDataURL("image/webp",.5),f.remove()}if(t&&$.videoManager.currentPlayingVideo){const u=$.videoManager.videosByKey[$.videoManager.currentPlayingVideo];u&&(o=u.poster)}if(n){const u=le.getState().saveData.saveData;o=((l=u==null?void 0:u[e])==null?void 0:l.previewImage)??""}const s=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1});return{nowStageState:cn(i),backlog:a,index:e,saveName:r||s,saveTime:s,sceneData:{currentSentenceId:$.sceneManager.sceneData.currentSentenceId,sceneStack:cn($.sceneManager.sceneData.sceneStack),sceneName:$.sceneManager.sceneData.currentScene.sceneName,sceneUrl:$.sceneManager.sceneData.currentScene.sceneUrl},previewImage:o}}function oR(){const e=le.getState().stage,t=cn($.backlogManager.getBacklog()),r=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),n={nowStageState:cn(e),backlog:t,saveTime:r,saveName:"",index:-1,previewImage:"",sceneData:{currentSentenceId:$.sceneManager.sceneData.currentSentenceId,sceneStack:cn($.sceneManager.sceneData.sceneStack),sceneName:$.sceneManager.sceneData.currentScene.sceneName,sceneUrl:$.sceneManager.sceneData.currentScene.sceneUrl}};return le.dispatch(or.setSaveVideoData(n)),n}const $we=e=>{const t=le.getState().userData,r=t.optionData.volumeMain,n=r*.01*t.optionData.vocalVolume*.01,i=r*.01*t.optionData.bgmVolume*.01;let a=!1,o="",s=!1,c=e.content==="none"||e.content==="",l="";const u=Date.now();le.dispatch(QS(!1)),le.dispatch($t({key:"showText",value:""})),le.dispatch($t({key:"showName",value:""})),le.dispatch(vt({component:"showTextBox",visibility:!1}));const f={current:()=>{console.log("")}};let h="";e.args.forEach(v=>{v.key==="choose"&&(o="choose:"+v.value),v.key==="continueBgm"&&v.value,v.key==="loop"?s=v.value===!0:v.key==="keep"?(a=v.value===!0,s=!0):v.key==="id"?l=v.value:v.key==="poster"&&(h=At(v.value,Et.image))}),l&&!c&&$.videoManager.setUrlIdMap(l,e.content);const p="videoPlay."+(l||Kn());if(c){if(!l)$.videoManager.destroy($.videoManager.currentPlayingVideo);else{const v=$.videoManager.idURLMap[l];v&&$.videoManager.destroy(v)}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}else h&&$.videoManager.setPoster(e.content,h);const d=()=>{let v=Wt(e,"skipOff"),m=!0;return $.gameplay.isFast?(v&&(m=!0),s&&(m=!1),o!==""&&(m=!0,f.current())):(v||s||o!=="")&&(m=!0),a&&(m=!1),m};$.videoManager.showVideo(e.content,a);let g=!1;return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:d,blockingAuto:()=>!0,stopTimeout:void 0,arrangePerformPromise:new Promise(v=>{const m=y=>{g=!0,$.gameplay.performController.unmountPerform(y.performName)};setTimeout(()=>{const y=e.content,b=le.getState().saveData.isLoadVideo;$.videoManager.seek(y,.03),$.videoManager.setVolume(y,i),$.videoManager.setLoop(y,s);const w=o?o.slice(7).split("|").map(A=>"game/scene/"+A.split(":")[1]):[];w.length&&Bh(w);const E=()=>{if(b){le.dispatch(vt({component:"showExtra",visibility:!0}));return}for(const A of $.gameplay.performController.performList)if(A.performName===p)if(o!==""&&!s){const I=tu(o,`${u}.txt`,""),O=$.videoManager.getDuration(y);$.videoManager.seek(y,(O||0)-.03),$.videoManager.pauseVideo(y);const P=I.sentenceList[0],k=S2(P,()=>{m(A)});$.gameplay.performController.arrangeNewPerform(k,P)}else m(A),jn()};f.current=E;const C={performName:p,duration:a?0:1e3*60*60*24*3650,isOver:!1,isHoldOn:!1,stopFunction:(A=!1)=>{if(!a){const I=document.getElementById("currentVocal");I&&(I.volume=n.toString()),$.videoManager.destroy(y,A)}},blockingNext:d,blockingAuto:()=>!g,stopTimeout:void 0,goNextWhenOver:!0};if(v(C),!a){const I=document.getElementById("currentVocal");I&&(I.volume=0 .toString())}$.videoManager.playVideo(y);const T=le.getState().saveData.saveData||[];if(T!=null&&T.length&&T.forEach(A=>{var I,O;(O=(I=A==null?void 0:A.nowStageState)==null?void 0:I.PerformList)==null||O.forEach(P=>{var k;((k=P==null?void 0:P.script)==null?void 0:k.content)===y&&setTimeout(()=>{le.dispatch(QS(!0))})})}),o&&s){const I=tu(o,`${u}.txt`,"").sentenceList[0],O=S2(I,E);$.gameplay.performController.arrangeNewPerform(O,I)}setTimeout(()=>{oR()},1e3),$.videoManager.onEnded(y,()=>{s?($.videoManager.seek(y,.03),$.videoManager.playVideo(y)):(le.dispatch(vt({component:"showTextBox",visibility:!0})),E())})},100)})}},Gwe=e=>{var o;le.getState().stage.currentDialogKey;const t=e.content,r=pi(t),n=(((o=Wt(e,"target"))==null?void 0:o.toString())??"default_id").toString(),i=`${n}-${t}-${r}`;let a;return setTimeout(()=>{var c,l;(c=$.gameplay.pixiStage)==null||c.stopPresetAnimationOnTarget(n);const s=Qm(t,n,r);s&&(qe.debug(`${t}${n}`,r),(l=$.gameplay.pixiStage)==null||l.registerAnimation(s,i,n))},32),a=()=>{setTimeout(()=>{var s;le.getState().stage.currentDialogKey,(s=$.gameplay.pixiStage)==null||s.removeAnimationWithSetEffects(i)},32)},{performName:i,duration:r,isHoldOn:!1,stopFunction:a,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Vwe(e,t){const r=$.gameplay.pixiStage.getStageObjByKey(e);function n(){r&&(r.pixiContainer.alpha=0,r.pixiContainer.blur=0)}function i(){r&&(r.pixiContainer.alpha=1,r.pixiContainer.blur=5)}function a(o){if(r){const s=r.pixiContainer,c=$.gameplay.pixiStage.frameDuration,l=t/c*o,u=1/l,f=5/l;s.alpha<1&&(s.alpha+=u),s.blur<5&&(s.blur+=f)}}return{setStartState:n,setEndState:i,tickerFunc:a}}const Hwe=[{name:"universalSoftIn",animationGenerateFunc:e9},{name:"universalSoftOff",animationGenerateFunc:t9},{name:"testblur",animationGenerateFunc:Vwe}],Xwe=e=>{var s,c,l;le.getState().stage.currentDialogKey;const t=e.content,r=Wt(e,"duration")??0,n=((s=Wt(e,"target"))==null?void 0:s.toString())??"0",i=`${n}-${t}-${r}`,a=zwe(t);let o=()=>{};if(a){qe.debug(`${t}${n}`,r);const u=a(n,r);(c=$.gameplay.pixiStage)==null||c.stopPresetAnimationOnTarget(n),(l=$.gameplay.pixiStage)==null||l.registerAnimation(u,i,n),o=()=>{var f;le.getState().stage.currentDialogKey,(f=$.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(i)}}return{performName:i,duration:r,isHoldOn:!1,stopFunction:o,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function zwe(e){const t=Hwe.find(r=>r.name===e);return qe.debug("",t),t?t.animationGenerateFunc:null}const Wwe=e=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Ywe=e=>{var l;le.getState().stage.currentDialogKey;const t=(Math.random()*10).toString(16),r=e.content;let n;try{n=JSON.parse(r)}catch{n=[]}const i={name:t,effects:n};$.animationManager.addAnimation(i);const a=pi(t),o=((l=Wt(e,"target"))==null?void 0:l.toString())??"0",s=`${o}-${t}-${a}`;let c=()=>{};return setTimeout(()=>{var f,h;(f=$.gameplay.pixiStage)==null||f.stopPresetAnimationOnTarget(o);const u=Qm(t,o,a);u&&(qe.debug(`${t}${o}`,a),(h=$.gameplay.pixiStage)==null||h.registerAnimation(u,s,o))},0),c=()=>{setTimeout(()=>{var u;le.getState().stage.currentDialogKey,(u=$.gameplay.pixiStage)==null||u.removeAnimationWithSetEffects(s)},0)},{performName:s,duration:a,isHoldOn:!1,stopFunction:c,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function qwe(e){return e.content==="hide"?le.dispatch($t({key:"isDisableTextbox",value:!0})):le.dispatch($t({key:"isDisableTextbox",value:!1})),{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const Kwe=e=>{var u;le.getState().stage.currentDialogKey;const t=(Math.random()*10).toString(16),r=e.content;let n;const i=Wt(e,"duration"),a=((u=Wt(e,"target"))==null?void 0:u.toString())??"0";try{const f=JSON.parse(r);n=vc(a,f,i)}catch{n=[]}const o={name:t,effects:n};$.animationManager.addAnimation(o);const s=Jwe(t),c=`${a}-${t}-${s}`;let l=()=>{};return setTimeout(()=>{var h,p;(h=$.gameplay.pixiStage)==null||h.stopPresetAnimationOnTarget(a);const f=Zwe(t,a,s);f&&(qe.debug(`${t}${a}`,s),(p=$.gameplay.pixiStage)==null||p.registerAnimation(f,c,a))},32),l=()=>{setTimeout(()=>{var f;le.getState().stage.currentDialogKey,(f=$.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(c)},32)},{performName:c,duration:s,isHoldOn:!1,stopFunction:l,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Zwe(e,t,r){const n=$.animationManager.getAnimations().find(i=>i.name===e);if(n){const i=n.effects.map(a=>{const o=cn({...XI,duration:0});return Object.assign(o,a),o.duration=a.duration,o});return qe.debug("",i),k9(i,t,r)}return null}function Jwe(e){const t=$.animationManager.getAnimations().find(r=>r.name===e);if(t){let r=0;return t.effects.forEach(n=>{r+=n.duration}),r}return 0}const Qwe=e=>{let t="0";for(const r of e.args)r.key==="target"&&(t=r.value.toString());return Wt(e,"enter")&&$.animationManager.nextEnterAnimationName.set(t,Wt(e,"enter").toString()),Wt(e,"exit")&&$.animationManager.nextExitAnimationName.set(t+"-off",Wt(e,"exit").toString()),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},eEe=e=>{const t=e.content;let r=e.content,n="default";return console.log(e,"bgm-sentence"),e.args.forEach(i=>{i.key==="name"&&(r=i.value.toString()),i.key==="series"&&(n=i.value.toString())}),qe.info(`BGM${r}${t}${n}`),le.dispatch(mj({name:r,url:t,series:n})),Ao(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},tEe=e=>{const t=e.content;let r=e.content,n="default",i="";return console.log(e,"cg-sentence"),e.args.forEach(a=>{a.key==="name"?r=a.value.toString():a.key==="series"?n=a.value.toString():a.key==="poster"&&(i=a.value.toString())}),qe.info(`CG${r}${t}${n}`),le.dispatch(gj({name:r,url:t,series:n,poster:i})),Ao(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};let rm;function t_(){rm&&clearInterval(rm),e();function e(){const t=new URLSearchParams(window.location.search).get("gameId")||"",r={thirdUserId:Js(),productId:String($.gameId)||t,reportTime:U0(),channel:sessionStorage.getItem("sdk-userId")?1:0};swe(r)}rm=setInterval(e,2*60*1e3)}function X9(){clearInterval(rm)}const rEe=e=>{fO(!0);const t=le.dispatch,r=At("start.txt",Et.scene);return setTimeout(()=>{$.sceneManager.resetScene()},5),t(or.resetFastSave()),z$(),aa(r).then(n=>{$.sceneManager.setCurrentScene(n,"start.txt",r)}),t(vt({component:"showTitle",visibility:!0})),t(vt({component:"isInGaming",visibility:!1})),SI(le.getState().GUI.titleBgm),X9(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},nEe=e=>(N9(e.content),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),iEe=e=>($.gameplay.performController.performList.forEach(t=>{if(t.performName.match(/PixiPerform/)){qe.warn("pixi ",t.performName);for(let r=0;r<$.gameplay.performController.performList.length;r++){const n=$.gameplay.performController.performList[r];n.performName===t.performName&&(n.stopFunction(),clearTimeout(n.stopTimeout),$.gameplay.performController.performList.splice(r,1),r--)}le.dispatch(Bn.removeAllPixiPerforms())}}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Or={audioContext:new AudioContext,source:null,analyser:void 0,dataArray:void 0,audioLevelInterval:setInterval(()=>{},0),blinkTimerID:setTimeout(()=>{},0),maxAudioLevel:0},aEe=e=>(Or.maxAudioLevel=Math.max(e,Or.maxAudioLevel),{OPEN_THRESHOLD:Or.maxAudioLevel*.75,HALF_OPEN_THRESHOLD:Or.maxAudioLevel*.5}),oEe=e=>{let t=!1;function r(){var n;t||e.animationEndTime&&Date.now()>e.animationEndTime||(t=!0,(n=$.gameplay.pixiStage)==null||n.performBlinkAnimation(e.key,e.animationItem,"closed",e.pos),Or.blinkTimerID=setTimeout(()=>{var a;(a=$.gameplay.pixiStage)==null||a.performBlinkAnimation(e.key,e.animationItem,"open",e.pos),t=!1;const i=Math.random()*300+3500;Or.blinkTimerID=setTimeout(r,i)},200))}r()},sEe=(e,t,r)=>{e.getByteFrequencyData(t);let n=0;for(let i=0;i<r;i++)n+=t[i];return n/r},n4=e=>{var h,p;const{audioLevel:t,OPEN_THRESHOLD:r,HALF_OPEN_THRESHOLD:n,currentMouthValue:i,lerpSpeed:a,key:o,animationItem:s,pos:c}=e;let l;t>r?l=1:t>n?l=.5:l=0;const u=i+(l-i)*a;(h=$.gameplay.pixiStage)==null||h.setModelMouthY(o,t);let f;u>.75?f="open":u>.25?f="half_open":f="closed",s!==void 0&&((p=$.gameplay.pixiStage)==null||p.performMouthSyncAnimation(o,s,f,c))};class lEe{constructor(t){nt(this,"subject");nt(this,"result");nt(this,"isEnd",!1);this.subject=t}with(t,r){return!this.isEnd&&this.subject===t&&(this.result=r(),this.isEnd=!0),this}endsWith(t,r){return!this.isEnd&&this.subject===t&&(this.result=r(),this.isEnd=!0),this.evaluate()}default(t){return this.isEnd||(this.result=t()),this.evaluate()}evaluate(){return this.result}}function zy(e){return new lEe(e)}const uEe=e=>{qe.debug("play vocal");const t="vocal-play",r=Wt(e,"vocal"),n=Wt(e,"volume");let i;i=le.getState().stage;let a="",o="";const s=i.freeFigure,c=i.figureAssociatedAnimation;let l=0,u=0;const f=1;let h=document.getElementById("currentVocal");$.gameplay.performController.unmountPerform("vocal-play",!0),h!==null&&(h.currentTime=0,h.pause());for(const d of e.args)d.value===!0&&zy(d.key).with("left",()=>{a="left"}).with("right",()=>{a="right"}).endsWith("center",()=>{a="center"}),d.key==="figureId"&&(o=`${d.value.toString()}`);le.dispatch($t({key:"playVocal",value:r})),le.dispatch($t({key:"vocal",value:r}));let p=!1;return{arrangePerformPromise:new Promise(d=>{setTimeout(()=>{let g=document.getElementById("currentVocal");if(typeof n=="number"&&n>=0&&n<=100?le.dispatch($t({key:"vocalVolume",value:n})):le.dispatch($t({key:"vocalVolume",value:100})),g!==null){g.currentTime=0;const _={performName:t,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:()=>{clearInterval(Or.audioLevelInterval),g.pause(),o=o||`fig-${a}`;const m=c.find(y=>y.targetId===o);n4({audioLevel:0,OPEN_THRESHOLD:1,HALF_OPEN_THRESHOLD:1,currentMouthValue:u,lerpSpeed:f,key:o,animationItem:m,pos:a}),clearTimeout(Or.blinkTimerID)},blockingNext:()=>!1,blockingAuto:()=>!p,skipNextCollect:!0,stopTimeout:void 0};$.gameplay.performController.arrangeNewPerform(_,e,!1),o=o||`fig-${a}`;const v=c.find(m=>m.targetId===o);if(v){const m=s.find(w=>w.key===o);if(m&&(a=m.basePosition),!Or.audioContext){let w;w=new AudioContext,Or.analyser=w.createAnalyser(),Or.analyser.fftSize=256,Or.dataArray=new Uint8Array(Or.analyser.frequencyBinCount)}Or.analyser||(Or.analyser=Or.audioContext.createAnalyser(),Or.analyser.fftSize=256),l=Or.analyser.frequencyBinCount,Or.dataArray=new Uint8Array(l);let y=document.getElementById("currentVocal");Or.source||(Or.source=Or.audioContext.createMediaElementSource(y),Or.source.connect(Or.analyser)),Or.analyser.connect(Or.audioContext.destination),Or.audioLevelInterval=setInterval(()=>{const w=sEe(Or.analyser,Or.dataArray,l),{OPEN_THRESHOLD:E,HALF_OPEN_THRESHOLD:C}=aEe(w);n4({audioLevel:w,OPEN_THRESHOLD:E,HALF_OPEN_THRESHOLD:C,currentMouthValue:u,lerpSpeed:f,key:o,animationItem:v,pos:a})},50);let b;b=Date.now()+1e4,oEe({key:o,animationItem:v,pos:a,animationEndTime:b}),setTimeout(()=>{clearTimeout(Or.blinkTimerID)},1e4)}g.onloadeddata=()=>{g==null||g.play()},g.onended=()=>{for(const m of $.gameplay.performController.performList)m.performName===t&&(p=!0,m.stopFunction(),$.gameplay.performController.unmountPerform(m.performName))}}},1)})}};function z9(e){return e===0?3:e===100?80:77*Number(e)/100}function cEe(e){return e===0?800:e===100?200:800-600*Number(e)/100}const fEe=e=>{const t=le.getState().stage,r=le.getState().userData,n=le.dispatch;let i=Math.random().toString(),a=e.content;const o=Wt(e,"concat"),s=Wt(e,"notend"),c=Wt(e,"speaker"),l=Wt(e,"clear"),u=Wt(e,"vocal"),f=Wt(e,"mode");o?(i=t.currentDialogKey,a=t.showText+a,n($t({key:"currentConcatDialogPrev",value:t.showText}))):n($t({key:"currentConcatDialogPrev",value:""})),n($t({key:"showText",value:a})),n($t({key:"vocal",value:""})),n($t({key:"dialogueMode",value:f})),r.optionData.voiceInterruption===yI.no&&u===null||(n($t({key:"playVocal",value:""})),$.gameplay.performController.unmountPerform("vocal-play",!0)),n($t({key:"currentDialogKey",value:i}));const p=z9(r.optionData.textSpeed)*e.content.length;for(const v of e.args)if(v.key==="fontSize")switch(v.value){case"default":n($t({key:"showTextSize",value:-1}));break;case"small":n($t({key:"showTextSize",value:Gl.small}));break;case"medium":n($t({key:"showTextSize",value:Gl.medium}));break;case"large":n($t({key:"showTextSize",value:Gl.large}));break}let d=t.showName;c!==null&&(d=c),f==="player"&&(d=""),f==="narrator"&&(d=""),l&&(d=""),n($t({key:"showName",value:d})),u&&uEe(e);const g=Kn();let _=750-r.optionData.textSpeed/100*2*250;return s&&(_=0),oR(),{performName:"say."+g,duration:p+_,isHoldOn:!1,stopFunction:()=>{$.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:s}},hEe=e=>{const t=le.getState().stage,r=le.getState().userData,n=le.dispatch,i={stageGameVar:t.GameVar,globalGameVar:r.globalGameVar};n($t({key:"showText",value:JSON.stringify(i)})),n($t({key:"showName",value:""})),qe.debug("",i),setTimeout(()=>{$.events.textSettle.emit()},0);const a=Kn(),o=750-r.optionData.textSpeed*250;return{performName:a,duration:o,isHoldOn:!1,stopFunction:()=>{$.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},dEe=e=>{const{content:t}=e,r=t.split(",");for(const n of r){const i=n.split("->");if(i.length>=2){const a=i[0],o=i[1];le.dispatch(Bn.replaceUIlable([a,o]))}}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},pEe=e=>(console.log(" >>>>>>>> start : ",{sentence:e}),(async()=>{var s,c;le.getState().GUI.isInGaming&&await oR(),await WI(),e!=null&&e.content;const r={};if(e.args.forEach(l=>{var u;switch(l.key){case"name":r.name=((u=l.value)==null?void 0:u.toString())??"";break;case"x":r.x=l.value&&Number(l.value)||0;break;case"y":r.y=l.value&&Number(l.value)||0;break;case"hideName":r.isHideName=l.value.toString()==="true";break}}),!r.name||!qI())return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const n=le.getState().saveData,i=(s=n==null?void 0:n.unlockStorylineList)==null?void 0:s.findIndex(l=>{var u;return((u=l==null?void 0:l.storyLine)==null?void 0:u.name)===r.name});let a;i!==-1&&(a=n.unlockStorylineList[i]);const o={name:r.name||"",thumbnailUrl:r.thumbnailUrl||"",x:r.x||0,y:r.y||0,isHideName:r.isHideName||!1,isUnlock:((c=a==null?void 0:a.storyLine)==null?void 0:c.isUnlock)||n.isUnlockStoryline};i===-1?le.dispatch(or.addStorylineList({storyLine:o,videoData:le.getState().saveData.saveVideoData})):le.dispatch(or.replaceStorylineList({index:i,data:{storyLine:o,videoData:le.getState().saveData.saveVideoData}})),G$()})(),{performName:Kn("unlockStoryline"),duration:16,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),vEe=e=>{var l;console.log(" >>>>>>>> start : ",{sentence:e});let t=(e==null?void 0:e.content)||"";const r={};if(r.url=t,e.args.forEach(u=>{var f,h;switch(u.key){case"unlockname":r.unlockname=((f=u.value)==null?void 0:f.toString())??"";break;case"x":r.x=u.value&&Number(u.value)||0;break;case"y":r.y=u.value&&Number(u.value)||0;break;case"condition":r.condition=((h=u.value)==null?void 0:h.toString())??"";break}}),!r.unlockname||!r.url)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const n=le.getState().saveData;if(!n.isShowUnlock)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const i=(l=n.unlockAchieveData)==null?void 0:l.findIndex(u=>u.unlockname===r.unlockname&&u.url===r.url);let a;i!==-1&&(a=n.unlockAchieveData[i]);const o=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),s={unlockname:r.unlockname||"",url:r.url||"",x:r.x||0,y:r.y||0,condition:r.condition||"",saveTime:o,isShowUnlock:(a==null?void 0:a.isShowUnlock)||n.isShowUnlock||!1},c=n.allUnlockAchieveList.map(u=>{let f={...u};return f.unlockname===r.unlockname&&r.url&&r.url.includes(f.url)&&(f=s),f});return le.dispatch(or.saveAllUnlockAchieveList(c)),i===-1?le.dispatch(or.addUnlockAchieveData(s)):le.dispatch(or.replaceUnlockAchieveData({index:i,data:s})),V$(),{performName:Kn("unlockPerform"),duration:16,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},i4=e=>{const t=/\{(.*?)\}/,r=e.match(t);if(r){const i=r[1].split(","),a={};return i.forEach(o=>{const[s,c]=o.split("=");s&&c&&(a[s.trim()]=isNaN(Number(c.trim()))?c.trim():Number(c.trim()))}),a}};function gEe(e){const t={isShowValueSwitch:!1,showValueName:"",showValueAxisX:0,showValueAxisY:0,showProgress:!1};return e!=null&&e.content&&(t.showValueName=e.content),e.args.forEach(r=>{r.key==="switchValue"?t.isShowValueSwitch=!!r.value:r.key==="x"?t.showValueAxisX=Number(r.value):r.key==="y"?t.showValueAxisY=Number(r.value):r.key==="showProgress"?t.showProgress=!!r.value:r.key==="progressBarBgStyle"?t.progressBarBgStyle=i4(r.value):r.key==="progressBarStyle"?t.progressBarStyle=i4(r.value):r.key==="maxValue"&&(t.maxValue=Number(r.value))}),le.dispatch(Lue(t)),{performName:Kn("showValue"),duration:1,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const mEe=e=>{if(le.getState().storeData.isEditorPreviewMode)return{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};let t={current:null};const r=Number(e.content),n=le.getState().storeData.paymentConfigurationList.find(l=>l.product_id===r);let i=n==null?void 0:n.sales_amount,a=n==null?void 0:n.sales_type;const o={current:!1};e.args.forEach(l=>{var u;switch(l.key){case"name":(u=l.value)==null||u.toString();break;case"amount":i||(i=isNaN(Number(l.value))?0:Number(l.value));break}});const s=(l=!1)=>{t.current=setTimeout(()=>{window.pubsub.publish("loading",{loading:!0})},l?0:2e3);const u=()=>{ma({title:`
`,rightText:"",rightFunc:()=>s(!0)})},f=()=>{L9(r??0).then(async h=>{window.pubsub.publish("loading",{loading:!1}),await eo(2e3),h.code===0?(window.pubsub.publish("toaster",{show:!0,text:""}),$.gameplay.performController.unmountPerform("payProduct")):h.code===10014?(window.pubsub.publish("toaster",{show:!0,text:""}),window.pubsub.publish("rechargeModal",{successCallback:s,closeCallback:s})):(window.pubsub.publish("toaster",{show:!0,text:h.message}),s())}).catch(()=>{window.pubsub.publish("loading",{loading:!1})})};e_(r).then(h=>{t.current&&clearTimeout(t.current),window.pubsub.publish("loading",{loading:!1}),h.code===0?h.data?$.gameplay.performController.unmountPerform("payProduct"):ma({title:"",content:`${i}${a===1?"":""}`,suffixContent:"",leftText:"",rightText:"",type:"pay",leftFunc:()=>{o.current=!0},rightFunc:f}):u()}).catch(()=>{window.pubsub.publish("loading",{loading:!1}),u()})};return s(),{performName:"payProduct",duration:1e3*60*60*24*3650,isHoldOn:!1,stopFunction:()=>{const l={performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};$.gameplay.performController.arrangeNewPerform(l,e,!1)},blockingNext:()=>(o.current&&(o.current=!1,s()),!0),blockingAuto:()=>!0,stopTimeout:void 0}},sR="https://pre.moyibian.com",W9=()=>{window.parent.postMessage({source:"cocos",data:{method:"IS_CAN_START"}},sR)},Y9=()=>{const e=new URLSearchParams(window.location.search).get("gameId");window.parent.postMessage({source:"cocos",data:{method:"GET_GAME_DETAIL",id:e}},sR)},_Ee=()=>{new URLSearchParams(window.location.search).get("gameId"),window.parent.postMessage({source:"cocos",data:{method:"GET_USER_INFO"}},sR)},yEe="https://test-api.idoltime.games/third_payment_record_report",lR=e=>{const{paymentAmount:t}=e,r=new URLSearchParams(window.location.search).get("gameId")||"",n={thirdUserId:sessionStorage.getItem("sdk-userId"),productId:String($.gameId)||r,payTime:new Date,amount:t,channel:1};Ql.post(yEe,{record:JSON.stringify(n)})},xEe=e=>{if(le.getState().storeData.isEditorPreviewMode)return{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};let t={current:null};const r=le.getState().storeData.gameInfo,{playSeEnter:n,playSeClick:i}=Nh(),a={current:!1};if(r!=null&&r.isBuy||(r==null?void 0:r.paymentMode)==="free")return{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};const o=()=>{window.pubsub.publish("toaster",{show:!0}),$.gameplay.performController.unmountPerform("finishTrial")},s=()=>{if(i(),window!==window.top)window.MessageSaveFunc=o,W9();else{const u=sessionStorage.getItem("sdk-token");window.globalThis.getUserInfo(u).then(f=>{console.warn("getUserInfo success : ",f);const h=le.getState().storeData.gameInfo;if(f.code===401){sessionStorage.setItem("sdk-token",""),window.location.reload();return}const{acoinBalance:p}=f.data,{paymentAmount:d,id:g}=h;p<d?window.globalThis.openRechargeDialog(u).then(_=>{a.current=!0}):window.globalThis.openBuyGameDialog(u,g).then(_=>{if(_.action==="CLOSE_DIALOG"){a.current=!0;return}console.warn("res",_),lR({paymentAmount:d}),o()})})}},c=(u=!1)=>{t.current=setTimeout(()=>{window.pubsub.publish("loading",{loading:!0})},u?0:2e3);const f=()=>{ma({title:`
`,rightText:"",rightFunc:()=>c(!0)})},h=m=>{if(t.current&&clearTimeout(t.current),window.pubsub.publish("loading",{loading:!1}),m){const{paymentMode:y,isBuy:b,paymentAmount:w}=m;y==="paid"&&b?(a.current=!1,$.gameplay.performController.unmountPerform("finishTrial")):ma({title:"",type:"pay",content:`${w}`,suffixContent:"",leftText:"",rightText:"",leftFunc:()=>{a.current=!0},rightFunc:s})}else f()};window.addEventListener("message",m=>{const y=m.data,{method:b,status:w,response:E}=y.data;b&&(b==="IS_CAN_START"&&w&&o(),b==="GET_GAME_DETAIL"&&h(E.data),["CHOOSE_MODEL_CLOSE","RECHARGE","RECHARGE_CLOSE","BUY_GAME_CLOSE"].includes(b)&&(a.current=!0))});const p=new URLSearchParams(window.location.search).get("gameId"),d=sessionStorage.getItem("sdk-token"),g=le.getState().storeData.isEditorPreviewMode;if(window.self!==window.top&&!g){Y9();return}window.globalThis.getGameDetail(p,d).then(m=>{if(m.code===401){sessionStorage.setItem("sdk-token",""),window.location.reload();return}console.warn("res",m.data),h(m.data)})};return c(),{performName:"finishTrial",duration:1e3*60*60*24*3650,isHoldOn:!1,stopFunction:()=>{Zl.render(L.jsx("div",{}),document.getElementById("chooseContainer"));const u={performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0};$.gameplay.performController.arrangeNewPerform(u,e,!1)},blockingNext:()=>(a.current&&(c(),a.current=!1),!0),blockingAuto:()=>!0,stopTimeout:void 0}};function bEe(e,t,r,n=500){const i=e.scrollLeft,a=e.scrollTop,o=t-i,s=r-a,c=performance.now();function l(f){const h=f-c,p=Math.min(h/n,1),d=u(p);e.scrollTo(i+o*d,a+s*d),h<n&&requestAnimationFrame(l)}function u(f){return f<.5?2*f*f:-1+(4-2*f)*f}requestAnimationFrame(l)}const wEe=e=>{const t=Kn();let r=0,n=0,i=0,a=!1;return console.log(" >>>>>>>> start : ",{sentence:e}),e.args.forEach(o=>{o.key==="duration"?r=Number(o.value):o.key==="x"?n=Number(o.value):o.key==="y"?i=Number(o.value):o.key==="next"&&(a=o.value==="true")}),setTimeout(()=>{const o=document.getElementById("camera");o&&(qe.info(`${n}${i}`),bEe(o,n,i,r))},16),{performName:t,duration:r,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:a}},EEe=e=>{let t=At(e.content,Et.ui),r="",n=Date.now(),i="";return e.args.forEach(a=>{a.key==="number"?r=At(a.value.toString().trim(),Et.ui):a.key==="sound"&&a.value&&(i=At(a.value.toString().trim(),Et.vocal))}),le.dispatch(Fue({rolePicture:t,numberPicture:r,key:n})),i&&V9({command:Bt.playEffect,commandRaw:"playEffect",content:i,sentenceAssets:[],subScene:[],args:[]}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:!0}},tw={performName:Kn("unlockAffinity"),duration:16,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0},SEe=e=>{var c;if(console.log(" >>>>>>>> start : ",{sentence:e}),qI())return tw;let t=(e==null?void 0:e.content)||"";const r={};r.url=t,e.args.forEach(l=>{var u;switch(l.key){case"name":r.name=((u=l.value)==null?void 0:u.toString())??"";break;case"x":r.x=l.value&&Number(l.value)||0;break;case"y":r.y=l.value&&Number(l.value)||0;break}});const n=le.getState().saveData;if(!r.name||!r.url)return tw;const i=(c=n.unlockAffinityData)==null?void 0:c.findIndex(l=>l.name===r.name&&l.url===r.url),a=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),o={name:r.name||"",url:r.url||"",x:r.x||0,y:r.y||0,saveTime:a,isUnlocked:!0},s=[...n.unlockAffinityData];return i!==-1?s[i]=o:s.push(o),le.dispatch(or.updateAffinityData(s)),sme(),tw};function CEe(e){let t="center",r=e.content,n=!1,i="",a="",o="",s=500,c="",l="",u="",f="",h="",p="";const d=le.dispatch;for(const w of e.args)switch(w.key){case"left":w.value===!0&&(t="left");break;case"right":w.value===!0&&(t="right");break;case"clear":w.value===!0&&(r="");break;case"id":n=!0,o=w.value.toString();break;case"motion":i=w.value.toString();break;case"expression":a=w.value.toString();break;case"mouthOpen":c=w.value.toString(),c=At(c,Et.image);break;case"mouthClose":l=w.value.toString(),l=At(l,Et.image);break;case"mouthHalfOpen":u=w.value.toString(),u=At(u,Et.image);break;case"eyesOpen":f=w.value.toString(),f=At(f,Et.image);break;case"eyesClose":h=w.value.toString(),h=At(h,Et.image);break;case"animationFlag":p=w.value.toString();break;case"none":r="";break}const g=o||`pop-${t}`,v=le.getState().stage.popUpImageAssociatedAnimation.filter(w=>w.targetId!==g),m={targetId:g,animationFlag:p,mouthAnimation:{open:c,close:l,halfOpen:u},blinkAnimation:{open:f,close:h}};v.push(m),d($t({key:"popUpImageAssociatedAnimation",value:v}));let y=!0;if(o!==""){const w=le.getState().stage.freePopUpImage.find(E=>E.key===o);w&&w.name===e.content&&(y=!1)}else t==="center"&&le.getState().stage.popUpImageName===e.content&&(y=!1),t==="left"&&le.getState().stage.popUpImageNameLeft===e.content&&(y=!1),t==="right"&&le.getState().stage.popUpImageNameRight===e.content&&(y=!1);if(y){const w=`pop-${t}`,E=`${o}`;le.dispatch(Bn.removeEffectByTargetId(w)),le.dispatch(Bn.removeEffectByTargetId(E))}const b=(w,E)=>{const C=Wt(E,"transform"),T=Wt(E,"duration");T&&typeof T=="number"&&(s=T);let A;if(C){console.log(C);try{const k=JSON.parse(C.toString());A=vc(w,k,s),A[0].alpha=0;const F=(Math.random()*10).toString(16),M={name:F,effects:A};$.animationManager.addAnimation(M),s=pi(F),$.animationManager.nextEnterAnimationName.set(w,F)}catch{I()}}else I();function I(){A=vc(w,{},s),A[0].alpha=0;const F=(Math.random()*10).toString(16),M={name:F,effects:A};$.animationManager.addAnimation(M),s=pi(F),$.animationManager.nextEnterAnimationName.set(w,F)}const O=Wt(E,"enter"),P=Wt(E,"exit");O&&($.animationManager.nextEnterAnimationName.set(w,O.toString()),s=pi(O.toString())),P&&($.animationManager.nextExitAnimationName.set(w+"-off",P.toString()),s=pi(P.toString()))};if(n){le.getState().stage.freePopUpImage;const w={key:o,name:r,basePosition:t};b(o,e),i&&d(Bn.setPopUpImageLive2dMotion({target:o,motion:i})),a&&d(Bn.setPopUpImageLive2dExpression({target:o,expression:a})),d(Bn.setFreePopupImageBykey(w))}else{const w={center:"pop-center",left:"pop-left",right:"pop-right"},E={center:"popUpImageName",left:"popUpImageNameLeft",right:"popUpImageNameRight"};o=w[t],b(o,e),i&&d(Bn.setPopUpImageLive2dMotion({target:o,motion:i})),a&&d(Bn.setPopUpImageLive2dExpression({target:o,expression:a})),d($t({key:E[t],value:r}))}return{performName:"none",duration:s,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}}const Wy=()=>{qe.warn("");const e=[...$.gameplay.performController.performList];$.gameplay.performController.resetPerformList();for(const t of e)t.goNextWhenOver=!1,t.performName.startsWith("videoPlay")?t.stopFunction(!0):t.stopFunction(),clearTimeout(t.stopTimeout)};function TEe(e){const t=le.dispatch,r=le.getState().stage;return Wy(),t(dc({...r,freeFigure:[],freePopUpImage:[],figNameLeft:"",figNameRight:"",figName:"",popUpImageName:"",popUpImageNameLeft:"",popUpImageNameRight:"",bgName:"",showName:"",showText:""})),{performName:Kn(),duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const AEe=e=>{const t=e.content,r={thirdUserId:Js(),productId:String($.gameId),chapterId:String(t),reportTime:U0(),channel:sessionStorage.getItem("sdk-userId")?1:0,optionName:""};return j9(r),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},q9=dme({intro:Xt(Bt.intro,Pwe),changeBg:Xt(Bt.changeBg,wbe),changeFigure:Xt(Bt.changeFigure,Ebe),miniAvatar:Xt(Bt.miniAvatar,kwe,{next:!0}),changeScene:Xt(Bt.changeScene,Sbe),choose:Xt(Bt.choose,S2),end:Xt(Bt.end,rEe),bgm:Xt(Bt.bgm,wve,{next:!0}),playVideo:Xt(Bt.video,$we),setComplexAnimation:Xt(Bt.setComplexAnimation,Xwe),setFilter:Xt(Bt.setFilter,Wwe),pixiInit:Xt(Bt.pixiInit,iEe,{next:!0}),pixiPerform:Xt(Bt.pixi,Dwe,{next:!0}),label:Xt(Bt.label,Owe,{next:!0}),jumpLabel:Xt(Bt.jumpLabel,nEe),setVar:Xt(Bt.setVar,mme,{next:!0}),showVars:Xt(Bt.showVars,hEe),unlockCg:Xt(Bt.unlockCg,tEe,{next:!0}),unlockBgm:Xt(Bt.unlockBgm,eEe,{next:!0}),say:Xt(Bt.say,fEe),filmMode:Xt(Bt.filmMode,uwe,{next:!0}),callScene:Xt(Bt.callScene,f_e),setTextbox:Xt(Bt.setTextbox,qwe),setAnimation:Xt(Bt.setAnimation,Gwe),playEffect:Xt(Bt.playEffect,V9,{next:!0}),setTempAnimation:Xt(Bt.setTempAnimation,Ywe),__commment:Xt(Bt.comment,lwe,{next:!0}),setTransform:Xt(Bt.setTransform,Kwe),setTransition:Xt(Bt.setTransition,Qwe,{next:!0}),getUserInput:Xt(Bt.getUserInput,gwe),applyStyle:Xt(Bt.applyStyle,dEe,{next:!0}),unlockAchieve:Xt(Bt.unlockAchieve,vEe,{next:!0}),unlockStoryline:Xt(Bt.unlockStoryline,pEe,{next:!0}),showValue:Xt(Bt.showValue,gEe,{next:!0}),payProduct:Xt(Bt.payProduct,mEe),finishTrial:Xt(Bt.finishTrial,xEe),moveCamera:Xt(Bt.moveCamera,wEe),changeAffinity:Xt(Bt.changeAffinity,EEe),unlockAffinity:Xt(Bt.unlockAffinity,SEe),popUpImage:Xt(Bt.popUpImage,CEe),clearScreen:Xt(Bt.clearScreen,TEe),eventData:Xt(Bt.eventData,AEe)}),K9=Object.values(q9),IEe=K9.filter(e=>e.next).map(e=>e.scriptType),Yy=new bve(h2,At,IEe,K9),tu=(e,t,r)=>{const n=Yy.parse(e,t,r);return qe.info(`${t}`,n),n};var ta=(e=>(e.Start="start.txt",e.Achieve="achieve.txt",e.Storyline="storyline.txt",e.Affinity="affinity.txt",e))(ta||{}),Z9=(e=>(e.Achieve="achieve.txt",e.Storyline="storyline.txt",e.Affinity="affinity.txt",e))(Z9||{});const a4={currentSentenceId:0,sceneStack:[],currentScene:{sceneName:"",sceneUrl:"",sentenceList:[],assetsList:[],subSceneList:[]}};class REe{constructor(){nt(this,"settledScenes",[]);nt(this,"settledAssets",[]);nt(this,"sceneData",cn(a4));nt(this,"sceneAssetsList",{});nt(this,"sceneAssetsLoadedList",{});nt(this,"lockSceneWrite",!1)}resetScene(){this.sceneData.currentSentenceId=0,this.sceneData.sceneStack=[],this.sceneData.currentScene=cn(a4.currentScene)}setCurrentScene(t,r,n,i=!1){return new Promise(a=>{let o={current:null},s={current:{sceneReady:!1,gameReady:!1,params:{sceneName:"",sentenceList:[]}}},c=null;i&&!this.sceneAssetsLoadedList[r]&&(c=setTimeout(()=>{window.pubsub.publish("loading",{loading:!0})},1e3));const l=window.pubsub.subscribe("sceneAssetsLoaded",({sceneName:f})=>{setTimeout(()=>{var h,p;if(r===f){o.current&&(this.sceneData.currentScene=o.current);const d=((p=(h=this.sceneData)==null?void 0:h.currentScene)==null?void 0:p.sentenceList)??[];s.current.sceneReady=!0,s.current.params={sceneName:r,sentenceList:d},s.current.sceneReady&&this.checkCallback(r,d),i&&window.pubsub.publish("loading",{loading:!1}),c&&clearTimeout(c),a(o),o.current=null,l()}},16)}),u=window.pubsub.subscribe("gameInfoReady",f=>{f&&(s.current.gameReady=!0,s.current.sceneReady&&this.checkCallback(s.current.params.sceneName,s.current.params.sentenceList),u())});o.current=tu(t,r,n)})}checkCallback(t,r){t==="storyline.txt"?this.getAllStorylineList(r):t==="achieve.txt"?this.getAllUnlockAchieveList(r):t==="affinity.txt"&&lme()}async getAllStorylineList(t){await WI();const r=new Map,n=new Map;le.getState().saveData.unlockStorylineList.forEach(o=>{const{name:s,isUnlock:c=!1}=o.storyLine||{};r.set(s,s),n.set(s,o.videoData)});const i=t.filter(o=>o.command===Bt.unlockStoryline).map(o=>{const s={thumbnailUrl:(o==null?void 0:o.content)??"",name:"",x:0,y:0,isUnlock:!1,isHideName:!1},c={storyLine:{},videoData:null};return o.args.forEach(l=>{l.key==="name"?s.name=l.value.toString():l.key==="x"?s.x=Number(l.value):l.key==="y"?s.y=Number(l.value):l.key==="hideName"&&(s.isHideName=l.value.toString()==="true")}),r.get(s.name)&&n.get(s.name)?(s.isUnlock=!0,c.videoData=n.get(s.name)):s.isUnlock=!1,c.storyLine=s,c});le.dispatch(or.saveAllStorylineData(i));const a=i.filter(o=>o.storyLine.isUnlock);le.dispatch(or.setStorylineListFromStorage(a)),await G$()}async getAllUnlockAchieveList(t){await ume();const r=new Map,n=new Map;le.getState().saveData.unlockAchieveData.forEach(o=>{o.isShowUnlock&&(r.set(o.unlockname,o.isShowUnlock),n.set(o.unlockname,(o==null?void 0:o.saveTime)??""))});const i=t.filter(o=>o.command===Bt.unlockAchieve).map(o=>{const s={url:(o==null?void 0:o.content)??"",unlockname:"",condition:"",saveTime:"",x:0,y:0,isShowUnlock:!1};return o.args.forEach(c=>{c.key==="unlockname"?s.unlockname=c.value.toString():c.key==="x"?s.x=Number(c.value):c.key==="y"?s.y=Number(c.value):c.key==="condition"&&(s.condition=c.value.toString())}),r!=null&&r.get(s==null?void 0:s.unlockname)&&(s.isShowUnlock=!0,s.saveTime=n==null?void 0:n.get(s==null?void 0:s.unlockname)),s});le.dispatch(or.saveAllUnlockAchieveList(i));const a=i.filter(o=>o==null?void 0:o.isShowUnlock);le.dispatch(or.setUnlockAchieveData(a)),await V$()}compareFilenames(t,r){const n=t.match(/\/?([^/]+)\.\w+$/),i=r.match(/\/?([^/]+)\.\w+$/);return n&&i?n[1]===i[1]:!1}}class o4{constructor(){nt(this,"nextEnterAnimationName",new Map);nt(this,"nextExitAnimationName",new Map);nt(this,"animations",[])}addAnimation(t){this.animations.push(t)}getAnimations(){return this.animations}}function PEe(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function OEe(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return r([]);var a=i.length;function o(c,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(f){o(c,f)},function(f){i[c]={status:"rejected",reason:f},--a===0&&r(i)});return}}i[c]={status:"fulfilled",value:l},--a===0&&r(i)}for(var s=0;s<i.length;s++)o(s,i[s])})}function J9(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}J9.prototype=Error.prototype;function kEe(e){var t=this;return new t(function(r,n){if(!(e&&typeof e.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(e);if(i.length===0)return n();for(var a=[],o=0;o<i.length;o++)try{t.resolve(i[o]).then(r).catch(function(s){a.push(s),a.length===i.length&&n(new J9(a,"All promises were rejected"))})}catch(s){n(s)}})}var FEe=setTimeout;function Q9(e){return!!(e&&typeof e.length<"u")}function NEe(){}function LEe(e,t){return function(){e.apply(t,arguments)}}function xn(e){if(!(this instanceof xn))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],tG(e,this)}function eG(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,xn._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?C2:Xp)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(i){Xp(t.promise,i);return}C2(t.promise,n)})}function C2(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var r=t.then;if(t instanceof xn){e._state=3,e._value=t,T2(e);return}else if(typeof r=="function"){tG(LEe(r,t),e);return}}e._state=1,e._value=t,T2(e)}catch(n){Xp(e,n)}}function Xp(e,t){e._state=2,e._value=t,T2(e)}function T2(e){e._state===2&&e._deferreds.length===0&&xn._immediateFn(function(){e._handled||xn._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)eG(e,e._deferreds[t]);e._deferreds=null}function BEe(e,t,r){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=r}function tG(e,t){var r=!1;try{e(function(n){r||(r=!0,C2(t,n))},function(n){r||(r=!0,Xp(t,n))})}catch(n){if(r)return;r=!0,Xp(t,n)}}xn.prototype.catch=function(e){return this.then(null,e)};xn.prototype.then=function(e,t){var r=new this.constructor(NEe);return eG(this,new BEe(e,t,r)),r};xn.prototype.finally=PEe;xn.all=function(e){return new xn(function(t,r){if(!Q9(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var i=n.length;function a(s,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var l=c.then;if(typeof l=="function"){l.call(c,function(u){a(s,u)},r);return}}n[s]=c,--i===0&&t(n)}catch(u){r(u)}}for(var o=0;o<n.length;o++)a(o,n[o])})};xn.any=kEe;xn.allSettled=OEe;xn.resolve=function(e){return e&&typeof e=="object"&&e.constructor===xn?e:new xn(function(t){t(e)})};xn.reject=function(e){return new xn(function(t,r){r(e)})};xn.race=function(e){return new xn(function(t,r){if(!Q9(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)xn.resolve(e[n]).then(t,r)})};xn._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){FEe(e,0)};xn._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};/*!
 * @pixi/polyfill - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=xn);Object.assign||(Object.assign=pJ);var MEe=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var DEe=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-DEe}}var rw=Date.now(),s4=["ms","moz","webkit","o"];for(var nw=0;nw<s4.length&&!globalThis.requestAnimationFrame;++nw){var iw=s4[nw];globalThis.requestAnimationFrame=globalThis[iw+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[iw+"CancelAnimationFrame"]||globalThis[iw+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),r=MEe+rw-t;return r<0&&(r=0),rw=t,globalThis.self.setTimeout(function(){rw=Date.now(),e(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);var aw=/iPhone/i,l4=/iPod/i,u4=/iPad/i,c4=/\biOS-universal(?:.+)Mac\b/i,ow=/\bAndroid(?:.+)Mobile\b/i,f4=/Android/i,tf=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,rg=/Silk/i,Is=/Windows Phone/i,h4=/\bWindows(?:.+)ARM\b/i,d4=/BlackBerry/i,p4=/BB10/i,v4=/Opera Mini/i,g4=/\b(CriOS|Chrome)(?:.+)Mobile/i,m4=/Mobile(?:.+)Firefox\b/i,_4=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function UEe(e){return function(t){return t.test(e)}}function jEe(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=UEe(r),a={apple:{phone:i(aw)&&!i(Is),ipod:i(l4),tablet:!i(aw)&&(i(u4)||_4(t))&&!i(Is),universal:i(c4),device:(i(aw)||i(l4)||i(u4)||i(c4)||_4(t))&&!i(Is)},amazon:{phone:i(tf),tablet:!i(tf)&&i(rg),device:i(tf)||i(rg)},android:{phone:!i(Is)&&i(tf)||!i(Is)&&i(ow),tablet:!i(Is)&&!i(tf)&&!i(ow)&&(i(rg)||i(f4)),device:!i(Is)&&(i(tf)||i(rg)||i(ow)||i(f4))||i(/\bokhttp\b/i)},windows:{phone:i(Is),tablet:i(h4),device:i(Is)||i(h4)},other:{blackberry:i(d4),blackberry10:i(p4),opera:i(v4),firefox:i(m4),chrome:i(g4),device:i(d4)||i(p4)||i(v4)||i(m4)||i(g4)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ja=jEe(globalThis.navigator);function $Ee(e){var t=!0;if(Ja.tablet||Ja.phone){if(Ja.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(Ja.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}function GEe(){return!Ja.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var y4;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(y4||(y4={}));var x4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(x4||(x4={}));var b4;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(b4||(b4={}));var w4;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(w4||(w4={}));var E4;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(E4||(E4={}));var S4;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(S4||(S4={}));var C4;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(C4||(C4={}));var T4;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(T4||(T4={}));var A4;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(A4||(A4={}));var A2;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(A2||(A2={}));var I2;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(I2||(I2={}));var R2;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(R2||(R2={}));var I4;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(I4||(I4={}));var R4;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(R4||(R4={}));var P2;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(P2||(P2={}));var mp;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(mp||(mp={}));var P4;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(P4||(P4={}));var O2;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(O2||(O2={}));var O4;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(O4||(O4={}));var yt={MIPMAP_TEXTURES:R2.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:O2.NONE,SPRITE_MAX_TEXTURES:$Ee(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:P2.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:I2.CLAMP,SCALE_MODE:A2.LINEAR,PRECISION_VERTEX:mp.HIGH,PRECISION_FRAGMENT:Ja.apple.device?mp.HIGH:mp.MEDIUM,CAN_UPLOAD_SAME_BUFFER:GEe(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},rG={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,f||c,h),d=r?r+l:l;return c._events[d]?c._events[d].fn?c._events[d]=[c._events[d],p]:c._events[d].push(p):(c._events[d]=p,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)t.call(u,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},s.prototype.listeners=function(l){var u=r?r+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,d=new Array(p);h<p;h++)d[h]=f[h].fn;return d},s.prototype.listenerCount=function(l){var u=r?r+l:l,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,u,f,h,p,d){var g=r?r+l:l;if(!this._events[g])return!1;var _=this._events[g],v=arguments.length,m,y;if(_.fn){switch(_.once&&this.removeListener(l,_.fn,void 0,!0),v){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,u),!0;case 3:return _.fn.call(_.context,u,f),!0;case 4:return _.fn.call(_.context,u,f,h),!0;case 5:return _.fn.call(_.context,u,f,h,p),!0;case 6:return _.fn.call(_.context,u,f,h,p,d),!0}for(y=1,m=new Array(v-1);y<v;y++)m[y-1]=arguments[y];_.fn.apply(_.context,m)}else{var b=_.length,w;for(y=0;y<b;y++)switch(_[y].once&&this.removeListener(l,_[y].fn,void 0,!0),v){case 1:_[y].fn.call(_[y].context);break;case 2:_[y].fn.call(_[y].context,u);break;case 3:_[y].fn.call(_[y].context,u,f);break;case 4:_[y].fn.call(_[y].context,u,f,h);break;default:if(!m)for(w=1,m=new Array(v-1);w<v;w++)m[w-1]=arguments[w];_[y].fn.apply(_[y].context,m)}}return!0},s.prototype.on=function(l,u,f){return a(this,l,u,f,!1)},s.prototype.once=function(l,u,f){return a(this,l,u,f,!0)},s.prototype.removeListener=function(l,u,f,h){var p=r?r+l:l;if(!this._events[p])return this;if(!u)return o(this,p),this;var d=this._events[p];if(d.fn)d.fn===u&&(!h||d.once)&&(!f||d.context===f)&&o(this,p);else{for(var g=0,_=[],v=d.length;g<v;g++)(d[g].fn!==u||h&&!d[g].once||f&&d[g].context!==f)&&_.push(d[g]);_.length?this._events[p]=_.length===1?_[0]:_:o(this,p)}return this},s.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(rG);var VEe=rG.exports;const Ac=Gi(VEe);var uR={exports:{}};uR.exports=qy;uR.exports.default=qy;function qy(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,a=nG(e,0,i,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,c,l,u,f,h,p;if(n&&(a=YEe(e,t,a,r)),e.length>80*r){s=l=e[0],c=u=e[1];for(var d=r;d<i;d+=r)f=e[d],h=e[d+1],f<s&&(s=f),h<c&&(c=h),f>l&&(l=f),h>u&&(u=h);p=Math.max(l-s,u-c),p=p!==0?32767/p:0}return zp(a,o,r,s,c,p,0),o}function nG(e,t,r,n,i){var a,o;if(i===N2(e,t,r,n)>0)for(a=t;a<r;a+=n)o=k4(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=k4(a,e[a],e[a+1],o);return o&&Ky(o,o.next)&&(Yp(o),o=o.next),o}function gc(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Ky(r,r.next)||yn(r.prev,r,r.next)===0)){if(Yp(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function zp(e,t,r,n,i,a,o){if(e){!o&&a&&QEe(e,n,i,a);for(var s=e,c,l;e.prev!==e.next;){if(c=e.prev,l=e.next,a?XEe(e,n,i,a):HEe(e)){t.push(c.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),Yp(e),e=l.next,s=l.next;continue}if(e=l,e===s){o?o===1?(e=zEe(gc(e),t,r),zp(e,t,r,n,i,a,2)):o===2&&WEe(e,t,r,n,i,a):zp(gc(e),t,r,n,i,a,1);break}}}}function HEe(e){var t=e.prev,r=e,n=e.next;if(yn(t,r,n)>=0)return!1;for(var i=t.x,a=r.x,o=n.x,s=t.y,c=r.y,l=n.y,u=i<a?i<o?i:o:a<o?a:o,f=s<c?s<l?s:l:c<l?c:l,h=i>a?i>o?i:o:a>o?a:o,p=s>c?s>l?s:l:c>l?c:l,d=n.next;d!==t;){if(d.x>=u&&d.x<=h&&d.y>=f&&d.y<=p&&Tf(i,s,a,c,o,l,d.x,d.y)&&yn(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function XEe(e,t,r,n){var i=e.prev,a=e,o=e.next;if(yn(i,a,o)>=0)return!1;for(var s=i.x,c=a.x,l=o.x,u=i.y,f=a.y,h=o.y,p=s<c?s<l?s:l:c<l?c:l,d=u<f?u<h?u:h:f<h?f:h,g=s>c?s>l?s:l:c>l?c:l,_=u>f?u>h?u:h:f>h?f:h,v=k2(p,d,t,r,n),m=k2(g,_,t,r,n),y=e.prevZ,b=e.nextZ;y&&y.z>=v&&b&&b.z<=m;){if(y.x>=p&&y.x<=g&&y.y>=d&&y.y<=_&&y!==i&&y!==o&&Tf(s,u,c,f,l,h,y.x,y.y)&&yn(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=p&&b.x<=g&&b.y>=d&&b.y<=_&&b!==i&&b!==o&&Tf(s,u,c,f,l,h,b.x,b.y)&&yn(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=g&&y.y>=d&&y.y<=_&&y!==i&&y!==o&&Tf(s,u,c,f,l,h,y.x,y.y)&&yn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=m;){if(b.x>=p&&b.x<=g&&b.y>=d&&b.y<=_&&b!==i&&b!==o&&Tf(s,u,c,f,l,h,b.x,b.y)&&yn(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function zEe(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!Ky(i,a)&&iG(i,n,n.next,a)&&Wp(i,a)&&Wp(a,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(a.i/r|0),Yp(n),Yp(n.next),n=e=a),n=n.next}while(n!==e);return gc(n)}function WEe(e,t,r,n,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&rSe(o,s)){var c=aG(o,s);o=gc(o,o.next),c=gc(c,c.next),zp(o,t,r,n,i,a,0),zp(c,t,r,n,i,a,0);return}s=s.next}o=o.next}while(o!==e)}function YEe(e,t,r,n){var i=[],a,o,s,c,l;for(a=0,o=t.length;a<o;a++)s=t[a]*n,c=a<o-1?t[a+1]*n:e.length,l=nG(e,s,c,n,!1),l===l.next&&(l.steiner=!0),i.push(tSe(l));for(i.sort(qEe),a=0;a<i.length;a++)r=KEe(i[a],r);return r}function qEe(e,t){return e.x-t.x}function KEe(e,t){var r=ZEe(e,t);if(!r)return t;var n=aG(r,e);return gc(n,n.next),gc(r,r.next)}function ZEe(e,t){var r=t,n=e.x,i=e.y,a=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,o=r.x<r.next.x?r:r.next,s===n))return o}r=r.next}while(r!==t);if(!o)return null;var c=o,l=o.x,u=o.y,f=1/0,h;r=o;do n>=r.x&&r.x>=l&&n!==r.x&&Tf(i<u?n:a,i,l,u,i<u?a:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),Wp(r,e)&&(h<f||h===f&&(r.x>o.x||r.x===o.x&&JEe(o,r)))&&(o=r,f=h)),r=r.next;while(r!==c);return o}function JEe(e,t){return yn(e.prev,e,t.prev)<0&&yn(t.next,e,e.next)<0}function QEe(e,t,r,n){var i=e;do i.z===0&&(i.z=k2(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,eSe(i)}function eSe(e){var t,r,n,i,a,o,s,c,l=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ,!!n);t++);for(c=l;s>0||c>0&&n;)s!==0&&(c===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1);return e}function k2(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function tSe(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Tf(e,t,r,n,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(n-s)>=(r-o)*(t-s)&&(r-o)*(a-s)>=(i-o)*(n-s)}function rSe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!nSe(e,t)&&(Wp(e,t)&&Wp(t,e)&&iSe(e,t)&&(yn(e.prev,e,t.prev)||yn(e,t.prev,t))||Ky(e,t)&&yn(e.prev,e,e.next)>0&&yn(t.prev,t,t.next)>0)}function yn(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Ky(e,t){return e.x===t.x&&e.y===t.y}function iG(e,t,r,n){var i=ig(yn(e,t,r)),a=ig(yn(e,t,n)),o=ig(yn(r,n,e)),s=ig(yn(r,n,t));return!!(i!==a&&o!==s||i===0&&ng(e,r,t)||a===0&&ng(e,n,t)||o===0&&ng(r,e,n)||s===0&&ng(r,t,n))}function ng(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function ig(e){return e>0?1:e<0?-1:0}function nSe(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&iG(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Wp(e,t){return yn(e.prev,e,e.next)<0?yn(e,t,e.next)>=0&&yn(e,e.prev,t)>=0:yn(e,t,e.prev)<0||yn(e,e.next,t)<0}function iSe(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function aG(e,t){var r=new F2(e.i,e.x,e.y),n=new F2(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function k4(e,t,r,n){var i=new F2(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Yp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function F2(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}qy.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(N2(e,0,a,r));if(i)for(var s=0,c=t.length;s<c;s++){var l=t[s]*r,u=s<c-1?t[s+1]*r:e.length;o-=Math.abs(N2(e,l,u,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,p=n[s+1]*r,d=n[s+2]*r;f+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function N2(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}qy.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var aSe=uR.exports;const cR=Gi(aSe);var r_={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */r_.exports;(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a=typeof Ct=="object"&&Ct;(a.global===a||a.window===a||a.self===a)&&(r=a);var o,s=2147483647,c=36,l=1,u=26,f=38,h=700,p=72,d=128,g="-",_=/^xn--/,v=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=c-l,w=Math.floor,E=String.fromCharCode,C;function T(Y){throw new RangeError(y[Y])}function A(Y,U){for(var z=Y.length,j=[];z--;)j[z]=U(Y[z]);return j}function I(Y,U){var z=Y.split("@"),j="";z.length>1&&(j=z[0]+"@",Y=z[1]),Y=Y.replace(m,".");var V=Y.split("."),ne=A(V,U).join(".");return j+ne}function O(Y){for(var U=[],z=0,j=Y.length,V,ne;z<j;)V=Y.charCodeAt(z++),V>=55296&&V<=56319&&z<j?(ne=Y.charCodeAt(z++),(ne&64512)==56320?U.push(((V&1023)<<10)+(ne&1023)+65536):(U.push(V),z--)):U.push(V);return U}function P(Y){return A(Y,function(U){var z="";return U>65535&&(U-=65536,z+=E(U>>>10&1023|55296),U=56320|U&1023),z+=E(U),z}).join("")}function k(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:c}function F(Y,U){return Y+22+75*(Y<26)-((U!=0)<<5)}function M(Y,U,z){var j=0;for(Y=z?w(Y/h):Y>>1,Y+=w(Y/U);Y>b*u>>1;j+=c)Y=w(Y/b);return w(j+(b+1)*Y/(Y+f))}function D(Y){var U=[],z=Y.length,j,V=0,ne=d,ae=p,pe,se,_e,Le,Pe,Ee,Se,Ge,We;for(pe=Y.lastIndexOf(g),pe<0&&(pe=0),se=0;se<pe;++se)Y.charCodeAt(se)>=128&&T("not-basic"),U.push(Y.charCodeAt(se));for(_e=pe>0?pe+1:0;_e<z;){for(Le=V,Pe=1,Ee=c;_e>=z&&T("invalid-input"),Se=k(Y.charCodeAt(_e++)),(Se>=c||Se>w((s-V)/Pe))&&T("overflow"),V+=Se*Pe,Ge=Ee<=ae?l:Ee>=ae+u?u:Ee-ae,!(Se<Ge);Ee+=c)We=c-Ge,Pe>w(s/We)&&T("overflow"),Pe*=We;j=U.length+1,ae=M(V-Le,j,Le==0),w(V/j)>s-ne&&T("overflow"),ne+=w(V/j),V%=j,U.splice(V++,0,ne)}return P(U)}function G(Y){var U,z,j,V,ne,ae,pe,se,_e,Le,Pe,Ee=[],Se,Ge,We,Ve;for(Y=O(Y),Se=Y.length,U=d,z=0,ne=p,ae=0;ae<Se;++ae)Pe=Y[ae],Pe<128&&Ee.push(E(Pe));for(j=V=Ee.length,V&&Ee.push(g);j<Se;){for(pe=s,ae=0;ae<Se;++ae)Pe=Y[ae],Pe>=U&&Pe<pe&&(pe=Pe);for(Ge=j+1,pe-U>w((s-z)/Ge)&&T("overflow"),z+=(pe-U)*Ge,U=pe,ae=0;ae<Se;++ae)if(Pe=Y[ae],Pe<U&&++z>s&&T("overflow"),Pe==U){for(se=z,_e=c;Le=_e<=ne?l:_e>=ne+u?u:_e-ne,!(se<Le);_e+=c)Ve=se-Le,We=c-Le,Ee.push(E(F(Le+Ve%We,0))),se=w(Ve/We);Ee.push(E(F(se,0))),ne=M(z,Ge,j==V),z=0,++j}++z,++U}return Ee.join("")}function Q(Y){return I(Y,function(U){return _.test(U)?D(U.slice(4).toLowerCase()):U})}function te(Y){return I(Y,function(U){return v.test(U)?"xn--"+G(U):U})}if(o={version:"1.4.1",ucs2:{decode:O,encode:P},decode:D,encode:G,toASCII:te,toUnicode:Q},n&&i)if(e.exports==n)i.exports=o;else for(C in o)o.hasOwnProperty(C)&&(n[C]=o[C]);else r.punycode=o})(Ct)})(r_,r_.exports);var oSe=r_.exports,sSe=Error,lSe=EvalError,uSe=RangeError,cSe=ReferenceError,oG=SyntaxError,j0=TypeError,fSe=URIError,hSe=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},F4=typeof Symbol<"u"&&Symbol,dSe=hSe,pSe=function(){return typeof F4!="function"||typeof Symbol!="function"||typeof F4("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:dSe()},sw={__proto__:null,foo:{}},vSe=Object,gSe=function(){return{__proto__:sw}.foo===sw.foo&&!(sw instanceof vSe)},mSe="Function.prototype.bind called on incompatible ",_Se=Object.prototype.toString,ySe=Math.max,xSe="[object Function]",N4=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var a=0;a<r.length;a+=1)n[a+t.length]=r[a];return n},bSe=function(t,r){for(var n=[],i=r||0,a=0;i<t.length;i+=1,a+=1)n[a]=t[i];return n},wSe=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},ESe=function(t){var r=this;if(typeof r!="function"||_Se.apply(r)!==xSe)throw new TypeError(mSe+r);for(var n=bSe(arguments,1),i,a=function(){if(this instanceof i){var u=r.apply(this,N4(n,arguments));return Object(u)===u?u:this}return r.apply(t,N4(n,arguments))},o=ySe(0,r.length-n.length),s=[],c=0;c<o;c++)s[c]="$"+c;if(i=Function("binder","return function ("+wSe(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},SSe=ESe,fR=Function.prototype.bind||SSe,CSe=Function.prototype.call,TSe=Object.prototype.hasOwnProperty,ASe=fR,ISe=ASe.call(CSe,TSe),vr,RSe=sSe,PSe=lSe,OSe=uSe,kSe=cSe,th=oG,Vf=j0,FSe=fSe,sG=Function,lw=function(e){try{return sG('"use strict"; return ('+e+").constructor;")()}catch{}},ic=Object.getOwnPropertyDescriptor;if(ic)try{ic({},"")}catch{ic=null}var uw=function(){throw new Vf},NSe=ic?function(){try{return arguments.callee,uw}catch{try{return ic(arguments,"callee").get}catch{return uw}}}():uw,rf=pSe(),LSe=gSe(),fi=Object.getPrototypeOf||(LSe?function(e){return e.__proto__}:null),gf={},BSe=typeof Uint8Array>"u"||!fi?vr:fi(Uint8Array),ac={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?vr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?vr:ArrayBuffer,"%ArrayIteratorPrototype%":rf&&fi?fi([][Symbol.iterator]()):vr,"%AsyncFromSyncIteratorPrototype%":vr,"%AsyncFunction%":gf,"%AsyncGenerator%":gf,"%AsyncGeneratorFunction%":gf,"%AsyncIteratorPrototype%":gf,"%Atomics%":typeof Atomics>"u"?vr:Atomics,"%BigInt%":typeof BigInt>"u"?vr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?vr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?vr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?vr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":RSe,"%eval%":eval,"%EvalError%":PSe,"%Float32Array%":typeof Float32Array>"u"?vr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?vr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?vr:FinalizationRegistry,"%Function%":sG,"%GeneratorFunction%":gf,"%Int8Array%":typeof Int8Array>"u"?vr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?vr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?vr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":rf&&fi?fi(fi([][Symbol.iterator]())):vr,"%JSON%":typeof JSON=="object"?JSON:vr,"%Map%":typeof Map>"u"?vr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!rf||!fi?vr:fi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?vr:Promise,"%Proxy%":typeof Proxy>"u"?vr:Proxy,"%RangeError%":OSe,"%ReferenceError%":kSe,"%Reflect%":typeof Reflect>"u"?vr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?vr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!rf||!fi?vr:fi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?vr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":rf&&fi?fi(""[Symbol.iterator]()):vr,"%Symbol%":rf?Symbol:vr,"%SyntaxError%":th,"%ThrowTypeError%":NSe,"%TypedArray%":BSe,"%TypeError%":Vf,"%Uint8Array%":typeof Uint8Array>"u"?vr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?vr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?vr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?vr:Uint32Array,"%URIError%":FSe,"%WeakMap%":typeof WeakMap>"u"?vr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?vr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?vr:WeakSet};if(fi)try{null.error}catch(e){var MSe=fi(fi(e));ac["%Error.prototype%"]=MSe}var DSe=function e(t){var r;if(t==="%AsyncFunction%")r=lw("async function () {}");else if(t==="%GeneratorFunction%")r=lw("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=lw("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&fi&&(r=fi(i.prototype))}return ac[t]=r,r},L4={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$0=fR,n_=ISe,USe=$0.call(Function.call,Array.prototype.concat),jSe=$0.call(Function.apply,Array.prototype.splice),B4=$0.call(Function.call,String.prototype.replace),i_=$0.call(Function.call,String.prototype.slice),$Se=$0.call(Function.call,RegExp.prototype.exec),GSe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,VSe=/\\(\\)?/g,HSe=function(t){var r=i_(t,0,1),n=i_(t,-1);if(r==="%"&&n!=="%")throw new th("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new th("invalid intrinsic syntax, expected opening `%`");var i=[];return B4(t,GSe,function(a,o,s,c){i[i.length]=s?B4(c,VSe,"$1"):o||a}),i},XSe=function(t,r){var n=t,i;if(n_(L4,n)&&(i=L4[n],n="%"+i[0]+"%"),n_(ac,n)){var a=ac[n];if(a===gf&&(a=DSe(n)),typeof a>"u"&&!r)throw new Vf("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new th("intrinsic "+t+" does not exist!")},Mh=function(t,r){if(typeof t!="string"||t.length===0)throw new Vf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Vf('"allowMissing" argument must be a boolean');if($Se(/^%?[^%]*%?$/,t)===null)throw new th("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=HSe(t),i=n.length>0?n[0]:"",a=XSe("%"+i+"%",r),o=a.name,s=a.value,c=!1,l=a.alias;l&&(i=l[0],jSe(n,USe([0,1],l)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],p=i_(h,0,1),d=i_(h,-1);if((p==='"'||p==="'"||p==="`"||d==='"'||d==="'"||d==="`")&&p!==d)throw new th("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,o="%"+i+"%",n_(ac,o))s=ac[o];else if(s!=null){if(!(h in s)){if(!r)throw new Vf("base intrinsic for "+t+" exists, but the property is not available.");return}if(ic&&u+1>=n.length){var g=ic(s,h);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?s=g.get:s=s[h]}else f=n_(s,h),s=s[h];f&&!c&&(ac[o]=s)}}return s},lG={exports:{}},cw,M4;function hR(){if(M4)return cw;M4=1;var e=Mh,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return cw=t,cw}var zSe=Mh,nm=zSe("%Object.getOwnPropertyDescriptor%",!0);if(nm)try{nm([],"length")}catch{nm=null}var uG=nm,D4=hR(),WSe=oG,nf=j0,U4=uG,YSe=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new nf("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new nf("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new nf("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new nf("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new nf("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new nf("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,c=!!U4&&U4(t,r);if(D4)D4(t,r,{configurable:o===null&&c?c.configurable:!o,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:a===null&&c?c.writable:!a});else if(s||!i&&!a&&!o)t[r]=n;else throw new WSe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},L2=hR(),cG=function(){return!!L2};cG.hasArrayLengthDefineBug=function(){if(!L2)return null;try{return L2([],"length",{value:1}).length!==1}catch{return!0}};var qSe=cG,KSe=Mh,j4=YSe,ZSe=qSe(),$4=uG,G4=j0,JSe=KSe("%Math.floor%"),QSe=function(t,r){if(typeof t!="function")throw new G4("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||JSe(r)!==r)throw new G4("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in t&&$4){var o=$4(t,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(a=!1)}return(i||a||!n)&&(ZSe?j4(t,"length",r,!0,!0):j4(t,"length",r)),t};(function(e){var t=fR,r=Mh,n=QSe,i=j0,a=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||t.call(o,a),c=hR(),l=r("%Math.max%");e.exports=function(h){if(typeof h!="function")throw new i("a function is required");var p=s(t,o,arguments);return n(p,1+l(0,h.length-(arguments.length-1)),!0)};var u=function(){return s(t,a,arguments)};c?c(e.exports,"apply",{value:u}):e.exports.apply=u})(lG);var e2e=lG.exports,fG=Mh,hG=e2e,t2e=hG(fG("String.prototype.indexOf")),r2e=function(t,r){var n=fG(t,!!r);return typeof n=="function"&&t2e(t,".prototype.")>-1?hG(n):n};const n2e={},i2e=Object.freeze(Object.defineProperty({__proto__:null,default:n2e},Symbol.toStringTag,{value:"Module"})),dG=uJ(i2e);var dR=typeof Map=="function"&&Map.prototype,fw=Object.getOwnPropertyDescriptor&&dR?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a_=dR&&fw&&typeof fw.get=="function"?fw.get:null,V4=dR&&Map.prototype.forEach,pR=typeof Set=="function"&&Set.prototype,hw=Object.getOwnPropertyDescriptor&&pR?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o_=pR&&hw&&typeof hw.get=="function"?hw.get:null,H4=pR&&Set.prototype.forEach,a2e=typeof WeakMap=="function"&&WeakMap.prototype,_p=a2e?WeakMap.prototype.has:null,o2e=typeof WeakSet=="function"&&WeakSet.prototype,yp=o2e?WeakSet.prototype.has:null,s2e=typeof WeakRef=="function"&&WeakRef.prototype,X4=s2e?WeakRef.prototype.deref:null,l2e=Boolean.prototype.valueOf,u2e=Object.prototype.toString,c2e=Function.prototype.toString,f2e=String.prototype.match,vR=String.prototype.slice,Rl=String.prototype.replace,h2e=String.prototype.toUpperCase,z4=String.prototype.toLowerCase,pG=RegExp.prototype.test,W4=Array.prototype.concat,zo=Array.prototype.join,d2e=Array.prototype.slice,Y4=Math.floor,B2=typeof BigInt=="function"?BigInt.prototype.valueOf:null,dw=Object.getOwnPropertySymbols,M2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,rh=typeof Symbol=="function"&&typeof Symbol.iterator=="object",$i=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===rh||"symbol")?Symbol.toStringTag:null,vG=Object.prototype.propertyIsEnumerable,q4=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function K4(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||pG.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-Y4(-e):Y4(e);if(n!==e){var i=String(n),a=vR.call(t,i.length+1);return Rl.call(i,r,"$&_")+"."+Rl.call(Rl.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Rl.call(t,r,"$&_")}var D2=dG,Z4=D2.custom,J4=mG(Z4)?Z4:null,p2e=function e(t,r,n,i){var a=r||{};if(xl(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xl(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=xl(a,"customInspect")?a.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xl(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xl(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return yG(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return s?K4(t,c):c}if(typeof t=="bigint"){var l=String(t)+"n";return s?K4(t,l):l}var u=typeof a.depth>"u"?5:a.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof t=="object")return U2(t)?"[Array]":"[Object]";var f=k2e(a,n);if(typeof i>"u")i=[];else if(_G(i,t)>=0)return"[Circular]";function h(k,F,M){if(F&&(i=d2e.call(i),i.push(F)),M){var D={depth:a.depth};return xl(a,"quoteStyle")&&(D.quoteStyle=a.quoteStyle),e(k,D,n+1,i)}return e(k,a,n+1,i)}if(typeof t=="function"&&!Q4(t)){var p=E2e(t),d=ag(t,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(d.length>0?" { "+zo.call(d,", ")+" }":"")}if(mG(t)){var g=rh?Rl.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):M2.call(t);return typeof t=="object"&&!rh?Ad(g):g}if(R2e(t)){for(var _="<"+z4.call(String(t.nodeName)),v=t.attributes||[],m=0;m<v.length;m++)_+=" "+v[m].name+"="+gG(v2e(v[m].value),"double",a);return _+=">",t.childNodes&&t.childNodes.length&&(_+="..."),_+="</"+z4.call(String(t.nodeName))+">",_}if(U2(t)){if(t.length===0)return"[]";var y=ag(t,h);return f&&!O2e(y)?"["+j2(y,f)+"]":"[ "+zo.call(y,", ")+" ]"}if(m2e(t)){var b=ag(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!vG.call(t,"cause")?"{ ["+String(t)+"] "+zo.call(W4.call("[cause]: "+h(t.cause),b),", ")+" }":b.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+zo.call(b,", ")+" }"}if(typeof t=="object"&&o){if(J4&&typeof t[J4]=="function"&&D2)return D2(t,{depth:u-n});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(S2e(t)){var w=[];return V4&&V4.call(t,function(k,F){w.push(h(F,t,!0)+" => "+h(k,t))}),eB("Map",a_.call(t),w,f)}if(A2e(t)){var E=[];return H4&&H4.call(t,function(k){E.push(h(k,t))}),eB("Set",o_.call(t),E,f)}if(C2e(t))return pw("WeakMap");if(I2e(t))return pw("WeakSet");if(T2e(t))return pw("WeakRef");if(y2e(t))return Ad(h(Number(t)));if(b2e(t))return Ad(h(B2.call(t)));if(x2e(t))return Ad(l2e.call(t));if(_2e(t))return Ad(h(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Ct)return"{ [object globalThis] }";if(!g2e(t)&&!Q4(t)){var C=ag(t,h),T=q4?q4(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",I=!T&&$i&&Object(t)===t&&$i in t?vR.call(uu(t),8,-1):A?"Object":"",O=T||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",P=O+(I||A?"["+zo.call(W4.call([],I||[],A||[]),": ")+"] ":"");return C.length===0?P+"{}":f?P+"{"+j2(C,f)+"}":P+"{ "+zo.call(C,", ")+" }"}return String(t)};function gG(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function v2e(e){return Rl.call(String(e),/"/g,"&quot;")}function U2(e){return uu(e)==="[object Array]"&&(!$i||!(typeof e=="object"&&$i in e))}function g2e(e){return uu(e)==="[object Date]"&&(!$i||!(typeof e=="object"&&$i in e))}function Q4(e){return uu(e)==="[object RegExp]"&&(!$i||!(typeof e=="object"&&$i in e))}function m2e(e){return uu(e)==="[object Error]"&&(!$i||!(typeof e=="object"&&$i in e))}function _2e(e){return uu(e)==="[object String]"&&(!$i||!(typeof e=="object"&&$i in e))}function y2e(e){return uu(e)==="[object Number]"&&(!$i||!(typeof e=="object"&&$i in e))}function x2e(e){return uu(e)==="[object Boolean]"&&(!$i||!(typeof e=="object"&&$i in e))}function mG(e){if(rh)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!M2)return!1;try{return M2.call(e),!0}catch{}return!1}function b2e(e){if(!e||typeof e!="object"||!B2)return!1;try{return B2.call(e),!0}catch{}return!1}var w2e=Object.prototype.hasOwnProperty||function(e){return e in this};function xl(e,t){return w2e.call(e,t)}function uu(e){return u2e.call(e)}function E2e(e){if(e.name)return e.name;var t=f2e.call(c2e.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function _G(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function S2e(e){if(!a_||!e||typeof e!="object")return!1;try{a_.call(e);try{o_.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function C2e(e){if(!_p||!e||typeof e!="object")return!1;try{_p.call(e,_p);try{yp.call(e,yp)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function T2e(e){if(!X4||!e||typeof e!="object")return!1;try{return X4.call(e),!0}catch{}return!1}function A2e(e){if(!o_||!e||typeof e!="object")return!1;try{o_.call(e);try{a_.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function I2e(e){if(!yp||!e||typeof e!="object")return!1;try{yp.call(e,yp);try{_p.call(e,_p)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function R2e(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function yG(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return yG(vR.call(e,0,t.maxStringLength),t)+n}var i=Rl.call(Rl.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,P2e);return gG(i,"single",t)}function P2e(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+h2e.call(t.toString(16))}function Ad(e){return"Object("+e+")"}function pw(e){return e+" { ? }"}function eB(e,t,r,n){var i=n?j2(r,n):zo.call(r,", ");return e+" ("+t+") {"+i+"}"}function O2e(e){for(var t=0;t<e.length;t++)if(_G(e[t],`
`)>=0)return!1;return!0}function k2e(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=zo.call(Array(e.indent+1)," ");else return null;return{base:r,prev:zo.call(Array(t+1),r)}}function j2(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+zo.call(e,","+r)+`
`+t.prev}function ag(e,t){var r=U2(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=xl(e,i)?t(e[i],e):""}var a=typeof dw=="function"?dw(e):[],o;if(rh){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in e)xl(e,c)&&(r&&String(Number(c))===c&&c<e.length||rh&&o["$"+c]instanceof Symbol||(pG.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if(typeof dw=="function")for(var l=0;l<a.length;l++)vG.call(e,a[l])&&n.push("["+t(a[l])+"]: "+t(e[a[l]],e));return n}var xG=Mh,Dh=r2e,F2e=p2e,N2e=j0,og=xG("%WeakMap%",!0),sg=xG("%Map%",!0),L2e=Dh("WeakMap.prototype.get",!0),B2e=Dh("WeakMap.prototype.set",!0),M2e=Dh("WeakMap.prototype.has",!0),D2e=Dh("Map.prototype.get",!0),U2e=Dh("Map.prototype.set",!0),j2e=Dh("Map.prototype.has",!0),gR=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},$2e=function(e,t){var r=gR(e,t);return r&&r.value},G2e=function(e,t,r){var n=gR(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},V2e=function(e,t){return!!gR(e,t)},H2e=function(){var t,r,n,i={assert:function(a){if(!i.has(a))throw new N2e("Side channel does not contain "+F2e(a))},get:function(a){if(og&&a&&(typeof a=="object"||typeof a=="function")){if(t)return L2e(t,a)}else if(sg){if(r)return D2e(r,a)}else if(n)return $2e(n,a)},has:function(a){if(og&&a&&(typeof a=="object"||typeof a=="function")){if(t)return M2e(t,a)}else if(sg){if(r)return j2e(r,a)}else if(n)return V2e(n,a);return!1},set:function(a,o){og&&a&&(typeof a=="object"||typeof a=="function")?(t||(t=new og),B2e(t,a,o)):sg?(r||(r=new sg),U2e(r,a,o)):(n||(n={key:{},next:null}),G2e(n,a,o))}};return i},X2e=String.prototype.replace,z2e=/%20/g,vw={RFC1738:"RFC1738",RFC3986:"RFC3986"},mR={default:vw.RFC3986,formatters:{RFC1738:function(e){return X2e.call(e,z2e,"+")},RFC3986:function(e){return String(e)}},RFC1738:vw.RFC1738,RFC3986:vw.RFC3986},W2e=mR,gw=Object.prototype.hasOwnProperty,Gu=Array.isArray,Go=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Y2e=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(Gu(n)){for(var i=[],a=0;a<n.length;++a)typeof n[a]<"u"&&i.push(n[a]);r.obj[r.prop]=i}}},bG=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},q2e=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(Gu(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!gw.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return Gu(t)&&!Gu(r)&&(i=bG(t,n)),Gu(t)&&Gu(r)?(r.forEach(function(a,o){if(gw.call(t,o)){var s=t[o];s&&typeof s=="object"&&a&&typeof a=="object"?t[o]=e(s,a,n):t.push(a)}else t[o]=a}),t):Object.keys(r).reduce(function(a,o){var s=r[o];return gw.call(a,o)?a[o]=e(a[o],s,n):a[o]=s,a},i)},K2e=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},Z2e=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},J2e=function(t,r,n,i,a){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var s="",c=0;c<o.length;++c){var l=o.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||a===W2e.RFC1738&&(l===40||l===41)){s+=o.charAt(c);continue}if(l<128){s=s+Go[l];continue}if(l<2048){s=s+(Go[192|l>>6]+Go[128|l&63]);continue}if(l<55296||l>=57344){s=s+(Go[224|l>>12]+Go[128|l>>6&63]+Go[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|o.charCodeAt(c)&1023),s+=Go[240|l>>18]+Go[128|l>>12&63]+Go[128|l>>6&63]+Go[128|l&63]}return s},Q2e=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var a=r[i],o=a.obj[a.prop],s=Object.keys(o),c=0;c<s.length;++c){var l=s[c],u=o[l];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:o,prop:l}),n.push(u))}return Y2e(r),t},eCe=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},tCe=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},rCe=function(t,r){return[].concat(t,r)},nCe=function(t,r){if(Gu(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)},wG={arrayToObject:bG,assign:K2e,combine:rCe,compact:Q2e,decode:Z2e,encode:J2e,isBuffer:tCe,isRegExp:eCe,maybeMap:nCe,merge:q2e},EG=H2e,im=wG,xp=mR,iCe=Object.prototype.hasOwnProperty,SG={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},Xo=Array.isArray,aCe=Array.prototype.push,CG=function(e,t){aCe.apply(e,Xo(t)?t:[t])},oCe=Date.prototype.toISOString,tB=xp.default,ei={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:im.encode,encodeValuesOnly:!1,format:tB,formatter:xp.formatters[tB],indices:!1,serializeDate:function(t){return oCe.call(t)},skipNulls:!1,strictNullHandling:!1},sCe=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},mw={},lCe=function e(t,r,n,i,a,o,s,c,l,u,f,h,p,d,g,_,v,m){for(var y=t,b=m,w=0,E=!1;(b=b.get(mw))!==void 0&&!E;){var C=b.get(t);if(w+=1,typeof C<"u"){if(C===w)throw new RangeError("Cyclic object value");E=!0}typeof b.get(mw)>"u"&&(w=0)}if(typeof u=="function"?y=u(r,y):y instanceof Date?y=p(y):n==="comma"&&Xo(y)&&(y=im.maybeMap(y,function(Y){return Y instanceof Date?p(Y):Y})),y===null){if(o)return l&&!_?l(r,ei.encoder,v,"key",d):r;y=""}if(sCe(y)||im.isBuffer(y)){if(l){var T=_?r:l(r,ei.encoder,v,"key",d);return[g(T)+"="+g(l(y,ei.encoder,v,"value",d))]}return[g(r)+"="+g(String(y))]}var A=[];if(typeof y>"u")return A;var I;if(n==="comma"&&Xo(y))_&&l&&(y=im.maybeMap(y,l)),I=[{value:y.length>0?y.join(",")||null:void 0}];else if(Xo(u))I=u;else{var O=Object.keys(y);I=f?O.sort(f):O}var P=c?r.replace(/\./g,"%2E"):r,k=i&&Xo(y)&&y.length===1?P+"[]":P;if(a&&Xo(y)&&y.length===0)return k+"[]";for(var F=0;F<I.length;++F){var M=I[F],D=typeof M=="object"&&typeof M.value<"u"?M.value:y[M];if(!(s&&D===null)){var G=h&&c?M.replace(/\./g,"%2E"):M,Q=Xo(y)?typeof n=="function"?n(k,G):k:k+(h?"."+G:"["+G+"]");m.set(t,w);var te=EG();te.set(mw,m),CG(A,e(D,Q,n,i,a,o,s,c,n==="comma"&&_&&Xo(y)?null:l,u,f,h,p,d,g,_,v,te))}}return A},uCe=function(t){if(!t)return ei;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||ei.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=xp.default;if(typeof t.format<"u"){if(!iCe.call(xp.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=xp.formatters[n],a=ei.filter;(typeof t.filter=="function"||Xo(t.filter))&&(a=t.filter);var o;if(t.arrayFormat in SG?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=ei.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:ei.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ei.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ei.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ei.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ei.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ei.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ei.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ei.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ei.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ei.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ei.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ei.strictNullHandling}},cCe=function(e,t){var r=e,n=uCe(t),i,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):Xo(n.filter)&&(a=n.filter,i=a);var o=[];if(typeof r!="object"||r===null)return"";var s=SG[n.arrayFormat],c=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=EG(),u=0;u<i.length;++u){var f=i[u];n.skipNulls&&r[f]===null||CG(o,lCe(r[f],f,s,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var h=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),h.length>0?p+h:""},nh=wG,$2=Object.prototype.hasOwnProperty,fCe=Array.isArray,Fn={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:nh.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},hCe=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},TG=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},dCe="utf8=%26%2310003%3B",pCe="utf8=%E2%9C%93",vCe=function(t,r){var n={__proto__:null},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,a),s=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===pCe?l="utf-8":o[c]===dCe&&(l="iso-8859-1"),s=c,c=o.length);for(c=0;c<o.length;++c)if(c!==s){var u=o[c],f=u.indexOf("]="),h=f===-1?u.indexOf("="):f+1,p,d;h===-1?(p=r.decoder(u,Fn.decoder,l,"key"),d=r.strictNullHandling?null:""):(p=r.decoder(u.slice(0,h),Fn.decoder,l,"key"),d=nh.maybeMap(TG(u.slice(h+1),r),function(_){return r.decoder(_,Fn.decoder,l,"value")})),d&&r.interpretNumericEntities&&l==="iso-8859-1"&&(d=hCe(d)),u.indexOf("[]=")>-1&&(d=fCe(d)?[d]:d);var g=$2.call(n,p);g&&r.duplicates==="combine"?n[p]=nh.combine(n[p],d):(!g||r.duplicates==="last")&&(n[p]=d)}return n},gCe=function(e,t,r,n){for(var i=n?t:TG(t,r),a=e.length-1;a>=0;--a){var o,s=e[a];if(s==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=r.plainObjects?Object.create(null):{};var c=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(l,10);!r.parseArrays&&l===""?o={0:i}:!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},mCe=function(t,r,n,i){if(t){var a=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,c=n.depth>0&&o.exec(a),l=c?a.slice(0,c.index):a,u=[];if(l){if(!n.plainObjects&&$2.call(Object.prototype,l)&&!n.allowPrototypes)return;u.push(l)}for(var f=0;n.depth>0&&(c=s.exec(a))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&$2.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+a.slice(c.index)+"]"),gCe(u,r,n,i)}},_Ce=function(t){if(!t)return Fn;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?Fn.charset:t.charset,n=typeof t.duplicates>"u"?Fn.duplicates:t.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Fn.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Fn.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Fn.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Fn.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Fn.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Fn.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Fn.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Fn.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Fn.decoder,delimiter:typeof t.delimiter=="string"||nh.isRegExp(t.delimiter)?t.delimiter:Fn.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Fn.depth,duplicates:n,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Fn.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Fn.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Fn.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Fn.strictNullHandling}},yCe=function(e,t){var r=_Ce(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?vCe(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],c=mCe(s,n[s],r,typeof e=="string");i=nh.merge(i,c,r)}return r.allowSparse===!0?i:nh.compact(i)},xCe=cCe,bCe=yCe,wCe=mR,ECe={formats:wCe,parse:bCe,stringify:xCe},SCe=oSe;function Io(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var CCe=/^([a-z0-9.+-]+:)/i,TCe=/:[0-9]*$/,ACe=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ICe=["<",">",'"',"`"," ","\r",`
`,"	"],RCe=["{","}","|","\\","^","`"].concat(ICe),G2=["'"].concat(RCe),rB=["%","/","?",";","#"].concat(G2),nB=["/","?","#"],PCe=255,iB=/^[+a-z0-9A-Z_-]{0,63}$/,OCe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kCe={javascript:!0,"javascript:":!0},V2={javascript:!0,"javascript:":!0},Hf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},H2=ECe;function Zy(e,t,r){if(e&&typeof e=="object"&&e instanceof Io)return e;var n=new Io;return n.parse(e,t,r),n}Io.prototype.parse=function(e,t,r){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",a=e.split(i),o=/\\/g;a[0]=a[0].replace(o,"/"),e=a.join(i);var s=e;if(s=s.trim(),!r&&e.split("#").length===1){var c=ACe.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],t?this.query=H2.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=CCe.exec(s);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@/]+@[^@/]+/)){var f=s.substr(0,2)==="//";f&&!(l&&V2[l])&&(s=s.substr(2),this.slashes=!0)}if(!V2[l]&&(f||l&&!Hf[l])){for(var h=-1,p=0;p<nB.length;p++){var d=s.indexOf(nB[p]);d!==-1&&(h===-1||d<h)&&(h=d)}var g,_;h===-1?_=s.lastIndexOf("@"):_=s.lastIndexOf("@",h),_!==-1&&(g=s.slice(0,_),s=s.slice(_+1),this.auth=decodeURIComponent(g)),h=-1;for(var p=0;p<rB.length;p++){var d=s.indexOf(rB[p]);d!==-1&&(h===-1||d<h)&&(h=d)}h===-1&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var m=this.hostname.split(/\./),p=0,y=m.length;p<y;p++){var b=m[p];if(b&&!b.match(iB)){for(var w="",E=0,C=b.length;E<C;E++)b.charCodeAt(E)>127?w+="x":w+=b[E];if(!w.match(iB)){var T=m.slice(0,p),A=m.slice(p+1),I=b.match(OCe);I&&(T.push(I[1]),A.unshift(I[2])),A.length&&(s="/"+A.join(".")+s),this.hostname=T.join(".");break}}}this.hostname.length>PCe?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=SCe.toASCII(this.hostname));var O=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+O,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!kCe[u])for(var p=0,y=G2.length;p<y;p++){var k=G2[p];if(s.indexOf(k)!==-1){var F=encodeURIComponent(k);F===k&&(F=escape(k)),s=s.split(k).join(F)}}var M=s.indexOf("#");M!==-1&&(this.hash=s.substr(M),s=s.slice(0,M));var D=s.indexOf("?");if(D!==-1?(this.search=s.substr(D),this.query=s.substr(D+1),t&&(this.query=H2.parse(this.query)),s=s.slice(0,D)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Hf[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",G=this.search||"";this.path=O+G}return this.href=this.format(),this};function FCe(e){return typeof e=="string"&&(e=Zy(e)),e instanceof Io?e.format():Io.prototype.format.call(e)}Io.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(a=H2.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||a&&"?"+a||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Hf[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),o=o.replace("#","%23"),t+i+r+o+n};function NCe(e,t){return Zy(e,!1,!0).resolve(t)}Io.prototype.resolve=function(e){return this.resolveObject(Zy(e,!1,!0)).format()};Io.prototype.resolveObject=function(e){if(typeof e=="string"){var t=new Io;t.parse(e,!1,!0),e=t}for(var r=new Io,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var c=o[s];c!=="protocol"&&(r[c]=e[c])}return Hf[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Hf[e.protocol]){for(var l=Object.keys(e),u=0;u<l.length;u++){var f=l[u];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!V2[e.protocol]){for(var y=(e.pathname||"").split("/");y.length&&!(e.host=y.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),r.pathname=y.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var h=r.pathname||"",p=r.search||"";r.path=h+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var d=r.pathname&&r.pathname.charAt(0)==="/",g=e.host||e.pathname&&e.pathname.charAt(0)==="/",_=g||d||r.host&&e.pathname,v=_,m=r.pathname&&r.pathname.split("/")||[],y=e.pathname&&e.pathname.split("/")||[],b=r.protocol&&!Hf[r.protocol];if(b&&(r.hostname="",r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(y[0]===""?y[0]=e.host:y.unshift(e.host)),e.host=null),_=_&&(y[0]===""||m[0]==="")),g)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,m=y;else if(y.length)m||(m=[]),m.pop(),m=m.concat(y),r.search=e.search,r.query=e.query;else if(e.search!=null){if(b){r.host=m.shift(),r.hostname=r.host;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return r.search=e.search,r.query=e.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=m.slice(-1)[0],C=(r.host||e.host||m.length>1)&&(E==="."||E==="..")||E==="",T=0,A=m.length;A>=0;A--)E=m[A],E==="."?m.splice(A,1):E===".."?(m.splice(A,1),T++):T&&(m.splice(A,1),T--);if(!_&&!v)for(;T--;T)m.unshift("..");_&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),C&&m.join("/").substr(-1)!=="/"&&m.push("");var I=m[0]===""||m[0]&&m[0].charAt(0)==="/";if(b){r.hostname=I?"":m.length?m.shift():"",r.host=r.hostname;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return _=_||r.host&&m.length,_&&!I&&m.unshift(""),m.length>0?r.pathname=m.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Io.prototype.parseHost=function(){var e=this.host,t=TCe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var LCe=Zy,BCe=NCe,MCe=FCe;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ls;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(ls||(ls={}));var ih;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(ih||(ih={}));var qp;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(qp||(qp={}));var ut;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(ut||(ut={}));var Pa;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Pa||(Pa={}));var it;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(it||(it={}));var Vl;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Vl||(Vl={}));var Tt;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(Tt||(Tt={}));var Kp;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Kp||(Kp={}));var vi;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(vi||(vi={}));var as;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(as||(as={}));var _a;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(_a||(_a={}));var na;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(na||(na={}));var Ls;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Ls||(Ls={}));var s_;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(s_||(s_={}));var So;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(So||(So={}));var Si;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Si||(Si={}));var Mn;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(Mn||(Mn={}));var Ro;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Ro||(Ro={}));/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zu={parse:LCe,format:MCe,resolve:BCe};yt.RETINA_PREFIX=/@([0-9\.]+)x/;yt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var X2=!1,aB="6.4.2";function DCe(){X2=!0}function AG(e){var t;if(!X2){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+aB+" -  "+e+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=globalThis.console).log.apply(t,r)}else globalThis.console&&globalThis.console.log("PixiJS "+aB+" - "+e+" - http://www.pixijs.com/");X2=!0}}var _w;function IG(){return typeof _w>"u"&&(_w=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:yt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var r=document.createElement("canvas"),n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t),i=!!(n&&n.getContextAttributes().stencil);if(n){var a=n.getExtension("WEBGL_lose_context");a&&a.loseContext()}return n=null,i}catch{return!1}}()),_w}var UCe="#f0f8ff",jCe="#faebd7",$Ce="#00ffff",GCe="#7fffd4",VCe="#f0ffff",HCe="#f5f5dc",XCe="#ffe4c4",zCe="#000000",WCe="#ffebcd",YCe="#0000ff",qCe="#8a2be2",KCe="#a52a2a",ZCe="#deb887",JCe="#5f9ea0",QCe="#7fff00",eTe="#d2691e",tTe="#ff7f50",rTe="#6495ed",nTe="#fff8dc",iTe="#dc143c",aTe="#00ffff",oTe="#00008b",sTe="#008b8b",lTe="#b8860b",uTe="#a9a9a9",cTe="#006400",fTe="#a9a9a9",hTe="#bdb76b",dTe="#8b008b",pTe="#556b2f",vTe="#ff8c00",gTe="#9932cc",mTe="#8b0000",_Te="#e9967a",yTe="#8fbc8f",xTe="#483d8b",bTe="#2f4f4f",wTe="#2f4f4f",ETe="#00ced1",STe="#9400d3",CTe="#ff1493",TTe="#00bfff",ATe="#696969",ITe="#696969",RTe="#1e90ff",PTe="#b22222",OTe="#fffaf0",kTe="#228b22",FTe="#ff00ff",NTe="#dcdcdc",LTe="#f8f8ff",BTe="#daa520",MTe="#ffd700",DTe="#808080",UTe="#008000",jTe="#adff2f",$Te="#808080",GTe="#f0fff0",VTe="#ff69b4",HTe="#cd5c5c",XTe="#4b0082",zTe="#fffff0",WTe="#f0e68c",YTe="#fff0f5",qTe="#e6e6fa",KTe="#7cfc00",ZTe="#fffacd",JTe="#add8e6",QTe="#f08080",eAe="#e0ffff",tAe="#fafad2",rAe="#d3d3d3",nAe="#90ee90",iAe="#d3d3d3",aAe="#ffb6c1",oAe="#ffa07a",sAe="#20b2aa",lAe="#87cefa",uAe="#778899",cAe="#778899",fAe="#b0c4de",hAe="#ffffe0",dAe="#00ff00",pAe="#32cd32",vAe="#faf0e6",gAe="#ff00ff",mAe="#800000",_Ae="#66cdaa",yAe="#0000cd",xAe="#ba55d3",bAe="#9370db",wAe="#3cb371",EAe="#7b68ee",SAe="#00fa9a",CAe="#48d1cc",TAe="#c71585",AAe="#191970",IAe="#f5fffa",RAe="#ffe4e1",PAe="#ffe4b5",OAe="#ffdead",kAe="#000080",FAe="#fdf5e6",NAe="#808000",LAe="#6b8e23",BAe="#ffa500",MAe="#ff4500",DAe="#da70d6",UAe="#eee8aa",jAe="#98fb98",$Ae="#afeeee",GAe="#db7093",VAe="#ffefd5",HAe="#ffdab9",XAe="#cd853f",zAe="#ffc0cb",WAe="#dda0dd",YAe="#b0e0e6",qAe="#800080",KAe="#663399",ZAe="#ff0000",JAe="#bc8f8f",QAe="#4169e1",eIe="#8b4513",tIe="#fa8072",rIe="#f4a460",nIe="#2e8b57",iIe="#fff5ee",aIe="#a0522d",oIe="#c0c0c0",sIe="#87ceeb",lIe="#6a5acd",uIe="#708090",cIe="#708090",fIe="#fffafa",hIe="#00ff7f",dIe="#4682b4",pIe="#d2b48c",vIe="#008080",gIe="#d8bfd8",mIe="#ff6347",_Ie="#40e0d0",yIe="#ee82ee",xIe="#f5deb3",bIe="#ffffff",wIe="#f5f5f5",EIe="#ffff00",SIe="#9acd32",CIe={aliceblue:UCe,antiquewhite:jCe,aqua:$Ce,aquamarine:GCe,azure:VCe,beige:HCe,bisque:XCe,black:zCe,blanchedalmond:WCe,blue:YCe,blueviolet:qCe,brown:KCe,burlywood:ZCe,cadetblue:JCe,chartreuse:QCe,chocolate:eTe,coral:tTe,cornflowerblue:rTe,cornsilk:nTe,crimson:iTe,cyan:aTe,darkblue:oTe,darkcyan:sTe,darkgoldenrod:lTe,darkgray:uTe,darkgreen:cTe,darkgrey:fTe,darkkhaki:hTe,darkmagenta:dTe,darkolivegreen:pTe,darkorange:vTe,darkorchid:gTe,darkred:mTe,darksalmon:_Te,darkseagreen:yTe,darkslateblue:xTe,darkslategray:bTe,darkslategrey:wTe,darkturquoise:ETe,darkviolet:STe,deeppink:CTe,deepskyblue:TTe,dimgray:ATe,dimgrey:ITe,dodgerblue:RTe,firebrick:PTe,floralwhite:OTe,forestgreen:kTe,fuchsia:FTe,gainsboro:NTe,ghostwhite:LTe,goldenrod:BTe,gold:MTe,gray:DTe,green:UTe,greenyellow:jTe,grey:$Te,honeydew:GTe,hotpink:VTe,indianred:HTe,indigo:XTe,ivory:zTe,khaki:WTe,lavenderblush:YTe,lavender:qTe,lawngreen:KTe,lemonchiffon:ZTe,lightblue:JTe,lightcoral:QTe,lightcyan:eAe,lightgoldenrodyellow:tAe,lightgray:rAe,lightgreen:nAe,lightgrey:iAe,lightpink:aAe,lightsalmon:oAe,lightseagreen:sAe,lightskyblue:lAe,lightslategray:uAe,lightslategrey:cAe,lightsteelblue:fAe,lightyellow:hAe,lime:dAe,limegreen:pAe,linen:vAe,magenta:gAe,maroon:mAe,mediumaquamarine:_Ae,mediumblue:yAe,mediumorchid:xAe,mediumpurple:bAe,mediumseagreen:wAe,mediumslateblue:EAe,mediumspringgreen:SAe,mediumturquoise:CAe,mediumvioletred:TAe,midnightblue:AAe,mintcream:IAe,mistyrose:RAe,moccasin:PAe,navajowhite:OAe,navy:kAe,oldlace:FAe,olive:NAe,olivedrab:LAe,orange:BAe,orangered:MAe,orchid:DAe,palegoldenrod:UAe,palegreen:jAe,paleturquoise:$Ae,palevioletred:GAe,papayawhip:VAe,peachpuff:HAe,peru:XAe,pink:zAe,plum:WAe,powderblue:YAe,purple:qAe,rebeccapurple:KAe,red:ZAe,rosybrown:JAe,royalblue:QAe,saddlebrown:eIe,salmon:tIe,sandybrown:rIe,seagreen:nIe,seashell:iIe,sienna:aIe,silver:oIe,skyblue:sIe,slateblue:lIe,slategray:uIe,slategrey:cIe,snow:fIe,springgreen:hIe,steelblue:dIe,tan:pIe,teal:vIe,thistle:gIe,tomato:mIe,turquoise:_Ie,violet:yIe,wheat:xIe,white:bIe,whitesmoke:wIe,yellow:EIe,yellowgreen:SIe};function ai(e,t){return t===void 0&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function _R(e){var t=e.toString(16);return t="000000".substring(0,6-t.length)+t,"#"+t}function yR(e){return typeof e=="string"&&(e=CIe[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function ra(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function TIe(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[ut.NORMAL_NPM]=ut.NORMAL,e[ut.ADD_NPM]=ut.ADD,e[ut.SCREEN_NPM]=ut.SCREEN,t[ut.NORMAL]=ut.NORMAL_NPM,t[ut.ADD]=ut.ADD_NPM,t[ut.SCREEN]=ut.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}var xR=TIe();function bR(e,t){return xR[t?1:0][e]}function RG(e,t,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function Jy(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,n=e>>8&255,i=e&255;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(t*255<<24)+(r<<16)+(n<<8)+i}function wR(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(n||n===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function PG(e,t){t===void 0&&(t=null);var r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function Qy(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}var AIe={Float32Array,Uint32Array,Int32Array,Uint8Array};function IIe(e,t){for(var r=0,n=0,i={},a=0;a<e.length;a++)n+=t[a],r+=e[a].length;for(var o=new ArrayBuffer(r*4),s=null,c=0,a=0;a<e.length;a++){var l=t[a],u=e[a],f=Qy(u);i[f]||(i[f]=new AIe[f](o)),s=i[f];for(var h=0;h<u.length;h++){var p=(h/l|0)*n+c,d=h%l;s[p+d]=u[h]}c+=l}return new Float32Array(o)}function Zp(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function z2(e){return!(e&e-1)&&!!e}function W2(e){var t=(e>65535?1:0)<<4;e>>>=t;var r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function os(e,t,r){var n=e.length,i;if(!(t>=n||r===0)){r=t+r>n?n-t:r;var a=n-r;for(i=t;i<a;++i)e[i]=e[i+r];e.length=a}}function Ju(e){return e===0?0:e<0?-1:1}var RIe=0;function ru(){return++RIe}var oB={};function Ys(e,t,r){if(r===void 0&&(r=3),!oB[t]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+e),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+e),console.warn(n))),oB[t]=!0}}var Y2={},da=Object.create(null),Ya=Object.create(null);function PIe(){var e;for(e in da)da[e].destroy();for(e in Ya)Ya[e].destroy()}function OG(){var e;for(e in da)delete da[e];for(e in Ya)delete Ya[e]}var q2=function(){function e(t,r,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||yt.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(t,r){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(r*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),e}();function kG(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r),a=i.data,o=a.length,s={top:null,left:null,right:null,bottom:null},c=null,l,u,f;for(l=0;l<o;l+=4)a[l+3]!==0&&(u=l/4%t,f=~~(l/4/t),s.top===null&&(s.top=f),(s.left===null||u<s.left)&&(s.left=u),(s.right===null||s.right<u)&&(s.right=u+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(t=s.right-s.left,r=s.bottom-s.top+1,c=n.getImageData(s.left,s.top,t,r)),{height:r,width:t,data:c}}var FG=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function OIe(e){var t=FG.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}var lg;function NG(e,t){if(t===void 0&&(t=globalThis.location),e.indexOf("data:")===0)return"";t=t||globalThis.location,lg||(lg=document.createElement("a")),lg.href=e;var r=Zu.parse(lg.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function Jp(e,t){var r=yt.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}const kIe=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Ya,CanvasRenderTarget:q2,DATA_URI:FG,EventEmitter:Ac,ProgramCache:Y2,TextureCache:da,clearTextureCache:OG,correctBlendMode:bR,createIndicesForQuads:PG,decomposeDataUri:OIe,deprecation:Ys,destroyTextureCache:PIe,determineCrossOrigin:NG,earcut:cR,getBufferType:Qy,getResolutionOfUrl:Jp,hex2rgb:ai,hex2string:_R,interleaveTypedArrays:IIe,isMobile:Ja,isPow2:z2,isWebGLSupported:IG,log2:W2,nextPow2:Zp,premultiplyBlendMode:xR,premultiplyRgba:RG,premultiplyTint:Jy,premultiplyTintToRgba:wR,removeItems:os,rgb2hex:ra,sayHello:AG,sign:Ju,skipHello:DCe,string2hex:yR,trimCanvas:kG,uid:ru,url:Zu},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qp=Math.PI*2,ER=180/Math.PI,qs=Math.PI/180,ln;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(ln||(ln={}));var cr=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y),t},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x=t,this.y=r,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),ug=[new cr,new cr,new cr,new cr],Qt=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=ln.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height},e.prototype.intersects=function(t,r){if(!r){var n=this.x<t.x?t.x:this.x,i=this.right>t.right?t.right:this.right;if(i<=n)return!1;var a=this.y<t.y?t.y:this.y,o=this.bottom>t.bottom?t.bottom:this.bottom;return o>a}var s=this.left,c=this.right,l=this.top,u=this.bottom;if(c<=s||u<=l)return!1;var f=ug[0].set(t.left,t.top),h=ug[1].set(t.left,t.bottom),p=ug[2].set(t.right,t.top),d=ug[3].set(t.right,t.bottom);if(p.x<=f.x||h.y<=f.y)return!1;var g=Math.sign(r.a*r.d-r.b*r.c);if(g===0||(r.apply(f,f),r.apply(h,h),r.apply(p,p),r.apply(d,d),Math.max(f.x,h.x,p.x,d.x)<=s||Math.min(f.x,h.x,p.x,d.x)>=c||Math.max(f.y,h.y,p.y,d.y)<=l||Math.min(f.y,h.y,p.y,d.y)>=u))return!1;var _=g*(h.y-f.y),v=g*(f.x-h.x),m=_*s+v*l,y=_*c+v*l,b=_*s+v*u,w=_*c+v*u;if(Math.max(m,y,b,w)<=_*f.x+v*f.y||Math.min(m,y,b,w)>=_*d.x+v*d.y)return!1;var E=g*(f.y-p.y),C=g*(p.x-f.x),T=E*s+C*l,A=E*c+C*l,I=E*s+C*u,O=E*c+C*u;return!(Math.max(T,A,I,O)<=E*f.x+C*f.y||Math.min(T,A,I,O)>=E*d.x+C*d.y)},e.prototype.pad=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this},e.prototype.fit=function(t){var r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(a-i,0),this},e.prototype.ceil=function(t,r){t===void 0&&(t=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this},e.prototype.enlarge=function(t){var r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=a-i,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),LG=function(){function e(t,r,n){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=t,this.y=r,this.radius=n,this.type=ln.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-t,a=this.y-r;return i*=i,a*=a,i+a<=n},e.prototype.getBounds=function(){return new Qt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),BG=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=t,this.y=r,this.width=n,this.height=i,this.type=ln.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1},e.prototype.getBounds=function(){return new Qt(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Xf=function(){function e(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=Array.isArray(r[0])?r[0]:r;if(typeof i[0]!="number"){for(var a=[],o=0,s=i.length;o<s;o++)a.push(i[o].x,i[o].y);i=a}this.points=i,this.type=ln.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=this.points.slice(),r=new e(t);return r.closeStroke=this.closeStroke,r},e.prototype.contains=function(t,r){for(var n=!1,i=this.points.length/2,a=0,o=i-1;a<i;o=a++){var s=this.points[a*2],c=this.points[a*2+1],l=this.points[o*2],u=this.points[o*2+1],f=c>r!=u>r&&t<(l-s)*((r-c)/(u-c))+s;f&&(n=!n)}return n},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,r){return t+", "+r},"")+"]")},e}(),MG=function(){function e(t,r,n,i,a){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=20),this.x=t,this.y=r,this.width=n,this.height=i,this.radius=a,this.type=ln.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;var i=t-(this.x+n),a=r-(this.y+n),o=n*n;if(i*i+a*a<=o||(i=t-(this.x+this.width-n),i*i+a*a<=o)||(a=r-(this.y+this.height-n),i*i+a*a<=o)||(i=t-(this.x+n),i*i+a*a<=o))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),Pl=function(){function e(t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=t,this.scope=r}return e.prototype.clone=function(t,r){return t===void 0&&(t=this.cb),r===void 0&&(r=this.scope),new e(t,r,this._x,this._y)},e.prototype.set=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=t),(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y),t},e.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),Qr=function(){function e(t,r,n,i,a,o){t===void 0&&(t=1),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=0),o===void 0&&(o=0),this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o}return e.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.prototype.set=function(t,r,n,i,a,o){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o,this},e.prototype.toArray=function(t,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(t,r){r=r||new cr;var n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r},e.prototype.applyInverse=function(t,r){r=r||new cr;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,a=t.y;return r.x=this.d*n*i+-this.c*n*a+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*a+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r},e.prototype.translate=function(t,r){return this.tx+=t,this.ty+=r,this},e.prototype.scale=function(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this},e.prototype.rotate=function(t){var r=Math.cos(t),n=Math.sin(t),i=this.a,a=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=a*r-this.d*n,this.d=a*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this},e.prototype.append=function(t){var r=this.a,n=this.b,i=this.c,a=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*a,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*a,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*a+this.ty,this},e.prototype.setTransform=function(t,r,n,i,a,o,s,c,l){return this.a=Math.cos(s+l)*a,this.b=Math.sin(s+l)*a,this.c=-Math.sin(s-c)*o,this.d=Math.cos(s-c)*o,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this},e.prototype.prepend=function(t){var r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},e.prototype.decompose=function(t){var r=this.a,n=this.b,i=this.c,a=this.d,o=t.pivot,s=-Math.atan2(-i,a),c=Math.atan2(n,r),l=Math.abs(s+c);return l<1e-5||Math.abs(Qp-l)<1e-5?(t.rotation=c,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=c),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+a*a),t.position.x=this.tx+(o.x*r+o.y*i),t.position.y=this.ty+(o.x*n+o.y*a),t},e.prototype.invert=function(){var t=this.a,r=this.b,n=this.c,i=this.d,a=this.tx,o=t*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*a)/o,this.ty=-(t*this.ty-r*a)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),Du=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Uu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ju=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],K2=[],DG=[],cg=Math.sign;function FIe(){for(var e=0;e<16;e++){var t=[];K2.push(t);for(var r=0;r<16;r++)for(var n=cg(Du[e]*Du[r]+ju[e]*Uu[r]),i=cg(Uu[e]*Du[r]+$u[e]*Uu[r]),a=cg(Du[e]*ju[r]+ju[e]*$u[r]),o=cg(Uu[e]*ju[r]+$u[e]*$u[r]),s=0;s<16;s++)if(Du[s]===n&&Uu[s]===i&&ju[s]===a&&$u[s]===o){t.push(s);break}}for(var e=0;e<16;e++){var c=new Qr;c.set(Du[e],Uu[e],ju[e],$u[e],0,0),DG.push(c)}}FIe();var on={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Du[e]},uY:function(e){return Uu[e]},vX:function(e){return ju[e]},vY:function(e){return $u[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,t){return K2[e][t]},sub:function(e,t){return K2[e][on.inv(t)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)===2},byDirection:function(e,t){return Math.abs(e)*2<=Math.abs(t)?t>=0?on.S:on.N:Math.abs(t)*2<=Math.abs(e)?e>0?on.E:on.W:t>0?e>0?on.SE:on.SW:e>0?on.NE:on.NW},matrixAppendRotationInv:function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=DG[on.inv(t)];i.tx=r,i.ty=n,e.append(i)}},G0=function(){function e(){this.worldTransform=new Qr,this.localTransform=new Qr,this.position=new Pl(this.onChange,this,0,0),this.scale=new Pl(this.onChange,this,1,1),this.pivot=new Pl(this.onChange,this,0,0),this.skew=new Pl(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,i=this.worldTransform;i.a=r.a*n.a+r.b*n.c,i.b=r.a*n.b+r.b*n.d,i.c=r.c*n.a+r.d*n.c,i.d=r.c*n.b+r.d*n.d,i.tx=r.tx*n.a+r.ty*n.c+n.tx,i.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.SORTABLE_CHILDREN=!1;var ah=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Qt.EMPTY:(t=t||new Qt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,a=t.c,o=t.d,s=t.tx,c=t.ty,l=n*r.x+a*r.y+s,u=i*r.x+o*r.y+c;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY,o=t[0],s=t[1];r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=t[2],s=t[3],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=t[4],s=t[5],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=t[6],s=t[7],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,this.minX=r,this.minY=n,this.maxX=i,this.maxY=a},e.prototype.addFrame=function(t,r,n,i,a){this.addFrameMatrix(t.worldTransform,r,n,i,a)},e.prototype.addFrameMatrix=function(t,r,n,i,a){var o=t.a,s=t.b,c=t.c,l=t.d,u=t.tx,f=t.ty,h=this.minX,p=this.minY,d=this.maxX,g=this.maxY,_=o*r+c*n+u,v=s*r+l*n+f;h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,_=o*i+c*n+u,v=s*i+l*n+f,h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,_=o*r+c*a+u,v=s*r+l*a+f,h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,_=o*i+c*a+u,v=s*i+l*a+f,h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,this.minX=h,this.minY=p,this.maxX=d,this.maxY=g},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,a=this.minY,o=this.maxX,s=this.maxY,c=r;c<n;c+=2){var l=t[c],u=t[c+1];i=l<i?l:i,a=u<a?u:a,o=l>o?l:o,s=u>s?u:s}this.minX=i,this.minY=a,this.maxX=o,this.maxY=s},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=a);for(var s=t.a,c=t.b,l=t.c,u=t.d,f=t.tx,h=t.ty,p=this.minX,d=this.minY,g=this.maxX,_=this.maxY,v=n;v<i;v+=2){var m=r[v],y=r[v+1],b=s*m+l*y+f,w=u*y+c*m+h;p=Math.min(p,b-a),g=Math.max(g,b+a),d=Math.min(d,w-o),_=Math.max(_,w+o)}this.minX=p,this.minY=d,this.maxX=g,this.maxY=_},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>a?t.maxY:a},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,a=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,a=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,a,o){t-=a,r-=o,n+=a,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Z2=function(e,t){return Z2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Z2(e,t)};function SR(e,t){Z2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var An=function(e){SR(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new G0,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new ah,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var a=n[i];Object.defineProperty(t.prototype,a,Object.getOwnPropertyDescriptor(r,a))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Qt),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._localBounds||(this._localBounds=new ah);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=a,this._bounds.updateID+=this._boundsID-o,s},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,a){return n&&(r=n.toGlobal(r,i,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,a,o,s,c,l,u){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=1),o===void 0&&(o=0),s===void 0&&(s=0),c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=a||1,this.rotation=o,this.skew.x=s,this.skew.y=c,this.pivot.x=l,this.pivot.y=u,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new CR),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*ER},set:function(r){this.transform.rotation=r*qs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=r,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(Ac),CR=function(e){SR(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(An);An.prototype.displayObjectUpdateTransform=An.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var sB;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(sB||(sB={}));var lB;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(lB||(lB={}));var uB;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(uB||(uB={}));var cB;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(cB||(cB={}));var fB;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(fB||(fB={}));var hB;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(hB||(hB={}));var dB;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(dB||(dB={}));var pB;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(pB||(pB={}));var vB;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(vB||(vB={}));var gB;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(gB||(gB={}));var mB;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(mB||(mB={}));var _B;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(_B||(_B={}));var yB;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(yB||(yB={}));var xB;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(xB||(xB={}));var bB;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(bB||(bB={}));var wB;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(wB||(wB={}));var J2;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(J2||(J2={}));var EB;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(EB||(EB={}));var SB;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(SB||(SB={}));function NIe(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var ii=function(e){SR(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=yt.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.addChild(n[a]);else{var o=n[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),a=this.getChildIndex(n);this.children[i]=n,this.children[a]=r,this.onChildrenChange(i<a?i:a)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);os(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.removeChild(n[a]);else{var o=n[0],s=this.children.indexOf(o);if(s===-1)return null;o.parent=null,o.transform._parentID=-1,os(this.children,s,1),this._boundsID++,this.onChildrenChange(s),o.emit("removed",this),this.emit("childRemoved",o,this,s)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,os(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,a=n,o=a-i,s;if(o>0&&o<=a){s=this.children.splice(i,o);for(var c=0;c<s.length;++c)s[c].parent=null,s[c].transform&&(s[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<s.length;++c)s[c].emit("removed",this),this.emit("childRemoved",s[c],this,c);return s}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var a=this.children[n];a._lastSortedIndex=n,!r&&a.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(NIe),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a];s.visible&&s.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,a;if(this.cullArea?(i=this.cullArea,a=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,a))this._render(r);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var c=this.children[o],l=c.cullable;c.cullable=l||!this.cullArea,c.render(r),c.cullable=l}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<n.length;a++)n[a].enabled&&this._enabledFilters.push(n[a])}var o=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==J2.NONE));if(o&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var a=0,s=this.children.length;a<s;++a)this.children[a].render(r)}o&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var a=0;a<i.length;++a)i[a].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(An);ii.prototype.containerUpdateTransform=ii.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var UG={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};An.mixin(UG);var LIe=9,fg=100,BIe=0,MIe=0,CB=2,TB=1,DIe=-1e3,UIe=-1e3,jIe=2,jG=function(){function e(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ja.tablet||Ja.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=fg+"px",r.style.height=fg+"px",r.style.position="absolute",r.style.top=BIe+"px",r.style.left=MIe+"px",r.style.zIndex=CB.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var t=this,r=document.createElement("button");r.style.width=TB+"px",r.style.height=TB+"px",r.style.position="absolute",r.style.top=DIe+"px",r.style.left=UIe+"px",r.style.zIndex=jIe.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},e.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var r=t.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},e.prototype.update=function(){var t=performance.now();if(!(Ja.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,i=r.top,a=r.width,o=r.height,s=this.renderer,c=s.width,l=s.height,u=s.resolution,f=a/c*u,h=o/l*u,p=this.div;p.style.left=n+"px",p.style.top=i+"px",p.style.width=c+"px",p.style.height=l+"px";for(var d=0;d<this.children.length;d++){var g=this.children[d];if(g.renderId!==this.renderId)g._accessibleActive=!1,os(this.children,d,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,d--;else{p=g._accessibleDiv;var _=g.hitArea,v=g.worldTransform;g.hitArea?(p.style.left=(v.tx+_.x*v.a)*f+"px",p.style.top=(v.ty+_.y*v.d)*h+"px",p.style.width=_.width*v.a*f+"px",p.style.height=_.height*v.d*h+"px"):(_=g.getBounds(),this.capHitArea(_),p.style.left=_.x*f+"px",p.style.top=_.y*h+"px",p.style.width=_.width*f+"px",p.style.height=_.height*h+"px",p.title!==g.accessibleTitle&&g.accessibleTitle!==null&&(p.title=g.accessibleTitle),p.getAttribute("aria-label")!==g.accessibleHint&&g.accessibleHint!==null&&p.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==p.title||g.tabIndex!==p.tabIndex)&&(p.title=g.accessibleTitle,p.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}},e.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},e.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var r=this.renderer,n=r.width,i=r.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>i&&(t.height=i-t.y)},e.prototype.addChild=function(t){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=fg+"px",r.style.height=fg+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=CB.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},e.prototype._onClick=function(t){var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"click",i),r.dispatchEvent(n,"pointertap",i),r.dispatchEvent(n,"tap",i)},e.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseover",i)},e.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=t.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseout",i)},e.prototype._onKeyDown=function(t){t.keyCode===LIe&&this.activate()},e.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.TARGET_FPMS=.06;var Po;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(Po||(Po={}));var yw=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}return e.prototype.match=function(t,r){return r===void 0&&(r=null),this.fn===t&&this.context===r},e.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},e.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},e.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=t?null:r,this.previous=null,r},e}(),_n=function(){function e(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new yw(null,null,1/0),this.deltaMS=1/yt.TARGET_FPMS,this.elapsedMS=1/yt.TARGET_FPMS,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,r,n){return n===void 0&&(n=Po.NORMAL),this._addListener(new yw(t,r,n))},e.prototype.addOnce=function(t,r,n){return n===void 0&&(n=Po.NORMAL),this._addListener(new yw(t,r,n,!0))},e.prototype._addListener=function(t){var r=this._head.next,n=this._head;if(!r)t.connect(n);else{for(;r;){if(t.priority>r.priority){t.connect(n);break}n=r,r=r.next}t.previous||t.connect(n)}return this._startIfPossible(),this},e.prototype.remove=function(t,r){for(var n=this._head.next;n;)n.match(t,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,r=this._head;r=r.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){t===void 0&&(t=performance.now());var r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*yt.TARGET_FPMS;for(var i=this._head,a=i.next;a;)a=a.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,yt.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),$G=function(){function e(){}return e.init=function(t){var r=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Po.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?_n.shared:new _n,t.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}();/*!
 * @pixi/interaction - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Q2=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new cr,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)},e.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var r="buttons"in t&&t.buttons;this.buttons=Number.isInteger(r)?r:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var eC=function(e,t){return eC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},eC(e,t)};function $Ie(e,t){eC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GG=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),am=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(t,r){r?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!==0},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),GIe=function(){function e(){this._tempPoint=new cr}return e.prototype.recursiveFindHit=function(t,r,n,i,a){if(!r||!r.visible)return!1;var o=t.data.global;a=r.interactive||a;var s=!1,c=a,l=!0;if(r.hitArea?(i&&(r.worldTransform.applyInverse(o,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,l=!1)),c=!1):r._mask&&i&&(r._mask.containsPoint&&r._mask.containsPoint(o)||(i=!1)),l&&r.interactiveChildren&&r.children)for(var u=r.children,f=u.length-1;f>=0;f--){var h=u[f],p=this.recursiveFindHit(t,h,n,i,c);if(p){if(!h.parent)continue;c=!1,p&&(t.target&&(i=!1),s=!0)}}return a&&(i&&!t.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(o)&&(s=!0),r.interactive&&(s&&!t.target&&(t.target=r),n&&n(t,r,!!s))),s},e.prototype.findHit=function(t,r,n,i){this.recursiveFindHit(t,r,n,i,!1)},e}(),VG={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};An.mixin(VG);var hg=1,dg={target:null,data:{global:null}},HG=function(e){$Ie(t,e);function t(r,n){var i=e.call(this)||this;return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new Q2,i.mouse.identifier=hg,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[hg]=i.mouse,i.interactionDataPool=[],i.eventData=new GG,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new GIe,i._tempDisplayObject=new CR,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(r,n){return dg.target=null,dg.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive(dg,n,null,!0),dg.target},t.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(_n.system.add(this.tickerUpdate,this,Po.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(_n.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},t.prototype.dispatchEvent=function(r,n,i){(!i.stopPropagationHint||r===i.stopsPropagatingAt)&&(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},t.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},t.prototype.mapPositionToPoint=function(r,n,i){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;r.x=(n-a.left)*(this.interactionDOMElement.width/a.width)*o,r.y=(i-a.top)*(this.interactionDOMElement.height/a.height)*o},t.prototype.processInteractive=function(r,n,i,a){var o=this.search.findHit(r,n,i,a),s=this.delayedEvents;if(!s.length)return o;r.stopPropagationHint=!1;var c=s.length;this.delayedEvents=[];for(var l=0;l<c;l++){var u=s[l],f=u.displayObject,h=u.eventString,p=u.eventData;p.stopsPropagatingAt===f&&(p.stopPropagationHint=!0),this.dispatchEvent(f,h,p)}return o},t.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var i=r.cancelable||!("cancelable"in r);i&&r.preventDefault()}for(var a=n.length,o=0;o<a;o++){var s=n[o],c=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,c);if(l.data.originalEvent=r,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),s.pointerType==="touch")this.emit("touchstart",l);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(r,n,i){var a=r.data,o=r.data.identifier;if(i){if(n.trackedPointers[o]||(n.trackedPointers[o]=new am(o)),this.dispatchEvent(n,"pointerdown",r),a.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;s?n.trackedPointers[o].rightDown=!0:n.trackedPointers[o].leftDown=!0,this.dispatchEvent(n,s?"rightdown":"mousedown",r)}}},t.prototype.onPointerComplete=function(r,n,i){for(var a=this.normalizeToPointerData(r),o=a.length,s=r.target!==this.interactionDOMElement?"outside":"",c=0;c<o;c++){var l=a[c],u=this.getInteractionDataForPointerId(l),f=this.configureInteractionEventForDOMEvent(this.eventData,l,u);if(f.data.originalEvent=r,this.processInteractive(f,this.lastObjectRendered,i,n||!s),this.emit(n?"pointercancel":"pointerup"+s,f),l.pointerType==="mouse"||l.pointerType==="pen"){var h=l.button===2;this.emit(h?"rightup"+s:"mouseup"+s,f)}else l.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+s,f),this.releaseInteractionDataForPointerId(l.pointerId))}},t.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(r,n){var i=r.data,a=r.data.identifier;n.trackedPointers[a]!==void 0&&(delete n.trackedPointers[a],this.dispatchEvent(n,"pointercancel",r),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},t.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},t.prototype.processPointerUp=function(r,n,i){var a=r.data,o=r.data.identifier,s=n.trackedPointers[o],c=a.pointerType==="touch",l=a.pointerType==="mouse"||a.pointerType==="pen",u=!1;if(l){var f=a.button===2,h=am.FLAGS,p=f?h.RIGHT_DOWN:h.LEFT_DOWN,d=s!==void 0&&s.flags&p;i?(this.dispatchEvent(n,f?"rightup":"mouseup",r),d&&(this.dispatchEvent(n,f?"rightclick":"click",r),u=!0)):d&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),s&&(f?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),c&&this.dispatchEvent(n,"touchend",r),s&&((!l||u)&&this.dispatchEvent(n,"pointertap",r),c&&(this.dispatchEvent(n,"tap",r),s.over=!1))):s&&(this.dispatchEvent(n,"pointerupoutside",r),c&&this.dispatchEvent(n,"touchendoutside",r)),s&&s.none&&delete n.trackedPointers[o]},t.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,a=0;a<i;a++){var o=n[a],s=this.getInteractionDataForPointerId(o),c=this.configureInteractionEventForDOMEvent(this.eventData,o,s);c.data.originalEvent=r,this.processInteractive(c,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",c),o.pointerType==="touch"&&this.emit("touchmove",c),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",c)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(r,n,i){var a=r.data,o=a.pointerType==="touch",s=a.pointerType==="mouse"||a.pointerType==="pen";s&&this.processPointerOverOut(r,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",r),o&&this.dispatchEvent(n,"touchmove",r),s&&this.dispatchEvent(n,"mousemove",r))},t.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=i,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(a.identifier)}},t.prototype.processPointerOverOut=function(r,n,i){var a=r.data,o=r.data.identifier,s=a.pointerType==="mouse"||a.pointerType==="pen",c=n.trackedPointers[o];i&&!c&&(c=n.trackedPointers[o]=new am(o)),c!==void 0&&(i&&this.mouseOverRenderer?(c.over||(c.over=!0,this.delayDispatchEvent(n,"pointerover",r),s&&this.delayDispatchEvent(n,"mouseover",r)),s&&this.cursor===null&&(this.cursor=n.cursor)):c.over&&(c.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),s&&this.dispatchEvent(n,"mouseout",r),c.none&&delete n.trackedPointers[o]))},t.prototype.onPointerOver=function(r){var n=this.normalizeToPointerData(r),i=n[0],a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",o)},t.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,i;return n===hg||r.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new Q2,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(r),i},t.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},t.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},t.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,a=r.changedTouches.length;i<a;i++){var o=r.changedTouches[i];typeof o.button>"u"&&(o.button=r.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=r.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,n.push(o)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var s=r;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=hg),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(r);return n},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(Ac);/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ti=function(){function e(t){this.items=[],this._name=t,this._aliasCount=0}return e.prototype.emit=function(t,r,n,i,a,o,s,c){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,f=l.items;this._aliasCount++;for(var h=0,p=f.length;h<p;h++)f[h][u](t,r,n,i,a,o,s,c);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},e.prototype.remove=function(t){var r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},e.prototype.contains=function(t){return this.items.indexOf(t)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Ti.prototype,{dispatch:{value:Ti.prototype.emit},run:{value:Ti.prototype.emit}});/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.PREFER_ENV=Ja.any?ls.WEBGL:ls.WEBGL2;yt.STRICT_TEXTURE_CACHE=!1;var e0=[];function ex(e,t){if(!e)return null;var r="";if(typeof e=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(var i=e0.length-1;i>=0;--i){var a=e0[i];if(a.test&&a.test(e,r))return new a(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var tC=function(e,t){return tC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},tC(e,t)};function Yr(e,t){tC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var rC=function(){return rC=Object.assign||function(t){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},rC.apply(this,arguments)};function VIe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]]);return r}var mc=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Ti("setRealSize"),this.onUpdate=new Ti("update"),this.onError=new Ti("onError")}return e.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},e.prototype.resize=function(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(t,r,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(t,r){return!1},e}(),cu=function(e){Yr(t,e);function t(r,n){var i=this,a=n||{},o=a.width,s=a.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return i=e.call(this,o,s)||this,i.data=r,i}return t.prototype.upload=function(r,n,i){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===na.UNPACK);var o=n.realWidth,s=n.realHeight;return i.width===o&&i.height===s?a.texSubImage2D(n.target,0,0,0,o,s,n.format,i.type,this.data):(i.width=o,i.height=s,a.texImage2D(n.target,0,i.internalFormat,o,s,0,n.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},t}(mc),HIe={scaleMode:vi.NEAREST,format:it.RGBA,alphaMode:na.NPM},ur=function(e){Yr(t,e);function t(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var i=e.call(this)||this;n=n||{};var a=n.alphaMode,o=n.mipmap,s=n.anisotropicLevel,c=n.scaleMode,l=n.width,u=n.height,f=n.wrapMode,h=n.format,p=n.type,d=n.target,g=n.resolution,_=n.resourceOptions;return r&&!(r instanceof mc)&&(r=ex(r,_),r.internal=!0),i.resolution=g||yt.RESOLUTION,i.width=Math.round((l||0)*i.resolution)/i.resolution,i.height=Math.round((u||0)*i.resolution)/i.resolution,i._mipmap=o!==void 0?o:yt.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:yt.ANISOTROPIC_LEVEL,i._wrapMode=f||yt.WRAP_MODE,i._scaleMode=c!==void 0?c:yt.SCALE_MODE,i.format=h||it.RGBA,i.type=p||Tt.UNSIGNED_BYTE,i.target=d||Vl.TEXTURE_2D,i.alphaMode=a!==void 0?a:na.UNPACK,i.uid=ru(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&u>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(r,n){var i;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},t.prototype.setSize=function(r,n,i){return i=i||this.resolution,this.setRealSize(r*i,n*i,i)},t.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=z2(this.realWidth)&&z2(this.realHeight)},t.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(r){this.emit("error",this,r)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ya[this.cacheId],delete da[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(r,n,i){i===void 0&&(i=yt.STRICT_TEXTURE_CACHE);var a=typeof r=="string",o=null;if(a)o=r;else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+ru()}o=r._pixiId}var c=Ya[o];if(a&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return c||(c=new t(r,n),c.cacheId=o,t.addToCache(c,o)),c},t.fromBuffer=function(r,n,i,a){r=r||new Float32Array(n*i*4);var o=new cu(r,{width:n,height:i}),s=r instanceof Float32Array?Tt.FLOAT:Tt.UNSIGNED_BYTE;return new t(o,Object.assign(HIe,a||{width:n,height:i,type:s}))},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Ya[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),Ya[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=Ya[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Ya[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)delete Ya[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},t._globalBatch=0,t}(Ac),tx=function(e){Yr(t,e);function t(r,n){var i=this,a=n||{},o=a.width,s=a.height;i=e.call(this,o,s)||this,i.items=[],i.itemDirtyIds=[];for(var c=0;c<r;c++){var l=new ur;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=r,i._load=null,i.baseTexture=null,i}return t.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)r[i]&&(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof mc?this.addResourceAt(r[i],i):this.addResourceAt(ex(r[i],n),i))},t.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},t.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},t.prototype.unbind=function(r){e.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(a){return a.resource}).filter(function(a){return a}),i=n.map(function(a){return a.load()});return this._load=Promise.all(i).then(function(){var a=r.items[0],o=a.realWidth,s=a.realHeight;return r.resize(o,s),Promise.resolve(r)}),this._load},t}(mc),TR=function(e){Yr(t,e);function t(r,n){var i=this,a=n||{},o=a.width,s=a.height,c,l;return Array.isArray(r)?(c=r,l=r.length):l=r,i=e.call(this,l,{width:o,height:s})||this,c&&i.initFromArray(c,n),i}return t.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=Vl.TEXTURE_2D_ARRAY},t.prototype.upload=function(r,n,i){var a=this,o=a.length,s=a.itemDirtyIds,c=a.items,l=r.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,o,0,n.format,i.type,null);for(var u=0;u<o;u++){var f=c[u];s[u]<f.dirtyId&&(s[u]=f.dirtyId,f.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},t}(tx),us=function(e){Yr(t,e);function t(r){var n=this,i=r,a=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return n=e.call(this,a,o)||this,n.source=r,n.noSubImage=!1,n}return t.crossOrigin=function(r,n,i){i===void 0&&n.indexOf("data:")!==0?r.crossOrigin=NG(n):i!==!1&&(r.crossOrigin=typeof i=="string"?i:"anonymous")},t.prototype.upload=function(r,n,i,a){var o=r.gl,s=n.realWidth,c=n.realHeight;if(a=a||this.source,a instanceof HTMLImageElement){if(!a.complete||a.naturalWidth===0)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===na.UNPACK),!this.noSubImage&&n.target===o.TEXTURE_2D&&i.width===s&&i.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,n.format,i.type,a):(i.width=s,i.height=c,o.texImage2D(n.target,0,i.internalFormat,n.format,i.type,a)),!0},t.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;this.resize(n,i),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(mc),rx=function(e){Yr(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},t}(us),AR=function(e){Yr(t,e);function t(r,n){var i=this,a=n||{},o=a.width,s=a.height,c=a.autoLoad,l=a.linkBaseTexture;if(r&&r.length!==t.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=e.call(this,6,{width:o,height:s})||this;for(var u=0;u<t.SIDES;u++)i.items[u].target=Vl.TEXTURE_CUBE_MAP_POSITIVE_X+u;return i.linkBaseTexture=l!==!1,r&&i.initFromArray(r,n),c!==!1&&i.load(),i}return t.prototype.bind=function(r){e.prototype.bind.call(this,r),r.target=Vl.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(r,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=Vl.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},t.prototype.upload=function(r,n,i){for(var a=this.itemDirtyIds,o=0;o<t.SIDES;o++){var s=this.items[o];a[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(r,s,i),a[o]=s.dirtyId):a[o]<-1&&(r.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),a[o]=-1))}return!0},t.test=function(r){return Array.isArray(r)&&r.length===t.SIDES},t.SIDES=6,t}(tx),nx=function(e){Yr(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLImageElement)){var a=new Image;us.crossOrigin(a,r,n.crossorigin),a.src=r,r=a}return i=e.call(this,r)||this,!r.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=r.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:yt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(i,a){var o=n.source;n.url=o.src;var s=function(){n.destroyed||(o.onload=null,o.onerror=null,n.resize(o.width,o.height),n._load=null,n.createBitmap?i(n.process()):i(n))};o.complete&&o.src?s():(o.onload=s,o.onerror=function(c){a(c),n.onError.emit(c)})}),this._load)},t.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,a=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:a?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return i(o,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===na.UNPACK?"premultiply":"none"})}).then(function(o){return r.destroyed?Promise.reject():(r.bitmap=o,r.update(),r._process=null,Promise.resolve(r))}),this._process},t.prototype.upload=function(r,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,r,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,r,n,i,this.bitmap),!this.preserveBitmap){var a=!0,o=n._glTextures;for(var s in o){var c=o[s];if(c!==i&&c.dirtyId!==n.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},t}(us),IR=function(e){Yr(t,e);function t(r,n){var i=this;return n=n||{},i=e.call(this,document.createElement("canvas"))||this,i._width=0,i._height=0,i.svg=r,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return t.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},t.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var r=this,n=new Image;us.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){r._resolve&&(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(r._resolve){var i=n.width,a=n.height;if(!i||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=i*r.scale,s=a*r.scale;(r._overrideWidth||r._overrideHeight)&&(o=r._overrideWidth||r._overrideHeight/a*i,s=r._overrideHeight||r._overrideWidth/i*a),o=Math.round(o),s=Math.round(s);var c=r.source;c.width=o,c.height=s,c._pixiId="canvas_"+ru(),c.getContext("2d").drawImage(n,0,0,i,a,0,0,o,s),r._resolve(),r._resolve=null}}},t.getSize=function(r){var n=t.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(r,n){return n==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&t.SVG_XML.test(r)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(us),RR=function(e){Yr(t,e);function t(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var o=r[0].src||r[0];us.crossOrigin(a,o,n.crossorigin);for(var s=0;s<r.length;++s){var c=document.createElement("source"),l=r[s],u=l.src,f=l.mime;u=u||r[s];var h=u.split("?").shift().toLowerCase(),p=h.slice(h.lastIndexOf(".")+1);f=f||t.MIME_TYPES[p]||"video/"+p,c.src=u,c.type=f,a.appendChild(c)}r=a}return i=e.call(this,r)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return t.prototype.update=function(r){if(!this.destroyed){var n=_n.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){r.valid?i(r):(r._resolve=i,n.load())}),this._load},t.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},t.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},t.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(_n.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(_n.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),t.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(us),PR=function(e){Yr(t,e);function t(r){return e.call(this,r)||this}return t.test=function(r){return!!globalThis.createImageBitmap&&r instanceof ImageBitmap},t}(us);e0.push(nx,PR,rx,RR,IR,cu,AR,TR);var XG={__proto__:null,Resource:mc,BaseImageResource:us,INSTALLED:e0,autoDetectResource:ex,AbstractMultiResource:tx,ArrayResource:TR,BufferResource:cu,CanvasResource:rx,CubeResource:AR,ImageResource:nx,SVGResource:IR,VideoResource:RR,ImageBitmapResource:PR},XIe=function(e){Yr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.upload=function(r,n,i){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===na.UNPACK);var o=n.realWidth,s=n.realHeight;return i.width===o&&i.height===s?a.texSubImage2D(n.target,0,0,0,o,s,n.format,i.type,this.data):(i.width=o,i.height=s,a.texImage2D(n.target,0,i.internalFormat,o,s,0,n.format,i.type,this.data)),!0},t}(cu),l_=function(){function e(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ti("disposeFramebuffer"),this.multisample=Mn.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(t,r){return t===void 0&&(t=0),this.colorTextures[t]=r||new ur(null,{scaleMode:vi.NEAREST,resolution:1,mipmap:_a.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(t){return this.depthTexture=t||new ur(new XIe(null,{width:this.width,height:this.height}),{scaleMode:vi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:_a.OFF,format:it.DEPTH_COMPONENT,type:Tt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],a=i.resolution;i.setSize(t/a,r/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(t/a,r/a)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),OR=function(e){Yr(t,e);function t(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];r={width:i,height:a,scaleMode:o,resolution:s}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Mn.NONE,n=e.call(this,null,r)||this,n.mipmap=_a.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new l_(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return t.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(ur),kR=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(t,r,n){var i=r.width,a=r.height;if(n){var o=t.width/2/i,s=t.height/2/a,c=t.x/i+o,l=t.y/a+s;n=on.add(n,on.NW),this.x0=c+o*on.uX(n),this.y0=l+s*on.uY(n),n=on.add(n,2),this.x1=c+o*on.uX(n),this.y1=l+s*on.uY(n),n=on.add(n,2),this.x2=c+o*on.uX(n),this.y2=l+s*on.uY(n),n=on.add(n,2),this.x3=c+o*on.uX(n),this.y3=l+s*on.uY(n)}else this.x0=t.x/i,this.y0=t.y/a,this.x1=(t.x+t.width)/i,this.y1=t.y/a,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/a,this.x3=t.x/i,this.y3=(t.y+t.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),AB=new kR;function pg(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Ot=function(e){Yr(t,e);function t(r,n,i,a,o,s){var c=e.call(this)||this;if(c.noFrame=!1,n||(c.noFrame=!0,n=new Qt(0,0,1,1)),r instanceof t&&(r=r.baseTexture),c.baseTexture=r,c._frame=n,c.trim=a,c.valid=!1,c._uvs=AB,c.uvMatrix=null,c.orig=i||n,c._rotate=Number(o||0),o===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new cr(s.x,s.y):new cr(0,0),c._updateID=0,c.textureCacheIds=[],r.valid?c.noFrame?r.valid&&c.onBaseTextureUpdated(r):c.frame=n:r.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&r.on("update",c.onBaseTextureUpdated,c),c}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&da[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),i=new t(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=r),i},t.prototype.updateUvs=function(){this._uvs===AB&&(this._uvs=new kR),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(r,n,i){n===void 0&&(n={}),i===void 0&&(i=yt.STRICT_TEXTURE_CACHE);var a=typeof r=="string",o=null;if(a)o=r;else if(r instanceof ur){if(!r.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";r.cacheId=s+"-"+ru(),ur.addToCache(r,r.cacheId)}o=r.cacheId}else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+ru()}o=r._pixiId}var c=da[o];if(a&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!c&&!(r instanceof ur)?(n.resolution||(n.resolution=Jp(r)),c=new t(new ur(r,n)),c.baseTexture.cacheId=o,ur.addToCache(c.baseTexture,o),t.addToCache(c,o)):!c&&r instanceof ur&&(c=new t(r),t.addToCache(c,o)),c},t.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),a=t.from(r,Object.assign({resourceOptions:i},n),!1),o=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):o.load().then(function(){return Promise.resolve(a)})},t.fromBuffer=function(r,n,i,a){return new t(ur.fromBuffer(r,n,i,a))},t.fromLoader=function(r,n,i,a){var o=new ur(r,Object.assign({scaleMode:yt.SCALE_MODE,resolution:Jp(n)},a)),s=o.resource;s instanceof nx&&(s.url=n);var c=new t(o);return i||(i=n),ur.addToCache(c.baseTexture,i),t.addToCache(c,i),i!==n&&(ur.addToCache(c.baseTexture,n),t.addToCache(c,n)),c.baseTexture.valid?Promise.resolve(c):new Promise(function(l){c.baseTexture.once("loaded",function(){return l(c)})})},t.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),da[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),da[n]=r)},t.removeFromCache=function(r){if(typeof r=="string"){var n=da[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete da[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)da[r.textureCacheIds[a]]===r&&delete da[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,a=r.width,o=r.height,s=n+a>this.baseTexture.width,c=i+o>this.baseTexture.height;if(s||c){var l=s&&c?"and":"or",u="X: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.width,f="Y: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+l+" "+f))}this.valid=a&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(t,"EMPTY",{get:function(){return t._EMPTY||(t._EMPTY=new t(new ur),pg(t._EMPTY),pg(t._EMPTY.baseTexture)),t._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"WHITE",{get:function(){if(!t._WHITE){var r=document.createElement("canvas"),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),t._WHITE=new t(new ur(new rx(r))),pg(t._WHITE),pg(t._WHITE.baseTexture)}return t._WHITE},enumerable:!1,configurable:!0}),t}(Ac),nu=function(e){Yr(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n,i){i===void 0&&(i=!0);var a=this.baseTexture.resolution,o=Math.round(r*a)/a,s=Math.round(n*a)/a;this.valid=o>0&&s>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(o,s),this.updateUvs()},t.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},t.create=function(r){for(var n=arguments,i=[],a=1;a<arguments.length;a++)i[a-1]=n[a];return typeof r=="number"&&(Ys("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:i[0],scaleMode:i[1],resolution:i[2]}),new t(new OR(r))},t}(Ot),zG=function(){function e(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(t,r,n){n===void 0&&(n=Mn.NONE);var i=new OR(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new nu(i)},e.prototype.getOptimalTexture=function(t,r,n,i){n===void 0&&(n=1),i===void 0&&(i=Mn.NONE);var a;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Zp(t),r=Zp(r),a=((t&65535)<<16|r&65535)>>>0,i>1&&(a+=i*4294967296)):a=i>1?-i:-1,this.texturePool[a]||(this.texturePool[a]=[]);var o=this.texturePool[a].pop();return o||(o=this.createTexture(t,r,i)),o.filterPoolKey=a,o.setResolution(n),o},e.prototype.getFilterTexture=function(t,r,n){var i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||Mn.NONE);return i.filterFrame=t.filterFrame,i},e.prototype.returnTexture=function(t){var r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)},e.prototype.returnFilterTexture=function(t){this.returnTexture(t)},e.prototype.clear=function(t){if(t=t!==!1,t)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY=-1,e}(),nC=function(){function e(t,r,n,i,a,o,s){r===void 0&&(r=0),n===void 0&&(n=!1),i===void 0&&(i=Tt.FLOAT),this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=a,this.start=o,this.instance=s}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,r,n,i,a){return new e(t,r,n,i,a)},e}(),zIe=0,Xn=function(){function e(t,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=zIe++,this.disposeRunner=new Ti("disposeBuffer")}return e.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===Ro.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Ro.ELEMENT_ARRAY_BUFFER:Ro.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}(),WIe={Float32Array,Uint32Array,Int32Array,Uint8Array};function YIe(e,t){for(var r=0,n=0,i={},a=0;a<e.length;a++)n+=t[a],r+=e[a].length;for(var o=new ArrayBuffer(r*4),s=null,c=0,a=0;a<e.length;a++){var l=t[a],u=e[a],f=Qy(u);i[f]||(i[f]=new WIe[f](o)),s=i[f];for(var h=0;h<u.length;h++){var p=(h/l|0)*n+c,d=h%l;s[p+d]=u[h]}c+=l}return new Float32Array(o)}var IB={5126:4,5123:2,5121:1},qIe=0,KIe={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Uh=function(){function e(t,r){t===void 0&&(t=[]),r===void 0&&(r={}),this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=qIe++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ti("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(t,r,n,i,a,o,s,c){if(n===void 0&&(n=0),i===void 0&&(i=!1),c===void 0&&(c=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Xn||(r instanceof Array&&(r=new Float32Array(r)),r=new Xn(r));var l=t.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],r,n,i,a);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[t]=new nC(f,n,i,a,o,s,c),this.instanced=this.instanced||c,this},e.prototype.getAttribute=function(t){return this.attributes[t]},e.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},e.prototype.addIndex=function(t){return t instanceof Xn||(t instanceof Array&&(t=new Uint16Array(t)),t=new Xn(t)),t.type=Ro.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],r=[],n=new Xn,i;for(i in this.attributes){var a=this.attributes[i],o=this.buffers[a.buffer];t.push(o.data),r.push(a.size*IB[a.type]/4),a.buffer=0}for(n.data=YIe(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var t in this.attributes){var r=this.attributes[t],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,r=0;r<this.buffers.length;r++)t.buffers[r]=new Xn(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];t.attributes[r]=new nC(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Ro.ELEMENT_ARRAY_BUFFER),t},e.merge=function(t){for(var r=new e,n=[],i=[],a=[],o,s=0;s<t.length;s++){o=t[s];for(var c=0;c<o.buffers.length;c++)i[c]=i[c]||0,i[c]+=o.buffers[c].data.length,a[c]=0}for(var s=0;s<o.buffers.length;s++)n[s]=new KIe[Qy(o.buffers[s].data)](i[s]),r.buffers[s]=new Xn(n[s]);for(var s=0;s<t.length;s++){o=t[s];for(var c=0;c<o.buffers.length;c++)n[c].set(o.buffers[c].data,a[c]),a[c]+=o.buffers[c].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=Ro.ELEMENT_ARRAY_BUFFER;for(var l=0,u=0,f=0,h=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){h=s;break}for(var s in o.attributes){var p=o.attributes[s];(p.buffer|0)===h&&(u+=p.size*IB[p.type]/4)}for(var s=0;s<t.length;s++){for(var d=t[s].indexBuffer.data,c=0;c<d.length;c++)r.indexBuffer.data[c+f]+=l;l+=t[s].buffers[h].data.length/u,f+=d.length}}return r},e}(),WG=function(e){Yr(t,e);function t(){var r=e.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return t}(Uh),FR=function(e){Yr(t,e);function t(){var r=e.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Xn(r.vertices),r.uvBuffer=new Xn(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return t.prototype.map=function(r,n){var i=0,a=0;return this.uvs[0]=i,this.uvs[1]=a,this.uvs[2]=i+n.width/r.width,this.uvs[3]=a,this.uvs[4]=i+n.width/r.width,this.uvs[5]=a+n.height/r.height,this.uvs[6]=i,this.uvs[7]=a+n.height/r.height,i=n.x,a=n.y,this.vertices[0]=i,this.vertices[1]=a,this.vertices[2]=i+n.width,this.vertices[3]=a,this.vertices[4]=i+n.width,this.vertices[5]=a+n.height,this.vertices[6]=i,this.vertices[7]=a+n.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Uh),ZIe=0,Hl=function(){function e(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ZIe++,this.static=!!r,this.ubo=!!n,t instanceof Xn?(this.buffer=t,this.buffer.type=Ro.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Xn(new Float32Array(1)),this.buffer.type=Ro.UNIFORM_BUFFER,this.autoManage=!0))}return e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(t,r,n){if(!this.ubo)this.uniforms[t]=new e(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(t,r,n){return new e(t,r,n)},e.uboFrom=function(t,r){return new e(t,r??!0,!0)},e}(),YG=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Mn.NONE,this.sourceFrame=new Qt,this.destinationFrame=new Qt,this.bindingSourceFrame=new Qt,this.bindingDestinationFrame=new Qt,this.filters=[],this.transform=null}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),vg=[new cr,new cr,new cr,new cr],xw=new Qr,NR=function(){function e(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new zG,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new WG,this.quadUv=new FR,this.tempRect=new Qt,this.activeState={},this.globalUniforms=new Hl({outputFrame:new Qt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return e.prototype.push=function(t,r){for(var n,i,a=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new YG,c=this.renderer.renderTexture,l=r[0].resolution,u=r[0].multisample,f=r[0].padding,h=r[0].autoFit,p=(n=r[0].legacy)!==null&&n!==void 0?n:!0,d=1;d<r.length;d++){var g=r[d];l=Math.min(l,g.resolution),u=Math.min(u,g.multisample),f=this.useMaxPadding?Math.max(f,g.padding):f+g.padding,h=h&&g.autoFit,p=p||((i=g.legacy)!==null&&i!==void 0?i:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),o.push(s),s.resolution=l,s.multisample=u,s.legacy=p,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(f);var _=this.tempRect.copyFrom(c.sourceFrame);a.projection.transform&&this.transformAABB(xw.copyFrom(a.projection.transform).invert(),_),h?(s.sourceFrame.fit(_),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(_)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,c.current?c.current.resolution:a.resolution,c.sourceFrame,c.destinationFrame,a.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,u),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(c.sourceFrame),s.bindingDestinationFrame.copyFrom(c.destinationFrame),s.transform=a.projection.transform,a.projection.transform=null,c.bind(s.renderTexture,s.sourceFrame,v),a.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var a=i.inputSize,o=i.inputPixel,s=i.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],o[0]=Math.round(a[0]*r.resolution),o[1]=Math.round(a[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=r.sourceFrame.width*a[2]-.5*o[2],s[3]=r.sourceFrame.height*a[3]-.5*o[3],r.legacy){var c=i.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,Ls.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var u=r.renderTexture,f=this.getOptimalFilterTexture(u.width,u.height,r.resolution);f.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){h===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(u.width,u.height,r.resolution),f.filterFrame=u.filterFrame),n[h].apply(this,u,f,Ls.CLEAR,r);var p=u;u=f,f=p}n[h].apply(this,u,l.renderTexture,Ls.BLEND,r),h>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},e.prototype.bindAndClear=function(t,r){r===void 0&&(r=Ls.CLEAR);var n=this.renderer,i=n.renderTexture,a=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=a.stateId&1||this.forceClear;(r===Ls.CLEAR||r===Ls.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(t,r,n,i){var a=this.renderer;a.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Pa.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Pa.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,r){var n=this.activeState,i=n.sourceFrame,a=n.destinationFrame,o=r._texture.orig,s=t.set(a.width,0,0,a.height,i.x,i.y),c=r.worldTransform.copyTo(Qr.TEMP_MATRIX);return c.invert(),s.prepend(c),s.scale(1/o.width,1/o.height),s.translate(r.anchor.x,r.anchor.y),s},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,r,n,i){return n===void 0&&(n=1),i===void 0&&(i=Mn.NONE),this.texturePool.getOptimalTexture(t,r,n,i)},e.prototype.getFilterTexture=function(t,r,n){if(typeof t=="number"){var i=t;t=r,r=i}t=t||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||Mn.NONE);return a.filterFrame=t.filterFrame,a},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(t,r){var n=vg[0],i=vg[1],a=vg[2],o=vg[3];n.set(r.left,r.top),i.set(r.left,r.bottom),a.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(a,a),t.apply(o,o);var s=Math.min(n.x,i.x,a.x,o.x),c=Math.min(n.y,i.y,a.y,o.y),l=Math.max(n.x,i.x,a.x,o.x),u=Math.max(n.y,i.y,a.y,o.y);r.x=s,r.y=c,r.width=l-s,r.height=u-c},e.prototype.roundFrame=function(t,r,n,i,a){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(a){var o=a.a,s=a.b,c=a.c,l=a.d;if((Math.abs(s)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}a=a?xw.copyFrom(a):xw.identity(),a.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(a,t),t.ceil(r),this.transformAABB(a.invert(),t)}},e}(),V0=function(){function e(t){this.renderer=t}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(t){},e}(),LR=function(){function e(t){this.renderer=t,this.emptyRenderer=new V0(t),this.currentRenderer=this.emptyRenderer}return e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,r){for(var n=this.renderer.texture.boundTextures,i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)},e.prototype.boundArray=function(t,r,n,i){for(var a=t.elements,o=t.ids,s=t.count,c=0,l=0;l<s;l++){var u=a[l],f=u._batchLocation;if(f>=0&&f<i&&r[f]===u){o[l]=f;continue}for(;c<i;){var h=r[c];if(h&&h._batchEnabled===n&&h._batchLocation===c){c++;continue}o[l]=c,u._batchLocation=c,r[c]=u;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),RB=0,BR=function(){function e(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=RB++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=RB++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var r=this.createContext(this.renderer.view,t);this.initFromContext(r)},e.prototype.createContext=function(t,r){var n;if(yt.PREFER_ENV>=ls.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl,r={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),qG=function(){function e(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Mn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return e}(),JIe=new Qt,MR=function(){function e(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new l_(10,10),this.msaaSamples=null}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Qt,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;yt.PREFER_ENV===ls.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=function(i){return r.drawBuffersWEBGL(i)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,r,n){n===void 0&&(n=0);var i=this.gl;if(t){var a=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,a.mipLevel=n),a.dirtyId!==t.dirtyId&&(a.dirtyId=t.dirtyId,a.dirtyFormat!==t.dirtyFormat?(a.dirtyFormat=t.dirtyFormat,a.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):a.dirtySize!==t.dirtySize&&(a.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var s=t.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){var c=r.width>>n,l=r.height>>n,u=c/r.width;this.setViewport(r.x*u,r.y*u,c,l)}else{var c=t.width>>n,l=t.height>>n;this.setViewport(0,0,c,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,r,n,i){var a=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(a.width!==n||a.height!==i||a.x!==t||a.y!==r)&&(a.x=t,a.y=r,a.width=n,a.height=i,this.gl.viewport(t,r,n,i))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,r,n,i,a){a===void 0&&(a=qp.COLOR|qp.DEPTH);var o=this.gl;o.clearColor(t,r,n,i),o.clear(a)},e.prototype.initFramebuffer=function(t){var r=this.gl,n=new qG(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));var i=t.colorTextures,a=i.length;r.drawBuffers||(a=Math.min(a,1));for(var o=0;o<a;o++){var s=i[o],c=s.parentTextureArray||s;this.renderer.texture.bind(c,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t,r){var n=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],a=t.colorTextures,o=a.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],c=0;c<o;c++){var l=a[c],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),!(c===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+c,l.target,u._glTextures[this.CONTEXT_UID].texture,r),s.push(n.COLOR_ATTACHMENT0+c))}if(s.length>1&&n.drawBuffers(s),t.depthTexture){var f=this.writeDepthTexture;if(f){var h=t.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},e.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},e.prototype.detectSamples=function(t){var r=this.msaaSamples,n=Mn.NONE;if(t<=1||r===null)return n;for(var i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=Mn.NONE),n},e.prototype.blit=function(t,r,n){var i=this,a=i.current,o=i.renderer,s=i.gl,c=i.CONTEXT_UID;if(o.context.webGLVersion===2&&a){var l=a.glFramebuffers[c];if(l){if(!t){if(!l.msaaBuffer)return;var u=a.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new l_(a.width,a.height),l.blitFramebuffer.addColorTexture(0,u)),t=l.blitFramebuffer,t.colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),(t.width!==a.width||t.height!==a.height)&&(t.width=a.width,t.height=a.height,t.dirtyId++,t.dirtySize++)}r||(r=JIe,r.width=a.width,r.height=a.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,f?s.NEAREST:s.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,r){var n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(t);a>=0&&this.managedFramebuffers.splice(a,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(t){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var r=t.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){t.stencil=!0;var n=t.width,i=t.height,a=this.gl,o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),r.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,r.multisample,a.DEPTH24_STENCIL8,n,i):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,i),r.stencil=o,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Qt},e.prototype.destroy=function(){this.renderer=null},e}(),bw={5126:4,5123:2,5121:1},DR=function(){function e(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;yt.PREFER_ENV===ls.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(a){return n.bindVertexArrayOES(a)},t.deleteVertexArray=function(a){return n.deleteVertexArrayOES(a)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(a,o){return i.vertexAttribDivisorANGLE(a,o)},t.drawElementsInstanced=function(a,o,s,c,l){return i.drawElementsInstancedANGLE(a,o,s,c,l)},t.drawArraysInstanced=function(a,o,s,c){return i.drawArraysInstancedANGLE(a,o,s,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},e.prototype.bind=function(t,r){r=r||this.renderer.shader.shader;var n=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID],a=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},a=!0);var o=i[r.program.id]||this.initGeometryVao(t,r,a);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,r=this.renderer.buffer,n=0;n<t.buffers.length;n++){var i=t.buffers[n];r.update(i)}},e.prototype.checkCompatibility=function(t,r){var n=t.attributes,i=r.attributeData;for(var a in i)if(!n[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},e.prototype.getSignature=function(t,r){var n=t.attributes,i=r.attributeData,a=["g",t.id];for(var o in n)i[o]&&a.push(o,i[o].location);return a.join("-")},e.prototype.initGeometryVao=function(t,r,n){n===void 0&&(n=!0);var i=this.gl,a=this.CONTEXT_UID,o=this.renderer.buffer,s=r.program;s.glPrograms[a]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,s);var c=this.getSignature(t,s),l=t.glVertexArrayObjects[this.CONTEXT_UID],u=l[c];if(u)return l[s.id]=u,u;var f=t.buffers,h=t.attributes,p={},d={};for(var g in f)p[g]=0,d[g]=0;for(var g in h)!h[g].size&&s.attributeData[g]?h[g].size=s.attributeData[g].size:h[g].size||console.warn("PIXI Geometry attribute '"+g+"' size cannot be determined (likely the bound shader does not have the attribute)"),p[h[g].buffer]+=h[g].size*bw[h[g].type];for(var g in h){var _=h[g],v=_.size;_.stride===void 0&&(p[_.buffer]===v*bw[_.type]?_.stride=0:_.stride=p[_.buffer]),_.start===void 0&&(_.start=d[_.buffer],d[_.buffer]+=v*bw[_.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(var m=0;m<f.length;m++){var y=f[m];o.bind(y),n&&y._glBuffers[a].refCount++}return this.activateVao(t,s),this._activeVao=u,l[s.id]=u,l[c]=u,u},e.prototype.disposeGeometry=function(t,r){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,o=t.buffers,s=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(t.disposeRunner.remove(this),!!i){if(s)for(var c=0;c<o.length;c++){var l=o[c]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(o[c],r))}if(!r){for(var u in i)if(u[0]==="g"){var f=i[u];this._activeVao===f&&this.unbind(),a.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)},e.prototype.activateVao=function(t,r){var n=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,o=t.buffers,s=t.attributes;t.indexBuffer&&a.bind(t.indexBuffer);var c=null;for(var l in s){var u=s[l],f=o[u.buffer],h=f._glBuffers[i];if(r.attributeData[l]){c!==h&&(a.bind(f),c=h);var p=r.attributeData[l].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(t,r,n,i){var a=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,c=s===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?o.instanced?a.drawElementsInstanced(t,r||o.indexBuffer.data.length,c,(n||0)*s,i||1):a.drawElements(t,r||o.indexBuffer.data.length,c,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?a.drawArraysInstanced(t,n,r||o.getSize(),i||1):a.drawArrays(t,n,r||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),KG=function(){function e(t){t===void 0&&(t=null),this.type=Si.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=yt.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(e.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Si.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function PB(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function OB(e,t){var r=e.getShaderSource(t).split(`
`).map(function(l,u){return u+": "+l}),n=e.getShaderInfoLog(t),i=n.split(`
`),a={},o=i.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!a[l]?(a[l]=!0,!0):!1}),s=[""];o.forEach(function(l){r[l-1]="%c"+r[l-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var c=r.join(`
`);s[0]=c,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function QIe(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||OB(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||OB(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function ww(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t}function ZG(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ww(2*t);case"bvec3":return ww(3*t);case"bvec4":return ww(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var JG={},Id=JG;function QG(){if(Id===JG||Id&&Id.isContextLost()){var e=document.createElement("canvas"),t=void 0;yt.PREFER_ENV>=ls.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Id=t}return Id}var gg;function eRe(){if(!gg){gg=So.MEDIUM;var e=QG();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);gg=t.precision?So.HIGH:So.MEDIUM}}return gg}function kB(e,t,r){if(e.substring(0,9)!=="precision"){var n=t;return t===So.HIGH&&r!==So.HIGH&&(n=So.MEDIUM),"precision "+n+` float;
`+e}else if(r!==So.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}var tRe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function e7(e){return tRe[e]}var mg=null,FB={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function t7(e,t){if(!mg){var r=Object.keys(FB);mg={};for(var n=0;n<r.length;++n){var i=r[n];mg[e[i]]=FB[i]}}return mg[t]}var oc=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,t){return e.type==="mat3"&&e.size===1&&t.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,t){return e.type==="vec2"&&e.size===1&&t.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,t){return e.type==="vec4"&&e.size===1&&t.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],rRe={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},nRe={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function iRe(e,t){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in e.uniforms){var a=t[i];if(!a){!((r=e.uniforms[i])===null||r===void 0)&&r.group&&(e.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var o=e.uniforms[i],s=!1,c=0;c<oc.length;c++)if(oc[c].test(a,o)){n.push(oc[c].code(i,o)),s=!0;break}if(!s){var l=a.size===1?rRe:nRe,u=l[a.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var aRe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function oRe(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}function r7(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=t.createShader(t.FRAGMENT_SHADER);;){var n=aRe.replace(/%forloop%/gi,oRe(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}var Rd;function sRe(){if(typeof Rd=="boolean")return Rd;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Rd=e({a:"b"},"a","b")===!0}catch{Rd=!1}return Rd}var lRe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,uRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,cRe=0,_g={},jh=function(){function e(t,r,n){n===void 0&&(n="pixi-shader"),this.id=cRe++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),_g[n]?(_g[n]++,n+="-"+_g[n]):_g[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=kB(this.vertexSrc,yt.PRECISION_VERTEX,So.HIGH),this.fragmentSrc=kB(this.fragmentSrc,yt.PRECISION_FRAGMENT,eRe())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(e,"defaultVertexSrc",{get:function(){return uRe},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return lRe},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=t+r,a=Y2[i];return a||(Y2[i]=a=new e(t,r,n)),a},e}(),Xs=function(){function e(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof Hl?this.uniformGroup=r:this.uniformGroup=new Hl(r):this.uniformGroup=new Hl({})}return e.prototype.checkUniformExists=function(t,r){if(r.uniforms[t])return!0;for(var n in r.uniforms){var i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,r,n){var i=jh.from(t,r);return new e(i,n)},e}(),Ew=0,Sw=1,Cw=2,Tw=3,Aw=4,Iw=5,fu=function(){function e(){this.data=0,this.blendMode=ut.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<Ew)},set:function(t){!!(this.data&1<<Ew)!==t&&(this.data^=1<<Ew)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<Sw)},set:function(t){!!(this.data&1<<Sw)!==t&&(this.data^=1<<Sw)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<Cw)},set:function(t){!!(this.data&1<<Cw)!==t&&(this.data^=1<<Cw)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<Tw)},set:function(t){!!(this.data&1<<Tw)!==t&&(this.data^=1<<Tw)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<Iw)},set:function(t){!!(this.data&1<<Iw)!==t&&(this.data^=1<<Iw)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Aw)},set:function(t){!!(this.data&1<<Aw)!==t&&(this.data^=1<<Aw)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ut.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),fRe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,hRe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Gt=function(e){Yr(t,e);function t(r,n,i){var a=this,o=jh.from(r||t.defaultVertexSrc,n||t.defaultFragmentSrc);return a=e.call(this,o,i)||this,a.padding=0,a.resolution=yt.FILTER_RESOLUTION,a.multisample=yt.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new fu,a}return t.prototype.apply=function(r,n,i,a,o){r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return fRe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return hRe},enumerable:!1,configurable:!0}),t}(Xs),dRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,pRe=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,NB=new Qr,ix=function(){function e(t,r){this._texture=t,this.mapCoord=new Qr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(t,r){r===void 0&&(r=t);for(var n=this.mapCoord,i=0;i<t.length;i+=2){var a=t[i],o=t[i+1];r[i]=a*n.a+o*n.c+n.tx,r[i+1]=a*n.b+o*n.d+n.ty}return r},e.prototype.update=function(t){var r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=r.orig,a=r.trim;a&&(NB.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(NB));var o=r.baseTexture,s=this.uClampFrame,c=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(r._frame.x+c+l)/o.width,s[1]=(r._frame.y+c+l)/o.height,s[2]=(r._frame.x+r._frame.width-c+l)/o.width,s[3]=(r._frame.y+r._frame.height-c+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0},e}(),n7=function(e){Yr(t,e);function t(r,n,i){var a=this,o=null;return typeof r!="string"&&n===void 0&&i===void 0&&(o=r,r=void 0,n=void 0,i=void 0),a=e.call(this,r||dRe,n||pRe,i)||this,a.maskSprite=o,a.maskMatrix=new Qr,a}return Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),t.prototype.apply=function(r,n,i,a){var o=this._maskSprite,s=o._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new ix(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,o).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,r.applyFilter(this,n,i,a))},t}(Gt),UR=function(){function e(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new KG;i.pooled=!0,i.maskObject=r,n=i}var a=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(a),n.autoDetect&&this.detect(n),n._target=t,n.type!==Si.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Si.SCISSOR:this.renderer.scissor.push(n);break;case Si.STENCIL:this.renderer.stencil.push(n);break;case Si.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break}n.type===Si.SPRITE&&this.maskStack.push(n)},e.prototype.pop=function(t){var r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Si.SCISSOR:this.renderer.scissor.pop();break;case Si.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Si.SPRITE:this.popSpriteMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===Si.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},e.prototype.detect=function(t){var r=t.maskObject;r.isSprite?t.type=Si.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Si.SCISSOR:t.type=Si.STENCIL},e.prototype.pushSpriteMask=function(t){var r,n,i=t.maskObject,a=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new n7]));var s=this.renderer,c=s.renderTexture,l,u;if(c.current){var f=c.current;l=t.resolution||f.resolution,u=(r=t.multisample)!==null&&r!==void 0?r:f.multisample}else l=t.resolution||s.resolution,u=(n=t.multisample)!==null&&n!==void 0?n:s.multisample;o[0].resolution=l,o[0].multisample=u,o[0].maskSprite=i;var h=a.filterArea;a.filterArea=i.getBounds(!0),s.filter.push(a,o),a.filterArea=h,t._filters||this.alphaMaskIndex++},e.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},e.prototype.destroy=function(){this.renderer=null},e}(),i7=function(){function e(t){this.renderer=t,this.maskStack=[],this.glConst=0}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),LB=new Qr,jR=function(e){Yr(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},t.prototype.calcScissorRect=function(r){if(!r._scissorRectLocal){var n=r._scissorRect,i=r.maskObject,a=this.renderer,o=a.renderTexture;i.renderable=!0;var s=i.getBounds();this.roundFrameToPixels(s,o.current?o.current.resolution:a.resolution,o.sourceFrame,o.destinationFrame,a.projection.transform),i.renderable=!1,n&&s.fit(n),r._scissorRectLocal=s}},t.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,i=r.b,a=r.c,o=r.d;return(Math.abs(i)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(o)>1e-4)},t.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||t.isMatrixRotated(n.worldTransform)||t.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var i=r._scissorRectLocal;return i.width>0&&i.height>0},t.prototype.roundFrameToPixels=function(r,n,i,a,o){t.isMatrixRotated(o)||(o=o?LB.copyFrom(o):LB.identity(),o.translate(-i.x,-i.y).scale(a.width/i.width,a.height/i.height).translate(a.x,a.y),this.renderer.filter.transformAABB(o,r),r.fit(a),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},t.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},t.prototype.pop=function(){var r=this.renderer.gl;this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},t.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},t}(i7),$R=function(e){Yr(t,e);function t(r){var n=e.call(this,r)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return t.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},t.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,a=r._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),r._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,a,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent()},t.prototype.pop=function(r){var n=this.renderer.gl;this.getStackLength()===0?n.disable(n.STENCIL_TEST):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},t}(i7),GR=function(){function e(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Qr,this.transform=null}return e.prototype.update=function(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,r,n,i){var a=this.projectionMatrix,o=i?-1:1;a.identity(),a.a=1/r.width*2,a.d=o*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-o-r.y*a.d},e.prototype.setTransform=function(t){},e.prototype.destroy=function(){this.renderer=null},e}(),Cu=new Qt,Pd=new Qt,VR=function(){function e(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Qt,this.destinationFrame=new Qt,this.viewportFrame=new Qt}return e.prototype.bind=function(t,r,n){t===void 0&&(t=null);var i=this.renderer;this.current=t;var a,o,s;t?(a=t.baseTexture,s=a.resolution,r||(Cu.width=t.frame.width,Cu.height=t.frame.height,r=Cu),n||(Pd.x=t.frame.x,Pd.y=t.frame.y,Pd.width=r.width,Pd.height=r.height,n=Pd),o=a.framebuffer):(s=i.resolution,r||(Cu.width=i.screen.width,Cu.height=i.screen.height,r=Cu),n||(n=Cu,n.width=r.width,n.height=r.height));var c=this.viewportFrame;c.x=n.x*s,c.y=n.y*s,c.width=n.width*s,c.height=n.height*s,t||(c.y=i.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(o,c),this.renderer.projection.update(n,r,s,!o),t?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,r){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,a=n.width!==i.width||n.height!==i.height;if(a){var o=this.viewportFrame,s=o.x,c=o.y,l=o.width,u=o.height;s=Math.round(s),c=Math.round(c),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,c,l,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],r),a&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function vRe(e,t,r,n,i){r.buffer.update(i)}var gRe={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},a7={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function o7(e){for(var t=e.map(function(c){return{data:c,offset:0,dataLen:0,dirty:0}}),r=0,n=0,i=0,a=0;a<t.length;a++){var o=t[a];if(r=a7[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){var s=n%r%16;n+=s,i+=s}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function s7(e,t){var r=[];for(var n in e)t[n]&&r.push(t[n]);return r.sort(function(i,a){return i.index-a.index}),r}function l7(e,t){if(!e.autoManage)return{size:0,syncFunc:vRe};for(var r=s7(e.uniforms,t),n=o7(r),i=n.uboElements,a=n.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<i.length;s++){for(var c=i[s],l=e.uniforms[c.data.name],u=c.data.name,f=!1,h=0;h<oc.length;h++){var p=oc[h];if(p.codeUbo&&p.test(c.data,l)){o.push("offset = "+c.offset/4+";",oc[h].codeUbo(c.data.name,l)),f=!0;break}}if(!f)if(c.data.size>1){var d=e7(c.data.type),g=Math.max(a7[c.data.type]/16,1),_=d/g,v=(4-_%4)%4;o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+c.offset/4+`;

                t = 0;

                for(var i=0; i < `+c.data.size*g+`; i++)
                {
                    for(var j = 0; j < `+_+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+v+`;
                }

                `)}else{var m=gRe[c.data.type];o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+c.offset/4+`;
                `+m+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var mRe=function(){function e(){}return e}(),u7=function(){function e(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function _Re(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=t.getActiveAttrib(e,i);if(a.name.indexOf("gl_")!==0){var o=t7(t,a.type),s={type:o,name:a.name,size:e7(o),location:t.getAttribLocation(e,a.name)};r[a.name]=s}}return r}function yRe(e,t){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=t.getActiveUniform(e,i),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),c=t7(t,a.type);r[o]={name:o,index:i,type:c,size:a.size,isArray:s,value:ZG(c,a.size)}}return r}function c7(e,t){var r=PB(e,e.VERTEX_SHADER,t.vertexSrc),n=PB(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||QIe(e,i,r,n),t.attributeData=_Re(i,e),t.uniformData=yRe(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var a=Object.keys(t.attributeData);a.sort(function(u,f){return u>f?1:-1});for(var o=0;o<a.length;o++)t.attributeData[a[o]].location=o,e.bindAttribLocation(i,o,a[o]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);var s={};for(var o in t.uniformData){var c=t.uniformData[o];s[o]={location:e.getUniformLocation(i,o),value:ZG(c.type,c.size)}}var l=new u7(i,s);return l}var xRe=0,yg={textureCount:0,uboCount:0},HR=function(){function e(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=xRe++}return e.prototype.systemCheck=function(){if(!sRe())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,r){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(yg.textureCount=0,yg.uboCount=0,this.syncUniformGroup(t.uniformGroup,yg)),i},e.prototype.setUniforms=function(t){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,r){var n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))},e.prototype.syncUniforms=function(t,r,n){var i=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);i(r.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=iRe(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(t,r){var n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;var i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,yg,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])},e.prototype.createSyncBufferGroup=function(t,r,n){var i=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var a=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=l7(t,this.shader.program.uniformData)),t.autoManage){var c=new Float32Array(s.size/4);t.buffer.update(c)}return r.uniformGroups[t.id]=s.syncFunc,r.uniformGroups[t.id]},e.prototype.getSignature=function(t,r,n){var i=t.uniforms,a=[n+"-"];for(var o in i)a.push(o),r[o]&&a.push(r[o].type);return a.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(t){var r=this.gl,n=t.program,i=c7(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function bRe(e,t){return t===void 0&&(t=[]),t[ut.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.ADD]=[e.ONE,e.ONE],t[ut.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.NONE]=[0,0],t[ut.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ut.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ut.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ut.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ut.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ut.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ut.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ut.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ut.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ut.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ut.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}var wRe=0,ERe=1,SRe=2,CRe=3,TRe=4,ARe=5,XR=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ut.NONE,this._blendEq=!1,this.map=[],this.map[wRe]=this.setBlend,this.map[ERe]=this.setOffset,this.map[SRe]=this.setCullFace,this.map[CRe]=this.setDepthTest,this.map[TRe]=this.setFrontFace,this.map[ARe]=this.setDepthMask,this.checks=[],this.defaultState=new fu,this.defaultState.blend=!0}return e.prototype.contextChange=function(t){this.gl=t,this.blendModes=bRe(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var r=this.stateId^t.data,n=0;r;)r&1&&this.map[n].call(this,!!(t.data&1<<n)),r=r>>1,n++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(t){this.gl.depthMask(t)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var r=this.blendModes[t],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,r){this.gl.polygonOffset(t,r)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,r){var n=this.checks.indexOf(t);r&&n===-1?this.checks.push(t):!r&&n!==-1&&this.checks.splice(n,1)},e.checkBlendMode=function(t,r){t.setBlendMode(r.blendMode)},e.checkPolygonOffset=function(t,r){t.setPolygonOffset(1,r.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),zR=function(){function e(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=yt.GC_MAX_IDLE,this.checkCountMax=yt.GC_MAX_CHECK_COUNT,this.mode=yt.GC_MODE}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==s_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,r=t.managedTextures,n=!1,i=0;i<r.length;i++){var a=r[i];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(t.destroyTexture(a,!0),r[i]=null,n=!0)}if(n){for(var o=0,i=0;i<r.length;i++)r[i]!==null&&(r[o++]=r[i]);r.length=o}},e.prototype.unload=function(t){var r=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},e.prototype.destroy=function(){this.renderer=null},e}();function IRe(e){var t,r,n,i,a,o,s,c,l,u,f,h,p,d,g,_,v,m,y,b,w,E,C;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?C=(t={},t[Tt.UNSIGNED_BYTE]=(r={},r[it.RGBA]=e.RGBA8,r[it.RGB]=e.RGB8,r[it.RG]=e.RG8,r[it.RED]=e.R8,r[it.RGBA_INTEGER]=e.RGBA8UI,r[it.RGB_INTEGER]=e.RGB8UI,r[it.RG_INTEGER]=e.RG8UI,r[it.RED_INTEGER]=e.R8UI,r[it.ALPHA]=e.ALPHA,r[it.LUMINANCE]=e.LUMINANCE,r[it.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,r),t[Tt.BYTE]=(n={},n[it.RGBA]=e.RGBA8_SNORM,n[it.RGB]=e.RGB8_SNORM,n[it.RG]=e.RG8_SNORM,n[it.RED]=e.R8_SNORM,n[it.RGBA_INTEGER]=e.RGBA8I,n[it.RGB_INTEGER]=e.RGB8I,n[it.RG_INTEGER]=e.RG8I,n[it.RED_INTEGER]=e.R8I,n),t[Tt.UNSIGNED_SHORT]=(i={},i[it.RGBA_INTEGER]=e.RGBA16UI,i[it.RGB_INTEGER]=e.RGB16UI,i[it.RG_INTEGER]=e.RG16UI,i[it.RED_INTEGER]=e.R16UI,i[it.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,i),t[Tt.SHORT]=(a={},a[it.RGBA_INTEGER]=e.RGBA16I,a[it.RGB_INTEGER]=e.RGB16I,a[it.RG_INTEGER]=e.RG16I,a[it.RED_INTEGER]=e.R16I,a),t[Tt.UNSIGNED_INT]=(o={},o[it.RGBA_INTEGER]=e.RGBA32UI,o[it.RGB_INTEGER]=e.RGB32UI,o[it.RG_INTEGER]=e.RG32UI,o[it.RED_INTEGER]=e.R32UI,o[it.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,o),t[Tt.INT]=(s={},s[it.RGBA_INTEGER]=e.RGBA32I,s[it.RGB_INTEGER]=e.RGB32I,s[it.RG_INTEGER]=e.RG32I,s[it.RED_INTEGER]=e.R32I,s),t[Tt.FLOAT]=(c={},c[it.RGBA]=e.RGBA32F,c[it.RGB]=e.RGB32F,c[it.RG]=e.RG32F,c[it.RED]=e.R32F,c[it.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,c),t[Tt.HALF_FLOAT]=(l={},l[it.RGBA]=e.RGBA16F,l[it.RGB]=e.RGB16F,l[it.RG]=e.RG16F,l[it.RED]=e.R16F,l),t[Tt.UNSIGNED_SHORT_5_6_5]=(u={},u[it.RGB]=e.RGB565,u),t[Tt.UNSIGNED_SHORT_4_4_4_4]=(f={},f[it.RGBA]=e.RGBA4,f),t[Tt.UNSIGNED_SHORT_5_5_5_1]=(h={},h[it.RGBA]=e.RGB5_A1,h),t[Tt.UNSIGNED_INT_2_10_10_10_REV]=(p={},p[it.RGBA]=e.RGB10_A2,p[it.RGBA_INTEGER]=e.RGB10_A2UI,p),t[Tt.UNSIGNED_INT_10F_11F_11F_REV]=(d={},d[it.RGB]=e.R11F_G11F_B10F,d),t[Tt.UNSIGNED_INT_5_9_9_9_REV]=(g={},g[it.RGB]=e.RGB9_E5,g),t[Tt.UNSIGNED_INT_24_8]=(_={},_[it.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,_),t[Tt.FLOAT_32_UNSIGNED_INT_24_8_REV]=(v={},v[it.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,v),t):C=(m={},m[Tt.UNSIGNED_BYTE]=(y={},y[it.RGBA]=e.RGBA,y[it.RGB]=e.RGB,y[it.ALPHA]=e.ALPHA,y[it.LUMINANCE]=e.LUMINANCE,y[it.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,y),m[Tt.UNSIGNED_SHORT_5_6_5]=(b={},b[it.RGB]=e.RGB,b),m[Tt.UNSIGNED_SHORT_4_4_4_4]=(w={},w[it.RGBA]=e.RGBA,w),m[Tt.UNSIGNED_SHORT_5_5_5_1]=(E={},E[it.RGBA]=e.RGBA,E),m),C}var om=function(){function e(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Tt.UNSIGNED_BYTE,this.internalFormat=it.RGBA,this.samplerType=0}return e}(),WR=function(){function e(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ur,this.hasIntegerTextures=!1}return e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=IRe(t);var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new om(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new om(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,r){r===void 0&&(r=0);var n=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var r=this,n=r.gl,i=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<i.length;a++)i[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<i.length;a++)i[a]===t&&(this.currentLocation!==a&&(n.activeTexture(n.TEXTURE0+a),this.currentLocation=a),n.bindTexture(t.target,this.emptyTextures[t.target].texture),i[a]=null)},e.prototype.ensureSamplerType=function(t){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,a=r.CONTEXT_UID;if(i)for(var o=t-1;o>=0;--o){var s=n[o];if(s){var c=s._glTextures[a];c.samplerType!==Kp.FLOAT&&this.renderer.texture.unbind(s)}}},e.prototype.initTexture=function(t){var r=new om(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r},e.prototype.initTextureType=function(t,r){var n,i;r.internalFormat=(i=(n=this.internalFormats[t.type])===null||n===void 0?void 0:n[t.format])!==null&&i!==void 0?i:t.format,this.webGLVersion===2&&t.type===Tt.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type},e.prototype.updateTexture=function(t){var r=t._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(t,r),t.resource&&t.resource.upload(n,t,r))r.samplerType!==Kp.FLOAT&&(this.hasIntegerTextures=!0);else{var i=t.realWidth,a=t.realHeight,o=n.gl;(r.width!==i||r.height!==a||r.dirtyId<0)&&(r.width=i,r.height=a,o.texImage2D(t.target,0,r.internalFormat,i,a,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,r){var n=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){var i=this.managedTextures.indexOf(t);i!==-1&&os(this.managedTextures,i,1)}},e.prototype.updateTextureStyle=function(t){var r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===_a.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=as.CLAMP:r.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,r){var n=this.gl;if(r.mipmap&&t.mipmap!==_a.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===vi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===vi.LINEAR){var a=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===vi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===vi.LINEAR?n.LINEAR:n.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),f7={__proto__:null,FilterSystem:NR,BatchSystem:LR,ContextSystem:BR,FramebufferSystem:MR,GeometrySystem:DR,MaskSystem:UR,ScissorSystem:jR,StencilSystem:$R,ProjectionSystem:GR,RenderTextureSystem:VR,ShaderSystem:HR,StateSystem:XR,TextureGCSystem:zR,TextureSystem:WR},Rw=new Qr,h7=function(e){Yr(t,e);function t(r,n){r===void 0&&(r=ih.UNKNOWN);var i=e.call(this)||this;return n=Object.assign({},yt.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new Qt(0,0,n.width,n.height),i.view=n.view||document.createElement("canvas"),i.resolution=n.resolution||yt.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(Ys("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return t.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=i,this.screen.height=a,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=a+"px"),this.emit("resize",i,a)},t.prototype.generateTexture=function(r,n,i,a){n===void 0&&(n={}),typeof n=="number"&&(Ys("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:a});var o=n.region,s=VIe(n,["region"]);a=o||r.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var c=nu.create(rC({width:a.width,height:a.height},s));return Rw.tx=-a.x,Rw.ty=-a.y,this.render(r,{renderTexture:c,clear:!1,transform:Rw,skipUpdateTransform:!!r.parent}),c},t.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=ih.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=_R(r),ai(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),t}(Ac),RRe=function(){function e(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return e}(),PRe=function(){function e(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,a=t._glBuffers[i]||this.createGLBuffer(t);n.bindBuffer(t.type,a.buffer)},e.prototype.bindBufferBase=function(t,r){var n=this,i=n.gl,a=n.CONTEXT_UID;if(this.boundBufferBases[r]!==t){var o=t._glBuffers[a]||this.createGLBuffer(t);this.boundBufferBases[r]=t,i.bindBufferBase(i.UNIFORM_BUFFER,r,o.buffer)}},e.prototype.bindBufferRange=function(t,r,n){var i=this,a=i.gl,o=i.CONTEXT_UID;n=n||0;var s=t._glBuffers[o]||this.createGLBuffer(t);a.bindBufferRange(a.UNIFORM_BUFFER,r||0,s.buffer,n*256,256)},e.prototype.update=function(t){var r=this,n=r.gl,i=r.CONTEXT_UID,a=t._glBuffers[i];if(t._updateID!==a.updateID)if(a.updateID=t._updateID,n.bindBuffer(t.type,a.buffer),a.byteLength>=t.data.byteLength)n.bufferSubData(t.type,0,t.data);else{var o=t.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;a.byteLength=t.data.byteLength,n.bufferData(t.type,t.data,o)}},e.prototype.dispose=function(t,r){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(t){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)},e.prototype.createGLBuffer=function(t){var r=this,n=r.CONTEXT_UID,i=r.gl;return t._glBuffers[n]=new RRe(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[n]},e}(),Qs=function(e){Yr(t,e);function t(r){var n=e.call(this,ih.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Ti("destroy"),contextChange:new Ti("contextChange"),reset:new Ti("reset"),update:new Ti("update"),postrender:new Ti("postrender"),prerender:new Ti("prerender"),resize:new Ti("resize")},n.runners.contextChange.add(n),n.globalUniforms=new Hl({projectionMatrix:new Qr},!0),n.addSystem(UR,"mask").addSystem(BR,"context").addSystem(XR,"state").addSystem(HR,"shader").addSystem(WR,"texture").addSystem(PRe,"buffer").addSystem(DR,"geometry").addSystem(MR,"framebuffer").addSystem(jR,"scissor").addSystem($R,"stencil").addSystem(GR,"projection").addSystem(zR,"textureGC").addSystem(NR,"filter").addSystem(VR,"renderTexture").addSystem(LR,"batch"),n.initPlugins(t.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,AG(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return t.create=function(r){if(IG())return new t(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var i=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,i)}else{var i=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i)}n>=Mn.HIGH?this.multisample=Mn.HIGH:n>=Mn.MEDIUM?this.multisample=Mn.MEDIUM:n>=Mn.LOW?this.multisample=Mn.LOW:this.multisample=Mn.NONE},t.prototype.addSystem=function(r,n){var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var a in this.runners)this.runners[a].add(i);return this},t.prototype.render=function(r,n){var i,a,o,s;if(n&&(n instanceof nu?(Ys("6.0.0","Renderer#render arguments changed, use options instead."),i=n,a=arguments[2],o=arguments[3],s=arguments[4]):(i=n.renderTexture,a=n.clear,o=n.transform,s=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(i||(this._lastObjectRendered=r),!s){var c=r.enableTempParent();r.updateTransform(),r.disableTempParent(c)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(r,n,i,a){n===void 0&&(n={});var o=e.prototype.generateTexture.call(this,r,n,i,a);return this.framebuffer.blit(),o},t.prototype.resize=function(r,n){e.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return Ys("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(r,n){t.__plugins=t.__plugins||{},t.__plugins[r]=n},t}(h7);function d7(e){return Qs.create(e)}var ORe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,kRe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,p7=ORe,YR=kRe,FRe=function(){function e(t){Ys("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return e.prototype.destroy=function(){this.renderer=null},e}(),u_=function(){function e(){this.texArray=null,this.blend=0,this.type=Pa.TRIANGLES,this.start=0,this.size=0,this.data=null}return e}(),c_=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},e}(),t0=function(){function e(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(t){return this[t+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},e}(),v7=function(e){Yr(t,e);function t(r){var n=e.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=fu.for2d(),n.size=yt.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return t.prototype.contextChange=function(){var r=this.renderer.gl;yt.PREFER_ENV===ls.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),yt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=r7(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var r=t._drawCallPool,n=t._textureArrayPool,i=this.size/4,a=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new u_);for(;n.length<a;)n.push(new c_);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},t.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,i=r.MAX_TEXTURES,a=t._textureArrayPool,o=this.renderer.batch,s=this._tempBoundTextures,c=this.renderer.textureGC.count,l=++ur._globalBatch,u=0,f=a[0],h=0;o.copyBoundTextures(s,i);for(var p=0;p<this._bufferSize;++p){var d=n[p];n[p]=null,d._batchEnabled!==l&&(f.count>=i&&(o.boundArray(f,s,l,i),this.buildDrawCalls(f,h,p),h=p,f=a[++u],++l),d._batchEnabled=l,d.touched=c,f.elements[f.count++]=d)}f.count>0&&(o.boundArray(f,s,l,i),this.buildDrawCalls(f,h,this._bufferSize),++u,++l);for(var p=0;p<s.length;p++)s[p]=null;ur._globalBatch=l},t.prototype.buildDrawCalls=function(r,n,i){var a=this,o=a._bufferedElements,s=a._attributeBuffer,c=a._indexBuffer,l=a.vertexSize,u=t._drawCallPool,f=this._dcIndex,h=this._aIndex,p=this._iIndex,d=u[f];d.start=this._iIndex,d.texArray=r;for(var g=n;g<i;++g){var _=o[g],v=_._texture.baseTexture,m=xR[v.alphaMode?1:0][_.blendMode];o[g]=null,n<g&&d.blend!==m&&(d.size=p-d.start,n=g,d=u[++f],d.texArray=r,d.start=p),this.packInterleavedGeometry(_,s,c,h,p),h+=_.vertexData.length/2*l,p+=_.indices.length,d.blend=m}n<i&&(d.size=p-d.start,++f),this._dcIndex=f,this._aIndex=h,this._iIndex=p},t.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},t.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,i=r._attributeBuffer,a=r._indexBuffer;yt.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,a=n.state,o=t._drawCallPool,s=null,c=0;c<r;c++){var l=o[c],u=l.texArray,f=l.type,h=l.size,p=l.start,d=l.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=d,a.set(this.state),i.drawElements(f,h,i.UNSIGNED_SHORT,p*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),yt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(r){var n=Zp(Math.ceil(r/8)),i=W2(n),a=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[a];return o||(this._aBuffers[a]=o=new t0(a*this.vertexSize*4)),o},t.prototype.getIndexBuffer=function(r){var n=Zp(Math.ceil(r/12)),i=W2(n),a=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(a)),o},t.prototype.packInterleavedGeometry=function(r,n,i,a,o){for(var s=n.uint32View,c=n.float32View,l=a/this.vertexSize,u=r.uvs,f=r.indices,h=r.vertexData,p=r._texture.baseTexture._batchLocation,d=Math.min(r.worldAlpha,1),g=d<1&&r._texture.baseTexture.alphaMode?Jy(r._tintRGB,d):r._tintRGB+(d*255<<24),_=0;_<h.length;_+=2)c[a++]=h[_],c[a++]=h[_+1],c[a++]=u[_],c[a++]=u[_+1],s[a++]=g,c[a++]=p;for(var _=0;_<f.length;_++)i[o++]=l+f[_]},t._drawCallPool=[],t._textureArrayPool=[],t}(V0),g7=function(){function e(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(t){if(!this.programCache[t]){for(var r=new Int32Array(t),n=0;n<t;n++)r[n]=n;this.defaultGroupCache[t]=Hl.from({uSamplers:r},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+t),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new jh(this.vertexSrc,i)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qr,default:this.defaultGroupCache[t]};return new Xs(this.programCache[t],a)},e.prototype.generateSampleSrc=function(t){var r="";r+=`
`,r+=`
`;for(var n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},e}(),qR=function(e){Yr(t,e);function t(r){r===void 0&&(r=!1);var n=e.call(this)||this;return n._buffer=new Xn(null,r,!1),n._indexBuffer=new Xn(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,Tt.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,Tt.FLOAT).addAttribute("aColor",n._buffer,4,!0,Tt.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,Tt.FLOAT).addIndex(n._indexBuffer),n}return t}(Uh),BB=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,MB=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,m7=function(){function e(){}return e.create=function(t){var r=Object.assign({vertex:BB,fragment:MB,geometryClass:qR,vertexSize:6},t),n=r.vertex,i=r.fragment,a=r.vertexSize,o=r.geometryClass;return function(s){Yr(c,s);function c(l){var u=s.call(this,l)||this;return u.shaderGenerator=new g7(n,i),u.geometryClass=o,u.vertexSize=a,u}return c}(v7)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return BB},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return MB},enumerable:!1,configurable:!0}),e}(),_7=m7.create(),y7={},NRe=function(e){Object.defineProperty(y7,e,{get:function(){return Ys("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),XG[e]}})};for(var KR in XG)NRe(KR);var x7={},LRe=function(e){Object.defineProperty(x7,e,{get:function(){return Ys("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),f7[e]}})};for(var KR in f7)LRe(KR);/*!
 * @pixi/app - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var H0=function(){function e(t){var r=this;this.stage=new ii,t=Object.assign({forceCanvas:!1},t),this.renderer=d7(t),e._plugins.forEach(function(n){n.init.call(r,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,r){var n=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(a){a.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null},e._plugins=[],e}(),BRe=function(){function e(){}return e.init=function(t){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var n,i;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var a=r._resizeTo,o=a.clientWidth,s=a.clientHeight;n=o,i=s}r.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},e.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();H0.registerPlugin(BRe);/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Pw=/iPhone/i,DB=/iPod/i,UB=/iPad/i,jB=/\biOS-universal(?:.+)Mac\b/i,Ow=/\bAndroid(?:.+)Mobile\b/i,$B=/Android/i,af=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,xg=/Silk/i,Rs=/Windows Phone/i,GB=/\bWindows(?:.+)ARM\b/i,VB=/BlackBerry/i,HB=/BB10/i,XB=/Opera Mini/i,zB=/\b(CriOS|Chrome)(?:.+)Mobile/i,WB=/Mobile(?:.+)Firefox\b/i,YB=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function MRe(e){return function(t){return t.test(e)}}function DRe(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=MRe(r),a={apple:{phone:i(Pw)&&!i(Rs),ipod:i(DB),tablet:!i(Pw)&&(i(UB)||YB(t))&&!i(Rs),universal:i(jB),device:(i(Pw)||i(DB)||i(UB)||i(jB)||YB(t))&&!i(Rs)},amazon:{phone:i(af),tablet:!i(af)&&i(xg),device:i(af)||i(xg)},android:{phone:!i(Rs)&&i(af)||!i(Rs)&&i(Ow),tablet:!i(Rs)&&!i(af)&&!i(Ow)&&(i(xg)||i($B)),device:!i(Rs)&&(i(af)||i(xg)||i(Ow)||i($B))||i(/\bokhttp\b/i)},windows:{phone:i(Rs),tablet:i(GB),device:i(Rs)||i(GB)},other:{blackberry:i(VB),blackberry10:i(HB),opera:i(XB),firefox:i(WB),chrome:i(zB),device:i(VB)||i(HB)||i(XB)||i(WB)||i(zB)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Af=DRe(globalThis.navigator);function URe(e){var t=!0;if(Af.tablet||Af.phone){if(Af.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(t=!1)}}if(Af.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(t=!1)}}}return t?e:4}function jRe(){return!Af.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qB;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(qB||(qB={}));var KB;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(KB||(KB={}));var ZB;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(ZB||(ZB={}));var JB;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(JB||(JB={}));var QB;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(QB||(QB={}));var eM;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(eM||(eM={}));var tM;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(tM||(tM={}));var rM;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(rM||(rM={}));var nM;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(nM||(nM={}));var iC;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(iC||(iC={}));var aC;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(aC||(aC={}));var oC;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(oC||(oC={}));var iM;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(iM||(iM={}));var aM;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(aM||(aM={}));var sC;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(sC||(sC={}));var bp;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(bp||(bp={}));var oM;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(oM||(oM={}));var lC;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(lC||(lC={}));var sM;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(sM||(sM={}));var b7={MIPMAP_TEXTURES:oC.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:lC.NONE,SPRITE_MAX_TEXTURES:URe(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:sC.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:aC.CLAMP,SCALE_MODE:iC.LINEAR,PRECISION_VERTEX:bp.HIGH,PRECISION_FRAGMENT:Af.apple.device?bp.HIGH:bp.MEDIUM,CAN_UPLOAD_SAME_BUFFER:jRe(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */b7.SORTABLE_CHILDREN=!1;var lM=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Qt.EMPTY:(t=t||new Qt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},e.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},e.prototype.addPointMatrix=function(t,r){var n=t.a,i=t.b,a=t.c,o=t.d,s=t.tx,c=t.ty,l=n*r.x+a*r.y+s,u=i*r.x+o*r.y+c;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},e.prototype.addQuad=function(t){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY,o=t[0],s=t[1];r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=t[2],s=t[3],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=t[4],s=t[5],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=t[6],s=t[7],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,this.minX=r,this.minY=n,this.maxX=i,this.maxY=a},e.prototype.addFrame=function(t,r,n,i,a){this.addFrameMatrix(t.worldTransform,r,n,i,a)},e.prototype.addFrameMatrix=function(t,r,n,i,a){var o=t.a,s=t.b,c=t.c,l=t.d,u=t.tx,f=t.ty,h=this.minX,p=this.minY,d=this.maxX,g=this.maxY,_=o*r+c*n+u,v=s*r+l*n+f;h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,_=o*i+c*n+u,v=s*i+l*n+f,h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,_=o*r+c*a+u,v=s*r+l*a+f,h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,_=o*i+c*a+u,v=s*i+l*a+f,h=_<h?_:h,p=v<p?v:p,d=_>d?_:d,g=v>g?v:g,this.minX=h,this.minY=p,this.maxX=d,this.maxY=g},e.prototype.addVertexData=function(t,r,n){for(var i=this.minX,a=this.minY,o=this.maxX,s=this.maxY,c=r;c<n;c+=2){var l=t[c],u=t[c+1];i=l<i?l:i,a=u<a?u:a,o=l>o?l:o,s=u>s?u:s}this.minX=i,this.minY=a,this.maxX=o,this.maxY=s},e.prototype.addVertices=function(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)},e.prototype.addVerticesMatrix=function(t,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=a);for(var s=t.a,c=t.b,l=t.c,u=t.d,f=t.tx,h=t.ty,p=this.minX,d=this.minY,g=this.maxX,_=this.maxY,v=n;v<i;v+=2){var m=r[v],y=r[v+1],b=s*m+l*y+f,w=u*y+c*m+h;p=Math.min(p,b-a),g=Math.max(g,b+a),d=Math.min(d,w-o),_=Math.max(_,w+o)}this.minX=p,this.minY=d,this.maxX=g,this.maxY=_},e.prototype.addBounds=function(t){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>a?t.maxY:a},e.prototype.addBoundsMask=function(t,r){var n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,a=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},e.prototype.addBoundsMatrix=function(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.addBoundsArea=function(t,r){var n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,a=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},e.prototype.pad=function(t,r){t===void 0&&(t=0),r===void 0&&(r=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)},e.prototype.addFramePad=function(t,r,n,i,a,o){t-=a,r-=o,n+=a,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var uC=function(e,t){return uC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},uC(e,t)};function ZR(e,t){uC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var r0=function(e){ZR(t,e);function t(){var r=e.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new G0,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new lM,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return t.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var a=n[i];Object.defineProperty(t.prototype,a,Object.getOwnPropertyDescriptor(r,a))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Qt),n=this._boundsRect),this._bounds.getRectangle(n)},t.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._localBounds||(this._localBounds=new lM);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=a,this._bounds.updateID+=this._boundsID-o,s},t.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},t.prototype.toLocal=function(r,n,i,a){return n&&(r=n.toGlobal(r,i,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},t.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},t.prototype.setTransform=function(r,n,i,a,o,s,c,l,u){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=1),o===void 0&&(o=0),s===void 0&&(s=0),c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=a||1,this.rotation=o,this.skew.x=s,this.skew.y=c,this.pivot.x=l,this.pivot.y=u,this},t.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new $Re),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},t.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*ER},set:function(r){this.transform.rotation=r*qs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1)}if(this._mask=r,this._mask){var n=this._mask.maskObject||this._mask;n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++}}},enumerable:!1,configurable:!0}),t}(Ac),$Re=function(e){ZR(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.sortDirty=null,r}return t}(r0);r0.prototype.displayObjectUpdateTransform=r0.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var uM;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(uM||(uM={}));var cM;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(cM||(cM={}));var fM;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(fM||(fM={}));var hM;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(hM||(hM={}));var dM;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(dM||(dM={}));var pM;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(pM||(pM={}));var vM;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(vM||(vM={}));var gM;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(gM||(gM={}));var mM;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(mM||(mM={}));var _M;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(_M||(_M={}));var yM;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(yM||(yM={}));var xM;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(xM||(xM={}));var bM;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(bM||(bM={}));var wM;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(wM||(wM={}));var EM;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(EM||(EM={}));var SM;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(SM||(SM={}));var cC;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(cC||(cC={}));var CM;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(CM||(CM={}));var TM;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(TM||(TM={}));function GRe(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var AM=function(e){ZR(t,e);function t(){var r=e.call(this)||this;return r.children=[],r.sortableChildren=b7.SORTABLE_CHILDREN,r.sortDirty=!1,r}return t.prototype.onChildrenChange=function(r){},t.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.addChild(n[a]);else{var o=n[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return n[0]},t.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},t.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),a=this.getChildIndex(n);this.children[i]=n,this.children[a]=r,this.onChildrenChange(i<a?i:a)}},t.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},t.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);os(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},t.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},t.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.removeChild(n[a]);else{var o=n[0],s=this.children.indexOf(o);if(s===-1)return null;o.parent=null,o.transform._parentID=-1,os(this.children,s,1),this._boundsID++,this.onChildrenChange(s),o.emit("removed",this),this.emit("childRemoved",o,this,s)}return n[0]},t.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,os(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},t.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,a=n,o=a-i,s;if(o>0&&o<=a){s=this.children.splice(i,o);for(var c=0;c<s.length;++c)s[c].parent=null,s[c].transform&&(s[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<s.length;++c)s[c].emit("removed",this),this.emit("childRemoved",s[c],this,c);return s}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var a=this.children[n];a._lastSortedIndex=n,!r&&a.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(GRe),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.maskObject||n._mask;i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=e.prototype.getLocalBounds.call(this,r);if(!n)for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a];s.visible&&s.updateTransform()}return i},t.prototype._calculateBounds=function(){},t.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,a;if(this.cullArea?(i=this.cullArea,a=this.worldTransform):this._render!==t.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,a))this._render(r);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var c=this.children[o],l=c.cullable;c.cullable=l||!this.cullArea,c.render(r),c.cullable=l}}},t.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},t.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<n.length;a++)n[a].enabled&&this._enabledFilters.push(n[a])}var o=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==cC.NONE));if(o&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var a=0,s=this.children.length;a<s;++a)this.children[a].render(r)}o&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},t.prototype._render=function(r){},t.prototype.destroy=function(r){e.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var a=0;a<i.length;++a)i[a].destroy(r)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),t}(r0);AM.prototype.containerUpdateTransform=AM.prototype.updateTransform;var kw=new Qt,IM=4,w7=function(){function e(t){this.renderer=t}return e.prototype.image=function(t,r,n){var i=new Image;return i.src=this.base64(t,r,n),i},e.prototype.base64=function(t,r,n){return this.canvas(t).toDataURL(r,n)},e.prototype.canvas=function(t){var r=this.renderer,n,i,a=!1,o,s=!1;t&&(t instanceof nu?o=t:(o=this.renderer.generateTexture(t),s=!0)),o?(n=o.baseTexture.resolution,i=o.frame,a=!1,r.renderTexture.bind(o)):(n=this.renderer.resolution,a=!0,i=kw,i.width=this.renderer.width,i.height=this.renderer.height,r.renderTexture.bind(null));var c=Math.floor(i.width*n+1e-4),l=Math.floor(i.height*n+1e-4),u=new q2(c,l,1),f=new Uint8Array(IM*c*l),h=r.gl;h.readPixels(i.x*n,i.y*n,c,l,h.RGBA,h.UNSIGNED_BYTE,f);var p=u.context.getImageData(0,0,c,l);if(e.arrayPostDivide(f,p.data),u.context.putImageData(p,0,0),a){var d=new q2(u.width,u.height,1);d.context.scale(1,-1),d.context.drawImage(u.canvas,0,-l),u.destroy(),u=d}return s&&o.destroy(!0),u.canvas},e.prototype.pixels=function(t,r){var n=this.renderer,i,a,o,s=!1;t&&(t instanceof nu?o=t:t instanceof r0&&(o=this.renderer.generateTexture(t),s=!0)),o?r?(i=r.resolution,a=o.frame,n.renderTexture.bind(o)):(i=o.baseTexture.resolution,a=o.frame,n.renderTexture.bind(o)):r?(i=r.resolution,a=kw,a.width=r.width,a.height=r.height,n.renderTexture.bind(null)):(i=n.resolution,a=kw,a.width=n.width,a.height=n.height,n.renderTexture.bind(null));var c=a.width*i,l=a.height*i,u=new Uint8Array(IM*c*l),f=n.gl;return f.readPixels(a.x*i,a.y*i,c,l,f.RGBA,f.UNSIGNED_BYTE,u),s&&o.destroy(!0),e.arrayPostDivide(u,u),u},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(t,r){for(var n=0;n<t.length;n+=4){var i=r[n+3]=t[n+3];i!==0?(r[n]=Math.round(Math.min(t[n]*255/i,255)),r[n+1]=Math.round(Math.min(t[n+1]*255/i,255)),r[n+2]=Math.round(Math.min(t[n+2]*255/i,255))):(r[n]=t[n],r[n+1]=t[n+1],r[n+2]=t[n+2])}},e}();/*!
 * @pixi/loaders - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var bg=function(){function e(t,r,n){r===void 0&&(r=!1),this._fn=t,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function RM(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Ms=function(){function e(){this._head=this._tail=void 0}return e.prototype.handlers=function(t){t===void 0&&(t=!1);var r=this._head;if(t)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},e.prototype.has=function(t){if(!(t instanceof bg))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},e.prototype.dispatch=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++)r[n]=t[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,r),i=i._next;return!0},e.prototype.add=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return RM(this,new bg(t,!1,r))},e.prototype.once=function(t,r){if(r===void 0&&(r=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return RM(this,new bg(t,!0,r))},e.prototype.detach=function(t){if(!(t instanceof bg))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},e}();function E7(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},a=14;a--;)i[r.key[a]]=n[a]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(o,s,c){s&&(i[r.q.name][s]=c)}),i}var Fw,wg=null,VRe=0,PM=200,HRe=204,XRe=1223,zRe=2;function OM(){}function kM(e,t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(e[t]=r)}function Nw(e){return e.toString().replace("object ","")}var Fr=function(){function e(t,r,n){if(this._dequeue=OM,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=OM,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ms,this.onProgress=new Ms,this.onComplete=new Ms,this.onAfterMiddleware=new Ms}return e.setExtensionLoadType=function(t,r){kM(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){kM(e._xhrTypeMap,t,r)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:typeof Fw>"u"&&(Fw=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Fw&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(t){return(this._flags&t)!==0},e.prototype._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e.prototype._createSource=function(t,r,n){n||(n=t+"/"+this._getExtension(r));var i=document.createElement("source");return i.src=r,i.type=n,i},e.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Nw(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Nw(t)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Nw(t)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",n=typeof t.status>"u"?PM:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(r=t.responseText),n===VRe&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?n=PM:n===XRe&&(n=HRe);var i=n/100|0;if(i===zRe)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=e.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,wg||(wg=document.createElement("a")),wg.href=t;var n=E7(wg.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,a=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||a!==r.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(t){t===void 0&&(t=this.url);var r="";if(this.isDataUrl){var n=t.indexOf("/");r=t.substring(n+1,t.indexOf(";",n))}else{var i=t.indexOf("?"),a=t.indexOf("#"),o=Math.min(i>-1?i:t.length,a>-1?a:t.length);t=t.substring(0,o),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(e.STATUS_FLAGS||(e.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(e.TYPE||(e.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(e.LOAD_TYPE||(e.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Fr||(Fr={}));function Tu(){}function WRe(e){return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(e===null)throw new Error("Callback was already called.");var a=e;e=null,a.apply(this,n)}}var YRe=function(){function e(t,r){this.data=t,this.callback=r}return e}(),Lw=function(){function e(t,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Tu,this.unsaturated=Tu,this.empty=Tu,this.drain=Tu,this.error=Tu,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,a,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var s=new YRe(i,typeof o=="function"?o:Tu);a?n._tasks.unshift(s):n._tasks.push(s),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,WRe(n._next(i)))}},this._worker=t,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return e.prototype._next=function(t){var r=this;return function(){for(var n=arguments,i=[],a=0;a<arguments.length;a++)i[a]=n[a];r.workers-=1,t.callback.apply(t,i),i[0]!=null&&r.error(i[0],t.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.kill=function(){this.workers=0,this.drain=Tu,this.started=!1,this._tasks=[]},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.eachSeries=function(t,r,n,i){var a=0,o=t.length;function s(c){if(c||a===o){n&&n(c);return}i?setTimeout(function(){r(t[a++],s)},1):r(t[a++],s)}s()},e.queue=function(t,r){return new e(t,r)},e}(),Bw=100,qRe=/(#[\w-]+)?$/,ya=function(){function e(t,r){var n=this;t===void 0&&(t=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return n._loadResource(c,l)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return n._loadResource(c,l)},this._queue=Lw.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Ms,this.onError=new Ms,this.onLoad=new Ms,this.onStart=new Ms,this.onComplete=new Ms;for(var i=0;i<e._plugins.length;++i){var a=e._plugins[i],o=a.pre,s=a.use;o&&this.pre(o),s&&this.use(s)}this._protected=!1}return e.prototype._add=function(t,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new Fr(t,r,n),typeof i=="function"&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var a=n.parentResource,o=[],s=0;s<a.children.length;++s)a.children[s].isComplete||o.push(a.children[s]);var c=a.progressChunk*(o.length+1),l=c/(o.length+2);a.children.push(this.resources[t]),a.progressChunk=l;for(var s=0;s<o.length;++s)o[s].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},e.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},e.prototype.use=function(t){return this._afterMiddleware.push(t),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},e.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=Bw/r,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(t){var r=E7(t,{strictMode:!0}),n;if(r.protocol||!r.path||t.indexOf("//")===0?n=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?n=this.baseUrl+"/"+t:n=this.baseUrl+t,this.defaultQueryString){var i=qRe.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},e.prototype._loadResource=function(t,r){var n=this;t._dequeue=r,Lw.eachSeries(this._beforeMiddleware,function(i,a){i.call(n,t,function(){a(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=Bw,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Lw.eachSeries(this._afterMiddleware,function(n,i){n.call(r,t,i)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(Bw,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||(t=new e,t._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}();ya.prototype.add=function(t,r,n,i){if(Array.isArray(t)){for(var a=0;a<t.length;++a)this.add(t[a]);return this}if(typeof t=="object"&&(n=t,i=r||n.callback||n.onComplete,r=n.url,t=n.name||n.key||n.url),typeof r!="string"&&(i=n,n=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(t,r,n,i)};var S7=function(){function e(){}return e.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?ya.shared:new ya},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),C7=function(){function e(){}return e.add=function(){Fr.setExtensionLoadType("svg",Fr.LOAD_TYPE.XHR),Fr.setExtensionXhrType("svg",Fr.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){if(t.data&&(t.type===Fr.TYPE.IMAGE||t.extension==="svg")){var n=t.data,i=t.url,a=t.name,o=t.metadata;Ot.fromLoader(n,i,a,o).then(function(s){t.texture=s,r()}).catch(r)}else r()},e}(),KRe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ZRe(e){for(var t="",r=0;r<e.length;){for(var n=[0,0,0],i=[0,0,0,0],a=0;a<n.length;++a)r<e.length?n[a]=e.charCodeAt(r++)&255:n[a]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var o=r-(e.length-1);switch(o){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var a=0;a<i.length;++a)t+=KRe.charAt(i[a])}return t}function JRe(e,t){if(!e.data){t();return}if(e.xhr&&e.xhrType===Fr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var r=e.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){e.data=new Image,e.data.src="data:"+r+";base64,"+ZRe(e.xhr.responseText),e.type=Fr.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,t()};return}}else if(e.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.type=Fr.TYPE.IMAGE,e.data.onload=function(){n.revokeObjectURL(i),e.data.onload=null,t()};return}}t()}ya.registerPlugin({use:JRe});ya.registerPlugin(C7);/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Dr,Zt;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(Zt||(Zt={}));var n0=(Dr={},Dr[Zt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Dr[Zt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Dr[Zt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Dr[Zt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Dr[Zt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Dr[Zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Dr[Zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Dr[Zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Dr[Zt.COMPRESSED_R11_EAC]=.5,Dr[Zt.COMPRESSED_SIGNED_R11_EAC]=.5,Dr[Zt.COMPRESSED_RG11_EAC]=1,Dr[Zt.COMPRESSED_SIGNED_RG11_EAC]=1,Dr[Zt.COMPRESSED_RGB8_ETC2]=.5,Dr[Zt.COMPRESSED_RGBA8_ETC2_EAC]=1,Dr[Zt.COMPRESSED_SRGB8_ETC2]=.5,Dr[Zt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Dr[Zt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Dr[Zt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Dr[Zt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Dr[Zt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Dr[Zt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Dr[Zt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Dr[Zt.COMPRESSED_RGB_ETC1_WEBGL]=.5,Dr[Zt.COMPRESSED_RGB_ATC_WEBGL]=.5,Dr[Zt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Dr[Zt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Dr);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var fC=function(e,t){return fC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},fC(e,t)};function T7(e,t){fC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function QRe(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(l){try{c(n.next(l))}catch(u){a(u)}}function s(l){try{c(n.throw(l))}catch(u){a(u)}}function c(l){l.done?i(l.value):new r(function(u){u(l.value)}).then(o,s)}c((n=n.apply(e,t||[])).next())})}function ePe(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var A7=function(e){T7(t,e);function t(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,a,o;return typeof r=="string"?(a=r,o=new Uint8Array):(a=null,o=r),i=e.call(this,o,n)||this,i.origin=a,i.buffer=o?new t0(o):null,i.origin&&n.autoLoad!==!1&&i.load(),o&&o.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return t.prototype.onBlobLoaded=function(r){},t.prototype.load=function(){return QRe(this,void 0,Promise,function(){var r,n,i;return ePe(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return r=a.sent(),[4,r.blob()];case 2:return n=a.sent(),[4,n.arrayBuffer()];case 3:return i=a.sent(),this.data=new Uint32Array(i),this.buffer=new t0(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},t}(cu),f_=function(e){T7(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=t._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||t._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return t.prototype.upload=function(r,n,i){var a=r.gl,o=r.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,c=this.levels;s<c;s++){var l=this._levelBuffers[s],u=l.levelID,f=l.levelWidth,h=l.levelHeight,p=l.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,u,this.format,f,h,0,p)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(r,n,i,a,o,s,c){for(var l=new Array(i),u=r.byteOffset,f=s,h=c,p=f+a-1&~(a-1),d=h+o-1&~(o-1),g=p*d*n0[n],_=0;_<i;_++)l[_]={levelID:_,levelWidth:i>1?f:p,levelHeight:i>1?h:d,levelBuffer:new Uint8Array(r.buffer,u,g)},u+=g,f=f>>1||1,h=h>>1||1,p=f+a-1&~(a-1),d=h+o-1&~(o-1),g=p*d*n0[n];return l},t}(A7),I7=function(){function e(){}return e.use=function(t,r){var n=t.data,i=this;if(t.type===Fr.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var a=n.textures,o=void 0,s=void 0,c=0,l=a.length;c<l;c++){var u=a[c],f=u.src,h=u.format;if(h||(s=f),e.textureFormats[h]){o=f;break}}if(o=o||s,!o){r(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(o===t.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var p={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=Zu.resolve(t.url.replace(i.baseUrl,""),o),g=n.cacheID;i.add(g,d,p,function(_){if(_.error){r(_.error);return}var v=_.texture,m=v===void 0?null:v,y=_.textures,b=y===void 0?{}:y;Object.assign(t,{texture:m,textures:b}),r()})}else r()},Object.defineProperty(e,"textureExtensions",{get:function(){if(!e._textureExtensions){var t=document.createElement("canvas"),r=t.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};e._textureExtensions=n}return e._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"textureFormats",{get:function(){if(!e._textureFormats){var t=e.textureExtensions;e._textureFormats={};for(var r in t){var n=t[r];n&&Object.assign(e._textureFormats,Object.getPrototypeOf(n))}}return e._textureFormats},enumerable:!1,configurable:!0}),e}();function R7(e,t,r){var n={textures:{},texture:null};if(!t)return n;var i=t.map(function(a){return new Ot(new ur(a,Object.assign({mipmap:_a.OFF,alphaMode:na.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(a,o){var s=a.baseTexture,c=e+"-"+(o+1);ur.addToCache(s,c),Ot.addToCache(a,c),o===0&&(ur.addToCache(s,e),Ot.addToCache(a,e),n.texture=a),n.textures[c]=a}),n}var Od,fo;Fr.setExtensionXhrType("dds",Fr.XHR_RESPONSE_TYPE.BUFFER);var Mw=4,Eg=124,tPe=32,FM=20,rPe=542327876,Sg={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},nPe={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Cg={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},go;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(go||(go={}));var hC;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(hC||(hC={}));var iPe=1,aPe=2,oPe=4,sPe=64,lPe=512,uPe=131072,cPe=827611204,fPe=861165636,hPe=894720068,dPe=808540228,pPe=4,vPe=(Od={},Od[cPe]=Zt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Od[fPe]=Zt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Od[hPe]=Zt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Od),gPe=(fo={},fo[go.DXGI_FORMAT_BC1_TYPELESS]=Zt.COMPRESSED_RGBA_S3TC_DXT1_EXT,fo[go.DXGI_FORMAT_BC1_UNORM]=Zt.COMPRESSED_RGBA_S3TC_DXT1_EXT,fo[go.DXGI_FORMAT_BC2_TYPELESS]=Zt.COMPRESSED_RGBA_S3TC_DXT3_EXT,fo[go.DXGI_FORMAT_BC2_UNORM]=Zt.COMPRESSED_RGBA_S3TC_DXT3_EXT,fo[go.DXGI_FORMAT_BC3_TYPELESS]=Zt.COMPRESSED_RGBA_S3TC_DXT5_EXT,fo[go.DXGI_FORMAT_BC3_UNORM]=Zt.COMPRESSED_RGBA_S3TC_DXT5_EXT,fo[go.DXGI_FORMAT_BC1_UNORM_SRGB]=Zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,fo[go.DXGI_FORMAT_BC2_UNORM_SRGB]=Zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,fo[go.DXGI_FORMAT_BC3_UNORM_SRGB]=Zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,fo),P7=function(){function e(){}return e.use=function(t,r){if(t.extension==="dds"&&t.data)try{Object.assign(t,R7(t.name||t.url,e.parse(t.data),t.metadata))}catch(n){r(n);return}r()},e.parse=function(t){var r=new Uint32Array(t),n=r[0];if(n!==rPe)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,Eg/Uint32Array.BYTES_PER_ELEMENT),a=i[Sg.HEIGHT],o=i[Sg.WIDTH],s=i[Sg.MIPMAP_COUNT],c=new Uint32Array(t,Sg.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,tPe/Uint32Array.BYTES_PER_ELEMENT),l=c[iPe];if(l&oPe){var u=c[nPe.FOURCC];if(u!==dPe){var f=vPe[u],h=Mw+Eg,p=new Uint8Array(t,h),d=new f_(p,{format:f,width:o,height:a,levels:s});return[d]}var g=Mw+Eg,_=new Uint32Array(r.buffer,g,FM/Uint32Array.BYTES_PER_ELEMENT),v=_[Cg.DXGI_FORMAT],m=_[Cg.RESOURCE_DIMENSION],y=_[Cg.MISC_FLAG],b=_[Cg.ARRAY_SIZE],w=gPe[v];if(w===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+v);if(y===pPe)throw new Error("DDSLoader does not support cubemap textures");if(m===hC.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var E=new Array,C=Mw+Eg+FM;if(b===1)E.push(new Uint8Array(t,C));else{for(var T=n0[w],A=0,I=o,O=a,P=0;P<s;P++){var k=Math.max(1,I+3&-4),F=Math.max(1,O+3&-4),M=k*F*T;A+=M,I=I>>>1,O=O>>>1}for(var D=C,P=0;P<b;P++)E.push(new Uint8Array(t,D,A)),D+=A}return E.map(function(G){return new f_(G,{format:w,width:o,height:a,levels:s})})}throw l&sPe?new Error("DDSLoader does not support uncompressed texture data."):l&lPe?new Error("DDSLoader does not supported YUV uncompressed texture data."):l&uPe?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):l&aPe?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}(),vl,Ps,kd;Fr.setExtensionXhrType("ktx",Fr.XHR_RESPONSE_TYPE.BUFFER);var NM=[171,75,84,88,32,49,49,187,13,10,26,10],mPe=67305985,ho={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Dw=64,dC=(vl={},vl[Tt.UNSIGNED_BYTE]=1,vl[Tt.UNSIGNED_SHORT]=2,vl[Tt.INT]=4,vl[Tt.UNSIGNED_INT]=4,vl[Tt.FLOAT]=4,vl[Tt.HALF_FLOAT]=8,vl),O7=(Ps={},Ps[it.RGBA]=4,Ps[it.RGB]=3,Ps[it.RG]=2,Ps[it.RED]=1,Ps[it.LUMINANCE]=1,Ps[it.LUMINANCE_ALPHA]=2,Ps[it.ALPHA]=1,Ps),k7=(kd={},kd[Tt.UNSIGNED_SHORT_4_4_4_4]=2,kd[Tt.UNSIGNED_SHORT_5_5_5_1]=2,kd[Tt.UNSIGNED_SHORT_5_6_5]=2,kd),F7=function(){function e(){}return e.use=function(t,r){if(t.extension==="ktx"&&t.data)try{var n=t.name||t.url,i=e.parse(n,t.data),a=i.compressed,o=i.uncompressed,s=i.kvData;if(a){var c=R7(n,a,t.metadata);if(s&&c.textures)for(var l in c.textures)c.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(t,c)}else if(o){var u={};o.forEach(function(f,h){var p=new Ot(new ur(f.resource,{mipmap:_a.OFF,alphaMode:na.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),d=n+"-"+(h+1);s&&(p.baseTexture.ktxKeyValueData=s),ur.addToCache(p.baseTexture,d),Ot.addToCache(p,d),h===0&&(u[n]=p,ur.addToCache(p.baseTexture,n),Ot.addToCache(p,n)),u[d]=p}),Object.assign(t,{textures:u})}}catch(f){r(f);return}r()},e.parse=function(t,r){var n=new DataView(r);if(!e.validate(t,n))return null;var i=n.getUint32(ho.ENDIANNESS,!0)===mPe,a=n.getUint32(ho.GL_TYPE,i),o=n.getUint32(ho.GL_FORMAT,i),s=n.getUint32(ho.GL_INTERNAL_FORMAT,i),c=n.getUint32(ho.PIXEL_WIDTH,i),l=n.getUint32(ho.PIXEL_HEIGHT,i)||1,u=n.getUint32(ho.PIXEL_DEPTH,i)||1,f=n.getUint32(ho.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=n.getUint32(ho.NUMBER_OF_FACES,i),p=n.getUint32(ho.NUMBER_OF_MIPMAP_LEVELS,i),d=n.getUint32(ho.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||u!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var g=4,_=4,v=c+3&-4,m=l+3&-4,y=new Array(f),b=c*l;a===0&&(b=v*m);var w;if(a!==0?dC[a]?w=dC[a]*O7[o]:w=k7[a]:w=n0[s],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var E=e.loadKeyValueData?e.parseKvData(n,d,i):null,C=b*w,T=C,A=c,I=l,O=v,P=m,k=Dw+d,F=0;F<p;F++){for(var M=n.getUint32(k,i),D=k+4,G=0;G<f;G++){var Q=y[G];Q||(Q=y[G]=new Array(p)),Q[F]={levelID:F,levelWidth:p>1||a!==0?A:O,levelHeight:p>1||a!==0?I:P,levelBuffer:new Uint8Array(r,D,T)},D+=T}k+=M+4,k=k%4!==0?k+4-k%4:k,A=A>>1||1,I=I>>1||1,O=A+g-1&~(g-1),P=I+_-1&~(_-1),T=O*P*w}return a!==0?{uncompressed:y.map(function(te){var Y=te[0].levelBuffer,U=!1;return a===Tt.FLOAT?Y=new Float32Array(te[0].levelBuffer.buffer,te[0].levelBuffer.byteOffset,te[0].levelBuffer.byteLength/4):a===Tt.UNSIGNED_INT?(U=!0,Y=new Uint32Array(te[0].levelBuffer.buffer,te[0].levelBuffer.byteOffset,te[0].levelBuffer.byteLength/4)):a===Tt.INT&&(U=!0,Y=new Int32Array(te[0].levelBuffer.buffer,te[0].levelBuffer.byteOffset,te[0].levelBuffer.byteLength/4)),{resource:new cu(Y,{width:te[0].levelWidth,height:te[0].levelHeight}),type:a,format:U?e.convertFormatToInteger(o):o}}),kvData:E}:{compressed:y.map(function(te){return new f_(null,{format:s,width:c,height:l,levels:p,levelBuffers:te})}),kvData:E}},e.validate=function(t,r){for(var n=0;n<NM.length;n++)if(r.getUint8(n)!==NM[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},e.convertFormatToInteger=function(t){switch(t){case it.RGBA:return it.RGBA_INTEGER;case it.RGB:return it.RGB_INTEGER;case it.RG:return it.RG_INTEGER;case it.RED:return it.RED_INTEGER;default:return t}},e.parseKvData=function(t,r,n){for(var i=new Map,a=0;a<r;){var o=t.getUint32(Dw+a,n),s=Dw+a+4,c=3-(o+3)%4;if(o===0||o>r-a){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&t.getUint8(s+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=new TextDecoder().decode(new Uint8Array(t.buffer,s,l)),f=new DataView(t.buffer,s+l+1,o-l-1);i.set(u,f),a+=4+o+c}return i},e.loadKeyValueData=!1,e}();/*!
 * @pixi/particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pC=function(e,t){return pC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},pC(e,t)};function N7(e,t){pC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _Pe=function(e){N7(t,e);function t(r,n,i,a){r===void 0&&(r=1500),i===void 0&&(i=16384),a===void 0&&(a=!1);var o=e.call(this)||this,s=16384;return i>s&&(i=s),o._properties=[!1,!0,!1,!1,!1],o._maxSize=r,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=ut.NORMAL,o.autoResize=a,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return t.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,ai(r,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},t.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(ii),LM=function(){function e(t,r,n){this.geometry=new Uh,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var a=t[i];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Tt.FLOAT,offset:a.offset},r[i]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var t=this.geometry,r=0;this.indexBuffer=new Xn(PG(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=r,r+=i.size,this.dynamicStride+=i.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new Xn(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=o,o+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Xn(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];t.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===Tt.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];t.addAttribute(i.attributeName,this.staticBuffer,0,i.type===Tt.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},e.prototype.uploadDynamic=function(t,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var a=this.dynamicProperties[i];a.uploadFunction(t,r,n,a.type===Tt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(t,r,n){for(var i=0;i<this.staticProperties.length;i++){var a=this.staticProperties[i];a.uploadFunction(t,r,n,a.type===Tt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),yPe=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,xPe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,L7=function(e){N7(t,e);function t(r){var n=e.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Qr,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Tt.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Xs.from(xPe,yPe,{}),n.state=fu.for2d(),n}return t.prototype.render=function(r){var n=r.children,i=r._maxSize,a=r._batchSize,o=this.renderer,s=n.length;if(s!==0){s>i&&!r.autoResize&&(s=i);var c=r._buffers;c||(c=r._buffers=this.generateBuffers(r));var l=n[0]._texture.baseTexture;this.state.blendMode=bR(r.blendMode,l.alphaMode),o.state.set(this.state);var u=o.gl,f=r.worldTransform.copyTo(this.tempMatrix);f.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=RG(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,l.alphaMode),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var h=!1,p=0,d=0;p<s;p+=a,d+=1){var g=s-p;g>a&&(g=a),d>=c.length&&c.push(this._generateOneMoreBuffer(r));var _=c[d];_.uploadDynamic(n,p,g);var v=r._bufferUpdateIDs[d]||0;h=h||_._updateID<v,h&&(_._updateID=r._updateID,_.uploadStatic(n,p,g)),o.geometry.bind(_.geometry),u.drawElements(u.TRIANGLES,g*6,u.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,a=r._batchSize,o=r._properties,s=0;s<i;s+=a)n.push(new LM(this.properties,o,a));return n},t.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new LM(this.properties,i,n)},t.prototype.uploadVertices=function(r,n,i,a,o,s){for(var c=0,l=0,u=0,f=0,h=0;h<i;++h){var p=r[n+h],d=p._texture,g=p.scale.x,_=p.scale.y,v=d.trim,m=d.orig;v?(l=v.x-p.anchor.x*m.width,c=l+v.width,f=v.y-p.anchor.y*m.height,u=f+v.height):(c=m.width*(1-p.anchor.x),l=m.width*-p.anchor.x,u=m.height*(1-p.anchor.y),f=m.height*-p.anchor.y),a[s]=l*g,a[s+1]=f*_,a[s+o]=c*g,a[s+o+1]=f*_,a[s+o*2]=c*g,a[s+o*2+1]=u*_,a[s+o*3]=l*g,a[s+o*3+1]=u*_,s+=o*4}},t.prototype.uploadPosition=function(r,n,i,a,o,s){for(var c=0;c<i;c++){var l=r[n+c].position;a[s]=l.x,a[s+1]=l.y,a[s+o]=l.x,a[s+o+1]=l.y,a[s+o*2]=l.x,a[s+o*2+1]=l.y,a[s+o*3]=l.x,a[s+o*3+1]=l.y,s+=o*4}},t.prototype.uploadRotation=function(r,n,i,a,o,s){for(var c=0;c<i;c++){var l=r[n+c].rotation;a[s]=l,a[s+o]=l,a[s+o*2]=l,a[s+o*3]=l,s+=o*4}},t.prototype.uploadUvs=function(r,n,i,a,o,s){for(var c=0;c<i;++c){var l=r[n+c]._texture._uvs;l?(a[s]=l.x0,a[s+1]=l.y0,a[s+o]=l.x1,a[s+o+1]=l.y1,a[s+o*2]=l.x2,a[s+o*2+1]=l.y2,a[s+o*3]=l.x3,a[s+o*3+1]=l.y3,s+=o*4):(a[s]=0,a[s+1]=0,a[s+o]=0,a[s+o+1]=0,a[s+o*2]=0,a[s+o*2+1]=0,a[s+o*3]=0,a[s+o*3+1]=0,s+=o*4)}},t.prototype.uploadTint=function(r,n,i,a,o,s){for(var c=0;c<i;++c){var l=r[n+c],u=l._texture.baseTexture.alphaMode>0,f=l.alpha,h=f<1&&u?Jy(l._tintRGB,f):l._tintRGB+(f*255<<24);a[s]=h,a[s+o]=h,a[s+o*2]=h,a[s+o*3]=h,s+=o*4}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(V0);/*!
 * @pixi/graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var js;(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(js||(js={}));var $s;(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})($s||($s={}));var oh={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(t===void 0&&(t=20),!this.adaptive||!e||isNaN(e))return t;var r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},JR=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Ot.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ot.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var vC=function(e,t){return vC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},vC(e,t)};function QR(e,t){vC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function BM(e,t){var r,n;t===void 0&&(t=!1);var i=e.length;if(!(i<6)){for(var a=0,o=0,s=e[i-2],c=e[i-1];o<i;o+=2){var l=e[o],u=e[o+1];a+=(l-s)*(u+c),s=l,c=u}if(!t&&a>0||t&&a<=0)for(var f=i/2,o=f+f%2;o<i;o+=2){var h=i-o-2,p=i-o-1,d=o,g=o+1;r=[e[d],e[h]],e[h]=r[0],e[d]=r[1],n=[e[g],e[p]],e[p]=n[0],e[g]=n[1]}}}var eP={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var r=e.points,n=e.holes,i=t.points,a=t.indices;if(r.length>=6){BM(r,!1);for(var o=[],s=0;s<n.length;s++){var c=n[s];BM(c.points,!0),o.push(r.length/2),r=r.concat(c.points)}var l=cR(r,o,2);if(!l)return;for(var u=i.length/2,s=0;s<l.length;s+=3)a.push(l[s]+u),a.push(l[s+1]+u),a.push(l[s+2]+u);for(var s=0;s<r.length;s++)i.push(r[s])}}},i0={build:function(e){var t=e.points,r,n,i,a,o,s;if(e.type===ln.CIRC){var c=e.shape;r=c.x,n=c.y,o=s=c.radius,i=a=0}else if(e.type===ln.ELIP){var l=e.shape;r=l.x,n=l.y,o=l.width,s=l.height,i=a=0}else{var u=e.shape,f=u.width/2,h=u.height/2;r=u.x+f,n=u.y+h,o=s=Math.max(0,Math.min(u.radius,Math.min(f,h))),i=f-o,a=h-s}if(!(o>=0&&s>=0&&i>=0&&a>=0)){t.length=0;return}var p=Math.ceil(2.3*Math.sqrt(o+s)),d=p*8+(i?4:0)+(a?4:0);if(t.length=d,d!==0){if(p===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+a,t[2]=t[4]=r-i,t[5]=t[7]=n-a;return}var g=0,_=p*4+(i?2:0)+2,v=_,m=d;{var y=i+o,b=a,w=r+y,E=r-y,C=n+b;if(t[g++]=w,t[g++]=C,t[--_]=C,t[--_]=E,a){var T=n-b;t[v++]=E,t[v++]=T,t[--m]=T,t[--m]=w}}for(var A=1;A<p;A++){var I=Math.PI/2*(A/p),y=i+Math.cos(I)*o,b=a+Math.sin(I)*s,w=r+y,E=r-y,C=n+b,T=n-b;t[g++]=w,t[g++]=C,t[--_]=C,t[--_]=E,t[v++]=E,t[v++]=T,t[--m]=T,t[--m]=w}{var y=i,b=a+s,w=r+y,E=r-y,C=n+b,T=n-b;t[g++]=w,t[g++]=C,t[--m]=T,t[--m]=w,i&&(t[g++]=E,t[g++]=C,t[--m]=T,t[--m]=E)}}},triangulate:function(e,t){var r=e.points,n=t.points,i=t.indices,a=n.length/2,o=a,s,c;if(e.type!==ln.RREC){var l=e.shape;s=l.x,c=l.y}else{var u=e.shape;s=u.x+u.width/2,c=u.y+u.height/2}var f=e.matrix;n.push(e.matrix?f.a*s+f.c*c+f.tx:s,e.matrix?f.b*s+f.d*c+f.ty:c),a++,n.push(r[0],r[1]);for(var h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),i.push(a++,o,a);i.push(o+1,o,a)}},B7={build:function(e){var t=e.shape,r=t.x,n=t.y,i=t.width,a=t.height,o=e.points;o.length=0,o.push(r,n,r+i,n,r+i,n+a,r,n+a)},triangulate:function(e,t){var r=e.points,n=t.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function of(e,t,r){var n=t-e;return e+n*r}function Tg(e,t,r,n,i,a,o){o===void 0&&(o=[]);for(var s=20,c=o,l=0,u=0,f=0,h=0,p=0,d=0,g=0,_=0;g<=s;++g)_=g/s,l=of(e,r,_),u=of(t,n,_),f=of(r,i,_),h=of(n,a,_),p=of(l,f,_),d=of(u,h,_),!(g===0&&c[c.length-2]===p&&c[c.length-1]===d)&&c.push(p,d);return c}var M7={build:function(e){if(sh.nextRoundedRectBehavior){i0.build(e);return}var t=e.shape,r=e.points,n=t.x,i=t.y,a=t.width,o=t.height,s=Math.max(0,Math.min(t.radius,Math.min(a,o)/2));r.length=0,s?(Tg(n,i+s,n,i,n+s,i,r),Tg(n+a-s,i,n+a,i,n+a,i+s,r),Tg(n+a,i+o-s,n+a,i+o,n+a-s,i+o,r),Tg(n+s,i+o,n,i+o,n,i+o-s,r)):r.push(n,i,n+a,i,n+a,i+o,n,i+o)},triangulate:function(e,t){if(sh.nextRoundedRectBehavior){i0.triangulate(e,t);return}for(var r=e.points,n=t.points,i=t.indices,a=n.length/2,o=cR(r,null,2),s=0,c=o.length;s<c;s+=3)i.push(o[s]+a),i.push(o[s+1]+a),i.push(o[s+2]+a);for(var s=0,c=r.length;s<c;s++)n.push(r[s],r[++s])}};function MM(e,t,r,n,i,a,o,s){var c=e-r*i,l=t-n*i,u=e+r*a,f=t+n*a,h,p;o?(h=n,p=-r):(h=-n,p=r);var d=c+h,g=l+p,_=u+h,v=f+p;return s.push(d,g),s.push(_,v),2}function sf(e,t,r,n,i,a,o,s){var c=r-e,l=n-t,u=Math.atan2(c,l),f=Math.atan2(i-e,a-t);s&&u<f?u+=Math.PI*2:!s&&u>f&&(f+=Math.PI*2);var h=u,p=f-u,d=Math.abs(p),g=Math.sqrt(c*c+l*l),_=(15*d*Math.sqrt(g)/Math.PI>>0)+1,v=p/_;if(h+=v,s){o.push(e,t),o.push(r,n);for(var m=1,y=h;m<_;m++,y+=v)o.push(e,t),o.push(e+Math.sin(y)*g,t+Math.cos(y)*g);o.push(e,t),o.push(i,a)}else{o.push(r,n),o.push(e,t);for(var m=1,y=h;m<_;m++,y+=v)o.push(e+Math.sin(y)*g,t+Math.cos(y)*g),o.push(e,t);o.push(i,a),o.push(e,t)}return _*2}function bPe(e,t){var r=e.shape,n=e.points||r.points.slice(),i=t.closePointEps;if(n.length!==0){var a=e.lineStyle,o=new cr(n[0],n[1]),s=new cr(n[n.length-2],n[n.length-1]),c=r.type!==ln.POLY||r.closeStroke,l=Math.abs(o.x-s.x)<i&&Math.abs(o.y-s.y)<i;if(c){n=n.slice(),l&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var u=(o.x+s.x)*.5,f=(s.y+o.y)*.5;n.unshift(u,f),n.push(u,f)}var h=t.points,p=n.length/2,d=n.length,g=h.length/2,_=a.width/2,v=_*_,m=a.miterLimit*a.miterLimit,y=n[0],b=n[1],w=n[2],E=n[3],C=0,T=0,A=-(b-E),I=y-w,O=0,P=0,k=Math.sqrt(A*A+I*I);A/=k,I/=k,A*=_,I*=_;var F=a.alignment,M=(1-F)*2,D=F*2;c||(a.cap===$s.ROUND?d+=sf(y-A*(M-D)*.5,b-I*(M-D)*.5,y-A*M,b-I*M,y+A*D,b+I*D,h,!0)+2:a.cap===$s.SQUARE&&(d+=MM(y,b,A,I,M,D,!0,h))),h.push(y-A*M,b-I*M),h.push(y+A*D,b+I*D);for(var G=1;G<p-1;++G){y=n[(G-1)*2],b=n[(G-1)*2+1],w=n[G*2],E=n[G*2+1],C=n[(G+1)*2],T=n[(G+1)*2+1],A=-(b-E),I=y-w,k=Math.sqrt(A*A+I*I),A/=k,I/=k,A*=_,I*=_,O=-(E-T),P=w-C,k=Math.sqrt(O*O+P*P),O/=k,P/=k,O*=_,P*=_;var Q=w-y,te=b-E,Y=w-C,U=T-E,z=te*Y-U*Q,j=z<0;if(Math.abs(z)<.1){h.push(w-A*M,E-I*M),h.push(w+A*D,E+I*D);continue}var V=(-A+y)*(-I+E)-(-A+w)*(-I+b),ne=(-O+C)*(-P+E)-(-O+w)*(-P+T),ae=(Q*ne-Y*V)/z,pe=(U*V-te*ne)/z,se=(ae-w)*(ae-w)+(pe-E)*(pe-E),_e=w+(ae-w)*M,Le=E+(pe-E)*M,Pe=w-(ae-w)*D,Ee=E-(pe-E)*D,Se=Math.min(Q*Q+te*te,Y*Y+U*U),Ge=j?M:D,We=Se+Ge*Ge*v,Ve=se<=We;Ve?a.join===js.BEVEL||se/v>m?(j?(h.push(_e,Le),h.push(w+A*D,E+I*D),h.push(_e,Le),h.push(w+O*D,E+P*D)):(h.push(w-A*M,E-I*M),h.push(Pe,Ee),h.push(w-O*M,E-P*M),h.push(Pe,Ee)),d+=2):a.join===js.ROUND?j?(h.push(_e,Le),h.push(w+A*D,E+I*D),d+=sf(w,E,w+A*D,E+I*D,w+O*D,E+P*D,h,!0)+4,h.push(_e,Le),h.push(w+O*D,E+P*D)):(h.push(w-A*M,E-I*M),h.push(Pe,Ee),d+=sf(w,E,w-A*M,E-I*M,w-O*M,E-P*M,h,!1)+4,h.push(w-O*M,E-P*M),h.push(Pe,Ee)):(h.push(_e,Le),h.push(Pe,Ee)):(h.push(w-A*M,E-I*M),h.push(w+A*D,E+I*D),a.join===js.ROUND?j?d+=sf(w,E,w+A*D,E+I*D,w+O*D,E+P*D,h,!0)+2:d+=sf(w,E,w-A*M,E-I*M,w-O*M,E-P*M,h,!1)+2:a.join===js.MITER&&se/v<=m&&(j?(h.push(Pe,Ee),h.push(Pe,Ee)):(h.push(_e,Le),h.push(_e,Le)),d+=2),h.push(w-O*M,E-P*M),h.push(w+O*D,E+P*D),d+=2)}y=n[(p-2)*2],b=n[(p-2)*2+1],w=n[(p-1)*2],E=n[(p-1)*2+1],A=-(b-E),I=y-w,k=Math.sqrt(A*A+I*I),A/=k,I/=k,A*=_,I*=_,h.push(w-A*M,E-I*M),h.push(w+A*D,E+I*D),c||(a.cap===$s.ROUND?d+=sf(w-A*(M-D)*.5,E-I*(M-D)*.5,w-A*M,E-I*M,w+A*D,E+I*D,h,!1)+2:a.cap===$s.SQUARE&&(d+=MM(w,E,A,I,M,D,!1,h)));for(var Xe=t.indices,Ke=oh.epsilon*oh.epsilon,G=g;G<d+g-2;++G)y=h[G*2],b=h[G*2+1],w=h[(G+1)*2],E=h[(G+1)*2+1],C=h[(G+2)*2],T=h[(G+2)*2+1],!(Math.abs(y*(E-T)+w*(T-b)+C*(b-E))<Ke)&&Xe.push(G,G+1,G+2)}}function wPe(e,t){var r=0,n=e.shape,i=e.points||n.points,a=n.type!==ln.POLY||n.closeStroke;if(i.length!==0){var o=t.points,s=t.indices,c=i.length/2,l=o.length/2,u=l;for(o.push(i[0],i[1]),r=1;r<c;r++)o.push(i[r*2],i[r*2+1]),s.push(u,u+1),u++;a&&s.push(u,l)}}function gC(e,t){e.lineStyle.native?wPe(e,t):bPe(e,t)}var mC=function(){function e(){}return e.curveTo=function(t,r,n,i,a,o){var s=o[o.length-2],c=o[o.length-1],l=c-r,u=s-t,f=i-r,h=n-t,p=Math.abs(l*h-u*f);if(p<1e-8||a===0)return(o[o.length-2]!==t||o[o.length-1]!==r)&&o.push(t,r),null;var d=l*l+u*u,g=f*f+h*h,_=l*f+u*h,v=a*Math.sqrt(d)/p,m=a*Math.sqrt(g)/p,y=v*_/d,b=m*_/g,w=v*h+m*u,E=v*f+m*l,C=u*(m+y),T=l*(m+y),A=h*(v+b),I=f*(v+b),O=Math.atan2(T-E,C-w),P=Math.atan2(I-E,A-w);return{cx:w+t,cy:E+r,radius:a,startAngle:O,endAngle:P,anticlockwise:u*f>h*l}},e.arc=function(t,r,n,i,a,o,s,c,l){for(var u=s-o,f=oh._segmentsCount(Math.abs(u)*a,Math.ceil(Math.abs(u)/Qp)*40),h=u/(f*2),p=h*2,d=Math.cos(h),g=Math.sin(h),_=f-1,v=_%1/_,m=0;m<=_;++m){var y=m+v*m,b=h+o+p*y,w=Math.cos(b),E=-Math.sin(b);l.push((d*w+g*E)*a+n,(d*-E+g*w)*a+i)}},e}(),D7=function(){function e(){}return e.curveLength=function(t,r,n,i,a,o,s,c){for(var l=10,u=0,f=0,h=0,p=0,d=0,g=0,_=0,v=0,m=0,y=0,b=0,w=t,E=r,C=1;C<=l;++C)f=C/l,h=f*f,p=h*f,d=1-f,g=d*d,_=g*d,v=_*t+3*g*f*n+3*d*h*a+p*s,m=_*r+3*g*f*i+3*d*h*o+p*c,y=w-v,b=E-m,w=v,E=m,u+=Math.sqrt(y*y+b*b);return u},e.curveTo=function(t,r,n,i,a,o,s){var c=s[s.length-2],l=s[s.length-1];s.length-=2;var u=oh._segmentsCount(e.curveLength(c,l,t,r,n,i,a,o)),f=0,h=0,p=0,d=0,g=0;s.push(c,l);for(var _=1,v=0;_<=u;++_)v=_/u,f=1-v,h=f*f,p=h*f,d=v*v,g=d*v,s.push(p*c+3*h*v*t+3*f*d*n+g*a,p*l+3*h*v*r+3*f*d*i+g*o)},e}(),U7=function(){function e(){}return e.curveLength=function(t,r,n,i,a,o){var s=t-2*n+a,c=r-2*i+o,l=2*n-2*t,u=2*i-2*r,f=4*(s*s+c*c),h=4*(s*l+c*u),p=l*l+u*u,d=2*Math.sqrt(f+h+p),g=Math.sqrt(f),_=2*f*g,v=2*Math.sqrt(p),m=h/g;return(_*d+g*h*(d-v)+(4*p*f-h*h)*Math.log((2*g+m+d)/(m+v)))/(4*_)},e.curveTo=function(t,r,n,i,a){for(var o=a[a.length-2],s=a[a.length-1],c=oh._segmentsCount(e.curveLength(o,s,t,r,n,i)),l=0,u=0,f=1;f<=c;++f){var h=f/c;l=o+(t-o)*h,u=s+(r-s)*h,a.push(l+(t+(n-t)*h-l)*h,u+(r+(i-r)*h-u)*h)}},e}(),j7=function(){function e(){this.reset()}return e.prototype.begin=function(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n},e.prototype.end=function(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),Au,sm=(Au={},Au[ln.POLY]=eP,Au[ln.CIRC]=i0,Au[ln.ELIP]=i0,Au[ln.RECT]=B7,Au[ln.RREC]=M7,Au),_C=[],Zd=[],yC=function(){function e(t,r,n,i){r===void 0&&(r=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),lf=new cr,EPe=new ah,$7=function(e){QR(t,e);function t(){var r=e.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new ah,r.boundsDirty=-1,r}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Zd.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),_C.push(n)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(r,n,i,a){n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=null);var o=new yC(r,n,i,a);return this.graphicsData.push(o),this.dirty++,this},t.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new yC(r,null,null,n),a=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=a.lineStyle,a.holes.push(i),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var a=n[i];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(r,lf):lf.copyFrom(r),a.shape.contains(lf.x,lf.y))){var o=!1;if(a.holes)for(var s=0;s<a.holes.length;s++){var c=a.holes[s];if(c.shape.contains(lf.x,lf.y)){o=!0;break}}if(!o)return!0}}return!1},t.prototype.updateBatches=function(r){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var n=this.uvs,i=this.graphicsData,a=null,o=null;this.batches.length>0&&(a=this.batches[this.batches.length-1],o=a.style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var c=i[s],l=c.fillStyle,u=c.lineStyle,f=sm[c.type];f.build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(l.visible||u.visible)&&this.processHoles(c.holes);for(var h=0;h<2;h++){var p=h===0?l:u;if(p.visible){var d=p.texture.baseTexture,g=this.indices.length,_=this.points.length/2;d.wrapMode=as.REPEAT,h===0?this.processFill(c):this.processLine(c);var v=this.points.length/2-_;v!==0&&(a&&!this._compareStyles(o,p)&&(a.end(g,_),a=null),a||(a=_C.pop()||new j7,a.begin(p,g,_),this.batches.push(a),o=p),this.addUvs(this.points,n,p.texture,_,v,p.matrix))}}}var m=this.indices.length,y=this.points.length/2;if(a&&a.end(m,y),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var b=y>65535&&r;this.indicesUint16=b?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],a=i.fillStyle,o=i.lineStyle;if(a&&!a.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var a=r[n],o=0;o<a.size;o++){var s=a.start+o;this.indicesUint16[s]=this.indicesUint16[s]-a.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var r=++ur._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Zd.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,a=this.textureIds,o=Zd.pop();o||(o=new u_,o.texArray=new c_),o.texArray.count=0,o.start=0,o.size=0,o.type=Pa.TRIANGLES;var s=0,c=null,l=0,u=!1,f=Pa.TRIANGLES,h=0;this.drawCalls.push(o);for(var n=0;n<this.batches.length;n++){var p=this.batches[n],d=8,g=p.style,_=g.texture.baseTexture;u!==!!g.native&&(u=!!g.native,f=u?Pa.LINES:Pa.TRIANGLES,c=null,s=d,r++),c!==_&&(c=_,_._batchEnabled!==r&&(s===d&&(r++,s=0,o.size>0&&(o=Zd.pop(),o||(o=new u_,o.texArray=new c_),this.drawCalls.push(o)),o.start=h,o.size=0,o.texArray.count=0,o.type=f),_.touched=1,_._batchEnabled=r,_._batchLocation=s,_.wrapMode=as.REPEAT,o.texArray.elements[o.texArray.count++]=_,s++)),o.size+=p.size,h+=p.size,l=_._batchLocation,this.addColors(i,g.color,g.alpha,p.attribSize,p.attribStart),this.addTextureIds(a,l,p.attribSize,p.attribStart)}ur._globalBatch=r,this.packAttributes()},t.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,a=this.textureIds,o=new ArrayBuffer(r.length*3*4),s=new Float32Array(o),c=new Uint32Array(o),l=0,u=0;u<r.length/2;u++)s[l++]=r[u*2],s[l++]=r[u*2+1],s[l++]=n[u*2],s[l++]=n[u*2+1],c[l++]=i[u],s[l++]=a[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(r){if(r.holes.length)eP.triangulate(r,this);else{var n=sm[r.type];n.triangulate(r,this)}},t.prototype.processLine=function(r){gC(r,this);for(var n=0;n<r.holes.length;n++)gC(r.holes[n],this)},t.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n],a=sm[i.type];a.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},t.prototype.calculateBounds=function(){var r=this._bounds,n=EPe,i=Qr.IDENTITY;this._bounds.clear(),n.clear();for(var a=0;a<this.graphicsData.length;a++){var o=this.graphicsData[a],s=o.shape,c=o.type,l=o.lineStyle,u=o.matrix||Qr.IDENTITY,f=0;if(l&&l.visible&&(f=l.width,c!==ln.POLY||o.fillStyle.visible?f*=Math.max(0,l.alignment):f*=Math.max(l.alignment,1-l.alignment)),i!==u&&(n.isEmpty()||(r.addBoundsMatrix(n,i),n.clear()),i=u),c===ln.RECT||c===ln.RREC){var h=s;n.addFramePad(h.x,h.y,h.x+h.width,h.y+h.height,f,f)}else if(c===ln.CIRC){var p=s;n.addFramePad(p.x,p.y,p.x,p.y,p.radius+f,p.radius+f)}else if(c===ln.ELIP){var d=s;n.addFramePad(d.x,d.y,d.x,d.y,d.width+f,d.height+f)}else{var g=s;r.addVerticesMatrix(i,g.points,0,g.points.length,f,f)}}n.isEmpty()||r.addBoundsMatrix(n,i),r.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var a=r[i*2],o=r[i*2+1];r[i*2]=n.a*a+n.c*o+n.tx,r[i*2+1]=n.b*a+n.d*o+n.ty}},t.prototype.addColors=function(r,n,i,a,o){o===void 0&&(o=0);var s=(n>>16)+(n&65280)+((n&255)<<16),c=Jy(s,i);r.length=Math.max(r.length,o+a);for(var l=0;l<a;l++)r[o+l]=c},t.prototype.addTextureIds=function(r,n,i,a){a===void 0&&(a=0),r.length=Math.max(r.length,a+i);for(var o=0;o<i;o++)r[a+o]=n},t.prototype.addUvs=function(r,n,i,a,o,s){s===void 0&&(s=null);for(var c=0,l=n.length,u=i.frame;c<o;){var f=r[(a+c)*2],h=r[(a+c)*2+1];if(s){var p=s.a*f+s.c*h+s.tx;h=s.b*f+s.d*h+s.ty,f=p}c++,n.push(f/u.width,h/u.height)}var d=i.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(n,i,l,o)},t.prototype.adjustUvs=function(r,n,i,a){for(var o=n.baseTexture,s=1e-6,c=i+a*2,l=n.frame,u=l.width/o.width,f=l.height/o.height,h=l.x/l.width,p=l.y/l.height,d=Math.floor(r[i]+s),g=Math.floor(r[i+1]+s),_=i+2;_<c;_+=2)d=Math.min(d,Math.floor(r[_]+s)),g=Math.min(g,Math.floor(r[_+1]+s));h-=d,p-=g;for(var _=i;_<c;_+=2)r[_]=(r[_]+h)*u,r[_+1]=(r[_+1]+p)*f},t.BATCHABLE_SIZE=100,t}(qR),G7=function(e){QR(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=$s.BUTT,r.join=js.MITER,r.miterLimit=10,r}return t.prototype.clone=function(){var r=new t;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(JR),SPe=new Float32Array(3),Uw={},sh=function(e){QR(t,e);function t(r){r===void 0&&(r=null);var n=e.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new JR,n._lineStyle=new G7,n._matrix=null,n._holeMode=!1,n.state=fu.for2d(),n._geometry=r||new $7,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=ut.NORMAL,n}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(r,n,i,a,o){return r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=.5),o===void 0&&(o=!1),typeof r=="number"&&(r={width:r,color:n,alpha:i,alignment:a,native:o}),this.lineTextureStyle(r)},t.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:Ot.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:$s.BUTT,join:js.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new Xf,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new Xf,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},t.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,a=i[i.length-2],o=i[i.length-1];return(a!==r||o!==n)&&i.push(r,n),this},t.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},t.prototype.quadraticCurveTo=function(r,n,i,a){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),U7.curveTo(r,n,i,a,o),this},t.prototype.bezierCurveTo=function(r,n,i,a,o,s){return this._initCurve(),D7.curveTo(r,n,i,a,o,s,this.currentPath.points),this},t.prototype.arcTo=function(r,n,i,a,o){this._initCurve(r,n);var s=this.currentPath.points,c=mC.curveTo(r,n,i,a,o,s);if(c){var l=c.cx,u=c.cy,f=c.radius,h=c.startAngle,p=c.endAngle,d=c.anticlockwise;this.arc(l,u,f,h,p,d)}return this},t.prototype.arc=function(r,n,i,a,o,s){if(s===void 0&&(s=!1),a===o)return this;!s&&o<=a?o+=Qp:s&&a<=o&&(a+=Qp);var c=o-a;if(c===0)return this;var l=r+Math.cos(a)*i,u=n+Math.sin(a)*i,f=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var p=Math.abs(h[h.length-2]-l),d=Math.abs(h[h.length-1]-u);p<f&&d<f||h.push(l,u)}else this.moveTo(l,u),h=this.currentPath.points;return mC.arc(l,u,r,n,i,a,o,s,h),this},t.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:Ot.WHITE,color:r,alpha:n})},t.prototype.beginTextureFill=function(r){r=Object.assign({texture:Ot.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(r,n,i,a){return this.drawShape(new Qt(r,n,i,a))},t.prototype.drawRoundedRect=function(r,n,i,a,o){return this.drawShape(new MG(r,n,i,a,o))},t.prototype.drawCircle=function(r,n,i){return this.drawShape(new LG(r,n,i))},t.prototype.drawEllipse=function(r,n,i,a){return this.drawShape(new BG(r,n,i,a))},t.prototype.drawPolygon=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var a,o=!0,s=n[0];s.points?(o=s.closeStroke,a=s.points):Array.isArray(n[0])?a=n[0]:a=n;var c=new Xf(a);return c.closeStroke=o,this.drawShape(c),this},t.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===ln.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},t.prototype._render=function(r){this.finishPoly();var n=this._geometry,i=r.context.supports.uint32Indices;n.updateBatches(i),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},t.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var a=0;a<i;a++){var o=r.batches[a],s=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(r.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(r.indicesUint16.buffer,o.start*2,o.size),f={vertexData:c,blendMode:n,indices:u,uvs:l,_batchRGB:ai(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[a]=f}},t.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var a=this.batches[n];a.worldAlpha=this.worldAlpha*a.alpha,r.plugins[this.pluginName].render(a)}}},t.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,a=this.tint,o=this.worldAlpha,s=n.uniforms,c=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(a>>16&255)/255*o,s.tint[1]=(a>>8&255)/255*o,s.tint[2]=(a&255)/255*o,s.tint[3]=o,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var l=0,u=c.length;l<u;l++)this._renderDrawCallDirect(r,i.drawCalls[l])},t.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,a=n.type,o=n.size,s=n.start,c=i.count,l=0;l<c;l++)r.texture.bind(i.elements[l],l);r.geometry.draw(a,o,s)},t.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!Uw[i]){for(var a=r.plugins[i].MAX_TEXTURES,o=new Int32Array(a),s=0;s<a;s++)o[s]=s;var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qr,default:Hl.from({uSamplers:o},!0)},l=r.plugins[i]._shader.program;Uw[i]=new Xs(l,c)}n=Uw[i]}return n},t.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var n=r.bounds,i=n.minX,a=n.minY,o=n.maxX,s=n.maxY;this._bounds.addFrame(this.transform,i,a,o,s)}},t.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=ai(this.tint,SPe),n=0;n<this.batches.length;n++){var i=this.batches[n],a=i._batchRGB,o=r[0]*a[0]*255,s=r[1]*a[1]*255,c=r[2]*a[2]*255,l=(o<<16)+(s<<8)+(c|0);i._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},t.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,a=n.b,o=n.c,s=n.d,c=n.tx,l=n.ty,u=this._geometry.points,f=this.vertexData,h=0,p=0;p<u.length;p+=2){var d=u[p],g=u[p+1];f[h++]=i*d+o*g+c,f[h++]=s*g+a*d+l}}},t.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(r){return this._matrix=r,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,r)},t.nextRoundedRectBehavior=!1,t._TEMP_POINT=new cr,t}(ii),CPe={buildPoly:eP,buildCircle:i0,buildRectangle:B7,buildRoundedRectangle:M7,buildLine:gC,ArcUtils:mC,BezierUtils:D7,QuadraticUtils:U7,BatchPart:j7,FILL_COMMANDS:sm,BATCH_POOL:_C,DRAW_CALL_POOL:Zd};/*!
 * @pixi/sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xC=function(e,t){return xC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},xC(e,t)};function TPe(e,t){xC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Fd=new cr,APe=new Uint16Array([0,1,2,0,2,3]),pa=function(e){TPe(t,e);function t(r){var n=e.call(this)||this;return n._anchor=new Pl(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ut.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||Ot.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=APe,n.pluginName="batch",n.isSprite=!0,n._roundPixels=yt.ROUND_PIXELS,n}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ju(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ju(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,a=n.b,o=n.c,s=n.d,c=n.tx,l=n.ty,u=this.vertexData,f=r.trim,h=r.orig,p=this._anchor,d=0,g=0,_=0,v=0;if(f?(g=f.x-p._x*h.width,d=g+f.width,v=f.y-p._y*h.height,_=v+f.height):(g=-p._x*h.width,d=g+h.width,v=-p._y*h.height,_=v+h.height),u[0]=i*g+o*v+c,u[1]=s*v+a*g+l,u[2]=i*d+o*v+c,u[3]=s*v+a*d+l,u[4]=i*d+o*_+c,u[5]=s*_+a*d+l,u[6]=i*g+o*_+c,u[7]=s*_+a*g+l,this._roundPixels)for(var m=yt.RESOLUTION,y=0;y<u.length;++y)u[y]=Math.round((u[y]*m|0)/m)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,a=this._anchor,o=this.transform.worldTransform,s=o.a,c=o.b,l=o.c,u=o.d,f=o.tx,h=o.ty,p=-a._x*i.width,d=p+i.width,g=-a._y*i.height,_=g+i.height;n[0]=s*p+l*g+f,n[1]=u*g+c*p+h,n[2]=s*d+l*g+f,n[3]=u*g+c*d+h,n[4]=s*d+l*_+f,n[5]=u*_+c*d+h,n[6]=s*p+l*_+f,n[7]=u*_+c*p+h},t.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new ah),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._localBounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Fd);var n=this._texture.orig.width,i=this._texture.orig.height,a=-n*this.anchor.x,o=0;return Fd.x>=a&&Fd.x<a+n&&(o=-i*this.anchor.y,Fd.y>=o&&Fd.y<o+i)},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var i=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!i)}this._texture=null},t.from=function(r,n){var i=r instanceof Ot?r:Ot.from(r,n);return new t(i)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=Ju(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=Ju(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Ot.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(ii);/*!
 * @pixi/text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var bC=function(e,t){return bC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},bC(e,t)};function IPe(e,t){bC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var lh;(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(lh||(lh={}));var jw={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:lh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},RPe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_c=function(){function e(t){this.styleID=0,this.reset(),Gw(this,t,t)}return e.prototype.clone=function(){var t={};return Gw(t,this,jw),new e(t)},e.prototype.reset=function(){Gw(this,jw,jw)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var r=$w(t);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){var r=$w(t);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){PPe(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var r=$w(t);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&RPe.indexOf(i)<0&&(i='"'+i+'"'),r[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+r.join(",")},e}();function DM(e){return typeof e=="number"?_R(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function $w(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=DM(e[t]);return e}else return DM(e)}function PPe(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function Gw(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}var Fo=function(){function e(t,r,n,i,a,o,s,c,l){this.text=t,this.style=r,this.width=n,this.height=i,this.lines=a,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=c,this.fontProperties=l}return e.measureText=function(t,r,n,i){i===void 0&&(i=e._canvas),n=n??r.wordWrap;var a=r.toFontString(),o=e.measureFont(a);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);var s=i.getContext("2d");s.font=a;for(var c=n?e.wordWrap(t,r,i):t,l=c.split(/(?:\r\n|\r|\n)/),u=new Array(l.length),f=0,h=0;h<l.length;h++){var p=s.measureText(l[h]).width+(l[h].length-1)*r.letterSpacing;u[h]=p,f=Math.max(f,p)}var d=f+r.strokeThickness;r.dropShadow&&(d+=r.dropShadowDistance);var g=r.lineHeight||o.fontSize+r.strokeThickness,_=Math.max(g,o.fontSize+r.strokeThickness)+(l.length-1)*(g+r.leading);return r.dropShadow&&(_+=r.dropShadowDistance),new e(t,r,d,_,l,u,g+r.leading,f,o)},e.wordWrap=function(t,r,n){n===void 0&&(n=e._canvas);for(var i=n.getContext("2d"),a=0,o="",s="",c=Object.create(null),l=r.letterSpacing,u=r.whiteSpace,f=e.collapseSpaces(u),h=e.collapseNewlines(u),p=!f,d=r.wordWrapWidth+l,g=e.tokenize(t),_=0;_<g.length;_++){var v=g[_];if(e.isNewline(v)){if(!h){s+=e.addLine(o),p=!f,o="",a=0;continue}v=" "}if(f){var m=e.isBreakingSpace(v),y=e.isBreakingSpace(o[o.length-1]);if(m&&y)continue}var b=e.getFromCache(v,l,c,i);if(b>d)if(o!==""&&(s+=e.addLine(o),o="",a=0),e.canBreakWords(v,r.breakWords))for(var w=e.wordWrapSplit(v),E=0;E<w.length;E++){for(var C=w[E],T=1;w[E+T];){var A=w[E+T],I=C[C.length-1];if(!e.canBreakChars(I,A,v,E,r.breakWords))C+=A;else break;T++}E+=C.length-1;var O=e.getFromCache(C,l,c,i);O+a>d&&(s+=e.addLine(o),p=!1,o="",a=0),o+=C,a+=O}else{o.length>0&&(s+=e.addLine(o),o="",a=0);var P=_===g.length-1;s+=e.addLine(v,!P),p=!1,o="",a=0}else b+a>d&&(p=!1,s+=e.addLine(o),o="",a=0),(o.length>0||!e.isBreakingSpace(v)||p)&&(o+=v,a+=b)}return s+=e.addLine(o,!1),s},e.addLine=function(t,r){return r===void 0&&(r=!0),t=e.trimRight(t),t=r?t+`
`:t,t},e.getFromCache=function(t,r,n,i){var a=n[t];if(typeof a!="number"){var o=t.length*r;a=i.measureText(t).width+o,n[t]=a}return a},e.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},e.collapseNewlines=function(t){return t==="normal"},e.trimRight=function(t){if(typeof t!="string")return"";for(var r=t.length-1;r>=0;r--){var n=t[r];if(!e.isBreakingSpace(n))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return typeof t!="string"?!1:e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t,r){return typeof t!="string"?!1:e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var r=[],n="";if(typeof t!="string")return r;for(var i=0;i<t.length;i++){var a=t[i],o=t[i+1];if(e.isBreakingSpace(a,o)||e.isNewline(a)){n!==""&&(r.push(n),n=""),r.push(a);continue}n+=a}return n!==""&&r.push(n),r},e.canBreakWords=function(t,r){return r},e.canBreakChars=function(t,r,n,i,a){return!0},e.wordWrapSplit=function(t){return t.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={ascent:0,descent:0,fontSize:0},n=e._canvas,i=e._context;i.font=t;var a=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),c=Math.ceil(e.HEIGHT_MULTIPLIER*s);s=s*e.BASELINE_MULTIPLIER|0,n.width=o,n.height=c,i.fillStyle="#f00",i.fillRect(0,0,o,c),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var l=i.getImageData(0,0,o,c).data,u=l.length,f=o*4,h=0,p=0,d=!1;for(h=0;h<s;++h){for(var g=0;g<f;g+=4)if(l[p+g]!==255){d=!0;break}if(!d)p+=f;else break}for(r.ascent=s-h,p=u-f,d=!1,h=c;h>s;--h){for(var g=0;g<f;g+=4)if(l[p+g]!==255){d=!0;break}if(!d)p-=f;else break}return r.descent=h-s,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e.clearMetrics=function(t){t===void 0&&(t=""),t?delete e._fonts[t]:e._fonts={}},Object.defineProperty(e,"_canvas",{get:function(){if(!e.__canvas){var t=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d");if(n&&n.measureText)return e.__canvas=r,r;t=document.createElement("canvas")}catch{t=document.createElement("canvas")}t.width=t.height=10,e.__canvas=t}return e.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(e,"_context",{get:function(){return e.__context||(e.__context=e._canvas.getContext("2d")),e.__context},enumerable:!1,configurable:!0}),e}();Fo._fonts={};Fo.METRICS_STRING="|q";Fo.BASELINE_SYMBOL="M";Fo.BASELINE_MULTIPLIER=1.4;Fo.HEIGHT_MULTIPLIER=2;Fo._newlines=[10,13];Fo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var OPe={texture:!0,children:!1,baseTexture:!0},tP=function(e){IPe(t,e);function t(r,n,i){var a=this,o=!1;i||(i=document.createElement("canvas"),o=!0),i.width=3,i.height=3;var s=Ot.from(i);return s.orig=new Qt,s.trim=new Qt,a=e.call(this,s)||this,a._ownCanvas=o,a.canvas=i,a.context=a.canvas.getContext("2d"),a._resolution=yt.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=r,a.style=n,a.localStyleID=-1,a}return t.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var i=this.context,a=Fo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=a.width,s=a.height,c=a.lines,l=a.lineHeight,u=a.lineWidths,f=a.maxLineWidth,h=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var p,d,g=n.dropShadow?2:1,_=0;_<g;++_){var v=n.dropShadow&&_===0,m=v?Math.ceil(Math.max(1,s)+n.padding*2):0,y=m*this._resolution;if(v){i.fillStyle="black",i.strokeStyle="black";var b=n.dropShadowColor,w=ai(typeof b=="number"?b:yR(b)),E=n.dropShadowBlur*this._resolution,C=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+w[0]*255+","+w[1]*255+","+w[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=E,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*C,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*C+y}else i.fillStyle=this._generateFillStyle(n,c,a),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var T=(l-h.fontSize)/2;(!t.nextLineHeightBehavior||l-h.fontSize<0)&&(T=0);for(var A=0;A<c.length;A++)p=n.strokeThickness/2,d=n.strokeThickness/2+A*l+h.ascent+T,n.align==="right"?p+=f-u[A]:n.align==="center"&&(p+=(f-u[A])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(c[A],p+n.padding,d+n.padding-m,!0),n.fill&&this.drawLetterSpacing(c[A],p+n.padding,d+n.padding-m)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(r,n,i,a){a===void 0&&(a=!1);var o=this._style,s=o.letterSpacing,c=t.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||c){c&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),a?this.context.strokeText(r,n,i):this.context.fillText(r,n,i);return}for(var l=n,u=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,h=0,p=0;p<u.length;++p){var d=u[p];a?this.context.strokeText(d,l,i):this.context.fillText(d,l,i);for(var g="",_=p+1;_<u.length;++_)g+=u[_];h=this.context.measureText(g).width,l+=f-h+s,f=h}},t.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=kG(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,a=this._style,o=a.trim?0:a.padding,s=i.baseTexture;i.trim.width=i._frame.width=r.width/this._resolution,i.trim.height=i._frame.height=r.height/this._resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,this._resolution),i.updateUvs(),this.dirty=!1},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,r)},t.prototype.updateTransform=function(){this.updateText(!0),e.prototype.updateTransform.call(this)},t.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),e.prototype.getBounds.call(this,r,n)},t.prototype.getLocalBounds=function(r){return this.updateText(!0),e.prototype.getLocalBounds.call(this,r)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(r,n,i){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,s=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,l=this.canvas.width/this._resolution-s-c*2,u=this.canvas.height/this._resolution-s-c*2,f=a.slice(),h=r.fillGradientStops.slice();if(!h.length)for(var p=f.length+1,d=1;d<p;++d)h.push(d/p);if(f.unshift(a[0]),h.unshift(0),f.push(a[a.length-1]),h.push(1),r.fillGradientType===lh.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,c,l/2,u+c);for(var g=i.fontProperties.fontSize+r.strokeThickness,d=0;d<n.length;d++){var _=i.lineHeight*(d-1)+g,v=i.lineHeight*d,m=v;d>0&&_>v&&(m=(v+_)/2);var y=v+g,b=i.lineHeight*(d+1),w=y;d+1<n.length&&b<y&&(w=(y+b)/2);for(var E=(w-m)/u,C=0;C<f.length;C++){var T=0;typeof h[C]=="number"?T=h[C]:T=C/f.length;var A=Math.min(1,Math.max(0,m/u+T*E));A=Number(A.toFixed(5)),o.addColorStop(A,f[C])}}}else{o=this.context.createLinearGradient(c,u/2,l+c,u/2);for(var I=f.length+1,O=1,d=0;d<f.length;d++){var P=void 0;typeof h[d]=="number"?P=h[d]:P=O/I,o.addColorStop(P,f[d]),O++}}return o},t.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},OPe,r),e.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=Ju(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=Ju(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof _c?this._style=r:this._style=new _c(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t.experimentalLetterSpacing=!1,t}(pa);/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */yt.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wC=function(e,t){return wC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},wC(e,t)};function kPe(e,t){wC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var V7=function(){function e(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function FPe(e,t){var r=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof Ot){var i=e._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),r=!0)}}return r}function NPe(e,t){if(e.baseTexture instanceof ur){var r=e.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function LPe(e,t){if(e._texture&&e._texture instanceof Ot){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function BPe(e,t){return t instanceof tP?(t.updateText(!0),!0):!1}function MPe(e,t){if(t instanceof _c){var r=t.toFontString();return Fo.measureFont(r),!0}return!1}function DPe(e,t){if(e instanceof tP){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function UPe(e,t){return e instanceof _c?(t.indexOf(e)===-1&&t.push(e),!0):!1}var H7=function(){function e(t){var r=this;this.limiter=new V7(yt.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(DPe),this.registerFindHook(UPe),this.registerFindHook(FPe),this.registerFindHook(NPe),this.registerFindHook(LPe),this.registerUploadHook(BPe),this.registerUploadHook(MPe)}return e.prototype.upload=function(t,r){typeof t=="function"&&(r=t,t=null),t&&this.add(t),this.queue.length?(r&&this.completes.push(r),this.ticking||(this.ticking=!0,_n.system.addOnce(this.tick,this,Po.UTILITY))):r&&r()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],r=!1;if(t&&!t._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)_n.system.addOnce(this.tick,this,Po.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var n=0,i=a.length;n<i;n++)a[n]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](t,this.queue);r++);if(t instanceof ii)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},e.prototype.destroy=function(){this.ticking&&_n.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function X7(e,t){return t instanceof ur?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function jPe(e,t){if(!(t instanceof sh))return!1;var r=t.geometry;t.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var a=n[i].style.texture;a&&X7(e,a.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function $Pe(e,t){return e instanceof sh?(t.push(e),!0):!1}var z7=function(e){kPe(t,e);function t(r){var n=e.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook($Pe),n.registerUploadHook(X7),n.registerUploadHook(jPe),n}return t}(H7),GPe=function(){function e(t){this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();/*!
 * @pixi/spritesheet - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var W7=function(){function e(t,r,n){n===void 0&&(n=null),this._texture=t instanceof Ot?t:null,this.baseTexture=t instanceof ur?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(t){t===void 0&&(t=null);var r=this.data.meta.scale,n=Jp(t,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,n=e.BATCH_SIZE;r-t<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],a=this._frames[i],o=a.frame;if(o){var s=null,c=null,l=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,u=new Qt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);a.rotated?s=new Qt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):s=new Qt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(c=new Qt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Ot(this.baseTexture,s,u,c,a.rotated?2:0,a.anchor),Ot.addToCache(this.textures[i],i)}r++}},e.prototype._processAnimations=function(){var t=this.data.animations||{};for(var r in t){this.animations[r]=[];for(var n=0;n<t[r].length;n++){var i=t[r][n];this.animations[r].push(this.textures[i])}}},e.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(t){var r;t===void 0&&(t=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),Y7=function(){function e(){}return e.use=function(t,r){var n,i,a=this,o=t.name+"_image";if(!t.data||t.type!==Fr.TYPE.JSON||!t.data.frames||a.resources[o]){r();return}var s=(i=(n=t.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(s))for(var c=function(d){if(typeof d!="string")return"continue";var g=d.replace(".json",""),_=Zu.resolve(t.url.replace(a.baseUrl,""),d);if(a.resources[g]||Object.values(a.resources).some(function(m){return Zu.format(Zu.parse(m.url))===_}))return"continue";var v={crossOrigin:t.crossOrigin,loadType:Fr.LOAD_TYPE.XHR,xhrType:Fr.XHR_RESPONSE_TYPE.JSON,parentResource:t,metadata:t.metadata};a.add(g,_,v)},l=0,u=s;l<u.length;l++){var f=u[l];c(f)}var h={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},p=e.getResourcePath(t,a.baseUrl);a.add(o,p,h,function(g){if(g.error){r(g.error);return}var _=new W7(g.texture,t.data,t.url);_.parse(function(){t.spritesheet=_,t.textures=_.textures,r()})})},e.getResourcePath=function(t,r){return t.isDataUrl?t.data.meta.image:Zu.resolve(t.url.replace(r,""),t.data.meta.image)},e}();/*!
 * @pixi/sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var EC=function(e,t){return EC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},EC(e,t)};function q7(e,t){EC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Nd=new cr,VPe=function(e){q7(t,e);function t(r,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var a=e.call(this,r)||this;return a.tileTransform=new G0,a._width=n,a._height=i,a.uvMatrix=a.texture.uvMatrix||new ix(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,a)},t.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Qt),r=this._localBoundsRect),this._bounds.getRectangle(r)):e.prototype.getLocalBounds.call(this,r)},t.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Nd);var n=this._width,i=this._height,a=-n*this.anchor._x;if(Nd.x>=a&&Nd.x<a+n){var o=-i*this.anchor._y;if(Nd.y>=o&&Nd.y<o+i)return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},t.from=function(r,n){var i=r instanceof Ot?r:Ot.from(r,n);return new t(i,n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),t}(pa),HPe=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,UM=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,XPe=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,zPe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,WPe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Ag=new Qr,K7=function(e){q7(t,e);function t(r){var n=e.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new FR,n.state=fu.for2d(),n}return t.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=Xs.from(UM,HPe,n),this.shader=r.context.webGLVersion>1?Xs.from(zPe,WPe,n):Xs.from(UM,XPe,n)},t.prototype.render=function(r){var n=this.renderer,i=this.quad,a=i.vertices;a[0]=a[6]=r._width*-r.anchor.x,a[1]=a[3]=r._height*-r.anchor.y,a[2]=a[4]=r._width*(1-r.anchor.x),a[5]=a[7]=r._height*(1-r.anchor.y);var o=r.uvRespectAnchor?r.anchor.x:0,s=r.uvRespectAnchor?r.anchor.y:0;a=i.uvs,a[0]=a[6]=-o,a[1]=a[3]=-s,a[2]=a[4]=1-o,a[5]=a[7]=1-s,i.invalidate();var c=r._texture,l=c.baseTexture,u=r.tileTransform.localTransform,f=r.uvMatrix,h=l.isPowerOfTwo&&c.frame.width===l.width&&c.frame.height===l.height;h&&(l._glTextures[n.CONTEXT_UID]?h=l.wrapMode!==as.CLAMP:l.wrapMode===as.CLAMP&&(l.wrapMode=as.REPEAT));var p=h?this.simpleShader:this.shader,d=c.width,g=c.height,_=r._width,v=r._height;Ag.set(u.a*d/_,u.b*d/v,u.c*g/_,u.d*g/v,u.tx/_,u.ty/v),Ag.invert(),h?Ag.prepend(f.mapCoord):(p.uniforms.uMapCoord=f.mapCoord.toArray(!0),p.uniforms.uClampFrame=f.uClampFrame,p.uniforms.uClampOffset=f.uClampOffset),p.uniforms.uTransform=Ag.toArray(!0),p.uniforms.uColor=wR(r.tint,r.worldAlpha,p.uniforms.uColor,l.alphaMode),p.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),p.uniforms.uSampler=c,n.shader.bind(p),n.geometry.bind(i),this.state.blendMode=bR(r.blendMode,l.alphaMode),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(V0);/*!
 * @pixi/mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var SC=function(e,t){return SC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},SC(e,t)};function rP(e,t){SC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Z7=function(){function e(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},e}(),Vw=new cr,jM=new Xf,uh=function(e){rP(t,e);function t(r,n,i,a){a===void 0&&(a=Pa.TRIANGLES);var o=e.call(this)||this;return o.geometry=r,o.shader=n,o.state=i||fu.for2d(),o.drawMode=a,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=yt.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Pa.TRIANGLES&&n.length<t.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},t.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(r){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var a=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[a]),r.plugins[a].render(this)},t.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],i=n.data,a=n._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var o=this.transform.worldTransform,s=o.a,c=o.b,l=o.c,u=o.d,f=o.tx,h=o.ty,p=this.vertexData,d=0;d<p.length/2;d++){var g=i[d*2],_=i[d*2+1];p[d*2]=s*g+l*_+f,p[d*2+1]=c*g+u*_+h}if(this._roundPixels)for(var v=yt.RESOLUTION,d=0;d<p.length;++d)p[d]=Math.round((p[d]*v|0)/v);this.vertexDirty=a}},t.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new Z7(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Vw);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=jM.points,a=this.geometry.getIndex().data,o=a.length,s=this.drawMode===4?3:1,c=0;c+2<o;c+=s){var l=a[c]*2,u=a[c+1]*2,f=a[c+2]*2;if(i[0]=n[l],i[1]=n[l+1],i[2]=n[u],i[3]=n[u+1],i[4]=n[f],i[5]=n[f+1],jM.contains(Vw.x,Vw.y))return!0}return!1},t.prototype.destroy=function(r){e.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(ii),YPe=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,qPe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,ch=function(e){rP(t,e);function t(r,n){var i=this,a={uSampler:r,alpha:1,uTextureMatrix:Qr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(a,n.uniforms),i=e.call(this,n.program||jh.from(qPe,YPe),a)||this,i._colorDirty=!1,i.uvMatrix=new ix(r),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;wR(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Xs),X0=function(e){rP(t,e);function t(r,n,i){var a=e.call(this)||this,o=new Xn(r),s=new Xn(n,!0),c=new Xn(i,!0,!0);return a.addAttribute("aVertexPosition",o,2,!1,Tt.FLOAT).addAttribute("aTextureCoord",s,2,!1,Tt.FLOAT).addIndex(c),a._updateId=-1,a}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Uh);/*!
 * @pixi/text-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var CC=function(e,t){return CC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},CC(e,t)};function KPe(e,t){CC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var a0=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return e}(),ZPe=function(){function e(){}return e.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},e.parse=function(t){var r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in r){var a=r[i].match(/^[a-z]+/gm)[0],o=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var c in o){var l=o[c].split("="),u=l[0],f=l[1].replace(/"/gm,""),h=parseFloat(f),p=isNaN(h)?f:h;s[u]=p}n[a].push(s)}var d=new a0;return n.info.forEach(function(g){return d.info.push({face:g.face,size:parseInt(g.size,10)})}),n.common.forEach(function(g){return d.common.push({lineHeight:parseInt(g.lineHeight,10)})}),n.page.forEach(function(g){return d.page.push({id:parseInt(g.id,10),file:g.file})}),n.char.forEach(function(g){return d.char.push({id:parseInt(g.id,10),page:parseInt(g.page,10),x:parseInt(g.x,10),y:parseInt(g.y,10),width:parseInt(g.width,10),height:parseInt(g.height,10),xoffset:parseInt(g.xoffset,10),yoffset:parseInt(g.yoffset,10),xadvance:parseInt(g.xadvance,10)})}),n.kerning.forEach(function(g){return d.kerning.push({first:parseInt(g.first,10),second:parseInt(g.second,10),amount:parseInt(g.amount,10)})}),n.distanceField.forEach(function(g){return d.distanceField.push({distanceRange:parseInt(g.distanceRange,10),fieldType:g.fieldType})}),d},e}(),TC=function(){function e(){}return e.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(t){for(var r=new a0,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),a=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),c=t.getElementsByTagName("distanceField"),l=0;l<n.length;l++)r.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var l=0;l<i.length;l++)r.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(var l=0;l<a.length;l++)r.page.push({id:parseInt(a[l].getAttribute("id"),10)||0,file:a[l].getAttribute("file")});for(var l=0;l<o.length;l++){var u=o[l];r.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var l=0;l<s.length;l++)r.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(var l=0;l<c.length;l++)r.distanceField.push({fieldType:c[l].getAttribute("fieldType"),distanceRange:parseInt(c[l].getAttribute("distanceRange"),10)});return r},e}(),JPe=function(){function e(){}return e.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return TC.test(r)}return!1},e.parse=function(t){var r=new globalThis.DOMParser().parseFromString(t,"text/xml");return TC.parse(r)},e}(),Hw=[ZPe,TC,JPe];function J7(e){for(var t=0;t<Hw.length;t++)if(Hw[t].test(e))return Hw[t];return null}function QPe(e,t,r,n,i,a){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,c=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=e.width/n-c-l*2,f=e.height/n-c-l*2,h=o.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var d=h.length+1,g=1;g<d;++g)p.push(g/d);if(h.unshift(o[0]),p.unshift(0),h.push(o[o.length-1]),p.push(1),r.fillGradientType===lh.LINEAR_VERTICAL){s=t.createLinearGradient(u/2,l,u/2,f+l);for(var _=0,v=a.fontProperties.fontSize+r.strokeThickness,m=v/f,g=0;g<i.length;g++)for(var y=a.lineHeight*g,b=0;b<h.length;b++){var w=0;typeof p[b]=="number"?w=p[b]:w=b/h.length;var E=y/f+w*m,C=Math.max(_,E);C=Math.min(C,1),s.addColorStop(C,h[b]),_=C}}else{s=t.createLinearGradient(l,f/2,u+l,f/2);for(var T=h.length+1,A=1,g=0;g<h.length;g++){var I=void 0;typeof p[g]=="number"?I=p[g]:I=A/T,s.addColorStop(I,h[g]),A++}}return s}function eOe(e,t,r,n,i,a,o){var s=r.text,c=r.fontProperties;t.translate(n,i),t.scale(a,a);var l=o.strokeThickness/2,u=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=QPe(e,t,o,a,[s],r),t.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,h=ai(typeof f=="number"?f:yR(f)),p=o.dropShadowBlur*a,d=o.dropShadowDistance*a;t.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+o.dropShadowAlpha+")",t.shadowBlur=p,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(s,l,u+r.lineHeight-c.descent),o.fill&&t.fillText(s,l,u+r.lineHeight-c.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Q7(e){return Array.from?Array.from(e):e.split("")}function tOe(e){typeof e=="string"&&(e=[e]);for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var a=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,c=o;s<=c;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,Q7(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function lm(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var Vu=function(){function e(t,r,n){var i,a,o=t.info[0],s=t.common[0],c=t.page[0],l=t.distanceField[0],u=Jp(c.file),f={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=f;for(var h=0;h<t.page.length;h++){var p=t.page[h],d=p.id,g=p.file;f[d]=r instanceof Array?r[h]:r[g],l!=null&&l.fieldType&&l.fieldType!=="none"&&(f[d].baseTexture.alphaMode=na.NO_PREMULTIPLIED_ALPHA)}for(var h=0;h<t.char.length;h++){var _=t.char[h],d=_.id,v=_.page,m=t.char[h],y=m.x,b=m.y,w=m.width,E=m.height,C=m.xoffset,T=m.yoffset,A=m.xadvance;y/=u,b/=u,w/=u,E/=u,C/=u,T/=u,A/=u;var I=new Qt(y+f[v].frame.x/u,b+f[v].frame.y/u,w,E);this.chars[d]={xOffset:C,yOffset:T,xAdvance:A,kerning:{},texture:new Ot(f[v].baseTexture,I),page:v}}for(var h=0;h<t.kerning.length;h++){var O=t.kerning[h],P=O.first,k=O.second,F=O.amount;P/=u,k/=u,F/=u,this.chars[k]&&(this.chars[k].kerning[P]=F)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(a=(i=l==null?void 0:l.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&a!==void 0?a:"none"}return e.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},e.install=function(t,r,n){var i;if(t instanceof a0)i=t;else{var a=J7(t);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(t)}r instanceof Ot&&(r=[r]);var o=new e(i,r,n);return e.available[o.font]=o,o},e.uninstall=function(t){var r=e.available[t];if(!r)throw new Error("No font found named '"+t+"'");r.destroy(),delete e.available[t]},e.from=function(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,n),a=i.chars,o=i.padding,s=i.resolution,c=i.textureWidth,l=i.textureHeight,u=tOe(a),f=r instanceof _c?r:new _c(r),h=c,p=new a0;p.info[0]={face:f.fontFamily,size:f.fontSize},p.common[0]={lineHeight:f.fontSize};for(var d=0,g=0,_,v,m,y=0,b=[],w=0;w<u.length;w++){_||(_=document.createElement("canvas"),_.width=c,_.height=l,v=_.getContext("2d"),m=new ur(_,{resolution:s}),b.push(new Ot(m)),p.page.push({id:b.length-1,file:""}));var E=Fo.measureText(u[w],f,!1,_),C=E.width,T=Math.ceil(E.height),A=Math.ceil((f.fontStyle==="italic"?2:1)*C);if(g>=l-T*s){if(g===0)throw new Error("[BitmapFont] textureHeight "+l+"px is "+("too small for "+f.fontSize+"px fonts"));--w,_=null,v=null,m=null,g=0,d=0,y=0;continue}if(y=Math.max(T+E.fontProperties.descent,y),A*s+d>=h){--w,g+=y*s,g=Math.ceil(g),d=0,y=0;continue}eOe(_,v,E,d,g,s,f);var I=lm(E.text);p.char.push({id:I,page:b.length-1,x:d/s,y:g/s,width:A,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(C-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),d+=(A+2*o)*s,d=Math.ceil(d)}for(var w=0,O=u.length;w<O;w++)for(var P=u[w],k=0;k<O;k++){var F=u[k],M=v.measureText(P).width,D=v.measureText(F).width,G=v.measureText(P+F).width,Q=G-(M+D);Q&&p.kerning.push({first:lm(P),second:lm(F),amount:Q})}var te=new e(p,b,!0);return e.available[t]!==void 0&&e.uninstall(t),e.available[t]=te,te},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),rOe=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,nOe=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,iOe=[],aOe=[],$M=[],oOe=function(e){KPe(t,e);function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i._tint=16777215;var a=Object.assign({},t.styleDefaults,n),o=a.align,s=a.tint,c=a.maxWidth,l=a.letterSpacing,u=a.fontName,f=a.fontSize;if(!Vu.available[u])throw new Error('Missing BitmapFont "'+u+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=s,i._fontName=u,i._fontSize=f||Vu.available[u].size,i.text=r,i._maxWidth=c,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new Pl(function(){i.dirty=!0},i,0,0),i._roundPixels=yt.ROUND_PIXELS,i.dirty=!0,i._resolution=yt.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return t.prototype.updateText=function(){for(var r,n=Vu.available[this._fontName],i=this._fontSize/n.size,a=new cr,o=[],s=[],c=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=Q7(l),f=this._maxWidth*n.size/this._fontSize,h=n.distanceFieldType==="none"?iOe:aOe,p=null,d=0,g=0,_=0,v=-1,m=0,y=0,b=0,w=0,E=0;E<u.length;E++){var C=u[E],T=lm(C);if(/(?:\s)/.test(C)&&(v=E,m=d,w++),C==="\r"||C===`
`){s.push(d),c.push(-1),g=Math.max(g,d),++_,++y,a.x=0,a.y+=n.lineHeight,p=null,w=0;continue}var A=n.chars[T];if(A){p&&A.kerning[p]&&(a.x+=A.kerning[p]);var I=$M.pop()||{texture:Ot.EMPTY,line:0,charCode:0,prevSpaces:0,position:new cr};I.texture=A.texture,I.line=_,I.charCode=T,I.position.x=a.x+A.xOffset+this._letterSpacing/2,I.position.y=a.y+A.yOffset,I.prevSpaces=w,o.push(I),d=I.position.x+Math.max(A.xAdvance,A.texture.orig.width),a.x+=A.xAdvance+this._letterSpacing,b=Math.max(b,A.yOffset+A.texture.height),p=T,v!==-1&&f>0&&a.x>f&&(++y,os(o,1+v-y,1+E-v),E=v,v=-1,s.push(m),c.push(o.length>0?o[o.length-1].prevSpaces:0),g=Math.max(g,m),_++,a.x=0,a.y+=n.lineHeight,p=null,w=0)}}var O=u[u.length-1];O!=="\r"&&O!==`
`&&(/(?:\s)/.test(O)&&(d=m),s.push(d),g=Math.max(g,d),c.push(-1));for(var P=[],E=0;E<=_;E++){var k=0;this._align==="right"?k=g-s[E]:this._align==="center"?k=(g-s[E])/2:this._align==="justify"&&(k=c[E]<0?0:(g-s[E])/c[E]),P.push(k)}for(var F=o.length,M={},D=[],G=this._activePagesMeshData,E=0;E<G.length;E++)h.push(G[E]);for(var E=0;E<F;E++){var Q=o[E].texture,te=Q.baseTexture.uid;if(!M[te]){var Y=h.pop();if(!Y){var U=new X0,z=void 0,j=void 0;n.distanceFieldType==="none"?(z=new ch(Ot.EMPTY),j=ut.NORMAL):(z=new ch(Ot.EMPTY,{program:jh.from(nOe,rOe),uniforms:{uFWidth:0}}),j=ut.NORMAL_NPM);var V=new uh(U,z);V.blendMode=j,Y={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:V,vertices:null,uvs:null,indices:null}}Y.index=0,Y.indexCount=0,Y.vertexCount=0,Y.uvsCount=0,Y.total=0;var ne=this._textureCache;ne[te]=ne[te]||new Ot(Q.baseTexture),Y.mesh.texture=ne[te],Y.mesh.tint=this._tint,D.push(Y),M[te]=Y}M[te].total++}for(var E=0;E<G.length;E++)D.indexOf(G[E])===-1&&this.removeChild(G[E].mesh);for(var E=0;E<D.length;E++)D[E].mesh.parent!==this&&this.addChild(D[E].mesh);this._activePagesMeshData=D;for(var E in M){var Y=M[E],ae=Y.total;if(!(((r=Y.indices)===null||r===void 0?void 0:r.length)>6*ae)||Y.vertices.length<uh.BATCHABLE_SIZE*2)Y.vertices=new Float32Array(4*2*ae),Y.uvs=new Float32Array(4*2*ae),Y.indices=new Uint16Array(6*ae);else for(var pe=Y.total,se=Y.vertices,_e=pe*4*2;_e<se.length;_e++)se[_e]=0;Y.mesh.size=6*ae}for(var E=0;E<F;E++){var C=o[E],Le=C.position.x+P[C.line]*(this._align==="justify"?C.prevSpaces:1);this._roundPixels&&(Le=Math.round(Le));var Pe=Le*i,Ee=C.position.y*i,Q=C.texture,Se=M[Q.baseTexture.uid],Ge=Q.frame,We=Q._uvs,Ve=Se.index++;Se.indices[Ve*6+0]=0+Ve*4,Se.indices[Ve*6+1]=1+Ve*4,Se.indices[Ve*6+2]=2+Ve*4,Se.indices[Ve*6+3]=0+Ve*4,Se.indices[Ve*6+4]=2+Ve*4,Se.indices[Ve*6+5]=3+Ve*4,Se.vertices[Ve*8+0]=Pe,Se.vertices[Ve*8+1]=Ee,Se.vertices[Ve*8+2]=Pe+Ge.width*i,Se.vertices[Ve*8+3]=Ee,Se.vertices[Ve*8+4]=Pe+Ge.width*i,Se.vertices[Ve*8+5]=Ee+Ge.height*i,Se.vertices[Ve*8+6]=Pe,Se.vertices[Ve*8+7]=Ee+Ge.height*i,Se.uvs[Ve*8+0]=We.x0,Se.uvs[Ve*8+1]=We.y0,Se.uvs[Ve*8+2]=We.x1,Se.uvs[Ve*8+3]=We.y1,Se.uvs[Ve*8+4]=We.x2,Se.uvs[Ve*8+5]=We.y2,Se.uvs[Ve*8+6]=We.x3,Se.uvs[Ve*8+7]=We.y3}this._textWidth=g*i,this._textHeight=(a.y+n.lineHeight)*i;for(var E in M){var Y=M[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var Xe=0,Ke=this._textWidth*this.anchor.x,bt=this._textHeight*this.anchor.y,Rt=0;Rt<Y.total;Rt++)Y.vertices[Xe++]-=Ke,Y.vertices[Xe++]-=bt,Y.vertices[Xe++]-=Ke,Y.vertices[Xe++]-=bt,Y.vertices[Xe++]-=Ke,Y.vertices[Xe++]-=bt,Y.vertices[Xe++]-=Ke,Y.vertices[Xe++]-=bt;this._maxLineHeight=b*i;var ct=Y.mesh.geometry.getBuffer("aVertexPosition"),gt=Y.mesh.geometry.getBuffer("aTextureCoord"),It=Y.mesh.geometry.getIndex();ct.data=Y.vertices,gt.data=Y.uvs,It.data=Y.indices,ct.update(),gt.update(),It.update()}for(var E=0;E<o.length;E++)$M.push(o[E])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=Vu.available[this._fontName],i=n.distanceFieldRange,a=n.distanceFieldType,o=n.size;if(a!=="none")for(var s=this.worldTransform,c=s.a,l=s.b,u=s.c,f=s.d,h=Math.sqrt(c*c+l*l),p=Math.sqrt(u*u+f*f),d=(Math.abs(h)+Math.abs(p))/2,g=this._fontSize/o,_=0,v=this._activePagesMeshData;_<v.length;_++){var m=v[_];m.mesh.shader.uniforms.uFWidth=d*i*g*this._resolution}e.prototype._render.call(this,r)},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Vu.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),t.prototype.destroy=function(r){var n=this._textureCache;for(var i in n){var a=n[i];a.destroy(),delete n[i]}this._textureCache=null,e.prototype.destroy.call(this,r)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(ii),eV=function(){function e(){}return e.add=function(){Fr.setExtensionXhrType("fnt",Fr.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,r){var n=J7(t.data);if(!n){r();return}for(var i=e.getBaseUrl(this,t),a=n.parse(t.data),o={},s=function(g){o[g.metadata.pageFile]=g.texture,Object.keys(o).length===a.page.length&&(t.bitmapFont=Vu.install(a,o,!0),r())},c=0;c<a.page.length;++c){var l=a.page[c].file,u=i+l,f=!1;for(var h in this.resources){var p=this.resources[h];if(p.url===u){p.metadata.pageFile=l,p.texture?s(p):p.onAfterMiddleware.add(s),f=!0;break}}if(!f){var d={crossOrigin:t.crossOrigin,loadType:Fr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(u,d,s)}}},e.getBaseUrl=function(t,r){var n=r.isDataUrl?"":e.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),t.baseUrl&&n&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(t.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},e.dirname=function(t){var r=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===t?".":r===""?"/":r},e}();/*!
 * @pixi/filter-alpha - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var AC=function(e,t){return AC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},AC(e,t)};function sOe(e,t){AC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var lOe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,tV=function(e){sOe(t,e);function t(r){r===void 0&&(r=1);var n=e.call(this,p7,lOe,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/filter-blur - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var IC=function(e,t){return IC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},IC(e,t)};function rV(e,t){IC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var uOe=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function cOe(e,t){var r=Math.ceil(e/2),n=uOe,i="",a;t?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var s=a.replace("%index%",o.toString());s=s.replace("%sampleIndex%",o-(r-1)+".0"),i+=s,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}var fOe={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},hOe=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function dOe(e){for(var t=fOe[e],r=t.length,n=hOe,i="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,s=0;s<e;s++){var c=a.replace("%index%",s.toString());o=s,s>=r&&(o=e-s-1),c=c.replace("%value%",t[o].toString()),i+=c,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var GM;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(GM||(GM={}));var VM;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(VM||(VM={}));var HM;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(HM||(HM={}));var XM;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(XM||(XM={}));var zM;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(zM||(zM={}));var WM;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(WM||(WM={}));var YM;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(YM||(YM={}));var qM;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(qM||(qM={}));var KM;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(KM||(KM={}));var ZM;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(ZM||(ZM={}));var JM;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(JM||(JM={}));var QM;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(QM||(QM={}));var eD;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(eD||(eD={}));var o0;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(o0||(o0={}));var tD;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(tD||(tD={}));var rD;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(rD||(rD={}));var nD;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(nD||(nD={}));var iD;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(iD||(iD={}));var aD;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(aD||(aD={}));var s0=function(e){rV(t,e);function t(r,n,i,a,o){n===void 0&&(n=8),i===void 0&&(i=4),a===void 0&&(a=yt.FILTER_RESOLUTION),o===void 0&&(o=5);var s=this,c=cOe(o,r),l=dOe(o);return s=e.call(this,c,l)||this,s.horizontal=r,s.resolution=a,s._quality=0,s.quality=i,s.blur=n,s}return t.prototype.apply=function(r,n,i,a){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,i,a);else{var o=r.getFilterTexture(),s=r.renderer,c=n,l=o;this.state.blend=!1,r.applyFilter(this,c,l,o0.CLEAR);for(var u=1;u<this.passes-1;u++){r.bindAndClear(c,o0.BLIT),this.uniforms.uSampler=l;var f=l;l=c,c=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,l,i,a),r.returnFilterTexture(o)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),t}(Gt),pOe=function(e){rV(t,e);function t(r,n,i,a){r===void 0&&(r=8),n===void 0&&(n=4),i===void 0&&(i=yt.FILTER_RESOLUTION),a===void 0&&(a=5);var o=e.call(this)||this;return o.blurXFilter=new s0(!0,r,n,i,a),o.blurYFilter=new s0(!1,r,n,i,a),o.resolution=i,o.quality=n,o.blur=r,o.repeatEdgePixels=!1,o}return t.prototype.apply=function(r,n,i,a){var o=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(o&&s){var c=r.getFilterTexture();this.blurXFilter.apply(r,n,c,o0.CLEAR),this.blurYFilter.apply(r,c,i,a),r.returnFilterTexture(c)}else s?this.blurYFilter.apply(r,n,i,a):this.blurXFilter.apply(r,n,i,a)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/filter-color-matrix - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var RC=function(e,t){return RC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},RC(e,t)};function vOe(e,t){RC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var gOe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,PC=function(e){vOe(t,e);function t(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=e.call(this,YR,gOe,n)||this,r.alpha=1,r}return t.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},t.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},t.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.tint=function(r,n){var i=r>>16&255,a=r>>8&255,o=r&255,s=[i/255,0,0,0,0,0,a/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(s,n)},t.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),a=Math.sin(r),o=Math.sqrt,s=1/3,c=o(s),l=i+(1-i)*s,u=s*(1-i)-c*a,f=s*(1-i)+c*a,h=s*(1-i)+c*a,p=i+s*(1-i),d=s*(1-i)-c*a,g=s*(1-i)-c*a,_=s*(1-i)+c*a,v=i+s*(1-i),m=[l,u,f,0,0,h,p,d,0,0,g,_,v,0,0,0,0,0,1,0];this._loadMatrix(m,n)},t.prototype.contrast=function(r,n){var i=(r||0)+1,a=-.5*(i-1),o=[i,0,0,0,a,0,i,0,0,a,0,0,i,0,a,0,0,0,1,0];this._loadMatrix(o,n)},t.prototype.saturate=function(r,n){r===void 0&&(r=0);var i=r*2/3+1,a=(i-1)*-.5,o=[i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0];this._loadMatrix(o,n)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.colorTone=function(r,n,i,a,o){r=r||.2,n=n||.15,i=i||16770432,a=a||3375104;var s=(i>>16&255)/255,c=(i>>8&255)/255,l=(i&255)/255,u=(a>>16&255)/255,f=(a>>8&255)/255,h=(a&255)/255,p=[.3,.59,.11,0,0,s,c,l,r,0,u,f,h,n,0,s-u,c-f,l-h,0,0];this._loadMatrix(p,o)},t.prototype.night=function(r,n){r=r||.1;var i=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},t.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),t}(Gt);PC.prototype.grayscale=PC.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var OC=function(e,t){return OC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},OC(e,t)};function mOe(e,t){OC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _Oe=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,yOe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,xOe=function(e){mOe(t,e);function t(r,n){var i=this,a=new Qr;return r.renderable=!1,i=e.call(this,yOe,_Oe,{mapSampler:r._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=r,i.maskMatrix=a,n==null&&(n=20),i.scale=new cr(n,n),i}return t.prototype.apply=function(r,n,i,a){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,s=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);s!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/s,this.uniforms.rotation[1]=o.b/s,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/filter-fxaa - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var kC=function(e,t){return kC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},kC(e,t)};function bOe(e,t){kC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wOe=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,EOe=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,SOe=function(e){bOe(t,e);function t(){return e.call(this,wOe,EOe)||this}return t}(Gt);/*!
 * @pixi/filter-noise - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var FC=function(e,t){return FC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},FC(e,t)};function COe(e,t){FC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var TOe=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,AOe=function(e){COe(t,e);function t(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var i=e.call(this,YR,TOe,{uNoise:0,uSeed:0})||this;return i.noise=r,i.seed=n,i}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/mixin-cache-as-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oD;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(oD||(oD={}));var sD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(sD||(sD={}));var lD;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(lD||(lD={}));var uD;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(uD||(uD={}));var cD;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(cD||(cD={}));var fD;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(fD||(fD={}));var hD;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(hD||(hD={}));var dD;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(dD||(dD={}));var pD;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(pD||(pD={}));var vD;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(vD||(vD={}));var gD;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(gD||(gD={}));var mD;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(mD||(mD={}));var _D;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(_D||(_D={}));var yD;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(yD||(yD={}));var xD;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(xD||(xD={}));var bD;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(bD||(bD={}));var wD;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(wD||(wD={}));var NC;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(NC||(NC={}));var ED;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(ED||(ED={}));var nV=new Qr;An.prototype._cacheAsBitmap=!1;An.prototype._cacheData=null;An.prototype._cacheAsBitmapResolution=null;An.prototype._cacheAsBitmapMultisample=NC.NONE;var IOe=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return e}();Object.defineProperties(An.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(this._cacheData||(this._cacheData=new IOe),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});An.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};An.prototype._initCachedDisplayObject=function(t){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var a=this.filters[0].padding;i.pad(a)}i.ceil(yt.RESOLUTION);var o=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),c=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,u=nu.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:t.multisample}),f="cacheAsBitmap_"+ru();this._cacheData.textureCacheId=f,ur.addToCache(u.baseTexture,f),Ot.addToCache(u,f);var h=this.transform.localTransform.copyTo(nV).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(o,s,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var p=new pa(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-(i.x/i.width),p.anchor.y=-(i.y/i.height),p.alpha=n,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}};An.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};An.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=t.context,a=t._projTransform;r.ceil(yt.RESOLUTION);var o=nu.create({width:r.width,height:r.height}),s="cacheAsBitmap_"+ru();this._cacheData.textureCacheId=s,ur.addToCache(o.baseTexture,s),Ot.addToCache(o,s);var c=nV;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=r.x,c.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:c,skipUpdateTransform:!1}),t.context=i,t._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new pa(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(r.x/r.width),l.anchor.y=-(r.y/r.height),l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};An.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};An.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};An.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ur.removeFromCache(this._cacheData.textureCacheId),Ot.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};An.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */An.prototype.name=null;ii.prototype.getChildByName=function(t,r){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(var n=0,i=this.children.length;n<i;n++){var a=this.children[n];if(a.getChildByName){var o=this.children[n].getChildByName(t,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */An.prototype.getGlobalPosition=function(t,r){return t===void 0&&(t=new cr),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/mesh-extras - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var LC=function(e,t){return LC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},LC(e,t)};function $h(e,t){LC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var iV=function(e){$h(t,e);function t(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=100),i===void 0&&(i=10),a===void 0&&(a=10);var o=e.call(this)||this;return o.segWidth=i,o.segHeight=a,o.width=r,o.height=n,o.build(),o}return t.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],a=[],o=this.segWidth-1,s=this.segHeight-1,c=this.width/o,l=this.height/s,u=0;u<r;u++){var f=u%this.segWidth,h=u/this.segWidth|0;n.push(f*c,h*l),i.push(f/o,h/s)}for(var p=o*s,u=0;u<p;u++){var d=u%o,g=u/o|0,_=g*this.segWidth+d,v=g*this.segWidth+d+1,m=(g+1)*this.segWidth+d,y=(g+1)*this.segWidth+d+1;a.push(_,v,m,v,y,m)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(X0),aV=function(e){$h(t,e);function t(r,n,i){r===void 0&&(r=200),i===void 0&&(i=0);var a=e.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return a.points=n,a._width=r,a.textureScale=i,a.build(),a}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var r=this.points;if(r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),i.data=new Float32Array(r.length*4),a.data=new Uint16Array((r.length-1)*6));var o=i.data,s=a.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var c=0,l=r[0],u=this._width*this.textureScale,f=r.length,h=0;h<f;h++){var p=h*4;if(this.textureScale>0){var d=l.x-r[h].x,g=l.y-r[h].y,_=Math.sqrt(d*d+g*g);l=r[h],c+=_/u}else c=h/(f-1);o[p]=c,o[p+1]=0,o[p+2]=c,o[p+3]=1}for(var v=0,h=0;h<f-1;h++){var p=h*2;s[v++]=p,s[v++]=p+1,s[v++]=p+2,s[v++]=p+2,s[v++]=p+1,s[v++]=p+3}i.update(),a.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],i,a=0,o=0,s=this.buffers[0].data,c=r.length,l=0;l<c;l++){var u=r[l],f=l*4;l<r.length-1?i=r[l+1]:i=u,o=-(i.x-n.x),a=i.y-n.y;var h=Math.sqrt(a*a+o*o),p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=h,o/=h,a*=p,o*=p,s[f]=u.x+a,s[f+1]=u.y+o,s[f+2]=u.x-a,s[f+3]=u.y-o,n=u}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(X0),ROe=function(e){$h(t,e);function t(r,n,i){i===void 0&&(i=0);var a=this,o=new aV(r.height,n,i),s=new ch(r);return i>0&&(r.baseTexture.wrapMode=as.REPEAT),a=e.call(this,o,s)||this,a.autoUpdate=!0,a}return t.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,r)},t}(uh),oV=function(e){$h(t,e);function t(r,n,i){var a=this,o=new iV(r.width,r.height,n,i),s=new ch(Ot.WHITE);return a=e.call(this,o,s)||this,a.texture=r,a.autoResize=!0,a}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,i=n.width,a=n.height;this.autoResize&&(r.width!==i||r.height!==a)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,r)},t.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,r)},t}(uh),sV=function(e){$h(t,e);function t(r,n,i,a,o){r===void 0&&(r=Ot.EMPTY);var s=this,c=new X0(n,i,a);c.getBuffer("aVertexPosition").static=!1;var l=new ch(r);return s=e.call(this,c,l,null,o)||this,s.autoUpdate=!0,s}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,r)},t}(uh),Ig=10,POe=function(e){$h(t,e);function t(r,n,i,a,o){n===void 0&&(n=Ig),i===void 0&&(i=Ig),a===void 0&&(a=Ig),o===void 0&&(o=Ig);var s=e.call(this,Ot.WHITE,4,4)||this;return s._origWidth=r.orig.width,s._origHeight=r.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=a,s._topHeight=i,s._bottomHeight=o,s.texture=r,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},t.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},t.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,a=this._height>i?1:this._height/i,o=Math.min(n,a);return o},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,a=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=a*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(oV);/*!
 * @pixi/sprite-animated - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var BC=function(e,t){return BC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},BC(e,t)};function OOe(e,t){BC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var MC=function(e){OOe(t,e);function t(r,n){n===void 0&&(n=!0);var i=e.call(this,r[0]instanceof Ot?r[0]:r[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=r,i}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(_n.shared.add(this.update,this,Po.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(r){if(this._playing){var n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=n/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(r){this.stop(),e.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(Ot.from(r[i]));return new t(n)},t.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(Ot.from(r[i]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Ot)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(_n.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(pa);/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Qs.registerPlugin("accessibility",jG);Qs.registerPlugin("extract",w7);Qs.registerPlugin("interaction",HG);Qs.registerPlugin("particle",L7);Qs.registerPlugin("prepare",z7);Qs.registerPlugin("batch",_7);Qs.registerPlugin("tilingSprite",K7);ya.registerPlugin(eV);ya.registerPlugin(I7);ya.registerPlugin(P7);ya.registerPlugin(F7);ya.registerPlugin(Y7);H0.registerPlugin($G);H0.registerPlugin(S7);var kOe="6.4.2",lV={AlphaFilter:tV,BlurFilter:pOe,BlurFilterPass:s0,ColorMatrixFilter:PC,DisplacementFilter:xOe,FXAAFilter:SOe,NoiseFilter:AOe};const FOe=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return na},AbstractBatchRenderer:v7,AbstractMultiResource:tx,AbstractRenderer:h7,AccessibilityManager:jG,AnimatedSprite:MC,AppLoaderPlugin:S7,Application:H0,ArrayResource:TR,Attribute:nC,get BLEND_MODES(){return ut},get BUFFER_BITS(){return qp},get BUFFER_TYPE(){return Ro},BaseImageResource:us,BasePrepare:H7,BaseRenderTexture:OR,BaseTexture:ur,BatchDrawCall:u_,BatchGeometry:qR,BatchPluginFactory:m7,BatchRenderer:_7,BatchShaderGenerator:g7,BatchSystem:LR,BatchTextureArray:c_,BitmapFont:Vu,BitmapFontData:a0,BitmapFontLoader:eV,BitmapText:oOe,BlobResource:A7,Bounds:ah,Buffer:Xn,BufferResource:cu,get CLEAR_MODES(){return Ls},CanvasResource:rx,Circle:LG,CompressedTextureLoader:I7,CompressedTextureResource:f_,Container:ii,ContextSystem:BR,CountLimiter:V7,CubeResource:AR,DDSLoader:P7,DEG_TO_RAD:qs,get DRAW_MODES(){return Pa},DisplayObject:An,get ENV(){return ls},Ellipse:BG,Extract:w7,get FORMATS(){return it},FORMATS_TO_COMPONENTS:O7,FillStyle:JR,Filter:Gt,FilterState:YG,FilterSystem:NR,Framebuffer:l_,FramebufferSystem:MR,get GC_MODES(){return s_},GLFramebuffer:qG,GLProgram:u7,GLTexture:om,GRAPHICS_CURVES:oh,Geometry:Uh,GeometrySystem:DR,Graphics:sh,GraphicsData:yC,GraphicsGeometry:$7,IGLUniformData:mRe,INSTALLED:e0,get INTERNAL_FORMATS(){return Zt},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:n0,ImageBitmapResource:PR,ImageResource:nx,InteractionData:Q2,InteractionEvent:GG,InteractionManager:HG,InteractionTrackingData:am,KTXLoader:F7,get LINE_CAP(){return $s},get LINE_JOIN(){return js},LineStyle:G7,Loader:ya,get LoaderResource(){return Fr},get MASK_TYPES(){return Si},get MIPMAP_MODES(){return _a},get MSAA_QUALITY(){return Mn},MaskData:KG,MaskSystem:UR,Matrix:Qr,Mesh:uh,MeshBatchUvs:Z7,MeshGeometry:X0,MeshMaterial:ch,NineSlicePlane:POe,ObjectRenderer:V0,ObservablePoint:Pl,PI_2:Qp,get PRECISION(){return So},ParticleContainer:_Pe,ParticleRenderer:L7,PlaneGeometry:iV,Point:cr,Polygon:Xf,Prepare:z7,Program:jh,ProjectionSystem:GR,Quad:WG,QuadUv:FR,RAD_TO_DEG:ER,get RENDERER_TYPE(){return ih},Rectangle:Qt,RenderTexture:nu,RenderTexturePool:zG,RenderTextureSystem:VR,Renderer:Qs,Resource:mc,RopeGeometry:aV,RoundedRectangle:MG,Runner:Ti,get SAMPLER_TYPES(){return Kp},get SCALE_MODES(){return vi},get SHAPES(){return ln},SVGResource:IR,ScissorSystem:jR,Shader:Xs,ShaderSystem:HR,SimpleMesh:sV,SimplePlane:oV,SimpleRope:ROe,Sprite:pa,SpriteMaskFilter:n7,Spritesheet:W7,SpritesheetLoader:Y7,State:fu,StateSystem:XR,StencilSystem:$R,System:FRe,get TARGETS(){return Vl},get TEXT_GRADIENT(){return lh},get TYPES(){return Tt},TYPES_TO_BYTES_PER_COMPONENT:dC,TYPES_TO_BYTES_PER_PIXEL:k7,TemporaryDisplayObject:CR,Text:tP,TextMetrics:Fo,TextStyle:_c,Texture:Ot,TextureGCSystem:zR,TextureLoader:C7,TextureMatrix:ix,TextureSystem:WR,TextureUvs:kR,Ticker:_n,TickerPlugin:$G,TilingSprite:VPe,TilingSpriteRenderer:K7,TimeLimiter:GPe,Transform:G0,get UPDATE_PRIORITY(){return Po},UniformGroup:Hl,VERSION:kOe,VideoResource:RR,ViewableBuffer:t0,get WRAP_MODES(){return as},accessibleTarget:UG,autoDetectRenderer:d7,autoDetectResource:ex,checkMaxIfStatementsInShader:r7,createUBOElements:o7,defaultFilterVertex:YR,defaultVertex:p7,filters:lV,generateProgram:c7,generateUniformBufferSync:l7,getTestContext:QG,getUBOData:s7,graphicsUtils:CPe,groupD8:on,interactiveTarget:VG,isMobile:Ja,resources:y7,settings:yt,systems:x7,uniformParsers:oc,utils:kIe},Symbol.toStringTag,{value:"Module"}));let Rg;const NOe=new Uint8Array(16);function LOe(){if(!Rg&&(Rg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Rg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Rg(NOe)}const Ei=[];for(let e=0;e<256;++e)Ei.push((e+256).toString(16).slice(1));function BOe(e,t=0){return Ei[e[t+0]]+Ei[e[t+1]]+Ei[e[t+2]]+Ei[e[t+3]]+"-"+Ei[e[t+4]]+Ei[e[t+5]]+"-"+Ei[e[t+6]]+Ei[e[t+7]]+"-"+Ei[e[t+8]]+Ei[e[t+9]]+"-"+Ei[e[t+10]]+Ei[e[t+11]]+Ei[e[t+12]]+Ei[e[t+13]]+Ei[e[t+14]]+Ei[e[t+15]]}const MOe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),SD={randomUUID:MOe};function uf(e,t,r){if(SD.randomUUID&&!t&&!e)return SD.randomUUID();e=e||{};const n=e.random||(e.rng||LOe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return BOe(n)}function z0(e){const t=document.getElementById("ebg");t&&(t.style.backgroundImage=`url("${e}")`)}const nP=()=>{const t=[...le.getState().stage.PerformList];le.dispatch(Cue()),t.forEach(r=>{gy(r.script)})},DOe=async(e,t=!0)=>{is();const r=le.dispatch,n=$.backlogManager.getBacklog()[e];qe.debug("backlog",n),Wy(),$.resetAnimationManager(),r(dc(K_)),$.gameplay.resetPixiStage(),window.pubsub.publish("loading",{loading:!0}),await eo(500),t&&aa(n.saveScene.sceneUrl).then(async a=>{const o=await $.sceneManager.setCurrentScene(a,n.saveScene.sceneName,n.saveScene.sceneUrl);if(window.pubsub.publish("loading",{loading:!1}),o){const s=$.sceneManager.sceneData.currentScene.subSceneList;$.sceneManager.settledScenes.push($.sceneManager.sceneData.currentScene.sceneUrl);const c=L0(s);Bh(c)}}),$.sceneManager.sceneData.currentSentenceId=n.saveScene.currentSentenceId,$.sceneManager.sceneData.sceneStack=cn(n.saveScene.sceneStack);for(let a=$.backlogManager.getBacklog().length-1;a>e;a--)$.backlogManager.getBacklog().pop();$.backlogManager.isSaveBacklogNext=!0;const i=cn(n.currentStageState);r(dc(i)),setTimeout(nP,0),setTimeout(()=>{r(vt({component:"showBacklog",visibility:!1})),r(vt({component:"showTextBox",visibility:!0}))},32)},UOe=(e,t=!1)=>{const n=le.getState().saveData.saveData[e];qe.debug("",n),iP(n,t)};async function iP(e,t=!1){var o,s;if(!e){(o=window==null?void 0:window.pubsub)==null||o.publish("loading",{loading:!1}),qe.info("");return}const r=e;is(),Wy(),$.resetAnimationManager(),le.dispatch(dc(K_)),$.gameplay.resetPixiStage(),window.pubsub.publish("loading",{loading:!0}),await eo(500);try{const c=await aa(r.sceneData.sceneUrl);if(!await $.sceneManager.setCurrentScene(c,r.sceneData.sceneName,r.sceneData.sceneUrl,!0))return;const u=$.sceneManager.sceneData.currentScene.subSceneList;$.sceneManager.settledScenes.push($.sceneManager.sceneData.currentScene.sceneUrl);const f=L0(u);Bh(f)}catch(c){(s=window==null?void 0:window.pubsub)==null||s.publish("loading",{loading:!1}),qe.error("",c);return}$.sceneManager.sceneData.currentSentenceId=r.sceneData.currentSentenceId,$.sceneManager.sceneData.sceneStack=cn(r.sceneData.sceneStack);const n=r.backlog;$.backlogManager.getBacklog().splice(0,$.backlogManager.getBacklog().length);for(const c of n)$.backlogManager.getBacklog().push(c);const i=cn(r.nowStageState),a=le.dispatch;a(dc(i)),t?(a(or.setLoadVideo(!0)),r.nowStageState.PerformList.forEach(c=>{gy(c.script)})):setTimeout(nP,0),a(vt({component:"showTitle",visibility:!1})),a(vt({component:"showMenuPanel",visibility:!1})),a(vt({component:"showExtra",visibility:!1})),z0(le.getState().stage.bgName)}function jOe(){`${$.gameName}${$.gameKey}`,`${$.gameName}${$.gameKey}`}async function uV(){const e=$.sceneManager.sceneData.currentScene.sceneName;if(!Object.values(Z9).includes(e)){const t=await H9(-1,!1),r=cn(t);le.dispatch(or.setFastSave(r)),await ame()}}async function $Oe(){return await fme(),le.getState().saveData.quickSaveData!==null}async function GOe(){await ome();const e=le.getState().saveData.quickSaveData;e&&iP(e)}const VOe=["r18-warning.png","loading-bar-bg.png","save-load-item-bg.png","check.png","bgm-unselect.png","affinity.png","autoplay-unselect.png","modal-confirm.png","fast-forward-unselect.png","rechargeHeadNor.webp","loading-bar.png","base-set-line.png","history-bg.webp","set-title.png","menu-icon-active.png","choose-item-active.png","game-menu-button-bg.png","cg-choose.png","loading-enter.webp","rechargeCardNor.webp","r18-exit-btn-active.png","setting-bg.webp","r18-exit-btn-default.png","gallery-title.png","r18-confirm-btn-active.png","bgm-locked-bg.png","dialog-bg.png","click0.png","modal-cancel.png","click1.png","rechargeBtnNor.webp","review-title.png","rechargeCardNew.webp","save-load-bg.webp","cg-unselect.png","modal-close.png","click3.png","sound-choose.png","review-line.png","chapter.png","click2.png","bar-bg.png","cg-lock.png","cg-bottom-left.png","click6.png","click7.png","voice-set.png","checked.png","point-default.png","click5.png","set-decoration.png","click4.png","rechargeCardBottom.webp","bar-checked.png","click9.png","gallery-bg.webp","click8.png","xingshiIcon.webp","modal-title.png","save-title.png","base-set.png","flashback-unselect.png","back-r.png","choose-item-default.png","logo.png","achievement.png","modal-close-2.png","rechargeCardIcon.webp","menu-button-active.png","confirm-recharge.png","bar-thumb.png","load-title.png","affinity-click.png","menu-icon.png","rechargeCardDiscount.webp","confirm-buy.png","cg-bottom-right.png","rechargeHeadNel.webp","progress-bar-bg.png","game-menu-button-bg-active.png","save-load-item-unlock-bg.png","cg-bottom-right-select.png","point-active.png","dialogue-default.png","avatar-dialogue.png","buy-game-success.png","text-dialog-bg.png","rechargeBtnNel.webp","save-load-item-selected-bg.png","bgm-choose.png","chapter-click.png","bgm-unlock-bg.png","flashback.png","menu-bg.png","cg-unLock.png","fast-forward.png","sound-icon.png","back.png","progress-bar.png","achievement-click.png","r18-confirm-btn-default.png","menu-button-default.png","cg-bottom-left-select.png","autoplay.png"];Yg.slider,Yg.sliderBg,Yg.sliderThumb;const If=new Map([["true",!0],["false",!1],[!0,!0],[!1,!1]]);let h_=[];const HOe=e=>{const t=le.getState().GUI,r=le.dispatch;h_=[],Ql.get(e).then(n=>{var o;let i=n.data;const a=Yy.parseConfig(i);if(qe.info("",a),console.log("UI"),h2(VOe.map(s=>({name:s,type:Et.ui,url:"./assets/"+s,lineNumber:0})),"__default-ui__.txt"),t){const s={...t.gameUIConfigs},c={};let l=!1;const u={};let f=!1;a.forEach(h=>{const{command:p,args:d,options:g}=h;switch(p){case"Title_img":{const _=At(d.join(""),Et.background);r(ZS({asset:"titleBg",value:_})),z0(_);break}case"Game_Logo":{const _=d.map(v=>At(v,Et.background));r(Rue(_));break}case"Game_cursor":{let _="{}",v="{}";g.forEach(b=>{b.key==="normal"?_=b.value:b.key==="active"&&(v=b.value)});const m=JSON.parse(_),y=JSON.parse(v);K$()||(OL(m,"normal"),OL(y,"active"));break}case"Title_bgm":{const _=At(d[0],Et.bgm);r(ZS({asset:"titleBgm",value:_}));break}case"Game_name":{$.gameName=d[0],document.title=d[0];break}case"Game_key":{$.gameKey=d[0];const _=window.pubsub.subscribe("gameInfoReady",v=>{v&&(H$(),ime(0,0),_())});break}case"Game_id":{$.gameId=isNaN(Number(d[0]))?0:Number(d[0]);break}case"Game_r18":{(d==null?void 0:d.length)>0&&r(fj(!!If.get(d[0])));break}case"Game_sound":{if((g==null?void 0:g.length)>0){const _=CD(g);r(or.setSaveStatus({key:"gameScounds",value:_}))}break}case"Menu_sound":{if((g==null?void 0:g.length)>0){const _=CD(g);r(or.setSaveStatus({key:"menuScounds",value:_}))}break}case"Game_Icon":{if(d[0]){const _=At(d[0],Et.background),v=document.getElementById("dynamic-favicon");v&&(v.href=_+`?t=${new Date().getTime()}`)}break}case"Game_Js_Link":{$.gameJsLink=d[0];break}case"Game_Css_Link":{$.gameCssLink=d[0];break}case"Is_FinishTrial":{$.isFinishTrial=d[0];break}case Lu.Esc_continueGame_button:case Lu.Esc_backToLevel_button:case Lu.Esc_setting_button:case Lu.Esc_exitGame_button:{if(!(g!=null&&g.length))break;let _="",v=!1;const m={},y=["x","y","scale","fontSize"];g==null||g.forEach(w=>{var E,C;typeof(w==null?void 0:w.value)=="string"&&((C=(E=w.value)==null?void 0:E.split(","))==null||C.forEach(T=>{const[A,I]=(T==null?void 0:T.split("="))||[];A==="name"?_=I:A==="hide"?v=(If==null?void 0:If.get(I))??!1:m[A]=y.includes(A)?Number(I):I}))});const b={...Hm.escMenus[Lu[p]].args.style};c[Lu[p]]={content:_,args:{hide:v,style:{...b,...m}}},l=!0;break}case Bu.Achievement_progress_bg:case Bu.Achievement_progress_text:case Bu.Achievement_notUnlock:case Bu.Achievement_progress:{u[Bu[p]]=XOe(Bu[p],d,g),f=!0;break}}if((Bi[p]||$p[p])&&p!==$p.Title_bgm){const _=mn.title;Os(s,_,h)}else if(cI[p]||ey[p]){const _=mn.load;Os(s,_,h)}else if(fI[p]||_I[p]){const _=mn.storyline;Os(s,_,h)}else if(hI[p]||mI[p]){const _=mn.achievement;Os(s,_,h)}else if(J_[p]||Q_[p]){const _=mn.option;Os(s,_,h)}else if(dI[p]||Z_[p]){const _=mn.extra;Os(s,_,h)}else if(gI[p]||an[p]){const _=mn.collection;Os(s,_,h)}else if(pI[p]||Up[p]){const _=mn.progressAndAchievement;Os(s,_,h)}else if(vI[p]||jp[p]){const _=mn.affinity;Os(s,_,h)}}),r(Pue(s)),l&&r(Oue(c)),f&&r(kue(u))}(o=window==null?void 0:window.renderPromise)==null||o.call(window),console.log("UI"),h2(h_,"__custom-ui__.txt"),window.pubsub.publish("gameReady"),delete window.renderPromise,jOe()})};function Os(e,t,r){const n=(i,a="")=>{const o=l=>{let u={};const f=/\{(.*?)\}/,h=l.match(f);if(h){const d=h[1].split(","),g={};d.forEach(_=>{const[v,m]=_.split("=");v&&m&&(g[v.trim()]=isNaN(Number(m.trim()))?m.trim():Number(m.trim()))}),u=g}return u},s={hide:!1,style:{}},c=["hoverStyle","info","images","btnSound","videos","buttonLink","activeStyle"];return i.forEach(l=>{if(l.key==="hide")s.hide=l.value===!0;else if(l.key.toLowerCase().endsWith("style")){const u=o(l.value);l.key==="style"&&a?(u.image=a,h_.push({name:u.image,type:Et.background,url:At(u.image,Et.background),lineNumber:0})):u.image&&h_.push({name:u.image,type:Et.ui,url:At(u.image,Et.ui),lineNumber:0}),s[l.key]=u}else if(c.includes(l.key)){const u=o(l.value);s[l.key]=u}}),s};if(xb[t]){if(e[t]={...e[t]},r.options=r.options??[],r.options.some(a=>a.key==="style")||r.options.push({key:"style",value:"{}"}),xb[t].buttons[r.command])e[t].buttons={...e[t].buttons},e[t].buttons[r.command]={key:r.command,content:r.args[0]??"",args:n(r.options??[])};else if(xb[t].other[r.command]){let a=!1;Iue[r.command]&&(a=!0),e[t].other={...e[t].other},e[t].other[r.command]={key:r.command,content:a?"":r.args[0]??"",args:n(r.options??[],r.args[0])}}}return e}function XOe(e,t,r){var l,u,f;const n=((l=r.find(h=>h.key==="hide"))==null?void 0:l.value)||!1,i=((u=r.find(h=>h.key==="style"))==null?void 0:u.value)||"",a=((f=r.find(h=>h.key==="hoverStyle"))==null?void 0:f.value)||"";let o={...Hm.achievementUI[e].args.style},s={...Hm.achievementUI[e].args.hoverStyle};o=c(i),s=c(a);function c(h){const p=/\{(.*?)\}/,d=h.match(p);if(d){const _=d[1].split(","),v={};return _.forEach(m=>{const[y,b]=m.split("=");y&&b&&(v[y.trim()]=isNaN(Number(b.trim()))?b.trim():Number(b.trim()))}),v}}return{content:t!=null&&t.length?t[0]:"",args:{hide:n,style:o,hoverStyle:s}}}function CD(e){const t={};return e.forEach(r=>{var n;if(typeof r.value=="string"){const i=((n=r.value)==null?void 0:n.split(","))??[];t[r.key]=i!=null&&i.length?!!If.get(i[0])||At(i[1],Et.bgm):!1}else t[r.key]=typeof r.value=="boolean"?!!If.get(r.value):!1}),t}const zOe=(e,t)=>{qe.warn(""+e+":"+t);const r=le.dispatch;r(vt({component:"showTitle",visibility:!1})),r(vt({component:"showMenuPanel",visibility:!1})),r(vt({component:"isShowLogo",visibility:!1}));const n=document.getElementById("Title_enter_page");n&&(n.style.display="none"),fO(!0);const i=At(e,Et.scene);setTimeout(()=>{aa(i).then(async a=>{if(!await $.sceneManager.setCurrentScene(a,"start.txt",i))return;const s=$.sceneManager.sceneData.currentScene.sceneName;$.gameplay.isFast=!0,$.gameplay.isSyncingWithOrigine=!0,aP(t,s)})},16)};function aP(e,t){$.sceneManager.sceneData.currentSentenceId<e&&$.sceneManager.sceneData.currentScene.sceneName===t?(jn(),setTimeout(()=>aP(e,t),100)):($.gameplay.isSyncingWithOrigine=!1,$.gameplay.isFast=!1)}const WOe=()=>{window.JMP=aP};var Jd=(e=>(e[e.JUMP=0]="JUMP",e[e.SYNCFC=1]="SYNCFC",e[e.SYNCFE=2]="SYNCFE",e[e.EXE_COMMAND=3]="EXE_COMMAND",e[e.REFETCH_TEMPLATE_FILES=4]="REFETCH_TEMPLATE_FILES",e))(Jd||{});const YOe=()=>{const e=window.location.hostname,t=window.location.protocol,r=window.location.port;let n="";if(r&&r!=="80"&&r!=="443"&&(n=`:${r}`),t!=="http:"&&t!=="https:")return;let i=`ws://${e}:9999`;t==="https:"&&(i=`wss://${e}${n}/api/webgalsync`),qe.info("socket"+i);const a=new WebSocket(i);a.onopen=()=>{qe.info("socket"),window.pubsub.publish("isPreviewMode",!0);function o(){const s={event:"message",data:{command:Jd.SYNCFC,sceneMsg:{scene:$.sceneManager.sceneData.currentScene.sceneName,sentence:$.sceneManager.sceneData.currentSentenceId},stageSyncMsg:le.getState().stage,message:"sync"}};a.send(JSON.stringify(s)),setTimeout(o,1e3)}o()},a.onmessage=o=>{try{const s=o.data,l=JSON.parse(s).data;if(l.command===Jd.JUMP&&zOe(l.sceneMsg.scene,l.sceneMsg.sentence),l.command===Jd.EXE_COMMAND){const u=l.message,h=Yy.parse(u,"temp.txt","temp.txt").sentenceList[0];gy(h)}if(l.command===Jd.REFETCH_TEMPLATE_FILES){const u=document.getElementById("Title_enter_page");u&&(u.style.display="none"),$.events.styleUpdate.emit()}}catch(s){console.warn(s)}},a.onerror=o=>{window.pubsub.publish("isPreviewMode",!1),qe.info(" Terre ")}},qOe={version:"IdolTime 1.0.0"},KOe=navigator.userAgent,oP=!!KOe.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),ZOe=()=>{qe.info(qOe.version),qe.info("Made with  by IdolTime"),oP&&alert(`iOS 
| iOS `),QOe("./game/userStyleSheet.css"),eke(),HOe("./game/config.txt");const e=At("start.txt",Et.scene);aa(e).then(async t=>{const r=await $.sceneManager.setCurrentScene(t,"start.txt",e);if(!r)return;const n=$.sceneManager.sceneData.currentScene.subSceneList;$.sceneManager.settledScenes.push(e);const i=L0(n);Bh(i);const a=(r==null?void 0:r.sentenceList)??[],o=a==null?void 0:a.filter(s=>(s==null?void 0:s.commandRaw)==="unlockAchieve");le.dispatch(or.setUnlockAchieveAllTotal((o==null?void 0:o.length)??0))}),WOe(),YOe()},JOe=()=>{if(K$()){const e=document.createElement("script");e.src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js",e.onload=()=>{const t=window.VConsole;new t,console.log("vConsole has been initialized on mobile!")},document.head.appendChild(e)}};function QOe(e){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function eke(){Ql.get("./game/animation/animationTable.json").then(e=>{const t=e.data;for(const r of t)Ql.get(`./game/animation/${r}.json`).then(n=>{if(n.data){const i={name:r,effects:n.data};$.animationManager.addAnimation(i)}})})}function tke(){var e;(e=document.getElementById("root"))==null||e.addEventListener("click",function(t){t.target;const r=document.body,n=document.createElement("div");n.classList.add("click-frame");const{clientX:i,clientY:a}=t;n.style.left=`${i-36}px`,n.style.top=`${a-36.25}px`,r==null||r.appendChild(n);let o=0;const s=()=>{o>9?setTimeout(()=>{r==null||r.removeChild(n)},0):(n.style.backgroundImage=`url('./assets/click${o}.png')`,o++,setTimeout(s,35))};setTimeout(s,35)})}/*!
 * @pixi/filter-old-film - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var DC=function(e,t){return DC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},DC(e,t)};function rke(e,t){DC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var nke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ike=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,ake=function(e){rke(t,e);function t(r,n){n===void 0&&(n=0);var i=e.call(this,nke,ike)||this;return i.seed=0,i.uniforms.dimensions=new Float32Array(2),typeof r=="number"?(i.seed=r,r=void 0):i.seed=n,Object.assign(i,t.defaults,r),i}return t.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.seed=this.seed,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(r){this.uniforms.sepia=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(r){this.uniforms.scratch=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(r){this.uniforms.scratchDensity=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(r){this.uniforms.scratchWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),t.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},t}(Gt);/*!
 * @pixi/filter-dot - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UC=function(e,t){return UC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},UC(e,t)};function oke(e,t){UC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ske=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,lke=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,uke=function(e){oke(t,e);function t(r,n){r===void 0&&(r=1),n===void 0&&(n=5);var i=e.call(this,ske,lke)||this;return i.scale=r,i.angle=n,i}return Object.defineProperty(t.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(r){this.uniforms.scale=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/filter-reflection - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jC=function(e,t){return jC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},jC(e,t)};function cke(e,t){jC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,hke=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,dke=function(e){cke(t,e);function t(r){var n=e.call(this,fke,hke)||this;return n.time=0,n.uniforms.amplitude=new Float32Array(2),n.uniforms.waveLength=new Float32Array(2),n.uniforms.alpha=new Float32Array(2),n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(r){this.uniforms.mirror=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(r){this.uniforms.boundary=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude[0]=r[0],this.uniforms.amplitude[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(r){this.uniforms.waveLength[0]=r[0],this.uniforms.waveLength[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha[0]=r[0],this.uniforms.alpha[1]=r[1]},enumerable:!1,configurable:!0}),t.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},t}(Gt);/*!
 * @pixi/filter-glitch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $C=function(e,t){return $C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},$C(e,t)};function pke(e,t){$C(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,gke=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,mke=function(e){pke(t,e);function t(r){var n=e.call(this,vke,gke)||this;return n.offset=100,n.fillMode=t.TRANSPARENT,n.average=!1,n.seed=0,n.minSize=8,n.sampleSize=512,n._slices=0,n._offsets=new Float32Array(1),n._sizes=new Float32Array(1),n._direction=-1,n.uniforms.dimensions=new Float32Array(2),n._canvas=document.createElement("canvas"),n._canvas.width=4,n._canvas.height=n.sampleSize,n.texture=Ot.from(n._canvas,{scaleMode:vi.NEAREST}),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.aspect=c/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,r.applyFilter(this,n,i,a)},t.prototype._randomizeSizes=function(){var r=this._sizes,n=this._slices-1,i=this.sampleSize,a=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var o=this._slices,s=1,c=0;c<n;c++){var l=s/(o-c),u=Math.max(l*(1-Math.random()*.6),a);r[c]=u,s-=u}r[n]=s}else{for(var s=1,f=Math.sqrt(1/this._slices),c=0;c<n;c++){var u=Math.max(f*s*Math.random(),a);r[c]=u,s-=u}r[n]=s}this.shuffle()},t.prototype.shuffle=function(){for(var r=this._sizes,n=this._slices-1,i=n;i>0;i--){var a=Math.random()*i>>0,o=r[i];r[i]=r[a],r[a]=o}},t.prototype._randomizeOffsets=function(){for(var r=0;r<this._slices;r++)this._offsets[r]=Math.random()*(Math.random()<.5?-1:1)},t.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},t.prototype.redraw=function(){var r=this.sampleSize,n=this.texture,i=this._canvas.getContext("2d");i.clearRect(0,0,8,r);for(var a,o=0,s=0;s<this._slices;s++){a=Math.floor(this._offsets[s]*256);var c=this._sizes[s]*r,l=a>0?a:0,u=a<0?-a:0;i.fillStyle="rgba("+l+", "+u+", 0, 1)",i.fillRect(0,o>>0,r,c+1>>0),o+=c}n.baseTexture.update(),this.uniforms.displacementMap=n},Object.defineProperty(t.prototype,"sizes",{get:function(){return this._sizes},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._sizes[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._offsets},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._offsets[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slices",{get:function(){return this._slices},set:function(r){this._slices!==r&&(this._slices=r,this.uniforms.slices=r,this._sizes=this.uniforms.slicesWidth=new Float32Array(r),this._offsets=this.uniforms.slicesOffset=new Float32Array(r),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(r){if(this._direction!==r){this._direction=r;var n=r*qs;this.uniforms.sinDir=Math.sin(n),this.uniforms.cosDir=Math.cos(n)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var r;(r=this.texture)===null||r===void 0||r.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},t.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},t.TRANSPARENT=0,t.ORIGINAL=1,t.LOOP=2,t.CLAMP=3,t.MIRROR=4,t}(Gt);/*!
 * @pixi/filter-rgb-split - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var GC=function(e,t){return GC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},GC(e,t)};function _ke(e,t){GC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xke=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,bke=function(e){_ke(t,e);function t(r,n,i){r===void 0&&(r=[-10,0]),n===void 0&&(n=[0,10]),i===void 0&&(i=[0,0]);var a=e.call(this,yke,xke)||this;return a.red=r,a.green=n,a.blue=i,a}return Object.defineProperty(t.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/filter-godray - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var VC=function(e,t){return VC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},VC(e,t)};function wke(e,t){VC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Eke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Ske=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,Cke=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`,Tke=function(e){wke(t,e);function t(r){var n=e.call(this,Eke,Cke.replace("${perlin}",Ske))||this;n.parallel=!0,n.time=0,n._angle=0,n.uniforms.dimensions=new Float32Array(2);var i=Object.assign(t.defaults,r);return n._angleLight=new cr,n.angle=i.angle,n.gain=i.gain,n.lacunarity=i.lacunarity,n.alpha=i.alpha,n.parallel=i.parallel,n.center=i.center,n.time=i.time,n}return t.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.aspect=c/s,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r;var n=r*qs;this._angleLight.x=Math.cos(n),this._angleLight.y=Math.sin(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(r){this.uniforms.gain=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(r){this.uniforms.lacunarity=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha=r},enumerable:!1,configurable:!0}),t.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},t}(Gt);/*!
 * @pixi/filter-adjustment - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var HC=function(e,t){return HC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},HC(e,t)};function Ake(e,t){HC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ike=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Rke=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`;(function(e){Ake(t,e);function t(r){var n=e.call(this,Ike,Rke)||this;return n.gamma=1,n.saturation=1,n.contrast=1,n.brightness=1,n.red=1,n.green=1,n.blue=1,n.alpha=1,Object.assign(n,r),n}return t.prototype.apply=function(r,n,i,a){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,a)},t})(Gt);/*!
 * @pixi/filter-kawase-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XC=function(e,t){return XC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},XC(e,t)};function Pke(e,t){XC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Oke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,kke=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,Fke=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,d_=function(e){Pke(t,e);function t(r,n,i){r===void 0&&(r=4),n===void 0&&(n=3),i===void 0&&(i=!1);var a=e.call(this,Oke,i?Fke:kke)||this;return a._kernels=[],a._blur=4,a._quality=3,a.uniforms.uOffset=new Float32Array(2),a._pixelSize=new cr,a.pixelSize=1,a._clamp=i,Array.isArray(r)?a.kernels=r:(a._blur=r,a.quality=n),a}return t.prototype.apply=function(r,n,i,a){var o=this._pixelSize.x/n._frame.width,s=this._pixelSize.y/n._frame.height,c;if(this._quality===1||this._blur===0)c=this._kernels[0]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,n,i,a);else{for(var l=r.getFilterTexture(),u=n,f=l,h=void 0,p=this._quality-1,d=0;d<p;d++)c=this._kernels[d]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,u,f,1),h=u,u=f,f=h;c=this._kernels[p]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,u,i,a),r.returnFilterTexture(l)}},t.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(r,n){return r+n+.5},0))},t.prototype._generateKernels=function(){var r=this._blur,n=this._quality,i=[r];if(r>0)for(var a=r,o=r/n,s=1;s<n;s++)a-=o,i.push(a);this._kernels=i,this._updatePadding()},Object.defineProperty(t.prototype,"kernels",{get:function(){return this._kernels},set:function(r){Array.isArray(r)&&r.length>0?(this._kernels=r,this._quality=r.length,this._blur=Math.max.apply(Math,r)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(r){typeof r=="number"?(this._pixelSize.x=r,this._pixelSize.y=r):Array.isArray(r)?(this._pixelSize.x=r[0],this._pixelSize.y=r[1]):r instanceof cr?(this._pixelSize.x=r.x,this._pixelSize.y=r.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=Math.max(1,Math.round(r)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blur},set:function(r){this._blur=r,this._generateKernels()},enumerable:!1,configurable:!0}),t}(Gt);/*!
 * @pixi/filter-advanced-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zC=function(e,t){return zC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},zC(e,t)};function cV(e,t){zC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fV=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Nke=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,Lke=function(e){cV(t,e);function t(r){r===void 0&&(r=.5);var n=e.call(this,fV,Nke)||this;return n.threshold=r,n}return Object.defineProperty(t.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(r){this.uniforms.threshold=r},enumerable:!1,configurable:!0}),t}(Gt),Bke=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;(function(e){cV(t,e);function t(r){var n=e.call(this,fV,Bke)||this;n.bloomScale=1,n.brightness=1,n._resolution=yt.FILTER_RESOLUTION,typeof r=="number"&&(r={threshold:r});var i=Object.assign(t.defaults,r);n.bloomScale=i.bloomScale,n.brightness=i.brightness;var a=i.kernels,o=i.blur,s=i.quality,c=i.pixelSize,l=i.resolution;return n._extractFilter=new Lke(i.threshold),n._extractFilter.resolution=l,n._blurFilter=a?new d_(a):new d_(o,s),n.pixelSize=c,n.resolution=l,n}return t.prototype.apply=function(r,n,i,a,o){var s=r.getFilterTexture();this._extractFilter.apply(r,n,s,1,o);var c=r.getFilterTexture();this._blurFilter.apply(r,s,c,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=c,r.applyFilter(this,n,i,a),r.returnFilterTexture(c),r.returnFilterTexture(s)},Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._extractFilter&&(this._extractFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(r){this._extractFilter.threshold=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),t.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:yt.FILTER_RESOLUTION},t})(Gt);/*!
 * @pixi/filter-ascii - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WC=function(e,t){return WC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},WC(e,t)};function Mke(e,t){WC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Dke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Uke=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`;(function(e){Mke(t,e);function t(r){r===void 0&&(r=8);var n=e.call(this,Dke,Uke)||this;return n.size=r,n}return Object.defineProperty(t.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(r){this.uniforms.pixelSize=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-bevel - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var YC=function(e,t){return YC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},YC(e,t)};function jke(e,t){YC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var $ke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Gke=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`;(function(e){jke(t,e);function t(r){var n=e.call(this,$ke,Gke)||this;return n._thickness=2,n._angle=0,n.uniforms.lightColor=new Float32Array(3),n.uniforms.shadowColor=new Float32Array(3),Object.assign(n,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},r),n.padding=1,n}return t.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._angle/qs},set:function(r){this._angle=r*qs,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightColor",{get:function(){return ra(this.uniforms.lightColor)},set:function(r){ai(r,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(r){this.uniforms.lightAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return ra(this.uniforms.shadowColor)},set:function(r){ai(r,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(r){this.uniforms.shadowAlpha=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qC=function(e,t){return qC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},qC(e,t)};function Vke(e,t){qC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}(function(e){Vke(t,e);function t(r,n,i,a){r===void 0&&(r=2),n===void 0&&(n=4),i===void 0&&(i=yt.FILTER_RESOLUTION),a===void 0&&(a=5);var o=e.call(this)||this,s,c;return typeof r=="number"?(s=r,c=r):r instanceof cr?(s=r.x,c=r.y):Array.isArray(r)&&(s=r[0],c=r[1]),o.blurXFilter=new s0(!0,s,n,i,a),o.blurYFilter=new s0(!1,c,n,i,a),o.blurYFilter.blendMode=ut.SCREEN,o.defaultFilter=new tV,o}return t.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this.defaultFilter.apply(r,n,i,a),this.blurXFilter.apply(r,n,o,1),this.blurYFilter.apply(r,o,i,0),r.returnFilterTexture(o)},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-bulge-pinch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var KC=function(e,t){return KC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},KC(e,t)};function Hke(e,t){KC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Xke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zke=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;(function(e){Hke(t,e);function t(r){var n=e.call(this,Xke,zke)||this;return n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),t.defaults={center:[.5,.5],radius:100,strength:1},t})(Gt);/*!
 * @pixi/filter-color-map - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ZC=function(e,t){return ZC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ZC(e,t)};function Wke(e,t){ZC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Yke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,qke=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`;(function(e){Wke(t,e);function t(r,n,i){n===void 0&&(n=!1),i===void 0&&(i=1);var a=e.call(this,Yke,qke)||this;return a.mix=1,a._size=0,a._sliceSize=0,a._slicePixelSize=0,a._sliceInnerSize=0,a._nearest=!1,a._scaleMode=null,a._colorMap=null,a._scaleMode=null,a.nearest=n,a.mix=i,a.colorMap=r,a}return t.prototype.apply=function(r,n,i,a){this.uniforms._mix=this.mix,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colorMap",{get:function(){return this._colorMap},set:function(r){var n;r&&(r instanceof Ot||(r=Ot.from(r)),!((n=r)===null||n===void 0)&&n.baseTexture&&(r.baseTexture.scaleMode=this._scaleMode,r.baseTexture.mipmap=_a.OFF,this._size=r.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=r),this._colorMap=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nearest",{get:function(){return this._nearest},set:function(r){this._nearest=r,this._scaleMode=r?vi.NEAREST:vi.LINEAR;var n=this._colorMap;n&&n.baseTexture&&(n.baseTexture._glTextures={},n.baseTexture.scaleMode=this._scaleMode,n.baseTexture.mipmap=_a.OFF,n._updateID++,n.baseTexture.emit("update",n.baseTexture))},enumerable:!1,configurable:!0}),t.prototype.updateColorMap=function(){var r=this._colorMap;r&&r.baseTexture&&(r._updateID++,r.baseTexture.emit("update",r.baseTexture),this.colorMap=r)},t.prototype.destroy=function(r){r===void 0&&(r=!1),this._colorMap&&this._colorMap.destroy(r),e.prototype.destroy.call(this)},t})(Gt);/*!
 * @pixi/filter-color-overlay - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var JC=function(e,t){return JC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},JC(e,t)};function Kke(e,t){JC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zke=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Jke=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`;(function(e){Kke(t,e);function t(r,n){r===void 0&&(r=0),n===void 0&&(n=1);var i=e.call(this,Zke,Jke)||this;return i._color=0,i._alpha=1,i.uniforms.color=new Float32Array(3),i.color=r,i.alpha=n,i}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.color;typeof r=="number"?(ai(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._color=ra(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(r){this.uniforms.alpha=r,this._alpha=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var QC=function(e,t){return QC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},QC(e,t)};function Qke(e,t){QC(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var e3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,t3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`;(function(e){Qke(t,e);function t(r,n,i){r===void 0&&(r=16711680),n===void 0&&(n=0),i===void 0&&(i=.4);var a=e.call(this,e3e,t3e)||this;return a._originalColor=16711680,a._newColor=0,a.uniforms.originalColor=new Float32Array(3),a.uniforms.newColor=new Float32Array(3),a.originalColor=r,a.newColor=n,a.epsilon=i,a}return Object.defineProperty(t.prototype,"originalColor",{get:function(){return this._originalColor},set:function(r){var n=this.uniforms.originalColor;typeof r=="number"?(ai(r,n),this._originalColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._originalColor=ra(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newColor",{get:function(){return this._newColor},set:function(r){var n=this.uniforms.newColor;typeof r=="number"?(ai(r,n),this._newColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._newColor=ra(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-convolution - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eT=function(e,t){return eT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},eT(e,t)};function r3e(e,t){eT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var n3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,i3e=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`;(function(e){r3e(t,e);function t(r,n,i){n===void 0&&(n=200),i===void 0&&(i=200);var a=e.call(this,n3e,i3e)||this;return a.uniforms.texelSize=new Float32Array(2),a.uniforms.matrix=new Float32Array(9),r!==void 0&&(a.matrix=r),a.width=n,a.height=i,a}return Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(r){var n=this;r.forEach(function(i,a){n.uniforms.matrix[a]=i})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(r){this.uniforms.texelSize[0]=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(r){this.uniforms.texelSize[1]=1/r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-cross-hatch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tT=function(e,t){return tT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},tT(e,t)};function a3e(e,t){tT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var o3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,s3e=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`;(function(e){a3e(t,e);function t(){return e.call(this,o3e,s3e)||this}return t})(Gt);/*!
 * @pixi/filter-crt - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rT=function(e,t){return rT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},rT(e,t)};function l3e(e,t){rT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var u3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,c3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;(function(e){l3e(t,e);function t(r){var n=e.call(this,u3e,c3e)||this;return n.time=0,n.seed=0,n.uniforms.dimensions=new Float32Array(2),Object.assign(n,t.defaults,r),n}return t.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.seed=this.seed,this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(r){this.uniforms.curvature=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(r){this.uniforms.lineWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(r){this.uniforms.lineContrast=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(r){this.uniforms.verticalLine=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),t.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},t})(Gt);/*!
 * @pixi/filter-drop-shadow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nT=function(e,t){return nT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},nT(e,t)};function f3e(e,t){nT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var p_=function(){return p_=Object.assign||function(t){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p_.apply(this,arguments)},h3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,d3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`;(function(e){f3e(t,e);function t(r){var n=e.call(this)||this;n.angle=45,n._distance=5,n._resolution=yt.FILTER_RESOLUTION;var i=r?p_(p_({},t.defaults),r):t.defaults,a=i.kernels,o=i.blur,s=i.quality,c=i.pixelSize,l=i.resolution;n._tintFilter=new Gt(h3e,d3e),n._tintFilter.uniforms.color=new Float32Array(4),n._tintFilter.uniforms.shift=new cr,n._tintFilter.resolution=l,n._blurFilter=a?new d_(a):new d_(o,s),n.pixelSize=c,n.resolution=l;var u=i.shadowOnly,f=i.rotation,h=i.distance,p=i.alpha,d=i.color;return n.shadowOnly=u,n.rotation=f,n.distance=h,n.alpha=p,n.color=d,n._updatePadding(),n}return t.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this._tintFilter.apply(r,n,o,1),this._blurFilter.apply(r,o,i,a),this.shadowOnly!==!0&&r.applyFilter(this,n,i,0),r.returnFilterTexture(o)},t.prototype._updatePadding=function(){this.padding=this.distance+this.blur*2},t.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._tintFilter&&(this._tintFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},set:function(r){this._distance=r,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.angle/qs},set:function(r){this.angle=r*qs,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(r){this._tintFilter.uniforms.alpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return ra(this._tintFilter.uniforms.color)},set:function(r){ai(r,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),t.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:yt.FILTER_RESOLUTION},t})(Gt);/*!
 * @pixi/filter-emboss - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iT=function(e,t){return iT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},iT(e,t)};function p3e(e,t){iT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var v3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,g3e=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`;(function(e){p3e(t,e);function t(r){r===void 0&&(r=5);var n=e.call(this,v3e,g3e)||this;return n.strength=r,n}return Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-glow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aT=function(e,t){return aT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},aT(e,t)};function m3e(e,t){aT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,y3e=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;(function(e){m3e(t,e);function t(r){var n=this,i=Object.assign({},t.defaults,r),a=i.outerStrength,o=i.innerStrength,s=i.color,c=i.knockout,l=i.quality,u=Math.round(i.distance);return n=e.call(this,_3e,y3e.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/l/u).toFixed(7)).replace(/__DIST__/gi,u.toFixed(0)+".0"))||this,n.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(n,{color:s,outerStrength:a,innerStrength:o,padding:u,knockout:c}),n}return Object.defineProperty(t.prototype,"color",{get:function(){return ra(this.uniforms.glowColor)},set:function(r){ai(r,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(r){this.uniforms.outerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(r){this.uniforms.innerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(r){this.uniforms.knockout=r},enumerable:!1,configurable:!0}),t.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},t})(Gt);/*!
 * @pixi/filter-motion-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oT=function(e,t){return oT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},oT(e,t)};function x3e(e,t){oT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var b3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,w3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`;(function(e){x3e(t,e);function t(r,n,i){r===void 0&&(r=[0,0]),n===void 0&&(n=5),i===void 0&&(i=0);var a=e.call(this,b3e,w3e)||this;return a.kernelSize=5,a.uniforms.uVelocity=new Float32Array(2),a._velocity=new Pl(a.velocityChanged,a),a.setVelocity(r),a.kernelSize=n,a.offset=i,a}return t.prototype.apply=function(r,n,i,a){var o=this.velocity,s=o.x,c=o.y;this.uniforms.uKernelSize=s!==0||c!==0?this.kernelSize:0,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"velocity",{get:function(){return this._velocity},set:function(r){this.setVelocity(r)},enumerable:!1,configurable:!0}),t.prototype.setVelocity=function(r){if(Array.isArray(r)){var n=r[0],i=r[1];this._velocity.set(n,i)}else this._velocity.copyFrom(r)},t.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1},Object.defineProperty(t.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(r){this.uniforms.uOffset=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-multi-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sT=function(e,t){return sT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},sT(e,t)};function E3e(e,t){sT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var S3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,C3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`;(function(e){E3e(t,e);function t(r,n,i){n===void 0&&(n=.05),i===void 0&&(i=r.length);var a=e.call(this,S3e,C3e.replace(/%maxColors%/g,i.toFixed(0)))||this;return a._replacements=[],a._maxColors=0,a.epsilon=n,a._maxColors=i,a.uniforms.originalColors=new Float32Array(i*3),a.uniforms.targetColors=new Float32Array(i*3),a.replacements=r,a}return Object.defineProperty(t.prototype,"replacements",{get:function(){return this._replacements},set:function(r){var n=this.uniforms.originalColors,i=this.uniforms.targetColors,a=r.length;if(a>this._maxColors)throw new Error("Length of replacements ("+a+") exceeds the maximum colors length ("+this._maxColors+")");n[a*3]=-1;for(var o=0;o<a;o++){var s=r[o],c=s[0];typeof c=="number"?c=ai(c):s[0]=ra(c),n[o*3]=c[0],n[o*3+1]=c[1],n[o*3+2]=c[2];var l=s[1];typeof l=="number"?l=ai(l):s[1]=ra(l),i[o*3]=l[0],i[o*3+1]=l[1],i[o*3+2]=l[2]}this._replacements=r},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(t.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-outline - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lT=function(e,t){return lT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},lT(e,t)};function T3e(e,t){lT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var A3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,I3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`;(function(e){T3e(t,e);function t(r,n,i){r===void 0&&(r=1),n===void 0&&(n=0),i===void 0&&(i=.1);var a=e.call(this,A3e,I3e.replace(/\$\{angleStep\}/,t.getAngleStep(i)))||this;return a._thickness=1,a.uniforms.thickness=new Float32Array([0,0]),a.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(a,{thickness:r,color:n,quality:i}),a}return t.getAngleStep=function(r){var n=Math.max(r*t.MAX_SAMPLES,t.MIN_SAMPLES);return(Math.PI*2/n).toFixed(7)},t.prototype.apply=function(r,n,i,a){this.uniforms.thickness[0]=this._thickness/n._frame.width,this.uniforms.thickness[1]=this._thickness/n._frame.height,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"color",{get:function(){return ra(this.uniforms.outlineColor)},set:function(r){ai(r,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this.padding=r},enumerable:!1,configurable:!0}),t.MIN_SAMPLES=1,t.MAX_SAMPLES=100,t})(Gt);/*!
 * @pixi/filter-pixelate - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uT=function(e,t){return uT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},uT(e,t)};function R3e(e,t){uT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var P3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,O3e=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`;(function(e){R3e(t,e);function t(r){r===void 0&&(r=10);var n=e.call(this,P3e,O3e)||this;return n.size=r,n}return Object.defineProperty(t.prototype,"size",{get:function(){return this.uniforms.size},set:function(r){typeof r=="number"&&(r=[r,r]),this.uniforms.size=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-radial-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cT=function(e,t){return cT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},cT(e,t)};function k3e(e,t){cT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var F3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,N3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`;(function(e){k3e(t,e);function t(r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=[0,0]),i===void 0&&(i=5),a===void 0&&(a=-1);var o=e.call(this,F3e,N3e)||this;return o._angle=0,o.angle=r,o.center=n,o.kernelSize=i,o.radius=a,o}return t.prototype.apply=function(r,n,i,a){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this.uniforms.uRadian=r*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-shockwave - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fT=function(e,t){return fT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},fT(e,t)};function L3e(e,t){fT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var B3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,M3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,D3e=function(e){L3e(t,e);function t(r,n,i){r===void 0&&(r=[0,0]),i===void 0&&(i=0);var a=e.call(this,B3e,M3e)||this;return a.center=r,Object.assign(a,t.defaults,n),a.time=i,a}return t.prototype.apply=function(r,n,i,a){this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(r){this.uniforms.wavelength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(r){this.uniforms.brightness=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(r){this.uniforms.speed=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),t.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},t}(Gt);/*!
 * @pixi/filter-simple-lightmap - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hT=function(e,t){return hT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},hT(e,t)};function U3e(e,t){hT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var j3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`;(function(e){U3e(t,e);function t(r,n,i){n===void 0&&(n=0),i===void 0&&(i=1);var a=e.call(this,j3e,$3e)||this;return a._color=0,a.uniforms.dimensions=new Float32Array(2),a.uniforms.ambientColor=new Float32Array([0,0,0,i]),a.texture=r,a.color=n,a}return t.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,r.applyFilter(this,n,i,a)},Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(r){this.uniforms.uLightmap=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.ambientColor;typeof r=="number"?(ai(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],this._color=ra(n))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(r){this.uniforms.ambientColor[3]=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-tilt-shift - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dT=function(e,t){return dT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},dT(e,t)};function ax(e,t){dT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var G3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,V3e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,hV=function(e){ax(t,e);function t(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=600);var o=e.call(this,G3e,V3e)||this;return o.uniforms.blur=r,o.uniforms.gradientBlur=n,o.uniforms.start=i||new cr(0,window.innerHeight/2),o.uniforms.end=a||new cr(600,window.innerHeight/2),o.uniforms.delta=new cr(30,30),o.uniforms.texSize=new cr(window.innerWidth,window.innerHeight),o.updateDelta(),o}return t.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(t.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(r){this.uniforms.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(r){this.uniforms.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.uniforms.start},set:function(r){this.uniforms.start=r,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.uniforms.end},set:function(r){this.uniforms.end=r,this.updateDelta()},enumerable:!1,configurable:!0}),t}(Gt),H3e=function(e){ax(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=r/i,this.uniforms.delta.y=n/i},t}(hV),X3e=function(e){ax(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=-n/i,this.uniforms.delta.y=r/i},t}(hV);(function(e){ax(t,e);function t(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=600);var o=e.call(this)||this;return o.tiltShiftXFilter=new H3e(r,n,i,a),o.tiltShiftYFilter=new X3e(r,n,i,a),o}return t.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this.tiltShiftXFilter.apply(r,n,o,1),this.tiltShiftYFilter.apply(r,o,i,a),r.returnFilterTexture(o)},Object.defineProperty(t.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(r){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(r){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(r){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(r){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=r},enumerable:!1,configurable:!0}),t})(Gt);/*!
 * @pixi/filter-twist - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pT=function(e,t){return pT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},pT(e,t)};function z3e(e,t){pT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var W3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Y3e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;(function(e){z3e(t,e);function t(r){var n=e.call(this,W3e,Y3e)||this;return Object.assign(n,t.defaults,r),n}return Object.defineProperty(t.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(r){this.uniforms.offset=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),t.defaults={radius:200,angle:4,padding:20,offset:new cr},t})(Gt);/*!
 * @pixi/filter-zoom-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vT=function(e,t){return vT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},vT(e,t)};function q3e(e,t){vT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function K3e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var Z3e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,J3e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;(function(e){q3e(t,e);function t(r){var n=this,i=Object.assign(t.defaults,r),a=i.maxKernelSize,o=K3e(i,["maxKernelSize"]);return n=e.call(this,Z3e,J3e.replace("${maxKernelSize}",a.toFixed(1)))||this,Object.assign(n,o),n}return Object.defineProperty(t.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(r){this.uniforms.uStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(r){this.uniforms.uInnerRadius=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),t.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},t})(Gt);const gT="shockwaveFilter";function Q3e(e,t){const r=e.containerFilters.get(gT);if(r)return r;if(t){const n=new D3e([1280,720]);return n.time=0,e.addFilter(n),e.containerFilters.set(gT,n),n}}function eFe(e){return e.getOrCreateShockwaveFilter(!1)?e.getOrCreateShockwaveFilter().time:0}function tFe(e,t){if(t===0)e.removeFilter(gT);else{const r=e.getOrCreateShockwaveFilter();r&&(r.time=t)}}const mT=0,_T="radiusAlphaFilter";class rFe extends Gt{constructor(t,r){const n=`
// fragment shader
precision mediump float;

uniform sampler2D uSampler;  // 
varying vec2 vTextureCoord;  // 
uniform vec2 center;         // 
uniform float radius;        // 

void main(void) {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // 
    float aspect = 16.0 / 9.0;

    // 
    vec2 aspectCorrectCoord = vTextureCoord;
    aspectCorrectCoord.x *= aspect;

    // 
    float dist = distance(aspectCorrectCoord, center * vec2(aspect, 1.0));

    // smoothstepalpha,
    float alpha = smoothstep(radius, radius + 0.05, dist);

    // 
    gl_FragColor = color * (1.0 - alpha);
}
    `;super(null,n),this.uniforms.center=[t.x,t.y],this.uniforms.radius=r}set center(t){this.uniforms.center=[t.x,t.y]}get center(){return new cr(this.uniforms.center[0],this.uniforms.center[1])}set radius(t){this.uniforms.radius=t}get radius(){return this.uniforms.radius}}function nFe(e,t){const r=e.containerFilters.get(_T);if(r)return r;if(t){const n=new rFe(new cr(.5,.5),mT);return n.radius=mT,e.addFilter(n),e.containerFilters.set(_T,n),n}}function iFe(e){return e.getOrCreateShockwaveFilter(!1)?e.getOrCreateRadiusAlphaFilter().radius:mT}function aFe(e,t){if(t===0)e.removeFilter(_T);else{const r=e.getOrCreateRadiusAlphaFilter();r&&(r.radius=t)}}class Pg extends ii{constructor(){super();nt(this,"containerFilters",new Map);nt(this,"baseX",0);nt(this,"baseY",0)}addFilter(r){this.filters?this.filters.push(r):this.filters=[r]}removeFilter(r){const n=this.containerFilters.get(r);if(n){const i=((this==null?void 0:this.filters)??[]).findIndex(a=>a===n);this.filters&&(this.filters.splice(i,1),this.containerFilters.delete(r))}}get blur(){return this.getOrCreateBlurFilter().blur}set blur(r){this.getOrCreateBlurFilter().blur=r}get x(){var n;return(((n=super.position)==null?void 0:n.x)??0)-this.baseX}set x(r){super.position&&(super.position.x=r+this.baseX)}get y(){var n;return(((n=super.position)==null?void 0:n.y)??0)-this.baseY}set y(r){super.position&&(super.position.y=r+this.baseY)}setBaseX(r){const n=this.x;this.baseX=r,this.x=n}setBaseY(r){const n=this.y;this.baseY=r,this.y=n}getOrCreateBlurFilter(){const r=this.containerFilters.get("blur");if(r)return r;{const n=new lV.BlurFilter;return n.blur=0,this.addFilter(n),this.containerFilters.set("blur",n),n}}getOrCreateOldFilmFilter(r=!0){const n=this.containerFilters.get("oldFilm");if(n)return n;if(r){const i=new ake;return this.addFilter(i),this.containerFilters.set("oldFilm",i),i}else return null}get oldFilm(){return this.getOrCreateOldFilmFilter(!1)?1:0}set oldFilm(r){r===0?this.removeFilter("oldFilm"):this.getOrCreateOldFilmFilter()}getOrCreateDotFilter(r=!0){const n=this.containerFilters.get("dotFilm");if(n)return n;if(r){const i=new uke;return this.addFilter(i),this.containerFilters.set("dotFilm",i),i}else return null}get dotFilm(){return this.getOrCreateDotFilter(!1)?1:0}set dotFilm(r){r===0?this.removeFilter("dotFilm"):this.getOrCreateDotFilter()}getOrCreateReflectionFilter(r=!0){const n=this.containerFilters.get("reflectionFilm");if(n)return n;if(r){const i=new dke;return this.addFilter(i),this.containerFilters.set("reflectionFilm",i),i}else return null}get reflectionFilm(){return this.getOrCreateReflectionFilter(!1)?1:0}set reflectionFilm(r){r===0?this.removeFilter("reflectionFilm"):this.getOrCreateReflectionFilter()}getOrCreateGlitchFilter(r=!0){const n=this.containerFilters.get("glitchFilm");if(n)return n;if(r){const i=new mke;return this.addFilter(i),this.containerFilters.set("glitchFilm",i),i}else return null}get glitchFilm(){return this.getOrCreateGlitchFilter(!1)?1:0}set glitchFilm(r){r===0?this.removeFilter("glitchFilm"):this.getOrCreateGlitchFilter()}getOrCreateRGBSplitFilter(r=!0){const n=this.containerFilters.get("rgbFilm");if(n)return n;if(r){const i=new bke;return this.addFilter(i),this.containerFilters.set("rgbFilm",i),i}}get rgbFilm(){return this.getOrCreateRGBSplitFilter(!1)?1:0}set rgbFilm(r){r===0?this.removeFilter("rgbFilm"):this.getOrCreateRGBSplitFilter()}getOrCreateGodrayFilter(r=!0){const n=this.containerFilters.get("godrayFilm");if(n)return n;if(r){const i=new Tke;return this.addFilter(i),this.containerFilters.set("godrayFilm",i),i}}get godrayFilm(){return this.getOrCreateGodrayFilter(!1)?1:0}set godrayFilm(r){r===0?this.removeFilter("godrayFilm"):this.getOrCreateGodrayFilter()}getOrCreateShockwaveFilter(r=!0){return Q3e(this,r)}get shockwaveFilter(){return eFe(this)}set shockwaveFilter(r){tFe(this,r)}getOrCreateRadiusAlphaFilter(r=!0){return nFe(this,r)}get radiusAlphaFilter(){return iFe(this)}set radiusAlphaFilter(r){aFe(this,r)}}var Jt;(function(e){e[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"})(Jt||(Jt={}));var v_=function(){function e(t,r,n,i){r===void 0&&(r=new Array),n===void 0&&(n=0),i===void 0&&(i=new DataView(t.buffer)),this.strings=r,this.index=n,this.buffer=i}return e.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},e.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},e.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},e.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},e.prototype.readInt=function(t){var r=this.readByte(),n=r&127;return r&128&&(r=this.readByte(),n|=(r&127)<<7,r&128&&(r=this.readByte(),n|=(r&127)<<14,r&128&&(r=this.readByte(),n|=(r&127)<<21,r&128&&(r=this.readByte(),n|=(r&127)<<28)))),t?n:n>>>1^-(n&1)},e.prototype.readStringRef=function(){var t=this.readInt(!0);return t==0?null:this.strings[t-1]},e.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var r="",n=0;n<t;){var i=this.readUnsignedByte();switch(i>>4){case 12:case 13:r+=String.fromCharCode((i&31)<<6|this.readByte()&63),n+=2;break;case 14:r+=String.fromCharCode((i&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:r+=String.fromCharCode(i),n++}}return r},e.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},e.prototype.readBoolean=function(){return this.readByte()!=0},e}(),Z;(function(e){e[e.setup=0]="setup",e[e.first=1]="first",e[e.replace=2]="replace",e[e.add=3]="add"})(Z||(Z={}));var Yt;(function(e){e[e.mixIn=0]="mixIn",e[e.mixOut=1]="mixOut"})(Yt||(Yt={}));var un;(function(e){e[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent"})(un||(un={}));var Tn;(function(e){e[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"})(Tn||(Tn={}));var Ut;(function(e){e[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"})(Ut||(Ut={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yT=function(e,t){return yT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},yT(e,t)};function Gh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function TD(e){switch(e.toLowerCase()){case"nearest":return Qi.Nearest;case"linear":return Qi.Linear;case"mipmap":return Qi.MipMap;case"mipmapnearestnearest":return Qi.MipMapNearestNearest;case"mipmaplinearnearest":return Qi.MipMapLinearNearest;case"mipmapnearestlinear":return Qi.MipMapNearestLinear;case"mipmaplinearlinear":return Qi.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+e)}}var Qi;(function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.MipMap=9987]="MipMap",e[e.MipMapNearestNearest=9984]="MipMapNearestNearest",e[e.MipMapLinearNearest=9985]="MipMapLinearNearest",e[e.MipMapNearestLinear=9986]="MipMapNearestLinear",e[e.MipMapLinearLinear=9987]="MipMapLinearLinear"})(Qi||(Qi={}));var Ol;(function(e){e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.ClampToEdge=33071]="ClampToEdge",e[e.Repeat=10497]="Repeat"})(Ol||(Ol={}));var xT=function(){function e(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(e.prototype,"width",{get:function(){var t=this.texture;return t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.texture;return t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this.texture.rotate!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"degrees",{get:function(){return(360-this.texture.rotate*45)%360},enumerable:!1,configurable:!0}),e}(),oFe=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}return e}(),sFe=function(){function e(t,r,n){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,r,n)}return e.prototype.addTexture=function(t,r){for(var n=this.pages,i=null,a=0;a<n.length;a++)if(n[a].baseTexture===r.baseTexture){i=n[a];break}if(i===null){i=new AD,i.name="texturePage";var o=r.baseTexture;i.width=o.realWidth,i.height=o.realHeight,i.baseTexture=o,i.minFilter=i.magFilter=Qi.Nearest,i.uWrap=Ol.ClampToEdge,i.vWrap=Ol.ClampToEdge,n.push(i)}var s=new ID;return s.name=t,s.page=i,s.texture=r,s.index=-1,this.regions.push(s),s},e.prototype.addTextureHash=function(t,r){for(var n in t)t.hasOwnProperty(n)&&this.addTexture(r&&n.indexOf(".")!==-1?n.substr(0,n.lastIndexOf(".")):n,t[n])},e.prototype.addSpineAtlas=function(t,r,n){return this.load(t,r,n)},e.prototype.load=function(t,r,n){var i=this;if(r==null)throw new Error("textureLoader cannot be null.");var a=new lFe(t),o=new Array(4),s=null,c={},l=null;c.size=function(){s.width=parseInt(o[1]),s.height=parseInt(o[2])},c.format=function(){},c.filter=function(){s.minFilter=TD(o[1]),s.magFilter=TD(o[2])},c.repeat=function(){o[1].indexOf("x")!=-1&&(s.uWrap=Ol.Repeat),o[1].indexOf("y")!=-1&&(s.vWrap=Ol.Repeat)},c.pma=function(){s.pma=o[1]=="true"};var u={};u.xy=function(){l.x=parseInt(o[1]),l.y=parseInt(o[2])},u.size=function(){l.width=parseInt(o[1]),l.height=parseInt(o[2])},u.bounds=function(){l.x=parseInt(o[1]),l.y=parseInt(o[2]),l.width=parseInt(o[3]),l.height=parseInt(o[4])},u.offset=function(){l.offsetX=parseInt(o[1]),l.offsetY=parseInt(o[2])},u.orig=function(){l.originalWidth=parseInt(o[1]),l.originalHeight=parseInt(o[2])},u.offsets=function(){l.offsetX=parseInt(o[1]),l.offsetY=parseInt(o[2]),l.originalWidth=parseInt(o[3]),l.originalHeight=parseInt(o[4])},u.rotate=function(){var p=o[1],d=0;p.toLocaleLowerCase()=="true"?d=6:p.toLocaleLowerCase()=="false"?d=0:d=(720-parseFloat(p))%360/45,l.rotate=d},u.index=function(){l.index=parseInt(o[1])};for(var f=a.readLine();f!=null&&f.trim().length==0;)f=a.readLine();for(;!(f==null||f.trim().length==0||a.readEntry(o,f)==0);)f=a.readLine();var h=function(){for(;;){if(f==null)return n&&n(i);if(f.trim().length==0)s=null,f=a.readLine();else if(s===null){for(s=new AD,s.name=f.trim();a.readEntry(o,f=a.readLine())!=0;){var p=c[o[0]];p&&p()}i.pages.push(s),r(s.name,function(A){if(A===null)return i.pages.splice(i.pages.indexOf(s),1),n&&n(null);s.baseTexture=A,s.pma&&(A.alphaMode=na.PMA),A.valid||A.setSize(s.width,s.height),s.setFilters(),(!s.width||!s.height)&&(s.width=A.realWidth,s.height=A.realHeight,(!s.width||!s.height)&&console.log("ERROR spine atlas page "+s.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),h()});break}else{l=new oFe;var d=new ID;d.name=f,d.page=s;for(var g=null,_=null;;){var v=a.readEntry(o,f=a.readLine());if(v==0)break;var p=u[o[0]];if(p)p();else{g==null&&(g=[],_=[]),g.push(o[0]);for(var m=[],y=0;y<v;y++)m.push(parseInt(o[y+1]));_.push(m)}}l.originalWidth==0&&l.originalHeight==0&&(l.originalWidth=l.width,l.originalHeight=l.height);var b=s.baseTexture.resolution;l.x/=b,l.y/=b,l.width/=b,l.height/=b,l.originalWidth/=b,l.originalHeight/=b,l.offsetX/=b,l.offsetY/=b;var w=l.rotate%4!==0,E=new Qt(l.x,l.y,w?l.height:l.width,w?l.width:l.height),C=new Qt(0,0,l.originalWidth,l.originalHeight),T=new Qt(l.offsetX,l.originalHeight-l.height-l.offsetY,l.width,l.height);d.texture=new Ot(d.page.baseTexture,E,C,T,l.rotate),d.index=l.index,d.texture.updateUvs(),i.regions.push(d)}}};h()},e.prototype.findRegion=function(t){for(var r=0;r<this.regions.length;r++)if(this.regions[r].name==t)return this.regions[r];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}(),lFe=function(){function e(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},e.prototype.readEntry=function(t,r){if(r==null||(r=r.trim(),r.length==0))return 0;var n=r.indexOf(":");if(n==-1)return 0;t[0]=r.substr(0,n).trim();for(var i=1,a=n+1;;i++){var o=r.indexOf(",",a);if(o==-1)return t[i]=r.substr(a).trim(),i;if(t[i]=r.substr(a,o-a).trim(),a=o+1,i==4)return 4}},e}(),AD=function(){function e(){this.minFilter=Qi.Nearest,this.magFilter=Qi.Nearest,this.uWrap=Ol.ClampToEdge,this.vWrap=Ol.ClampToEdge}return e.prototype.setFilters=function(){var t=this.baseTexture,r=this.minFilter;r==Qi.Linear?t.scaleMode=vi.LINEAR:this.minFilter==Qi.Nearest?t.scaleMode=vi.NEAREST:(t.mipmap=_a.POW2,r==Qi.MipMapNearestNearest?t.scaleMode=vi.NEAREST:t.scaleMode=vi.LINEAR)},e}(),ID=function(e){Gh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(xT),uFe=function(e){return function(t){return e[0]=t,e[0]}}(new Float32Array(1)),cFe=Math.fround||uFe,dV=function(){function e(){this.array=new Array}return e.prototype.add=function(t){var r=this.contains(t);return this.array[t|0]=t|0,!r},e.prototype.contains=function(t){return this.array[t|0]!=null},e.prototype.remove=function(t){this.array[t|0]=void 0},e.prototype.clear=function(){this.array.length=0},e}(),pV=function(){function e(){this.entries={},this.size=0}return e.prototype.add=function(t){var r=this.entries[t];return this.entries[t]=!0,r?!1:(this.size++,!0)},e.prototype.addAll=function(t){for(var r=this.size,n=0,i=t.length;n<i;n++)this.add(t[n]);return r!=this.size},e.prototype.contains=function(t){return this.entries[t]},e.prototype.clear=function(){this.entries={},this.size=0},e}(),rt=function(){function e(t,r,n,i){t===void 0&&(t=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.r=t,this.g=r,this.b=n,this.a=i}return e.prototype.set=function(t,r,n,i){return this.r=t,this.g=r,this.b=n,this.a=i,this.clamp()},e.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},e.prototype.setFromString=function(t){return t=t.charAt(0)=="#"?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=t.length!=8?1:parseInt(t.substr(6,2),16)/255,this},e.prototype.add=function(t,r,n,i){return this.r+=t,this.g+=r,this.b+=n,this.a+=i,this.clamp()},e.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},e.rgba8888ToColor=function(t,r){t.r=((r&4278190080)>>>24)/255,t.g=((r&16711680)>>>16)/255,t.b=((r&65280)>>>8)/255,t.a=(r&255)/255},e.rgb888ToColor=function(t,r){t.r=((r&16711680)>>>16)/255,t.g=((r&65280)>>>8)/255,t.b=(r&255)/255},e.fromString=function(t){return new e().setFromString(t)},e.WHITE=new e(1,1,1,1),e.RED=new e(1,0,0,1),e.GREEN=new e(0,1,0,1),e.BLUE=new e(0,0,1,1),e.MAGENTA=new e(1,0,1,1),e}(),re=function(){function e(){}return e.clamp=function(t,r,n){return t<r?r:t>n?n:t},e.cosDeg=function(t){return Math.cos(t*e.degRad)},e.sinDeg=function(t){return Math.sin(t*e.degRad)},e.signum=function(t){return t>0?1:t<0?-1:0},e.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},e.cbrt=function(t){var r=Math.pow(Math.abs(t),.3333333333333333);return t<0?-r:r},e.randomTriangular=function(t,r){return e.randomTriangularWith(t,r,(t+r)*.5)},e.randomTriangularWith=function(t,r,n){var i=Math.random(),a=r-t;return i<=(n-t)/a?t+Math.sqrt(i*a*(n-t)):r-Math.sqrt((1-i)*a*(r-n))},e.isPowerOfTwo=function(t){return t&&(t&t-1)===0},e.PI=3.1415927,e.PI2=e.PI*2,e.radiansToDegrees=180/e.PI,e.radDeg=e.radiansToDegrees,e.degreesToRadians=e.PI/180,e.degRad=e.degreesToRadians,e}(),fFe=function(){function e(){}return e.prototype.apply=function(t,r,n){return t+(r-t)*this.applyInternal(n)},e}(),hFe=function(e){Gh(t,e);function t(r){var n=e.call(this)||this;return n.power=2,n.power=r,n}return t.prototype.applyInternal=function(r){return r<=.5?Math.pow(r*2,this.power)/2:Math.pow((r-1)*2,this.power)/(this.power%2==0?-2:2)+1},t}(fFe),vV=function(e){Gh(t,e);function t(r){return e.call(this,r)||this}return t.prototype.applyInternal=function(r){return Math.pow(r-1,this.power)*(this.power%2==0?-1:1)+1},t}(hFe),xe=function(){function e(){}return e.arrayCopy=function(t,r,n,i,a){for(var o=r,s=i;o<r+a;o++,s++)n[s]=t[o]},e.arrayFill=function(t,r,n,i){for(var a=r;a<n;a++)t[a]=i},e.setArraySize=function(t,r,n){n===void 0&&(n=0);var i=t.length;if(i==r)return t;if(t.length=r,i<r)for(var a=i;a<r;a++)t[a]=n;return t},e.ensureArrayCapacity=function(t,r,n){return n===void 0&&(n=0),t.length>=r?t:e.setArraySize(t,r,n)},e.newArray=function(t,r){for(var n=new Array(t),i=0;i<t;i++)n[i]=r;return n},e.newFloatArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var r=new Array(t),n=0;n<r.length;n++)r[n]=0;return r},e.newShortArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var r=new Array(t),n=0;n<r.length;n++)r[n]=0;return r},e.toFloatArray=function(t){return e.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},e.toSinglePrecision=function(t){return e.SUPPORTS_TYPED_ARRAYS?cFe(t):t},e.webkit602BugfixHelper=function(t,r){},e.contains=function(t,r,n){for(var i=0;i<t.length;i++)if(t[i]==r)return!0;return!1},e.enumValue=function(t,r){return t[r[0].toUpperCase()+r.slice(1)]},e.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",e}(),ox=function(){function e(t){this.items=new Array,this.instantiator=t}return e.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},e.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},e.prototype.freeAll=function(t){for(var r=0;r<t.length;r++)this.free(t[r])},e.prototype.clear=function(){this.items.length=0},e}(),l0=function(){function e(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.x=t,this.y=r}return e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.length=function(){var t=this.x,r=this.y;return Math.sqrt(t*t+r*r)},e.prototype.normalize=function(){var t=this.length();return t!=0&&(this.x/=t,this.y/=t),this},e}(),sP=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new ox(function(){return xe.newFloatArray(16)})}return e.prototype.update=function(t,r){if(!t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,i=this.polygons,a=this.polygonPool,o=t.slots,s=o.length;n.length=0,a.freeAll(i),i.length=0;for(var c=0;c<s;c++){var l=o[c];if(l.bone.active){var u=l.getAttachment();if(u!=null&&u.type===Jt.BoundingBox){var f=u;n.push(f);var h=a.obtain();h.length!=f.worldVerticesLength&&(h=xe.newFloatArray(f.worldVerticesLength)),i.push(h),f.computeWorldVertices(l,0,f.worldVerticesLength,h,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=this.polygons,o=0,s=a.length;o<s;o++)for(var c=a[o],l=c,u=0,f=c.length;u<f;u+=2){var h=l[u],p=l[u+1];t=Math.min(t,h),r=Math.min(r,p),n=Math.max(n,h),i=Math.max(i,p)}this.minX=t,this.minY=r,this.maxX=n,this.maxY=i},e.prototype.aabbContainsPoint=function(t,r){return t>=this.minX&&t<=this.maxX&&r>=this.minY&&r<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,r,n,i){var a=this.minX,o=this.minY,s=this.maxX,c=this.maxY;if(t<=a&&n<=a||r<=o&&i<=o||t>=s&&n>=s||r>=c&&i>=c)return!1;var l=(i-r)/(n-t),u=l*(a-t)+r;if(u>o&&u<c||(u=l*(s-t)+r,u>o&&u<c))return!0;var f=(o-r)/l+t;return f>a&&f<s||(f=(c-r)/l+t,f>a&&f<s)},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,r){for(var n=this.polygons,i=0,a=n.length;i<a;i++)if(this.containsPointPolygon(n[i],t,r))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,r,n){for(var i=t,a=t.length,o=a-2,s=!1,c=0;c<a;c+=2){var l=i[c+1],u=i[o+1];if(l<n&&u>=n||u<n&&l>=n){var f=i[c];f+(n-l)/(u-l)*(i[o]-f)<r&&(s=!s)}o=c}return s},e.prototype.intersectsSegment=function(t,r,n,i){for(var a=this.polygons,o=0,s=a.length;o<s;o++)if(this.intersectsSegmentPolygon(a[o],t,r,n,i))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,r,n,i,a){for(var o=t,s=t.length,c=r-i,l=n-a,u=r*a-n*i,f=o[s-2],h=o[s-1],p=0;p<s;p+=2){var d=o[p],g=o[p+1],_=f*g-h*d,v=f-d,m=h-g,y=c*m-l*v,b=(u*v-c*_)/y;if((b>=f&&b<=d||b>=d&&b<=f)&&(b>=r&&b<=i||b>=i&&b<=r)){var w=(u*m-l*_)/y;if((w>=h&&w<=g||w>=g&&w<=h)&&(w>=n&&w<=a||w>=a&&w<=n))return!0}f=d,h=g}return!1},e.prototype.getPolygon=function(t){if(!t)throw new Error("boundingBox cannot be null.");var r=this.boundingBoxes.indexOf(t);return r==-1?null:this.polygons[r]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}(),dFe={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},gl=[0,0,0],pFe=function(e){Gh(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.region=null,r.attachment=null,r}return t}(pa),vFe=function(e){Gh(t,e);function t(r,n,i,a,o){var s=e.call(this,r,n,i,a,o)||this;return s.region=null,s.attachment=null,s}return t}(sV),W0=function(e){Gh(t,e);function t(r){var n=e.call(this)||this;if(!r)throw new Error("The spineData param is required.");if(typeof r=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=r,n.createSkeleton(r),n.slotContainers=[],n.tempClipContainers=[];for(var i=0,a=n.skeleton.slots.length;i<a;i++){var o=n.skeleton.slots[i],s=o.getAttachment(),c=n.newContainer();if(n.slotContainers.push(c),n.addChild(c),n.tempClipContainers.push(null),!!s)if(s.type===Jt.Region){var l=s.name,u=n.createSprite(o,s,l);o.currentSprite=u,o.currentSpriteName=l,c.addChild(u)}else if(s.type===Jt.Mesh){var f=n.createMesh(o,s);o.currentMesh=f,o.currentMeshId=s.id,o.currentMeshName=s.name,c.addChild(f)}else s.type===Jt.Clipping&&(n.createGraphics(o,s),c.addChild(o.clippingContainer),c.addChild(o.currentGraphics))}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},set:function(r){var n;r!=this._debug&&((n=this._debug)===null||n===void 0||n.unregisterSpine(this),r==null||r.registerSpine(this),this._debug=r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,this.updateTransform=r?t.prototype.autoUpdateTransform:ii.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return ra(this.tintRgb)},set:function(r){this.tintRgb=ai(r,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delayLimit",{get:function(){var r=typeof this.localDelayLimit<"u"?this.localDelayLimit:dFe.GLOBAL_DELAY_LIMIT;return r||Number.MAX_VALUE},enumerable:!1,configurable:!0}),t.prototype.update=function(r){var n,i=this.delayLimit;if(r>i&&(r=i),this.state.update(r),this.state.apply(this.skeleton),!!this.skeleton){this.skeleton.updateWorldTransform();var a=this.skeleton.slots,o=this.color,s=null,c=null;o?(s=o.light,c=o.dark):s=this.tintRgb;for(var l=0,u=a.length;l<u;l++){var f=a[l],h=f.getAttachment(),p=this.slotContainers[l];if(!h){p.visible=!1;continue}var d=null;h.sequence&&h.sequence.apply(f,h);var g=h.region,_=h.color;switch(h!=null&&h.type){case Jt.Region:var v=p.transform;if(v.setFromMatrix(f.bone.matrix),g=h.region,f.currentMesh&&(f.currentMesh.visible=!1,f.currentMesh=null,f.currentMeshId=void 0,f.currentMeshName=void 0),!g){f.currentSprite&&(f.currentSprite.renderable=!1);break}if(!f.currentSpriteName||f.currentSpriteName!==h.name){var m=h.name;if(f.currentSprite&&(f.currentSprite.visible=!1),f.sprites=f.sprites||{},f.sprites[m]!==void 0)f.sprites[m].visible=!0;else{var y=this.createSprite(f,h,m);p.addChild(y)}f.currentSprite=f.sprites[m],f.currentSpriteName=m}f.currentSprite.renderable=!0,f.hackRegion||this.setSpriteRegion(h,f.currentSprite,g),f.currentSprite.color?d=f.currentSprite.color:(gl[0]=s[0]*f.color.r*_.r,gl[1]=s[1]*f.color.g*_.g,gl[2]=s[2]*f.color.b*_.b,f.currentSprite.tint=ra(gl)),f.currentSprite.blendMode=f.blendMode;break;case Jt.Mesh:if(f.currentSprite){f.currentSprite.visible=!1,f.currentSprite=null,f.currentSpriteName=void 0;var b=new G0;b._parentID=-1,b._worldID=p.transform._worldID,p.transform=b}if(!g){f.currentMesh&&(f.currentMesh.renderable=!1);break}var w=h.id;if(f.currentMeshId===void 0||f.currentMeshId!==w){var E=w;if(f.currentMesh&&(f.currentMesh.visible=!1),f.meshes=f.meshes||{},f.meshes[E]!==void 0)f.meshes[E].visible=!0;else{var C=this.createMesh(f,h);p.addChild(C)}f.currentMesh=f.meshes[E],f.currentMeshName=h.name,f.currentMeshId=E}f.currentMesh.renderable=!0,h.computeWorldVerticesOld(f,f.currentMesh.vertices),f.currentMesh.color?d=f.currentMesh.color:(gl[0]=s[0]*f.color.r*_.r,gl[1]=s[1]*f.color.g*_.g,gl[2]=s[2]*f.color.b*_.b,f.currentMesh.tint=ra(gl)),f.currentMesh.blendMode=f.blendMode,f.hackRegion||this.setMeshRegion(h,f.currentMesh,g);break;case Jt.Clipping:f.currentGraphics||(this.createGraphics(f,h),p.addChild(f.clippingContainer),p.addChild(f.currentGraphics)),this.updateGraphics(f,h),p.alpha=1,p.visible=!0;continue;default:p.visible=!1;continue}if(p.visible=!0,d){var T=f.color.r*_.r,A=f.color.g*_.g,I=f.color.b*_.b;d.setLight(s[0]*T+c[0]*(1-T),s[1]*A+c[1]*(1-A),s[2]*I+c[2]*(1-I)),f.darkColor?(T=f.darkColor.r,A=f.darkColor.g,I=f.darkColor.b):(T=0,A=0,I=0),d.setDark(s[0]*T+c[0]*(1-T),s[1]*A+c[1]*(1-A),s[2]*I+c[2]*(1-I))}p.alpha=f.color.a}for(var O=this.skeleton.drawOrder,P=null,k=null,l=0,u=O.length;l<u;l++){var f=a[O[l].data.index],p=this.slotContainers[O[l].data.index];if(k||p.parent!==null&&p.parent!==this&&(p.parent.removeChild(p),p.parent=this),f.currentGraphics&&f.getAttachment())k=f.clippingContainer,P=f.getAttachment(),k.children.length=0,this.children[l]=p,P.endSlot===f.data&&(P.endSlot=null);else if(k){var F=this.tempClipContainers[l];F||(F=this.tempClipContainers[l]=this.newContainer(),F.visible=!1),this.children[l]=F,p.parent=null,k.addChild(p),P.endSlot==f.data&&(k.renderable=!0,k=null,P=null)}else this.children[l]=p}(n=this._debug)===null||n===void 0||n.renderDebug(this)}},t.prototype.setSpriteRegion=function(r,n,i){n.attachment===r&&n.region===i||(n.region=i,n.attachment=r,n.texture=i.texture,n.rotation=r.rotation*re.degRad,n.position.x=r.x,n.position.y=r.y,n.alpha=r.color.a,i.size?(n.scale.x=i.size.width/i.originalWidth,n.scale.y=-i.size.height/i.originalHeight):(n.scale.x=r.scaleX*r.width/i.originalWidth,n.scale.y=-r.scaleY*r.height/i.originalHeight))},t.prototype.setMeshRegion=function(r,n,i){n.attachment===r&&n.region===i||(n.region=i,n.attachment=r,n.texture=i.texture,i.texture.updateUvs(),n.uvBuffer.update(r.regionUVs))},t.prototype.autoUpdateTransform=function(){{this.lastTime=this.lastTime||Date.now();var r=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(r)}ii.prototype.updateTransform.call(this)},t.prototype.createSprite=function(r,n,i){var a=n.region;r.hackAttachment===n&&(a=r.hackRegion);var o=a?a.texture:null,s=this.newSprite(o);return s.anchor.set(.5),a&&this.setSpriteRegion(n,s,n.region),r.sprites=r.sprites||{},r.sprites[i]=s,s},t.prototype.createMesh=function(r,n){var i=n.region;r.hackAttachment===n&&(i=r.hackRegion,r.hackAttachment=null,r.hackRegion=null);var a=this.newMesh(i?i.texture:null,new Float32Array(n.regionUVs.length),n.regionUVs,new Uint16Array(n.triangles),Pa.TRIANGLES);return typeof a._canvasPadding<"u"&&(a._canvasPadding=1.5),a.alpha=n.color.a,a.region=n.region,i&&this.setMeshRegion(n,a,i),r.meshes=r.meshes||{},r.meshes[n.id]=a,a},t.prototype.createGraphics=function(r,n){var i=this.newGraphics(),a=new Xf([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(a),i.renderable=!1,r.currentGraphics=i,r.clippingContainer=this.newContainer(),r.clippingContainer.mask=r.currentGraphics,i},t.prototype.updateGraphics=function(r,n){var i=r.currentGraphics.geometry,a=i.graphicsData[0].shape.points,o=n.worldVerticesLength;a.length=o,n.computeWorldVertices(r,0,o,a,0,2),i.invalidate()},t.prototype.hackTextureBySlotIndex=function(r,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var a=this.skeleton.slots[r];if(!a)return!1;var o=a.getAttachment(),s=o.region;return n?(s=new xT,s.texture=n,s.size=i,a.hackRegion=s,a.hackAttachment=o):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite?this.setSpriteRegion(o,a.currentSprite,s):a.currentMesh&&this.setMeshRegion(o,a.currentMesh,s),!0},t.prototype.hackTextureBySlotName=function(r,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var a=this.skeleton.findSlotIndex(r);return a==-1?!1:this.hackTextureBySlotIndex(a,n,i)},t.prototype.hackTextureAttachment=function(r,n,i,a){a===void 0&&(a=null);var o=this.skeleton.findSlotIndex(r),s=this.skeleton.getAttachmentByName(r,n);s.region.texture=i;var c=this.skeleton.slots[o];if(!c)return!1;var l=c.getAttachment();if(n===l.name){var u=s.region;return i?(u=new xT,u.texture=i,u.size=a,c.hackRegion=u,c.hackAttachment=l):(c.hackRegion=null,c.hackAttachment=null),c.currentSprite&&c.currentSprite.region!=u?(this.setSpriteRegion(l,c.currentSprite,u),c.currentSprite.region=u):c.currentMesh&&c.currentMesh.region!=u&&this.setMeshRegion(l,c.currentMesh,u),!0}return!1},t.prototype.newContainer=function(){return new ii},t.prototype.newSprite=function(r){return new pFe(r)},t.prototype.newGraphics=function(){return new sh},t.prototype.newMesh=function(r,n,i,a,o){return new vFe(r,n,i,a,o)},t.prototype.transformHack=function(){return 1},t.prototype.hackAttachmentGroups=function(r,n,i){if(r){for(var a=[],o=[],s=0,c=this.skeleton.slots.length;s<c;s++){var l=this.skeleton.slots[s],u=l.currentSpriteName||l.currentMeshName||"",f=l.currentSprite||l.currentMesh;u.endsWith(r)?(f.parentGroup=n,o.push(f)):i&&f&&(f.parentGroup=i,a.push(f))}return[a,o]}},t.prototype.destroy=function(r){this.debug=null;for(var n=0,i=this.skeleton.slots.length;n<i;n++){var a=this.skeleton.slots[n];for(var o in a.meshes)a.meshes[o].destroy(r);a.meshes=null;for(var s in a.sprites)a.sprites[s].destroy(r);a.sprites=null}for(var n=0,i=this.slotContainers.length;n<i;n++)this.slotContainers[n].destroy(r);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,e.prototype.destroy.call(this,r)},t.clippingPolygon=[],t}(ii);Object.defineProperty(W0.prototype,"visible",{get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,e&&(this.lastTime=0))}});function gFe(e){return e.type===Fr.TYPE.JSON}function mFe(e){return e.xhrType===Fr.XHR_RESPONSE_TYPE.BUFFER}Fr.setExtensionXhrType("skel",Fr.XHR_RESPONSE_TYPE.BUFFER);var _Fe=function(){function e(){}return e.prototype.genMiddleware=function(){var t=this;return{use:function(r,n){if(!r.data)return n();var i=gFe(r)&&r.data.bones,a=mFe(r)&&(r.extension==="skel"||r.metadata&&r.metadata.spineMetadata);if(!i&&!a)return n();var o=null,s=r.data;i?o=t.createJsonParser():(o=t.createBinaryParser(),r.data instanceof ArrayBuffer&&(s=new Uint8Array(r.data)));var c=r.metadata||{},l=c?c.spineSkeletonScale:null;l&&(o.scale=l);var u=c.spineAtlas;if(u===!1)return n();if(u&&u.pages)return t.parseData(r,o,u,s),n();var f=c.spineAtlasSuffix||".atlas",h=r.url,p=h.indexOf("?");p>0&&(h=h.substr(0,p)),h=h.substr(0,h.lastIndexOf("."))+f,c.spineAtlasFile&&(h=c.spineAtlasFile),h=h.replace(this.baseUrl,"");var d={crossOrigin:r.crossOrigin,xhrType:Fr.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:r},g={crossOrigin:r.crossOrigin,metadata:c.imageMetadata||null,parentResource:r},_=r.url.substr(0,r.url.lastIndexOf("/")+1);_=_.replace(this.baseUrl,"");var v=c.imageNamePrefix||r.name+"_atlas_page_",m=c.images?RD(c.images):c.image?RD({default:c.image}):c.imageLoader?c.imageLoader(this,v,_,g):yFe(this,v,_,g);function y(b){new sFe(b,m,function(w){w&&t.parseData(r,o,w,s),n()})}c.atlasRawData?y(c.atlasRawData):this.add(r.name+"_atlas",h,d,function(b){b.error?n():y(b.data)})}}},e}();function yFe(e,t,r,n){return r&&r.lastIndexOf("/")!==r.length-1&&(r+="/"),function(i,a){var o=t+i,s=r+i,c=e.resources[o];if(c){var l=function(){a(c.texture.baseTexture)};c.texture?l():c.onAfterMiddleware.add(l)}else e.add(o,s,n,function(u){u.error?a(null):(i.indexOf("-pma.")>=0&&(u.texture.baseTexture.alphaMode=na.PMA),a(u.texture.baseTexture))})}}function RD(e){return function(t,r){var n=e[t]||e.default;n&&n.baseTexture?r(n.baseTexture):r(n)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bT=function(e,t){return bT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},bT(e,t)};function hn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var lP=function(){function e(t){if(t==null)throw new Error("name cannot be null.");this.name=t}return e}(),Ic=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.id=(t.nextID++&65535)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return t.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},t.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.deform,u=this.vertices,f=this.bones;if(f==null){l.length>0&&(u=l);for(var h=r.bone.matrix,p=h.tx,d=h.ty,g=h.a,_=h.c,v=h.b,m=h.d,y=n,b=o;b<i;y+=2,b+=s){var w=u[y],E=u[y+1];a[b]=w*g+E*_+p,a[b+1]=w*v+E*m+d}return}for(var C=0,T=0,A=0;A<n;A+=2){var I=f[C];C+=I+1,T+=I}var O=c.bones;if(l.length==0)for(var b=o,_=T*3;b<i;b+=s){var P=0,k=0,I=f[C++];for(I+=C;C<I;C++,_+=3){var h=O[f[C]].matrix,w=u[_],E=u[_+1],F=u[_+2];P+=(w*h.a+E*h.c+h.tx)*F,k+=(w*h.b+E*h.d+h.ty)*F}a[b]=P,a[b+1]=k}else for(var M=l,b=o,_=T*3,D=T<<1;b<i;b+=s){var P=0,k=0,I=f[C++];for(I+=C;C<I;C++,_+=3,D+=2){var h=O[f[C]].matrix,w=u[_]+M[D],E=u[_+1]+M[D+1],F=u[_+2];P+=(w*h.a+E*h.c+h.tx)*F,k+=(w*h.b+E*h.d+h.ty)*F}a[b]=P,a[b+1]=k}},t.prototype.copyTo=function(r){this.bones!=null?(r.bones=new Array(this.bones.length),xe.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,this.vertices!=null?(r.vertices=xe.newFloatArray(this.vertices.length),xe.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)):r.vertices=null,r.worldVerticesLength=this.worldVerticesLength,r.deformAttachment=this.deformAttachment},t.nextID=0,t}(lP),gV=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.BoundingBox,n.color=new rt(1,1,1,1),n}return t.prototype.copy=function(){var r=new t(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},t}(Ic),mV=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Clipping,n.color=new rt(.2275,.2275,.8078,1),n}return t.prototype.copy=function(){var r=new t(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},t}(Ic),sx=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Mesh,n.color=new rt(1,1,1,1),n.tempColor=new rt(0,0,0,0),n}return t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},t.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var r=new t(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Float32Array(this.regionUVs.length),xe.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.triangles=new Array(this.triangles.length),xe.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,this.edges!=null&&(r.edges=new Array(this.edges.length),xe.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},t.prototype.newLinkedMesh=function(){var r=new t(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),r.deformAttachment=this.deformAttachment,r.setParentMesh(this.parentMesh!=null?this.parentMesh:this),r},t}(Ic),u0=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Path,n.closed=!1,n.constantSpeed=!1,n.color=new rt(1,1,1,1),n}return t.prototype.copy=function(){var r=new t(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),xe.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},t}(Ic),_V=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Point,n.color=new rt(.38,.94,0,1),n}return t.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},t.prototype.computeWorldRotation=function(r){var n=r.matrix,i=re.cosDeg(this.rotation),a=re.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*re.radDeg},t.prototype.copy=function(){var r=new t(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},t}(Ic),uP=function(){function e(t,r){if(this.deform=new Array,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=t,this.bone=r,this.color=new rt,this.darkColor=t.darkColor==null?null:new rt,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}(),cP=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new rt(1,1,1,1),n.offset=xe.newFloatArray(8),n.uvs=xe.newFloatArray(8),n.tempColor=new rt(1,1,1,1),n}return t.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*n,o=i+this.region.width*r,s=a+this.region.height*n,c=this.rotation*Math.PI/180,l=Math.cos(c),u=Math.sin(c),f=i*l+this.x,h=i*u,p=a*l+this.y,d=a*u,g=o*l+this.x,_=o*u,v=s*l+this.y,m=s*u,y=this.offset;y[t.OX1]=f-d,y[t.OY1]=p+h,y[t.OX2]=f-m,y[t.OY2]=v+h,y[t.OX3]=g-m,y[t.OY3]=v+_,y[t.OX4]=g-d,y[t.OY4]=p+_},t.prototype.setRegion=function(r){this.region=r;var n=this.uvs;r.rotate?(n[2]=r.u,n[3]=r.v2,n[4]=r.u,n[5]=r.v,n[6]=r.u2,n[7]=r.v,n[0]=r.u2,n[1]=r.v2):(n[0]=r.u,n[1]=r.v2,n[2]=r.u,n[3]=r.v,n[4]=r.u2,n[5]=r.v,n[6]=r.u2,n[7]=r.v2)},t.prototype.computeWorldVertices=function(r,n,i,a){var o=this.offset,s=r instanceof uP?r.bone.matrix:r.matrix,c=s.tx,l=s.ty,u=s.a,f=s.c,h=s.b,p=s.d,d=0,g=0;d=o[t.OX1],g=o[t.OY1],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l,i+=a,d=o[t.OX2],g=o[t.OY2],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l,i+=a,d=o[t.OX3],g=o[t.OY3],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l,i+=a,d=o[t.OX4],g=o[t.OY4],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l},t.prototype.copy=function(){var r=new t(this.name);return r.region=this.region,r.rendererObject=this.rendererObject,r.path=this.path,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,xe.arrayCopy(this.uvs,0,r.uvs,0,8),xe.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r},t.OX1=0,t.OY1=1,t.OX2=2,t.OY2=3,t.OX3=4,t.OY3=5,t.OX4=6,t.OY4=7,t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(lP),xFe=function(){function e(t,r){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=r}return e.prototype.begin=function(t){},e.prototype.transform=function(t,r,n,i){t.x+=re.randomTriangular(-this.jitterX,this.jitterY),t.y+=re.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}(),bFe=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(t,r,n,i){var a=this.angle*re.degreesToRadians,o=t.x-this.worldX,s=t.y-this.worldY,c=Math.sqrt(o*o+s*s);if(c<this.radius){var l=e.interpolation.apply(0,a,(this.radius-c)/this.radius),u=Math.cos(l),f=Math.sin(l);t.x=u*o-f*s+this.worldX,t.y=f*o+u*s+this.worldY}},e.prototype.end=function(){},e.interpolation=new vV(2),e}(),Un=function(){function e(t,r,n){if(t==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=r,this.timelineIds=[];for(var i=0;i<r.length;i++)this.timelineIds[r[i].getPropertyId()]=!0;this.duration=n}return e.prototype.hasTimeline=function(t){return this.timelineIds[t]==!0},e.prototype.apply=function(t,r,n,i,a,o,s,c){if(t==null)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(t,r,n,a,o,s,c)},e.binarySearch=function(t,r,n){n===void 0&&(n=1);var i=0,a=t.length/n-2;if(a==0)return n;for(var o=a>>>1;;){if(t[(o+1)*n]<=r?i=o+1:a=o,i==a)return(i+1)*n;o=i+a>>>1}},e.linearSearch=function(t,r,n){for(var i=0,a=t.length-n;i<=a;i+=n)if(t[i]>r)return i;return-1},e}(),mi;(function(e){e[e.rotate=0]="rotate",e[e.translate=1]="translate",e[e.scale=2]="scale",e[e.shear=3]="shear",e[e.attachment=4]="attachment",e[e.color=5]="color",e[e.deform=6]="deform",e[e.event=7]="event",e[e.drawOrder=8]="drawOrder",e[e.ikConstraint=9]="ikConstraint",e[e.transformConstraint=10]="transformConstraint",e[e.pathConstraintPosition=11]="pathConstraintPosition",e[e.pathConstraintSpacing=12]="pathConstraintSpacing",e[e.pathConstraintMix=13]="pathConstraintMix",e[e.twoColor=14]="twoColor"})(mi||(mi={}));var gs=function(){function e(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=xe.newFloatArray((t-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var r=t*e.BEZIER_SIZE;if(r==this.curves.length)return e.LINEAR;var n=this.curves[r];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,r,n,i,a){var o=(-r*2+i)*.03,s=(-n*2+a)*.03,c=((r-i)*3+1)*.006,l=((n-a)*3+1)*.006,u=o*2+c,f=s*2+l,h=r*.3+o+c*.16666667,p=n*.3+s+l*.16666667,d=t*e.BEZIER_SIZE,g=this.curves;g[d++]=e.BEZIER;for(var _=h,v=p,m=d+e.BEZIER_SIZE-1;d<m;d+=2)g[d]=_,g[d+1]=v,h+=u,p+=f,u+=c,f+=l,_+=h,v+=p},e.prototype.getCurvePercent=function(t,r){r=re.clamp(r,0,1);var n=this.curves,i=t*e.BEZIER_SIZE,a=n[i];if(a==e.LINEAR)return r;if(a==e.STEPPED)return 0;i++;for(var o=0,s=i,c=i+e.BEZIER_SIZE-1;i<c;i+=2)if(o=n[i],o>=r){var l=void 0,u=void 0;return i==s?(l=0,u=0):(l=n[i-2],u=n[i-1]),u+(n[i+1]-u)*(r-l)/(o-l)}var f=n[i-1];return f+(1-f)*(r-o)/(1-o)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=10*2-1,e}(),Ra=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r<<1),n}return t.prototype.getPropertyId=function(){return(mi.rotate<<24)+this.boneIndex},t.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+t.ROTATION]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.rotation=u.data.rotation;return;case Z.first:var f=u.data.rotation-u.rotation;u.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*o}return}if(i>=l[l.length-t.ENTRIES]){var h=l[l.length+t.PREV_ROTATION];switch(s){case Z.setup:u.rotation=u.data.rotation+h*o;break;case Z.first:case Z.replace:h+=u.data.rotation-u.rotation,h-=(16384-(16384.499999999996-h/360|0))*360;case Z.add:u.rotation+=h*o}return}var p=Un.binarySearch(l,i,t.ENTRIES),d=l[p+t.PREV_ROTATION],g=l[p],_=this.getCurvePercent((p>>1)-1,1-(i-g)/(l[p+t.PREV_TIME]-g)),v=l[p+t.ROTATION]-d;switch(v=d+(v-(16384-(16384.499999999996-v/360|0))*360)*_,s){case Z.setup:u.rotation=u.data.rotation+(v-(16384-(16384.499999999996-v/360|0))*360)*o;break;case Z.first:case Z.replace:v+=u.data.rotation-u.rotation;case Z.add:u.rotation+=(v-(16384-(16384.499999999996-v/360|0))*360)*o}}},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_ROTATION=-1,t.ROTATION=1,t}(gs),yc=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.translate<<24)+this.boneIndex},t.prototype.setFrame=function(r,n,i,a){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.X]=i,this.frames[r+t.Y]=a},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.x=u.data.x,u.y=u.data.y;return;case Z.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_X],h=l[l.length+t.PREV_Y];else{var p=Un.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_X],h=l[p+t.PREV_Y];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f+=(l[p+t.X]-f)*g,h+=(l[p+t.Y]-h)*g}switch(s){case Z.setup:u.x=u.data.x+f*o,u.y=u.data.y+h*o;break;case Z.first:case Z.replace:u.x+=(u.data.x+f-u.x)*o,u.y+=(u.data.y+h-u.y)*o;break;case Z.add:u.x+=f*o,u.y+=h*o}}},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_X=-2,t.PREV_Y=-1,t.X=1,t.Y=2,t}(gs),fP=function(e){hn(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getPropertyId=function(){return(mi.scale<<24)+this.boneIndex},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case Z.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_X]*u.data.scaleX,h=l[l.length+t.PREV_Y]*u.data.scaleY;else{var p=Un.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_X],h=l[p+t.PREV_Y];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f=(f+(l[p+t.X]-f)*g)*u.data.scaleX,h=(h+(l[p+t.Y]-h)*g)*u.data.scaleY}if(o==1)s==Z.add?(u.scaleX+=f-u.data.scaleX,u.scaleY+=h-u.data.scaleY):(u.scaleX=f,u.scaleY=h);else{var _=0,v=0;if(c==Yt.mixOut)switch(s){case Z.setup:_=u.data.scaleX,v=u.data.scaleY,u.scaleX=_+(Math.abs(f)*re.signum(_)-_)*o,u.scaleY=v+(Math.abs(h)*re.signum(v)-v)*o;break;case Z.first:case Z.replace:_=u.scaleX,v=u.scaleY,u.scaleX=_+(Math.abs(f)*re.signum(_)-_)*o,u.scaleY=v+(Math.abs(h)*re.signum(v)-v)*o;break;case Z.add:_=u.scaleX,v=u.scaleY,u.scaleX=_+(Math.abs(f)*re.signum(_)-u.data.scaleX)*o,u.scaleY=v+(Math.abs(h)*re.signum(v)-u.data.scaleY)*o}else switch(s){case Z.setup:_=Math.abs(u.data.scaleX)*re.signum(f),v=Math.abs(u.data.scaleY)*re.signum(h),u.scaleX=_+(f-_)*o,u.scaleY=v+(h-v)*o;break;case Z.first:case Z.replace:_=Math.abs(u.scaleX)*re.signum(f),v=Math.abs(u.scaleY)*re.signum(h),u.scaleX=_+(f-_)*o,u.scaleY=v+(h-v)*o;break;case Z.add:_=re.signum(f),v=re.signum(h),u.scaleX=Math.abs(u.scaleX)*_+(f-Math.abs(u.data.scaleX)*_)*o,u.scaleY=Math.abs(u.scaleY)*v+(h-Math.abs(u.data.scaleY)*v)*o}}}},t}(yc),hP=function(e){hn(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getPropertyId=function(){return(mi.shear<<24)+this.boneIndex},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case Z.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_X],h=l[l.length+t.PREV_Y];else{var p=Un.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_X],h=l[p+t.PREV_Y];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f=f+(l[p+t.X]-f)*g,h=h+(l[p+t.Y]-h)*g}switch(s){case Z.setup:u.shearX=u.data.shearX+f*o,u.shearY=u.data.shearY+h*o;break;case Z.first:case Z.replace:u.shearX+=(u.data.shearX+f-u.shearX)*o,u.shearY+=(u.data.shearY+h-u.shearY)*o;break;case Z.add:u.shearX+=f*o,u.shearY+=h*o}}},t}(yc),c0=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.color<<24)+this.slotIndex},t.prototype.setFrame=function(r,n,i,a,o,s){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.R]=i,this.frames[r+t.G]=a,this.frames[r+t.B]=o,this.frames[r+t.A]=s},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.color.setFromColor(l.data.color);return;case Z.first:var f=l.color,h=l.data.color;f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var p=0,d=0,g=0,_=0;if(i>=u[u.length-t.ENTRIES]){var v=u.length;p=u[v+t.PREV_R],d=u[v+t.PREV_G],g=u[v+t.PREV_B],_=u[v+t.PREV_A]}else{var m=Un.binarySearch(u,i,t.ENTRIES);p=u[m+t.PREV_R],d=u[m+t.PREV_G],g=u[m+t.PREV_B],_=u[m+t.PREV_A];var y=u[m],b=this.getCurvePercent(m/t.ENTRIES-1,1-(i-y)/(u[m+t.PREV_TIME]-y));p+=(u[m+t.R]-p)*b,d+=(u[m+t.G]-d)*b,g+=(u[m+t.B]-g)*b,_+=(u[m+t.A]-_)*b}if(o==1)l.color.set(p,d,g,_);else{var f=l.color;s==Z.setup&&f.setFromColor(l.data.color),f.add((p-f.r)*o,(d-f.g)*o,(g-f.b)*o,(_-f.a)*o)}}},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_R=-4,t.PREV_G=-3,t.PREV_B=-2,t.PREV_A=-1,t.R=1,t.G=2,t.B=3,t.A=4,t}(gs),f0=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.twoColor<<24)+this.slotIndex},t.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.R]=i,this.frames[r+t.G]=a,this.frames[r+t.B]=o,this.frames[r+t.A]=s,this.frames[r+t.R2]=c,this.frames[r+t.G2]=l,this.frames[r+t.B2]=u},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case Z.first:var f=l.color,h=l.darkColor,p=l.data.color,d=l.data.darkColor;f.add((p.r-f.r)*o,(p.g-f.g)*o,(p.b-f.b)*o,(p.a-f.a)*o),h.add((d.r-h.r)*o,(d.g-h.g)*o,(d.b-h.b)*o,0)}return}var g=0,_=0,v=0,m=0,y=0,b=0,w=0;if(i>=u[u.length-t.ENTRIES]){var E=u.length;g=u[E+t.PREV_R],_=u[E+t.PREV_G],v=u[E+t.PREV_B],m=u[E+t.PREV_A],y=u[E+t.PREV_R2],b=u[E+t.PREV_G2],w=u[E+t.PREV_B2]}else{var C=Un.binarySearch(u,i,t.ENTRIES);g=u[C+t.PREV_R],_=u[C+t.PREV_G],v=u[C+t.PREV_B],m=u[C+t.PREV_A],y=u[C+t.PREV_R2],b=u[C+t.PREV_G2],w=u[C+t.PREV_B2];var T=u[C],A=this.getCurvePercent(C/t.ENTRIES-1,1-(i-T)/(u[C+t.PREV_TIME]-T));g+=(u[C+t.R]-g)*A,_+=(u[C+t.G]-_)*A,v+=(u[C+t.B]-v)*A,m+=(u[C+t.A]-m)*A,y+=(u[C+t.R2]-y)*A,b+=(u[C+t.G2]-b)*A,w+=(u[C+t.B2]-w)*A}if(o==1)l.color.set(g,_,v,m),l.darkColor.set(y,b,w,1);else{var f=l.color,h=l.darkColor;s==Z.setup&&(f.setFromColor(l.data.color),h.setFromColor(l.data.darkColor)),f.add((g-f.r)*o,(_-f.g)*o,(v-f.b)*o,(m-f.a)*o),h.add((y-h.r)*o,(b-h.g)*o,(w-h.b)*o,0)}}},t.ENTRIES=8,t.PREV_TIME=-8,t.PREV_R=-7,t.PREV_G=-6,t.PREV_B=-5,t.PREV_A=-4,t.PREV_R2=-3,t.PREV_G2=-2,t.PREV_B2=-1,t.R=1,t.G=2,t.B=3,t.A=4,t.R2=5,t.G2=6,t.B2=7,t}(gs),Qu=function(){function e(t){this.frames=xe.newFloatArray(t),this.attachmentNames=new Array(t)}return e.prototype.getPropertyId=function(){return(mi.attachment<<24)+this.slotIndex},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,r,n){this.frames[t]=r,this.attachmentNames[t]=n},e.prototype.apply=function(t,r,n,i,a,o,s){var c=t.slots[this.slotIndex];if(c.bone.active){if(s==Yt.mixOut){o==Z.setup&&this.setAttachment(t,c,c.data.attachmentName);return}var l=this.frames;if(n<l[0]){(o==Z.setup||o==Z.first)&&this.setAttachment(t,c,c.data.attachmentName);return}var u=0;n>=l[l.length-1]?u=l.length-1:u=Un.binarySearch(l,n,1)-1;var f=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(f==null?null:t.getAttachment(this.slotIndex,f))}},e.prototype.setAttachment=function(t,r,n){r.setAttachment(n==null?null:t.getAttachment(this.slotIndex,n))},e}(),PD=null,dP=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r),n.frameVertices=new Array(r),PD==null&&(PD=xe.newFloatArray(64)),n}return t.prototype.getPropertyId=function(){return(mi.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.frameVertices[r]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(!(!(u instanceof Ic)||u.deformAttachment!=this.attachment)){var f=l.deform;f.length==0&&(s=Z.setup);var h=this.frameVertices,p=h[0].length,d=this.frames;if(i<d[0]){var g=u;switch(s){case Z.setup:f.length=0;return;case Z.first:if(o==1){f.length=0;break}var _=xe.setArraySize(f,p);if(g.bones==null)for(var v=g.vertices,m=0;m<p;m++)_[m]+=(v[m]-_[m])*o;else{o=1-o;for(var m=0;m<p;m++)_[m]*=o}}return}var y=xe.setArraySize(f,p);if(i>=d[d.length-1]){var b=h[d.length-1];if(o==1)if(s==Z.add){var g=u;if(g.bones==null)for(var v=g.vertices,w=0;w<p;w++)y[w]+=b[w]-v[w];else for(var E=0;E<p;E++)y[E]+=b[E]}else xe.arrayCopy(b,0,y,0,p);else switch(s){case Z.setup:{var C=u;if(C.bones==null)for(var v=C.vertices,T=0;T<p;T++){var A=v[T];y[T]=A+(b[T]-A)*o}else for(var I=0;I<p;I++)y[I]=b[I]*o;break}case Z.first:case Z.replace:for(var O=0;O<p;O++)y[O]+=(b[O]-y[O])*o;break;case Z.add:var g=u;if(g.bones==null)for(var v=g.vertices,P=0;P<p;P++)y[P]+=(b[P]-v[P])*o;else for(var k=0;k<p;k++)y[k]+=b[k]*o}return}var F=Un.binarySearch(d,i),M=h[F-1],D=h[F],G=d[F],Q=this.getCurvePercent(F-1,1-(i-G)/(d[F-1]-G));if(o==1)if(s==Z.add){var g=u;if(g.bones==null)for(var v=g.vertices,te=0;te<p;te++){var Y=M[te];y[te]+=Y+(D[te]-Y)*Q-v[te]}else for(var U=0;U<p;U++){var Y=M[U];y[U]+=Y+(D[U]-Y)*Q}}else for(var z=0;z<p;z++){var Y=M[z];y[z]=Y+(D[z]-Y)*Q}else switch(s){case Z.setup:{var j=u;if(j.bones==null)for(var v=j.vertices,V=0;V<p;V++){var Y=M[V],A=v[V];y[V]=A+(Y+(D[V]-Y)*Q-A)*o}else for(var ne=0;ne<p;ne++){var Y=M[ne];y[ne]=(Y+(D[ne]-Y)*Q)*o}break}case Z.first:case Z.replace:for(var ae=0;ae<p;ae++){var Y=M[ae];y[ae]+=(Y+(D[ae]-Y)*Q-y[ae])*o}break;case Z.add:var g=u;if(g.bones==null)for(var v=g.vertices,pe=0;pe<p;pe++){var Y=M[pe];y[pe]+=(Y+(D[pe]-Y)*Q-v[pe])*o}else for(var se=0;se<p;se++){var Y=M[se];y[se]+=(Y+(D[se]-Y)*Q)*o}}}}},t}(gs),lx=function(){function e(t){this.frames=xe.newFloatArray(t),this.events=new Array(t)}return e.prototype.getPropertyId=function(){return mi.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,r){this.frames[t]=r.time,this.events[t]=r},e.prototype.apply=function(t,r,n,i,a,o,s){if(i!=null){var c=this.frames,l=this.frames.length;if(r>n)this.apply(t,r,Number.MAX_VALUE,i,a,o,s),r=-1;else if(r>=c[l-1])return;if(!(n<c[0])){var u=0;if(r<c[0])u=0;else{u=Un.binarySearch(c,r);for(var f=c[u];u>0&&c[u-1]==f;)u--}for(;u<l&&n>=c[u];u++)i.push(this.events[u])}}},e}(),zf=function(){function e(t){this.frames=xe.newFloatArray(t),this.drawOrders=new Array(t)}return e.prototype.getPropertyId=function(){return mi.drawOrder<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,r,n){this.frames[t]=r,this.drawOrders[t]=n},e.prototype.apply=function(t,r,n,i,a,o,s){var c=t.drawOrder,l=t.slots;if(s==Yt.mixOut&&o==Z.setup){xe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var u=this.frames;if(n<u[0]){(o==Z.setup||o==Z.first)&&xe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var f=0;n>=u[u.length-1]?f=u.length-1:f=Un.binarySearch(u,n)-1;var h=this.drawOrders[f];if(h==null)xe.arrayCopy(l,0,c,0,l.length);else for(var p=0,d=h.length;p<d;p++)c[p]=l[h[p]]},e}(),h0=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.ikConstraint<<24)+this.ikConstraintIndex},t.prototype.setFrame=function(r,n,i,a,o,s,c){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.MIX]=i,this.frames[r+t.SOFTNESS]=a,this.frames[r+t.BEND_DIRECTION]=o,this.frames[r+t.COMPRESS]=s?1:0,this.frames[r+t.STRETCH]=c?1:0},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.ikConstraints[this.ikConstraintIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case Z.first:u.mix+=(u.data.mix-u.mix)*o,u.softness+=(u.data.softness-u.softness)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}if(i>=l[l.length-t.ENTRIES]){s==Z.setup?(u.mix=u.data.mix+(l[l.length+t.PREV_MIX]-u.data.mix)*o,u.softness=u.data.softness+(l[l.length+t.PREV_SOFTNESS]-u.data.softness)*o,c==Yt.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[l.length+t.PREV_BEND_DIRECTION],u.compress=l[l.length+t.PREV_COMPRESS]!=0,u.stretch=l[l.length+t.PREV_STRETCH]!=0)):(u.mix+=(l[l.length+t.PREV_MIX]-u.mix)*o,u.softness+=(l[l.length+t.PREV_SOFTNESS]-u.softness)*o,c==Yt.mixIn&&(u.bendDirection=l[l.length+t.PREV_BEND_DIRECTION],u.compress=l[l.length+t.PREV_COMPRESS]!=0,u.stretch=l[l.length+t.PREV_STRETCH]!=0));return}var f=Un.binarySearch(l,i,t.ENTRIES),h=l[f+t.PREV_MIX],p=l[f+t.PREV_SOFTNESS],d=l[f],g=this.getCurvePercent(f/t.ENTRIES-1,1-(i-d)/(l[f+t.PREV_TIME]-d));s==Z.setup?(u.mix=u.data.mix+(h+(l[f+t.MIX]-h)*g-u.data.mix)*o,u.softness=u.data.softness+(p+(l[f+t.SOFTNESS]-p)*g-u.data.softness)*o,c==Yt.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[f+t.PREV_BEND_DIRECTION],u.compress=l[f+t.PREV_COMPRESS]!=0,u.stretch=l[f+t.PREV_STRETCH]!=0)):(u.mix+=(h+(l[f+t.MIX]-h)*g-u.mix)*o,u.softness+=(p+(l[f+t.SOFTNESS]-p)*g-u.softness)*o,c==Yt.mixIn&&(u.bendDirection=l[f+t.PREV_BEND_DIRECTION],u.compress=l[f+t.PREV_COMPRESS]!=0,u.stretch=l[f+t.PREV_STRETCH]!=0))}},t.ENTRIES=6,t.PREV_TIME=-6,t.PREV_MIX=-5,t.PREV_SOFTNESS=-4,t.PREV_BEND_DIRECTION=-3,t.PREV_COMPRESS=-2,t.PREV_STRETCH=-1,t.MIX=1,t.SOFTNESS=2,t.BEND_DIRECTION=3,t.COMPRESS=4,t.STRETCH=5,t}(gs),d0=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.transformConstraint<<24)+this.transformConstraintIndex},t.prototype.setFrame=function(r,n,i,a,o,s){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.ROTATE]=i,this.frames[r+t.TRANSLATE]=a,this.frames[r+t.SCALE]=o,this.frames[r+t.SHEAR]=s},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.transformConstraints[this.transformConstraintIndex];if(u.active){if(i<l[0]){var f=u.data;switch(s){case Z.setup:u.rotateMix=f.rotateMix,u.translateMix=f.translateMix,u.scaleMix=f.scaleMix,u.shearMix=f.shearMix;return;case Z.first:u.rotateMix+=(f.rotateMix-u.rotateMix)*o,u.translateMix+=(f.translateMix-u.translateMix)*o,u.scaleMix+=(f.scaleMix-u.scaleMix)*o,u.shearMix+=(f.shearMix-u.shearMix)*o}return}var h=0,p=0,d=0,g=0;if(i>=l[l.length-t.ENTRIES]){var _=l.length;h=l[_+t.PREV_ROTATE],p=l[_+t.PREV_TRANSLATE],d=l[_+t.PREV_SCALE],g=l[_+t.PREV_SHEAR]}else{var v=Un.binarySearch(l,i,t.ENTRIES);h=l[v+t.PREV_ROTATE],p=l[v+t.PREV_TRANSLATE],d=l[v+t.PREV_SCALE],g=l[v+t.PREV_SHEAR];var m=l[v],y=this.getCurvePercent(v/t.ENTRIES-1,1-(i-m)/(l[v+t.PREV_TIME]-m));h+=(l[v+t.ROTATE]-h)*y,p+=(l[v+t.TRANSLATE]-p)*y,d+=(l[v+t.SCALE]-d)*y,g+=(l[v+t.SHEAR]-g)*y}if(s==Z.setup){var f=u.data;u.rotateMix=f.rotateMix+(h-f.rotateMix)*o,u.translateMix=f.translateMix+(p-f.translateMix)*o,u.scaleMix=f.scaleMix+(d-f.scaleMix)*o,u.shearMix=f.shearMix+(g-f.shearMix)*o}else u.rotateMix+=(h-u.rotateMix)*o,u.translateMix+=(p-u.translateMix)*o,u.scaleMix+=(d-u.scaleMix)*o,u.shearMix+=(g-u.shearMix)*o}},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_ROTATE=-4,t.PREV_TRANSLATE=-3,t.PREV_SCALE=-2,t.PREV_SHEAR=-1,t.ROTATE=1,t.TRANSLATE=2,t.SCALE=3,t.SHEAR=4,t}(gs),fh=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.pathConstraintPosition<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(r,n,i){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.VALUE]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.position=u.data.position;return;case Z.first:u.position+=(u.data.position-u.position)*o}return}var f=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_VALUE];else{var h=Un.binarySearch(l,i,t.ENTRIES);f=l[h+t.PREV_VALUE];var p=l[h],d=this.getCurvePercent(h/t.ENTRIES-1,1-(i-p)/(l[h+t.PREV_TIME]-p));f+=(l[h+t.VALUE]-f)*d}s==Z.setup?u.position=u.data.position+(f-u.data.position)*o:u.position+=(f-u.position)*o}},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_VALUE=-1,t.VALUE=1,t}(gs),pP=function(e){hn(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getPropertyId=function(){return(mi.pathConstraintSpacing<<24)+this.pathConstraintIndex},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.spacing=u.data.spacing;return;case Z.first:u.spacing+=(u.data.spacing-u.spacing)*o}return}var f=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_VALUE];else{var h=Un.binarySearch(l,i,t.ENTRIES);f=l[h+t.PREV_VALUE];var p=l[h],d=this.getCurvePercent(h/t.ENTRIES-1,1-(i-p)/(l[h+t.PREV_TIME]-p));f+=(l[h+t.VALUE]-f)*d}s==Z.setup?u.spacing=u.data.spacing+(f-u.data.spacing)*o:u.spacing+=(f-u.spacing)*o}},t}(fh),p0=function(e){hn(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(mi.pathConstraintMix<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(r,n,i,a){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.ROTATE]=i,this.frames[r+t.TRANSLATE]=a},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case Z.setup:u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix;return;case Z.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*o,u.translateMix+=(u.data.translateMix-u.translateMix)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_ROTATE],h=l[l.length+t.PREV_TRANSLATE];else{var p=Un.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_ROTATE],h=l[p+t.PREV_TRANSLATE];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f+=(l[p+t.ROTATE]-f)*g,h+=(l[p+t.TRANSLATE]-h)*g}s==Z.setup?(u.rotateMix=u.data.rotateMix+(f-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(h-u.data.translateMix)*o):(u.rotateMix+=(f-u.rotateMix)*o,u.translateMix+=(h-u.translateMix)*o)}},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_ROTATE=-2,t.PREV_TRANSLATE=-1,t.ROTATE=1,t.TRANSLATE=2,t}(gs),yV=function(){function e(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new bV(this),this.propertyIDs=new dV,this.animationsChanged=!1,this.trackEntryPool=new ox(function(){return new xV}),this.data=t}return e.prototype.update=function(t){t*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a!=null){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=t*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s!=null){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime+=a.timeScale==0?0:(c/a.timeScale+t)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom!=null;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&a.mixingFrom==null){r[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(a.mixingFrom!=null&&this.updateMixingFrom(a,t)){var l=a.mixingFrom;for(a.mixingFrom=null,l!=null&&(l.mixingTo=null);l!=null;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,r){var n=t.mixingFrom;if(n==null)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((n.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,t.mixTime+=r,!1)},e.prototype.apply=function(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(s==null||s.delay>0)){i=!0;var c=a==0?Z.first:s.mixBlend,l=s.alpha;s.mixingFrom!=null?l*=this.applyMixingFrom(s,t,c):s.trackTime>=s.trackEnd&&s.next==null&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=s.animation.timelines.length,p=s.animation.timelines;if(a==0&&l==1||c==Z.add)for(var d=0;d<h;d++){xe.webkit602BugfixHelper(l,c);var g=p[d];g instanceof Qu?this.applyAttachmentTimeline(g,t,f,c,!0):g.apply(t,u,f,r,l,c,Yt.mixIn)}else{var _=s.timelineMode,v=s.timelinesRotation.length==0;v&&xe.setArraySize(s.timelinesRotation,h<<1,null);for(var m=s.timelinesRotation,d=0;d<h;d++){var y=p[d],b=_[d]==e.SUBSEQUENT?c:Z.setup;y instanceof Ra?this.applyRotateTimeline(y,t,f,l,b,m,d<<1,v):y instanceof Qu?this.applyAttachmentTimeline(y,t,f,c,!0):(xe.webkit602BugfixHelper(l,c),y.apply(t,u,f,r,l,b,Yt.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}for(var w=this.unkeyedState+e.SETUP,E=t.slots,C=0,T=t.slots.length;C<T;C++){var A=E[C];if(A.attachmentState==w){var I=A.data.attachmentName;A.setAttachment(I==null?null:t.getAttachment(A.data.index,I))}}return this.unkeyedState+=2,this.queue.drain(),i},e.prototype.applyMixingFrom=function(t,r,n){var i=t.mixingFrom;i.mixingFrom!=null&&this.applyMixingFrom(i,r,n);var a=0;t.mixDuration==0?(a=1,n==Z.first&&(n=Z.setup)):(a=t.mixTime/t.mixDuration,a>1&&(a=1),n!=Z.first&&(n=i.mixBlend));var o=a<i.eventThreshold?this.events:null,s=a<i.attachmentThreshold,c=a<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,h=i.animation.timelines,p=i.alpha*t.interruptAlpha,d=p*(1-a);if(n==Z.add)for(var g=0;g<f;g++)h[g].apply(r,l,u,o,d,n,Yt.mixOut);else{var _=i.timelineMode,v=i.timelineHoldMix,m=i.timelinesRotation.length==0;m&&xe.setArraySize(i.timelinesRotation,f<<1,null);var y=i.timelinesRotation;i.totalAlpha=0;for(var g=0;g<f;g++){var b=h[g],w=Yt.mixOut,E=void 0,C=0;switch(_[g]){case e.SUBSEQUENT:if(!c&&b instanceof zf)continue;E=n,C=d;break;case e.FIRST:E=Z.setup,C=d;break;case e.HOLD_SUBSEQUENT:E=n,C=p;break;case e.HOLD_FIRST:E=Z.setup,C=p;break;default:E=Z.setup;var T=v[g];C=p*Math.max(0,1-T.mixTime/T.mixDuration);break}i.totalAlpha+=C,b instanceof Ra?this.applyRotateTimeline(b,r,u,C,E,y,g<<1,m):b instanceof Qu?this.applyAttachmentTimeline(b,r,u,E,s):(xe.webkit602BugfixHelper(C,n),c&&b instanceof zf&&E==Z.setup&&(w=Yt.mixIn),b.apply(r,l,u,o,C,E,w))}}return t.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,a},e.prototype.applyAttachmentTimeline=function(t,r,n,i,a){var o=r.slots[t.slotIndex];if(o.bone.active){var s=t.frames;if(n<s[0])(i==Z.setup||i==Z.first)&&this.setAttachment(r,o,o.data.attachmentName,a);else{var c;n>=s[s.length-1]?c=s.length-1:c=Un.binarySearch(s,n)-1,this.setAttachment(r,o,t.attachmentNames[c],a)}o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(t,r,n,i){r.setAttachment(n==null?null:t.getAttachment(r.data.index,n)),i&&(r.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(t,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){t.apply(r,0,n,null,1,a,Yt.mixIn);return}var l=t,u=l.frames,f=r.bones[l.boneIndex];if(f.active){var h=0,p=0;if(n<u[0])switch(a){case Z.setup:f.rotation=f.data.rotation;default:return;case Z.first:h=f.rotation,p=f.data.rotation}else if(h=a==Z.setup?f.data.rotation:f.rotation,n>=u[u.length-Ra.ENTRIES])p=f.data.rotation+u[u.length+Ra.PREV_ROTATION];else{var d=Un.binarySearch(u,n,Ra.ENTRIES),g=u[d+Ra.PREV_ROTATION],_=u[d],v=l.getCurvePercent((d>>1)-1,1-(n-_)/(u[d+Ra.PREV_TIME]-_));p=u[d+Ra.ROTATION]-g,p-=(16384-(16384.499999999996-p/360|0))*360,p=g+p*v+f.data.rotation,p-=(16384-(16384.499999999996-p/360|0))*360}var m=0,y=p-h;if(y-=(16384-(16384.499999999996-y/360|0))*360,y==0)m=o[s];else{var b=0,w=0;c?(b=0,w=y):(b=o[s],w=o[s+1]);var E=y>0,C=b>=0;re.signum(w)!=re.signum(y)&&Math.abs(w)<=90&&(Math.abs(b)>180&&(b+=360*re.signum(b)),C=E),m=y+b-b%360,C!=E&&(m+=360*re.signum(b)),o[s]=m}o[s+1]=y,h+=m*i,f.rotation=h-(16384-(16384.499999999996-h/360|0))*360}},e.prototype.queueEvents=function(t,r){for(var n=t.animationStart,i=t.animationEnd,a=i-n,o=t.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(t,u)}var f=!1;for(t.loop?f=a==0||o>t.trackTime%a:f=r>=i&&t.animationLast<i,f&&this.queue.complete(t);c<l;c++){var h=s[c];h.time<n||this.queue.event(t,s[c])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var r=this.tracks[t];if(r!=null){this.queue.end(r),this.disposeNext(r);for(var n=r;;){var i=n.mixingFrom;if(i==null)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,r,n){var i=this.expandToIndex(t);this.tracks[t]=r,i!=null&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom!=null&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},e.prototype.setAnimation=function(t,r,n){var i=this.data.skeletonData.findAnimation(r);if(i==null)throw new Error("Animation not found: "+r);return this.setAnimationWith(t,i,n)},e.prototype.setAnimationWith=function(t,r,n){if(r==null)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(t);a!=null&&(a.nextTrackLast==-1?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,i=!1):this.disposeNext(a));var o=this.trackEntry(t,r,n,a);return this.setCurrent(t,o,i),this.queue.drain(),o},e.prototype.addAnimation=function(t,r,n,i){var a=this.data.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);return this.addAnimationWith(t,a,n,i)},e.prototype.addAnimationWith=function(t,r,n,i){if(r==null)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(a!=null)for(;a.next!=null;)a=a.next;var o=this.trackEntry(t,r,n,a);if(a==null)this.setCurrent(t,o,!0),this.queue.drain();else if(a.next=o,i<=0){var s=a.animationEnd-a.animationStart;s!=0?(a.loop?i+=s*(1+(a.trackTime/s|0)):i+=Math.max(s,a.trackTime),i-=this.data.getMix(a.animation,r)):i=a.trackTime}return o.delay=i,o},e.prototype.setEmptyAnimation=function(t,r){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},e.prototype.addEmptyAnimation=function(t,r,n){n<=0&&(n-=r);var i=this.addAnimationWith(t,e.emptyAnimation,!1,n);return i.mixDuration=r,i.trackEnd=r,i},e.prototype.setEmptyAnimations=function(t){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a!=null&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=r,this.queue.drain()},e.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(xe.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},e.prototype.trackEntry=function(t,r,n,i){var a=this.trackEntryPool.obtain();return a.trackIndex=t,a.animation=r,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=i==null?0:this.data.getMix(i.animation,r),a.mixBlend=Z.replace,a},e.prototype.disposeNext=function(t){for(var r=t.next;r!=null;)this.queue.dispose(r),r=r.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,r=this.tracks.length;t<r;t++){var n=this.tracks[t];if(n!=null){for(;n.mixingFrom!=null;)n=n.mixingFrom;do(n.mixingFrom==null||n.mixBlend!=Z.add)&&this.computeHold(n),n=n.mixingTo;while(n!=null)}}},e.prototype.computeHold=function(t){var r=t.mixingTo,n=t.animation.timelines,i=t.animation.timelines.length,a=xe.setArraySize(t.timelineMode,i);t.timelineHoldMix.length=0;var o=xe.setArraySize(t.timelineHoldMix,i),s=this.propertyIDs;if(r!=null&&r.holdPrevious){for(var c=0;c<i;c++)a[c]=s.add(n[c].getPropertyId())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;return}e:for(var c=0;c<i;c++){var l=n[c],u=l.getPropertyId();if(!s.add(u))a[c]=e.SUBSEQUENT;else if(r==null||l instanceof Qu||l instanceof zf||l instanceof lx||!r.animation.hasTimeline(u))a[c]=e.FIRST;else{for(var f=r.mixingTo;f!=null;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(t.mixDuration>0){a[c]=e.HOLD_MIX,o[c]=f;continue e}break}a[c]=e.HOLD_FIRST}}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var r=this.listeners.indexOf(t);r>=0&&this.listeners.splice(r,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,r,n)},e.prototype.addAnimationByName=function(t,r,n,i){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,r,n,i)},e.prototype.hasAnimation=function(t){var r=this.data.skeletonData.findAnimation(t);return r!==null},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new Un("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}(),xV=function(){function e(){this.mixBlend=Z.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}(),bV=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(Ki.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(Ki.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(Ki.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(Ki.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(Ki.complete),this.objects.push(t)},e.prototype.event=function(t,r){this.objects.push(Ki.event),this.objects.push(t),this.objects.push(r)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,r=this.animState.listeners,n=0;n<t.length;n+=2){var i=t[n],a=t[n+1];switch(i){case Ki.start:a.listener!=null&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++)r[o].start&&r[o].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case Ki.interrupt:a.listener!=null&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++)r[o].interrupt&&r[o].interrupt(a);break;case Ki.end:a.listener!=null&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++)r[o].end&&r[o].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case Ki.dispose:a.listener!=null&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++)r[o].dispose&&r[o].dispose(a);this.animState.trackEntryPool.free(a);break;case Ki.complete:a.listener!=null&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++)r[o].complete&&r[o].complete(a);var s=re.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,s);break;case Ki.event:var c=t[n+++2];a.listener!=null&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++)r[o].event&&r[o].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}(),Ki;(function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"})(Ki||(Ki={}));var wFe=function(){function e(){}return e.prototype.start=function(t){},e.prototype.interrupt=function(t){},e.prototype.end=function(t){},e.prototype.dispose=function(t){},e.prototype.complete=function(t){},e.prototype.event=function(t,r){},e}(),wV=function(){function e(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return e.prototype.setMix=function(t,r,n){var i=this.skeletonData.findAnimation(t);if(i==null)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},e.prototype.setMixByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,r,n)},e.prototype.setMixWith=function(t,r,n){if(t==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var i=t.name+"."+r.name;this.animationToMixTime[i]=n},e.prototype.getMix=function(t,r){var n=t.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},e.deprecatedWarning1=!1,e}(),vP=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(t,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var a=new cP(r);return a.region=i,a},e.prototype.newMeshAttachment=function(t,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var a=new sx(r);return a.region=i,a},e.prototype.newBoundingBoxAttachment=function(t,r){return new gV(r)},e.prototype.newPathAttachment=function(t,r){return new u0(r)},e.prototype.newPointAttachment=function(t,r){return new _V(r)},e.prototype.newClippingAttachment=function(t,r){return new mV(r)},e}(),wT=function(){function e(t,r,n){if(this.matrix=new Qr,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(t,r,n,i,a,o,s){this.ax=t,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(c==null){var h=this.skeleton,p=n+90+s;l.a=re.cosDeg(n+o)*i*u,l.c=re.cosDeg(p)*a*u,l.b=re.sinDeg(n+o)*i*f,l.d=re.sinDeg(p)*a*f,l.tx=t*u+h.x,l.ty=r*f+h.y;return}var d=c.matrix.a,g=c.matrix.c,_=c.matrix.b,v=c.matrix.d;switch(l.tx=d*t+g*r+c.matrix.tx,l.ty=_*t+v*r+c.matrix.ty,this.data.transformMode){case Ut.Normal:{var p=n+90+s,m=re.cosDeg(n+o)*i,y=re.cosDeg(p)*a,b=re.sinDeg(n+o)*i,w=re.sinDeg(p)*a;l.a=d*m+g*b,l.c=d*y+g*w,l.b=_*m+v*b,l.d=_*y+v*w;return}case Ut.OnlyTranslation:{var p=n+90+s;l.a=re.cosDeg(n+o)*i,l.c=re.cosDeg(p)*a,l.b=re.sinDeg(n+o)*i,l.d=re.sinDeg(p)*a;break}case Ut.NoRotationOrReflection:{var E=d*d+_*_,C=0;E>1e-4?(E=Math.abs(d*v-g*_)/E,d/=this.skeleton.scaleX,_/=this.skeleton.scaleY,g=_*E,v=d*E,C=Math.atan2(_,d)*re.radDeg):(d=0,_=0,C=90-Math.atan2(v,g)*re.radDeg);var T=n+o-C,A=n+s-C+90,m=re.cosDeg(T)*i,y=re.cosDeg(A)*a,b=re.sinDeg(T)*i,w=re.sinDeg(A)*a;l.a=d*m-g*b,l.c=d*y-g*w,l.b=_*m+v*b,l.d=_*y+v*w;break}case Ut.NoScale:case Ut.NoScaleOrReflection:{var I=re.cosDeg(n),O=re.sinDeg(n),P=(d*I+g*O)/u,k=(_*I+v*O)/f,E=Math.sqrt(P*P+k*k);E>1e-5&&(E=1/E),P*=E,k*=E,E=Math.sqrt(P*P+k*k),this.data.transformMode==Ut.NoScale&&d*v-g*_<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(E=-E);var F=Math.PI/2+Math.atan2(k,P),M=Math.cos(F)*E,D=Math.sin(F)*E,m=re.cosDeg(o)*i,y=re.cosDeg(90+s)*a,b=re.sinDeg(o)*i,w=re.sinDeg(90+s)*a;l.a=P*m+M*b,l.c=P*y+M*w,l.b=k*m+D*b,l.d=k*y+D*w;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*re.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*re.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,r=this.matrix;if(t==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*re.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*re.radDeg;return}var n=t.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,p=c*r.b-u*r.a,d=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+p*p),this.ascaleX>1e-4){var g=f*d-h*p;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(f*h+p*d,g)*re.radDeg,this.arotation=Math.atan2(p,f)*re.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,h)*re.radDeg},e.prototype.worldToLocal=function(t){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=t.x-r.tx,l=t.y-r.ty;return t.x=c*o*s-l*i*s,t.y=l*n*s-c*a*s,t},e.prototype.localToWorld=function(t){var r=this.matrix,n=t.x,i=t.y;return t.x=n*r.a+i*r.c+r.tx,t.y=n*r.b+i*r.d+r.ty,t},e.prototype.worldToLocalRotation=function(t){var r=re.sinDeg(t),n=re.cosDeg(t),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*re.radDeg},e.prototype.localToWorldRotation=function(t){var r=re.sinDeg(t),n=re.cosDeg(t),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*re.radDeg},e.prototype.rotateWorld=function(t){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=re.cosDeg(t),c=re.sinDeg(t);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o,this.appliedValid=!1},e}(),gP=function(){function e(t,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Ut.Normal,this.skinRequired=!1,this.color=new rt,t<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=t,this.name=r,this.parent=n}return e}(),ux=function(){function e(t,r,n){this.name=t,this.order=r,this.skinRequired=n}return e}(),mP=function(){function e(t,r){if(r==null)throw new Error("data cannot be null.");this.time=t,this.data=r}return e}(),_P=function(){function e(t){this.name=t}return e}(),EV=function(){function e(t,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},e.prototype.apply1=function(t,r,n,i,a,o,s){t.appliedValid||t.updateAppliedTransform();var c=t.parent.matrix,l=c.a,u=c.c,f=c.b,h=c.d,p=-t.ashearX-t.arotation,d=0,g=0;switch(t.data.transformMode){case Ut.OnlyTranslation:d=r-t.worldX,g=n-t.worldY;break;case Ut.NoRotationOrReflection:var _=Math.abs(l*h-u*f)/(l*l+f*f),v=l/t.skeleton.scaleX,m=f/t.skeleton.scaleY;u=-m*_*t.skeleton.scaleX,h=v*_*t.skeleton.scaleY,p+=Math.atan2(m,v)*re.radDeg;default:var y=r-c.tx,b=n-c.ty,w=l*h-u*f;d=(y*h-b*u)/w-t.ax,g=(b*l-y*f)/w-t.ay}p+=Math.atan2(g,d)*re.radDeg,t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var E=t.ascaleX,C=t.ascaleY;if(i||a){switch(t.data.transformMode){case Ut.NoScale:case Ut.NoScaleOrReflection:d=r-t.worldX,g=n-t.worldY}var T=t.data.length*E,A=Math.sqrt(d*d+g*g);if(i&&A<T||a&&A>T&&T>1e-4){var _=(A/T-1)*s+1;E*=_,o&&(C*=_)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*s,E,C,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,r,n,i,a,o,s,c){if(c==0){r.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var l=t.ax,u=t.ay,f=t.ascaleX,h=f,p=t.ascaleY,d=r.ascaleX,g=t.matrix,_=0,v=0,m=0;f<0?(f=-f,_=180,m=-1):(_=0,m=1),p<0&&(p=-p,m=-m),d<0?(d=-d,v=180):v=0;var y=r.ax,b=0,w=0,E=0,C=g.a,T=g.c,A=g.b,I=g.d,O=Math.abs(f-p)<=1e-4;O?(b=r.ay,w=C*y+T*b+g.tx,E=A*y+I*b+g.ty):(b=0,w=C*y+g.tx,E=A*y+g.ty);var P=t.parent.matrix;C=P.a,T=P.c,A=P.b,I=P.d;var k=1/(C*I-T*A),F=w-P.tx,M=E-P.ty,D=(F*I-M*T)*k-l,G=(M*C-F*A)*k-u,Q=Math.sqrt(D*D+G*G),te=r.data.length*d,Y,U;if(Q<1e-4){this.apply1(t,n,i,!1,o,!1,c),r.updateWorldTransformWith(y,b,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}F=n-P.tx,M=i-P.ty;var z=(F*I-M*T)*k-l,j=(M*C-F*A)*k-u,V=z*z+j*j;if(s!=0){s*=f*(d+1)/2;var ne=Math.sqrt(V),ae=ne-Q-te*f+s;if(ae>0){var pe=Math.min(1,ae/(s*2))-1;pe=(ae-s*(1-pe*pe))/ne,z-=pe*z,j-=pe*j,V=z*z+j*j}}e:if(O){te*=f;var se=(V-Q*Q-te*te)/(2*Q*te);se<-1?se=-1:se>1&&(se=1,o&&(h*=(Math.sqrt(V)/(Q+te)-1)*c+1)),U=Math.acos(se)*a,C=Q+te*se,T=te*Math.sin(U),Y=Math.atan2(j*C-z*T,z*C+j*T)}else{C=f*te,T=p*te;var _e=C*C,Le=T*T,Pe=Math.atan2(j,z);A=Le*Q*Q+_e*V-_e*Le;var Ee=-2*Le*Q,Se=Le-_e;if(I=Ee*Ee-4*Se*A,I>=0){var Ge=Math.sqrt(I);Ee<0&&(Ge=-Ge),Ge=-(Ee+Ge)/2;var We=Ge/Se,Ve=A/Ge,Xe=Math.abs(We)<Math.abs(Ve)?We:Ve;if(Xe*Xe<=V){M=Math.sqrt(V-Xe*Xe)*a,Y=Pe-Math.atan2(M,Xe),U=Math.atan2(M/p,(Xe-Q)/f);break e}}var Ke=re.PI,bt=Q-C,Rt=bt*bt,ct=0,gt=0,It=Q+C,fr=It*It,er=0;A=-C*Q/(_e-Le),A>=-1&&A<=1&&(A=Math.acos(A),F=C*Math.cos(A)+Q,M=T*Math.sin(A),I=F*F+M*M,I<Rt&&(Ke=A,Rt=I,bt=F,ct=M),I>fr&&(gt=A,fr=I,It=F,er=M)),V<=(Rt+fr)/2?(Y=Pe-Math.atan2(ct*a,bt),U=Ke*a):(Y=Pe-Math.atan2(er*a,It),U=gt*a)}var hr=Math.atan2(b,y)*m,qt=t.arotation;Y=(Y-hr)*re.radDeg+_-qt,Y>180?Y-=360:Y<-180&&(Y+=360),t.updateWorldTransformWith(l,u,qt+Y*c,h,t.ascaleY,0,0),qt=r.arotation,U=((U+hr)*re.radDeg-r.ashearX)*m+v-qt,U>180?U-=360:U<-180&&(U+=360),r.updateWorldTransformWith(y,b,qt+U*c,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},e}(),yP=function(e){hn(t,e);function t(r){var n=e.call(this,r,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return t}(ux),xP=function(e){hn(t,e);function t(r){var n=e.call(this,r,0,!1)||this;return n.bones=new Array,n}return t}(ux),ri;(function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent"})(ri||(ri={}));var SV=function(){function e(t,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof u0){var r=this.rotateMix,n=this.translateMix,i=n>0,a=r>0;if(!(!i&&!a)){var o=this.data,s=o.spacingMode,c=s==ri.Length,l=o.rotateMode,u=l==Tn.Tangent,f=l==Tn.ChainScale,h=this.bones.length,p=u?h:h+1,d=this.bones,g=xe.setArraySize(this.spaces,p),_=null,v=this.spacing;if(f||c){f&&(_=xe.setArraySize(this.lengths,h));for(var m=0,y=p-1;m<y;){var b=d[m],w=b.data.length;if(w<e.epsilon)f&&(_[m]=0),g[++m]=0;else{var E=w*b.matrix.a,C=w*b.matrix.b,T=Math.sqrt(E*E+C*C);f&&(_[m]=T),g[++m]=(c?w+v:v)*T/w}}}else for(var m=1;m<p;m++)g[m]=v;var A=this.computeWorldPositions(t,p,u,o.positionMode==un.Percent,s==ri.Percent),I=A[0],O=A[1],P=o.offsetRotation,k=!1;if(P==0)k=l==Tn.Chain;else{k=!1;var F=this.target.bone.matrix;P*=F.a*F.d-F.b*F.c>0?re.degRad:-re.degRad}for(var m=0,F=3;m<h;m++,F+=3){var b=d[m],M=b.matrix;M.tx+=(I-M.tx)*n,M.ty+=(O-M.ty)*n;var E=A[F],C=A[F+1],D=E-I,G=C-O;if(f){var Q=_[m];if(Q!=0){var te=(Math.sqrt(D*D+G*G)/Q-1)*r+1;M.a*=te,M.b*=te}}if(I=E,O=C,a){var Y=M.a,U=M.c,z=M.b,j=M.d,V=0,ne=0,ae=0;if(u?V=A[F-1]:g[m+1]==0?V=A[F+2]:V=Math.atan2(G,D),V-=Math.atan2(z,Y),k){ne=Math.cos(V),ae=Math.sin(V);var pe=b.data.length;I+=(pe*(ne*Y-ae*z)-D)*r,O+=(pe*(ae*Y+ne*z)-G)*r}else V+=P;V>re.PI?V-=re.PI2:V<-re.PI&&(V+=re.PI2),V*=r,ne=Math.cos(V),ae=Math.sin(V),M.a=ne*Y-ae*z,M.c=ne*U-ae*j,M.b=ae*Y+ne*z,M.d=ae*U+ne*j}b.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(t,r,n,i,a){var o=this.target,s=this.position,c=this.spaces,l=xe.setArraySize(this.positions,r*3+2),u=null,f=t.closed,h=t.worldVerticesLength,p=h/6,d=e.NONE;if(!t.constantSpeed){var g=t.lengths;p-=f?1:2;var _=g[p];if(i&&(s*=_),a)for(var v=0;v<r;v++)c[v]*=_;u=xe.setArraySize(this.world,8);for(var v=0,m=0,y=0;v<r;v++,m+=3){var b=c[v];s+=b;var w=s;if(f)w%=_,w<0&&(w+=_),y=0;else if(w<0){d!=e.BEFORE&&(d=e.BEFORE,t.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(w,u,0,l,m);continue}else if(w>_){d!=e.AFTER&&(d=e.AFTER,t.computeWorldVertices(o,h-6,4,u,0,2)),this.addAfterPosition(w-_,u,0,l,m);continue}for(;;y++){var E=g[y];if(!(w>E)){if(y==0)w/=E;else{var C=g[y-1];w=(w-C)/(E-C)}break}}y!=d&&(d=y,f&&y==p?(t.computeWorldVertices(o,h-4,4,u,0,2),t.computeWorldVertices(o,0,4,u,4,2)):t.computeWorldVertices(o,y*6+2,8,u,0,2)),this.addCurvePosition(w,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,m,n||v>0&&b==0)}return l}f?(h+=2,u=xe.setArraySize(this.world,h),t.computeWorldVertices(o,2,h-4,u,0,2),t.computeWorldVertices(o,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(p--,h-=4,u=xe.setArraySize(this.world,h),t.computeWorldVertices(o,2,h,u,0,2));for(var T=xe.setArraySize(this.curves,p),A=0,I=u[0],O=u[1],P=0,k=0,F=0,M=0,D=0,G=0,Q=0,te=0,Y=0,U=0,z=0,j=0,V=0,ne=0,v=0,ae=2;v<p;v++,ae+=6)P=u[ae],k=u[ae+1],F=u[ae+2],M=u[ae+3],D=u[ae+4],G=u[ae+5],Q=(I-P*2+F)*.1875,te=(O-k*2+M)*.1875,Y=((P-F)*3-I+D)*.09375,U=((k-M)*3-O+G)*.09375,z=Q*2+Y,j=te*2+U,V=(P-I)*.75+Q+Y*.16666667,ne=(k-O)*.75+te+U*.16666667,A+=Math.sqrt(V*V+ne*ne),V+=z,ne+=j,z+=Y,j+=U,A+=Math.sqrt(V*V+ne*ne),V+=z,ne+=j,A+=Math.sqrt(V*V+ne*ne),V+=z+Y,ne+=j+U,A+=Math.sqrt(V*V+ne*ne),T[v]=A,I=D,O=G;if(i&&(s*=A),a)for(var v=0;v<r;v++)c[v]*=A;for(var pe=this.segments,se=0,v=0,m=0,y=0,_e=0;v<r;v++,m+=3){var b=c[v];s+=b;var w=s;if(f)w%=A,w<0&&(w+=A),y=0;else if(w<0){this.addBeforePosition(w,u,0,l,m);continue}else if(w>A){this.addAfterPosition(w-A,u,h-4,l,m);continue}for(;;y++){var Le=T[y];if(!(w>Le)){if(y==0)w/=Le;else{var C=T[y-1];w=(w-C)/(Le-C)}break}}if(y!=d){d=y;var Pe=y*6;for(I=u[Pe],O=u[Pe+1],P=u[Pe+2],k=u[Pe+3],F=u[Pe+4],M=u[Pe+5],D=u[Pe+6],G=u[Pe+7],Q=(I-P*2+F)*.03,te=(O-k*2+M)*.03,Y=((P-F)*3-I+D)*.006,U=((k-M)*3-O+G)*.006,z=Q*2+Y,j=te*2+U,V=(P-I)*.3+Q+Y*.16666667,ne=(k-O)*.3+te+U*.16666667,se=Math.sqrt(V*V+ne*ne),pe[0]=se,Pe=1;Pe<8;Pe++)V+=z,ne+=j,z+=Y,j+=U,se+=Math.sqrt(V*V+ne*ne),pe[Pe]=se;V+=z,ne+=j,se+=Math.sqrt(V*V+ne*ne),pe[8]=se,V+=z+Y,ne+=j+U,se+=Math.sqrt(V*V+ne*ne),pe[9]=se,_e=0}for(w*=se;;_e++){var Ee=pe[_e];if(!(w>Ee)){if(_e==0)w/=Ee;else{var C=pe[_e-1];w=_e+(w-C)/(Ee-C)}break}}this.addCurvePosition(w*.1,I,O,P,k,F,M,D,G,l,m,n||v>0&&b==0)}return l},e.prototype.addBeforePosition=function(t,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+t*Math.cos(u),i[a+1]=s+t*Math.sin(u),i[a+2]=u},e.prototype.addAfterPosition=function(t,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+t*Math.cos(u),i[a+1]=s+t*Math.sin(u),i[a+2]=u},e.prototype.addCurvePosition=function(t,r,n,i,a,o,s,c,l,u,f,h){(t==0||isNaN(t))&&(t=1e-4);var p=t*t,d=p*t,g=1-t,_=g*g,v=_*g,m=g*t,y=m*3,b=g*y,w=y*t,E=r*v+i*b+o*w+c*d,C=n*v+a*b+s*w+l*d;u[f]=E,u[f+1]=C,h&&(u[f+2]=Math.atan2(C-(n*_+a*m*2+s*p),E-(r*_+i*m*2+o*p)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}(),CV=function(){function e(t,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new l0,this.active=!1,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?re.degRad:-re.degRad,h=this.data.offsetRotation*f,p=this.data.offsetShearY*f,d=this.bones,g=0,_=d.length;g<_;g++){var v=d[g],m=!1,y=v.matrix;if(t!=0){var b=y.a,w=y.c,E=y.b,C=y.d,T=Math.atan2(l,s)-Math.atan2(E,b)+h;T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2),T*=t;var A=Math.cos(T),I=Math.sin(T);y.a=A*b-I*E,y.c=A*w-I*C,y.b=I*b+A*E,y.d=I*w+A*C,m=!0}if(r!=0){var O=this.temp;a.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),y.tx+=(O.x-y.tx)*r,y.ty+=(O.y-y.ty)*r,m=!0}if(n>0){var P=Math.sqrt(y.a*y.a+y.b*y.b),k=Math.sqrt(s*s+l*l);P>1e-5&&(P=(P+(k-P+this.data.offsetScaleX)*n)/P),y.a*=P,y.b*=P,P=Math.sqrt(y.c*y.c+y.d*y.d),k=Math.sqrt(c*c+u*u),P>1e-5&&(P=(P+(k-P+this.data.offsetScaleY)*n)/P),y.c*=P,y.d*=P,m=!0}if(i>0){var w=y.c,C=y.d,F=Math.atan2(C,w),T=Math.atan2(u,c)-Math.atan2(l,s)-(F-Math.atan2(y.b,y.a));T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2),T=F+(T+p)*i;var P=Math.sqrt(w*w+C*C);y.c=Math.cos(T)*P,y.d=Math.sin(T)*P,m=!0}m&&(v.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?re.degRad:-re.degRad,h=this.data.offsetRotation*f,p=this.data.offsetShearY*f,d=this.bones,g=0,_=d.length;g<_;g++){var v=d[g],m=!1,y=v.matrix;if(t!=0){var b=y.a,w=y.c,E=y.b,C=y.d,T=Math.atan2(l,s)+h;T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2),T*=t;var A=Math.cos(T),I=Math.sin(T);y.a=A*b-I*E,y.c=A*w-I*C,y.b=I*b+A*E,y.d=I*w+A*C,m=!0}if(r!=0){var O=this.temp;a.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),y.tx+=O.x*r,y.ty+=O.y*r,m=!0}if(n>0){var P=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*n+1;y.a*=P,y.b*=P,P=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1,y.c*=P,y.d*=P,m=!0}if(i>0){var T=Math.atan2(u,c)-Math.atan2(l,s);T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2);var w=y.c,C=y.d;T=Math.atan2(C,w)+(T-re.PI/2+p)*i;var P=Math.sqrt(w*w+C*C);y.c=Math.cos(T)*P,y.d=Math.sin(T)*P,m=!0}m&&(v.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(t!=0){var f=a.arotation-u+this.data.offsetRotation;f-=(16384-(16384.499999999996-f/360|0))*360,u+=f*t}var h=l.ax,p=l.ay;r!=0&&(h+=(a.ax-h+this.data.offsetX)*r,p+=(a.ay-p+this.data.offsetY)*r);var d=l.ascaleX,g=l.ascaleY;n>0&&(d>1e-5&&(d=(d+(a.ascaleX-d+this.data.offsetScaleX)*n)/d),g>1e-5&&(g=(g+(a.ascaleY-g+this.data.offsetScaleY)*n)/g));var _=l.ashearY;if(i>0){var f=a.ashearY-_+this.data.offsetShearY;f-=(16384-(16384.499999999996-f/360|0))*360,l.shearY+=f*i}l.updateWorldTransformWith(h,p,u,d,g,l.ashearX,_)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;t!=0&&(u+=(a.arotation+this.data.offsetRotation)*t);var f=l.ax,h=l.ay;r!=0&&(f+=(a.ax+this.data.offsetX)*r,h+=(a.ay+this.data.offsetY)*r);var p=l.ascaleX,d=l.ascaleY;n>0&&(p>1e-5&&(p*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),d>1e-5&&(d*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var g=l.ashearY;i>0&&(g+=(a.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(f,h,u,p,d,l.ashearX,g)}},e}(),TV=function(){function e(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var n=t.bones[r],i=void 0;if(n.parent==null)i=new wT(n,this,null);else{var a=this.bones[n.parent.index];i=new wT(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<t.slots.length;r++){var o=t.slots[r],i=this.bones[o.boneData.index],s=new uP(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<t.ikConstraints.length;r++){var c=t.ikConstraints[r];this.ikConstraints.push(new EV(c,this))}this.transformConstraints=new Array;for(var r=0;r<t.transformConstraints.length;r++){var l=t.transformConstraints[r];this.transformConstraints.push(new CV(l,this))}this.pathConstraints=new Array;for(var r=0;r<t.pathConstraints.length;r++){var u=t.pathConstraints[r];this.pathConstraints.push(new SV(u,this))}this.color=new rt(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){var t=this._updateCache;t.length=0,this.updateCacheReset.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin!=null)for(var o=this.skin.bones,n=0,i=this.skin.bones.length;n<i;n++){var a=this.bones[o[n].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a!=null)}var s=this.ikConstraints,c=this.transformConstraints,l=this.pathConstraints,u=s.length,f=c.length,h=l.length,p=u+f+h;e:for(var n=0;n<p;n++){for(var d=0;d<u;d++){var g=s[d];if(g.data.order==n){this.sortIkConstraint(g);continue e}}for(var d=0;d<f;d++){var g=c[d];if(g.data.order==n){this.sortTransformConstraint(g);continue e}}for(var d=0;d<h;d++){var g=l[d];if(g.data.order==n){this.sortPathConstraint(g);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},e.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&xe.contains(this.skin.constraints,t.data,!0)),!!t.active){var r=t.target;this.sortBone(r);var n=t.bones,i=n[0];if(this.sortBone(i),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(t),this.sortReset(i.children),n[n.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin!=null&&xe.contains(this.skin.constraints,t.data,!0)),!!t.active){var r=t.target,n=r.data.index,i=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof u0&&this.sortPathConstraintAttachmentWith(s,i);for(var c=t.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(t);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0}},e.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&xe.contains(this.skin.constraints,t.data,!0)),!!t.active){this.sortBone(t.target);var r=t.bones,n=r.length;if(t.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(var o=0;o<n;o++)r[o].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,r,n){var i=t.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},e.prototype.sortPathConstraintAttachmentWith=function(t,r){if(t instanceof u0){var n=t.bones;if(n==null)this.sortBone(r);else for(var i=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var c=n[a];this.sortBone(i[c])}}},e.prototype.sortBone=function(t){if(!t.sorted){var r=t.parent;r!=null&&this.sortBone(r),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var r=0,n=t.length;r<n;r++){var i=t[r];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,r=0,n=t.length;r<n;r++){var i=t[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,r=0,n=t.length;r<n;r++)t[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;xe.arrayCopy(t,0,this.drawOrder,0,t.length);for(var r=0,n=t.length;r<n;r++)t[r].setToSetupPose()},e.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},e.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var r=this.data.findSkin(t);if(r==null)throw new Error("Skin not found: "+t);this.setSkin(r)},e.prototype.setSkin=function(t){if(t!=this.skin){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o!=null){var s=t.getAttachment(n,o);s!=null&&a.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,r){return this.getAttachment(this.data.findSlotIndex(t),r)},e.prototype.getAttachment=function(t,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(t,r);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,r):null},e.prototype.setAttachment=function(t,r){if(t==null)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==t){var s=null;if(r!=null&&(s=this.getAttachment(i,r),s==null))throw new Error("Attachment not found: "+r+", for slot: "+t);o.setAttachment(s);return}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.getBounds=function(t,r,n){if(n===void 0&&(n=new Array(2)),t==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l];if(f.bone.active){var h=0,p=null,d=f.getAttachment();if(d instanceof cP)h=8,p=xe.setArraySize(n,h,0),d.computeWorldVertices(f.bone,p,0,2);else if(d instanceof sx){var g=d;h=g.worldVerticesLength,p=xe.setArraySize(n,h,0),g.computeWorldVertices(f,0,h,p,0,2)}if(p!=null)for(var _=0,v=p.length;_<v;_+=2){var m=p[_],y=p[_+1];a=Math.min(a,m),o=Math.min(o,y),s=Math.max(s,m),c=Math.max(c,y)}}}t.set(a,o),r.set(s-a,c-o)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),e.deprecatedWarning1=!1,e}(),bP=function(){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return e.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e.prototype.findSkin=function(t){if(t==null)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findEvent=function(t){if(t==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findAnimation=function(t){if(t==null)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e}(),wP=function(){function e(t,r,n){if(this.color=new rt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=t,this.name=r,this.boneData=n}return e}(),EP=function(e){hn(t,e);function t(r){var n=e.call(this,r,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return t}(ux),ET=function(){function e(t,r,n){this.slotIndex=t,this.name=r,this.attachment=n}return e}(),g_=function(){function e(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}return e.prototype.setAttachment=function(t,r,n){if(n==null)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][r]=n},e.prototype.addSkin=function(t){for(var r=0;r<t.bones.length;r++){for(var n=t.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<t.constraints.length;r++){for(var o=t.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=t.getAttachments(),r=0;r<s.length;r++){var c=s[r];this.setAttachment(c.slotIndex,c.name,c.attachment)}},e.prototype.copySkin=function(t){for(var r=0;r<t.bones.length;r++){for(var n=t.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<t.constraints.length;r++){for(var o=t.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=t.getAttachments(),r=0;r<s.length;r++){var c=s[r];c.attachment!=null&&(c.attachment instanceof sx?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},e.prototype.getAttachment=function(t,r){var n=this.attachments[t];return n?n[r]:null},e.prototype.removeAttachment=function(t,r){var n=this.attachments[t];n&&(n[r]=null)},e.prototype.getAttachments=function(){for(var t=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var i in n){var a=n[i];a&&t.push(new ET(r,i,a))}}return t},e.prototype.getAttachmentsForSlot=function(t,r){var n=this.attachments[t];if(n)for(var i in n){var a=n[i];a&&r.push(new ET(t,i,a))}},e.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},e.prototype.attachAll=function(t,r){for(var n=0,i=0;i<t.slots.length;i++){var a=t.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u!=null&&a.setAttachment(u);break}}}n++}},e}(),AV=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(t){var r=this.scale,n=new bP;n.name="";var i=new v_(t);if(n.hash=i.readString(),n.version=i.readString(),n.version==="3.8.75"){var a="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(a)}n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();var o=i.readBoolean();o&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());var s=0;s=i.readInt(!0);for(var c=0;c<s;c++)i.strings.push(i.readString());s=i.readInt(!0);for(var c=0;c<s;c++){var l=i.readString(),u=c==0?null:n.bones[i.readInt(!0)],f=new gP(c,l,u);f.rotation=i.readFloat(),f.x=i.readFloat()*r,f.y=i.readFloat()*r,f.scaleX=i.readFloat(),f.scaleY=i.readFloat(),f.shearX=i.readFloat(),f.shearY=i.readFloat(),f.length=i.readFloat()*r,f.transformMode=e.TransformModeValues[i.readInt(!0)],f.skinRequired=i.readBoolean(),o&&rt.rgba8888ToColor(f.color,i.readInt32()),n.bones.push(f)}s=i.readInt(!0);for(var c=0;c<s;c++){var h=i.readString(),p=n.bones[i.readInt(!0)],f=new wP(c,h,p);rt.rgba8888ToColor(f.color,i.readInt32());var d=i.readInt32();d!=-1&&rt.rgb888ToColor(f.darkColor=new rt,d),f.attachmentName=i.readStringRef(),f.blendMode=e.BlendModeValues[i.readInt(!0)],n.slots.push(f)}s=i.readInt(!0);for(var c=0,g=void 0;c<s;c++){var f=new yP(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),g=i.readInt(!0);for(var _=0;_<g;_++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)],f.mix=i.readFloat(),f.softness=i.readFloat()*r,f.bendDirection=i.readByte(),f.compress=i.readBoolean(),f.stretch=i.readBoolean(),f.uniform=i.readBoolean(),n.ikConstraints.push(f)}s=i.readInt(!0);for(var c=0,g=void 0;c<s;c++){var f=new EP(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),g=i.readInt(!0);for(var _=0;_<g;_++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)],f.local=i.readBoolean(),f.relative=i.readBoolean(),f.offsetRotation=i.readFloat(),f.offsetX=i.readFloat()*r,f.offsetY=i.readFloat()*r,f.offsetScaleX=i.readFloat(),f.offsetScaleY=i.readFloat(),f.offsetShearY=i.readFloat(),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),f.scaleMix=i.readFloat(),f.shearMix=i.readFloat(),n.transformConstraints.push(f)}s=i.readInt(!0);for(var c=0,g=void 0;c<s;c++){var f=new xP(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),g=i.readInt(!0);for(var _=0;_<g;_++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.slots[i.readInt(!0)],f.positionMode=e.PositionModeValues[i.readInt(!0)],f.spacingMode=e.SpacingModeValues[i.readInt(!0)],f.rotateMode=e.RotateModeValues[i.readInt(!0)],f.offsetRotation=i.readFloat(),f.position=i.readFloat(),f.positionMode==un.Fixed&&(f.position*=r),f.spacing=i.readFloat(),(f.spacingMode==ri.Length||f.spacingMode==ri.Fixed)&&(f.spacing*=r),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),n.pathConstraints.push(f)}var v=this.readSkin(i,n,!0,o);v!=null&&(n.defaultSkin=v,n.skins.push(v));{var c=n.skins.length;for(xe.setArraySize(n.skins,s=c+i.readInt(!0));c<s;c++)n.skins[c]=this.readSkin(i,n,!1,o)}s=this.linkedMeshes.length;for(var c=0;c<s;c++){var m=this.linkedMeshes[c],y=m.skin==null?n.defaultSkin:n.findSkin(m.skin);if(y==null)throw new Error("Skin not found: "+m.skin);var b=y.getAttachment(m.slotIndex,m.parent);if(b==null)throw new Error("Parent mesh not found: "+m.parent);m.mesh.deformAttachment=m.inheritDeform?b:m.mesh,m.mesh.setParentMesh(b)}this.linkedMeshes.length=0,s=i.readInt(!0);for(var c=0;c<s;c++){var f=new _P(i.readStringRef());f.intValue=i.readInt(!1),f.floatValue=i.readFloat(),f.stringValue=i.readString(),f.audioPath=i.readString(),f.audioPath!=null&&(f.volume=i.readFloat(),f.balance=i.readFloat()),n.events.push(f)}s=i.readInt(!0);for(var c=0;c<s;c++)n.animations.push(this.readAnimation(i,i.readString(),n));return n},e.prototype.readSkin=function(t,r,n,i){var a=null,o=0;if(n){if(o=t.readInt(!0),o==0)return null;a=new g_("default")}else{a=new g_(t.readStringRef()),a.bones.length=t.readInt(!0);for(var s=0,c=a.bones.length;s<c;s++)a.bones[s]=r.bones[t.readInt(!0)];for(var s=0,c=t.readInt(!0);s<c;s++)a.constraints.push(r.ikConstraints[t.readInt(!0)]);for(var s=0,c=t.readInt(!0);s<c;s++)a.constraints.push(r.transformConstraints[t.readInt(!0)]);for(var s=0,c=t.readInt(!0);s<c;s++)a.constraints.push(r.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(var s=0;s<o;s++)for(var l=t.readInt(!0),u=0,f=t.readInt(!0);u<f;u++){var h=t.readStringRef(),p=this.readAttachment(t,r,a,l,h,i);p!=null&&a.setAttachment(l,h,p)}return a},e.prototype.readAttachment=function(t,r,n,i,a,o){var s=this.scale,c=t.readStringRef();c==null&&(c=a);var l=t.readByte(),u=e.AttachmentTypeValues[l];switch(u){case Jt.Region:{var f=t.readStringRef(),h=t.readFloat(),p=t.readFloat(),d=t.readFloat(),g=t.readFloat(),_=t.readFloat(),v=t.readFloat(),m=t.readFloat(),y=t.readInt32();f==null&&(f=c);var b=this.attachmentLoader.newRegionAttachment(n,c,f);return b==null?null:(b.path=f,b.x=p*s,b.y=d*s,b.scaleX=g,b.scaleY=_,b.rotation=h,b.width=v*s,b.height=m*s,rt.rgba8888ToColor(b.color,y),b)}case Jt.BoundingBox:{var w=t.readInt(!0),E=this.readVertices(t,w),y=o?t.readInt32():0,C=this.attachmentLoader.newBoundingBoxAttachment(n,c);return C==null?null:(C.worldVerticesLength=w<<1,C.vertices=E.vertices,C.bones=E.bones,o&&rt.rgba8888ToColor(C.color,y),C)}case Jt.Mesh:{var f=t.readStringRef(),y=t.readInt32(),w=t.readInt(!0),T=this.readFloatArray(t,w<<1,1),A=this.readShortArray(t),E=this.readVertices(t,w),I=t.readInt(!0),O=null,v=0,m=0;o&&(O=this.readShortArray(t),v=t.readFloat(),m=t.readFloat()),f==null&&(f=c);var P=this.attachmentLoader.newMeshAttachment(n,c,f);return P==null?null:(P.path=f,rt.rgba8888ToColor(P.color,y),P.bones=E.bones,P.vertices=E.vertices,P.worldVerticesLength=w<<1,P.triangles=A,P.regionUVs=new Float32Array(T),P.hullLength=I<<1,o&&(P.edges=O,P.width=v*s,P.height=m*s),P)}case Jt.LinkedMesh:{var f=t.readStringRef(),y=t.readInt32(),k=t.readStringRef(),F=t.readStringRef(),M=t.readBoolean(),v=0,m=0;o&&(v=t.readFloat(),m=t.readFloat()),f==null&&(f=c);var P=this.attachmentLoader.newMeshAttachment(n,c,f);return P==null?null:(P.path=f,rt.rgba8888ToColor(P.color,y),o&&(P.width=v*s,P.height=m*s),this.linkedMeshes.push(new EFe(P,k,i,F,M)),P)}case Jt.Path:{for(var D=t.readBoolean(),G=t.readBoolean(),w=t.readInt(!0),E=this.readVertices(t,w),Q=xe.newArray(w/3,0),te=0,Y=Q.length;te<Y;te++)Q[te]=t.readFloat()*s;var y=o?t.readInt32():0,f=this.attachmentLoader.newPathAttachment(n,c);return f==null?null:(f.closed=D,f.constantSpeed=G,f.worldVerticesLength=w<<1,f.vertices=E.vertices,f.bones=E.bones,f.lengths=Q,o&&rt.rgba8888ToColor(f.color,y),f)}case Jt.Point:{var h=t.readFloat(),p=t.readFloat(),d=t.readFloat(),y=o?t.readInt32():0,U=this.attachmentLoader.newPointAttachment(n,c);return U==null?null:(U.x=p*s,U.y=d*s,U.rotation=h,o&&rt.rgba8888ToColor(U.color,y),U)}case Jt.Clipping:{var z=t.readInt(!0),w=t.readInt(!0),E=this.readVertices(t,w),y=o?t.readInt32():0,j=this.attachmentLoader.newClippingAttachment(n,c);return j==null?null:(j.endSlot=r.slots[z],j.worldVerticesLength=w<<1,j.vertices=E.vertices,j.bones=E.bones,o&&rt.rgba8888ToColor(j.color,y),j)}}return null},e.prototype.readVertices=function(t,r){var n=r<<1,i=new SFe,a=this.scale;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,n,a),i;for(var o=new Array,s=new Array,c=0;c<r;c++){var l=t.readInt(!0);s.push(l);for(var u=0;u<l;u++)s.push(t.readInt(!0)),o.push(t.readFloat()*a),o.push(t.readFloat()*a),o.push(t.readFloat())}return i.vertices=xe.toFloatArray(o),i.bones=s,i},e.prototype.readFloatArray=function(t,r,n){var i=new Array(r);if(n==1)for(var a=0;a<r;a++)i[a]=t.readFloat();else for(var a=0;a<r;a++)i[a]=t.readFloat()*n;return i},e.prototype.readShortArray=function(t){for(var r=t.readInt(!0),n=new Array(r),i=0;i<r;i++)n[i]=t.readShort();return n},e.prototype.readAnimation=function(t,r,n){for(var i=new Array,a=this.scale,o=0,s=new rt,c=new rt,l=0,u=t.readInt(!0);l<u;l++)for(var f=t.readInt(!0),h=0,p=t.readInt(!0);h<p;h++){var d=t.readByte(),g=t.readInt(!0);switch(d){case e.SLOT_ATTACHMENT:{var _=new Qu(g);_.slotIndex=f;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readStringRef());i.push(_),o=Math.max(o,_.frames[g-1]);break}case e.SLOT_COLOR:{var _=new c0(g);_.slotIndex=f;for(var v=0;v<g;v++){var m=t.readFloat();rt.rgba8888ToColor(s,t.readInt32()),_.setFrame(v,m,s.r,s.g,s.b,s.a),v<g-1&&this.readCurve(t,v,_)}i.push(_),o=Math.max(o,_.frames[(g-1)*c0.ENTRIES]);break}case e.SLOT_TWO_COLOR:{var _=new f0(g);_.slotIndex=f;for(var v=0;v<g;v++){var m=t.readFloat();rt.rgba8888ToColor(s,t.readInt32()),rt.rgb888ToColor(c,t.readInt32()),_.setFrame(v,m,s.r,s.g,s.b,s.a,c.r,c.g,c.b),v<g-1&&this.readCurve(t,v,_)}i.push(_),o=Math.max(o,_.frames[(g-1)*f0.ENTRIES]);break}}}for(var l=0,u=t.readInt(!0);l<u;l++)for(var y=t.readInt(!0),h=0,p=t.readInt(!0);h<p;h++){var d=t.readByte(),g=t.readInt(!0);switch(d){case e.BONE_ROTATE:{var _=new Ra(g);_.boneIndex=y;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readFloat()),v<g-1&&this.readCurve(t,v,_);i.push(_),o=Math.max(o,_.frames[(g-1)*Ra.ENTRIES]);break}case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:{var _=void 0,b=1;d==e.BONE_SCALE?_=new fP(g):d==e.BONE_SHEAR?_=new hP(g):(_=new yc(g),b=a),_.boneIndex=y;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readFloat()*b,t.readFloat()*b),v<g-1&&this.readCurve(t,v,_);i.push(_),o=Math.max(o,_.frames[(g-1)*yc.ENTRIES]);break}}}for(var l=0,u=t.readInt(!0);l<u;l++){var w=t.readInt(!0),g=t.readInt(!0),_=new h0(g);_.ikConstraintIndex=w;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readFloat(),t.readFloat()*a,t.readByte(),t.readBoolean(),t.readBoolean()),v<g-1&&this.readCurve(t,v,_);i.push(_),o=Math.max(o,_.frames[(g-1)*h0.ENTRIES])}for(var l=0,u=t.readInt(!0);l<u;l++){var w=t.readInt(!0),g=t.readInt(!0),_=new d0(g);_.transformConstraintIndex=w;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),v<g-1&&this.readCurve(t,v,_);i.push(_),o=Math.max(o,_.frames[(g-1)*d0.ENTRIES])}for(var l=0,u=t.readInt(!0);l<u;l++)for(var w=t.readInt(!0),E=n.pathConstraints[w],h=0,p=t.readInt(!0);h<p;h++){var d=t.readByte(),g=t.readInt(!0);switch(d){case e.PATH_POSITION:case e.PATH_SPACING:{var _=void 0,b=1;d==e.PATH_SPACING?(_=new pP(g),(E.spacingMode==ri.Length||E.spacingMode==ri.Fixed)&&(b=a)):(_=new fh(g),E.positionMode==un.Fixed&&(b=a)),_.pathConstraintIndex=w;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readFloat()*b),v<g-1&&this.readCurve(t,v,_);i.push(_),o=Math.max(o,_.frames[(g-1)*fh.ENTRIES]);break}case e.PATH_MIX:{var _=new p0(g);_.pathConstraintIndex=w;for(var v=0;v<g;v++)_.setFrame(v,t.readFloat(),t.readFloat(),t.readFloat()),v<g-1&&this.readCurve(t,v,_);i.push(_),o=Math.max(o,_.frames[(g-1)*p0.ENTRIES]);break}}}for(var l=0,u=t.readInt(!0);l<u;l++)for(var C=n.skins[t.readInt(!0)],h=0,p=t.readInt(!0);h<p;h++)for(var f=t.readInt(!0),T=0,A=t.readInt(!0);T<A;T++){var I=C.getAttachment(f,t.readStringRef()),O=I.bones!=null,P=I.vertices,k=O?P.length/3*2:P.length,g=t.readInt(!0),_=new dP(g);_.slotIndex=f,_.attachment=I;for(var v=0;v<g;v++){var m=t.readFloat(),F=void 0,M=t.readInt(!0);if(M==0)F=O?xe.newFloatArray(k):P;else{F=xe.newFloatArray(k);var D=t.readInt(!0);if(M+=D,a==1)for(var G=D;G<M;G++)F[G]=t.readFloat();else for(var G=D;G<M;G++)F[G]=t.readFloat()*a;if(!O)for(var G=0,Q=F.length;G<Q;G++)F[G]+=P[G]}_.setFrame(v,m,F),v<g-1&&this.readCurve(t,v,_)}i.push(_),o=Math.max(o,_.frames[g-1])}var te=t.readInt(!0);if(te>0){for(var _=new zf(te),Y=n.slots.length,l=0;l<te;l++){for(var m=t.readFloat(),U=t.readInt(!0),z=xe.newArray(Y,0),h=Y-1;h>=0;h--)z[h]=-1;for(var j=xe.newArray(Y-U,0),V=0,ne=0,h=0;h<U;h++){for(var f=t.readInt(!0);V!=f;)j[ne++]=V++;z[V+t.readInt(!0)]=V++}for(;V<Y;)j[ne++]=V++;for(var h=Y-1;h>=0;h--)z[h]==-1&&(z[h]=j[--ne]);_.setFrame(l,m,z)}i.push(_),o=Math.max(o,_.frames[te-1])}var ae=t.readInt(!0);if(ae>0){for(var _=new lx(ae),l=0;l<ae;l++){var m=t.readFloat(),pe=n.events[t.readInt(!0)],se=new mP(m,pe);se.intValue=t.readInt(!1),se.floatValue=t.readFloat(),se.stringValue=t.readBoolean()?t.readString():pe.stringValue,se.data.audioPath!=null&&(se.volume=t.readFloat(),se.balance=t.readFloat()),_.setFrame(l,se)}i.push(_),o=Math.max(o,_.frames[ae-1])}return new Un(r,i,o)},e.prototype.readCurve=function(t,r,n){switch(t.readByte()){case e.CURVE_STEPPED:n.setStepped(r);break;case e.CURVE_BEZIER:this.setCurve(n,r,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}},e.prototype.setCurve=function(t,r,n,i,a,o){t.setCurve(r,n,i,a,o)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[Ut.Normal,Ut.OnlyTranslation,Ut.NoRotationOrReflection,Ut.NoScale,Ut.NoScaleOrReflection],e.PositionModeValues=[un.Fixed,un.Percent],e.SpacingModeValues=[ri.Length,ri.Fixed,ri.Percent],e.RotateModeValues=[Tn.Tangent,Tn.Chain,Tn.ChainScale],e.BlendModeValues=[ut.NORMAL,ut.ADD,ut.MULTIPLY,ut.SCREEN],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}(),EFe=function(){function e(t,r,n,i,a){this.mesh=t,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritDeform=a}return e}(),SFe=function(){function e(t,r){t===void 0&&(t=null),r===void 0&&(r=null),this.bones=t,this.vertices=r}return e}(),CFe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(sP),IV=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(t){var r=this.scale,n=new bP,i=typeof t=="string"?JSON.parse(t):t,a=i.skeleton;if(a!=null){if(n.hash=a.hash,n.version=a.spine,n.version.substr(0,3)!=="3.8"){var o="Spine 3.8 loader cant load version "+a.spine+". Please configure your pixi-spine bundle";console.error(o)}if(n.version==="3.8.75"){var o="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(o)}n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(i.bones)for(var s=0;s<i.bones.length;s++){var c=i.bones[s],l=null,u=this.getValue(c,"parent",null);if(u!=null&&(l=n.findBone(u),l==null))throw new Error("Parent bone not found: "+u);var f=new gP(n.bones.length,c.name,l);f.length=this.getValue(c,"length",0)*r,f.x=this.getValue(c,"x",0)*r,f.y=this.getValue(c,"y",0)*r,f.rotation=this.getValue(c,"rotation",0),f.scaleX=this.getValue(c,"scaleX",1),f.scaleY=this.getValue(c,"scaleY",1),f.shearX=this.getValue(c,"shearX",0),f.shearY=this.getValue(c,"shearY",0),f.transformMode=e.transformModeFromString(this.getValue(c,"transform","normal")),f.skinRequired=this.getValue(c,"skin",!1),n.bones.push(f)}if(i.slots)for(var s=0;s<i.slots.length;s++){var h=i.slots[s],p=h.name,d=h.bone,g=n.findBone(d);if(g==null)throw new Error("Slot bone not found: "+d);var f=new wP(n.slots.length,p,g),_=this.getValue(h,"color",null);_!=null&&f.color.setFromString(_);var v=this.getValue(h,"dark",null);v!=null&&(f.darkColor=new rt(1,1,1,1),f.darkColor.setFromString(v)),f.attachmentName=this.getValue(h,"attachment",null),f.blendMode=e.blendModeFromString(this.getValue(h,"blend","normal")),n.slots.push(f)}if(i.ik)for(var s=0;s<i.ik.length;s++){var m=i.ik[s],f=new yP(m.name);f.order=this.getValue(m,"order",0),f.skinRequired=this.getValue(m,"skin",!1);for(var y=0;y<m.bones.length;y++){var d=m.bones[y],b=n.findBone(d);if(b==null)throw new Error("IK bone not found: "+d);f.bones.push(b)}var w=m.target;if(f.target=n.findBone(w),f.target==null)throw new Error("IK target bone not found: "+w);f.mix=this.getValue(m,"mix",1),f.softness=this.getValue(m,"softness",0)*r,f.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,f.compress=this.getValue(m,"compress",!1),f.stretch=this.getValue(m,"stretch",!1),f.uniform=this.getValue(m,"uniform",!1),n.ikConstraints.push(f)}if(i.transform)for(var s=0;s<i.transform.length;s++){var m=i.transform[s],f=new EP(m.name);f.order=this.getValue(m,"order",0),f.skinRequired=this.getValue(m,"skin",!1);for(var y=0;y<m.bones.length;y++){var d=m.bones[y],b=n.findBone(d);if(b==null)throw new Error("Transform constraint bone not found: "+d);f.bones.push(b)}var w=m.target;if(f.target=n.findBone(w),f.target==null)throw new Error("Transform constraint target bone not found: "+w);f.local=this.getValue(m,"local",!1),f.relative=this.getValue(m,"relative",!1),f.offsetRotation=this.getValue(m,"rotation",0),f.offsetX=this.getValue(m,"x",0)*r,f.offsetY=this.getValue(m,"y",0)*r,f.offsetScaleX=this.getValue(m,"scaleX",0),f.offsetScaleY=this.getValue(m,"scaleY",0),f.offsetShearY=this.getValue(m,"shearY",0),f.rotateMix=this.getValue(m,"rotateMix",1),f.translateMix=this.getValue(m,"translateMix",1),f.scaleMix=this.getValue(m,"scaleMix",1),f.shearMix=this.getValue(m,"shearMix",1),n.transformConstraints.push(f)}if(i.path)for(var s=0;s<i.path.length;s++){var m=i.path[s],f=new xP(m.name);f.order=this.getValue(m,"order",0),f.skinRequired=this.getValue(m,"skin",!1);for(var y=0;y<m.bones.length;y++){var d=m.bones[y],b=n.findBone(d);if(b==null)throw new Error("Transform constraint bone not found: "+d);f.bones.push(b)}var w=m.target;if(f.target=n.findSlot(w),f.target==null)throw new Error("Path target slot not found: "+w);f.positionMode=e.positionModeFromString(this.getValue(m,"positionMode","percent")),f.spacingMode=e.spacingModeFromString(this.getValue(m,"spacingMode","length")),f.rotateMode=e.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),f.offsetRotation=this.getValue(m,"rotation",0),f.position=this.getValue(m,"position",0),f.positionMode==un.Fixed&&(f.position*=r),f.spacing=this.getValue(m,"spacing",0),(f.spacingMode==ri.Length||f.spacingMode==ri.Fixed)&&(f.spacing*=r),f.rotateMix=this.getValue(m,"rotateMix",1),f.translateMix=this.getValue(m,"translateMix",1),n.pathConstraints.push(f)}if(i.skins)for(var s=0;s<i.skins.length;s++){var E=i.skins[s],C=new g_(E.name);if(E.bones)for(var T=0;T<E.bones.length;T++){var b=n.findBone(E.bones[T]);if(b==null)throw new Error("Skin bone not found: "+E.bones[s]);C.bones.push(b)}if(E.ik)for(var T=0;T<E.ik.length;T++){var A=n.findIkConstraint(E.ik[T]);if(A==null)throw new Error("Skin IK constraint not found: "+E.ik[s]);C.constraints.push(A)}if(E.transform)for(var T=0;T<E.transform.length;T++){var A=n.findTransformConstraint(E.transform[T]);if(A==null)throw new Error("Skin transform constraint not found: "+E.transform[s]);C.constraints.push(A)}if(E.path)for(var T=0;T<E.path.length;T++){var A=n.findPathConstraint(E.path[T]);if(A==null)throw new Error("Skin path constraint not found: "+E.path[s]);C.constraints.push(A)}for(var p in E.attachments){var I=n.findSlot(p);if(I==null)throw new Error("Slot not found: "+p);var h=E.attachments[p];for(var O in h){var P=this.readAttachment(h[O],C,I.index,O,n);P!=null&&C.setAttachment(I.index,O,P)}}n.skins.push(C),C.name=="default"&&(n.defaultSkin=C)}for(var s=0,k=this.linkedMeshes.length;s<k;s++){var F=this.linkedMeshes[s],C=F.skin==null?n.defaultSkin:n.findSkin(F.skin);if(C==null)throw new Error("Skin not found: "+F.skin);var M=C.getAttachment(F.slotIndex,F.parent);if(M==null)throw new Error("Parent mesh not found: "+F.parent);F.mesh.deformAttachment=F.inheritDeform?M:F.mesh,F.mesh.setParentMesh(M)}if(this.linkedMeshes.length=0,i.events)for(var D in i.events){var G=i.events[D],f=new _P(D);f.intValue=this.getValue(G,"int",0),f.floatValue=this.getValue(G,"float",0),f.stringValue=this.getValue(G,"string",""),f.audioPath=this.getValue(G,"audio",null),f.audioPath!=null&&(f.volume=this.getValue(G,"volume",1),f.balance=this.getValue(G,"balance",0)),n.events.push(f)}if(i.animations)for(var Q in i.animations){var te=i.animations[Q];this.readAnimation(te,Q,n)}return n},e.prototype.readAttachment=function(t,r,n,i,a){var o=this.scale;i=this.getValue(t,"name",i);var s=this.getValue(t,"type","region");switch(s){case"region":{var c=this.getValue(t,"path",i),l=this.attachmentLoader.newRegionAttachment(r,i,c);if(l==null)return null;l.path=c,l.x=this.getValue(t,"x",0)*o,l.y=this.getValue(t,"y",0)*o,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*o,l.height=t.height*o;var u=this.getValue(t,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(f==null)return null;this.readVertices(t,f,t.vertexCount<<1);var u=this.getValue(t,"color",null);return u!=null&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var c=this.getValue(t,"path",i),h=this.attachmentLoader.newMeshAttachment(r,i,c);if(h==null)return null;h.path=c;var u=this.getValue(t,"color",null);u!=null&&h.color.setFromString(u),h.width=this.getValue(t,"width",0)*o,h.height=this.getValue(t,"height",0)*o;var p=this.getValue(t,"parent",null);if(p!=null)return this.linkedMeshes.push(new TFe(h,this.getValue(t,"skin",null),n,p,this.getValue(t,"deform",!0))),h;var d=t.uvs;return this.readVertices(t,h,d.length),h.triangles=t.triangles,h.regionUVs=new Float32Array(d),h.edges=this.getValue(t,"edges",null),h.hullLength=this.getValue(t,"hull",0)*2,h}case"path":{var c=this.attachmentLoader.newPathAttachment(r,i);if(c==null)return null;c.closed=this.getValue(t,"closed",!1),c.constantSpeed=this.getValue(t,"constantSpeed",!0);var g=t.vertexCount;this.readVertices(t,c,g<<1);for(var _=xe.newArray(g/3,0),v=0;v<t.lengths.length;v++)_[v]=t.lengths[v]*o;c.lengths=_;var u=this.getValue(t,"color",null);return u!=null&&c.color.setFromString(u),c}case"point":{var m=this.attachmentLoader.newPointAttachment(r,i);if(m==null)return null;m.x=this.getValue(t,"x",0)*o,m.y=this.getValue(t,"y",0)*o,m.rotation=this.getValue(t,"rotation",0);var u=this.getValue(t,"color",null);return u!=null&&m.color.setFromString(u),m}case"clipping":{var y=this.attachmentLoader.newClippingAttachment(r,i);if(y==null)return null;var b=this.getValue(t,"end",null);if(b!=null){var w=a.findSlot(b);if(w==null)throw new Error("Clipping end slot not found: "+b);y.endSlot=w}var g=t.vertexCount;this.readVertices(t,y,g<<1);var u=this.getValue(t,"color",null);return u!=null&&y.color.setFromString(u),y}}return null},e.prototype.readVertices=function(t,r,n){var i=this.scale;r.worldVerticesLength=n;var a=t.vertices;if(n==a.length){var o=xe.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=xe.toFloatArray(l)},e.prototype.readAnimation=function(t,r,n){var i=this.scale,a=new Array,o=0;if(t.slots)for(var s in t.slots){var c=t.slots[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+s);for(var u in c){var f=c[u];if(u=="attachment"){var h=new Qu(f.length);h.slotIndex=l;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p++,this.getValue(g,"time",0),g.name)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}else if(u=="color"){var h=new c0(f.length);h.slotIndex=l;for(var p=0,d=0;d<f.length;d++){var g=f[d],_=new rt;_.setFromString(g.color||"ffffffff"),h.setFrame(p,this.getValue(g,"time",0),_.r,_.g,_.b,_.a),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*c0.ENTRIES])}else if(u=="twoColor"){var h=new f0(f.length);h.slotIndex=l;for(var p=0,d=0;d<f.length;d++){var g=f[d],v=new rt,m=new rt;v.setFromString(g.light),m.setFromString(g.dark),h.setFrame(p,this.getValue(g,"time",0),v.r,v.g,v.b,v.a,m.r,m.g,m.b),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*f0.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+u+" ("+s+")")}}if(t.bones)for(var y in t.bones){var b=t.bones[y],w=n.findBoneIndex(y);if(w==-1)throw new Error("Bone not found: "+y);for(var u in b){var f=b[u];if(u==="rotate"){var h=new Ra(f.length);h.boneIndex=w;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p,this.getValue(g,"time",0),this.getValue(g,"angle",0)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Ra.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){var h=null,E=1,C=0;u==="scale"?(h=new fP(f.length),C=1):u==="shear"?h=new hP(f.length):(h=new yc(f.length),E=i),h.boneIndex=w;for(var p=0,d=0;d<f.length;d++){var g=f[d],T=this.getValue(g,"x",C),A=this.getValue(g,"y",C);h.setFrame(p,this.getValue(g,"time",0),T*E,A*E),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*yc.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+u+" ("+y+")")}}if(t.ik)for(var I in t.ik){var O=t.ik[I],P=n.findIkConstraint(I),h=new h0(O.length);h.ikConstraintIndex=n.ikConstraints.indexOf(P);for(var p=0,d=0;d<O.length;d++){var g=O[d];h.setFrame(p,this.getValue(g,"time",0),this.getValue(g,"mix",1),this.getValue(g,"softness",0)*i,this.getValue(g,"bendPositive",!0)?1:-1,this.getValue(g,"compress",!1),this.getValue(g,"stretch",!1)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*h0.ENTRIES])}if(t.transform)for(var I in t.transform){var O=t.transform[I],P=n.findTransformConstraint(I),h=new d0(O.length);h.transformConstraintIndex=n.transformConstraints.indexOf(P);for(var p=0,d=0;d<O.length;d++){var g=O[d];h.setFrame(p,this.getValue(g,"time",0),this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1),this.getValue(g,"scaleMix",1),this.getValue(g,"shearMix",1)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*d0.ENTRIES])}if(t.path)for(var I in t.path){var O=t.path[I],k=n.findPathConstraintIndex(I);if(k==-1)throw new Error("Path constraint not found: "+I);var F=n.pathConstraints[k];for(var u in O){var f=O[u];if(u==="position"||u==="spacing"){var h=null,E=1;u==="spacing"?(h=new pP(f.length),(F.spacingMode==ri.Length||F.spacingMode==ri.Fixed)&&(E=i)):(h=new fh(f.length),F.positionMode==un.Fixed&&(E=i)),h.pathConstraintIndex=k;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p,this.getValue(g,"time",0),this.getValue(g,u,0)*E),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*fh.ENTRIES])}else if(u==="mix"){var h=new p0(f.length);h.pathConstraintIndex=k;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p,this.getValue(g,"time",0),this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*p0.ENTRIES])}}}if(t.deform)for(var M in t.deform){var D=t.deform[M],G=n.findSkin(M);if(G!=null)for(var s in D){var c=D[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+c.name);for(var u in c){var f=c[u],Q=G.getAttachment(l,u);if(Q==null)throw new Error("Deform attachment not found: "+f.name);var te=Q.bones!=null,Y=Q.vertices,U=te?Y.length/3*2:Y.length,h=new dP(f.length);h.slotIndex=l,h.attachment=Q;for(var p=0,z=0;z<f.length;z++){var g=f[z],j=void 0,V=this.getValue(g,"vertices",null);if(V==null)j=te?xe.newFloatArray(U):Y;else{j=xe.newFloatArray(U);var ne=this.getValue(g,"offset",0);if(xe.arrayCopy(V,0,j,ne,V.length),i!=1)for(var d=ne,ae=d+V.length;d<ae;d++)j[d]*=i;if(!te)for(var d=0;d<U;d++)j[d]+=Y[d]}h.setFrame(p,this.getValue(g,"time",0),j),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var pe=t.drawOrder;if(pe==null&&(pe=t.draworder),pe!=null){for(var h=new zf(pe.length),se=n.slots.length,p=0,z=0;z<pe.length;z++){var _e=pe[z],Le=null,Pe=this.getValue(_e,"offsets",null);if(Pe!=null){Le=xe.newArray(se,-1);for(var Ee=xe.newArray(se-Pe.length,0),Se=0,Ge=0,d=0;d<Pe.length;d++){var We=Pe[d],l=n.findSlotIndex(We.slot);if(l==-1)throw new Error("Slot not found: "+We.slot);for(;Se!=l;)Ee[Ge++]=Se++;Le[Se+We.offset]=Se++}for(;Se<se;)Ee[Ge++]=Se++;for(var d=se-1;d>=0;d--)Le[d]==-1&&(Le[d]=Ee[--Ge])}h.setFrame(p++,this.getValue(_e,"time",0),Le)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(t.events){for(var h=new lx(t.events.length),p=0,d=0;d<t.events.length;d++){var Ve=t.events[d],Xe=n.findEvent(Ve.name);if(Xe==null)throw new Error("Event not found: "+Ve.name);var Ke=new mP(xe.toSinglePrecision(this.getValue(Ve,"time",0)),Xe);Ke.intValue=this.getValue(Ve,"int",Xe.intValue),Ke.floatValue=this.getValue(Ve,"float",Xe.floatValue),Ke.stringValue=this.getValue(Ve,"string",Xe.stringValue),Ke.data.audioPath!=null&&(Ke.volume=this.getValue(Ve,"volume",1),Ke.balance=this.getValue(Ve,"balance",0)),h.setFrame(p++,Ke)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new Un(r,a,o))},e.prototype.readCurve=function(t,r,n){if(t.hasOwnProperty("curve"))if(t.curve==="stepped")r.setStepped(n);else{var i=t.curve;r.setCurve(n,i,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,r,n){return t[r]!==void 0?t[r]:n},e.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return ut.NORMAL;if(t=="additive")return ut.ADD;if(t=="multiply")return ut.MULTIPLY;if(t=="screen")return ut.SCREEN;throw new Error("Unknown blend mode: "+t)},e.positionModeFromString=function(t){if(t=t.toLowerCase(),t=="fixed")return un.Fixed;if(t=="percent")return un.Percent;throw new Error("Unknown position mode: "+t)},e.spacingModeFromString=function(t){if(t=t.toLowerCase(),t=="length")return ri.Length;if(t=="fixed")return ri.Fixed;if(t=="percent")return ri.Percent;throw new Error("Unknown position mode: "+t)},e.rotateModeFromString=function(t){if(t=t.toLowerCase(),t=="tangent")return Tn.Tangent;if(t=="chain")return Tn.Chain;if(t=="chainscale")return Tn.ChainScale;throw new Error("Unknown rotate mode: "+t)},e.transformModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return Ut.Normal;if(t=="onlytranslation")return Ut.OnlyTranslation;if(t=="norotationorreflection")return Ut.NoRotationOrReflection;if(t=="noscale")return Ut.NoScale;if(t=="noscaleorreflection")return Ut.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},e}(),TFe=function(){function e(t,r,n,i,a){this.mesh=t,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritDeform=a}return e}(),AFe=function(e){hn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createSkeleton=function(r){this.skeleton=new TV(r),this.skeleton.updateWorldTransform(),this.stateData=new wV(r),this.state=new yV(this.stateData)},t}(W0);const IFe=Object.freeze(Object.defineProperty({__proto__:null,Animation:Un,AnimationState:yV,AnimationStateAdapter:wFe,AnimationStateData:wV,AtlasAttachmentLoader:vP,Attachment:lP,AttachmentTimeline:Qu,Bone:wT,BoneData:gP,BoundingBoxAttachment:gV,ClippingAttachment:mV,ColorTimeline:c0,ConstraintData:ux,CurveTimeline:gs,DeformTimeline:dP,DrawOrderTimeline:zf,Event:mP,EventData:_P,EventQueue:bV,EventTimeline:lx,get EventType(){return Ki},IkConstraint:EV,IkConstraintData:yP,IkConstraintTimeline:h0,JitterEffect:xFe,MeshAttachment:sx,PathAttachment:u0,PathConstraint:SV,PathConstraintData:xP,PathConstraintMixTimeline:p0,PathConstraintPositionTimeline:fh,PathConstraintSpacingTimeline:pP,PointAttachment:_V,RegionAttachment:cP,RotateTimeline:Ra,ScaleTimeline:fP,ShearTimeline:hP,Skeleton:TV,SkeletonBinary:AV,SkeletonBounds:CFe,SkeletonData:bP,SkeletonJson:IV,Skin:g_,SkinEntry:ET,Slot:uP,SlotData:wP,get SpacingMode(){return ri},Spine:AFe,SwirlEffect:bFe,get TimelineType(){return mi},TrackEntry:xV,TransformConstraint:CV,TransformConstraintData:EP,TransformConstraintTimeline:d0,TranslateTimeline:yc,TwoColorTimeline:f0,VertexAttachment:Ic},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ST=function(e,t){return ST=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ST(e,t)};function $n(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ST(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var SP=function(){function e(t){if(t==null)throw new Error("name cannot be null.");this.name=t}return e}(),Rc=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.id=(t.nextID++&65535)<<11,n.worldVerticesLength=0,n}return t.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},t.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.attachmentVertices,u=this.vertices,f=this.bones;if(f==null){l.length>0&&(u=l);for(var h=r.bone.matrix,p=h.tx,d=h.ty,g=h.a,_=h.c,v=h.b,m=h.d,y=n,b=o;b<i;y+=2,b+=s){var w=u[y],E=u[y+1];a[b]=w*g+E*_+p,a[b+1]=w*v+E*m+d}return}for(var C=0,T=0,A=0;A<n;A+=2){var I=f[C];C+=I+1,T+=I}var O=c.bones;if(l.length==0)for(var b=o,_=T*3;b<i;b+=s){var P=0,k=0,I=f[C++];for(I+=C;C<I;C++,_+=3){var h=O[f[C]].matrix,w=u[_],E=u[_+1],F=u[_+2];P+=(w*h.a+E*h.c+h.tx)*F,k+=(w*h.b+E*h.d+h.ty)*F}a[b]=P,a[b+1]=k}else for(var M=l,b=o,_=T*3,D=T<<1;b<i;b+=s){var P=0,k=0,I=f[C++];for(I+=C;C<I;C++,_+=3,D+=2){var h=O[f[C]].matrix,w=u[_]+M[D],E=u[_+1]+M[D+1],F=u[_+2];P+=(w*h.a+E*h.c+h.tx)*F,k+=(w*h.b+E*h.d+h.ty)*F}a[b]=P,a[b+1]=k}},t.prototype.applyDeform=function(r){return this==r},t.nextID=0,t}(SP),RV=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.BoundingBox,n.color=new rt(1,1,1,1),n}return t}(Rc),PV=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Clipping,n.color=new rt(.2275,.2275,.8078,1),n}return t}(Rc),CP=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Mesh,n.color=new rt(1,1,1,1),n.inheritDeform=!1,n.tempColor=new rt(0,0,0,0),n}return t.prototype.applyDeform=function(r){return this==r||this.inheritDeform&&this.parentMesh==r},t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},t}(Rc),v0=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Path,n.closed=!1,n.constantSpeed=!1,n.color=new rt(1,1,1,1),n}return t}(Rc),OV=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Point,n.color=new rt(.38,.94,0,1),n}return t.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},t.prototype.computeWorldRotation=function(r){var n=r.matrix,i=re.cosDeg(this.rotation),a=re.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*re.radDeg},t}(Rc),TP=function(){function e(t,r){if(this.attachmentVertices=new Array,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=t,this.bone=r,this.color=new rt,this.darkColor=t.darkColor==null?null:new rt,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}(),AP=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new rt(1,1,1,1),n.offset=xe.newFloatArray(8),n.uvs=xe.newFloatArray(8),n.tempColor=new rt(1,1,1,1),n}return t.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*n,o=i+this.region.width*r,s=a+this.region.height*n,c=this.rotation*Math.PI/180,l=Math.cos(c),u=Math.sin(c),f=i*l+this.x,h=i*u,p=a*l+this.y,d=a*u,g=o*l+this.x,_=o*u,v=s*l+this.y,m=s*u,y=this.offset;y[t.OX1]=f-d,y[t.OY1]=p+h,y[t.OX2]=f-m,y[t.OY2]=v+h,y[t.OX3]=g-m,y[t.OY3]=v+_,y[t.OX4]=g-d,y[t.OY4]=p+_},t.prototype.setRegion=function(r){this.region=r;var n=this.uvs;r.rotate?(n[2]=r.u,n[3]=r.v2,n[4]=r.u,n[5]=r.v,n[6]=r.u2,n[7]=r.v,n[0]=r.u2,n[1]=r.v2):(n[0]=r.u,n[1]=r.v2,n[2]=r.u,n[3]=r.v,n[4]=r.u2,n[5]=r.v,n[6]=r.u2,n[7]=r.v2)},t.prototype.computeWorldVertices=function(r,n,i,a){var o=this.offset,s=r instanceof TP?r.bone.matrix:r.matrix,c=s.tx,l=s.ty,u=s.a,f=s.c,h=s.b,p=s.d,d=0,g=0;d=o[t.OX1],g=o[t.OY1],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l,i+=a,d=o[t.OX2],g=o[t.OY2],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l,i+=a,d=o[t.OX3],g=o[t.OY3],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l,i+=a,d=o[t.OX4],g=o[t.OY4],n[i]=d*u+g*f+c,n[i+1]=d*h+g*p+l},t.OX1=0,t.OY1=1,t.OX2=2,t.OY2=3,t.OX3=4,t.OY3=5,t.OX4=6,t.OY4=7,t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(SP),RFe=function(){function e(t,r){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=r}return e.prototype.begin=function(t){},e.prototype.transform=function(t,r,n,i){t.x+=re.randomTriangular(-this.jitterX,this.jitterY),t.y+=re.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}(),PFe=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(t,r,n,i){var a=this.angle*re.degreesToRadians,o=t.x-this.worldX,s=t.y-this.worldY,c=Math.sqrt(o*o+s*s);if(c<this.radius){var l=e.interpolation.apply(0,a,(this.radius-c)/this.radius),u=Math.cos(l),f=Math.sin(l);t.x=u*o-f*s+this.worldX,t.y=f*o+u*s+this.worldY}},e.prototype.end=function(){},e.interpolation=new vV(2),e}(),oi=function(){function e(t,r,n){if(t==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=r,this.duration=n}return e.prototype.apply=function(t,r,n,i,a,o,s,c){if(t==null)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(t,r,n,a,o,s,c)},e.binarySearch=function(t,r,n){n===void 0&&(n=1);var i=0,a=t.length/n-2;if(a==0)return n;for(var o=a>>>1;;){if(t[(o+1)*n]<=r?i=o+1:a=o,i==a)return(i+1)*n;o=i+a>>>1}},e.linearSearch=function(t,r,n){for(var i=0,a=t.length-n;i<=a;i+=n)if(t[i]>r)return i;return-1},e}(),_i;(function(e){e[e.rotate=0]="rotate",e[e.translate=1]="translate",e[e.scale=2]="scale",e[e.shear=3]="shear",e[e.attachment=4]="attachment",e[e.color=5]="color",e[e.deform=6]="deform",e[e.event=7]="event",e[e.drawOrder=8]="drawOrder",e[e.ikConstraint=9]="ikConstraint",e[e.transformConstraint=10]="transformConstraint",e[e.pathConstraintPosition=11]="pathConstraintPosition",e[e.pathConstraintSpacing=12]="pathConstraintSpacing",e[e.pathConstraintMix=13]="pathConstraintMix",e[e.twoColor=14]="twoColor"})(_i||(_i={}));var ms=function(){function e(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=xe.newFloatArray((t-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var r=t*e.BEZIER_SIZE;if(r==this.curves.length)return e.LINEAR;var n=this.curves[r];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,r,n,i,a){var o=(-r*2+i)*.03,s=(-n*2+a)*.03,c=((r-i)*3+1)*.006,l=((n-a)*3+1)*.006,u=o*2+c,f=s*2+l,h=r*.3+o+c*.16666667,p=n*.3+s+l*.16666667,d=t*e.BEZIER_SIZE,g=this.curves;g[d++]=e.BEZIER;for(var _=h,v=p,m=d+e.BEZIER_SIZE-1;d<m;d+=2)g[d]=_,g[d+1]=v,h+=u,p+=f,u+=c,f+=l,_+=h,v+=p},e.prototype.getCurvePercent=function(t,r){r=re.clamp(r,0,1);var n=this.curves,i=t*e.BEZIER_SIZE,a=n[i];if(a==e.LINEAR)return r;if(a==e.STEPPED)return 0;i++;for(var o=0,s=i,c=i+e.BEZIER_SIZE-1;i<c;i+=2)if(o=n[i],o>=r){var l=void 0,u=void 0;return i==s?(l=0,u=0):(l=n[i-2],u=n[i-1]),u+(n[i+1]-u)*(r-l)/(o-l)}var f=n[i-1];return f+(1-f)*(r-o)/(1-o)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=10*2-1,e}(),bo=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r<<1),n}return t.prototype.getPropertyId=function(){return(_i.rotate<<24)+this.boneIndex},t.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+t.ROTATION]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case Z.setup:u.rotation=u.data.rotation;return;case Z.first:var f=u.data.rotation-u.rotation;u.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*o}return}if(i>=l[l.length-t.ENTRIES]){var h=l[l.length+t.PREV_ROTATION];switch(s){case Z.setup:u.rotation=u.data.rotation+h*o;break;case Z.first:case Z.replace:h+=u.data.rotation-u.rotation,h-=(16384-(16384.499999999996-h/360|0))*360;case Z.add:u.rotation+=h*o}return}var p=oi.binarySearch(l,i,t.ENTRIES),d=l[p+t.PREV_ROTATION],g=l[p],_=this.getCurvePercent((p>>1)-1,1-(i-g)/(l[p+t.PREV_TIME]-g)),v=l[p+t.ROTATION]-d;switch(v=d+(v-(16384-(16384.499999999996-v/360|0))*360)*_,s){case Z.setup:u.rotation=u.data.rotation+(v-(16384-(16384.499999999996-v/360|0))*360)*o;break;case Z.first:case Z.replace:v+=u.data.rotation-u.rotation;case Z.add:u.rotation+=(v-(16384-(16384.499999999996-v/360|0))*360)*o}},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_ROTATION=-1,t.ROTATION=1,t}(ms),g0=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.translate<<24)+this.boneIndex},t.prototype.setFrame=function(r,n,i,a){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.X]=i,this.frames[r+t.Y]=a},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case Z.setup:u.x=u.data.x,u.y=u.data.y;return;case Z.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_X],h=l[l.length+t.PREV_Y];else{var p=oi.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_X],h=l[p+t.PREV_Y];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f+=(l[p+t.X]-f)*g,h+=(l[p+t.Y]-h)*g}switch(s){case Z.setup:u.x=u.data.x+f*o,u.y=u.data.y+h*o;break;case Z.first:case Z.replace:u.x+=(u.data.x+f-u.x)*o,u.y+=(u.data.y+h-u.y)*o;break;case Z.add:u.x+=f*o,u.y+=h*o}},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_X=-2,t.PREV_Y=-1,t.X=1,t.Y=2,t}(ms),kV=function(e){$n(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getPropertyId=function(){return(_i.scale<<24)+this.boneIndex},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case Z.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case Z.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_X]*u.data.scaleX,h=l[l.length+t.PREV_Y]*u.data.scaleY;else{var p=oi.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_X],h=l[p+t.PREV_Y];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f=(f+(l[p+t.X]-f)*g)*u.data.scaleX,h=(h+(l[p+t.Y]-h)*g)*u.data.scaleY}if(o==1)s==Z.add?(u.scaleX+=f-u.data.scaleX,u.scaleY+=h-u.data.scaleY):(u.scaleX=f,u.scaleY=h);else{var _=0,v=0;if(c==Yt.mixOut)switch(s){case Z.setup:_=u.data.scaleX,v=u.data.scaleY,u.scaleX=_+(Math.abs(f)*re.signum(_)-_)*o,u.scaleY=v+(Math.abs(h)*re.signum(v)-v)*o;break;case Z.first:case Z.replace:_=u.scaleX,v=u.scaleY,u.scaleX=_+(Math.abs(f)*re.signum(_)-_)*o,u.scaleY=v+(Math.abs(h)*re.signum(v)-v)*o;break;case Z.add:_=u.scaleX,v=u.scaleY,u.scaleX=_+(Math.abs(f)*re.signum(_)-u.data.scaleX)*o,u.scaleY=v+(Math.abs(h)*re.signum(v)-u.data.scaleY)*o}else switch(s){case Z.setup:_=Math.abs(u.data.scaleX)*re.signum(f),v=Math.abs(u.data.scaleY)*re.signum(h),u.scaleX=_+(f-_)*o,u.scaleY=v+(h-v)*o;break;case Z.first:case Z.replace:_=Math.abs(u.scaleX)*re.signum(f),v=Math.abs(u.scaleY)*re.signum(h),u.scaleX=_+(f-_)*o,u.scaleY=v+(h-v)*o;break;case Z.add:_=re.signum(f),v=re.signum(h),u.scaleX=Math.abs(u.scaleX)*_+(f-Math.abs(u.data.scaleX)*_)*o,u.scaleY=Math.abs(u.scaleY)*v+(h-Math.abs(u.data.scaleY)*v)*o}}},t}(g0),FV=function(e){$n(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getPropertyId=function(){return(_i.shear<<24)+this.boneIndex},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case Z.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case Z.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_X],h=l[l.length+t.PREV_Y];else{var p=oi.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_X],h=l[p+t.PREV_Y];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f=f+(l[p+t.X]-f)*g,h=h+(l[p+t.Y]-h)*g}switch(s){case Z.setup:u.shearX=u.data.shearX+f*o,u.shearY=u.data.shearY+h*o;break;case Z.first:case Z.replace:u.shearX+=(u.data.shearX+f-u.shearX)*o,u.shearY+=(u.data.shearY+h-u.shearY)*o;break;case Z.add:u.shearX+=f*o,u.shearY+=h*o}},t}(g0),CT=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.color<<24)+this.slotIndex},t.prototype.setFrame=function(r,n,i,a,o,s){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.R]=i,this.frames[r+t.G]=a,this.frames[r+t.B]=o,this.frames[r+t.A]=s},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.color.setFromColor(l.data.color);return;case Z.first:var f=l.color,h=l.data.color;f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var p=0,d=0,g=0,_=0;if(i>=u[u.length-t.ENTRIES]){var v=u.length;p=u[v+t.PREV_R],d=u[v+t.PREV_G],g=u[v+t.PREV_B],_=u[v+t.PREV_A]}else{var m=oi.binarySearch(u,i,t.ENTRIES);p=u[m+t.PREV_R],d=u[m+t.PREV_G],g=u[m+t.PREV_B],_=u[m+t.PREV_A];var y=u[m],b=this.getCurvePercent(m/t.ENTRIES-1,1-(i-y)/(u[m+t.PREV_TIME]-y));p+=(u[m+t.R]-p)*b,d+=(u[m+t.G]-d)*b,g+=(u[m+t.B]-g)*b,_+=(u[m+t.A]-_)*b}if(o==1)l.color.set(p,d,g,_);else{var f=l.color;s==Z.setup&&f.setFromColor(l.data.color),f.add((p-f.r)*o,(d-f.g)*o,(g-f.b)*o,(_-f.a)*o)}},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_R=-4,t.PREV_G=-3,t.PREV_B=-2,t.PREV_A=-1,t.R=1,t.G=2,t.B=3,t.A=4,t}(ms),TT=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.twoColor<<24)+this.slotIndex},t.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.R]=i,this.frames[r+t.G]=a,this.frames[r+t.B]=o,this.frames[r+t.A]=s,this.frames[r+t.R2]=c,this.frames[r+t.G2]=l,this.frames[r+t.B2]=u},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case Z.first:var f=l.color,h=l.darkColor,p=l.data.color,d=l.data.darkColor;f.add((p.r-f.r)*o,(p.g-f.g)*o,(p.b-f.b)*o,(p.a-f.a)*o),h.add((d.r-h.r)*o,(d.g-h.g)*o,(d.b-h.b)*o,0)}return}var g=0,_=0,v=0,m=0,y=0,b=0,w=0;if(i>=u[u.length-t.ENTRIES]){var E=u.length;g=u[E+t.PREV_R],_=u[E+t.PREV_G],v=u[E+t.PREV_B],m=u[E+t.PREV_A],y=u[E+t.PREV_R2],b=u[E+t.PREV_G2],w=u[E+t.PREV_B2]}else{var C=oi.binarySearch(u,i,t.ENTRIES);g=u[C+t.PREV_R],_=u[C+t.PREV_G],v=u[C+t.PREV_B],m=u[C+t.PREV_A],y=u[C+t.PREV_R2],b=u[C+t.PREV_G2],w=u[C+t.PREV_B2];var T=u[C],A=this.getCurvePercent(C/t.ENTRIES-1,1-(i-T)/(u[C+t.PREV_TIME]-T));g+=(u[C+t.R]-g)*A,_+=(u[C+t.G]-_)*A,v+=(u[C+t.B]-v)*A,m+=(u[C+t.A]-m)*A,y+=(u[C+t.R2]-y)*A,b+=(u[C+t.G2]-b)*A,w+=(u[C+t.B2]-w)*A}if(o==1)l.color.set(g,_,v,m),l.darkColor.set(y,b,w,1);else{var f=l.color,h=l.darkColor;s==Z.setup&&(f.setFromColor(l.data.color),h.setFromColor(l.data.darkColor)),f.add((g-f.r)*o,(_-f.g)*o,(v-f.b)*o,(m-f.a)*o),h.add((y-h.r)*o,(b-h.g)*o,(w-h.b)*o,0)}},t.ENTRIES=8,t.PREV_TIME=-8,t.PREV_R=-7,t.PREV_G=-6,t.PREV_B=-5,t.PREV_A=-4,t.PREV_R2=-3,t.PREV_G2=-2,t.PREV_B2=-1,t.R=1,t.G=2,t.B=3,t.A=4,t.R2=5,t.G2=6,t.B2=7,t}(ms),m_=function(){function e(t){this.frames=xe.newFloatArray(t),this.attachmentNames=new Array(t)}return e.prototype.getPropertyId=function(){return(_i.attachment<<24)+this.slotIndex},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,r,n){this.frames[t]=r,this.attachmentNames[t]=n},e.prototype.apply=function(t,r,n,i,a,o,s){var c=t.slots[this.slotIndex];if(s==Yt.mixOut&&o==Z.setup){var l=c.data.attachmentName;c.setAttachment(l==null?null:t.getAttachment(this.slotIndex,l));return}var u=this.frames;if(n<u[0]){if(o==Z.setup||o==Z.first){var f=c.data.attachmentName;c.setAttachment(f==null?null:t.getAttachment(this.slotIndex,f))}return}var h=0;n>=u[u.length-1]?h=u.length-1:h=oi.binarySearch(u,n,1)-1;var p=this.attachmentNames[h];t.slots[this.slotIndex].setAttachment(p==null?null:t.getAttachment(this.slotIndex,p))},e}(),OD=null,NV=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r),n.frameVertices=new Array(r),OD==null&&(OD=xe.newFloatArray(64)),n}return t.prototype.getPropertyId=function(){return(_i.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.frameVertices[r]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=l.getAttachment();if(!(!(u instanceof Rc)||!u.applyDeform(this.attachment))){var f=l.attachmentVertices;f.length==0&&(s=Z.setup);var h=this.frameVertices,p=h[0].length,d=this.frames;if(i<d[0]){var g=u;switch(s){case Z.setup:f.length=0;return;case Z.first:if(o==1){f.length=0;break}var _=xe.setArraySize(f,p);if(g.bones==null)for(var v=g.vertices,m=0;m<p;m++)_[m]+=(v[m]-_[m])*o;else{o=1-o;for(var m=0;m<p;m++)_[m]*=o}}return}var y=xe.setArraySize(f,p);if(i>=d[d.length-1]){var b=h[d.length-1];if(o==1)if(s==Z.add){var g=u;if(g.bones==null)for(var v=g.vertices,m=0;m<p;m++)y[m]+=b[m]-v[m];else for(var m=0;m<p;m++)y[m]+=b[m]}else xe.arrayCopy(b,0,y,0,p);else switch(s){case Z.setup:{var w=u;if(w.bones==null)for(var v=w.vertices,m=0;m<p;m++){var E=v[m];y[m]=E+(b[m]-E)*o}else for(var m=0;m<p;m++)y[m]=b[m]*o;break}case Z.first:case Z.replace:for(var m=0;m<p;m++)y[m]+=(b[m]-y[m])*o;case Z.add:var g=u;if(g.bones==null)for(var v=g.vertices,m=0;m<p;m++)y[m]+=(b[m]-v[m])*o;else for(var m=0;m<p;m++)y[m]+=b[m]*o}return}var C=oi.binarySearch(d,i),T=h[C-1],A=h[C],I=d[C],O=this.getCurvePercent(C-1,1-(i-I)/(d[C-1]-I));if(o==1)if(s==Z.add){var g=u;if(g.bones==null)for(var v=g.vertices,m=0;m<p;m++){var P=T[m];y[m]+=P+(A[m]-P)*O-v[m]}else for(var m=0;m<p;m++){var P=T[m];y[m]+=P+(A[m]-P)*O}}else for(var m=0;m<p;m++){var P=T[m];y[m]=P+(A[m]-P)*O}else switch(s){case Z.setup:{var k=u;if(k.bones==null)for(var v=k.vertices,m=0;m<p;m++){var P=T[m],E=v[m];y[m]=E+(P+(A[m]-P)*O-E)*o}else for(var m=0;m<p;m++){var P=T[m];y[m]=(P+(A[m]-P)*O)*o}break}case Z.first:case Z.replace:for(var m=0;m<p;m++){var P=T[m];y[m]+=(P+(A[m]-P)*O-y[m])*o}break;case Z.add:var g=u;if(g.bones==null)for(var v=g.vertices,m=0;m<p;m++){var P=T[m];y[m]+=(P+(A[m]-P)*O-v[m])*o}else for(var m=0;m<p;m++){var P=T[m];y[m]+=(P+(A[m]-P)*O)*o}}}},t}(ms),LV=function(){function e(t){this.frames=xe.newFloatArray(t),this.events=new Array(t)}return e.prototype.getPropertyId=function(){return _i.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,r){this.frames[t]=r.time,this.events[t]=r},e.prototype.apply=function(t,r,n,i,a,o,s){if(i!=null){var c=this.frames,l=this.frames.length;if(r>n)this.apply(t,r,Number.MAX_VALUE,i,a,o,s),r=-1;else if(r>=c[l-1])return;if(!(n<c[0])){var u=0;if(r<c[0])u=0;else{u=oi.binarySearch(c,r);for(var f=c[u];u>0&&c[u-1]==f;)u--}for(;u<l&&n>=c[u];u++)i.push(this.events[u])}}},e}(),__=function(){function e(t){this.frames=xe.newFloatArray(t),this.drawOrders=new Array(t)}return e.prototype.getPropertyId=function(){return _i.drawOrder<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,r,n){this.frames[t]=r,this.drawOrders[t]=n},e.prototype.apply=function(t,r,n,i,a,o,s){var c=t.drawOrder,l=t.slots;if(s==Yt.mixOut&&o==Z.setup){xe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var u=this.frames;if(n<u[0]){(o==Z.setup||o==Z.first)&&xe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}var f=0;n>=u[u.length-1]?f=u.length-1:f=oi.binarySearch(u,n)-1;var h=this.drawOrders[f];if(h==null)xe.arrayCopy(l,0,c,0,l.length);else for(var p=0,d=h.length;p<d;p++)c[p]=l[h[p]]},e}(),AT=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.ikConstraint<<24)+this.ikConstraintIndex},t.prototype.setFrame=function(r,n,i,a,o,s){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.MIX]=i,this.frames[r+t.BEND_DIRECTION]=a,this.frames[r+t.COMPRESS]=o?1:0,this.frames[r+t.STRETCH]=s?1:0},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.ikConstraints[this.ikConstraintIndex];if(i<l[0]){switch(s){case Z.setup:u.mix=u.data.mix,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case Z.first:u.mix+=(u.data.mix-u.mix)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}if(i>=l[l.length-t.ENTRIES]){s==Z.setup?(u.mix=u.data.mix+(l[l.length+t.PREV_MIX]-u.data.mix)*o,c==Yt.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[l.length+t.PREV_BEND_DIRECTION],u.compress=l[l.length+t.PREV_COMPRESS]!=0,u.stretch=l[l.length+t.PREV_STRETCH]!=0)):(u.mix+=(l[l.length+t.PREV_MIX]-u.mix)*o,c==Yt.mixIn&&(u.bendDirection=l[l.length+t.PREV_BEND_DIRECTION],u.compress=l[l.length+t.PREV_COMPRESS]!=0,u.stretch=l[l.length+t.PREV_STRETCH]!=0));return}var f=oi.binarySearch(l,i,t.ENTRIES),h=l[f+t.PREV_MIX],p=l[f],d=this.getCurvePercent(f/t.ENTRIES-1,1-(i-p)/(l[f+t.PREV_TIME]-p));s==Z.setup?(u.mix=u.data.mix+(h+(l[f+t.MIX]-h)*d-u.data.mix)*o,c==Yt.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[f+t.PREV_BEND_DIRECTION],u.compress=l[f+t.PREV_COMPRESS]!=0,u.stretch=l[f+t.PREV_STRETCH]!=0)):(u.mix+=(h+(l[f+t.MIX]-h)*d-u.mix)*o,c==Yt.mixIn&&(u.bendDirection=l[f+t.PREV_BEND_DIRECTION],u.compress=l[f+t.PREV_COMPRESS]!=0,u.stretch=l[f+t.PREV_STRETCH]!=0))},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_MIX=-4,t.PREV_BEND_DIRECTION=-3,t.PREV_COMPRESS=-2,t.PREV_STRETCH=-1,t.MIX=1,t.BEND_DIRECTION=2,t.COMPRESS=3,t.STRETCH=4,t}(ms),IT=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.transformConstraint<<24)+this.transformConstraintIndex},t.prototype.setFrame=function(r,n,i,a,o,s){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.ROTATE]=i,this.frames[r+t.TRANSLATE]=a,this.frames[r+t.SCALE]=o,this.frames[r+t.SHEAR]=s},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.transformConstraints[this.transformConstraintIndex];if(i<l[0]){var f=u.data;switch(s){case Z.setup:u.rotateMix=f.rotateMix,u.translateMix=f.translateMix,u.scaleMix=f.scaleMix,u.shearMix=f.shearMix;return;case Z.first:u.rotateMix+=(f.rotateMix-u.rotateMix)*o,u.translateMix+=(f.translateMix-u.translateMix)*o,u.scaleMix+=(f.scaleMix-u.scaleMix)*o,u.shearMix+=(f.shearMix-u.shearMix)*o}return}var h=0,p=0,d=0,g=0;if(i>=l[l.length-t.ENTRIES]){var _=l.length;h=l[_+t.PREV_ROTATE],p=l[_+t.PREV_TRANSLATE],d=l[_+t.PREV_SCALE],g=l[_+t.PREV_SHEAR]}else{var v=oi.binarySearch(l,i,t.ENTRIES);h=l[v+t.PREV_ROTATE],p=l[v+t.PREV_TRANSLATE],d=l[v+t.PREV_SCALE],g=l[v+t.PREV_SHEAR];var m=l[v],y=this.getCurvePercent(v/t.ENTRIES-1,1-(i-m)/(l[v+t.PREV_TIME]-m));h+=(l[v+t.ROTATE]-h)*y,p+=(l[v+t.TRANSLATE]-p)*y,d+=(l[v+t.SCALE]-d)*y,g+=(l[v+t.SHEAR]-g)*y}if(s==Z.setup){var f=u.data;u.rotateMix=f.rotateMix+(h-f.rotateMix)*o,u.translateMix=f.translateMix+(p-f.translateMix)*o,u.scaleMix=f.scaleMix+(d-f.scaleMix)*o,u.shearMix=f.shearMix+(g-f.shearMix)*o}else u.rotateMix+=(h-u.rotateMix)*o,u.translateMix+=(p-u.translateMix)*o,u.scaleMix+=(d-u.scaleMix)*o,u.shearMix+=(g-u.shearMix)*o},t.ENTRIES=5,t.PREV_TIME=-5,t.PREV_ROTATE=-4,t.PREV_TRANSLATE=-3,t.PREV_SCALE=-2,t.PREV_SHEAR=-1,t.ROTATE=1,t.TRANSLATE=2,t.SCALE=3,t.SHEAR=4,t}(ms),y_=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.pathConstraintPosition<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(r,n,i){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.VALUE]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case Z.setup:u.position=u.data.position;return;case Z.first:u.position+=(u.data.position-u.position)*o}return}var f=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_VALUE];else{var h=oi.binarySearch(l,i,t.ENTRIES);f=l[h+t.PREV_VALUE];var p=l[h],d=this.getCurvePercent(h/t.ENTRIES-1,1-(i-p)/(l[h+t.PREV_TIME]-p));f+=(l[h+t.VALUE]-f)*d}s==Z.setup?u.position=u.data.position+(f-u.data.position)*o:u.position+=(f-u.position)*o},t.ENTRIES=2,t.PREV_TIME=-2,t.PREV_VALUE=-1,t.VALUE=1,t}(ms),BV=function(e){$n(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getPropertyId=function(){return(_i.pathConstraintSpacing<<24)+this.pathConstraintIndex},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case Z.setup:u.spacing=u.data.spacing;return;case Z.first:u.spacing+=(u.data.spacing-u.spacing)*o}return}var f=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_VALUE];else{var h=oi.binarySearch(l,i,t.ENTRIES);f=l[h+t.PREV_VALUE];var p=l[h],d=this.getCurvePercent(h/t.ENTRIES-1,1-(i-p)/(l[h+t.PREV_TIME]-p));f+=(l[h+t.VALUE]-f)*d}s==Z.setup?u.spacing=u.data.spacing+(f-u.data.spacing)*o:u.spacing+=(f-u.spacing)*o},t}(y_),RT=function(e){$n(t,e);function t(r){var n=e.call(this,r)||this;return n.frames=xe.newFloatArray(r*t.ENTRIES),n}return t.prototype.getPropertyId=function(){return(_i.pathConstraintMix<<24)+this.pathConstraintIndex},t.prototype.setFrame=function(r,n,i,a){r*=t.ENTRIES,this.frames[r]=n,this.frames[r+t.ROTATE]=i,this.frames[r+t.TRANSLATE]=a},t.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case Z.setup:u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix;return;case Z.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*o,u.translateMix+=(u.data.translateMix-u.translateMix)*o}return}var f=0,h=0;if(i>=l[l.length-t.ENTRIES])f=l[l.length+t.PREV_ROTATE],h=l[l.length+t.PREV_TRANSLATE];else{var p=oi.binarySearch(l,i,t.ENTRIES);f=l[p+t.PREV_ROTATE],h=l[p+t.PREV_TRANSLATE];var d=l[p],g=this.getCurvePercent(p/t.ENTRIES-1,1-(i-d)/(l[p+t.PREV_TIME]-d));f+=(l[p+t.ROTATE]-f)*g,h+=(l[p+t.TRANSLATE]-h)*g}s==Z.setup?(u.rotateMix=u.data.rotateMix+(f-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(h-u.data.translateMix)*o):(u.rotateMix+=(f-u.rotateMix)*o,u.translateMix+=(h-u.translateMix)*o)},t.ENTRIES=3,t.PREV_TIME=-3,t.PREV_ROTATE=-2,t.PREV_TRANSLATE=-1,t.ROTATE=1,t.TRANSLATE=2,t}(ms),MV=function(){function e(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new UV(this),this.propertyIDs=new dV,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new ox(function(){return new DV}),this.data=t}return e.prototype.update=function(t){t*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a!=null){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=t*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s!=null){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime=a.timeScale==0?0:(c/a.timeScale+t)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom!=null;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&a.mixingFrom==null){r[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(a.mixingFrom!=null&&this.updateMixingFrom(a,t)){var l=a.mixingFrom;for(a.mixingFrom=null,l!=null&&(l.mixingTo=null);l!=null;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,r){var n=t.mixingFrom;if(n==null)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((n.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,t.mixTime+=r,!1)},e.prototype.apply=function(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(s==null||s.delay>0)){i=!0;var c=a==0?Z.first:s.mixBlend,l=s.alpha;s.mixingFrom!=null?l*=this.applyMixingFrom(s,t,c):s.trackTime>=s.trackEnd&&s.next==null&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=s.animation.timelines.length,p=s.animation.timelines;if(a==0&&l==1||c==Z.add)for(var d=0;d<h;d++)xe.webkit602BugfixHelper(l,c),p[d].apply(t,u,f,r,l,c,Yt.mixIn);else{var g=s.timelineMode,_=s.timelinesRotation.length==0;_&&xe.setArraySize(s.timelinesRotation,h<<1,null);for(var v=s.timelinesRotation,d=0;d<h;d++){var m=p[d],y=g[d]==e.SUBSEQUENT?c:Z.setup;m instanceof bo?this.applyRotateTimeline(m,t,f,l,y,v,d<<1,_):(xe.webkit602BugfixHelper(l,c),m.apply(t,u,f,r,l,y,Yt.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}return this.queue.drain(),i},e.prototype.applyMixingFrom=function(t,r,n){var i=t.mixingFrom;i.mixingFrom!=null&&this.applyMixingFrom(i,r,n);var a=0;t.mixDuration==0?(a=1,n==Z.first&&(n=Z.setup)):(a=t.mixTime/t.mixDuration,a>1&&(a=1),n!=Z.first&&(n=i.mixBlend));var o=a<i.eventThreshold?this.events:null,s=a<i.attachmentThreshold,c=a<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,h=i.animation.timelines,p=i.alpha*t.interruptAlpha,d=p*(1-a);if(n==Z.add)for(var g=0;g<f;g++)h[g].apply(r,l,u,o,d,n,Yt.mixOut);else{var _=i.timelineMode,v=i.timelineHoldMix,m=i.timelinesRotation.length==0;m&&xe.setArraySize(i.timelinesRotation,f<<1,null);var y=i.timelinesRotation;i.totalAlpha=0;for(var g=0;g<f;g++){var b=h[g],w=Yt.mixOut,E=void 0,C=0;switch(_[g]){case e.SUBSEQUENT:if(!s&&b instanceof m_||!c&&b instanceof __)continue;E=n,C=d;break;case e.FIRST:E=Z.setup,C=d;break;case e.HOLD:E=Z.setup,C=p;break;default:E=Z.setup;var T=v[g];C=p*Math.max(0,1-T.mixTime/T.mixDuration);break}i.totalAlpha+=C,b instanceof bo?this.applyRotateTimeline(b,r,u,C,E,y,g<<1,m):(xe.webkit602BugfixHelper(C,n),E==Z.setup&&(b instanceof m_?s&&(w=Yt.mixOut):b instanceof __&&c&&(w=Yt.mixOut)),b.apply(r,l,u,o,C,E,w))}}return t.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,a},e.prototype.applyRotateTimeline=function(t,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){t.apply(r,0,n,null,1,a,Yt.mixIn);return}var l=t,u=l.frames,f=r.bones[l.boneIndex],h=0,p=0;if(n<u[0])switch(a){case Z.setup:f.rotation=f.data.rotation;default:return;case Z.first:h=f.rotation,p=f.data.rotation}else if(h=a==Z.setup?f.data.rotation:f.rotation,n>=u[u.length-bo.ENTRIES])p=f.data.rotation+u[u.length+bo.PREV_ROTATION];else{var d=oi.binarySearch(u,n,bo.ENTRIES),g=u[d+bo.PREV_ROTATION],_=u[d],v=l.getCurvePercent((d>>1)-1,1-(n-_)/(u[d+bo.PREV_TIME]-_));p=u[d+bo.ROTATION]-g,p-=(16384-(16384.499999999996-p/360|0))*360,p=g+p*v+f.data.rotation,p-=(16384-(16384.499999999996-p/360|0))*360}var m=0,y=p-h;if(y-=(16384-(16384.499999999996-y/360|0))*360,y==0)m=o[s];else{var b=0,w=0;c?(b=0,w=y):(b=o[s],w=o[s+1]);var E=y>0,C=b>=0;re.signum(w)!=re.signum(y)&&Math.abs(w)<=90&&(Math.abs(b)>180&&(b+=360*re.signum(b)),C=E),m=y+b-b%360,C!=E&&(m+=360*re.signum(b)),o[s]=m}o[s+1]=y,h+=m*i,f.rotation=h-(16384-(16384.499999999996-h/360|0))*360},e.prototype.queueEvents=function(t,r){for(var n=t.animationStart,i=t.animationEnd,a=i-n,o=t.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(t,u)}var f=!1;for(t.loop?f=a==0||o>t.trackTime%a:f=r>=i&&t.animationLast<i,f&&this.queue.complete(t);c<l;c++){var h=s[c];h.time<n||this.queue.event(t,s[c])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var r=this.tracks[t];if(r!=null){this.queue.end(r),this.disposeNext(r);for(var n=r;;){var i=n.mixingFrom;if(i==null)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,r,n){var i=this.expandToIndex(t);this.tracks[t]=r,i!=null&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom!=null&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},e.prototype.setAnimation=function(t,r,n){var i=this.data.skeletonData.findAnimation(r);if(i==null)throw new Error("Animation not found: "+r);return this.setAnimationWith(t,i,n)},e.prototype.setAnimationWith=function(t,r,n){if(r==null)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(t);a!=null&&(a.nextTrackLast==-1?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,i=!1):this.disposeNext(a));var o=this.trackEntry(t,r,n,a);return this.setCurrent(t,o,i),this.queue.drain(),o},e.prototype.addAnimation=function(t,r,n,i){var a=this.data.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);return this.addAnimationWith(t,a,n,i)},e.prototype.addAnimationWith=function(t,r,n,i){if(r==null)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(a!=null)for(;a.next!=null;)a=a.next;var o=this.trackEntry(t,r,n,a);if(a==null)this.setCurrent(t,o,!0),this.queue.drain();else if(a.next=o,i<=0){var s=a.animationEnd-a.animationStart;s!=0?(a.loop?i+=s*(1+(a.trackTime/s|0)):i+=Math.max(s,a.trackTime),i-=this.data.getMix(a.animation,r)):i=a.trackTime}return o.delay=i,o},e.prototype.setEmptyAnimation=function(t,r){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},e.prototype.addEmptyAnimation=function(t,r,n){n<=0&&(n-=r);var i=this.addAnimationWith(t,e.emptyAnimation,!1,n);return i.mixDuration=r,i.trackEnd=r,i},e.prototype.setEmptyAnimations=function(t){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a!=null&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=r,this.queue.drain()},e.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(xe.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},e.prototype.trackEntry=function(t,r,n,i){var a=this.trackEntryPool.obtain();return a.trackIndex=t,a.animation=r,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=i==null?0:this.data.getMix(i.animation,r),a},e.prototype.disposeNext=function(t){for(var r=t.next;r!=null;)this.queue.dispose(r),r=r.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,r=this.tracks.length;t<r;t++){var n=this.tracks[t];if(n!=null){for(;n.mixingFrom!=null;)n=n.mixingFrom;do(n.mixingFrom==null||n.mixBlend!=Z.add)&&this.setTimelineModes(n),n=n.mixingTo;while(n!=null)}}},e.prototype.setTimelineModes=function(t){var r=t.mixingTo,n=t.animation.timelines,i=t.animation.timelines.length,a=xe.setArraySize(t.timelineMode,i);t.timelineHoldMix.length=0;var o=xe.setArraySize(t.timelineHoldMix,i),s=this.propertyIDs;if(r!=null&&r.holdPrevious){for(var c=0;c<i;c++)s.add(n[c].getPropertyId()),a[c]=e.HOLD;return}e:for(var c=0;c<i;c++){var l=n[c].getPropertyId();if(!s.add(l))a[c]=e.SUBSEQUENT;else if(r==null||!this.hasTimeline(r,l))a[c]=e.FIRST;else{for(var u=r.mixingTo;u!=null;u=u.mixingTo)if(!this.hasTimeline(u,l)){if(t.mixDuration>0){a[c]=e.HOLD_MIX,o[c]=u;continue e}break}a[c]=e.HOLD}}},e.prototype.hasTimeline=function(t,r){for(var n=t.animation.timelines,i=0,a=n.length;i<a;i++)if(n[i].getPropertyId()==r)return!0;return!1},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var r=this.listeners.indexOf(t);r>=0&&this.listeners.splice(r,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,r,n)},e.prototype.addAnimationByName=function(t,r,n,i){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,r,n,i)},e.prototype.hasAnimation=function(t){var r=this.data.skeletonData.findAnimation(t);return r!==null},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new oi("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD=2,e.HOLD_MIX=3,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}(),DV=function(){function e(){this.mixBlend=Z.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}(),UV=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(Zi.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(Zi.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(Zi.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(Zi.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(Zi.complete),this.objects.push(t)},e.prototype.event=function(t,r){this.objects.push(Zi.event),this.objects.push(t),this.objects.push(r)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,r=this.animState.listeners,n=0;n<t.length;n+=2){var i=t[n],a=t[n+1];switch(i){case Zi.start:a.listener!=null&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++)r[o].start&&r[o].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case Zi.interrupt:a.listener!=null&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++)r[o].interrupt&&r[o].interrupt(a);break;case Zi.end:a.listener!=null&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++)r[o].end&&r[o].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case Zi.dispose:a.listener!=null&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++)r[o].dispose&&r[o].dispose(a);this.animState.trackEntryPool.free(a);break;case Zi.complete:a.listener!=null&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++)r[o].complete&&r[o].complete(a);var s=re.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,s);break;case Zi.event:var c=t[n+++2];a.listener!=null&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++)r[o].event&&r[o].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}(),Zi;(function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"})(Zi||(Zi={}));var OFe=function(){function e(){}return e.prototype.start=function(t){},e.prototype.interrupt=function(t){},e.prototype.end=function(t){},e.prototype.dispose=function(t){},e.prototype.complete=function(t){},e.prototype.event=function(t,r){},e}(),jV=function(){function e(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return e.prototype.setMix=function(t,r,n){var i=this.skeletonData.findAnimation(t);if(i==null)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},e.prototype.setMixByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,r,n)},e.prototype.setMixWith=function(t,r,n){if(t==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var i=t.name+"."+r.name;this.animationToMixTime[i]=n},e.prototype.getMix=function(t,r){var n=t.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},e.deprecatedWarning1=!1,e}(),$V=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(t,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var a=new AP(r);return a.region=i,a},e.prototype.newMeshAttachment=function(t,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var a=new CP(r);return a.region=i,a},e.prototype.newBoundingBoxAttachment=function(t,r){return new RV(r)},e.prototype.newPathAttachment=function(t,r){return new v0(r)},e.prototype.newPointAttachment=function(t,r){return new OV(r)},e.prototype.newClippingAttachment=function(t,r){return new PV(r)},e}(),PT=function(){function e(t,r,n){if(this.matrix=new Qr,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(t,r,n,i,a,o,s){this.ax=t,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(c==null){var h=this.skeleton,p=n+90+s;l.a=re.cosDeg(n+o)*i*u,l.c=re.cosDeg(p)*a*u,l.b=re.sinDeg(n+o)*i*f,l.d=re.sinDeg(p)*a*f,l.tx=t*u+h.x,l.ty=r*f+h.y;return}var d=c.matrix.a,g=c.matrix.c,_=c.matrix.b,v=c.matrix.d;switch(l.tx=d*t+g*r+c.matrix.tx,l.ty=_*t+v*r+c.matrix.ty,this.data.transformMode){case Ut.Normal:{var p=n+90+s,m=re.cosDeg(n+o)*i,y=re.cosDeg(p)*a,b=re.sinDeg(n+o)*i,w=re.sinDeg(p)*a;l.a=d*m+g*b,l.c=d*y+g*w,l.b=_*m+v*b,l.d=_*y+v*w;return}case Ut.OnlyTranslation:{var p=n+90+s;l.a=re.cosDeg(n+o)*i,l.c=re.cosDeg(p)*a,l.b=re.sinDeg(n+o)*i,l.d=re.sinDeg(p)*a;break}case Ut.NoRotationOrReflection:{var E=d*d+_*_,C=0;E>1e-4?(E=Math.abs(d*v-g*_)/E,g=_*E,v=d*E,C=Math.atan2(_,d)*re.radDeg):(d=0,_=0,C=90-Math.atan2(v,g)*re.radDeg);var T=n+o-C,A=n+s-C+90,m=re.cosDeg(T)*i,y=re.cosDeg(A)*a,b=re.sinDeg(T)*i,w=re.sinDeg(A)*a;l.a=d*m-g*b,l.c=d*y-g*w,l.b=_*m+v*b,l.d=_*y+v*w;break}case Ut.NoScale:case Ut.NoScaleOrReflection:{var I=re.cosDeg(n),O=re.sinDeg(n),P=(d*I+g*O)/u,k=(_*I+v*O)/f,E=Math.sqrt(P*P+k*k);E>1e-5&&(E=1/E),P*=E,k*=E,E=Math.sqrt(P*P+k*k),this.data.transformMode==Ut.NoScale&&d*v-g*_<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(E=-E);var F=Math.PI/2+Math.atan2(k,P),M=Math.cos(F)*E,D=Math.sin(F)*E,m=re.cosDeg(o)*i,y=re.cosDeg(90+s)*a,b=re.sinDeg(o)*i,w=re.sinDeg(90+s)*a;l.a=P*m+M*b,l.c=P*y+M*w,l.b=k*m+D*b,l.d=k*y+D*w;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*re.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*re.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,r=this.matrix;if(t==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*re.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*re.radDeg;return}var n=t.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,p=c*r.b-u*r.a,d=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+p*p),this.ascaleX>1e-4){var g=f*d-h*p;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(f*h+p*d,g)*re.radDeg,this.arotation=Math.atan2(p,f)*re.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,h)*re.radDeg},e.prototype.worldToLocal=function(t){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=t.x-r.tx,l=t.y-r.ty;return t.x=c*o*s-l*i*s,t.y=l*n*s-c*a*s,t},e.prototype.localToWorld=function(t){var r=this.matrix,n=t.x,i=t.y;return t.x=n*r.a+i*r.c+r.tx,t.y=n*r.b+i*r.d+r.ty,t},e.prototype.worldToLocalRotation=function(t){var r=re.sinDeg(t),n=re.cosDeg(t),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*re.radDeg},e.prototype.localToWorldRotation=function(t){var r=re.sinDeg(t),n=re.cosDeg(t),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*re.radDeg},e.prototype.rotateWorld=function(t){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=re.cosDeg(t),c=re.sinDeg(t);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o,this.appliedValid=!1},e}(),GV=function(){function e(t,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Ut.Normal,t<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=t,this.name=r,this.parent=n}return e}(),VV=function(){function e(t,r){if(r==null)throw new Error("data cannot be null.");this.time=t,this.data=r}return e}(),HV=function(){function e(t){this.name=t}return e}(),XV=function(){function e(t,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findBone(t.target.name)}return e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix);break}},e.prototype.apply1=function(t,r,n,i,a,o,s){t.appliedValid||t.updateAppliedTransform();var c=t.parent.matrix,l=1/(c.a*c.d-c.b*c.c),u=r-c.tx,f=n-c.ty,h=(u*c.d-f*c.c)*l-t.ax,p=(f*c.a-u*c.b)*l-t.ay,d=Math.atan2(p,h)*re.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var g=t.ascaleX,_=t.ascaleY;if(i||a){var v=t.data.length*g,m=Math.sqrt(h*h+p*p);if(i&&m<v||a&&m>v&&v>1e-4){var y=(m/v-1)*s+1;g*=y,o&&(_*=y)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*s,g,_,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,r,n,i,a,o,s){if(s==0){r.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var c=t.ax,l=t.ay,u=t.ascaleX,f=u,h=t.ascaleY,p=r.ascaleX,d=t.matrix,g=0,_=0,v=0;u<0?(u=-u,g=180,v=-1):(g=0,v=1),h<0&&(h=-h,v=-v),p<0?(p=-p,_=180):_=0;var m=r.ax,y=0,b=0,w=0,E=d.a,C=d.c,T=d.b,A=d.d,I=Math.abs(u-h)<=1e-4;I?(y=r.ay,b=E*m+C*y+d.tx,w=T*m+A*y+d.ty):(y=0,b=E*m+d.tx,w=T*m+d.ty);var O=t.parent.matrix;E=O.a,C=O.c,T=O.b,A=O.d;var P=1/(E*A-C*T),k=n-O.tx,F=i-O.ty,M=(k*A-F*C)*P-c,D=(F*E-k*T)*P-l,G=M*M+D*D;k=b-O.tx,F=w-O.ty;var Q=(k*A-F*C)*P-c,te=(F*E-k*T)*P-l,Y=Math.sqrt(Q*Q+te*te),U=r.data.length*p,z=0,j=0;e:if(I){U*=u;var V=(G-Y*Y-U*U)/(2*Y*U);V<-1?V=-1:V>1&&(V=1,o&&Y+U>1e-4&&(f*=(Math.sqrt(G)/(Y+U)-1)*s+1)),j=Math.acos(V)*a,E=Y+U*V,C=U*Math.sin(j),z=Math.atan2(D*E-M*C,M*E+D*C)}else{E=u*U,C=h*U;var ne=E*E,ae=C*C,pe=Math.atan2(D,M);T=ae*Y*Y+ne*G-ne*ae;var se=-2*ae*Y,_e=ae-ne;if(A=se*se-4*_e*T,A>=0){var Le=Math.sqrt(A);se<0&&(Le=-Le),Le=-(se+Le)/2;var Pe=Le/_e,Ee=T/Le,Se=Math.abs(Pe)<Math.abs(Ee)?Pe:Ee;if(Se*Se<=G){F=Math.sqrt(G-Se*Se)*a,z=pe-Math.atan2(F,Se),j=Math.atan2(F/h,(Se-Y)/u);break e}}var Ge=re.PI,We=Y-E,Ve=We*We,Xe=0,Ke=0,bt=Y+E,Rt=bt*bt,ct=0;T=-E*Y/(ne-ae),T>=-1&&T<=1&&(T=Math.acos(T),k=E*Math.cos(T)+Y,F=C*Math.sin(T),A=k*k+F*F,A<Ve&&(Ge=T,Ve=A,We=k,Xe=F),A>Rt&&(Ke=T,Rt=A,bt=k,ct=F)),G<=(Ve+Rt)/2?(z=pe-Math.atan2(Xe*a,We),j=Ge*a):(z=pe-Math.atan2(ct*a,bt),j=Ke*a)}var gt=Math.atan2(y,m)*v,It=t.arotation;z=(z-gt)*re.radDeg+g-It,z>180?z-=360:z<-180&&(z+=360),t.updateWorldTransformWith(c,l,It+z*s,f,t.ascaleY,0,0),It=r.arotation,j=((j+gt)*re.radDeg-r.ashearX)*v+_-It,j>180?j-=360:j<-180&&(j+=360),r.updateWorldTransformWith(m,y,It+j*s,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},e}(),zV=function(){function e(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t}return e}(),WV=function(){function e(t){this.order=0,this.bones=new Array,this.name=t}return e}(),qa;(function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent"})(qa||(qa={}));var YV=function(){function e(t,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof v0){var r=this.rotateMix,n=this.translateMix,i=n>0,a=r>0;if(!(!i&&!a)){var o=this.data,s=o.spacingMode,c=s==qa.Length,l=o.rotateMode,u=l==Tn.Tangent,f=l==Tn.ChainScale,h=this.bones.length,p=u?h:h+1,d=this.bones,g=xe.setArraySize(this.spaces,p),_=null,v=this.spacing;if(f||c){f&&(_=xe.setArraySize(this.lengths,h));for(var m=0,y=p-1;m<y;){var b=d[m],w=b.data.length;if(w<e.epsilon)f&&(_[m]=0),g[++m]=0;else{var E=w*b.matrix.a,C=w*b.matrix.b,T=Math.sqrt(E*E+C*C);f&&(_[m]=T),g[++m]=(c?w+v:v)*T/w}}}else for(var m=1;m<p;m++)g[m]=v;var A=this.computeWorldPositions(t,p,u,o.positionMode==un.Percent,s==qa.Percent),I=A[0],O=A[1],P=o.offsetRotation,k=!1;if(P==0)k=l==Tn.Chain;else{k=!1;var F=this.target.bone.matrix;P*=F.a*F.d-F.b*F.c>0?re.degRad:-re.degRad}for(var m=0,F=3;m<h;m++,F+=3){var b=d[m],M=b.matrix;M.tx+=(I-M.tx)*n,M.ty+=(O-M.ty)*n;var E=A[F],C=A[F+1],D=E-I,G=C-O;if(f){var Q=_[m];if(Q!=0){var te=(Math.sqrt(D*D+G*G)/Q-1)*r+1;M.a*=te,M.b*=te}}if(I=E,O=C,a){var Y=M.a,U=M.c,z=M.b,j=M.d,V=0,ne=0,ae=0;if(u?V=A[F-1]:g[m+1]==0?V=A[F+2]:V=Math.atan2(G,D),V-=Math.atan2(z,Y),k){ne=Math.cos(V),ae=Math.sin(V);var pe=b.data.length;I+=(pe*(ne*Y-ae*z)-D)*r,O+=(pe*(ae*Y+ne*z)-G)*r}else V+=P;V>re.PI?V-=re.PI2:V<-re.PI&&(V+=re.PI2),V*=r,ne=Math.cos(V),ae=Math.sin(V),M.a=ne*Y-ae*z,M.c=ne*U-ae*j,M.b=ae*Y+ne*z,M.d=ae*U+ne*j}b.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(t,r,n,i,a){var o=this.target,s=this.position,c=this.spaces,l=xe.setArraySize(this.positions,r*3+2),u=null,f=t.closed,h=t.worldVerticesLength,p=h/6,d=e.NONE;if(!t.constantSpeed){var g=t.lengths;p-=f?1:2;var _=g[p];if(i&&(s*=_),a)for(var v=0;v<r;v++)c[v]*=_;u=xe.setArraySize(this.world,8);for(var v=0,m=0,y=0;v<r;v++,m+=3){var b=c[v];s+=b;var w=s;if(f)w%=_,w<0&&(w+=_),y=0;else if(w<0){d!=e.BEFORE&&(d=e.BEFORE,t.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(w,u,0,l,m);continue}else if(w>_){d!=e.AFTER&&(d=e.AFTER,t.computeWorldVertices(o,h-6,4,u,0,2)),this.addAfterPosition(w-_,u,0,l,m);continue}for(;;y++){var E=g[y];if(!(w>E)){if(y==0)w/=E;else{var C=g[y-1];w=(w-C)/(E-C)}break}}y!=d&&(d=y,f&&y==p?(t.computeWorldVertices(o,h-4,4,u,0,2),t.computeWorldVertices(o,0,4,u,4,2)):t.computeWorldVertices(o,y*6+2,8,u,0,2)),this.addCurvePosition(w,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,m,n||v>0&&b==0)}return l}f?(h+=2,u=xe.setArraySize(this.world,h),t.computeWorldVertices(o,2,h-4,u,0,2),t.computeWorldVertices(o,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(p--,h-=4,u=xe.setArraySize(this.world,h),t.computeWorldVertices(o,2,h,u,0,2));for(var T=xe.setArraySize(this.curves,p),A=0,I=u[0],O=u[1],P=0,k=0,F=0,M=0,D=0,G=0,Q=0,te=0,Y=0,U=0,z=0,j=0,V=0,ne=0,v=0,ae=2;v<p;v++,ae+=6)P=u[ae],k=u[ae+1],F=u[ae+2],M=u[ae+3],D=u[ae+4],G=u[ae+5],Q=(I-P*2+F)*.1875,te=(O-k*2+M)*.1875,Y=((P-F)*3-I+D)*.09375,U=((k-M)*3-O+G)*.09375,z=Q*2+Y,j=te*2+U,V=(P-I)*.75+Q+Y*.16666667,ne=(k-O)*.75+te+U*.16666667,A+=Math.sqrt(V*V+ne*ne),V+=z,ne+=j,z+=Y,j+=U,A+=Math.sqrt(V*V+ne*ne),V+=z,ne+=j,A+=Math.sqrt(V*V+ne*ne),V+=z+Y,ne+=j+U,A+=Math.sqrt(V*V+ne*ne),T[v]=A,I=D,O=G;if(i&&(s*=A),a)for(var v=0;v<r;v++)c[v]*=A;for(var pe=this.segments,se=0,v=0,m=0,y=0,_e=0;v<r;v++,m+=3){var b=c[v];s+=b;var w=s;if(f)w%=A,w<0&&(w+=A),y=0;else if(w<0){this.addBeforePosition(w,u,0,l,m);continue}else if(w>A){this.addAfterPosition(w-A,u,h-4,l,m);continue}for(;;y++){var Le=T[y];if(!(w>Le)){if(y==0)w/=Le;else{var C=T[y-1];w=(w-C)/(Le-C)}break}}if(y!=d){d=y;var Pe=y*6;for(I=u[Pe],O=u[Pe+1],P=u[Pe+2],k=u[Pe+3],F=u[Pe+4],M=u[Pe+5],D=u[Pe+6],G=u[Pe+7],Q=(I-P*2+F)*.03,te=(O-k*2+M)*.03,Y=((P-F)*3-I+D)*.006,U=((k-M)*3-O+G)*.006,z=Q*2+Y,j=te*2+U,V=(P-I)*.3+Q+Y*.16666667,ne=(k-O)*.3+te+U*.16666667,se=Math.sqrt(V*V+ne*ne),pe[0]=se,Pe=1;Pe<8;Pe++)V+=z,ne+=j,z+=Y,j+=U,se+=Math.sqrt(V*V+ne*ne),pe[Pe]=se;V+=z,ne+=j,se+=Math.sqrt(V*V+ne*ne),pe[8]=se,V+=z+Y,ne+=j+U,se+=Math.sqrt(V*V+ne*ne),pe[9]=se,_e=0}for(w*=se;;_e++){var Ee=pe[_e];if(!(w>Ee)){if(_e==0)w/=Ee;else{var C=pe[_e-1];w=_e+(w-C)/(Ee-C)}break}}this.addCurvePosition(w*.1,I,O,P,k,F,M,D,G,l,m,n||v>0&&b==0)}return l},e.prototype.addBeforePosition=function(t,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+t*Math.cos(u),i[a+1]=s+t*Math.sin(u),i[a+2]=u},e.prototype.addAfterPosition=function(t,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+t*Math.cos(u),i[a+1]=s+t*Math.sin(u),i[a+2]=u},e.prototype.addCurvePosition=function(t,r,n,i,a,o,s,c,l,u,f,h){(t==0||isNaN(t))&&(t=1e-4);var p=t*t,d=p*t,g=1-t,_=g*g,v=_*g,m=g*t,y=m*3,b=g*y,w=y*t,E=r*v+i*b+o*w+c*d,C=n*v+a*b+s*w+l*d;u[f]=E,u[f+1]=C,h&&(u[f+2]=Math.atan2(C-(n*_+a*m*2+s*p),E-(r*_+i*m*2+o*p)))},e.prototype.getOrder=function(){return this.data.order},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}(),qV=function(){function e(t,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new l0,t==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(r.findBone(t.bones[n].name));this.target=r.findBone(t.target.name)}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?re.degRad:-re.degRad,h=this.data.offsetRotation*f,p=this.data.offsetShearY*f,d=this.bones,g=0,_=d.length;g<_;g++){var v=d[g],m=!1,y=v.matrix;if(t!=0){var b=y.a,w=y.c,E=y.b,C=y.d,T=Math.atan2(l,s)-Math.atan2(E,b)+h;T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2),T*=t;var A=Math.cos(T),I=Math.sin(T);y.a=A*b-I*E,y.c=A*w-I*C,y.b=I*b+A*E,y.d=I*w+A*C,m=!0}if(r!=0){var O=this.temp;a.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),y.tx+=(O.x-y.tx)*r,y.ty+=(O.y-y.ty)*r,m=!0}if(n>0){var P=Math.sqrt(y.a*y.a+y.b*y.b),k=Math.sqrt(s*s+l*l);P>1e-5&&(P=(P+(k-P+this.data.offsetScaleX)*n)/P),y.a*=P,y.b*=P,P=Math.sqrt(y.c*y.c+y.d*y.d),k=Math.sqrt(c*c+u*u),P>1e-5&&(P=(P+(k-P+this.data.offsetScaleY)*n)/P),y.c*=P,y.d*=P,m=!0}if(i>0){var w=y.c,C=y.d,F=Math.atan2(C,w),T=Math.atan2(u,c)-Math.atan2(l,s)-(F-Math.atan2(y.b,y.a));T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2),T=F+(T+p)*i;var P=Math.sqrt(w*w+C*C);y.c=Math.cos(T)*P,y.d=Math.sin(T)*P,m=!0}m&&(v.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?re.degRad:-re.degRad,h=this.data.offsetRotation*f,p=this.data.offsetShearY*f,d=this.bones,g=0,_=d.length;g<_;g++){var v=d[g],m=!1,y=v.matrix;if(t!=0){var b=y.a,w=y.c,E=y.b,C=y.d,T=Math.atan2(l,s)+h;T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2),T*=t;var A=Math.cos(T),I=Math.sin(T);y.a=A*b-I*E,y.c=A*w-I*C,y.b=I*b+A*E,y.d=I*w+A*C,m=!0}if(r!=0){var O=this.temp;a.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),y.tx+=O.x*r,y.ty+=O.y*r,m=!0}if(n>0){var P=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*n+1;y.a*=P,y.b*=P,P=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1,y.c*=P,y.d*=P,m=!0}if(i>0){var T=Math.atan2(u,c)-Math.atan2(l,s);T>re.PI?T-=re.PI2:T<-re.PI&&(T+=re.PI2);var w=y.c,C=y.d;T=Math.atan2(C,w)+(T-re.PI/2+p)*i;var P=Math.sqrt(w*w+C*C);y.c=Math.cos(T)*P,y.d=Math.sin(T)*P,m=!0}m&&(v.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(t!=0){var f=a.arotation-u+this.data.offsetRotation;f-=(16384-(16384.499999999996-f/360|0))*360,u+=f*t}var h=l.ax,p=l.ay;r!=0&&(h+=(a.ax-h+this.data.offsetX)*r,p+=(a.ay-p+this.data.offsetY)*r);var d=l.ascaleX,g=l.ascaleY;n>0&&(d>1e-5&&(d=(d+(a.ascaleX-d+this.data.offsetScaleX)*n)/d),g>1e-5&&(g=(g+(a.ascaleY-g+this.data.offsetScaleY)*n)/g));var _=l.ashearY;if(i>0){var f=a.ashearY-_+this.data.offsetShearY;f-=(16384-(16384.499999999996-f/360|0))*360,l.shearY+=f*i}l.updateWorldTransformWith(h,p,u,d,g,l.ashearX,_)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;t!=0&&(u+=(a.arotation+this.data.offsetRotation)*t);var f=l.ax,h=l.ay;r!=0&&(f+=(a.ax+this.data.offsetX)*r,h+=(a.ay+this.data.offsetY)*r);var p=l.ascaleX,d=l.ascaleY;n>0&&(p>1e-5&&(p*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),d>1e-5&&(d*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var g=l.ashearY;i>0&&(g+=(a.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(f,h,u,p,d,l.ashearX,g)}},e.prototype.getOrder=function(){return this.data.order},e}(),KV=function(){function e(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var n=t.bones[r],i=void 0;if(n.parent==null)i=new PT(n,this,null);else{var a=this.bones[n.parent.index];i=new PT(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<t.slots.length;r++){var o=t.slots[r],i=this.bones[o.boneData.index],s=new TP(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<t.ikConstraints.length;r++){var c=t.ikConstraints[r];this.ikConstraints.push(new XV(c,this))}this.transformConstraints=new Array;for(var r=0;r<t.transformConstraints.length;r++){var l=t.transformConstraints[r];this.transformConstraints.push(new qV(l,this))}this.pathConstraints=new Array;for(var r=0;r<t.pathConstraints.length;r++){var u=t.pathConstraints[r];this.pathConstraints.push(new YV(u,this))}this.color=new rt(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){var t=this._updateCache;t.length=0,this.updateCacheReset.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++)r[n].sorted=!1;var a=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,c=a.length,l=o.length,u=s.length,f=c+l+u;e:for(var n=0;n<f;n++){for(var h=0;h<c;h++){var p=a[h];if(p.data.order==n){this.sortIkConstraint(p);continue e}}for(var h=0;h<l;h++){var p=o[h];if(p.data.order==n){this.sortTransformConstraint(p);continue e}}for(var h=0;h<u;h++){var p=s[h];if(p.data.order==n){this.sortPathConstraint(p);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},e.prototype.sortIkConstraint=function(t){var r=t.target;this.sortBone(r);var n=t.bones,i=n[0];if(this.sortBone(i),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(t),this.sortReset(i.children),n[n.length-1].sorted=!0},e.prototype.sortPathConstraint=function(t){var r=t.target,n=r.data.index,i=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof v0&&this.sortPathConstraintAttachmentWith(s,i);for(var c=t.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(t);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var r=t.bones,n=r.length;if(t.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(var o=0;o<n;o++)r[o].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,r,n){var i=t.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},e.prototype.sortPathConstraintAttachmentWith=function(t,r){if(t instanceof v0){var n=t.bones;if(n==null)this.sortBone(r);else for(var i=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var c=n[a];this.sortBone(i[c])}}},e.prototype.sortBone=function(t){if(!t.sorted){var r=t.parent;r!=null&&this.sortBone(r),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var r=0,n=t.length;r<n;r++){var i=t[r];i.sorted&&this.sortReset(i.children),i.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,r=0,n=t.length;r<n;r++){var i=t[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,r=0,n=t.length;r<n;r++)t[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.bendDirection=a.data.bendDirection,a.mix=a.data.mix}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;xe.arrayCopy(t,0,this.drawOrder,0,t.length);for(var r=0,n=t.length;r<n;r++)t[r].setToSetupPose()},e.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},e.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var r=this.data.findSkin(t);if(r==null)throw new Error("Skin not found: "+t);this.setSkin(r)},e.prototype.setSkin=function(t){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o!=null){var s=t.getAttachment(n,o);s!=null&&a.setAttachment(s)}}this.skin=t},e.prototype.getAttachmentByName=function(t,r){return this.getAttachment(this.data.findSlotIndex(t),r)},e.prototype.getAttachment=function(t,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(t,r);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,r):null},e.prototype.setAttachment=function(t,r){if(t==null)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==t){var s=null;if(r!=null&&(s=this.getAttachment(i,r),s==null))throw new Error("Attachment not found: "+r+", for slot: "+t);o.setAttachment(s);return}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.getBounds=function(t,r,n){if(t==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l],h=0,p=null,d=f.getAttachment();if(d instanceof AP)h=8,p=xe.setArraySize(n,h,0),d.computeWorldVertices(f.bone,p,0,2);else if(d instanceof CP){var g=d;h=g.worldVerticesLength,p=xe.setArraySize(n,h,0),g.computeWorldVertices(f,0,h,p,0,2)}if(p!=null)for(var _=0,v=p.length;_<v;_+=2){var m=p[_],y=p[_+1];a=Math.min(a,m),o=Math.min(o,y),s=Math.max(s,m),c=Math.max(c,y)}}t.set(a,o),r.set(s-a,c-o)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),e.deprecatedWarning1=!1,e}(),kFe=function(e){$n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(sP),ZV=function(){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return e.prototype.findBone=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(t==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e.prototype.findSlot=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(t==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e.prototype.findSkin=function(t){if(t==null)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findEvent=function(t){if(t==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findAnimation=function(t){if(t==null)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findIkConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(t==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e}(),JV=function(){function e(t,r,n){if(this.color=new rt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=t,this.name=r,this.boneData=n}return e}(),QV=function(){function e(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,t==null)throw new Error("name cannot be null.");this.name=t}return e}(),eH=function(){function e(t){if(this.attachments=new Array,t==null)throw new Error("name cannot be null.");this.name=t}return e.prototype.addAttachment=function(t,r,n){if(n==null)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][r]=n},e.prototype.getAttachment=function(t,r){var n=this.attachments[t];return n?n[r]:null},e.prototype.attachAll=function(t,r){for(var n=0,i=0;i<t.slots.length;i++){var a=t.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u!=null&&a.setAttachment(u);break}}}n++}},e}(),tH=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(t){var r=this.scale,n=new ZV,i=typeof t=="string"?JSON.parse(t):t,a=i.skeleton;if(a!=null&&(n.hash=a.hash,n.version=a.spine,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images),i.bones)for(var o=0;o<i.bones.length;o++){var s=i.bones[o],c=null,l=this.getValue(s,"parent",null);if(l!=null&&(c=n.findBone(l),c==null))throw new Error("Parent bone not found: "+l);var u=new GV(n.bones.length,s.name,c);u.length=this.getValue(s,"length",0)*r,u.x=this.getValue(s,"x",0)*r,u.y=this.getValue(s,"y",0)*r,u.rotation=this.getValue(s,"rotation",0),u.scaleX=this.getValue(s,"scaleX",1),u.scaleY=this.getValue(s,"scaleY",1),u.shearX=this.getValue(s,"shearX",0),u.shearY=this.getValue(s,"shearY",0),u.transformMode=e.transformModeFromString(this.getValue(s,"transform","normal")),n.bones.push(u)}if(i.slots)for(var o=0;o<i.slots.length;o++){var f=i.slots[o],h=f.name,p=f.bone,d=n.findBone(p);if(d==null)throw new Error("Slot bone not found: "+p);var u=new JV(n.slots.length,h,d),g=this.getValue(f,"color",null);g!=null&&u.color.setFromString(g);var _=this.getValue(f,"dark",null);_!=null&&(u.darkColor=new rt(1,1,1,1),u.darkColor.setFromString(_)),u.attachmentName=this.getValue(f,"attachment",null),u.blendMode=e.blendModeFromString(this.getValue(f,"blend","normal")),n.slots.push(u)}if(i.ik)for(var o=0;o<i.ik.length;o++){var v=i.ik[o],u=new zV(v.name);u.order=this.getValue(v,"order",0);for(var m=0;m<v.bones.length;m++){var p=v.bones[m],y=n.findBone(p);if(y==null)throw new Error("IK bone not found: "+p);u.bones.push(y)}var b=v.target;if(u.target=n.findBone(b),u.target==null)throw new Error("IK target bone not found: "+b);u.bendDirection=this.getValue(v,"bendPositive",!0)?1:-1,u.mix=this.getValue(v,"mix",1),n.ikConstraints.push(u)}if(i.transform)for(var o=0;o<i.transform.length;o++){var v=i.transform[o],u=new QV(v.name);u.order=this.getValue(v,"order",0);for(var m=0;m<v.bones.length;m++){var p=v.bones[m],y=n.findBone(p);if(y==null)throw new Error("Transform constraint bone not found: "+p);u.bones.push(y)}var b=v.target;if(u.target=n.findBone(b),u.target==null)throw new Error("Transform constraint target bone not found: "+b);u.local=this.getValue(v,"local",!1),u.relative=this.getValue(v,"relative",!1),u.offsetRotation=this.getValue(v,"rotation",0),u.offsetX=this.getValue(v,"x",0)*r,u.offsetY=this.getValue(v,"y",0)*r,u.offsetScaleX=this.getValue(v,"scaleX",0),u.offsetScaleY=this.getValue(v,"scaleY",0),u.offsetShearY=this.getValue(v,"shearY",0),u.rotateMix=this.getValue(v,"rotateMix",1),u.translateMix=this.getValue(v,"translateMix",1),u.scaleMix=this.getValue(v,"scaleMix",1),u.shearMix=this.getValue(v,"shearMix",1),n.transformConstraints.push(u)}if(i.path)for(var o=0;o<i.path.length;o++){var v=i.path[o],u=new WV(v.name);u.order=this.getValue(v,"order",0);for(var m=0;m<v.bones.length;m++){var p=v.bones[m],y=n.findBone(p);if(y==null)throw new Error("Transform constraint bone not found: "+p);u.bones.push(y)}var b=v.target;if(u.target=n.findSlot(b),u.target==null)throw new Error("Path target slot not found: "+b);u.positionMode=e.positionModeFromString(this.getValue(v,"positionMode","percent")),u.spacingMode=e.spacingModeFromString(this.getValue(v,"spacingMode","length")),u.rotateMode=e.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),u.offsetRotation=this.getValue(v,"rotation",0),u.position=this.getValue(v,"position",0),u.positionMode==un.Fixed&&(u.position*=r),u.spacing=this.getValue(v,"spacing",0),(u.spacingMode==qa.Length||u.spacingMode==qa.Fixed)&&(u.spacing*=r),u.rotateMix=this.getValue(v,"rotateMix",1),u.translateMix=this.getValue(v,"translateMix",1),n.pathConstraints.push(u)}if(i.skins)for(var w in i.skins){var E=i.skins[w],C=new eH(w);for(var h in E){var T=n.findSlotIndex(h);if(T==-1)throw new Error("Slot not found: "+h);var f=E[h];for(var A in f){var I=this.readAttachment(f[A],C,T,A,n);I!=null&&C.addAttachment(T,A,I)}}n.skins.push(C),C.name=="default"&&(n.defaultSkin=C)}for(var o=0,O=this.linkedMeshes.length;o<O;o++){var P=this.linkedMeshes[o],C=P.skin==null?n.defaultSkin:n.findSkin(P.skin);if(C==null)throw new Error("Skin not found: "+P.skin);var k=C.getAttachment(P.slotIndex,P.parent);if(k==null)throw new Error("Parent mesh not found: "+P.parent);P.mesh.setParentMesh(k)}if(this.linkedMeshes.length=0,i.events)for(var F in i.events){var M=i.events[F],u=new HV(F);u.intValue=this.getValue(M,"int",0),u.floatValue=this.getValue(M,"float",0),u.stringValue=this.getValue(M,"string",""),u.audioPath=this.getValue(M,"audio",null),u.audioPath!=null&&(u.volume=this.getValue(M,"volume",1),u.balance=this.getValue(M,"balance",0)),n.events.push(u)}if(i.animations)for(var D in i.animations){var G=i.animations[D];this.readAnimation(G,D,n)}return n},e.prototype.readAttachment=function(t,r,n,i,a){var o=this.scale;i=this.getValue(t,"name",i);var s=this.getValue(t,"type","region");switch(s){case"region":{var c=this.getValue(t,"path",i),l=this.attachmentLoader.newRegionAttachment(r,i,c);if(l==null)return null;l.path=c,l.x=this.getValue(t,"x",0)*o,l.y=this.getValue(t,"y",0)*o,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*o,l.height=t.height*o;var u=this.getValue(t,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(f==null)return null;this.readVertices(t,f,t.vertexCount<<1);var u=this.getValue(t,"color",null);return u!=null&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var c=this.getValue(t,"path",i),h=this.attachmentLoader.newMeshAttachment(r,i,c);if(h==null)return null;h.path=c;var u=this.getValue(t,"color",null);u!=null&&h.color.setFromString(u);var p=this.getValue(t,"parent",null);if(p!=null)return h.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new FFe(h,this.getValue(t,"skin",null),n,p)),h;var d=t.uvs;return this.readVertices(t,h,d.length),h.triangles=t.triangles,h.regionUVs=new Float32Array(d),h.hullLength=this.getValue(t,"hull",0)*2,h}case"path":{var c=this.attachmentLoader.newPathAttachment(r,i);if(c==null)return null;c.closed=this.getValue(t,"closed",!1),c.constantSpeed=this.getValue(t,"constantSpeed",!0);var g=t.vertexCount;this.readVertices(t,c,g<<1);for(var _=xe.newArray(g/3,0),v=0;v<t.lengths.length;v++)_[v]=t.lengths[v]*o;c.lengths=_;var u=this.getValue(t,"color",null);return u!=null&&c.color.setFromString(u),c}case"point":{var m=this.attachmentLoader.newPointAttachment(r,i);if(m==null)return null;m.x=this.getValue(t,"x",0)*o,m.y=this.getValue(t,"y",0)*o,m.rotation=this.getValue(t,"rotation",0);var u=this.getValue(t,"color",null);return u!=null&&m.color.setFromString(u),m}case"clipping":{var y=this.attachmentLoader.newClippingAttachment(r,i);if(y==null)return null;var b=this.getValue(t,"end",null);if(b!=null){var w=a.findSlot(b);if(w==null)throw new Error("Clipping end slot not found: "+b);y.endSlot=w}var g=t.vertexCount;this.readVertices(t,y,g<<1);var u=this.getValue(t,"color",null);return u!=null&&y.color.setFromString(u),y}}return null},e.prototype.readVertices=function(t,r,n){var i=this.scale;r.worldVerticesLength=n;var a=t.vertices;if(n==a.length){var o=xe.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=xe.toFloatArray(l)},e.prototype.readAnimation=function(t,r,n){var i=this.scale,a=new Array,o=0;if(t.slots)for(var s in t.slots){var c=t.slots[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+s);for(var u in c){var f=c[u];if(u=="attachment"){var h=new m_(f.length);h.slotIndex=l;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p++,g.time,g.name)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}else if(u=="color"){var h=new CT(f.length);h.slotIndex=l;for(var p=0,d=0;d<f.length;d++){var g=f[d],_=new rt;_.setFromString(g.color||"ffffffff"),h.setFrame(p,g.time,_.r,_.g,_.b,_.a),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*CT.ENTRIES])}else if(u=="twoColor"){var h=new TT(f.length);h.slotIndex=l;for(var p=0,d=0;d<f.length;d++){var g=f[d],v=new rt,m=new rt;v.setFromString(g.light),m.setFromString(g.dark),h.setFrame(p,g.time,v.r,v.g,v.b,v.a,m.r,m.g,m.b),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*TT.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+u+" ("+s+")")}}if(t.bones)for(var y in t.bones){var b=t.bones[y],w=n.findBoneIndex(y);if(w==-1)throw new Error("Bone not found: "+y);for(var u in b){var f=b[u];if(u==="rotate"){var h=new bo(f.length);h.boneIndex=w;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p,g.time,g.angle),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*bo.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){var h=null,E=1;u==="scale"?h=new kV(f.length):u==="shear"?h=new FV(f.length):(h=new g0(f.length),E=i),h.boneIndex=w;for(var p=0,d=0;d<f.length;d++){var g=f[d],C=this.getValue(g,"x",0),T=this.getValue(g,"y",0);h.setFrame(p,g.time,C*E,T*E),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*g0.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+u+" ("+y+")")}}if(t.ik)for(var A in t.ik){var I=t.ik[A],O=n.findIkConstraint(A),h=new AT(I.length);h.ikConstraintIndex=n.ikConstraints.indexOf(O);for(var p=0,d=0;d<I.length;d++){var g=I[d];h.setFrame(p,g.time,this.getValue(g,"mix",1),this.getValue(g,"bendPositive",!0)?1:-1,this.getValue(g,"compress",!1),this.getValue(g,"stretch",!1)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*AT.ENTRIES])}if(t.transform)for(var A in t.transform){var I=t.transform[A],O=n.findTransformConstraint(A),h=new IT(I.length);h.transformConstraintIndex=n.transformConstraints.indexOf(O);for(var p=0,d=0;d<I.length;d++){var g=I[d];h.setFrame(p,g.time,this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1),this.getValue(g,"scaleMix",1),this.getValue(g,"shearMix",1)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*IT.ENTRIES])}if(t.paths)for(var A in t.paths){var I=t.paths[A],P=n.findPathConstraintIndex(A);if(P==-1)throw new Error("Path constraint not found: "+A);var k=n.pathConstraints[P];for(var u in I){var f=I[u];if(u==="position"||u==="spacing"){var h=null,E=1;u==="spacing"?(h=new BV(f.length),(k.spacingMode==qa.Length||k.spacingMode==qa.Fixed)&&(E=i)):(h=new y_(f.length),k.positionMode==un.Fixed&&(E=i)),h.pathConstraintIndex=P;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p,g.time,this.getValue(g,u,0)*E),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*y_.ENTRIES])}else if(u==="mix"){var h=new RT(f.length);h.pathConstraintIndex=P;for(var p=0,d=0;d<f.length;d++){var g=f[d];h.setFrame(p,g.time,this.getValue(g,"rotateMix",1),this.getValue(g,"translateMix",1)),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*RT.ENTRIES])}}}if(t.deform)for(var F in t.deform){var M=t.deform[F],D=n.findSkin(F);if(D!=null)for(var s in M){var c=M[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+c.name);for(var u in c){var f=c[u],G=D.getAttachment(l,u);if(G==null)throw new Error("Deform attachment not found: "+f.name);var Q=G.bones!=null,te=G.vertices,Y=Q?te.length/3*2:te.length,h=new NV(f.length);h.slotIndex=l,h.attachment=G;for(var p=0,U=0;U<f.length;U++){var g=f[U],z=void 0,j=this.getValue(g,"vertices",null);if(j==null)z=Q?xe.newFloatArray(Y):te;else{z=xe.newFloatArray(Y);var V=this.getValue(g,"offset",0);if(xe.arrayCopy(j,0,z,V,j.length),i!=1)for(var d=V,ne=d+j.length;d<ne;d++)z[d]*=i;if(!Q)for(var d=0;d<Y;d++)z[d]+=te[d]}h.setFrame(p,g.time,z),this.readCurve(g,h,p),p++}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var ae=t.drawOrder;if(ae==null&&(ae=t.draworder),ae!=null){for(var h=new __(ae.length),pe=n.slots.length,p=0,U=0;U<ae.length;U++){var se=ae[U],_e=null,Le=this.getValue(se,"offsets",null);if(Le!=null){_e=xe.newArray(pe,-1);for(var Pe=xe.newArray(pe-Le.length,0),Ee=0,Se=0,d=0;d<Le.length;d++){var Ge=Le[d],l=n.findSlotIndex(Ge.slot);if(l==-1)throw new Error("Slot not found: "+Ge.slot);for(;Ee!=l;)Pe[Se++]=Ee++;_e[Ee+Ge.offset]=Ee++}for(;Ee<pe;)Pe[Se++]=Ee++;for(var d=pe-1;d>=0;d--)_e[d]==-1&&(_e[d]=Pe[--Se])}h.setFrame(p++,se.time,_e)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(t.events){for(var h=new LV(t.events.length),p=0,d=0;d<t.events.length;d++){var We=t.events[d],Ve=n.findEvent(We.name);if(Ve==null)throw new Error("Event not found: "+We.name);var Xe=new VV(xe.toSinglePrecision(We.time),Ve);Xe.intValue=this.getValue(We,"int",Ve.intValue),Xe.floatValue=this.getValue(We,"float",Ve.floatValue),Xe.stringValue=this.getValue(We,"string",Ve.stringValue),Xe.data.audioPath!=null&&(Xe.volume=this.getValue(We,"volume",1),Xe.balance=this.getValue(We,"balance",0)),h.setFrame(p++,Xe)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new oi(r,a,o))},e.prototype.readCurve=function(t,r,n){if(t.curve){if(t.curve==="stepped")r.setStepped(n);else if(Object.prototype.toString.call(t.curve)==="[object Array]"){var i=t.curve;r.setCurve(n,i[0],i[1],i[2],i[3])}}},e.prototype.getValue=function(t,r,n){return t[r]!==void 0?t[r]:n},e.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return ut.NORMAL;if(t=="additive")return ut.ADD;if(t=="multiply")return ut.MULTIPLY;if(t=="screen")return ut.SCREEN;throw new Error("Unknown blend mode: "+t)},e.positionModeFromString=function(t){if(t=t.toLowerCase(),t=="fixed")return un.Fixed;if(t=="percent")return un.Percent;throw new Error("Unknown position mode: "+t)},e.spacingModeFromString=function(t){if(t=t.toLowerCase(),t=="length")return qa.Length;if(t=="fixed")return qa.Fixed;if(t=="percent")return qa.Percent;throw new Error("Unknown position mode: "+t)},e.rotateModeFromString=function(t){if(t=t.toLowerCase(),t=="tangent")return Tn.Tangent;if(t=="chain")return Tn.Chain;if(t=="chainscale")return Tn.ChainScale;throw new Error("Unknown rotate mode: "+t)},e.transformModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return Ut.Normal;if(t=="onlytranslation")return Ut.OnlyTranslation;if(t=="norotationorreflection")return Ut.NoRotationOrReflection;if(t=="noscale")return Ut.NoScale;if(t=="noscaleorreflection")return Ut.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},e}(),FFe=function(){function e(t,r,n,i){this.mesh=t,this.skin=r,this.slotIndex=n,this.parent=i}return e}(),NFe=function(e){$n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createSkeleton=function(r){this.skeleton=new KV(r),this.skeleton.updateWorldTransform(),this.stateData=new jV(r),this.state=new MV(this.stateData)},t}(W0);const LFe=Object.freeze(Object.defineProperty({__proto__:null,Animation:oi,AnimationState:MV,AnimationStateAdapter2:OFe,AnimationStateData:jV,AtlasAttachmentLoader:$V,Attachment:SP,AttachmentTimeline:m_,Bone:PT,BoneData:GV,BoundingBoxAttachment:RV,ClippingAttachment:PV,ColorTimeline:CT,CurveTimeline:ms,DeformTimeline:NV,DrawOrderTimeline:__,Event:VV,EventData:HV,EventQueue:UV,EventTimeline:LV,get EventType(){return Zi},IkConstraint:XV,IkConstraintData:zV,IkConstraintTimeline:AT,JitterEffect:RFe,MeshAttachment:CP,PathAttachment:v0,PathConstraint:YV,PathConstraintData:WV,PathConstraintMixTimeline:RT,PathConstraintPositionTimeline:y_,PathConstraintSpacingTimeline:BV,PointAttachment:OV,RegionAttachment:AP,RotateTimeline:bo,ScaleTimeline:kV,ShearTimeline:FV,Skeleton:KV,SkeletonBounds:kFe,SkeletonData:ZV,SkeletonJson:tH,Skin:eH,Slot:TP,SlotData:JV,get SpacingMode(){return qa},Spine:NFe,SwirlEffect:PFe,get TimelineType(){return _i},TrackEntry:DV,TransformConstraint:qV,TransformConstraintData:QV,TransformConstraintTimeline:IT,TranslateTimeline:g0,TwoColorTimeline:TT,VertexAttachment:Rc},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OT=function(e,t){return OT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},OT(e,t)};function nr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");OT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var IP=function(){function e(t){if(!t)throw new Error("name cannot be null.");this.name=t}return e}(),cs=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.id=t.nextID++,n.bones=null,n.vertices=[],n.worldVerticesLength=0,n.timelineAttachment=n,n}return t.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},t.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.deform,u=this.vertices,f=this.bones;if(!f){l.length>0&&(u=l);for(var h=r.bone.matrix,p=h.tx,d=h.ty,g=h.a,_=h.c,v=h.b,m=h.d,y=n,b=o;b<i;y+=2,b+=s){var w=u[y],E=u[y+1];a[b]=w*g+E*_+p,a[b+1]=w*v+E*m+d}return}for(var C=0,T=0,A=0;A<n;A+=2){var I=f[C];C+=I+1,T+=I}var O=c.bones;if(l.length==0)for(var b=o,_=T*3;b<i;b+=s){var P=0,k=0,I=f[C++];for(I+=C;C<I;C++,_+=3){var h=O[f[C]].matrix,w=u[_],E=u[_+1],F=u[_+2];P+=(w*h.a+E*h.c+h.tx)*F,k+=(w*h.b+E*h.d+h.ty)*F}a[b]=P,a[b+1]=k}else for(var M=l,b=o,_=T*3,D=T<<1;b<i;b+=s){var P=0,k=0,I=f[C++];for(I+=C;C<I;C++,_+=3,D+=2){var h=O[f[C]].matrix,w=u[_]+M[D],E=u[_+1]+M[D+1],F=u[_+2];P+=(w*h.a+E*h.c+h.tx)*F,k+=(w*h.b+E*h.d+h.ty)*F}a[b]=P,a[b+1]=k}},t.prototype.copyTo=function(r){this.bones?(r.bones=new Array(this.bones.length),xe.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,this.vertices&&(r.vertices=xe.newFloatArray(this.vertices.length),xe.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)),r.worldVerticesLength=this.worldVerticesLength,r.timelineAttachment=this.timelineAttachment},t.nextID=0,t}(IP),rH=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.BoundingBox,n.color=new rt(1,1,1,1),n}return t.prototype.copy=function(){var r=new t(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},t}(cs),nH=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Clipping,n.endSlot=null,n.color=new rt(.2275,.2275,.8078,1),n}return t.prototype.copy=function(){var r=new t(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},t}(cs),cx=function(e){nr(t,e);function t(r,n){var i=e.call(this,r)||this;return i.type=Jt.Mesh,i.region=null,i.triangles=[],i.color=new rt(1,1,1,1),i.width=0,i.height=0,i.hullLength=0,i.edges=[],i.parentMesh=null,i.sequence=null,i.tempColor=new rt(0,0,0,0),i.path=n,i}return t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(r){this.parentMesh=r,r&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},t.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var r=new t(this.name,this.path);return r.region=this.region,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Float32Array(this.regionUVs.length),xe.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.triangles=new Array(this.triangles.length),xe.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,r.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(r.edges=new Array(this.edges.length),xe.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},t.prototype.computeWorldVertices=function(r,n,i,a,o,s){this.sequence!=null&&this.sequence.apply(r,this),e.prototype.computeWorldVertices.call(this,r,n,i,a,o,s)},t.prototype.newLinkedMesh=function(){var r=new t(this.name,this.path);return r.region=this.region,r.color.setFromColor(this.color),r.timelineAttachment=this.timelineAttachment,r.setParentMesh(this.parentMesh?this.parentMesh:this),r},t}(cs),m0=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Path,n.lengths=[],n.closed=!1,n.constantSpeed=!1,n.color=new rt(1,1,1,1),n}return t.prototype.copy=function(){var r=new t(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),xe.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},t}(cs),iH=function(e){nr(t,e);function t(r){var n=e.call(this,r)||this;return n.type=Jt.Point,n.x=0,n.y=0,n.rotation=0,n.color=new rt(.38,.94,0,1),n}return t.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},t.prototype.computeWorldRotation=function(r){var n=r.matrix,i=re.cosDeg(this.rotation),a=re.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*re.radDeg},t.prototype.copy=function(){var r=new t(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},t}(cs),RP=function(e){nr(t,e);function t(r,n){var i=e.call(this,r)||this;return i.type=Jt.Region,i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new rt(1,1,1,1),i.rendererObject=null,i.region=null,i.sequence=null,i.offset=xe.newFloatArray(8),i.uvs=xe.newFloatArray(8),i.tempColor=new rt(1,1,1,1),i.path=n,i}return t.prototype.updateRegion=function(){if(!this.region)throw new Error("Region not set.");var r=this.region,n=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*n,o=-this.height/2*this.scaleY+this.region.offsetY*i,s=a+this.region.width*n,c=o+this.region.height*i,l=this.rotation*Math.PI/180,u=Math.cos(l),f=Math.sin(l),h=this.x,p=this.y,d=a*u+h,g=a*f,_=o*u+p,v=o*f,m=s*u+h,y=s*f,b=c*u+p,w=c*f,E=this.offset;E[0]=d-v,E[1]=_+g,E[2]=d-w,E[3]=b+g,E[4]=m-w,E[5]=b+y,E[6]=m-v,E[7]=_+y;var C=this.uvs;r.degrees==90?(C[2]=r.u,C[3]=r.v2,C[4]=r.u,C[5]=r.v,C[6]=r.u2,C[7]=r.v,C[0]=r.u2,C[1]=r.v2):(C[0]=r.u,C[1]=r.v2,C[2]=r.u,C[3]=r.v,C[4]=r.u2,C[5]=r.v,C[6]=r.u2,C[7]=r.v2)},t.prototype.computeWorldVertices=function(r,n,i,a){this.sequence!=null&&this.sequence.apply(r,this);var o=r.bone,s=this.offset,c=o.matrix,l=c.tx,u=c.ty,f=c.a,h=c.c,p=c.b,d=c.d,g=0,_=0;g=s[0],_=s[1],n[i]=g*f+_*h+l,n[i+1]=g*p+_*d+u,i+=a,g=s[2],_=s[3],n[i]=g*f+_*h+l,n[i+1]=g*p+_*d+u,i+=a,g=s[4],_=s[5],n[i]=g*f+_*h+l,n[i+1]=g*p+_*d+u,i+=a,g=s[6],_=s[7],n[i]=g*f+_*h+l,n[i+1]=g*p+_*d+u},t.prototype.copy=function(){var r=new t(this.name,this.path);return r.region=this.region,r.rendererObject=this.rendererObject,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,xe.arrayCopy(this.uvs,0,r.uvs,0,8),xe.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r.sequence=this.sequence!=null?this.sequence.copy():null,r},t.X1=0,t.Y1=1,t.C1R=2,t.C1G=3,t.C1B=4,t.C1A=5,t.U1=6,t.V1=7,t.X2=8,t.Y2=9,t.C2R=10,t.C2G=11,t.C2B=12,t.C2A=13,t.U2=14,t.V2=15,t.X3=16,t.Y3=17,t.C3R=18,t.C3G=19,t.C3B=20,t.C3A=21,t.U3=22,t.V3=23,t.X4=24,t.Y4=25,t.C4R=26,t.C4G=27,t.C4B=28,t.C4A=29,t.U4=30,t.V4=31,t}(IP),PP=function(){function e(t){this.id=e.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}return e.prototype.copy=function(){var t=new e(this.regions.length);return xe.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t},e.prototype.apply=function(t,r){var n=t.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);var i=this.regions[n];r.region!=i&&(r.region=i)},e.prototype.getPath=function(t,r){for(var n=t,i=(this.start+r).toString(),a=this.digits-i.length;a>0;a--)n+="0";return n+=i,n},e.nextID=function(){return e._nextID++},e._nextID=0,e}(),hi;(function(e){e[e.hold=0]="hold",e[e.once=1]="once",e[e.loop=2]="loop",e[e.pingpong=3]="pingpong",e[e.onceReverse=4]="onceReverse",e[e.loopReverse=5]="loopReverse",e[e.pingpongReverse=6]="pingpongReverse"})(hi||(hi={}));var OP=[hi.hold,hi.once,hi.loop,hi.pingpong,hi.onceReverse,hi.loopReverse,hi.pingpongReverse],fx=function(){function e(t,r,n){if(this.timelines=[],this.timelineIds=new pV,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(r),this.duration=n}return e.prototype.setTimelines=function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var r=0;r<t.length;r++)this.timelineIds.addAll(t[r].getPropertyIds())},e.prototype.hasTimeline=function(t){for(var r=0;r<t.length;r++)if(this.timelineIds.contains(t[r]))return!0;return!1},e.prototype.apply=function(t,r,n,i,a,o,s,c){if(!t)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(t,r,n,a,o,s,c)},e}(),Cr={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},In=function(){function e(t,r){this.propertyIds=r,this.frames=xe.newFloatArray(t*this.getFrameEntries())}return e.prototype.getPropertyIds=function(){return this.propertyIds},e.prototype.getFrameEntries=function(){return 1},e.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},e.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},e.search1=function(t,r){for(var n=t.length,i=1;i<n;i++)if(t[i]>r)return i-1;return n-1},e.search=function(t,r,n){for(var i=t.length,a=n;a<i;a+=n)if(t[a]>r)return a-n;return i-n},e}(),No=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,i)||this;return a.curves=xe.newFloatArray(r+n*18),a.curves[r-1]=1,a}return t.prototype.setLinear=function(r){this.curves[r]=0},t.prototype.setStepped=function(r){this.curves[r]=1},t.prototype.shrink=function(r){var n=this.getFrameCount()+r*18;if(this.curves.length>n){var i=xe.newFloatArray(n);xe.arrayCopy(this.curves,0,i,0,n),this.curves=i}},t.prototype.setBezier=function(r,n,i,a,o,s,c,l,u,f,h){var p=this.curves,d=this.getFrameCount()+r*18;i==0&&(p[n]=2+d);for(var g=(a-s*2+l)*.03,_=(o-c*2+u)*.03,v=((s-l)*3-a+f)*.006,m=((c-u)*3-o+h)*.006,y=g*2+v,b=_*2+m,w=(s-a)*.3+g+v*.16666667,E=(c-o)*.3+_+m*.16666667,C=a+w,T=o+E,A=d+18;d<A;d+=2)p[d]=C,p[d+1]=T,w+=y,E+=b,y+=v,b+=m,C+=w,T+=E},t.prototype.getBezierValue=function(r,n,i,a){var o=this.curves;if(o[a]>r){var s=this.frames[n],c=this.frames[n+i];return c+(r-s)/(o[a]-s)*(o[a+1]-c)}var l=a+18;for(a+=2;a<l;a+=2)if(o[a]>=r){var u=o[a-2],f=o[a-1];return f+(r-u)/(o[a]-u)*(o[a+1]-f)}n+=this.getFrameEntries();var h=o[l-2],p=o[l-1];return p+(r-h)/(this.frames[n]-h)*(this.frames[n+i]-p)},t}(In),Lo=function(e){nr(t,e);function t(r,n,i){return e.call(this,r,n,[i])||this}return t.prototype.getFrameEntries=function(){return 2},t.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+1]=i},t.prototype.getCurveValue=function(r){for(var n=this.frames,i=n.length-2,a=2;a<=i;a+=2)if(n[a]>r){i=a-2;break}var o=this.curves[i>>1];switch(o){case 0:var s=n[i],c=n[i+1];return c+(r-s)/(n[i+2]-s)*(n[i+2+1]-c);case 1:return n[i+1]}return this.getBezierValue(r,i,1,o-2)},t}(No),hx=function(e){nr(t,e);function t(r,n,i,a){return e.call(this,r,n,[i,a])||this}return t.prototype.getFrameEntries=function(){return 3},t.prototype.setFrame=function(r,n,i,a){r*=3,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a},t}(No),_0=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.rotate+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.rotation=l.data.rotation;return;case Z.first:l.rotation+=(l.data.rotation-l.rotation)*o}return}var f=this.getCurveValue(i);switch(s){case Z.setup:l.rotation=l.data.rotation+f*o;break;case Z.first:case Z.replace:f+=l.data.rotation-l.rotation;case Z.add:l.rotation+=f*o}}},t}(Lo),kP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.x+"|"+i,Cr.y+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.x=l.data.x,l.y=l.data.y;return;case Z.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}return}var f=0,h=0,p=In.search(u,i,3),d=this.curves[p/3];switch(d){case 0:var g=u[p];f=u[p+1],h=u[p+2];var _=(i-g)/(u[p+3]-g);f+=(u[p+3+1]-f)*_,h+=(u[p+3+2]-h)*_;break;case 1:f=u[p+1],h=u[p+2];break;default:f=this.getBezierValue(i,p,1,d-2),h=this.getBezierValue(i,p,2,d+18-2)}switch(s){case Z.setup:l.x=l.data.x+f*o,l.y=l.data.y+h*o;break;case Z.first:case Z.replace:l.x+=(l.data.x+f-l.x)*o,l.y+=(l.data.y+h-l.y)*o;break;case Z.add:l.x+=f*o,l.y+=h*o}}},t}(hx),FP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.x+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.x=l.data.x;return;case Z.first:l.x+=(l.data.x-l.x)*o}return}var f=this.getCurveValue(i);switch(s){case Z.setup:l.x=l.data.x+f*o;break;case Z.first:case Z.replace:l.x+=(l.data.x+f-l.x)*o;break;case Z.add:l.x+=f*o}}},t}(Lo),NP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.y+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.y=l.data.y;return;case Z.first:l.y+=(l.data.y-l.y)*o}return}var f=this.getCurveValue(i);switch(s){case Z.setup:l.y=l.data.y+f*o;break;case Z.first:case Z.replace:l.y+=(l.data.y+f-l.y)*o;break;case Z.add:l.y+=f*o}}},t}(Lo),LP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.scaleX+"|"+i,Cr.scaleY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case Z.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var f,h,p=In.search(u,i,3),d=this.curves[p/3];switch(d){case 0:var g=u[p];f=u[p+1],h=u[p+2];var _=(i-g)/(u[p+3]-g);f+=(u[p+3+1]-f)*_,h+=(u[p+3+2]-h)*_;break;case 1:f=u[p+1],h=u[p+2];break;default:f=this.getBezierValue(i,p,1,d-2),h=this.getBezierValue(i,p,2,d+18-2)}if(f*=l.data.scaleX,h*=l.data.scaleY,o==1)s==Z.add?(l.scaleX+=f-l.data.scaleX,l.scaleY+=h-l.data.scaleY):(l.scaleX=f,l.scaleY=h);else{var v=0,m=0;if(c==Yt.mixOut)switch(s){case Z.setup:v=l.data.scaleX,m=l.data.scaleY,l.scaleX=v+(Math.abs(f)*re.signum(v)-v)*o,l.scaleY=m+(Math.abs(h)*re.signum(m)-m)*o;break;case Z.first:case Z.replace:v=l.scaleX,m=l.scaleY,l.scaleX=v+(Math.abs(f)*re.signum(v)-v)*o,l.scaleY=m+(Math.abs(h)*re.signum(m)-m)*o;break;case Z.add:l.scaleX+=(f-l.data.scaleX)*o,l.scaleY+=(h-l.data.scaleY)*o}else switch(s){case Z.setup:v=Math.abs(l.data.scaleX)*re.signum(f),m=Math.abs(l.data.scaleY)*re.signum(h),l.scaleX=v+(f-v)*o,l.scaleY=m+(h-m)*o;break;case Z.first:case Z.replace:v=Math.abs(l.scaleX)*re.signum(f),m=Math.abs(l.scaleY)*re.signum(h),l.scaleX=v+(f-v)*o,l.scaleY=m+(h-m)*o;break;case Z.add:l.scaleX+=(f-l.data.scaleX)*o,l.scaleY+=(h-l.data.scaleY)*o}}}},t}(hx),BP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.scaleX+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.scaleX=l.data.scaleX;return;case Z.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o}return}var f=this.getCurveValue(i)*l.data.scaleX;if(o==1)s==Z.add?l.scaleX+=f-l.data.scaleX:l.scaleX=f;else{var h=0;if(c==Yt.mixOut)switch(s){case Z.setup:h=l.data.scaleX,l.scaleX=h+(Math.abs(f)*re.signum(h)-h)*o;break;case Z.first:case Z.replace:h=l.scaleX,l.scaleX=h+(Math.abs(f)*re.signum(h)-h)*o;break;case Z.add:l.scaleX+=(f-l.data.scaleX)*o}else switch(s){case Z.setup:h=Math.abs(l.data.scaleX)*re.signum(f),l.scaleX=h+(f-h)*o;break;case Z.first:case Z.replace:h=Math.abs(l.scaleX)*re.signum(f),l.scaleX=h+(f-h)*o;break;case Z.add:l.scaleX+=(f-l.data.scaleX)*o}}}},t}(Lo),MP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.scaleY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.scaleY=l.data.scaleY;return;case Z.first:l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var f=this.getCurveValue(i)*l.data.scaleY;if(o==1)s==Z.add?l.scaleY+=f-l.data.scaleY:l.scaleY=f;else{var h=0;if(c==Yt.mixOut)switch(s){case Z.setup:h=l.data.scaleY,l.scaleY=h+(Math.abs(f)*re.signum(h)-h)*o;break;case Z.first:case Z.replace:h=l.scaleY,l.scaleY=h+(Math.abs(f)*re.signum(h)-h)*o;break;case Z.add:l.scaleY+=(f-l.data.scaleY)*o}else switch(s){case Z.setup:h=Math.abs(l.data.scaleY)*re.signum(f),l.scaleY=h+(f-h)*o;break;case Z.first:case Z.replace:h=Math.abs(l.scaleY)*re.signum(f),l.scaleY=h+(f-h)*o;break;case Z.add:l.scaleY+=(f-l.data.scaleY)*o}}}},t}(Lo),DP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.shearX+"|"+i,Cr.shearY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case Z.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}return}var f=0,h=0,p=In.search(u,i,3),d=this.curves[p/3];switch(d){case 0:var g=u[p];f=u[p+1],h=u[p+2];var _=(i-g)/(u[p+3]-g);f+=(u[p+3+1]-f)*_,h+=(u[p+3+2]-h)*_;break;case 1:f=u[p+1],h=u[p+2];break;default:f=this.getBezierValue(i,p,1,d-2),h=this.getBezierValue(i,p,2,d+18-2)}switch(s){case Z.setup:l.shearX=l.data.shearX+f*o,l.shearY=l.data.shearY+h*o;break;case Z.first:case Z.replace:l.shearX+=(l.data.shearX+f-l.shearX)*o,l.shearY+=(l.data.shearY+h-l.shearY)*o;break;case Z.add:l.shearX+=f*o,l.shearY+=h*o}}},t}(hx),UP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.shearX+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.shearX=l.data.shearX;return;case Z.first:l.shearX+=(l.data.shearX-l.shearX)*o}return}var f=this.getCurveValue(i);switch(s){case Z.setup:l.shearX=l.data.shearX+f*o;break;case Z.first:case Z.replace:l.shearX+=(l.data.shearX+f-l.shearX)*o;break;case Z.add:l.shearX+=f*o}}},t}(Lo),jP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.shearY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.shearY=l.data.shearY;return;case Z.first:l.shearY+=(l.data.shearY-l.shearY)*o}return}var f=this.getCurveValue(i);switch(s){case Z.setup:l.shearY=l.data.shearY+f*o;break;case Z.first:case Z.replace:l.shearY+=(l.data.shearY+f-l.shearY)*o;break;case Z.add:l.shearY+=f*o}}},t}(Lo),$P=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.rgb+"|"+i,Cr.alpha+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return t.prototype.getFrameEntries=function(){return 5},t.prototype.setFrame=function(r,n,i,a,o,s){r*=5,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color;if(i<u[0]){var h=l.data.color;switch(s){case Z.setup:f.setFromColor(h);return;case Z.first:f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var p=0,d=0,g=0,_=0,v=In.search(u,i,5),m=this.curves[v/5];switch(m){case 0:var y=u[v];p=u[v+1],d=u[v+2],g=u[v+3],_=u[v+4];var b=(i-y)/(u[v+5]-y);p+=(u[v+5+1]-p)*b,d+=(u[v+5+2]-d)*b,g+=(u[v+5+3]-g)*b,_+=(u[v+5+4]-_)*b;break;case 1:p=u[v+1],d=u[v+2],g=u[v+3],_=u[v+4];break;default:p=this.getBezierValue(i,v,1,m-2),d=this.getBezierValue(i,v,2,m+18-2),g=this.getBezierValue(i,v,3,m+18*2-2),_=this.getBezierValue(i,v,4,m+18*3-2)}o==1?f.set(p,d,g,_):(s==Z.setup&&f.setFromColor(l.data.color),f.add((p-f.r)*o,(d-f.g)*o,(g-f.b)*o,(_-f.a)*o))}},t}(No),GP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.rgb+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return t.prototype.getFrameEntries=function(){return 4},t.prototype.setFrame=function(r,n,i,a,o){r<<=2,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color;if(i<u[0]){var h=l.data.color;switch(s){case Z.setup:f.r=h.r,f.g=h.g,f.b=h.b;return;case Z.first:f.r+=(h.r-f.r)*o,f.g+=(h.g-f.g)*o,f.b+=(h.b-f.b)*o}return}var p=0,d=0,g=0,_=In.search(u,i,4),v=this.curves[_>>2];switch(v){case 0:var m=u[_];p=u[_+1],d=u[_+2],g=u[_+3];var y=(i-m)/(u[_+4]-m);p+=(u[_+4+1]-p)*y,d+=(u[_+4+2]-d)*y,g+=(u[_+4+3]-g)*y;break;case 1:p=u[_+1],d=u[_+2],g=u[_+3];break;default:p=this.getBezierValue(i,_,1,v-2),d=this.getBezierValue(i,_,2,v+18-2),g=this.getBezierValue(i,_,3,v+18*2-2)}if(o==1)f.r=p,f.g=d,f.b=g;else{if(s==Z.setup){var h=l.data.color;f.r=h.r,f.g=h.g,f.b=h.b}f.r+=(p-f.r)*o,f.g+=(d-f.g)*o,f.b+=(g-f.b)*o}}},t}(No),VP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.alpha+"|"+i)||this;return a.slotIndex=0,a.slotIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.color;if(i<this.frames[0]){var f=l.data.color;switch(s){case Z.setup:u.a=f.a;return;case Z.first:u.a+=(f.a-u.a)*o}return}var h=this.getCurveValue(i);o==1?u.a=h:(s==Z.setup&&(u.a=l.data.color.a),u.a+=(h-u.a)*o)}},t}(Lo),HP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.rgb+"|"+i,Cr.alpha+"|"+i,Cr.rgb2+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return t.prototype.getFrameEntries=function(){return 8},t.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r<<=3,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s,this.frames[r+5]=c,this.frames[r+6]=l,this.frames[r+7]=u},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color,h=l.darkColor;if(i<u[0]){var p=l.data.color,d=l.data.darkColor;switch(s){case Z.setup:f.setFromColor(p),h.r=d.r,h.g=d.g,h.b=d.b;return;case Z.first:f.add((p.r-f.r)*o,(p.g-f.g)*o,(p.b-f.b)*o,(p.a-f.a)*o),h.r+=(d.r-h.r)*o,h.g+=(d.g-h.g)*o,h.b+=(d.b-h.b)*o}return}var g=0,_=0,v=0,m=0,y=0,b=0,w=0,E=In.search(u,i,8),C=this.curves[E>>3];switch(C){case 0:var T=u[E];g=u[E+1],_=u[E+2],v=u[E+3],m=u[E+4],y=u[E+5],b=u[E+6],w=u[E+7];var A=(i-T)/(u[E+8]-T);g+=(u[E+8+1]-g)*A,_+=(u[E+8+2]-_)*A,v+=(u[E+8+3]-v)*A,m+=(u[E+8+4]-m)*A,y+=(u[E+8+5]-y)*A,b+=(u[E+8+6]-b)*A,w+=(u[E+8+7]-w)*A;break;case 1:g=u[E+1],_=u[E+2],v=u[E+3],m=u[E+4],y=u[E+5],b=u[E+6],w=u[E+7];break;default:g=this.getBezierValue(i,E,1,C-2),_=this.getBezierValue(i,E,2,C+18-2),v=this.getBezierValue(i,E,3,C+18*2-2),m=this.getBezierValue(i,E,4,C+18*3-2),y=this.getBezierValue(i,E,5,C+18*4-2),b=this.getBezierValue(i,E,6,C+18*5-2),w=this.getBezierValue(i,E,7,C+18*6-2)}if(o==1)f.set(g,_,v,m),h.r=y,h.g=b,h.b=w;else{if(s==Z.setup){f.setFromColor(l.data.color);var d=l.data.darkColor;h.r=d.r,h.g=d.g,h.b=d.b}f.add((g-f.r)*o,(_-f.g)*o,(v-f.b)*o,(m-f.a)*o),h.r+=(y-h.r)*o,h.g+=(b-h.g)*o,h.b+=(w-h.b)*o}}},t}(No),XP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.rgb+"|"+i,Cr.rgb2+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return t.prototype.getFrameEntries=function(){return 7},t.prototype.setFrame=function(r,n,i,a,o,s,c,l){r*=7,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s,this.frames[r+5]=c,this.frames[r+6]=l},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color,h=l.darkColor;if(i<u[0]){var p=l.data.color,d=l.data.darkColor;switch(s){case Z.setup:f.r=p.r,f.g=p.g,f.b=p.b,h.r=d.r,h.g=d.g,h.b=d.b;return;case Z.first:f.r+=(p.r-f.r)*o,f.g+=(p.g-f.g)*o,f.b+=(p.b-f.b)*o,h.r+=(d.r-h.r)*o,h.g+=(d.g-h.g)*o,h.b+=(d.b-h.b)*o}return}var g=0,_=0,v=0,m=0,y=0,b=0,w=In.search(u,i,7),E=this.curves[w/7];switch(E){case 0:var C=u[w];g=u[w+1],_=u[w+2],v=u[w+3],m=u[w+4],y=u[w+5],b=u[w+6];var T=(i-C)/(u[w+7]-C);g+=(u[w+7+1]-g)*T,_+=(u[w+7+2]-_)*T,v+=(u[w+7+3]-v)*T,m+=(u[w+7+4]-m)*T,y+=(u[w+7+5]-y)*T,b+=(u[w+7+6]-b)*T;break;case 1:g=u[w+1],_=u[w+2],v=u[w+3],m=u[w+4],y=u[w+5],b=u[w+6];break;default:g=this.getBezierValue(i,w,1,E-2),_=this.getBezierValue(i,w,2,E+18-2),v=this.getBezierValue(i,w,3,E+18*2-2),m=this.getBezierValue(i,w,4,E+18*3-2),y=this.getBezierValue(i,w,5,E+18*4-2),b=this.getBezierValue(i,w,6,E+18*5-2)}if(o==1)f.r=g,f.g=_,f.b=v,h.r=m,h.g=y,h.b=b;else{if(s==Z.setup){var p=l.data.color,d=l.data.darkColor;f.r=p.r,f.g=p.g,f.b=p.b,h.r=d.r,h.g=d.g,h.b=d.b}f.r+=(g-f.r)*o,f.g+=(_-f.g)*o,f.b+=(v-f.b)*o,h.r+=(m-h.r)*o,h.g+=(y-h.g)*o,h.b+=(b-h.b)*o}}},t}(No),ec=function(e){nr(t,e);function t(r,n){var i=e.call(this,r,[Cr.attachment+"|"+n])||this;return i.slotIndex=0,i.slotIndex=n,i.attachmentNames=new Array(r),i}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.attachmentNames[r]=i},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){if(c==Yt.mixOut){s==Z.setup&&this.setAttachment(r,l,l.data.attachmentName);return}if(i<this.frames[0]){(s==Z.setup||s==Z.first)&&this.setAttachment(r,l,l.data.attachmentName);return}this.setAttachment(r,l,this.attachmentNames[In.search1(this.frames,i)])}},t.prototype.setAttachment=function(r,n,i){n.setAttachment(i?r.getAttachment(this.slotIndex,i):null)},t}(In),zP=function(e){nr(t,e);function t(r,n,i,a){var o=e.call(this,r,n,[Cr.deform+"|"+i+"|"+a.id])||this;return o.slotIndex=0,o.slotIndex=i,o.attachment=a,o.vertices=new Array(r),o}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.vertices[r]=i},t.prototype.setBezier=function(r,n,i,a,o,s,c,l,u,f,h){var p=this.curves,d=this.getFrameCount()+r*18;i==0&&(p[n]=2+d);for(var g=(a-s*2+l)*.03,_=u*.03-c*.06,v=((s-l)*3-a+f)*.006,m=(c-u+.33333333)*.018,y=g*2+v,b=_*2+m,w=(s-a)*.3+g+v*.16666667,E=c*.3+_+m*.16666667,C=a+w,T=E,A=d+18;d<A;d+=2)p[d]=C,p[d+1]=T,w+=y,E+=b,y+=v,b+=m,C+=w,T+=E},t.prototype.getCurvePercent=function(r,n){var i=this.curves,a=i[n];switch(a){case 0:var o=this.frames[n];return(r-o)/(this.frames[n+this.getFrameEntries()]-o);case 1:return 0}if(a-=2,i[a]>r){var s=this.frames[n];return i[a+1]*(r-s)/(i[a]-s)}var c=a+18;for(a+=2;a<c;a+=2)if(i[a]>=r){var l=i[a-2],u=i[a-1];return u+(r-l)/(i[a]-l)*(i[a+1]-u)}var f=i[c-2],h=i[c-1];return h+(1-h)*(r-f)/(this.frames[n+this.getFrameEntries()]-f)},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(u&&!(!(u instanceof cs)||u.timelineAttachment!=this.attachment)){var f=l.deform;f.length==0&&(s=Z.setup);var h=this.vertices,p=h[0].length,d=this.frames;if(i<d[0]){switch(s){case Z.setup:f.length=0;return;case Z.first:if(o==1){f.length=0;return}f.length=p;var g=u;if(g.bones){o=1-o;for(var v=0;v<p;v++)f[v]*=o}else for(var _=g.vertices,v=0;v<p;v++)f[v]+=(_[v]-f[v])*o}return}if(f.length=p,i>=d[d.length-1]){var m=h[d.length-1];if(o==1)if(s==Z.add){var g=u;if(g.bones)for(var b=0;b<p;b++)f[b]+=m[b];else for(var _=g.vertices,y=0;y<p;y++)f[y]+=m[y]-_[y]}else xe.arrayCopy(m,0,f,0,p);else switch(s){case Z.setup:{var w=u;if(w.bones)for(var T=0;T<p;T++)f[T]=m[T]*o;else for(var _=w.vertices,E=0;E<p;E++){var C=_[E];f[E]=C+(m[E]-C)*o}break}case Z.first:case Z.replace:for(var A=0;A<p;A++)f[A]+=(m[A]-f[A])*o;break;case Z.add:var g=u;if(g.bones)for(var O=0;O<p;O++)f[O]+=m[O]*o;else for(var _=g.vertices,I=0;I<p;I++)f[I]+=(m[I]-_[I])*o}return}var P=In.search1(d,i),k=this.getCurvePercent(i,P),F=h[P],M=h[P+1];if(o==1)if(s==Z.add){var g=u;if(g.bones)for(var Q=0;Q<p;Q++){var G=F[Q];f[Q]+=G+(M[Q]-G)*k}else for(var _=g.vertices,D=0;D<p;D++){var G=F[D];f[D]+=G+(M[D]-G)*k-_[D]}}else for(var te=0;te<p;te++){var G=F[te];f[te]=G+(M[te]-G)*k}else switch(s){case Z.setup:{var Y=u;if(Y.bones)for(var z=0;z<p;z++){var G=F[z];f[z]=(G+(M[z]-G)*k)*o}else for(var _=Y.vertices,U=0;U<p;U++){var G=F[U],C=_[U];f[U]=C+(G+(M[U]-G)*k-C)*o}break}case Z.first:case Z.replace:for(var j=0;j<p;j++){var G=F[j];f[j]+=(G+(M[j]-G)*k-f[j])*o}break;case Z.add:var g=u;if(g.bones)for(var ne=0;ne<p;ne++){var G=F[ne];f[ne]+=(G+(M[ne]-G)*k)*o}else for(var _=g.vertices,V=0;V<p;V++){var G=F[V];f[V]+=(G+(M[V]-G)*k-_[V])*o}}}}},t}(No),dx=function(e){nr(t,e);function t(r){var n=e.call(this,r,t.propertyIds)||this;return n.events=new Array(r),n}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(r,n){this.frames[r]=n.time,this.events[r]=n},t.prototype.apply=function(r,n,i,a,o,s,c){if(a){var l=this.frames,u=this.frames.length;if(n>i)this.apply(r,n,Number.MAX_VALUE,a,o,s,c),n=-1;else if(n>=l[u-1])return;if(!(i<l[0])){var f=0;if(n<l[0])f=0;else{f=In.search1(l,n)+1;for(var h=l[f];f>0&&l[f-1]==h;)f--}for(;f<u&&i>=l[f];f++)a.push(this.events[f])}}},t.propertyIds=[""+Cr.event],t}(In),Wf=function(e){nr(t,e);function t(r){var n=e.call(this,r,t.propertyIds)||this;return n.drawOrders=new Array(r),n}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.drawOrders[r]=i},t.prototype.apply=function(r,n,i,a,o,s,c){if(c==Yt.mixOut){s==Z.setup&&xe.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);return}if(i<this.frames[0]){(s==Z.setup||s==Z.first)&&xe.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);return}var l=In.search1(this.frames,i),u=this.drawOrders[l];if(!u)xe.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);else for(var f=r.drawOrder,h=r.slots,p=0,d=u.length;p<d;p++)f[p]=h[u[p]]},t.propertyIds=[""+Cr.drawOrder],t}(In),WP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.ikConstraint+"|"+i])||this;return a.ikConstraintIndex=0,a.ikConstraintIndex=i,a}return t.prototype.getFrameEntries=function(){return 6},t.prototype.setFrame=function(r,n,i,a,o,s,c){r*=6,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s?1:0,this.frames[r+5]=c?1:0},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.ikConstraints[this.ikConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case Z.first:l.mix+=(l.data.mix-l.mix)*o,l.softness+=(l.data.softness-l.softness)*o,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}var f=0,h=0,p=In.search(u,i,6),d=this.curves[p/6];switch(d){case 0:var g=u[p];f=u[p+1],h=u[p+2];var _=(i-g)/(u[p+6]-g);f+=(u[p+6+1]-f)*_,h+=(u[p+6+2]-h)*_;break;case 1:f=u[p+1],h=u[p+2];break;default:f=this.getBezierValue(i,p,1,d-2),h=this.getBezierValue(i,p,2,d+18-2)}s==Z.setup?(l.mix=l.data.mix+(f-l.data.mix)*o,l.softness=l.data.softness+(h-l.data.softness)*o,c==Yt.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=u[p+3],l.compress=u[p+4]!=0,l.stretch=u[p+5]!=0)):(l.mix+=(f-l.mix)*o,l.softness+=(h-l.softness)*o,c==Yt.mixIn&&(l.bendDirection=u[p+3],l.compress=u[p+4]!=0,l.stretch=u[p+5]!=0))}},t}(No),YP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.transformConstraint+"|"+i])||this;return a.transformConstraintIndex=0,a.transformConstraintIndex=i,a}return t.prototype.getFrameEntries=function(){return 7},t.prototype.setFrame=function(r,n,i,a,o,s,c,l){var u=this.frames;r*=7,u[r]=n,u[r+1]=i,u[r+2]=a,u[r+3]=o,u[r+4]=s,u[r+5]=c,u[r+6]=l},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.transformConstraints[this.transformConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){var f=l.data;switch(s){case Z.setup:l.mixRotate=f.mixRotate,l.mixX=f.mixX,l.mixY=f.mixY,l.mixScaleX=f.mixScaleX,l.mixScaleY=f.mixScaleY,l.mixShearY=f.mixShearY;return;case Z.first:l.mixRotate+=(f.mixRotate-l.mixRotate)*o,l.mixX+=(f.mixX-l.mixX)*o,l.mixY+=(f.mixY-l.mixY)*o,l.mixScaleX+=(f.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(f.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(f.mixShearY-l.mixShearY)*o}return}var h,p,d,g,_,v,m=In.search(u,i,7),y=this.curves[m/7];switch(y){case 0:var b=u[m];h=u[m+1],p=u[m+2],d=u[m+3],g=u[m+4],_=u[m+5],v=u[m+6];var w=(i-b)/(u[m+7]-b);h+=(u[m+7+1]-h)*w,p+=(u[m+7+2]-p)*w,d+=(u[m+7+3]-d)*w,g+=(u[m+7+4]-g)*w,_+=(u[m+7+5]-_)*w,v+=(u[m+7+6]-v)*w;break;case 1:h=u[m+1],p=u[m+2],d=u[m+3],g=u[m+4],_=u[m+5],v=u[m+6];break;default:h=this.getBezierValue(i,m,1,y-2),p=this.getBezierValue(i,m,2,y+18-2),d=this.getBezierValue(i,m,3,y+18*2-2),g=this.getBezierValue(i,m,4,y+18*3-2),_=this.getBezierValue(i,m,5,y+18*4-2),v=this.getBezierValue(i,m,6,y+18*5-2)}if(s==Z.setup){var f=l.data;l.mixRotate=f.mixRotate+(h-f.mixRotate)*o,l.mixX=f.mixX+(p-f.mixX)*o,l.mixY=f.mixY+(d-f.mixY)*o,l.mixScaleX=f.mixScaleX+(g-f.mixScaleX)*o,l.mixScaleY=f.mixScaleY+(_-f.mixScaleY)*o,l.mixShearY=f.mixShearY+(v-f.mixShearY)*o}else l.mixRotate+=(h-l.mixRotate)*o,l.mixX+=(p-l.mixX)*o,l.mixY+=(d-l.mixY)*o,l.mixScaleX+=(g-l.mixScaleX)*o,l.mixScaleY+=(_-l.mixScaleY)*o,l.mixShearY+=(v-l.mixShearY)*o}},t}(No),qP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.pathConstraintPosition+"|"+i)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.position=l.data.position;return;case Z.first:l.position+=(l.data.position-l.position)*o}return}var f=this.getCurveValue(i);s==Z.setup?l.position=l.data.position+(f-l.data.position)*o:l.position+=(f-l.position)*o}},t}(Lo),KP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,Cr.pathConstraintSpacing+"|"+i)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.spacing=l.data.spacing;return;case Z.first:l.spacing+=(l.data.spacing-l.spacing)*o}return}var f=this.getCurveValue(i);s==Z.setup?l.spacing=l.data.spacing+(f-l.data.spacing)*o:l.spacing+=(f-l.spacing)*o}},t}(Lo),ZP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,n,[Cr.pathConstraintMix+"|"+i])||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return t.prototype.getFrameEntries=function(){return 4},t.prototype.setFrame=function(r,n,i,a,o){var s=this.frames;r<<=2,s[r]=n,s[r+1]=i,s[r+2]=a,s[r+3]=o},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case Z.setup:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;return;case Z.first:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*o,l.mixX+=(l.data.mixX-l.mixX)*o,l.mixY+=(l.data.mixY-l.mixY)*o}return}var f,h,p,d=In.search(u,i,4),g=this.curves[d>>2];switch(g){case 0:var _=u[d];f=u[d+1],h=u[d+2],p=u[d+3];var v=(i-_)/(u[d+4]-_);f+=(u[d+4+1]-f)*v,h+=(u[d+4+2]-h)*v,p+=(u[d+4+3]-p)*v;break;case 1:f=u[d+1],h=u[d+2],p=u[d+3];break;default:f=this.getBezierValue(i,d,1,g-2),h=this.getBezierValue(i,d,2,g+18-2),p=this.getBezierValue(i,d,3,g+18*2-2)}if(s==Z.setup){var m=l.data;l.mixRotate=m.mixRotate+(f-m.mixRotate)*o,l.mixX=m.mixX+(h-m.mixX)*o,l.mixY=m.mixY+(p-m.mixY)*o}else l.mixRotate+=(f-l.mixRotate)*o,l.mixX+=(h-l.mixX)*o,l.mixY+=(p-l.mixY)*o}},t}(No),JP=function(e){nr(t,e);function t(r,n,i){var a=e.call(this,r,[Cr.sequence+"|"+n+"|"+i.sequence.id])||this;return a.slotIndex=n,a.attachment=i,a}return t.prototype.getFrameEntries=function(){return t.ENTRIES},t.prototype.getSlotIndex=function(){return this.slotIndex},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setFrame=function(r,n,i,a,o){var s=this.frames;r*=t.ENTRIES,s[r]=n,s[r+t.MODE]=i|a<<4,s[r+t.DELAY]=o},t.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.attachment,f=this.attachment;if(!(u!=f&&(!(u instanceof cs)||u.timelineAttachment!=f))){var h=this.frames;if(i<h[0]){(s==Z.setup||s==Z.first)&&(l.sequenceIndex=-1);return}var p=In.search(h,i,t.ENTRIES),d=h[p],g=h[p+t.MODE],_=h[p+t.DELAY];if(this.attachment.sequence){var v=g>>4,m=this.attachment.sequence.regions.length,y=OP[g&15];if(y!=hi.hold)switch(v+=(i-d)/_+1e-5|0,y){case hi.once:v=Math.min(m-1,v);break;case hi.loop:v%=m;break;case hi.pingpong:{var b=(m<<1)-2;v=b==0?0:v%b,v>=m&&(v=b-v);break}case hi.onceReverse:v=Math.max(m-1-v,0);break;case hi.loopReverse:v=m-1-v%m;break;case hi.pingpongReverse:{var b=(m<<1)-2;v=b==0?0:(v+m-1)%b,v>=m&&(v=b-v)}}l.sequenceIndex=v}}}},t.ENTRIES=3,t.MODE=1,t.DELAY=2,t}(In),aH=function(){function e(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new sH(this),this.propertyIDs=new pV,this.animationsChanged=!1,this.trackEntryPool=new ox(function(){return new oH}),this.data=t}return e.emptyAnimation=function(){return e._emptyAnimation},e.prototype.update=function(t){t*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=t*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime+=a.timeScale==0?0:(c/a.timeScale+t)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){r[n]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,t)){var l=a.mixingFrom;for(a.mixingFrom=null,l&&(l.mixingTo=null);l;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,r){var n=t.mixingFrom;if(!n)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((n.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,t.mixTime+=r,!1)},e.prototype.apply=function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(!s||s.delay>0)){i=!0;var c=a==0?Z.first:s.mixBlend,l=s.alpha;s.mixingFrom?l*=this.applyMixingFrom(s,t,c):s.trackTime>=s.trackEnd&&!s.next&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=f,p=r;s.reverse&&(h=s.animation.duration-h,p=null);var d=s.animation.timelines,g=d.length;if(a==0&&l==1||c==Z.add)for(var _=0;_<g;_++){xe.webkit602BugfixHelper(l,c);var v=d[_];v instanceof ec?this.applyAttachmentTimeline(v,t,h,c,!0):v.apply(t,u,h,p,l,c,Yt.mixIn)}else{var m=s.timelineMode,y=s.shortestRotation,b=!y&&s.timelinesRotation.length!=g<<1;b&&(s.timelinesRotation.length=g<<1);for(var _=0;_<g;_++){var w=d[_],E=m[_]==Xw?c:Z.setup;!y&&w instanceof _0?this.applyRotateTimeline(w,t,h,l,E,s.timelinesRotation,_<<1,b):w instanceof ec?this.applyAttachmentTimeline(w,t,h,c,!0):(xe.webkit602BugfixHelper(l,c),w.apply(t,u,h,p,l,E,Yt.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}for(var C=this.unkeyedState+ND,T=t.slots,A=0,I=t.slots.length;A<I;A++){var O=T[A];if(O.attachmentState==C){var P=O.data.attachmentName;O.setAttachment(P?t.getAttachment(O.data.index,P):null)}}return this.unkeyedState+=2,this.queue.drain(),i},e.prototype.applyMixingFrom=function(t,r,n){var i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,r,n);var a=0;t.mixDuration==0?(a=1,n==Z.first&&(n=Z.setup)):(a=t.mixTime/t.mixDuration,a>1&&(a=1),n!=Z.first&&(n=i.mixBlend));var o=a<i.attachmentThreshold,s=a<i.drawOrderThreshold,c=i.animation.timelines,l=c.length,u=i.alpha*t.interruptAlpha,f=u*(1-a),h=i.animationLast,p=i.getAnimationTime(),d=p,g=null;if(i.reverse?d=i.animation.duration-d:a<i.eventThreshold&&(g=this.events),n==Z.add)for(var _=0;_<l;_++)c[_].apply(r,h,d,g,f,n,Yt.mixOut);else{var v=i.timelineMode,m=i.timelineHoldMix,y=i.shortestRotation,b=!y&&i.timelinesRotation.length!=l<<1;b&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(var _=0;_<l;_++){var w=c[_],E=Yt.mixOut,C=void 0,T=0;switch(v[_]){case Xw:if(!s&&w instanceof Wf)continue;C=n,T=f;break;case kD:C=Z.setup,T=f;break;case FD:C=n,T=u;break;case zw:C=Z.setup,T=u;break;default:C=Z.setup;var A=m[_];T=u*Math.max(0,1-A.mixTime/A.mixDuration);break}i.totalAlpha+=T,!y&&w instanceof _0?this.applyRotateTimeline(w,r,d,T,C,i.timelinesRotation,_<<1,b):w instanceof ec?this.applyAttachmentTimeline(w,r,d,C,o):(xe.webkit602BugfixHelper(T,n),s&&w instanceof Wf&&C==Z.setup&&(E=Yt.mixIn),w.apply(r,h,d,g,T,C,E))}}return t.mixDuration>0&&this.queueEvents(i,p),this.events.length=0,i.nextAnimationLast=p,i.nextTrackLast=i.trackTime,a},e.prototype.applyAttachmentTimeline=function(t,r,n,i,a){var o=r.slots[t.slotIndex];o.bone.active&&(n<t.frames[0]?(i==Z.setup||i==Z.first)&&this.setAttachment(r,o,o.data.attachmentName,a):this.setAttachment(r,o,t.attachmentNames[In.search1(t.frames,n)],a),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+ND))},e.prototype.setAttachment=function(t,r,n,i){r.setAttachment(n?t.getAttachment(r.data.index,n):null),i&&(r.attachmentState=this.unkeyedState+DFe)},e.prototype.applyRotateTimeline=function(t,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){t.apply(r,0,n,null,1,a,Yt.mixIn);return}var l=r.bones[t.boneIndex];if(l.active){var u=t.frames,f=0,h=0;if(n<u[0])switch(a){case Z.setup:l.rotation=l.data.rotation;default:return;case Z.first:f=l.rotation,h=l.data.rotation}else f=a==Z.setup?l.data.rotation:l.rotation,h=l.data.rotation+t.getCurveValue(n);var p=0,d=h-f;if(d-=(16384-(16384.499999999996-d/360|0))*360,d==0)p=o[s];else{var g=0,_=0;c?(g=0,_=d):(g=o[s],_=o[s+1]);var v=d>0,m=g>=0;re.signum(_)!=re.signum(d)&&Math.abs(_)<=90&&(Math.abs(g)>180&&(g+=360*re.signum(g)),m=v),p=d+g-g%360,m!=v&&(p+=360*re.signum(g)),o[s]=p}o[s+1]=d,l.rotation=f+p*i}},e.prototype.queueEvents=function(t,r){for(var n=t.animationStart,i=t.animationEnd,a=i-n,o=t.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(t,u)}var f=!1;for(t.loop?f=a==0||o>t.trackTime%a:f=r>=i&&t.animationLast<i,f&&this.queue.complete(t);c<l;c++){var h=s[c];h.time<n||this.queue.event(t,h)}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var r=this.tracks[t];if(r){this.queue.end(r),this.clearNext(r);for(var n=r;;){var i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,r,n){var i=this.expandToIndex(t);this.tracks[t]=r,r.previous=null,i&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},e.prototype.setAnimation=function(t,r,n){n===void 0&&(n=!1);var i=this.data.skeletonData.findAnimation(r);if(!i)throw new Error("Animation not found: "+r);return this.setAnimationWith(t,i,n)},e.prototype.setAnimationWith=function(t,r,n){if(n===void 0&&(n=!1),!r)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(t);a&&(a.nextTrackLast==-1?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,i=!1):this.clearNext(a));var o=this.trackEntry(t,r,n,a);return this.setCurrent(t,o,i),this.queue.drain(),o},e.prototype.addAnimation=function(t,r,n,i){n===void 0&&(n=!1),i===void 0&&(i=0);var a=this.data.skeletonData.findAnimation(r);if(!a)throw new Error("Animation not found: "+r);return this.addAnimationWith(t,a,n,i)},e.prototype.addAnimationWith=function(t,r,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=0),!r)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(a)for(;a.next;)a=a.next;var o=this.trackEntry(t,r,n,a);return a?(a.next=o,o.previous=a,i<=0&&(i+=a.getTrackComplete()-o.mixDuration)):(this.setCurrent(t,o,!0),this.queue.drain()),o.delay=i,o},e.prototype.setEmptyAnimation=function(t,r){r===void 0&&(r=0);var n=this.setAnimationWith(t,e.emptyAnimation(),!1);return n.mixDuration=r,n.trackEnd=r,n},e.prototype.addEmptyAnimation=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=this.addAnimationWith(t,e.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-r),i.mixDuration=r,i.trackEnd=r,i},e.prototype.setEmptyAnimations=function(t){t===void 0&&(t=0);var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=r,this.queue.drain()},e.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(xe.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},e.prototype.trackEntry=function(t,r,n,i){var a=this.trackEntryPool.obtain();return a.reset(),a.trackIndex=t,a.animation=r,a.loop=n,a.holdPrevious=!1,a.reverse=!1,a.shortestRotation=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.mixTime=0,a.mixDuration=i?this.data.getMix(i.animation,r):0,a.interruptAlpha=1,a.totalAlpha=0,a.mixBlend=Z.replace,a},e.prototype.clearNext=function(t){for(var r=t.next;r;)this.queue.dispose(r),r=r.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,r=0,n=t.length;r<n;r++){var i=t[r];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=Z.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}},e.prototype.computeHold=function(t){var r=t.mixingTo,n=t.animation.timelines,i=t.animation.timelines.length,a=t.timelineMode;a.length=i;var o=t.timelineHoldMix;o.length=0;var s=this.propertyIDs;if(r&&r.holdPrevious){for(var c=0;c<i;c++)a[c]=s.addAll(n[c].getPropertyIds())?zw:FD;return}e:for(var c=0;c<i;c++){var l=n[c],u=l.getPropertyIds();if(!s.addAll(u))a[c]=Xw;else if(!r||l instanceof ec||l instanceof Wf||l instanceof dx||!r.animation.hasTimeline(u))a[c]=kD;else{for(var f=r.mixingTo;f;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(t.mixDuration>0){a[c]=MFe,o[c]=f;continue e}break}a[c]=zw}}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var r=this.listeners.indexOf(t);r>=0&&this.listeners.splice(r,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,r,n)},e.prototype.addAnimationByName=function(t,r,n,i){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,r,n,i)},e.prototype.hasAnimation=function(t){var r=this.data.skeletonData.findAnimation(t);return r!==null},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e._emptyAnimation=new fx("<empty>",[],0),e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}(),oH=function(){function e(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=Z.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},e.prototype.getTrackComplete=function(){var t=this.animationEnd-this.animationStart;if(t!=0){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}(),sH=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(Ji.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(Ji.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(Ji.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(Ji.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(Ji.complete),this.objects.push(t)},e.prototype.event=function(t,r){this.objects.push(Ji.event),this.objects.push(t),this.objects.push(r)},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,r=this.animState.listeners,n=0;n<t.length;n+=2){var i=t[n],a=t[n+1];switch(i){case Ji.start:a.listener&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++){var s=r[o];s.start&&s.start(a)}break;case Ji.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++){var s=r[o];s.interrupt&&s.interrupt(a)}break;case Ji.end:a.listener&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++){var s=r[o];s.end&&s.end(a)}case Ji.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++){var s=r[o];s.dispose&&s.dispose(a)}this.animState.trackEntryPool.free(a);break;case Ji.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++){var s=r[o];s.complete&&s.complete(a)}break;case Ji.event:var c=t[n+++2];a.listener&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++){var s=r[o];s.event&&s.event(a,c)}break}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e}(),Ji;(function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"})(Ji||(Ji={}));var BFe=function(){function e(){}return e.prototype.start=function(t){},e.prototype.interrupt=function(t){},e.prototype.end=function(t){},e.prototype.dispose=function(t){},e.prototype.complete=function(t){},e.prototype.event=function(t,r){},e}(),Xw=0,kD=1,FD=2,zw=3,MFe=4,ND=1,DFe=2,lH=function(){function e(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return e.prototype.setMix=function(t,r,n){var i=this.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(r);if(!a)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},e.prototype.setMixWith=function(t,r,n){if(!t)throw new Error("from cannot be null.");if(!r)throw new Error("to cannot be null.");var i=t.name+"."+r.name;this.animationToMixTime[i]=n},e.prototype.getMix=function(t,r){var n=t.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},e}(),QP=function(){function e(t){this.atlas=t}return e.prototype.loadSequence=function(t,r,n){for(var i=n.regions,a=0,o=i.length;a<o;a++){var s=n.getPath(r,a),c=this.atlas.findRegion(s);if(c==null)throw new Error("Region not found in atlas: "+s+" (sequence: "+t+")");i[a]=c,i[a].renderObject=i[a]}},e.prototype.newRegionAttachment=function(t,r,n,i){var a=new RP(r,n);if(i!=null)this.loadSequence(r,n,i);else{var o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");o.renderObject=o,a.region=o}return a},e.prototype.newMeshAttachment=function(t,r,n,i){var a=new cx(r,n);if(i!=null)this.loadSequence(r,n,i);else{var o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");o.renderObject=o,a.region=o}return a},e.prototype.newBoundingBoxAttachment=function(t,r){return new rH(r)},e.prototype.newPathAttachment=function(t,r){return new m0(r)},e.prototype.newPointAttachment=function(t,r){return new iH(r)},e.prototype.newClippingAttachment=function(t,r){return new nH(r)},e}(),kT=function(){function e(t,r,n){if(this.matrix=new Qr,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(t,r,n,i,a,o,s){this.ax=t,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(!c){var h=this.skeleton,p=n+90+s;l.a=re.cosDeg(n+o)*i*u,l.c=re.cosDeg(p)*a*u,l.b=re.sinDeg(n+o)*i*f,l.d=re.sinDeg(p)*a*f,l.tx=t*u+h.x,l.ty=r*f+h.y;return}var d=c.matrix.a,g=c.matrix.c,_=c.matrix.b,v=c.matrix.d;switch(l.tx=d*t+g*r+c.matrix.tx,l.ty=_*t+v*r+c.matrix.ty,this.data.transformMode){case Ut.Normal:{var p=n+90+s,m=re.cosDeg(n+o)*i,y=re.cosDeg(p)*a,b=re.sinDeg(n+o)*i,w=re.sinDeg(p)*a;l.a=d*m+g*b,l.c=d*y+g*w,l.b=_*m+v*b,l.d=_*y+v*w;return}case Ut.OnlyTranslation:{var p=n+90+s;l.a=re.cosDeg(n+o)*i,l.c=re.cosDeg(p)*a,l.b=re.sinDeg(n+o)*i,l.d=re.sinDeg(p)*a;break}case Ut.NoRotationOrReflection:{var E=d*d+_*_,C=0;E>1e-4?(E=Math.abs(d*v-g*_)/E,d/=u,_/=f,g=_*E,v=d*E,C=Math.atan2(_,d)*re.radDeg):(d=0,_=0,C=90-Math.atan2(v,g)*re.radDeg);var T=n+o-C,A=n+s-C+90,m=re.cosDeg(T)*i,y=re.cosDeg(A)*a,b=re.sinDeg(T)*i,w=re.sinDeg(A)*a;l.a=d*m-g*b,l.c=d*y-g*w,l.b=_*m+v*b,l.d=_*y+v*w;break}case Ut.NoScale:case Ut.NoScaleOrReflection:{var I=re.cosDeg(n),O=re.sinDeg(n),P=(d*I+g*O)/u,k=(_*I+v*O)/f,E=Math.sqrt(P*P+k*k);E>1e-5&&(E=1/E),P*=E,k*=E,E=Math.sqrt(P*P+k*k),this.data.transformMode==Ut.NoScale&&d*v-g*_<0!=(u<0!=f<0)&&(E=-E);var F=Math.PI/2+Math.atan2(k,P),M=Math.cos(F)*E,D=Math.sin(F)*E,m=re.cosDeg(o)*i,y=re.cosDeg(90+s)*a,b=re.sinDeg(o)*i,w=re.sinDeg(90+s)*a;l.a=P*m+M*b,l.c=P*y+M*w,l.b=k*m+D*b,l.d=k*y+D*w;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*re.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*re.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)},e.prototype.updateAppliedTransform=function(){var t=this.parent,r=this.matrix;if(!t){this.ax=r.tx-this.skeleton.x,this.ay=r.ty-this.skeleton.y,this.arotation=Math.atan2(r.b,r.a)*re.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*re.radDeg;return}var n=t.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,p=c*r.b-u*r.a,d=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+p*p),this.ascaleX>1e-4){var g=f*d-h*p;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(f*h+p*d,g)*re.radDeg,this.arotation=Math.atan2(p,f)*re.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,h)*re.radDeg},e.prototype.worldToLocal=function(t){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=t.x-r.tx,l=t.y-r.ty;return t.x=c*o*s-l*i*s,t.y=l*n*s-c*a*s,t},e.prototype.localToWorld=function(t){var r=this.matrix,n=t.x,i=t.y;return t.x=n*r.a+i*r.c+r.tx,t.y=n*r.b+i*r.d+r.ty,t},e.prototype.worldToLocalRotation=function(t){var r=re.sinDeg(t),n=re.cosDeg(t),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*re.radDeg},e.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var r=re.sinDeg(t),n=re.cosDeg(t),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*re.radDeg},e.prototype.rotateWorld=function(t){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=re.cosDeg(t),c=re.sinDeg(t);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o},e}(),eO=function(){function e(t,r,n){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Ut.Normal,this.skinRequired=!1,this.color=new rt,t<0)throw new Error("index must be >= 0.");if(!r)throw new Error("name cannot be null.");this.index=t,this.name=r,this.parent=n}return e}(),px=function(){function e(t,r,n){this.name=t,this.order=r,this.skinRequired=n}return e}(),tO=function(){function e(t,r){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!r)throw new Error("data cannot be null.");this.time=t,this.data=r}return e}(),rO=function(){function e(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}return e}(),uH=function(){function e(t,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++){var i=r.findBone(t.bones[n].name);if(!i)throw new Error("Couldn't find bone "+t.bones[n].name);this.bones.push(i)}var a=r.findBone(t.target.name);if(!a)throw new Error("Couldn't find bone "+t.target.name);this.target=a}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){if(this.mix!=0){var t=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}},e.prototype.apply1=function(t,r,n,i,a,o,s){var c=t.parent.matrix;if(!c)throw new Error("IK bone must have parent.");var l=c.a,u=c.c,f=c.b,h=c.d,p=-t.ashearX-t.arotation,d=0,g=0,_=t.skeleton.scaleX,v=-t.skeleton.scaleY;switch(t.data.transformMode){case Ut.OnlyTranslation:d=r-t.worldX,g=n-t.worldY,g=-g;break;case Ut.NoRotationOrReflection:var m=Math.abs(l*h-u*f)/(l*l+f*f),y=l/_,b=f/v;u=-b*m*_,h=y*m*v,p+=Math.atan2(b,y)*re.radDeg;default:var w=r-c.tx,E=n-c.ty,C=l*h-u*f;d=(w*h-E*u)/C-t.ax,g=(E*l-w*f)/C-t.ay}p+=Math.atan2(g,d)*re.radDeg,t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var T=t.ascaleX,A=t.ascaleY;if(i||a){switch(t.data.transformMode){case Ut.NoScale:case Ut.NoScaleOrReflection:d=r-t.worldX,g=n-t.worldY}var I=t.data.length*T,O=Math.sqrt(d*d+g*g);if(i&&O<I||a&&O>I&&I>1e-4){var m=(O/I-1)*s+1;T*=m,o&&(A*=m)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*s,T,A,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,r,n,i,a,o,s,c,l){var u=t.ax,f=t.ay,h=t.ascaleX,p=t.ascaleY,d=h,g=p,_=r.ascaleX,v=t.matrix,m=0,y=0,b=0;h<0?(h=-h,m=180,b=-1):(m=0,b=1),p<0&&(p=-p,b=-b),_<0?(_=-_,y=180):y=0;var w=r.ax,E=0,C=0,T=0,A=v.a,I=v.c,O=v.b,P=v.d,k=Math.abs(h-p)<=1e-4;!k||o?(E=0,C=A*w+v.tx,T=O*w+v.ty):(E=r.ay,C=A*w+I*E+v.tx,T=O*w+P*E+v.ty);var F=t.parent.matrix;if(!F)throw new Error("IK parent must itself have a parent.");A=F.a,I=F.c,O=F.b,P=F.d;var M=1/(A*P-I*O),D=C-F.tx,G=T-F.ty,Q=(D*P-G*I)*M-u,te=(G*A-D*O)*M-f,Y=Math.sqrt(Q*Q+te*te),U=r.data.length*_,z,j;if(Y<1e-4){this.apply1(t,n,i,!1,o,!1,l),r.updateWorldTransformWith(w,E,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}D=n-F.tx,G=i-F.ty;var V=(D*P-G*I)*M-u,ne=(G*A-D*O)*M-f,ae=V*V+ne*ne;if(c!=0){c*=h*(_+1)*.5;var pe=Math.sqrt(ae),se=pe-Y-U*h+c;if(se>0){var _e=Math.min(1,se/(c*2))-1;_e=(se-c*(1-_e*_e))/pe,V-=_e*V,ne-=_e*ne,ae=V*V+ne*ne}}e:if(k){U*=h;var Le=(ae-Y*Y-U*U)/(2*Y*U);Le<-1?(Le=-1,j=Math.PI*a):Le>1?(Le=1,j=0,o&&(A=(Math.sqrt(ae)/(Y+U)-1)*l+1,d*=A,s&&(g*=A))):j=Math.acos(Le)*a,A=Y+U*Le,I=U*Math.sin(j),z=Math.atan2(ne*A-V*I,V*A+ne*I)}else{A=h*U,I=p*U;var Pe=A*A,Ee=I*I,Se=Math.atan2(ne,V);O=Ee*Y*Y+Pe*ae-Pe*Ee;var Ge=-2*Ee*Y,We=Ee-Pe;if(P=Ge*Ge-4*We*O,P>=0){var Ve=Math.sqrt(P);Ge<0&&(Ve=-Ve),Ve=-(Ge+Ve)*.5;var Xe=Ve/We,Ke=O/Ve,bt=Math.abs(Xe)<Math.abs(Ke)?Xe:Ke;if(bt*bt<=ae){G=Math.sqrt(ae-bt*bt)*a,z=Se-Math.atan2(G,bt),j=Math.atan2(G/p,(bt-Y)/h);break e}}var Rt=re.PI,ct=Y-A,gt=ct*ct,It=0,fr=0,er=Y+A,hr=er*er,qt=0;O=-A*Y/(Pe-Ee),O>=-1&&O<=1&&(O=Math.acos(O),D=A*Math.cos(O)+Y,G=I*Math.sin(O),P=D*D+G*G,P<gt&&(Rt=O,gt=P,ct=D,It=G),P>hr&&(fr=O,hr=P,er=D,qt=G)),ae<=(gt+hr)*.5?(z=Se-Math.atan2(It*a,ct),j=Rt*a):(z=Se-Math.atan2(qt*a,er),j=fr*a)}var wt=Math.atan2(E,w)*b,sr=t.arotation;z=(z-wt)*re.radDeg+m-sr,z>180?z-=360:z<-180&&(z+=360),t.updateWorldTransformWith(u,f,sr+z*l,d,g,0,0),sr=r.arotation,j=((j+wt)*re.radDeg-r.ashearX)*b+y-sr,j>180?j-=360:j<-180&&(j+=360),r.updateWorldTransformWith(w,E,sr+j*l,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},e}(),nO=function(e){nr(t,e);function t(r){var n=e.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),t}(px),iO=function(e){nr(t,e);function t(r){var n=e.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.positionMode=un.Fixed,n.spacingMode=zn.Fixed,n.rotateMode=Tn.Chain,n.offsetRotation=0,n.position=0,n.spacing=0,n.mixRotate=0,n.mixX=0,n.mixY=0,n}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),t}(px),zn;(function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent",e[e.Proportional=3]="Proportional"})(zn||(zn={}));var cH=function(){function e(t,r){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++){var a=r.findBone(t.bones[n].name);if(!a)throw new Error("Couldn't find bone "+t.bones[n].name+".");this.bones.push(a)}var o=r.findSlot(t.target.name);if(!o)throw new Error("Couldn't find target bone "+t.target.name);this.target=o,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof m0){var r=this.mixRotate,n=this.mixX,i=this.mixY;if(!(r==0&&n==0&&i==0)){var a=this.data,o=a.rotateMode==Tn.Tangent,s=a.rotateMode==Tn.ChainScale,c=this.bones,l=c.length,u=o?l:l+1,f=xe.setArraySize(this.spaces,u),h=s?this.lengths=xe.setArraySize(this.lengths,l):[],p=this.spacing;switch(a.spacingMode){case zn.Percent:if(s)for(var d=0,g=u-1;d<g;d++){var _=c[d],v=_.data.length;if(v<e.epsilon)h[d]=0;else{var m=v*_.matrix.a,y=v*_.matrix.b;h[d]=Math.sqrt(m*m+y*y)}}xe.arrayFill(f,1,u,p);break;case zn.Proportional:for(var b=0,d=0,g=u-1;d<g;){var _=c[d],v=_.data.length;if(v<e.epsilon)s&&(h[d]=0),f[++d]=p;else{var m=v*_.matrix.a,y=v*_.matrix.b,w=Math.sqrt(m*m+y*y);s&&(h[d]=w),f[++d]=w,b+=w}}if(b>0){b=u/b*p;for(var d=1;d<u;d++)f[d]*=b}break;default:for(var E=a.spacingMode==zn.Length,d=0,g=u-1;d<g;){var _=c[d],v=_.data.length;if(v<e.epsilon)s&&(h[d]=0),f[++d]=p;else{var m=v*_.matrix.a,y=v*_.matrix.b,C=Math.sqrt(m*m+y*y);s&&(h[d]=C),f[++d]=(E?v+p:p)*C/v}}}var T=this.computeWorldPositions(t,u,o),A=T[0],I=T[1],O=a.offsetRotation,P=!1;if(O==0)P=a.rotateMode==Tn.Chain;else{P=!1;var k=this.target.bone.matrix;O*=k.a*k.d-k.b*k.c>0?re.degRad:-re.degRad}for(var d=0,k=3;d<l;d++,k+=3){var _=c[d],F=_.matrix;F.tx+=(A-F.tx)*n,F.ty+=(I-F.ty)*i;var m=T[k],y=T[k+1],M=m-A,D=y-I;if(s){var G=h[d];if(G!=0){var Q=(Math.sqrt(M*M+D*D)/G-1)*r+1;F.a*=Q,F.b*=Q}}if(A=m,I=y,r>0){var te=F.a,Y=F.c,U=F.b,z=F.d,j=0,V=0,ne=0;if(o?j=T[k-1]:f[d+1]==0?j=T[k+2]:j=Math.atan2(D,M),j-=Math.atan2(U,te),P){V=Math.cos(j),ne=Math.sin(j);var ae=_.data.length;A+=(ae*(V*te-ne*U)-M)*r,I+=(ae*(ne*te+V*U)-D)*r}else j+=O;j>re.PI?j-=re.PI2:j<-re.PI&&(j+=re.PI2),j*=r,V=Math.cos(j),ne=Math.sin(j),F.a=V*te-ne*U,F.c=V*Y-ne*z,F.b=ne*te+V*U,F.d=ne*Y+V*z}_.updateAppliedTransform()}}}},e.prototype.computeWorldPositions=function(t,r,n){var i=this.target,a=this.position,o=this.spaces,s=xe.setArraySize(this.positions,r*3+2),c=this.world,l=t.closed,u=t.worldVerticesLength,f=u/6,h=e.NONE;if(!t.constantSpeed){var p=t.lengths;f-=l?1:2;var d=p[f];this.data.positionMode==un.Percent&&(a*=d);var g;switch(this.data.spacingMode){case zn.Percent:g=d;break;case zn.Proportional:g=d/r;break;default:g=1}c=xe.setArraySize(this.world,8);for(var _=0,v=0,m=0;_<r;_++,v+=3){var y=o[_]*g;a+=y;var b=a;if(l)b%=d,b<0&&(b+=d),m=0;else if(b<0){h!=e.BEFORE&&(h=e.BEFORE,t.computeWorldVertices(i,2,4,c,0,2)),this.addBeforePosition(b,c,0,s,v);continue}else if(b>d){h!=e.AFTER&&(h=e.AFTER,t.computeWorldVertices(i,u-6,4,c,0,2)),this.addAfterPosition(b-d,c,0,s,v);continue}for(;;m++){var w=p[m];if(!(b>w)){if(m==0)b/=w;else{var E=p[m-1];b=(b-E)/(w-E)}break}}m!=h&&(h=m,l&&m==f?(t.computeWorldVertices(i,u-4,4,c,0,2),t.computeWorldVertices(i,0,4,c,4,2)):t.computeWorldVertices(i,m*6+2,8,c,0,2)),this.addCurvePosition(b,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],s,v,n||_>0&&y==0)}return s}l?(u+=2,c=xe.setArraySize(this.world,u),t.computeWorldVertices(i,2,u-4,c,0,2),t.computeWorldVertices(i,0,2,c,u-4,2),c[u-2]=c[0],c[u-1]=c[1]):(f--,u-=4,c=xe.setArraySize(this.world,u),t.computeWorldVertices(i,2,u,c,0,2));for(var C=xe.setArraySize(this.curves,f),T=0,A=c[0],I=c[1],O=0,P=0,k=0,F=0,M=0,D=0,G=0,Q=0,te=0,Y=0,U=0,z=0,j=0,V=0,_=0,ne=2;_<f;_++,ne+=6)O=c[ne],P=c[ne+1],k=c[ne+2],F=c[ne+3],M=c[ne+4],D=c[ne+5],G=(A-O*2+k)*.1875,Q=(I-P*2+F)*.1875,te=((O-k)*3-A+M)*.09375,Y=((P-F)*3-I+D)*.09375,U=G*2+te,z=Q*2+Y,j=(O-A)*.75+G+te*.16666667,V=(P-I)*.75+Q+Y*.16666667,T+=Math.sqrt(j*j+V*V),j+=U,V+=z,U+=te,z+=Y,T+=Math.sqrt(j*j+V*V),j+=U,V+=z,T+=Math.sqrt(j*j+V*V),j+=U+te,V+=z+Y,T+=Math.sqrt(j*j+V*V),C[_]=T,A=M,I=D;this.data.positionMode==un.Percent&&(a*=T);var ae;switch(this.data.spacingMode){case zn.Percent:ae=T;break;case zn.Proportional:ae=T/r;break;default:ae=1}for(var pe=this.segments,se=0,_=0,v=0,m=0,_e=0;_<r;_++,v+=3){var y=o[_]*ae;a+=y;var b=a;if(l)b%=T,b<0&&(b+=T),m=0;else if(b<0){this.addBeforePosition(b,c,0,s,v);continue}else if(b>T){this.addAfterPosition(b-T,c,u-4,s,v);continue}for(;;m++){var Le=C[m];if(!(b>Le)){if(m==0)b/=Le;else{var E=C[m-1];b=(b-E)/(Le-E)}break}}if(m!=h){h=m;var Pe=m*6;for(A=c[Pe],I=c[Pe+1],O=c[Pe+2],P=c[Pe+3],k=c[Pe+4],F=c[Pe+5],M=c[Pe+6],D=c[Pe+7],G=(A-O*2+k)*.03,Q=(I-P*2+F)*.03,te=((O-k)*3-A+M)*.006,Y=((P-F)*3-I+D)*.006,U=G*2+te,z=Q*2+Y,j=(O-A)*.3+G+te*.16666667,V=(P-I)*.3+Q+Y*.16666667,se=Math.sqrt(j*j+V*V),pe[0]=se,Pe=1;Pe<8;Pe++)j+=U,V+=z,U+=te,z+=Y,se+=Math.sqrt(j*j+V*V),pe[Pe]=se;j+=U,V+=z,se+=Math.sqrt(j*j+V*V),pe[8]=se,j+=U+te,V+=z+Y,se+=Math.sqrt(j*j+V*V),pe[9]=se,_e=0}for(b*=se;;_e++){var Ee=pe[_e];if(!(b>Ee)){if(_e==0)b/=Ee;else{var E=pe[_e-1];b=_e+(b-E)/(Ee-E)}break}}this.addCurvePosition(b*.1,A,I,O,P,k,F,M,D,s,v,n||_>0&&y==0)}return s},e.prototype.addBeforePosition=function(t,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+t*Math.cos(u),i[a+1]=s+t*Math.sin(u),i[a+2]=u},e.prototype.addAfterPosition=function(t,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+t*Math.cos(u),i[a+1]=s+t*Math.sin(u),i[a+2]=u},e.prototype.addCurvePosition=function(t,r,n,i,a,o,s,c,l,u,f,h){if(t==0||isNaN(t)){u[f]=r,u[f+1]=n,u[f+2]=Math.atan2(a-n,i-r);return}var p=t*t,d=p*t,g=1-t,_=g*g,v=_*g,m=g*t,y=m*3,b=g*y,w=y*t,E=r*v+i*b+o*w+c*d,C=n*v+a*b+s*w+l*d;u[f]=E,u[f+1]=C,h&&(t<.001?u[f+2]=Math.atan2(a-n,i-r):u[f+2]=Math.atan2(C-(n*_+a*m*2+s*p),E-(r*_+i*m*2+o*p)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}(),fH=function(){function e(t,r){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!r)throw new Error("bone cannot be null.");this.data=t,this.bone=r,this.color=new rt,this.darkColor=t.darkColor?new rt:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getSkeleton=function(){return this.bone.skeleton},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&((!(t instanceof cs)||!(this.attachment instanceof cs)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null},e}(),hH=function(){function e(t,r){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new l0,this.active=!1,!t)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(var n=0;n<t.bones.length;n++){var i=r.findBone(t.bones[n].name);if(!i)throw new Error("Couldn't find bone "+t.bones[n].name+".");this.bones.push(i)}var a=r.findBone(t.target.name);if(!a)throw new Error("Couldn't find target bone "+t.target.name+".");this.target=a}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},e.prototype.applyAbsoluteWorld=function(){for(var t=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=r!=0||n!=0,c=this.target,l=c.matrix,u=l.a,f=l.c,h=l.b,p=l.d,d=u*p-f*h>0?re.degRad:-re.degRad,g=this.data.offsetRotation*d,_=this.data.offsetShearY*d,v=this.bones,m=0,y=v.length;m<y;m++){var b=v[m],w=b.matrix;if(t!=0){var E=w.a,C=w.c,T=w.b,A=w.d,I=Math.atan2(h,u)-Math.atan2(T,E)+g;I>re.PI?I-=re.PI2:I<-re.PI&&(I+=re.PI2),I*=t;var O=Math.cos(I),P=Math.sin(I);w.a=O*E-P*T,w.c=O*C-P*A,w.b=P*E+O*T,w.d=P*C+O*A}if(s){var k=this.temp;c.localToWorld(k.set(this.data.offsetX,this.data.offsetY)),w.tx+=(k.x-w.tx)*r,w.ty+=(k.y-w.ty)*n}if(i!=0){var F=Math.sqrt(w.a*w.a+w.b*w.b);F!=0&&(F=(F+(Math.sqrt(u*u+h*h)-F+this.data.offsetScaleX)*i)/F),w.a*=F,w.b*=F}if(a!=0){var F=Math.sqrt(w.c*w.c+w.d*w.d);F!=0&&(F=(F+(Math.sqrt(f*f+p*p)-F+this.data.offsetScaleY)*a)/F),w.c*=F,w.d*=F}if(o>0){var C=w.c,A=w.d,M=Math.atan2(A,C),I=Math.atan2(p,f)-Math.atan2(h,u)-(M-Math.atan2(w.b,w.a));I>re.PI?I-=re.PI2:I<-re.PI&&(I+=re.PI2),I=M+(I+_)*o;var F=Math.sqrt(C*C+A*A);w.c=Math.cos(I)*F,w.d=Math.sin(I)*F}b.updateAppliedTransform()}},e.prototype.applyRelativeWorld=function(){for(var t=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=r!=0||n!=0,c=this.target,l=c.matrix,u=l.a,f=l.c,h=l.b,p=l.d,d=u*p-f*h>0?re.degRad:-re.degRad,g=this.data.offsetRotation*d,_=this.data.offsetShearY*d,v=this.bones,m=0,y=v.length;m<y;m++){var b=v[m],w=b.matrix;if(t!=0){var E=w.a,C=w.c,T=w.b,A=w.d,I=Math.atan2(h,u)+g;I>re.PI?I-=re.PI2:I<-re.PI&&(I+=re.PI2),I*=t;var O=Math.cos(I),P=Math.sin(I);w.a=O*E-P*T,w.c=O*C-P*A,w.b=P*E+O*T,w.d=P*C+O*A}if(s){var k=this.temp;c.localToWorld(k.set(this.data.offsetX,this.data.offsetY)),w.tx+=k.x*r,w.ty+=k.y*n}if(i!=0){var F=(Math.sqrt(u*u+h*h)-1+this.data.offsetScaleX)*i+1;w.a*=F,w.b*=F}if(a!=0){var F=(Math.sqrt(f*f+p*p)-1+this.data.offsetScaleY)*a+1;w.c*=F,w.d*=F}if(o>0){var I=Math.atan2(p,f)-Math.atan2(h,u);I>re.PI?I-=re.PI2:I<-re.PI&&(I+=re.PI2);var C=w.c,A=w.d;I=Math.atan2(A,C)+(I-re.PI/2+_)*o;var F=Math.sqrt(C*C+A*A);w.c=Math.cos(I)*F,w.d=Math.sin(I)*F}b.updateAppliedTransform()}},e.prototype.applyAbsoluteLocal=function(){for(var t=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=this.target,c=this.bones,l=0,u=c.length;l<u;l++){var f=c[l],h=f.arotation;if(t!=0){var p=s.arotation-h+this.data.offsetRotation;p-=(16384-(16384.499999999996-p/360|0))*360,h+=p*t}var d=f.ax,g=f.ay;d+=(s.ax-d+this.data.offsetX)*r,g+=(s.ay-g+this.data.offsetY)*n;var _=f.ascaleX,v=f.ascaleY;i!=0&&_!=0&&(_=(_+(s.ascaleX-_+this.data.offsetScaleX)*i)/_),a!=0&&v!=0&&(v=(v+(s.ascaleY-v+this.data.offsetScaleY)*a)/v);var m=f.ashearY;if(o!=0){var p=s.ashearY-m+this.data.offsetShearY;p-=(16384-(16384.499999999996-p/360|0))*360,m+=p*o}f.updateWorldTransformWith(d,g,h,_,v,f.ashearX,m)}},e.prototype.applyRelativeLocal=function(){for(var t=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=this.target,c=this.bones,l=0,u=c.length;l<u;l++){var f=c[l],h=f.arotation+(s.arotation+this.data.offsetRotation)*t,p=f.ax+(s.ax+this.data.offsetX)*r,d=f.ay+(s.ay+this.data.offsetY)*n,g=f.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*i+1),_=f.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*a+1),v=f.ashearY+(s.ashearY+this.data.offsetShearY)*o;f.updateWorldTransformWith(p,d,h,g,_,f.ashearX,v)}},e}(),dH=function(){function e(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var r=0;r<t.bones.length;r++){var n=t.bones[r],i=void 0;if(!n.parent)i=new kT(n,this,null);else{var a=this.bones[n.parent.index];i=new kT(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<t.slots.length;r++){var o=t.slots[r],i=this.bones[o.boneData.index],s=new fH(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<t.ikConstraints.length;r++){var c=t.ikConstraints[r];this.ikConstraints.push(new uH(c,this))}this.transformConstraints=new Array;for(var r=0;r<t.transformConstraints.length;r++){var l=t.transformConstraints[r];this.transformConstraints.push(new hH(l,this))}this.pathConstraints=new Array;for(var r=0;r<t.pathConstraints.length;r++){var u=t.pathConstraints[r];this.pathConstraints.push(new cH(u,this))}this.color=new rt(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){var t=this._updateCache;t.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin)for(var o=this.skin.bones,n=0,i=this.skin.bones.length;n<i;n++){var a=this.bones[o[n].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a)}var s=this.ikConstraints,c=this.transformConstraints,l=this.pathConstraints,u=s.length,f=c.length,h=l.length,p=u+f+h;e:for(var n=0;n<p;n++){for(var d=0;d<u;d++){var g=s[d];if(g.data.order==n){this.sortIkConstraint(g);continue e}}for(var d=0;d<f;d++){var g=c[d];if(g.data.order==n){this.sortTransformConstraint(g);continue e}}for(var d=0;d<h;d++){var g=l[d];if(g.data.order==n){this.sortPathConstraint(g);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},e.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&xe.contains(this.skin.constraints,t.data,!0)),!!t.active){var r=t.target;this.sortBone(r);var n=t.bones,i=n[0];if(this.sortBone(i),n.length==1)this._updateCache.push(t),this.sortReset(i.children);else{var a=n[n.length-1];this.sortBone(a),this._updateCache.push(t),this.sortReset(i.children),a.sorted=!0}}},e.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&xe.contains(this.skin.constraints,t.data,!0)),!!t.active){var r=t.target,n=r.data.index,i=r.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof m0&&this.sortPathConstraintAttachmentWith(s,i);for(var c=t.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(t);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0}},e.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&xe.contains(this.skin.constraints,t.data,!0)),!!t.active){this.sortBone(t.target);var r=t.bones,n=r.length;if(t.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this.sortBone(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(t);for(var i=0;i<n;i++)this.sortReset(r[i].children);for(var i=0;i<n;i++)r[i].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,r,n){var i=t.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},e.prototype.sortPathConstraintAttachmentWith=function(t,r){if(t instanceof m0){var n=t.bones;if(!n)this.sortBone(r);else for(var i=this.bones,a=0,o=n.length;a<o;){var s=n[a++];for(s+=a;a<s;)this.sortBone(i[n[a++]])}}},e.prototype.sortBone=function(t){if(t&&!t.sorted){var r=t.parent;r&&this.sortBone(r),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var r=0,n=t.length;r<n;r++){var i=t[r];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.bones,r=0,n=t.length;r<n;r++){var i=t[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},e.prototype.updateWorldTransformWith=function(t){var r=this.getRootBone(),n=t.matrix.a,i=t.matrix.c,a=t.matrix.b,o=t.matrix.d;r.matrix.tx=n*this.x+i*this.y+t.worldX,r.matrix.ty=a*this.x+o*this.y+t.worldY;var s=r.rotation+90+r.shearY,c=re.cosDeg(r.rotation+r.shearX)*r.scaleX,l=re.cosDeg(s)*r.scaleY,u=re.sinDeg(r.rotation+r.shearX)*r.scaleX,f=re.sinDeg(s)*r.scaleY,h=this.scaleX,p=-this.scaleY;r.matrix.a=(n*c+i*u)*h,r.matrix.c=(n*l+i*f)*h,r.matrix.b=(a*c+o*u)*p,r.matrix.d=(a*l+o*f)*p;for(var d=this._updateCache,g=0,_=d.length;g<_;g++){var v=d[g];v!=r&&v.update()}},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,r=0,n=t.length;r<n;r++)t[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY,a.mixScaleX=s.mixScaleX,a.mixScaleY=s.mixScaleY,a.mixShearY=s.mixShearY}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;xe.arrayCopy(t,0,this.drawOrder,0,t.length);for(var r=0,n=t.length;r<n;r++)t[r].setToSetupPose()},e.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},e.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var r=this.data.findSkin(t);if(!r)throw new Error("Skin not found: "+t);this.setSkin(r)},e.prototype.setSkin=function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o){var s=t.getAttachment(n,o);s&&a.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,r){var n=this.data.findSlot(t);if(!n)throw new Error("Can't find slot with name "+t);return this.getAttachment(n.index,r)},e.prototype.getAttachment=function(t,r){if(!r)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(t,r);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,r):null},e.prototype.setAttachment=function(t,r){if(!t)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==t){var s=null;if(r&&(s=this.getAttachment(i,r),!s))throw new Error("Attachment not found: "+r+", for slot: "+t);o.setAttachment(s);return}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==t)return a}return null},e.prototype.getBoundsRect=function(){var t=new l0,r=new l0;return this.getBounds(t,r),{x:t.x,y:t.y,width:r.x,height:r.y}},e.prototype.getBounds=function(t,r,n){if(n===void 0&&(n=new Array(2)),!t)throw new Error("offset cannot be null.");if(!r)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l];if(f.bone.active){var h=0,p=null,d=f.getAttachment();if(d instanceof RP)h=8,p=xe.setArraySize(n,h,0),d.computeWorldVertices(f,p,0,2);else if(d instanceof cx){var g=d;h=g.worldVerticesLength,p=xe.setArraySize(n,h,0),g.computeWorldVertices(f,0,h,p,0,2)}if(p)for(var _=0,v=p.length;_<v;_+=2){var m=p[_],y=p[_+1];a=Math.min(a,m),o=Math.min(o,y),s=Math.max(s,m),c=Math.max(c,y)}}}t.set(a,o),r.set(s-a,c-o)},Object.defineProperty(e.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),e.deprecatedWarning1=!1,e}(),aO=function(){function e(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return e.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e.prototype.findSkin=function(t){if(!t)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findEvent=function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findAnimation=function(t){if(!t)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==t)return a}return null},e.prototype.findPathConstraintIndex=function(t){if(t==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==t)return n;return-1},e}(),oO=function(){function e(t,r,n){if(this.index=0,this.color=new rt(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ut.NORMAL,t<0)throw new Error("index must be >= 0.");if(!r)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=t,this.name=r,this.boneData=n}return e}(),sO=function(e){nr(t,e);function t(r){var n=e.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.mixRotate=0,n.mixX=0,n.mixY=0,n.mixScaleX=0,n.mixScaleY=0,n.mixShearY=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return Object.defineProperty(t.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),t}(px),FT=function(){function e(t,r,n){this.slotIndex=t,this.name=r,this.attachment=n}return e}(),x_=function(){function e(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}return e.prototype.setAttachment=function(t,r,n){if(!n)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][r]=n},e.prototype.addSkin=function(t){for(var r=0;r<t.bones.length;r++){for(var n=t.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<t.constraints.length;r++){for(var o=t.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=t.getAttachments(),r=0;r<s.length;r++){var c=s[r];this.setAttachment(c.slotIndex,c.name,c.attachment)}},e.prototype.copySkin=function(t){for(var r=0;r<t.bones.length;r++){for(var n=t.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<t.constraints.length;r++){for(var o=t.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=t.getAttachments(),r=0;r<s.length;r++){var c=s[r];c.attachment&&(c.attachment instanceof cx?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},e.prototype.getAttachment=function(t,r){var n=this.attachments[t];return n?n[r]:null},e.prototype.removeAttachment=function(t,r){var n=this.attachments[t];n&&delete n[r]},e.prototype.getAttachments=function(){for(var t=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var i in n){var a=n[i];a&&t.push(new FT(r,i,a))}}return t},e.prototype.getAttachmentsForSlot=function(t,r){var n=this.attachments[t];if(n)for(var i in n){var a=n[i];a&&r.push(new FT(t,i,a))}},e.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},e.prototype.attachAll=function(t,r){for(var n=0,i=0;i<t.slots.length;i++){var a=t.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u&&a.setAttachment(u);break}}}n++}},e}(),pH=function(){function e(t){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(t){var r=this.scale,n=new aO;n.name="";var i=new v_(t),a=i.readInt32(),o=i.readInt32();n.hash=o==0&&a==0?null:o.toString(16)+a.toString(16),n.version=i.readString();var s=n.version.substr(0,3);if(s!=="4.0"&&s!=="4.1"){var c="Spine 4.1 loader cant load version "+n.version+". Please configure your pixi-spine bundle";console.error(c)}this.ver40=s==="4.0",n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();var l=i.readBoolean();l&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());var u=0;u=i.readInt(!0);for(var f=0;f<u;f++){var h=i.readString();if(!h)throw new Error("String in string table must not be null.");i.strings.push(h)}u=i.readInt(!0);for(var f=0;f<u;f++){var p=i.readString();if(!p)throw new Error("Bone name must not be null.");var d=f==0?null:n.bones[i.readInt(!0)],g=new eO(f,p,d);g.rotation=i.readFloat(),g.x=i.readFloat()*r,g.y=i.readFloat()*r,g.scaleX=i.readFloat(),g.scaleY=i.readFloat(),g.shearX=i.readFloat(),g.shearY=i.readFloat(),g.length=i.readFloat()*r,g.transformMode=i.readInt(!0),g.skinRequired=i.readBoolean(),l&&rt.rgba8888ToColor(g.color,i.readInt32()),n.bones.push(g)}u=i.readInt(!0);for(var f=0;f<u;f++){var _=i.readString();if(!_)throw new Error("Slot name must not be null.");var v=n.bones[i.readInt(!0)],g=new oO(f,_,v);rt.rgba8888ToColor(g.color,i.readInt32());var m=i.readInt32();m!=-1&&rt.rgb888ToColor(g.darkColor=new rt,m),g.attachmentName=i.readStringRef(),g.blendMode=i.readInt(!0),n.slots.push(g)}u=i.readInt(!0);for(var f=0,y=void 0;f<u;f++){var b=i.readString();if(!b)throw new Error("IK constraint data name must not be null.");var g=new nO(b);g.order=i.readInt(!0),g.skinRequired=i.readBoolean(),y=i.readInt(!0);for(var w=0;w<y;w++)g.bones.push(n.bones[i.readInt(!0)]);g.target=n.bones[i.readInt(!0)],g.mix=i.readFloat(),g.softness=i.readFloat()*r,g.bendDirection=i.readByte(),g.compress=i.readBoolean(),g.stretch=i.readBoolean(),g.uniform=i.readBoolean(),n.ikConstraints.push(g)}u=i.readInt(!0);for(var f=0,y=void 0;f<u;f++){var E=i.readString();if(!E)throw new Error("Transform constraint data name must not be null.");var g=new sO(E);g.order=i.readInt(!0),g.skinRequired=i.readBoolean(),y=i.readInt(!0);for(var w=0;w<y;w++)g.bones.push(n.bones[i.readInt(!0)]);g.target=n.bones[i.readInt(!0)],g.local=i.readBoolean(),g.relative=i.readBoolean(),g.offsetRotation=i.readFloat(),g.offsetX=i.readFloat()*r,g.offsetY=i.readFloat()*r,g.offsetScaleX=i.readFloat(),g.offsetScaleY=i.readFloat(),g.offsetShearY=i.readFloat(),g.mixRotate=i.readFloat(),g.mixX=i.readFloat(),g.mixY=i.readFloat(),g.mixScaleX=i.readFloat(),g.mixScaleY=i.readFloat(),g.mixShearY=i.readFloat(),n.transformConstraints.push(g)}u=i.readInt(!0);for(var f=0,y=void 0;f<u;f++){var C=i.readString();if(!C)throw new Error("Path constraint data name must not be null.");var g=new iO(C);g.order=i.readInt(!0),g.skinRequired=i.readBoolean(),y=i.readInt(!0);for(var w=0;w<y;w++)g.bones.push(n.bones[i.readInt(!0)]);g.target=n.slots[i.readInt(!0)],g.positionMode=i.readInt(!0),g.spacingMode=i.readInt(!0),g.rotateMode=i.readInt(!0),g.offsetRotation=i.readFloat(),g.position=i.readFloat(),g.positionMode==un.Fixed&&(g.position*=r),g.spacing=i.readFloat(),(g.spacingMode==zn.Length||g.spacingMode==zn.Fixed)&&(g.spacing*=r),g.mixRotate=i.readFloat(),g.mixX=i.readFloat(),g.mixY=i.readFloat(),n.pathConstraints.push(g)}var T=this.readSkin(i,n,!0,l);T&&(n.defaultSkin=T,n.skins.push(T));{var f=n.skins.length;for(xe.setArraySize(n.skins,u=f+i.readInt(!0));f<u;f++){var A=this.readSkin(i,n,!1,l);if(!A)throw new Error("readSkin() should not have returned null.");n.skins[f]=A}}u=this.linkedMeshes.length;for(var f=0;f<u;f++){var I=this.linkedMeshes[f],A=I.skin?n.findSkin(I.skin):n.defaultSkin;if(!A)throw new Error("Not skin found for linked mesh.");if(!I.parent)throw new Error("Linked mesh parent must not be null");var O=A.getAttachment(I.slotIndex,I.parent);if(!O)throw new Error("Parent mesh not found: "+I.parent);I.mesh.timelineAttachment=I.inheritTimeline?O:I.mesh,I.mesh.setParentMesh(O)}this.linkedMeshes.length=0,u=i.readInt(!0);for(var f=0;f<u;f++){var P=i.readStringRef();if(!P)throw new Error;var g=new rO(P);g.intValue=i.readInt(!1),g.floatValue=i.readFloat(),g.stringValue=i.readString(),g.audioPath=i.readString(),g.audioPath&&(g.volume=i.readFloat(),g.balance=i.readFloat()),n.events.push(g)}u=i.readInt(!0);for(var f=0;f<u;f++){var k=i.readString();if(!k)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(i,k,n))}return n},e.prototype.readSkin=function(t,r,n,i){var a=null,o=0;if(n){if(o=t.readInt(!0),o==0)return null;a=new x_("default")}else{var s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");a=new x_(s),a.bones.length=t.readInt(!0);for(var c=0,l=a.bones.length;c<l;c++)a.bones[c]=r.bones[t.readInt(!0)];for(var c=0,l=t.readInt(!0);c<l;c++)a.constraints.push(r.ikConstraints[t.readInt(!0)]);for(var c=0,l=t.readInt(!0);c<l;c++)a.constraints.push(r.transformConstraints[t.readInt(!0)]);for(var c=0,l=t.readInt(!0);c<l;c++)a.constraints.push(r.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(var c=0;c<o;c++)for(var u=t.readInt(!0),f=0,h=t.readInt(!0);f<h;f++){var p=t.readStringRef();if(!p)throw new Error("Attachment name must not be null");var d=this.readAttachment(t,r,a,u,p,i);d&&a.setAttachment(u,p,d)}return a},e.prototype.readAttachment=function(t,r,n,i,a,o){var s=this.scale,c=t.readStringRef();switch(c||(c=a),t.readByte()){case Jt.Region:{var l=t.readStringRef(),u=t.readFloat(),f=t.readFloat(),h=t.readFloat(),p=t.readFloat(),d=t.readFloat(),g=t.readFloat(),_=t.readFloat(),v=t.readInt32(),m=this.readSequence(t);l||(l=c);var y=this.attachmentLoader.newRegionAttachment(n,c,l,m);return y?(y.path=l,y.x=f*s,y.y=h*s,y.scaleX=p,y.scaleY=d,y.rotation=u,y.width=g*s,y.height=_*s,rt.rgba8888ToColor(y.color,v),y.sequence=m,m==null&&y.updateRegion(),y):null}case Jt.BoundingBox:{var b=t.readInt(!0),w=this.readVertices(t,b),v=o?t.readInt32():0,E=this.attachmentLoader.newBoundingBoxAttachment(n,c);return E?(E.worldVerticesLength=b<<1,E.vertices=w.vertices,E.bones=w.bones,o&&rt.rgba8888ToColor(E.color,v),E):null}case Jt.Mesh:{var l=t.readStringRef(),v=t.readInt32(),b=t.readInt(!0),C=this.readFloatArray(t,b<<1,1),T=this.readShortArray(t),w=this.readVertices(t,b),A=t.readInt(!0),m=this.readSequence(t),I=[],g=0,_=0;o&&(I=this.readShortArray(t),g=t.readFloat(),_=t.readFloat()),l||(l=c);var O=this.attachmentLoader.newMeshAttachment(n,c,l,m);return O?(O.path=l,rt.rgba8888ToColor(O.color,v),O.bones=w.bones,O.vertices=w.vertices,O.worldVerticesLength=b<<1,O.triangles=T,O.regionUVs=new Float32Array(C),O.hullLength=A<<1,O.sequence=m,o&&(O.edges=I,O.width=g*s,O.height=_*s),O):null}case Jt.LinkedMesh:{var l=t.readStringRef(),v=t.readInt32(),P=t.readStringRef(),k=t.readStringRef(),F=t.readBoolean(),m=this.readSequence(t),g=0,_=0;o&&(g=t.readFloat(),_=t.readFloat()),l||(l=c);var O=this.attachmentLoader.newMeshAttachment(n,c,l,m);return O?(O.path=l,rt.rgba8888ToColor(O.color,v),O.sequence=m,o&&(O.width=g*s,O.height=_*s),this.linkedMeshes.push(new UFe(O,P,i,k,F)),O):null}case Jt.Path:{for(var M=t.readBoolean(),D=t.readBoolean(),b=t.readInt(!0),w=this.readVertices(t,b),G=xe.newArray(b/3,0),Q=0,te=G.length;Q<te;Q++)G[Q]=t.readFloat()*s;var v=o?t.readInt32():0,l=this.attachmentLoader.newPathAttachment(n,c);return l?(l.closed=M,l.constantSpeed=D,l.worldVerticesLength=b<<1,l.vertices=w.vertices,l.bones=w.bones,l.lengths=G,o&&rt.rgba8888ToColor(l.color,v),l):null}case Jt.Point:{var u=t.readFloat(),f=t.readFloat(),h=t.readFloat(),v=o?t.readInt32():0,Y=this.attachmentLoader.newPointAttachment(n,c);return Y?(Y.x=f*s,Y.y=h*s,Y.rotation=u,o&&rt.rgba8888ToColor(Y.color,v),Y):null}case Jt.Clipping:{var U=t.readInt(!0),b=t.readInt(!0),w=this.readVertices(t,b),v=o?t.readInt32():0,z=this.attachmentLoader.newClippingAttachment(n,c);return z?(z.endSlot=r.slots[U],z.worldVerticesLength=b<<1,z.vertices=w.vertices,z.bones=w.bones,o&&rt.rgba8888ToColor(z.color,v),z):null}}return null},e.prototype.readSequence=function(t){if(this.ver40||!t.readBoolean())return null;var r=new PP(t.readInt(!0));return r.start=t.readInt(!0),r.digits=t.readInt(!0),r.setupIndex=t.readInt(!0),r},e.prototype.readDeformTimelineType=function(t){return this.ver40?LD:t.readByte()},e.prototype.readVertices=function(t,r){var n=this.scale,i=r<<1,a=new jFe;if(!t.readBoolean())return a.vertices=this.readFloatArray(t,i,n),a;for(var o=new Array,s=new Array,c=0;c<r;c++){var l=t.readInt(!0);s.push(l);for(var u=0;u<l;u++)s.push(t.readInt(!0)),o.push(t.readFloat()*n),o.push(t.readFloat()*n),o.push(t.readFloat())}return a.vertices=xe.toFloatArray(o),a.bones=s,a},e.prototype.readFloatArray=function(t,r,n){var i=new Array(r);if(n==1)for(var a=0;a<r;a++)i[a]=t.readFloat();else for(var a=0;a<r;a++)i[a]=t.readFloat()*n;return i},e.prototype.readShortArray=function(t){for(var r=t.readInt(!0),n=new Array(r),i=0;i<r;i++)n[i]=t.readShort();return n},e.prototype.readAnimation=function(t,r,n){t.readInt(!0);for(var i=new Array,a=this.scale,o=0,s=t.readInt(!0);o<s;o++)for(var c=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var f=t.readByte(),h=t.readInt(!0),p=h-1;switch(f){case ZFe:{for(var d=new ec(h,c),g=0;g<h;g++)d.setFrame(g,t.readFloat(),t.readStringRef());i.push(d);break}case JFe:{for(var _=t.readInt(!0),d=new $P(h,_,c),v=t.readFloat(),m=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,g=0,E=0;d.setFrame(g,v,m,y,b,w),g!=p;g++){var C=t.readFloat(),T=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255;switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,m,T,1),gr(t,d,E++,g,1,v,C,y,A,1),gr(t,d,E++,g,2,v,C,b,I,1),gr(t,d,E++,g,3,v,C,w,O,1)}v=C,m=T,y=A,b=I,w=O}i.push(d);break}case QFe:{for(var _=t.readInt(!0),d=new GP(h,_,c),v=t.readFloat(),m=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,g=0,E=0;d.setFrame(g,v,m,y,b),g!=p;g++){var C=t.readFloat(),T=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255;switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,m,T,1),gr(t,d,E++,g,1,v,C,y,A,1),gr(t,d,E++,g,2,v,C,b,I,1)}v=C,m=T,y=A,b=I}i.push(d);break}case eNe:{for(var _=t.readInt(!0),d=new HP(h,_,c),v=t.readFloat(),m=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,g=0,E=0;d.setFrame(g,v,m,y,b,w,T,A,I),g!=p;g++){var C=t.readFloat(),P=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,G=t.readUnsignedByte()/255,Q=t.readUnsignedByte()/255;switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,m,P,1),gr(t,d,E++,g,1,v,C,y,k,1),gr(t,d,E++,g,2,v,C,b,F,1),gr(t,d,E++,g,3,v,C,w,M,1),gr(t,d,E++,g,4,v,C,T,D,1),gr(t,d,E++,g,5,v,C,A,G,1),gr(t,d,E++,g,6,v,C,I,Q,1)}v=C,m=P,y=k,b=F,w=M,T=D,A=G,I=Q}i.push(d);break}case tNe:{for(var _=t.readInt(!0),d=new XP(h,_,c),v=t.readFloat(),m=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,g=0,E=0;d.setFrame(g,v,m,y,b,T,A,I),g!=p;g++){var C=t.readFloat(),P=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,G=t.readUnsignedByte()/255,Q=t.readUnsignedByte()/255;switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,m,P,1),gr(t,d,E++,g,1,v,C,y,k,1),gr(t,d,E++,g,2,v,C,b,F,1),gr(t,d,E++,g,3,v,C,T,D,1),gr(t,d,E++,g,4,v,C,A,G,1),gr(t,d,E++,g,5,v,C,I,Q,1)}v=C,m=P,y=k,b=F,T=D,A=G,I=Q}i.push(d);break}case rNe:{for(var d=new VP(h,t.readInt(!0),c),v=t.readFloat(),w=t.readUnsignedByte()/255,g=0,E=0;d.setFrame(g,v,w),g!=p;g++){var C=t.readFloat(),O=t.readUnsignedByte()/255;switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,w,O,1)}v=C,w=O}i.push(d)}}}for(var o=0,s=t.readInt(!0);o<s;o++)for(var te=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var Y=t.readByte(),h=t.readInt(!0),_=t.readInt(!0);switch(Y){case $Fe:i.push(ks(t,new _0(h,_,te),1));break;case GFe:i.push(Ww(t,new kP(h,_,te),a));break;case VFe:i.push(ks(t,new FP(h,_,te),a));break;case HFe:i.push(ks(t,new NP(h,_,te),a));break;case XFe:i.push(Ww(t,new LP(h,_,te),1));break;case zFe:i.push(ks(t,new BP(h,_,te),1));break;case WFe:i.push(ks(t,new MP(h,_,te),1));break;case YFe:i.push(Ww(t,new DP(h,_,te),1));break;case qFe:i.push(ks(t,new UP(h,_,te),1));break;case KFe:i.push(ks(t,new jP(h,_,te),1))}}for(var o=0,s=t.readInt(!0);o<s;o++){for(var U=t.readInt(!0),h=t.readInt(!0),p=h-1,d=new WP(h,t.readInt(!0),U),v=t.readFloat(),z=t.readFloat(),j=t.readFloat()*a,g=0,E=0;d.setFrame(g,v,z,j,t.readByte(),t.readBoolean(),t.readBoolean()),g!=p;g++){var C=t.readFloat(),V=t.readFloat(),ne=t.readFloat()*a;switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,z,V,1),gr(t,d,E++,g,1,v,C,j,ne,a)}v=C,z=V,j=ne}i.push(d)}for(var o=0,s=t.readInt(!0);o<s;o++){for(var U=t.readInt(!0),h=t.readInt(!0),p=h-1,d=new YP(h,t.readInt(!0),U),v=t.readFloat(),ae=t.readFloat(),pe=t.readFloat(),se=t.readFloat(),_e=t.readFloat(),Le=t.readFloat(),Pe=t.readFloat(),g=0,E=0;d.setFrame(g,v,ae,pe,se,_e,Le,Pe),g!=p;g++){var C=t.readFloat(),Ee=t.readFloat(),Se=t.readFloat(),Ge=t.readFloat(),We=t.readFloat(),Ve=t.readFloat(),Xe=t.readFloat();switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,ae,Ee,1),gr(t,d,E++,g,1,v,C,pe,Se,1),gr(t,d,E++,g,2,v,C,se,Ge,1),gr(t,d,E++,g,3,v,C,_e,We,1),gr(t,d,E++,g,4,v,C,Le,Ve,1),gr(t,d,E++,g,5,v,C,Pe,Xe,1)}v=C,ae=Ee,pe=Se,se=Ge,_e=We,Le=Ve,Pe=Xe}i.push(d)}for(var o=0,s=t.readInt(!0);o<s;o++)for(var U=t.readInt(!0),Ke=n.pathConstraints[U],l=0,u=t.readInt(!0);l<u;l++)switch(t.readByte()){case iNe:i.push(ks(t,new qP(t.readInt(!0),t.readInt(!0),U),Ke.positionMode==un.Fixed?a:1));break;case aNe:i.push(ks(t,new KP(t.readInt(!0),t.readInt(!0),U),Ke.spacingMode==zn.Length||Ke.spacingMode==zn.Fixed?a:1));break;case oNe:for(var d=new ZP(t.readInt(!0),t.readInt(!0),U),v=t.readFloat(),ae=t.readFloat(),pe=t.readFloat(),se=t.readFloat(),g=0,E=0,p=d.getFrameCount()-1;d.setFrame(g,v,ae,pe,se),g!=p;g++){var C=t.readFloat(),Ee=t.readFloat(),Se=t.readFloat(),Ge=t.readFloat();switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,ae,Ee,1),gr(t,d,E++,g,1,v,C,pe,Se,1),gr(t,d,E++,g,2,v,C,se,Ge,1)}v=C,ae=Ee,pe=Se,se=Ge}i.push(d)}for(var o=0,s=t.readInt(!0);o<s;o++)for(var bt=n.skins[t.readInt(!0)],l=0,u=t.readInt(!0);l<u;l++)for(var c=t.readInt(!0),Rt=0,ct=t.readInt(!0);Rt<ct;Rt++){var gt=t.readStringRef();if(!gt)throw new Error("attachmentName must not be null.");var It=bt.getAttachment(c,gt),f=this.readDeformTimelineType(t),h=t.readInt(!0),p=h-1;switch(f){case LD:{for(var fr=It,er=fr.bones,hr=fr.vertices,qt=er?hr.length/3*2:hr.length,_=t.readInt(!0),d=new zP(h,_,c,fr),v=t.readFloat(),g=0,E=0;;g++){var wt=void 0,sr=t.readInt(!0);if(sr==0)wt=er?xe.newFloatArray(qt):hr;else{wt=xe.newFloatArray(qt);var ke=t.readInt(!0);if(sr+=ke,a==1)for(var H=ke;H<sr;H++)wt[H]=t.readFloat();else for(var H=ke;H<sr;H++)wt[H]=t.readFloat()*a;if(!er)for(var H=0,ve=wt.length;H<ve;H++)wt[H]+=hr[H]}if(d.setFrame(g,v,wt),g==p)break;var C=t.readFloat();switch(t.readByte()){case mo:d.setStepped(g);break;case _o:gr(t,d,E++,g,0,v,C,0,1,1)}v=C}i.push(d);break}case nNe:{for(var d=new JP(h,c,It),g=0;g<h;g++){var v=t.readFloat(),Te=t.readInt32();d.setFrame(g,v,OP[Te&15],Te>>4,t.readFloat())}i.push(d);break}}}var Fe=t.readInt(!0);if(Fe>0){for(var d=new Wf(Fe),oe=n.slots.length,o=0;o<Fe;o++){for(var v=t.readFloat(),Ie=t.readInt(!0),W=xe.newArray(oe,0),l=oe-1;l>=0;l--)W[l]=-1;for(var Ue=xe.newArray(oe-Ie,0),dt=0,N=0,l=0;l<Ie;l++){for(var c=t.readInt(!0);dt!=c;)Ue[N++]=dt++;W[dt+t.readInt(!0)]=dt++}for(;dt<oe;)Ue[N++]=dt++;for(var l=oe-1;l>=0;l--)W[l]==-1&&(W[l]=Ue[--N]);d.setFrame(o,v,W)}i.push(d)}var Re=t.readInt(!0);if(Re>0){for(var d=new dx(Re),o=0;o<Re;o++){var v=t.readFloat(),Oe=n.events[t.readInt(!0)],q=new tO(v,Oe);q.intValue=t.readInt(!1),q.floatValue=t.readFloat(),q.stringValue=t.readBoolean()?t.readString():Oe.stringValue,q.data.audioPath&&(q.volume=t.readFloat(),q.balance=t.readFloat()),d.setFrame(o,q)}i.push(d)}for(var ce=0,o=0,s=i.length;o<s;o++)ce=Math.max(ce,i[o].getDuration());return new fx(r,i,ce)},e.BlendModeValues=[ut.NORMAL,ut.ADD,ut.MULTIPLY,ut.SCREEN],e}(),UFe=function(){function e(t,r,n,i,a){this.mesh=t,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritTimeline=a}return e}(),jFe=function(){function e(t,r){t===void 0&&(t=null),r===void 0&&(r=null),this.bones=t,this.vertices=r}return e}();function ks(e,t,r){for(var n=e.readFloat(),i=e.readFloat()*r,a=0,o=0,s=t.getFrameCount()-1;t.setFrame(a,n,i),a!=s;a++){var c=e.readFloat(),l=e.readFloat()*r;switch(e.readByte()){case mo:t.setStepped(a);break;case _o:gr(e,t,o++,a,0,n,c,i,l,r)}n=c,i=l}return t}function Ww(e,t,r){for(var n=e.readFloat(),i=e.readFloat()*r,a=e.readFloat()*r,o=0,s=0,c=t.getFrameCount()-1;t.setFrame(o,n,i,a),o!=c;o++){var l=e.readFloat(),u=e.readFloat()*r,f=e.readFloat()*r;switch(e.readByte()){case mo:t.setStepped(o);break;case _o:gr(e,t,s++,o,0,n,l,i,u,r),gr(e,t,s++,o,1,n,l,a,f,r)}n=l,i=u,a=f}return t}function gr(e,t,r,n,i,a,o,s,c,l){t.setBezier(r,n,i,a,s,e.readFloat(),e.readFloat()*l,e.readFloat(),e.readFloat()*l,o,c)}var $Fe=0,GFe=1,VFe=2,HFe=3,XFe=4,zFe=5,WFe=6,YFe=7,qFe=8,KFe=9,ZFe=0,JFe=1,QFe=2,eNe=3,tNe=4,rNe=5,LD=0,nNe=1,iNe=0,aNe=1,oNe=2,mo=1,_o=2,sNe=function(e){nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(sP),vH=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(t){var r=this.scale,n=new aO,i=typeof t=="string"?JSON.parse(t):t,a=i.skeleton;if(a){n.hash=a.hash,n.version=a.spine;var o=n.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){var s="Spine 4.1 loader cant load version "+a.spine+". Please configure your pixi-spine bundle";console.error(s)}n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(i.bones)for(var c=0;c<i.bones.length;c++){var l=i.bones[c],u=null,f=Ae(l,"parent",null);if(f!=null&&(u=n.findBone(f),u==null))throw new Error("Parent bone not found: "+f);var h=new eO(n.bones.length,l.name,u);h.length=Ae(l,"length",0)*r,h.x=Ae(l,"x",0)*r,h.y=Ae(l,"y",0)*r,h.rotation=Ae(l,"rotation",0),h.scaleX=Ae(l,"scaleX",1),h.scaleY=Ae(l,"scaleY",1),h.shearX=Ae(l,"shearX",0),h.shearY=Ae(l,"shearY",0),h.transformMode=xe.enumValue(Ut,Ae(l,"transform","Normal")),h.skinRequired=Ae(l,"skin",!1);var p=Ae(l,"color",null);p&&h.color.setFromString(p),n.bones.push(h)}if(i.slots)for(var c=0;c<i.slots.length;c++){var d=i.slots[c],g=n.findBone(d.bone);if(!g)throw new Error("Couldn't find bone "+d.bone+" for slot "+d.name);var h=new oO(n.slots.length,d.name,g),p=Ae(d,"color",null);p&&h.color.setFromString(p);var _=Ae(d,"dark",null);_&&(h.darkColor=rt.fromString(_)),h.attachmentName=Ae(d,"attachment",null),h.blendMode=e.blendModeFromString(Ae(d,"blend","normal")),n.slots.push(h)}if(i.ik)for(var c=0;c<i.ik.length;c++){var v=i.ik[c],h=new nO(v.name);h.order=Ae(v,"order",0),h.skinRequired=Ae(v,"skin",!1);for(var m=0;m<v.bones.length;m++){var y=v.bones[m],b=n.findBone(y);if(b==null)throw new Error("IK bone not found: "+y);h.bones.push(b)}h.target=n.findBone(v.target),h.mix=Ae(v,"mix",1),h.softness=Ae(v,"softness",0)*r,h.bendDirection=Ae(v,"bendPositive",!0)?1:-1,h.compress=Ae(v,"compress",!1),h.stretch=Ae(v,"stretch",!1),h.uniform=Ae(v,"uniform",!1),n.ikConstraints.push(h)}if(i.transform)for(var c=0;c<i.transform.length;c++){var v=i.transform[c],h=new sO(v.name);h.order=Ae(v,"order",0),h.skinRequired=Ae(v,"skin",!1);for(var m=0;m<v.bones.length;m++){var y=v.bones[m],b=n.findBone(y);if(!b)throw new Error("Couldn't find bone "+y+" for transform constraint "+v.name+".");h.bones.push(b)}var w=v.target,E=n.findBone(w);if(!E)throw new Error("Couldn't find target bone "+w+" for transform constraint "+v.name+".");h.target=E,h.local=Ae(v,"local",!1),h.relative=Ae(v,"relative",!1),h.offsetRotation=Ae(v,"rotation",0),h.offsetX=Ae(v,"x",0)*r,h.offsetY=Ae(v,"y",0)*r,h.offsetScaleX=Ae(v,"scaleX",0),h.offsetScaleY=Ae(v,"scaleY",0),h.offsetShearY=Ae(v,"shearY",0),h.mixRotate=Ae(v,"mixRotate",1),h.mixX=Ae(v,"mixX",1),h.mixY=Ae(v,"mixY",h.mixX),h.mixScaleX=Ae(v,"mixScaleX",1),h.mixScaleY=Ae(v,"mixScaleY",h.mixScaleX),h.mixShearY=Ae(v,"mixShearY",1),n.transformConstraints.push(h)}if(i.path)for(var c=0;c<i.path.length;c++){var v=i.path[c],h=new iO(v.name);h.order=Ae(v,"order",0),h.skinRequired=Ae(v,"skin",!1);for(var m=0;m<v.bones.length;m++){var y=v.bones[m],b=n.findBone(y);if(!b)throw new Error("Couldn't find bone "+y+" for path constraint "+v.name+".");h.bones.push(b)}var w=v.target,E=n.findSlot(w);if(!E)throw new Error("Couldn't find target slot "+w+" for path constraint "+v.name+".");h.target=E,h.positionMode=xe.enumValue(un,Ae(v,"positionMode","Percent")),h.spacingMode=xe.enumValue(zn,Ae(v,"spacingMode","Length")),h.rotateMode=xe.enumValue(Tn,Ae(v,"rotateMode","Tangent")),h.offsetRotation=Ae(v,"rotation",0),h.position=Ae(v,"position",0),h.positionMode==un.Fixed&&(h.position*=r),h.spacing=Ae(v,"spacing",0),(h.spacingMode==zn.Length||h.spacingMode==zn.Fixed)&&(h.spacing*=r),h.mixRotate=Ae(v,"mixRotate",1),h.mixX=Ae(v,"mixX",1),h.mixY=Ae(v,"mixY",h.mixX),n.pathConstraints.push(h)}if(i.skins)for(var c=0;c<i.skins.length;c++){var C=i.skins[c],T=new x_(C.name);if(C.bones)for(var m=0;m<C.bones.length;m++){var y=C.bones[m],b=n.findBone(y);if(!b)throw new Error("Couldn't find bone "+y+" for skin "+C.name+".");T.bones.push(b)}if(C.ik)for(var m=0;m<C.ik.length;m++){var A=C.ik[m],I=n.findIkConstraint(A);if(!I)throw new Error("Couldn't find IK constraint "+A+" for skin "+C.name+".");T.constraints.push(I)}if(C.transform)for(var m=0;m<C.transform.length;m++){var A=C.transform[m],I=n.findTransformConstraint(A);if(!I)throw new Error("Couldn't find transform constraint "+A+" for skin "+C.name+".");T.constraints.push(I)}if(C.path)for(var m=0;m<C.path.length;m++){var A=C.path[m],I=n.findPathConstraint(A);if(!I)throw new Error("Couldn't find path constraint "+A+" for skin "+C.name+".");T.constraints.push(I)}for(var O in C.attachments){var P=n.findSlot(O);if(!P)throw new Error("Couldn't find slot "+O+" for skin "+C.name+".");var d=C.attachments[O];for(var k in d){var F=this.readAttachment(d[k],T,P.index,k,n);F&&T.setAttachment(P.index,k,F)}}n.skins.push(T),T.name=="default"&&(n.defaultSkin=T)}for(var c=0,M=this.linkedMeshes.length;c<M;c++){var D=this.linkedMeshes[c],T=D.skin?n.findSkin(D.skin):n.defaultSkin;if(!T)throw new Error("Skin not found: "+D.skin);var G=T.getAttachment(D.slotIndex,D.parent);if(!G)throw new Error("Parent mesh not found: "+D.parent);D.mesh.timelineAttachment=D.inheritTimeline?G:D.mesh,D.mesh.setParentMesh(G)}if(this.linkedMeshes.length=0,i.events)for(var Q in i.events){var te=i.events[Q],h=new rO(Q);h.intValue=Ae(te,"int",0),h.floatValue=Ae(te,"float",0),h.stringValue=Ae(te,"string",""),h.audioPath=Ae(te,"audio",null),h.audioPath&&(h.volume=Ae(te,"volume",1),h.balance=Ae(te,"balance",0)),n.events.push(h)}if(i.animations)for(var Y in i.animations){var U=i.animations[Y];this.readAnimation(U,Y,n)}return n},e.prototype.readAttachment=function(t,r,n,i,a){var o=this.scale;switch(i=Ae(t,"name",i),Ae(t,"type","region")){case"region":{var s=Ae(t,"path",i),c=this.readSequence(Ae(t,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(r,i,s,c);if(!l)return null;l.path=s,l.x=Ae(t,"x",0)*o,l.y=Ae(t,"y",0)*o,l.scaleX=Ae(t,"scaleX",1),l.scaleY=Ae(t,"scaleY",1),l.rotation=Ae(t,"rotation",0),l.width=t.width*o,l.height=t.height*o,l.sequence=c;var u=Ae(t,"color",null);return u&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(!f)return null;this.readVertices(t,f,t.vertexCount<<1);var u=Ae(t,"color",null);return u&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var s=Ae(t,"path",i),c=this.readSequence(Ae(t,"sequence",null)),h=this.attachmentLoader.newMeshAttachment(r,i,s,c);if(!h)return null;h.path=s;var u=Ae(t,"color",null);u&&h.color.setFromString(u),h.width=Ae(t,"width",0)*o,h.height=Ae(t,"height",0)*o,h.sequence=c;var p=Ae(t,"parent",null);if(p)return this.linkedMeshes.push(new lNe(h,Ae(t,"skin",null),n,p,Ae(t,"timelines",!0))),h;var d=t.uvs;return this.readVertices(t,h,d.length),h.triangles=t.triangles,h.regionUVs=new Float32Array(d),h.edges=Ae(t,"edges",null),h.hullLength=Ae(t,"hull",0)*2,h}case"path":{var s=this.attachmentLoader.newPathAttachment(r,i);if(!s)return null;s.closed=Ae(t,"closed",!1),s.constantSpeed=Ae(t,"constantSpeed",!0);var g=t.vertexCount;this.readVertices(t,s,g<<1);for(var _=xe.newArray(g/3,0),v=0;v<t.lengths.length;v++)_[v]=t.lengths[v]*o;s.lengths=_;var u=Ae(t,"color",null);return u&&s.color.setFromString(u),s}case"point":{var m=this.attachmentLoader.newPointAttachment(r,i);if(!m)return null;m.x=Ae(t,"x",0)*o,m.y=Ae(t,"y",0)*o,m.rotation=Ae(t,"rotation",0);var u=Ae(t,"color",null);return u&&m.color.setFromString(u),m}case"clipping":{var y=this.attachmentLoader.newClippingAttachment(r,i);if(!y)return null;var b=Ae(t,"end",null);if(b!=null){var w=a.findSlot(b);if(w==null)throw new Error("Clipping end slot not found: "+b);y.endSlot=w}var g=t.vertexCount;this.readVertices(t,y,g<<1);var u=Ae(t,"color",null);return u&&y.color.setFromString(u),y}}return null},e.prototype.readSequence=function(t){if(t==null)return null;var r=new PP(Ae(t,"count",0));return r.start=Ae(t,"start",1),r.digits=Ae(t,"digits",0),r.setupIndex=Ae(t,"setup",0),r},e.prototype.readVertices=function(t,r,n){var i=this.scale;r.worldVerticesLength=n;var a=t.vertices;if(n==a.length){var o=xe.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=xe.toFloatArray(l)},e.prototype.readAnimation=function(t,r,n){var i=this.scale,a=new Array;if(t.slots)for(var o in t.slots){var s=t.slots[o],c=n.findSlot(o);if(!c)throw new Error("Slot not found: "+o);var l=c.index;for(var u in s){var f=s[u];if(f){var h=f.length;if(u=="attachment"){for(var p=new ec(h,l),d=0;d<h;d++){var g=f[d];p.setFrame(d,Ae(g,"time",0),Ae(g,"name",null))}a.push(p)}else if(u=="rgba"){for(var p=new $P(h,h<<2,l),g=f[0],_=Ae(g,"time",0),v=rt.fromString(g.color),d=0,m=0;;d++){p.setFrame(d,_,v.r,v.g,v.b,v.a);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),w=rt.fromString(y.color),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,v.r,w.r,1),m=_r(E,p,m,d,1,_,b,v.g,w.g,1),m=_r(E,p,m,d,2,_,b,v.b,w.b,1),m=_r(E,p,m,d,3,_,b,v.a,w.a,1)),_=b,v=w,g=y}a.push(p)}else if(u=="rgb"){for(var p=new GP(h,h*3,l),g=f[0],_=Ae(g,"time",0),v=rt.fromString(g.color),d=0,m=0;;d++){p.setFrame(d,_,v.r,v.g,v.b);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),w=rt.fromString(y.color),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,v.r,w.r,1),m=_r(E,p,m,d,1,_,b,v.g,w.g,1),m=_r(E,p,m,d,2,_,b,v.b,w.b,1)),_=b,v=w,g=y}a.push(p)}else if(u=="alpha")a.push(Vo(f,new VP(h,h,l),0,1));else if(u=="rgba2"){for(var p=new HP(h,h*7,l),g=f[0],_=Ae(g,"time",0),v=rt.fromString(g.light),C=rt.fromString(g.dark),d=0,m=0;;d++){p.setFrame(d,_,v.r,v.g,v.b,v.a,C.r,C.g,C.b);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),w=rt.fromString(y.light),T=rt.fromString(y.dark),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,v.r,w.r,1),m=_r(E,p,m,d,1,_,b,v.g,w.g,1),m=_r(E,p,m,d,2,_,b,v.b,w.b,1),m=_r(E,p,m,d,3,_,b,v.a,w.a,1),m=_r(E,p,m,d,4,_,b,C.r,T.r,1),m=_r(E,p,m,d,5,_,b,C.g,T.g,1),m=_r(E,p,m,d,6,_,b,C.b,T.b,1)),_=b,v=w,C=T,g=y}a.push(p)}else if(u=="rgb2"){for(var p=new XP(h,h*6,l),g=f[0],_=Ae(g,"time",0),v=rt.fromString(g.light),C=rt.fromString(g.dark),d=0,m=0;;d++){p.setFrame(d,_,v.r,v.g,v.b,C.r,C.g,C.b);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),w=rt.fromString(y.light),T=rt.fromString(y.dark),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,v.r,w.r,1),m=_r(E,p,m,d,1,_,b,v.g,w.g,1),m=_r(E,p,m,d,2,_,b,v.b,w.b,1),m=_r(E,p,m,d,3,_,b,C.r,T.r,1),m=_r(E,p,m,d,4,_,b,C.g,T.g,1),m=_r(E,p,m,d,5,_,b,C.b,T.b,1)),_=b,v=w,C=T,g=y}a.push(p)}}}}if(t.bones)for(var A in t.bones){var I=t.bones[A],O=n.findBone(A);if(!O)throw new Error("Bone not found: "+A);var P=O.index;for(var u in I){var f=I[u],k=f.length;if(k!=0){if(u==="rotate")a.push(Vo(f,new _0(k,k,P),0,1));else if(u==="translate"){var p=new kP(k,k<<1,P);a.push(Yw(f,p,"x","y",0,i))}else if(u==="translatex"){var p=new FP(k,k,P);a.push(Vo(f,p,0,i))}else if(u==="translatey"){var p=new NP(k,k,P);a.push(Vo(f,p,0,i))}else if(u==="scale"){var p=new LP(k,k<<1,P);a.push(Yw(f,p,"x","y",1,1))}else if(u==="scalex"){var p=new BP(k,k,P);a.push(Vo(f,p,1,1))}else if(u==="scaley"){var p=new MP(k,k,P);a.push(Vo(f,p,1,1))}else if(u==="shear"){var p=new DP(k,k<<1,P);a.push(Yw(f,p,"x","y",0,1))}else if(u==="shearx"){var p=new UP(k,k,P);a.push(Vo(f,p,0,1))}else if(u==="sheary"){var p=new jP(k,k,P);a.push(Vo(f,p,0,1))}}}}if(t.ik)for(var F in t.ik){var M=t.ik[F],g=M[0];if(g){var D=n.findIkConstraint(F);if(!D)throw new Error("IK Constraint not found: "+F);for(var G=n.ikConstraints.indexOf(D),p=new WP(M.length,M.length<<1,G),_=Ae(g,"time",0),Q=Ae(g,"mix",1),te=Ae(g,"softness",0)*i,d=0,m=0;;d++){p.setFrame(d,_,Q,te,Ae(g,"bendPositive",!0)?1:-1,Ae(g,"compress",!1),Ae(g,"stretch",!1));var y=M[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),Y=Ae(y,"mix",1),U=Ae(y,"softness",0)*i,E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,Q,Y,1),m=_r(E,p,m,d,1,_,b,te,U,i)),_=b,Q=Y,te=U,g=y}a.push(p)}}if(t.transform)for(var F in t.transform){var f=t.transform[F],g=f[0];if(g){var D=n.findTransformConstraint(F);if(!D)throw new Error("Transform constraint not found: "+F);for(var G=n.transformConstraints.indexOf(D),p=new YP(f.length,f.length*6,G),_=Ae(g,"time",0),z=Ae(g,"mixRotate",1),j=Ae(g,"mixX",1),V=Ae(g,"mixY",j),ne=Ae(g,"mixScaleX",1),ae=Ae(g,"mixScaleY",ne),pe=Ae(g,"mixShearY",1),d=0,m=0;;d++){p.setFrame(d,_,z,j,V,ne,ae,pe);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),se=Ae(y,"mixRotate",1),_e=Ae(y,"mixX",1),Le=Ae(y,"mixY",_e),Pe=Ae(y,"mixScaleX",1),Ee=Ae(y,"mixScaleY",Pe),Se=Ae(y,"mixShearY",1),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,z,se,1),m=_r(E,p,m,d,1,_,b,j,_e,1),m=_r(E,p,m,d,2,_,b,V,Le,1),m=_r(E,p,m,d,3,_,b,ne,Pe,1),m=_r(E,p,m,d,4,_,b,ae,Ee,1),m=_r(E,p,m,d,5,_,b,pe,Se,1)),_=b,z=se,j=_e,V=Le,ne=Pe,ae=Ee,ne=Pe,g=y}a.push(p)}}if(t.path)for(var F in t.path){var M=t.path[F],D=n.findPathConstraint(F);if(!D)throw new Error("Path constraint not found: "+F);var G=n.pathConstraints.indexOf(D);for(var u in M){var f=M[u],g=f[0];if(g){var Ge=f.length;if(u==="position"){var p=new qP(Ge,Ge,G);a.push(Vo(f,p,0,D.positionMode==un.Fixed?i:1))}else if(u==="spacing"){var p=new KP(Ge,Ge,G);a.push(Vo(f,p,0,D.spacingMode==zn.Length||D.spacingMode==zn.Fixed?i:1))}else if(u==="mix"){for(var p=new ZP(Ge,Ge*3,G),_=Ae(g,"time",0),z=Ae(g,"mixRotate",1),j=Ae(g,"mixX",1),V=Ae(g,"mixY",j),d=0,m=0;;d++){p.setFrame(d,_,z,j,V);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),se=Ae(y,"mixRotate",1),_e=Ae(y,"mixX",1),Le=Ae(y,"mixY",_e),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,z,se,1),m=_r(E,p,m,d,1,_,b,j,_e,1),m=_r(E,p,m,d,2,_,b,V,Le,1)),_=b,z=se,j=_e,V=Le,g=y}a.push(p)}}}}if(t.deform){t.attachments={};for(var We in t.deform){var Ve=t.deform[We],Xe=t.attachments[We]={};for(var o in Ve){var s=Ve[o],Ke=Xe[o]={};for(var bt in s)Ke[bt]={deform:s[bt]}}}}if(t.attachments)for(var Rt in t.attachments){var ct=t.attachments[Rt],gt=n.findSkin(Rt);if(gt!=null)for(var It in ct){var s=ct[It],c=n.findSlot(It);if(!c)throw new Error("Slot not found: "+It);var l=c.index;for(var fr in s){var er=s[fr],hr=gt.getAttachment(l,fr);for(var qt in er){var f=er[qt],g=f[0];if(g){if(qt=="deform"){for(var wt=hr.bones,sr=hr.vertices,ke=wt?sr.length/3*2:sr.length,p=new zP(f.length,f.length,l,hr),_=Ae(g,"time",0),d=0,m=0;;d++){var H=void 0,ve=Ae(g,"vertices",null);if(!ve)H=wt?xe.newFloatArray(ke):sr;else{H=xe.newFloatArray(ke);var Te=Ae(g,"offset",0);if(xe.arrayCopy(ve,0,H,Te,ve.length),i!=1)for(var Fe=Te,oe=Fe+ve.length;Fe<oe;Fe++)H[Fe]*=i;if(!wt)for(var Fe=0;Fe<ke;Fe++)H[Fe]+=sr[Fe]}p.setFrame(d,_,H);var y=f[d+1];if(!y){p.shrink(m);break}var b=Ae(y,"time",0),E=g.curve;E&&(m=_r(E,p,m,d,0,_,b,0,1,1)),_=b,g=y}a.push(p)}else if(qt=="sequence"){for(var p=new JP(f.length,l,hr),Ie=0,d=0;d<f.length;d++){var W=Ae(g,"delay",Ie),_=Ae(g,"time",0),Ue=hi[Ae(g,"mode","hold")],dt=Ae(g,"index",0);p.setFrame(d,_,Ue,dt,W),Ie=W,g=f[d+1]}a.push(p)}}}}}}if(t.drawOrder){for(var p=new Wf(t.drawOrder.length),N=n.slots.length,d=0,Fe=0;Fe<t.drawOrder.length;Fe++,d++){var Re=t.drawOrder[Fe],Oe=null,q=Ae(Re,"offsets",null);if(q){Oe=xe.newArray(N,-1);for(var ce=xe.newArray(N-q.length,0),Ce=0,ft=0,Qe=0;Qe<q.length;Qe++){var st=q[Qe],c=n.findSlot(st.slot);if(!c)throw new Error("Slot not found: "+c);for(var l=c.index;Ce!=l;)ce[ft++]=Ce++;Oe[Ce+st.offset]=Ce++}for(;Ce<N;)ce[ft++]=Ce++;for(var Qe=N-1;Qe>=0;Qe--)Oe[Qe]==-1&&(Oe[Qe]=ce[--ft])}p.setFrame(d,Ae(Re,"time",0),Oe)}a.push(p)}if(t.events){for(var p=new dx(t.events.length),d=0,Fe=0;Fe<t.events.length;Fe++,d++){var kt=t.events[Fe],Rn=n.findEvent(kt.name);if(!Rn)throw new Error("Event not found: "+kt.name);var ir=new tO(xe.toSinglePrecision(Ae(kt,"time",0)),Rn);ir.intValue=Ae(kt,"int",Rn.intValue),ir.floatValue=Ae(kt,"float",Rn.floatValue),ir.stringValue=Ae(kt,"string",Rn.stringValue),ir.data.audioPath&&(ir.volume=Ae(kt,"volume",1),ir.balance=Ae(kt,"balance",0)),p.setFrame(d,ir)}a.push(p)}for(var St=0,Fe=0,oe=a.length;Fe<oe;Fe++)St=Math.max(St,a[Fe].getDuration());if(isNaN(St))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new fx(r,a,St))},e.blendModeFromString=function(t){if(t=t.toLowerCase(),t=="normal")return ut.NORMAL;if(t=="additive")return ut.ADD;if(t=="multiply")return ut.MULTIPLY;if(t=="screen")return ut.SCREEN;throw new Error("Unknown blend mode: "+t)},e}(),lNe=function(){function e(t,r,n,i,a){this.mesh=t,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritTimeline=a}return e}();function Vo(e,t,r,n){for(var i=e[0],a=Ae(i,"time",0),o=Ae(i,"value",r)*n,s=0,c=0;;c++){t.setFrame(c,a,o);var l=e[c+1];if(!l)return t.shrink(s),t;var u=Ae(l,"time",0),f=Ae(l,"value",r)*n;i.curve&&(s=_r(i.curve,t,s,c,0,a,u,o,f,n)),a=u,o=f,i=l}}function Yw(e,t,r,n,i,a){for(var o=e[0],s=Ae(o,"time",0),c=Ae(o,r,i)*a,l=Ae(o,n,i)*a,u=0,f=0;;f++){t.setFrame(f,s,c,l);var h=e[f+1];if(!h)return t.shrink(u),t;var p=Ae(h,"time",0),d=Ae(h,r,i)*a,g=Ae(h,n,i)*a,_=o.curve;_&&(u=_r(_,t,u,f,0,s,p,c,d,a),u=_r(_,t,u,f,1,s,p,l,g,a)),s=p,c=d,l=g,o=h}}function _r(e,t,r,n,i,a,o,s,c,l){if(e=="stepped")return t.setStepped(n),r;var u=i<<2,f=e[u],h=e[u+1]*l,p=e[u+2],d=e[u+3]*l;return t.setBezier(r,n,i,a,s,f,h,p,d,o,c),r+1}function Ae(e,t,r){return e[t]!==void 0?e[t]:r}var uNe=function(e){nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createSkeleton=function(r){this.skeleton=new dH(r),this.skeleton.updateWorldTransform(),this.stateData=new lH(r),this.state=new aH(this.stateData)},t}(W0);const cNe=Object.freeze(Object.defineProperty({__proto__:null,AlphaTimeline:VP,Animation:fx,AnimationState:aH,AnimationStateAdapter:BFe,AnimationStateData:lH,AtlasAttachmentLoader:QP,Attachment:IP,AttachmentTimeline:ec,Bone:kT,BoneData:eO,BoundingBoxAttachment:rH,ClippingAttachment:nH,ConstraintData:px,CurveTimeline:No,CurveTimeline1:Lo,CurveTimeline2:hx,DeformTimeline:zP,DrawOrderTimeline:Wf,Event:tO,EventData:rO,EventQueue:sH,EventTimeline:dx,get EventType(){return Ji},IkConstraint:uH,IkConstraintData:nO,IkConstraintTimeline:WP,MeshAttachment:cx,PathAttachment:m0,PathConstraint:cH,PathConstraintData:iO,PathConstraintMixTimeline:ZP,PathConstraintPositionTimeline:qP,PathConstraintSpacingTimeline:KP,PointAttachment:iH,RGB2Timeline:XP,RGBA2Timeline:HP,RGBATimeline:$P,RGBTimeline:GP,RegionAttachment:RP,RotateTimeline:_0,ScaleTimeline:LP,ScaleXTimeline:BP,ScaleYTimeline:MP,Sequence:PP,get SequenceMode(){return hi},SequenceModeValues:OP,SequenceTimeline:JP,ShearTimeline:DP,ShearXTimeline:UP,ShearYTimeline:jP,Skeleton:dH,SkeletonBinary:pH,SkeletonBounds:sNe,SkeletonData:aO,SkeletonJson:vH,Skin:x_,SkinEntry:FT,Slot:fH,SlotData:oO,get SpacingMode(){return zn},Spine:uNe,Timeline:In,TrackEntry:oH,TransformConstraint:hH,TransformConstraintData:sO,TransformConstraintTimeline:YP,TranslateTimeline:kP,TranslateXTimeline:FP,TranslateYTimeline:NP,VertexAttachment:cs},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NT=function(e,t){return NT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},NT(e,t)};function gH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");NT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VER37=37]="VER37",e[e.VER38=38]="VER38",e[e.VER40=40]="VER40",e[e.VER41=41]="VER41"})(Wn||(Wn={}));function b_(e){var t=e.substr(0,3),r=Math.floor(+t*10+.001);return t==="3.7"?Wn.VER37:t==="3.8"?Wn.VER38:t==="4.0"?Wn.VER40:t==="4.1"?Wn.VER41:r<Wn.VER37?Wn.VER37:Wn.UNKNOWN}var fNe=function(){function e(){this.scale=1}return e.prototype.readSkeletonData=function(t,r){var n=null,i=this.readVersionOldFormat(r),a=b_(i);if(a===Wn.VER38&&(n=new AV(new vP(t))),i=this.readVersionNewFormat(r),a=b_(i),(a===Wn.VER40||a===Wn.VER41)&&(n=new pH(new QP(t))),!n){var o="Unsupported version of spine model "+i+", please update pixi-spine";console.error(o)}return n.scale=this.scale,n.readSkeletonData(r)},e.prototype.readVersionOldFormat=function(t){var r=new v_(t),n;try{r.readString(),n=r.readString()}catch{n=""}return n||""},e.prototype.readVersionNewFormat=function(t){var r=new v_(t);r.readInt32(),r.readInt32();var n;try{n=r.readString()}catch{n=""}return n||""},e}(),hNe=function(){function e(){this.scale=1}return e.prototype.readSkeletonData=function(t,r){var n=r.skeleton.spine,i=b_(n),a=null;if(i===Wn.VER37&&(a=new tH(new $V(t))),i===Wn.VER38&&(a=new IV(new vP(t))),(i===Wn.VER40||i===Wn.VER41)&&(a=new vH(new QP(t))),!a){var o="Unsupported version of spine model "+n+", please update pixi-spine";console.error(o)}return a.scale=this.scale,a.readSkeletonData(r)},e}(),dNe=function(e){gH(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createBinaryParser=function(){return new fNe},t.prototype.createJsonParser=function(){return new hNe},t.prototype.parseData=function(r,n,i,a){var o=n;r.spineData=o.readSkeletonData(i,a),r.spineAtlas=i},t.registerLoaderPlugin=function(){ya.registerPlugin(t)},t.use=new t().genMiddleware().use,t}(_Fe),pNe=function(e){gH(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createSkeleton=function(r){var n=b_(r.version),i=null;if(n===Wn.VER37&&(i=LFe),n===Wn.VER38&&(i=IFe),(n===Wn.VER40||n===Wn.VER41)&&(i=cNe),!i){var a="Cant detect version of spine model "+r.version;console.error(a)}this.skeleton=new i.Skeleton(r),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(r),this.state=new i.AnimationState(this.stateData)},t}(W0);dNe.registerLoaderPlugin();var mH={exports:{}},qw={},BD;function hu(){return BD||(BD=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(a,o){return Object.prototype.hasOwnProperty.call(a,o)}e.assign=function(a){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var c in s)r(s,c)&&(a[c]=s[c])}}return a},e.shrinkBuf=function(a,o){return a.length===o?a:a.subarray?a.subarray(0,o):(a.length=o,a)};var n={arraySet:function(a,o,s,c,l){if(o.subarray&&a.subarray){a.set(o.subarray(s,s+c),l);return}for(var u=0;u<c;u++)a[l+u]=o[s+u]},flattenChunks:function(a){var o,s,c,l,u,f;for(c=0,o=0,s=a.length;o<s;o++)c+=a[o].length;for(f=new Uint8Array(c),l=0,o=0,s=a.length;o<s;o++)u=a[o],f.set(u,l),l+=u.length;return f}},i={arraySet:function(a,o,s,c,l){for(var u=0;u<c;u++)a[l+u]=o[s+u]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(qw)),qw}var cf={},po={},Iu={},MD;function vNe(){if(MD)return Iu;MD=1;var e=hu(),t=4,r=0,n=1,i=2;function a(H){for(var ve=H.length;--ve>=0;)H[ve]=0}var o=0,s=1,c=2,l=3,u=258,f=29,h=256,p=h+1+f,d=30,g=19,_=2*p+1,v=15,m=16,y=7,b=256,w=16,E=17,C=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=512,k=new Array((p+2)*2);a(k);var F=new Array(d*2);a(F);var M=new Array(P);a(M);var D=new Array(u-l+1);a(D);var G=new Array(f);a(G);var Q=new Array(d);a(Q);function te(H,ve,Te,Fe,oe){this.static_tree=H,this.extra_bits=ve,this.extra_base=Te,this.elems=Fe,this.max_length=oe,this.has_stree=H&&H.length}var Y,U,z;function j(H,ve){this.dyn_tree=H,this.max_code=0,this.stat_desc=ve}function V(H){return H<256?M[H]:M[256+(H>>>7)]}function ne(H,ve){H.pending_buf[H.pending++]=ve&255,H.pending_buf[H.pending++]=ve>>>8&255}function ae(H,ve,Te){H.bi_valid>m-Te?(H.bi_buf|=ve<<H.bi_valid&65535,ne(H,H.bi_buf),H.bi_buf=ve>>m-H.bi_valid,H.bi_valid+=Te-m):(H.bi_buf|=ve<<H.bi_valid&65535,H.bi_valid+=Te)}function pe(H,ve,Te){ae(H,Te[ve*2],Te[ve*2+1])}function se(H,ve){var Te=0;do Te|=H&1,H>>>=1,Te<<=1;while(--ve>0);return Te>>>1}function _e(H){H.bi_valid===16?(ne(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):H.bi_valid>=8&&(H.pending_buf[H.pending++]=H.bi_buf&255,H.bi_buf>>=8,H.bi_valid-=8)}function Le(H,ve){var Te=ve.dyn_tree,Fe=ve.max_code,oe=ve.stat_desc.static_tree,Ie=ve.stat_desc.has_stree,W=ve.stat_desc.extra_bits,Ue=ve.stat_desc.extra_base,dt=ve.stat_desc.max_length,N,Re,Oe,q,ce,Ce,ft=0;for(q=0;q<=v;q++)H.bl_count[q]=0;for(Te[H.heap[H.heap_max]*2+1]=0,N=H.heap_max+1;N<_;N++)Re=H.heap[N],q=Te[Te[Re*2+1]*2+1]+1,q>dt&&(q=dt,ft++),Te[Re*2+1]=q,!(Re>Fe)&&(H.bl_count[q]++,ce=0,Re>=Ue&&(ce=W[Re-Ue]),Ce=Te[Re*2],H.opt_len+=Ce*(q+ce),Ie&&(H.static_len+=Ce*(oe[Re*2+1]+ce)));if(ft!==0){do{for(q=dt-1;H.bl_count[q]===0;)q--;H.bl_count[q]--,H.bl_count[q+1]+=2,H.bl_count[dt]--,ft-=2}while(ft>0);for(q=dt;q!==0;q--)for(Re=H.bl_count[q];Re!==0;)Oe=H.heap[--N],!(Oe>Fe)&&(Te[Oe*2+1]!==q&&(H.opt_len+=(q-Te[Oe*2+1])*Te[Oe*2],Te[Oe*2+1]=q),Re--)}}function Pe(H,ve,Te){var Fe=new Array(v+1),oe=0,Ie,W;for(Ie=1;Ie<=v;Ie++)Fe[Ie]=oe=oe+Te[Ie-1]<<1;for(W=0;W<=ve;W++){var Ue=H[W*2+1];Ue!==0&&(H[W*2]=se(Fe[Ue]++,Ue))}}function Ee(){var H,ve,Te,Fe,oe,Ie=new Array(v+1);for(Te=0,Fe=0;Fe<f-1;Fe++)for(G[Fe]=Te,H=0;H<1<<T[Fe];H++)D[Te++]=Fe;for(D[Te-1]=Fe,oe=0,Fe=0;Fe<16;Fe++)for(Q[Fe]=oe,H=0;H<1<<A[Fe];H++)M[oe++]=Fe;for(oe>>=7;Fe<d;Fe++)for(Q[Fe]=oe<<7,H=0;H<1<<A[Fe]-7;H++)M[256+oe++]=Fe;for(ve=0;ve<=v;ve++)Ie[ve]=0;for(H=0;H<=143;)k[H*2+1]=8,H++,Ie[8]++;for(;H<=255;)k[H*2+1]=9,H++,Ie[9]++;for(;H<=279;)k[H*2+1]=7,H++,Ie[7]++;for(;H<=287;)k[H*2+1]=8,H++,Ie[8]++;for(Pe(k,p+1,Ie),H=0;H<d;H++)F[H*2+1]=5,F[H*2]=se(H,5);Y=new te(k,T,h+1,p,v),U=new te(F,A,0,d,v),z=new te(new Array(0),I,0,g,y)}function Se(H){var ve;for(ve=0;ve<p;ve++)H.dyn_ltree[ve*2]=0;for(ve=0;ve<d;ve++)H.dyn_dtree[ve*2]=0;for(ve=0;ve<g;ve++)H.bl_tree[ve*2]=0;H.dyn_ltree[b*2]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function Ge(H){H.bi_valid>8?ne(H,H.bi_buf):H.bi_valid>0&&(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function We(H,ve,Te,Fe){Ge(H),Fe&&(ne(H,Te),ne(H,~Te)),e.arraySet(H.pending_buf,H.window,ve,Te,H.pending),H.pending+=Te}function Ve(H,ve,Te,Fe){var oe=ve*2,Ie=Te*2;return H[oe]<H[Ie]||H[oe]===H[Ie]&&Fe[ve]<=Fe[Te]}function Xe(H,ve,Te){for(var Fe=H.heap[Te],oe=Te<<1;oe<=H.heap_len&&(oe<H.heap_len&&Ve(ve,H.heap[oe+1],H.heap[oe],H.depth)&&oe++,!Ve(ve,Fe,H.heap[oe],H.depth));)H.heap[Te]=H.heap[oe],Te=oe,oe<<=1;H.heap[Te]=Fe}function Ke(H,ve,Te){var Fe,oe,Ie=0,W,Ue;if(H.last_lit!==0)do Fe=H.pending_buf[H.d_buf+Ie*2]<<8|H.pending_buf[H.d_buf+Ie*2+1],oe=H.pending_buf[H.l_buf+Ie],Ie++,Fe===0?pe(H,oe,ve):(W=D[oe],pe(H,W+h+1,ve),Ue=T[W],Ue!==0&&(oe-=G[W],ae(H,oe,Ue)),Fe--,W=V(Fe),pe(H,W,Te),Ue=A[W],Ue!==0&&(Fe-=Q[W],ae(H,Fe,Ue)));while(Ie<H.last_lit);pe(H,b,ve)}function bt(H,ve){var Te=ve.dyn_tree,Fe=ve.stat_desc.static_tree,oe=ve.stat_desc.has_stree,Ie=ve.stat_desc.elems,W,Ue,dt=-1,N;for(H.heap_len=0,H.heap_max=_,W=0;W<Ie;W++)Te[W*2]!==0?(H.heap[++H.heap_len]=dt=W,H.depth[W]=0):Te[W*2+1]=0;for(;H.heap_len<2;)N=H.heap[++H.heap_len]=dt<2?++dt:0,Te[N*2]=1,H.depth[N]=0,H.opt_len--,oe&&(H.static_len-=Fe[N*2+1]);for(ve.max_code=dt,W=H.heap_len>>1;W>=1;W--)Xe(H,Te,W);N=Ie;do W=H.heap[1],H.heap[1]=H.heap[H.heap_len--],Xe(H,Te,1),Ue=H.heap[1],H.heap[--H.heap_max]=W,H.heap[--H.heap_max]=Ue,Te[N*2]=Te[W*2]+Te[Ue*2],H.depth[N]=(H.depth[W]>=H.depth[Ue]?H.depth[W]:H.depth[Ue])+1,Te[W*2+1]=Te[Ue*2+1]=N,H.heap[1]=N++,Xe(H,Te,1);while(H.heap_len>=2);H.heap[--H.heap_max]=H.heap[1],Le(H,ve),Pe(Te,dt,H.bl_count)}function Rt(H,ve,Te){var Fe,oe=-1,Ie,W=ve[0*2+1],Ue=0,dt=7,N=4;for(W===0&&(dt=138,N=3),ve[(Te+1)*2+1]=65535,Fe=0;Fe<=Te;Fe++)Ie=W,W=ve[(Fe+1)*2+1],!(++Ue<dt&&Ie===W)&&(Ue<N?H.bl_tree[Ie*2]+=Ue:Ie!==0?(Ie!==oe&&H.bl_tree[Ie*2]++,H.bl_tree[w*2]++):Ue<=10?H.bl_tree[E*2]++:H.bl_tree[C*2]++,Ue=0,oe=Ie,W===0?(dt=138,N=3):Ie===W?(dt=6,N=3):(dt=7,N=4))}function ct(H,ve,Te){var Fe,oe=-1,Ie,W=ve[0*2+1],Ue=0,dt=7,N=4;for(W===0&&(dt=138,N=3),Fe=0;Fe<=Te;Fe++)if(Ie=W,W=ve[(Fe+1)*2+1],!(++Ue<dt&&Ie===W)){if(Ue<N)do pe(H,Ie,H.bl_tree);while(--Ue!==0);else Ie!==0?(Ie!==oe&&(pe(H,Ie,H.bl_tree),Ue--),pe(H,w,H.bl_tree),ae(H,Ue-3,2)):Ue<=10?(pe(H,E,H.bl_tree),ae(H,Ue-3,3)):(pe(H,C,H.bl_tree),ae(H,Ue-11,7));Ue=0,oe=Ie,W===0?(dt=138,N=3):Ie===W?(dt=6,N=3):(dt=7,N=4)}}function gt(H){var ve;for(Rt(H,H.dyn_ltree,H.l_desc.max_code),Rt(H,H.dyn_dtree,H.d_desc.max_code),bt(H,H.bl_desc),ve=g-1;ve>=3&&H.bl_tree[O[ve]*2+1]===0;ve--);return H.opt_len+=3*(ve+1)+5+5+4,ve}function It(H,ve,Te,Fe){var oe;for(ae(H,ve-257,5),ae(H,Te-1,5),ae(H,Fe-4,4),oe=0;oe<Fe;oe++)ae(H,H.bl_tree[O[oe]*2+1],3);ct(H,H.dyn_ltree,ve-1),ct(H,H.dyn_dtree,Te-1)}function fr(H){var ve=4093624447,Te;for(Te=0;Te<=31;Te++,ve>>>=1)if(ve&1&&H.dyn_ltree[Te*2]!==0)return r;if(H.dyn_ltree[9*2]!==0||H.dyn_ltree[10*2]!==0||H.dyn_ltree[13*2]!==0)return n;for(Te=32;Te<h;Te++)if(H.dyn_ltree[Te*2]!==0)return n;return r}var er=!1;function hr(H){er||(Ee(),er=!0),H.l_desc=new j(H.dyn_ltree,Y),H.d_desc=new j(H.dyn_dtree,U),H.bl_desc=new j(H.bl_tree,z),H.bi_buf=0,H.bi_valid=0,Se(H)}function qt(H,ve,Te,Fe){ae(H,(o<<1)+(Fe?1:0),3),We(H,ve,Te,!0)}function wt(H){ae(H,s<<1,3),pe(H,b,k),_e(H)}function sr(H,ve,Te,Fe){var oe,Ie,W=0;H.level>0?(H.strm.data_type===i&&(H.strm.data_type=fr(H)),bt(H,H.l_desc),bt(H,H.d_desc),W=gt(H),oe=H.opt_len+3+7>>>3,Ie=H.static_len+3+7>>>3,Ie<=oe&&(oe=Ie)):oe=Ie=Te+5,Te+4<=oe&&ve!==-1?qt(H,ve,Te,Fe):H.strategy===t||Ie===oe?(ae(H,(s<<1)+(Fe?1:0),3),Ke(H,k,F)):(ae(H,(c<<1)+(Fe?1:0),3),It(H,H.l_desc.max_code+1,H.d_desc.max_code+1,W+1),Ke(H,H.dyn_ltree,H.dyn_dtree)),Se(H),Fe&&Ge(H)}function ke(H,ve,Te){return H.pending_buf[H.d_buf+H.last_lit*2]=ve>>>8&255,H.pending_buf[H.d_buf+H.last_lit*2+1]=ve&255,H.pending_buf[H.l_buf+H.last_lit]=Te&255,H.last_lit++,ve===0?H.dyn_ltree[Te*2]++:(H.matches++,ve--,H.dyn_ltree[(D[Te]+h+1)*2]++,H.dyn_dtree[V(ve)*2]++),H.last_lit===H.lit_bufsize-1}return Iu._tr_init=hr,Iu._tr_stored_block=qt,Iu._tr_flush_block=sr,Iu._tr_tally=ke,Iu._tr_align=wt,Iu}var Kw,DD;function _H(){if(DD)return Kw;DD=1;function e(t,r,n,i){for(var a=t&65535|0,o=t>>>16&65535|0,s=0;n!==0;){s=n>2e3?2e3:n,n-=s;do a=a+r[i++]|0,o=o+a|0;while(--s);a%=65521,o%=65521}return a|o<<16|0}return Kw=e,Kw}var Zw,UD;function yH(){if(UD)return Zw;UD=1;function e(){for(var n,i=[],a=0;a<256;a++){n=a;for(var o=0;o<8;o++)n=n&1?3988292384^n>>>1:n>>>1;i[a]=n}return i}var t=e();function r(n,i,a,o){var s=t,c=o+a;n^=-1;for(var l=o;l<c;l++)n=n>>>8^s[(n^i[l])&255];return n^-1}return Zw=r,Zw}var Jw,jD;function lO(){return jD||(jD=1,Jw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Jw}var $D;function gNe(){if($D)return po;$D=1;var e=hu(),t=vNe(),r=_H(),n=yH(),i=lO(),a=0,o=1,s=3,c=4,l=5,u=0,f=1,h=-2,p=-3,d=-5,g=-1,_=1,v=2,m=3,y=4,b=0,w=2,E=8,C=9,T=15,A=8,I=29,O=256,P=O+1+I,k=30,F=19,M=2*P+1,D=15,G=3,Q=258,te=Q+G+1,Y=32,U=42,z=69,j=73,V=91,ne=103,ae=113,pe=666,se=1,_e=2,Le=3,Pe=4,Ee=3;function Se(N,Re){return N.msg=i[Re],Re}function Ge(N){return(N<<1)-(N>4?9:0)}function We(N){for(var Re=N.length;--Re>=0;)N[Re]=0}function Ve(N){var Re=N.state,Oe=Re.pending;Oe>N.avail_out&&(Oe=N.avail_out),Oe!==0&&(e.arraySet(N.output,Re.pending_buf,Re.pending_out,Oe,N.next_out),N.next_out+=Oe,Re.pending_out+=Oe,N.total_out+=Oe,N.avail_out-=Oe,Re.pending-=Oe,Re.pending===0&&(Re.pending_out=0))}function Xe(N,Re){t._tr_flush_block(N,N.block_start>=0?N.block_start:-1,N.strstart-N.block_start,Re),N.block_start=N.strstart,Ve(N.strm)}function Ke(N,Re){N.pending_buf[N.pending++]=Re}function bt(N,Re){N.pending_buf[N.pending++]=Re>>>8&255,N.pending_buf[N.pending++]=Re&255}function Rt(N,Re,Oe,q){var ce=N.avail_in;return ce>q&&(ce=q),ce===0?0:(N.avail_in-=ce,e.arraySet(Re,N.input,N.next_in,ce,Oe),N.state.wrap===1?N.adler=r(N.adler,Re,ce,Oe):N.state.wrap===2&&(N.adler=n(N.adler,Re,ce,Oe)),N.next_in+=ce,N.total_in+=ce,ce)}function ct(N,Re){var Oe=N.max_chain_length,q=N.strstart,ce,Ce,ft=N.prev_length,Qe=N.nice_match,st=N.strstart>N.w_size-te?N.strstart-(N.w_size-te):0,kt=N.window,Rn=N.w_mask,ir=N.prev,St=N.strstart+Q,xr=kt[q+ft-1],en=kt[q+ft];N.prev_length>=N.good_match&&(Oe>>=2),Qe>N.lookahead&&(Qe=N.lookahead);do if(ce=Re,!(kt[ce+ft]!==en||kt[ce+ft-1]!==xr||kt[ce]!==kt[q]||kt[++ce]!==kt[q+1])){q+=2,ce++;do;while(kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&kt[++q]===kt[++ce]&&q<St);if(Ce=Q-(St-q),q=St-Q,Ce>ft){if(N.match_start=Re,ft=Ce,Ce>=Qe)break;xr=kt[q+ft-1],en=kt[q+ft]}}while((Re=ir[Re&Rn])>st&&--Oe!==0);return ft<=N.lookahead?ft:N.lookahead}function gt(N){var Re=N.w_size,Oe,q,ce,Ce,ft;do{if(Ce=N.window_size-N.lookahead-N.strstart,N.strstart>=Re+(Re-te)){e.arraySet(N.window,N.window,Re,Re,0),N.match_start-=Re,N.strstart-=Re,N.block_start-=Re,q=N.hash_size,Oe=q;do ce=N.head[--Oe],N.head[Oe]=ce>=Re?ce-Re:0;while(--q);q=Re,Oe=q;do ce=N.prev[--Oe],N.prev[Oe]=ce>=Re?ce-Re:0;while(--q);Ce+=Re}if(N.strm.avail_in===0)break;if(q=Rt(N.strm,N.window,N.strstart+N.lookahead,Ce),N.lookahead+=q,N.lookahead+N.insert>=G)for(ft=N.strstart-N.insert,N.ins_h=N.window[ft],N.ins_h=(N.ins_h<<N.hash_shift^N.window[ft+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[ft+G-1])&N.hash_mask,N.prev[ft&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=ft,ft++,N.insert--,!(N.lookahead+N.insert<G)););}while(N.lookahead<te&&N.strm.avail_in!==0)}function It(N,Re){var Oe=65535;for(Oe>N.pending_buf_size-5&&(Oe=N.pending_buf_size-5);;){if(N.lookahead<=1){if(gt(N),N.lookahead===0&&Re===a)return se;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var q=N.block_start+Oe;if((N.strstart===0||N.strstart>=q)&&(N.lookahead=N.strstart-q,N.strstart=q,Xe(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-te&&(Xe(N,!1),N.strm.avail_out===0))return se}return N.insert=0,Re===c?(Xe(N,!0),N.strm.avail_out===0?Le:Pe):(N.strstart>N.block_start&&(Xe(N,!1),N.strm.avail_out===0),se)}function fr(N,Re){for(var Oe,q;;){if(N.lookahead<te){if(gt(N),N.lookahead<te&&Re===a)return se;if(N.lookahead===0)break}if(Oe=0,N.lookahead>=G&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,Oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),Oe!==0&&N.strstart-Oe<=N.w_size-te&&(N.match_length=ct(N,Oe)),N.match_length>=G)if(q=t._tr_tally(N,N.strstart-N.match_start,N.match_length-G),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=G){N.match_length--;do N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,Oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart;while(--N.match_length!==0);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else q=t._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(q&&(Xe(N,!1),N.strm.avail_out===0))return se}return N.insert=N.strstart<G-1?N.strstart:G-1,Re===c?(Xe(N,!0),N.strm.avail_out===0?Le:Pe):N.last_lit&&(Xe(N,!1),N.strm.avail_out===0)?se:_e}function er(N,Re){for(var Oe,q,ce;;){if(N.lookahead<te){if(gt(N),N.lookahead<te&&Re===a)return se;if(N.lookahead===0)break}if(Oe=0,N.lookahead>=G&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,Oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=G-1,Oe!==0&&N.prev_length<N.max_lazy_match&&N.strstart-Oe<=N.w_size-te&&(N.match_length=ct(N,Oe),N.match_length<=5&&(N.strategy===_||N.match_length===G&&N.strstart-N.match_start>4096)&&(N.match_length=G-1)),N.prev_length>=G&&N.match_length<=N.prev_length){ce=N.strstart+N.lookahead-G,q=t._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-G),N.lookahead-=N.prev_length-1,N.prev_length-=2;do++N.strstart<=ce&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+G-1])&N.hash_mask,Oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart);while(--N.prev_length!==0);if(N.match_available=0,N.match_length=G-1,N.strstart++,q&&(Xe(N,!1),N.strm.avail_out===0))return se}else if(N.match_available){if(q=t._tr_tally(N,0,N.window[N.strstart-1]),q&&Xe(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return se}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(q=t._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<G-1?N.strstart:G-1,Re===c?(Xe(N,!0),N.strm.avail_out===0?Le:Pe):N.last_lit&&(Xe(N,!1),N.strm.avail_out===0)?se:_e}function hr(N,Re){for(var Oe,q,ce,Ce,ft=N.window;;){if(N.lookahead<=Q){if(gt(N),N.lookahead<=Q&&Re===a)return se;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=G&&N.strstart>0&&(ce=N.strstart-1,q=ft[ce],q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce])){Ce=N.strstart+Q;do;while(q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce]&&q===ft[++ce]&&ce<Ce);N.match_length=Q-(Ce-ce),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=G?(Oe=t._tr_tally(N,1,N.match_length-G),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(Oe=t._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),Oe&&(Xe(N,!1),N.strm.avail_out===0))return se}return N.insert=0,Re===c?(Xe(N,!0),N.strm.avail_out===0?Le:Pe):N.last_lit&&(Xe(N,!1),N.strm.avail_out===0)?se:_e}function qt(N,Re){for(var Oe;;){if(N.lookahead===0&&(gt(N),N.lookahead===0)){if(Re===a)return se;break}if(N.match_length=0,Oe=t._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,Oe&&(Xe(N,!1),N.strm.avail_out===0))return se}return N.insert=0,Re===c?(Xe(N,!0),N.strm.avail_out===0?Le:Pe):N.last_lit&&(Xe(N,!1),N.strm.avail_out===0)?se:_e}function wt(N,Re,Oe,q,ce){this.good_length=N,this.max_lazy=Re,this.nice_length=Oe,this.max_chain=q,this.func=ce}var sr;sr=[new wt(0,0,0,0,It),new wt(4,4,8,4,fr),new wt(4,5,16,8,fr),new wt(4,6,32,32,fr),new wt(4,4,16,16,er),new wt(8,16,32,32,er),new wt(8,16,128,128,er),new wt(8,32,128,256,er),new wt(32,128,258,1024,er),new wt(32,258,258,4096,er)];function ke(N){N.window_size=2*N.w_size,We(N.head),N.max_lazy_match=sr[N.level].max_lazy,N.good_match=sr[N.level].good_length,N.nice_match=sr[N.level].nice_length,N.max_chain_length=sr[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=G-1,N.match_available=0,N.ins_h=0}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(M*2),this.dyn_dtree=new e.Buf16((2*k+1)*2),this.bl_tree=new e.Buf16((2*F+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(D+1),this.heap=new e.Buf16(2*P+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*P+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(N){var Re;return!N||!N.state?Se(N,h):(N.total_in=N.total_out=0,N.data_type=w,Re=N.state,Re.pending=0,Re.pending_out=0,Re.wrap<0&&(Re.wrap=-Re.wrap),Re.status=Re.wrap?U:ae,N.adler=Re.wrap===2?0:1,Re.last_flush=a,t._tr_init(Re),u)}function Te(N){var Re=ve(N);return Re===u&&ke(N.state),Re}function Fe(N,Re){return!N||!N.state||N.state.wrap!==2?h:(N.state.gzhead=Re,u)}function oe(N,Re,Oe,q,ce,Ce){if(!N)return h;var ft=1;if(Re===g&&(Re=6),q<0?(ft=0,q=-q):q>15&&(ft=2,q-=16),ce<1||ce>C||Oe!==E||q<8||q>15||Re<0||Re>9||Ce<0||Ce>y)return Se(N,h);q===8&&(q=9);var Qe=new H;return N.state=Qe,Qe.strm=N,Qe.wrap=ft,Qe.gzhead=null,Qe.w_bits=q,Qe.w_size=1<<Qe.w_bits,Qe.w_mask=Qe.w_size-1,Qe.hash_bits=ce+7,Qe.hash_size=1<<Qe.hash_bits,Qe.hash_mask=Qe.hash_size-1,Qe.hash_shift=~~((Qe.hash_bits+G-1)/G),Qe.window=new e.Buf8(Qe.w_size*2),Qe.head=new e.Buf16(Qe.hash_size),Qe.prev=new e.Buf16(Qe.w_size),Qe.lit_bufsize=1<<ce+6,Qe.pending_buf_size=Qe.lit_bufsize*4,Qe.pending_buf=new e.Buf8(Qe.pending_buf_size),Qe.d_buf=1*Qe.lit_bufsize,Qe.l_buf=(1+2)*Qe.lit_bufsize,Qe.level=Re,Qe.strategy=Ce,Qe.method=Oe,Te(N)}function Ie(N,Re){return oe(N,Re,E,T,A,b)}function W(N,Re){var Oe,q,ce,Ce;if(!N||!N.state||Re>l||Re<0)return N?Se(N,h):h;if(q=N.state,!N.output||!N.input&&N.avail_in!==0||q.status===pe&&Re!==c)return Se(N,N.avail_out===0?d:h);if(q.strm=N,Oe=q.last_flush,q.last_flush=Re,q.status===U)if(q.wrap===2)N.adler=0,Ke(q,31),Ke(q,139),Ke(q,8),q.gzhead?(Ke(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),Ke(q,q.gzhead.time&255),Ke(q,q.gzhead.time>>8&255),Ke(q,q.gzhead.time>>16&255),Ke(q,q.gzhead.time>>24&255),Ke(q,q.level===9?2:q.strategy>=v||q.level<2?4:0),Ke(q,q.gzhead.os&255),q.gzhead.extra&&q.gzhead.extra.length&&(Ke(q,q.gzhead.extra.length&255),Ke(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(N.adler=n(N.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=z):(Ke(q,0),Ke(q,0),Ke(q,0),Ke(q,0),Ke(q,0),Ke(q,q.level===9?2:q.strategy>=v||q.level<2?4:0),Ke(q,Ee),q.status=ae);else{var ft=E+(q.w_bits-8<<4)<<8,Qe=-1;q.strategy>=v||q.level<2?Qe=0:q.level<6?Qe=1:q.level===6?Qe=2:Qe=3,ft|=Qe<<6,q.strstart!==0&&(ft|=Y),ft+=31-ft%31,q.status=ae,bt(q,ft),q.strstart!==0&&(bt(q,N.adler>>>16),bt(q,N.adler&65535)),N.adler=1}if(q.status===z)if(q.gzhead.extra){for(ce=q.pending;q.gzindex<(q.gzhead.extra.length&65535)&&!(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>ce&&(N.adler=n(N.adler,q.pending_buf,q.pending-ce,ce)),Ve(N),ce=q.pending,q.pending===q.pending_buf_size));)Ke(q,q.gzhead.extra[q.gzindex]&255),q.gzindex++;q.gzhead.hcrc&&q.pending>ce&&(N.adler=n(N.adler,q.pending_buf,q.pending-ce,ce)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=j)}else q.status=j;if(q.status===j)if(q.gzhead.name){ce=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>ce&&(N.adler=n(N.adler,q.pending_buf,q.pending-ce,ce)),Ve(N),ce=q.pending,q.pending===q.pending_buf_size)){Ce=1;break}q.gzindex<q.gzhead.name.length?Ce=q.gzhead.name.charCodeAt(q.gzindex++)&255:Ce=0,Ke(q,Ce)}while(Ce!==0);q.gzhead.hcrc&&q.pending>ce&&(N.adler=n(N.adler,q.pending_buf,q.pending-ce,ce)),Ce===0&&(q.gzindex=0,q.status=V)}else q.status=V;if(q.status===V)if(q.gzhead.comment){ce=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>ce&&(N.adler=n(N.adler,q.pending_buf,q.pending-ce,ce)),Ve(N),ce=q.pending,q.pending===q.pending_buf_size)){Ce=1;break}q.gzindex<q.gzhead.comment.length?Ce=q.gzhead.comment.charCodeAt(q.gzindex++)&255:Ce=0,Ke(q,Ce)}while(Ce!==0);q.gzhead.hcrc&&q.pending>ce&&(N.adler=n(N.adler,q.pending_buf,q.pending-ce,ce)),Ce===0&&(q.status=ne)}else q.status=ne;if(q.status===ne&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&Ve(N),q.pending+2<=q.pending_buf_size&&(Ke(q,N.adler&255),Ke(q,N.adler>>8&255),N.adler=0,q.status=ae)):q.status=ae),q.pending!==0){if(Ve(N),N.avail_out===0)return q.last_flush=-1,u}else if(N.avail_in===0&&Ge(Re)<=Ge(Oe)&&Re!==c)return Se(N,d);if(q.status===pe&&N.avail_in!==0)return Se(N,d);if(N.avail_in!==0||q.lookahead!==0||Re!==a&&q.status!==pe){var st=q.strategy===v?qt(q,Re):q.strategy===m?hr(q,Re):sr[q.level].func(q,Re);if((st===Le||st===Pe)&&(q.status=pe),st===se||st===Le)return N.avail_out===0&&(q.last_flush=-1),u;if(st===_e&&(Re===o?t._tr_align(q):Re!==l&&(t._tr_stored_block(q,0,0,!1),Re===s&&(We(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),Ve(N),N.avail_out===0))return q.last_flush=-1,u}return Re!==c?u:q.wrap<=0?f:(q.wrap===2?(Ke(q,N.adler&255),Ke(q,N.adler>>8&255),Ke(q,N.adler>>16&255),Ke(q,N.adler>>24&255),Ke(q,N.total_in&255),Ke(q,N.total_in>>8&255),Ke(q,N.total_in>>16&255),Ke(q,N.total_in>>24&255)):(bt(q,N.adler>>>16),bt(q,N.adler&65535)),Ve(N),q.wrap>0&&(q.wrap=-q.wrap),q.pending!==0?u:f)}function Ue(N){var Re;return!N||!N.state?h:(Re=N.state.status,Re!==U&&Re!==z&&Re!==j&&Re!==V&&Re!==ne&&Re!==ae&&Re!==pe?Se(N,h):(N.state=null,Re===ae?Se(N,p):u))}function dt(N,Re){var Oe=Re.length,q,ce,Ce,ft,Qe,st,kt,Rn;if(!N||!N.state||(q=N.state,ft=q.wrap,ft===2||ft===1&&q.status!==U||q.lookahead))return h;for(ft===1&&(N.adler=r(N.adler,Re,Oe,0)),q.wrap=0,Oe>=q.w_size&&(ft===0&&(We(q.head),q.strstart=0,q.block_start=0,q.insert=0),Rn=new e.Buf8(q.w_size),e.arraySet(Rn,Re,Oe-q.w_size,q.w_size,0),Re=Rn,Oe=q.w_size),Qe=N.avail_in,st=N.next_in,kt=N.input,N.avail_in=Oe,N.next_in=0,N.input=Re,gt(q);q.lookahead>=G;){ce=q.strstart,Ce=q.lookahead-(G-1);do q.ins_h=(q.ins_h<<q.hash_shift^q.window[ce+G-1])&q.hash_mask,q.prev[ce&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=ce,ce++;while(--Ce);q.strstart=ce,q.lookahead=G-1,gt(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=G-1,q.match_available=0,N.next_in=st,N.input=kt,N.avail_in=Qe,q.wrap=ft,u}return po.deflateInit=Ie,po.deflateInit2=oe,po.deflateReset=Te,po.deflateResetKeep=ve,po.deflateSetHeader=Fe,po.deflate=W,po.deflateEnd=Ue,po.deflateSetDictionary=dt,po.deflateInfo="pako deflate (from Nodeca project)",po}var Ru={},GD;function xH(){if(GD)return Ru;GD=1;var e=hu(),t=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var n=new e.Buf8(256),i=0;i<256;i++)n[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;n[254]=n[254]=1,Ru.string2buf=function(o){var s,c,l,u,f,h=o.length,p=0;for(u=0;u<h;u++)c=o.charCodeAt(u),(c&64512)===55296&&u+1<h&&(l=o.charCodeAt(u+1),(l&64512)===56320&&(c=65536+(c-55296<<10)+(l-56320),u++)),p+=c<128?1:c<2048?2:c<65536?3:4;for(s=new e.Buf8(p),f=0,u=0;f<p;u++)c=o.charCodeAt(u),(c&64512)===55296&&u+1<h&&(l=o.charCodeAt(u+1),(l&64512)===56320&&(c=65536+(c-55296<<10)+(l-56320),u++)),c<128?s[f++]=c:c<2048?(s[f++]=192|c>>>6,s[f++]=128|c&63):c<65536?(s[f++]=224|c>>>12,s[f++]=128|c>>>6&63,s[f++]=128|c&63):(s[f++]=240|c>>>18,s[f++]=128|c>>>12&63,s[f++]=128|c>>>6&63,s[f++]=128|c&63);return s};function a(o,s){if(s<65534&&(o.subarray&&r||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var c="",l=0;l<s;l++)c+=String.fromCharCode(o[l]);return c}return Ru.buf2binstring=function(o){return a(o,o.length)},Ru.binstring2buf=function(o){for(var s=new e.Buf8(o.length),c=0,l=s.length;c<l;c++)s[c]=o.charCodeAt(c);return s},Ru.buf2string=function(o,s){var c,l,u,f,h=s||o.length,p=new Array(h*2);for(l=0,c=0;c<h;){if(u=o[c++],u<128){p[l++]=u;continue}if(f=n[u],f>4){p[l++]=65533,c+=f-1;continue}for(u&=f===2?31:f===3?15:7;f>1&&c<h;)u=u<<6|o[c++]&63,f--;if(f>1){p[l++]=65533;continue}u<65536?p[l++]=u:(u-=65536,p[l++]=55296|u>>10&1023,p[l++]=56320|u&1023)}return a(p,l)},Ru.utf8border=function(o,s){var c;for(s=s||o.length,s>o.length&&(s=o.length),c=s-1;c>=0&&(o[c]&192)===128;)c--;return c<0||c===0?s:c+n[o[c]]>s?c:s},Ru}var Qw,VD;function bH(){if(VD)return Qw;VD=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Qw=e,Qw}var HD;function mNe(){if(HD)return cf;HD=1;var e=gNe(),t=hu(),r=xH(),n=lO(),i=bH(),a=Object.prototype.toString,o=0,s=4,c=0,l=1,u=2,f=-1,h=0,p=8;function d(m){if(!(this instanceof d))return new d(m);this.options=t.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},m||{});var y=this.options;y.raw&&y.windowBits>0?y.windowBits=-y.windowBits:y.gzip&&y.windowBits>0&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var b=e.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(b!==c)throw new Error(n[b]);if(y.header&&e.deflateSetHeader(this.strm,y.header),y.dictionary){var w;if(typeof y.dictionary=="string"?w=r.string2buf(y.dictionary):a.call(y.dictionary)==="[object ArrayBuffer]"?w=new Uint8Array(y.dictionary):w=y.dictionary,b=e.deflateSetDictionary(this.strm,w),b!==c)throw new Error(n[b]);this._dict_set=!0}}d.prototype.push=function(m,y){var b=this.strm,w=this.options.chunkSize,E,C;if(this.ended)return!1;C=y===~~y?y:y===!0?s:o,typeof m=="string"?b.input=r.string2buf(m):a.call(m)==="[object ArrayBuffer]"?b.input=new Uint8Array(m):b.input=m,b.next_in=0,b.avail_in=b.input.length;do{if(b.avail_out===0&&(b.output=new t.Buf8(w),b.next_out=0,b.avail_out=w),E=e.deflate(b,C),E!==l&&E!==c)return this.onEnd(E),this.ended=!0,!1;(b.avail_out===0||b.avail_in===0&&(C===s||C===u))&&(this.options.to==="string"?this.onData(r.buf2binstring(t.shrinkBuf(b.output,b.next_out))):this.onData(t.shrinkBuf(b.output,b.next_out)))}while((b.avail_in>0||b.avail_out===0)&&E!==l);return C===s?(E=e.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===c):(C===u&&(this.onEnd(c),b.avail_out=0),!0)},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};function g(m,y){var b=new d(y);if(b.push(m,!0),b.err)throw b.msg||n[b.err];return b.result}function _(m,y){return y=y||{},y.raw=!0,g(m,y)}function v(m,y){return y=y||{},y.gzip=!0,g(m,y)}return cf.Deflate=d,cf.deflate=g,cf.deflateRaw=_,cf.gzip=v,cf}var ff={},Wa={},eE,XD;function _Ne(){if(XD)return eE;XD=1;var e=30,t=12;return eE=function(n,i){var a,o,s,c,l,u,f,h,p,d,g,_,v,m,y,b,w,E,C,T,A,I,O,P,k;a=n.state,o=n.next_in,P=n.input,s=o+(n.avail_in-5),c=n.next_out,k=n.output,l=c-(i-n.avail_out),u=c+(n.avail_out-257),f=a.dmax,h=a.wsize,p=a.whave,d=a.wnext,g=a.window,_=a.hold,v=a.bits,m=a.lencode,y=a.distcode,b=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;e:do{v<15&&(_+=P[o++]<<v,v+=8,_+=P[o++]<<v,v+=8),E=m[_&b];t:for(;;){if(C=E>>>24,_>>>=C,v-=C,C=E>>>16&255,C===0)k[c++]=E&65535;else if(C&16){T=E&65535,C&=15,C&&(v<C&&(_+=P[o++]<<v,v+=8),T+=_&(1<<C)-1,_>>>=C,v-=C),v<15&&(_+=P[o++]<<v,v+=8,_+=P[o++]<<v,v+=8),E=y[_&w];r:for(;;){if(C=E>>>24,_>>>=C,v-=C,C=E>>>16&255,C&16){if(A=E&65535,C&=15,v<C&&(_+=P[o++]<<v,v+=8,v<C&&(_+=P[o++]<<v,v+=8)),A+=_&(1<<C)-1,A>f){n.msg="invalid distance too far back",a.mode=e;break e}if(_>>>=C,v-=C,C=c-l,A>C){if(C=A-C,C>p&&a.sane){n.msg="invalid distance too far back",a.mode=e;break e}if(I=0,O=g,d===0){if(I+=h-C,C<T){T-=C;do k[c++]=g[I++];while(--C);I=c-A,O=k}}else if(d<C){if(I+=h+d-C,C-=d,C<T){T-=C;do k[c++]=g[I++];while(--C);if(I=0,d<T){C=d,T-=C;do k[c++]=g[I++];while(--C);I=c-A,O=k}}}else if(I+=d-C,C<T){T-=C;do k[c++]=g[I++];while(--C);I=c-A,O=k}for(;T>2;)k[c++]=O[I++],k[c++]=O[I++],k[c++]=O[I++],T-=3;T&&(k[c++]=O[I++],T>1&&(k[c++]=O[I++]))}else{I=c-A;do k[c++]=k[I++],k[c++]=k[I++],k[c++]=k[I++],T-=3;while(T>2);T&&(k[c++]=k[I++],T>1&&(k[c++]=k[I++]))}}else if(C&64){n.msg="invalid distance code",a.mode=e;break e}else{E=y[(E&65535)+(_&(1<<C)-1)];continue r}break}}else if(C&64)if(C&32){a.mode=t;break e}else{n.msg="invalid literal/length code",a.mode=e;break e}else{E=m[(E&65535)+(_&(1<<C)-1)];continue t}break}}while(o<s&&c<u);T=v>>3,o-=T,v-=T<<3,_&=(1<<v)-1,n.next_in=o,n.next_out=c,n.avail_in=o<s?5+(s-o):5-(o-s),n.avail_out=c<u?257+(u-c):257-(c-u),a.hold=_,a.bits=v},eE}var tE,zD;function yNe(){if(zD)return tE;zD=1;var e=hu(),t=15,r=852,n=592,i=0,a=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return tE=function(h,p,d,g,_,v,m,y){var b=y.bits,w=0,E=0,C=0,T=0,A=0,I=0,O=0,P=0,k=0,F=0,M,D,G,Q,te,Y=null,U=0,z,j=new e.Buf16(t+1),V=new e.Buf16(t+1),ne=null,ae=0,pe,se,_e;for(w=0;w<=t;w++)j[w]=0;for(E=0;E<g;E++)j[p[d+E]]++;for(A=b,T=t;T>=1&&j[T]===0;T--);if(A>T&&(A=T),T===0)return _[v++]=1<<24|64<<16|0,_[v++]=1<<24|64<<16|0,y.bits=1,0;for(C=1;C<T&&j[C]===0;C++);for(A<C&&(A=C),P=1,w=1;w<=t;w++)if(P<<=1,P-=j[w],P<0)return-1;if(P>0&&(h===i||T!==1))return-1;for(V[1]=0,w=1;w<t;w++)V[w+1]=V[w]+j[w];for(E=0;E<g;E++)p[d+E]!==0&&(m[V[p[d+E]]++]=E);if(h===i?(Y=ne=m,z=19):h===a?(Y=s,U-=257,ne=c,ae-=257,z=256):(Y=l,ne=u,z=-1),F=0,E=0,w=C,te=v,I=A,O=0,G=-1,k=1<<A,Q=k-1,h===a&&k>r||h===o&&k>n)return 1;for(;;){pe=w-O,m[E]<z?(se=0,_e=m[E]):m[E]>z?(se=ne[ae+m[E]],_e=Y[U+m[E]]):(se=32+64,_e=0),M=1<<w-O,D=1<<I,C=D;do D-=M,_[te+(F>>O)+D]=pe<<24|se<<16|_e|0;while(D!==0);for(M=1<<w-1;F&M;)M>>=1;if(M!==0?(F&=M-1,F+=M):F=0,E++,--j[w]===0){if(w===T)break;w=p[d+m[E]]}if(w>A&&(F&Q)!==G){for(O===0&&(O=A),te+=C,I=w-O,P=1<<I;I+O<T&&(P-=j[I+O],!(P<=0));)I++,P<<=1;if(k+=1<<I,h===a&&k>r||h===o&&k>n)return 1;G=F&Q,_[G]=A<<24|I<<16|te-v|0}}return F!==0&&(_[te+F]=w-O<<24|64<<16|0),y.bits=A,0},tE}var WD;function xNe(){if(WD)return Wa;WD=1;var e=hu(),t=_H(),r=yH(),n=_Ne(),i=yNe(),a=0,o=1,s=2,c=4,l=5,u=6,f=0,h=1,p=2,d=-2,g=-3,_=-4,v=-5,m=8,y=1,b=2,w=3,E=4,C=5,T=6,A=7,I=8,O=9,P=10,k=11,F=12,M=13,D=14,G=15,Q=16,te=17,Y=18,U=19,z=20,j=21,V=22,ne=23,ae=24,pe=25,se=26,_e=27,Le=28,Pe=29,Ee=30,Se=31,Ge=32,We=852,Ve=592,Xe=15,Ke=Xe;function bt(oe){return(oe>>>24&255)+(oe>>>8&65280)+((oe&65280)<<8)+((oe&255)<<24)}function Rt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ct(oe){var Ie;return!oe||!oe.state?d:(Ie=oe.state,oe.total_in=oe.total_out=Ie.total=0,oe.msg="",Ie.wrap&&(oe.adler=Ie.wrap&1),Ie.mode=y,Ie.last=0,Ie.havedict=0,Ie.dmax=32768,Ie.head=null,Ie.hold=0,Ie.bits=0,Ie.lencode=Ie.lendyn=new e.Buf32(We),Ie.distcode=Ie.distdyn=new e.Buf32(Ve),Ie.sane=1,Ie.back=-1,f)}function gt(oe){var Ie;return!oe||!oe.state?d:(Ie=oe.state,Ie.wsize=0,Ie.whave=0,Ie.wnext=0,ct(oe))}function It(oe,Ie){var W,Ue;return!oe||!oe.state||(Ue=oe.state,Ie<0?(W=0,Ie=-Ie):(W=(Ie>>4)+1,Ie<48&&(Ie&=15)),Ie&&(Ie<8||Ie>15))?d:(Ue.window!==null&&Ue.wbits!==Ie&&(Ue.window=null),Ue.wrap=W,Ue.wbits=Ie,gt(oe))}function fr(oe,Ie){var W,Ue;return oe?(Ue=new Rt,oe.state=Ue,Ue.window=null,W=It(oe,Ie),W!==f&&(oe.state=null),W):d}function er(oe){return fr(oe,Ke)}var hr=!0,qt,wt;function sr(oe){if(hr){var Ie;for(qt=new e.Buf32(512),wt=new e.Buf32(32),Ie=0;Ie<144;)oe.lens[Ie++]=8;for(;Ie<256;)oe.lens[Ie++]=9;for(;Ie<280;)oe.lens[Ie++]=7;for(;Ie<288;)oe.lens[Ie++]=8;for(i(o,oe.lens,0,288,qt,0,oe.work,{bits:9}),Ie=0;Ie<32;)oe.lens[Ie++]=5;i(s,oe.lens,0,32,wt,0,oe.work,{bits:5}),hr=!1}oe.lencode=qt,oe.lenbits=9,oe.distcode=wt,oe.distbits=5}function ke(oe,Ie,W,Ue){var dt,N=oe.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new e.Buf8(N.wsize)),Ue>=N.wsize?(e.arraySet(N.window,Ie,W-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(dt=N.wsize-N.wnext,dt>Ue&&(dt=Ue),e.arraySet(N.window,Ie,W-Ue,dt,N.wnext),Ue-=dt,Ue?(e.arraySet(N.window,Ie,W-Ue,Ue,0),N.wnext=Ue,N.whave=N.wsize):(N.wnext+=dt,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=dt))),0}function H(oe,Ie){var W,Ue,dt,N,Re,Oe,q,ce,Ce,ft,Qe,st,kt,Rn,ir=0,St,xr,en,Gn,el,tl,tn,Pi,Pn=new e.Buf8(4),ba,Hi,Fc=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!oe||!oe.state||!oe.output||!oe.input&&oe.avail_in!==0)return d;W=oe.state,W.mode===F&&(W.mode=M),Re=oe.next_out,dt=oe.output,q=oe.avail_out,N=oe.next_in,Ue=oe.input,Oe=oe.avail_in,ce=W.hold,Ce=W.bits,ft=Oe,Qe=q,Pi=f;e:for(;;)switch(W.mode){case y:if(W.wrap===0){W.mode=M;break}for(;Ce<16;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(W.wrap&2&&ce===35615){W.check=0,Pn[0]=ce&255,Pn[1]=ce>>>8&255,W.check=r(W.check,Pn,2,0),ce=0,Ce=0,W.mode=b;break}if(W.flags=0,W.head&&(W.head.done=!1),!(W.wrap&1)||(((ce&255)<<8)+(ce>>8))%31){oe.msg="incorrect header check",W.mode=Ee;break}if((ce&15)!==m){oe.msg="unknown compression method",W.mode=Ee;break}if(ce>>>=4,Ce-=4,tn=(ce&15)+8,W.wbits===0)W.wbits=tn;else if(tn>W.wbits){oe.msg="invalid window size",W.mode=Ee;break}W.dmax=1<<tn,oe.adler=W.check=1,W.mode=ce&512?P:F,ce=0,Ce=0;break;case b:for(;Ce<16;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(W.flags=ce,(W.flags&255)!==m){oe.msg="unknown compression method",W.mode=Ee;break}if(W.flags&57344){oe.msg="unknown header flags set",W.mode=Ee;break}W.head&&(W.head.text=ce>>8&1),W.flags&512&&(Pn[0]=ce&255,Pn[1]=ce>>>8&255,W.check=r(W.check,Pn,2,0)),ce=0,Ce=0,W.mode=w;case w:for(;Ce<32;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}W.head&&(W.head.time=ce),W.flags&512&&(Pn[0]=ce&255,Pn[1]=ce>>>8&255,Pn[2]=ce>>>16&255,Pn[3]=ce>>>24&255,W.check=r(W.check,Pn,4,0)),ce=0,Ce=0,W.mode=E;case E:for(;Ce<16;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}W.head&&(W.head.xflags=ce&255,W.head.os=ce>>8),W.flags&512&&(Pn[0]=ce&255,Pn[1]=ce>>>8&255,W.check=r(W.check,Pn,2,0)),ce=0,Ce=0,W.mode=C;case C:if(W.flags&1024){for(;Ce<16;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}W.length=ce,W.head&&(W.head.extra_len=ce),W.flags&512&&(Pn[0]=ce&255,Pn[1]=ce>>>8&255,W.check=r(W.check,Pn,2,0)),ce=0,Ce=0}else W.head&&(W.head.extra=null);W.mode=T;case T:if(W.flags&1024&&(st=W.length,st>Oe&&(st=Oe),st&&(W.head&&(tn=W.head.extra_len-W.length,W.head.extra||(W.head.extra=new Array(W.head.extra_len)),e.arraySet(W.head.extra,Ue,N,st,tn)),W.flags&512&&(W.check=r(W.check,Ue,st,N)),Oe-=st,N+=st,W.length-=st),W.length))break e;W.length=0,W.mode=A;case A:if(W.flags&2048){if(Oe===0)break e;st=0;do tn=Ue[N+st++],W.head&&tn&&W.length<65536&&(W.head.name+=String.fromCharCode(tn));while(tn&&st<Oe);if(W.flags&512&&(W.check=r(W.check,Ue,st,N)),Oe-=st,N+=st,tn)break e}else W.head&&(W.head.name=null);W.length=0,W.mode=I;case I:if(W.flags&4096){if(Oe===0)break e;st=0;do tn=Ue[N+st++],W.head&&tn&&W.length<65536&&(W.head.comment+=String.fromCharCode(tn));while(tn&&st<Oe);if(W.flags&512&&(W.check=r(W.check,Ue,st,N)),Oe-=st,N+=st,tn)break e}else W.head&&(W.head.comment=null);W.mode=O;case O:if(W.flags&512){for(;Ce<16;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(ce!==(W.check&65535)){oe.msg="header crc mismatch",W.mode=Ee;break}ce=0,Ce=0}W.head&&(W.head.hcrc=W.flags>>9&1,W.head.done=!0),oe.adler=W.check=0,W.mode=F;break;case P:for(;Ce<32;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}oe.adler=W.check=bt(ce),ce=0,Ce=0,W.mode=k;case k:if(W.havedict===0)return oe.next_out=Re,oe.avail_out=q,oe.next_in=N,oe.avail_in=Oe,W.hold=ce,W.bits=Ce,p;oe.adler=W.check=1,W.mode=F;case F:if(Ie===l||Ie===u)break e;case M:if(W.last){ce>>>=Ce&7,Ce-=Ce&7,W.mode=_e;break}for(;Ce<3;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}switch(W.last=ce&1,ce>>>=1,Ce-=1,ce&3){case 0:W.mode=D;break;case 1:if(sr(W),W.mode=z,Ie===u){ce>>>=2,Ce-=2;break e}break;case 2:W.mode=te;break;case 3:oe.msg="invalid block type",W.mode=Ee}ce>>>=2,Ce-=2;break;case D:for(ce>>>=Ce&7,Ce-=Ce&7;Ce<32;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if((ce&65535)!==(ce>>>16^65535)){oe.msg="invalid stored block lengths",W.mode=Ee;break}if(W.length=ce&65535,ce=0,Ce=0,W.mode=G,Ie===u)break e;case G:W.mode=Q;case Q:if(st=W.length,st){if(st>Oe&&(st=Oe),st>q&&(st=q),st===0)break e;e.arraySet(dt,Ue,N,st,Re),Oe-=st,N+=st,q-=st,Re+=st,W.length-=st;break}W.mode=F;break;case te:for(;Ce<14;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(W.nlen=(ce&31)+257,ce>>>=5,Ce-=5,W.ndist=(ce&31)+1,ce>>>=5,Ce-=5,W.ncode=(ce&15)+4,ce>>>=4,Ce-=4,W.nlen>286||W.ndist>30){oe.msg="too many length or distance symbols",W.mode=Ee;break}W.have=0,W.mode=Y;case Y:for(;W.have<W.ncode;){for(;Ce<3;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}W.lens[Fc[W.have++]]=ce&7,ce>>>=3,Ce-=3}for(;W.have<19;)W.lens[Fc[W.have++]]=0;if(W.lencode=W.lendyn,W.lenbits=7,ba={bits:W.lenbits},Pi=i(a,W.lens,0,19,W.lencode,0,W.work,ba),W.lenbits=ba.bits,Pi){oe.msg="invalid code lengths set",W.mode=Ee;break}W.have=0,W.mode=U;case U:for(;W.have<W.nlen+W.ndist;){for(;ir=W.lencode[ce&(1<<W.lenbits)-1],St=ir>>>24,xr=ir>>>16&255,en=ir&65535,!(St<=Ce);){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(en<16)ce>>>=St,Ce-=St,W.lens[W.have++]=en;else{if(en===16){for(Hi=St+2;Ce<Hi;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(ce>>>=St,Ce-=St,W.have===0){oe.msg="invalid bit length repeat",W.mode=Ee;break}tn=W.lens[W.have-1],st=3+(ce&3),ce>>>=2,Ce-=2}else if(en===17){for(Hi=St+3;Ce<Hi;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}ce>>>=St,Ce-=St,tn=0,st=3+(ce&7),ce>>>=3,Ce-=3}else{for(Hi=St+7;Ce<Hi;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}ce>>>=St,Ce-=St,tn=0,st=11+(ce&127),ce>>>=7,Ce-=7}if(W.have+st>W.nlen+W.ndist){oe.msg="invalid bit length repeat",W.mode=Ee;break}for(;st--;)W.lens[W.have++]=tn}}if(W.mode===Ee)break;if(W.lens[256]===0){oe.msg="invalid code -- missing end-of-block",W.mode=Ee;break}if(W.lenbits=9,ba={bits:W.lenbits},Pi=i(o,W.lens,0,W.nlen,W.lencode,0,W.work,ba),W.lenbits=ba.bits,Pi){oe.msg="invalid literal/lengths set",W.mode=Ee;break}if(W.distbits=6,W.distcode=W.distdyn,ba={bits:W.distbits},Pi=i(s,W.lens,W.nlen,W.ndist,W.distcode,0,W.work,ba),W.distbits=ba.bits,Pi){oe.msg="invalid distances set",W.mode=Ee;break}if(W.mode=z,Ie===u)break e;case z:W.mode=j;case j:if(Oe>=6&&q>=258){oe.next_out=Re,oe.avail_out=q,oe.next_in=N,oe.avail_in=Oe,W.hold=ce,W.bits=Ce,n(oe,Qe),Re=oe.next_out,dt=oe.output,q=oe.avail_out,N=oe.next_in,Ue=oe.input,Oe=oe.avail_in,ce=W.hold,Ce=W.bits,W.mode===F&&(W.back=-1);break}for(W.back=0;ir=W.lencode[ce&(1<<W.lenbits)-1],St=ir>>>24,xr=ir>>>16&255,en=ir&65535,!(St<=Ce);){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(xr&&!(xr&240)){for(Gn=St,el=xr,tl=en;ir=W.lencode[tl+((ce&(1<<Gn+el)-1)>>Gn)],St=ir>>>24,xr=ir>>>16&255,en=ir&65535,!(Gn+St<=Ce);){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}ce>>>=Gn,Ce-=Gn,W.back+=Gn}if(ce>>>=St,Ce-=St,W.back+=St,W.length=en,xr===0){W.mode=se;break}if(xr&32){W.back=-1,W.mode=F;break}if(xr&64){oe.msg="invalid literal/length code",W.mode=Ee;break}W.extra=xr&15,W.mode=V;case V:if(W.extra){for(Hi=W.extra;Ce<Hi;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}W.length+=ce&(1<<W.extra)-1,ce>>>=W.extra,Ce-=W.extra,W.back+=W.extra}W.was=W.length,W.mode=ne;case ne:for(;ir=W.distcode[ce&(1<<W.distbits)-1],St=ir>>>24,xr=ir>>>16&255,en=ir&65535,!(St<=Ce);){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(!(xr&240)){for(Gn=St,el=xr,tl=en;ir=W.distcode[tl+((ce&(1<<Gn+el)-1)>>Gn)],St=ir>>>24,xr=ir>>>16&255,en=ir&65535,!(Gn+St<=Ce);){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}ce>>>=Gn,Ce-=Gn,W.back+=Gn}if(ce>>>=St,Ce-=St,W.back+=St,xr&64){oe.msg="invalid distance code",W.mode=Ee;break}W.offset=en,W.extra=xr&15,W.mode=ae;case ae:if(W.extra){for(Hi=W.extra;Ce<Hi;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}W.offset+=ce&(1<<W.extra)-1,ce>>>=W.extra,Ce-=W.extra,W.back+=W.extra}if(W.offset>W.dmax){oe.msg="invalid distance too far back",W.mode=Ee;break}W.mode=pe;case pe:if(q===0)break e;if(st=Qe-q,W.offset>st){if(st=W.offset-st,st>W.whave&&W.sane){oe.msg="invalid distance too far back",W.mode=Ee;break}st>W.wnext?(st-=W.wnext,kt=W.wsize-st):kt=W.wnext-st,st>W.length&&(st=W.length),Rn=W.window}else Rn=dt,kt=Re-W.offset,st=W.length;st>q&&(st=q),q-=st,W.length-=st;do dt[Re++]=Rn[kt++];while(--st);W.length===0&&(W.mode=j);break;case se:if(q===0)break e;dt[Re++]=W.length,q--,W.mode=j;break;case _e:if(W.wrap){for(;Ce<32;){if(Oe===0)break e;Oe--,ce|=Ue[N++]<<Ce,Ce+=8}if(Qe-=q,oe.total_out+=Qe,W.total+=Qe,Qe&&(oe.adler=W.check=W.flags?r(W.check,dt,Qe,Re-Qe):t(W.check,dt,Qe,Re-Qe)),Qe=q,(W.flags?ce:bt(ce))!==W.check){oe.msg="incorrect data check",W.mode=Ee;break}ce=0,Ce=0}W.mode=Le;case Le:if(W.wrap&&W.flags){for(;Ce<32;){if(Oe===0)break e;Oe--,ce+=Ue[N++]<<Ce,Ce+=8}if(ce!==(W.total&4294967295)){oe.msg="incorrect length check",W.mode=Ee;break}ce=0,Ce=0}W.mode=Pe;case Pe:Pi=h;break e;case Ee:Pi=g;break e;case Se:return _;case Ge:default:return d}return oe.next_out=Re,oe.avail_out=q,oe.next_in=N,oe.avail_in=Oe,W.hold=ce,W.bits=Ce,(W.wsize||Qe!==oe.avail_out&&W.mode<Ee&&(W.mode<_e||Ie!==c))&&ke(oe,oe.output,oe.next_out,Qe-oe.avail_out),ft-=oe.avail_in,Qe-=oe.avail_out,oe.total_in+=ft,oe.total_out+=Qe,W.total+=Qe,W.wrap&&Qe&&(oe.adler=W.check=W.flags?r(W.check,dt,Qe,oe.next_out-Qe):t(W.check,dt,Qe,oe.next_out-Qe)),oe.data_type=W.bits+(W.last?64:0)+(W.mode===F?128:0)+(W.mode===z||W.mode===G?256:0),(ft===0&&Qe===0||Ie===c)&&Pi===f&&(Pi=v),Pi}function ve(oe){if(!oe||!oe.state)return d;var Ie=oe.state;return Ie.window&&(Ie.window=null),oe.state=null,f}function Te(oe,Ie){var W;return!oe||!oe.state||(W=oe.state,!(W.wrap&2))?d:(W.head=Ie,Ie.done=!1,f)}function Fe(oe,Ie){var W=Ie.length,Ue,dt,N;return!oe||!oe.state||(Ue=oe.state,Ue.wrap!==0&&Ue.mode!==k)?d:Ue.mode===k&&(dt=1,dt=t(dt,Ie,W,0),dt!==Ue.check)?g:(N=ke(oe,Ie,W,W),N?(Ue.mode=Se,_):(Ue.havedict=1,f))}return Wa.inflateReset=gt,Wa.inflateReset2=It,Wa.inflateResetKeep=ct,Wa.inflateInit=er,Wa.inflateInit2=fr,Wa.inflate=H,Wa.inflateEnd=ve,Wa.inflateGetHeader=Te,Wa.inflateSetDictionary=Fe,Wa.inflateInfo="pako inflate (from Nodeca project)",Wa}var rE,YD;function wH(){return YD||(YD=1,rE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),rE}var nE,qD;function bNe(){if(qD)return nE;qD=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return nE=e,nE}var KD;function wNe(){if(KD)return ff;KD=1;var e=xNe(),t=hu(),r=xH(),n=wH(),i=lO(),a=bH(),o=bNe(),s=Object.prototype.toString;function c(f){if(!(this instanceof c))return new c(f);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},f||{});var h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),h.windowBits>=0&&h.windowBits<16&&!(f&&f.windowBits)&&(h.windowBits+=32),h.windowBits>15&&h.windowBits<48&&(h.windowBits&15||(h.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var p=e.inflateInit2(this.strm,h.windowBits);if(p!==n.Z_OK)throw new Error(i[p]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),h.dictionary&&(typeof h.dictionary=="string"?h.dictionary=r.string2buf(h.dictionary):s.call(h.dictionary)==="[object ArrayBuffer]"&&(h.dictionary=new Uint8Array(h.dictionary)),h.raw&&(p=e.inflateSetDictionary(this.strm,h.dictionary),p!==n.Z_OK)))throw new Error(i[p])}c.prototype.push=function(f,h){var p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,_,v,m,y,b,w=!1;if(this.ended)return!1;v=h===~~h?h:h===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof f=="string"?p.input=r.binstring2buf(f):s.call(f)==="[object ArrayBuffer]"?p.input=new Uint8Array(f):p.input=f,p.next_in=0,p.avail_in=p.input.length;do{if(p.avail_out===0&&(p.output=new t.Buf8(d),p.next_out=0,p.avail_out=d),_=e.inflate(p,n.Z_NO_FLUSH),_===n.Z_NEED_DICT&&g&&(_=e.inflateSetDictionary(this.strm,g)),_===n.Z_BUF_ERROR&&w===!0&&(_=n.Z_OK,w=!1),_!==n.Z_STREAM_END&&_!==n.Z_OK)return this.onEnd(_),this.ended=!0,!1;p.next_out&&(p.avail_out===0||_===n.Z_STREAM_END||p.avail_in===0&&(v===n.Z_FINISH||v===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(m=r.utf8border(p.output,p.next_out),y=p.next_out-m,b=r.buf2string(p.output,m),p.next_out=y,p.avail_out=d-y,y&&t.arraySet(p.output,p.output,m,y,0),this.onData(b)):this.onData(t.shrinkBuf(p.output,p.next_out))),p.avail_in===0&&p.avail_out===0&&(w=!0)}while((p.avail_in>0||p.avail_out===0)&&_!==n.Z_STREAM_END);return _===n.Z_STREAM_END&&(v=n.Z_FINISH),v===n.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===n.Z_OK):(v===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),p.avail_out=0),!0)},c.prototype.onData=function(f){this.chunks.push(f)},c.prototype.onEnd=function(f){f===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg};function l(f,h){var p=new c(h);if(p.push(f,!0),p.err)throw p.msg||i[p.err];return p.result}function u(f,h){return h=h||{},h.raw=!0,l(f,h)}return ff.Inflate=c,ff.inflate=l,ff.inflateRaw=u,ff.ungzip=l,ff}var iE,ZD;function ENe(){if(ZD)return iE;ZD=1;var e=hu().assign,t=mNe(),r=wNe(),n=wH(),i={};return e(i,t,r,n),iE=i,iE}(function(e){(function(){var t={},r;e.exports=t,typeof Cf=="function"?r=ENe():r=window.pako,function(n,i){n.toRGBA8=function(a){var o=a.width,s=a.height;if(a.tabs.acTL==null)return[n.toRGBA8.decodeImage(a.data,o,s,a).buffer];var c=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var l,u=new Uint8Array(o*s*4),f=0;f<a.frames.length;f++){var h=a.frames[f],p=h.rect.x,d=h.rect.y,g=h.rect.width,_=h.rect.height,v=n.toRGBA8.decodeImage(h.data,g,_,a);if(f==0?l=v:h.blend==0?n._copyTile(v,g,_,l,o,s,p,d,0):h.blend==1&&n._copyTile(v,g,_,l,o,s,p,d,1),c.push(l.buffer),l=l.slice(0),h.dispose!=0){if(h.dispose==1)n._copyTile(u,g,_,l,o,s,p,d,0);else if(h.dispose==2){for(var m=f-1;a.frames[m].dispose==2;)m--;l=new Uint8Array(c[m]).slice(0)}}}return c},n.toRGBA8.decodeImage=function(a,o,s,c){var l=o*s,u=n.decode._getBPP(c),f=Math.ceil(o*u/8),h=new Uint8Array(l*4),p=new Uint32Array(h.buffer),d=c.ctype,g=c.depth,_=n._bin.readUshort;if(d==6){var v=l<<2;if(g==8)for(var m=0;m<v;m++)h[m]=a[m];if(g==16)for(var m=0;m<v;m++)h[m]=a[m<<1]}else if(d==2){var y=c.tabs.tRNS,b=-1,w=-1,E=-1;if(y&&(b=y[0],w=y[1],E=y[2]),g==8)for(var m=0;m<l;m++){var C=m<<2,T=m*3;h[C]=a[T],h[C+1]=a[T+1],h[C+2]=a[T+2],h[C+3]=255,b!=-1&&a[T]==b&&a[T+1]==w&&a[T+2]==E&&(h[C+3]=0)}if(g==16)for(var m=0;m<l;m++){var C=m<<2,T=m*6;h[C]=a[T],h[C+1]=a[T+2],h[C+2]=a[T+4],h[C+3]=255,b!=-1&&_(a,T)==b&&_(a,T+2)==w&&_(a,T+4)==E&&(h[C+3]=0)}}else if(d==3){var A=c.tabs.PLTE,I=c.tabs.tRNS,O=I?I.length:0;if(g==1)for(var P=0;P<s;P++)for(var k=P*f,F=P*o,m=0;m<o;m++){var C=F+m<<2,M=a[k+(m>>3)]>>7-((m&7)<<0)&1,D=3*M;h[C]=A[D],h[C+1]=A[D+1],h[C+2]=A[D+2],h[C+3]=M<O?I[M]:255}if(g==2)for(var P=0;P<s;P++)for(var k=P*f,F=P*o,m=0;m<o;m++){var C=F+m<<2,M=a[k+(m>>2)]>>6-((m&3)<<1)&3,D=3*M;h[C]=A[D],h[C+1]=A[D+1],h[C+2]=A[D+2],h[C+3]=M<O?I[M]:255}if(g==4)for(var P=0;P<s;P++)for(var k=P*f,F=P*o,m=0;m<o;m++){var C=F+m<<2,M=a[k+(m>>1)]>>4-((m&1)<<2)&15,D=3*M;h[C]=A[D],h[C+1]=A[D+1],h[C+2]=A[D+2],h[C+3]=M<O?I[M]:255}if(g==8)for(var m=0;m<l;m++){var C=m<<2,M=a[m],D=3*M;h[C]=A[D],h[C+1]=A[D+1],h[C+2]=A[D+2],h[C+3]=M<O?I[M]:255}}else if(d==4){if(g==8)for(var m=0;m<l;m++){var C=m<<2,G=m<<1,Q=a[G];h[C]=Q,h[C+1]=Q,h[C+2]=Q,h[C+3]=a[G+1]}if(g==16)for(var m=0;m<l;m++){var C=m<<2,G=m<<2,Q=a[G];h[C]=Q,h[C+1]=Q,h[C+2]=Q,h[C+3]=a[G+2]}}else if(d==0){var b=c.tabs.tRNS?c.tabs.tRNS:-1;if(g==1)for(var m=0;m<l;m++){var Q=255*(a[m>>3]>>7-(m&7)&1),te=Q==b*255?0:255;p[m]=te<<24|Q<<16|Q<<8|Q}if(g==2)for(var m=0;m<l;m++){var Q=85*(a[m>>2]>>6-((m&3)<<1)&3),te=Q==b*85?0:255;p[m]=te<<24|Q<<16|Q<<8|Q}if(g==4)for(var m=0;m<l;m++){var Q=17*(a[m>>1]>>4-((m&1)<<2)&15),te=Q==b*17?0:255;p[m]=te<<24|Q<<16|Q<<8|Q}if(g==8)for(var m=0;m<l;m++){var Q=a[m],te=Q==b?0:255;p[m]=te<<24|Q<<16|Q<<8|Q}if(g==16)for(var m=0;m<l;m++){var Q=a[m<<1],te=_(a,m<<1)==b?0:255;p[m]=te<<24|Q<<16|Q<<8|Q}}return h},n.decode=function(a){for(var o=new Uint8Array(a),s=8,c=n._bin,l=c.readUshort,u=c.readUint,f={tabs:{},frames:[]},h=new Uint8Array(o.length),p=0,d,g=0,_=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(o[v]!=_[v])throw"The input is not a PNG file!";for(;s<o.length;){var m=c.readUint(o,s);s+=4;var y=c.readASCII(o,s,4);if(s+=4,y=="IHDR")n.decode._IHDR(o,s,f);else if(y=="IDAT"){for(var v=0;v<m;v++)h[p+v]=o[s+v];p+=m}else if(y=="acTL")f.tabs[y]={num_frames:u(o,s),num_plays:u(o,s+4)},d=new Uint8Array(o.length);else if(y=="fcTL"){if(g!=0){var b=f.frames[f.frames.length-1];b.data=n.decode._decompress(f,d.slice(0,g),b.rect.width,b.rect.height),g=0}var w={x:u(o,s+12),y:u(o,s+16),width:u(o,s+4),height:u(o,s+8)},E=l(o,s+22);E=l(o,s+20)/(E==0?100:E);var C={rect:w,delay:Math.round(E*1e3),dispose:o[s+24],blend:o[s+25]};f.frames.push(C)}else if(y=="fdAT"){for(var v=0;v<m-4;v++)d[g+v]=o[s+v+4];g+=m-4}else if(y=="pHYs")f.tabs[y]=[c.readUint(o,s),c.readUint(o,s+4),o[s+8]];else if(y=="cHRM"){f.tabs[y]=[];for(var v=0;v<8;v++)f.tabs[y].push(c.readUint(o,s+v*4))}else if(y=="tEXt"){f.tabs[y]==null&&(f.tabs[y]={});var T=c.nextZero(o,s),A=c.readASCII(o,s,T-s),I=c.readASCII(o,T+1,s+m-T-1);f.tabs[y][A]=I}else if(y=="iTXt"){f.tabs[y]==null&&(f.tabs[y]={});var T=0,O=s;T=c.nextZero(o,O);var A=c.readASCII(o,O,T-O);O=T+1,o[O],o[O+1],O+=2,T=c.nextZero(o,O),c.readASCII(o,O,T-O),O=T+1,T=c.nextZero(o,O),c.readUTF8(o,O,T-O),O=T+1;var I=c.readUTF8(o,O,m-(O-s));f.tabs[y][A]=I}else if(y=="PLTE")f.tabs[y]=c.readBytes(o,s,m);else if(y=="hIST"){var P=f.tabs.PLTE.length/3;f.tabs[y]=[];for(var v=0;v<P;v++)f.tabs[y].push(l(o,s+v*2))}else if(y=="tRNS")f.ctype==3?f.tabs[y]=c.readBytes(o,s,m):f.ctype==0?f.tabs[y]=l(o,s):f.ctype==2&&(f.tabs[y]=[l(o,s),l(o,s+2),l(o,s+4)]);else if(y=="gAMA")f.tabs[y]=c.readUint(o,s)/1e5;else if(y=="sRGB")f.tabs[y]=o[s];else if(y=="bKGD")f.ctype==0||f.ctype==4?f.tabs[y]=[l(o,s)]:f.ctype==2||f.ctype==6?f.tabs[y]=[l(o,s),l(o,s+2),l(o,s+4)]:f.ctype==3&&(f.tabs[y]=o[s]);else if(y=="IEND"){if(g!=0){var b=f.frames[f.frames.length-1];b.data=n.decode._decompress(f,d.slice(0,g),b.rect.width,b.rect.height),g=0}f.data=n.decode._decompress(f,h,f.width,f.height);break}s+=m,c.readUint(o,s),s+=4}return delete f.compress,delete f.interlace,delete f.filter,f},n.decode._decompress=function(a,o,s,c){return a.compress==0&&(o=n.decode._inflate(o)),a.interlace==0?o=n.decode._filterZero(o,a,0,s,c):a.interlace==1&&(o=n.decode._readInterlace(o,a)),o},n.decode._inflate=function(a){return i.inflate(a)},n.decode._readInterlace=function(a,o){for(var s=o.width,c=o.height,l=n.decode._getBPP(o),u=l>>3,f=Math.ceil(s*l/8),h=new Uint8Array(c*f),p=0,d=[0,0,4,0,2,0,1],g=[0,4,0,2,0,1,0],_=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],m=0;m<7;){for(var y=_[m],b=v[m],w=0,E=0,C=d[m];C<c;)C+=y,E++;for(var T=g[m];T<s;)T+=b,w++;var A=Math.ceil(w*l/8);n.decode._filterZero(a,o,p,w,E);for(var I=0,O=d[m];O<c;){for(var P=g[m],k=p+I*A<<3;P<s;){if(l==1){var F=a[k>>3];F=F>>7-(k&7)&1,h[O*f+(P>>3)]|=F<<7-((P&3)<<0)}if(l==2){var F=a[k>>3];F=F>>6-(k&7)&3,h[O*f+(P>>2)]|=F<<6-((P&3)<<1)}if(l==4){var F=a[k>>3];F=F>>4-(k&7)&15,h[O*f+(P>>1)]|=F<<4-((P&1)<<2)}if(l>=8)for(var M=O*f+P*u,D=0;D<u;D++)h[M+D]=a[(k>>3)+D];k+=l,P+=b}I++,O+=y}w*E!=0&&(p+=E*(1+A)),m=m+1}return h},n.decode._getBPP=function(a){var o=[1,null,3,1,2,null,4][a.ctype];return o*a.depth},n.decode._filterZero=function(a,o,s,c,l){var u=n.decode._getBPP(o),f=Math.ceil(c*u/8),h=n.decode._paeth;u=Math.ceil(u/8);for(var p=0;p<l;p++){var d=s+p*f,g=d+p+1,_=a[g-1];if(_==0)for(var v=0;v<f;v++)a[d+v]=a[g+v];else if(_==1){for(var v=0;v<u;v++)a[d+v]=a[g+v];for(var v=u;v<f;v++)a[d+v]=a[g+v]+a[d+v-u]&255}else if(p==0){for(var v=0;v<u;v++)a[d+v]=a[g+v];if(_==2)for(var v=u;v<f;v++)a[d+v]=a[g+v]&255;if(_==3)for(var v=u;v<f;v++)a[d+v]=a[g+v]+(a[d+v-u]>>1)&255;if(_==4)for(var v=u;v<f;v++)a[d+v]=a[g+v]+h(a[d+v-u],0,0)&255}else{if(_==2)for(var v=0;v<f;v++)a[d+v]=a[g+v]+a[d+v-f]&255;if(_==3){for(var v=0;v<u;v++)a[d+v]=a[g+v]+(a[d+v-f]>>1)&255;for(var v=u;v<f;v++)a[d+v]=a[g+v]+(a[d+v-f]+a[d+v-u]>>1)&255}if(_==4){for(var v=0;v<u;v++)a[d+v]=a[g+v]+h(0,a[d+v-f],0)&255;for(var v=u;v<f;v++)a[d+v]=a[g+v]+h(a[d+v-u],a[d+v-f],a[d+v-u-f])&255}}}return a},n.decode._paeth=function(a,o,s){var c=a+o-s,l=Math.abs(c-a),u=Math.abs(c-o),f=Math.abs(c-s);return l<=u&&l<=f?a:u<=f?o:s},n.decode._IHDR=function(a,o,s){var c=n._bin;s.width=c.readUint(a,o),o+=4,s.height=c.readUint(a,o),o+=4,s.depth=a[o],o++,s.ctype=a[o],o++,s.compress=a[o],o++,s.filter=a[o],o++,s.interlace=a[o],o++},n._bin={nextZero:function(a,o){for(;a[o]!=0;)o++;return o},readUshort:function(a,o){return a[o]<<8|a[o+1]},writeUshort:function(a,o,s){a[o]=s>>8&255,a[o+1]=s&255},readUint:function(a,o){return a[o]*(256*256*256)+(a[o+1]<<16|a[o+2]<<8|a[o+3])},writeUint:function(a,o,s){a[o]=s>>24&255,a[o+1]=s>>16&255,a[o+2]=s>>8&255,a[o+3]=s&255},readASCII:function(a,o,s){for(var c="",l=0;l<s;l++)c+=String.fromCharCode(a[o+l]);return c},writeASCII:function(a,o,s){for(var c=0;c<s.length;c++)a[o+c]=s.charCodeAt(c)},readBytes:function(a,o,s){for(var c=[],l=0;l<s;l++)c.push(a[o+l]);return c},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,o,s){for(var c="",l,u=0;u<s;u++)c+="%"+n._bin.pad(a[o+u].toString(16));try{l=decodeURIComponent(c)}catch{return n._bin.readASCII(a,o,s)}return l}},n._copyTile=function(a,o,s,c,l,u,f,h,p){for(var d=Math.min(o,l),g=Math.min(s,u),_=0,v=0,m=0;m<g;m++)for(var y=0;y<d;y++)if(f>=0&&h>=0?(_=m*o+y<<2,v=(h+m)*l+f+y<<2):(_=(-h+m)*o-f+y<<2,v=m*l+y<<2),p==0)c[v]=a[_],c[v+1]=a[_+1],c[v+2]=a[_+2],c[v+3]=a[_+3];else if(p==1){var b=a[_+3]*.00392156862745098,w=a[_]*b,E=a[_+1]*b,C=a[_+2]*b,T=c[v+3]*(1/255),A=c[v]*T,I=c[v+1]*T,O=c[v+2]*T,P=1-b,k=b+T*P,F=k==0?0:1/k;c[v+3]=255*k,c[v+0]=(w+A*P)*F,c[v+1]=(E+I*P)*F,c[v+2]=(C+O*P)*F}else if(p==2){var b=a[_+3],w=a[_],E=a[_+1],C=a[_+2],T=c[v+3],A=c[v],I=c[v+1],O=c[v+2];b==T&&w==A&&E==I&&C==O?(c[v]=0,c[v+1]=0,c[v+2]=0,c[v+3]=0):(c[v]=w,c[v+1]=E,c[v+2]=C,c[v+3]=b)}else if(p==3){var b=a[_+3],w=a[_],E=a[_+1],C=a[_+2],T=c[v+3],A=c[v],I=c[v+1],O=c[v+2];if(b==T&&w==A&&E==I&&C==O)continue;if(b<220&&T>20)return!1}return!0},n.encode=function(a,o,s,c,l,u){c==null&&(c=0),u==null&&(u=!1);for(var f=new Uint8Array(a[0].byteLength*a.length+100),h=[137,80,78,71,13,10,26,10],p=0;p<8;p++)f[p]=h[p];var d=8,g=n._bin,_=n.crc.crc,v=g.writeUint,m=g.writeUshort,y=g.writeASCII,b=n.encode.compressPNG(a,o,s,c,u);v(f,d,13),d+=4,y(f,d,"IHDR"),d+=4,v(f,d,o),d+=4,v(f,d,s),d+=4,f[d]=b.depth,d++,f[d]=b.ctype,d++,f[d]=0,d++,f[d]=0,d++,f[d]=0,d++,v(f,d,_(f,d-17,17)),d+=4,v(f,d,1),d+=4,y(f,d,"sRGB"),d+=4,f[d]=1,d++,v(f,d,_(f,d-5,5)),d+=4;var w=a.length>1;if(w&&(v(f,d,8),d+=4,y(f,d,"acTL"),d+=4,v(f,d,a.length),d+=4,v(f,d,0),d+=4,v(f,d,_(f,d-12,12)),d+=4),b.ctype==3){var E=b.plte.length;v(f,d,E*3),d+=4,y(f,d,"PLTE"),d+=4;for(var p=0;p<E;p++){var C=p*3,T=b.plte[p],A=T&255,I=T>>8&255,O=T>>16&255;f[d+C+0]=A,f[d+C+1]=I,f[d+C+2]=O}if(d+=E*3,v(f,d,_(f,d-E*3-4,E*3+4)),d+=4,b.gotAlpha){v(f,d,E),d+=4,y(f,d,"tRNS"),d+=4;for(var p=0;p<E;p++)f[d+p]=b.plte[p]>>24&255;d+=E,v(f,d,_(f,d-E-4,E+4)),d+=4}}for(var P=0,k=0;k<b.frames.length;k++){var F=b.frames[k];w&&(v(f,d,26),d+=4,y(f,d,"fcTL"),d+=4,v(f,d,P++),d+=4,v(f,d,F.rect.width),d+=4,v(f,d,F.rect.height),d+=4,v(f,d,F.rect.x),d+=4,v(f,d,F.rect.y),d+=4,m(f,d,l[k]),d+=2,m(f,d,1e3),d+=2,f[d]=F.dispose,d++,f[d]=F.blend,d++,v(f,d,_(f,d-30,30)),d+=4);var M=F.cimg,E=M.length;v(f,d,E+(k==0?0:4)),d+=4;var D=d;y(f,d,k==0?"IDAT":"fdAT"),d+=4,k!=0&&(v(f,d,P++),d+=4);for(var p=0;p<E;p++)f[d+p]=M[p];d+=E,v(f,d,_(f,D,d-D)),d+=4}return v(f,d,0),d+=4,y(f,d,"IEND"),d+=4,v(f,d,_(f,d-4,4)),d+=4,f.buffer.slice(0,d)},n.encode.compressPNG=function(a,o,s,c,l){for(var u=n.encode.compress(a,o,s,c,!1,l),f=0;f<a.length;f++){var h=u.frames[f];h.rect.width;var p=h.rect.height,d=h.bpl,g=h.bpp,_=new Uint8Array(p*d+p);h.cimg=n.encode._filterZero(h.img,p,g,d,_)}return u},n.encode.compress=function(a,o,s,c,l,u){u==null&&(u=!1);for(var f=6,h=8,p=4,d=255,g=0;g<a.length;g++)for(var _=new Uint8Array(a[g]),v=_.length,m=0;m<v;m+=4)d&=_[m+3];var y=d!=255,b={},w=[];if(a.length!=0&&(b[0]=0,w.push(0),c!=0&&c--),c!=0){var E=n.quantize(a,c,l);a=E.bufs;for(var m=0;m<E.plte.length;m++){var C=E.plte[m].est.rgba;b[C]==null&&(b[C]=w.length,w.push(C))}}else for(var g=0;g<a.length;g++)for(var T=new Uint32Array(a[g]),v=T.length,m=0;m<v;m++){var C=T[m];if((m<o||C!=T[m-1]&&C!=T[m-o])&&b[C]==null&&(b[C]=w.length,w.push(C),w.length>=300))break}var A=y?l:!1,I=w.length;I<=256&&u==!1&&(I<=2?h=1:I<=4?h=2:I<=16?h=4:h=8,l&&(h=8),y=!0);for(var O=[],g=0;g<a.length;g++){var P=new Uint8Array(a[g]),k=new Uint32Array(P.buffer),F=0,M=0,D=o,G=s,Q=0;if(g!=0&&!A){for(var te=l||g==1||O[O.length-2].dispose==2?1:2,Y=0,U=1e9,z=0;z<te;z++){for(var Pe=new Uint8Array(a[g-1-z]),j=new Uint32Array(a[g-1-z]),V=o,ne=s,ae=-1,pe=-1,se=0;se<s;se++)for(var _e=0;_e<o;_e++){var m=se*o+_e;k[m]!=j[m]&&(_e<V&&(V=_e),_e>ae&&(ae=_e),se<ne&&(ne=se),se>pe&&(pe=se))}var Le=ae==-1?1:(ae-V+1)*(pe-ne+1);Le<U&&(U=Le,Y=z,ae==-1?(F=M=0,D=G=1):(F=V,M=ne,D=ae-V+1,G=pe-ne+1))}var Pe=new Uint8Array(a[g-1-Y]);Y==1&&(O[O.length-1].dispose=2);var Ee=new Uint8Array(D*G*4);new Uint32Array(Ee.buffer),n._copyTile(Pe,o,s,Ee,D,G,-F,-M,0),n._copyTile(P,o,s,Ee,D,G,-F,-M,3)?(n._copyTile(P,o,s,Ee,D,G,-F,-M,2),Q=1):(n._copyTile(P,o,s,Ee,D,G,-F,-M,0),Q=0),P=Ee,k=new Uint32Array(P.buffer)}var Se=4*D;if(I<=256&&u==!1){Se=Math.ceil(h*D/8);for(var Ee=new Uint8Array(Se*G),se=0;se<G;se++){var m=se*Se,Ge=se*D;if(h==8)for(var _e=0;_e<D;_e++)Ee[m+_e]=b[k[Ge+_e]];else if(h==4)for(var _e=0;_e<D;_e++)Ee[m+(_e>>1)]|=b[k[Ge+_e]]<<4-(_e&1)*4;else if(h==2)for(var _e=0;_e<D;_e++)Ee[m+(_e>>2)]|=b[k[Ge+_e]]<<6-(_e&3)*2;else if(h==1)for(var _e=0;_e<D;_e++)Ee[m+(_e>>3)]|=b[k[Ge+_e]]<<7-(_e&7)*1}P=Ee,f=3,p=1}else if(y==!1&&a.length==1){for(var Ee=new Uint8Array(D*G*3),We=D*G,m=0;m<We;m++){var Ve=m*3,Xe=m*4;Ee[Ve]=P[Xe],Ee[Ve+1]=P[Xe+1],Ee[Ve+2]=P[Xe+2]}P=Ee,f=2,p=3,Se=3*D}O.push({rect:{x:F,y:M,width:D,height:G},img:P,bpl:Se,bpp:p,blend:Q,dispose:A?1:0})}return{ctype:f,depth:h,plte:w,gotAlpha:y,frames:O}},n.encode._filterZero=function(a,o,s,c,l){for(var u=[],f=0;f<5;f++)if(!(o*c>5e5&&(f==2||f==3||f==4))){for(var h=0;h<o;h++)n.encode._filterLine(l,a,h,c,s,f);if(u.push(i.deflate(l)),s==1)break}for(var p,d=1e9,g=0;g<u.length;g++)u[g].length<d&&(p=g,d=u[g].length);return u[p]},n.encode._filterLine=function(a,o,s,c,l,u){var f=s*c,h=f+s,p=n.decode._paeth;if(a[h]=u,h++,u==0)for(var d=0;d<c;d++)a[h+d]=o[f+d];else if(u==1){for(var d=0;d<l;d++)a[h+d]=o[f+d];for(var d=l;d<c;d++)a[h+d]=o[f+d]-o[f+d-l]+256&255}else if(s==0){for(var d=0;d<l;d++)a[h+d]=o[f+d];if(u==2)for(var d=l;d<c;d++)a[h+d]=o[f+d];if(u==3)for(var d=l;d<c;d++)a[h+d]=o[f+d]-(o[f+d-l]>>1)+256&255;if(u==4)for(var d=l;d<c;d++)a[h+d]=o[f+d]-p(o[f+d-l],0,0)+256&255}else{if(u==2)for(var d=0;d<c;d++)a[h+d]=o[f+d]+256-o[f+d-c]&255;if(u==3){for(var d=0;d<l;d++)a[h+d]=o[f+d]+256-(o[f+d-c]>>1)&255;for(var d=l;d<c;d++)a[h+d]=o[f+d]+256-(o[f+d-c]+o[f+d-l]>>1)&255}if(u==4){for(var d=0;d<l;d++)a[h+d]=o[f+d]+256-p(0,o[f+d-c],0)&255;for(var d=l;d<c;d++)a[h+d]=o[f+d]+256-p(o[f+d-l],o[f+d-c],o[f+d-l-c])&255}}},n.crc={table:function(){for(var a=new Uint32Array(256),o=0;o<256;o++){for(var s=o,c=0;c<8;c++)s&1?s=3988292384^s>>>1:s=s>>>1;a[o]=s}return a}(),update:function(a,o,s,c){for(var l=0;l<c;l++)a=n.crc.table[(a^o[s+l])&255]^a>>>8;return a},crc:function(a,o,s){return n.crc.update(4294967295,a,o,s)^4294967295}},n.quantize=function(a,o,s){for(var c=[],l=0,u=0;u<a.length;u++)c.push(n.encode.alphaMul(new Uint8Array(a[u]),s)),l+=a[u].byteLength;for(var f=new Uint8Array(l),h=new Uint32Array(f.buffer),p=0,u=0;u<c.length;u++){for(var d=c[u],g=d.length,_=0;_<g;_++)f[p+_]=d[_];p+=g}var v={i0:0,i1:f.length,bst:null,est:null,tdst:0,left:null,right:null};v.bst=n.quantize.stats(f,v.i0,v.i1),v.est=n.quantize.estats(v.bst);for(var m=[v];m.length<o;){for(var y=0,b=0,u=0;u<m.length;u++)m[u].est.L>y&&(y=m[u].est.L,b=u);if(y<.001)break;var w=m[b],E=n.quantize.splitPixels(f,h,w.i0,w.i1,w.est.e,w.est.eMq255),C={i0:w.i0,i1:E,bst:null,est:null,tdst:0,left:null,right:null};C.bst=n.quantize.stats(f,C.i0,C.i1),C.est=n.quantize.estats(C.bst);var T={i0:E,i1:w.i1,bst:null,est:null,tdst:0,left:null,right:null};T.bst={R:[],m:[],N:w.bst.N-C.bst.N};for(var u=0;u<16;u++)T.bst.R[u]=w.bst.R[u]-C.bst.R[u];for(var u=0;u<4;u++)T.bst.m[u]=w.bst.m[u]-C.bst.m[u];T.est=n.quantize.estats(T.bst),w.left=C,w.right=T,m[b]=C,m.push(T)}m.sort(function(te,Y){return Y.bst.N-te.bst.N});for(var A=0;A<c.length;A++){for(var I=n.quantize.planeDst,O=new Uint8Array(c[A].buffer),P=new Uint32Array(c[A].buffer),k=O.length,u=0;u<k;u+=4){for(var F=O[u]*.00392156862745098,M=O[u+1]*(1/255),D=O[u+2]*(1/255),G=O[u+3]*(1/255),Q=v;Q.left;)Q=I(Q.est,F,M,D,G)<=0?Q.left:Q.right;P[u>>2]=Q.est.rgba}c[A]=P.buffer}return{bufs:c,plte:m}},n.quantize.getNearest=function(a,o,s,c,l){if(a.left==null)return a.tdst=n.quantize.dist(a.est.q,o,s,c,l),a;var u=n.quantize.planeDst(a.est,o,s,c,l),f=a.left,h=a.right;u>0&&(f=a.right,h=a.left);var p=n.quantize.getNearest(f,o,s,c,l);if(p.tdst<=u*u)return p;var d=n.quantize.getNearest(h,o,s,c,l);return d.tdst<p.tdst?d:p},n.quantize.planeDst=function(a,o,s,c,l){var u=a.e;return u[0]*o+u[1]*s+u[2]*c+u[3]*l-a.eMq},n.quantize.dist=function(a,o,s,c,l){var u=o-a[0],f=s-a[1],h=c-a[2],p=l-a[3];return u*u+f*f+h*h+p*p},n.quantize.splitPixels=function(a,o,s,c,l,u){var f=n.quantize.vecDot;for(c-=4;s<c;){for(;f(a,s,l)<=u;)s+=4;for(;f(a,c,l)>u;)c-=4;if(s>=c)break;var h=o[s>>2];o[s>>2]=o[c>>2],o[c>>2]=h,s+=4,c-=4}for(;f(a,s,l)>u;)s-=4;return s+4},n.quantize.vecDot=function(a,o,s){return a[o]*s[0]+a[o+1]*s[1]+a[o+2]*s[2]+a[o+3]*s[3]},n.quantize.stats=function(a,o,s){for(var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=[0,0,0,0],u=s-o>>2,f=o;f<s;f+=4){var h=a[f]*.00392156862745098,p=a[f+1]*(1/255),d=a[f+2]*(1/255),g=a[f+3]*(1/255);l[0]+=h,l[1]+=p,l[2]+=d,l[3]+=g,c[0]+=h*h,c[1]+=h*p,c[2]+=h*d,c[3]+=h*g,c[5]+=p*p,c[6]+=p*d,c[7]+=p*g,c[10]+=d*d,c[11]+=d*g,c[15]+=g*g}return c[4]=c[1],c[8]=c[2],c[12]=c[3],c[9]=c[6],c[13]=c[7],c[14]=c[11],{R:c,m:l,N:u}},n.quantize.estats=function(a){var o=a.R,s=a.m,c=a.N,l=s[0],u=s[1],f=s[2],h=s[3],p=c==0?0:1/c,d=[o[0]-l*l*p,o[1]-l*u*p,o[2]-l*f*p,o[3]-l*h*p,o[4]-u*l*p,o[5]-u*u*p,o[6]-u*f*p,o[7]-u*h*p,o[8]-f*l*p,o[9]-f*u*p,o[10]-f*f*p,o[11]-f*h*p,o[12]-h*l*p,o[13]-h*u*p,o[14]-h*f*p,o[15]-h*h*p],g=d,_=n.M4,v=[.5,.5,.5,.5],m=0,y=0;if(c!=0)for(var b=0;b<10&&(v=_.multVec(g,v),y=Math.sqrt(_.dot(v,v)),v=_.sml(1/y,v),!(Math.abs(y-m)<1e-9));b++)m=y;var w=[l*p,u*p,f*p,h*p],E=_.dot(_.sml(255,w),v),C=w[3]<.001?0:1/w[3];return{Cov:d,q:w,e:v,L:m,eMq255:E,eMq:_.dot(v,w),rgba:(Math.round(255*w[3])<<24|Math.round(255*w[2]*C)<<16|Math.round(255*w[1]*C)<<8|Math.round(255*w[0]*C)<<0)>>>0}},n.M4={multVec:function(a,o){return[a[0]*o[0]+a[1]*o[1]+a[2]*o[2]+a[3]*o[3],a[4]*o[0]+a[5]*o[1]+a[6]*o[2]+a[7]*o[3],a[8]*o[0]+a[9]*o[1]+a[10]*o[2]+a[11]*o[3],a[12]*o[0]+a[13]*o[1]+a[14]*o[2]+a[15]*o[3]]},dot:function(a,o){return a[0]*o[0]+a[1]*o[1]+a[2]*o[2]+a[3]*o[3]},sml:function(a,o){return[a*o[0],a*o[1],a*o[2],a*o[3]]}},n.encode.alphaMul=function(a,o){for(var s=new Uint8Array(a.length),c=a.length>>2,l=0;l<c;l++){var u=l<<2,f=a[u+3];o&&(f=f<128?0:255);var h=f*(1/255);s[u+0]=a[u+0]*h,s[u+1]=a[u+1]*h,s[u+2]=a[u+2]*h,s[u+3]=f}return s}}(t,r)})()})(mH);var SNe=mH.exports;const JD=Gi(SNe);/*!
 * @tbminiapp/pixi-apng-textures - v6.2.1-beta.9
 * Compiled Thu, 17 Mar 2022 08:24:35 UTC
 *
 * @tbminiapp/pixi-apng-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LT=function(e,t){return LT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},LT(e,t)};function CNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");LT(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var TNe=function(e){CNe(t,e);function t(r,n){n===void 0&&(n={width:1,height:1,delay:16});var i=this,a,o;typeof r=="string"?(a=r,o=new Uint8Array):(a=null,o=r),i=e.call(this,o,n)||this,i.loaded=!0;var s=n.delay;return i._delay=s||0,i.origin=a,i.buffer=o.buffer?new t0(o.buffer):null,i}return Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),t}(cu);function ANe(e,t,r){var n={textures:{},texture:null,frameCount:0,frameTextureKeys:[],frameDelay:[]};if(!t)return n;var i=t.map(function(a){return new Ot(new ur(a,Object.assign({mipmap:_a.OFF,alphaMode:na.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(a,o){var s=a.baseTexture,c=e+"-"+(o+1);ur.addToCache(s,c),Ot.addToCache(a,c),o===0&&(ur.addToCache(s,e),Ot.addToCache(a,e),n.texture=a),n.frameTextureKeys.push(c),n.frameDelay.push(s.resource.delay),n.textures[c]=a}),n.frameCount=i.length,n}Fr.setExtensionXhrType("apng",Fr.XHR_RESPONSE_TYPE.BUFFER);var QD=[97,99,84,76],INe=function(){function e(){}return e.use=async function(t,r){if(t.extension==="png"&&t.data)try{var n=t.url,i=t.name||n;async function a(o){const s=await fetch(o);if(!s.ok)throw new Error(`Failed to fetch file: ${s.status} ${s.statusText}`);const c=await s.arrayBuffer(),l=new Uint8Array(c);e.validate(o,l)&&Object.assign(t,ANe(i,e.parse(i,l),t.metadata))}await a(n)}catch(a){r(a);return}r()},e.parse=function(t,r){var n=JD.decode(r),i=n.width,a=n.height,o=n.frames,s=JD.toRGBA8(n),c=[];s.forEach(function(u,f){var h=o[f],p=h.delay;c.push({data:new Uint8Array(u),delay:p})});var l=c.map(function(u){return new TNe(u.data,{width:i,height:a,framesCount:c.length,delay:u.delay})});return l},e.validate=function(t,r){const n=r.slice(37,41);for(var i=0;i<QD.length;i++)if(n[i]!==QD[i])return!1;return!0},e}();const sc={height:1440,width:2560};function wp(e){const t=e||window.localStorage.getItem("game-screen-size"),r=(t==null?void 0:t.split("x"))??[];return(r==null?void 0:r.length)>0&&(sc.width=Number(r[0])*2,sc.height=Number(r[1])*2),sc}/*!
 * @pixi/gif - v1.1.3
 * https://github.com/pixijs/gif
 * Compiled Wed, 21 Sep 2022 20:13:39 UTC
 *
 * @pixi/gif is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */var BT=function(e,t){return BT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},BT(e,t)},MT=function(){return MT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},MT.apply(this,arguments)},lc={},EH={},Gs={};Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.loop=Gs.conditional=Gs.parse=void 0;Gs.parse=function e(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(Array.isArray(r))r.forEach(function(o){return e(t,o,n,i)});else if(typeof r=="function")r(t,n,i,e);else{var a=Object.keys(r)[0];Array.isArray(r[a])?(i[a]={},e(t,r[a],n,i[a])):i[a]=r[a](t,n,i,e)}return n};Gs.conditional=function(e,t){return function(r,n,i,a){t(r,n,i)&&a(r,e,n,i)}};Gs.loop=function(e,t){return function(r,n,i,a){for(var o=[],s=r.pos;t(r,n,i);){var c={};if(a(r,e,n,c),r.pos===s)break;s=r.pos,o.push(c)}return o}};var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.readBits=Ln.readArray=Ln.readUnsigned=Ln.readString=Ln.peekBytes=Ln.readBytes=Ln.peekByte=Ln.readByte=Ln.buildStream=void 0;Ln.buildStream=function(e){return{data:e,pos:0}};var RNe=function(){return function(e){return e.data[e.pos++]}};Ln.readByte=RNe;Ln.peekByte=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var vx=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};Ln.readBytes=vx;Ln.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}};Ln.readString=function(e){return function(t){return Array.from(vx(e)(t)).map(function(r){return String.fromCharCode(r)}).join("")}};Ln.readUnsigned=function(e){return function(t){var r=vx(2)(t);return e?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]}};Ln.readArray=function(e,t){return function(r,n,i){for(var a=typeof t=="function"?t(r,n,i):t,o=vx(e),s=new Array(a),c=0;c<a;c++)s[c]=o(r);return s}};Ln.readBits=function(e){return function(t){for(var r=function(a){return a.data[a.pos++]}(t),n=new Array(8),i=0;i<8;i++)n[7-i]=!!(r&1<<i);return Object.keys(e).reduce(function(a,o){var s=e[o];return s.length?a[o]=function(c,l,u){for(var f=0,h=0;h<u;h++)f+=c[l+h]&&Math.pow(2,u-h-1);return f}(n,s.index,s.length):a[o]=n[s.index],a},{})}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=Gs,r=Ln,n={blocks:function(u){for(var f=[],h=u.data.length,p=0,d=(0,r.readByte)()(u);d!==0&&d;d=(0,r.readByte)()(u)){if(u.pos+d>=h){var g=h-u.pos;f.push((0,r.readBytes)(g)(u)),p+=g;break}f.push((0,r.readBytes)(d)(u)),p+=d}for(var _=new Uint8Array(p),v=0,m=0;m<f.length;m++)_.set(f[m],v),v+=f[m].length;return _}},i=(0,t.conditional)({gce:[{codes:(0,r.readBytes)(2)},{byteSize:(0,r.readByte)()},{extras:(0,r.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,r.readUnsigned)(!0)},{transparentColorIndex:(0,r.readByte)()},{terminator:(0,r.readByte)()}]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===249}),a=(0,t.conditional)({image:[{code:(0,r.readByte)()},{descriptor:[{left:(0,r.readUnsigned)(!0)},{top:(0,r.readUnsigned)(!0)},{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{lct:(0,r.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,t.conditional)({lct:(0,r.readArray)(3,function(u,f,h){return Math.pow(2,h.descriptor.lct.size+1)})},function(u,f,h){return h.descriptor.lct.exists}),{data:[{minCodeSize:(0,r.readByte)()},n]}]},function(u){return(0,r.peekByte)()(u)===44}),o=(0,t.conditional)({text:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{preData:function(u,f,h){return(0,r.readBytes)(h.text.blockSize)(u)}},n]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===1}),s=(0,t.conditional)({application:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{id:function(u,f,h){return(0,r.readString)(h.blockSize)(u)}},n]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===255}),c=(0,t.conditional)({comment:[{codes:(0,r.readBytes)(2)},n]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===254}),l=[{header:[{signature:(0,r.readString)(3)},{version:(0,r.readString)(3)}]},{lsd:[{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{gct:(0,r.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,r.readByte)()},{pixelAspectRatio:(0,r.readByte)()}]},(0,t.conditional)({gct:(0,r.readArray)(3,function(u,f){return Math.pow(2,f.lsd.gct.size+1)})},function(u,f){return f.lsd.gct.exists}),{frames:(0,t.loop)([i,s,c,a,o],function(u){var f=(0,r.peekByte)()(u);return f===33||f===44})}];e.default=l}(EH);var w_={};Object.defineProperty(w_,"__esModule",{value:!0}),w_.deinterlace=void 0;w_.deinterlace=function(e,t){for(var r=new Array(e.length),n=e.length/t,i=function(u,f){var h=e.slice(f*t,(f+1)*t);r.splice.apply(r,[u*t,t].concat(h))},a=[0,4,2,1],o=[8,8,4,2],s=0,c=0;c<4;c++)for(var l=a[c];l<n;l+=o[c])i(l,s),s++;return r};var E_={};Object.defineProperty(E_,"__esModule",{value:!0}),E_.lzw=void 0;E_.lzw=function(e,t,r){var n,i,a,o,s,c,l,u,f,h,p,d,g,_,v,m,y=4096,b=r,w=new Array(r),E=new Array(y),C=new Array(y),T=new Array(4097);for(s=(i=1<<(h=e))+1,n=i+2,l=-1,a=(1<<(o=h+1))-1,u=0;u<i;u++)E[u]=0,C[u]=u;for(p=d=g=_=v=m=0,f=0;f<b;){if(_===0){if(d<o){p+=t[m]<<d,d+=8,m++;continue}if(u=p&a,p>>=o,d-=o,u>n||u==s)break;if(u==i){a=(1<<(o=h+1))-1,n=i+2,l=-1;continue}if(l==-1){T[_++]=C[u],l=u,g=u;continue}for(c=u,u==n&&(T[_++]=g,u=l);u>i;)T[_++]=C[u],u=E[u];g=255&C[u],T[_++]=g,n<y&&(E[n]=l,C[n]=g,!(++n&a)&&n<y&&(o++,a+=n)),l=c}_--,w[v++]=T[_],f++}for(f=v;f<b;f++)w[f]=0;return w},Object.defineProperty(lc,"__esModule",{value:!0});var Og,SH=lc.decompressFrames=lc.decompressFrame=CH=lc.parseGIF=void 0,PNe=(Og=EH)&&Og.__esModule?Og:{default:Og},ONe=Gs,kNe=Ln,FNe=w_,NNe=E_,CH=lc.parseGIF=function(e){var t=new Uint8Array(e);return(0,ONe.parse)((0,kNe.buildStream)(t),PNe.default)},TH=function(e,t,r){if(e.image){var n=e.image,i=n.descriptor.width*n.descriptor.height,a=(0,NNe.lzw)(n.data.minCodeSize,n.data.blocks,i);n.descriptor.lct.interlaced&&(a=(0,FNe.deinterlace)(a,n.descriptor.width));var o={pixels:a,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?o.colorTable=n.lct:o.colorTable=t,e.gce&&(o.delay=10*(e.gce.delay||10),o.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(o.transparentIndex=e.gce.transparentColorIndex)),r&&(o.patch=function(s){for(var c=s.pixels.length,l=new Uint8ClampedArray(4*c),u=0;u<c;u++){var f=4*u,h=s.pixels[u],p=s.colorTable[h]||[0,0,0];l[f]=p[0],l[f+1]=p[1],l[f+2]=p[2],l[f+3]=h!==s.transparentIndex?255:0}return l}(o)),o}};lc.decompressFrame=TH;SH=lc.decompressFrames=function(e,t){return e.frames.filter(function(r){return r.image}).map(function(r){return TH(r,e.gct,t)})};var LNe=function(e){function t(r,n){var i=this,a=Object.assign({},t.defaultOptions,n),o=a.scaleMode,s=a.width,c=a.height,l=function(h,p){var d={};for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.indexOf(g)<0&&(d[g]=h[g]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(g=Object.getOwnPropertySymbols(h);_<g.length;_++)p.indexOf(g[_])<0&&Object.prototype.propertyIsEnumerable.call(h,g[_])&&(d[g[_]]=h[g[_]])}return d}(a,["scaleMode","width","height"]),u=document.createElement("canvas"),f=u.getContext("2d");return u.width=s,u.height=c,(i=e.call(this,Ot.from(u,{scaleMode:o}))||this).duration=r[r.length-1].end,i._frames=r,i._context=f,i._playing=!1,i._currentTime=0,i._isConnectedToTicker=!1,Object.assign(i,l),i.currentFrame=0,i.autoPlay&&i.play(),i}return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=r}BT(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(t,e),t.fromBuffer=function(r,n){if(!r||r.byteLength===0)throw new Error("Invalid buffer");var i=CH(r);(function(F){for(var M,D=null,G=0,Q=F.frames;G<Q.length;G++){var te=Q[G];D=(M=te.gce)!==null&&M!==void 0?M:D,"image"in te&&!("gce"in te)&&(te.gce=D)}})(i);var a=SH(i,!0),o=[],s=document.createElement("canvas"),c=s.getContext("2d"),l=document.createElement("canvas"),u=l.getContext("2d");s.width=i.lsd.width,s.height=i.lsd.height;for(var f=0,h=1e3/Object.assign({},t.defaultOptions,n).fps,p=0;p<a.length;p++){var d=a[p],g=d.disposalType,_=g===void 0?2:g,v=d.delay,m=v===void 0?h:v,y=d.patch,b=d.dims,w=b.width,E=b.height,C=b.left,T=b.top;l.width=w,l.height=E,u.clearRect(0,0,w,E);var A=u.createImageData(w,E);A.data.set(y),u.putImageData(A,0,0),c.drawImage(l,C,T);var I=c.getImageData(0,0,s.width,s.height);_!==2&&_!==3||c.clearRect(0,0,s.width,s.height),o.push({start:f,end:f+m,imageData:I}),f+=m}s.width=s.height=0,l.width=l.height=0;var O=i.lsd,P=O.width,k=O.height;return new t(o,MT({width:P,height:k},n))},t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(_n.shared.add(this.update,this,Po.HIGH),this._isConnectedToTicker=!0),this.loop||this.currentFrame!==this._frames.length-1||(this._currentTime=0))},Object.defineProperty(t.prototype,"progress",{get:function(){return this._currentTime/this.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),t.prototype.update=function(r){var n,i;if(this._playing){var a=this.animationSpeed*r/yt.TARGET_FPMS,o=this._currentTime+a,s=o%this.duration,c=this._frames.findIndex(function(l){return l.start<=s&&l.end>s});o>=this.duration?this.loop?(this._currentTime=s,this.updateFrameIndex(c),(n=this.onLoop)===null||n===void 0||n.call(this)):(this._currentTime=this.duration,this.updateFrameIndex(this._frames.length-1),(i=this.onComplete)===null||i===void 0||i.call(this),this.stop()):(this._currentTime=s,this.updateFrameIndex(c))}},t.prototype.updateFrame=function(){if(this.dirty){var r=this._frames[this._currentFrame].imageData;this._context.putImageData(r,0,0),this._context.fillStyle="transparent",this._context.fillRect(0,0,0,1),this.texture.update(),this.dirty=!1}},t.prototype._render=function(r){this.updateFrame(),e.prototype._render.call(this,r)},t.prototype._renderCanvas=function(r){this.updateFrame(),e.prototype._renderCanvas.call(this,r)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(_n.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(_n.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._currentFrame},set:function(r){this.updateFrameIndex(r),this._currentTime=this._frames[r].start},enumerable:!1,configurable:!0}),t.prototype.updateFrameIndex=function(r){var n;if(r<0||r>=this._frames.length)throw new Error("Frame index out of range, expecting 0 to ".concat(this.totalFrames,", got ").concat(r));this._currentFrame!==r&&(this._currentFrame=r,this.dirty=!0,(n=this.onFrameChange)===null||n===void 0||n.call(this,r))},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._frames.length},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.stop(),e.prototype.destroy.call(this,!0),this._context=null,this._frames=null,this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.prototype.clone=function(){return new t(function(r,n,i){if(i||arguments.length===2)for(var a,o=0,s=n.length;o<s;o++)!a&&o in n||(a||(a=Array.prototype.slice.call(n,0,o)),a[o]=n[o]);return r.concat(a||Array.prototype.slice.call(n))}([],this._frames,!0),{autoUpdate:this._autoUpdate,loop:this.loop,autoPlay:this.autoPlay,scaleMode:this.texture.baseTexture.scaleMode,animationSpeed:this.animationSpeed,width:this._context.canvas.width,height:this._context.canvas.height,onComplete:this.onComplete,onFrameChange:this.onFrameChange,onLoop:this.onLoop})},t.defaultOptions={scaleMode:vi.LINEAR,fps:_n.shared.FPS,loop:!0,animationSpeed:1,autoPlay:!0,autoUpdate:!0,onComplete:null,onFrameChange:null,onLoop:null},t}(pa);window.PIXI=FOe;ya.registerPlugin(INe);class AH{constructor(){nt(this,"currentApp",null);nt(this,"effectsContainer");nt(this,"frameDuration",16.67);nt(this,"notUpdateBacklogEffects",!1);nt(this,"figureContainer");nt(this,"figureObjects",[]);nt(this,"popupObjects",[]);nt(this,"backgroundContainer");nt(this,"backgroundObjects",[]);nt(this,"apngTimer",{});nt(this,"stageAnimations",[]);nt(this,"assetLoader",new ya);nt(this,"loadQueue",[]);nt(this,"live2dFigureRecorder",[]);nt(this,"lockTransformTarget",[]);nt(this,"stageWidth",wp().width||sc.width);nt(this,"stageHeight",wp().height||sc.height);nt(this,"MAX_TEX_COUNT",10);const t=new H0({backgroundAlpha:0,preserveDrawingBuffer:!0});window.PIXIapp=this,window.__PIXI_APP__=t;const r=document.getElementById("pixiContianer");r&&(r.innerHTML="",r.appendChild(t.view)),t.renderer.view.style.position="absolute",t.renderer.view.style.display="block",t.renderer.view.id="pixiCanvas",t.renderer.autoResize=!0;const n=document.getElementById("root");n&&t.renderer.resize(n.clientWidth,n.clientHeight),oP&&(t.renderer.view.style.zIndex="-5"),t.stage.sortableChildren=!0,this.effectsContainer=new ii,this.effectsContainer.zIndex=3,this.figureContainer=new ii,this.figureContainer.zIndex=2,this.backgroundContainer=new ii,this.backgroundContainer.zIndex=0,t.stage.addChild(this.effectsContainer,this.figureContainer,this.backgroundContainer),this.currentApp=t;const i=()=>{this.updateFps(),setTimeout(i,1e4)};i();const a=()=>{setTimeout(a,500),this.callLoader()};a()}getFigureObjects(){return this.figureObjects}getPopupObjects(){return this.popupObjects}getAllLockedObject(){return this.lockTransformTarget}registerAnimation(t,r,n="default"){var i;t&&(this.stageAnimations.push({uuid:uf(),animationObject:t,key:r,targetKey:n,type:"common"}),this.lockStageObject(n),t.setStartState(),(i=this.currentApp)==null||i.ticker.add(t.tickerFunc))}registerPresetAnimation(t,r,n="default",i){var o;if(!t)return;const a=i.find(s=>s.target===n);if(a){const s=this.getStageObjByKey(n);if(s){const c=s.pixiContainer;Object.assign(c,a.transform)}return}this.stageAnimations.push({uuid:uf(),animationObject:t,key:r,targetKey:n,type:"preset"}),this.lockStageObject(n),t.setStartState(),(o=this.currentApp)==null||o.ticker.add(t.tickerFunc)}stopPresetAnimationOnTarget(t){const r=this.stageAnimations.find(n=>n.targetKey===t&&n.type==="preset");r&&this.removeAnimation(r.key)}removeAnimation(t){var n;const r=this.stageAnimations.findIndex(i=>i.key===t);if(r>=0){const i=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(i.animationObject.tickerFunc),i.animationObject.setEndState(),this.unlockStageObject(i.targetKey??"default"),this.stageAnimations.splice(r,1)}}removeAnimationWithSetEffects(t){var n,i,a;const r=this.stageAnimations.findIndex(o=>o.key===t);if(r>=0){const o=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(o.animationObject.tickerFunc),o.animationObject.setEndState();const s=((a=(i=o.animationObject).getEndFilterEffect)==null?void 0:a.call(i))??{};if(this.unlockStageObject(o.targetKey??"default"),o.targetKey){const c=this.getStageObjByKey(o.targetKey);if(c){const l={alpha:c.pixiContainer.alpha,scale:{x:c.pixiContainer.scale.x,y:c.pixiContainer.scale.y},position:{x:c.pixiContainer.x,y:c.pixiContainer.y},rotation:c.pixiContainer.rotation,blur:c.pixiContainer.blur,...s};let u={target:o.targetKey,transform:l};le.dispatch(Bn.updateEffect(u))}}this.stageAnimations.splice(r,1)}}performMouthSyncAnimation(t,r,n,i){var s;const a=(s=this.getStageObjByKey(t))==null?void 0:s.pixiContainer;if(!a)return;const o={open:r.mouthAnimation.open,half_open:r.mouthAnimation.halfOpen,closed:r.mouthAnimation.close};this.loadAsset(o[n],()=>{const c=this.assetLoader.resources[o[n]].texture;if(!c)return;const l=c.width,u=c.height,f=this.stageWidth/l,h=this.stageHeight/u,p=Math.min(f,h),d=new pa(c);d.scale.x=p,d.scale.y=p,d.anchor.set(.5),d.position.y=this.stageHeight/2;const g=l*p,_=u*p;a.setBaseY(this.stageHeight/2),_<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-_/2),i==="center"&&a.setBaseX(this.stageWidth/2),i==="left"&&a.setBaseX(g/2),i==="right"&&a.setBaseX(this.stageWidth-g/2),a.pivot.set(0,this.stageHeight/2),a.addChild(d)})}performBlinkAnimation(t,r,n,i){var s;const a=(s=this.getStageObjByKey(t))==null?void 0:s.pixiContainer;if(!a)return;const o={open:r.blinkAnimation.open,closed:r.blinkAnimation.close};this.loadAsset(o[n],()=>{const c=this.assetLoader.resources[o[n]].texture;if(!c)return;const l=c.width,u=c.height,f=this.stageWidth/l,h=this.stageHeight/u,p=Math.min(f,h),d=new pa(c);d.scale.x=p,d.scale.y=p,d.anchor.set(.5),d.position.y=this.stageHeight/2;const g=l*p,_=u*p;a.setBaseY(this.stageHeight/2),_<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-_/2),i==="center"&&a.setBaseX(this.stageWidth/2),i==="left"&&a.setBaseX(g/2),i==="right"&&a.setBaseX(this.stageWidth-g/2),a.pivot.set(0,this.stageHeight/2),a.addChild(d)})}async addBg(t,r,n,i){return new Promise(a=>{var p,d;const o=this.assetLoader,s=new Pg;this.backgroundObjects.findIndex(g=>g.key===t)>=0&&this.removeStageObjectByKey(t);const u=(g,_,v,m)=>{fetch(g).then(y=>y.arrayBuffer()).then(LNe.fromBuffer).then(y=>{_&&(y.transform=_.transform),v&&(y.width=Mt(v)),m&&(y.height=Mt(m)),s.addChild(y)})};this.backgroundContainer.addChild(s);const f=uf();this.backgroundObjects.push({uuid:f,key:t,pixiContainer:s,sourceUrl:r,sourceType:r.includes(".gif")?"gif":"img",sourceExt:this.getExtName(r)}),a(!0);const h=()=>{var _,v;const g=(v=(_=o.resources)==null?void 0:_[r])==null?void 0:v.texture;if(g&&this.getStageObjByUuid(f)){const m=g.width,y=g.height,b=this.stageWidth/m,w=this.stageHeight/y,E=Math.max(b,w),C=new pa(g);if(C.scale.x=E,C.scale.y=E,C.anchor.set(.5),r.includes(".gif")){u(r,C,n,i);return}C.position.y=this.stageHeight/2,s.setBaseX(this.stageWidth/2),s.setBaseY(this.stageHeight/2),s.pivot.set(0,this.stageHeight/2),s.addChild(C)}};this.cacheGC(),(d=(p=o.resources)==null?void 0:p[r])!=null&&d.texture?h():this.loadAsset(r,h)})}addFigure(t,r,n="center",i=!1){return new Promise(a=>{var h,p;const o=this.assetLoader,s=new Pg;this.figureObjects.findIndex(d=>d.key===t)>=0&&this.removeStageObjectByKey(t),this.figureContainer.addChild(s);const u=uf();this.figureObjects.push({uuid:u,key:t,pixiContainer:s,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)}),a(!0);const f=()=>{var _,v;const d=(v=(_=o.resources)==null?void 0:_[r])==null?void 0:v.texture;let g=[];if(d&&this.getStageObjByUuid(u)){const m=o.resources[r],y=[];if(i){const{frameDelay:w,textures:E,frameCount:C}=m;g=w,Object.values(E||[]).forEach(T=>{y.push(T)})}(w=>{const E=d.width,C=d.height,T=this.stageWidth/E,A=this.stageHeight/C,I=Math.min(T,A),O=i&&(w==null?void 0:w.length)>1,P=O?new MC(w):new pa(d);P.scale.x=I,P.scale.y=I,P.anchor.set(.5),P.position.y=this.stageHeight/2;const k=E*I,F=C*I;if(s.setBaseY(this.stageHeight/2),F<this.stageHeight&&s.setBaseY(this.stageHeight/2+this.stageHeight-F/2),n==="center"&&s.setBaseX(this.stageWidth/2),n==="left"&&s.setBaseX(k/2),n==="right"&&s.setBaseX(this.stageWidth-k/2),O){const M=P;let D=0,G=1;const Q=()=>{this.apngTimer[t]&&(clearTimeout(this.apngTimer[t]),this.apngTimer[t]=null),M.gotoAndStop(D),this.apngTimer[t]=setTimeout(()=>{D===w.length-1&&(G=-1),D===0&&(G=1),D+=G,Q()},g[D])};Q()}s.pivot.set(0,this.stageHeight/2),s.addChild(P)})(y)}};this.cacheGC(),(p=(h=o.resources)==null?void 0:h[r])!=null&&p.texture?f():this.loadAsset(r,f,"",i)})}addPopupImg(t,r,n="center",i=!1){return new Promise(a=>{var h,p;const o=this.assetLoader,s=new Pg;this.popupObjects.findIndex(d=>d.key===t)>=0&&this.removeStageObjectByKey(t),this.figureContainer.addChild(s);const u=uf();this.popupObjects.push({uuid:u,key:t,pixiContainer:s,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)}),a(!0);const f=()=>{var _,v;const d=(v=(_=o.resources)==null?void 0:_[r])==null?void 0:v.texture;let g=[];if(d&&this.getStageObjByUuid(u)){const m=o.resources[r],y=[];if(i){const{frameDelay:w,textures:E,frameCount:C}=m;g=w,Object.values(E||[]).forEach(T=>{y.push(T)})}(w=>{const E=d.width,C=d.height,T=this.stageWidth/E,A=this.stageHeight/C,I=Math.min(T,A),O=i&&(w==null?void 0:w.length)>1,P=O?new MC(w):new pa(d);P.scale.x=2,P.scale.y=2,P.anchor.set(.5),P.position.y=this.stageHeight/2;const k=C*I;s.setBaseY(this.stageHeight/2),k<this.stageHeight&&s.setBaseY(this.stageHeight/2+this.stageHeight-k/2),P.x=680,P.y=420;const F=wp().width===2560?2:3,M=90*F,D=n==="center"&&300*F||n==="left"&&20||n==="right"&&300*F*2-20||0;if(s.setBaseX(D),s.setBaseY(M),O){const G=P;let Q=0,te=1;const Y=()=>{this.apngTimer[t]&&(clearTimeout(this.apngTimer[t]),this.apngTimer[t]=null),G.gotoAndStop(Q),this.apngTimer[t]=setTimeout(()=>{Q===w.length-1&&(te=-1),Q===0&&(te=1),Q+=te,Y()},g[Q])};Y()}s.pivot.set(0,0),s.addChild(P)})(y)}};this.cacheGC(),(p=(h=o.resources)==null?void 0:h[r])!=null&&p.texture?f():this.loadAsset(r,f,"",i)})}addSpineFigure(t,r,n="center"){return new Promise(i=>{var h;const a=`spine-${r}`,o=this.assetLoader,s=new Pg;this.figureObjects.findIndex(p=>p.key===t)>=0&&this.removeStageObjectByKey(t),this.figureContainer.addChild(s);const u=uf();this.figureObjects.push({uuid:u,key:t,pixiContainer:s,sourceUrl:r,sourceType:"live2d",sourceExt:this.getExtName(r)}),i(!0);const f=()=>{var d,g;console.log(this.assetLoader.resources);const p=(d=this.assetLoader.resources)==null?void 0:d[a];if(p&&this.getStageObjByUuid(u)){const _=new pNe(p.spineData),v=((g=p==null?void 0:p.spineData)==null?void 0:g.y)??0,m=_.width,y=_.height,b=this.stageWidth/m,w=this.stageHeight/y;_.y=-(w*v)/2,console.log(_.state),_.state.setAnimation(0,"07",!0);const E=Math.min(b,w),C=new pa;C.addChild(_),C.scale.x=E,C.scale.y=E,C.anchor.set(.5),C.position.y=this.stageHeight/2;const T=m*E,A=y*E;s.setBaseY(this.stageHeight/2),A<this.stageHeight&&s.setBaseY(this.stageHeight/2+this.stageHeight-A/2),n==="center"&&s.setBaseX(this.stageWidth/2),n==="left"&&s.setBaseX(T/2),n==="right"&&s.setBaseX(this.stageWidth-T/2),s.pivot.set(0,this.stageHeight/2),s.addChild(C)}};this.cacheGC(),(h=o.resources)!=null&&h[r]?f():this.loadAsset(r,f,a)})}changeModelMotionByKey(t,r){var a,o;const n=this.figureObjects.find(s=>s.key===t);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(s=>s.target===t);if(n&&(i==null?void 0:i.motion)!==r){const c=n.pixiContainer.children;for(const l of c){let u=r,f=0,h=3;const p=(l==null?void 0:l.internalModel)??void 0;(o=(a=p==null?void 0:p.motionManager)==null?void 0:a.stopAllMotions)==null||o.call(a),l.motion(u,f,h)}this.updateL2dMotionByKey(t,r)}}changeModelExpressionByKey(t,r){const n=this.figureObjects.find(a=>a.key===t);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(a=>a.target===t);if(n&&(i==null?void 0:i.expression)!==r){const o=n.pixiContainer.children;for(const s of o)s.expression(r);this.updateL2dExpressionByKey(t,r)}}setModelMouthY(t,r){var o,s,c,l,u,f,h,p,d;function n(g){return g<50?0:(g-50)/50}const i=n(r),a=this.figureObjects.find(g=>g.key===t);if(a){const _=a.pixiContainer.children;for(const v of _)v!=null&&v.internalModel&&((s=(o=v==null?void 0:v.internalModel)==null?void 0:o.coreModel)!=null&&s.setParamFloat&&((u=(l=(c=v==null?void 0:v.internalModel)==null?void 0:c.coreModel)==null?void 0:l.setParamFloat)==null||u.call(l,"PARAM_MOUTH_OPEN_Y",i)),(h=(f=v==null?void 0:v.internalModel)==null?void 0:f.coreModel)!=null&&h.setParameterValueById&&((d=(p=v==null?void 0:v.internalModel)==null?void 0:p.coreModel)==null||d.setParameterValueById("ParamMouthOpenY",i)))}}getStageObjByKey(t){return[...this.figureObjects,...this.backgroundObjects,...this.popupObjects].find(r=>r.key===t)}getStageObjByUuid(t){return[...this.figureObjects,...this.backgroundObjects,...this.popupObjects].find(r=>r.uuid===t)}getAllStageObj(){return[...this.figureObjects,...this.backgroundObjects,...this.popupObjects]}removeStageObjectByKey(t){const r=this.figureObjects.findIndex(a=>a.key===t),n=this.backgroundObjects.findIndex(a=>a.key===t),i=this.popupObjects.findIndex(a=>a.key===t);if(r>=0){const a=this.figureObjects[r];for(const o of a.pixiContainer.children)o.destroy();a.pixiContainer.destroy(),this.figureContainer.removeChild(a.pixiContainer),this.figureObjects.splice(r,1)}if(n>=0){const a=this.backgroundObjects[n];for(const o of a.pixiContainer.children)o.destroy();a.pixiContainer.destroy(),this.backgroundContainer.removeChild(a.pixiContainer),this.backgroundObjects.splice(n,1)}if(i>=0){const a=this.popupObjects[i];for(const o of a.pixiContainer.children)o.destroy();a.pixiContainer.destroy(),this.figureContainer.removeChild(a.pixiContainer),this.popupObjects.splice(i,1)}}cacheGC(){OG()}updateL2dMotionByKey(t,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===t);n>=0?this.live2dFigureRecorder[n].motion=r:this.live2dFigureRecorder.push({target:t,motion:r,expression:""})}updateL2dExpressionByKey(t,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===t);n>=0?this.live2dFigureRecorder[n].expression=r:this.live2dFigureRecorder.push({target:t,motion:"",expression:r})}loadAsset(t,r,n,i){this.loadQueue.unshift({url:t,callback:r,name:n,extraInfo:{isApng:i??!1}}),this.callLoader()}callLoader(){if(!this.assetLoader.loading){const t=this.loadQueue.shift();if(t)try{this.assetLoader.resources[t.url]?(t.callback(),this.callLoader()):t.name?this.assetLoader.add(t.name,t.url).load(()=>{t.callback(),this.callLoader()}):this.assetLoader.add(t.url).load(()=>{t.callback(),this.callLoader()})}catch(r){qe.fatal("PIXI Loader ",r),t.callback(),this.callLoader()}}}updateFps(){aE==null||aE(120).then(t=>{this.frameDuration=1e3/t})}lockStageObject(t){this.lockTransformTarget.push(t)}unlockStageObject(t){const r=this.lockTransformTarget.findIndex(n=>n===t);r>=0&&this.lockTransformTarget.splice(r,1)}getExtName(t){return t.split(".").pop()??"png"}}const aE=(()=>{const e=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame].find(t=>t);if(!e){console.error("requestAnimationFrame is not supported!");return}return(t=60)=>{if(t<1)throw new Error("targetCount cannot be less than 1.");const r=Date.now();let n=0;return new Promise(i=>{(function a(){e(()=>{if(++n>=t){const o=Date.now()-r,s=n/o*1e3;return i(s)}a()})})()})}})();class BNe{constructor(){nt(this,"isAuto",!1);nt(this,"isFast",!1);nt(this,"isSyncingWithOrigine",!1);nt(this,"autoInterval",null);nt(this,"fastTimeout",null);nt(this,"autoTimeout",null);nt(this,"pixiStage",null);nt(this,"performController",new gme)}resetGamePlay(){this.performController.timeoutList=[],this.isAuto=!1,this.isFast=!1;const t=this.autoInterval;t!==null&&clearInterval(t),this.autoInterval=null;const r=this.fastTimeout;r!==null&&clearTimeout(r),this.fastTimeout=null;const n=this.autoTimeout;n!==null&&clearInterval(n),this.autoTimeout=null}resetPixiStage(){this.pixiStage=new AH}}function MNe(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}class DNe{constructor(){nt(this,"textSettle",Ld("text-settle"));nt(this,"userInteractNext",Ld("__NEXT"));nt(this,"fullscreenDbClick",Ld("fullscreen-dbclick"));nt(this,"styleUpdate",Ld("style-update"));nt(this,"screenSizeChange",Ld("screenSize-change"))}}const oE=MNe();function Ld(e){return{on:(t,r)=>{oE.on(`${e}-${r??""}`,t)},emit:(t,r)=>{oE.emit(`${e}-${r??""}`,t)},off:(t,r)=>{oE.off(`${e}-${r??""}`,t)}}}var IH={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(self,function(){return function(){var r={"./node_modules/es6-promise/dist/es6-promise.js":function(o,s,c){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(l,u){o.exports=u()})(this,function(){function l(ke){var H=typeof ke;return ke!==null&&(H==="object"||H==="function")}function u(ke){return typeof ke=="function"}var f=void 0;Array.isArray?f=Array.isArray:f=function(ke){return Object.prototype.toString.call(ke)==="[object Array]"};var h=f,p=0,d=void 0,g=void 0,_=function(H,ve){k[p]=H,k[p+1]=ve,p+=2,p===2&&(g?g(F):D())};function v(ke){g=ke}function m(ke){_=ke}var y=typeof window<"u"?window:void 0,b=y||{},w=b.MutationObserver||b.WebKitMutationObserver,E=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",C=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function T(){return function(){return process.nextTick(F)}}function A(){return typeof d<"u"?function(){d(F)}:P()}function I(){var ke=0,H=new w(F),ve=document.createTextNode("");return H.observe(ve,{characterData:!0}),function(){ve.data=ke=++ke%2}}function O(){var ke=new MessageChannel;return ke.port1.onmessage=F,function(){return ke.port2.postMessage(0)}}function P(){var ke=setTimeout;return function(){return ke(F,1)}}var k=new Array(1e3);function F(){for(var ke=0;ke<p;ke+=2){var H=k[ke],ve=k[ke+1];H(ve),k[ke]=void 0,k[ke+1]=void 0}p=0}function M(){try{var ke=Function("return this")().require("vertx");return d=ke.runOnLoop||ke.runOnContext,A()}catch{return P()}}var D=void 0;E?D=T():w?D=I():C?D=O():y===void 0?D=M():D=P();function G(ke,H){var ve=this,Te=new this.constructor(Y);Te[te]===void 0&&Rt(Te);var Fe=ve._state;if(Fe){var oe=arguments[Fe-1];_(function(){return Ve(Fe,Te,oe,ve._result)})}else Ge(ve,Te,ke,H);return Te}function Q(ke){var H=this;if(ke&&typeof ke=="object"&&ke.constructor===H)return ke;var ve=new H(Y);return Le(ve,ke),ve}var te=Math.random().toString(36).substring(2);function Y(){}var U=void 0,z=1,j=2;function V(){return new TypeError("You cannot resolve a promise with itself")}function ne(){return new TypeError("A promises callback cannot return that same promise.")}function ae(ke,H,ve,Te){try{ke.call(H,ve,Te)}catch(Fe){return Fe}}function pe(ke,H,ve){_(function(Te){var Fe=!1,oe=ae(ve,H,function(Ie){Fe||(Fe=!0,H!==Ie?Le(Te,Ie):Ee(Te,Ie))},function(Ie){Fe||(Fe=!0,Se(Te,Ie))},"Settle: "+(Te._label||" unknown promise"));!Fe&&oe&&(Fe=!0,Se(Te,oe))},ke)}function se(ke,H){H._state===z?Ee(ke,H._result):H._state===j?Se(ke,H._result):Ge(H,void 0,function(ve){return Le(ke,ve)},function(ve){return Se(ke,ve)})}function _e(ke,H,ve){H.constructor===ke.constructor&&ve===G&&H.constructor.resolve===Q?se(ke,H):ve===void 0?Ee(ke,H):u(ve)?pe(ke,H,ve):Ee(ke,H)}function Le(ke,H){if(ke===H)Se(ke,V());else if(l(H)){var ve=void 0;try{ve=H.then}catch(Te){Se(ke,Te);return}_e(ke,H,ve)}else Ee(ke,H)}function Pe(ke){ke._onerror&&ke._onerror(ke._result),We(ke)}function Ee(ke,H){ke._state===U&&(ke._result=H,ke._state=z,ke._subscribers.length!==0&&_(We,ke))}function Se(ke,H){ke._state===U&&(ke._state=j,ke._result=H,_(Pe,ke))}function Ge(ke,H,ve,Te){var Fe=ke._subscribers,oe=Fe.length;ke._onerror=null,Fe[oe]=H,Fe[oe+z]=ve,Fe[oe+j]=Te,oe===0&&ke._state&&_(We,ke)}function We(ke){var H=ke._subscribers,ve=ke._state;if(H.length!==0){for(var Te=void 0,Fe=void 0,oe=ke._result,Ie=0;Ie<H.length;Ie+=3)Te=H[Ie],Fe=H[Ie+ve],Te?Ve(ve,Te,Fe,oe):Fe(oe);ke._subscribers.length=0}}function Ve(ke,H,ve,Te){var Fe=u(ve),oe=void 0,Ie=void 0,W=!0;if(Fe){try{oe=ve(Te)}catch(Ue){W=!1,Ie=Ue}if(H===oe){Se(H,ne());return}}else oe=Te;H._state!==U||(Fe&&W?Le(H,oe):W===!1?Se(H,Ie):ke===z?Ee(H,oe):ke===j&&Se(H,oe))}function Xe(ke,H){try{H(function(Te){Le(ke,Te)},function(Te){Se(ke,Te)})}catch(ve){Se(ke,ve)}}var Ke=0;function bt(){return Ke++}function Rt(ke){ke[te]=Ke++,ke._state=void 0,ke._result=void 0,ke._subscribers=[]}function ct(){return new Error("Array Methods must be provided an Array")}var gt=function(){function ke(H,ve){this._instanceConstructor=H,this.promise=new H(Y),this.promise[te]||Rt(this.promise),h(ve)?(this.length=ve.length,this._remaining=ve.length,this._result=new Array(this.length),this.length===0?Ee(this.promise,this._result):(this.length=this.length||0,this._enumerate(ve),this._remaining===0&&Ee(this.promise,this._result))):Se(this.promise,ct())}return ke.prototype._enumerate=function(ve){for(var Te=0;this._state===U&&Te<ve.length;Te++)this._eachEntry(ve[Te],Te)},ke.prototype._eachEntry=function(ve,Te){var Fe=this._instanceConstructor,oe=Fe.resolve;if(oe===Q){var Ie=void 0,W=void 0,Ue=!1;try{Ie=ve.then}catch(N){Ue=!0,W=N}if(Ie===G&&ve._state!==U)this._settledAt(ve._state,Te,ve._result);else if(typeof Ie!="function")this._remaining--,this._result[Te]=ve;else if(Fe===wt){var dt=new Fe(Y);Ue?Se(dt,W):_e(dt,ve,Ie),this._willSettleAt(dt,Te)}else this._willSettleAt(new Fe(function(N){return N(ve)}),Te)}else this._willSettleAt(oe(ve),Te)},ke.prototype._settledAt=function(ve,Te,Fe){var oe=this.promise;oe._state===U&&(this._remaining--,ve===j?Se(oe,Fe):this._result[Te]=Fe),this._remaining===0&&Ee(oe,this._result)},ke.prototype._willSettleAt=function(ve,Te){var Fe=this;Ge(ve,void 0,function(oe){return Fe._settledAt(z,Te,oe)},function(oe){return Fe._settledAt(j,Te,oe)})},ke}();function It(ke){return new gt(this,ke).promise}function fr(ke){var H=this;return h(ke)?new H(function(ve,Te){for(var Fe=ke.length,oe=0;oe<Fe;oe++)H.resolve(ke[oe]).then(ve,Te)}):new H(function(ve,Te){return Te(new TypeError("You must pass an array to race."))})}function er(ke){var H=this,ve=new H(Y);return Se(ve,ke),ve}function hr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function qt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var wt=function(){function ke(H){this[te]=bt(),this._result=this._state=void 0,this._subscribers=[],Y!==H&&(typeof H!="function"&&hr(),this instanceof ke?Xe(this,H):qt())}return ke.prototype.catch=function(ve){return this.then(null,ve)},ke.prototype.finally=function(ve){var Te=this,Fe=Te.constructor;return u(ve)?Te.then(function(oe){return Fe.resolve(ve()).then(function(){return oe})},function(oe){return Fe.resolve(ve()).then(function(){throw oe})}):Te.then(ve,ve)},ke}();wt.prototype.then=G,wt.all=It,wt.race=fr,wt.resolve=Q,wt.reject=er,wt._setScheduler=v,wt._setAsap=m,wt._asap=_;function sr(){var ke=void 0;if(typeof c.g<"u")ke=c.g;else if(typeof self<"u")ke=self;else try{ke=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var H=ke.Promise;if(H){var ve=null;try{ve=Object.prototype.toString.call(H.resolve())}catch{}if(ve==="[object Promise]"&&!H.cast)return}ke.Promise=wt}return wt.polyfill=sr,wt.Promise=wt,wt})},"./node_modules/events/events.js":function(o){var s=typeof Reflect=="object"?Reflect:null,c=s&&typeof s.apply=="function"?s.apply:function(P,k,F){return Function.prototype.apply.call(P,k,F)},l;s&&typeof s.ownKeys=="function"?l=s.ownKeys:Object.getOwnPropertySymbols?l=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:l=function(P){return Object.getOwnPropertyNames(P)};function u(O){console&&console.warn&&console.warn(O)}var f=Number.isNaN||function(P){return P!==P};function h(){h.init.call(this)}o.exports=h,o.exports.once=T,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var p=10;function d(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(O){if(typeof O!="number"||O<0||f(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");p=O}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||f(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function g(O){return O._maxListeners===void 0?h.defaultMaxListeners:O._maxListeners}h.prototype.getMaxListeners=function(){return g(this)},h.prototype.emit=function(P){for(var k=[],F=1;F<arguments.length;F++)k.push(arguments[F]);var M=P==="error",D=this._events;if(D!==void 0)M=M&&D.error===void 0;else if(!M)return!1;if(M){var G;if(k.length>0&&(G=k[0]),G instanceof Error)throw G;var Q=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw Q.context=G,Q}var te=D[P];if(te===void 0)return!1;if(typeof te=="function")c(te,this,k);else for(var Y=te.length,U=w(te,Y),F=0;F<Y;++F)c(U[F],this,k);return!0};function _(O,P,k,F){var M,D,G;if(d(k),D=O._events,D===void 0?(D=O._events=Object.create(null),O._eventsCount=0):(D.newListener!==void 0&&(O.emit("newListener",P,k.listener?k.listener:k),D=O._events),G=D[P]),G===void 0)G=D[P]=k,++O._eventsCount;else if(typeof G=="function"?G=D[P]=F?[k,G]:[G,k]:F?G.unshift(k):G.push(k),M=g(O),M>0&&G.length>M&&!G.warned){G.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=O,Q.type=P,Q.count=G.length,u(Q)}return O}h.prototype.addListener=function(P,k){return _(this,P,k,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(P,k){return _(this,P,k,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(O,P,k){var F={fired:!1,wrapFn:void 0,target:O,type:P,listener:k},M=v.bind(F);return M.listener=k,F.wrapFn=M,M}h.prototype.once=function(P,k){return d(k),this.on(P,m(this,P,k)),this},h.prototype.prependOnceListener=function(P,k){return d(k),this.prependListener(P,m(this,P,k)),this},h.prototype.removeListener=function(P,k){var F,M,D,G,Q;if(d(k),M=this._events,M===void 0)return this;if(F=M[P],F===void 0)return this;if(F===k||F.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete M[P],M.removeListener&&this.emit("removeListener",P,F.listener||k));else if(typeof F!="function"){for(D=-1,G=F.length-1;G>=0;G--)if(F[G]===k||F[G].listener===k){Q=F[G].listener,D=G;break}if(D<0)return this;D===0?F.shift():E(F,D),F.length===1&&(M[P]=F[0]),M.removeListener!==void 0&&this.emit("removeListener",P,Q||k)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(P){var k,F,M;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[P]),this;if(arguments.length===0){var D=Object.keys(F),G;for(M=0;M<D.length;++M)G=D[M],G!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=F[P],typeof k=="function")this.removeListener(P,k);else if(k!==void 0)for(M=k.length-1;M>=0;M--)this.removeListener(P,k[M]);return this};function y(O,P,k){var F=O._events;if(F===void 0)return[];var M=F[P];return M===void 0?[]:typeof M=="function"?k?[M.listener||M]:[M]:k?C(M):w(M,M.length)}h.prototype.listeners=function(P){return y(this,P,!0)},h.prototype.rawListeners=function(P){return y(this,P,!1)},h.listenerCount=function(O,P){return typeof O.listenerCount=="function"?O.listenerCount(P):b.call(O,P)},h.prototype.listenerCount=b;function b(O){var P=this._events;if(P!==void 0){var k=P[O];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]};function w(O,P){for(var k=new Array(P),F=0;F<P;++F)k[F]=O[F];return k}function E(O,P){for(;P+1<O.length;P++)O[P]=O[P+1];O.pop()}function C(O){for(var P=new Array(O.length),k=0;k<P.length;++k)P[k]=O[k].listener||O[k];return P}function T(O,P){return new Promise(function(k,F){function M(G){O.removeListener(P,D),F(G)}function D(){typeof O.removeListener=="function"&&O.removeListener("error",M),k([].slice.call(arguments))}I(O,P,D,{once:!0}),P!=="error"&&A(O,M,{once:!0})})}function A(O,P,k){typeof O.on=="function"&&I(O,"error",P,k)}function I(O,P,k,F){if(typeof O.on=="function")F.once?O.once(P,k):O.on(P,k);else if(typeof O.addEventListener=="function")O.addEventListener(P,function M(D){F.once&&O.removeEventListener(P,M),k(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}},"./node_modules/webworkify-webpack/index.js":function(o,s,c){function l(v){var m={};function y(w){if(m[w])return m[w].exports;var E=m[w]={i:w,l:!1,exports:{}};return v[w].call(E.exports,E,E.exports,y),E.l=!0,E.exports}y.m=v,y.c=m,y.i=function(w){return w},y.d=function(w,E,C){y.o(w,E)||Object.defineProperty(w,E,{configurable:!1,enumerable:!0,get:C})},y.r=function(w){Object.defineProperty(w,"__esModule",{value:!0})},y.n=function(w){var E=w&&w.__esModule?function(){return w.default}:function(){return w};return y.d(E,"a",E),E},y.o=function(w,E){return Object.prototype.hasOwnProperty.call(w,E)},y.p="/",y.oe=function(w){throw console.error(w),w};var b=y(y.s=ENTRY_MODULE);return b.default||b}var u="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+u+").*?\\)";function h(v){return(v+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function p(v){return!isNaN(1*v)}function d(v,m,y){var b={};b[y]=[];var w=m.toString(),E=w.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!E)return b;for(var C=E[1],T=new RegExp("(\\\\n|\\W)"+h(C)+f,"g"),A;A=T.exec(w);)A[3]!=="dll-reference"&&b[y].push(A[3]);for(T=new RegExp("\\("+h(C)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+f,"g");A=T.exec(w);)v[A[2]]||(b[y].push(A[1]),v[A[2]]=c(A[1]).m),b[A[2]]=b[A[2]]||[],b[A[2]].push(A[4]);for(var I=Object.keys(b),O=0;O<I.length;O++)for(var P=0;P<b[I[O]].length;P++)p(b[I[O]][P])&&(b[I[O]][P]=1*b[I[O]][P]);return b}function g(v){var m=Object.keys(v);return m.reduce(function(y,b){return y||v[b].length>0},!1)}function _(v,m){for(var y={main:[m]},b={main:[]},w={main:{}};g(y);)for(var E=Object.keys(y),C=0;C<E.length;C++){var T=E[C],A=y[T],I=A.pop();if(w[T]=w[T]||{},!(w[T][I]||!v[T][I])){w[T][I]=!0,b[T]=b[T]||[],b[T].push(I);for(var O=d(v,v[T][I],T),P=Object.keys(O),k=0;k<P.length;k++)y[P[k]]=y[P[k]]||[],y[P[k]]=y[P[k]].concat(O[P[k]])}}return b}o.exports=function(v,m){m=m||{};var y={main:c.m},b=m.all?{main:Object.keys(y.main)}:_(y,v),w="";Object.keys(b).filter(function(I){return I!=="main"}).forEach(function(I){for(var O=0;b[I][O];)O++;b[I].push(O),y[I][O]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",w=w+"var "+I+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(O))+")({"+b[I].map(function(P){return""+JSON.stringify(P)+": "+y[I][P].toString()}).join(",")+`});
`}),w=w+"new (("+l.toString().replace("ENTRY_MODULE",JSON.stringify(v))+")({"+b.main.map(function(I){return""+JSON.stringify(I)+": "+y.main[I].toString()}).join(",")+"}))(self);";var E=new window.Blob([w],{type:"text/javascript"});if(m.bare)return E;var C=window.URL||window.webkitURL||window.mozURL||window.msURL,T=C.createObjectURL(E),A=new window.Worker(T);return A.objectURL=T,A}},"./src/config.js":function(o,s,c){c.r(s),c.d(s,{defaultConfig:function(){return l},createDefaultConfig:function(){return u}});var l={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function u(){return Object.assign({},l)}},"./src/core/features.js":function(o,s,c){c.r(s);var l=c("./src/io/io-controller.js"),u=c("./src/config.js"),f=function(){function h(){}return h.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},h.supportNetworkStreamIO=function(){var p=new l.default({},(0,u.createDefaultConfig)()),d=p.loaderType;return p.destroy(),d=="fetch-stream-loader"||d=="xhr-moz-chunked-loader"},h.getNetworkLoaderTypeName=function(){var p=new l.default({},(0,u.createDefaultConfig)()),d=p.loaderType;return p.destroy(),d},h.supportNativeMediaPlayback=function(p){h.videoElement==null&&(h.videoElement=window.document.createElement("video"));var d=h.videoElement.canPlayType(p);return d==="probably"||d=="maybe"},h.getFeatureList=function(){var p={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return p.mseFlvPlayback=h.supportMSEH264Playback(),p.networkStreamIO=h.supportNetworkStreamIO(),p.networkLoaderName=h.getNetworkLoaderTypeName(),p.mseLiveFlvPlayback=p.mseFlvPlayback&&p.networkStreamIO,p.nativeMP4H264Playback=h.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),p.nativeWebmVP8Playback=h.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),p.nativeWebmVP9Playback=h.supportNativeMediaPlayback('video/webm; codecs="vp9"'),p},h}();s.default=f},"./src/core/media-info.js":function(o,s,c){c.r(s);var l=function(){function u(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return u.prototype.isComplete=function(){var f=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,h=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&f&&h},u.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},u.prototype.getNearestKeyframe=function(f){if(this.keyframesIndex==null)return null;var h=this.keyframesIndex,p=this._search(h.times,f);return{index:p,milliseconds:h.times[p],fileposition:h.filepositions[p]}},u.prototype._search=function(f,h){var p=0,d=f.length-1,g=0,_=0,v=d;for(h<f[0]&&(p=0,_=v+1);_<=v;)if(g=_+Math.floor((v-_)/2),g===d||h>=f[g]&&h<f[g+1]){p=g;break}else f[g]<h?_=g+1:v=g-1;return p},u}();s.default=l},"./src/core/media-segment-info.js":function(o,s,c){c.r(s),c.d(s,{SampleInfo:function(){return l},MediaSegmentInfo:function(){return u},IDRSampleList:function(){return f},MediaSegmentInfoList:function(){return h}});var l=function(){function p(d,g,_,v,m){this.dts=d,this.pts=g,this.duration=_,this.originalDts=v,this.isSyncPoint=m,this.fileposition=null}return p}(),u=function(){function p(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return p.prototype.appendSyncPoint=function(d){d.isSyncPoint=!0,this.syncPoints.push(d)},p}(),f=function(){function p(){this._list=[]}return p.prototype.clear=function(){this._list=[]},p.prototype.appendArray=function(d){var g=this._list;d.length!==0&&(g.length>0&&d[0].originalDts<g[g.length-1].originalDts&&this.clear(),Array.prototype.push.apply(g,d))},p.prototype.getLastSyncPointBeforeDts=function(d){if(this._list.length==0)return null;var g=this._list,_=0,v=g.length-1,m=0,y=0,b=v;for(d<g[0].dts&&(_=0,y=b+1);y<=b;)if(m=y+Math.floor((b-y)/2),m===v||d>=g[m].dts&&d<g[m+1].dts){_=m;break}else g[m].dts<d?y=m+1:b=m-1;return this._list[_]},p}(),h=function(){function p(d){this._type=d,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(p.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),p.prototype.isEmpty=function(){return this._list.length===0},p.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},p.prototype._searchNearestSegmentBefore=function(d){var g=this._list;if(g.length===0)return-2;var _=g.length-1,v=0,m=0,y=_,b=0;if(d<g[0].originalBeginDts)return b=-1,b;for(;m<=y;)if(v=m+Math.floor((y-m)/2),v===_||d>g[v].lastSample.originalDts&&d<g[v+1].originalBeginDts){b=v;break}else g[v].originalBeginDts<d?m=v+1:y=v-1;return b},p.prototype._searchNearestSegmentAfter=function(d){return this._searchNearestSegmentBefore(d)+1},p.prototype.append=function(d){var g=this._list,_=d,v=this._lastAppendLocation,m=0;v!==-1&&v<g.length&&_.originalBeginDts>=g[v].lastSample.originalDts&&(v===g.length-1||v<g.length-1&&_.originalBeginDts<g[v+1].originalBeginDts)?m=v+1:g.length>0&&(m=this._searchNearestSegmentBefore(_.originalBeginDts)+1),this._lastAppendLocation=m,this._list.splice(m,0,_)},p.prototype.getLastSegmentBefore=function(d){var g=this._searchNearestSegmentBefore(d);return g>=0?this._list[g]:null},p.prototype.getLastSampleBefore=function(d){var g=this.getLastSegmentBefore(d);return g!=null?g.lastSample:null},p.prototype.getLastSyncPointBefore=function(d){for(var g=this._searchNearestSegmentBefore(d),_=this._list[g].syncPoints;_.length===0&&g>0;)g--,_=this._list[g].syncPoints;return _.length>0?_[_.length-1]:null},p}()},"./src/core/mse-controller.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),p=c("./src/core/mse-events.js"),d=c("./src/core/media-segment-info.js"),g=c("./src/utils/exception.js"),_=function(){function v(m){this.TAG="MSEController",this._config=m,this._emitter=new(u()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new d.IDRSampleList}return v.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},v.prototype.on=function(m,y){this._emitter.addListener(m,y)},v.prototype.off=function(m,y){this._emitter.removeListener(m,y)},v.prototype.attachMediaElement=function(m){if(this._mediaSource)throw new g.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var y=this._mediaSource=new window.MediaSource;y.addEventListener("sourceopen",this.e.onSourceOpen),y.addEventListener("sourceended",this.e.onSourceEnded),y.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=m,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),m.src=this._mediaSourceObjectURL},v.prototype.detachMediaElement=function(){if(this._mediaSource){var m=this._mediaSource;for(var y in this._sourceBuffers){var b=this._pendingSegments[y];b.splice(0,b.length),this._pendingSegments[y]=null,this._pendingRemoveRanges[y]=null,this._lastInitSegments[y]=null;var w=this._sourceBuffers[y];if(w){if(m.readyState!=="closed"){try{m.removeSourceBuffer(w)}catch(E){f.default.e(this.TAG,E.message)}w.removeEventListener("error",this.e.onSourceBufferError),w.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[y]=null,this._sourceBuffers[y]=null}}if(m.readyState==="open")try{m.endOfStream()}catch(E){f.default.e(this.TAG,E.message)}m.removeEventListener("sourceopen",this.e.onSourceOpen),m.removeEventListener("sourceended",this.e.onSourceEnded),m.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},v.prototype.appendInitSegment=function(m,y){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(m),this._pendingSegments[m.type].push(m);return}var b=m,w=""+b.container;b.codec&&b.codec.length>0&&(w+=";codecs="+b.codec);var E=!1;if(f.default.v(this.TAG,"Received Initialization Segment, mimeType: "+w),this._lastInitSegments[b.type]=b,w!==this._mimeTypes[b.type]){if(this._mimeTypes[b.type])f.default.v(this.TAG,"Notice: "+b.type+" mimeType changed, origin: "+this._mimeTypes[b.type]+", target: "+w);else{E=!0;try{var C=this._sourceBuffers[b.type]=this._mediaSource.addSourceBuffer(w);C.addEventListener("error",this.e.onSourceBufferError),C.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(T){f.default.e(this.TAG,T.message),this._emitter.emit(p.default.ERROR,{code:T.code,msg:T.message});return}}this._mimeTypes[b.type]=w}y||this._pendingSegments[b.type].push(b),E||this._sourceBuffers[b.type]&&!this._sourceBuffers[b.type].updating&&this._doAppendSegments(),h.default.safari&&b.container==="audio/mpeg"&&b.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=b.mediaDuration/1e3,this._updateMediaSourceDuration())},v.prototype.appendMediaSegment=function(m){var y=m;this._pendingSegments[y.type].push(y),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var b=this._sourceBuffers[y.type];b&&!b.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},v.prototype.seek=function(m){for(var y in this._sourceBuffers)if(this._sourceBuffers[y]){var b=this._sourceBuffers[y];if(this._mediaSource.readyState==="open")try{b.abort()}catch(I){f.default.e(this.TAG,I.message)}this._idrList.clear();var w=this._pendingSegments[y];if(w.splice(0,w.length),this._mediaSource.readyState!=="closed"){for(var E=0;E<b.buffered.length;E++){var C=b.buffered.start(E),T=b.buffered.end(E);this._pendingRemoveRanges[y].push({start:C,end:T})}if(b.updating||this._doRemoveRanges(),h.default.safari){var A=this._lastInitSegments[y];A&&(this._pendingSegments[y].push(A),b.updating||this._doAppendSegments())}}}},v.prototype.endOfStream=function(){var m=this._mediaSource,y=this._sourceBuffers;if(!m||m.readyState!=="open"){m&&m.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}y.video&&y.video.updating||y.audio&&y.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,m.endOfStream())},v.prototype.getNearestKeyframe=function(m){return this._idrList.getLastSyncPointBeforeDts(m)},v.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var m=this._mediaElement.currentTime;for(var y in this._sourceBuffers){var b=this._sourceBuffers[y];if(b){var w=b.buffered;if(w.length>=1&&m-w.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},v.prototype._doCleanupSourceBuffer=function(){var m=this._mediaElement.currentTime;for(var y in this._sourceBuffers){var b=this._sourceBuffers[y];if(b){for(var w=b.buffered,E=!1,C=0;C<w.length;C++){var T=w.start(C),A=w.end(C);if(T<=m&&m<A+3){if(m-T>=this._config.autoCleanupMaxBackwardDuration){E=!0;var I=m-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[y].push({start:T,end:I})}}else A<m&&(E=!0,this._pendingRemoveRanges[y].push({start:T,end:A}))}E&&!b.updating&&this._doRemoveRanges()}}},v.prototype._updateMediaSourceDuration=function(){var m=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(m.video&&m.video.updating||m.audio&&m.audio.updating)){var y=this._mediaSource.duration,b=this._pendingMediaDuration;b>0&&(isNaN(y)||b>y)&&(f.default.v(this.TAG,"Update MediaSource duration from "+y+" to "+b),this._mediaSource.duration=b),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},v.prototype._doRemoveRanges=function(){for(var m in this._pendingRemoveRanges)if(!(!this._sourceBuffers[m]||this._sourceBuffers[m].updating))for(var y=this._sourceBuffers[m],b=this._pendingRemoveRanges[m];b.length&&!y.updating;){var w=b.shift();y.remove(w.start,w.end)}},v.prototype._doAppendSegments=function(){var m=this._pendingSegments;for(var y in m)if(!(!this._sourceBuffers[y]||this._sourceBuffers[y].updating)&&m[y].length>0){var b=m[y].shift();if(b.timestampOffset){var w=this._sourceBuffers[y].timestampOffset,E=b.timestampOffset/1e3,C=Math.abs(w-E);C>.1&&(f.default.v(this.TAG,"Update MPEG audio timestampOffset from "+w+" to "+E),this._sourceBuffers[y].timestampOffset=E),delete b.timestampOffset}if(!b.data||b.data.byteLength===0)continue;try{this._sourceBuffers[y].appendBuffer(b.data),this._isBufferFull=!1,y==="video"&&b.hasOwnProperty("info")&&this._idrList.appendArray(b.info.syncPoints)}catch(T){this._pendingSegments[y].unshift(b),T.code===22?(this._isBufferFull||this._emitter.emit(p.default.BUFFER_FULL),this._isBufferFull=!0):(f.default.e(this.TAG,T.message),this._emitter.emit(p.default.ERROR,{code:T.code,msg:T.message}))}}},v.prototype._onSourceOpen=function(){if(f.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var m=this._pendingSourceBufferInit;m.length;){var y=m.shift();this.appendInitSegment(y,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(p.default.SOURCE_OPEN)},v.prototype._onSourceEnded=function(){f.default.v(this.TAG,"MediaSource onSourceEnded")},v.prototype._onSourceClose=function(){f.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},v.prototype._hasPendingSegments=function(){var m=this._pendingSegments;return m.video.length>0||m.audio.length>0},v.prototype._hasPendingRemoveRanges=function(){var m=this._pendingRemoveRanges;return m.video.length>0||m.audio.length>0},v.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(p.default.UPDATE_END)},v.prototype._onSourceBufferError=function(m){f.default.e(this.TAG,"SourceBuffer Error: "+m)},v}();s.default=_},"./src/core/mse-events.js":function(o,s,c){c.r(s);var l={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};s.default=l},"./src/core/transmuxer.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./node_modules/webworkify-webpack/index.js"),h=c.n(f),p=c("./src/utils/logger.js"),d=c("./src/utils/logging-control.js"),g=c("./src/core/transmuxing-controller.js"),_=c("./src/core/transmuxing-events.js"),v=c("./src/core/media-info.js"),m=function(){function y(b,w){if(this.TAG="Transmuxer",this._emitter=new(u()),w.enableWorker&&typeof Worker<"u")try{this._worker=h()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[b,w]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},d.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:d.default.getConfig()})}catch{p.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new g.default(b,w)}else this._controller=new g.default(b,w);if(this._controller){var E=this._controller;E.on(_.default.IO_ERROR,this._onIOError.bind(this)),E.on(_.default.DEMUX_ERROR,this._onDemuxError.bind(this)),E.on(_.default.INIT_SEGMENT,this._onInitSegment.bind(this)),E.on(_.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),E.on(_.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),E.on(_.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),E.on(_.default.MEDIA_INFO,this._onMediaInfo.bind(this)),E.on(_.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),E.on(_.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),E.on(_.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),E.on(_.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return y.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),d.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},y.prototype.on=function(b,w){this._emitter.addListener(b,w)},y.prototype.off=function(b,w){this._emitter.removeListener(b,w)},y.prototype.hasWorker=function(){return this._worker!=null},y.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},y.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},y.prototype.seek=function(b){this._worker?this._worker.postMessage({cmd:"seek",param:b}):this._controller.seek(b)},y.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},y.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},y.prototype._onInitSegment=function(b,w){var E=this;Promise.resolve().then(function(){E._emitter.emit(_.default.INIT_SEGMENT,b,w)})},y.prototype._onMediaSegment=function(b,w){var E=this;Promise.resolve().then(function(){E._emitter.emit(_.default.MEDIA_SEGMENT,b,w)})},y.prototype._onLoadingComplete=function(){var b=this;Promise.resolve().then(function(){b._emitter.emit(_.default.LOADING_COMPLETE)})},y.prototype._onRecoveredEarlyEof=function(){var b=this;Promise.resolve().then(function(){b._emitter.emit(_.default.RECOVERED_EARLY_EOF)})},y.prototype._onMediaInfo=function(b){var w=this;Promise.resolve().then(function(){w._emitter.emit(_.default.MEDIA_INFO,b)})},y.prototype._onMetaDataArrived=function(b){var w=this;Promise.resolve().then(function(){w._emitter.emit(_.default.METADATA_ARRIVED,b)})},y.prototype._onScriptDataArrived=function(b){var w=this;Promise.resolve().then(function(){w._emitter.emit(_.default.SCRIPTDATA_ARRIVED,b)})},y.prototype._onStatisticsInfo=function(b){var w=this;Promise.resolve().then(function(){w._emitter.emit(_.default.STATISTICS_INFO,b)})},y.prototype._onIOError=function(b,w){var E=this;Promise.resolve().then(function(){E._emitter.emit(_.default.IO_ERROR,b,w)})},y.prototype._onDemuxError=function(b,w){var E=this;Promise.resolve().then(function(){E._emitter.emit(_.default.DEMUX_ERROR,b,w)})},y.prototype._onRecommendSeekpoint=function(b){var w=this;Promise.resolve().then(function(){w._emitter.emit(_.default.RECOMMEND_SEEKPOINT,b)})},y.prototype._onLoggingConfigChanged=function(b){this._worker&&this._worker.postMessage({cmd:"logging_config",param:b})},y.prototype._onWorkerMessage=function(b){var w=b.data,E=w.data;if(w.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(w.msg){case _.default.INIT_SEGMENT:case _.default.MEDIA_SEGMENT:this._emitter.emit(w.msg,E.type,E.data);break;case _.default.LOADING_COMPLETE:case _.default.RECOVERED_EARLY_EOF:this._emitter.emit(w.msg);break;case _.default.MEDIA_INFO:Object.setPrototypeOf(E,v.default.prototype),this._emitter.emit(w.msg,E);break;case _.default.METADATA_ARRIVED:case _.default.SCRIPTDATA_ARRIVED:case _.default.STATISTICS_INFO:this._emitter.emit(w.msg,E);break;case _.default.IO_ERROR:case _.default.DEMUX_ERROR:this._emitter.emit(w.msg,E.type,E.info);break;case _.default.RECOMMEND_SEEKPOINT:this._emitter.emit(w.msg,E);break;case"logcat_callback":p.default.emitter.emit("log",E.type,E.logcat);break}},y}();s.default=m},"./src/core/transmuxing-controller.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),p=c("./src/core/media-info.js"),d=c("./src/demux/flv-demuxer.js"),g=c("./src/remux/mp4-remuxer.js"),_=c("./src/demux/demux-errors.js"),v=c("./src/io/io-controller.js"),m=c("./src/core/transmuxing-events.js"),y=function(){function b(w,E){this.TAG="TransmuxingController",this._emitter=new(u()),this._config=E,w.segments||(w.segments=[{duration:w.duration,filesize:w.filesize,url:w.url}]),typeof w.cors!="boolean"&&(w.cors=!0),typeof w.withCredentials!="boolean"&&(w.withCredentials=!1),this._mediaDataSource=w,this._currentSegmentIndex=0;var C=0;this._mediaDataSource.segments.forEach(function(T){T.timestampBase=C,C+=T.duration,T.cors=w.cors,T.withCredentials=w.withCredentials,E.referrerPolicy&&(T.referrerPolicy=E.referrerPolicy)}),!isNaN(C)&&this._mediaDataSource.duration!==C&&(this._mediaDataSource.duration=C),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return b.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},b.prototype.on=function(w,E){this._emitter.addListener(w,E)},b.prototype.off=function(w,E){this._emitter.removeListener(w,E)},b.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},b.prototype._loadSegment=function(w,E){this._currentSegmentIndex=w;var C=this._mediaDataSource.segments[w],T=this._ioctl=new v.default(C,this._config,w);T.onError=this._onIOException.bind(this),T.onSeeked=this._onIOSeeked.bind(this),T.onComplete=this._onIOComplete.bind(this),T.onRedirect=this._onIORedirect.bind(this),T.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),E?this._demuxer.bindDataSource(this._ioctl):T.onDataArrival=this._onInitChunkArrival.bind(this),T.open(E)},b.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},b.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},b.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},b.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},b.prototype.seek=function(w){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var E=this._searchSegmentIndexContains(w);if(E===this._currentSegmentIndex){var C=this._mediaInfo.segments[E];if(C==null)this._pendingSeekTime=w;else{var T=C.getNearestKeyframe(w);this._remuxer.seek(T.milliseconds),this._ioctl.seek(T.fileposition),this._pendingResolveSeekPoint=T.milliseconds}}else{var A=this._mediaInfo.segments[E];if(A==null)this._pendingSeekTime=w,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(E);else{var T=A.getNearestKeyframe(w);this._internalAbort(),this._remuxer.seek(w),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[E].timestampBase,this._loadSegment(E,T.fileposition),this._pendingResolveSeekPoint=T.milliseconds,this._reportSegmentMediaInfo(E)}}this._enableStatisticsReporter()}},b.prototype._searchSegmentIndexContains=function(w){for(var E=this._mediaDataSource.segments,C=E.length-1,T=0;T<E.length;T++)if(w<E[T].timestampBase){C=T-1;break}return C},b.prototype._onInitChunkArrival=function(w,E){var C=this,T=null,A=0;if(E>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,A=this._demuxer.parseChunks(w,E);else if((T=d.default.probe(w)).match){this._demuxer=new d.default(T,this._config),this._remuxer||(this._remuxer=new g.default(this._config));var I=this._mediaDataSource;I.duration!=null&&!isNaN(I.duration)&&(this._demuxer.overridedDuration=I.duration),typeof I.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=I.hasAudio),typeof I.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=I.hasVideo),this._demuxer.timestampBase=I.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),A=this._demuxer.parseChunks(w,E)}else T=null,f.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){C._internalAbort()}),this._emitter.emit(m.default.DEMUX_ERROR,_.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),A=0;return A},b.prototype._onMediaInfo=function(w){var E=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},w),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,p.default.prototype));var C=Object.assign({},w);Object.setPrototypeOf(C,p.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=C,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var T=E._pendingSeekTime;E._pendingSeekTime=null,E.seek(T)})},b.prototype._onMetaDataArrived=function(w){this._emitter.emit(m.default.METADATA_ARRIVED,w)},b.prototype._onScriptDataArrived=function(w){this._emitter.emit(m.default.SCRIPTDATA_ARRIVED,w)},b.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},b.prototype._onIOComplete=function(w){var E=w,C=E+1;C<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(C)):(this._remuxer.flushStashedSamples(),this._emitter.emit(m.default.LOADING_COMPLETE),this._disableStatisticsReporter())},b.prototype._onIORedirect=function(w){var E=this._ioctl.extraData;this._mediaDataSource.segments[E].redirectedURL=w},b.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(m.default.RECOVERED_EARLY_EOF)},b.prototype._onIOException=function(w,E){f.default.e(this.TAG,"IOException: type = "+w+", code = "+E.code+", msg = "+E.msg),this._emitter.emit(m.default.IO_ERROR,w,E),this._disableStatisticsReporter()},b.prototype._onDemuxException=function(w,E){f.default.e(this.TAG,"DemuxException: type = "+w+", info = "+E),this._emitter.emit(m.default.DEMUX_ERROR,w,E)},b.prototype._onRemuxerInitSegmentArrival=function(w,E){this._emitter.emit(m.default.INIT_SEGMENT,w,E)},b.prototype._onRemuxerMediaSegmentArrival=function(w,E){if(this._pendingSeekTime==null&&(this._emitter.emit(m.default.MEDIA_SEGMENT,w,E),this._pendingResolveSeekPoint!=null&&w==="video")){var C=E.info.syncPoints,T=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,h.default.safari&&C.length>0&&C[0].originalDts===T&&(T=C[0].pts),this._emitter.emit(m.default.RECOMMEND_SEEKPOINT,T)}},b.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},b.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},b.prototype._reportSegmentMediaInfo=function(w){var E=this._mediaInfo.segments[w],C=Object.assign({},E);C.duration=this._mediaInfo.duration,C.segmentCount=this._mediaInfo.segmentCount,delete C.segments,delete C.keyframesIndex,this._emitter.emit(m.default.MEDIA_INFO,C)},b.prototype._reportStatisticsInfo=function(){var w={};w.url=this._ioctl.currentURL,w.hasRedirect=this._ioctl.hasRedirect,w.hasRedirect&&(w.redirectedURL=this._ioctl.currentRedirectedURL),w.speed=this._ioctl.currentSpeed,w.loaderType=this._ioctl.loaderType,w.currentSegmentIndex=this._currentSegmentIndex,w.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(m.default.STATISTICS_INFO,w)},b}();s.default=y},"./src/core/transmuxing-events.js":function(o,s,c){c.r(s);var l={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};s.default=l},"./src/core/transmuxing-worker.js":function(o,s,c){c.r(s);var l=c("./src/utils/logging-control.js"),u=c("./src/utils/polyfill.js"),f=c("./src/core/transmuxing-controller.js"),h=c("./src/core/transmuxing-events.js"),p=function(d){var g=null,_=P.bind(this);u.default.install(),d.addEventListener("message",function(k){switch(k.data.cmd){case"init":g=new f.default(k.data.param[0],k.data.param[1]),g.on(h.default.IO_ERROR,A.bind(this)),g.on(h.default.DEMUX_ERROR,I.bind(this)),g.on(h.default.INIT_SEGMENT,v.bind(this)),g.on(h.default.MEDIA_SEGMENT,m.bind(this)),g.on(h.default.LOADING_COMPLETE,y.bind(this)),g.on(h.default.RECOVERED_EARLY_EOF,b.bind(this)),g.on(h.default.MEDIA_INFO,w.bind(this)),g.on(h.default.METADATA_ARRIVED,E.bind(this)),g.on(h.default.SCRIPTDATA_ARRIVED,C.bind(this)),g.on(h.default.STATISTICS_INFO,T.bind(this)),g.on(h.default.RECOMMEND_SEEKPOINT,O.bind(this));break;case"destroy":g&&(g.destroy(),g=null),d.postMessage({msg:"destroyed"});break;case"start":g.start();break;case"stop":g.stop();break;case"seek":g.seek(k.data.param);break;case"pause":g.pause();break;case"resume":g.resume();break;case"logging_config":{var F=k.data.param;l.default.applyConfig(F),F.enableCallback===!0?l.default.addLogListener(_):l.default.removeLogListener(_);break}}});function v(k,F){var M={msg:h.default.INIT_SEGMENT,data:{type:k,data:F}};d.postMessage(M,[F.data])}function m(k,F){var M={msg:h.default.MEDIA_SEGMENT,data:{type:k,data:F}};d.postMessage(M,[F.data])}function y(){var k={msg:h.default.LOADING_COMPLETE};d.postMessage(k)}function b(){var k={msg:h.default.RECOVERED_EARLY_EOF};d.postMessage(k)}function w(k){var F={msg:h.default.MEDIA_INFO,data:k};d.postMessage(F)}function E(k){var F={msg:h.default.METADATA_ARRIVED,data:k};d.postMessage(F)}function C(k){var F={msg:h.default.SCRIPTDATA_ARRIVED,data:k};d.postMessage(F)}function T(k){var F={msg:h.default.STATISTICS_INFO,data:k};d.postMessage(F)}function A(k,F){d.postMessage({msg:h.default.IO_ERROR,data:{type:k,info:F}})}function I(k,F){d.postMessage({msg:h.default.DEMUX_ERROR,data:{type:k,info:F}})}function O(k){d.postMessage({msg:h.default.RECOMMEND_SEEKPOINT,data:k})}function P(k,F){d.postMessage({msg:"logcat_callback",data:{type:k,logcat:F}})}};s.default=p},"./src/demux/amf-parser.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/utils/utf8-conv.js"),f=c("./src/utils/exception.js"),h=function(){var d=new ArrayBuffer(2);return new DataView(d).setInt16(0,256,!0),new Int16Array(d)[0]===256}(),p=function(){function d(){}return d.parseScriptData=function(g,_,v){var m={};try{var y=d.parseValue(g,_,v),b=d.parseValue(g,_+y.size,v-y.size);m[y.data]=b.data}catch(w){l.default.e("AMF",w.toString())}return m},d.parseObject=function(g,_,v){if(v<3)throw new f.IllegalStateException("Data not enough when parse ScriptDataObject");var m=d.parseString(g,_,v),y=d.parseValue(g,_+m.size,v-m.size),b=y.objectEnd;return{data:{name:m.data,value:y.data},size:m.size+y.size,objectEnd:b}},d.parseVariable=function(g,_,v){return d.parseObject(g,_,v)},d.parseString=function(g,_,v){if(v<2)throw new f.IllegalStateException("Data not enough when parse String");var m=new DataView(g,_,v),y=m.getUint16(0,!h),b;return y>0?b=(0,u.default)(new Uint8Array(g,_+2,y)):b="",{data:b,size:2+y}},d.parseLongString=function(g,_,v){if(v<4)throw new f.IllegalStateException("Data not enough when parse LongString");var m=new DataView(g,_,v),y=m.getUint32(0,!h),b;return y>0?b=(0,u.default)(new Uint8Array(g,_+4,y)):b="",{data:b,size:4+y}},d.parseDate=function(g,_,v){if(v<10)throw new f.IllegalStateException("Data size invalid when parse Date");var m=new DataView(g,_,v),y=m.getFloat64(0,!h),b=m.getInt16(8,!h);return y+=b*60*1e3,{data:new Date(y),size:8+2}},d.parseValue=function(g,_,v){if(v<1)throw new f.IllegalStateException("Data not enough when parse Value");var m=new DataView(g,_,v),y=1,b=m.getUint8(0),w,E=!1;try{switch(b){case 0:w=m.getFloat64(1,!h),y+=8;break;case 1:{var C=m.getUint8(1);w=!!C,y+=1;break}case 2:{var T=d.parseString(g,_+1,v-1);w=T.data,y+=T.size;break}case 3:{w={};var A=0;for((m.getUint32(v-4,!h)&16777215)===9&&(A=3);y<v-4;){var I=d.parseObject(g,_+y,v-y-A);if(I.objectEnd)break;w[I.data.name]=I.data.value,y+=I.size}if(y<=v-3){var O=m.getUint32(y-1,!h)&16777215;O===9&&(y+=3)}break}case 8:{w={},y+=4;var A=0;for((m.getUint32(v-4,!h)&16777215)===9&&(A=3);y<v-8;){var P=d.parseVariable(g,_+y,v-y-A);if(P.objectEnd)break;w[P.data.name]=P.data.value,y+=P.size}if(y<=v-3){var O=m.getUint32(y-1,!h)&16777215;O===9&&(y+=3)}break}case 9:w=void 0,y=1,E=!0;break;case 10:{w=[];var k=m.getUint32(1,!h);y+=4;for(var F=0;F<k;F++){var M=d.parseValue(g,_+y,v-y);w.push(M.data),y+=M.size}break}case 11:{var D=d.parseDate(g,_+1,v-1);w=D.data,y+=D.size;break}case 12:{var G=d.parseString(g,_+1,v-1);w=G.data,y+=G.size;break}default:y=v,l.default.w("AMF","Unsupported AMF value type "+b)}}catch(Q){l.default.e("AMF",Q.toString())}return{data:w,size:y,objectEnd:E}},d}();s.default=p},"./src/demux/demux-errors.js":function(o,s,c){c.r(s);var l={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};s.default=l},"./src/demux/exp-golomb.js":function(o,s,c){c.r(s);var l=c("./src/utils/exception.js"),u=function(){function f(h){this.TAG="ExpGolomb",this._buffer=h,this._buffer_index=0,this._total_bytes=h.byteLength,this._total_bits=h.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return f.prototype.destroy=function(){this._buffer=null},f.prototype._fillCurrentWord=function(){var h=this._total_bytes-this._buffer_index;if(h<=0)throw new l.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var p=Math.min(4,h),d=new Uint8Array(4);d.set(this._buffer.subarray(this._buffer_index,this._buffer_index+p)),this._current_word=new DataView(d.buffer).getUint32(0,!1),this._buffer_index+=p,this._current_word_bits_left=p*8},f.prototype.readBits=function(h){if(h>32)throw new l.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(h<=this._current_word_bits_left){var p=this._current_word>>>32-h;return this._current_word<<=h,this._current_word_bits_left-=h,p}var d=this._current_word_bits_left?this._current_word:0;d=d>>>32-this._current_word_bits_left;var g=h-this._current_word_bits_left;this._fillCurrentWord();var _=Math.min(g,this._current_word_bits_left),v=this._current_word>>>32-_;return this._current_word<<=_,this._current_word_bits_left-=_,d=d<<_|v,d},f.prototype.readBool=function(){return this.readBits(1)===1},f.prototype.readByte=function(){return this.readBits(8)},f.prototype._skipLeadingZero=function(){var h;for(h=0;h<this._current_word_bits_left;h++)if(this._current_word&2147483648>>>h)return this._current_word<<=h,this._current_word_bits_left-=h,h;return this._fillCurrentWord(),h+this._skipLeadingZero()},f.prototype.readUEG=function(){var h=this._skipLeadingZero();return this.readBits(h+1)-1},f.prototype.readSEG=function(){var h=this.readUEG();return h&1?h+1>>>1:-1*(h>>>1)},f}();s.default=u},"./src/demux/flv-demuxer.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/demux/amf-parser.js"),f=c("./src/demux/sps-parser.js"),h=c("./src/demux/demux-errors.js"),p=c("./src/core/media-info.js"),d=c("./src/utils/exception.js");function g(v,m){return v[m]<<24|v[m+1]<<16|v[m+2]<<8|v[m+3]}var _=function(){function v(m,y){this.TAG="FLVDemuxer",this._config=y,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=m.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=m.hasAudioTrack,this._hasVideo=m.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new p.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var b=new ArrayBuffer(2);return new DataView(b).setInt16(0,256,!0),new Int16Array(b)[0]===256}()}return v.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},v.probe=function(m){var y=new Uint8Array(m),b={match:!1};if(y[0]!==70||y[1]!==76||y[2]!==86||y[3]!==1)return b;var w=(y[4]&4)>>>2!==0,E=(y[4]&1)!==0,C=g(y,5);return C<9?b:{match:!0,consumed:C,dataOffset:C,hasAudioTrack:w,hasVideoTrack:E}},v.prototype.bindDataSource=function(m){return m.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(v.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(m){this._onTrackMetadata=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(m){this._onMediaInfo=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(m){this._onMetaDataArrived=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(m){this._onScriptDataArrived=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onError",{get:function(){return this._onError},set:function(m){this._onError=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(m){this._onDataAvailable=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(m){this._timestampBase=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"overridedDuration",{get:function(){return this._duration},set:function(m){this._durationOverrided=!0,this._duration=m,this._mediaInfo.duration=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"overridedHasAudio",{set:function(m){this._hasAudioFlagOverrided=!0,this._hasAudio=m,this._mediaInfo.hasAudio=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"overridedHasVideo",{set:function(m){this._hasVideoFlagOverrided=!0,this._hasVideo=m,this._mediaInfo.hasVideo=m},enumerable:!1,configurable:!0}),v.prototype.resetMediaInfo=function(){this._mediaInfo=new p.default},v.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},v.prototype.parseChunks=function(m,y){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new d.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var b=0,w=this._littleEndian;if(y===0)if(m.byteLength>13){var E=v.probe(m);b=E.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,y+b!==this._dataOffset&&l.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var C=new DataView(m,b),T=C.getUint32(0,!w);T!==0&&l.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),b+=4}for(;b<m.byteLength;){this._dispatch=!0;var C=new DataView(m,b);if(b+11+4>m.byteLength)break;var A=C.getUint8(0),I=C.getUint32(0,!w)&16777215;if(b+11+I+4>m.byteLength)break;if(A!==8&&A!==9&&A!==18){l.default.w(this.TAG,"Unsupported tag type "+A+", skipped"),b+=11+I+4;continue}var O=C.getUint8(4),P=C.getUint8(5),k=C.getUint8(6),F=C.getUint8(7),M=k|P<<8|O<<16|F<<24,D=C.getUint32(7,!w)&16777215;D!==0&&l.default.w(this.TAG,"Meet tag which has StreamID != 0!");var G=b+11;switch(A){case 8:this._parseAudioData(m,G,I,M);break;case 9:this._parseVideoData(m,G,I,M,y+b);break;case 18:this._parseScriptData(m,G,I);break}var Q=C.getUint32(11+I,!w);Q!==11+I&&l.default.w(this.TAG,"Invalid PrevTagSize "+Q),b+=11+I+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),b},v.prototype._parseScriptData=function(m,y,b){var w=u.default.parseScriptData(m,y,b);if(w.hasOwnProperty("onMetaData")){if(w.onMetaData==null||typeof w.onMetaData!="object"){l.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&l.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=w;var E=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},E)),typeof E.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=E.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof E.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=E.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof E.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=E.audiodatarate),typeof E.videodatarate=="number"&&(this._mediaInfo.videoDataRate=E.videodatarate),typeof E.width=="number"&&(this._mediaInfo.width=E.width),typeof E.height=="number"&&(this._mediaInfo.height=E.height),typeof E.duration=="number"){if(!this._durationOverrided){var C=Math.floor(E.duration*this._timescale);this._duration=C,this._mediaInfo.duration=C}}else this._mediaInfo.duration=0;if(typeof E.framerate=="number"){var T=Math.floor(E.framerate*1e3);if(T>0){var A=T/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=A,this._referenceFrameRate.fps_num=T,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=A}}if(typeof E.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var I=E.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(I),E.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=E,l.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(w).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},w))},v.prototype._parseKeyframesIndex=function(m){for(var y=[],b=[],w=1;w<m.times.length;w++){var E=this._timestampBase+Math.floor(m.times[w]*1e3);y.push(E),b.push(m.filepositions[w])}return{times:y,filepositions:b}},v.prototype._parseAudioData=function(m,y,b,w){if(b<=1){l.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var E=new DataView(m,y,b),C=E.getUint8(0),T=C>>>4;if(T!==2&&T!==10){this._onError(h.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+T);return}var A=0,I=(C&12)>>>2;if(I>=0&&I<=4)A=this._flvSoundRateTable[I];else{this._onError(h.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+I);return}var O=C&1,P=this._audioMetadata,k=this._audioTrack;if(P||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),P=this._audioMetadata={},P.type="audio",P.id=k.id,P.timescale=this._timescale,P.duration=this._duration,P.audioSampleRate=A,P.channelCount=O===0?1:2),T===10){var F=this._parseAACAudioData(m,y+1,b-1);if(F==null)return;if(F.packetType===0){P.config&&l.default.w(this.TAG,"Found another AudioSpecificConfig!");var M=F.data;P.audioSampleRate=M.samplingRate,P.channelCount=M.channelCount,P.codec=M.codec,P.originalCodec=M.originalCodec,P.config=M.config,P.refSampleDuration=1024/P.audioSampleRate*P.timescale,l.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",P);var D=this._mediaInfo;D.audioCodec=P.originalCodec,D.audioSampleRate=P.audioSampleRate,D.audioChannelCount=P.channelCount,D.hasVideo?D.videoCodec!=null&&(D.mimeType='video/x-flv; codecs="'+D.videoCodec+","+D.audioCodec+'"'):D.mimeType='video/x-flv; codecs="'+D.audioCodec+'"',D.isComplete()&&this._onMediaInfo(D)}else if(F.packetType===1){var G=this._timestampBase+w,Q={unit:F.data,length:F.data.byteLength,dts:G,pts:G};k.samples.push(Q),k.length+=F.data.length}else l.default.e(this.TAG,"Flv: Unsupported AAC data type "+F.packetType)}else if(T===2){if(!P.codec){var M=this._parseMP3AudioData(m,y+1,b-1,!0);if(M==null)return;P.audioSampleRate=M.samplingRate,P.channelCount=M.channelCount,P.codec=M.codec,P.originalCodec=M.originalCodec,P.refSampleDuration=1152/P.audioSampleRate*P.timescale,l.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",P);var D=this._mediaInfo;D.audioCodec=P.codec,D.audioSampleRate=P.audioSampleRate,D.audioChannelCount=P.channelCount,D.audioDataRate=M.bitRate,D.hasVideo?D.videoCodec!=null&&(D.mimeType='video/x-flv; codecs="'+D.videoCodec+","+D.audioCodec+'"'):D.mimeType='video/x-flv; codecs="'+D.audioCodec+'"',D.isComplete()&&this._onMediaInfo(D)}var te=this._parseMP3AudioData(m,y+1,b-1,!1);if(te==null)return;var G=this._timestampBase+w,Y={unit:te,length:te.byteLength,dts:G,pts:G};k.samples.push(Y),k.length+=te.length}}},v.prototype._parseAACAudioData=function(m,y,b){if(b<=1){l.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var w={},E=new Uint8Array(m,y,b);return w.packetType=E[0],E[0]===0?w.data=this._parseAACAudioSpecificConfig(m,y+1,b-1):w.data=E.subarray(1),w},v.prototype._parseAACAudioSpecificConfig=function(m,y,b){var w=new Uint8Array(m,y,b),E=null,C=0,T=0,A=0,I=null;if(C=T=w[0]>>>3,A=(w[0]&7)<<1|w[1]>>>7,A<0||A>=this._mpegSamplingRates.length){this._onError(h.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var O=this._mpegSamplingRates[A],P=(w[1]&120)>>>3;if(P<0||P>=8){this._onError(h.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}C===5&&(I=(w[1]&7)<<1|w[2]>>>7,(w[2]&124)>>>2);var k=self.navigator.userAgent.toLowerCase();return k.indexOf("firefox")!==-1?A>=6?(C=5,E=new Array(4),I=A-3):(C=2,E=new Array(2),I=A):k.indexOf("android")!==-1?(C=2,E=new Array(2),I=A):(C=5,I=A,E=new Array(4),A>=6?I=A-3:P===1&&(C=2,E=new Array(2),I=A)),E[0]=C<<3,E[0]|=(A&15)>>>1,E[1]=(A&15)<<7,E[1]|=(P&15)<<3,C===5&&(E[1]|=(I&15)>>>1,E[2]=(I&1)<<7,E[2]|=8,E[3]=0),{config:E,samplingRate:O,channelCount:P,codec:"mp4a.40."+C,originalCodec:"mp4a.40."+T}},v.prototype._parseMP3AudioData=function(m,y,b,w){if(b<4){l.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var E=new Uint8Array(m,y,b),C=null;if(w){if(E[0]!==255)return;var T=E[1]>>>3&3,A=(E[1]&6)>>1,I=(E[2]&240)>>>4,O=(E[2]&12)>>>2,P=E[3]>>>6&3,k=P!==3?2:1,F=0,M=0,D="mp3";switch(T){case 0:F=this._mpegAudioV25SampleRateTable[O];break;case 2:F=this._mpegAudioV20SampleRateTable[O];break;case 3:F=this._mpegAudioV10SampleRateTable[O];break}switch(A){case 1:I<this._mpegAudioL3BitRateTable.length&&(M=this._mpegAudioL3BitRateTable[I]);break;case 2:I<this._mpegAudioL2BitRateTable.length&&(M=this._mpegAudioL2BitRateTable[I]);break;case 3:I<this._mpegAudioL1BitRateTable.length&&(M=this._mpegAudioL1BitRateTable[I]);break}C={bitRate:M,samplingRate:F,channelCount:k,codec:D,originalCodec:D}}else C=E;return C},v.prototype._parseVideoData=function(m,y,b,w,E){if(b<=1){l.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var C=new Uint8Array(m,y,b)[0],T=(C&240)>>>4,A=C&15;if(A!==7){this._onError(h.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+A);return}this._parseAVCVideoPacket(m,y+1,b-1,w,E,T)}},v.prototype._parseAVCVideoPacket=function(m,y,b,w,E,C){if(b<4){l.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var T=this._littleEndian,A=new DataView(m,y,b),I=A.getUint8(0),O=A.getUint32(0,!T)&16777215,P=O<<8>>8;if(I===0)this._parseAVCDecoderConfigurationRecord(m,y+4,b-4);else if(I===1)this._parseAVCVideoData(m,y+4,b-4,w,E,C,P);else if(I!==2){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid video packet type "+I);return}},v.prototype._parseAVCDecoderConfigurationRecord=function(m,y,b){if(b<7){l.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var w=this._videoMetadata,E=this._videoTrack,C=this._littleEndian,T=new DataView(m,y,b);w?typeof w.avcc<"u"&&l.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),w=this._videoMetadata={},w.type="video",w.id=E.id,w.timescale=this._timescale,w.duration=this._duration);var A=T.getUint8(0),I=T.getUint8(1);if(T.getUint8(2),T.getUint8(3),A!==1||I===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(T.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(h.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var O=T.getUint8(5)&31;if(O===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else O>1&&l.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+O);for(var P=6,k=0;k<O;k++){var F=T.getUint16(P,!C);if(P+=2,F!==0){var M=new Uint8Array(m,y+P,F);P+=F;var D=f.default.parseSPS(M);if(k===0){w.codecWidth=D.codec_size.width,w.codecHeight=D.codec_size.height,w.presentWidth=D.present_size.width,w.presentHeight=D.present_size.height,w.profile=D.profile_string,w.level=D.level_string,w.bitDepth=D.bit_depth,w.chromaFormat=D.chroma_format,w.sarRatio=D.sar_ratio,w.frameRate=D.frame_rate,(D.frame_rate.fixed===!1||D.frame_rate.fps_num===0||D.frame_rate.fps_den===0)&&(w.frameRate=this._referenceFrameRate);var G=w.frameRate.fps_den,Q=w.frameRate.fps_num;w.refSampleDuration=w.timescale*(G/Q);for(var te=M.subarray(1,4),Y="avc1.",U=0;U<3;U++){var z=te[U].toString(16);z.length<2&&(z="0"+z),Y+=z}w.codec=Y;var j=this._mediaInfo;j.width=w.codecWidth,j.height=w.codecHeight,j.fps=w.frameRate.fps,j.profile=w.profile,j.level=w.level,j.refFrames=D.ref_frames,j.chromaFormat=D.chroma_format_string,j.sarNum=w.sarRatio.width,j.sarDen=w.sarRatio.height,j.videoCodec=Y,j.hasAudio?j.audioCodec!=null&&(j.mimeType='video/x-flv; codecs="'+j.videoCodec+","+j.audioCodec+'"'):j.mimeType='video/x-flv; codecs="'+j.videoCodec+'"',j.isComplete()&&this._onMediaInfo(j)}}}var V=T.getUint8(P);if(V===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else V>1&&l.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+V);P++;for(var k=0;k<V;k++){var F=T.getUint16(P,!C);P+=2,F!==0&&(P+=F)}w.avcc=new Uint8Array(b),w.avcc.set(new Uint8Array(m,y,b),0),l.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",w)},v.prototype._parseAVCVideoData=function(m,y,b,w,E,C,T){for(var A=this._littleEndian,I=new DataView(m,y,b),O=[],P=0,k=0,F=this._naluLengthSize,M=this._timestampBase+w,D=C===1;k<b;){if(k+4>=b){l.default.w(this.TAG,"Malformed Nalu near timestamp "+M+", offset = "+k+", dataSize = "+b);break}var G=I.getUint32(k,!A);if(F===3&&(G>>>=8),G>b-F){l.default.w(this.TAG,"Malformed Nalus near timestamp "+M+", NaluSize > DataSize!");return}var Q=I.getUint8(k+F)&31;Q===5&&(D=!0);var te=new Uint8Array(m,y+k,F+G),Y={type:Q,data:te};O.push(Y),P+=te.byteLength,k+=F+G}if(O.length){var U=this._videoTrack,z={units:O,length:P,isKeyframe:D,dts:M,cts:T,pts:M+T};D&&(z.fileposition=E),U.samples.push(z),U.length+=P}},v}();s.default=_},"./src/demux/sps-parser.js":function(o,s,c){c.r(s);var l=c("./src/demux/exp-golomb.js"),u=function(){function f(){}return f._ebsp2rbsp=function(h){for(var p=h,d=p.byteLength,g=new Uint8Array(d),_=0,v=0;v<d;v++)v>=2&&p[v]===3&&p[v-1]===0&&p[v-2]===0||(g[_]=p[v],_++);return new Uint8Array(g.buffer,0,_)},f.parseSPS=function(h){var p=f._ebsp2rbsp(h),d=new l.default(p);d.readByte();var g=d.readByte();d.readByte();var _=d.readByte();d.readUEG();var v=f.getProfileString(g),m=f.getLevelString(_),y=1,b=420,w=[0,420,422,444],E=8;if((g===100||g===110||g===122||g===244||g===44||g===83||g===86||g===118||g===128||g===138||g===144)&&(y=d.readUEG(),y===3&&d.readBits(1),y<=3&&(b=w[y]),E=d.readUEG()+8,d.readUEG(),d.readBits(1),d.readBool()))for(var C=y!==3?8:12,T=0;T<C;T++)d.readBool()&&(T<6?f._skipScalingList(d,16):f._skipScalingList(d,64));d.readUEG();var A=d.readUEG();if(A===0)d.readUEG();else if(A===1){d.readBits(1),d.readSEG(),d.readSEG();for(var I=d.readUEG(),T=0;T<I;T++)d.readSEG()}var O=d.readUEG();d.readBits(1);var P=d.readUEG(),k=d.readUEG(),F=d.readBits(1);F===0&&d.readBits(1),d.readBits(1);var M=0,D=0,G=0,Q=0,te=d.readBool();te&&(M=d.readUEG(),D=d.readUEG(),G=d.readUEG(),Q=d.readUEG());var Y=1,U=1,z=0,j=!0,V=0,ne=0,ae=d.readBool();if(ae){if(d.readBool()){var pe=d.readByte(),se=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],_e=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];pe>0&&pe<16?(Y=se[pe-1],U=_e[pe-1]):pe===255&&(Y=d.readByte()<<8|d.readByte(),U=d.readByte()<<8|d.readByte())}if(d.readBool()&&d.readBool(),d.readBool()&&(d.readBits(4),d.readBool()&&d.readBits(24)),d.readBool()&&(d.readUEG(),d.readUEG()),d.readBool()){var Le=d.readBits(32),Pe=d.readBits(32);j=d.readBool(),V=Pe,ne=Le*2,z=V/ne}}var Ee=1;(Y!==1||U!==1)&&(Ee=Y/U);var Se=0,Ge=0;if(y===0)Se=1,Ge=2-F;else{var We=y===3?1:2,Ve=y===1?2:1;Se=We,Ge=Ve*(2-F)}var Xe=(P+1)*16,Ke=(2-F)*((k+1)*16);Xe-=(M+D)*Se,Ke-=(G+Q)*Ge;var bt=Math.ceil(Xe*Ee);return d.destroy(),d=null,{profile_string:v,level_string:m,bit_depth:E,ref_frames:O,chroma_format:b,chroma_format_string:f.getChromaFormatString(b),frame_rate:{fixed:j,fps:z,fps_den:ne,fps_num:V},sar_ratio:{width:Y,height:U},codec_size:{width:Xe,height:Ke},present_size:{width:bt,height:Ke}}},f._skipScalingList=function(h,p){for(var d=8,g=8,_=0,v=0;v<p;v++)g!==0&&(_=h.readSEG(),g=(d+_+256)%256),d=g===0?d:g},f.getProfileString=function(h){switch(h){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},f.getLevelString=function(h){return(h/10).toFixed(1)},f.getChromaFormatString=function(h){switch(h){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},f}();s.default=u},"./src/flv.js":function(o,s,c){c.r(s);var l=c("./src/utils/polyfill.js"),u=c("./src/core/features.js"),f=c("./src/io/loader.js"),h=c("./src/player/flv-player.js"),p=c("./src/player/native-player.js"),d=c("./src/player/player-events.js"),g=c("./src/player/player-errors.js"),_=c("./src/utils/logging-control.js"),v=c("./src/utils/exception.js");l.default.install();function m(E,C){var T=E;if(T==null||typeof T!="object")throw new v.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!T.hasOwnProperty("type"))throw new v.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(T.type){case"flv":return new h.default(T,C);default:return new p.default(T,C)}}function y(){return u.default.supportMSEH264Playback()}function b(){return u.default.getFeatureList()}var w={};w.createPlayer=m,w.isSupported=y,w.getFeatureList=b,w.BaseLoader=f.BaseLoader,w.LoaderStatus=f.LoaderStatus,w.LoaderErrors=f.LoaderErrors,w.Events=d.default,w.ErrorTypes=g.ErrorTypes,w.ErrorDetails=g.ErrorDetails,w.FlvPlayer=h.default,w.NativePlayer=p.default,w.LoggingControl=_.default,Object.defineProperty(w,"version",{enumerable:!0,get:function(){return"1.6.2"}}),s.default=w},"./src/index.js":function(o,s,c){o.exports=c("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/browser.js"),u=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),h=function(){var d=function(g,_){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(v[y]=m[y])},d(g,_)};return function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");d(g,_);function v(){this.constructor=g}g.prototype=_===null?Object.create(_):(v.prototype=_.prototype,new v)}}(),p=function(d){h(g,d);function g(_,v){var m=d.call(this,"fetch-stream-loader")||this;return m.TAG="FetchStreamLoader",m._seekHandler=_,m._config=v,m._needStash=!0,m._requestAbort=!1,m._contentLength=null,m._receivedLength=0,m}return g.isSupported=function(){try{var _=l.default.msedge&&l.default.version.minor>=15048,v=l.default.msedge?_:!0;return self.fetch&&self.ReadableStream&&v}catch{return!1}},g.prototype.destroy=function(){this.isWorking()&&this.abort(),d.prototype.destroy.call(this)},g.prototype.open=function(_,v){var m=this;this._dataSource=_,this._range=v;var y=_.url;this._config.reuseRedirectedURL&&_.redirectedURL!=null&&(y=_.redirectedURL);var b=this._seekHandler.getConfig(y,v),w=new self.Headers;if(typeof b.headers=="object"){var E=b.headers;for(var C in E)E.hasOwnProperty(C)&&w.append(C,E[C])}var T={method:"GET",headers:w,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var C in this._config.headers)w.append(C,this._config.headers[C]);_.cors===!1&&(T.mode="same-origin"),_.withCredentials&&(T.credentials="include"),_.referrerPolicy&&(T.referrerPolicy=_.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,T.signal=this._abortController.signal),this._status=u.LoaderStatus.kConnecting,self.fetch(b.url,T).then(function(A){if(m._requestAbort){m._status=u.LoaderStatus.kIdle,A.body.cancel();return}if(A.ok&&A.status>=200&&A.status<=299){if(A.url!==b.url&&m._onURLRedirect){var I=m._seekHandler.removeURLParameters(A.url);m._onURLRedirect(I)}var O=A.headers.get("Content-Length");return O!=null&&(m._contentLength=parseInt(O),m._contentLength!==0&&m._onContentLengthKnown&&m._onContentLengthKnown(m._contentLength)),m._pump.call(m,A.body.getReader())}else if(m._status=u.LoaderStatus.kError,m._onError)m._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:A.status,msg:A.statusText});else throw new f.RuntimeException("FetchStreamLoader: Http code invalid, "+A.status+" "+A.statusText)}).catch(function(A){if(!(m._abortController&&m._abortController.signal.aborted))if(m._status=u.LoaderStatus.kError,m._onError)m._onError(u.LoaderErrors.EXCEPTION,{code:-1,msg:A.message});else throw A})},g.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==u.LoaderStatus.kBuffering||!l.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},g.prototype._pump=function(_){var v=this;return _.read().then(function(m){if(m.done)if(v._contentLength!==null&&v._receivedLength<v._contentLength){v._status=u.LoaderStatus.kError;var y=u.LoaderErrors.EARLY_EOF,b={code:-1,msg:"Fetch stream meet Early-EOF"};if(v._onError)v._onError(y,b);else throw new f.RuntimeException(b.msg)}else v._status=u.LoaderStatus.kComplete,v._onComplete&&v._onComplete(v._range.from,v._range.from+v._receivedLength-1);else{if(v._abortController&&v._abortController.signal.aborted){v._status=u.LoaderStatus.kComplete;return}else if(v._requestAbort===!0)return v._status=u.LoaderStatus.kComplete,_.cancel();v._status=u.LoaderStatus.kBuffering;var w=m.value.buffer,E=v._range.from+v._receivedLength;v._receivedLength+=w.byteLength,v._onDataArrival&&v._onDataArrival(w,E,v._receivedLength),v._pump(_)}}).catch(function(m){if(v._abortController&&v._abortController.signal.aborted){v._status=u.LoaderStatus.kComplete;return}if(!(m.code===11&&l.default.msedge)){v._status=u.LoaderStatus.kError;var y=0,b=null;if((m.code===19||m.message==="network error")&&(v._contentLength===null||v._contentLength!==null&&v._receivedLength<v._contentLength)?(y=u.LoaderErrors.EARLY_EOF,b={code:m.code,msg:"Fetch stream meet Early-EOF"}):(y=u.LoaderErrors.EXCEPTION,b={code:m.code,msg:m.message}),v._onError)v._onError(y,b);else throw new f.RuntimeException(b.msg)}})},g}(u.BaseLoader);s.default=p},"./src/io/io-controller.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),h=c("./src/io/fetch-stream-loader.js"),p=c("./src/io/xhr-moz-chunked-loader.js"),d=c("./src/io/xhr-range-loader.js"),g=c("./src/io/websocket-loader.js"),_=c("./src/io/range-seek-handler.js"),v=c("./src/io/param-seek-handler.js"),m=c("./src/utils/exception.js"),y=function(){function b(w,E,C){this.TAG="IOController",this._config=E,this._extraData=C,this._stashInitialSize=1024*384,E.stashInitialSize!=null&&E.stashInitialSize>0&&(this._stashInitialSize=E.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,E.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=w,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(w.url),this._refTotalLength=w.filesize?w.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new u.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return b.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},b.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},b.prototype.isPaused=function(){return this._paused},Object.defineProperty(b.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"extraData",{get:function(){return this._extraData},set:function(w){this._extraData=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(w){this._onDataArrival=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(w){this._onSeeked=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onError",{get:function(){return this._onError},set:function(w){this._onError=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onComplete",{get:function(){return this._onComplete},set:function(w){this._onComplete=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(w){this._onRedirect=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(w){this._onRecoveredEarlyEof=w},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentSpeed",{get:function(){return this._loaderClass===d.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),b.prototype._selectSeekHandler=function(){var w=this._config;if(w.seekType==="range")this._seekHandler=new _.default(this._config.rangeLoadZeroStart);else if(w.seekType==="param"){var E=w.seekParamStart||"bstart",C=w.seekParamEnd||"bend";this._seekHandler=new v.default(E,C)}else if(w.seekType==="custom"){if(typeof w.customSeekHandler!="function")throw new m.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new w.customSeekHandler}else throw new m.InvalidArgumentException("Invalid seekType in config: "+w.seekType)},b.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=g.default;else if(h.default.isSupported())this._loaderClass=h.default;else if(p.default.isSupported())this._loaderClass=p.default;else if(d.default.isSupported())this._loaderClass=d.default;else throw new m.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},b.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},b.prototype.open=function(w){this._currentRange={from:0,to:-1},w&&(this._currentRange.from=w),this._speedSampler.reset(),w||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},b.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},b.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},b.prototype.resume=function(){if(this._paused){this._paused=!1;var w=this._resumeFrom;this._resumeFrom=0,this._internalSeek(w,!0)}},b.prototype.seek=function(w){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(w,!0)},b.prototype._internalSeek=function(w,E){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(E),this._loader.destroy(),this._loader=null;var C={from:w,to:-1};this._currentRange={from:C.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,C),this._onSeeked&&this._onSeeked()},b.prototype.updateUrl=function(w){if(!w||typeof w!="string"||w.length===0)throw new m.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=w},b.prototype._expandBuffer=function(w){for(var E=this._stashSize;E+1024*1024*1<w;)E*=2;if(E+=1024*1024*1,E!==this._bufferSize){var C=new ArrayBuffer(E);if(this._stashUsed>0){var T=new Uint8Array(this._stashBuffer,0,this._stashUsed),A=new Uint8Array(C,0,E);A.set(T,0)}this._stashBuffer=C,this._bufferSize=E}},b.prototype._normalizeSpeed=function(w){var E=this._speedNormalizeList,C=E.length-1,T=0,A=0,I=C;if(w<E[0])return E[0];for(;A<=I;){if(T=A+Math.floor((I-A)/2),T===C||w>=E[T]&&w<E[T+1])return E[T];E[T]<w?A=T+1:I=T-1}},b.prototype._adjustStashSize=function(w){var E=0;this._config.isLive||w<512?E=w:w>=512&&w<=1024?E=Math.floor(w*1.5):E=w*2,E>8192&&(E=8192);var C=E*1024+1024*1024*1;this._bufferSize<C&&this._expandBuffer(C),this._stashSize=E*1024},b.prototype._dispatchChunks=function(w,E){return this._currentRange.to=E+w.byteLength-1,this._onDataArrival(w,E)},b.prototype._onURLRedirect=function(w){this._redirectedURL=w,this._onRedirect&&this._onRedirect(w)},b.prototype._onContentLengthKnown=function(w){w&&this._fullRequestFlag&&(this._totalLength=w,this._fullRequestFlag=!1)},b.prototype._onLoaderChunkArrival=function(w,E,C){if(!this._onDataArrival)throw new m.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(w.byteLength);var T=this._speedSampler.lastSecondKBps;if(T!==0){var A=this._normalizeSpeed(T);this._speedNormalized!==A&&(this._speedNormalized=A,this._adjustStashSize(A))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=E),this._stashUsed+w.byteLength<=this._stashSize){var P=new Uint8Array(this._stashBuffer,0,this._stashSize);P.set(new Uint8Array(w),this._stashUsed),this._stashUsed+=w.byteLength}else{var P=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var F=this._stashBuffer.slice(0,this._stashUsed),I=this._dispatchChunks(F,this._stashByteStart);if(I<F.byteLength){if(I>0){var k=new Uint8Array(F,I);P.set(k,0),this._stashUsed=k.byteLength,this._stashByteStart+=I}}else this._stashUsed=0,this._stashByteStart+=I;this._stashUsed+w.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+w.byteLength),P=new Uint8Array(this._stashBuffer,0,this._bufferSize)),P.set(new Uint8Array(w),this._stashUsed),this._stashUsed+=w.byteLength}else{var I=this._dispatchChunks(w,E);if(I<w.byteLength){var O=w.byteLength-I;O>this._bufferSize&&(this._expandBuffer(O),P=new Uint8Array(this._stashBuffer,0,this._bufferSize)),P.set(new Uint8Array(w,I),0),this._stashUsed+=O,this._stashByteStart=E+I}}}else if(this._stashUsed===0){var I=this._dispatchChunks(w,E);if(I<w.byteLength){var O=w.byteLength-I;O>this._bufferSize&&this._expandBuffer(O);var P=new Uint8Array(this._stashBuffer,0,this._bufferSize);P.set(new Uint8Array(w,I),0),this._stashUsed+=O,this._stashByteStart=E+I}}else{this._stashUsed+w.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+w.byteLength);var P=new Uint8Array(this._stashBuffer,0,this._bufferSize);P.set(new Uint8Array(w),this._stashUsed),this._stashUsed+=w.byteLength;var I=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(I<this._stashUsed&&I>0){var k=new Uint8Array(this._stashBuffer,I);P.set(k,0)}this._stashUsed-=I,this._stashByteStart+=I}}},b.prototype._flushStashBuffer=function(w){if(this._stashUsed>0){var E=this._stashBuffer.slice(0,this._stashUsed),C=this._dispatchChunks(E,this._stashByteStart),T=E.byteLength-C;if(C<E.byteLength)if(w)l.default.w(this.TAG,T+" bytes unconsumed data remain when flush buffer, dropped");else{if(C>0){var A=new Uint8Array(this._stashBuffer,0,this._bufferSize),I=new Uint8Array(E,C);A.set(I,0),this._stashUsed=I.byteLength,this._stashByteStart+=C}return 0}return this._stashUsed=0,this._stashByteStart=0,T}return 0},b.prototype._onLoaderComplete=function(w,E){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},b.prototype._onLoaderError=function(w,E){switch(l.default.e(this.TAG,"Loader error, code = "+E.code+", msg = "+E.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,w=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF),w){case f.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var C=this._currentRange.to+1;C<this._totalLength&&(l.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(C,!1));return}w=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case f.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case f.LoaderErrors.CONNECTING_TIMEOUT:case f.LoaderErrors.HTTP_STATUS_CODE_INVALID:case f.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(w,E);else throw new m.RuntimeException("IOException: "+E.msg)},b}();s.default=y},"./src/io/loader.js":function(o,s,c){c.r(s),c.d(s,{LoaderStatus:function(){return u},LoaderErrors:function(){return f},BaseLoader:function(){return h}});var l=c("./src/utils/exception.js"),u={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},f={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},h=function(){function p(d){this._type=d||"undefined",this._status=u.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return p.prototype.destroy=function(){this._status=u.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},p.prototype.isWorking=function(){return this._status===u.kConnecting||this._status===u.kBuffering},Object.defineProperty(p.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(d){this._onContentLengthKnown=d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(d){this._onURLRedirect=d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(d){this._onDataArrival=d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onError",{get:function(){return this._onError},set:function(d){this._onError=d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onComplete",{get:function(){return this._onComplete},set:function(d){this._onComplete=d},enumerable:!1,configurable:!0}),p.prototype.open=function(d,g){throw new l.NotImplementedException("Unimplemented abstract function!")},p.prototype.abort=function(){throw new l.NotImplementedException("Unimplemented abstract function!")},p}()},"./src/io/param-seek-handler.js":function(o,s,c){c.r(s);var l=function(){function u(f,h){this._startName=f,this._endName=h}return u.prototype.getConfig=function(f,h){var p=f;if(h.from!==0||h.to!==-1){var d=!0;p.indexOf("?")===-1&&(p+="?",d=!1),d&&(p+="&"),p+=this._startName+"="+h.from.toString(),h.to!==-1&&(p+="&"+this._endName+"="+h.to.toString())}return{url:p,headers:{}}},u.prototype.removeURLParameters=function(f){var h=f.split("?")[0],p=void 0,d=f.indexOf("?");d!==-1&&(p=f.substring(d+1));var g="";if(p!=null&&p.length>0)for(var _=p.split("&"),v=0;v<_.length;v++){var m=_[v].split("="),y=v>0;m[0]!==this._startName&&m[0]!==this._endName&&(y&&(g+="&"),g+=_[v])}return g.length===0?h:h+"?"+g},u}();s.default=l},"./src/io/range-seek-handler.js":function(o,s,c){c.r(s);var l=function(){function u(f){this._zeroStart=f||!1}return u.prototype.getConfig=function(f,h){var p={};if(h.from!==0||h.to!==-1){var d=void 0;h.to!==-1?d="bytes="+h.from.toString()+"-"+h.to.toString():d="bytes="+h.from.toString()+"-",p.Range=d}else this._zeroStart&&(p.Range="bytes=0-");return{url:f,headers:p}},u.prototype.removeURLParameters=function(f){return f},u}();s.default=l},"./src/io/speed-sampler.js":function(o,s,c){c.r(s);var l=function(){function u(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return u.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},u.prototype.addBytes=function(f){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=f,this._totalBytes+=f):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=f,this._totalBytes+=f):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=f,this._totalBytes+=f,this._lastCheckpoint=this._now())},Object.defineProperty(u.prototype,"currentKBps",{get:function(){this.addBytes(0);var f=(this._now()-this._lastCheckpoint)/1e3;return f==0&&(f=1),this._intervalBytes/f/1024},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"averageKBps",{get:function(){var f=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/f/1024},enumerable:!1,configurable:!0}),u}();s.default=l},"./src/io/websocket-loader.js":function(o,s,c){c.r(s);var l=c("./src/io/loader.js"),u=c("./src/utils/exception.js"),f=function(){var p=function(d,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(_[m]=v[m])},p(d,g)};return function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(d,g);function _(){this.constructor=d}d.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}}(),h=function(p){f(d,p);function d(){var g=p.call(this,"websocket-loader")||this;return g.TAG="WebSocketLoader",g._needStash=!0,g._ws=null,g._requestAbort=!1,g._receivedLength=0,g}return d.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},d.prototype.destroy=function(){this._ws&&this.abort(),p.prototype.destroy.call(this)},d.prototype.open=function(g){try{var _=this._ws=new self.WebSocket(g.url);_.binaryType="arraybuffer",_.onopen=this._onWebSocketOpen.bind(this),_.onclose=this._onWebSocketClose.bind(this),_.onmessage=this._onWebSocketMessage.bind(this),_.onerror=this._onWebSocketError.bind(this),this._status=l.LoaderStatus.kConnecting}catch(m){this._status=l.LoaderStatus.kError;var v={code:m.code,msg:m.message};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,v);else throw new u.RuntimeException(v.msg)}},d.prototype.abort=function(){var g=this._ws;g&&(g.readyState===0||g.readyState===1)&&(this._requestAbort=!0,g.close()),this._ws=null,this._status=l.LoaderStatus.kComplete},d.prototype._onWebSocketOpen=function(g){this._status=l.LoaderStatus.kBuffering},d.prototype._onWebSocketClose=function(g){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},d.prototype._onWebSocketMessage=function(g){var _=this;if(g.data instanceof ArrayBuffer)this._dispatchArrayBuffer(g.data);else if(g.data instanceof Blob){var v=new FileReader;v.onload=function(){_._dispatchArrayBuffer(v.result)},v.readAsArrayBuffer(g.data)}else{this._status=l.LoaderStatus.kError;var m={code:-1,msg:"Unsupported WebSocket message type: "+g.data.constructor.name};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,m);else throw new u.RuntimeException(m.msg)}},d.prototype._dispatchArrayBuffer=function(g){var _=g,v=this._receivedLength;this._receivedLength+=_.byteLength,this._onDataArrival&&this._onDataArrival(_,v,this._receivedLength)},d.prototype._onWebSocketError=function(g){this._status=l.LoaderStatus.kError;var _={code:g.code,msg:g.message};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,_);else throw new u.RuntimeException(_.msg)},d}(l.BaseLoader);s.default=h},"./src/io/xhr-moz-chunked-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),h=function(){var d=function(g,_){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(v[y]=m[y])},d(g,_)};return function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");d(g,_);function v(){this.constructor=g}g.prototype=_===null?Object.create(_):(v.prototype=_.prototype,new v)}}(),p=function(d){h(g,d);function g(_,v){var m=d.call(this,"xhr-moz-chunked-loader")||this;return m.TAG="MozChunkedLoader",m._seekHandler=_,m._config=v,m._needStash=!0,m._xhr=null,m._requestAbort=!1,m._contentLength=null,m._receivedLength=0,m}return g.isSupported=function(){try{var _=new XMLHttpRequest;return _.open("GET","https://example.com",!0),_.responseType="moz-chunked-arraybuffer",_.responseType==="moz-chunked-arraybuffer"}catch(v){return l.default.w("MozChunkedLoader",v.message),!1}},g.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),d.prototype.destroy.call(this)},g.prototype.open=function(_,v){this._dataSource=_,this._range=v;var m=_.url;this._config.reuseRedirectedURL&&_.redirectedURL!=null&&(m=_.redirectedURL);var y=this._seekHandler.getConfig(m,v);this._requestURL=y.url;var b=this._xhr=new XMLHttpRequest;if(b.open("GET",y.url,!0),b.responseType="moz-chunked-arraybuffer",b.onreadystatechange=this._onReadyStateChange.bind(this),b.onprogress=this._onProgress.bind(this),b.onloadend=this._onLoadEnd.bind(this),b.onerror=this._onXhrError.bind(this),_.withCredentials&&(b.withCredentials=!0),typeof y.headers=="object"){var w=y.headers;for(var E in w)w.hasOwnProperty(E)&&b.setRequestHeader(E,w[E])}if(typeof this._config.headers=="object"){var w=this._config.headers;for(var E in w)w.hasOwnProperty(E)&&b.setRequestHeader(E,w[E])}this._status=u.LoaderStatus.kConnecting,b.send()},g.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=u.LoaderStatus.kComplete},g.prototype._onReadyStateChange=function(_){var v=_.target;if(v.readyState===2){if(v.responseURL!=null&&v.responseURL!==this._requestURL&&this._onURLRedirect){var m=this._seekHandler.removeURLParameters(v.responseURL);this._onURLRedirect(m)}if(v.status!==0&&(v.status<200||v.status>299))if(this._status=u.LoaderStatus.kError,this._onError)this._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:v.status,msg:v.statusText});else throw new f.RuntimeException("MozChunkedLoader: Http code invalid, "+v.status+" "+v.statusText);else this._status=u.LoaderStatus.kBuffering}},g.prototype._onProgress=function(_){if(this._status!==u.LoaderStatus.kError){this._contentLength===null&&_.total!==null&&_.total!==0&&(this._contentLength=_.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var v=_.target.response,m=this._range.from+this._receivedLength;this._receivedLength+=v.byteLength,this._onDataArrival&&this._onDataArrival(v,m,this._receivedLength)}},g.prototype._onLoadEnd=function(_){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===u.LoaderStatus.kError)return;this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},g.prototype._onXhrError=function(_){this._status=u.LoaderStatus.kError;var v=0,m=null;if(this._contentLength&&_.loaded<this._contentLength?(v=u.LoaderErrors.EARLY_EOF,m={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(v=u.LoaderErrors.EXCEPTION,m={code:-1,msg:_.constructor.name+" "+_.type}),this._onError)this._onError(v,m);else throw new f.RuntimeException(m.msg)},g}(u.BaseLoader);s.default=p},"./src/io/xhr-range-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),h=c("./src/utils/exception.js"),p=function(){var g=function(_,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},g(_,v)};return function(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(_,v);function m(){this.constructor=_}_.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),d=function(g){p(_,g);function _(v,m){var y=g.call(this,"xhr-range-loader")||this;return y.TAG="RangeLoader",y._seekHandler=v,y._config=m,y._needStash=!1,y._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],y._currentChunkSizeKB=384,y._currentSpeedNormalized=0,y._zeroSpeedChunkCount=0,y._xhr=null,y._speedSampler=new u.default,y._requestAbort=!1,y._waitForTotalLength=!1,y._totalLengthReceived=!1,y._currentRequestURL=null,y._currentRedirectedURL=null,y._currentRequestRange=null,y._totalLength=null,y._contentLength=null,y._receivedLength=0,y._lastTimeLoaded=0,y}return _.isSupported=function(){try{var v=new XMLHttpRequest;return v.open("GET","https://example.com",!0),v.responseType="arraybuffer",v.responseType==="arraybuffer"}catch(m){return l.default.w("RangeLoader",m.message),!1}},_.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),g.prototype.destroy.call(this)},Object.defineProperty(_.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),_.prototype.open=function(v,m){this._dataSource=v,this._range=m,this._status=f.LoaderStatus.kConnecting;var y=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(y=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!y?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},_.prototype._openSubRange=function(){var v=this._currentChunkSizeKB*1024,m=this._range.from+this._receivedLength,y=m+v;this._contentLength!=null&&y-this._range.from>=this._contentLength&&(y=this._range.from+this._contentLength-1),this._currentRequestRange={from:m,to:y},this._internalOpen(this._dataSource,this._currentRequestRange)},_.prototype._internalOpen=function(v,m){this._lastTimeLoaded=0;var y=v.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?y=this._currentRedirectedURL:v.redirectedURL!=null&&(y=v.redirectedURL));var b=this._seekHandler.getConfig(y,m);this._currentRequestURL=b.url;var w=this._xhr=new XMLHttpRequest;if(w.open("GET",b.url,!0),w.responseType="arraybuffer",w.onreadystatechange=this._onReadyStateChange.bind(this),w.onprogress=this._onProgress.bind(this),w.onload=this._onLoad.bind(this),w.onerror=this._onXhrError.bind(this),v.withCredentials&&(w.withCredentials=!0),typeof b.headers=="object"){var E=b.headers;for(var C in E)E.hasOwnProperty(C)&&w.setRequestHeader(C,E[C])}if(typeof this._config.headers=="object"){var E=this._config.headers;for(var C in E)E.hasOwnProperty(C)&&w.setRequestHeader(C,E[C])}w.send()},_.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=f.LoaderStatus.kComplete},_.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},_.prototype._onReadyStateChange=function(v){var m=v.target;if(m.readyState===2){if(m.responseURL!=null){var y=this._seekHandler.removeURLParameters(m.responseURL);m.responseURL!==this._currentRequestURL&&y!==this._currentRedirectedURL&&(this._currentRedirectedURL=y,this._onURLRedirect&&this._onURLRedirect(y))}if(m.status>=200&&m.status<=299){if(this._waitForTotalLength)return;this._status=f.LoaderStatus.kBuffering}else if(this._status=f.LoaderStatus.kError,this._onError)this._onError(f.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:m.status,msg:m.statusText});else throw new h.RuntimeException("RangeLoader: Http code invalid, "+m.status+" "+m.statusText)}},_.prototype._onProgress=function(v){if(this._status!==f.LoaderStatus.kError){if(this._contentLength===null){var m=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,m=!0;var y=v.total;this._internalAbort(),y!=null&y!==0&&(this._totalLength=y)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,m){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var b=v.loaded-this._lastTimeLoaded;this._lastTimeLoaded=v.loaded,this._speedSampler.addBytes(b)}},_.prototype._normalizeSpeed=function(v){var m=this._chunkSizeKBList,y=m.length-1,b=0,w=0,E=y;if(v<m[0])return m[0];for(;w<=E;){if(b=w+Math.floor((E-w)/2),b===y||v>=m[b]&&v<m[b+1])return m[b];m[b]<v?w=b+1:E=b-1}},_.prototype._onLoad=function(v){if(this._status!==f.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var m=this._speedSampler.lastSecondKBps;if(m===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(m=this._speedSampler.currentKBps)),m!==0){var y=this._normalizeSpeed(m);this._currentSpeedNormalized!==y&&(this._currentSpeedNormalized=y,this._currentChunkSizeKB=y)}var b=v.target.response,w=this._range.from+this._receivedLength;this._receivedLength+=b.byteLength;var E=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():E=!0,this._onDataArrival&&this._onDataArrival(b,w,this._receivedLength),E&&(this._status=f.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},_.prototype._onXhrError=function(v){this._status=f.LoaderStatus.kError;var m=0,y=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(m=f.LoaderErrors.EARLY_EOF,y={code:-1,msg:"RangeLoader meet Early-Eof"}):(m=f.LoaderErrors.EXCEPTION,y={code:-1,msg:v.constructor.name+" "+v.type}),this._onError)this._onError(m,y);else throw new h.RuntimeException(y.msg)},_}(f.BaseLoader);s.default=d},"./src/player/flv-player.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),p=c("./src/player/player-events.js"),d=c("./src/core/transmuxer.js"),g=c("./src/core/transmuxing-events.js"),_=c("./src/core/mse-controller.js"),v=c("./src/core/mse-events.js"),m=c("./src/player/player-errors.js"),y=c("./src/config.js"),b=c("./src/utils/exception.js"),w=function(){function E(C,T){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(u()),this._config=(0,y.createDefaultConfig)(),typeof T=="object"&&Object.assign(this._config,T),C.type.toLowerCase()!=="flv")throw new b.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");C.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=C,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var A=h.default.chrome&&(h.default.version.major<50||h.default.version.major===50&&h.default.version.build<2661);this._alwaysSeekKeyframe=!!(A||h.default.msedge||h.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return E.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},E.prototype.on=function(C,T){var A=this;C===p.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){A._emitter.emit(p.default.MEDIA_INFO,A.mediaInfo)}):C===p.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){A._emitter.emit(p.default.STATISTICS_INFO,A.statisticsInfo)}),this._emitter.addListener(C,T)},E.prototype.off=function(C,T){this._emitter.removeListener(C,T)},E.prototype.attachMediaElement=function(C){var T=this;if(this._mediaElement=C,C.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),C.addEventListener("seeking",this.e.onvSeeking),C.addEventListener("canplay",this.e.onvCanPlay),C.addEventListener("stalled",this.e.onvStalled),C.addEventListener("progress",this.e.onvProgress),this._msectl=new _.default(this._config),this._msectl.on(v.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(v.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(v.default.SOURCE_OPEN,function(){T._mseSourceOpened=!0,T._hasPendingLoad&&(T._hasPendingLoad=!1,T.load())}),this._msectl.on(v.default.ERROR,function(A){T._emitter.emit(p.default.ERROR,m.ErrorTypes.MEDIA_ERROR,m.ErrorDetails.MEDIA_MSE_ERROR,A)}),this._msectl.attachMediaElement(C),this._pendingSeekTime!=null)try{C.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},E.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},E.prototype.load=function(){var C=this;if(!this._mediaElement)throw new b.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new b.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new d.default(this._mediaDataSource,this._config),this._transmuxer.on(g.default.INIT_SEGMENT,function(T,A){C._msectl.appendInitSegment(A)}),this._transmuxer.on(g.default.MEDIA_SEGMENT,function(T,A){if(C._msectl.appendMediaSegment(A),C._config.lazyLoad&&!C._config.isLive){var I=C._mediaElement.currentTime;A.info.endDts>=(I+C._config.lazyLoadMaxDuration)*1e3&&C._progressChecker==null&&(f.default.v(C.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),C._suspendTransmuxer())}}),this._transmuxer.on(g.default.LOADING_COMPLETE,function(){C._msectl.endOfStream(),C._emitter.emit(p.default.LOADING_COMPLETE)}),this._transmuxer.on(g.default.RECOVERED_EARLY_EOF,function(){C._emitter.emit(p.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(g.default.IO_ERROR,function(T,A){C._emitter.emit(p.default.ERROR,m.ErrorTypes.NETWORK_ERROR,T,A)}),this._transmuxer.on(g.default.DEMUX_ERROR,function(T,A){C._emitter.emit(p.default.ERROR,m.ErrorTypes.MEDIA_ERROR,T,{code:-1,msg:A})}),this._transmuxer.on(g.default.MEDIA_INFO,function(T){C._mediaInfo=T,C._emitter.emit(p.default.MEDIA_INFO,Object.assign({},T))}),this._transmuxer.on(g.default.METADATA_ARRIVED,function(T){C._emitter.emit(p.default.METADATA_ARRIVED,T)}),this._transmuxer.on(g.default.SCRIPTDATA_ARRIVED,function(T){C._emitter.emit(p.default.SCRIPTDATA_ARRIVED,T)}),this._transmuxer.on(g.default.STATISTICS_INFO,function(T){C._statisticsInfo=C._fillStatisticsInfo(T),C._emitter.emit(p.default.STATISTICS_INFO,Object.assign({},C._statisticsInfo))}),this._transmuxer.on(g.default.RECOMMEND_SEEKPOINT,function(T){C._mediaElement&&!C._config.accurateSeek&&(C._requestSetTime=!0,C._mediaElement.currentTime=T/1e3)}),this._transmuxer.open()}},E.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},E.prototype.play=function(){return this._mediaElement.play()},E.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(E.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(C){this._mediaElement.volume=C},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(C){this._mediaElement.muted=C},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(C){this._mediaElement?this._internalSeek(C):this._pendingSeekTime=C},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),E.prototype._fillStatisticsInfo=function(C){if(C.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return C;var T=!0,A=0,I=0;if(this._mediaElement.getVideoPlaybackQuality){var O=this._mediaElement.getVideoPlaybackQuality();A=O.totalVideoFrames,I=O.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(A=this._mediaElement.webkitDecodedFrameCount,I=this._mediaElement.webkitDroppedFrameCount):T=!1;return T&&(C.decodedFrames=A,C.droppedFrames=I),C},E.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var C=this._mediaElement.buffered,T=this._mediaElement.currentTime,A=0,I=0;I<C.length;I++){var O=C.start(I),P=C.end(I);if(O<=T&&T<P){A=P;break}}A>=T+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(f.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},E.prototype._onmseBufferFull=function(){f.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},E.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},E.prototype._checkProgressAndResume=function(){for(var C=this._mediaElement.currentTime,T=this._mediaElement.buffered,A=!1,I=0;I<T.length;I++){var O=T.start(I),P=T.end(I);if(C>=O&&C<P){C>=P-this._config.lazyLoadRecoverDuration&&(A=!0);break}}A&&(window.clearInterval(this._progressChecker),this._progressChecker=null,A&&(f.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},E.prototype._isTimepointBuffered=function(C){for(var T=this._mediaElement.buffered,A=0;A<T.length;A++){var I=T.start(A),O=T.end(A);if(C>=I&&C<O)return!0}return!1},E.prototype._internalSeek=function(C){var T=this._isTimepointBuffered(C),A=!1,I=0;if(C<1&&this._mediaElement.buffered.length>0){var O=this._mediaElement.buffered.start(0);(O<1&&C<O||h.default.safari)&&(A=!0,I=h.default.safari?.1:O)}if(A)this._requestSetTime=!0,this._mediaElement.currentTime=I;else if(T){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=C;else{var P=this._msectl.getNearestKeyframe(Math.floor(C*1e3));this._requestSetTime=!0,P!=null?this._mediaElement.currentTime=P.dts/1e3:this._mediaElement.currentTime=C}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(C),this._transmuxer.seek(Math.floor(C*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=C)},E.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var C=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(C)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(C),this._transmuxer.seek(Math.floor(C*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=C))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},E.prototype._checkAndResumeStuckPlayback=function(C){var T=this._mediaElement;if(C||!this._receivedCanPlay||T.readyState<2){var A=T.buffered;A.length>0&&T.currentTime<A.start(0)&&(f.default.w(this.TAG,"Playback seems stuck at "+T.currentTime+", seek to "+A.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=A.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},E.prototype._onvLoadedMetadata=function(C){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},E.prototype._onvSeeking=function(C){var T=this._mediaElement.currentTime,A=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(T<1&&A.length>0){var I=A.start(0);if(I<1&&T<I||h.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=h.default.safari?.1:I;return}}if(this._isTimepointBuffered(T)){if(this._alwaysSeekKeyframe){var O=this._msectl.getNearestKeyframe(Math.floor(T*1e3));O!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=O.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:T,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},E.prototype._onvCanPlay=function(C){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},E.prototype._onvStalled=function(C){this._checkAndResumeStuckPlayback(!0)},E.prototype._onvProgress=function(C){this._checkAndResumeStuckPlayback()},E}();s.default=w},"./src/player/native-player.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/player/player-events.js"),h=c("./src/config.js"),p=c("./src/utils/exception.js"),d=function(){function g(_,v){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(u()),this._config=(0,h.createDefaultConfig)(),typeof v=="object"&&Object.assign(this._config,v),_.type.toLowerCase()==="flv")throw new p.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(_.hasOwnProperty("segments"))throw new p.InvalidArgumentException("NativePlayer("+_.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=_,this._mediaElement=null}return g.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},g.prototype.on=function(_,v){var m=this;_===f.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){m._emitter.emit(f.default.MEDIA_INFO,m.mediaInfo)}):_===f.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){m._emitter.emit(f.default.STATISTICS_INFO,m.statisticsInfo)}),this._emitter.addListener(_,v)},g.prototype.off=function(_,v){this._emitter.removeListener(_,v)},g.prototype.attachMediaElement=function(_){if(this._mediaElement=_,_.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{_.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},g.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},g.prototype.load=function(){if(!this._mediaElement)throw new p.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},g.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},g.prototype.play=function(){return this._mediaElement.play()},g.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(g.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(_){this._mediaElement.volume=_},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(_){this._mediaElement.muted=_},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(_){this._mediaElement?this._mediaElement.currentTime=_:this._pendingSeekTime=_},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"mediaInfo",{get:function(){var _=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",v={mimeType:_+this._mediaDataSource.type};return this._mediaElement&&(v.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(v.width=this._mediaElement.videoWidth,v.height=this._mediaElement.videoHeight)),v},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"statisticsInfo",{get:function(){var _={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return _;var v=!0,m=0,y=0;if(this._mediaElement.getVideoPlaybackQuality){var b=this._mediaElement.getVideoPlaybackQuality();m=b.totalVideoFrames,y=b.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(m=this._mediaElement.webkitDecodedFrameCount,y=this._mediaElement.webkitDroppedFrameCount):v=!1;return v&&(_.decodedFrames=m,_.droppedFrames=y),_},enumerable:!1,configurable:!0}),g.prototype._onvLoadedMetadata=function(_){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(f.default.MEDIA_INFO,this.mediaInfo)},g.prototype._reportStatisticsInfo=function(){this._emitter.emit(f.default.STATISTICS_INFO,this.statisticsInfo)},g}();s.default=d},"./src/player/player-errors.js":function(o,s,c){c.r(s),c.d(s,{ErrorTypes:function(){return f},ErrorDetails:function(){return h}});var l=c("./src/io/loader.js"),u=c("./src/demux/demux-errors.js"),f={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},h={NETWORK_EXCEPTION:l.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:u.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:u.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:u.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(o,s,c){c.r(s);var l={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};s.default=l},"./src/remux/aac-silent.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.getSilentFrame=function(f,h){if(f==="mp4a.40.2"){if(h===1)return new Uint8Array([0,200,0,128,35,128]);if(h===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(h===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(h===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(h===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(h===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(h===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(h===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(h===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},u}();s.default=l},"./src/remux/mp4-generator.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.init=function(){u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var f in u.types)u.types.hasOwnProperty(f)&&(u.types[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);var h=u.constants={};h.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),h.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),h.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSC=h.STCO=h.STTS,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),h.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),h.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},u.box=function(f){for(var h=8,p=null,d=Array.prototype.slice.call(arguments,1),g=d.length,_=0;_<g;_++)h+=d[_].byteLength;p=new Uint8Array(h),p[0]=h>>>24&255,p[1]=h>>>16&255,p[2]=h>>>8&255,p[3]=h&255,p.set(f,4);for(var v=8,_=0;_<g;_++)p.set(d[_],v),v+=d[_].byteLength;return p},u.generateInitSegment=function(f){var h=u.box(u.types.ftyp,u.constants.FTYP),p=u.moov(f),d=new Uint8Array(h.byteLength+p.byteLength);return d.set(h,0),d.set(p,h.byteLength),d},u.moov=function(f){var h=u.mvhd(f.timescale,f.duration),p=u.trak(f),d=u.mvex(f);return u.box(u.types.moov,h,p,d)},u.mvhd=function(f,h){return u.box(u.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},u.trak=function(f){return u.box(u.types.trak,u.tkhd(f),u.mdia(f))},u.tkhd=function(f){var h=f.id,p=f.duration,d=f.presentWidth,g=f.presentHeight;return u.box(u.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,0,p>>>24&255,p>>>16&255,p>>>8&255,p&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,d>>>8&255,d&255,0,0,g>>>8&255,g&255,0,0]))},u.mdia=function(f){return u.box(u.types.mdia,u.mdhd(f),u.hdlr(f),u.minf(f))},u.mdhd=function(f){var h=f.timescale,p=f.duration;return u.box(u.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,p>>>24&255,p>>>16&255,p>>>8&255,p&255,85,196,0,0]))},u.hdlr=function(f){var h=null;return f.type==="audio"?h=u.constants.HDLR_AUDIO:h=u.constants.HDLR_VIDEO,u.box(u.types.hdlr,h)},u.minf=function(f){var h=null;return f.type==="audio"?h=u.box(u.types.smhd,u.constants.SMHD):h=u.box(u.types.vmhd,u.constants.VMHD),u.box(u.types.minf,h,u.dinf(),u.stbl(f))},u.dinf=function(){var f=u.box(u.types.dinf,u.box(u.types.dref,u.constants.DREF));return f},u.stbl=function(f){var h=u.box(u.types.stbl,u.stsd(f),u.box(u.types.stts,u.constants.STTS),u.box(u.types.stsc,u.constants.STSC),u.box(u.types.stsz,u.constants.STSZ),u.box(u.types.stco,u.constants.STCO));return h},u.stsd=function(f){return f.type==="audio"?f.codec==="mp3"?u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp3(f)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp4a(f)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.avc1(f))},u.mp3=function(f){var h=f.channelCount,p=f.audioSampleRate,d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h,0,16,0,0,0,0,p>>>8&255,p&255,0,0]);return u.box(u.types[".mp3"],d)},u.mp4a=function(f){var h=f.channelCount,p=f.audioSampleRate,d=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h,0,16,0,0,0,0,p>>>8&255,p&255,0,0]);return u.box(u.types.mp4a,d,u.esds(f))},u.esds=function(f){var h=f.config||[],p=h.length,d=new Uint8Array([0,0,0,0,3,23+p,0,1,0,4,15+p,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([p]).concat(h).concat([6,1,2]));return u.box(u.types.esds,d)},u.avc1=function(f){var h=f.avcc,p=f.codecWidth,d=f.codecHeight,g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,p>>>8&255,p&255,d>>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return u.box(u.types.avc1,g,u.box(u.types.avcC,h))},u.mvex=function(f){return u.box(u.types.mvex,u.trex(f))},u.trex=function(f){var h=f.id,p=new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return u.box(u.types.trex,p)},u.moof=function(f,h){return u.box(u.types.moof,u.mfhd(f.sequenceNumber),u.traf(f,h))},u.mfhd=function(f){var h=new Uint8Array([0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255]);return u.box(u.types.mfhd,h)},u.traf=function(f,h){var p=f.id,d=u.box(u.types.tfhd,new Uint8Array([0,0,0,0,p>>>24&255,p>>>16&255,p>>>8&255,p&255])),g=u.box(u.types.tfdt,new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255])),_=u.sdtp(f),v=u.trun(f,_.byteLength+16+16+8+16+8+8);return u.box(u.types.traf,d,g,v,_)},u.sdtp=function(f){for(var h=f.samples||[],p=h.length,d=new Uint8Array(4+p),g=0;g<p;g++){var _=h[g].flags;d[g+4]=_.isLeading<<6|_.dependsOn<<4|_.isDependedOn<<2|_.hasRedundancy}return u.box(u.types.sdtp,d)},u.trun=function(f,h){var p=f.samples||[],d=p.length,g=12+16*d,_=new Uint8Array(g);h+=8+g,_.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,d&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255],0);for(var v=0;v<d;v++){var m=p[v].duration,y=p[v].size,b=p[v].flags,w=p[v].cts;_.set([m>>>24&255,m>>>16&255,m>>>8&255,m&255,y>>>24&255,y>>>16&255,y>>>8&255,y&255,b.isLeading<<2|b.dependsOn,b.isDependedOn<<6|b.hasRedundancy<<4|b.isNonSync,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255],12+16*v)}return u.box(u.types.trun,_)},u.mdat=function(f){return u.box(u.types.mdat,f)},u}();l.init(),s.default=l},"./src/remux/mp4-remuxer.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/remux/mp4-generator.js"),f=c("./src/remux/aac-silent.js"),h=c("./src/utils/browser.js"),p=c("./src/core/media-segment-info.js"),d=c("./src/utils/exception.js"),g=function(){function _(v){this.TAG="MP4Remuxer",this._config=v,this._isLive=v.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new p.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new p.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(h.default.chrome&&(h.default.version.major<50||h.default.version.major===50&&h.default.version.build<2661)),this._fillSilentAfterSeek=h.default.msedge||h.default.msie,this._mp3UseMpegAudio=!h.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return _.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},_.prototype.bindDataSource=function(v){return v.onDataAvailable=this.remux.bind(this),v.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(_.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(v){this._onInitSegment=v},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(v){this._onMediaSegment=v},enumerable:!1,configurable:!0}),_.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},_.prototype.seek=function(v){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},_.prototype.remux=function(v,m){if(!this._onMediaSegment)throw new d.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(v,m),this._remuxVideo(m),this._remuxAudio(v)},_.prototype._onTrackMetadataReceived=function(v,m){var y=null,b="mp4",w=m.codec;if(v==="audio")this._audioMeta=m,m.codec==="mp3"&&this._mp3UseMpegAudio?(b="mpeg",w="",y=new Uint8Array):y=u.default.generateInitSegment(m);else if(v==="video")this._videoMeta=m,y=u.default.generateInitSegment(m);else return;if(!this._onInitSegment)throw new d.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(v,{type:v,data:y.buffer,codec:w,container:v+"/"+b,mediaDuration:m.duration})},_.prototype._calculateDtsBase=function(v,m){this._dtsBaseInited||(v.samples&&v.samples.length&&(this._audioDtsBase=v.samples[0].dts),m.samples&&m.samples.length&&(this._videoDtsBase=m.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},_.prototype.flushStashedSamples=function(){var v=this._videoStashedLastSample,m=this._audioStashedLastSample,y={type:"video",id:1,sequenceNumber:0,samples:[],length:0};v!=null&&(y.samples.push(v),y.length=v.length);var b={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};m!=null&&(b.samples.push(m),b.length=m.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(y,!0),this._remuxAudio(b,!0)},_.prototype._remuxAudio=function(v,m){if(this._audioMeta!=null){var y=v,b=y.samples,w=void 0,E=-1,C=-1,T=this._audioMeta.refSampleDuration,A=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,I=this._dtsBaseInited&&this._audioNextDts===void 0,O=!1;if(!(!b||b.length===0)&&!(b.length===1&&!m)){var P=0,k=null,F=0;A?(P=0,F=y.length):(P=8,F=8+y.length);var M=null;if(b.length>1&&(M=b.pop(),F-=M.length),this._audioStashedLastSample!=null){var D=this._audioStashedLastSample;this._audioStashedLastSample=null,b.unshift(D),F+=D.length}M!=null&&(this._audioStashedLastSample=M);var G=b[0].dts-this._dtsBase;if(this._audioNextDts)w=G-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())w=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(O=!0);else{var Q=this._audioSegmentInfoList.getLastSampleBefore(G);if(Q!=null){var te=G-(Q.originalDts+Q.duration);te<=3&&(te=0);var Y=Q.dts+Q.duration+te;w=G-Y}else w=0}if(O){var U=G-w,z=this._videoSegmentInfoList.getLastSegmentBefore(G);if(z!=null&&z.beginDts<U){var j=f.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(j){var V=z.beginDts,ne=U-z.beginDts;l.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+V+", duration: "+ne),b.unshift({unit:j,dts:V,pts:V}),F+=j.byteLength}}else O=!1}for(var ae=[],pe=0;pe<b.length;pe++){var D=b[pe],se=D.unit,_e=D.dts-this._dtsBase,V=_e,Le=!1,Pe=null,Ee=0;if(!(_e<-.001)){if(this._audioMeta.codec!=="mp3"){var Se=_e,Ge=3;if(this._audioNextDts&&(Se=this._audioNextDts),w=_e-Se,w<=-Ge*T){l.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+_e+" ms ,curRefDts: "+Se+" ms)  due to dtsCorrection: "+w+" ms overlap.");continue}else if(w>=Ge*T&&this._fillAudioTimestampGap&&!h.default.safari){Le=!0;var We=Math.floor(w/T);l.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+_e+" ms, curRefDts: "+Se+" ms, ")+("dtsCorrection: "+Math.round(w)+" ms, generate: "+We+" frames")),V=Math.floor(Se),Ee=Math.floor(Se+T)-V;var j=f.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);j==null&&(l.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),j=se),Pe=[];for(var Ve=0;Ve<We;Ve++){Se=Se+T;var Xe=Math.floor(Se),Ke=Math.floor(Se+T)-Xe,bt={dts:Xe,pts:Xe,cts:0,unit:j,size:j.byteLength,duration:Ke,originalDts:_e,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};Pe.push(bt),F+=bt.size}this._audioNextDts=Se+T}else V=Math.floor(Se),Ee=Math.floor(Se+T)-V,this._audioNextDts=Se+T}else{if(V=_e-w,pe!==b.length-1){var Rt=b[pe+1].dts-this._dtsBase-w;Ee=Rt-V}else if(M!=null){var Rt=M.dts-this._dtsBase-w;Ee=Rt-V}else ae.length>=1?Ee=ae[ae.length-1].duration:Ee=Math.floor(T);this._audioNextDts=V+Ee}E===-1&&(E=V),ae.push({dts:V,pts:V,cts:0,unit:D.unit,size:D.unit.byteLength,duration:Ee,originalDts:_e,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),Le&&ae.push.apply(ae,Pe)}}if(ae.length===0){y.samples=[],y.length=0;return}A?k=new Uint8Array(F):(k=new Uint8Array(F),k[0]=F>>>24&255,k[1]=F>>>16&255,k[2]=F>>>8&255,k[3]=F&255,k.set(u.default.types.mdat,4));for(var pe=0;pe<ae.length;pe++){var se=ae[pe].unit;k.set(se,P),P+=se.byteLength}var ct=ae[ae.length-1];C=ct.dts+ct.duration;var gt=new p.MediaSegmentInfo;gt.beginDts=E,gt.endDts=C,gt.beginPts=E,gt.endPts=C,gt.originalBeginDts=ae[0].originalDts,gt.originalEndDts=ct.originalDts+ct.duration,gt.firstSample=new p.SampleInfo(ae[0].dts,ae[0].pts,ae[0].duration,ae[0].originalDts,!1),gt.lastSample=new p.SampleInfo(ct.dts,ct.pts,ct.duration,ct.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(gt),y.samples=ae,y.sequenceNumber++;var It=null;A?It=new Uint8Array:It=u.default.moof(y,E),y.samples=[],y.length=0;var fr={type:"audio",data:this._mergeBoxes(It,k).buffer,sampleCount:ae.length,info:gt};A&&I&&(fr.timestampOffset=E),this._onMediaSegment("audio",fr)}}},_.prototype._remuxVideo=function(v,m){if(this._videoMeta!=null){var y=v,b=y.samples,w=void 0,E=-1,C=-1,T=-1,A=-1;if(!(!b||b.length===0)&&!(b.length===1&&!m)){var I=8,O=null,P=8+v.length,k=null;if(b.length>1&&(k=b.pop(),P-=k.length),this._videoStashedLastSample!=null){var F=this._videoStashedLastSample;this._videoStashedLastSample=null,b.unshift(F),P+=F.length}k!=null&&(this._videoStashedLastSample=k);var M=b[0].dts-this._dtsBase;if(this._videoNextDts)w=M-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())w=0;else{var D=this._videoSegmentInfoList.getLastSampleBefore(M);if(D!=null){var G=M-(D.originalDts+D.duration);G<=3&&(G=0);var Q=D.dts+D.duration+G;w=M-Q}else w=0}for(var te=new p.MediaSegmentInfo,Y=[],U=0;U<b.length;U++){var F=b[U],z=F.dts-this._dtsBase,j=F.isKeyframe,V=z-w,ne=F.cts,ae=V+ne;E===-1&&(E=V,T=ae);var pe=0;if(U!==b.length-1){var se=b[U+1].dts-this._dtsBase-w;pe=se-V}else if(k!=null){var se=k.dts-this._dtsBase-w;pe=se-V}else Y.length>=1?pe=Y[Y.length-1].duration:pe=Math.floor(this._videoMeta.refSampleDuration);if(j){var _e=new p.SampleInfo(V,ae,pe,F.dts,!0);_e.fileposition=F.fileposition,te.appendSyncPoint(_e)}Y.push({dts:V,pts:ae,cts:ne,units:F.units,size:F.length,isKeyframe:j,duration:pe,originalDts:z,flags:{isLeading:0,dependsOn:j?2:1,isDependedOn:j?1:0,hasRedundancy:0,isNonSync:j?0:1}})}O=new Uint8Array(P),O[0]=P>>>24&255,O[1]=P>>>16&255,O[2]=P>>>8&255,O[3]=P&255,O.set(u.default.types.mdat,4);for(var U=0;U<Y.length;U++)for(var Le=Y[U].units;Le.length;){var Pe=Le.shift(),Ee=Pe.data;O.set(Ee,I),I+=Ee.byteLength}var Se=Y[Y.length-1];if(C=Se.dts+Se.duration,A=Se.pts+Se.duration,this._videoNextDts=C,te.beginDts=E,te.endDts=C,te.beginPts=T,te.endPts=A,te.originalBeginDts=Y[0].originalDts,te.originalEndDts=Se.originalDts+Se.duration,te.firstSample=new p.SampleInfo(Y[0].dts,Y[0].pts,Y[0].duration,Y[0].originalDts,Y[0].isKeyframe),te.lastSample=new p.SampleInfo(Se.dts,Se.pts,Se.duration,Se.originalDts,Se.isKeyframe),this._isLive||this._videoSegmentInfoList.append(te),y.samples=Y,y.sequenceNumber++,this._forceFirstIDR){var Ge=Y[0].flags;Ge.dependsOn=2,Ge.isNonSync=0}var We=u.default.moof(y,E);y.samples=[],y.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(We,O).buffer,sampleCount:Y.length,info:te})}}},_.prototype._mergeBoxes=function(v,m){var y=new Uint8Array(v.byteLength+m.byteLength);return y.set(v,0),y.set(m,v.byteLength),y},_}();s.default=g},"./src/utils/browser.js":function(o,s,c){c.r(s);var l={};function u(){var f=self.navigator.userAgent.toLowerCase(),h=/(edge)\/([\w.]+)/.exec(f)||/(opr)[\/]([\w.]+)/.exec(f)||/(chrome)[ \/]([\w.]+)/.exec(f)||/(iemobile)[\/]([\w.]+)/.exec(f)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+)/.exec(f)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(f)||/(msie) ([\w.]+)/.exec(f)||f.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(f)||f.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(f)||[],p=/(ipad)/.exec(f)||/(ipod)/.exec(f)||/(windows phone)/.exec(f)||/(iphone)/.exec(f)||/(kindle)/.exec(f)||/(android)/.exec(f)||/(windows)/.exec(f)||/(mac)/.exec(f)||/(linux)/.exec(f)||/(cros)/.exec(f)||[],d={browser:h[5]||h[3]||h[1]||"",version:h[2]||h[4]||"0",majorVersion:h[4]||h[2]||"0",platform:p[0]||""},g={};if(d.browser){g[d.browser]=!0;var _=d.majorVersion.split(".");g.version={major:parseInt(d.majorVersion,10),string:d.version},_.length>1&&(g.version.minor=parseInt(_[1],10)),_.length>2&&(g.version.build=parseInt(_[2],10))}if(d.platform&&(g[d.platform]=!0),(g.chrome||g.opr||g.safari)&&(g.webkit=!0),g.rv||g.iemobile){g.rv&&delete g.rv;var v="msie";d.browser=v,g[v]=!0}if(g.edge){delete g.edge;var m="msedge";d.browser=m,g[m]=!0}if(g.opr){var y="opera";d.browser=y,g[y]=!0}if(g.safari&&g.android){var b="android";d.browser=b,g[b]=!0}g.name=d.browser,g.platform=d.platform;for(var w in l)l.hasOwnProperty(w)&&delete l[w];Object.assign(l,g)}u(),s.default=l},"./src/utils/exception.js":function(o,s,c){c.r(s),c.d(s,{RuntimeException:function(){return u},IllegalStateException:function(){return f},InvalidArgumentException:function(){return h},NotImplementedException:function(){return p}});var l=function(){var d=function(g,_){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(v[y]=m[y])},d(g,_)};return function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");d(g,_);function v(){this.constructor=g}g.prototype=_===null?Object.create(_):(v.prototype=_.prototype,new v)}}(),u=function(){function d(g){this._message=g}return Object.defineProperty(d.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),d.prototype.toString=function(){return this.name+": "+this.message},d}(),f=function(d){l(g,d);function g(_){return d.call(this,_)||this}return Object.defineProperty(g.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),g}(u),h=function(d){l(g,d);function g(_){return d.call(this,_)||this}return Object.defineProperty(g.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),g}(u),p=function(d){l(g,d);function g(_){return d.call(this,_)||this}return Object.defineProperty(g.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),g}(u)},"./src/utils/logger.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=function(){function h(){}return h.e=function(p,d){(!p||h.FORCE_GLOBAL_TAG)&&(p=h.GLOBAL_TAG);var g="["+p+"] > "+d;h.ENABLE_CALLBACK&&h.emitter.emit("log","error",g),h.ENABLE_ERROR&&(console.error?console.error(g):console.warn?console.warn(g):console.log(g))},h.i=function(p,d){(!p||h.FORCE_GLOBAL_TAG)&&(p=h.GLOBAL_TAG);var g="["+p+"] > "+d;h.ENABLE_CALLBACK&&h.emitter.emit("log","info",g),h.ENABLE_INFO&&(console.info?console.info(g):console.log(g))},h.w=function(p,d){(!p||h.FORCE_GLOBAL_TAG)&&(p=h.GLOBAL_TAG);var g="["+p+"] > "+d;h.ENABLE_CALLBACK&&h.emitter.emit("log","warn",g),h.ENABLE_WARN&&(console.warn?console.warn(g):console.log(g))},h.d=function(p,d){(!p||h.FORCE_GLOBAL_TAG)&&(p=h.GLOBAL_TAG);var g="["+p+"] > "+d;h.ENABLE_CALLBACK&&h.emitter.emit("log","debug",g),h.ENABLE_DEBUG&&(console.debug?console.debug(g):console.log(g))},h.v=function(p,d){(!p||h.FORCE_GLOBAL_TAG)&&(p=h.GLOBAL_TAG);var g="["+p+"] > "+d;h.ENABLE_CALLBACK&&h.emitter.emit("log","verbose",g),h.ENABLE_VERBOSE&&console.log(g)},h}();f.GLOBAL_TAG="flv.js",f.FORCE_GLOBAL_TAG=!1,f.ENABLE_ERROR=!0,f.ENABLE_INFO=!0,f.ENABLE_WARN=!0,f.ENABLE_DEBUG=!0,f.ENABLE_VERBOSE=!0,f.ENABLE_CALLBACK=!1,f.emitter=new(u()),s.default=f},"./src/utils/logging-control.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=function(){function p(){}return Object.defineProperty(p,"forceGlobalTag",{get:function(){return f.default.FORCE_GLOBAL_TAG},set:function(d){f.default.FORCE_GLOBAL_TAG=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"globalTag",{get:function(){return f.default.GLOBAL_TAG},set:function(d){f.default.GLOBAL_TAG=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"enableAll",{get:function(){return f.default.ENABLE_VERBOSE&&f.default.ENABLE_DEBUG&&f.default.ENABLE_INFO&&f.default.ENABLE_WARN&&f.default.ENABLE_ERROR},set:function(d){f.default.ENABLE_VERBOSE=d,f.default.ENABLE_DEBUG=d,f.default.ENABLE_INFO=d,f.default.ENABLE_WARN=d,f.default.ENABLE_ERROR=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"enableDebug",{get:function(){return f.default.ENABLE_DEBUG},set:function(d){f.default.ENABLE_DEBUG=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"enableVerbose",{get:function(){return f.default.ENABLE_VERBOSE},set:function(d){f.default.ENABLE_VERBOSE=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"enableInfo",{get:function(){return f.default.ENABLE_INFO},set:function(d){f.default.ENABLE_INFO=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"enableWarn",{get:function(){return f.default.ENABLE_WARN},set:function(d){f.default.ENABLE_WARN=d,p._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(p,"enableError",{get:function(){return f.default.ENABLE_ERROR},set:function(d){f.default.ENABLE_ERROR=d,p._notifyChange()},enumerable:!1,configurable:!0}),p.getConfig=function(){return{globalTag:f.default.GLOBAL_TAG,forceGlobalTag:f.default.FORCE_GLOBAL_TAG,enableVerbose:f.default.ENABLE_VERBOSE,enableDebug:f.default.ENABLE_DEBUG,enableInfo:f.default.ENABLE_INFO,enableWarn:f.default.ENABLE_WARN,enableError:f.default.ENABLE_ERROR,enableCallback:f.default.ENABLE_CALLBACK}},p.applyConfig=function(d){f.default.GLOBAL_TAG=d.globalTag,f.default.FORCE_GLOBAL_TAG=d.forceGlobalTag,f.default.ENABLE_VERBOSE=d.enableVerbose,f.default.ENABLE_DEBUG=d.enableDebug,f.default.ENABLE_INFO=d.enableInfo,f.default.ENABLE_WARN=d.enableWarn,f.default.ENABLE_ERROR=d.enableError,f.default.ENABLE_CALLBACK=d.enableCallback},p._notifyChange=function(){var d=p.emitter;if(d.listenerCount("change")>0){var g=p.getConfig();d.emit("change",g)}},p.registerListener=function(d){p.emitter.addListener("change",d)},p.removeListener=function(d){p.emitter.removeListener("change",d)},p.addLogListener=function(d){f.default.emitter.addListener("log",d),f.default.emitter.listenerCount("log")>0&&(f.default.ENABLE_CALLBACK=!0,p._notifyChange())},p.removeLogListener=function(d){f.default.emitter.removeListener("log",d),f.default.emitter.listenerCount("log")===0&&(f.default.ENABLE_CALLBACK=!1,p._notifyChange())},p}();h.emitter=new(u()),s.default=h},"./src/utils/polyfill.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f},Object.assign=Object.assign||function(f){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(f),p=1;p<arguments.length;p++){var d=arguments[p];if(d!=null)for(var g in d)d.hasOwnProperty(g)&&(h[g]=d[g])}return h},typeof self.Promise!="function"&&c("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},u}();l.install(),s.default=l},"./src/utils/utf8-conv.js":function(o,s,c){c.r(s);function l(f,h,p){var d=f;if(h+p<d.length){for(;p--;)if((d[++h]&192)!==128)return!1;return!0}else return!1}function u(f){for(var h=[],p=f,d=0,g=f.length;d<g;){if(p[d]<128){h.push(String.fromCharCode(p[d])),++d;continue}else if(!(p[d]<192)){if(p[d]<224){if(l(p,d,1)){var _=(p[d]&31)<<6|p[d+1]&63;if(_>=128){h.push(String.fromCharCode(_&65535)),d+=2;continue}}}else if(p[d]<240){if(l(p,d,2)){var _=(p[d]&15)<<12|(p[d+1]&63)<<6|p[d+2]&63;if(_>=2048&&(_&63488)!==55296){h.push(String.fromCharCode(_&65535)),d+=3;continue}}}else if(p[d]<248&&l(p,d,3)){var _=(p[d]&7)<<18|(p[d+1]&63)<<12|(p[d+2]&63)<<6|p[d+3]&63;if(_>65536&&_<1114112){_-=65536,h.push(String.fromCharCode(_>>>10|55296)),h.push(String.fromCharCode(_&1023|56320)),d+=4;continue}}}h.push(String.fromCharCode(65533)),++d}return h.join("")}s.default=u}},n={};function i(o){var s=n[o];if(s!==void 0)return s.exports;var c=n[o]={exports:{}};return r[o].call(c.exports,c,c.exports,i),c.exports}i.m=r,function(){i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,{a:s}),s}}(),function(){i.d=function(o,s){for(var c in s)i.o(s,c)&&!i.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:s[c]})}}(),function(){i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)}}(),function(){i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}();var a=i("./src/index.js");return a}()})})(IH);var UNe=IH.exports;const DT=Gi(UNe);var jNe={exports:{}},sE={exports:{}},e8;function yr(){return e8||(e8=1,function(e,t){(function(r,n){e.exports=n()})(Ct,function(){var r=r||function(n,i){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof Ct<"u"&&Ct.crypto&&(a=Ct.crypto),!a&&typeof Cf=="function")try{a=dG}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function m(){}return function(y){var b;return m.prototype=y,b=new m,m.prototype=null,b}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(m){var y=s(this);return m&&y.mixIn(m),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var y in m)m.hasOwnProperty(y)&&(this[y]=m[y]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(m,y){m=this.words=m||[],y!=i?this.sigBytes=y:this.sigBytes=m.length*4},toString:function(m){return(m||p).stringify(this)},concat:function(m){var y=this.words,b=m.words,w=this.sigBytes,E=m.sigBytes;if(this.clamp(),w%4)for(var C=0;C<E;C++){var T=b[C>>>2]>>>24-C%4*8&255;y[w+C>>>2]|=T<<24-(w+C)%4*8}else for(var A=0;A<E;A+=4)y[w+A>>>2]=b[A>>>2];return this.sigBytes+=E,this},clamp:function(){var m=this.words,y=this.sigBytes;m[y>>>2]&=4294967295<<32-y%4*8,m.length=n.ceil(y/4)},clone:function(){var m=u.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var y=[],b=0;b<m;b+=4)y.push(o());return new f.init(y,m)}}),h=c.enc={},p=h.Hex={stringify:function(m){for(var y=m.words,b=m.sigBytes,w=[],E=0;E<b;E++){var C=y[E>>>2]>>>24-E%4*8&255;w.push((C>>>4).toString(16)),w.push((C&15).toString(16))}return w.join("")},parse:function(m){for(var y=m.length,b=[],w=0;w<y;w+=2)b[w>>>3]|=parseInt(m.substr(w,2),16)<<24-w%8*4;return new f.init(b,y/2)}},d=h.Latin1={stringify:function(m){for(var y=m.words,b=m.sigBytes,w=[],E=0;E<b;E++){var C=y[E>>>2]>>>24-E%4*8&255;w.push(String.fromCharCode(C))}return w.join("")},parse:function(m){for(var y=m.length,b=[],w=0;w<y;w++)b[w>>>2]|=(m.charCodeAt(w)&255)<<24-w%4*8;return new f.init(b,y)}},g=h.Utf8={stringify:function(m){try{return decodeURIComponent(escape(d.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return d.parse(unescape(encodeURIComponent(m)))}},_=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=g.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var y,b=this._data,w=b.words,E=b.sigBytes,C=this.blockSize,T=C*4,A=E/T;m?A=n.ceil(A):A=n.max((A|0)-this._minBufferSize,0);var I=A*C,O=n.min(I*4,E);if(I){for(var P=0;P<I;P+=C)this._doProcessBlock(w,P);y=w.splice(0,I),b.sigBytes-=O}return new f.init(y,O)},clone:function(){var m=u.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});l.Hasher=_.extend({cfg:u.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var y=this._doFinalize();return y},blockSize:16,_createHelper:function(m){return function(y,b){return new m.init(b).finalize(y)}},_createHmacHelper:function(m){return function(y,b){return new v.HMAC.init(m,b).finalize(y)}}});var v=c.algo={};return c}(Math);return r})}(sE)),sE.exports}var lE={exports:{}},t8;function gx(){return t8||(t8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(n){var i=r,a=i.lib,o=a.Base,s=a.WordArray,c=i.x64={};c.Word=o.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=o.extend({init:function(l,u){l=this.words=l||[],u!=n?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,f=[],h=0;h<u;h++){var p=l[h];f.push(p.high),f.push(p.low)}return s.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),u=l.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return l}})}(),r})}(lE)),lE.exports}var uE={exports:{}},r8;function $Ne(){return r8||(r8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,a=i.WordArray,o=a.init,s=a.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],f=0;f<l;f++)u[f>>>2]|=c[f]<<24-f%4*8;o.call(this,u,l)}else o.apply(this,arguments)};s.prototype=a}}(),r.lib.WordArray})}(uE)),uE.exports}var cE={exports:{}},n8;function GNe(){return n8||(n8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],h=0;h<u;h+=2){var p=l[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(p))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return a.create(u,l*2)}},o.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],h=0;h<u;h+=2){var p=s(l[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(p))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=s(c.charCodeAt(f)<<16-f%2*16);return a.create(u,l*2)}};function s(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(cE)),cE.exports}var fE={exports:{}},i8;function Pc(){return i8||(i8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var h=[],p=0;p<u;p+=3)for(var d=l[p>>>2]>>>24-p%4*8&255,g=l[p+1>>>2]>>>24-(p+1)%4*8&255,_=l[p+2>>>2]>>>24-(p+2)%4*8&255,v=d<<16|g<<8|_,m=0;m<4&&p+m*.75<u;m++)h.push(f.charAt(v>>>6*(3-m)&63));var y=f.charAt(64);if(y)for(;h.length%4;)h.push(y);return h.join("")},parse:function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var p=u.charAt(64);if(p){var d=c.indexOf(p);d!==-1&&(l=d)}return s(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(c,l,u){for(var f=[],h=0,p=0;p<l;p++)if(p%4){var d=u[c.charCodeAt(p-1)]<<p%4*2,g=u[c.charCodeAt(p)]>>>6-p%4*2,_=d|g;f[h>>>2]|=_<<24-h%4*8,h++}return a.create(f,h)}}(),r.enc.Base64})}(fE)),fE.exports}var hE={exports:{}},a8;function VNe(){return a8||(a8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,h=l?this._safe_map:this._map;c.clamp();for(var p=[],d=0;d<f;d+=3)for(var g=u[d>>>2]>>>24-d%4*8&255,_=u[d+1>>>2]>>>24-(d+1)%4*8&255,v=u[d+2>>>2]>>>24-(d+2)%4*8&255,m=g<<16|_<<8|v,y=0;y<4&&d+y*.75<f;y++)p.push(h.charAt(m>>>6*(3-y)&63));var b=h.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var p=0;p<f.length;p++)h[f.charCodeAt(p)]=p}var d=f.charAt(64);if(d){var g=c.indexOf(d);g!==-1&&(u=g)}return s(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(c,l,u){for(var f=[],h=0,p=0;p<l;p++)if(p%4){var d=u[c.charCodeAt(p-1)]<<p%4*2,g=u[c.charCodeAt(p)]>>>6-p%4*2,_=d|g;f[h>>>2]|=_<<24-h%4*8,h++}return a.create(f,h)}}(),r.enc.Base64url})}(hE)),hE.exports}var dE={exports:{}},o8;function Oc(){return o8||(o8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=[];(function(){for(var g=0;g<64;g++)l[g]=n.abs(n.sin(g+1))*4294967296|0})();var u=c.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,_){for(var v=0;v<16;v++){var m=_+v,y=g[m];g[m]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var b=this._hash.words,w=g[_+0],E=g[_+1],C=g[_+2],T=g[_+3],A=g[_+4],I=g[_+5],O=g[_+6],P=g[_+7],k=g[_+8],F=g[_+9],M=g[_+10],D=g[_+11],G=g[_+12],Q=g[_+13],te=g[_+14],Y=g[_+15],U=b[0],z=b[1],j=b[2],V=b[3];U=f(U,z,j,V,w,7,l[0]),V=f(V,U,z,j,E,12,l[1]),j=f(j,V,U,z,C,17,l[2]),z=f(z,j,V,U,T,22,l[3]),U=f(U,z,j,V,A,7,l[4]),V=f(V,U,z,j,I,12,l[5]),j=f(j,V,U,z,O,17,l[6]),z=f(z,j,V,U,P,22,l[7]),U=f(U,z,j,V,k,7,l[8]),V=f(V,U,z,j,F,12,l[9]),j=f(j,V,U,z,M,17,l[10]),z=f(z,j,V,U,D,22,l[11]),U=f(U,z,j,V,G,7,l[12]),V=f(V,U,z,j,Q,12,l[13]),j=f(j,V,U,z,te,17,l[14]),z=f(z,j,V,U,Y,22,l[15]),U=h(U,z,j,V,E,5,l[16]),V=h(V,U,z,j,O,9,l[17]),j=h(j,V,U,z,D,14,l[18]),z=h(z,j,V,U,w,20,l[19]),U=h(U,z,j,V,I,5,l[20]),V=h(V,U,z,j,M,9,l[21]),j=h(j,V,U,z,Y,14,l[22]),z=h(z,j,V,U,A,20,l[23]),U=h(U,z,j,V,F,5,l[24]),V=h(V,U,z,j,te,9,l[25]),j=h(j,V,U,z,T,14,l[26]),z=h(z,j,V,U,k,20,l[27]),U=h(U,z,j,V,Q,5,l[28]),V=h(V,U,z,j,C,9,l[29]),j=h(j,V,U,z,P,14,l[30]),z=h(z,j,V,U,G,20,l[31]),U=p(U,z,j,V,I,4,l[32]),V=p(V,U,z,j,k,11,l[33]),j=p(j,V,U,z,D,16,l[34]),z=p(z,j,V,U,te,23,l[35]),U=p(U,z,j,V,E,4,l[36]),V=p(V,U,z,j,A,11,l[37]),j=p(j,V,U,z,P,16,l[38]),z=p(z,j,V,U,M,23,l[39]),U=p(U,z,j,V,Q,4,l[40]),V=p(V,U,z,j,w,11,l[41]),j=p(j,V,U,z,T,16,l[42]),z=p(z,j,V,U,O,23,l[43]),U=p(U,z,j,V,F,4,l[44]),V=p(V,U,z,j,G,11,l[45]),j=p(j,V,U,z,Y,16,l[46]),z=p(z,j,V,U,C,23,l[47]),U=d(U,z,j,V,w,6,l[48]),V=d(V,U,z,j,P,10,l[49]),j=d(j,V,U,z,te,15,l[50]),z=d(z,j,V,U,I,21,l[51]),U=d(U,z,j,V,G,6,l[52]),V=d(V,U,z,j,T,10,l[53]),j=d(j,V,U,z,M,15,l[54]),z=d(z,j,V,U,E,21,l[55]),U=d(U,z,j,V,k,6,l[56]),V=d(V,U,z,j,Y,10,l[57]),j=d(j,V,U,z,O,15,l[58]),z=d(z,j,V,U,Q,21,l[59]),U=d(U,z,j,V,A,6,l[60]),V=d(V,U,z,j,D,10,l[61]),j=d(j,V,U,z,C,15,l[62]),z=d(z,j,V,U,F,21,l[63]),b[0]=b[0]+U|0,b[1]=b[1]+z|0,b[2]=b[2]+j|0,b[3]=b[3]+V|0},_doFinalize:function(){var g=this._data,_=g.words,v=this._nDataBytes*8,m=g.sigBytes*8;_[m>>>5]|=128<<24-m%32;var y=n.floor(v/4294967296),b=v;_[(m+64>>>9<<4)+15]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,_[(m+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g.sigBytes=(_.length+1)*4,this._process();for(var w=this._hash,E=w.words,C=0;C<4;C++){var T=E[C];E[C]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return w},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g}});function f(g,_,v,m,y,b,w){var E=g+(_&v|~_&m)+y+w;return(E<<b|E>>>32-b)+_}function h(g,_,v,m,y,b,w){var E=g+(_&m|v&~m)+y+w;return(E<<b|E>>>32-b)+_}function p(g,_,v,m,y,b,w){var E=g+(_^v^m)+y+w;return(E<<b|E>>>32-b)+_}function d(g,_,v,m,y,b,w){var E=g+(v^(_|~m))+y+w;return(E<<b|E>>>32-b)+_}i.MD5=s._createHelper(u),i.HmacMD5=s._createHmacHelper(u)}(Math),r.MD5})}(dE)),dE.exports}var pE={exports:{}},s8;function RH(){return s8||(s8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=i.Hasher,s=n.algo,c=[],l=s.SHA1=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,p=h[0],d=h[1],g=h[2],_=h[3],v=h[4],m=0;m<80;m++){if(m<16)c[m]=u[f+m]|0;else{var y=c[m-3]^c[m-8]^c[m-14]^c[m-16];c[m]=y<<1|y>>>31}var b=(p<<5|p>>>27)+v+c[m];m<20?b+=(d&g|~d&_)+1518500249:m<40?b+=(d^g^_)+1859775393:m<60?b+=(d&g|d&_|g&_)-1894007588:b+=(d^g^_)-899497514,v=_,_=g,g=d<<30|d>>>2,d=p,p=b}h[0]=h[0]+p|0,h[1]=h[1]+d|0,h[2]=h[2]+g|0,h[3]=h[3]+_|0,h[4]=h[4]+v|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,p=u.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(p+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=o._createHelper(l),n.HmacSHA1=o._createHmacHelper(l)}(),r.SHA1})}(pE)),pE.exports}var vE={exports:{}},l8;function uO(){return l8||(l8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=[],u=[];(function(){function p(v){for(var m=n.sqrt(v),y=2;y<=m;y++)if(!(v%y))return!1;return!0}function d(v){return(v-(v|0))*4294967296|0}for(var g=2,_=0;_<64;)p(g)&&(_<8&&(l[_]=d(n.pow(g,1/2))),u[_]=d(n.pow(g,1/3)),_++),g++})();var f=[],h=c.SHA256=s.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(p,d){for(var g=this._hash.words,_=g[0],v=g[1],m=g[2],y=g[3],b=g[4],w=g[5],E=g[6],C=g[7],T=0;T<64;T++){if(T<16)f[T]=p[d+T]|0;else{var A=f[T-15],I=(A<<25|A>>>7)^(A<<14|A>>>18)^A>>>3,O=f[T-2],P=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;f[T]=I+f[T-7]+P+f[T-16]}var k=b&w^~b&E,F=_&v^_&m^v&m,M=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),D=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),G=C+D+k+u[T]+f[T],Q=M+F;C=E,E=w,w=b,b=y+G|0,y=m,m=v,v=_,_=G+Q|0}g[0]=g[0]+_|0,g[1]=g[1]+v|0,g[2]=g[2]+m|0,g[3]=g[3]+y|0,g[4]=g[4]+b|0,g[5]=g[5]+w|0,g[6]=g[6]+E|0,g[7]=g[7]+C|0},_doFinalize:function(){var p=this._data,d=p.words,g=this._nDataBytes*8,_=p.sigBytes*8;return d[_>>>5]|=128<<24-_%32,d[(_+64>>>9<<4)+14]=n.floor(g/4294967296),d[(_+64>>>9<<4)+15]=g,p.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p}});i.SHA256=s._createHelper(h),i.HmacSHA256=s._createHmacHelper(h)}(Math),r.SHA256})}(vE)),vE.exports}var gE={exports:{}},u8;function HNe(){return u8||(u8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),uO())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.algo,s=o.SHA256,c=o.SHA224=s.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=s._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=s._createHelper(c),n.HmacSHA224=s._createHmacHelper(c)}(),r.SHA224})}(gE)),gE.exports}var mE={exports:{}},c8;function PH(){return c8||(c8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),gx())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.Hasher,o=n.x64,s=o.Word,c=o.WordArray,l=n.algo;function u(){return s.create.apply(s,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var d=0;d<80;d++)h[d]=u()})();var p=l.SHA512=a.extend({_doReset:function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(d,g){for(var _=this._hash.words,v=_[0],m=_[1],y=_[2],b=_[3],w=_[4],E=_[5],C=_[6],T=_[7],A=v.high,I=v.low,O=m.high,P=m.low,k=y.high,F=y.low,M=b.high,D=b.low,G=w.high,Q=w.low,te=E.high,Y=E.low,U=C.high,z=C.low,j=T.high,V=T.low,ne=A,ae=I,pe=O,se=P,_e=k,Le=F,Pe=M,Ee=D,Se=G,Ge=Q,We=te,Ve=Y,Xe=U,Ke=z,bt=j,Rt=V,ct=0;ct<80;ct++){var gt,It,fr=h[ct];if(ct<16)It=fr.high=d[g+ct*2]|0,gt=fr.low=d[g+ct*2+1]|0;else{var er=h[ct-15],hr=er.high,qt=er.low,wt=(hr>>>1|qt<<31)^(hr>>>8|qt<<24)^hr>>>7,sr=(qt>>>1|hr<<31)^(qt>>>8|hr<<24)^(qt>>>7|hr<<25),ke=h[ct-2],H=ke.high,ve=ke.low,Te=(H>>>19|ve<<13)^(H<<3|ve>>>29)^H>>>6,Fe=(ve>>>19|H<<13)^(ve<<3|H>>>29)^(ve>>>6|H<<26),oe=h[ct-7],Ie=oe.high,W=oe.low,Ue=h[ct-16],dt=Ue.high,N=Ue.low;gt=sr+W,It=wt+Ie+(gt>>>0<sr>>>0?1:0),gt=gt+Fe,It=It+Te+(gt>>>0<Fe>>>0?1:0),gt=gt+N,It=It+dt+(gt>>>0<N>>>0?1:0),fr.high=It,fr.low=gt}var Re=Se&We^~Se&Xe,Oe=Ge&Ve^~Ge&Ke,q=ne&pe^ne&_e^pe&_e,ce=ae&se^ae&Le^se&Le,Ce=(ne>>>28|ae<<4)^(ne<<30|ae>>>2)^(ne<<25|ae>>>7),ft=(ae>>>28|ne<<4)^(ae<<30|ne>>>2)^(ae<<25|ne>>>7),Qe=(Se>>>14|Ge<<18)^(Se>>>18|Ge<<14)^(Se<<23|Ge>>>9),st=(Ge>>>14|Se<<18)^(Ge>>>18|Se<<14)^(Ge<<23|Se>>>9),kt=f[ct],Rn=kt.high,ir=kt.low,St=Rt+st,xr=bt+Qe+(St>>>0<Rt>>>0?1:0),St=St+Oe,xr=xr+Re+(St>>>0<Oe>>>0?1:0),St=St+ir,xr=xr+Rn+(St>>>0<ir>>>0?1:0),St=St+gt,xr=xr+It+(St>>>0<gt>>>0?1:0),en=ft+ce,Gn=Ce+q+(en>>>0<ft>>>0?1:0);bt=Xe,Rt=Ke,Xe=We,Ke=Ve,We=Se,Ve=Ge,Ge=Ee+St|0,Se=Pe+xr+(Ge>>>0<Ee>>>0?1:0)|0,Pe=_e,Ee=Le,_e=pe,Le=se,pe=ne,se=ae,ae=St+en|0,ne=xr+Gn+(ae>>>0<St>>>0?1:0)|0}I=v.low=I+ae,v.high=A+ne+(I>>>0<ae>>>0?1:0),P=m.low=P+se,m.high=O+pe+(P>>>0<se>>>0?1:0),F=y.low=F+Le,y.high=k+_e+(F>>>0<Le>>>0?1:0),D=b.low=D+Ee,b.high=M+Pe+(D>>>0<Ee>>>0?1:0),Q=w.low=Q+Ge,w.high=G+Se+(Q>>>0<Ge>>>0?1:0),Y=E.low=Y+Ve,E.high=te+We+(Y>>>0<Ve>>>0?1:0),z=C.low=z+Ke,C.high=U+Xe+(z>>>0<Ke>>>0?1:0),V=T.low=V+Rt,T.high=j+bt+(V>>>0<Rt>>>0?1:0)},_doFinalize:function(){var d=this._data,g=d.words,_=this._nDataBytes*8,v=d.sigBytes*8;g[v>>>5]|=128<<24-v%32,g[(v+128>>>10<<5)+30]=Math.floor(_/4294967296),g[(v+128>>>10<<5)+31]=_,d.sigBytes=g.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:1024/32});n.SHA512=a._createHelper(p),n.HmacSHA512=a._createHmacHelper(p)}(),r.SHA512})}(mE)),mE.exports}var _E={exports:{}},f8;function XNe(){return f8||(f8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),gx(),PH())})(Ct,function(r){return function(){var n=r,i=n.x64,a=i.Word,o=i.WordArray,s=n.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l)}(),r.SHA384})}(_E)),_E.exports}var yE={exports:{}},h8;function zNe(){return h8||(h8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),gx())})(Ct,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.x64,l=c.Word,u=i.algo,f=[],h=[],p=[];(function(){for(var _=1,v=0,m=0;m<24;m++){f[_+5*v]=(m+1)*(m+2)/2%64;var y=v%5,b=(2*_+3*v)%5;_=y,v=b}for(var _=0;_<5;_++)for(var v=0;v<5;v++)h[_+5*v]=v+(2*_+3*v)%5*5;for(var w=1,E=0;E<24;E++){for(var C=0,T=0,A=0;A<7;A++){if(w&1){var I=(1<<A)-1;I<32?T^=1<<I:C^=1<<I-32}w&128?w=w<<1^113:w<<=1}p[E]=l.create(C,T)}})();var d=[];(function(){for(var _=0;_<25;_++)d[_]=l.create()})();var g=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var _=this._state=[],v=0;v<25;v++)_[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(_,v){for(var m=this._state,y=this.blockSize/2,b=0;b<y;b++){var w=_[v+2*b],E=_[v+2*b+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360;var C=m[b];C.high^=E,C.low^=w}for(var T=0;T<24;T++){for(var A=0;A<5;A++){for(var I=0,O=0,P=0;P<5;P++){var C=m[A+5*P];I^=C.high,O^=C.low}var k=d[A];k.high=I,k.low=O}for(var A=0;A<5;A++)for(var F=d[(A+4)%5],M=d[(A+1)%5],D=M.high,G=M.low,I=F.high^(D<<1|G>>>31),O=F.low^(G<<1|D>>>31),P=0;P<5;P++){var C=m[A+5*P];C.high^=I,C.low^=O}for(var Q=1;Q<25;Q++){var I,O,C=m[Q],te=C.high,Y=C.low,U=f[Q];U<32?(I=te<<U|Y>>>32-U,O=Y<<U|te>>>32-U):(I=Y<<U-32|te>>>64-U,O=te<<U-32|Y>>>64-U);var z=d[h[Q]];z.high=I,z.low=O}var j=d[0],V=m[0];j.high=V.high,j.low=V.low;for(var A=0;A<5;A++)for(var P=0;P<5;P++){var Q=A+5*P,C=m[Q],ne=d[Q],ae=d[(A+1)%5+5*P],pe=d[(A+2)%5+5*P];C.high=ne.high^~ae.high&pe.high,C.low=ne.low^~ae.low&pe.low}var C=m[0],se=p[T];C.high^=se.high,C.low^=se.low}},_doFinalize:function(){var _=this._data,v=_.words;this._nDataBytes*8;var m=_.sigBytes*8,y=this.blockSize*32;v[m>>>5]|=1<<24-m%32,v[(n.ceil((m+1)/y)*y>>>5)-1]|=128,_.sigBytes=v.length*4,this._process();for(var b=this._state,w=this.cfg.outputLength/8,E=w/8,C=[],T=0;T<E;T++){var A=b[T],I=A.high,O=A.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,C.push(O),C.push(I)}return new o.init(C,w)},clone:function(){for(var _=s.clone.call(this),v=_._state=this._state.slice(0),m=0;m<25;m++)v[m]=v[m].clone();return _}});i.SHA3=s._createHelper(g),i.HmacSHA3=s._createHmacHelper(g)}(Math),r.SHA3})}(yE)),yE.exports}var xE={exports:{}},d8;function WNe(){return d8||(d8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=o.create([0,1518500249,1859775393,2400959708,2840853838]),d=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=c.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(E,C){for(var T=0;T<16;T++){var A=C+T,I=E[A];E[A]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var O=this._hash.words,P=p.words,k=d.words,F=l.words,M=u.words,D=f.words,G=h.words,Q,te,Y,U,z,j,V,ne,ae,pe;j=Q=O[0],V=te=O[1],ne=Y=O[2],ae=U=O[3],pe=z=O[4];for(var se,T=0;T<80;T+=1)se=Q+E[C+F[T]]|0,T<16?se+=_(te,Y,U)+P[0]:T<32?se+=v(te,Y,U)+P[1]:T<48?se+=m(te,Y,U)+P[2]:T<64?se+=y(te,Y,U)+P[3]:se+=b(te,Y,U)+P[4],se=se|0,se=w(se,D[T]),se=se+z|0,Q=z,z=U,U=w(Y,10),Y=te,te=se,se=j+E[C+M[T]]|0,T<16?se+=b(V,ne,ae)+k[0]:T<32?se+=y(V,ne,ae)+k[1]:T<48?se+=m(V,ne,ae)+k[2]:T<64?se+=v(V,ne,ae)+k[3]:se+=_(V,ne,ae)+k[4],se=se|0,se=w(se,G[T]),se=se+pe|0,j=pe,pe=ae,ae=w(ne,10),ne=V,V=se;se=O[1]+Y+ae|0,O[1]=O[2]+U+pe|0,O[2]=O[3]+z+j|0,O[3]=O[4]+Q+V|0,O[4]=O[0]+te+ne|0,O[0]=se},_doFinalize:function(){var E=this._data,C=E.words,T=this._nDataBytes*8,A=E.sigBytes*8;C[A>>>5]|=128<<24-A%32,C[(A+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,E.sigBytes=(C.length+1)*4,this._process();for(var I=this._hash,O=I.words,P=0;P<5;P++){var k=O[P];O[P]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return I},clone:function(){var E=s.clone.call(this);return E._hash=this._hash.clone(),E}});function _(E,C,T){return E^C^T}function v(E,C,T){return E&C|~E&T}function m(E,C,T){return(E|~C)^T}function y(E,C,T){return E&T|C&~T}function b(E,C,T){return E^(C|~T)}function w(E,C){return E<<C|E>>>32-C}i.RIPEMD160=s._createHelper(g),i.HmacRIPEMD160=s._createHmacHelper(g)}(),r.RIPEMD160})}(xE)),xE.exports}var bE={exports:{}},p8;function cO(){return p8||(p8=1,function(e,t){(function(r,n){e.exports=n(yr())})(Ct,function(r){(function(){var n=r,i=n.lib,a=i.Base,o=n.enc,s=o.Utf8,c=n.algo;c.HMAC=a.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=s.parse(u));var f=l.blockSize,h=f*4;u.sigBytes>h&&(u=l.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),d=this._iKey=u.clone(),g=p.words,_=d.words,v=0;v<f;v++)g[v]^=1549556828,_[v]^=909522486;p.sigBytes=d.sigBytes=h,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,f=u.finalize(l);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(bE)),bE.exports}var wE={exports:{}},v8;function YNe(){return v8||(v8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),uO(),cO())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.Base,o=i.WordArray,s=n.algo,c=s.SHA256,l=s.HMAC,u=s.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var p=this.cfg,d=l.create(p.hasher,f),g=o.create(),_=o.create([1]),v=g.words,m=_.words,y=p.keySize,b=p.iterations;v.length<y;){var w=d.update(h).finalize(_);d.reset();for(var E=w.words,C=E.length,T=w,A=1;A<b;A++){T=d.finalize(T),d.reset();for(var I=T.words,O=0;O<C;O++)E[O]^=I[O]}g.concat(w),m[0]++}return g.sigBytes=y*4,g}});n.PBKDF2=function(f,h,p){return u.create(p).compute(f,h)}}(),r.PBKDF2})}(wE)),wE.exports}var EE={exports:{}},g8;function du(){return g8||(g8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),RH(),cO())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.Base,o=i.WordArray,s=n.algo,c=s.MD5,l=s.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,p=this.cfg,d=p.hasher.create(),g=o.create(),_=g.words,v=p.keySize,m=p.iterations;_.length<v;){h&&d.update(h),h=d.update(u).finalize(f),d.reset();for(var y=1;y<m;y++)h=d.finalize(h),d.reset();g.concat(h)}return g.sigBytes=v*4,g}});n.EvpKDF=function(u,f,h){return l.create(h).compute(u,f)}}(),r.EvpKDF})}(EE)),EE.exports}var SE={exports:{}},m8;function xi(){return m8||(m8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),du())})(Ct,function(r){r.lib.Cipher||function(n){var i=r,a=i.lib,o=a.Base,s=a.WordArray,c=a.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,f=i.algo,h=f.EvpKDF,p=a.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(I,O){return this.create(this._ENC_XFORM_MODE,I,O)},createDecryptor:function(I,O){return this.create(this._DEC_XFORM_MODE,I,O)},init:function(I,O,P){this.cfg=this.cfg.extend(P),this._xformMode=I,this._key=O,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var O=this._doFinalize();return O},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(O){return typeof O=="string"?A:E}return function(O){return{encrypt:function(P,k,F){return I(k).encrypt(O,P,k,F)},decrypt:function(P,k,F){return I(k).decrypt(O,P,k,F)}}}}()});a.StreamCipher=p.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var d=i.mode={},g=a.BlockCipherMode=o.extend({createEncryptor:function(I,O){return this.Encryptor.create(I,O)},createDecryptor:function(I,O){return this.Decryptor.create(I,O)},init:function(I,O){this._cipher=I,this._iv=O}}),_=d.CBC=function(){var I=g.extend();I.Encryptor=I.extend({processBlock:function(P,k){var F=this._cipher,M=F.blockSize;O.call(this,P,k,M),F.encryptBlock(P,k),this._prevBlock=P.slice(k,k+M)}}),I.Decryptor=I.extend({processBlock:function(P,k){var F=this._cipher,M=F.blockSize,D=P.slice(k,k+M);F.decryptBlock(P,k),O.call(this,P,k,M),this._prevBlock=D}});function O(P,k,F){var M,D=this._iv;D?(M=D,this._iv=n):M=this._prevBlock;for(var G=0;G<F;G++)P[k+G]^=M[G]}return I}(),v=i.pad={},m=v.Pkcs7={pad:function(I,O){for(var P=O*4,k=P-I.sigBytes%P,F=k<<24|k<<16|k<<8|k,M=[],D=0;D<k;D+=4)M.push(F);var G=s.create(M,k);I.concat(G)},unpad:function(I){var O=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=O}};a.BlockCipher=p.extend({cfg:p.cfg.extend({mode:_,padding:m}),reset:function(){var I;p.reset.call(this);var O=this.cfg,P=O.iv,k=O.mode;this._xformMode==this._ENC_XFORM_MODE?I=k.createEncryptor:(I=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,P&&P.words):(this._mode=I.call(k,this,P&&P.words),this._mode.__creator=I)},_doProcessBlock:function(I,O){this._mode.processBlock(I,O)},_doFinalize:function(){var I,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),O.unpad(I)),I},blockSize:128/32});var y=a.CipherParams=o.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),b=i.format={},w=b.OpenSSL={stringify:function(I){var O,P=I.ciphertext,k=I.salt;return k?O=s.create([1398893684,1701076831]).concat(k).concat(P):O=P,O.toString(u)},parse:function(I){var O,P=u.parse(I),k=P.words;return k[0]==1398893684&&k[1]==1701076831&&(O=s.create(k.slice(2,4)),k.splice(0,4),P.sigBytes-=16),y.create({ciphertext:P,salt:O})}},E=a.SerializableCipher=o.extend({cfg:o.extend({format:w}),encrypt:function(I,O,P,k){k=this.cfg.extend(k);var F=I.createEncryptor(P,k),M=F.finalize(O),D=F.cfg;return y.create({ciphertext:M,key:P,iv:D.iv,algorithm:I,mode:D.mode,padding:D.padding,blockSize:I.blockSize,formatter:k.format})},decrypt:function(I,O,P,k){k=this.cfg.extend(k),O=this._parse(O,k.format);var F=I.createDecryptor(P,k).finalize(O.ciphertext);return F},_parse:function(I,O){return typeof I=="string"?O.parse(I,this):I}}),C=i.kdf={},T=C.OpenSSL={execute:function(I,O,P,k,F){if(k||(k=s.random(64/8)),F)var M=h.create({keySize:O+P,hasher:F}).compute(I,k);else var M=h.create({keySize:O+P}).compute(I,k);var D=s.create(M.words.slice(O),P*4);return M.sigBytes=O*4,y.create({key:M,iv:D,salt:k})}},A=a.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:T}),encrypt:function(I,O,P,k){k=this.cfg.extend(k);var F=k.kdf.execute(P,I.keySize,I.ivSize,k.salt,k.hasher);k.iv=F.iv;var M=E.encrypt.call(this,I,O,F.key,k);return M.mixIn(F),M},decrypt:function(I,O,P,k){k=this.cfg.extend(k),O=this._parse(O,k.format);var F=k.kdf.execute(P,I.keySize,I.ivSize,O.salt,k.hasher);k.iv=F.iv;var M=E.decrypt.call(this,I,O,F.key,k);return M}})}()})}(SE)),SE.exports}var CE={exports:{}},_8;function qNe(){return _8||(_8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize;i.call(this,a,o,c,s),this._prevBlock=a.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=a.slice(o,o+c);i.call(this,a,o,c,s),this._prevBlock=l}});function i(a,o,s,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var f=0;f<s;f++)a[o+f]^=l[f]}return n}(),r.mode.CFB})}(CE)),CE.exports}var TE={exports:{}},y8;function KNe(){return y8||(y8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var f=u.slice(0);s.encryptBlock(f,0),u[c-1]=u[c-1]+1|0;for(var h=0;h<c;h++)a[o+h]^=f[h]}});return n.Decryptor=i,n}(),r.mode.CTR})}(TE)),TE.exports}var AE={exports:{}},x8;function ZNe(){return x8||(x8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(s){if((s>>24&255)===255){var c=s>>16&255,l=s>>8&255,u=s&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,s=0,s+=c<<16,s+=l<<8,s+=u}else s+=1<<24;return s}function a(s){return(s[0]=i(s[0]))===0&&(s[1]=i(s[1])),s}var o=n.Encryptor=n.extend({processBlock:function(s,c){var l=this._cipher,u=l.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),a(h);var p=h.slice(0);l.encryptBlock(p,0);for(var d=0;d<u;d++)s[c+d]^=p[d]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(AE)),AE.exports}var IE={exports:{}},b8;function JNe(){return b8||(b8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var f=0;f<c;f++)a[o+f]^=u[f]}});return n.Decryptor=i,n}(),r.mode.OFB})}(IE)),IE.exports}var RE={exports:{}},w8;function QNe(){return w8||(w8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,a){this._cipher.encryptBlock(i,a)}}),n.Decryptor=n.extend({processBlock:function(i,a){this._cipher.decryptBlock(i,a)}}),n}(),r.mode.ECB})}(RE)),RE.exports}var PE={exports:{}},E8;function eLe(){return E8||(E8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.pad.AnsiX923={pad:function(n,i){var a=n.sigBytes,o=i*4,s=o-a%o,c=a+s-1;n.clamp(),n.words[c>>>2]|=s<<24-c%4*8,n.sigBytes+=s},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(PE)),PE.exports}var OE={exports:{}},S8;function tLe(){return S8||(S8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.pad.Iso10126={pad:function(n,i){var a=i*4,o=a-n.sigBytes%a;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(OE)),OE.exports}var kE={exports:{}},C8;function rLe(){return C8||(C8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(kE)),kE.exports}var FE={exports:{}},T8;function nLe(){return T8||(T8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.pad.ZeroPadding={pad:function(n,i){var a=i*4;n.clamp(),n.sigBytes+=a-(n.sigBytes%a||a)},unpad:function(n){for(var i=n.words,a=n.sigBytes-1,a=n.sigBytes-1;a>=0;a--)if(i[a>>>2]>>>24-a%4*8&255){n.sigBytes=a+1;break}}},r.pad.ZeroPadding})}(FE)),FE.exports}var NE={exports:{}},A8;function iLe(){return A8||(A8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(NE)),NE.exports}var LE={exports:{}},I8;function aLe(){return I8||(I8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),xi())})(Ct,function(r){return function(n){var i=r,a=i.lib,o=a.CipherParams,s=i.enc,c=s.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var f=c.parse(u);return o.create({ciphertext:f})}}}(),r.format.Hex})}(LE)),LE.exports}var BE={exports:{}},R8;function oLe(){return R8||(R8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),Pc(),Oc(),du(),xi())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.BlockCipher,o=n.algo,s=[],c=[],l=[],u=[],f=[],h=[],p=[],d=[],g=[],_=[];(function(){for(var y=[],b=0;b<256;b++)b<128?y[b]=b<<1:y[b]=b<<1^283;for(var w=0,E=0,b=0;b<256;b++){var C=E^E<<1^E<<2^E<<3^E<<4;C=C>>>8^C&255^99,s[w]=C,c[C]=w;var T=y[w],A=y[T],I=y[A],O=y[C]*257^C*16843008;l[w]=O<<24|O>>>8,u[w]=O<<16|O>>>16,f[w]=O<<8|O>>>24,h[w]=O;var O=I*16843009^A*65537^T*257^w*16843008;p[C]=O<<24|O>>>8,d[C]=O<<16|O>>>16,g[C]=O<<8|O>>>24,_[C]=O,w?(w=T^y[y[y[I^T]]],E^=y[y[E]]):w=E=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],m=o.AES=a.extend({_doReset:function(){var y;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,w=b.words,E=b.sigBytes/4,C=this._nRounds=E+6,T=(C+1)*4,A=this._keySchedule=[],I=0;I<T;I++)I<E?A[I]=w[I]:(y=A[I-1],I%E?E>6&&I%E==4&&(y=s[y>>>24]<<24|s[y>>>16&255]<<16|s[y>>>8&255]<<8|s[y&255]):(y=y<<8|y>>>24,y=s[y>>>24]<<24|s[y>>>16&255]<<16|s[y>>>8&255]<<8|s[y&255],y^=v[I/E|0]<<24),A[I]=A[I-E]^y);for(var O=this._invKeySchedule=[],P=0;P<T;P++){var I=T-P;if(P%4)var y=A[I];else var y=A[I-4];P<4||I<=4?O[P]=y:O[P]=p[s[y>>>24]]^d[s[y>>>16&255]]^g[s[y>>>8&255]]^_[s[y&255]]}}},encryptBlock:function(y,b){this._doCryptBlock(y,b,this._keySchedule,l,u,f,h,s)},decryptBlock:function(y,b){var w=y[b+1];y[b+1]=y[b+3],y[b+3]=w,this._doCryptBlock(y,b,this._invKeySchedule,p,d,g,_,c);var w=y[b+1];y[b+1]=y[b+3],y[b+3]=w},_doCryptBlock:function(y,b,w,E,C,T,A,I){for(var O=this._nRounds,P=y[b]^w[0],k=y[b+1]^w[1],F=y[b+2]^w[2],M=y[b+3]^w[3],D=4,G=1;G<O;G++){var Q=E[P>>>24]^C[k>>>16&255]^T[F>>>8&255]^A[M&255]^w[D++],te=E[k>>>24]^C[F>>>16&255]^T[M>>>8&255]^A[P&255]^w[D++],Y=E[F>>>24]^C[M>>>16&255]^T[P>>>8&255]^A[k&255]^w[D++],U=E[M>>>24]^C[P>>>16&255]^T[k>>>8&255]^A[F&255]^w[D++];P=Q,k=te,F=Y,M=U}var Q=(I[P>>>24]<<24|I[k>>>16&255]<<16|I[F>>>8&255]<<8|I[M&255])^w[D++],te=(I[k>>>24]<<24|I[F>>>16&255]<<16|I[M>>>8&255]<<8|I[P&255])^w[D++],Y=(I[F>>>24]<<24|I[M>>>16&255]<<16|I[P>>>8&255]<<8|I[k&255])^w[D++],U=(I[M>>>24]<<24|I[P>>>16&255]<<16|I[k>>>8&255]<<8|I[F&255])^w[D++];y[b]=Q,y[b+1]=te,y[b+2]=Y,y[b+3]=U},keySize:256/32});n.AES=a._createHelper(m)}(),r.AES})}(BE)),BE.exports}var ME={exports:{}},P8;function sLe(){return P8||(P8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),Pc(),Oc(),du(),xi())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=i.BlockCipher,s=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=o.extend({_doReset:function(){for(var v=this._key,m=v.words,y=[],b=0;b<56;b++){var w=c[b]-1;y[b]=m[w>>>5]>>>31-w%32&1}for(var E=this._subKeys=[],C=0;C<16;C++){for(var T=E[C]=[],A=u[C],b=0;b<24;b++)T[b/6|0]|=y[(l[b]-1+A)%28]<<31-b%6,T[4+(b/6|0)]|=y[28+(l[b+24]-1+A)%28]<<31-b%6;T[0]=T[0]<<1|T[0]>>>31;for(var b=1;b<7;b++)T[b]=T[b]>>>(b-1)*4+3;T[7]=T[7]<<5|T[7]>>>27}for(var I=this._invSubKeys=[],b=0;b<16;b++)I[b]=E[15-b]},encryptBlock:function(v,m){this._doCryptBlock(v,m,this._subKeys)},decryptBlock:function(v,m){this._doCryptBlock(v,m,this._invSubKeys)},_doCryptBlock:function(v,m,y){this._lBlock=v[m],this._rBlock=v[m+1],d.call(this,4,252645135),d.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),d.call(this,1,1431655765);for(var b=0;b<16;b++){for(var w=y[b],E=this._lBlock,C=this._rBlock,T=0,A=0;A<8;A++)T|=f[A][((C^w[A])&h[A])>>>0];this._lBlock=C,this._rBlock=E^T}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,d.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),v[m]=this._lBlock,v[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function d(v,m){var y=(this._lBlock>>>v^this._rBlock)&m;this._rBlock^=y,this._lBlock^=y<<v}function g(v,m){var y=(this._rBlock>>>v^this._lBlock)&m;this._lBlock^=y,this._rBlock^=y<<v}n.DES=o._createHelper(p);var _=s.TripleDES=o.extend({_doReset:function(){var v=this._key,m=v.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var y=m.slice(0,2),b=m.length<4?m.slice(0,2):m.slice(2,4),w=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=p.createEncryptor(a.create(y)),this._des2=p.createEncryptor(a.create(b)),this._des3=p.createEncryptor(a.create(w))},encryptBlock:function(v,m){this._des1.encryptBlock(v,m),this._des2.decryptBlock(v,m),this._des3.encryptBlock(v,m)},decryptBlock:function(v,m){this._des3.decryptBlock(v,m),this._des2.encryptBlock(v,m),this._des1.decryptBlock(v,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(_)}(),r.TripleDES})}(ME)),ME.exports}var DE={exports:{}},O8;function lLe(){return O8||(O8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),Pc(),Oc(),du(),xi())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=o.RC4=a.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,p=this._S=[],d=0;d<256;d++)p[d]=d;for(var d=0,g=0;d<256;d++){var _=d%h,v=f[_>>>2]>>>24-_%4*8&255;g=(g+p[d]+v)%256;var m=p[d];p[d]=p[g],p[g]=m}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,f=this._i,h=this._j,p=0,d=0;d<4;d++){f=(f+1)%256,h=(h+u[f])%256;var g=u[f];u[f]=u[h],u[h]=g,p|=u[(u[f]+u[h])%256]<<24-d*8}return this._i=f,this._j=h,p}n.RC4=a._createHelper(s);var l=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});n.RC4Drop=a._createHelper(l)}(),r.RC4})}(DE)),DE.exports}var UE={exports:{}},k8;function uLe(){return k8||(k8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),Pc(),Oc(),du(),xi())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=[],c=[],l=[],u=o.Rabbit=a.extend({_doReset:function(){for(var h=this._key.words,p=this.cfg.iv,d=0;d<4;d++)h[d]=(h[d]<<8|h[d]>>>24)&16711935|(h[d]<<24|h[d]>>>8)&4278255360;var g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],_=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var d=0;d<4;d++)f.call(this);for(var d=0;d<8;d++)_[d]^=g[d+4&7];if(p){var v=p.words,m=v[0],y=v[1],b=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,E=b>>>16|w&4294901760,C=w<<16|b&65535;_[0]^=b,_[1]^=E,_[2]^=w,_[3]^=C,_[4]^=b,_[5]^=E,_[6]^=w,_[7]^=C;for(var d=0;d<4;d++)f.call(this)}},_doProcessBlock:function(h,p){var d=this._X;f.call(this),s[0]=d[0]^d[5]>>>16^d[3]<<16,s[1]=d[2]^d[7]>>>16^d[5]<<16,s[2]=d[4]^d[1]>>>16^d[7]<<16,s[3]=d[6]^d[3]>>>16^d[1]<<16;for(var g=0;g<4;g++)s[g]=(s[g]<<8|s[g]>>>24)&16711935|(s[g]<<24|s[g]>>>8)&4278255360,h[p+g]^=s[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,d=0;d<8;d++)c[d]=p[d];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var d=0;d<8;d++){var g=h[d]+p[d],_=g&65535,v=g>>>16,m=((_*_>>>17)+_*v>>>15)+v*v,y=((g&4294901760)*g|0)+((g&65535)*g|0);l[d]=m^y}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=a._createHelper(u)}(),r.Rabbit})}(UE)),UE.exports}var jE={exports:{}},F8;function cLe(){return F8||(F8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),Pc(),Oc(),du(),xi())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=[],c=[],l=[],u=o.RabbitLegacy=a.extend({_doReset:function(){var h=this._key.words,p=this.cfg.iv,d=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],g=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var _=0;_<4;_++)f.call(this);for(var _=0;_<8;_++)g[_]^=d[_+4&7];if(p){var v=p.words,m=v[0],y=v[1],b=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,E=b>>>16|w&4294901760,C=w<<16|b&65535;g[0]^=b,g[1]^=E,g[2]^=w,g[3]^=C,g[4]^=b,g[5]^=E,g[6]^=w,g[7]^=C;for(var _=0;_<4;_++)f.call(this)}},_doProcessBlock:function(h,p){var d=this._X;f.call(this),s[0]=d[0]^d[5]>>>16^d[3]<<16,s[1]=d[2]^d[7]>>>16^d[5]<<16,s[2]=d[4]^d[1]>>>16^d[7]<<16,s[3]=d[6]^d[3]>>>16^d[1]<<16;for(var g=0;g<4;g++)s[g]=(s[g]<<8|s[g]>>>24)&16711935|(s[g]<<24|s[g]>>>8)&4278255360,h[p+g]^=s[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,p=this._C,d=0;d<8;d++)c[d]=p[d];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var d=0;d<8;d++){var g=h[d]+p[d],_=g&65535,v=g>>>16,m=((_*_>>>17)+_*v>>>15)+v*v,y=((g&4294901760)*g|0)+((g&65535)*g|0);l[d]=m^y}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=a._createHelper(u)}(),r.RabbitLegacy})}(jE)),jE.exports}var $E={exports:{}},N8;function fLe(){return N8||(N8=1,function(e,t){(function(r,n,i){e.exports=n(yr(),Pc(),Oc(),du(),xi())})(Ct,function(r){return function(){var n=r,i=n.lib,a=i.BlockCipher,o=n.algo;const s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(_,v){let m=v>>24&255,y=v>>16&255,b=v>>8&255,w=v&255,E=_.sbox[0][m]+_.sbox[1][y];return E=E^_.sbox[2][b],E=E+_.sbox[3][w],E}function h(_,v,m){let y=v,b=m,w;for(let E=0;E<s;++E)y=y^_.pbox[E],b=f(_,y)^b,w=y,y=b,b=w;return w=y,y=b,b=w,b=b^_.pbox[s],y=y^_.pbox[s+1],{left:y,right:b}}function p(_,v,m){let y=v,b=m,w;for(let E=s+1;E>1;--E)y=y^_.pbox[E],b=f(_,y)^b,w=y,y=b,b=w;return w=y,y=b,b=w,b=b^_.pbox[1],y=y^_.pbox[0],{left:y,right:b}}function d(_,v,m){for(let C=0;C<4;C++){_.sbox[C]=[];for(let T=0;T<256;T++)_.sbox[C][T]=l[C][T]}let y=0;for(let C=0;C<s+2;C++)_.pbox[C]=c[C]^v[y],y++,y>=m&&(y=0);let b=0,w=0,E=0;for(let C=0;C<s+2;C+=2)E=h(_,b,w),b=E.left,w=E.right,_.pbox[C]=b,_.pbox[C+1]=w;for(let C=0;C<4;C++)for(let T=0;T<256;T+=2)E=h(_,b,w),b=E.left,w=E.right,_.sbox[C][T]=b,_.sbox[C][T+1]=w;return!0}var g=o.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var _=this._keyPriorReset=this._key,v=_.words,m=_.sigBytes/4;d(u,v,m)}},encryptBlock:function(_,v){var m=h(u,_[v],_[v+1]);_[v]=m.left,_[v+1]=m.right},decryptBlock:function(_,v){var m=p(u,_[v],_[v+1]);_[v]=m.left,_[v+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=a._createHelper(g)}(),r.Blowfish})}($E)),$E.exports}(function(e,t){(function(r,n,i){e.exports=n(yr(),gx(),$Ne(),GNe(),Pc(),VNe(),Oc(),RH(),uO(),HNe(),PH(),XNe(),zNe(),WNe(),cO(),YNe(),du(),xi(),qNe(),KNe(),ZNe(),JNe(),QNe(),eLe(),tLe(),rLe(),nLe(),iLe(),aLe(),oLe(),sLe(),lLe(),uLe(),cLe(),fLe())})(Ct,function(r){return r})})(jNe);const UT=`<svg width="116" height="116" viewBox="0 0 116 116" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_f_13_25)">
<path d="M58 33V43" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M58 73V83" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M83 58H73" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M43 58H33" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M40.3223 40.3224L47.3933 47.3934" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M68.6067 68.6067L75.6777 75.6777" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M75.6777 40.3224L68.6067 47.3934" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M47.3933 68.6067L40.3223 75.6777" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
</g>
<path d="M58 33V43" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M58 73V83" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M83 58H73" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M43 58H33" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M40.3223 40.3224L47.3933 47.3934" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M68.6067 68.6067L75.6777 75.6777" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M75.6777 40.3224L68.6067 47.3934" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<path d="M47.3933 68.6067L40.3223 75.6777" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"></path>
<defs>
<filter id="filter0_f_13_25" x="0.5" y="0.5" width="115" height="115" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>
<feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend>
<feGaussianBlur stdDeviation="15" result="effect1_foregroundBlur_13_25"></feGaussianBlur>
</filter>
</defs>
</svg>`;class hLe{constructor(){nt(this,"videosByKey");nt(this,"idURLMap",{});nt(this,"currentPlayingVideo","");nt(this,"videoIndex",0);nt(this,"tempNodes",[]);this.videosByKey={},this.currentPlayingVideo="";const t=window.pubsub.subscribe("gameInfoReady",r=>{if(r){const n=document.getElementById("videoContainer");if(this.tempNodes.length&&n){for(const i of this.tempNodes)n.appendChild(i);this.tempNodes=[]}t()}})}preloadVideo(t,r=!1){if(this.videosByKey[t])return;console.info("",t);const n="video-"+this.videoIndex++,i=document.createElement("div"),a=document.createElement("video"),o=t.endsWith(".flv")?"flv":"mp4";i.setAttribute("id",n),i.style.width="100%",i.style.height="100%",i.style.zIndex="-99",i.style.display="block",i.style.opacity="0",i.style.background="#000",i.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.zIndex="11",a.style.position="absolute",a.style.display="block",a.playsInline=!0,a.controls=!1,a.addEventListener("play",function(){a.controls=!1}),a.addEventListener("pause",function(){a.controls=!1}),a.volume=0;const s=()=>{this.videosByKey[t].events.ended.callbacks.forEach(u=>u())};i.appendChild(a);const c=document.getElementById("videoContainer");c?c.appendChild(i):this.tempNodes.push(i),this.videosByKey[t]={player:null,id:n,progressTimer:null,loadingTimer:void 0,waitCommands:{},events:{ended:{callbacks:[],handler:s}}},a.addEventListener("waiting",()=>{this.videosByKey[t].loadingTimer=setTimeout(()=>{if(!i.querySelector(".video-loading")){const u=document.createElement("div");u.className="video-loading",u.innerHTML=UT,i.appendChild(u)}},2e3)}),a.addEventListener("canplay",()=>{clearTimeout(this.videosByKey[t].loadingTimer);const l=i.querySelector(".video-loading");l&&i.removeChild(l)}),a.addEventListener("error",()=>{const l=i.querySelector(".video-loading"),u=i.querySelector(".video-error");l&&i.removeChild(l),u&&i.removeChild(u);const f=document.getElementById("fullScreenPerform"),h=document.createElement("div"),p=document.createElement("p"),d=document.createElement("div");h.className="video-error",p.innerHTML="",d.innerHTML="",d.className="video-retry-button interactive",f&&i.style.opacity==="1"&&(f.style.zIndex="15"),h.appendChild(p),h.appendChild(d),i.appendChild(h),d.onclick=()=>{h&&i.removeChild(h);const g=document.createElement("div");g.className="video-loading",g.innerHTML=UT,i.appendChild(g),a.src="",a.load(),f&&(f.style.zIndex="auto"),this.videosByKey[t].waitCommands.playVideo=!0,this.fetchVideo(t,a,o)}}),r&&(this.videosByKey[t].waitCommands={playVideo:!0,showVideo:!0}),this.fetchVideo(t,a,o)}pauseVideo(t){const r=this.videosByKey[t];r!=null&&r.player&&(r.player.pause(),r.isPlaying=!1)}resumePausedVideo(){if(this.currentPlayingVideo){const t=this.videosByKey[this.currentPlayingVideo];t&&!t.isPlaying&&(t.player.play(),t.isPlaying=!0)}}isAnyVideoPlaying(){return Object.values(this.videosByKey).some(t=>t.isPlaying)}showVideo(t,r){const n=this.videosByKey[t];if(n!=null&&n.player){const i=document.getElementById(n.id);if(i&&(i.style.opacity="1",i.style.zIndex=r?"6":"11",i.querySelector(".video-error"))){const a=document.getElementById("fullScreenPerform");a&&(a.style.zIndex="16")}}else n?n.waitCommands.showVideo=!0:this.preloadVideo(t,!0)}playVideo(t){const r=this.videosByKey[t];this.currentPlayingVideo=t,r!=null&&r.player?(r.player.play(),r.isPlaying=!0,this.checkProgress(t)):r?r.waitCommands.playVideo=!0:this.preloadVideo(t,!0),r.player.on("ended",()=>{r.isPlaying=!1,this.currentPlayingVideo===t&&(this.currentPlayingVideo="")})}setLoop(t,r){const n=this.videosByKey[t];if(n!=null&&n.player){const i=document.getElementById(n.id);i&&(i.loop=r)}else n.waitCommands.setLoop=r}seek(t,r){const n=this.videosByKey[t];n!=null&&n.player?n.player.currentTime=r:n.waitCommands.seek=r}backward(t){const r=this.videosByKey[t];r!=null&&r.player&&r.player.currentTime>0&&(r.player.currentTime-=1)}forward(t){const r=this.videosByKey[t];r!=null&&r.player&&(r.player.currentTime+=1)}setVolume(t,r){const n=this.videosByKey[t];n!=null&&n.player?n.player.volume=r:n.waitCommands.setVolume=r}setUrlIdMap(t,r){this.idURLMap[t]=r}destroy(t,r=!1,n=!1){const i=this.videosByKey[t];if(i!=null&&i.player){i.player.pause(),i.player.volume=0,this.currentPlayingVideo="";const a=document.getElementById(i.id);a&&(a.style.opacity="0",a.style.zIndex="-99"),i!=null&&i.progressTimer&&clearTimeout(i.progressTimer),setTimeout(()=>{var o;try{const s=a==null?void 0:a.getElementsByTagName("video");s!=null&&s.length&&((o=i.player)==null||o.destroy())}catch(s){console.warn(s)}setTimeout(()=>{a==null||a.remove()},r?0:500),delete this.videosByKey[t]},r?0:2e3)}}destroyAll(t=!1){Object.keys(this.videosByKey).forEach(r=>{this.destroy(r,t)})}onEnded(t,r){this.videosByKey[t].events.ended.callbacks.push(r)}getDuration(t){const r=this.videosByKey[t];if(r!=null&&r.player)return r.player.duration}destroyExcept(t){Object.keys(this.videosByKey).forEach(r=>{t.includes(r)||this.destroy(r)})}setPoster(t,r){const n=this.videosByKey[t];n&&(n.poster=r)}checkProgress(t){const r=this.videosByKey[t];if(r!=null&&r.player){const n=r.player,i=n.currentTime;if(n.duration-i<=.03){clearTimeout(r.progressTimer),r.progressTimer=null,r.events.ended.handler();return}r.progressTimer=setTimeout(()=>{this.checkProgress(t)},100)}}fetchVideo(t,r,n){fetch(t).then(i=>i.status>200?null:i.arrayBuffer()).then(async i=>{var f;if(!i)return;const a="ENCRYPTED",o=a.length,s=new Uint8Array(i.slice(0,o));let c=!1;for(let h=0;h<o;h++){if(String.fromCharCode(s[h])!==a[h]){c=!1;break}c=!0}const l=new Worker(new URL(""+new URL("worker-1bd0a91b.js",import.meta.url).href,self.location),{type:"module"}),u=h=>{const p=DT.createPlayer({type:t.endsWith(".mp4")?"mp4":"flv",url:URL.createObjectURL(h)});p.attachMediaElement(r),p.load();const d={...this.videosByKey[t],player:p};this.videosByKey[t]=d,r.onloadeddata=()=>{const g=Object.keys(d.waitCommands);g.length&&g.forEach(_=>{if(!d){console.log("",t);return}this[_](t,d.waitCommands[_])})}};if(c){const h=i.slice(o);if((f=window.crypto)!=null&&f.subtle){const p=new Uint8Array([64,230,173,66,154,19,2,10,7,190,41,12,94,241,215,220,126,69,229,196,191,52,213,74,86,100,40,38,39,148,110,77]),d=new Uint8Array([157,107,172,116,198,78,232,113,78,121,89,206,247,82,113,208]);l.postMessage({encryptedData:h,key:p,iv:d,type:n,supportCrypto:!0})}else{const p="40e6ad429a13020a07be290c5ef1d7dc7e45e5c4bf34d54a5664282627946e4d",d="9d6bac74c64ee8714e7959cef75271d0";l.postMessage({encryptedData:h,key:p,iv:d,type:n,supportCrypto:!1})}l.onmessage=p=>{p.data.blobData?u(p.data.blobData):p.data.errorMessage&&console.error(p.data.errorMessage+""+p.data.error.message)}}else{const h=new Blob([new Uint8Array(i)],{type:`video/${n==="mp4"?"mp4":"x-flv"}`});u(h)}})}}class dLe{constructor(){nt(this,"sceneManager",new REe);nt(this,"backlogManager",new khe(this.sceneManager));nt(this,"animationManager",new o4);nt(this,"gameplay",new BNe);nt(this,"gameName","");nt(this,"gameKey","");nt(this,"gameId",0);nt(this,"channel",new URLSearchParams(window.location.search).get("channel")||"1");nt(this,"events",new DNe);nt(this,"videoManager",new hLe);nt(this,"gameJsLink","");nt(this,"gameCssLink","");nt(this,"isFinishTrial","0")}resetAnimationManager(){this.animationManager=new o4}}const $=new dLe,fO=(e,t=!0,r=!0)=>{e&&$.backlogManager.makeBacklogEmpty(),r&&$.videoManager.destroyAll(!0),t&&$.sceneManager.resetScene(),$.gameplay.performController.removeAllPerform(),$.gameplay.resetGamePlay(),$.gameplay.resetPixiStage();const n=cn(K_),i=le.getState().stage.GameVar;le.dispatch(dc(n)),t||le.dispatch($t({key:"GameVar",value:i})),le.dispatch(or.setLoadVideo(!1))},pLe=e=>{const t=document.body;e=typeof e=="string"?Number(e):e,t&&(t.style.opacity=(e/100).toFixed(2))},vLe=()=>{const e=le.getState().storeData.gameInfo,t=()=>{fO(!0,!0,!1);const r=At("start.txt",Et.scene);aa(r).then(n=>{$.sceneManager.setCurrentScene(n,"start.txt",r,!0).then(i=>{i&&jn()})}),le.dispatch(or.setIsShowUnlock(!0)),le.dispatch(or.setShowStoryline(!0)),le.dispatch(vt({component:"showTitle",visibility:!1})),le.dispatch(vt({component:"isInGaming",visibility:!0})),pLe(le.getState().userData.optionData.uiLight)};if(le.getState().storeData.isEditorPreviewMode){t();return}if(!e){ma({title:`
`,rightText:"",rightFunc:()=>{window.location.reload()}});return}if(e.isFree===1&&e.tryPlay===1&&!e.canPlay){const r=()=>{ma({type:"pay",title:"",content:""+e.salesAmount+(e.salesAmountType===1?"":""),suffixContent:"",rightText:"",rightFunc:()=>{window.pubsub.publish("showBuyGameModal",{buyGameCallback:r,startGameCallback:t})}})};r();return}t()};async function gLe(){if(z0(le.getState().stage.bgName),await $Oe()){await GOe();return}$.sceneManager.sceneData.currentScene.sceneName===ta.Start&&$.sceneManager.sceneData.currentSentenceId===0?jn():nP()}const jT=async()=>{const e=At(ta.Storyline,Et.scene);$.sceneManager.resetScene();const t=await aa(e);le.dispatch(JS(!0)),await $.sceneManager.setCurrentScene(t,ta.Storyline,e),jn(),le.dispatch(vt({component:"showMenuPanel",visibility:!1})),le.dispatch(vt({component:"showTextBox",visibility:!1}))},mLe=async()=>{const e=At(ta.Affinity,Et.scene);$.sceneManager.resetScene();const t=await aa(e);le.dispatch(vt({component:"showAffinity",visibility:!0})),await $.sceneManager.setCurrentScene(t,ta.Affinity,e),jn(),le.dispatch(vt({component:"showMenuPanel",visibility:!1})),le.dispatch(vt({component:"showTextBox",visibility:!1}))},_Le=()=>{le.dispatch(vt({component:"showBeautyGuide",visibility:!0}))};function yLe(e){return Yy.parseScssToWebgalStyleObj(e)}function iu(e){const[t,r]=fe.useState(e);return{_value:t,set:function(n){this._value=n,r(n)},get value(){return this._value},set value(n){this.set(n)}}}function xLe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function bLe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var wLe=function(){function e(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bLe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=xLe(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Ni="-ms-",S_="-moz-",Ir="-webkit-",OH="comm",hO="rule",dO="decl",ELe="@import",kH="@keyframes",SLe="@layer",CLe=Math.abs,mx=String.fromCharCode,TLe=Object.assign;function ALe(e,t){return Ai(e,0)^45?(((t<<2^Ai(e,0))<<2^Ai(e,1))<<2^Ai(e,2))<<2^Ai(e,3):0}function FH(e){return e.trim()}function ILe(e,t){return(e=t.exec(e))?e[0]:e}function Rr(e,t,r){return e.replace(t,r)}function $T(e,t){return e.indexOf(t)}function Ai(e,t){return e.charCodeAt(t)|0}function y0(e,t,r){return e.slice(t,r)}function Wo(e){return e.length}function pO(e){return e.length}function kg(e,t){return t.push(e),e}function RLe(e,t){return e.map(t).join("")}var _x=1,hh=1,NH=0,xa=0,Yn=0,Vh="";function yx(e,t,r,n,i,a,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:_x,column:hh,length:o,return:""}}function Bd(e,t){return TLe(yx("",null,null,"",null,null,0),e,{length:-e.length},t)}function PLe(){return Yn}function OLe(){return Yn=xa>0?Ai(Vh,--xa):0,hh--,Yn===10&&(hh=1,_x--),Yn}function Fa(){return Yn=xa<NH?Ai(Vh,xa++):0,hh++,Yn===10&&(hh=1,_x++),Yn}function ss(){return Ai(Vh,xa)}function um(){return xa}function Y0(e,t){return y0(Vh,e,t)}function x0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LH(e){return _x=hh=1,NH=Wo(Vh=e),xa=0,[]}function BH(e){return Vh="",e}function cm(e){return FH(Y0(xa-1,GT(e===91?e+2:e===40?e+1:e)))}function kLe(e){for(;(Yn=ss())&&Yn<33;)Fa();return x0(e)>2||x0(Yn)>3?"":" "}function FLe(e,t){for(;--t&&Fa()&&!(Yn<48||Yn>102||Yn>57&&Yn<65||Yn>70&&Yn<97););return Y0(e,um()+(t<6&&ss()==32&&Fa()==32))}function GT(e){for(;Fa();)switch(Yn){case e:return xa;case 34:case 39:e!==34&&e!==39&&GT(Yn);break;case 40:e===41&&GT(e);break;case 92:Fa();break}return xa}function NLe(e,t){for(;Fa()&&e+Yn!==47+10;)if(e+Yn===42+42&&ss()===47)break;return"/*"+Y0(t,xa-1)+"*"+mx(e===47?e:Fa())}function LLe(e){for(;!x0(ss());)Fa();return Y0(e,xa)}function BLe(e){return BH(fm("",null,null,null,[""],e=LH(e),0,[0],e))}function fm(e,t,r,n,i,a,o,s,c){for(var l=0,u=0,f=o,h=0,p=0,d=0,g=1,_=1,v=1,m=0,y="",b=i,w=a,E=n,C=y;_;)switch(d=m,m=Fa()){case 40:if(d!=108&&Ai(C,f-1)==58){$T(C+=Rr(cm(m),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:C+=cm(m);break;case 9:case 10:case 13:case 32:C+=kLe(d);break;case 92:C+=FLe(um()-1,7);continue;case 47:switch(ss()){case 42:case 47:kg(MLe(NLe(Fa(),um()),t,r),c);break;default:C+="/"}break;case 123*g:s[l++]=Wo(C)*v;case 125*g:case 59:case 0:switch(m){case 0:case 125:_=0;case 59+u:v==-1&&(C=Rr(C,/\f/g,"")),p>0&&Wo(C)-f&&kg(p>32?B8(C+";",n,r,f-1):B8(Rr(C," ","")+";",n,r,f-2),c);break;case 59:C+=";";default:if(kg(E=L8(C,t,r,l,u,i,s,y,b=[],w=[],f),a),m===123)if(u===0)fm(C,t,E,E,b,a,f,s,w);else switch(h===99&&Ai(C,3)===110?100:h){case 100:case 108:case 109:case 115:fm(e,E,E,n&&kg(L8(e,E,E,0,0,i,s,y,i,b=[],f),w),i,w,f,s,n?b:w);break;default:fm(C,E,E,E,[""],w,0,s,w)}}l=u=p=0,g=v=1,y=C="",f=o;break;case 58:f=1+Wo(C),p=d;default:if(g<1){if(m==123)--g;else if(m==125&&g++==0&&OLe()==125)continue}switch(C+=mx(m),m*g){case 38:v=u>0?1:(C+="\f",-1);break;case 44:s[l++]=(Wo(C)-1)*v,v=1;break;case 64:ss()===45&&(C+=cm(Fa())),h=ss(),u=f=Wo(y=C+=LLe(um())),m++;break;case 45:d===45&&Wo(C)==2&&(g=0)}}return a}function L8(e,t,r,n,i,a,o,s,c,l,u){for(var f=i-1,h=i===0?a:[""],p=pO(h),d=0,g=0,_=0;d<n;++d)for(var v=0,m=y0(e,f+1,f=CLe(g=o[d])),y=e;v<p;++v)(y=FH(g>0?h[v]+" "+m:Rr(m,/&\f/g,h[v])))&&(c[_++]=y);return yx(e,t,r,i===0?hO:s,c,l,u)}function MLe(e,t,r){return yx(e,t,r,OH,mx(PLe()),y0(e,2,-2),0)}function B8(e,t,r,n){return yx(e,t,r,dO,y0(e,0,n),y0(e,n+1,-1),n)}function Yf(e,t){for(var r="",n=pO(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function DLe(e,t,r,n){switch(e.type){case SLe:if(e.children.length)break;case ELe:case dO:return e.return=e.return||e.value;case OH:return"";case kH:return e.return=e.value+"{"+Yf(e.children,n)+"}";case hO:e.value=e.props.join(",")}return Wo(r=Yf(e.children,n))?e.return=e.value+"{"+r+"}":""}function ULe(e){var t=pO(e);return function(r,n,i,a){for(var o="",s=0;s<t;s++)o+=e[s](r,n,i,a)||"";return o}}function jLe(e){return function(t){t.root||(t=t.return)&&e(t)}}function $Le(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var GLe=function(t,r,n){for(var i=0,a=0;i=a,a=ss(),i===38&&a===12&&(r[n]=1),!x0(a);)Fa();return Y0(t,xa)},VLe=function(t,r){var n=-1,i=44;do switch(x0(i)){case 0:i===38&&ss()===12&&(r[n]=1),t[n]+=GLe(xa-1,r,n);break;case 2:t[n]+=cm(i);break;case 4:if(i===44){t[++n]=ss()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=mx(i)}while(i=Fa());return t},HLe=function(t,r){return BH(VLe(LH(t),r))},M8=new WeakMap,XLe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!M8.get(n))&&!i){M8.set(t,!0);for(var a=[],o=HLe(r,a),s=n.props,c=0,l=0;c<o.length;c++)for(var u=0;u<s.length;u++,l++)t.props[l]=a[c]?o[c].replace(/&\f/g,s[u]):s[u]+" "+o[c]}}},zLe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function MH(e,t){switch(ALe(e,t)){case 5103:return Ir+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ir+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ir+e+S_+e+Ni+e+e;case 6828:case 4268:return Ir+e+Ni+e+e;case 6165:return Ir+e+Ni+"flex-"+e+e;case 5187:return Ir+e+Rr(e,/(\w+).+(:[^]+)/,Ir+"box-$1$2"+Ni+"flex-$1$2")+e;case 5443:return Ir+e+Ni+"flex-item-"+Rr(e,/flex-|-self/,"")+e;case 4675:return Ir+e+Ni+"flex-line-pack"+Rr(e,/align-content|flex-|-self/,"")+e;case 5548:return Ir+e+Ni+Rr(e,"shrink","negative")+e;case 5292:return Ir+e+Ni+Rr(e,"basis","preferred-size")+e;case 6060:return Ir+"box-"+Rr(e,"-grow","")+Ir+e+Ni+Rr(e,"grow","positive")+e;case 4554:return Ir+Rr(e,/([^-])(transform)/g,"$1"+Ir+"$2")+e;case 6187:return Rr(Rr(Rr(e,/(zoom-|grab)/,Ir+"$1"),/(image-set)/,Ir+"$1"),e,"")+e;case 5495:case 3959:return Rr(e,/(image-set\([^]*)/,Ir+"$1$`$1");case 4968:return Rr(Rr(e,/(.+:)(flex-)?(.*)/,Ir+"box-pack:$3"+Ni+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ir+e+e;case 4095:case 3583:case 4068:case 2532:return Rr(e,/(.+)-inline(.+)/,Ir+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wo(e)-1-t>6)switch(Ai(e,t+1)){case 109:if(Ai(e,t+4)!==45)break;case 102:return Rr(e,/(.+:)(.+)-([^]+)/,"$1"+Ir+"$2-$3$1"+S_+(Ai(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$T(e,"stretch")?MH(Rr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ai(e,t+1)!==115)break;case 6444:switch(Ai(e,Wo(e)-3-(~$T(e,"!important")&&10))){case 107:return Rr(e,":",":"+Ir)+e;case 101:return Rr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ir+(Ai(e,14)===45?"inline-":"")+"box$3$1"+Ir+"$2$3$1"+Ni+"$2box$3")+e}break;case 5936:switch(Ai(e,t+11)){case 114:return Ir+e+Ni+Rr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ir+e+Ni+Rr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ir+e+Ni+Rr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ir+e+Ni+e+e}return e}var WLe=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case dO:t.return=MH(t.value,t.length);break;case kH:return Yf([Bd(t,{value:Rr(t.value,"@","@"+Ir)})],i);case hO:if(t.length)return RLe(t.props,function(a){switch(ILe(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yf([Bd(t,{props:[Rr(a,/:(read-\w+)/,":"+S_+"$1")]})],i);case"::placeholder":return Yf([Bd(t,{props:[Rr(a,/:(plac\w+)/,":"+Ir+"input-$1")]}),Bd(t,{props:[Rr(a,/:(plac\w+)/,":"+S_+"$1")]}),Bd(t,{props:[Rr(a,/:(plac\w+)/,Ni+"input-$1")]})],i)}return""})}},YLe=[WLe],qLe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var _=g.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||YLe,a={},o,s=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var _=g.getAttribute("data-emotion").split(" "),v=1;v<_.length;v++)a[_[v]]=!0;s.push(g)});var c,l=[XLe,zLe];{var u,f=[DLe,jLe(function(g){u.insert(g)})],h=ULe(l.concat(i,f)),p=function(_){return Yf(BLe(_),h)};c=function(_,v,m,y){u=m,p(_?_+"{"+v.styles+"}":v.styles),y&&(d.inserted[v.name]=!0)}}var d={key:r,sheet:new wLe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:c};return d.sheet.hydrate(s),d};function KLe(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ZLe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},JLe=/[A-Z]|^ms/g,QLe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DH=function(t){return t.charCodeAt(1)===45},D8=function(t){return t!=null&&typeof t!="boolean"},GE=$Le(function(e){return DH(e)?e:e.replace(JLe,"-$&").toLowerCase()}),U8=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(QLe,function(n,i,a){return Yo={name:i,styles:a,next:Yo},i})}return ZLe[t]!==1&&!DH(t)&&typeof r=="number"&&r!==0?r+"px":r};function b0(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Yo={name:r.name,styles:r.styles,next:Yo},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Yo={name:n.name,styles:n.styles,next:Yo},n=n.next;var i=r.styles+";";return i}return e4e(e,t,r)}case"function":{if(e!==void 0){var a=Yo,o=r(e);return Yo=a,b0(e,t,o)}break}}if(t==null)return r;var s=t[r];return s!==void 0?s:r}function e4e(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=b0(e,t,r[i])+";";else for(var a in r){var o=r[a];if(typeof o!="object")t!=null&&t[o]!==void 0?n+=a+"{"+t[o]+"}":D8(o)&&(n+=GE(a)+":"+U8(a,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var s=0;s<o.length;s++)D8(o[s])&&(n+=GE(a)+":"+U8(a,o[s])+";");else{var c=b0(e,t,o);switch(a){case"animation":case"animationName":{n+=GE(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}return n}var j8=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Yo,VE=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,a="";Yo=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,a+=b0(n,r,o)):a+=o[0];for(var s=1;s<t.length;s++)a+=b0(n,r,t[s]),i&&(a+=o[s]);j8.lastIndex=0;for(var c="",l;(l=j8.exec(a))!==null;)c+="-"+l[1];var u=KLe(a)+c;return{name:u,styles:a,next:Yo}},t4e=!0;function UH(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):n+=i+" "}),n}var r4e=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||t4e===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},n4e=function(t,r,n){r4e(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function $8(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function G8(e,t,r){var n=[],i=UH(e,n,r);return n.length<2?r:i+t(n)}var i4e=function(t){var r=qLe(t);r.sheet.speedy=function(s){this.isSpeedy=s},r.compat=!0;var n=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=VE(l,r.registered,void 0);return n4e(r,f,!1),r.key+"-"+f.name},i=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=VE(l,r.registered),h="animation-"+f.name;return $8(r,{name:f.name,styles:"@keyframes "+h+"{"+f.styles+"}"}),h},a=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=VE(l,r.registered);$8(r,f)},o=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return G8(r.registered,n,a4e(l))};return{css:n,cx:o,injectGlobal:a,keyframes:i,hydrate:function(c){c.forEach(function(l){r.inserted[l]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:UH.bind(null,r.registered),merge:G8.bind(null,r.registered,n)}},a4e=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var o in i)i[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=i}a&&(r&&(r+=" "),r+=a)}}return r},jH=i4e({key:"css"}),o4e=jH.injectGlobal,s4e=jH.css;function $H(e){const t=iu({classNameStyles:{},others:""}),r=ht(a=>a.stage.replacedUIlable),n=(a,o)=>{var c;const s=(r==null?void 0:r[a])??a;if(Object.keys(t.value.classNameStyles).includes(s)){const l=s4e(((c=t.value.classNameStyles)==null?void 0:c[s])??"");return`${o} ${l}`}return o},i=async()=>{if(e){qe.debug(" Scss ",e);try{const o=(await Ql.get(`game/template/${e}`)).data;t.set(yLe(o))}catch(a){console.log(a)}}};return fe.useEffect(()=>{i()},[]),fe.useEffect(()=>{o4e(t.value.others)},[t.value.others]),l4e(i),n}function l4e(e){const t=()=>{e()};fe.useEffect(()=>($.events.styleUpdate.on(t),()=>$.events.styleUpdate.off(t)),[])}function Hh(e){const t=ht(e),r=fe.useRef(t);return fe.useEffect(()=>{r.current=t},[t]),r}function Xh(e){fe.useEffect(()=>{e()},[])}function zh(e){fe.useEffect(()=>function(){e()},[])}function u4e(e){fe.useEffect(()=>{e()})}const c4e="_Backlog_main_1bt22_2",f4e="_backlog_soft_in_1bt22_1",h4e="_Backlog_main_out_1bt22_17",d4e="_backlog_soft_out_1bt22_1",p4e="_Backlog_main_out_IndexHide_1bt22_30",v4e="_Backlog_main_DisableScroll_1bt22_34",g4e="_backlog_top_icon_1bt22_38",m4e="_backlog_title_1bt22_62",_4e="_backlog_content_1bt22_74",y4e="_backlog_item_1bt22_100",x4e="_backlog_item_in_1bt22_1",b4e="_backlog_item_button_element_1bt22_112",w4e="_backlog_item_out_1bt22_142",E4e="_backlog_func_area_1bt22_151",S4e="_backlog_item_content_name_1bt22_157",C4e="_backlog_item_content_1bt22_157",T4e="_backlog_content_container_1bt22_177",A4e="_sound_icon_1bt22_194",I4e="_backlog_item_content_text_1bt22_207",R4e="_backlog_icon_softin_1bt22_1",Hn={Backlog_main:c4e,backlog_soft_in:f4e,Backlog_main_out:h4e,backlog_soft_out:d4e,Backlog_main_out_IndexHide:p4e,Backlog_main_DisableScroll:v4e,backlog_top_icon:g4e,backlog_title:m4e,backlog_content:_4e,backlog_item:y4e,backlog_item_in:x4e,backlog_item_button_element:b4e,backlog_item_out:w4e,backlog_func_area:E4e,backlog_item_content_name:S4e,backlog_item_content:C4e,backlog_content_container:T4e,sound_icon:A4e,backlog_item_content_text:I4e,backlog_icon_softin:R4e};var P4e=Oo,O4e=function(){return P4e.Date.now()},k4e=O4e,F4e=/\s/;function N4e(e){for(var t=e.length;t--&&F4e.test(e.charAt(t)););return t}var L4e=N4e,B4e=L4e,M4e=/^\s+/;function D4e(e){return e&&e.slice(0,B4e(e)+1).replace(M4e,"")}var U4e=D4e,j4e=U4e,V8=ds,$4e=Vy,H8=0/0,G4e=/^[-+]0x[0-9a-f]+$/i,V4e=/^0b[01]+$/i,H4e=/^0o[0-7]+$/i,X4e=parseInt;function z4e(e){if(typeof e=="number")return e;if($4e(e))return H8;if(V8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=V8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=j4e(e);var r=V4e.test(e);return r||H4e.test(e)?X4e(e.slice(2),r?2:8):G4e.test(e)?H8:+e}var W4e=z4e,Y4e=ds,HE=k4e,X8=W4e,q4e="Expected a function",K4e=Math.max,Z4e=Math.min;function J4e(e,t,r){var n,i,a,o,s,c,l=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(q4e);t=X8(t)||0,Y4e(r)&&(u=!!r.leading,f="maxWait"in r,a=f?K4e(X8(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h);function p(E){var C=n,T=i;return n=i=void 0,l=E,o=e.apply(T,C),o}function d(E){return l=E,s=setTimeout(v,t),u?p(E):o}function g(E){var C=E-c,T=E-l,A=t-C;return f?Z4e(A,a-T):A}function _(E){var C=E-c,T=E-l;return c===void 0||C>=t||C<0||f&&T>=a}function v(){var E=HE();if(_(E))return m(E);s=setTimeout(v,g(E))}function m(E){return s=void 0,h&&n?p(E):(n=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),l=0,n=c=i=s=void 0}function b(){return s===void 0?o:m(HE())}function w(){var E=HE(),C=_(E);if(n=arguments,i=this,c=E,C){if(s===void 0)return d(c);if(f)return clearTimeout(s),s=setTimeout(v,t),p(c)}return s===void 0&&(s=setTimeout(v,t)),o}return w.cancel=y,w.flush=b,w}var GH=J4e;const Q4e=Gi(GH);var eBe=GH,tBe=ds,rBe="Expected a function";function nBe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(rBe);return tBe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),eBe(e,t,{leading:n,maxWait:t,trailing:i})}var iBe=nBe;const aBe=Gi(iBe),Rf="keyboard"in navigator&&navigator.keyboard;function oBe(e){sBe(),uBe(),fBe(e==null?void 0:e.isDisableCtrl),cBe(),hBe(),mBe(),yBe()}function sBe(){const e=Hh(c=>c.GUI),t=bx(),r=xx(e),n=VH(e),i=dBe(e),a=vBe(e),o=pBe(e),s=fe.useCallback(c=>i()?(t("showGlobalDialog",!1),c.preventDefault(),!1):(o()&&t("showExtra",!1),r()&&t("showTextBox",!e.current.showTextBox),n()&&(t("showBacklog",!1),t("showTextBox",!0)),a()&&t("showMenuPanel",!1),c.preventDefault(),!1),[]);Xh(()=>{document.addEventListener("contextmenu",s)}),zh(()=>{document.removeEventListener("contextmenu",s)})}let lBe=setTimeout(()=>{},0);function uBe(){const e=Hh(s=>s.GUI),t=bx(),r=xx(e),n=VH(e),i=HH(e),a=fe.useCallback(aBe(()=>{jn()},100),[]),o=fe.useRef(0);fe.useCallback(s=>{if(i())return;const c=s.wheelDelta&&(s.wheelDelta>0?"up":"down")||s.detail&&(s.detail<0?"up":"down")||"down",l=s.ctrlKey,u=document.querySelector(`.${Hn.backlog_content}`);if(r()&&c==="up"&&!l)t("showBacklog",!0),t("showTextBox",!1);else if(n()&&c==="down"&&!l){if(u){let f=_Be(u),h=new Date().getTime();f&&h-o.current>100&&(t("showBacklog",!1),t("showTextBox",!0)),o.current=h}}else r()&&c==="down"&&!l&&(clearTimeout(lBe),$.gameplay.isFast=!0,setTimeout(()=>{$.gameplay.isFast=!1},150),a())},[]),Xh(()=>{}),zh(()=>{})}function cBe(){const e=["Escape","Backquote"],t=s=>!s.isComposing&&!s.defaultPrevented&&e.includes(s.code),r=Hh(s=>s.GUI),n=fe.useCallback(()=>r.current.showTitle,[r]),i=HH(r),a=bx(),o=fe.useCallback(s=>{!t(s)||n()||(i()?a("showPanicOverlay",!1):(a("showPanicOverlay",!0),iR()))},[]);Xh(()=>{document.addEventListener("keyup",o)}),zh(()=>{document.removeEventListener("keyup",o)})}function fBe(e=!1){const t=Hh(s=>s.GUI),r=xx(t),n=fe.useCallback(s=>s.keyCode===17,[]),i=fe.useCallback(s=>{n(s)&&r()&&!e&&D9()},[]),a=fe.useCallback(s=>{n(s)&&r()&&is()},[]),o=fe.useCallback(s=>{is()},[]);Xh(()=>{document.addEventListener("keydown",i),document.addEventListener("keyup",a),window.addEventListener("blur",o)}),zh(()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",a),window.removeEventListener("blur",o)}),u4e(()=>{r()||is()})}function hBe(){const e=gBe(),t=fe.useCallback(async r=>{e()&&await uV()},[]);Xh(()=>{window.addEventListener("beforeunload",t)}),zh(()=>{window.removeEventListener("beforeunload",t)})}function xx(e){return fe.useCallback(()=>!e.current.showTitle&&!e.current.showMenuPanel&&!e.current.showBacklog&&!e.current.showPanicOverlay,[e])}function VH(e){return fe.useCallback(()=>e.current.showBacklog,[e])}function dBe(e){return fe.useCallback(()=>e.current.showGlobalDialog,[e])}function pBe(e){return fe.useCallback(()=>e.current.showExtra,[e])}function HH(e){return fe.useCallback(()=>e.current.showPanicOverlay,[e])}function vBe(e){return fe.useCallback(()=>[Lr.Save,Lr.Load,Lr.Option].includes(e.current.currentMenuTag),[e])}function gBe(){return fe.useCallback(()=>$.sceneManager.sceneData.currentSentenceId!==0,[$.sceneManager.sceneData])}function bx(){const e=Hr();return(t,r)=>{e(vt({component:t,visibility:r}))}}function mBe(){const e=Hh(c=>c.GUI),t=xx(e),r=bx(),n=fe.useRef(!1),i=fe.useCallback(c=>c.keyCode===32||c.keyCode===13,[]),a=fe.useCallback(c=>{if(i(c)&&t()&&!n.current){if(!e.current.showTextBox){r("showTextBox",!0);return}iR(),jn(),n.current=!0}},[]),o=fe.useCallback(c=>{i(c)&&t()&&(n.current=!1)},[]),s=fe.useCallback(c=>{n.current=!1},[]);Xh(()=>{document.addEventListener("keydown",a),document.addEventListener("keyup",o),document.addEventListener("blur",s)}),zh(()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",o),document.removeEventListener("blur",s)})}function _Be(e){const{scrollTop:t,clientHeight:r,scrollHeight:n}=e;return t===0}function yBe(){const e=ht(n=>n.userData),t=Hr(),r=e.optionData.fullScreen;fe.useEffect(()=>{const n=i=>{i.code==="F11"&&(i.preventDefault(),r!==rs.on?(t(xo({key:"fullScreen",value:rs.on})),Ao()):(t(xo({key:"fullScreen",value:rs.off})),Ao()))};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[r])}const XH=async()=>{le.dispatch(or.setIsShowUnlock(!1));const e=At(ta.Achieve,Et.scene);$.sceneManager.resetScene(),aa(e).then(t=>{$.sceneManager.setCurrentScene(t,ta.Achieve,e).then(r=>{r&&jn()})}),le.dispatch(vt({component:"showMenuPanel",visibility:!1})),le.dispatch(vt({component:"showTextBox",visibility:!1})),le.dispatch(vt({component:"showAchievement",visibility:!0}))};const xBe=({text:e,defaultClass:t,defaultHoverClass:r,defaultActiveClass:n,style:i,hoverStyle:a,activeStyle:o,onMouseEnter:s,onMouseLeave:c,onMouseDown:l,onMouseUp:u,onMouseOut:f,onClick:h,key:p,isACtiveStatus:d,isHoverStatus:g})=>{const _=`customText-${p}-${e}`,[v,m]=fe.useState(!1),[y,b]=fe.useState(!1);let w=t,E=i;const C=()=>{a&&m(!0),s&&s()},T=()=>{m(!1),c&&c()};g&&(w=`${t} ${r}`,E={...i,...a}),d&&(w=`${t} ${n}`,E={...i,...o});const A=document.getElementById(`${_}-text`);A&&e&&(A.innerText=(e==null?void 0:e.replace(/\\n/g,`
`))??e);const I=()=>{y&&b(!0),l==null||l()},O=()=>{b(!1),u==null||u()};return L.jsx("span",{className:w,onMouseEnter:C,onMouseLeave:T,onMouseDown:I,onMouseUp:O,onMouseOut:f,onClick:h,style:E,id:`${_}-text`,children:e})},zH=({src:e,hoverSrc:t,activeSrc:r,defaultClass:n,defaultHoverClass:i,defaultActiveClass:a,style:o,hoverStyle:s,activeStyle:c,onMouseEnter:l,onMouseLeave:u,onMouseDown:f,onMouseUp:h,onClick:p,nId:d,draggable:g,isHoverStatus:_,isACtiveStatus:v})=>{const[m,y]=fe.useState(!1),[b,w]=fe.useState(!1),[E,C]=fe.useState(0),T=()=>C(D=>D+1),A=fe.useRef({width:void 0,height:void 0});let I=n,O=o||{};const P=()=>{(t||s)&&y(!0),l&&l()},k=()=>{y(!1),u&&u()},F=()=>{w(!0),y(!1),f==null||f()},M=()=>{w(!1),h==null||h()};return _&&(I=`${n||""} ${i||""}`,O={...o,...s}),v&&(I=`${n||""} ${a||""}`,O={...o,...c}),O.width===void 0&&(O.width=A.current.width,O.height=A.current.height),L.jsx("img",{id:d,src:_&&t||v&&r||e,className:I,onMouseEnter:P,onMouseLeave:k,onMouseDown:F,onMouseUp:M,draggable:g,style:O,onClick:p,onLoad:D=>{O.width===void 0&&(A.current.width=D.currentTarget.naturalWidth,A.current.height=D.currentTarget.naturalHeight,T())}})},WH=({item:e,children:t,defaultClass:r,defaultHoverClass:n,defaultActiveClass:i,style:a,hoverStyle:o,activeStyle:s,onMouseEnter:c,onMouseLeave:l,onMouseDown:u,onMouseUp:f,onMouseOut:h,onClick:p,id:d,isACtiveStatus:g})=>{const[_,v]=fe.useState(!1),[m,y]=fe.useState(!1);let b=r,w=a,E=o,C=s;if(e){if(e.args.hide)return null;w||(w=qn(e.args.style)),E||(E=qn(e.args.hoverStyle)),C||(C=qn(e.args.activeStyle))}const T=()=>{E&&v(!0),c&&c()},A=()=>{v(!1),l&&l()};_&&(b=`${r} ${n}`,w={...a,...o}),m&&(b=`${r} ${i}`,w={...a,...s});const I=()=>{C&&y(!0),u==null||u()},O=()=>{y(!1),f==null||f()},P=()=>{y(!1),h==null||h()};return L.jsx("div",{className:b,onMouseEnter:T,onMouseLeave:A,onMouseDown:I,onMouseUp:O,onMouseOut:P,onClick:p,style:w,id:d,children:t})},Vs=({item:e,defaultClass:t,key:r})=>{var a,o;if(e.args.hide)return null;const n=qn(e.args.style),i=At(((a=e.args.style)==null?void 0:a.image)||"",Et.background);return(o=e.args.style)!=null&&o.image?L.jsx(zH,{defaultClass:t,src:i,style:n},r):L.jsx("div",{className:t,style:n,draggable:"false"})},Cn=({item:e,defaultClass:t,defaultTextClass:r,key:n,defaultHoverClass:i,defaultActiveClass:a,onMouseEnter:o,onMouseLeave:s,onMouseDown:c,onMouseUp:l,onClick:u,type:f="button",checked:h=!1,onChecked:p=()=>{},text:d="",style:g,defaultText:_=""})=>{var pe,se,_e,Le,Pe;if(e.args.hide)return null;const[v,m]=fe.useState(!1),[y,b]=fe.useState(!1),[w,E]=fe.useState(!1),[C,T]=fe.useState(!1),A=qn(e.args.style),I=qn(e.args.hoverStyle),O=qn(e.args.activeStyle),{playSeClick:P}=bn(),k=((pe=e.args.style)==null?void 0:pe.image)||"",F=(_e=(se=e.args)==null?void 0:se.btnSound)!=null&&_e.clickSound?At(e.args.btnSound.clickSound,Et.bgm):"",M=((Le=e.args.hoverStyle)==null?void 0:Le.image)||k,D=((Pe=e.args.activeStyle)==null?void 0:Pe.image)||"",G=e,Q={},te=fe.useRef(),Y=fe.useRef(0),U=k?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}:{},z={...A,...g};z.width&&(Q.width=z.width),z.height&&(Q.height=z.height),k&&(z.backgroundImage="none");const j=()=>{f==="checkbox"&&(P(F),p(!h)),u&&(P(F),u())},V=typeof u=="function"&&typeof o=="function",ne=()=>{V&&(clearTimeout(te.current),m(!0),Y.current=Date.now())},ae=()=>{if(V){const Ee=Date.now()-Y.current;setTimeout(()=>{m(!1),setTimeout(()=>{j()},320)},Ee-350>0?0:350-Ee)}};return L.jsxs(WH,{onMouseEnter:()=>{b(!0),o==null||o()},onMouseLeave:()=>{b(!1),s==null||s()},onMouseDown:()=>{ne(),E(!0),b(!1),c==null||c()},onMouseUp:()=>{ae(),E(!1),b(!1),T(!1),l==null||l()},onMouseOut:()=>{C?setTimeout(()=>{E(!1),T(!1)},2e3):(E(!1),T(!1))},defaultClass:`${t} ${v?"btn-clicked":""}`,defaultHoverClass:i,defaultActiveClass:a,style:z,hoverStyle:I,activeStyle:O,isACtiveStatus:w,children:[!!k&&L.jsx(zH,{nId:n,src:At(h?M:k,Et.ui),hoverSrc:M?At(M,Et.ui):"",activeSrc:D?At(D,Et.ui):"",style:Q,onMouseEnter:o,onMouseLeave:s,isHoverStatus:y,isACtiveStatus:w,onMouseDown:c,onMouseUp:l}),G.content?L.jsx(xBe,{text:G.content,defaultClass:r,activeStyle:O,style:U,isACtiveStatus:w,isHoverStatus:y,onMouseDown:()=>{k&&T(!0)}},n):!k&&_]},n)},bBe="_Title_main_1y6en_2",wBe="_Title_buttonList_1y6en_9",EBe="_Title_button_1y6en_9",SBe="_Title_button_text_1y6en_39",CBe="_Title_button_custom_1y6en_46",TBe="_Title_backup_background_1y6en_65",ABe="_button_animation_pulse_1y6en_1",Md={Title_main:bBe,Title_buttonList:wBe,Title_button:EBe,Title_button_text:SBe,Title_button_custom:CBe,Title_backup_background:TBe,button_animation_pulse:ABe},IBe=()=>{const e=ht(p=>p.userData),t=ht(p=>p.GUI),r=Hr(),n=e.optionData.fullScreen,{playSeEnter:i,playSeClick:a}=bn(),o=t.gameUIConfigs[mn.title],s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=()=>{const p=sessionStorage.getItem("sdk-token");window.globalThis.getUserInfo(p).then(d=>{const g=le.getState().storeData.gameInfo,{acoinBalance:_}=d.data,{paymentAmount:v,id:m}=g;_<v?window.globalThis.openRechargeDialog(p).then(y=>{window.location.reload()}):window.globalThis.openBuyGameDialog(p,m).then(y=>{y.action!=="CLOSE_DIALOG"&&(lR({paymentAmount:v}),setTimeout(()=>{window.location.reload()},100))})})},l=p=>{window!==window.top?(W9(),window.MessageSaveFunc=p):c()},u=p=>{le.getState().storeData.gameInfo.isBuy?p():l(p)},f=$H(""),h={[Bi.Game_start_button]:()=>{setTimeout(()=>{vLe(),r(QS(!1)),new URLSearchParams(window.location.search).get("gameId");const p={thirdUserId:Js(),productId:String($.gameId),onlineTime:U0(),channel:sessionStorage.getItem("sdk-userId")?1:0};owe(p)},16),t_()},[Bi.Game_achievement_button]:()=>{XH()},[Bi.Game_storyline_button]:()=>{jT()},[Bi.Game_extra_button]:()=>{r(vt({component:"showExtra",visibility:!0}))},[Bi.Game_collection_button]:()=>{_Le()},[Bi.Game_continue_button]:()=>{r(vt({component:"showTitle",visibility:!1})),r(vt({component:"isInGaming",visibility:!0})),gLe(),t_()},[Bi.Game_option_button]:()=>{r(vt({component:"showMenuPanel",visibility:!0})),r(rc(Lr.Option))},[Bi.Game_load_button]:()=>{r(vt({component:"showMenuPanel",visibility:!0})),r(rc(Lr.Load))},[Bi.Game_progression_button]:()=>{r(vt({component:"showProgressAndAchievement",visibility:!0}))},[Bi.Game_affinity_button]:()=>{r(vt({component:"showAffinity",visibility:!0}))},[Bi.Game_link_button]:()=>{var d,g;const p=((g=(d=o.buttons[Bi.Game_link_button].args)==null?void 0:d.buttonLink)==null?void 0:g.link)??"";if(p)if(s){const _=window.open("","_blank");_.location.href=p}else window.open(p)}};return L.jsxs(L.Fragment,{children:[t.showTitle&&L.jsx("div",{className:f("Title_backup_background",Md.Title_backup_background)}),L.jsx("div",{id:"enter_game_target",onClick:()=>{SI(t.titleBgm),r(vt({component:"isEnterGame",visibility:!0})),n===rs.on&&(document.documentElement.requestFullscreen(),Rf&&Rf.lock(["Escape","F11"]))},onMouseEnter:i}),L.jsxs("div",{style:{opacity:t.showTitle?1:0,zIndex:t.showTitle?1:-99},children:[L.jsx(Vs,{defaultClass:Md.Title_main,item:o.other[$p.Title_img]}),L.jsx("div",{className:Md.Title_buttonList,children:Object.keys(o.buttons).map(p=>{let d=p,g=o.buttons[d];return L.jsx(Cn,{item:g,defaultClass:`${Md.Title_button} interactive`,defaultTextClass:Md.Title_button_text,onClick:()=>{if(le.getState().storeData.isEditorPreviewMode)h[d]();else{const v=le.getState().storeData.gameInfo||{},{paymentMode:m}=v;m==="paid"&&$.isFinishTrial==="0"?u(()=>{h[d]()}):h[d]()}},onMouseEnter:i},d)})})]})]})},RBe="_Logo_main_y88l5_1",PBe="_overlay_y88l5_14",OBe="_Logo_Back_y88l5_61",kBe="_animationActive_y88l5_75",FBe="_fadeout_y88l5_1",Fg={Logo_main:RBe,"change-img-anim":"_change-img-anim_y88l5_1",overlay:PBe,"fade-in":"_fade-in_y88l5_1",Logo_Back:OBe,animationActive:kBe,fadeout:FBe,"fade-in-out":"_fade-in-out_y88l5_1"},NBe=()=>{const e=Hr(),t=ht(l=>l.GUI),r=t.logoImage,n=t.isEnterGame,i=iu(-1),a=iu(-1),o=5e3,s=()=>{clearTimeout(a.value),i.value<r.length-1?(i.set(i.value+1),a.set(setTimeout(s,o))):(t!=null&&t.isShowR18Modal&&e(vt({component:"openR18Modal",visibility:!0})),i.set(-1))};fe.useEffect(()=>{n&&r.length>0&&(i.set(0),a.set(setTimeout(s,o)))},[n,r]);const c=i.value===-1?"":r[i.value];return L.jsxs(L.Fragment,{children:[i.value!==-1&&L.jsx("div",{className:Fg.Logo_Back+" "+(i.value===r.length-1?Fg.animationActive:""),style:{animationDuration:`${o}ms`}},i.value+"wh"),c!==""&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:Fg.Logo_main,onClick:s,style:{backgroundImage:`url("${c}")`,animationDuration:`${o}ms`}},i.value+"bg"),L.jsx("div",{className:Fg.overlay})]})]})},z8=e=>{if(sessionStorage.getItem("sdk-report"))return;const r=new URLSearchParams(window.location.search).get("gameId"),n={userId:sessionStorage.getItem("sdk-userId"),gameId:$.gameId||r,gameName:e.gameName,paymentMode:e.paymentMode,isBuy:e.isBuy,time:new Date};Ql.post("https://test-api.idoltime.games/editorLog",{record:JSON.stringify(n)}).then(()=>{sessionStorage.setItem("sdk-report","1")}).catch(i=>{alert(i)})},LBe=e=>{const t=a=>document.querySelector(`script[src="${a}"]`)!==null,r=a=>document.querySelector(`link[href="${a}"]`)!==null,n=a=>{const o=document.createElement("script");o.type="text/javascript",o.src=a,document.head.appendChild(o),o.onload=function(){e()}},i=a=>{const o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=a,document.head.appendChild(o)};r($.gameCssLink)||i($.gameCssLink),t($.gameJsLink)||n($.gameJsLink)},BBe=()=>{window.onload=()=>{window.globalThis.getUserInfo=window.getUserInfo,window.globalThis.getGameDetail=window.getGameDetail,window.globalThis.logout=window.logout,window.globalThis.openLoginDialog=window.openLoginDialog,window.globalThis.closeLoginDialog=window.closeLoginDialog,window.globalThis.openRechargeDialog=window.openRechargeDialog,window.globalThis.closeRechargeDialog=window.closeRechargeDialog,window.globalThis.changeLanguage=window.changeLanguage,window.globalThis.openGameItemPurchaseDialog=window.openGameItemPurchaseDialog,window.globalThis.closeGameItemPurchaseDialog=window.closeGameItemPurchaseDialog,window.globalThis.openBuyGameDialog=window.openBuyGameDialog,window.globalThis.closeBuyGameDialog=window.closeBuyGameDialog}},MBe="_Menu_main_x2m75_1",DBe="_Menu_ShowSoftly_x2m75_1",UBe="_Menu_TagContent_x2m75_10",W8={Menu_main:MBe,Menu_ShowSoftly:DBe,Menu_TagContent:UBe},jBe="_MenuPanel_main_1c9ky_1",$Be="_MenuPanel_button_1c9ky_10",GBe="_MenuPanel_button_icon_1c9ky_38",VBe="_MenuPanel_button_hl_1c9ky_44",Pf={MenuPanel_main:jBe,MenuPanel_button:$Be,MenuPanel_button_icon:GBe,MenuPanel_button_hl:VBe};var HBe=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function Y8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function q8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y8(Object(r),!0).forEach(function(n){XBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y8(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zBe(e,t){if(e==null)return{};var r=WBe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WBe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var YBe={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function qBe(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function KBe(e,t,r){var n=typeof t.fill=="string"?[t.fill]:t.fill||[],i=[],a=t.theme||r.theme;switch(a){case"outline":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none");break;case"filled":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("#FFF"),i.push("#FFF");break;case"two-tone":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone);break;case"multi-color":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.multiColor.outFillColor),i.push(typeof n[2]=="string"?n[2]:r.colors.multiColor.innerStrokeColor),i.push(typeof n[3]=="string"?n[3]:r.colors.multiColor.innerFillColor);break}return{size:t.size||r.size,strokeWidth:t.strokeWidth||r.strokeWidth,strokeLinecap:t.strokeLinecap||r.strokeLinecap,strokeLinejoin:t.strokeLinejoin||r.strokeLinejoin,colors:i,id:e}}var YH=fe.createContext(YBe);YH.Provider;function Wh(e,t,r){return function(n){var i=n.size,a=n.strokeWidth,o=n.strokeLinecap,s=n.strokeLinejoin,c=n.theme,l=n.fill,u=n.className,f=n.spin,h=zBe(n,HBe),p=fe.useContext(YH),d=fe.useMemo(qBe,[]),g=KBe(d,{size:i,strokeWidth:a,strokeLinecap:o,strokeLinejoin:s,theme:c,fill:l},p),_=[p.prefix+"-icon"];return _.push(p.prefix+"-icon-"+e),t&&p.rtl&&_.push(p.prefix+"-icon-rtl"),f&&_.push(p.prefix+"-icon-spin"),u&&_.push(u),kr.createElement("span",q8(q8({},h),{},{className:_.join(" ")}),r(g))}}const ZBe=Wh("folder-open",!0,function(e){return kr.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},kr.createElement("path",{d:"M4 9V41L9 21H39.5V15C39.5 13.8954 38.6046 13 37.5 13H24L19 7H6C4.89543 7 4 7.89543 4 9Z",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M40 41L44 21H8.8125L4 41H40Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),JBe=Wh("hamburger-button",!1,function(e){return kr.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},kr.createElement("path",{d:"M7.94971 11.9497H39.9497",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M7.94971 23.9497H39.9497",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M7.94971 35.9497H39.9497",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),QBe=Wh("home",!1,function(e){return kr.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},kr.createElement("path",{d:"M9 18V42H39V18L24 6L9 18Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M19 29V42H29V29H19Z",fill:e.colors[3],stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M9 42H39",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap}))}),eMe=Wh("logout",!0,function(e){return kr.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},kr.createElement("path",{d:"M23.9917 6H6V42H24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M33 33L42 24L33 15",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M16 23.9917H42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),tMe=Wh("save",!0,function(e){return kr.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},kr.createElement("path",{d:"M6 9C6 7.34315 7.34315 6 9 6H34.2814L42 13.2065V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6",fill:e.colors[3]}),kr.createElement("path",{d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6H24.0083Z",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M9 6H34.2814",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M14 26H34",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M14 34H24.0083",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),rMe=Wh("setting-two",!1,function(e){return kr.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},kr.createElement("path",{d:"M18.2838 43.1713C14.9327 42.1736 11.9498 40.3213 9.58787 37.867C10.469 36.8227 11 35.4734 11 34.0001C11 30.6864 8.31371 28.0001 5 28.0001C4.79955 28.0001 4.60139 28.01 4.40599 28.0292C4.13979 26.7277 4 25.3803 4 24.0001C4 21.9095 4.32077 19.8938 4.91579 17.9995C4.94381 17.9999 4.97188 18.0001 5 18.0001C8.31371 18.0001 11 15.3138 11 12.0001C11 11.0488 10.7786 10.1493 10.3846 9.35011C12.6975 7.1995 15.5205 5.59002 18.6521 4.72314C19.6444 6.66819 21.6667 8.00013 24 8.00013C26.3333 8.00013 28.3556 6.66819 29.3479 4.72314C32.4795 5.59002 35.3025 7.1995 37.6154 9.35011C37.2214 10.1493 37 11.0488 37 12.0001C37 15.3138 39.6863 18.0001 43 18.0001C43.0281 18.0001 43.0562 17.9999 43.0842 17.9995C43.6792 19.8938 44 21.9095 44 24.0001C44 25.3803 43.8602 26.7277 43.594 28.0292C43.3986 28.01 43.2005 28.0001 43 28.0001C39.6863 28.0001 37 30.6864 37 34.0001C37 35.4734 37.531 36.8227 38.4121 37.867C36.0502 40.3213 33.0673 42.1736 29.7162 43.1713C28.9428 40.752 26.676 39.0001 24 39.0001C21.324 39.0001 19.0572 40.752 18.2838 43.1713Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),kr.createElement("path",{d:"M24 31C27.866 31 31 27.866 31 24C31 20.134 27.866 17 24 17C20.134 17 17 20.134 17 24C17 27.866 20.134 31 24 31Z",fill:e.colors[3],stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),nMe=e=>{let t;switch(e.iconName){case"save":t=L.jsx(tMe,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"load":t=L.jsx(ZBe,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"option":t=L.jsx(rMe,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"title":t=L.jsx(QBe,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;case"exit":t=L.jsx(eMe,{theme:"outline",size:"1.2em",fill:e.iconColor,strokeWidth:2});break;default:t=L.jsx("div",{})}return t},Dd=e=>{const{playSePageChange:t,playSeEnter:r}=bn();let n=Pf.MenuPanel_button;return e.hasOwnProperty("buttonOnClassName")&&(n=n+e.buttonOnClassName),L.jsxs("div",{className:n,onClick:()=>{e.clickFunc()},onMouseEnter:r,style:{...e.style,color:e.tagColor},children:[L.jsx("div",{className:Pf.MenuPanel_button_icon,children:L.jsx(nMe,{iconName:e.iconName,iconColor:e.iconColor})}),e.tagName]})},kc=async()=>{const e=le.dispatch;Wy(),Xy(),is(),e($t({key:"playVocal",value:""})),e(vt({component:"showTitle",visibility:!0})),e(or.setIsShowUnlock(!1)),e(or.setShowStoryline(!1)),z0(le.getState().GUI.titleBg),await uV()};function vO(e,t){if(e==null)return{};var r=Nge(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var iMe={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const aMe=Gi(iMe);var oMe=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function K8(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=e.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(t.name=r[1],(aMe[r[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var n=e.indexOf("-->");return{type:"comment",comment:n!==-1?e.slice(4,n):""}}for(var i=new RegExp(oMe),a=null;(a=i.exec(e))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),t.attrs[s[0]]=s[1],i.lastIndex--}else a[2]&&(t.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return t}var sMe=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,lMe=/^\s*$/,uMe=Object.create(null);function qH(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(r){var n=[];for(var i in r)n.push(i+'="'+r[i]+'"');return n.length?" "+n.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(qH,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var cMe={parse:function(e,t){t||(t={}),t.components||(t.components=uMe);var r,n=[],i=[],a=-1,o=!1;if(e.indexOf("<")!==0){var s=e.indexOf("<");n.push({type:"text",content:s===-1?e:e.substring(0,s)})}return e.replace(sMe,function(c,l){if(o){if(c!=="</"+r.name+">")return;o=!1}var u,f=c.charAt(1)!=="/",h=c.startsWith("<!--"),p=l+c.length,d=e.charAt(p);if(h){var g=K8(c);return a<0?(n.push(g),n):((u=i[a]).children.push(g),n)}if(f&&(a++,(r=K8(c)).type==="tag"&&t.components[r.name]&&(r.type="component",o=!0),r.voidElement||o||!d||d==="<"||r.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),a===0&&n.push(r),(u=i[a-1])&&u.children.push(r),i[a]=r),(!f||r.voidElement)&&(a>-1&&(r.voidElement||r.name===c.slice(2,-1))&&(a--,r=a===-1?n:i[a]),!o&&d!=="<"&&d)){u=a===-1?n:i[a].children;var _=e.indexOf("<",p),v=e.slice(p,_===-1?void 0:_);lMe.test(v)&&(v=" "),(_>-1&&a+u.length>=0||v!==" ")&&u.push({type:"text",content:v})}}),n},stringify:function(e){return e.reduce(function(t,r){return t+qH("",r)},"")}};function hm(){if(console&&console.warn){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(e=console).warn.apply(e,r)}}var Z8={};function C_(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&Z8[t[0]]||(typeof t[0]=="string"&&(Z8[t[0]]=new Date),hm.apply(void 0,t))}var KH=function(t,r){return function(){if(t.isInitialized)r();else{var n=function i(){setTimeout(function(){t.off("initialized",i)},0),r()};t.on("initialized",n)}}};function J8(e,t,r){e.loadNamespaces(t,KH(e,r))}function Q8(e,t,r,n){typeof r=="string"&&(r=[r]),r.forEach(function(i){e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,KH(e,n))}function fMe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.languages[0],i=t.options?t.options.fallbackLng:!1,a=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var o=function(c,l){var u=t.services.backendConnector.state["".concat(c,"|").concat(l)];return u===-1||u===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||o(n,e)&&(!i||o(a,e)))}function hMe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t.languages||!t.languages.length)return C_("i18n.languages were undefined or empty",t.languages),!0;var n=t.options.ignoreJSONStructure!==void 0;return n?t.hasLoadedNamespace(e,{lng:r.lng,precheck:function(a,o){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,e))return!1}}):fMe(e,t,r)}var dMe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,pMe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},vMe=function(t){return pMe[t]},gMe=function(t){return t.replace(dMe,vMe)};function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var VT={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:gMe};function mMe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};VT=t6(t6({},VT),e)}function ZH(){return VT}var JH;function _Me(e){JH=e}function gO(){return JH}var yMe=["format"],xMe=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XE(e,t){if(!e)return!1;var r=e.props?e.props.children:e.children;return t?r.length>0:!!r}function zE(e){return e?e.props?e.props.children:e.children:[]}function bMe(e){return Object.prototype.toString.call(e)!=="[object Array]"?!1:e.every(function(t){return fe.isValidElement(t)})}function Qd(e){return Array.isArray(e)?e:[e]}function wMe(e,t){var r=ti({},t);return r.props=Object.assign(e.props,t.props),r}function QH(e,t){if(!e)return"";var r="",n=Qd(e),i=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return n.forEach(function(a,o){if(typeof a=="string")r+="".concat(a);else if(fe.isValidElement(a)){var s=Object.keys(a.props).length,c=i.indexOf(a.type)>-1,l=a.props.children;if(!l&&c&&s===0)r+="<".concat(a.type,"/>");else if(!l&&(!c||s!==0))r+="<".concat(o,"></").concat(o,">");else if(a.props.i18nIsDynamicList)r+="<".concat(o,"></").concat(o,">");else if(c&&s===1&&typeof l=="string")r+="<".concat(a.type,">").concat(l,"</").concat(a.type,">");else{var u=QH(l,t);r+="<".concat(o,">").concat(u,"</").concat(o,">")}}else if(a===null)hm("Trans: the passed in value is invalid - seems you passed in a null child.");else if(di(a)==="object"){var f=a.format,h=vO(a,yMe),p=Object.keys(h);if(p.length===1){var d=f?"".concat(p[0],", ").concat(f):p[0];r+="{{".concat(d,"}}")}else hm("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",a)}else hm("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",a)}),r}function EMe(e,t,r,n,i,a){if(t==="")return[];var o=n.transKeepBasicHtmlNodesFor||[],s=t&&new RegExp(o.join("|")).test(t);if(!e&&!s)return[t];var c={};function l(_){var v=Qd(_);v.forEach(function(m){typeof m!="string"&&(XE(m)?l(zE(m)):di(m)==="object"&&!fe.isValidElement(m)&&Object.assign(c,m))})}l(e);var u=cMe.parse("<0>".concat(t,"</0>")),f=ti(ti({},c),i);function h(_,v,m){var y=zE(_),b=d(y,v.children,m);return bMe(y)&&b.length===0?y:b}function p(_,v,m,y,b){_.dummy&&(_.children=v),m.push(fe.cloneElement(_,ti(ti({},_.props),{},{key:y}),b?void 0:v))}function d(_,v,m){var y=Qd(_),b=Qd(v);return b.reduce(function(w,E,C){var T=E.children&&E.children[0]&&E.children[0].content&&r.services.interpolator.interpolate(E.children[0].content,f,r.language);if(E.type==="tag"){var A=y[parseInt(E.name,10)];!A&&m.length===1&&m[0][E.name]&&(A=m[0][E.name]),A||(A={});var I=Object.keys(E.attrs).length!==0?wMe({props:E.attrs},A):A,O=fe.isValidElement(I),P=O&&XE(E,!0)&&!E.voidElement,k=s&&di(I)==="object"&&I.dummy&&!O,F=di(e)==="object"&&e!==null&&Object.hasOwnProperty.call(e,E.name);if(typeof I=="string"){var M=r.services.interpolator.interpolate(I,f,r.language);w.push(M)}else if(XE(I)||P){var D=h(I,E,m);p(I,D,w,C)}else if(k){var G=d(y,E.children,m);w.push(fe.cloneElement(I,ti(ti({},I.props),{},{key:C}),G))}else if(Number.isNaN(parseFloat(E.name)))if(F){var Q=h(I,E,m);p(I,Q,w,C,E.voidElement)}else if(n.transSupportBasicHtmlNodes&&o.indexOf(E.name)>-1)if(E.voidElement)w.push(fe.createElement(E.name,{key:"".concat(E.name,"-").concat(C)}));else{var te=d(y,E.children,m);w.push(fe.createElement(E.name,{key:"".concat(E.name,"-").concat(C)},te))}else if(E.voidElement)w.push("<".concat(E.name," />"));else{var Y=d(y,E.children,m);w.push("<".concat(E.name,">").concat(Y,"</").concat(E.name,">"))}else if(di(I)==="object"&&!O){var U=E.children[0]?T:null;U&&w.push(U)}else E.children.length===1&&T?w.push(fe.cloneElement(I,ti(ti({},I.props),{},{key:C}),T)):w.push(fe.cloneElement(I,ti(ti({},I.props),{},{key:C})))}else if(E.type==="text"){var z=n.transWrapTextNodes,j=a?n.unescape(r.services.interpolator.interpolate(E.content,f,r.language)):r.services.interpolator.interpolate(E.content,f,r.language);z?w.push(fe.createElement(z,{key:"".concat(E.name,"-").concat(C)},j)):w.push(j)}return w},[])}var g=d([{dummy:!0,children:e||[]}],u,Qd(e||[]));return zE(g[0])}function SMe(e){var t=e.children,r=e.count,n=e.parent,i=e.i18nKey,a=e.context,o=e.tOptions,s=o===void 0?{}:o,c=e.values,l=e.defaults,u=e.components,f=e.ns,h=e.i18n,p=e.t,d=e.shouldUnescape,g=vO(e,xMe),_=h||gO();if(!_)return C_("You will need to pass in an i18next instance by using i18nextReactModule"),t;var v=p||_.t.bind(_)||function(P){return P};a&&(s.context=a);var m=ti(ti({},ZH()),_.options&&_.options.react),y=f||v.ns||_.options&&_.options.defaultNS;y=typeof y=="string"?[y]:y||["translation"];var b=l||QH(t,m)||m.transEmptyNodeValue||i,w=m.hashTransKey,E=i||(w?w(b):b),C=c?s.interpolation:{interpolation:ti(ti({},s.interpolation),{},{prefix:"#$?",suffix:"?$#"})},T=ti(ti(ti(ti({},s),{},{count:r},c),C),{},{defaultValue:b,ns:y}),A=E?v(E,T):b,I=EMe(u||t,A,_,m,T,d),O=n!==void 0?n:m.defaultTransParent;return O?fe.createElement(O,g,I):I}function Bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kU(n.key),n)}}function Mo(e,t,r){return t&&n6(e.prototype,t),r&&n6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var CMe={type:"3rdParty",init:function(t){mMe(t.options.react),_Me(t)}},eX=fe.createContext(),TMe=function(){function e(){Bo(this,e),this.usedNamespaces={}}return Mo(e,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}(),AMe=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function IMe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RMe(e){var t=e.children,r=e.count,n=e.parent,i=e.i18nKey,a=e.context,o=e.tOptions,s=o===void 0?{}:o,c=e.values,l=e.defaults,u=e.components,f=e.ns,h=e.i18n,p=e.t,d=e.shouldUnescape,g=vO(e,AMe),_=fe.useContext(eX)||{},v=_.i18n,m=_.defaultNS,y=h||v||gO(),b=p||y&&y.t.bind(y);return SMe(IMe({children:t,count:r,parent:n,i18nKey:i,context:a,tOptions:s,values:c,defaults:l,components:u,ns:f||b&&b.ns||m||y&&y.options&&y.options.defaultNS,i18n:y,t:p,shouldUnescape:d},g))}function tX(e){if(Array.isArray(e))return e}function PMe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function a6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rX(e,t){if(e){if(typeof e=="string")return a6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a6(e,t)}}function nX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OMe(e,t){return tX(e)||PMe(e,t)||rX(e,t)||nX()}function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function WE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var kMe=function(t,r){var n=fe.useRef();return fe.useEffect(function(){n.current=r?n.current:t},[t,r]),n.current};function wx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.i18n,n=fe.useContext(eX)||{},i=n.i18n,a=n.defaultNS,o=r||i||gO();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new TMe),!o){C_("You will need to pass in an i18next instance by using initReactI18next");var s=function(A,I){return typeof I=="string"?I:I&&di(I)==="object"&&typeof I.defaultValue=="string"?I.defaultValue:Array.isArray(A)?A[A.length-1]:A},c=[s,{},!1];return c.t=s,c.i18n={},c.ready=!1,c}o.options.react&&o.options.react.wait!==void 0&&C_("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=WE(WE(WE({},ZH()),o.options.react),t),u=l.useSuspense,f=l.keyPrefix,h=e||a||o.options&&o.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var p=(o.isInitialized||o.initializedStoreOnce)&&h.every(function(T){return hMe(T,o,l)});function d(){return o.getFixedT(t.lng||null,l.nsMode==="fallback"?h:h[0],f)}var g=fe.useState(d),_=OMe(g,2),v=_[0],m=_[1],y=h.join();t.lng&&(y="".concat(t.lng).concat(y));var b=kMe(y),w=fe.useRef(!0);fe.useEffect(function(){var T=l.bindI18n,A=l.bindI18nStore;w.current=!0,!p&&!u&&(t.lng?Q8(o,t.lng,h,function(){w.current&&m(d)}):J8(o,h,function(){w.current&&m(d)})),p&&b&&b!==y&&w.current&&m(d);function I(){w.current&&m(d)}return T&&o&&o.on(T,I),A&&o&&o.store.on(A,I),function(){w.current=!1,T&&o&&T.split(" ").forEach(function(O){return o.off(O,I)}),A&&o&&A.split(" ").forEach(function(O){return o.store.off(O,I)})}},[o,y]);var E=fe.useRef(!0);fe.useEffect(function(){w.current&&!E.current&&m(d),E.current=!1},[o,f]);var C=[v,o,p];if(C.t=v,C.i18n=o,C.ready=p,p||!p&&!u)return C;throw new Promise(function(T){t.lng?Q8(o,t.lng,h,function(){return T()}):J8(o,h,function(){return T()})})}function au(e){const{t}=wx(),r=i=>t(i[0]==="$"?i.slice(1):e+i);function n(i,...a){return a.length?[r(i),...a.map(o=>r(o))]:r(i)}return n}const FMe=()=>{const e=au("menu."),{playSeClick:t,playSeDialogOpen:r,playSePageChange:n}=bn(),i=ht(g=>g.GUI),a=Hr(),o=i.currentMenuTag===Lr.Save?` ${Pf.MenuPanel_button_hl}`:"",s=i.currentMenuTag===Lr.Load?` ${Pf.MenuPanel_button_hl}`:"",c=i.currentMenuTag===Lr.Option?` ${Pf.MenuPanel_button_hl}`:"",l=i.currentMenuTag===Lr.Save?"rgba(74, 34, 93, 0.9)":"rgba(123,144,169,1)",u=i.currentMenuTag===Lr.Load?"rgba(11, 52, 110, 0.9)":"rgba(123,144,169,1)",f=i.currentMenuTag===Lr.Option?"rgba(81, 110, 65, 0.9)":"rgba(123,144,169,1)",h=i.currentMenuTag===Lr.Save?"rgba(74, 34, 93, 0.9)":"rgba(123,144,169,1)",p=i.currentMenuTag===Lr.Load?"rgba(11, 52, 110, 0.9)":"rgba(123,144,169,1)",d=i.currentMenuTag===Lr.Option?"rgba(81, 110, 65, 0.9)":"rgba(123,144,169,1)";return L.jsxs("div",{className:Pf.MenuPanel_main,children:[L.jsx(Dd,{iconName:"save",buttonOnClassName:o,iconColor:h,tagColor:l,clickFunc:()=>{n(),!i.showTitle&&a(rc(Lr.Save))},tagName:e("saving.title")},"saveButton"),L.jsx(Dd,{iconName:"load",buttonOnClassName:s,iconColor:p,tagColor:u,clickFunc:()=>{n(),a(rc(Lr.Load))},tagName:e("loadSaving.title")},"loadButton"),L.jsx(Dd,{iconName:"title",iconColor:"rgba(123,144,169,1)",tagColor:"rgba(123,144,169,1)",clickFunc:()=>{r(),ma({title:e("$gaming.buttons.titleTips"),leftText:e("$common.no"),rightText:e("$common.yes"),leftFunc:()=>{},rightFunc:()=>{kc(),a(vt({component:"showMenuPanel",visibility:!1}))}})},tagName:e("title.title")},"titleIcon"),L.jsx(Dd,{iconName:"option",style:{marginLeft:"auto"},buttonOnClassName:c,iconColor:d,tagColor:f,clickFunc:()=>{n(),a(rc(Lr.Option))},tagName:e("options.title")},"optionButton"),L.jsx(Dd,{iconName:"exit",iconColor:"rgba(123,144,169,1)",tagColor:"rgba(123,144,169,1)",clickFunc:()=>{t(),a(vt({component:"showMenuPanel",visibility:!1}))},tagName:e("exit.title")},"exitIcon")]})},NMe="_Save_Load_main_1tngs_2",LMe="_Common_back_1tngs_13",BMe="_Common_title_1tngs_30",MMe="_Save_title_1tngs_41",DMe="_Load_title_1tngs_45",UMe="_Save_Load_top_buttonList_1tngs_49",jMe="_Save_Load_indicator_container_1tngs_59",$Me="_Save_Load_top_button_1tngs_49",GMe="_Save_Load_indicator_default_1tngs_74",VMe="_Save_Load_indicator_active_1tngs_83",HMe="_Save_Load_content_1tngs_92",XMe="_Save_Load_content_element_1tngs_105",zMe="_Elements_in_1tngs_1",WMe="_Elements_in_transform_1tngs_1",YMe="_Save_Load_content_element_top_1tngs_120",qMe="_Save_Load_info_1tngs_127",KMe="_Save_Load_content_ele_1tngs_105",ZMe="_Save_Load_bg_1tngs_158",JMe="_Save_Load_content_miniRen_bg_1tngs_170",QMe="_Save_Load_border_1tngs_181",eDe="_Btn_1tngs_195",tDe="_Btn_r_1tngs_209",lr={Save_Load_main:NMe,Common_back:LMe,Common_title:BMe,Save_title:MMe,Load_title:DMe,Save_Load_top_buttonList:UMe,Save_Load_indicator_container:jMe,Save_Load_top_button:$Me,Save_Load_indicator_default:GMe,Save_Load_indicator_active:VMe,Save_Load_content:HMe,Save_Load_content_element:XMe,Elements_in:zMe,Elements_in_transform:WMe,Save_Load_content_element_top:YMe,Save_Load_info:qMe,Save_Load_content_ele:KMe,Save_Load_bg:ZMe,Save_Load_content_miniRen_bg:JMe,Save_Load_border:QMe,Btn:eDe,Btn_r:tDe},rDe=()=>{const{playSeClick:e,playSePageChange:t,playSeEnter:r,playSeDialogOpen:n}=bn(),i=ht(v=>v.userData),a=ht(v=>v.saveData),o=Hr(),s=[],l=ht(v=>v.GUI).gameUIConfigs[mn.load];for(let v=1;v<=4;v++){const m=L.jsx("div",{onClick:()=>{o(Xm(v)),t()},onMouseEnter:r,className:`${lr.Save_Load_top_button} interactive`,children:L.jsx("div",{className:v===i.optionData.slPage?lr.Save_Load_indicator_active:lr.Save_Load_indicator_default})},"Load_element_page"+v);s.push(m)}const u=au("common."),f=[],h=(i.optionData.slPage-1)*6+1,p=h+5;fe.useEffect(()=>{no(2)},[]);let d=0;for(let v=h;v<=p;v++){d++;const m=a.saveData[v];let y=L.jsx("div",{className:lr.Save_Load_content_ele});m&&(y=L.jsxs(L.Fragment,{children:[L.jsx("div",{className:lr.Save_Load_bg}),L.jsx("div",{className:lr.Save_Load_border}),L.jsx("img",{className:lr.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:m.previewImage}),L.jsxs("div",{className:lr.Save_Load_info,children:[m.saveTime,L.jsx("br",{}),L.jsx("span",{style:{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:Mt(300)},children:m.nowStageState.showText})]})]}));const b=L.jsx("div",{onClick:()=>{a.saveData[v]?(n(),ma({title:g("saving.isOverwrite"),leftText:u("no"),rightText:u("yes"),leftFunc:()=>{},rightFunc:()=>{r4(v)}})):(t(),r4(v))},onMouseEnter:r,className:`${lr.Save_Load_content_element} interactive`,style:{animationDelay:`${d*30}ms`},children:y},"saveElement_"+v);f.push(b)}const g=au("menu."),_=v=>{let y=i.optionData.slPage;v==="left"?y=y>1?y-1:4:y=y<4?y+1:1,o(Xm(y)),Ao(),t()};return L.jsxs("div",{className:lr.Save_Load_main,children:[L.jsx(Cn,{item:l.buttons.Load_back_button,defaultClass:`${lr.Common_back} interactive`,onClick:()=>{o(vt({component:"showMenuPanel",visibility:!1})),$.videoManager.resumePausedVideo()},onMouseEnter:r}),L.jsx("div",{className:`${lr.Common_title} ${lr.Save_title}`}),L.jsx("div",{className:lr.Save_Load_content,id:"Save_content_page_"+i.optionData.slPage,children:f}),L.jsxs("div",{className:lr.Save_Load_top_buttonList,children:[L.jsx("div",{className:`${lr.Btn} interactive`,onMouseEnter:r,onClick:()=>_("left")}),L.jsx("div",{className:lr.Save_Load_indicator_container,children:s}),L.jsx("div",{className:`${lr.Btn} ${lr.Btn_r} interactive`,onMouseEnter:r,onClick:()=>_("right")})]})]})},nDe=()=>{const{playSeClick:e,playSeEnter:t,playSePageChange:r}=bn(),n=ht(d=>d.userData),i=ht(d=>d.saveData),a=Hr(),o=ht(d=>d.GUI),s=[],c=o.gameUIConfigs[mn.load];for(let d=1;d<=4;d++){const g=L.jsx("div",{onClick:()=>{a(Xm(d)),r()},onMouseEnter:t,className:`${lr.Save_Load_top_button} interactive`,children:L.jsx("div",{className:d===n.optionData.slPage?lr.Save_Load_indicator_active:lr.Save_Load_indicator_default})},"Load_element_page"+d);s.push(g)}const l=[],u=(n.optionData.slPage-1)*6+1,f=u+5;fe.useEffect(()=>{no(2)},[]);let h=0;for(let d=u;d<=f;d++){h++;const g=i.saveData[d];let _=L.jsx("div",{className:lr.Save_Load_content_ele});g&&(_=L.jsxs(L.Fragment,{children:[L.jsx("div",{className:lr.Save_Load_bg}),L.jsx("img",{className:lr.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:g.previewImage}),L.jsx("div",{className:lr.Save_Load_border}),L.jsxs("div",{className:lr.Save_Load_info,children:[g.saveTime,L.jsx("br",{}),L.jsx("span",{style:{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:Mt(300)},children:g.nowStageState.showText})]})]}));const v=L.jsx("div",{onClick:()=>{var m;e(),(m=window==null?void 0:window.pubsub)==null||m.publish("loading",{loading:!0}),UOe(d),t_()},onMouseEnter:t,className:`${lr.Save_Load_content_element} interactive`,style:{animationDelay:`${h*30}ms`},children:_},"loadElement_"+d);l.push(v)}au("menu.");const p=d=>{let _=n.optionData.slPage;d==="left"?_=_>1?_-1:4:_=_<4?_+1:1,a(Xm(_)),r()};return L.jsxs("div",{className:lr.Save_Load_main,children:[L.jsx(Cn,{item:c.buttons.Load_back_button,defaultClass:`${lr.Common_back} interactive`,onClick:()=>{a(vt({component:"showMenuPanel",visibility:!1})),$.videoManager.resumePausedVideo()},onMouseEnter:t}),L.jsx(Cn,{item:c.other[ey.Load_title],defaultClass:`${lr.Common_title} ${lr.Load_title}`}),L.jsx("div",{className:lr.Save_Load_content,id:"Load_content_page_"+n.optionData.slPage,children:l}),L.jsxs("div",{className:lr.Save_Load_top_buttonList,children:[L.jsx("div",{className:`${lr.Btn} interactive`,onMouseEnter:t,onClick:()=>p("left")}),L.jsx("div",{className:lr.Save_Load_indicator_container,children:s}),L.jsx("div",{className:`${lr.Btn} ${lr.Btn_r} interactive`,onMouseEnter:t,onClick:()=>p("right")})]})]})},iDe="_Options_main_z372r_1",aDe="_Options_top_z372r_12",oDe="_Options_page_container_z372r_25",sDe="_Options_left_z372r_31",lDe="_title_base_z372r_36",uDe="_Options_right_z372r_46",cDe="_Label_z372r_50",fDe="_title_voice_z372r_55",hDe="_Label_fullscreen_z372r_74",dDe="_Label_window_z372r_79",pDe="_Label_text_speed_z372r_84",vDe="_Label_row_z372r_88",gDe="_Label_row_right_z372r_96",mDe="_Label_row_text_z372r_101",_De="_Label_row_decoration_z372r_108",yDe="_Check_row_z372r_120",xDe="_Check_row_option_z372r_129",bDe="_Check_row_prefix_z372r_134",wDe="_Check_row_box_z372r_149",EDe="_mt48_z372r_161",SDe="_mt32_z372r_165",CDe="_mt22_z372r_170",TDe="_Slider_wrapper_z372r_175",ADe="_Check_row_box_checked_z372r_179",IDe="_Save_back_z372r_193",Lt={Options_main:iDe,Options_top:aDe,Options_page_container:oDe,Options_left:sDe,title_base:lDe,Options_right:uDe,Label:cDe,title_voice:fDe,Label_fullscreen:hDe,Label_window:dDe,Label_text_speed:pDe,Label_row:vDe,Label_row_right:gDe,Label_row_text:mDe,Label_row_decoration:_De,Check_row:yDe,Check_row_option:xDe,Check_row_prefix:bDe,Check_row_box:wDe,mt48:EDe,mt32:SDe,mt22:CDe,Slider_wrapper:TDe,Check_row_box_checked:ADe,Save_back:IDe};const Ud=e=>{const{playSeEnter:t}=bn();fe.useEffect(()=>{setTimeout(()=>{const n=document.getElementById(e.uniqueID);n!==null&&n.setAttribute("value",(e.initValue||0).toString()),r()},1)},[]),fe.useEffect(()=>{r()},[e.initValue]);function r(){var i;const n=document.getElementById(`${e.uniqueID}-bg`);if(n!==null&&e.uniqueID==="light"){const o=(Number(e.initValue)-50)/50*684+"px";n.style.width=o}else n!==null&&(n.style.width=Number((i=e.initValue)==null?void 0:i.toString())/100*342/.5+"px")}return L.jsxs("div",{className:"Option_WebGAL_slider",children:[L.jsx("input",{className:"Rang_input",id:e.uniqueID,type:"range",min:(e==null?void 0:e.min)??0,max:(e==null?void 0:e.max)??100,onChange:e.onChange,onFocus:t,onMouseEnter:t}),L.jsxs("div",{className:"Slider_group",children:[L.jsx("div",{className:"Slider_bg",id:`${e.uniqueID}-bg`}),L.jsx("div",{className:"Slider_bg_under"})]})]})},RDe=()=>{fe.useEffect(H$,[]);const{playSeClick:e,playSeEnter:t}=bn(),r=ht(s=>s.userData),n=Hr(),a=ht(s=>s.GUI).gameUIConfigs[mn.option],o=fe.useCallback(Q4e(()=>{Ao()},5e3),[]);return L.jsxs("div",{className:Lt.Options_main,children:[L.jsx(Cn,{item:a.buttons[J_.Option_back_button],defaultClass:`${Lt.Save_back} interactive`,onClick:()=>{n(vt({component:"showMenuPanel",visibility:!1})),$.videoManager.resumePausedVideo()},onMouseEnter:t}),L.jsx(Cn,{item:a.other[Q_.Option_title],defaultClass:Lt.Options_top}),L.jsxs("div",{className:Lt.Options_page_container,children:[L.jsxs("div",{className:Lt.Options_left,children:[L.jsx("div",{className:Lt.title_base}),L.jsxs("div",{className:`${Lt.Label_row} ${Lt.mt48}`,children:[L.jsx("span",{className:Lt.Label_row_text,children:""}),L.jsx("span",{className:Lt.Label_row_decoration})]}),L.jsxs("div",{className:Lt.Check_row,children:[L.jsxs("div",{className:Lt.Check_row_option,children:[L.jsx("span",{className:Lt.Check_row_prefix,children:""}),L.jsx("div",{className:`${Lt.Check_row_box} interactive`,onClick:()=>{n(xo({key:"fullScreen",value:rs.on})),Ao()},children:r.optionData.fullScreen?null:L.jsx("div",{className:Lt.Check_row_box_checked})})]}),L.jsxs("div",{className:Lt.Check_row_option,children:[L.jsx("span",{className:Lt.Check_row_prefix,children:""}),L.jsx("div",{className:`${Lt.Check_row_box} interactive`,onClick:()=>{n(xo({key:"fullScreen",value:rs.off})),Ao()},children:r.optionData.fullScreen?L.jsx("div",{className:Lt.Check_row_box_checked}):null})]})]}),L.jsxs("div",{className:`${Lt.Label_row} ${Lt.mt48}`,children:[L.jsx("span",{className:Lt.Label_row_text,children:""}),L.jsx("span",{className:Lt.Label_row_decoration})]}),L.jsx(Ud,{initValue:r.optionData.textSpeed,uniqueID:"",onChange:s=>{const c=s.target.value;n(xo({key:"textSpeed",value:Number(c)})),o()}})]}),L.jsxs("div",{className:Lt.Options_right,children:[L.jsx("div",{className:Lt.title_voice}),L.jsxs("div",{className:`${Lt.Label_row} ${Lt.mt32} ${Lt.Label_row_right}`,children:[L.jsx("span",{className:Lt.Label_row_text,children:""}),L.jsx("span",{className:Lt.Label_row_decoration})]}),L.jsx("div",{className:Lt.Slider_wrapper,children:L.jsx(Ud,{initValue:r.optionData.volumeMain,uniqueID:"",onChange:s=>{const c=s.target.value;n(xo({key:"volumeMain",value:Number(c)})),o()}})}),L.jsxs("div",{className:`${Lt.Label_row} ${Lt.mt32} ${Lt.Label_row_right}`,children:[L.jsx("span",{className:Lt.Label_row_text,children:""}),L.jsx("span",{className:Lt.Label_row_decoration})]}),L.jsx("div",{className:Lt.Slider_wrapper,children:L.jsx(Ud,{initValue:r.optionData.bgmVolume,uniqueID:"",onChange:s=>{const c=s.target.value;n(xo({key:"bgmVolume",value:Number(c)})),o()}})}),L.jsxs("div",{className:`${Lt.Label_row} ${Lt.mt32} ${Lt.Label_row_right}`,children:[L.jsx("span",{className:Lt.Label_row_text,children:""}),L.jsx("span",{className:Lt.Label_row_decoration})]}),L.jsx("div",{className:Lt.Slider_wrapper,children:L.jsx(Ud,{initValue:r.optionData.seVolume,uniqueID:"",onChange:s=>{const c=s.target.value;n(xo({key:"seVolume",value:Number(c)})),n(xo({key:"uiSeVolume",value:Number(c)})),o()}})}),L.jsxs("div",{className:`${Lt.Label_row} ${Lt.mt22} ${Lt.Label_row_right}`,children:[L.jsx("span",{className:Lt.Label_row_text,children:""}),L.jsx("span",{className:Lt.Label_row_decoration})]}),L.jsx("div",{className:Lt.Slider_wrapper,children:L.jsx(Ud,{initValue:r.optionData.vocalVolume,uniqueID:"",onChange:s=>{const c=s.target.value;n(xo({key:"vocalVolume",value:Number(c)})),o()}})})]})]})]})},PDe=()=>{const e=ht(r=>r.GUI);let t;switch(e.currentMenuTag){case Lr.Save:t=L.jsx(rDe,{});break;case Lr.Load:t=L.jsx(nDe,{});break;case Lr.Option:t=L.jsx(RDe,{});break}return L.jsx(L.Fragment,{children:e.showMenuPanel&&L.jsxs("div",{className:W8.Menu_main,children:[L.jsx("div",{className:W8.Menu_TagContent,children:t}),Lr.Option?null:L.jsx(FMe,{})]})})},ODe="_MainStage_main_9enex_1",kDe="_MainStage_main_container_9enex_10",FDe="_MainStage_bgContainer_9enex_17",NDe="_MainStage_showBgSoftly_9enex_1",LDe="_MainStage_bgContainer_Settled_9enex_27",BDe="_MainStage_oldBgContainer_9enex_37",MDe="_MainStage_oldBgFadeout_9enex_1",DDe="_MainStage_oldBgContainer_Settled_9enex_47",UDe="_pixiContainer_9enex_72",jDe="_chooseContainer_9enex_77",YE={MainStage_main:ODe,MainStage_main_container:kDe,MainStage_bgContainer:FDe,MainStage_showBgSoftly:NDe,MainStage_bgContainer_Settled:LDe,MainStage_oldBgContainer:BDe,MainStage_oldBgFadeout:MDe,MainStage_oldBgContainer_Settled:DDe,pixiContainer:UDe,chooseContainer:jDe};function $De(){const e=ht(r=>r.userData.optionData.textboxFont);function t(){return zy(e).with(nc.song,()=>'"", serif').with(nc.lxgw,()=>'"LXGW", serif').with(nc.hei,()=>'"WebgalUI", serif').default(()=>'"WebgalUI", serif')}return t()}function s6(e){switch(e){case 0:return 150;case 1:return 205;case 2:return 240;default:return 205}}const GDe="_TextBox_EventHandler_3ooeu_1",VDe="_TextBox_Container_3ooeu_9",HDe="_showSoftly_3ooeu_1",XDe="_TextBox_main_3ooeu_24",zDe="_TextBox_textElement_start_3ooeu_50",WDe="_TextDelayShow_3ooeu_1",YDe="_outer_3ooeu_56",qDe="_inner_3ooeu_65",KDe="_zhanwei_3ooeu_74",ZDe="_TextBox_textElement_Settled_3ooeu_79",JDe="_TextBox_showName_3ooeu_84",QDe="_outerName_3ooeu_94",e8e="_TextBox_showName_avatar_3ooeu_98",t8e="_TextBox_showName_player_3ooeu_104",r8e="_TextBox_ShowName_Background_3ooeu_110",n8e="_miniAvatarContainer_3ooeu_122",i8e="_miniAvatarImg_3ooeu_142",a8e="_nameContainer_3ooeu_147",o8e="_innerName_3ooeu_160",s8e="_line_3ooeu_167",l8e="_line_avatar_3ooeu_175",u8e="_line_hide_3ooeu_179",c8e="_text_3ooeu_183",Gr={TextBox_EventHandler:GDe,TextBox_Container:VDe,showSoftly:HDe,TextBox_main:XDe,TextBox_textElement_start:zDe,TextDelayShow:WDe,outer:YDe,inner:qDe,zhanwei:KDe,TextBox_textElement_Settled:ZDe,TextBox_showName:JDe,outerName:QDe,TextBox_showName_avatar:e8e,TextBox_showName_player:t8e,TextBox_ShowName_Background:r8e,miniAvatarContainer:n8e,miniAvatarImg:i8e,nameContainer:a8e,innerName:o8e,line:s8e,line_avatar:l8e,line_hide:u8e,text:c8e};function f8e(e){const{textArray:t,textDelay:r,currentConcatDialogPrev:n,currentDialogKey:i,isText:a,isSafari:o,isFirefox:s,fontSize:c,miniAvatar:l,showName:u,font:f,textDuration:h,isUseStroke:p,textboxOpacity:d,dialogueMode:g,textAlign:_}=e,v=$H("");fe.useEffect(()=>{function b(){[...document.querySelectorAll(".Textelement_start")].forEach(C=>{C.className=v("TextBox_textElement_Settled",Gr.TextBox_textElement_Settled)})}return $.events.textSettle.on(b),()=>{$.events.textSettle.off(b)}},[]);let m=0;const y=t.map((b,w)=>{const E=b.map((C,T)=>{let A=m*r;m++;let I=n.length;return n!==""&&T>=I&&(A=A-I*r),T<I?L.jsx("span",{id:`${A}`,className:v("TextBox_textElement_Settled",Gr.TextBox_textElement_Settled),style:{animationDelay:`${A}ms`,animationDuration:`${h}ms`},children:L.jsxs("span",{className:Gr.zhanwei,children:[C,L.jsx("span",{className:v("outer",Gr.outer),children:C}),p&&L.jsx("span",{className:v("inner",Gr.inner),children:C})]})},i+T):L.jsx("span",{"data-text":C,id:`${A}`,className:`${v("TextBox_textElement_start",Gr.TextBox_textElement_start)} Textelement_start`,style:{animationDelay:`${A}ms`,position:"relative"},children:L.jsxs("span",{className:Gr.zhanwei,children:[C,L.jsx("span",{className:v("outer",Gr.outer),children:C}),p&&L.jsx("span",{className:v("inner",Gr.inner),children:C})]})},i+T)});return L.jsx("div",{style:{wordBreak:o||e.isFirefox?"break-all":void 0,display:o?"flex":void 0,flexWrap:o?"wrap":void 0},children:E},`text-line-${w}`)});return L.jsx(L.Fragment,{children:a&&L.jsxs("div",{className:Gr.TextBox_Container,children:[L.jsx("div",{className:v("TextBox_main",Gr.TextBox_main),style:{opacity:`${d/100}`}}),L.jsxs("div",{id:"textBoxMain",className:Gr.TextBox_main,style:{fontFamily:f},children:[L.jsxs("div",{id:"miniAvatar",className:v("miniAvatarContainer",Gr.miniAvatarContainer),children:[l!==""&&L.jsx("div",{}),l!==""&&L.jsx("img",{className:v("miniAvatarImg",Gr.miniAvatarImg),alt:"miniAvatar",src:l})]}),u!==""&&g!=="narrator"&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:v("TextBox_showName",Gr.TextBox_showName),style:{opacity:`${d/100}`,fontSize:"200%"},children:L.jsx("div",{style:{opacity:0},children:u.split("").map((b,w)=>L.jsx("span",{style:{position:"relative"},children:L.jsxs("span",{className:Gr.zhanwei,children:[b,L.jsx("span",{className:v("outerName",Gr.outerName),children:b}),p&&L.jsx("span",{className:v("innerName",Gr.innerName),children:b})]})},b+w))})}),L.jsx("div",{className:`${Gr.TextBox_showName} ${l?Gr.TextBox_showName_avatar:""}`,children:u.split("").map((b,w)=>L.jsx("span",{style:{position:"relative"},children:L.jsxs("span",{className:Gr.zhanwei,children:[b,L.jsx("span",{className:v("outerName",Gr.outerName),children:b}),p&&L.jsx("span",{className:v("innerName",Gr.innerName),children:b})]})},b+w))},u)]}),L.jsx("div",{className:`${Gr.line} ${g==="narrator"?Gr.line_hide:""} ${l?Gr.line_avatar:""}`}),L.jsx("div",{className:v("text",Gr.text),style:{flexFlow:"column",overflow:"hidden",textAlign:_||g==="narrator"?"center":"left"},children:y})]})]})})}const iX=navigator.userAgent,h8e=/firefox/i.test(iX),d8e=/^((?!chrome|android).)*safari/i.test(iX),p8e=()=>{const[e,t]=fe.useState(!0);fe.useEffect(()=>{const y=()=>{const b=wp().height||sc.height,w=wp().width||sc.width,E=window.innerHeight,C=window.innerWidth,T=E/b,A=C/w,I=C/b,O=E/w;[T,A,I,O].forEach(P=>{P<=.2?t(!1):t(!0)})};return window.addEventListener("resize",y),y(),()=>{window.removeEventListener("resize",y)}},[]);const r=ht(y=>y.stage),n=ht(y=>y.userData),i=z9(n.optionData.textSpeed),a=cEe(n.optionData.textSpeed);let o=s6(n.optionData.textSize)+"%";const s=$De(),c=r.showText!==""||r.showName!=="";let l=n.optionData.textSize;c&&r.showTextSize!==-1&&(o=s6(r.showTextSize)+"%",l=r.showTextSize);const u=zy(n.optionData.textSize).with(Gl.small,()=>3).with(Gl.medium,()=>2).with(Gl.large,()=>2).default(()=>2),f=aX(r.showText,u),h=r.showName,p=r.currentConcatDialogPrev,d=r.currentDialogKey,g=r.miniAvatar,_=n.optionData.textboxOpacity,v=r.dialogueMode,m=f8e;return L.jsx(m,{textArray:f,isText:c,textDelay:i,showName:h,currentConcatDialogPrev:p,fontSize:o,currentDialogKey:d,isSafari:d8e,isFirefox:h8e,miniAvatar:g,textDuration:a,font:s,textSizeState:l,lineLimit:u,isUseStroke:e,textboxOpacity:_,dialogueMode:v})};function l6(e){return!!e.match(/[\u4e00-\u9fa5]|[\u0800-\u4e00]|[\uac00-\ud7ff]/)}function aX(e,t,r){return e.split("|").map(o=>g8e(o)).map(o=>{const s=[];return o.forEach((c,l)=>{zy(c.type).with("SegmentType.String",()=>{const u=v8e(c.value);s.push(...u)}).endsWith("SegmentType.Link",()=>{const u=c.value,f=L.jsxs("ruby",{children:[u.text,L.jsx("rt",{children:u.link})]},l+u.text);s.push(f)})}),s}).slice(0,r?void 0:t)}function v8e(e){if(!e)return[];const t=[];let r="",n=l6(e[0]);const i=a=>/[!-\/:-@\[-`{-~\u2000-\u206F\u3000-\u303F\uff00-\uffef]/g.test(a);for(const a of e)if(a===" ")r&&(t.push(r),r=""),t.push(""),n=!1;else if(l6(a)&&!i(a))!n&&r&&(t.push(r),r=""),t.push(a),n=!0;else{if(i(a)){r?(r+=a,t.push(r),r=""):t.length>0?t[t.length-1]+=a:t.push(a);continue}n&&r&&(t.push(r),r=""),r+=a,n=!1}return r&&t.push(r),t}function g8e(e){const t=/(\[(.*?)\]\((.*?)\))|([^\[\]]+)/g,r=[];let n;for(;(n=t.exec(e))!==null;)if(n[1]){const i=n[2],a=n[3];r.push({type:"SegmentType.Link",value:{text:i,link:a}})}else{const i=n[0];r.push({type:"SegmentType.String",value:i})}return r}const m8e=()=>{var y;const e=ht(b=>b.stage),t=ht(b=>b.GUI.titleBgm),r=ht(b=>b.GUI.showTitle),n=ht(b=>b.userData),i=n.optionData.volumeMain,a=i*.01*n.optionData.vocalVolume*.01*e.vocalVolume*.01,o=i*.01*n.optionData.bgmVolume*.01*e.bgm.volume*.01,s=e.bgm.enter,c=e.uiSe,l=i*.01*(((y=n.optionData)==null?void 0:y.seVolume)??100)*.01,u=i*.01*(n.optionData.uiSeVolume??50)*.01,f=ht(b=>b.GUI.isEnterGame),[h,p]=fe.useState(""),[d,g]=fe.useState(""),[_,v]=fe.useState(setTimeout(()=>{},0)),m=(b,w,E)=>{E>=0?b.volume=0:b.volume=w;const C=10,T=w/E*C,A=()=>{const I=setTimeout(()=>{b.volume+T>=w?b.volume=w:b.volume+T<=0?(b.volume=0,le.dispatch($t({key:"bgm",value:{src:"",enter:0,volume:100}}))):(b.volume+=T,A())},C);v(I)};A()};return fe.useEffect(()=>{clearTimeout(_);const b=document.getElementById("currentBgm");b&&(s===0?b.volume=o:m(b,o,s))},[h,o,s]),fe.useEffect(()=>{(async()=>{var E;const w=await gp(r?t:e.bgm.src);p(w),(E=document.getElementById("currentBgm"))==null||E.load()})()},[r,t,e.bgm.src]),fe.useEffect(()=>{qe.debug(`${o}`)},[o]),fe.useEffect(()=>{qe.debug(`: ${s}`)},[s]),fe.useEffect(()=>{qe.debug(`${a}`);const b=document.getElementById("currentVocal");b&&(b.volume=a.toString())},[a]),fe.useEffect(()=>{var E;if(c==="")return;const b=le.getState().GUI.currentPlayAudio;le.getState().stage.hasCustomClickSe,b&&(b==null||b.pause(),b.volume=0,(E=b==null?void 0:b.remove)==null||E.call(b),le.dispatch(e2(null))),(async()=>{var A;const C=await gp(c),T=document.createElement("audio");T.src=C,le.dispatch(e2(T)),T.load(),T.loop=!1,isNaN(u)?(qe.error("UI SE Vol is NaN"),T.volume=isNaN(l)?i/100:l/100):T.volume=u,(A=T==null?void 0:T.play)==null||A.call(T),T.addEventListener("ended",()=>{var I;(I=T==null?void 0:T.remove)==null||I.call(T)}),le.dispatch($t({key:"uiSe",value:""}))})()},[c]),fe.useEffect(()=>{qe.debug(`: ${l}`)},[l]),fe.useEffect(()=>{qe.debug(`: ${u}`)},[u]),fe.useEffect(()=>{qe.debug(`: ${e.playVocal}`),gp(e.playVocal).then(b=>{g(b),document.getElementById("currentVocal").load()})},[e.playVocal]),L.jsxs("div",{children:[L.jsx("audio",{id:"currentBgm",src:h,loop:!0,autoPlay:f},r.toString()+h),L.jsx("audio",{id:"currentVocal",src:d})]})},_8e=()=>{const e=ht(i=>i.stage);let t="100%",r="100%",n="0";return e.enableFilm!==""&&(r="76%",n="12%"),L.jsx("div",{id:"fullScreenPerform",className:_l.FullScreenPerform_main,style:{width:t,height:r,top:n},children:L.jsx("div",{id:"videoContainer"})})},y8e="_TextBox_EventHandler_449dq_2",x8e="_TextBox_main_449dq_10",b8e="_showSoftly_449dq_1",w8e="_TextBox_textElement_449dq_38",E8e="_TextBox_textElement_start_449dq_43",S8e="_TextDelayShow_449dq_1",C8e="_TextBox_textElement_Settled_449dq_48",T8e="_TextBox_showName_449dq_52",A8e="_miniAvatarContainer_449dq_68",I8e="_miniAvatarImg_449dq_76",qE={TextBox_EventHandler:y8e,TextBox_main:x8e,showSoftly:b8e,TextBox_textElement:w8e,TextBox_textElement_start:E8e,TextDelayShow:S8e,TextBox_textElement_Settled:C8e,TextBox_showName:T8e,miniAvatarContainer:A8e,miniAvatarImg:I8e},R8e=()=>{const e=ht(o=>o.stage),t=ht(o=>o.userData);fe.useEffect(()=>{});const r=Ohe.textInitialDelay-20*t.optionData.textSpeed,n=t.optionData.textSize*50+200+"%",a=e.showText.split("").map((o,s)=>{let c=s*r,l=e.currentConcatDialogPrev.length;return e.currentConcatDialogPrev!==""&&s>=l&&(c=c-l*r),s<l?L.jsx("span",{id:`${c}`,className:qE.TextBox_textElement_Settled,style:{animationDelay:`${c}ms`},children:o},e.currentDialogKey+s):L.jsx("span",{id:`${c}`,className:qE.TextBox_textElement_start,style:{animationDelay:`${c}ms`},children:o},e.currentDialogKey+s)});return L.jsx("div",{id:"textBoxMain",className:qE.TextBox_main,children:L.jsx("div",{style:{fontSize:n},children:a})})};function P8e(e){const t=e.bgName;fe.useEffect(()=>{(async()=>{var i,a,o;const n="bg-main";if(t!==""){const{bgX:s,bgY:c}=e,l=(i=$.gameplay.pixiStage)==null?void 0:i.getStageObjByKey(n);l&&l.sourceUrl!==t&&u6(l),await Promise.all([(a=$.gameplay.pixiStage)==null?void 0:a.addBg(n,t,s,c),eo(0)]),z0(t),qe.debug("");const{duration:u,animation:f}=ns("bg-main","enter",!0);$.gameplay.pixiStage.registerPresetAnimation(f,"bg-main-softin",n,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects("bg-main-softin"),u)}else{const s=(o=$.gameplay.pixiStage)==null?void 0:o.getStageObjByKey(n);s&&u6(s)}})()},[t])}function u6(e){var i,a;(i=$.gameplay.pixiStage)==null||i.removeAnimationWithSetEffects("bg-main-softin");const t=e.key;e.key="bg-main-off",(a=$.gameplay.pixiStage)==null||a.removeStageObjectByKey(t);const{duration:r,animation:n}=ns("bg-main-off","exit",!0);$.gameplay.pixiStage.registerAnimation(n,"bg-main-softoff","bg-main-off"),setTimeout(()=>{var o,s;(o=$.gameplay.pixiStage)==null||o.removeAnimation("bg-main-softoff"),(s=$.gameplay.pixiStage)==null||s.removeStageObjectByKey("bg-main-off")},r)}function O8e(e){const{figNameLeft:t,figName:r,figNameRight:n,freeFigure:i,live2dMotion:a,live2dExpression:o}=e,s=fe.useMemo(()=>i.map(u=>u.key).join(","),[i]),c=async(u,f)=>{var g,_;const h=`${u}-softin`,p={"fig-left":"","fig-center":"","fig-right":""},d=u.slice(4);if(f!==""){const v=(g=$.gameplay.pixiStage)==null?void 0:g.getStageObjByKey(u);v&&v.sourceUrl!==f&&jd(v,h,e.effects),await Promise.all([KE(void 0,u,f,d),eo(0)]),qe.debug(`${p[u]}`);const{duration:m,animation:y}=ns(u,"enter");$.gameplay.pixiStage.registerPresetAnimation(y,h,u,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects(h),m)}else{qe.debug(`${p[u]}`);const v=(_=$.gameplay.pixiStage)==null?void 0:_.getStageObjByKey(u);v&&v.sourceUrl!==f&&jd(v,h,e.effects)}},l=async()=>{var f,h,p;for(const d of i){const g=`${d.key}`,_=`${d.key}-softin`;if(d.name!==""){const v=(f=$.gameplay.pixiStage)==null?void 0:f.getStageObjByKey(g);if(v){if(v.sourceUrl!==d.name){jd(v,_,e.effects),await Promise.all([KE(void 0,g,d.name,d.basePosition),eo(0)]),qe.debug(`${d.key}`);const{duration:m,animation:y}=ns(g,"enter");$.gameplay.pixiStage.registerPresetAnimation(y,_,g,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects(_),m)}}else{await Promise.all([KE(void 0,g,d.name,d.basePosition),eo(0)]),qe.debug(`${d.key}`);const{duration:m,animation:y}=ns(g,"enter");$.gameplay.pixiStage.registerPresetAnimation(y,_,g,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects(_),m)}}else{const v=(h=$.gameplay.pixiStage)==null?void 0:h.getStageObjByKey(g);v&&v.sourceUrl!==d.name&&jd(v,_,e.effects)}}const u=(p=$.gameplay.pixiStage)==null?void 0:p.getFigureObjects();if(u){for(const d of u)if(!(d.key==="fig-left"||d.key==="fig-center"||d.key==="fig-right"||d.key.endsWith("-off"))){const g=d.key;if(i.findIndex(v=>v.key===g)<0){const v=`${d.key}-softin`;jd(d,v,e.effects)}}}};fe.useEffect(()=>{var u;for(const f of a)(u=$.gameplay.pixiStage)==null||u.changeModelMotionByKey(f.target,f.motion)},[a]),fe.useEffect(()=>{var u;for(const f of o)(u=$.gameplay.pixiStage)==null||u.changeModelExpressionByKey(f.target,f.expression)},[o]),fe.useEffect(()=>{c("fig-center",r)},[r]),fe.useEffect(()=>{c("fig-left",t)},[t]),fe.useEffect(()=>{c("fig-right",n)},[n]),fe.useEffect(()=>{l()},[s])}function jd(e,t,r){return new Promise(n=>{var l,u,f;if((l=$.gameplay.pixiStage)==null||l.removeAnimationWithSetEffects(t),$.gameplay.isFast){qe.info(""),(u=$.gameplay.pixiStage)==null||u.removeStageObjectByKey(e.key),n(!0);return}const i=e.key;e.key=e.key+"-off",(f=$.gameplay.pixiStage)==null||f.removeStageObjectByKey(i);const a=e.key,o=a+"-softoff",{duration:s,animation:c}=ns(a,"exit");$.gameplay.pixiStage.registerPresetAnimation(c,o,a,r),setTimeout(()=>{var h,p;(h=$.gameplay.pixiStage)==null||h.removeAnimation(o),(p=$.gameplay.pixiStage)==null||p.removeStageObjectByKey(a),n(!0)},s)})}async function KE(e,...t){var n,i,a;const r=t[1];return r.endsWith(".json")?k8e(...t):r.endsWith(".skel")?(n=$.gameplay.pixiStage)==null?void 0:n.addSpineFigure(...t):r.endsWith(".png")?(i=$.gameplay.pixiStage)==null?void 0:i.addFigure(...t,!0):(a=$.gameplay.pixiStage)==null?void 0:a.addFigure(...t)}function k8e(...e){}function F8e(e){const{popUpImageName:t,popUpImageNameLeft:r,popUpImageNameRight:n,freePopUpImage:i,popImgLive2dMotion:a,popImgLive2dExpression:o}=e,s=async(l,u)=>{var d,g;const f=`${l}-softin`,h={"popImg-left":"","popImg-center":"","popImg-right":""},p=l.slice(7);if(u!==""){const _=(d=$.gameplay.pixiStage)==null?void 0:d.getStageObjByKey(l);_&&_.sourceUrl!==u&&$d(_,f,e.effects),await Promise.all([ZE(void 0,l,u,p),eo(0)]),qe.debug(`${h[l]}`);const{duration:v,animation:m}=ns(l,"enter");$.gameplay.pixiStage.registerPresetAnimation(m,f,l,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects(f),v)}else{qe.debug(`${h[l]}`);const _=(g=$.gameplay.pixiStage)==null?void 0:g.getStageObjByKey(l);_&&_.sourceUrl!==u&&$d(_,f,e.effects)}},c=async()=>{var u,f,h;for(const p of i){const d=`${p.key}`,g=`${p.key}-softin`;if(p.name!==""){const _=(u=$.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(d);if(_){if(_.sourceUrl!==p.name){$d(_,g,e.effects),await Promise.all([ZE(void 0,d,p.name,p.basePosition),eo(0)]),qe.debug(`${p.key}`);const{duration:v,animation:m}=ns(d,"enter");$.gameplay.pixiStage.registerPresetAnimation(m,g,d,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects(g),v)}}else{await Promise.all([ZE(void 0,d,p.name,p.basePosition),eo(0)]),qe.debug(`${p.key}`);const{duration:v,animation:m}=ns(d,"enter");$.gameplay.pixiStage.registerPresetAnimation(m,g,d,e.effects),setTimeout(()=>$.gameplay.pixiStage.removeAnimationWithSetEffects(g),v)}}else{const _=(f=$.gameplay.pixiStage)==null?void 0:f.getStageObjByKey(d);_&&_.sourceUrl!==p.name&&$d(_,g,e.effects)}}const l=(h=$.gameplay.pixiStage)==null?void 0:h.getPopupObjects();if(l){for(const p of l)if(!(p.key==="popImg-left"||p.key==="popImg-center"||p.key==="popImg-right"||p.key.endsWith("-off"))){const d=p.key;if(i.findIndex(_=>_.key===d)<0){const _=`${p.key}-softin`;$d(p,_,e.effects)}}}};fe.useEffect(()=>{var l;for(const u of a)(l=$.gameplay.pixiStage)==null||l.changeModelMotionByKey(u.target,u.motion)},[a]),fe.useEffect(()=>{var l;for(const u of o)(l=$.gameplay.pixiStage)==null||l.changeModelExpressionByKey(u.target,u.expression)},[o]),fe.useEffect(()=>{s("popImg-center",t)},[t]),fe.useEffect(()=>{s("popImg-left",r)},[r]),fe.useEffect(()=>{s("popImg-right",n)},[n]),fe.useEffect(()=>{c()},[i])}function $d(e,t,r){var c,l,u;if((c=$.gameplay.pixiStage)==null||c.removeAnimationWithSetEffects(t),$.gameplay.isFast){qe.info(""),(l=$.gameplay.pixiStage)==null||l.removeStageObjectByKey(e.key);return}const n=e.key;e.key=e.key+"-off",(u=$.gameplay.pixiStage)==null||u.removeStageObjectByKey(n);const i=e.key,a=i+"-softoff",{duration:o,animation:s}=ns(i,"exit");$.gameplay.pixiStage.registerPresetAnimation(s,a,i,r),setTimeout(()=>{var f,h;(f=$.gameplay.pixiStage)==null||f.removeAnimation(a),(h=$.gameplay.pixiStage)==null||h.removeStageObjectByKey(i)},o)}function ZE(e,...t){var n,i,a;const r=t[1];if(r.endsWith(".json"))return N8e(...t);if(r.endsWith(".skel"))return(n=$.gameplay.pixiStage)==null?void 0:n.addSpineFigure(...t);if(r.endsWith(".png"))(i=$.gameplay.pixiStage)==null||i.addPopupImg(...t,!0);else return(a=$.gameplay.pixiStage)==null?void 0:a.addPopupImg(...t)}function N8e(...e){}function L8e(e){const t=e.effects;setTimeout(()=>{B8e(t)},10)}function B8e(e){var r,n,i,a;const t=((r=$.gameplay.pixiStage)==null?void 0:r.getAllStageObj())??[];for(const o of t){const s=o.key,c=e.find(u=>u.target===s);if(!(((n=$.gameplay.pixiStage)==null?void 0:n.getAllLockedObject())??[]).includes(s))if(c){const u=(i=$.gameplay.pixiStage)==null?void 0:i.getStageObjByKey(s);if(u){const f=u.pixiContainer;Object.assign(f,c6(c.transform))}}else{const u=(a=$.gameplay.pixiStage)==null?void 0:a.getStageObjByKey(s);if(u){const f=u.pixiContainer;Object.assign(f,c6(XI))}}}}function c6(e){if(!e)return{};const{position:t,...r}=e;return{...r,x:t.x,y:t.y}}function M8e(){const e=ht(t=>t.stage);return P8e(e),O8e(e),F8e(e),L8e(e),L.jsx("div",{style:{display:"none"}})}const D8e="_introContainer_119k8_1",U8e={introContainer:D8e};function j8e(){return L.jsx("div",{className:U8e.introContainer,id:"introContainer"})}const $8e="_variableNameWrapper_1e7yn_1",G8e="_progressBarBg_1e7yn_10",V8e="_progressBar_1e7yn_10",H8e="_affinityWrapper_1e7yn_21",X8e="_bounceIn_1e7yn_57",z8e="_fadeOutUp_1e7yn_72",El={variableNameWrapper:$8e,progressBarBg:G8e,progressBar:V8e,affinityWrapper:H8e,bounceIn:X8e,fadeOutUp:z8e},oX=()=>{const e=ht(s=>s.GUI),t=ht(s=>s.userData),[r,n]=fe.useState([]),[i,a]=fe.useState([]),o=fe.useMemo(()=>{const s=new Map,c=t.showValues;return c!=null&&c.length&&c.forEach(l=>{s.set(l.key,l.value)}),s},[t]);return fe.useEffect(()=>{e.showValueList.forEach((s,c)=>{if(s.isShowValueSwitch&&i[c]){const l=o.get(s.showValueName);s.showProgress&&typeof l=="number"&&setTimeout(()=>{const u=document.getElementById(`myRect-${c}`),f=l/(s.maxValue??100)*i[c].width;u==null||u.setAttribute("width",f.toString())},16)}})},[e.showValueList,i,o]),L.jsxs(L.Fragment,{children:[e.showValueList.map((s,c)=>{if(s.isShowValueSwitch){const l=r[c]||{width:0,height:0},u=i[c]||{width:0,height:0};return L.jsxs("div",{className:El.variableNameWrapper,style:{position:e.showProgressAndAchievement?"absolute":"fixed",left:Mt(s.showValueAxisX)+"px",top:Mt(s.showValueAxisY)+"px",backgroundColor:s.showProgress?"transparent":"#08c"},children:[!s.showProgress&&(String(o.get(s.showValueName))||""),s.showProgress&&s.progressBarBgStyle&&L.jsx("img",{src:At(s.progressBarBgStyle.image,Et.ui),alt:"progress",className:El.progressBarBg,style:l.width?{width:l.width,height:l.height,opacity:1}:void 0,onLoad:f=>{n([...r,{width:Mt(f.currentTarget.naturalWidth),height:Mt(f.currentTarget.naturalHeight)}])}}),s.showProgress&&s.progressBarStyle&&L.jsxs(L.Fragment,{children:[L.jsx("img",{src:At(s.progressBarStyle.image,Et.ui),alt:"progress",className:El.progressBar,style:u.width?{width:u.width,height:u.height,opacity:1,clipPath:`url(#myClip-${c})`}:void 0,onLoad:f=>{a([...i,{width:Mt(f.currentTarget.naturalWidth),height:Mt(f.currentTarget.naturalHeight)}])}}),L.jsx("svg",{width:"0",height:"0",children:L.jsx("defs",{children:L.jsx("clipPath",{id:`myClip-${c}`,children:L.jsx("rect",{id:`myRect-${c}`,width:"0",height:u.height,style:{fill:"#ffffff"}})})})})]})]},s.showValueName+c.toString())}return null}),e.showAffinityChangeList.map((s,c)=>L.jsx(W8e,{item:s},s.key))]})};function W8e({item:e}){const[t,r]=fe.useState(!1),[n,i]=fe.useState({width:0,height:0}),[a,o]=fe.useState({width:0,height:0});return fe.useEffect(()=>{n.width&&a.width&&(setTimeout(()=>{r(!0)},1e3),setTimeout(()=>{le.dispatch(Nue(e.key))},3032))},[n,a]),L.jsxs("div",{className:`${El.affinityWrapper} ${n.width&&a.width?El.bounceIn:""} ${t?El.fadeOutUp:""}`,children:[L.jsx("img",{src:e.rolePicture,alt:"affinity",className:El.affinityRole,style:n.width?n:void 0,onLoad:s=>{i({width:Mt(s.currentTarget.naturalWidth),height:Mt(s.currentTarget.naturalHeight)})}}),L.jsx("img",{src:e.numberPicture,alt:"affinity number",className:El.affinityNumber,style:a.width?a:void 0,onLoad:s=>{o({width:Mt(s.currentTarget.naturalWidth),height:Mt(s.currentTarget.naturalHeight)})}})]})}function f6(e){const t=document.getElementById("textBoxMain");if(!t)return!1;let r=t.getBoundingClientRect();return e.clientX>r.left&&e.clientX<r.right&&e.clientY>r.top&&e.clientY<r.bottom}function Y8e(e,t,r){!t.controlsVisibility&&f6(e)&&r(vt({component:"controlsVisibility",visibility:!0})),t.controlsVisibility&&!f6(e)&&r(vt({component:"controlsVisibility",visibility:!1}))}function q8e(e,t){var i;return!!(!t.showTextBox||e.isDisableTextbox||!(e.showText!==""||e.showName!=="")||((i=document.getElementById("introContainer"))==null?void 0:i.style.display)==="block")}let JE=null;function K8e(e,t,r,n){q8e(t,r)?(JE&&clearTimeout(JE),n(vt({component:"controlsVisibility",visibility:!0})),JE=setTimeout(()=>{n(vt({component:"controlsVisibility",visibility:!1}))},1e3)):Y8e(e,r,n)}const Z8e=()=>{const e=ht(n=>n.stage),t=ht(n=>n.GUI),r=Hr();return oBe({isDisableCtrl:!0}),L.jsxs("div",{className:YE.MainStage_main,children:[L.jsx(_8e,{}),L.jsx(M8e,{}),L.jsx("div",{id:"pixiContianer",className:YE.pixiContainer,style:{zIndex:oP?"-5":void 0}}),L.jsx("div",{id:"chooseContainer",className:YE.chooseContainer}),t.showTextBox&&e.enableFilm===""&&!e.isDisableTextbox&&L.jsx(p8e,{}),t.showTextBox&&e.enableFilm!==""&&L.jsx(R8e,{}),L.jsx(m8e,{}),L.jsx("div",{onClick:()=>{if(!t.showTextBox){r(vt({component:"showTextBox",visibility:!0}));return}iR(),jn()},onDoubleClick:()=>{$.events.fullscreenDbClick.emit()},id:"FullScreenClick",style:{width:"100%",height:"100%",position:"absolute",zIndex:"12",top:"0"},onMouseMove:n=>!t.showControls&&K8e(n,e,t,r)}),L.jsx(j8e,{}),!t.showProgressAndAchievement&&L.jsx(oX,{})]})},J8e=()=>{const e=au("gaming."),{i18n:t}=wx(),{playSeEnter:r,playSeClick:n,playSeDialogOpen:i}=bn();t.language;const a=fe.useRef(0),o=ht(f=>f.GUI),s=ht(f=>f.stage),c=Hr(),l=(f,h)=>{c(vt({component:f,visibility:h}))},u=ht(f=>f.saveData.saveData);if(e("noSaving"),u[0]){const f=u[0];Ur.slPreviewMain,Ur.imgContainer,f.previewImage,Ur.textContainer,f.nowStageState.showName,f.nowStageState.showText}return L.jsx(L.Fragment,{children:o.showTextBox&&s.enableFilm===""&&L.jsxs("div",{className:Ur.main,style:{visibility:o.controlsVisibility?"visible":"hidden"},children:[L.jsx("span",{id:"Button_ControlPanel_auto",className:`${Ur.singleButton} ${Ur.singleButton_auto} interactive`,title:"",onClick:()=>{M9(),n()},onMouseDown:f=>{const h=f.currentTarget;h.className=`${Ur.singleButton} ${Ur.singleButton_auto} interactive btn-clicked`,a.current=Date.now()},onMouseUp:f=>{const h=Date.now()-a.current;let p=f.currentTarget;setTimeout(()=>{p.className=`${Ur.singleButton} ${Ur.singleButton_auto} interactive`,p=null},h-350>0?0:350-h)},onMouseEnter:r,children:L.jsx("span",{className:Ur.autoIcon})}),L.jsx("span",{id:"Button_ControlPanel_fast",className:`${Ur.singleButton} ${Ur.singleButton_fast} interactive`,title:"",onClick:()=>{U9(),n()},onMouseDown:f=>{const h=f.currentTarget;h.className=`${Ur.singleButton} ${Ur.singleButton_fast} interactive btn-clicked`,a.current=Date.now()},onMouseUp:f=>{const h=Date.now()-a.current;let p=f.currentTarget;setTimeout(()=>{p.className=`${Ur.singleButton} ${Ur.singleButton_fast} interactive`,p=null},h-350>0?0:350-h)},onMouseEnter:r,children:L.jsx("span",{className:Ur.fastIcon})}),L.jsx("span",{className:`${Ur.singleButton} interactive`,title:"",onClick:()=>{$.gameplay.isAuto&&Xy(),l("showBacklog",!0),l("showTextBox",!1),n()},onMouseDown:f=>{const h=f.currentTarget;h.className=`${Ur.singleButton} interactive btn-clicked`,a.current=Date.now()},onMouseUp:f=>{const h=Date.now()-a.current;let p=f.currentTarget;setTimeout(()=>{p.className=`${Ur.singleButton} interactive`,p=null},h-350>0?0:350-h)},onMouseEnter:r,children:L.jsx("span",{className:Ur.historyIcon})})]})})},Q8e=()=>{var p,d;au("gaming.");const{playSeEnter:e,playSeClick:t}=bn(),r=ht(g=>g.GUI),n=Hr(),[i,a]=fe.useState(!1),[o,s]=fe.useState(!1);let c=fe.useRef();const[l,u]=fe.useState(""),f=fe.useRef(0),h=fe.useMemo(()=>{let g=[];for(let _=0;_<$.backlogManager.getBacklog().length;_++){const v=$.backlogManager.getBacklog()[_],m=aX(v.currentStageState.showText,3,!0),b=e6e(m).map((E,C)=>L.jsx("div",{children:E.map((T,A)=>T==="<br />"?L.jsx("br",{},`br${A}`):T)},`backlog-line-${C}`)),w=L.jsxs("div",{className:Hn.backlog_item,style:{animationDelay:`${20*($.backlogManager.getBacklog().length-_)}ms`},children:[L.jsxs("div",{className:Hn.backlog_content_container,onClick:E=>{t(),DOe(_),E.preventDefault(),E.stopPropagation()},children:[L.jsxs("div",{className:Hn.backlog_func_area,children:[L.jsx("div",{className:Hn.backlog_item_content_name,children:v.currentStageState.showName&&`${v.currentStageState.showName}`||""}),v.currentStageState.vocal?L.jsx("div",{onMouseDown:E=>{const C=E.currentTarget;C.className=`${Hn.backlog_item_button_element} interactive btn-clicked`,f.current=Date.now()},onMouseUp:E=>{const C=Date.now()-f.current;let T=E.currentTarget;setTimeout(()=>{T.className=`${Hn.backlog_item_button_element} interactive`,T=null},C-350>0?0:350-C)},onClick:E=>{t(),E.preventDefault(),E.stopPropagation();const C=document.getElementById("backlog_audio_play_element_"+_);if(C){C.currentTime=0;const T=le.getState().userData,A=T.optionData.volumeMain;C.volume=A*.01*T.optionData.vocalVolume*.01,gp(v.currentStageState.vocal).then(()=>{u(l),C.load(),C&&(C.onloadeddata=()=>{C.play()})})}},onMouseEnter:e,className:`${Hn.backlog_item_button_element} interactive`,children:L.jsx("span",{className:Hn.sound_icon})}):null]}),L.jsx("div",{className:Hn.backlog_item_content,children:L.jsx("span",{className:Hn.backlog_item_content_text,children:b})})]}),L.jsx("audio",{id:"backlog_audio_play_element_"+_,src:l})]},"backlogItem"+v.currentStageState.showText+v.saveScene.currentSentenceId);g.unshift(w)}return g},[((d=(p=$.backlogManager.getBacklog()[$.backlogManager.getBacklog().length-1])==null?void 0:p.saveScene)==null?void 0:d.currentSentenceId)??0]);return fe.useEffect(()=>{r.showBacklog?(c.current&&clearTimeout(c.current),a(!1),s(!0),setTimeout(()=>{s(!1)},0),$.videoManager.isAnyVideoPlaying()&&$.videoManager.pauseVideo($.videoManager.currentPlayingVideo)):(c.current=setTimeout(()=>{a(!0),c.current=void 0},700+80),$.videoManager.resumePausedVideo())},[r.showBacklog]),L.jsx(L.Fragment,{children:L.jsxs("div",{className:`
          ${r.showBacklog?Hn.Backlog_main:Hn.Backlog_main_out}
          ${i?Hn.Backlog_main_out_IndexHide:""}
          `,children:[L.jsx("div",{className:Hn.backlog_title,onClick:()=>{qe.info("Rua! Testing")},children:L.jsx("div",{className:`${Hn.backlog_top_icon} interactive`,onMouseDown:g=>{const _=g.currentTarget;_.className=`${Hn.backlog_top_icon} interactive btn-clicked`,f.current=Date.now()},onMouseUp:g=>{const _=Date.now()-f.current;let v=g.currentTarget;setTimeout(()=>{v.className=`${Hn.backlog_top_icon} interactive`,v=null,setTimeout(()=>{t(),n(vt({component:"showBacklog",visibility:!1})),n(vt({component:"showTextBox",visibility:!0}))},320)},_-350>0?0:350-_)},onMouseEnter:e})}),r.showBacklog&&L.jsx("div",{className:`${Hn.backlog_content} ${o?Hn.Backlog_main_DisableScroll:""}`,children:h})]})})};function e6e(e){let t=[],r="";for(let n=0;n<e.length;n++){const i=e[n];typeof i=="string"?r+=i:(r!==""&&(t.push(r),r=""),t.push(i))}return r!==""&&t.push(r),t}const t6e="_extra_1cp1y_2",r6e="_extraTop_1cp1y_12",n6e="_backIcon_1cp1y_24",i6e="_videoBackIcon_1cp1y_38",a6e="_mainContainer_1cp1y_60",o6e="_mainTab_1cp1y_67",s6e="_mainTab_bgm_1cp1y_75",l6e="_mainTab_unselect_bgm_1cp1y_85",u6e="_mainTab_cg_1cp1y_95",c6e="_mainTab_unselect_cg_1cp1y_105",f6e="_bgmContainer_1cp1y_115",h6e="_bgmListContainer_1cp1y_121",d6e="_bgmElement_1cp1y_129",p6e="_bgmName_1cp1y_140",v6e="_bgm_item_name_1cp1y_150",g6e="_bgm_sound_wrapper_1cp1y_158",m6e="_bgm_sound_unselect_1cp1y_166",_6e="_bgm_sound_select_1cp1y_171",y6e="_bgmLocked_1cp1y_176",x6e="_bgmUnlocked_1cp1y_180",b6e="_footer_1cp1y_189",w6e="_footer_page_container_1cp1y_199",E6e="_footer_page_indicator_1cp1y_204",S6e="_footer_page_icon_checked_1cp1y_213",C6e="_footer_page_icon_unchecked_1cp1y_218",T6e="_cgMain_1cp1y_231",A6e="_cgContainer_1cp1y_236",I6e="_cgElement_1cp1y_244",R6e="_cgUnLockElement_1cp1y_251",P6e="_unlockedCGImg_1cp1y_256",O6e="_cgShowDiv_1cp1y_263",k6e="_cgShowDivWarpper_1cp1y_272",F6e="_cgNav_1cp1y_281",N6e="_cgNav_active_1cp1y_300",L6e="_showFullContainer_1cp1y_310",B6e="_showFullCgMain_1cp1y_323",M6e="_fullCgIn_1cp1y_1",D6e="_Btn_1cp1y_343",U6e="_Btn_r_1cp1y_357",j6e="_videoContainer_1cp1y_366",$6e="_playButtonIcon_1cp1y_373",G6e="_extra_icon_softin_1cp1y_1",V6e="_bgmElement_In_1cp1y_1",Dt={extra:t6e,extraTop:r6e,backIcon:n6e,videoBackIcon:i6e,mainContainer:a6e,mainTab:o6e,mainTab_bgm:s6e,mainTab_unselect_bgm:l6e,mainTab_cg:u6e,mainTab_unselect_cg:c6e,bgmContainer:f6e,bgmListContainer:h6e,bgmElement:d6e,bgmName:p6e,bgm_item_name:v6e,bgm_sound_wrapper:g6e,bgm_sound_unselect:m6e,bgm_sound_select:_6e,bgmLocked:y6e,bgmUnlocked:x6e,footer:b6e,footer_page_container:w6e,footer_page_indicator:E6e,footer_page_icon_checked:S6e,footer_page_icon_unchecked:C6e,cgMain:T6e,cgContainer:A6e,cgElement:I6e,cgUnLockElement:R6e,unlockedCGImg:P6e,cgShowDiv:O6e,cgShowDivWarpper:k6e,cgNav:F6e,cgNav_active:N6e,showFullContainer:L6e,showFullCgMain:B6e,fullCgIn:M6e,Btn:D6e,Btn_r:U6e,videoContainer:j6e,playButtonIcon:$6e,extra_icon_softin:G6e,bgmElement_In:V6e},H6e=""+new URL("sound-icon.png",import.meta.url).href,X6e=""+new URL("sound-choose.png",import.meta.url).href,z6e=""+new URL("bgm-locked-bg.png",import.meta.url).href,W6e=""+new URL("bgm-unlock-bg.png",import.meta.url).href,sX=""+new URL("point-active.png",import.meta.url).href,lX=""+new URL("point-default.png",import.meta.url).href;function Y6e(){const{playSeClick:e,playSeEnter:t}=bn(),[r,n]=fe.useState(1),[i,a]=fe.useState([]),o=ht(d=>d.GUI.titleBgm),s=ht(d=>d.userData.appreciationData),c="Title_BGM";let l=c;const u=s.bgm.length;s.bgm.forEach((d,g)=>{d.url===o&&(l=d.name)});const f=Math.ceil(u/8)||1,h=iu("");l!==c&&l!==h.value&&h.set(l);const p=Hr();return fe.useEffect(()=>{a(s.bgm.slice((r-1)*8,r*8)||[])},[s.bgm,r]),L.jsxs("div",{className:Dt.bgmContainer,children:[L.jsxs("div",{className:Dt.bgmListContainer,children:[i.map((d,g)=>L.jsxs("div",{onClick:()=>{e(),h.set(d.name),p(ZS({asset:"titleBgm",value:d.url}))},className:`${Dt.bgmElement} interactive`,onMouseEnter:t,children:[L.jsxs("div",{className:Dt.bgmName,children:[L.jsx("div",{className:Dt.bgm_item_name,children:d.name}),L.jsx("div",{className:Dt.bgm_sound_wrapper,children:L.jsx("img",{src:d.name===h.value?X6e:H6e,alt:"",className:d.name===h.value?Dt.bgm_sound_select:Dt.bgm_sound_unselect})})]}),L.jsx("img",{src:W6e,className:Dt.bgmUnlocked,alt:""})]},d.name)),Array.from({length:8-i.length}).map((d,g)=>L.jsx("div",{className:`${Dt.bgmElement}`,style:{cursor:"default"},children:L.jsx("img",{src:z6e,alt:"",className:Dt.bgmLocked})},g))]}),L.jsxs("div",{className:Dt.footer,children:[L.jsx("div",{className:`${Dt.Btn} interactive`,onMouseEnter:t,onClick:()=>{e(),r>1&&n(r-1)}}),L.jsx("div",{className:Dt.footer_page_container,children:Array.from({length:f}).map((d,g)=>L.jsx("div",{className:`${Dt.footer_page_indicator} interactive`,onMouseEnter:t,onClick:()=>{e(),n(g+1)},children:L.jsx("img",{src:g+1===r?sX:lX,alt:"",className:g+1===r?Dt.footer_page_icon_checked:Dt.footer_page_icon_unchecked})},g))}),L.jsx("div",{className:`${Dt.Btn} ${Dt.Btn_r} interactive`,onMouseEnter:t,onClick:()=>{e(),r!==f&&n(r+1)}})]})]})}const w0=({url:e,videoPlayerRef:t,...r})=>{const n=fe.useRef(null);return fe.useEffect(()=>{if(DT.isSupported()&&n.current){const i=e.endsWith(".flv")?"flv":"mp4";fetch(e).then(a=>a.status>200?null:a.arrayBuffer()).then(async a=>{var h;if(!a)return;const o="ENCRYPTED",s=o.length,c=new Uint8Array(a.slice(0,s));let l=!1;for(let p=0;p<s;p++){if(String.fromCharCode(c[p])!==o[p]){l=!1;break}l=!0}const u=new Worker(new URL(""+new URL("worker-1bd0a91b.js",import.meta.url).href,self.location),{type:"module"}),f=p=>{const d=DT.createPlayer({type:e.endsWith(".mp4")?"mp4":"flv",url:URL.createObjectURL(p)});t&&(t.current=d),d.attachMediaElement(n.current),d.load()};if(l){const p=a.slice(s);if((h=window.crypto)!=null&&h.subtle){const d=new Uint8Array([64,230,173,66,154,19,2,10,7,190,41,12,94,241,215,220,126,69,229,196,191,52,213,74,86,100,40,38,39,148,110,77]),g=new Uint8Array([157,107,172,116,198,78,232,113,78,121,89,206,247,82,113,208]);u.postMessage({encryptedData:p,key:d,iv:g,type:i,supportCrypto:!0})}else{const d="40e6ad429a13020a07be290c5ef1d7dc7e45e5c4bf34d54a5664282627946e4d",g="9d6bac74c64ee8714e7959cef75271d0";u.postMessage({encryptedData:p,key:d,iv:g,type:i,supportCrypto:!1})}u.onmessage=d=>{d.data.blobData?f(d.data.blobData):d.data.errorMessage&&console.error(d.data.errorMessage+""+d.data.error.message)}}else{const p=new Blob([new Uint8Array(a)],{type:`video/${i==="mp4"?"mp4":"x-flv"}`});f(p)}})}return()=>{}},[e]),L.jsx("video",{ref:n,...r,style:{width:"100%",height:"auto"},onClick:i=>{i.stopPropagation(),r.onClick&&r.onClick(i)}})};function q6e(e){const t=iu(!1),{playSeEnter:r,playSeClick:n}=bn(),i=e.url.endsWith(".mp4")||e.url.endsWith(".flv"),a=kr.useRef(null),o=document.getElementById("currentBgm"),s=At(e.url,i?Et.video:Et.background),c=i&&e.poster?At(e.poster,Et.image):"",l=ht(h=>h.GUI.gameUIConfigs[mn.extra]);let u=0;o&&(u=o.volume);const f=()=>{t.set(!1),n(),o.volume=u};return L.jsxs(L.Fragment,{children:[t.value&&L.jsx("div",{className:`${Dt.showFullContainer} interactive`,onMouseEnter:r,children:L.jsxs("div",{className:Dt.showFullCgMain,children:[i?L.jsx(w0,{videoPlayerRef:a,url:s,controls:!0,autoPlay:!1,muted:!0},s+e.name):L.jsx("div",{style:{backgroundImage:`url('${s}')`,backgroundSize:"cover",backgroundPosition:"center",width:"100%",height:"100%"}}),L.jsx(Cn,{item:l.buttons.Extra_back_button,defaultClass:`${Dt.videoBackIcon} interactive`,onClick:f,onMouseEnter:r})]})}),L.jsx("div",{onClick:()=>{t.set(!t.value),o.volume=0,n()},onMouseEnter:r,className:`${Dt.cgElement} ${Dt.cgUnLockElement} interactive`,children:i?L.jsxs("div",{className:`${Dt.videoContainer} ${Dt.unlockedCGImg}`,style:c?{background:`url('${c}') no-repeat center center`,backgroundSize:"cover"}:void 0,children:[!c&&L.jsx(w0,{videoPlayerRef:a,url:s,controls:!1,autoPlay:!1,muted:!0},s+e.name),L.jsx("span",{className:Dt.playButtonIcon})]}):L.jsx("div",{className:Dt.unlockedCGImg,style:{background:`url('${s}') no-repeat center center`,backgroundSize:"cover"}})},e.name)]})}const K6e=""+new URL("cg-lock.png",import.meta.url).href;function Z6e(){const e=ht(l=>l.userData.appreciationData),{playSeEnter:t,playSeClick:r}=bn(),[n,i]=fe.useState(1),[a,o]=fe.useState([]),s=e.cg.length,c=Math.ceil(s/6)||1;return fe.useEffect(()=>{o(e.cg.slice((n-1)*6,n*6)||[])},[e.cg,n]),L.jsxs("div",{className:Dt.cgMain,children:[L.jsxs("div",{className:Dt.cgContainer,children:[a.map((l,u)=>L.jsx(q6e,{name:l.name,url:l.url,poster:l.poster},u.toString()+l.url)),Array.from({length:6-a.length}).map((l,u)=>L.jsx("div",{className:Dt.cgElement,style:{cursor:"default"},children:L.jsx("img",{src:K6e,alt:"",style:{width:"100%"}})},u))]}),L.jsxs("div",{className:Dt.footer,children:[L.jsx("div",{className:`${Dt.Btn} interactive`,onMouseEnter:t,onClick:()=>{r(),n>1&&i(n-1)}}),L.jsx("div",{className:Dt.footer_page_container,children:Array.from({length:c}).map((l,u)=>L.jsx("div",{className:`${Dt.footer_page_indicator} interactive`,onMouseEnter:t,onClick:()=>{r(),i(u+1)},children:L.jsx("img",{src:u+1===n?sX:lX,alt:"",className:u+1===n?Dt.footer_page_icon_checked:Dt.footer_page_icon_unchecked})},u))}),L.jsx("div",{className:`${Dt.Btn} ${Dt.Btn_r} interactive`,onMouseEnter:t,onClick:()=>{r(),n!==c&&i(n+1)}})]})]})}const J6e=""+new URL("gallery-bg.webp",import.meta.url).href;function Q6e(){const{playSeClick:e,playSeEnter:t}=bn(),r=ht(c=>c.GUI.showExtra),n=Hr(),[i,a]=fe.useState("bgm"),o=ht(c=>c.GUI.gameUIConfigs[mn.extra]);fe.useEffect(()=>{document.getElementById("currentBgm").pause()},[]),fe.useEffect(()=>{r&&n(or.setLoadVideo(!0))},[r]);const s=()=>{n(vt({component:"showExtra",visibility:!1})),n(or.setLoadVideo(!1))};return L.jsx(L.Fragment,{children:r&&L.jsxs("div",{className:Dt.extra,style:{background:`url(${J6e}) no-repeat center center`,backgroundSize:"cover"},children:[L.jsx(Cn,{item:o.buttons.Extra_back_button,defaultClass:`${Dt.backIcon} interactive`,onClick:s,onMouseEnter:t}),L.jsx(Cn,{item:o.other[Z_.Extra_title],defaultClass:Dt.extraTop}),L.jsxs("div",{className:Dt.mainContainer,children:[L.jsxs("div",{className:Dt.mainTab,children:[i==="bgm"?L.jsx("span",{className:`${Dt.mainTab_bgm} interactive`}):L.jsx("span",{className:`${Dt.mainTab_unselect_bgm} interactive`,onClick:()=>{a("bgm"),e()},onMouseEnter:t}),i==="cg"?L.jsx("span",{className:`${Dt.mainTab_cg} interactive`}):L.jsx("span",{className:`${Dt.mainTab_unselect_cg} interactive`,onClick:()=>{a("cg"),e()},onMouseEnter:t})]}),i==="bgm"?L.jsx(Y6e,{}):L.jsx(Z6e,{})]})]})})}const e5e="_tag_yghix_2",t5e="_container_yghix_17",r5e="_showContainer_yghix_1",n5e="_singleButton_yghix_33",i5e="_button_text_yghix_37",ui={tag:e5e,container:t5e,showContainer:r5e,singleButton:n5e,button_text:i5e},a5e=()=>{const e=iu(!1),t=ht(a=>a.stage),r=Hr(),n=(a,o)=>{r(vt({component:a,visibility:o}))},i=a=>{r(rc(a))};return L.jsx(L.Fragment,{children:t.enableFilm!==""&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:ui.tag,onClick:()=>{e.set(!e.value)},children:L.jsx(JBe,{theme:"outline",size:"32",fill:"#fff"})}),e.value&&L.jsxs("div",{className:ui.container,children:[L.jsx("span",{className:ui.singleButton,onClick:()=>{n("showBacklog",!0),n("showTextBox",!1),e.set(!e.value)},children:L.jsx("span",{className:ui.button_text,children:" / BACKLOG"})}),L.jsx("span",{className:ui.singleButton,onClick:()=>{e.set(!e.value);let a=document.getElementById("currentVocal");a!==null&&(a.currentTime=0,a.pause(),a==null||a.play())},children:L.jsx("span",{className:ui.button_text,children:" / REPLAY VOICE"})}),L.jsx("span",{id:"Button_ControlPanel_auto",className:ui.singleButton,onClick:()=>{M9(),e.set(!e.value)},children:L.jsx("span",{className:ui.button_text,children:" / AUTO"})}),L.jsx("span",{id:"Button_ControlPanel_fast",className:ui.singleButton,onClick:()=>{U9(),e.set(!e.value)},children:L.jsx("span",{className:ui.button_text,children:" / FAST"})}),L.jsx("span",{className:ui.singleButton,onClick:()=>{e.set(!e.value),i(Lr.Save),n("showMenuPanel",!0)},children:L.jsx("span",{className:ui.button_text,children:" / SAVE"})}),L.jsx("span",{className:ui.singleButton,onClick:()=>{e.set(!e.value),i(Lr.Load),n("showMenuPanel",!0)},children:L.jsx("span",{className:ui.button_text,children:" / LOAD"})}),L.jsx("span",{className:ui.singleButton,onClick:()=>{e.set(!e.value),i(Lr.Option),n("showMenuPanel",!0)},children:L.jsx("span",{className:ui.button_text,children:" / OPTIONS"})}),L.jsx("span",{className:ui.singleButton,onClick:()=>{e.set(!e.value),kc()},children:L.jsx("span",{className:ui.button_text,children:" / TITLE"})})]})]})})},o5e="_devPanelMain_11x6i_1",s5e="_devPanelOpener_11x6i_13",h6={devPanelMain:o5e,devPanelOpener:s5e};function l5e(){document.getElementById("pixiCanvas").toBlob(t=>{if(t){const r=document.createElement("a");document.body.append(r),r.download="screenshot",r.href=URL.createObjectURL(t),r.click(),r.remove()}},"image/png")}function u5e(){function e(){return!!window.location.hash.match(/dev/)}const t=iu(!1),r=iu(window.location.hash),n=ht(c=>c.stage);fe.useEffect(()=>{window.onhashchange=()=>{r.set(window.location.hash)}},[]);const i=e(),{t:a,i18n:o}=wx(),s=L.jsxs(L.Fragment,{children:[L.jsx("div",{onClick:()=>l5e(),children:"Save PIXI Screenshot"}),L.jsxs("div",{children:["Current Language:",o.language]}),L.jsx("div",{onClick:()=>{var c;return(c=$.gameplay.pixiStage)==null?void 0:c.removeAnimation("snow-Ticker")},children:"Remove Snow Ticker"}),L.jsx("div",{children:"Stage State"}),L.jsx("div",{children:JSON.stringify(n,null,"  ")})]});return L.jsxs(L.Fragment,{children:[i&&t.value&&L.jsxs("div",{className:h6.devPanelMain,children:[L.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[L.jsx("div",{onClick:()=>t.set(!1),style:{fontSize:"150%",padding:"0 0 0 15px",cursor:"pointer"},children:""}),L.jsx("div",{style:{padding:"0 0 0 15px",fontSize:"115%"},children:"WebGAL DEV PANEL"})]}),L.jsx("div",{style:{padding:"10px 10px 10px 10px",overflow:"auto"},children:s})]}),!t.value&&i&&L.jsx("div",{onClick:()=>t.set(!0),className:h6.devPanelOpener,children:"Open Dev Panel"})]})}function c5e(e){return Ah[e]}function f5e(){const{i18n:e}=wx(),t=Hh(n=>n.userData),r=Hr();return(n,i=!0)=>{var s;const a=n??((s=t.current)==null?void 0:s.optionData.language)??Ah.zhCn,o=c5e(a);e.changeLanguage(o),r(xo({key:"language",value:a})),qe.info(": "+o),window==null||window.localStorage.setItem("lang",a.toString()),i&&Ao()}}const h5e="_trans_8uz61_2",d5e="_langWrapper_8uz61_10",p5e="_lang_8uz61_10",v5e="_langSelect_8uz61_29",g5e="_langSelectButton_8uz61_35",Gd={trans:h5e,langWrapper:d5e,lang:p5e,langSelect:v5e,langSelectButton:g5e};function m5e(){const e=f5e(),[t,r]=fe.useState(!1);fe.useEffect(()=>{(window==null?void 0:window.localStorage.getItem("lang"))||"0"?e(Number(window==null?void 0:window.localStorage.getItem("lang")),!1):r(!0)},[]);const n=i=>{r(!1),e(i)};return L.jsx(L.Fragment,{children:t&&L.jsx("div",{className:Gd.trans,children:L.jsxs("div",{className:Gd.langWrapper,children:[L.jsx("div",{className:Gd.lang,children:"LANGUAGE SELECT"}),L.jsx("div",{className:Gd.langSelect,children:Object.keys(PN).map(i=>L.jsx("div",{className:Gd.langSelectButton,onClick:()=>n(Ah[i]),children:PN[i]},i))})]})})})}const _5e=()=>{const e=ht(n=>n.GUI),[t,r]=fe.useState(!1);return fe.useEffect(()=>{r(e.showPanicOverlay)},[e.showPanicOverlay]),null};function y5e(){const e=ht(i=>i.userData),t=ht(i=>i.GUI);Hr();const r=e.optionData.fullScreen,n=t.isEnterGame;fe.useEffect(()=>{switch(r){case rs.on:{n&&(document.documentElement.requestFullscreen(),Rf&&Rf.lock(["Escape","F11"]));break}case rs.off:{document.fullscreenElement&&(document.exitFullscreen(),Rf&&Rf.unlock());break}}},[r])}const x5e="_gameMenuPanelWrapper_1bdvx_1",b5e="_gameMenuPanel_1bdvx_1",w5e="_menuButton_1bdvx_12",E5e="_gameMenuPanelContentWrapper_1bdvx_26",S5e="_mask_1bdvx_34",C5e="_gameMenuPanelContent_1bdvx_26",T5e="_buttonswrapper_1bdvx_54",A5e="_button_1bdvx_54",pn={gameMenuPanelWrapper:x5e,gameMenuPanel:b5e,menuButton:w5e,gameMenuPanelContentWrapper:E5e,mask:S5e,gameMenuPanelContent:C5e,buttonswrapper:T5e,button:A5e},I5e=()=>{const e=au("gaming."),{playSeEnter:t,playSeClick:r,playSeDialogOpen:n}=bn(),i=ht(m=>m.GUI),[a,o]=fe.useState(!1),s=fe.useRef(0);fe.useEffect(()=>{o(i.isShowGameMenu)},[i.isShowGameMenu]);const c=Hr(),l=(m,y)=>{c(vt({component:m,visibility:y}))},u=()=>{$.videoManager.isAnyVideoPlaying()&&$.videoManager.pauseVideo($.videoManager.currentPlayingVideo)};fe.useEffect(()=>{const m=y=>{y.keyCode===27&&le.getState().GUI.isInGaming&&(r(),l("isShowGameMenu",!i.isShowGameMenu))};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[]);const f=m=>{c(rc(m))},h=()=>{r(),l("isShowGameMenu",!0)},p=()=>{r(),l("isShowGameMenu",!1)},d=()=>{u(),r(),f(Lr.Save),l("isShowGameMenu",!1),l("showMenuPanel",!0)},g=()=>{u(),f(Lr.Load),l("isShowGameMenu",!1),l("showMenuPanel",!0),r()},_=()=>{u(),f(Lr.Option),l("isShowGameMenu",!1),l("showMenuPanel",!0),r()},v=()=>{n(),ma({title:e("buttons.quitTips"),leftText:e("$common.cancel"),rightText:e("$common.confirm"),leftFunc:()=>{},rightFunc:()=>{l("isShowGameMenu",!1),l("isInGaming",!1),kc(),X9()}})};return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:pn.gameMenuPanel,children:L.jsx("div",{className:`${pn.menuButton} interactive`,onMouseEnter:t,onMouseDown:m=>{const y=m.currentTarget;y.className=`${pn.menuButton} interactive btn-clicked`,s.current=Date.now()},onMouseUp:m=>{const y=Date.now()-s.current;let b=m.currentTarget;setTimeout(()=>{b.className=`${pn.menuButton} interactive`,b=null,setTimeout(h,320)},y-350>0?0:350-y)}})}),a&&L.jsxs("div",{className:pn.gameMenuPanelContentWrapper,children:[L.jsx("div",{className:pn.mask}),L.jsx("div",{className:pn.gameMenuPanelContent,children:L.jsxs("div",{className:pn.buttonswrapper,children:[L.jsx("span",{className:`${pn.button} interactive`,onMouseEnter:t,onMouseDown:m=>{const y=m.currentTarget;y.className=`${pn.button} interactive btn-clicked`,s.current=Date.now()},onMouseUp:m=>{const y=Date.now()-s.current;let b=m.currentTarget;setTimeout(()=>{b.className=`${pn.button} interactive`,b=null,setTimeout(p,320)},y-350>0?0:350-y)},children:e("buttons.backToGame")}),L.jsx("span",{className:`${pn.button} interactive`,onMouseEnter:t,onMouseDown:m=>{const y=m.currentTarget;y.className=`${pn.button} btn-clicked`,s.current=Date.now()},onMouseUp:m=>{const y=Date.now()-s.current;let b=m.currentTarget;setTimeout(()=>{b.className=`${pn.button} interactive`,b=null,setTimeout(d,320)},y-350>0?0:350-y)},children:e("buttons.preserve")}),L.jsx("span",{className:`${pn.button} interactive`,onMouseEnter:t,onMouseDown:m=>{const y=m.currentTarget;y.className=`${pn.button} btn-clicked`,s.current=Date.now()},onMouseUp:m=>{const y=Date.now()-s.current;let b=m.currentTarget;setTimeout(()=>{b.className=`${pn.button} interactive`,b=null,setTimeout(g,320)},y-350>0?0:350-y)},children:e("buttons.read")}),L.jsx("span",{className:`${pn.button} interactive`,onMouseEnter:t,onMouseDown:m=>{const y=m.currentTarget;y.className=`${pn.button} btn-clicked`,s.current=Date.now()},onMouseUp:m=>{const y=Date.now()-s.current;let b=m.currentTarget;setTimeout(()=>{b.className=`${pn.button} interactive`,b=null,setTimeout(_,320)},y-350>0?0:350-y)},children:e("buttons.setting")}),L.jsx("span",{className:`${pn.button} interactive`,onMouseEnter:t,onMouseDown:m=>{const y=m.currentTarget;y.className=`${pn.button} btn-clicked`,s.current=Date.now()},onMouseUp:m=>{const y=Date.now()-s.current;let b=m.currentTarget;setTimeout(()=>{b.className=`${pn.button} interactive`,b=null,setTimeout(v,320)},y-350>0?0:350-y)},children:e("buttons.backToTitle")})]})})]})]})},R5e="_Loading_container_1k3ek_2",P5e="_spin_1k3ek_1",O5e={Loading_container:R5e,spin:P5e};function k5e(){const[e,t]=fe.useState(!1);return fe.useEffect(()=>window.pubsub.subscribe("loading",({loading:n})=>{t(n)}),[]),e?L.jsx("div",{className:O5e.Loading_container,dangerouslySetInnerHTML:{__html:UT}}):null}const F5e="_storyLine_68ep4_2",N5e="_bg_animation_68ep4_1",L5e="_goBack_68ep4_16",B5e="_hideDefalutGobackBg_68ep4_33",M5e="_storyLine_content_68ep4_39",D5e="_storyLine_item_68ep4_48",U5e="_info_card_68ep4_54",j5e="_playButton_icon_68ep4_73",$5e="_name_68ep4_88",Pu={storyLine:F5e,bg_animation:N5e,goBack:L5e,hideDefalutGobackBg:B5e,storyLine_content:M5e,storyLine_item:D5e,info_card:U5e,playButton_icon:j5e,name:$5e},dh=e=>{const[t,r]=fe.useState();return L.jsx("img",{...e,style:t?{...e.style,width:t.width,height:t.height}:e.style,onLoad:n=>{var i,a;(i=e.style)!=null&&i.width||(a=e.style)!=null&&a.height||r({width:Mt(n.currentTarget.naturalWidth),height:Mt(n.currentTarget.naturalHeight)})}})},G5e={storylineBg:"",storylineBgX:1280,storylineBgY:720},uX=()=>{var g,_,v;const{playSeClick:e,playSeEnter:t}=bn(),r=Hr(),n=ht(m=>m.GUI),i=ht(m=>m.saveData.allStorylineData),a=ht(m=>m.GUI.gameUIConfigs[mn.storyline]),o=a.other.Storyline_item,[s,c]=fe.useState(G5e);fe.useEffect(()=>{const m=window.pubsub.subscribe("gameInfoReady",y=>{y&&WI()});return n.showStoryLine&&(r(or.setShowStoryline(!1)),l()),m},[n.showStoryLine]);async function l(){var E,C,T,A;const m=At(ta.Storyline,Et.scene),y=await aa(m),w=tu(y,ta.Storyline,m).sentenceList;if((w==null?void 0:w.length)>0&&((E=w[0])==null?void 0:E.commandRaw)==="changeBg"){const I=((C=w[0])==null?void 0:C.content)??"";let O=1280,P=720;const k=window.localStorage.getItem("game-screen-size"),F=(k==null?void 0:k.split("x"))??[];(F==null?void 0:F.length)>0&&F[0]==="1920"&&(O=Number(F[0]),P=Number(F[1])),(A=(T=w[0])==null?void 0:T.args)==null||A.forEach(M=>{(M==null?void 0:M.key)==="x"?O=Number(M==null?void 0:M.value):(M==null?void 0:M.key)==="y"&&(P=Number(M==null?void 0:M.value))}),c({storylineBg:I,storylineBgX:O,storylineBgY:P})}}const u=()=>{kc(),r(JS(!1))},f=(m,y)=>{m.stopPropagation(),r(JS(!1)),r(or.setIsShowUnlock(!0)),r(vt({component:"showProgressAndAchievement",visibility:!1})),r(vt({component:"showAffinity",visibility:!1})),r(vt({component:"showAchievement",visibility:!1})),iP(y.videoData),t_()};function h(m){return At(m,Et.ui)}const p=!!s.storylineBg,d=typeof s.storylineBgX=="number"&&typeof s.storylineBgY=="number"?{width:Mt(s.storylineBgX),height:Mt(s.storylineBgY),maxWidth:"none"}:{maxWidth:"none"};return L.jsx(L.Fragment,{children:n.showStoryLine&&L.jsxs("div",{className:Pu.storyLine,id:"camera",style:p?{backgroundImage:"none"}:{},children:[!n.showProgressAndAchievement&&L.jsx(Cn,{item:a.buttons.Storyline_back_button,defaultClass:`
              ${Pu.goBack} 
              ${(v=(_=(g=a.buttons.Storyline_back_button)==null?void 0:g.args)==null?void 0:_.style)!=null&&v.image?Pu.hideDefalutGobackBg:""} 
              interactive`,onClick:u,onMouseEnter:t}),L.jsx(dh,{src:s.storylineBg,style:d}),(i==null?void 0:i.map((m,y)=>{const{name:b,thumbnailUrl:w,x:E,y:C,isUnlock:T,isHideName:A}=m.storyLine;if(!T)return null;let I=qn(o.args.style)||{},O={};I!=null&&I.fontSize&&(O.fontSize=I.fontSize),I!=null&&I.color&&(O.color=I.color),w&&(I={...I,position:"absolute",top:`${Mt(C)}px`,left:`${Mt(E)}px`});let P={};return I!=null&&I.width&&(P.width=I.width),I!=null&&I.height&&(P.height=I.height),L.jsxs("div",{className:`${Pu.storyLine_item} interactive`,style:I,onClick:k=>{var F;(F=window==null?void 0:window.pubsub)==null||F.publish("loading",{loading:!0}),setTimeout(()=>{f(k,m)},200)},children:[L.jsx(dh,{src:h(w),style:P}),L.jsxs("div",{className:Pu.info_card,children:[L.jsx("span",{className:Pu.playButton_icon,style:{width:A?"100%":"50%"}}),A?null:L.jsx("span",{className:Pu.name,style:O,children:b})]})]},`storyLine-${y}`)}))??null]})})},V5e="_achievement_1vin9_1",H5e="_bg_animation_1vin9_1",X5e="_goback_1vin9_14",z5e="_hideDefalutGobackBg_1vin9_31",W5e="_achievement_content_1vin9_37",Y5e="_achievement_current_1vin9_44",q5e="_text_1vin9_57",K5e="_number_1vin9_62",Z5e="_pregessBar_1vin9_67",J5e="_pregressBar_inner_1vin9_76",Q5e="_achievement_content_bg_1vin9_85",eUe="_achievement_list_1vin9_94",tUe="_achievement_item_1vin9_101",rUe="_unlockname_1vin9_114",nUe="_ripple_1vin9_131",iUe="_info_card_1vin9_134",aUe="_condition_1vin9_166",oUe="_condition_bg_active_1vin9_175",sUe="_time_1vin9_178",lUe="_description_1vin9_179",uUe="_info_card_position_right_1vin9_184",cUe="_achievement_item_bg_active_1vin9_188",Vn={achievement:V5e,bg_animation:H5e,goback:X5e,hideDefalutGobackBg:z5e,achievement_content:W5e,achievement_current:Y5e,text:q5e,number:K5e,pregessBar:Z5e,pregressBar_inner:J5e,achievement_content_bg:Q5e,achievement_list:eUe,achievement_item:tUe,unlockname:rUe,ripple:nUe,"ripple-effect":"_ripple-effect_1vin9_1",info_card:iUe,condition:aUe,condition_bg_active:oUe,time:sUe,description:lUe,info_card_position_right:uUe,achievement_item_bg_active:cUe},fUe={achieveBg:"",achieveBgX:1280,achieveBgY:720},cX=()=>{var I,O,P,k,F;const e=Hr(),{playSeClick:t,playSeEnter:r}=bn(),n=ht(M=>M.GUI),i=ht(M=>M.saveData),a=ht(M=>M.GUI.gameUIConfigs[mn.achievement]),[o,s]=fe.useState(null),[c,l]=fe.useState(null),[u,f]=fe.useState(null),[h,p]=fe.useState(null),[d,g]=fe.useState(fUe),_=d==null?void 0:d.achieveBg,[v,m]=fe.useState({unlocked:0,allTotal:0,currentProgress:"0%"});fe.useEffect(()=>{n.showAchievement&&(n.achievementUI.Achievement_progress_text&&s(n.achievementUI.Achievement_progress_text),n.achievementUI.Achievement_progress_bg&&l(n.achievementUI.Achievement_progress_bg),n.achievementUI.Achievement_progress&&f(n.achievementUI.Achievement_progress),n.achievementUI.Achievement_notUnlock&&p(n.achievementUI.Achievement_notUnlock),le.dispatch(or.setIsShowUnlock(!1)),y())},[n.showAchievement]);async function y(){var te,Y,U,z;const M=At(ta.Achieve,Et.scene),D=await aa(M),Q=tu(D,ta.Achieve,M).sentenceList;if((Q==null?void 0:Q.length)>0&&((te=Q[0])==null?void 0:te.commandRaw)==="changeBg"){const j=((Y=Q[0])==null?void 0:Y.content)??"";let V=1280,ne=720;const ae=window.localStorage.getItem("game-screen-size"),pe=(ae==null?void 0:ae.split("x"))??[];(pe==null?void 0:pe.length)>0&&pe[0]==="1920"&&(V=Number(pe[0]),ne=Number(pe[1])),(z=(U=Q[0])==null?void 0:U.args)==null||z.forEach(se=>{(se==null?void 0:se.key)==="x"?V=Number(se==null?void 0:se.value):(se==null?void 0:se.key)==="y"&&(ne=Number(se==null?void 0:se.value))}),g({achieveBg:j,achieveBgX:V,achieveBgY:ne})}setTimeout(()=>{b()},300)}async function b(){var te;const M=le.getState().saveData.allUnlockAchieveList,D=((te=le.getState().saveData.unlockAchieveData)==null?void 0:te.length)??0,G=M.length||0,Q=(D/G*100).toFixed(2)+"%";m({unlocked:D,allTotal:G,currentProgress:Q})}const w=M=>At(M,Et.ui),E=(M,D)=>M+500>=D,C=(M,D)=>M>=D?D-100:M,T=()=>{t(),kc(),e(vt({component:"showAchievement",visibility:!1}))},A=()=>{var ae,pe,se,_e,Le,Pe,Ee,Se,Ge,We,Ve,Xe,Ke,bt,Rt,ct;const M=(ae=o==null?void 0:o.args)!=null&&ae.hide?"":(o==null?void 0:o.content)??"",D=c!=null&&c.content?At(c==null?void 0:c.content,Et.background):"",G=(se=(pe=u==null?void 0:u.args)==null?void 0:pe.style)!=null&&se.image?At(u.args.style.image,Et.ui):"",Q=(Le=(_e=u==null?void 0:u.args)==null?void 0:_e.hoverStyle)!=null&&Le.image?At(u==null?void 0:u.args.hoverStyle.image,Et.ui):"";let te={};D&&(te={backgroundColor:"transparent",borderRadius:"initial"});let Y={};const U=qn((Pe=c==null?void 0:c.args)==null?void 0:Pe.style);(U==null?void 0:U.top)!==void 0&&(Y.top=U.top,Y.transform="inherit",delete U.top,delete U.position),(U==null?void 0:U.left)!==void 0&&(Y.left=U.left,Y.transform="inherit",delete U.left,delete U.position);const z=(Ee=c==null?void 0:c.args)!=null&&Ee.hide?{}:{...U,backgroundImage:`url(${D})`,...te},j=(Se=o==null?void 0:o.args)!=null&&Se.hide?{}:{...(Ge=o==null?void 0:o.args)==null?void 0:Ge.style,color:(Ve=(We=o==null?void 0:o.args)==null?void 0:We.style)==null?void 0:Ve.fontColor,transform:(Xe=o==null?void 0:o.args.style)!=null&&Xe.scale?`scale(${o.args.style.scale})`:""},V=(Ke=u==null?void 0:u.args)!=null&&Ke.hide?{}:{backgroundImage:`url(${G})`,...qn((bt=u==null?void 0:u.args)==null?void 0:bt.style)},ne=(Rt=u==null?void 0:u.args)!=null&&Rt.hide?{}:{backgroundImage:`url(${Q})`,...qn((ct=u==null?void 0:u.args)==null?void 0:ct.hoverStyle)};return L.jsx("div",{className:Vn.achievement_content,style:Y,children:L.jsxs("div",{className:Vn.achievement_current,style:z||{},children:[L.jsx("span",{className:Vn.text,style:j||{},children:M}),L.jsx("span",{className:Vn.number,style:j||{},children:`${v.unlocked}/${v.allTotal}`}),L.jsx("span",{className:Vn.pregessBar,style:V||{},children:L.jsx("span",{className:Vn.pregressBar_inner,style:{...ne,width:v.currentProgress}})})]})})};return L.jsx(L.Fragment,{children:n.showAchievement&&L.jsxs("div",{className:Vn.achievement,id:"camera",style:_?{backgroundImage:"none"}:{},children:[!n.showProgressAndAchievement&&L.jsx(Cn,{item:a.buttons.Achievement_back_button,defaultClass:`
              ${Vn.goback} 
              ${(P=(O=(I=a.buttons.Achievement_back_button)==null?void 0:I.args)==null?void 0:O.style)!=null&&P.image?Vn.hideDefalutGobackBg:""} 
              interactive`,onClick:T,onMouseEnter:r}),A(),L.jsx(dh,{src:d.achieveBg,style:{width:typeof d.achieveBgX=="number"?Mt(d.achieveBgX):void 0,height:typeof d.achieveBgY=="number"?Mt(d.achieveBgY):void 0,maxWidth:"none"}}),((k=i.allUnlockAchieveList)==null?void 0:k.length)>0&&L.jsx("div",{className:Vn.achievement_list,children:((F=i.allUnlockAchieveList)==null?void 0:F.map(({unlockname:M,x:D,y:G,url:Q,isShowUnlock:te,saveTime:Y,condition:U},z)=>{var V,ne,ae,pe,se,_e,Le,Pe,Ee,Se;const j=h!=null&&h.args.hide?{}:{width:(ne=(V=h==null?void 0:h.args)==null?void 0:V.style)!=null&&ne.width?`${Mt(h.args.style.width)}px`:void 0,height:(pe=(ae=h==null?void 0:h.args)==null?void 0:ae.style)!=null&&pe.height?`${Mt(h.args.style.height)}px`:void 0};return L.jsxs("div",{className:`${Vn.achievement_item} ${te?Vn.achievement_item_bg_active:""}`,style:{top:`${Mt(G)}px`,left:`${C(Mt(D),Mt((d==null?void 0:d.achieveBgX)??""))}px`,backgroundImage:`url("${w(te?Q:!(h!=null&&h.args.hide)&&((_e=(se=h==null?void 0:h.args)==null?void 0:se.style)!=null&&_e.image)?(Pe=(Le=h==null?void 0:h.args)==null?void 0:Le.style)==null?void 0:Pe.image:"")}")`,transform:` scale(${(Se=(Ee=h==null?void 0:h.args)==null?void 0:Ee.style)==null?void 0:Se.scale})`,...j},children:[te&&L.jsx("div",{className:Vn.ripple}),te&&L.jsx("span",{className:Vn.unlockname,children:M}),L.jsxs("div",{className:`${Vn.info_card} ${E(Mt(D),Mt((d==null?void 0:d.achieveBgX)??0))?Vn.info_card_position_right:""}`,children:[U&&L.jsx("span",{className:`${Vn.condition} ${te?Vn.condition_bg_active:""}`,children:U}),Y&&L.jsx("span",{className:Vn.time,children:`${Y}`}),L.jsxs("span",{className:Vn.description,children:[`${Math.floor(Math.random()*101)}%`,""]})]})]},`unlockAchieveItem-${z}`)}))??null})]})})};var Sl=(e=>(e.Video="video",e.Image="image",e.Placeholder="placeholder",e))(Sl||{});const hUe="_beautyGuideImageDialog_14de3_1",dUe="_mark_14de3_10",pUe="_content_14de3_21",vUe="_content_bg_14de3_35",gUe="_imgWrapper_14de3_46",mUe="_fade_14de3_1",_Ue="_btnsWrapper_14de3_59",yUe="_btn_14de3_59",xUe="_btn_prev_disabled_14de3_79",bUe="_btn_next_disabled_14de3_80",wUe="_btn_txt_14de3_83",EUe="_hideButtonBgc_14de3_90",qi={beautyGuideImageDialog:hUe,mark:dUe,content:pUe,content_bg:vUe,imgWrapper:gUe,fade:mUe,btnsWrapper:_Ue,btn:yUe,btn_prev_disabled:xUe,btn_next_disabled:bUe,btn_txt:wUe,hideButtonBgc:EUe},SUe=e=>{var d,g,_,v,m,y;const t=Hr(),{playSeClick:r,playSeEnter:n}=bn(),[i,a]=fe.useState((e==null?void 0:e.imgUrl)??""),[o,s]=fe.useState(0),[c,l]=fe.useState({}),u=ht(b=>b.GUI.gameUIConfigs[mn.collection]);fe.useEffect(()=>{var b,w,E;if(((b=e.contentList)==null?void 0:b.length)>0){const C=e.contentList.findIndex(T=>T.url===e.imgUrl);C>-1&&s(C)}if(e.show){const C=qn((E=(w=u==null?void 0:u.other[an.Collection_detail_dialog_bg])==null?void 0:w.args)==null?void 0:E.style);l(C)}},[e.contentList,e.show]);const f=()=>{r(),t(vt({component:"showBeautyGuideImageDialog",visibility:!1}))},h=()=>{r();const b=o-1;b<0||(s(b),a(e.contentList[b].url))},p=()=>{r();const b=o+1;b>e.contentList.length-1||(s(b),a(e.contentList[b].url))};return L.jsxs("div",{className:qi.beautyGuideImageDialog,children:[L.jsx("div",{className:`${qi.mark} interactive`,onClick:f}),L.jsxs("div",{className:qi.content,style:qn((g=(d=u==null?void 0:u.other[an.Collection_detail_dialog_bg])==null?void 0:d.args)==null?void 0:g.style),children:[L.jsx(Vs,{item:u.other[an.Collection_detail_dialog_bg],defaultClass:qi.content_bg}),L.jsx("div",{className:qi.imgWrapper,children:(_=e.contentList)==null?void 0:_.map((b,w)=>b.type===Sl.Image&&w===o?L.jsx("img",{src:b.url,className:qi.transitionImage},`img-${w}`):b.type===Sl.Video&&w===o?L.jsx(w0,{url:b.url,className:qi.transitionImage,muted:!0,autoPlay:!0,loop:!0},`img-${w}`):null)}),L.jsxs("div",{className:qi.btnsWrapper,children:[L.jsx(Cn,{defaultText:"",item:u.buttons.Collection_detail_dialog_prev_button,defaultClass:`
              ${qi.btn} 
              ${o<1?qi.btn_prev_disabled:""}
              ${u.buttons.Collection_detail_dialog_prev_button.args.style.image?qi.hideButtonBgc:""} interactive`,onClick:h,onMouseEnter:n}),L.jsxs("span",{className:qi.btn_txt,style:qn((m=(v=u==null?void 0:u.other[an==null?void 0:an.Collection_detail_dialog_text])==null?void 0:v.args)==null?void 0:m.style)??{},children:[o+1,"/",((y=e.contentList)==null?void 0:y.length)??0,""]}),L.jsx(Cn,{defaultText:"",item:u.buttons.Collection_detail_dialog_next_button,defaultClass:`
              ${qi.btn} 
              ${o+1>=e.contentList.length?qi.btn_next_disabled:""}
              ${u.buttons.Collection_detail_dialog_prev_button.args.style.image?qi.hideButtonBgc:""} interactive`,onClick:p,onMouseEnter:n})]})]})]})},CUe="_beautyGuideDetail_main_1ta6x_1",TUe="_beautyGuide_detail_bg_1ta6x_14",AUe="_goback_1ta6x_25",IUe="_hideDefalutGobackBg_1ta6x_42",RUe="_beautyGuideDetail_left_1ta6x_48",PUe="_left_box_1ta6x_56",OUe="_beautyGuide_detail_left_bg_1ta6x_64",kUe="_pictureUrl_1ta6x_88",FUe="_personal_info_1ta6x_99",NUe="_name_1ta6x_103",LUe="_info_1ta6x_110",BUe="_beautyGuideDetail_right_1ta6x_130",MUe="_contentWrapper_1ta6x_138",DUe="_content_1ta6x_138",UUe="_content_bg_1ta6x_149",jUe="_content_img_1ta6x_166",$Ue="_thumbnailWrapper_1ta6x_177",GUe="_thumbnail_box_1ta6x_188",VUe="_video_mark_1ta6x_212",HUe="_desc_text_1ta6x_223",XUe="_desc_bg_1ta6x_240",zUe="_hideBgc_1ta6x_255",Vr={beautyGuideDetail_main:CUe,beautyGuide_detail_bg:TUe,goback:AUe,hideDefalutGobackBg:IUe,beautyGuideDetail_left:RUe,left_box:PUe,beautyGuide_detail_left_bg:OUe,pictureUrl:kUe,personal_info:FUe,name:NUe,info:LUe,beautyGuideDetail_right:BUe,contentWrapper:MUe,content:DUe,content_bg:UUe,content_img:jUe,thumbnailWrapper:$Ue,thumbnail_box:GUe,video_mark:VUe,desc_text:HUe,desc_bg:XUe,hideBgc:zUe},WUe=e=>{var _,v,m,y,b,w,E,C,T,A,I,O,P,k,F,M,D,G,Q,te,Y,U,z,j,V;const t=Hr(),{playSeClick:r,playSeEnter:n}=bn(),i=ht(ne=>ne.GUI),[a,o]=fe.useState(null),[s,c]=fe.useState(""),l=kr.useRef(null),[u,f]=fe.useState([]),h=ht(ne=>ne.GUI.gameUIConfigs[mn.collection]);fe.useEffect(()=>{var ae,pe,se;const ne=e.info;if(ne!=null&&ne.contentList&&((ae=ne==null?void 0:ne.contentList)==null?void 0:ae.length)>0)f(ne.contentList),o(ne.contentList[0]);else{const _e=((se=(pe=h.other[an.Collection_detail_right_thumbnail_bg])==null?void 0:pe.args)==null?void 0:se.style)??{},Le=[],Pe=_e!=null&&_e.image?At(_e.image,Et.background):"";for(let Ee=0;Ee<5;Ee++)Le.push({key:"placeholder",type:"placeholder",url:Pe});f(Le)}},[e]);const p=()=>{r(),t(vt({component:"showBeautyGuideDetail",visibility:!1}))},d=ne=>{r(),c(ne),l.current&&l.current.pause(),t(vt({component:"showBeautyGuideImageDialog",visibility:!0}))},g=(ne,ae)=>{if(typeof ae!="string"||ae==="")return null;const pe=document.getElementById(`${ne}`);if(pe)return pe.innerHTML=ae,ae};return L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:Vr.beautyGuideDetail_main,children:[L.jsx(Vs,{item:h.other[an.Collection_detail_bg],defaultClass:Vr.beautyGuide_detail_bg}),L.jsx(Cn,{item:h.buttons.Collection_back_button,defaultClass:`
            ${Vr.goback} 
            ${(m=(v=(_=h.buttons.Collection_back_button)==null?void 0:_.args)==null?void 0:v.style)!=null&&m.image?Vr.hideDefalutGobackBg:""} 
            interactive`,onClick:p,onMouseEnter:n}),L.jsx("div",{className:Vr.beautyGuideDetail_left,children:L.jsxs("div",{className:Vr.left_box,style:qn((b=(y=h.other[an.Collection_detail_left_bg])==null?void 0:y.args)==null?void 0:b.style),children:[L.jsx(Vs,{item:h.other[an.Collection_detail_left_bg],defaultClass:Vr.beautyGuide_detail_left_bg}),L.jsx("div",{className:Vr.pictureUrl,children:L.jsx("img",{src:(w=e.info)==null?void 0:w.image,alt:""})}),L.jsxs("div",{className:Vr.personal_info,children:[L.jsx("h3",{className:Vr.name,style:(e==null?void 0:e.infoItemStyle)??{},children:((E=e.info)==null?void 0:E.name)??""}),L.jsxs("div",{className:Vr.info,style:(e==null?void 0:e.infoTextStyle)??{},children:[L.jsx("span",{children:""}),L.jsx("span",{children:((C=e.info)==null?void 0:C.height)??""})]}),L.jsxs("div",{className:Vr.info,style:(e==null?void 0:e.infoTextStyle)??{},children:[L.jsx("span",{children:""}),L.jsx("span",{children:((T=e.info)==null?void 0:T.weight)??""})]}),L.jsxs("div",{className:Vr.info,style:(e==null?void 0:e.infoTextStyle)??{},children:[L.jsx("span",{children:""}),L.jsx("span",{children:((A=e.info)==null?void 0:A.bustSize)??""})]}),L.jsxs("div",{className:Vr.info,style:(e==null?void 0:e.infoTextStyle)??{},children:[L.jsx("span",{children:""}),L.jsx("span",{children:((I=e.info)==null?void 0:I.waistSize)??""})]}),L.jsxs("div",{className:Vr.info,style:(e==null?void 0:e.infoTextStyle)??{},children:[L.jsx("span",{children:""}),L.jsx("span",{children:((O=e.info)==null?void 0:O.hipSize)??""})]})]})]})}),L.jsxs("div",{className:Vr.beautyGuideDetail_right,children:[L.jsxs("div",{className:`${Vr.desc_text} 
              ${(k=(P=h.other[an.Collection_detail_right_desc_bg])==null?void 0:P.args)!=null&&k.style.image?Vr.hideBgc:""}`,style:{...qn((M=(F=h.other[an.Collection_detail_right_desc_bg])==null?void 0:F.args)==null?void 0:M.style),display:(G=(D=h.other[an.Collection_detail_right_desc_bg])==null?void 0:D.args)!=null&&G.hide?"none":"flex"},children:[L.jsx(Vs,{item:h.other[an.Collection_detail_right_desc_bg],defaultClass:Vr.desc_bg}),L.jsx("span",{id:"info_description",children:g("info_description",(Q=e.info)==null?void 0:Q.description)})]}),L.jsxs("div",{className:Vr.contentWrapper,style:{display:(Y=(te=h.other[an.Collection_detail_right_content_bg])==null?void 0:te.args)!=null&&Y.hide?"none":"block"},children:[L.jsxs("div",{className:`${Vr.content} 
                ${(z=(U=h.other[an.Collection_detail_right_content_bg])==null?void 0:U.args)!=null&&z.style.image?Vr.hideBgc:""}`,style:qn((V=(j=h.other[an.Collection_detail_right_content_bg])==null?void 0:j.args)==null?void 0:V.style),children:[L.jsx(Vs,{item:h.other[an.Collection_detail_right_content_bg],defaultClass:Vr.content_bg}),a&&L.jsxs(L.Fragment,{children:[a.type==="video"&&L.jsx(w0,{videoPlayerRef:l,url:a.url,controls:!0,autoPlay:!i.showBeautyGuideImageDialog,loop:!0,muted:!0},a.url),a.type==="image"&&L.jsx("img",{className:`${Vr.content_img} interactive`,src:a.url,onClick:()=>{d(a.url)}})]})]}),L.jsx("div",{className:Vr.thumbnailWrapper,children:L.jsx("div",{children:(u==null?void 0:u.map((ne,ae)=>{var pe,se;return L.jsxs("div",{className:Vr.thumbnail_box,style:qn((se=(pe=h.other[an.Collection_detail_right_thumbnail_bg])==null?void 0:pe.args)==null?void 0:se.style),onClick:()=>{ne.type!==Sl.Placeholder&&o(ne)},children:[ne.type===Sl.Placeholder&&L.jsx("img",{src:ne.url,alt:""}),ne.type===Sl.Image&&L.jsx("img",{src:ne.url,alt:""}),ne.type===Sl.Video&&L.jsx(w0,{url:ne.url,controls:!1,loop:!0,muted:!0}),ne.type===Sl.Video&&L.jsx("div",{className:Vr.video_mark,children:L.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4276",width:"48",height:"48",children:L.jsx("path",{fill:"#e6e6e6",d:"M315.453793 986.509241Q405.963034 1024 512 1024t196.546207-37.490759q90.509241-37.490759 165.490759-112.463448 74.981517-74.990345 112.472275-165.499586Q1024 618.036966 1024 512t-37.490759-196.546207q-37.490759-90.509241-112.463448-165.490759-74.990345-74.981517-165.499586-112.472275Q618.036966 0 512 0T315.453793 37.490759q-90.509241 37.490759-165.490759 112.463448-74.981517 74.990345-112.472275 165.499586Q0 405.963034 0 512t37.490759 196.546207q37.490759 90.518069 112.463448 165.490759 74.981517 74.981517 165.490759 112.472275z m365.982897-65.447724Q603.409655 953.37931 512 953.37931q-91.409655 0-169.43669-32.317793-78.035862-32.317793-142.66262-96.962207-64.644414-64.635586-96.962207-142.653793Q70.62069 603.400828 70.62069 512t32.317793-169.43669q32.317793-78.027034 96.962207-142.66262 64.635586-64.635586 142.653793-96.962207Q420.599172 70.62069 512 70.62069t169.43669 32.308965v0.008828q78.027034 32.317793 142.66262 96.962207 64.635586 64.635586 96.962207 142.653793Q953.37931 420.599172 953.37931 512t-32.317793 169.43669q-32.317793 78.027034-96.962207 142.66262-64.635586 64.644414-142.653793 96.962207h-0.008827z m-249.979587-650.504827l282.394483 221.007448a25.864828 25.864828 0 0 1 0 40.871724l-282.394483 221.016276c-17.390345 13.594483-43.04331 1.412414-43.04331-20.44469V290.992552c0-21.865931 25.661793-34.048 43.04331-20.44469z"})})})]},`thumbnail-${ae}`)}))??null})})]})]})]}),i.showBeautyGuideImageDialog&&L.jsx(SUe,{imgUrl:s,contentList:u||[],show:i.showBeautyGuideImageDialog})]})},YUe="_beautyGuide_main_1kdxb_1",qUe="_bg_animation_1kdxb_1",KUe="_beautyGuide_bg_1kdxb_16",ZUe="_beautyGuide_header_1kdxb_27",JUe="_goback_1kdxb_33",QUe="_hideDefalutGobackBg_1kdxb_50",eje="_title_1kdxb_56",tje="_beautyGuide_content_1kdxb_62",rje="_item_1kdxb_68",ml={beautyGuide_main:YUe,bg_animation:qUe,beautyGuide_bg:KUe,beautyGuide_header:ZUe,goback:JUe,hideDefalutGobackBg:QUe,title:eje,beautyGuide_content:tje,item:rje},nje=()=>{var w,E,C;const e=Hr(),t=ht(T=>T.GUI),{playSeClick:r,playSeEnter:n}=bn(),[i,a]=fe.useState(null),[o,s]=fe.useState([]),[c,l]=fe.useState({}),[u,f]=fe.useState(null),[h,p]=fe.useState({}),[d,g]=fe.useState({}),[_,v]=fe.useState({}),m=ht(T=>T.GUI.gameUIConfigs[mn.collection]);fe.useEffect(()=>{if(t.showBeautyGuide){const T=[],A=(m==null?void 0:m.other)??{},I={},O={};let P=1;Object.entries(A).forEach(([k,F])=>{var M,D,G,Q,te,Y,U,z;if(k!=null&&k.includes("Collection_img")){const j=(M=F==null?void 0:F.args)==null?void 0:M.info;let V=((D=F==null?void 0:F.args)==null?void 0:D.style)??{};const ne=(G=F==null?void 0:F.args)==null?void 0:G.images,ae=(Q=F==null?void 0:F.args)==null?void 0:Q.videos;O[`Collection_img_info${P}`]={color:V==null?void 0:V.customColor,fontSize:V!=null&&V.customFontSize?`${Mt(V.customFontSize)}px`:""},V=qn(V);const pe=pme(ne),se=vme(ae),_e=(j==null?void 0:j.image)&&At(j==null?void 0:j.image,Et.ui)||"",Le=((Y=(te=F==null?void 0:F.args)==null?void 0:te.style)==null?void 0:Y.image)&&At((z=(U=F==null?void 0:F.args)==null?void 0:U.style)==null?void 0:z.image,Et.ui)||"";T.push({avatar:Le,name:j==null?void 0:j.name,image:_e,height:j==null?void 0:j.height,weight:j==null?void 0:j.weight,bustSize:j==null?void 0:j.bustSize,waistSize:j==null?void 0:j.waistSize,hipSize:j==null?void 0:j.hipSize,description:(j==null?void 0:j.description)??"",contentList:se.concat(pe)}),I[`Collection_img${P}`]=V,P++}}),p(O),l(I),g(I),s(T)}},[t.showBeautyGuide]);const y=()=>{r(),a(null),v({}),e(vt({component:"showBeautyGuide",visibility:!1}))},b=(T,A)=>{r(),a(T),f(c[`Collection_img${A+1}`]),v(h[`Collection_img_info${A+1}`]),e(vt({component:"showBeautyGuideDetail",visibility:!0}))};return L.jsxs(L.Fragment,{children:[t.showBeautyGuide&&L.jsxs("div",{className:ml.beautyGuide_main,children:[L.jsx(Vs,{item:m.other[an.Collection_bg],defaultClass:ml.beautyGuide_bg}),L.jsxs("div",{className:ml.beautyGuide_header,children:[L.jsx(Cn,{item:m.buttons.Collection_back_button,defaultClass:`
                ${ml.goback} 
                ${(C=(E=(w=m.buttons.Collection_back_button)==null?void 0:w.args)==null?void 0:E.style)!=null&&C.image?ml.hideDefalutGobackBg:""} 
                interactive`,onClick:y,onMouseEnter:n}),L.jsx(Cn,{item:m.other.Collection_title,defaultClass:ml.title})]}),L.jsx("div",{className:ml.beautyGuide_content,children:o.map((T,A)=>T!=null&&T.avatar?L.jsx("div",{className:`${ml.item} interactive`,onClick:()=>b(T,A),onMouseEnter:n,children:L.jsx("img",{src:T.avatar,style:d[`Collection_img${A+1}`]})},`${T==null?void 0:T.name}$-${A}`):null)})]}),t.showBeautyGuideDetail&&L.jsx(WUe,{info:i,infoItemStyle:u,infoTextStyle:_,detailRightDescBgStyle:m.other[an.Collection_detail_right_desc_bg]})]})},ije="_modalR18_main_167bk_1",aje="_footer_167bk_16",d6={modalR18_main:ije,"fade-in":"_fade-in_167bk_1",footer:aje},oje=""+new URL("r18-exit-btn-default.png",import.meta.url).href,sje=""+new URL("r18-exit-btn-active.png",import.meta.url).href,lje=""+new URL("r18-confirm-btn-default.png",import.meta.url).href,uje=""+new URL("r18-confirm-btn-active.png",import.meta.url).href,cje=()=>{au("r18.");const e=Hr(),t=ht(g=>g.GUI),{playSeClick:r,playSeEnter:n}=bn(),[i,a]=fe.useState(!1),[o,s]=fe.useState(!1),[c,l]=fe.useState({width:void 0,height:void 0,opacity:0}),[u,f]=fe.useState({width:void 0,height:void 0,opacity:0}),h=fe.useRef(0),p=()=>{r(),e(fj(!1))},d=()=>{r(),window.location.href="/"};return L.jsx(L.Fragment,{children:t.isShowR18Modal&&t.openR18Modal&&L.jsx("div",{className:`${d6.modalR18_main} ${t.isShowR18Modal&&t.openR18Modal?"animated fadeIn":""}`,children:L.jsxs("div",{className:d6.footer,children:[L.jsx("div",{id:"exitButton",className:"interactive",children:L.jsx("img",{src:i?sje:oje,onClick:d,className:"interactive",onMouseEnter:()=>{a(!0),n()},onMouseLeave:()=>{a(!1)},onLoad:g=>{l({width:g.target.naturalWidth/.5,height:g.target.naturalHeight/.5,opacity:1})},onMouseDown:g=>{const _=g.currentTarget;_.className="interactive btn-clicked",h.current=Date.now()},onMouseUp:g=>{const _=Date.now()-h.current;let v=g.currentTarget;setTimeout(()=>{v.className="interactive",v=null,setTimeout(p,320)},_-350>0?0:350-_)},style:c})}),L.jsx("div",{id:"confirmButton",className:"interactive",children:L.jsx("img",{className:"interactive",src:o?uje:lje,onMouseEnter:()=>{s(!0),n()},onMouseLeave:()=>{s(!1)},onLoad:g=>{f({width:g.target.naturalWidth/.5,height:g.target.naturalHeight/.5,opacity:1})},onMouseDown:g=>{const _=g.currentTarget;_.className="interactive btn-clicked",h.current=Date.now()},onMouseUp:g=>{const _=Date.now()-h.current;let v=g.currentTarget;setTimeout(()=>{v.className="interactive",v=null,setTimeout(p,320)},_-350>0?0:350-_)},style:u})})]})})})},fje="_Toaster_container_1phox_1",hje="_Toaster_image_1phox_16",dje="_Toaster_text_1phox_27",pje="_Toaster_fadeIn_1phox_34",vje="_K_Toaster_fadein_1phox_1",gje="_Toaster_slideIn_1phox_38",mje="_K_Toaster_slidein_1phox_1",_je="_Toaster_out_1phox_45",yje="_K_Toaster_fadeout_1phox_1",Vd={Toaster_container:fje,Toaster_image:hje,Toaster_text:dje,Toaster_fadeIn:pje,K_Toaster_fadein:vje,Toaster_slideIn:gje,K_Toaster_slidein:mje,Toaster_out:_je,K_Toaster_fadeout:yje};let xje=510;function bje(){const[e,t]=fe.useState(!1),[r,n]=fe.useState({}),[i,a]=fe.useState(!1),o=fe.useRef({showTimer:null,animationTimer:null});if(fe.useEffect(()=>{const c=()=>{o.current.showTimer&&(clearTimeout(o.current.showTimer),o.current.showTimer=null),o.current.animationTimer&&(clearTimeout(o.current.animationTimer),o.current.animationTimer=null),a(!1)},l=window.pubsub.subscribe("toaster",u=>{u.show&&(n({text:u.text,image:u.image,animation:u.animation||"fadeIn"}),c(),t(!0),o.current.showTimer=setTimeout(()=>{a(!0),o.current.animationTimer=setTimeout(()=>{t(!1),a(!1)},xje)},u.duration??3e3))});return()=>{l(),c()}},[]),!e)return null;const s=[Vd.Toaster_container,r.image?Vd.Toaster_image:"",r.animation?Vd[`Toaster_${r.animation}`]:"",i?Vd.Toaster_out:""].join(" ");return L.jsxs("div",{className:s,children:[r.image&&L.jsx(dh,{src:r.image}),r.text&&L.jsx("div",{className:Vd.Toaster_text,children:r.text})]})}const wje="_BuyGame_container_1jftv_2",Eje="_BuyGame_inner_1jftv_15",Sje="_fadeIn_1jftv_1",Cje="_BuyGame_close_1jftv_20",Tje="_BuyGame_price_1jftv_26",Aje="_BuyGame_button_1jftv_36",Ije="_BuyGame_pay_container_1jftv_60",Rje="_BuyGame_pay_tip_1jftv_70",Pje="_BuyGame_pay_close_1jftv_83",Oje="_BuyGame_pay_title_1jftv_96",kje="_BuyGame_select_text_1jftv_108",Fje="_BuyGame_info_block_1jftv_118",Nje="_BuyGame_info_row_1jftv_127",Lje="_BuyGame_game_cover_1jftv_132",Bje="_BuyGame_game_cover_inner_1jftv_141",Mje="_BuyGame_info_name_1jftv_154",Dje="_BuyGame_info_text_1jftv_163",Uje="_BuyGame_info_tag_1jftv_171",jje="_BuyGame_info_price_1jftv_178",$je="_BuyGame_info_price_stone_1jftv_196",Gje="_BuyGame_price_row_1jftv_203",Vje="_BuyGame_price_stone_1jftv_210",Hje="_BuyGame_price_text_1jftv_217",Xje="_BuyGame_price_button_1jftv_225",Ar={BuyGame_container:wje,BuyGame_inner:Eje,fadeIn:Sje,BuyGame_close:Cje,BuyGame_price:Tje,BuyGame_button:Aje,BuyGame_pay_container:Ije,BuyGame_pay_tip:Rje,BuyGame_pay_close:Pje,BuyGame_pay_title:Oje,BuyGame_select_text:kje,BuyGame_info_block:Fje,BuyGame_info_row:Nje,BuyGame_game_cover:Lje,BuyGame_game_cover_inner:Bje,BuyGame_info_name:Mje,BuyGame_info_text:Dje,BuyGame_info_tag:Uje,BuyGame_info_price:jje,BuyGame_info_price_stone:$je,BuyGame_price_row:Gje,BuyGame_price_stone:Vje,BuyGame_price_text:Hje,BuyGame_price_button:Xje},zje=""+new URL("buy-game-success.png",import.meta.url).href;function Wje(){const[e,t]=fe.useState(!1),{playSeEnter:r,playSeClick:n}=Nh(),{gameInfo:i}=ht(c=>c.storeData),a=fe.useRef({buyGameCallback:()=>{},startGameCallback:()=>{}}),o=fe.useRef(0),s=async()=>{n();const c=await Nbe();window.pubsub.publish("loading",{loading:!1}),await eo(2e3),c.code===0||c.code===10053?(c.code===0&&window.pubsub.publish("toaster",{show:!0,image:zje,animation:"slideIn"}),t(!1),a.current.startGameCallback()):c.code===10014?(window.pubsub.publish("toaster",{show:!0,text:", "}),window.pubsub.publish("rechargeModal",{})):window.pubsub.publish("toaster",{show:!0,text:c.message})};return fe.useEffect(()=>window.pubsub.subscribe("showBuyGameModal",({buyGameCallback:l,startGameCallback:u})=>{t(!0),a.current={buyGameCallback:l,startGameCallback:u}}),[]),e?L.jsx("div",{className:Ar.BuyGame_container,children:L.jsxs("div",{className:Ar.BuyGame_pay_container,children:[L.jsx("div",{className:Ar.BuyGame_pay_tip}),L.jsx("div",{className:`${Ar.BuyGame_pay_close} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Ar.BuyGame_pay_close} interactive btn-clicked`,o.current=Date.now()},onMouseUp:c=>{const l=Date.now()-o.current;let u=c.currentTarget;setTimeout(()=>{u.className=`${Ar.BuyGame_pay_close} interactive`,u=null,setTimeout(()=>{n(),t(!1),a.current.buyGameCallback()},320)},l-350>0?0:350-l)}}),L.jsx("div",{className:Ar.BuyGame_pay_title,children:""}),L.jsx("div",{className:Ar.BuyGame_select_text,children:"1"}),L.jsxs("div",{className:Ar.BuyGame_info_block,children:[L.jsxs("div",{className:Ar.BuyGame_info_row,children:[L.jsx("div",{className:Ar.BuyGame_game_cover,children:L.jsx("div",{className:Ar.BuyGame_game_cover_inner,children:L.jsx("img",{src:(i==null?void 0:i.coverPic)||""})})}),L.jsxs("div",{children:[L.jsx("div",{className:Ar.BuyGame_info_name,children:(i==null?void 0:i.name)||""}),L.jsx("div",{className:Ar.BuyGame_info_tag,children:i==null?void 0:i.tagList.map(c=>L.jsx("div",{className:Ar.BuyGame_info_text,children:c.tagName},c.tagId))})]})]}),L.jsxs("div",{className:Ar.BuyGame_info_row,children:[L.jsx("span",{className:Ar.BuyGame_info_text,children:":"}),L.jsxs("div",{className:Ar.BuyGame_info_price,children:[(i==null?void 0:i.salesAmount)||0,L.jsx("span",{className:Ar.BuyGame_info_price_stone})]})]})]}),L.jsxs("div",{className:Ar.BuyGame_price_row,children:[L.jsxs("div",{className:Ar.BuyGame_info_row,children:[L.jsx("span",{className:Ar.BuyGame_price_text,style:{marginRight:Mt(4)},children:":"}),L.jsxs("div",{className:Ar.BuyGame_price_text,children:[(i==null?void 0:i.salesAmount)||0,L.jsx("span",{className:Ar.BuyGame_price_stone})]})]}),L.jsxs("div",{className:Ar.BuyGame_info_row,children:[L.jsx("span",{className:Ar.BuyGame_price_text,style:{marginRight:Mt(4)},children:":"}),L.jsxs("div",{className:Ar.BuyGame_price_text,children:[(i==null?void 0:i.salesAmount)||0,L.jsx("span",{className:Ar.BuyGame_price_stone})]}),L.jsx("div",{className:`${Ar.BuyGame_price_button} interactive`,onMouseEnter:r,onMouseDown:c=>{const l=c.currentTarget;l.className=`${Ar.BuyGame_price_button} interactive btn-clicked`,o.current=Date.now()},onMouseUp:c=>{const l=Date.now()-o.current;let u=c.currentTarget;setTimeout(()=>{u.className=`${Ar.BuyGame_price_button} interactive`,u=null,setTimeout(s,320)},l-350>0?0:350-l)}})]})]})]})}):null}const Yje=""+new URL("xingshiIcon.webp",import.meta.url).href,qje=""+new URL("modal-close.png",import.meta.url).href,Kje="_Recharge_container_1c39r_1",Zje="_Recharge_inner_1c39r_14",Jje="_fadeIn_1c39r_1",Qje="_RechargeModal_modalTitle_1c39r_23",e$e="_RechargeModal_rechargeModalItem_1c39r_40",t$e="_RechargeModal_rechargeModalItemChecked_1c39r_57",r$e="_RechargeModal_rechargeCardIcon_1c39r_61",n$e="_RechargeModal_rechargeModalCard_1c39r_71",i$e="_RechargeModal_rechargeModalList_1c39r_78",a$e="_RechargeModal_rechargeCardDiscount_1c39r_87",o$e="_RechargeModal_rechargeModalItemHead_1c39r_114",s$e="_RechargeModal_rechargeModalItemContent_1c39r_144",l$e="_RechargeModal_rechargeModalItemBtn_1c39r_166",u$e="_RechargeModal_rechargeModalItemImg_1c39r_170",c$e="_RechargeModal_rechargeModalListBottom_1c39r_198",f$e="_RechargeModal_modalFooter_1c39r_208",h$e="_RechargeModal_modalFooterLeft_1c39r_223",d$e="_RechargeModal_modalFooterRight_1c39r_227",p$e="_RechargeModal_modalFooterConfirm_1c39r_236",v$e="_Recharge_modal_close_1c39r_255",vn={Recharge_container:Kje,Recharge_inner:Zje,fadeIn:Jje,RechargeModal_modalTitle:Qje,RechargeModal_rechargeModalItem:e$e,RechargeModal_rechargeModalItemChecked:t$e,RechargeModal_rechargeCardIcon:r$e,RechargeModal_rechargeModalCard:n$e,RechargeModal_rechargeModalList:i$e,RechargeModal_rechargeCardDiscount:a$e,RechargeModal_rechargeModalItemHead:o$e,RechargeModal_rechargeModalItemContent:s$e,RechargeModal_rechargeModalItemBtn:l$e,RechargeModal_rechargeModalItemImg:u$e,RechargeModal_rechargeModalListBottom:c$e,RechargeModal_modalFooter:f$e,RechargeModal_modalFooterLeft:h$e,RechargeModal_modalFooterRight:d$e,RechargeModal_modalFooterConfirm:p$e,Recharge_modal_close:v$e};function g$e(){const[e,t]=fe.useState(!1),{playSeEnter:r,playSeClick:n}=Nh();ht(d=>d.storeData);const i=fe.useRef({successCallback:()=>{},closeCallback:()=>{}}),[a,o]=fe.useState([]),[s,c]=fe.useState(),l=fe.useRef(0),u=async d=>{var _,v;const g=await Dbe(d);g.code===0?((_=g.data)==null?void 0:_.pay_status)===2?(window.pubsub.publish("toaster",{show:!0,text:""}),window.pubsub.publish("loading",{loading:!1}),i.current.successCallback(),t(!1)):((v=g.data)==null?void 0:v.pay_status)===3?(window.pubsub.publish("toaster",{show:!0,text:""}),window.pubsub.publish("loading",{loading:!1}),t(!1)):setTimeout(()=>{u(d)},3e3):(window.pubsub.publish("toaster",{show:!0,text:g.message}),window.pubsub.publish("loading",{loading:!1}),t(!1))},f=async()=>{r(),window.pubsub.publish("loading",{loading:!0});const d=await Mbe((s==null?void 0:s.id)||0);if(d.code===0){const g=d.data.order_no;u(g);const _={thirdUserId:Js(),productId:$.gameId+"",amount:(s==null?void 0:s.price)??0,payTime:U0(),channel:sessionStorage.getItem("sdk-userId")?1:0};awe(_)}else window.pubsub.publish("toaster",{show:!0,text:d.message}),window.pubsub.publish("loading",{loading:!1})},h=async()=>{n(),f()},p=async()=>{var g;window.pubsub.publish("loading",{loading:!0});const d=await Bbe();d.code===0?(o(YI.chunk(d.data||[],3)),c((g=d.data)==null?void 0:g[0])):window.pubsub.publish("toaster",{show:!0,text:d.message}),window.pubsub.publish("loading",{loading:!1})};return fe.useEffect(()=>window.pubsub.subscribe("rechargeModal",({successCallback:g,closeCallback:_})=>{t(!0),p(),g&&(i.current.successCallback=g),_&&(i.current.closeCallback=_)}),[]),!e||!a.length?null:L.jsx("div",{className:vn.Recharge_container,children:L.jsxs("div",{className:vn.Recharge_inner,children:[L.jsx("div",{className:vn.RechargeModal_modalTitle,children:L.jsx("div",{children:""})}),L.jsx(dh,{src:qje,className:vn.Recharge_modal_close,onMouseEnter:r,onMouseDown:d=>{const g=d.currentTarget;g.className=`${vn.Recharge_modal_close} btn-clicked`,l.current=Date.now()},onMouseUp:d=>{const g=Date.now()-l.current;let _=d.currentTarget;setTimeout(()=>{_.className=vn.Recharge_modal_close,_=null,setTimeout(()=>{n(),t(!1),i.current.closeCallback()},320)},g-350>0?0:350-g)}}),L.jsx("div",{className:vn.RechargeModal_rechargeModalCard,children:a.map((d,g)=>L.jsxs("div",{className:vn.RechargeModal_rechargeModalList,children:[d.map((_,v)=>L.jsxs("div",{className:`${vn.RechargeModal_rechargeModalItem} ${_===s?vn.RechargeModal_rechargeModalItemChecked:""} interactive`,onMouseEnter:r,onClick:()=>{n(),c(_)},children:[L.jsx("div",{className:vn.RechargeModal_rechargeCardIcon}),!!_.discount&&L.jsxs("div",{className:vn.RechargeModal_rechargeCardDiscount,children:[L.jsx("span",{children:_.discount}),""]}),L.jsx("div",{className:vn.RechargeModal_rechargeModalItemHead,children:L.jsxs("div",{children:[_.bonus_packs_title,L.jsx("img",{src:Yje,alt:""}),_.bonus_packs_num]})}),L.jsxs("div",{className:vn.RechargeModal_rechargeModalItemContent,children:[L.jsx("img",{src:_.icon||"http://dummyimage.com/100x100",alt:"",className:vn.RechargeModal_rechargeModalItemImg}),L.jsxs("div",{children:[L.jsx("span",{children:"X"})," ",_.beans]})]}),L.jsxs("div",{className:vn.RechargeModal_rechargeModalItemBtn,children:[L.jsx("span",{children:"$"}),_.price]})]},v)),L.jsx("div",{className:vn.RechargeModal_rechargeModalListBottom})]},g))}),L.jsxs("div",{className:vn.RechargeModal_modalFooter,children:[L.jsx("div",{className:vn.RechargeModal_modalFooterLeft,children:""}),L.jsxs("div",{className:vn.RechargeModal_modalFooterRight,children:[L.jsxs("span",{children:["$",s==null?void 0:s.price]}),L.jsx("div",{className:vn.RechargeModal_modalFooterConfirm,onMouseEnter:r,onMouseDown:d=>{const g=d.currentTarget;g.className=`${vn.RechargeModal_modalFooterConfirm} btn-clicked`,l.current=Date.now()},onMouseUp:d=>{const g=Date.now()-l.current;let _=d.currentTarget;setTimeout(()=>{_.className=vn.RechargeModal_modalFooterConfirm,_=null,setTimeout(h,320)},g-350>0?0:350-g)}})]})]})]})})}const m$e="_progressAchievement_1peaj_2",_$e="_bg_1peaj_11",y$e="_btn_1peaj_17",x$e="_contentContainer_1peaj_24",b$e="_chapterTag_1peaj_46",w$e="_affinityTag_1peaj_65",E$e="_achievementTag_1peaj_84",S$e="_goBack_1peaj_103",Ou={progressAchievement:m$e,bg:_$e,btn:y$e,contentContainer:x$e,chapterTag:b$e,affinityTag:w$e,achievementTag:E$e,goBack:S$e},C$e="_affinity_d5bi0_1",T$e="_affinityList_d5bi0_13",QE={affinity:C$e,affinityList:T$e},A$e=()=>{const{playSeClick:e,playSeEnter:t}=bn(),r=Hr(),n=ht(s=>s.GUI),i=ht(s=>s.saveData.unlockAffinityData),a=ht(s=>s.GUI.gameUIConfigs[mn.affinity]);fe.useEffect(()=>{n.showAffinity||r(vt({component:"showAffinity",visibility:!1}))},[n.showAffinity]);const o=()=>{kc()};return L.jsx(L.Fragment,{children:n.showAffinity&&L.jsxs("div",{className:QE.affinity,children:[L.jsx(Cn,{item:a.buttons.Affinity_back_button,defaultClass:`${QE.goBack} inactive`,onClick:o,onMouseEnter:t}),L.jsx(Cn,{item:a.other[jp.Affinity_title]}),L.jsx(Vs,{item:a.other[jp.Affinity_bg],defaultClass:QE.affinityBg}),i==null?void 0:i.map((s,c)=>{const{name:l,url:u,x:f,y:h,isUnlocked:p}=s;return p?L.jsx(dh,{src:At(u,Et.ui),alt:l,style:{position:"absolute",left:Mt(f),top:Mt(h)}},c):null}),L.jsx(oX,{})]})})},I$e=()=>{const{playSeClick:e,playSeEnter:t}=bn(),r=Hr(),n=ht(c=>c.GUI),i=ht(c=>c.GUI.gameUIConfigs[mn.progressAndAchievement]),[a,o]=fe.useState("chapter"),s=()=>{kc(),r(vt({component:"showAffinity",visibility:!1})),r(vt({component:"showProgressAndAchievement",visibility:!1})),r(vt({component:"showAchievement",visibility:!1})),r(vt({component:"showStoryLine",visibility:!1}))};return fe.useEffect(()=>{r(Bue([])),n.showProgressAndAchievement?jT():o("chapter")},[n.showProgressAndAchievement]),L.jsx(L.Fragment,{children:n.showProgressAndAchievement&&L.jsxs("div",{className:Ou.progressAchievement,children:[L.jsx(Vs,{defaultClass:Ou.bg,item:i.other[Up.Progress_bg]}),L.jsx(Cn,{item:i.buttons.Progress_back_button,defaultClass:`${Ou.goBack} interactive`,onClick:s,onMouseEnter:t}),L.jsx(Cn,{item:i.buttons.Progress_chapter_button,defaultClass:`${Ou.chapterTag} interactive`,type:"checkbox",checked:a==="chapter",onClick:()=>{jT(),o("chapter")},onMouseEnter:t}),L.jsx(Cn,{item:i.buttons.Progress_achievement_button,defaultClass:`${Ou.achievementTag} interactive`,type:"checkbox",checked:a==="achievement",onClick:()=>{XH(),o("achievement")},onMouseEnter:t}),L.jsx(Cn,{item:i.buttons.Progress_affinity_button,defaultClass:`${Ou.affinityTag} interactive`,type:"checkbox",checked:a==="affinity",onClick:()=>{mLe(),o("affinity")},onMouseEnter:t}),L.jsxs(WH,{defaultClass:Ou.contentContainer,item:i.other[Up.Progress_content_container],children:[a==="chapter"&&L.jsx(uX,{}),a==="achievement"&&L.jsx(cX,{}),a==="affinity"&&L.jsx(A$e,{})]})]})})};function R$e(){const[e,t]=fe.useState(!1),r=Hr(),n=ht(p=>p.GUI),i=window.self!==window.top,a=fe.useRef({gameReady:!1,previewMode:!1,previewModeValue:!1}),o=fe.useRef(),s=p=>{if(i){Y9();return}const d=new URLSearchParams(window.location.search).get("gameId");window.globalThis.getGameDetail(d,p).then(g=>{if(g.code===401){sessionStorage.setItem("sdk-token",""),window.location.reload();return}window.pubsub.publish("gameInfoReady",!0),le.dispatch(r2(g.data)),z8(g.data)})},c=p=>{if(!a.current.gameReady&&!a.current.previewMode){o.current=setTimeout(()=>{c(p)},100);return}o.current&&(clearTimeout(o.current),o.current=null),$.gameplay.pixiStage=new AH,a.current.previewModeValue?window.pubsub.publish("gameInfoReady",!0):s(p)},l=p=>{JOe(),t(!0),r(Wue(p||"")),c(p)},u=()=>{window.addEventListener("message",p=>{const d=p.data,{method:g,status:_,response:v}=d.data;if(g&&(g==="IS_CAN_START"&&_&&window.MessageSaveFunc(),g==="GET_USER_INFO"&&(le.dispatch(ece(v.data)),sessionStorage.setItem("sdk-userId",v.data.userId),l()),g==="GET_GAME_DETAIL"&&(window.pubsub.publish("gameInfoReady",!0),le.dispatch(r2(v.data)),z8(v.data)),g==="BUY_GAME")){const m=le.getState().storeData.gameInfo;lR({paymentAmount:m.paymentAmount}),$.isFinishTrial==="0"?setTimeout(()=>{window.location.reload()},1e3):window.MessageSaveFunc()}}),_Ee()},f=()=>{const p=le.getState().storeData.isEditorPreviewMode;return i&&!p},h=()=>{BBe();const p=sessionStorage.getItem("sdk-token");if(p){l(p);return}setTimeout(()=>{window.globalThis.openLoginDialog().then(d=>{l(d.token),sessionStorage.setItem("sdk-token",d.token),sessionStorage.setItem("sdk-userId",d.userId),window.location.reload()})},1e3)};return fe.useEffect(()=>{f()||LBe(()=>{h()})},[$.gameJsLink,$.gameCssLink]),fe.useEffect(()=>{setTimeout(()=>{tke(),ZOe()},1e3);const p=window.pubsub.subscribe("isPreviewMode",g=>{if(a.current.previewMode=!0,a.current.previewModeValue=g,r(Que(g)),i&&!g){u();return}p()}),d=window.pubsub.subscribe("gameReady",()=>{a.current.gameReady=!0,d()})},[]),y5e(),e?L.jsxs("div",{className:"App",children:[L.jsx(g$e,{}),L.jsx(Wje,{}),L.jsx(bje,{}),L.jsx(k5e,{}),L.jsx(m5e,{}),L.jsx(Z8e,{}),L.jsx(J8e,{}),L.jsx(a5e,{}),L.jsx(Q8e,{}),L.jsx(IBe,{}),L.jsx(NBe,{}),L.jsx(Q6e,{}),L.jsx(PDe,{}),L.jsx(tme,{}),L.jsx(_5e,{}),L.jsx(u5e,{}),!n.showProgressAndAchievement&&L.jsx(uX,{}),!n.showProgressAndAchievement&&L.jsx(cX,{}),L.jsx(nje,{}),L.jsx(cje,{}),L.jsx(I5e,{}),L.jsx(I$e,{})]}):null}function Xl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HT(e,t){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},HT(e,t)}function Ex(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HT(e,t)}function q0(e,t){if(t&&(di(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xl(e)}function fs(e){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fs(e)}function P$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function O$e(e){return tX(e)||P$e(e)||rX(e)||nX()}function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function v6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var k$e={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,r){console&&console[t]&&console[t].apply(console,r)}},F$e=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Bo(this,e),this.init(t,r)}return Mo(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||k$e,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,a){return a&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new e(this.logger,v6(v6({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new e(this.logger,r)}}]),e}(),Jo=new F$e,ou=function(){function e(){Bo(this,e),this.observers={}}return Mo(e,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(a){i.observers[a]=i.observers[a]||[],i.observers[a].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(this.observers[r]){var o=[].concat(this.observers[r]);o.forEach(function(c){c.apply(void 0,i)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(c){c.apply(c,[r].concat(i))})}}}]),e}();function Hd(){var e,t,r=new Promise(function(n,i){e=n,t=i});return r.resolve=e,r.reject=t,r}function g6(e){return e==null?"":""+e}function N$e(e,t,r){e.forEach(function(n){t[n]&&(r[n]=t[n])})}function mO(e,t,r){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function i(){return!e||typeof e=="string"}for(var a=typeof t!="string"?[].concat(t):t.split(".");a.length>1;){if(i())return{};var o=n(a.shift());!e[o]&&r&&(e[o]=new r),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={}}return i()?{}:{obj:e,k:n(a.shift())}}function m6(e,t,r){var n=mO(e,t,Object),i=n.obj,a=n.k;i[a]=r}function L$e(e,t,r,n){var i=mO(e,t,Object),a=i.obj,o=i.k;a[o]=a[o]||[],n&&(a[o]=a[o].concat(r)),n||a[o].push(r)}function T_(e,t){var r=mO(e,t),n=r.obj,i=r.k;if(n)return n[i]}function B$e(e,t,r){var n=T_(e,r);return n!==void 0?n:T_(t,r)}function fX(e,t,r){for(var n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?typeof e[n]=="string"||e[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?r&&(e[n]=t[n]):fX(e[n],t[n],r):e[n]=t[n]);return e}function hf(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var M$e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function D$e(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return M$e[t]}):e}var Sx=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,U$e=[" ",",","?","!",";"];function j$e(e,t,r){t=t||"",r=r||"";var n=U$e.filter(function(s){return t.indexOf(s)<0&&r.indexOf(s)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),a=!i.test(e);if(!a){var o=e.indexOf(r);o>0&&!i.test(e.substring(0,o))&&(a=!0)}return a}function A_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var n=t.split(r),i=e,a=0;a<n.length;++a){if(!i||typeof i[n[a]]=="string"&&a+1<n.length)return;if(i[n[a]]===void 0){for(var o=2,s=n.slice(a,a+o).join(r),c=i[s];c===void 0&&n.length>a+o;)o++,s=n.slice(a,a+o).join(r),c=i[s];if(c===void 0)return;if(c===null)return null;if(t.endsWith(s)){if(typeof c=="string")return c;if(s&&typeof c[s]=="string")return c[s]}var l=n.slice(a+o).join(r);return l?A_(c,l,r):void 0}i=i[n[a]]}return i}}function _6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ng(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $$e(e){var t=G$e();return function(){var n=fs(e),i;if(t){var a=fs(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return q0(this,i)}}function G$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var V$e=function(e){Ex(r,e);var t=$$e(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Bo(this,r),i=t.call(this),Sx&&ou.call(Xl(i)),i.data=n||{},i.options=a,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Mo(r,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var a=this.options.ns.indexOf(i);a>-1&&this.options.ns.splice(a,1)}},{key:"getResource",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[i,a];o&&typeof o!="string"&&(u=u.concat(o)),o&&typeof o=="string"&&(u=u.concat(c?o.split(c):o)),i.indexOf(".")>-1&&(u=i.split("."));var f=T_(this.data,u);return f||!l||typeof o!="string"?f:A_(this.data&&this.data[i]&&this.data[i][a],o,c)}},{key:"addResource",value:function(i,a,o,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,u=[i,a];o&&(u=u.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(u=i.split("."),s=a,a=u[1]),this.addNamespaces(a),m6(this.data,u,s),c.silent||this.emit("added",i,a,o,s)}},{key:"addResources",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var c in o)(typeof o[c]=="string"||Object.prototype.toString.apply(o[c])==="[object Array]")&&this.addResource(i,a,c,o[c],{silent:!0});s.silent||this.emit("added",i,a,o)}},{key:"addResourceBundle",value:function(i,a,o,s,c){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[i,a];i.indexOf(".")>-1&&(u=i.split("."),s=o,o=a,a=u[1]),this.addNamespaces(a);var f=T_(this.data,u)||{};s?fX(f,o,c):f=Ng(Ng({},f),o),m6(this.data,u,f),l.silent||this.emit("added",i,a,o)}},{key:"removeResourceBundle",value:function(i,a){this.hasResourceBundle(i,a)&&delete this.data[i][a],this.removeNamespaces(a),this.emit("removed",i,a)}},{key:"hasResourceBundle",value:function(i,a){return this.getResource(i,a)!==void 0}},{key:"getResourceBundle",value:function(i,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Ng(Ng({},{}),this.getResource(i,a)):this.getResource(i,a)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var a=this.getDataByLanguage(i),o=a&&Object.keys(a)||[];return!!o.find(function(s){return a[s]&&Object.keys(a[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(ou),hX={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,r,n,i,a){var o=this;return t.forEach(function(s){o.processors[s]&&(r=o.processors[s].process(r,n,i,a))}),r}};function y6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H$e(e){var t=X$e();return function(){var n=fs(e),i;if(t){var a=fs(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return q0(this,i)}}function X$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x6={},b6=function(e){Ex(r,e);var t=H$e(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Bo(this,r),i=t.call(this),Sx&&ou.call(Xl(i)),N$e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,Xl(i)),i.options=a,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=Jo.create("translator"),i}return Mo(r,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,a);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,a){var o=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ns||this.options.defaultNS||[],l=o&&i.indexOf(o)>-1,u=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!j$e(i,o,s);if(l&&!u){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:c};var h=i.split(o);(o!==s||o===s&&this.options.ns.indexOf(h[0])>-1)&&(c=h.shift()),i=h.join(s)}return typeof c=="string"&&(c=[c]),{key:i,namespaces:c}}},{key:"translate",value:function(i,a,o){var s=this;if(di(a)!=="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),di(a)==="object"&&(a=Fi({},a)),a||(a={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var c=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,u=this.extractFromKey(i[i.length-1],a),f=u.key,h=u.namespaces,p=h[h.length-1],d=a.lng||this.language,g=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(g){var _=a.nsSeparator||this.options.nsSeparator;return c?{res:"".concat(p).concat(_).concat(f),usedKey:f,exactUsedKey:f,usedLng:d,usedNS:p}:"".concat(p).concat(_).concat(f)}return c?{res:f,usedKey:f,exactUsedKey:f,usedLng:d,usedNS:p}:f}var v=this.resolve(i,a),m=v&&v.res,y=v&&v.usedKey||f,b=v&&v.exactUsedKey||f,w=Object.prototype.toString.apply(m),E=["[object Number]","[object Function]","[object RegExp]"],C=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,A=typeof m!="string"&&typeof m!="boolean"&&typeof m!="number";if(T&&m&&A&&E.indexOf(w)<0&&!(typeof C=="string"&&w==="[object Array]")){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var I=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,m,Fi(Fi({},a),{},{ns:h})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return c?(v.res=I,v):I}if(l){var O=w==="[object Array]",P=O?[]:{},k=O?b:y;for(var F in m)if(Object.prototype.hasOwnProperty.call(m,F)){var M="".concat(k).concat(l).concat(F);P[F]=this.translate(M,Fi(Fi({},a),{joinArrays:!1,ns:h})),P[F]===M&&(P[F]=m[F])}m=P}}else if(T&&typeof C=="string"&&w==="[object Array]")m=m.join(C),m&&(m=this.extendTranslation(m,i,a,o));else{var D=!1,G=!1,Q=a.count!==void 0&&typeof a.count!="string",te=r.hasDefaultValue(a),Y=Q?this.pluralResolver.getSuffix(d,a.count,a):"",U=a["defaultValue".concat(Y)]||a.defaultValue;!this.isValidLookup(m)&&te&&(D=!0,m=U),this.isValidLookup(m)||(G=!0,m=f);var z=a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,j=z&&G?void 0:m,V=te&&U!==m&&this.options.updateMissing;if(G||D||V){if(this.logger.log(V?"updateKey":"missingKey",d,p,f,V?U:m),l){var ne=this.resolve(f,Fi(Fi({},a),{},{keySeparator:!1}));ne&&ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var ae=[],pe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&pe&&pe[0])for(var se=0;se<pe.length;se++)ae.push(pe[se]);else this.options.saveMissingTo==="all"?ae=this.languageUtils.toResolveHierarchy(a.lng||this.language):ae.push(a.lng||this.language);var _e=function(Pe,Ee,Se){var Ge=te&&Se!==m?Se:j;s.options.missingKeyHandler?s.options.missingKeyHandler(Pe,p,Ee,Ge,V,a):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(Pe,p,Ee,Ge,V,a),s.emit("missingKey",Pe,p,Ee,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Q?ae.forEach(function(Le){s.pluralResolver.getSuffixes(Le,a).forEach(function(Pe){_e([Le],f+Pe,a["defaultValue".concat(Pe)]||U)})}):_e(ae,f,U))}m=this.extendTranslation(m,i,a,v,o),G&&m===f&&this.options.appendNamespaceToMissingKey&&(m="".concat(p,":").concat(f)),(G||D)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(p,":").concat(f):f,D?m:void 0):m=this.options.parseMissingKeyHandler(m))}return c?(v.res=m,v):m}},{key:"extendTranslation",value:function(i,a,o,s,c){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,Fi(Fi({},this.options.interpolation.defaultVariables),o),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(Fi(Fi({},o),{interpolation:Fi(Fi({},this.options.interpolation),o.interpolation)}));var u=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(u){var h=i.match(this.interpolator.nestingRegexp);f=h&&h.length}var p=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(p=Fi(Fi({},this.options.interpolation.defaultVariables),p)),i=this.interpolator.interpolate(i,p,o.lng||this.language,o),u){var d=i.match(this.interpolator.nestingRegexp),g=d&&d.length;f<g&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(o.lng=s.usedLng),o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];return c&&c[0]===y[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(y[0]," in key: ").concat(a[0])),null):l.translate.apply(l,y.concat([a]))},o)),o.interpolation&&this.interpolator.reset()}var _=o.postProcess||this.options.postProcess,v=typeof _=="string"?[_]:_;return i!=null&&v&&v.length&&o.applyPostProcessor!==!1&&(i=hX.handle(v,i,a,this.options&&this.options.postProcessPassResolved?Fi({i18nResolved:s},o):o,this)),i}},{key:"resolve",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,c,l,u,f;return typeof i=="string"&&(i=[i]),i.forEach(function(h){if(!a.isValidLookup(s)){var p=a.extractFromKey(h,o),d=p.key;c=d;var g=p.namespaces;a.options.fallbackNS&&(g=g.concat(a.options.fallbackNS));var _=o.count!==void 0&&typeof o.count!="string",v=_&&!o.ordinal&&o.count===0&&a.pluralResolver.shouldUseIntlApi(),m=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",y=o.lngs?o.lngs:a.languageUtils.toResolveHierarchy(o.lng||a.language,o.fallbackLng);g.forEach(function(b){a.isValidLookup(s)||(f=b,!x6["".concat(y[0],"-").concat(b)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(f)&&(x6["".concat(y[0],"-").concat(b)]=!0,a.logger.warn('key "'.concat(c,'" for languages "').concat(y.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(function(w){if(!a.isValidLookup(s)){u=w;var E=[d];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(E,d,w,b,o);else{var C;_&&(C=a.pluralResolver.getSuffix(w,o.count,o));var T="".concat(a.options.pluralSeparator,"zero");if(_&&(E.push(d+C),v&&E.push(d+T)),m){var A="".concat(d).concat(a.options.contextSeparator).concat(o.context);E.push(A),_&&(E.push(A+C),v&&E.push(A+T))}}for(var I;I=E.pop();)a.isValidLookup(s)||(l=I,s=a.getResource(w,b,I,o))}}))})}}),{res:s,usedKey:c,exactUsedKey:l,usedLng:u,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,a,o,s):this.resourceStore.getResource(i,a,o,s)}}],[{key:"hasDefaultValue",value:function(i){var a="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&a===o.substring(0,a.length)&&i[o]!==void 0)return!0;return!1}}]),r}(ou);function eS(e){return e.charAt(0).toUpperCase()+e.slice(1)}var w6=function(){function e(t){Bo(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Jo.create("languageUtils")}return Mo(e,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(a){return a.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=eS(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=eS(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=eS(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(a){if(!i){var o=n.formatLanguageCode(a);(!n.options.supportedLngs||n.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&r.forEach(function(a){if(!i){var o=n.getLanguagePartFromCode(a);if(n.isSupportedCode(o))return i=o;i=n.options.supportedLngs.find(function(s){if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&s.indexOf(o)===0)return s})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,a=this.getFallbackCodes(n||this.options.fallbackLng||[],r),o=[],s=function(l){l&&(i.isSupportedCode(l)?o.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(r))):typeof r=="string"&&s(this.formatLanguageCode(r)),a.forEach(function(c){o.indexOf(c)<0&&s(i.formatLanguageCode(c))}),o}}]),e}(),z$e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],W$e={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}},Y$e=["v1","v2","v3"],E6={zero:0,one:1,two:2,few:3,many:4,other:5};function q$e(){var e={};return z$e.forEach(function(t){t.lngs.forEach(function(r){e[r]={numbers:t.nr,plurals:W$e[t.fc]}})}),e}var K$e=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Bo(this,e),this.languageUtils=t,this.options=r,this.logger=Jo.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=q$e()}return Mo(e,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,i).map(function(a){return"".concat(n).concat(a)})}},{key:"getSuffixes",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(r,i);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort(function(o,s){return E6[o]-E6[s]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):a.numbers.map(function(o){return n.getSuffix(r,o,i)}):[]}},{key:"getSuffix",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.getRule(r,i);return a?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(a.select(n)):this.getSuffixRetroCompatible(a,n):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,n){var i=this,a=r.noAbs?r.plurals(n):r.plurals(Math.abs(n)),o=r.numbers[a];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var s=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?s():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}},{key:"shouldUseIntlApi",value:function(){return!Y$e.includes(this.options.compatibilityJSON)}}]),e}();function S6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C6(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=B$e(e,t,r);return!a&&i&&typeof r=="string"&&(a=A_(e,r,n),a===void 0&&(a=A_(t,r,n))),a}var Z$e=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bo(this,e),this.logger=Jo.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(r){return r},this.init(t)}return Mo(e,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:D$e,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?hf(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?hf(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?hf(n.nestingPrefix):n.nestingPrefixEscaped||hf("$t("),this.nestingSuffix=n.nestingSuffix?hf(n.nestingSuffix):n.nestingSuffixEscaped||hf(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,a){var o=this,s,c,l,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(_){return _.replace(/\$/g,"$$$$")}var h=function(v){if(v.indexOf(o.formatSeparator)<0){var m=C6(n,u,v,o.options.keySeparator,o.options.ignoreJSONStructure);return o.alwaysFormat?o.format(m,void 0,i,vo(vo(vo({},a),n),{},{interpolationkey:v})):m}var y=v.split(o.formatSeparator),b=y.shift().trim(),w=y.join(o.formatSeparator).trim();return o.format(C6(n,u,b,o.options.keySeparator,o.options.ignoreJSONStructure),w,i,vo(vo(vo({},a),n),{},{interpolationkey:b}))};this.resetRegExp();var p=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,d=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,g=[{regex:this.regexpUnescape,safeValue:function(v){return f(v)}},{regex:this.regexp,safeValue:function(v){return o.escapeValue?f(o.escape(v)):f(v)}}];return g.forEach(function(_){for(l=0;s=_.regex.exec(r);){var v=s[1].trim();if(c=h(v),c===void 0)if(typeof p=="function"){var m=p(r,s,a);c=typeof m=="string"?m:""}else if(a&&Object.prototype.hasOwnProperty.call(a,v))c="";else if(d){c=s[0];continue}else o.logger.warn("missed to pass in variable ".concat(v," for interpolating ").concat(r)),c="";else typeof c!="string"&&!o.useRawValueToEscape&&(c=g6(c));var y=_.safeValue(c);if(r=r.replace(s[0],y),d?(_.regex.lastIndex+=c.length,_.regex.lastIndex-=s[0].length):_.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,c;function l(p,d){var g=this.nestingOptionsSeparator;if(p.indexOf(g)<0)return p;var _=p.split(new RegExp("".concat(g,"[ ]*{"))),v="{".concat(_[1]);p=_[0],v=this.interpolate(v,c);var m=v.match(/'/g),y=v.match(/"/g);(m&&m.length%2===0&&!y||y.length%2!==0)&&(v=v.replace(/'/g,'"'));try{c=JSON.parse(v),d&&(c=vo(vo({},d),c))}catch(b){return this.logger.warn("failed parsing options string in nesting for key ".concat(p),b),"".concat(p).concat(g).concat(v)}return delete c.defaultValue,p}for(;o=this.nestingRegexp.exec(r);){var u=[];c=vo({},a),c=c.replace&&typeof c.replace!="string"?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;var f=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var h=o[1].split(this.formatSeparator).map(function(p){return p.trim()});o[1]=h.shift(),u=h,f=!0}if(s=n(l.call(this,o[1].trim(),c),c),s&&o[0]===r&&typeof s!="string")return s;typeof s!="string"&&(s=g6(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(r)),s=""),f&&(s=u.reduce(function(p,d){return i.format(p,d,a.lng,vo(vo({},a),{},{interpolationkey:o[1].trim()}))},s.trim())),r=r.replace(o[0],s),this.regexp.lastIndex=0}return r}}]),e}();function T6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J$e(e){var t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){var n=e.split("(");t=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(t==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(t==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var a=i.split(";");a.forEach(function(o){if(o){var s=o.split(":"),c=O$e(s),l=c[0],u=c.slice(1),f=u.join(":").trim().replace(/^'+|'+$/g,"");r[l.trim()]||(r[l.trim()]=f),f==="false"&&(r[l.trim()]=!1),f==="true"&&(r[l.trim()]=!0),isNaN(f)||(r[l.trim()]=parseInt(f,10))}})}}return{formatName:t,formatOptions:r}}function df(e){var t={};return function(n,i,a){var o=i+JSON.stringify(a),s=t[o];return s||(s=e(i,a),t[o]=s),s(n)}}var Q$e=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bo(this,e),this.logger=Jo.create("formatter"),this.options=t,this.formats={number:df(function(r,n){var i=new Intl.NumberFormat(r,Fs({},n));return function(a){return i.format(a)}}),currency:df(function(r,n){var i=new Intl.NumberFormat(r,Fs(Fs({},n),{},{style:"currency"}));return function(a){return i.format(a)}}),datetime:df(function(r,n){var i=new Intl.DateTimeFormat(r,Fs({},n));return function(a){return i.format(a)}}),relativetime:df(function(r,n){var i=new Intl.RelativeTimeFormat(r,Fs({},n));return function(a){return i.format(a,n.range||"day")}}),list:df(function(r,n){var i=new Intl.ListFormat(r,Fs({},n));return function(a){return i.format(a)}})},this.init(t)}return Mo(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(r,n){this.formats[r.toLowerCase().trim()]=n}},{key:"addCached",value:function(r,n){this.formats[r.toLowerCase().trim()]=df(n)}},{key:"format",value:function(r,n,i){var a=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n.split(this.formatSeparator),c=s.reduce(function(l,u){var f=J$e(u),h=f.formatName,p=f.formatOptions;if(a.formats[h]){var d=l;try{var g=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},_=g.locale||g.lng||o.locale||o.lng||i;d=a.formats[h](l,_,Fs(Fs(Fs({},p),o),g))}catch(v){a.logger.warn(v)}return d}else a.logger.warn("there was no format function for ".concat(h));return l},r);return c}}]),e}();function A6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function I6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e9e(e){var t=t9e();return function(){var n=fs(e),i;if(t){var a=fs(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return q0(this,i)}}function t9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r9e(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var n9e=function(e){Ex(r,e);var t=e9e(r);function r(n,i,a){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Bo(this,r),o=t.call(this),Sx&&ou.call(Xl(o)),o.backend=n,o.store=i,o.services=a,o.languageUtils=a.languageUtils,o.options=s,o.logger=Jo.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(a,s.backend,s),o}return Mo(r,[{key:"queueLoad",value:function(i,a,o,s){var c=this,l={},u={},f={},h={};return i.forEach(function(p){var d=!0;a.forEach(function(g){var _="".concat(p,"|").concat(g);!o.reload&&c.store.hasResourceBundle(p,g)?c.state[_]=2:c.state[_]<0||(c.state[_]===1?u[_]===void 0&&(u[_]=!0):(c.state[_]=1,d=!1,u[_]===void 0&&(u[_]=!0),l[_]===void 0&&(l[_]=!0),h[g]===void 0&&(h[g]=!0)))}),d||(f[p]=!0)}),(Object.keys(l).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(l),pending:Object.keys(u),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(h)}}},{key:"loaded",value:function(i,a,o){var s=i.split("|"),c=s[0],l=s[1];a&&this.emit("failedLoading",c,l,a),o&&this.store.addResourceBundle(c,l,o),this.state[i]=a?-1:2;var u={};this.queue.forEach(function(f){L$e(f.loaded,[c],l),r9e(f,i),a&&f.errors.push(a),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(h){u[h]||(u[h]={});var p=f.loaded[h];p.length&&p.forEach(function(d){u[h][d]===void 0&&(u[h][d]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,a,o){var s=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!i.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:a,fcName:o,tried:c,wait:l,callback:u});return}this.readingCalls++;var f=function(g,_){if(s.readingCalls--,s.waitingReads.length>0){var v=s.waitingReads.shift();s.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(g&&_&&c<s.maxRetries){setTimeout(function(){s.read.call(s,i,a,o,c+1,l*2,u)},l);return}u(g,_)},h=this.backend[o].bind(this.backend);if(h.length===2){try{var p=h(i,a);p&&typeof p.then=="function"?p.then(function(d){return f(null,d)}).catch(f):f(null,p)}catch(d){f(d)}return}return h(i,a,f)}},{key:"prepareLoading",value:function(i,a){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof a=="string"&&(a=[a]);var l=this.queueLoad(i,a,s,c);if(!l.toLoad.length)return l.pending.length||c(),null;l.toLoad.forEach(function(u){o.loadOne(u)})}},{key:"load",value:function(i,a,o){this.prepareLoading(i,a,{},o)}},{key:"reload",value:function(i,a,o){this.prepareLoading(i,a,{reload:!0},o)}},{key:"loadOne",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=i.split("|"),c=s[0],l=s[1];this.read(c,l,"read",void 0,void 0,function(u,f){u&&a.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(c," failed"),u),!u&&f&&a.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(c),f),a.loaded(i,u,f)})}},{key:"saveMissing",value:function(i,a,o,s,c){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var f=I6(I6({},l),{},{isUpdate:c}),h=this.backend.create.bind(this.backend);if(h.length<6)try{var p;h.length===5?p=h(i,a,o,s,f):p=h(i,a,o,s),p&&typeof p.then=="function"?p.then(function(d){return u(null,d)}).catch(u):u(null,p)}catch(d){u(d)}else h(i,a,o,s,u,f)}!i||!i[0]||this.store.addResource(i[0],a,o,s)}}}]),r}(ou);function R6(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var r={};if(di(t[1])==="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),di(t[2])==="object"||di(t[3])==="object"){var n=t[3]||t[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(t,r,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function P6(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function O6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(r),!0).forEach(function(n){Ba(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i9e(e){var t=a9e();return function(){var n=fs(e),i;if(t){var a=fs(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return q0(this,i)}}function a9e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lg(){}function o9e(e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(function(r){typeof e[r]=="function"&&(e[r]=e[r].bind(e))})}var I_=function(e){Ex(r,e);var t=i9e(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(Bo(this,r),n=t.call(this),Sx&&ou.call(Xl(n)),n.options=P6(i),n.services={},n.logger=Jo,n.modules={external:[]},o9e(Xl(n)),a&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,a),q0(n,Xl(n));setTimeout(function(){n.init(i,a)},0)}return n}return Mo(r,[{key:"init",value:function(){var i=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof a=="function"&&(o=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(typeof a.ns=="string"?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));var s=R6();this.options=Ho(Ho(Ho({},s),this.options),P6(a)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ho(Ho({},s.interpolation),this.options.interpolation)),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);function c(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?Jo.init(c(this.modules.logger),this.options):Jo.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=Q$e);var u=new w6(this.options);this.store=new V$e(this.options.resources,this.options);var f=this.services;f.logger=Jo,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new K$e(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=c(l),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Z$e(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new n9e(c(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(v){for(var m=arguments.length,y=new Array(m>1?m-1:0),b=1;b<m;b++)y[b-1]=arguments[b];i.emit.apply(i,[v].concat(y))}),this.modules.languageDetector&&(f.languageDetector=c(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=c(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new b6(this.services,this.options),this.translator.on("*",function(v){for(var m=arguments.length,y=new Array(m>1?m-1:0),b=1;b<m;b++)y[b-1]=arguments[b];i.emit.apply(i,[v].concat(y))}),this.modules.external.forEach(function(v){v.init&&v.init(i)})}if(this.format=this.options.interpolation.format,o||(o=Lg),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var p=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];p.forEach(function(v){i[v]=function(){var m;return(m=i.store)[v].apply(m,arguments)}});var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach(function(v){i[v]=function(){var m;return(m=i.store)[v].apply(m,arguments),i}});var g=Hd(),_=function(){var m=function(b,w){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),g.resolve(w),o(b,w)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return m(null,i.t.bind(i));i.changeLanguage(i.options.lng,m)};return this.options.resources||!this.options.initImmediate?_():setTimeout(_,0),g}},{key:"loadResources",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lg,s=o,c=typeof i=="string"?i:this.language;if(typeof i=="function"&&(s=i),!this.options.resources||this.options.partialBundledLanguages){if(c&&c.toLowerCase()==="cimode")return s();var l=[],u=function(p){if(p){var d=a.services.languageUtils.toResolveHierarchy(p);d.forEach(function(g){l.indexOf(g)<0&&l.push(g)})}};if(c)u(c);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(h){return u(h)})}this.options.preload&&this.options.preload.forEach(function(h){return u(h)}),this.services.backendConnector.load(l,this.options.ns,function(h){!h&&!a.resolvedLanguage&&a.language&&a.setResolvedLanguage(a.language),s(h)})}else s(null)}},{key:"reloadResources",value:function(i,a,o){var s=Hd();return i||(i=this.languages),a||(a=this.options.ns),o||(o=Lg),this.services.backendConnector.reload(i,a,function(c){s.resolve(),o(c)}),s}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&hX.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var a=0;a<this.languages.length;a++){var o=this.languages[a];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,a){var o=this;this.isLanguageChangingTo=i;var s=Hd();this.emit("languageChanging",i);var c=function(h){o.language=h,o.languages=o.services.languageUtils.toResolveHierarchy(h),o.resolvedLanguage=void 0,o.setResolvedLanguage(h)},l=function(h,p){p?(c(p),o.translator.changeLanguage(p),o.isLanguageChangingTo=void 0,o.emit("languageChanged",p),o.logger.log("languageChanged",p)):o.isLanguageChangingTo=void 0,s.resolve(function(){return o.t.apply(o,arguments)}),a&&a(h,function(){return o.t.apply(o,arguments)})},u=function(h){!i&&!h&&o.services.languageDetector&&(h=[]);var p=typeof h=="string"?h:o.services.languageUtils.getBestMatchFromCodes(h);p&&(o.language||c(p),o.translator.language||o.translator.changeLanguage(p),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(p)),o.loadResources(p,function(d){l(d,p)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(i),s}},{key:"getFixedT",value:function(i,a,o){var s=this,c=function l(u,f){var h;if(di(f)!=="object"){for(var p=arguments.length,d=new Array(p>2?p-2:0),g=2;g<p;g++)d[g-2]=arguments[g];h=s.options.overloadTranslationOptionHandler([u,f].concat(d))}else h=Ho({},f);h.lng=h.lng||l.lng,h.lngs=h.lngs||l.lngs,h.ns=h.ns||l.ns,h.keyPrefix=h.keyPrefix||o||l.keyPrefix;var _=s.options.keySeparator||".",v;return h.keyPrefix&&Array.isArray(u)?v=u.map(function(m){return"".concat(h.keyPrefix).concat(_).concat(m)}):v=h.keyPrefix?"".concat(h.keyPrefix).concat(_).concat(u):u,s.t(v,h)};return typeof i=="string"?c.lng=i:c.lngs=i,c.ns=a,c.keyPrefix=o,c}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=o.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var u=function(p,d){var g=a.services.backendConnector.state["".concat(p,"|").concat(d)];return g===-1||g===2};if(o.precheck){var f=o.precheck(this,u);if(f!==void 0)return f}return!!(this.hasResourceBundle(s,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(s,i)&&(!c||u(l,i)))}},{key:"loadNamespaces",value:function(i,a){var o=this,s=Hd();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(c){o.options.ns.indexOf(c)<0&&o.options.ns.push(c)}),this.loadResources(function(c){s.resolve(),a&&a(c)}),s):(a&&a(),Promise.resolve())}},{key:"loadLanguages",value:function(i,a){var o=Hd();typeof i=="string"&&(i=[i]);var s=this.options.preload||[],c=i.filter(function(l){return s.indexOf(l)<0});return c.length?(this.options.preload=s.concat(c),this.loadResources(function(l){o.resolve(),a&&a(l)}),o):(a&&a(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new w6(R6());return a.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lg,s=Ho(Ho(Ho({},this.options),a),{isClone:!0}),c=new r(s);(a.debug!==void 0||a.prefix!==void 0)&&(c.logger=c.logger.clone(a));var l=["store","services","language"];return l.forEach(function(u){c[u]=i[u]}),c.services=Ho({},this.services),c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c.translator=new b6(c.services,c.options),c.translator.on("*",function(u){for(var f=arguments.length,h=new Array(f>1?f-1:0),p=1;p<f;p++)h[p-1]=arguments[p];c.emit.apply(c,[u].concat(h))}),c.init(s,o),c.translator.options=c.options,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(ou);Ba(I_,"createInstance",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new I_(e,t)});var Vi=I_.createInstance();Vi.createInstance=I_.createInstance;Vi.createInstance;Vi.dir;Vi.init;Vi.loadResources;Vi.reloadResources;Vi.use;Vi.changeLanguage;Vi.getFixedT;Vi.t;Vi.exists;Vi.setDefaultNamespace;Vi.hasLoadedNamespace;Vi.loadNamespaces;Vi.loadLanguages;Vi.use(CMe).init({resources:Hue||{},lng:Ah[Xue]||"zhCn",fallbackLng:"zhCn",interpolation:{escapeValue:!1}}).then(()=>console.log("IdolTime i18n Ready!"));Zl.render(L.jsx(kr.StrictMode,{children:L.jsx(RMe,{children:L.jsx(qge,{store:le,children:L.jsx(R$e,{})})})}),document.getElementById("root"));export{ii as C,pa as S,Ot as T,$ as W,sc as a,d9e as r,wp as u};
