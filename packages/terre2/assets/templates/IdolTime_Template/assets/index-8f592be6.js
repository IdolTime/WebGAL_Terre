var sY=Object.defineProperty;var lY=(t,e,r)=>e in t?sY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var qe=(t,e,r)=>(lY(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function uY(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Q3={exports:{}},Pp={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var aF=Object.getOwnPropertySymbols,cY=Object.prototype.hasOwnProperty,fY=Object.prototype.propertyIsEnumerable;function hY(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function dY(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var yC=dY()?Object.assign:function(t,e){for(var r,n=hY(t),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)cY.call(r,o)&&(n[o]=r[o]);if(aF){i=aF(r);for(var s=0;s<i.length;s++)fY.call(r,i[s])&&(n[i[s]]=r[i[s]])}}return n};const pY=gi(yC);var J3={exports:{}},Jt={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C=yC,Ff=60103,e4=60106;Jt.Fragment=60107;Jt.StrictMode=60108;Jt.Profiler=60114;var t4=60109,r4=60110,n4=60112;Jt.Suspense=60113;var i4=60115,a4=60116;if(typeof Symbol=="function"&&Symbol.for){var Ya=Symbol.for;Ff=Ya("react.element"),e4=Ya("react.portal"),Jt.Fragment=Ya("react.fragment"),Jt.StrictMode=Ya("react.strict_mode"),Jt.Profiler=Ya("react.profiler"),t4=Ya("react.provider"),r4=Ya("react.context"),n4=Ya("react.forward_ref"),Jt.Suspense=Ya("react.suspense"),i4=Ya("react.memo"),a4=Ya("react.lazy")}var oF=typeof Symbol=="function"&&Symbol.iterator;function vY(t){return t===null||typeof t!="object"?null:(t=oF&&t[oF]||t["@@iterator"],typeof t=="function"?t:null)}function Rp(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s4={};function kf(t,e,r){this.props=t,this.context=e,this.refs=s4,this.updater=r||o4}kf.prototype.isReactComponent={};kf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Rp(85));this.updater.enqueueSetState(this,t,e,"setState")};kf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l4(){}l4.prototype=kf.prototype;function xC(t,e,r){this.props=t,this.context=e,this.refs=s4,this.updater=r||o4}var bC=xC.prototype=new l4;bC.constructor=xC;_C(bC,kf.prototype);bC.isPureReactComponent=!0;var SC={current:null},u4=Object.prototype.hasOwnProperty,c4={key:!0,ref:!0,__self:!0,__source:!0};function f4(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)u4.call(e,n)&&!c4.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Ff,type:t,key:a,ref:o,props:i,_owner:SC.current}}function gY(t,e){return{$$typeof:Ff,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function EC(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ff}function mY(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var sF=/\/+/g;function qx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mY(""+t.key):e.toString(36)}function Wv(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ff:case e4:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+qx(o,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(sF,"$&/")+"/"),Wv(i,e,r,"",function(l){return l})):i!=null&&(EC(i)&&(i=gY(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sF,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){a=t[s];var c=n+qx(a,s);o+=Wv(a,e,r,c,i)}else if(c=vY(t),typeof c=="function")for(t=c.call(t),s=0;!(a=t.next()).done;)a=a.value,c=n+qx(a,s++),o+=Wv(a,e,r,c,i);else if(a==="object")throw e=""+t,Error(Rp(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function H0(t,e,r){if(t==null)return t;var n=[],i=0;return Wv(t,n,"","",function(a){return e.call(r,a,i++)}),n}function yY(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var h4={current:null};function Ps(){var t=h4.current;if(t===null)throw Error(Rp(321));return t}var _Y={ReactCurrentDispatcher:h4,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:SC,IsSomeRendererActing:{current:!1},assign:_C};Jt.Children={map:H0,forEach:function(t,e,r){H0(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return H0(t,function(){e++}),e},toArray:function(t){return H0(t,function(e){return e})||[]},only:function(t){if(!EC(t))throw Error(Rp(143));return t}};Jt.Component=kf;Jt.PureComponent=xC;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_Y;Jt.cloneElement=function(t,e,r){if(t==null)throw Error(Rp(267,t));var n=_C({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=SC.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)u4.call(e,c)&&!c4.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&s!==void 0?s[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:Ff,type:t.type,key:i,ref:a,props:n,_owner:o}};Jt.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:r4,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:t4,_context:t},t.Consumer=t};Jt.createElement=f4;Jt.createFactory=function(t){var e=f4.bind(null,t);return e.type=t,e};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(t){return{$$typeof:n4,render:t}};Jt.isValidElement=EC;Jt.lazy=function(t){return{$$typeof:a4,_payload:{_status:-1,_result:t},_init:yY}};Jt.memo=function(t,e){return{$$typeof:i4,type:t,compare:e===void 0?null:e}};Jt.useCallback=function(t,e){return Ps().useCallback(t,e)};Jt.useContext=function(t,e){return Ps().useContext(t,e)};Jt.useDebugValue=function(){};Jt.useEffect=function(t,e){return Ps().useEffect(t,e)};Jt.useImperativeHandle=function(t,e,r){return Ps().useImperativeHandle(t,e,r)};Jt.useLayoutEffect=function(t,e){return Ps().useLayoutEffect(t,e)};Jt.useMemo=function(t,e){return Ps().useMemo(t,e)};Jt.useReducer=function(t,e,r){return Ps().useReducer(t,e,r)};Jt.useRef=function(t){return Ps().useRef(t)};Jt.useState=function(t){return Ps().useState(t)};Jt.version="17.0.2";J3.exports=Jt;var ve=J3.exports;const ei=gi(ve);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xY=ve,d4=60103;Pp.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var lF=Symbol.for;d4=lF("react.element"),Pp.Fragment=lF("react.fragment")}var bY=xY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SY=Object.prototype.hasOwnProperty,EY={key:!0,ref:!0,__self:!0,__source:!0};function p4(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)SY.call(e,n)&&!EY.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:d4,type:t,key:a,ref:o,props:i,_owner:bY.current}}Pp.jsx=p4;Pp.jsxs=p4;Q3.exports=Pp;var B=Q3.exports,v4={exports:{}},$a={},g4={exports:{}},m4={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}if(typeof window>"u"||typeof MessageChannel!="function"){var c=null,l=null,u=function(){if(c!==null)try{var M=t.unstable_now();c(!0,M),c=null}catch(V){throw setTimeout(u,0),V}};e=function(M){c!==null?setTimeout(e,0,M):(c=M,setTimeout(u,0))},r=function(M,V){l=setTimeout(M,V)},n=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if(typeof console<"u"){var d=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof d!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,v=null,y=-1,m=5,g=0;t.unstable_shouldYield=function(){return t.unstable_now()>=g},i=function(){},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<M?Math.floor(1e3/M):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(v!==null){var M=t.unstable_now();g=M+m;try{v(!0,M)?b.postMessage(null):(p=!1,v=null)}catch(V){throw b.postMessage(null),V}}else p=!1},e=function(M){v=M,p||(p=!0,b.postMessage(null))},r=function(M,V){y=f(function(){M(t.unstable_now())},V)},n=function(){h(y),y=-1}}function S(M,V){var $=M.length;M.push(V);e:for(;;){var j=$-1>>>1,te=M[j];if(te!==void 0&&0<C(te,V))M[j]=V,M[$]=te,$=j;else break e}}function w(M){return M=M[0],M===void 0?null:M}function A(M){var V=M[0];if(V!==void 0){var $=M.pop();if($!==V){M[0]=$;e:for(var j=0,te=M.length;j<te;){var ie=2*(j+1)-1,de=M[ie],he=ie+1,Ee=M[he];if(de!==void 0&&0>C(de,$))Ee!==void 0&&0>C(Ee,de)?(M[j]=Ee,M[he]=$,j=he):(M[j]=de,M[ie]=$,j=ie);else if(Ee!==void 0&&0>C(Ee,$))M[j]=Ee,M[he]=$,j=he;else break e}}return V}return null}function C(M,V){var $=M.sortIndex-V.sortIndex;return $!==0?$:M.id-V.id}var O=[],P=[],I=1,R=null,F=3,D=!1,L=!1,U=!1;function Y(M){for(var V=w(P);V!==null;){if(V.callback===null)A(P);else if(V.startTime<=M)A(P),V.sortIndex=V.expirationTime,S(O,V);else break;V=w(P)}}function ee(M){if(U=!1,Y(M),!L)if(w(O)!==null)L=!0,e(J);else{var V=w(P);V!==null&&r(ee,V.startTime-M)}}function J(M,V){L=!1,U&&(U=!1,n()),D=!0;var $=F;try{for(Y(V),R=w(O);R!==null&&(!(R.expirationTime>V)||M&&!t.unstable_shouldYield());){var j=R.callback;if(typeof j=="function"){R.callback=null,F=R.priorityLevel;var te=j(R.expirationTime<=V);V=t.unstable_now(),typeof te=="function"?R.callback=te:R===w(O)&&A(O),Y(V)}else A(O);R=w(O)}if(R!==null)var ie=!0;else{var de=w(P);de!==null&&r(ee,de.startTime-V),ie=!1}return ie}finally{R=null,F=$,D=!1}}var X=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){L||D||(L=!0,e(J))},t.unstable_getCurrentPriorityLevel=function(){return F},t.unstable_getFirstCallbackNode=function(){return w(O)},t.unstable_next=function(M){switch(F){case 1:case 2:case 3:var V=3;break;default:V=F}var $=F;F=V;try{return M()}finally{F=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=X,t.unstable_runWithPriority=function(M,V){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=F;F=M;try{return V()}finally{F=$}},t.unstable_scheduleCallback=function(M,V,$){var j=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?j+$:j):$=j,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=$+te,M={id:I++,callback:V,priorityLevel:M,startTime:$,expirationTime:te,sortIndex:-1},$>j?(M.sortIndex=$,S(P,M),w(O)===null&&M===w(P)&&(U?n():U=!0,r(ee,$-j))):(M.sortIndex=te,S(O,M),L||D||(L=!0,e(J))),M},t.unstable_wrapCallback=function(M){var V=F;return function(){var $=F;F=V;try{return M.apply(this,arguments)}finally{F=$}}}})(m4);g4.exports=m4;var wY=g4.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=ve,Lr=yC,Vn=wY;function Le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Dm)throw Error(Le(227));var y4=new Set,Rd={};function Wu(t,e){df(t,e),df(t+"Capture",e)}function df(t,e){for(Rd[t]=e,t=0;t<e.length;t++)y4.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),AY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uF=Object.prototype.hasOwnProperty,cF={},fF={};function CY(t){return uF.call(fF,t)?!0:uF.call(cF,t)?!1:AY.test(t)?fF[t]=!0:(cF[t]=!0,!1)}function TY(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OY(t,e,r,n){if(e===null||typeof e>"u"||TY(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mi(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ti[t]=new Mi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ti[e]=new Mi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ti[t]=new Mi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ti[t]=new Mi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ti[t]=new Mi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ti[t]=new Mi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ti[t]=new Mi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ti[t]=new Mi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ti[t]=new Mi(t,5,!1,t.toLowerCase(),null,!1,!1)});var wC=/[\-:]([a-z])/g;function AC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wC,AC);ti[e]=new Mi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wC,AC);ti[e]=new Mi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wC,AC);ti[e]=new Mi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ti[t]=new Mi(t,1,!1,t.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ti[t]=new Mi(t,1,!1,t.toLowerCase(),null,!0,!0)});function CC(t,e,r,n){var i=ti.hasOwnProperty(e)?ti[e]:null,a=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");a||(OY(e,r,i,n)&&(r=null),n||i===null?CY(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var zu=Dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=60103,vu=60106,Zs=60107,TC=60108,cd=60114,OC=60109,PC=60110,Mm=60112,fd=60113,_g=60120,Lm=60115,RC=60116,IC=60121,FC=60128,_4=60129,kC=60130,rE=60131;if(typeof Symbol=="function"&&Symbol.for){var kn=Symbol.for;ed=kn("react.element"),vu=kn("react.portal"),Zs=kn("react.fragment"),TC=kn("react.strict_mode"),cd=kn("react.profiler"),OC=kn("react.provider"),PC=kn("react.context"),Mm=kn("react.forward_ref"),fd=kn("react.suspense"),_g=kn("react.suspense_list"),Lm=kn("react.memo"),RC=kn("react.lazy"),IC=kn("react.block"),kn("react.scope"),FC=kn("react.opaque.id"),_4=kn("react.debug_trace_mode"),kC=kn("react.offscreen"),rE=kn("react.legacy_hidden")}var hF=typeof Symbol=="function"&&Symbol.iterator;function Ah(t){return t===null||typeof t!="object"?null:(t=hF&&t[hF]||t["@@iterator"],typeof t=="function"?t:null)}var Kx;function td(t){if(Kx===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Kx=e&&e[1]||""}return`
`+Kx+t}var Zx=!1;function X0(t,e){if(!t||Zx)return"";Zx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=s);break}}}finally{Zx=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?td(t):""}function PY(t){switch(t.tag){case 5:return td(t.type);case 16:return td("Lazy");case 13:return td("Suspense");case 19:return td("SuspenseList");case 0:case 2:case 15:return t=X0(t.type,!1),t;case 11:return t=X0(t.type.render,!1),t;case 22:return t=X0(t.type._render,!1),t;case 1:return t=X0(t.type,!0),t;default:return""}}function Xc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case vu:return"Portal";case cd:return"Profiler";case TC:return"StrictMode";case fd:return"Suspense";case _g:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PC:return(t.displayName||"Context")+".Consumer";case OC:return(t._context.displayName||"Context")+".Provider";case Mm:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Lm:return Xc(t.type);case IC:return Xc(t._render);case RC:e=t._payload,t=t._init;try{return Xc(t(e))}catch{}}return null}function Sl(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function x4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RY(t){var e=x4(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Y0(t){t._valueTracker||(t._valueTracker=RY(t))}function b4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=x4(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function xg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nE(t,e){var r=e.checked;return Lr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function dF(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Sl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S4(t,e){e=e.checked,e!=null&&CC(t,"checked",e,!1)}function iE(t,e){S4(t,e);var r=Sl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?aE(t,e.type,r):e.hasOwnProperty("defaultValue")&&aE(t,e.type,Sl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pF(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function aE(t,e,r){(e!=="number"||xg(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function IY(t){var e="";return Dm.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function oE(t,e){return t=Lr({children:void 0},e),(e=IY(e.children))&&(t.children=e),t}function Yc(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Sl(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Lr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vF(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Le(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Le(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Sl(r)}}function E4(t,e){var r=Sl(e.value),n=Sl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function gF(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var lE={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function w4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?w4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var q0,A4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==lE.svg||"innerHTML"in t)t.innerHTML=e;else{for(q0=q0||document.createElement("div"),q0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=q0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Id(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FY=["Webkit","ms","Moz","O"];Object.keys(hd).forEach(function(t){FY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hd[e]=hd[t]})});function C4(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hd.hasOwnProperty(t)&&hd[t]?(""+e).trim():e+"px"}function T4(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=C4(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var kY=Lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cE(t,e){if(e){if(kY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function fE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function DC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hE=null,qc=null,Kc=null;function mF(t){if(t=Fp(t)){if(typeof hE!="function")throw Error(Le(280));var e=t.stateNode;e&&(e=Vm(e),hE(t.stateNode,t.type,e))}}function O4(t){qc?Kc?Kc.push(t):Kc=[t]:qc=t}function P4(){if(qc){var t=qc,e=Kc;if(Kc=qc=null,mF(t),e)for(t=0;t<e.length;t++)mF(e[t])}}function MC(t,e){return t(e)}function R4(t,e,r,n,i){return t(e,r,n,i)}function LC(){}var I4=MC,gu=!1,Qx=!1;function BC(){(qc!==null||Kc!==null)&&(LC(),P4())}function DY(t,e,r){if(Qx)return t(e,r);Qx=!0;try{return I4(t,e,r)}finally{Qx=!1,BC()}}function Fd(t,e){var r=t.stateNode;if(r===null)return null;var n=Vm(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Le(231,e,typeof r));return r}var dE=!1;if(Ts)try{var Ch={};Object.defineProperty(Ch,"passive",{get:function(){dE=!0}}),window.addEventListener("test",Ch,Ch),window.removeEventListener("test",Ch,Ch)}catch{dE=!1}function MY(t,e,r,n,i,a,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var dd=!1,bg=null,Sg=!1,pE=null,LY={onError:function(t){dd=!0,bg=t}};function BY(t,e,r,n,i,a,o,s,c){dd=!1,bg=null,MY.apply(LY,arguments)}function NY(t,e,r,n,i,a,o,s,c){if(BY.apply(this,arguments),dd){if(dd){var l=bg;dd=!1,bg=null}else throw Error(Le(198));Sg||(Sg=!0,pE=l)}}function Hu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function F4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yF(t){if(Hu(t)!==t)throw Error(Le(188))}function UY(t){var e=t.alternate;if(!e){if(e=Hu(t),e===null)throw Error(Le(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return yF(i),t;if(a===n)return yF(i),e;a=a.sibling}throw Error(Le(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(Le(189))}}if(r.alternate!==n)throw Error(Le(190))}if(r.tag!==3)throw Error(Le(188));return r.stateNode.current===r?t:e}function k4(t){if(t=UY(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function _F(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var D4,NC,M4,L4,vE=!1,Mo=[],sl=null,ll=null,ul=null,kd=new Map,Dd=new Map,Th=[],xF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gE(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function bF(t,e){switch(t){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":kd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(e.pointerId)}}function Oh(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t=gE(e,r,n,i,a),e!==null&&(e=Fp(e),e!==null&&NC(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jY(t,e,r,n,i){switch(e){case"focusin":return sl=Oh(sl,t,e,r,n,i),!0;case"dragenter":return ll=Oh(ll,t,e,r,n,i),!0;case"mouseover":return ul=Oh(ul,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return kd.set(a,Oh(kd.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Dd.set(a,Oh(Dd.get(a)||null,t,e,r,n,i)),!0}return!1}function $Y(t){var e=mu(t.target);if(e!==null){var r=Hu(e);if(r!==null){if(e=r.tag,e===13){if(e=F4(r),e!==null){t.blockedOn=e,L4(t.lanePriority,function(){Vn.unstable_runWithPriority(t.priority,function(){M4(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=VC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=Fp(r),e!==null&&NC(e),t.blockedOn=r,!1;e.shift()}return!0}function SF(t,e,r){zv(t)&&r.delete(e)}function VY(){for(vE=!1;0<Mo.length;){var t=Mo[0];if(t.blockedOn!==null){t=Fp(t.blockedOn),t!==null&&D4(t);break}for(var e=t.targetContainers;0<e.length;){var r=VC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&Mo.shift()}sl!==null&&zv(sl)&&(sl=null),ll!==null&&zv(ll)&&(ll=null),ul!==null&&zv(ul)&&(ul=null),kd.forEach(SF),Dd.forEach(SF)}function Ph(t,e){t.blockedOn===e&&(t.blockedOn=null,vE||(vE=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,VY)))}function B4(t){function e(i){return Ph(i,t)}if(0<Mo.length){Ph(Mo[0],t);for(var r=1;r<Mo.length;r++){var n=Mo[r];n.blockedOn===t&&(n.blockedOn=null)}}for(sl!==null&&Ph(sl,t),ll!==null&&Ph(ll,t),ul!==null&&Ph(ul,t),kd.forEach(e),Dd.forEach(e),r=0;r<Th.length;r++)n=Th[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Th.length&&(r=Th[0],r.blockedOn===null);)$Y(r),r.blockedOn===null&&Th.shift()}function K0(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Bc={animationend:K0("Animation","AnimationEnd"),animationiteration:K0("Animation","AnimationIteration"),animationstart:K0("Animation","AnimationStart"),transitionend:K0("Transition","TransitionEnd")},Jx={},N4={};Ts&&(N4=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Bm(t){if(Jx[t])return Jx[t];if(!Bc[t])return t;var e=Bc[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in N4)return Jx[t]=e[r];return t}var U4=Bm("animationend"),j4=Bm("animationiteration"),$4=Bm("animationstart"),V4=Bm("transitionend"),G4=new Map,UC=new Map,GY=["abort","abort",U4,"animationEnd",j4,"animationIteration",$4,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",V4,"transitionEnd","waiting","waiting"];function jC(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),UC.set(n,e),G4.set(n,i),Wu(i,[n])}}var WY=Vn.unstable_now;WY();var Sr=8;function Dc(t){if(1&t)return Sr=15,1;if(2&t)return Sr=14,2;if(4&t)return Sr=13,4;var e=24&t;return e!==0?(Sr=12,e):t&32?(Sr=11,32):(e=192&t,e!==0?(Sr=10,e):t&256?(Sr=9,256):(e=3584&t,e!==0?(Sr=8,e):t&4096?(Sr=7,4096):(e=4186112&t,e!==0?(Sr=6,e):(e=62914560&t,e!==0?(Sr=5,e):t&67108864?(Sr=4,67108864):t&134217728?(Sr=3,134217728):(e=805306368&t,e!==0?(Sr=2,e):1073741824&t?(Sr=1,1073741824):(Sr=8,t))))))}function zY(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function HY(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Le(358,t))}}function Md(t,e){var r=t.pendingLanes;if(r===0)return Sr=0;var n=0,i=0,a=t.expiredLanes,o=t.suspendedLanes,s=t.pingedLanes;if(a!==0)n=a,i=Sr=15;else if(a=r&134217727,a!==0){var c=a&~o;c!==0?(n=Dc(c),i=Sr):(s&=a,s!==0&&(n=Dc(s),i=Sr))}else a=r&~o,a!==0?(n=Dc(a),i=Sr):s!==0&&(n=Dc(s),i=Sr);if(n===0)return 0;if(n=31-El(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&!(e&o)){if(Dc(e),i<=Sr)return e;Sr=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-El(e),i=1<<r,n|=t[r],e&=~i;return n}function W4(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Eg(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Mc(24&~e),t===0?Eg(10,e):t;case 10:return t=Mc(192&~e),t===0?Eg(8,e):t;case 8:return t=Mc(3584&~e),t===0&&(t=Mc(4186112&~e),t===0&&(t=512)),t;case 2:return e=Mc(805306368&~e),e===0&&(e=268435456),e}throw Error(Le(358,t))}function Mc(t){return t&-t}function e1(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Nm(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-El(e),t[e]=r}var El=Math.clz32?Math.clz32:qY,XY=Math.log,YY=Math.LN2;function qY(t){return t===0?32:31-(XY(t)/YY|0)|0}var KY=Vn.unstable_UserBlockingPriority,ZY=Vn.unstable_runWithPriority,Hv=!0;function QY(t,e,r,n){gu||LC();var i=$C,a=gu;gu=!0;try{R4(i,t,e,r,n)}finally{(gu=a)||BC()}}function JY(t,e,r,n){ZY(KY,$C.bind(null,t,e,r,n))}function $C(t,e,r,n){if(Hv){var i;if((i=(e&4)===0)&&0<Mo.length&&-1<xF.indexOf(t))t=gE(null,t,e,r,n),Mo.push(t);else{var a=VC(t,e,r,n);if(a===null)i&&bF(t,n);else{if(i){if(-1<xF.indexOf(t)){t=gE(a,t,e,r,n),Mo.push(t);return}if(jY(a,t,e,r,n))return;bF(t,n)}nN(t,e,n,null,r)}}}}function VC(t,e,r,n){var i=DC(n);if(i=mu(i),i!==null){var a=Hu(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=F4(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return nN(t,e,n,i,r),null}var el=null,GC=null,Xv=null;function z4(){if(Xv)return Xv;var t,e=GC,r=e.length,n,i="value"in el?el.value:el.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return Xv=i.slice(t,1<n?1-n:void 0)}function Yv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Z0(){return!0}function EF(){return!1}function va(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Z0:EF,this.isPropagationStopped=EF,this}return Lr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Z0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Z0)},persist:function(){},isPersistent:Z0}),e}var Df={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WC=va(Df),Ip=Lr({},Df,{view:0,detail:0}),eq=va(Ip),t1,r1,Rh,Um=Lr({},Ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rh&&(Rh&&t.type==="mousemove"?(t1=t.screenX-Rh.screenX,r1=t.screenY-Rh.screenY):r1=t1=0,Rh=t),t1)},movementY:function(t){return"movementY"in t?t.movementY:r1}}),wF=va(Um),tq=Lr({},Um,{dataTransfer:0}),rq=va(tq),nq=Lr({},Ip,{relatedTarget:0}),n1=va(nq),iq=Lr({},Df,{animationName:0,elapsedTime:0,pseudoElement:0}),aq=va(iq),oq=Lr({},Df,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sq=va(oq),lq=Lr({},Df,{data:0}),AF=va(lq),uq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fq[t])?!!e[t]:!1}function zC(){return hq}var dq=Lr({},Ip,{key:function(t){if(t.key){var e=uq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zC,charCode:function(t){return t.type==="keypress"?Yv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pq=va(dq),vq=Lr({},Um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CF=va(vq),gq=Lr({},Ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zC}),mq=va(gq),yq=Lr({},Df,{propertyName:0,elapsedTime:0,pseudoElement:0}),_q=va(yq),xq=Lr({},Um,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bq=va(xq),Sq=[9,13,27,32],HC=Ts&&"CompositionEvent"in window,pd=null;Ts&&"documentMode"in document&&(pd=document.documentMode);var Eq=Ts&&"TextEvent"in window&&!pd,H4=Ts&&(!HC||pd&&8<pd&&11>=pd),TF=String.fromCharCode(32),OF=!1;function X4(t,e){switch(t){case"keyup":return Sq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nc=!1;function wq(t,e){switch(t){case"compositionend":return Y4(e);case"keypress":return e.which!==32?null:(OF=!0,TF);case"textInput":return t=e.data,t===TF&&OF?null:t;default:return null}}function Aq(t,e){if(Nc)return t==="compositionend"||!HC&&X4(t,e)?(t=z4(),Xv=GC=el=null,Nc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H4&&e.locale!=="ko"?null:e.data;default:return null}}var Cq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Cq[t.type]:e==="textarea"}function q4(t,e,r,n){O4(n),e=wg(e,"onChange"),0<e.length&&(r=new WC("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var vd=null,Ld=null;function Tq(t){eN(t,0)}function jm(t){var e=jc(t);if(b4(e))return t}function Oq(t,e){if(t==="change")return e}var K4=!1;if(Ts){var i1;if(Ts){var a1="oninput"in document;if(!a1){var RF=document.createElement("div");RF.setAttribute("oninput","return;"),a1=typeof RF.oninput=="function"}i1=a1}else i1=!1;K4=i1&&(!document.documentMode||9<document.documentMode)}function IF(){vd&&(vd.detachEvent("onpropertychange",Z4),Ld=vd=null)}function Z4(t){if(t.propertyName==="value"&&jm(Ld)){var e=[];if(q4(e,Ld,t,DC(t)),t=Tq,gu)t(e);else{gu=!0;try{MC(t,e)}finally{gu=!1,BC()}}}}function Pq(t,e,r){t==="focusin"?(IF(),vd=e,Ld=r,vd.attachEvent("onpropertychange",Z4)):t==="focusout"&&IF()}function Rq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jm(Ld)}function Iq(t,e){if(t==="click")return jm(e)}function Fq(t,e){if(t==="input"||t==="change")return jm(e)}function kq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Da=typeof Object.is=="function"?Object.is:kq,Dq=Object.prototype.hasOwnProperty;function Bd(t,e){if(Da(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Dq.call(e,r[n])||!Da(t[r[n]],e[r[n]]))return!1;return!0}function FF(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kF(t,e){var r=FF(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=FF(r)}}function Q4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DF(){for(var t=window,e=xg();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=xg(t.document)}return e}function mE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Mq=Ts&&"documentMode"in document&&11>=document.documentMode,Uc=null,yE=null,gd=null,_E=!1;function MF(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_E||Uc==null||Uc!==xg(n)||(n=Uc,"selectionStart"in n&&mE(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),gd&&Bd(gd,n)||(gd=n,n=wg(yE,"onSelect"),0<n.length&&(e=new WC("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Uc)))}jC("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);jC("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);jC(GY,2);for(var LF="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),o1=0;o1<LF.length;o1++)UC.set(LF[o1],0);df("onMouseEnter",["mouseout","mouseover"]);df("onMouseLeave",["mouseout","mouseover"]);df("onPointerEnter",["pointerout","pointerover"]);df("onPointerLeave",["pointerout","pointerover"]);Wu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J4=new Set("cancel close invalid load scroll toggle".split(" ").concat(rd));function BF(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,NY(n,e,void 0,t),t.currentTarget=null}function eN(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break e;BF(i,s,l),a=c}else for(o=0;o<n.length;o++){if(s=n[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break e;BF(i,s,l),a=c}}}if(Sg)throw t=pE,Sg=!1,pE=null,t}function Tr(t,e){var r=aN(e),n=t+"__bubble";r.has(n)||(rN(e,t,2,!1),r.add(n))}var NF="_reactListening"+Math.random().toString(36).slice(2);function tN(t){t[NF]||(t[NF]=!0,y4.forEach(function(e){J4.has(e)||UF(e,!1,t,null),UF(e,!0,t,null)}))}function UF(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=r;if(t==="selectionchange"&&r.nodeType!==9&&(a=r.ownerDocument),n!==null&&!e&&J4.has(t)){if(t!=="scroll")return;i|=2,a=n}var o=aN(a),s=t+"__"+(e?"capture":"bubble");o.has(s)||(e&&(i|=4),rN(a,t,i,e),o.add(s))}function rN(t,e,r,n){var i=UC.get(e);switch(i===void 0?2:i){case 0:i=QY;break;case 1:i=JY;break;default:i=$C}r=i.bind(null,e,r,t),i=void 0,!dE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function nN(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;s!==null;){if(o=mu(s),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}s=s.parentNode}}n=n.return}DY(function(){var l=a,u=DC(r),f=[];e:{var h=G4.get(t);if(h!==void 0){var d=WC,p=t;switch(t){case"keypress":if(Yv(r)===0)break e;case"keydown":case"keyup":d=pq;break;case"focusin":p="focus",d=n1;break;case"focusout":p="blur",d=n1;break;case"beforeblur":case"afterblur":d=n1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=wF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=rq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=mq;break;case U4:case j4:case $4:d=aq;break;case V4:d=_q;break;case"scroll":d=eq;break;case"wheel":d=bq;break;case"copy":case"cut":case"paste":d=sq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=CF}var v=(e&4)!==0,y=!v&&t==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var g=l,x;g!==null;){x=g;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,m!==null&&(b=Fd(g,m),b!=null&&v.push(Nd(g,b,x)))),y)break;g=g.return}0<v.length&&(h=new d(h,p,null,r,u),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&!(e&16)&&(p=r.relatedTarget||r.fromElement)&&(mu(p)||p[Mf]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=l,p=p?mu(p):null,p!==null&&(y=Hu(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(v=wF,b="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=CF,b="onPointerLeave",m="onPointerEnter",g="pointer"),y=d==null?h:jc(d),x=p==null?h:jc(p),h=new v(b,g+"leave",d,r,u),h.target=y,h.relatedTarget=x,b=null,mu(u)===l&&(v=new v(m,g+"enter",p,r,u),v.target=x,v.relatedTarget=y,b=v),y=b,d&&p)t:{for(v=d,m=p,g=0,x=v;x;x=_c(x))g++;for(x=0,b=m;b;b=_c(b))x++;for(;0<g-x;)v=_c(v),g--;for(;0<x-g;)m=_c(m),x--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=_c(v),m=_c(m)}v=null}else v=null;d!==null&&jF(f,h,d,v,!1),p!==null&&y!==null&&jF(f,y,p,v,!0)}}e:{if(h=l?jc(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var S=Oq;else if(PF(h))if(K4)S=Fq;else{S=Rq;var w=Pq}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Iq);if(S&&(S=S(t,l))){q4(f,S,r,u);break e}w&&w(t,h,l),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&aE(h,"number",h.value)}switch(w=l?jc(l):window,t){case"focusin":(PF(w)||w.contentEditable==="true")&&(Uc=w,yE=l,gd=null);break;case"focusout":gd=yE=Uc=null;break;case"mousedown":_E=!0;break;case"contextmenu":case"mouseup":case"dragend":_E=!1,MF(f,r,u);break;case"selectionchange":if(Mq)break;case"keydown":case"keyup":MF(f,r,u)}var A;if(HC)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Nc?X4(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(H4&&r.locale!=="ko"&&(Nc||C!=="onCompositionStart"?C==="onCompositionEnd"&&Nc&&(A=z4()):(el=u,GC="value"in el?el.value:el.textContent,Nc=!0)),w=wg(l,C),0<w.length&&(C=new AF(C,t,null,r,u),f.push({event:C,listeners:w}),A?C.data=A:(A=Y4(r),A!==null&&(C.data=A)))),(A=Eq?wq(t,r):Aq(t,r))&&(l=wg(l,"onBeforeInput"),0<l.length&&(u=new AF("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:l}),u.data=A))}eN(f,e)})}function Nd(t,e,r){return{instance:t,listener:e,currentTarget:r}}function wg(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Fd(t,r),a!=null&&n.unshift(Nd(t,a,i)),a=Fd(t,e),a!=null&&n.push(Nd(t,a,i))),t=t.return}return n}function _c(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jF(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=Fd(r,a),c!=null&&o.unshift(Nd(r,c,s))):i||(c=Fd(r,a),c!=null&&o.push(Nd(r,c,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}function Ag(){}var s1=null,l1=null;function iN(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function xE(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $F=typeof setTimeout=="function"?setTimeout:void 0,Lq=typeof clearTimeout=="function"?clearTimeout:void 0;function XC(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Zc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function VF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var u1=0;function Bq(t){return{$$typeof:FC,toString:t,valueOf:t}}var $m=Math.random().toString(36).slice(2),tl="__reactFiber$"+$m,Cg="__reactProps$"+$m,Mf="__reactContainer$"+$m,GF="__reactEvents$"+$m;function mu(t){var e=t[tl];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Mf]||r[tl]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=VF(t);t!==null;){if(r=t[tl])return r;t=VF(t)}return e}t=r,r=t.parentNode}return null}function Fp(t){return t=t[tl]||t[Mf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Le(33))}function Vm(t){return t[Cg]||null}function aN(t){var e=t[GF];return e===void 0&&(e=t[GF]=new Set),e}var bE=[],$c=-1;function kl(t){return{current:t}}function Rr(t){0>$c||(t.current=bE[$c],bE[$c]=null,$c--)}function Kr(t,e){$c++,bE[$c]=t.current,t.current=e}var wl={},pi=kl(wl),Xi=kl(!1),Fu=wl;function pf(t,e){var r=t.type.contextTypes;if(!r)return wl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yi(t){return t=t.childContextTypes,t!=null}function Tg(){Rr(Xi),Rr(pi)}function WF(t,e,r){if(pi.current!==wl)throw Error(Le(168));Kr(pi,e),Kr(Xi,r)}function oN(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Le(108,Xc(e)||"Unknown",i));return Lr({},r,n)}function qv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wl,Fu=pi.current,Kr(pi,t),Kr(Xi,Xi.current),!0}function zF(t,e,r){var n=t.stateNode;if(!n)throw Error(Le(169));r?(t=oN(t,e,Fu),n.__reactInternalMemoizedMergedChildContext=t,Rr(Xi),Rr(pi),Kr(pi,t)):Rr(Xi),Kr(Xi,r)}var YC=null,Au=null,Nq=Vn.unstable_runWithPriority,qC=Vn.unstable_scheduleCallback,SE=Vn.unstable_cancelCallback,Uq=Vn.unstable_shouldYield,HF=Vn.unstable_requestPaint,EE=Vn.unstable_now,jq=Vn.unstable_getCurrentPriorityLevel,Gm=Vn.unstable_ImmediatePriority,sN=Vn.unstable_UserBlockingPriority,lN=Vn.unstable_NormalPriority,uN=Vn.unstable_LowPriority,cN=Vn.unstable_IdlePriority,c1={},$q=HF!==void 0?HF:function(){},ms=null,Kv=null,f1=!1,XF=EE(),hi=1e4>XF?EE:function(){return EE()-XF};function vf(){switch(jq()){case Gm:return 99;case sN:return 98;case lN:return 97;case uN:return 96;case cN:return 95;default:throw Error(Le(332))}}function fN(t){switch(t){case 99:return Gm;case 98:return sN;case 97:return lN;case 96:return uN;case 95:return cN;default:throw Error(Le(332))}}function ku(t,e){return t=fN(t),Nq(t,e)}function Ud(t,e,r){return t=fN(t),qC(t,e,r)}function Yo(){if(Kv!==null){var t=Kv;Kv=null,SE(t)}hN()}function hN(){if(!f1&&ms!==null){f1=!0;var t=0;try{var e=ms;ku(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),ms=null}catch(r){throw ms!==null&&(ms=ms.slice(t+1)),qC(Gm,Yo),r}finally{f1=!1}}}var Vq=zu.ReactCurrentBatchConfig;function no(t,e){if(t&&t.defaultProps){e=Lr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Og=kl(null),Pg=null,Vc=null,Rg=null;function KC(){Rg=Vc=Pg=null}function ZC(t){var e=Og.current;Rr(Og),t.type._context._currentValue=e}function dN(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Qc(t,e){Pg=t,Rg=Vc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(so=!0),t.firstContext=null)}function Ua(t,e){if(Rg!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Rg=t,e=1073741823),e={context:t,observedBits:e,next:null},Vc===null){if(Pg===null)throw Error(Le(308));Vc=e,Pg.dependencies={lanes:0,firstContext:e,responders:null}}else Vc=Vc.next=e;return t._currentValue}var Xs=!1;function QC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fl(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function YF(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function jd(t,e,r,n){var i=t.updateQueue;Xs=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=t.alternate;if(u!==null){u=u.updateQueue;var f=u.lastBaseUpdate;f!==o&&(f===null?u.firstBaseUpdate=l:f.next=l,u.lastBaseUpdate=c)}}if(a!==null){f=i.baseState,o=0,u=l=c=null;do{s=a.lane;var h=a.eventTime;if((n&s)===s){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=t,p=a;switch(s=e,h=r,p.tag){case 1:if(d=p.payload,typeof d=="function"){f=d.call(h,f,s);break e}f=d;break e;case 3:d.flags=d.flags&-4097|64;case 0:if(d=p.payload,s=typeof d=="function"?d.call(h,f,s):d,s==null)break e;f=Lr({},f,s);break e;case 2:Xs=!0}}a.callback!==null&&(t.flags|=32,s=i.effects,s===null?i.effects=[a]:s.push(a))}else h={eventTime:h,lane:s,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=f):u=u.next=h,o|=s;if(a=a.next,a===null){if(s=i.shared.pending,s===null)break;a=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}while(1);u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,Dp|=o,t.lanes=o,t.memoizedState=f}}function qF(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Le(191,i));i.call(n)}}}var vN=new Dm.Component().refs;function Ig(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Lr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Wm={isMounted:function(t){return(t=t._reactInternals)?Hu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=ha(),i=hl(t),a=cl(n,i);a.payload=e,r!=null&&(a.callback=r),fl(t,a),dl(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=ha(),i=hl(t),a=cl(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),fl(t,a),dl(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ha(),n=hl(t),i=cl(r,n);i.tag=2,e!=null&&(i.callback=e),fl(t,i),dl(t,n,r)}};function KF(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Bd(r,n)||!Bd(i,a):!0}function gN(t,e,r){var n=!1,i=wl,a=e.contextType;return typeof a=="object"&&a!==null?a=Ua(a):(i=Yi(e)?Fu:pi.current,n=e.contextTypes,a=(n=n!=null)?pf(t,i):wl),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function ZF(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Wm.enqueueReplaceState(e,e.state,null)}function wE(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=vN,QC(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ua(a):(a=Yi(e)?Fu:pi.current,i.context=pf(t,a)),jd(t,r,i,n),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Ig(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wm.enqueueReplaceState(i,i.state,null),jd(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var Q0=Array.isArray;function Ih(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Le(309));var n=r.stateNode}if(!n)throw Error(Le(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=n.refs;o===vN&&(o=n.refs={}),a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Le(284));if(!r._owner)throw Error(Le(290,t))}return t}function J0(t,e){if(t.type!=="textarea")throw Error(Le(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function mN(t){function e(y,m){if(t){var g=y.lastEffect;g!==null?(g.nextEffect=m,y.lastEffect=m):y.firstEffect=y.lastEffect=m,m.nextEffect=null,m.flags=8}}function r(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=Cl(y,m),y.index=0,y.sibling=null,y}function a(y,m,g){return y.index=g,t?(g=y.alternate,g!==null?(g=g.index,g<m?(y.flags=2,m):g):(y.flags=2,m)):m}function o(y){return t&&y.alternate===null&&(y.flags=2),y}function s(y,m,g,x){return m===null||m.tag!==6?(m=g1(g,y.mode,x),m.return=y,m):(m=i(m,g),m.return=y,m)}function c(y,m,g,x){return m!==null&&m.elementType===g.type?(x=i(m,g.props),x.ref=Ih(y,m,g),x.return=y,x):(x=eg(g.type,g.key,g.props,null,y.mode,x),x.ref=Ih(y,m,g),x.return=y,x)}function l(y,m,g,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=m1(g,y.mode,x),m.return=y,m):(m=i(m,g.children||[]),m.return=y,m)}function u(y,m,g,x,b){return m===null||m.tag!==7?(m=rf(g,y.mode,x,b),m.return=y,m):(m=i(m,g),m.return=y,m)}function f(y,m,g){if(typeof m=="string"||typeof m=="number")return m=g1(""+m,y.mode,g),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ed:return g=eg(m.type,m.key,m.props,null,y.mode,g),g.ref=Ih(y,null,m),g.return=y,g;case vu:return m=m1(m,y.mode,g),m.return=y,m}if(Q0(m)||Ah(m))return m=rf(m,y.mode,g,null),m.return=y,m;J0(y,m)}return null}function h(y,m,g,x){var b=m!==null?m.key:null;if(typeof g=="string"||typeof g=="number")return b!==null?null:s(y,m,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ed:return g.key===b?g.type===Zs?u(y,m,g.props.children,x,b):c(y,m,g,x):null;case vu:return g.key===b?l(y,m,g,x):null}if(Q0(g)||Ah(g))return b!==null?null:u(y,m,g,x,null);J0(y,g)}return null}function d(y,m,g,x,b){if(typeof x=="string"||typeof x=="number")return y=y.get(g)||null,s(m,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ed:return y=y.get(x.key===null?g:x.key)||null,x.type===Zs?u(m,y,x.props.children,b,x.key):c(m,y,x,b);case vu:return y=y.get(x.key===null?g:x.key)||null,l(m,y,x,b)}if(Q0(x)||Ah(x))return y=y.get(g)||null,u(m,y,x,b,null);J0(m,x)}return null}function p(y,m,g,x){for(var b=null,S=null,w=m,A=m=0,C=null;w!==null&&A<g.length;A++){w.index>A?(C=w,w=null):C=w.sibling;var O=h(y,w,g[A],x);if(O===null){w===null&&(w=C);break}t&&w&&O.alternate===null&&e(y,w),m=a(O,m,A),S===null?b=O:S.sibling=O,S=O,w=C}if(A===g.length)return r(y,w),b;if(w===null){for(;A<g.length;A++)w=f(y,g[A],x),w!==null&&(m=a(w,m,A),S===null?b=w:S.sibling=w,S=w);return b}for(w=n(y,w);A<g.length;A++)C=d(w,y,A,g[A],x),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?A:C.key),m=a(C,m,A),S===null?b=C:S.sibling=C,S=C);return t&&w.forEach(function(P){return e(y,P)}),b}function v(y,m,g,x){var b=Ah(g);if(typeof b!="function")throw Error(Le(150));if(g=b.call(g),g==null)throw Error(Le(151));for(var S=b=null,w=m,A=m=0,C=null,O=g.next();w!==null&&!O.done;A++,O=g.next()){w.index>A?(C=w,w=null):C=w.sibling;var P=h(y,w,O.value,x);if(P===null){w===null&&(w=C);break}t&&w&&P.alternate===null&&e(y,w),m=a(P,m,A),S===null?b=P:S.sibling=P,S=P,w=C}if(O.done)return r(y,w),b;if(w===null){for(;!O.done;A++,O=g.next())O=f(y,O.value,x),O!==null&&(m=a(O,m,A),S===null?b=O:S.sibling=O,S=O);return b}for(w=n(y,w);!O.done;A++,O=g.next())O=d(w,y,A,O.value,x),O!==null&&(t&&O.alternate!==null&&w.delete(O.key===null?A:O.key),m=a(O,m,A),S===null?b=O:S.sibling=O,S=O);return t&&w.forEach(function(I){return e(y,I)}),b}return function(y,m,g,x){var b=typeof g=="object"&&g!==null&&g.type===Zs&&g.key===null;b&&(g=g.props.children);var S=typeof g=="object"&&g!==null;if(S)switch(g.$$typeof){case ed:e:{for(S=g.key,b=m;b!==null;){if(b.key===S){switch(b.tag){case 7:if(g.type===Zs){r(y,b.sibling),m=i(b,g.props.children),m.return=y,y=m;break e}break;default:if(b.elementType===g.type){r(y,b.sibling),m=i(b,g.props),m.ref=Ih(y,b,g),m.return=y,y=m;break e}}r(y,b);break}else e(y,b);b=b.sibling}g.type===Zs?(m=rf(g.props.children,y.mode,x,g.key),m.return=y,y=m):(x=eg(g.type,g.key,g.props,null,y.mode,x),x.ref=Ih(y,m,g),x.return=y,y=x)}return o(y);case vu:e:{for(b=g.key;m!==null;){if(m.key===b)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){r(y,m.sibling),m=i(m,g.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else e(y,m);m=m.sibling}m=m1(g,y.mode,x),m.return=y,y=m}return o(y)}if(typeof g=="string"||typeof g=="number")return g=""+g,m!==null&&m.tag===6?(r(y,m.sibling),m=i(m,g),m.return=y,y=m):(r(y,m),m=g1(g,y.mode,x),m.return=y,y=m),o(y);if(Q0(g))return p(y,m,g,x);if(Ah(g))return v(y,m,g,x);if(S&&J0(y,g),typeof g>"u"&&!b)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Le(152,Xc(y.type)||"Component"))}return r(y,m)}}var Fg=mN(!0),yN=mN(!1),kp={},Uo=kl(kp),$d=kl(kp),Vd=kl(kp);function yu(t){if(t===kp)throw Error(Le(174));return t}function AE(t,e){switch(Kr(Vd,e),Kr($d,t),Kr(Uo,kp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uE(e,t)}Rr(Uo),Kr(Uo,e)}function gf(){Rr(Uo),Rr($d),Rr(Vd)}function QF(t){yu(Vd.current);var e=yu(Uo.current),r=uE(e,t.type);e!==r&&(Kr($d,t),Kr(Uo,r))}function JC(t){$d.current===t&&(Rr(Uo),Rr($d))}var qr=kl(0);function kg(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xs=null,rl=null,jo=!1;function _N(t,e){var r=Ma(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function JF(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function CE(t){if(jo){var e=rl;if(e){var r=e;if(!JF(t,e)){if(e=Zc(r.nextSibling),!e||!JF(t,e)){t.flags=t.flags&-1025|2,jo=!1,xs=t;return}_N(xs,r)}xs=t,rl=Zc(e.firstChild)}else t.flags=t.flags&-1025|2,jo=!1,xs=t}}function ek(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xs=t}function ev(t){if(t!==xs)return!1;if(!jo)return ek(t),jo=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!xE(e,t.memoizedProps))for(e=rl;e;)_N(t,e),e=Zc(e.nextSibling);if(ek(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){rl=Zc(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}rl=null}}else rl=xs?Zc(t.stateNode.nextSibling):null;return!0}function h1(){rl=xs=null,jo=!1}var Jc=[];function eT(){for(var t=0;t<Jc.length;t++)Jc[t]._workInProgressVersionPrimary=null;Jc.length=0}var md=zu.ReactCurrentDispatcher,Na=zu.ReactCurrentBatchConfig,Gd=0,on=null,fi=null,Zn=null,Dg=!1,yd=!1;function $i(){throw Error(Le(321))}function tT(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Da(t[r],e[r]))return!1;return!0}function rT(t,e,r,n,i,a){if(Gd=a,on=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,md.current=t===null||t.memoizedState===null?Wq:zq,t=r(n,i),yd){a=0;do{if(yd=!1,!(25>a))throw Error(Le(301));a+=1,Zn=fi=null,e.updateQueue=null,md.current=Hq,t=r(n,i)}while(yd)}if(md.current=Ng,e=fi!==null&&fi.next!==null,Gd=0,Zn=fi=on=null,Dg=!1,e)throw Error(Le(300));return t}function _u(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?on.memoizedState=Zn=t:Zn=Zn.next=t,Zn}function Xu(){if(fi===null){var t=on.alternate;t=t!==null?t.memoizedState:null}else t=fi.next;var e=Zn===null?on.memoizedState:Zn.next;if(e!==null)Zn=e,fi=t;else{if(t===null)throw Error(Le(310));fi=t,t={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Zn===null?on.memoizedState=Zn=t:Zn=Zn.next=t}return Zn}function Lo(t,e){return typeof e=="function"?e(t):e}function Fh(t){var e=Xu(),r=e.queue;if(r===null)throw Error(Le(311));r.lastRenderedReducer=t;var n=fi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var s=o=a=null,c=i;do{var l=c.lane;if((Gd&l)===l)s!==null&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===t?c.eagerState:t(n,c.action);else{var u={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};s===null?(o=s=u,a=n):s=s.next=u,on.lanes|=l,Dp|=l}c=c.next}while(c!==null&&c!==i);s===null?a=n:s.next=o,Da(n,e.memoizedState)||(so=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=s,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function kh(t){var e=Xu(),r=e.queue;if(r===null)throw Error(Le(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Da(a,e.memoizedState)||(so=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function tk(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(Gd&t)===t)&&(e._workInProgressVersionPrimary=n,Jc.push(e))),t)return r(e._source);throw Jc.push(e),Error(Le(350))}function xN(t,e,r,n){var i=Ri;if(i===null)throw Error(Le(349));var a=e._getVersion,o=a(e._source),s=md.current,c=s.useState(function(){return tk(i,e,r)}),l=c[1],u=c[0];c=Zn;var f=t.memoizedState,h=f.refs,d=h.getSnapshot,p=f.source;f=f.subscribe;var v=on;return t.memoizedState={refs:h,source:e,subscribe:n},s.useEffect(function(){h.getSnapshot=r,h.setSnapshot=l;var y=a(e._source);if(!Da(o,y)){y=r(e._source),Da(u,y)||(l(y),y=hl(v),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var m=i.entanglements,g=y;0<g;){var x=31-El(g),b=1<<x;m[x]|=y,g&=~b}}},[r,e,n]),s.useEffect(function(){return n(e._source,function(){var y=h.getSnapshot,m=h.setSnapshot;try{m(y(e._source));var g=hl(v);i.mutableReadLanes|=g&i.pendingLanes}catch(x){m(function(){throw x})}})},[e,n]),Da(d,r)&&Da(p,e)&&Da(f,n)||(t={pending:null,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:u},t.dispatch=l=aT.bind(null,on,t),c.queue=t,c.baseQueue=null,u=tk(i,e,r),c.memoizedState=c.baseState=u),u}function bN(t,e,r){var n=Xu();return xN(n,t,e,r)}function Dh(t){var e=_u();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},t=t.dispatch=aT.bind(null,on,t),[e.memoizedState,t]}function Mg(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=on.updateQueue,e===null?(e={lastEffect:null},on.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function rk(t){var e=_u();return t={current:t},e.memoizedState=t}function Lg(){return Xu().memoizedState}function TE(t,e,r,n){var i=_u();on.flags|=t,i.memoizedState=Mg(1|e,r,void 0,n===void 0?null:n)}function nT(t,e,r,n){var i=Xu();n=n===void 0?null:n;var a=void 0;if(fi!==null){var o=fi.memoizedState;if(a=o.destroy,n!==null&&tT(n,o.deps)){Mg(e,r,a,n);return}}on.flags|=t,i.memoizedState=Mg(1|e,r,a,n)}function nk(t,e){return TE(516,4,t,e)}function Bg(t,e){return nT(516,4,t,e)}function SN(t,e){return nT(4,2,t,e)}function EN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wN(t,e,r){return r=r!=null?r.concat([t]):null,nT(4,2,EN.bind(null,e,t),r)}function iT(){}function AN(t,e){var r=Xu();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&tT(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function CN(t,e){var r=Xu();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&tT(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Gq(t,e){var r=vf();ku(98>r?98:r,function(){t(!0)}),ku(97<r?97:r,function(){var n=Na.transition;Na.transition=1;try{t(!1),e()}finally{Na.transition=n}})}function aT(t,e,r){var n=ha(),i=hl(t),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?a.next=a:(a.next=o.next,o.next=a),e.pending=a,o=t.alternate,t===on||o!==null&&o===on)yd=Dg=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,c=o(s,r);if(a.eagerReducer=o,a.eagerState=c,Da(c,s))return}catch{}finally{}dl(t,i,n)}}var Ng={readContext:Ua,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useOpaqueIdentifier:$i,unstable_isNewReconciler:!1},Wq={readContext:Ua,useCallback:function(t,e){return _u().memoizedState=[t,e===void 0?null:e],t},useContext:Ua,useEffect:nk,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,TE(4,2,EN.bind(null,e,t),r)},useLayoutEffect:function(t,e){return TE(4,2,t,e)},useMemo:function(t,e){var r=_u();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=_u();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=aT.bind(null,on,t),[n.memoizedState,t]},useRef:rk,useState:Dh,useDebugValue:iT,useDeferredValue:function(t){var e=Dh(t),r=e[0],n=e[1];return nk(function(){var i=Na.transition;Na.transition=1;try{n(t)}finally{Na.transition=i}},[t]),r},useTransition:function(){var t=Dh(!1),e=t[0];return t=Gq.bind(null,t[1]),rk(t),[t,e]},useMutableSource:function(t,e,r){var n=_u();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},xN(n,t,e,r)},useOpaqueIdentifier:function(){if(jo){var t=!1,e=Bq(function(){throw t||(t=!0,r("r:"+(u1++).toString(36))),Error(Le(355))}),r=Dh(e)[1];return!(on.mode&2)&&(on.flags|=516,Mg(5,function(){r("r:"+(u1++).toString(36))},void 0,null)),e}return e="r:"+(u1++).toString(36),Dh(e),e},unstable_isNewReconciler:!1},zq={readContext:Ua,useCallback:AN,useContext:Ua,useEffect:Bg,useImperativeHandle:wN,useLayoutEffect:SN,useMemo:CN,useReducer:Fh,useRef:Lg,useState:function(){return Fh(Lo)},useDebugValue:iT,useDeferredValue:function(t){var e=Fh(Lo),r=e[0],n=e[1];return Bg(function(){var i=Na.transition;Na.transition=1;try{n(t)}finally{Na.transition=i}},[t]),r},useTransition:function(){var t=Fh(Lo)[0];return[Lg().current,t]},useMutableSource:bN,useOpaqueIdentifier:function(){return Fh(Lo)[0]},unstable_isNewReconciler:!1},Hq={readContext:Ua,useCallback:AN,useContext:Ua,useEffect:Bg,useImperativeHandle:wN,useLayoutEffect:SN,useMemo:CN,useReducer:kh,useRef:Lg,useState:function(){return kh(Lo)},useDebugValue:iT,useDeferredValue:function(t){var e=kh(Lo),r=e[0],n=e[1];return Bg(function(){var i=Na.transition;Na.transition=1;try{n(t)}finally{Na.transition=i}},[t]),r},useTransition:function(){var t=kh(Lo)[0];return[Lg().current,t]},useMutableSource:bN,useOpaqueIdentifier:function(){return kh(Lo)[0]},unstable_isNewReconciler:!1},Xq=zu.ReactCurrentOwner,so=!1;function Vi(t,e,r,n){e.child=t===null?yN(e,null,r,n):Fg(e,t.child,r,n)}function ik(t,e,r,n,i){r=r.render;var a=e.ref;return Qc(e,i),n=rT(t,e,r,n,a,i),t!==null&&!so?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,bs(t,e,i)):(e.flags|=1,Vi(t,e,n,i),e.child)}function ak(t,e,r,n,i,a){if(t===null){var o=r.type;return typeof o=="function"&&!fT(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,TN(t,e,o,n,i,a)):(t=eg(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,!(i&a)&&(i=o.memoizedProps,r=r.compare,r=r!==null?r:Bd,r(i,n)&&t.ref===e.ref)?bs(t,e,a):(e.flags|=1,t=Cl(o,n),t.ref=e.ref,t.return=e,e.child=t)}function TN(t,e,r,n,i,a){if(t!==null&&Bd(t.memoizedProps,n)&&t.ref===e.ref)if(so=!1,(a&i)!==0)t.flags&16384&&(so=!0);else return e.lanes=t.lanes,bs(t,e,a);return OE(t,e,r,n,a)}function d1(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},rv(e,r);else if(r&1073741824)e.memoizedState={baseLanes:0},rv(e,a!==null?a.baseLanes:r);else return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},rv(e,t),null;else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,rv(e,n);return Vi(t,e,i,r),e.child}function ON(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function OE(t,e,r,n,i){var a=Yi(r)?Fu:pi.current;return a=pf(e,a),Qc(e,i),r=rT(t,e,r,n,a,i),t!==null&&!so?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,bs(t,e,i)):(e.flags|=1,Vi(t,e,r,i),e.child)}function ok(t,e,r,n,i){if(Yi(r)){var a=!0;qv(e)}else a=!1;if(Qc(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),gN(e,r,n),wE(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=Ua(l):(l=Yi(r)?Fu:pi.current,l=pf(e,l));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||c!==l)&&ZF(e,o,n,l),Xs=!1;var h=e.memoizedState;o.state=h,jd(e,n,o,i),c=e.memoizedState,s!==n||h!==c||Xi.current||Xs?(typeof u=="function"&&(Ig(e,r,u,n),c=e.memoizedState),(s=Xs||KF(e,r,s,n,h,c,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=l,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{o=e.stateNode,pN(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:no(e.type,s),o.props=l,f=e.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ua(c):(c=Yi(r)?Fu:pi.current,c=pf(e,c));var d=r.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==c)&&ZF(e,o,n,c),Xs=!1,h=e.memoizedState,o.state=h,jd(e,n,o,i);var p=e.memoizedState;s!==f||h!==p||Xi.current||Xs?(typeof d=="function"&&(Ig(e,r,d,n),p=e.memoizedState),(l=Xs||KF(e,r,l,n,h,p,c))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),n=!1)}return PE(t,e,r,n,a,i)}function PE(t,e,r,n,i,a){ON(t,e);var o=(e.flags&64)!==0;if(!n&&!o)return i&&zF(e,r,!1),bs(t,e,a);n=e.stateNode,Xq.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Fg(e,t.child,null,a),e.child=Fg(e,null,s,a)):Vi(t,e,s,a),e.memoizedState=n.state,i&&zF(e,r,!0),e.child}function sk(t){var e=t.stateNode;e.pendingContext?WF(t,e.pendingContext,e.pendingContext!==e.context):e.context&&WF(t,e.context,!1),AE(t,e.containerInfo)}var tv={dehydrated:null,retryLane:0};function lk(t,e,r){var n=e.pendingProps,i=qr.current,a=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),Kr(qr,i&1),t===null?(n.fallback!==void 0&&CE(e),t=n.children,i=n.fallback,a?(t=uk(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=tv,t):typeof n.unstable_expectedLoadTime=="number"?(t=uk(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=tv,e.lanes=33554432,t):(r=hT({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?a?(n=fk(t,e,n.children,n.fallback,r),a=e.child,i=t.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=t.childLanes&~r,e.memoizedState=tv,n):(r=ck(t,e,n.children,r),e.memoizedState=null,r):a?(n=fk(t,e,n.children,n.fallback,r),a=e.child,i=t.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=t.childLanes&~r,e.memoizedState=tv,n):(r=ck(t,e,n.children,r),e.memoizedState=null,r)}function uk(t,e,r,n){var i=t.mode,a=t.child;return e={mode:"hidden",children:e},!(i&2)&&a!==null?(a.childLanes=0,a.pendingProps=e):a=hT(e,i,0,null),r=rf(r,i,n,null),a.return=t,r.return=t,a.sibling=r,t.child=a,r}function ck(t,e,r,n){var i=t.child;return t=i.sibling,r=Cl(i,{mode:"visible",children:r}),!(e.mode&2)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function fk(t,e,r,n,i){var a=e.mode,o=t.child;t=o.sibling;var s={mode:"hidden",children:r};return!(a&2)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=s,o=r.lastEffect,o!==null?(e.firstEffect=r.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):r=Cl(o,s),t!==null?n=Cl(t,n):(n=rf(n,a,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function hk(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dN(t.return,e)}function p1(t,e,r,n,i,a){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=a)}function dk(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Vi(t,e,n.children,r),n=qr.current,n&2)n=n&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hk(t,r);else if(t.tag===19)hk(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Kr(qr,n),!(e.mode&2))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&kg(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),p1(e,!1,i,r,a,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&kg(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}p1(e,!0,r,null,a,e.lastEffect);break;case"together":p1(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function bs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Dp|=e.lanes,r&e.childLanes){if(t!==null&&e.child!==t.child)throw Error(Le(153));if(e.child!==null){for(t=e.child,r=Cl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Cl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var PN,RE,RN,IN;PN=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};RE=function(){};RN=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,yu(Uo.current);var a=null;switch(r){case"input":i=nE(t,i),n=nE(t,n),a=[];break;case"option":i=oE(t,i),n=oE(t,n),a=[];break;case"select":i=Lr({},i,{value:void 0}),n=Lr({},n,{value:void 0}),a=[];break;case"textarea":i=sE(t,i),n=sE(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ag)}cE(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Rd.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(a=a||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Tr("scroll",t),a||s===c||(a=[])):typeof c=="object"&&c!==null&&c.$$typeof===FC?c.toString():(a=a||[]).push(l,c))}r&&(a=a||[]).push("style",r);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};IN=function(t,e,r,n){r!==n&&(e.flags|=4)};function Mh(t,e){if(!jo)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Yq(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Yi(e.type)&&Tg(),null;case 3:return gf(),Rr(Xi),Rr(pi),eT(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ev(e)?e.flags|=4:n.hydrate||(e.flags|=256)),RE(e),null;case 5:JC(e);var i=yu(Vd.current);if(r=e.type,t!==null&&e.stateNode!=null)RN(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(Le(166));return null}if(t=yu(Uo.current),ev(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[tl]=e,n[Cg]=a,r){case"dialog":Tr("cancel",n),Tr("close",n);break;case"iframe":case"object":case"embed":Tr("load",n);break;case"video":case"audio":for(t=0;t<rd.length;t++)Tr(rd[t],n);break;case"source":Tr("error",n);break;case"img":case"image":case"link":Tr("error",n),Tr("load",n);break;case"details":Tr("toggle",n);break;case"input":dF(n,a),Tr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Tr("invalid",n);break;case"textarea":vF(n,a),Tr("invalid",n)}cE(r,a),t=null;for(var o in a)a.hasOwnProperty(o)&&(i=a[o],o==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):Rd.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Tr("scroll",n));switch(r){case"input":Y0(n),pF(n,a,!0);break;case"textarea":Y0(n),gF(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ag)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===lE.html&&(t=w4(r)),t===lE.html?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[tl]=e,t[Cg]=n,PN(t,e,!1,!1),e.stateNode=t,o=fE(r,n),r){case"dialog":Tr("cancel",t),Tr("close",t),i=n;break;case"iframe":case"object":case"embed":Tr("load",t),i=n;break;case"video":case"audio":for(i=0;i<rd.length;i++)Tr(rd[i],t);i=n;break;case"source":Tr("error",t),i=n;break;case"img":case"image":case"link":Tr("error",t),Tr("load",t),i=n;break;case"details":Tr("toggle",t),i=n;break;case"input":dF(t,n),i=nE(t,n),Tr("invalid",t);break;case"option":i=oE(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Lr({},n,{value:void 0}),Tr("invalid",t);break;case"textarea":vF(t,n),i=sE(t,n),Tr("invalid",t);break;default:i=n}cE(r,i);var s=i;for(a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="style"?T4(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&A4(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Id(t,c):typeof c=="number"&&Id(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Rd.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Tr("scroll",t):c!=null&&CC(t,a,c,o))}switch(r){case"input":Y0(t),pF(t,n,!1);break;case"textarea":Y0(t),gF(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Sl(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Yc(t,!!n.multiple,a,!1):n.defaultValue!=null&&Yc(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ag)}iN(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)IN(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Le(166));r=yu(Vd.current),yu(Uo.current),ev(e)?(n=e.stateNode,r=e.memoizedProps,n[tl]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tl]=e,e.stateNode=n)}return null;case 13:return Rr(qr),n=e.memoizedState,e.flags&64?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&ev(e):r=t.memoizedState!==null,n&&!r&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||qr.current&1?Jn===0&&(Jn=3):((Jn===0||Jn===3)&&(Jn=4),Ri===null||!(Dp&134217727)&&!(Bf&134217727)||ef(Ri,di))),(n||r)&&(e.flags|=4),null);case 4:return gf(),RE(e),t===null&&tN(e.stateNode.containerInfo),null;case 10:return ZC(e),null;case 17:return Yi(e.type)&&Tg(),null;case 19:if(Rr(qr),n=e.memoizedState,n===null)return null;if(a=(e.flags&64)!==0,o=n.rendering,o===null)if(a)Mh(n,!1);else{if(Jn!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(o=kg(t),o!==null){for(e.flags|=64,Mh(n,!1),a=o.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Kr(qr,qr.current&1|2),e.child}t=t.sibling}n.tail!==null&&hi()>LE&&(e.flags|=64,a=!0,Mh(n,!1),e.lanes=33554432)}else{if(!a)if(t=kg(o),t!==null){if(e.flags|=64,a=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mh(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!jo)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*hi()-n.renderingStartTime>LE&&r!==1073741824&&(e.flags|=64,a=!0,Mh(n,!1),e.lanes=33554432);n.isBackwards?(o.sibling=e.child,e.child=o):(r=n.last,r!==null?r.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=hi(),r.sibling=null,e=qr.current,Kr(qr,a?e&1|2:e&1),r):null;case 23:case 24:return cT(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Le(156,e.tag))}function qq(t){switch(t.tag){case 1:Yi(t.type)&&Tg();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(gf(),Rr(Xi),Rr(pi),eT(),e=t.flags,e&64)throw Error(Le(285));return t.flags=e&-4097|64,t;case 5:return JC(t),null;case 13:return Rr(qr),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Rr(qr),null;case 4:return gf(),null;case 10:return ZC(t),null;case 23:case 24:return cT(),null;default:return null}}function oT(t,e){try{var r="",n=e;do r+=PY(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i}}function IE(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Kq=typeof WeakMap=="function"?WeakMap:Map;function FN(t,e,r){r=cl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){jg||(jg=!0,BE=n),IE(t,e)},r}function kN(t,e,r){r=cl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return IE(t,e),n(i)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this),IE(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}var Zq=typeof WeakSet=="function"?WeakSet:Set;function pk(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){pl(t,r)}else e.current=null}function Qq(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:no(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&XC(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Le(163))}function Jq(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,i&4&&i&1&&(VN(r,t),sK(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:no(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&qF(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}qF(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&iN(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&B4(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Le(163))}function vk(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=C4("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function gk(t,e){if(Au&&typeof Au.onCommitFiberUnmount=="function")try{Au.onCommitFiberUnmount(YC,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)VN(e,r);else{n=e;try{i()}catch(a){pl(n,a)}}r=r.next}while(r!==t)}break;case 1:if(pk(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){pl(e,a)}break;case 5:pk(e);break;case 4:DN(t,e)}}function mk(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function yk(t){return t.tag===5||t.tag===3||t.tag===4}function _k(t){e:{for(var e=t.return;e!==null;){if(yk(e))break e;e=e.return}throw Error(Le(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(Le(161))}r.flags&16&&(Id(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||yk(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?FE(t,r,e):kE(t,r,e)}function FE(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ag));else if(n!==4&&(t=t.child,t!==null))for(FE(t,e,r),t=t.sibling;t!==null;)FE(t,e,r),t=t.sibling}function kE(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(kE(t,e,r),t=t.sibling;t!==null;)kE(t,e,r),t=t.sibling}function DN(t,e){for(var r=e,n=!1,i,a;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(Le(160));switch(i=n.stateNode,n.tag){case 5:a=!1;break e;case 3:i=i.containerInfo,a=!0;break e;case 4:i=i.containerInfo,a=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var o=t,s=r,c=s;;)if(gk(o,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}a?(o=i,s=r.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(gk(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function v1(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,a!==null){for(r[Cg]=n,t==="input"&&n.type==="radio"&&n.name!=null&&S4(r,n),fE(t,i),e=fE(t,n),i=0;i<a.length;i+=2){var o=a[i],s=a[i+1];o==="style"?T4(r,s):o==="dangerouslySetInnerHTML"?A4(r,s):o==="children"?Id(r,s):CC(r,o,s,e)}switch(t){case"input":iE(r,n);break;case"textarea":E4(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,a=n.value,a!=null?Yc(r,!!n.multiple,a,!1):t!==!!n.multiple&&(n.defaultValue!=null?Yc(r,!!n.multiple,n.defaultValue,!0):Yc(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Le(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,B4(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(uT=hi(),vk(e.child,!0)),xk(e);return;case 19:xk(e);return;case 17:return;case 23:case 24:vk(e,e.memoizedState!==null);return}throw Error(Le(163))}function xk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Zq),e.forEach(function(n){var i=cK.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function eK(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var tK=Math.ceil,Ug=zu.ReactCurrentDispatcher,sT=zu.ReactCurrentOwner,yt=0,Ri=null,wn=null,di=0,Du=0,DE=kl(0),Jn=0,zm=null,Lf=0,Dp=0,Bf=0,lT=0,ME=null,uT=0,LE=1/0;function Nf(){LE=hi()+500}var Ze=null,jg=!1,BE=null,Bo=null,Al=!1,_d=null,nd=90,NE=[],UE=[],ws=null,xd=0,jE=null,Zv=-1,ys=0,Qv=0,bd=null,Jv=!1;function ha(){return yt&48?hi():Zv!==-1?Zv:Zv=hi()}function hl(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return vf()===99?1:2;if(ys===0&&(ys=Lf),Vq.transition!==0){Qv!==0&&(Qv=ME!==null?ME.pendingLanes:0),t=ys;var e=4186112&~Qv;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=vf(),yt&4&&t===98?t=Eg(12,ys):(t=zY(t),t=Eg(t,ys)),t}function dl(t,e,r){if(50<xd)throw xd=0,jE=null,Error(Le(185));if(t=Hm(t,e),t===null)return null;Nm(t,e,r),t===Ri&&(Bf|=e,Jn===4&&ef(t,di));var n=vf();e===1?yt&8&&!(yt&48)?$E(t):(ja(t,r),yt===0&&(Nf(),Yo())):(!(yt&4)||n!==98&&n!==99||(ws===null?ws=new Set([t]):ws.add(t)),ja(t,r)),ME=t}function Hm(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function ja(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-El(o),c=1<<s,l=a[s];if(l===-1){if(!(c&n)||c&i){l=e,Dc(c);var u=Sr;a[s]=10<=u?l+250:6<=u?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);o&=~c}if(n=Md(t,t===Ri?di:0),e=Sr,n===0)r!==null&&(r!==c1&&SE(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==c1&&SE(r)}e===15?(r=$E.bind(null,t),ms===null?(ms=[r],Kv=qC(Gm,hN)):ms.push(r),r=c1):e===14?r=Ud(99,$E.bind(null,t)):(r=HY(e),r=Ud(r,MN.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function MN(t){if(Zv=-1,Qv=ys=0,yt&48)throw Error(Le(327));var e=t.callbackNode;if(Dl()&&t.callbackNode!==e)return null;var r=Md(t,t===Ri?di:0);if(r===0)return null;var n=r,i=yt;yt|=16;var a=UN();(Ri!==t||di!==n)&&(Nf(),tf(t,n));do try{iK();break}catch(s){NN(t,s)}while(1);if(KC(),Ug.current=a,yt=i,wn!==null?n=0:(Ri=null,di=0,n=Jn),Lf&Bf)tf(t,0);else if(n!==0){if(n===2&&(yt|=64,t.hydrate&&(t.hydrate=!1,XC(t.containerInfo)),r=W4(t),r!==0&&(n=id(t,r))),n===1)throw e=zm,tf(t,0),ef(t,r),ja(t,hi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(Le(345));case 2:au(t);break;case 3:if(ef(t,r),(r&62914560)===r&&(n=uT+500-hi(),10<n)){if(Md(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ha(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$F(au.bind(null,t),n);break}au(t);break;case 4:if(ef(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var o=31-El(r);a=1<<o,o=n[o],o>i&&(i=o),r&=~a}if(r=i,r=hi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tK(r/1960))-r,10<r){t.timeoutHandle=$F(au.bind(null,t),r);break}au(t);break;case 5:au(t);break;default:throw Error(Le(329))}}return ja(t,hi()),t.callbackNode===e?MN.bind(null,t):null}function ef(t,e){for(e&=~lT,e&=~Bf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-El(e),n=1<<r;t[r]=-1,e&=~n}}function $E(t){if(yt&48)throw Error(Le(327));if(Dl(),t===Ri&&t.expiredLanes&di){var e=di,r=id(t,e);Lf&Bf&&(e=Md(t,e),r=id(t,e))}else e=Md(t,0),r=id(t,e);if(t.tag!==0&&r===2&&(yt|=64,t.hydrate&&(t.hydrate=!1,XC(t.containerInfo)),e=W4(t),e!==0&&(r=id(t,e))),r===1)throw r=zm,tf(t,0),ef(t,e),ja(t,hi()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,au(t),ja(t,hi()),null}function rK(){if(ws!==null){var t=ws;ws=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ja(e,hi())})}Yo()}function LN(t,e){var r=yt;yt|=1;try{return t(e)}finally{yt=r,yt===0&&(Nf(),Yo())}}function BN(t,e){var r=yt;yt&=-2,yt|=8;try{return t(e)}finally{yt=r,yt===0&&(Nf(),Yo())}}function rv(t,e){Kr(DE,Du),Du|=e,Lf|=e}function cT(){Du=DE.current,Rr(DE)}function tf(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Lq(r)),wn!==null)for(r=wn.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Tg();break;case 3:gf(),Rr(Xi),Rr(pi),eT();break;case 5:JC(n);break;case 4:gf();break;case 13:Rr(qr);break;case 19:Rr(qr);break;case 10:ZC(n);break;case 23:case 24:cT()}r=r.return}Ri=t,wn=Cl(t.current,null),di=Du=Lf=e,Jn=0,zm=null,lT=Bf=Dp=0}function NN(t,e){do{var r=wn;try{if(KC(),md.current=Ng,Dg){for(var n=on.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Dg=!1}if(Gd=0,Zn=fi=on=null,yd=!1,sT.current=null,r===null||r.return===null){Jn=1,zm=e,wn=null;break}e:{var a=t,o=r.return,s=r,c=e;if(e=di,s.flags|=2048,s.firstEffect=s.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c;if(!(s.mode&2)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=(qr.current&1)!==0,h=o;do{var d;if(d=h.tag===13){var p=h.memoizedState;if(p!==null)d=p.dehydrated!==null;else{var v=h.memoizedProps;d=v.fallback===void 0?!1:v.unstable_avoidThisFallback!==!0?!0:!f}}if(d){var y=h.updateQueue;if(y===null){var m=new Set;m.add(l),h.updateQueue=m}else y.add(l);if(!(h.mode&2)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var g=cl(-1,1);g.tag=2,fl(s,g)}s.lanes|=1;break e}c=void 0,s=e;var x=a.pingCache;if(x===null?(x=a.pingCache=new Kq,c=new Set,x.set(l,c)):(c=x.get(l),c===void 0&&(c=new Set,x.set(l,c))),!c.has(s)){c.add(s);var b=uK.bind(null,a,l,s);l.then(b,b)}h.flags|=4096,h.lanes=e;break e}h=h.return}while(h!==null);c=Error((Xc(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Jn!==5&&(Jn=2),c=oT(c,s),h=o;do{switch(h.tag){case 3:a=c,h.flags|=4096,e&=-e,h.lanes|=e;var S=FN(h,a,e);YF(h,S);break e;case 1:a=c;var w=h.type,A=h.stateNode;if(!(h.flags&64)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Bo===null||!Bo.has(A)))){h.flags|=4096,e&=-e,h.lanes|=e;var C=kN(h,a,e);YF(h,C);break e}}h=h.return}while(h!==null)}$N(r)}catch(O){e=O,wn===r&&r!==null&&(wn=r=r.return);continue}break}while(1)}function UN(){var t=Ug.current;return Ug.current=Ng,t===null?Ng:t}function id(t,e){var r=yt;yt|=16;var n=UN();Ri===t&&di===e||tf(t,e);do try{nK();break}catch(i){NN(t,i)}while(1);if(KC(),yt=r,Ug.current=n,wn!==null)throw Error(Le(261));return Ri=null,di=0,Jn}function nK(){for(;wn!==null;)jN(wn)}function iK(){for(;wn!==null&&!Uq();)jN(wn)}function jN(t){var e=GN(t.alternate,t,Du);t.memoizedProps=t.pendingProps,e===null?$N(t):wn=e,sT.current=null}function $N(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&2048){if(r=qq(e),r!==null){r.flags&=2047,wn=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(r=Yq(r,e,Du),r!==null){wn=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||Du&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){wn=e;return}wn=e=t}while(e!==null);Jn===0&&(Jn=5)}function au(t){var e=vf();return ku(99,aK.bind(null,t,e)),null}function aK(t,e){do Dl();while(_d!==null);if(yt&48)throw Error(Le(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Le(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,s=t.expirationTimes;0<a;){var c=31-El(a),l=1<<c;i[c]=0,o[c]=-1,s[c]=-1,a&=~l}if(ws!==null&&!(n&24)&&ws.has(t)&&ws.delete(t),t===Ri&&(wn=Ri=null,di=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=yt,yt|=32,sT.current=null,s1=Hv,o=DF(),mE(o)){if("selectionStart"in o)s={start:o.selectionStart,end:o.selectionEnd};else e:if(s=(s=o.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&l.rangeCount!==0){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var u=0,f=-1,h=-1,d=0,p=0,v=o,y=null;t:for(;;){for(var m;v!==s||a!==0&&v.nodeType!==3||(f=u+a),v!==c||l!==0&&v.nodeType!==3||(h=u+l),v.nodeType===3&&(u+=v.nodeValue.length),(m=v.firstChild)!==null;)y=v,v=m;for(;;){if(v===o)break t;if(y===s&&++d===a&&(f=u),y===c&&++p===l&&(h=u),(m=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=m}s=f===-1||h===-1?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;l1={focusedElem:o,selectionRange:s},Hv=!1,bd=null,Jv=!1,Ze=n;do try{oK()}catch(O){if(Ze===null)throw Error(Le(330));pl(Ze,O),Ze=Ze.nextEffect}while(Ze!==null);bd=null,Ze=n;do try{for(o=t;Ze!==null;){var g=Ze.flags;if(g&16&&Id(Ze.stateNode,""),g&128){var x=Ze.alternate;if(x!==null){var b=x.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(g&1038){case 2:_k(Ze),Ze.flags&=-3;break;case 6:_k(Ze),Ze.flags&=-3,v1(Ze.alternate,Ze);break;case 1024:Ze.flags&=-1025;break;case 1028:Ze.flags&=-1025,v1(Ze.alternate,Ze);break;case 4:v1(Ze.alternate,Ze);break;case 8:s=Ze,DN(o,s);var S=s.alternate;mk(s),S!==null&&mk(S)}Ze=Ze.nextEffect}}catch(O){if(Ze===null)throw Error(Le(330));pl(Ze,O),Ze=Ze.nextEffect}while(Ze!==null);if(b=l1,x=DF(),g=b.focusedElem,o=b.selectionRange,x!==g&&g&&g.ownerDocument&&Q4(g.ownerDocument.documentElement,g)){for(o!==null&&mE(g)&&(x=o.start,b=o.end,b===void 0&&(b=x),"selectionStart"in g?(g.selectionStart=x,g.selectionEnd=Math.min(b,g.value.length)):(b=(x=g.ownerDocument||document)&&x.defaultView||window,b.getSelection&&(b=b.getSelection(),s=g.textContent.length,S=Math.min(o.start,s),o=o.end===void 0?S:Math.min(o.end,s),!b.extend&&S>o&&(s=o,o=S,S=s),s=kF(g,S),a=kF(g,o),s&&a&&(b.rangeCount!==1||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&(x=x.createRange(),x.setStart(s.node,s.offset),b.removeAllRanges(),S>o?(b.addRange(x),b.extend(a.node,a.offset)):(x.setEnd(a.node,a.offset),b.addRange(x)))))),x=[],b=g;b=b.parentNode;)b.nodeType===1&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<x.length;g++)b=x[g],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}Hv=!!s1,l1=s1=null,t.current=r,Ze=n;do try{for(g=t;Ze!==null;){var w=Ze.flags;if(w&36&&Jq(g,Ze.alternate,Ze),w&128){x=void 0;var A=Ze.ref;if(A!==null){var C=Ze.stateNode;switch(Ze.tag){case 5:x=C;break;default:x=C}typeof A=="function"?A(x):A.current=x}}Ze=Ze.nextEffect}}catch(O){if(Ze===null)throw Error(Le(330));pl(Ze,O),Ze=Ze.nextEffect}while(Ze!==null);Ze=null,$q(),yt=i}else t.current=r;if(Al)Al=!1,_d=t,nd=e;else for(Ze=n;Ze!==null;)e=Ze.nextEffect,Ze.nextEffect=null,Ze.flags&8&&(w=Ze,w.sibling=null,w.stateNode=null),Ze=e;if(n=t.pendingLanes,n===0&&(Bo=null),n===1?t===jE?xd++:(xd=0,jE=t):xd=0,r=r.stateNode,Au&&typeof Au.onCommitFiberRoot=="function")try{Au.onCommitFiberRoot(YC,r,void 0,(r.current.flags&64)===64)}catch{}if(ja(t,hi()),jg)throw jg=!1,t=BE,BE=null,t;return yt&8||Yo(),null}function oK(){for(;Ze!==null;){var t=Ze.alternate;Jv||bd===null||(Ze.flags&8?_F(Ze,bd)&&(Jv=!0):Ze.tag===13&&eK(t,Ze)&&_F(Ze,bd)&&(Jv=!0));var e=Ze.flags;e&256&&Qq(t,Ze),!(e&512)||Al||(Al=!0,Ud(97,function(){return Dl(),null})),Ze=Ze.nextEffect}}function Dl(){if(nd!==90){var t=97<nd?97:nd;return nd=90,ku(t,lK)}return!1}function sK(t,e){NE.push(e,t),Al||(Al=!0,Ud(97,function(){return Dl(),null}))}function VN(t,e){UE.push(e,t),Al||(Al=!0,Ud(97,function(){return Dl(),null}))}function lK(){if(_d===null)return!1;var t=_d;if(_d=null,yt&48)throw Error(Le(331));var e=yt;yt|=32;var r=UE;UE=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(c){if(a===null)throw Error(Le(330));pl(a,c)}}for(r=NE,NE=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var s=i.create;i.destroy=s()}catch(c){if(a===null)throw Error(Le(330));pl(a,c)}}for(s=t.current.firstEffect;s!==null;)t=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=t;return yt=e,Yo(),!0}function bk(t,e,r){e=oT(r,e),e=FN(t,e,1),fl(t,e),e=ha(),t=Hm(t,1),t!==null&&(Nm(t,1,e),ja(t,e))}function pl(t,e){if(t.tag===3)bk(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){bk(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bo===null||!Bo.has(n))){t=oT(e,t);var i=kN(r,t,1);if(fl(r,i),i=ha(),r=Hm(r,1),r!==null)Nm(r,1,i),ja(r,i);else if(typeof n.componentDidCatch=="function"&&(Bo===null||!Bo.has(n)))try{n.componentDidCatch(e,t)}catch{}break}}r=r.return}}function uK(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=ha(),t.pingedLanes|=t.suspendedLanes&r,Ri===t&&(di&r)===r&&(Jn===4||Jn===3&&(di&62914560)===di&&500>hi()-uT?tf(t,0):lT|=r),ja(t,e)}function cK(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?(ys===0&&(ys=Lf),e=Mc(62914560&~ys),e===0&&(e=4194304)):e=vf()===99?1:2:e=1),r=ha(),t=Hm(t,e),t!==null&&(Nm(t,e,r),ja(t,r))}var GN;GN=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Xi.current)so=!0;else if(r&n)so=!!(t.flags&16384);else{switch(so=!1,e.tag){case 3:sk(e),h1();break;case 5:QF(e);break;case 1:Yi(e.type)&&qv(e);break;case 4:AE(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;Kr(Og,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return r&e.child.childLanes?lk(t,e,r):(Kr(qr,qr.current&1),e=bs(t,e,r),e!==null?e.sibling:null);Kr(qr,qr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&64){if(n)return dk(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kr(qr,qr.current),n)break;return null;case 23:case 24:return e.lanes=0,d1(t,e,r)}return bs(t,e,r)}else so=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=pf(e,pi.current),Qc(e,r),i=rT(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yi(n)){var a=!0;qv(e)}else a=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,QC(e);var o=n.getDerivedStateFromProps;typeof o=="function"&&Ig(e,n,o,t),i.updater=Wm,e.stateNode=i,i._reactInternals=e,wE(e,n,t,r),e=PE(null,e,n,!0,a,r)}else e.tag=0,Vi(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=hK(i),t=no(i,t),a){case 0:e=OE(null,e,i,t,r);break e;case 1:e=ok(null,e,i,t,r);break e;case 11:e=ik(null,e,i,t,r);break e;case 14:e=ak(null,e,i,no(i.type,t),n,r);break e}throw Error(Le(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:no(n,i),OE(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:no(n,i),ok(t,e,n,i,r);case 3:if(sk(e),n=e.updateQueue,t===null||n===null)throw Error(Le(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,pN(t,e),jd(e,n,null,r),n=e.memoizedState.element,n===i)h1(),e=bs(t,e,r);else{if(i=e.stateNode,(a=i.hydrate)&&(rl=Zc(e.stateNode.containerInfo.firstChild),xs=e,a=jo=!0),a){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)a=t[i],a._workInProgressVersionPrimary=t[i+1],Jc.push(a);for(r=yN(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Vi(t,e,n,r),h1();e=e.child}return e;case 5:return QF(e),t===null&&CE(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,xE(n,i)?o=null:a!==null&&xE(n,a)&&(e.flags|=16),ON(t,e),Vi(t,e,o,r),e.child;case 6:return t===null&&CE(e),null;case 13:return lk(t,e,r);case 4:return AE(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Fg(e,null,n,r):Vi(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:no(n,i),ik(t,e,n,i,r);case 7:return Vi(t,e,e.pendingProps,r),e.child;case 8:return Vi(t,e,e.pendingProps.children,r),e.child;case 12:return Vi(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value;var s=e.type._context;if(Kr(Og,s._currentValue),s._currentValue=a,o!==null)if(s=o.value,a=Da(s,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(s,a):1073741823)|0,a===0){if(o.children===i.children&&!Xi.current){e=bs(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var l=c.firstContext;l!==null;){if(l.context===n&&l.observedBits&a){s.tag===1&&(l=cl(-1,r&-r),l.tag=2,fl(s,l)),s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),dN(s.return,r),c.lanes|=r;break}l=l.next}}else o=s.tag===10&&s.type===e.type?null:s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vi(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,a=e.pendingProps,n=a.children,Qc(e,r),i=Ua(i,a.unstable_observedBits),n=n(i),e.flags|=1,Vi(t,e,n,r),e.child;case 14:return i=e.type,a=no(i,e.pendingProps),a=no(i.type,a),ak(t,e,i,a,n,r);case 15:return TN(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:no(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Yi(n)?(t=!0,qv(e)):t=!1,Qc(e,r),gN(e,n,i),wE(e,n,i,r),PE(null,e,n,!0,t,r);case 19:return dk(t,e,r);case 23:return d1(t,e,r);case 24:return d1(t,e,r)}throw Error(Le(156,e.tag))};function fK(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(t,e,r,n){return new fK(t,e,r,n)}function fT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hK(t){if(typeof t=="function")return fT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mm)return 11;if(t===Lm)return 14}return 2}function Cl(t,e){var r=t.alternate;return r===null?(r=Ma(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function eg(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")fT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zs:return rf(r.children,i,a,e);case _4:o=8,i|=16;break;case TC:o=8,i|=1;break;case cd:return t=Ma(12,r,e,i|8),t.elementType=cd,t.type=cd,t.lanes=a,t;case fd:return t=Ma(13,r,e,i),t.type=fd,t.elementType=fd,t.lanes=a,t;case _g:return t=Ma(19,r,e,i),t.elementType=_g,t.lanes=a,t;case kC:return hT(r,i,a,e);case rE:return t=Ma(24,r,e,i),t.elementType=rE,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OC:o=10;break e;case PC:o=9;break e;case Mm:o=11;break e;case Lm:o=14;break e;case RC:o=16,n=null;break e;case IC:o=22;break e}throw Error(Le(130,t==null?t:typeof t,""))}return e=Ma(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function rf(t,e,r,n){return t=Ma(7,t,n,e),t.lanes=r,t}function hT(t,e,r,n){return t=Ma(23,t,n,e),t.elementType=kC,t.lanes=r,t}function g1(t,e,r){return t=Ma(6,t,null,e),t.lanes=r,t}function m1(t,e,r){return e=Ma(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dK(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=e1(0),this.expirationTimes=e1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e1(0),this.mutableSourceEagerHydrationData=null}function pK(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $g(t,e,r,n){var i=e.current,a=ha(),o=hl(i);e:if(r){r=r._reactInternals;t:{if(Hu(r)!==r||r.tag!==1)throw Error(Le(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Yi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(Le(171))}if(r.tag===1){var c=r.type;if(Yi(c)){r=oN(r,c,s);break e}}r=s}else r=wl;return e.context===null?e.context=r:e.pendingContext=r,e=cl(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),fl(i,e),dl(i,o,a),o}function y1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function dT(t,e){Sk(t,e),(t=t.alternate)&&Sk(t,e)}function vK(){return null}function pT(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new dK(t,e,r!=null&&r.hydrate===!0),e=Ma(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,QC(e),t[Mf]=r.current,tN(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}pT.prototype.render=function(t){$g(t,this._internalRoot,null,null)};pT.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;$g(null,t,null,function(){e[Mf]=null})};function Mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gK(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new pT(t,0,e?{hydrate:!0}:void 0)}function Xm(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a._internalRoot;if(typeof i=="function"){var s=i;i=function(){var l=y1(o);s.call(l)}}$g(e,o,t,i)}else{if(a=r._reactRootContainer=gK(r,n),o=a._internalRoot,typeof i=="function"){var c=i;i=function(){var l=y1(o);c.call(l)}}BN(function(){$g(e,o,t,i)})}return y1(o)}D4=function(t){if(t.tag===13){var e=ha();dl(t,4,e),dT(t,4)}};NC=function(t){if(t.tag===13){var e=ha();dl(t,67108864,e),dT(t,67108864)}};M4=function(t){if(t.tag===13){var e=ha(),r=hl(t);dl(t,r,e),dT(t,r)}};L4=function(t,e){return e()};hE=function(t,e,r){switch(e){case"input":if(iE(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Vm(n);if(!i)throw Error(Le(90));b4(n),iE(n,i)}}}break;case"textarea":E4(t,r);break;case"select":e=r.value,e!=null&&Yc(t,!!r.multiple,e,!1)}};MC=LN;R4=function(t,e,r,n,i){var a=yt;yt|=4;try{return ku(98,t.bind(null,e,r,n,i))}finally{yt=a,yt===0&&(Nf(),Yo())}};LC=function(){!(yt&49)&&(rK(),Dl())};I4=function(t,e){var r=yt;yt|=2;try{return t(e)}finally{yt=r,yt===0&&(Nf(),Yo())}};function WN(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mp(e))throw Error(Le(200));return pK(t,e,null,r)}var mK={Events:[Fp,jc,Vm,O4,P4,Dl,{current:!1}]},Lh={findFiberByHostInstance:mu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},yK={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k4(t),t===null?null:t.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||vK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nv.isDisabled&&nv.supportsFiber)try{YC=nv.inject(yK),Au=nv}catch{}}$a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mK;$a.createPortal=WN;$a.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Le(188)):Error(Le(268,Object.keys(t)));return t=k4(e),t=t===null?null:t.stateNode,t};$a.flushSync=function(t,e){var r=yt;if(r&48)return t(e);yt|=1;try{if(t)return ku(99,t.bind(null,e))}finally{yt=r,Yo()}};$a.hydrate=function(t,e,r){if(!Mp(e))throw Error(Le(200));return Xm(null,t,e,!0,r)};$a.render=function(t,e,r){if(!Mp(e))throw Error(Le(200));return Xm(null,t,e,!1,r)};$a.unmountComponentAtNode=function(t){if(!Mp(t))throw Error(Le(40));return t._reactRootContainer?(BN(function(){Xm(null,null,t,!1,function(){t._reactRootContainer=null,t[Mf]=null})}),!0):!1};$a.unstable_batchedUpdates=LN;$a.unstable_createPortal=function(t,e){return WN(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};$a.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Mp(r))throw Error(Le(200));if(t==null||t._reactInternals===void 0)throw Error(Le(38));return Xm(t,e,r,!1,n)};$a.version="17.0.2";function zN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zN)}catch(t){console.error(t)}}zN(),v4.exports=$a;var HN=v4.exports;const Mu=gi(HN);const _K="_Title_main_50rff_1",xK="_Title_buttonList_50rff_8",bK="_Title_button_50rff_8",SK="_Title_button_text_50rff_41",EK="_Title_button_custom_50rff_46",wK="_Title_backup_background_50rff_65",Bh={Title_main:_K,Title_buttonList:xK,Title_button:bK,Title_button_text:SK,Title_button_custom:EK,Title_backup_background:wK};function oo(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Tl(t){return!!t&&!!t[Dr]}function Os(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===kK}(t)||Array.isArray(t)||!!t[Pk]||!!(!((e=t.constructor)===null||e===void 0)&&e[Pk])||vT(t)||gT(t))}function Lu(t,e,r){r===void 0&&(r=!1),Uf(t)===0?(r?Object.keys:af)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Uf(t){var e=t[Dr];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:vT(t)?2:gT(t)?3:0}function nf(t,e){return Uf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function AK(t,e){return Uf(t)===2?t.get(e):t[e]}function XN(t,e,r){var n=Uf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function YN(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function vT(t){return IK&&t instanceof Map}function gT(t){return FK&&t instanceof Set}function ou(t){return t.o||t.t}function mT(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=KN(t);delete e[Dr];for(var r=af(e),n=0;n<r.length;n++){var i=r[n],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function yT(t,e){return e===void 0&&(e=!1),_T(t)||Tl(t)||!Os(t)||(Uf(t)>1&&(t.set=t.add=t.clear=t.delete=CK),Object.freeze(t),e&&Lu(t,function(r,n){return yT(n,!0)},!0)),t}function CK(){oo(2)}function _T(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function $o(t){var e=zE[t];return e||oo(18,t),e}function TK(t,e){zE[t]||(zE[t]=e)}function VE(){return Wd}function _1(t,e){e&&($o("Patches"),t.u=[],t.s=[],t.v=e)}function Vg(t){GE(t),t.p.forEach(OK),t.p=null}function GE(t){t===Wd&&(Wd=t.l)}function Ek(t){return Wd={p:[],l:Wd,h:t,m:!0,_:0}}function OK(t){var e=t[Dr];e.i===0||e.i===1?e.j():e.g=!0}function x1(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||$o("ES5").S(e,t,n),n?(r[Dr].P&&(Vg(e),oo(4)),Os(t)&&(t=Gg(e,t),e.l||Wg(e,t)),e.u&&$o("Patches").M(r[Dr].t,t,e.u,e.s)):t=Gg(e,r,[]),Vg(e),e.u&&e.v(e.u,e.s),t!==qN?t:void 0}function Gg(t,e,r){if(_T(e))return e;var n=e[Dr];if(!n)return Lu(e,function(s,c){return wk(t,n,e,s,c,r)},!0),e;if(n.A!==t)return e;if(!n.P)return Wg(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=mT(n.k):n.o,a=i,o=!1;n.i===3&&(a=new Set(i),i.clear(),o=!0),Lu(a,function(s,c){return wk(t,n,i,s,c,r,o)}),Wg(t,i,!1),r&&t.u&&$o("Patches").N(n,r,t.u,t.s)}return n.o}function wk(t,e,r,n,i,a,o){if(Tl(i)){var s=Gg(t,i,a&&e&&e.i!==3&&!nf(e.R,n)?a.concat(n):void 0);if(XN(r,n,s),!Tl(s))return;t.m=!1}else o&&r.add(i);if(Os(i)&&!_T(i)){if(!t.h.D&&t._<1)return;Gg(t,i),e&&e.A.l||Wg(t,i)}}function Wg(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&yT(e,r)}function b1(t,e){var r=t[Dr];return(r?ou(r):t)[e]}function Ak(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Qs(t){t.P||(t.P=!0,t.l&&Qs(t.l))}function S1(t){t.o||(t.o=mT(t.t))}function WE(t,e,r){var n=vT(e)?$o("MapSet").F(e,r):gT(e)?$o("MapSet").T(e,r):t.O?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:VE(),P:!1,I:!1,R:{},l:a,t:i,k:null,o:null,j:null,C:!1},c=s,l=zd;o&&(c=[s],l=ad);var u=Proxy.revocable(c,l),f=u.revoke,h=u.proxy;return s.k=h,s.j=f,h}(e,r):$o("ES5").J(e,r);return(r?r.A:VE()).p.push(n),n}function PK(t){return Tl(t)||oo(22,t),function e(r){if(!Os(r))return r;var n,i=r[Dr],a=Uf(r);if(i){if(!i.P&&(i.i<4||!$o("ES5").K(i)))return i.t;i.I=!0,n=Ck(r,a),i.I=!1}else n=Ck(r,a);return Lu(n,function(o,s){i&&AK(i.t,o)===s||XN(n,o,e(s))}),a===3?new Set(n):n}(t)}function Ck(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return mT(t)}function RK(){function t(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var c=this[Dr];return zd.get(c,a)},set:function(c){var l=this[Dr];zd.set(l,a,c)}},s}function e(a){for(var o=a.length-1;o>=0;o--){var s=a[o][Dr];if(!s.P)switch(s.i){case 5:n(s)&&Qs(s);break;case 4:r(s)&&Qs(s)}}}function r(a){for(var o=a.t,s=a.k,c=af(s),l=c.length-1;l>=0;l--){var u=c[l];if(u!==Dr){var f=o[u];if(f===void 0&&!nf(o,u))return!0;var h=s[u],d=h&&h[Dr];if(d?d.t!==f:!YN(h,f))return!0}}var p=!!o[Dr];return c.length!==af(o).length+(p?0:1)}function n(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var i={};TK("ES5",{J:function(a,o){var s=Array.isArray(a),c=function(u,f){if(u){for(var h=Array(f.length),d=0;d<f.length;d++)Object.defineProperty(h,""+d,t(d,!0));return h}var p=KN(f);delete p[Dr];for(var v=af(p),y=0;y<v.length;y++){var m=v[y];p[m]=t(m,u||!!p[m].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(s,a),l={i:s?5:4,A:o?o.A:VE(),P:!1,I:!1,R:{},l:o,t:a,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Dr,{value:l,writable:!0}),c},S:function(a,o,s){s?Tl(o)&&o[Dr].A===a&&e(a.p):(a.u&&function c(l){if(l&&typeof l=="object"){var u=l[Dr];if(u){var f=u.t,h=u.k,d=u.R,p=u.i;if(p===4)Lu(h,function(x){x!==Dr&&(f[x]!==void 0||nf(f,x)?d[x]||c(h[x]):(d[x]=!0,Qs(u)))}),Lu(f,function(x){h[x]!==void 0||nf(h,x)||(d[x]=!1,Qs(u))});else if(p===5){if(n(u)&&(Qs(u),d.length=!0),h.length<f.length)for(var v=h.length;v<f.length;v++)d[v]=!1;else for(var y=f.length;y<h.length;y++)d[y]=!0;for(var m=Math.min(h.length,f.length),g=0;g<m;g++)h.hasOwnProperty(g)||(d[g]=!0),d[g]===void 0&&c(h[g])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?r(a):n(a)}})}var Tk,Wd,xT=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",IK=typeof Map<"u",FK=typeof Set<"u",Ok=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",qN=xT?Symbol.for("immer-nothing"):((Tk={})["immer-nothing"]=!0,Tk),Pk=xT?Symbol.for("immer-draftable"):"__$immer_draftable",Dr=xT?Symbol.for("immer-state"):"__$immer_state",kK=""+Object.prototype.constructor,af=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,KN=Object.getOwnPropertyDescriptors||function(t){var e={};return af(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},zE={},zd={get:function(t,e){if(e===Dr)return t;var r=ou(t);if(!nf(r,e))return function(i,a,o){var s,c=Ak(a,o);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!Os(n)?n:n===b1(t.t,e)?(S1(t),t.o[e]=WE(t.A.h,n,t)):n},has:function(t,e){return e in ou(t)},ownKeys:function(t){return Reflect.ownKeys(ou(t))},set:function(t,e,r){var n=Ak(ou(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=b1(ou(t),e),a=i==null?void 0:i[Dr];if(a&&a.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(YN(r,i)&&(r!==void 0||nf(t.t,e)))return!0;S1(t),Qs(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return b1(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,S1(t),Qs(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=ou(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){oo(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){oo(12)}},ad={};Lu(zd,function(t,e){ad[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ad.deleteProperty=function(t,e){return ad.set.call(this,t,e,void 0)},ad.set=function(t,e,r){return zd.set.call(this,t[0],e,r,t[0])};var DK=function(){function t(r){var n=this;this.O=Ok,this.D=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var c=n;return function(v){var y=this;v===void 0&&(v=s);for(var m=arguments.length,g=Array(m>1?m-1:0),x=1;x<m;x++)g[x-1]=arguments[x];return c.produce(v,function(b){var S;return(S=a).call.apply(S,[y,b].concat(g))})}}var l;if(typeof a!="function"&&oo(6),o!==void 0&&typeof o!="function"&&oo(7),Os(i)){var u=Ek(n),f=WE(n,i,void 0),h=!0;try{l=a(f),h=!1}finally{h?Vg(u):GE(u)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(v){return _1(u,o),x1(v,u)},function(v){throw Vg(u),v}):(_1(u,o),x1(l,u))}if(!i||typeof i!="object"){if((l=a(i))===void 0&&(l=i),l===qN&&(l=void 0),n.D&&yT(l,!0),o){var d=[],p=[];$o("Patches").M(i,l,d,p),o(d,p)}return l}oo(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(l){for(var u=arguments.length,f=Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];return n.produceWithPatches(l,function(d){return i.apply(void 0,[d].concat(f))})};var o,s,c=n.produce(i,a,function(l,u){o=l,s=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(l){return[l,o,s]}):[c,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Os(r)||oo(8),Tl(r)&&(r=PK(r));var n=Ek(this),i=WE(this,r,void 0);return i[Dr].C=!0,GE(n),i},e.finishDraft=function(r,n){var i=r&&r[Dr],a=i.A;return _1(a,n),x1(void 0,a)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!Ok&&oo(20),this.O=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}i>-1&&(n=n.slice(i+1));var o=$o("Patches").$;return Tl(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},t}(),pa=new DK,ZN=pa.produce;pa.produceWithPatches.bind(pa);pa.setAutoFreeze.bind(pa);pa.setUseProxies.bind(pa);pa.applyPatches.bind(pa);pa.createDraft.bind(pa);pa.finishDraft.bind(pa);function $n(t){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(t)}function MK(t,e){if($n(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($n(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QN(t){var e=MK(t,"string");return $n(e)=="symbol"?e:e+""}function ga(t,e,r){return e=QN(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ik(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ui(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Fk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),E1=function(){return Math.random().toString(36).substring(7).split("").join(".")},zg={INIT:"@@redux/INIT"+E1(),REPLACE:"@@redux/REPLACE"+E1(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+E1()}};function LK(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function JN(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ui(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ui(1));return r(JN)(t,e)}if(typeof t!="function")throw new Error(ui(2));var i=t,a=e,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw new Error(ui(3));return a}function f(v){if(typeof v!="function")throw new Error(ui(4));if(c)throw new Error(ui(5));var y=!0;return l(),s.push(v),function(){if(y){if(c)throw new Error(ui(6));y=!1,l();var g=s.indexOf(v);s.splice(g,1),o=null}}}function h(v){if(!LK(v))throw new Error(ui(7));if(typeof v.type>"u")throw new Error(ui(8));if(c)throw new Error(ui(9));try{c=!0,a=i(a,v)}finally{c=!1}for(var y=o=s,m=0;m<y.length;m++){var g=y[m];g()}return v}function d(v){if(typeof v!="function")throw new Error(ui(10));i=v,h({type:zg.REPLACE})}function p(){var v,y=f;return v={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(ui(11));function x(){g.next&&g.next(u())}x();var b=y(x);return{unsubscribe:b}}},v[Fk]=function(){return this},v}return h({type:zg.INIT}),n={dispatch:h,subscribe:f,getState:u,replaceReducer:d},n[Fk]=p,n}function BK(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:zg.INIT});if(typeof n>"u")throw new Error(ui(12));if(typeof r(void 0,{type:zg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ui(13))})}function NK(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];typeof t[i]=="function"&&(r[i]=t[i])}var a=Object.keys(r),o;try{BK(r)}catch(s){o=s}return function(c,l){if(c===void 0&&(c={}),o)throw o;for(var u=!1,f={},h=0;h<a.length;h++){var d=a[h],p=r[d],v=c[d],y=p(v,l);if(typeof y>"u")throw l&&l.type,new Error(ui(14));f[d]=y,u=u||y!==v}return u=u||a.length!==Object.keys(c).length,u?f:c}}function Hg(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function UK(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),a=function(){throw new Error(ui(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=e.map(function(c){return c(o)});return a=Hg.apply(void 0,s)(i.dispatch),Ik(Ik({},i),{},{dispatch:a})}}}function e8(t){var e=function(n){var i=n.dispatch,a=n.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,t):o(s)}}};return e}var t8=e8();t8.withExtraArgument=e8;const kk=t8;var r8=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jK=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},mf=globalThis&&globalThis.__spreadArray||function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},$K=Object.defineProperty,VK=Object.defineProperties,GK=Object.getOwnPropertyDescriptors,Dk=Object.getOwnPropertySymbols,WK=Object.prototype.hasOwnProperty,zK=Object.prototype.propertyIsEnumerable,Mk=function(t,e,r){return e in t?$K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},vl=function(t,e){for(var r in e||(e={}))WK.call(e,r)&&Mk(t,r,e[r]);if(Dk)for(var n=0,i=Dk(e);n<i.length;n++){var r=i[n];zK.call(e,r)&&Mk(t,r,e[r])}return t},w1=function(t,e){return VK(t,GK(e))},HK=function(t,e,r){return new Promise(function(n,i){var a=function(c){try{s(r.next(c))}catch(l){i(l)}},o=function(c){try{s(r.throw(c))}catch(l){i(l)}},s=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(a,o)};s((r=r.apply(t,e)).next())})},XK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hg:Hg.apply(null,arguments)};function YK(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function gl(t,e){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var a=e.apply(void 0,n);if(!a)throw new Error("prepareAction did not return an object");return vl(vl({type:t,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var qK=function(t){r8(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,mf([void 0],r[0].concat(this)))):new(e.bind.apply(e,mf([void 0],r.concat(this))))},e}(Array),KK=function(t){r8(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,mf([void 0],r[0].concat(this)))):new(e.bind.apply(e,mf([void 0],r.concat(this))))},e}(Array);function HE(t){return Os(t)?ZN(t,function(){}):t}function ZK(t){return typeof t=="boolean"}function QK(){return function(e){return n8(e)}}function n8(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var n=new qK;return r&&(ZK(r)?n.push(kk):n.push(kk.withExtraArgument(r.extraArgument))),n}var JK=!0;function eZ(t){var e=QK(),r=t||{},n=r.reducer,i=n===void 0?void 0:n,a=r.middleware,o=a===void 0?e():a,s=r.devTools,c=s===void 0?!0:s,l=r.preloadedState,u=l===void 0?void 0:l,f=r.enhancers,h=f===void 0?void 0:f,d;if(typeof i=="function")d=i;else if(YK(i))d=NK(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var v=UK.apply(void 0,p),y=Hg;c&&(y=XK(vl({trace:!JK},typeof c=="object"&&c)));var m=new KK(v),g=m;Array.isArray(h)?g=mf([v],h):typeof h=="function"&&(g=h(m));var x=y.apply(void 0,g);return JN(d,u,x)}function i8(t){var e={},r=[],n,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=o,i},addMatcher:function(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return n=a,i}};return t(i),[e,r,n]}function tZ(t){return typeof t=="function"}function rZ(t,e,r,n){r===void 0&&(r=[]);var i=typeof e=="function"?i8(e):[e,r,n],a=i[0],o=i[1],s=i[2],c;if(tZ(t))c=function(){return HE(t())};else{var l=HE(t);c=function(){return l}}function u(f,h){f===void 0&&(f=c());var d=mf([a[h.type]],o.filter(function(p){var v=p.matcher;return v(h)}).map(function(p){var v=p.reducer;return v}));return d.filter(function(p){return!!p}).length===0&&(d=[s]),d.reduce(function(p,v){if(v)if(Tl(p)){var y=p,m=v(y,h);return m===void 0?p:m}else{if(Os(p))return ZN(p,function(g){return v(g,h)});var m=v(p,h);if(m===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}return p},f)}return u.getInitialState=c,u}function nZ(t,e){return t+"/"+e}function Ym(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof t.initialState=="function"?t.initialState:HE(t.initialState),n=t.reducers||{},i=Object.keys(n),a={},o={},s={};i.forEach(function(u){var f=n[u],h=nZ(e,u),d,p;"reducer"in f?(d=f.reducer,p=f.prepare):d=f,a[u]=d,o[h]=d,s[u]=p?gl(h,p):gl(h)});function c(){var u=typeof t.extraReducers=="function"?i8(t.extraReducers):[t.extraReducers],f=u[0],h=f===void 0?{}:f,d=u[1],p=d===void 0?[]:d,v=u[2],y=v===void 0?void 0:v,m=vl(vl({},h),o);return rZ(r,function(g){for(var x in m)g.addCase(x,m[x]);for(var b=0,S=p;b<S.length;b++){var w=S[b];g.addMatcher(w.matcher,w.reducer)}y&&g.addDefaultCase(y)})}var l;return{name:e,reducer:function(u,f){return l||(l=c()),l(u,f)},actions:s,caseReducers:a,getInitialState:function(){return l||(l=c()),l.getInitialState()}}}var iZ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",aZ=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=iZ[Math.random()*64|0];return e},oZ=["name","message","stack","code"],A1=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),Lk=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),sZ=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=oZ;r<n.length;r++){var i=n[r];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,r,n){var i=gl(e+"/fulfilled",function(l,u,f,h){return{payload:l,meta:w1(vl({},h||{}),{arg:f,requestId:u,requestStatus:"fulfilled"})}}),a=gl(e+"/pending",function(l,u,f){return{payload:void 0,meta:w1(vl({},f||{}),{arg:u,requestId:l,requestStatus:"pending"})}}),o=gl(e+"/rejected",function(l,u,f,h,d){return{payload:h,error:(n&&n.serializeError||sZ)(l||"Rejected"),meta:w1(vl({},d||{}),{arg:f,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(u,f,h){var d=n!=null&&n.idGenerator?n.idGenerator(l):aZ(),p=new s,v;function y(g){v=g,p.abort()}var m=function(){return HK(this,null,function(){var g,x,b,S,w,A,C;return jK(this,function(O){switch(O.label){case 0:return O.trys.push([0,4,,5]),S=(g=n==null?void 0:n.condition)==null?void 0:g.call(n,l,{getState:f,extra:h}),uZ(S)?[4,S]:[3,2];case 1:S=O.sent(),O.label=2;case 2:if(S===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(P,I){return p.signal.addEventListener("abort",function(){return I({name:"AbortError",message:v||"Aborted"})})}),u(a(d,l,(x=n==null?void 0:n.getPendingMeta)==null?void 0:x.call(n,{requestId:d,arg:l},{getState:f,extra:h}))),[4,Promise.race([w,Promise.resolve(r(l,{dispatch:u,getState:f,extra:h,requestId:d,signal:p.signal,abort:y,rejectWithValue:function(P,I){return new A1(P,I)},fulfillWithValue:function(P,I){return new Lk(P,I)}})).then(function(P){if(P instanceof A1)throw P;return P instanceof Lk?i(P.payload,d,l,P.meta):i(P,d,l)})])];case 3:return b=O.sent(),[3,5];case 4:return A=O.sent(),b=A instanceof A1?o(null,d,l,A.payload,A.meta):o(A,d,l),[3,5];case 5:return C=n&&!n.dispatchConditionRejection&&o.match(b)&&b.meta.condition,C||u(b),[2,b]}})})}();return Object.assign(m,{abort:y,requestId:d,arg:l,unwrap:function(){return m.then(lZ)}})}}return Object.assign(c,{pending:a,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function lZ(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function uZ(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var bT="listenerMiddleware";gl(bT+"/add");gl(bT+"/removeAll");gl(bT+"/remove");var Bk;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);RK();function cZ(){this.__data__=[],this.size=0}var fZ=cZ;function hZ(t,e){return t===e||t!==t&&e!==e}var ST=hZ,dZ=ST;function pZ(t,e){for(var r=t.length;r--;)if(dZ(t[r][0],e))return r;return-1}var qm=pZ,vZ=qm,gZ=Array.prototype,mZ=gZ.splice;function yZ(t){var e=this.__data__,r=vZ(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():mZ.call(e,r,1),--this.size,!0}var _Z=yZ,xZ=qm;function bZ(t){var e=this.__data__,r=xZ(e,t);return r<0?void 0:e[r][1]}var SZ=bZ,EZ=qm;function wZ(t){return EZ(this.__data__,t)>-1}var AZ=wZ,CZ=qm;function TZ(t,e){var r=this.__data__,n=CZ(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var OZ=TZ,PZ=fZ,RZ=_Z,IZ=SZ,FZ=AZ,kZ=OZ;function jf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jf.prototype.clear=PZ;jf.prototype.delete=RZ;jf.prototype.get=IZ;jf.prototype.has=FZ;jf.prototype.set=kZ;var Km=jf,DZ=Km;function MZ(){this.__data__=new DZ,this.size=0}var LZ=MZ;function BZ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var NZ=BZ;function UZ(t){return this.__data__.get(t)}var jZ=UZ;function $Z(t){return this.__data__.has(t)}var VZ=$Z,GZ=typeof st=="object"&&st&&st.Object===Object&&st,a8=GZ,WZ=a8,zZ=typeof self=="object"&&self&&self.Object===Object&&self,HZ=WZ||zZ||Function("return this")(),po=HZ,XZ=po,YZ=XZ.Symbol,Lp=YZ,Nk=Lp,o8=Object.prototype,qZ=o8.hasOwnProperty,KZ=o8.toString,Nh=Nk?Nk.toStringTag:void 0;function ZZ(t){var e=qZ.call(t,Nh),r=t[Nh];try{t[Nh]=void 0;var n=!0}catch{}var i=KZ.call(t);return n&&(e?t[Nh]=r:delete t[Nh]),i}var QZ=ZZ,JZ=Object.prototype,eQ=JZ.toString;function tQ(t){return eQ.call(t)}var rQ=tQ,Uk=Lp,nQ=QZ,iQ=rQ,aQ="[object Null]",oQ="[object Undefined]",jk=Uk?Uk.toStringTag:void 0;function sQ(t){return t==null?t===void 0?oQ:aQ:jk&&jk in Object(t)?nQ(t):iQ(t)}var Bp=sQ;function lQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var qo=lQ,uQ=Bp,cQ=qo,fQ="[object AsyncFunction]",hQ="[object Function]",dQ="[object GeneratorFunction]",pQ="[object Proxy]";function vQ(t){if(!cQ(t))return!1;var e=uQ(t);return e==hQ||e==dQ||e==fQ||e==pQ}var s8=vQ,gQ=po,mQ=gQ["__core-js_shared__"],yQ=mQ,C1=yQ,$k=function(){var t=/[^.]+$/.exec(C1&&C1.keys&&C1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _Q(t){return!!$k&&$k in t}var xQ=_Q,bQ=Function.prototype,SQ=bQ.toString;function EQ(t){if(t!=null){try{return SQ.call(t)}catch{}try{return t+""}catch{}}return""}var l8=EQ,wQ=s8,AQ=xQ,CQ=qo,TQ=l8,OQ=/[\\^$.*+?()[\]{}|]/g,PQ=/^\[object .+?Constructor\]$/,RQ=Function.prototype,IQ=Object.prototype,FQ=RQ.toString,kQ=IQ.hasOwnProperty,DQ=RegExp("^"+FQ.call(kQ).replace(OQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function MQ(t){if(!CQ(t)||AQ(t))return!1;var e=wQ(t)?DQ:PQ;return e.test(TQ(t))}var LQ=MQ;function BQ(t,e){return t==null?void 0:t[e]}var NQ=BQ,UQ=LQ,jQ=NQ;function $Q(t,e){var r=jQ(t,e);return UQ(r)?r:void 0}var Yu=$Q,VQ=Yu,GQ=po,WQ=VQ(GQ,"Map"),ET=WQ,zQ=Yu,HQ=zQ(Object,"create"),Zm=HQ,Vk=Zm;function XQ(){this.__data__=Vk?Vk(null):{},this.size=0}var YQ=XQ;function qQ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var KQ=qQ,ZQ=Zm,QQ="__lodash_hash_undefined__",JQ=Object.prototype,eJ=JQ.hasOwnProperty;function tJ(t){var e=this.__data__;if(ZQ){var r=e[t];return r===QQ?void 0:r}return eJ.call(e,t)?e[t]:void 0}var rJ=tJ,nJ=Zm,iJ=Object.prototype,aJ=iJ.hasOwnProperty;function oJ(t){var e=this.__data__;return nJ?e[t]!==void 0:aJ.call(e,t)}var sJ=oJ,lJ=Zm,uJ="__lodash_hash_undefined__";function cJ(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lJ&&e===void 0?uJ:e,this}var fJ=cJ,hJ=YQ,dJ=KQ,pJ=rJ,vJ=sJ,gJ=fJ;function $f(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$f.prototype.clear=hJ;$f.prototype.delete=dJ;$f.prototype.get=pJ;$f.prototype.has=vJ;$f.prototype.set=gJ;var mJ=$f,Gk=mJ,yJ=Km,_J=ET;function xJ(){this.size=0,this.__data__={hash:new Gk,map:new(_J||yJ),string:new Gk}}var bJ=xJ;function SJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var EJ=SJ,wJ=EJ;function AJ(t,e){var r=t.__data__;return wJ(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Qm=AJ,CJ=Qm;function TJ(t){var e=CJ(this,t).delete(t);return this.size-=e?1:0,e}var OJ=TJ,PJ=Qm;function RJ(t){return PJ(this,t).get(t)}var IJ=RJ,FJ=Qm;function kJ(t){return FJ(this,t).has(t)}var DJ=kJ,MJ=Qm;function LJ(t,e){var r=MJ(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var BJ=LJ,NJ=bJ,UJ=OJ,jJ=IJ,$J=DJ,VJ=BJ;function Vf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Vf.prototype.clear=NJ;Vf.prototype.delete=UJ;Vf.prototype.get=jJ;Vf.prototype.has=$J;Vf.prototype.set=VJ;var wT=Vf,GJ=Km,WJ=ET,zJ=wT,HJ=200;function XJ(t,e){var r=this.__data__;if(r instanceof GJ){var n=r.__data__;if(!WJ||n.length<HJ-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new zJ(n)}return r.set(t,e),this.size=r.size,this}var YJ=XJ,qJ=Km,KJ=LZ,ZJ=NZ,QJ=jZ,JJ=VZ,eee=YJ;function Gf(t){var e=this.__data__=new qJ(t);this.size=e.size}Gf.prototype.clear=KJ;Gf.prototype.delete=ZJ;Gf.prototype.get=QJ;Gf.prototype.has=JJ;Gf.prototype.set=eee;var AT=Gf;function tee(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var ree=tee,nee=Yu,iee=function(){try{var t=nee(Object,"defineProperty");return t({},"",{}),t}catch{}}(),aee=iee,Wk=aee;function oee(t,e,r){e=="__proto__"&&Wk?Wk(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var u8=oee,see=u8,lee=ST,uee=Object.prototype,cee=uee.hasOwnProperty;function fee(t,e,r){var n=t[e];(!(cee.call(t,e)&&lee(n,r))||r===void 0&&!(e in t))&&see(t,e,r)}var CT=fee,hee=CT,dee=u8;function pee(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],c=n?n(r[s],t[s],s,r,t):void 0;c===void 0&&(c=t[s]),i?dee(r,s,c):hee(r,s,c)}return r}var Jm=pee;function vee(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var gee=vee;function mee(t){return t!=null&&typeof t=="object"}var qu=mee,yee=Bp,_ee=qu,xee="[object Arguments]";function bee(t){return _ee(t)&&yee(t)==xee}var See=bee,zk=See,Eee=qu,c8=Object.prototype,wee=c8.hasOwnProperty,Aee=c8.propertyIsEnumerable,Cee=zk(function(){return arguments}())?zk:function(t){return Eee(t)&&wee.call(t,"callee")&&!Aee.call(t,"callee")},f8=Cee,Tee=Array.isArray,Rs=Tee,Xg={exports:{}};function Oee(){return!1}var Pee=Oee;Xg.exports;(function(t,e){var r=po,n=Pee,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||n;t.exports=l})(Xg,Xg.exports);var TT=Xg.exports,Ree=9007199254740991,Iee=/^(?:0|[1-9]\d*)$/;function Fee(t,e){var r=typeof t;return e=e??Ree,!!e&&(r=="number"||r!="symbol"&&Iee.test(t))&&t>-1&&t%1==0&&t<e}var OT=Fee,kee=9007199254740991;function Dee(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=kee}var PT=Dee,Mee=Bp,Lee=PT,Bee=qu,Nee="[object Arguments]",Uee="[object Array]",jee="[object Boolean]",$ee="[object Date]",Vee="[object Error]",Gee="[object Function]",Wee="[object Map]",zee="[object Number]",Hee="[object Object]",Xee="[object RegExp]",Yee="[object Set]",qee="[object String]",Kee="[object WeakMap]",Zee="[object ArrayBuffer]",Qee="[object DataView]",Jee="[object Float32Array]",ete="[object Float64Array]",tte="[object Int8Array]",rte="[object Int16Array]",nte="[object Int32Array]",ite="[object Uint8Array]",ate="[object Uint8ClampedArray]",ote="[object Uint16Array]",ste="[object Uint32Array]",Or={};Or[Jee]=Or[ete]=Or[tte]=Or[rte]=Or[nte]=Or[ite]=Or[ate]=Or[ote]=Or[ste]=!0;Or[Nee]=Or[Uee]=Or[Zee]=Or[jee]=Or[Qee]=Or[$ee]=Or[Vee]=Or[Gee]=Or[Wee]=Or[zee]=Or[Hee]=Or[Xee]=Or[Yee]=Or[qee]=Or[Kee]=!1;function lte(t){return Bee(t)&&Lee(t.length)&&!!Or[Mee(t)]}var ute=lte;function cte(t){return function(e){return t(e)}}var RT=cte,Yg={exports:{}};Yg.exports;(function(t,e){var r=a8,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Yg,Yg.exports);var IT=Yg.exports,fte=ute,hte=RT,Hk=IT,Xk=Hk&&Hk.isTypedArray,dte=Xk?hte(Xk):fte,h8=dte,pte=gee,vte=f8,gte=Rs,mte=TT,yte=OT,_te=h8,xte=Object.prototype,bte=xte.hasOwnProperty;function Ste(t,e){var r=gte(t),n=!r&&vte(t),i=!r&&!n&&mte(t),a=!r&&!n&&!i&&_te(t),o=r||n||i||a,s=o?pte(t.length,String):[],c=s.length;for(var l in t)(e||bte.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||yte(l,c)))&&s.push(l);return s}var d8=Ste,Ete=Object.prototype;function wte(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ete;return t===r}var FT=wte;function Ate(t,e){return function(r){return t(e(r))}}var p8=Ate,Cte=p8,Tte=Cte(Object.keys,Object),Ote=Tte,Pte=FT,Rte=Ote,Ite=Object.prototype,Fte=Ite.hasOwnProperty;function kte(t){if(!Pte(t))return Rte(t);var e=[];for(var r in Object(t))Fte.call(t,r)&&r!="constructor"&&e.push(r);return e}var Dte=kte,Mte=s8,Lte=PT;function Bte(t){return t!=null&&Lte(t.length)&&!Mte(t)}var v8=Bte,Nte=d8,Ute=Dte,jte=v8;function $te(t){return jte(t)?Nte(t):Ute(t)}var ey=$te,Vte=Jm,Gte=ey;function Wte(t,e){return t&&Vte(e,Gte(e),t)}var zte=Wte;function Hte(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Xte=Hte,Yte=qo,qte=FT,Kte=Xte,Zte=Object.prototype,Qte=Zte.hasOwnProperty;function Jte(t){if(!Yte(t))return Kte(t);var e=qte(t),r=[];for(var n in t)n=="constructor"&&(e||!Qte.call(t,n))||r.push(n);return r}var ere=Jte,tre=d8,rre=ere,nre=v8;function ire(t){return nre(t)?tre(t,!0):rre(t)}var kT=ire,are=Jm,ore=kT;function sre(t,e){return t&&are(e,ore(e),t)}var lre=sre,qg={exports:{}};qg.exports;(function(t,e){var r=po,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var f=l.length,h=s?s(f):new l.constructor(f);return l.copy(h),h}t.exports=c})(qg,qg.exports);var ure=qg.exports;function cre(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var fre=cre;function hre(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var dre=hre;function pre(){return[]}var g8=pre,vre=dre,gre=g8,mre=Object.prototype,yre=mre.propertyIsEnumerable,Yk=Object.getOwnPropertySymbols,_re=Yk?function(t){return t==null?[]:(t=Object(t),vre(Yk(t),function(e){return yre.call(t,e)}))}:gre,DT=_re,xre=Jm,bre=DT;function Sre(t,e){return xre(t,bre(t),e)}var Ere=Sre;function wre(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var m8=wre,Are=p8,Cre=Are(Object.getPrototypeOf,Object),y8=Cre,Tre=m8,Ore=y8,Pre=DT,Rre=g8,Ire=Object.getOwnPropertySymbols,Fre=Ire?function(t){for(var e=[];t;)Tre(e,Pre(t)),t=Ore(t);return e}:Rre,_8=Fre,kre=Jm,Dre=_8;function Mre(t,e){return kre(t,Dre(t),e)}var Lre=Mre,Bre=m8,Nre=Rs;function Ure(t,e,r){var n=e(t);return Nre(t)?n:Bre(n,r(t))}var x8=Ure,jre=x8,$re=DT,Vre=ey;function Gre(t){return jre(t,Vre,$re)}var b8=Gre,Wre=x8,zre=_8,Hre=kT;function Xre(t){return Wre(t,Hre,zre)}var S8=Xre,Yre=Yu,qre=po,Kre=Yre(qre,"DataView"),Zre=Kre,Qre=Yu,Jre=po,ene=Qre(Jre,"Promise"),tne=ene,rne=Yu,nne=po,ine=rne(nne,"Set"),E8=ine,ane=Yu,one=po,sne=ane(one,"WeakMap"),lne=sne,XE=Zre,YE=ET,qE=tne,KE=E8,ZE=lne,w8=Bp,Wf=l8,qk="[object Map]",une="[object Object]",Kk="[object Promise]",Zk="[object Set]",Qk="[object WeakMap]",Jk="[object DataView]",cne=Wf(XE),fne=Wf(YE),hne=Wf(qE),dne=Wf(KE),pne=Wf(ZE),su=w8;(XE&&su(new XE(new ArrayBuffer(1)))!=Jk||YE&&su(new YE)!=qk||qE&&su(qE.resolve())!=Kk||KE&&su(new KE)!=Zk||ZE&&su(new ZE)!=Qk)&&(su=function(t){var e=w8(t),r=e==une?t.constructor:void 0,n=r?Wf(r):"";if(n)switch(n){case cne:return Jk;case fne:return qk;case hne:return Kk;case dne:return Zk;case pne:return Qk}return e});var ty=su,vne=Object.prototype,gne=vne.hasOwnProperty;function mne(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&gne.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var yne=mne,_ne=po,xne=_ne.Uint8Array,A8=xne,eD=A8;function bne(t){var e=new t.constructor(t.byteLength);return new eD(e).set(new eD(t)),e}var MT=bne,Sne=MT;function Ene(t,e){var r=e?Sne(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var wne=Ene,Ane=/\w*$/;function Cne(t){var e=new t.constructor(t.source,Ane.exec(t));return e.lastIndex=t.lastIndex,e}var Tne=Cne,tD=Lp,rD=tD?tD.prototype:void 0,nD=rD?rD.valueOf:void 0;function One(t){return nD?Object(nD.call(t)):{}}var Pne=One,Rne=MT;function Ine(t,e){var r=e?Rne(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Fne=Ine,kne=MT,Dne=wne,Mne=Tne,Lne=Pne,Bne=Fne,Nne="[object Boolean]",Une="[object Date]",jne="[object Map]",$ne="[object Number]",Vne="[object RegExp]",Gne="[object Set]",Wne="[object String]",zne="[object Symbol]",Hne="[object ArrayBuffer]",Xne="[object DataView]",Yne="[object Float32Array]",qne="[object Float64Array]",Kne="[object Int8Array]",Zne="[object Int16Array]",Qne="[object Int32Array]",Jne="[object Uint8Array]",eie="[object Uint8ClampedArray]",tie="[object Uint16Array]",rie="[object Uint32Array]";function nie(t,e,r){var n=t.constructor;switch(e){case Hne:return kne(t);case Nne:case Une:return new n(+t);case Xne:return Dne(t,r);case Yne:case qne:case Kne:case Zne:case Qne:case Jne:case eie:case tie:case rie:return Bne(t,r);case jne:return new n;case $ne:case Wne:return new n(t);case Vne:return Mne(t);case Gne:return new n;case zne:return Lne(t)}}var iie=nie,aie=qo,iD=Object.create,oie=function(){function t(){}return function(e){if(!aie(e))return{};if(iD)return iD(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),sie=oie,lie=sie,uie=y8,cie=FT;function fie(t){return typeof t.constructor=="function"&&!cie(t)?lie(uie(t)):{}}var hie=fie,die=ty,pie=qu,vie="[object Map]";function gie(t){return pie(t)&&die(t)==vie}var mie=gie,yie=mie,_ie=RT,aD=IT,oD=aD&&aD.isMap,xie=oD?_ie(oD):yie,bie=xie,Sie=ty,Eie=qu,wie="[object Set]";function Aie(t){return Eie(t)&&Sie(t)==wie}var Cie=Aie,Tie=Cie,Oie=RT,sD=IT,lD=sD&&sD.isSet,Pie=lD?Oie(lD):Tie,Rie=Pie,Iie=AT,Fie=ree,kie=CT,Die=zte,Mie=lre,Lie=ure,Bie=fre,Nie=Ere,Uie=Lre,jie=b8,$ie=S8,Vie=ty,Gie=yne,Wie=iie,zie=hie,Hie=Rs,Xie=TT,Yie=bie,qie=qo,Kie=Rie,Zie=ey,Qie=kT,Jie=1,eae=2,tae=4,C8="[object Arguments]",rae="[object Array]",nae="[object Boolean]",iae="[object Date]",aae="[object Error]",T8="[object Function]",oae="[object GeneratorFunction]",sae="[object Map]",lae="[object Number]",O8="[object Object]",uae="[object RegExp]",cae="[object Set]",fae="[object String]",hae="[object Symbol]",dae="[object WeakMap]",pae="[object ArrayBuffer]",vae="[object DataView]",gae="[object Float32Array]",mae="[object Float64Array]",yae="[object Int8Array]",_ae="[object Int16Array]",xae="[object Int32Array]",bae="[object Uint8Array]",Sae="[object Uint8ClampedArray]",Eae="[object Uint16Array]",wae="[object Uint32Array]",xr={};xr[C8]=xr[rae]=xr[pae]=xr[vae]=xr[nae]=xr[iae]=xr[gae]=xr[mae]=xr[yae]=xr[_ae]=xr[xae]=xr[sae]=xr[lae]=xr[O8]=xr[uae]=xr[cae]=xr[fae]=xr[hae]=xr[bae]=xr[Sae]=xr[Eae]=xr[wae]=!0;xr[aae]=xr[T8]=xr[dae]=!1;function tg(t,e,r,n,i,a){var o,s=e&Jie,c=e&eae,l=e&tae;if(r&&(o=i?r(t,n,i,a):r(t)),o!==void 0)return o;if(!qie(t))return t;var u=Hie(t);if(u){if(o=Gie(t),!s)return Bie(t,o)}else{var f=Vie(t),h=f==T8||f==oae;if(Xie(t))return Lie(t,s);if(f==O8||f==C8||h&&!i){if(o=c||h?{}:zie(t),!s)return c?Uie(t,Mie(o,t)):Nie(t,Die(o,t))}else{if(!xr[f])return i?t:{};o=Wie(t,f,s)}}a||(a=new Iie);var d=a.get(t);if(d)return d;a.set(t,o),Kie(t)?t.forEach(function(y){o.add(tg(y,e,r,y,t,a))}):Yie(t)&&t.forEach(function(y,m){o.set(m,tg(y,e,r,m,t,a))});var p=l?c?$ie:jie:c?Qie:Zie,v=u?void 0:p(t);return Fie(v||t,function(y,m){v&&(m=y,y=t[m]),kie(o,m,tg(y,e,r,m,t,a))}),o}var Aae=tg,Cae=Aae,Tae=1,Oae=4;function Pae(t){return Cae(t,Tae|Oae)}var Rae=Pae;const Gr=gi(Rae);var It=(t=>(t[t.say=0]="say",t[t.changeBg=1]="changeBg",t[t.changeFigure=2]="changeFigure",t[t.bgm=3]="bgm",t[t.video=4]="video",t[t.pixi=5]="pixi",t[t.pixiInit=6]="pixiInit",t[t.intro=7]="intro",t[t.miniAvatar=8]="miniAvatar",t[t.changeScene=9]="changeScene",t[t.choose=10]="choose",t[t.end=11]="end",t[t.setComplexAnimation=12]="setComplexAnimation",t[t.setFilter=13]="setFilter",t[t.label=14]="label",t[t.jumpLabel=15]="jumpLabel",t[t.chooseLabel=16]="chooseLabel",t[t.setVar=17]="setVar",t[t.if=18]="if",t[t.callScene=19]="callScene",t[t.showVars=20]="showVars",t[t.unlockCg=21]="unlockCg",t[t.unlockBgm=22]="unlockBgm",t[t.filmMode=23]="filmMode",t[t.setTextbox=24]="setTextbox",t[t.setAnimation=25]="setAnimation",t[t.playEffect=26]="playEffect",t[t.setTempAnimation=27]="setTempAnimation",t[t.comment=28]="comment",t[t.setTransform=29]="setTransform",t[t.setTransition=30]="setTransition",t[t.getUserInput=31]="getUserInput",t[t.applyStyle=32]="applyStyle",t[t.unlockAchieve=33]="unlockAchieve",t[t.unlockStoryline=34]="unlockStoryline",t[t.showValue=35]="showValue",t))(It||{});const P8={oldBgName:"",bgName:"",bgX:0,bgY:0,figName:"",figNameLeft:"",figNameRight:"",freeFigure:[],figureAssociatedAnimation:[],showText:"",showTextSize:-1,showName:"",command:"",choose:[],vocal:"",playVocal:"",vocalVolume:100,bgm:{src:"",enter:0,volume:100},uiSe:"",gameSe:"",gameScounds:[],menuScounds:[],miniAvatar:"",GameVar:{},effects:[],bgFilter:"",bgTransform:"",PerformList:[],currentDialogKey:"initial",live2dMotion:[],live2dExpression:[],currentConcatDialogPrev:"",enableFilm:"",isDisableTextbox:!1,replacedUIlable:{},storyLineBg:"",storyLineBgX:1280,storyLineBgY:720,achieveBg:"",unlockAchieve:{unlockname:"",saveTime:"",url:"",x:0,y:0},achieveBgX:1280,achieveBgY:720,unlockAchieves:[],totalAchievements:0,unlockedAchievements:0,isShowValueSWitch:!1,showValueName:"",showValueAxisX:0,showValueAxisY:0,showValues:[],showValueList:[]},LT=Ym({name:"stage",initialState:Gr(P8),reducers:{resetStageState:(t,e)=>{Object.assign(t,e.payload)},setStage:(t,e)=>{t[e.payload.key]=e.payload.value},setStageVar:(t,e)=>{t.GameVar[e.payload.key]=e.payload.value},updateEffect:(t,e)=>{const{target:r,transform:n}=e.payload,i=t.effects.findIndex(a=>a.target===r);i>=0?t.effects[i].transform=n:t.effects.push({target:r,transform:n})},removeEffectByTargetId:(t,e)=>{const r=t.effects.findIndex(n=>n.target===e.payload);r>=0&&t.effects.splice(r,1)},addPerform:(t,e)=>{t.PerformList.push(e.payload)},removePerformByName:(t,e)=>{for(let r=0;r<t.PerformList.length;r++)t.PerformList[r].id===e.payload&&(t.PerformList.splice(r,1),r--)},removeAllPixiPerforms:(t,e)=>{for(let r=0;r<t.PerformList.length;r++)t.PerformList[r].script.command===It.pixi&&(t.PerformList.splice(r,1),r--)},setFreeFigureByKey:(t,e)=>{const r=t.freeFigure,n=e.payload,i=r.findIndex(a=>a.key===n.key);i>=0?(r[i].basePosition=n.basePosition,r[i].name=n.name):n.name!==""&&r.push(n)},setLive2dMotion:(t,e)=>{const{target:r,motion:n}=e.payload,i=t.live2dMotion.findIndex(a=>a.target===r);i<0?t.live2dMotion.push({target:r,motion:n}):t.live2dMotion[i].motion=n},setLive2dExpression:(t,e)=>{const{target:r,expression:n}=e.payload,i=t.live2dExpression.findIndex(a=>a.target===r);i<0?t.live2dExpression.push({target:r,expression:n}):t.live2dExpression[i].expression=n},replaceUIlable:(t,e)=>{t.replacedUIlable[e.payload[0]]=e.payload[1]},setStoryLineBg:(t,e)=>{t.storyLineBg=e.payload},setAchieveBg:(t,e)=>{t.achieveBg=e.payload},setUnlockAchieve:(t,e)=>{t.unlockAchieves.push(e.payload)},addShowValues:(t,e)=>{t.showValues.push(e.payload)},addShowValueList:(t,e)=>{t.showValueList.push(e.payload)},updateShowValueList:(t,e)=>{t.showValueList=e.payload}}}),{resetStageState:ry,setStage:lt,setStageVar:R8,setAchieveBg:Iae,setUnlockAchieve:pNe,setStoryLineBg:vNe,addShowValues:xc,addShowValueList:Fae,updateShowValueList:kae}=LT.actions,Wi=LT.actions,Dae=LT.reducer;function od(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var I8={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,a){function o(l,u){if(!i[l]){if(!n[l]){var f=typeof od=="function"&&od;if(!u&&f)return f(l,!0);if(s)return s(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(p){var v=n[l][1][p];return o(v||p)},d,d.exports,r,n,i,a)}return i[l].exports}for(var s=typeof od=="function"&&od,c=0;c<a.length;c++)o(a[c]);return o}({1:[function(r,n,i){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,s;if(o){var c=0,l=new o(p),u=a.document.createTextNode("");l.observe(u,{characterData:!0}),s=function(){u.data=c=++c%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var f=new a.MessageChannel;f.port1.onmessage=p,s=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?s=function(){var y=a.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},a.document.documentElement.appendChild(y)}:s=function(){setTimeout(p,0)};var h,d=[];function p(){h=!0;for(var y,m,g=d.length;g;){for(m=d,d=[],y=-1;++y<g;)m[y]();g=d.length}h=!1}n.exports=v;function v(y){d.push(y)===1&&!h&&s()}}).call(this,typeof st<"u"?st:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var a=r(1);function o(){}var s={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];n.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,S!==o&&v(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,w){if(typeof S!="function"&&this.state===l||typeof w!="function"&&this.state===c)return this;var A=new this.constructor(o);if(this.state!==u){var C=this.state===l?S:w;d(A,C,this.outcome)}else this.queue.push(new h(A,S,w));return A};function h(S,w,A){this.promise=S,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(S){s.resolve(this.promise,S)},h.prototype.otherCallFulfilled=function(S){d(this.promise,this.onFulfilled,S)},h.prototype.callRejected=function(S){s.reject(this.promise,S)},h.prototype.otherCallRejected=function(S){d(this.promise,this.onRejected,S)};function d(S,w,A){a(function(){var C;try{C=w(A)}catch(O){return s.reject(S,O)}C===S?s.reject(S,new TypeError("Cannot resolve promise with itself")):s.resolve(S,C)})}s.resolve=function(S,w){var A=y(p,w);if(A.status==="error")return s.reject(S,A.value);var C=A.value;if(C)v(S,C);else{S.state=l,S.outcome=w;for(var O=-1,P=S.queue.length;++O<P;)S.queue[O].callFulfilled(w)}return S},s.reject=function(S,w){S.state=c,S.outcome=w;for(var A=-1,C=S.queue.length;++A<C;)S.queue[A].callRejected(w);return S};function p(S){var w=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof w=="function")return function(){w.apply(S,arguments)}}function v(S,w){var A=!1;function C(R){A||(A=!0,s.reject(S,R))}function O(R){A||(A=!0,s.resolve(S,R))}function P(){w(O,C)}var I=y(P);I.status==="error"&&C(I.value)}function y(S,w){var A={};try{A.value=S(w),A.status="success"}catch(C){A.status="error",A.value=C}return A}f.resolve=m;function m(S){return S instanceof this?S:s.resolve(new this(o),S)}f.reject=g;function g(S){var w=new this(o);return s.reject(w,S)}f.all=x;function x(S){var w=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=S.length,C=!1;if(!A)return this.resolve([]);for(var O=new Array(A),P=0,I=-1,R=new this(o);++I<A;)F(S[I],I);return R;function F(D,L){w.resolve(D).then(U,function(Y){C||(C=!0,s.reject(R,Y))});function U(Y){O[L]=Y,++P===A&&!C&&(C=!0,s.resolve(R,O))}}}f.race=b;function b(S){var w=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=S.length,C=!1;if(!A)return this.resolve([]);for(var O=-1,P=new this(o);++O<A;)I(S[O]);return P;function I(R){w.resolve(R).then(function(F){C||(C=!0,s.resolve(P,F))},function(F){C||(C=!0,s.reject(P,F))})}}},{1:1}],3:[function(r,n,i){(function(a){typeof a.Promise!="function"&&(a.Promise=r(2))}).call(this,typeof st<"u"?st:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z};function o(z,re){if(!(z instanceof re))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=s();function l(){try{if(!c||!c.open)return!1;var z=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),re=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!z||re)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(z,re){z=z||[],re=re||{};try{return new Blob(z,re)}catch(ae){if(ae.name!=="TypeError")throw ae;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,oe=new Z,fe=0;fe<z.length;fe+=1)oe.append(z[fe]);return oe.getBlob(re.type)}}typeof Promise>"u"&&r(3);var f=Promise;function h(z,re){re&&z.then(function(Z){re(null,Z)},function(Z){re(Z)})}function d(z,re,Z){typeof re=="function"&&z.then(re),typeof Z=="function"&&z.catch(Z)}function p(z){return typeof z!="string"&&(console.warn(z+" used as a key, but it is not a string."),z=String(z)),z}function v(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",m=void 0,g={},x=Object.prototype.toString,b="readonly",S="readwrite";function w(z){for(var re=z.length,Z=new ArrayBuffer(re),oe=new Uint8Array(Z),fe=0;fe<re;fe++)oe[fe]=z.charCodeAt(fe);return Z}function A(z){return new f(function(re){var Z=z.transaction(y,S),oe=u([""]);Z.objectStore(y).put(oe,"key"),Z.onabort=function(fe){fe.preventDefault(),fe.stopPropagation(),re(!1)},Z.oncomplete=function(){var fe=navigator.userAgent.match(/Chrome\/(\d+)/),ae=navigator.userAgent.match(/Edge\//);re(ae||!fe||parseInt(fe[1],10)>=43)}}).catch(function(){return!1})}function C(z){return typeof m=="boolean"?f.resolve(m):A(z).then(function(re){return m=re,m})}function O(z){var re=g[z.name],Z={};Z.promise=new f(function(oe,fe){Z.resolve=oe,Z.reject=fe}),re.deferredOperations.push(Z),re.dbReady?re.dbReady=re.dbReady.then(function(){return Z.promise}):re.dbReady=Z.promise}function P(z){var re=g[z.name],Z=re.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function I(z,re){var Z=g[z.name],oe=Z.deferredOperations.pop();if(oe)return oe.reject(re),oe.promise}function R(z,re){return new f(function(Z,oe){if(g[z.name]=g[z.name]||V(),z.db)if(re)O(z),z.db.close();else return Z(z.db);var fe=[z.name];re&&fe.push(z.version);var ae=c.open.apply(c,fe);re&&(ae.onupgradeneeded=function(be){var Ie=ae.result;try{Ie.createObjectStore(z.storeName),be.oldVersion<=1&&Ie.createObjectStore(y)}catch(De){if(De.name==="ConstraintError")console.warn('The database "'+z.name+'" has been upgraded from version '+be.oldVersion+" to version "+be.newVersion+', but the storage "'+z.storeName+'" already exists.');else throw De}}),ae.onerror=function(be){be.preventDefault(),oe(ae.error)},ae.onsuccess=function(){var be=ae.result;be.onversionchange=function(Ie){Ie.target.close()},Z(be),P(z)}})}function F(z){return R(z,!1)}function D(z){return R(z,!0)}function L(z,re){if(!z.db)return!0;var Z=!z.db.objectStoreNames.contains(z.storeName),oe=z.version<z.db.version,fe=z.version>z.db.version;if(oe&&(z.version!==re&&console.warn('The database "'+z.name+`" can't be downgraded from version `+z.db.version+" to version "+z.version+"."),z.version=z.db.version),fe||Z){if(Z){var ae=z.db.version+1;ae>z.version&&(z.version=ae)}return!0}return!1}function U(z){return new f(function(re,Z){var oe=new FileReader;oe.onerror=Z,oe.onloadend=function(fe){var ae=btoa(fe.target.result||"");re({__local_forage_encoded_blob:!0,data:ae,type:z.type})},oe.readAsBinaryString(z)})}function Y(z){var re=w(atob(z.data));return u([re],{type:z.type})}function ee(z){return z&&z.__local_forage_encoded_blob}function J(z){var re=this,Z=re._initReady().then(function(){var oe=g[re._dbInfo.name];if(oe&&oe.dbReady)return oe.dbReady});return d(Z,z,z),Z}function X(z){O(z);for(var re=g[z.name],Z=re.forages,oe=0;oe<Z.length;oe++){var fe=Z[oe];fe._dbInfo.db&&(fe._dbInfo.db.close(),fe._dbInfo.db=null)}return z.db=null,F(z).then(function(ae){return z.db=ae,L(z)?D(z):ae}).then(function(ae){z.db=re.db=ae;for(var be=0;be<Z.length;be++)Z[be]._dbInfo.db=ae}).catch(function(ae){throw I(z,ae),ae})}function M(z,re,Z,oe){oe===void 0&&(oe=1);try{var fe=z.db.transaction(z.storeName,re);Z(null,fe)}catch(ae){if(oe>0&&(!z.db||ae.name==="InvalidStateError"||ae.name==="NotFoundError"))return f.resolve().then(function(){if(!z.db||ae.name==="NotFoundError"&&!z.db.objectStoreNames.contains(z.storeName)&&z.version<=z.db.version)return z.db&&(z.version=z.db.version+1),D(z)}).then(function(){return X(z).then(function(){M(z,re,Z,oe-1)})}).catch(Z);Z(ae)}}function V(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function $(z){var re=this,Z={db:null};if(z)for(var oe in z)Z[oe]=z[oe];var fe=g[Z.name];fe||(fe=V(),g[Z.name]=fe),fe.forages.push(re),re._initReady||(re._initReady=re.ready,re.ready=J);var ae=[];function be(){return f.resolve()}for(var Ie=0;Ie<fe.forages.length;Ie++){var De=fe.forages[Ie];De!==re&&ae.push(De._initReady().catch(be))}var Me=fe.forages.slice(0);return f.all(ae).then(function(){return Z.db=fe.db,F(Z)}).then(function(Be){return Z.db=Be,L(Z,re._defaultConfig.version)?D(Z):Be}).then(function(Be){Z.db=fe.db=Be,re._dbInfo=Z;for(var Qe=0;Qe<Me.length;Qe++){var Pt=Me[Qe];Pt!==re&&(Pt._dbInfo.db=Z.db,Pt._dbInfo.version=Z.version)}})}function j(z,re){var Z=this;z=p(z);var oe=new f(function(fe,ae){Z.ready().then(function(){M(Z._dbInfo,b,function(be,Ie){if(be)return ae(be);try{var De=Ie.objectStore(Z._dbInfo.storeName),Me=De.get(z);Me.onsuccess=function(){var Be=Me.result;Be===void 0&&(Be=null),ee(Be)&&(Be=Y(Be)),fe(Be)},Me.onerror=function(){ae(Me.error)}}catch(Be){ae(Be)}})}).catch(ae)});return h(oe,re),oe}function te(z,re){var Z=this,oe=new f(function(fe,ae){Z.ready().then(function(){M(Z._dbInfo,b,function(be,Ie){if(be)return ae(be);try{var De=Ie.objectStore(Z._dbInfo.storeName),Me=De.openCursor(),Be=1;Me.onsuccess=function(){var Qe=Me.result;if(Qe){var Pt=Qe.value;ee(Pt)&&(Pt=Y(Pt));var Kt=z(Pt,Qe.key,Be++);Kt!==void 0?fe(Kt):Qe.continue()}else fe()},Me.onerror=function(){ae(Me.error)}}catch(Qe){ae(Qe)}})}).catch(ae)});return h(oe,re),oe}function ie(z,re,Z){var oe=this;z=p(z);var fe=new f(function(ae,be){var Ie;oe.ready().then(function(){return Ie=oe._dbInfo,x.call(re)==="[object Blob]"?C(Ie.db).then(function(De){return De?re:U(re)}):re}).then(function(De){M(oe._dbInfo,S,function(Me,Be){if(Me)return be(Me);try{var Qe=Be.objectStore(oe._dbInfo.storeName);De===null&&(De=void 0);var Pt=Qe.put(De,z);Be.oncomplete=function(){De===void 0&&(De=null),ae(De)},Be.onabort=Be.onerror=function(){var Kt=Pt.error?Pt.error:Pt.transaction.error;be(Kt)}}catch(Kt){be(Kt)}})}).catch(be)});return h(fe,Z),fe}function de(z,re){var Z=this;z=p(z);var oe=new f(function(fe,ae){Z.ready().then(function(){M(Z._dbInfo,S,function(be,Ie){if(be)return ae(be);try{var De=Ie.objectStore(Z._dbInfo.storeName),Me=De.delete(z);Ie.oncomplete=function(){fe()},Ie.onerror=function(){ae(Me.error)},Ie.onabort=function(){var Be=Me.error?Me.error:Me.transaction.error;ae(Be)}}catch(Be){ae(Be)}})}).catch(ae)});return h(oe,re),oe}function he(z){var re=this,Z=new f(function(oe,fe){re.ready().then(function(){M(re._dbInfo,S,function(ae,be){if(ae)return fe(ae);try{var Ie=be.objectStore(re._dbInfo.storeName),De=Ie.clear();be.oncomplete=function(){oe()},be.onabort=be.onerror=function(){var Me=De.error?De.error:De.transaction.error;fe(Me)}}catch(Me){fe(Me)}})}).catch(fe)});return h(Z,z),Z}function Ee(z){var re=this,Z=new f(function(oe,fe){re.ready().then(function(){M(re._dbInfo,b,function(ae,be){if(ae)return fe(ae);try{var Ie=be.objectStore(re._dbInfo.storeName),De=Ie.count();De.onsuccess=function(){oe(De.result)},De.onerror=function(){fe(De.error)}}catch(Me){fe(Me)}})}).catch(fe)});return h(Z,z),Z}function Oe(z,re){var Z=this,oe=new f(function(fe,ae){if(z<0){fe(null);return}Z.ready().then(function(){M(Z._dbInfo,b,function(be,Ie){if(be)return ae(be);try{var De=Ie.objectStore(Z._dbInfo.storeName),Me=!1,Be=De.openKeyCursor();Be.onsuccess=function(){var Qe=Be.result;if(!Qe){fe(null);return}z===0||Me?fe(Qe.key):(Me=!0,Qe.advance(z))},Be.onerror=function(){ae(Be.error)}}catch(Qe){ae(Qe)}})}).catch(ae)});return h(oe,re),oe}function ye(z){var re=this,Z=new f(function(oe,fe){re.ready().then(function(){M(re._dbInfo,b,function(ae,be){if(ae)return fe(ae);try{var Ie=be.objectStore(re._dbInfo.storeName),De=Ie.openKeyCursor(),Me=[];De.onsuccess=function(){var Be=De.result;if(!Be){oe(Me);return}Me.push(Be.key),Be.continue()},De.onerror=function(){fe(De.error)}}catch(Be){fe(Be)}})}).catch(fe)});return h(Z,z),Z}function Ae(z,re){re=v.apply(this,arguments);var Z=this.config();z=typeof z!="function"&&z||{},z.name||(z.name=z.name||Z.name,z.storeName=z.storeName||Z.storeName);var oe=this,fe;if(!z.name)fe=f.reject("Invalid arguments");else{var ae=z.name===Z.name&&oe._dbInfo.db,be=ae?f.resolve(oe._dbInfo.db):F(z).then(function(Ie){var De=g[z.name],Me=De.forages;De.db=Ie;for(var Be=0;Be<Me.length;Be++)Me[Be]._dbInfo.db=Ie;return Ie});z.storeName?fe=be.then(function(Ie){if(Ie.objectStoreNames.contains(z.storeName)){var De=Ie.version+1;O(z);var Me=g[z.name],Be=Me.forages;Ie.close();for(var Qe=0;Qe<Be.length;Qe++){var Pt=Be[Qe];Pt._dbInfo.db=null,Pt._dbInfo.version=De}var Kt=new f(function(Zt,Ir){var pr=c.open(z.name,De);pr.onerror=function(xi){var ks=pr.result;ks.close(),Ir(xi)},pr.onupgradeneeded=function(){var xi=pr.result;xi.deleteObjectStore(z.storeName)},pr.onsuccess=function(){var xi=pr.result;xi.close(),Zt(xi)}});return Kt.then(function(Zt){Me.db=Zt;for(var Ir=0;Ir<Be.length;Ir++){var pr=Be[Ir];pr._dbInfo.db=Zt,P(pr._dbInfo)}}).catch(function(Zt){throw(I(z,Zt)||f.resolve()).catch(function(){}),Zt})}}):fe=be.then(function(Ie){O(z);var De=g[z.name],Me=De.forages;Ie.close();for(var Be=0;Be<Me.length;Be++){var Qe=Me[Be];Qe._dbInfo.db=null}var Pt=new f(function(Kt,Zt){var Ir=c.deleteDatabase(z.name);Ir.onerror=function(){var pr=Ir.result;pr&&pr.close(),Zt(Ir.error)},Ir.onblocked=function(){console.warn('dropInstance blocked for database "'+z.name+'" until all open connections are closed')},Ir.onsuccess=function(){var pr=Ir.result;pr&&pr.close(),Kt(pr)}});return Pt.then(function(Kt){De.db=Kt;for(var Zt=0;Zt<Me.length;Zt++){var Ir=Me[Zt];P(Ir._dbInfo)}}).catch(function(Kt){throw(I(z,Kt)||f.resolve()).catch(function(){}),Kt})})}return h(fe,re),fe}var _e={_driver:"asyncStorage",_initStorage:$,_support:l(),iterate:te,getItem:j,setItem:ie,removeItem:de,clear:he,length:Ee,key:Oe,keys:ye,dropInstance:Ae};function we(){return typeof openDatabase=="function"}var $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xe="~~local_forage_type~",ke=/^~~local_forage_type~([^~]+)~/,at="__lfsc__:",vt=at.length,gt="arbf",tt="blob",ot="si08",dt="ui08",Xt="uic8",rr="si16",qt="si32",Vt="ur16",bt="ui32",or="fl32",ge="fl64",Se=vt+gt.length,Re=Object.prototype.toString;function He(z){var re=z.length*.75,Z=z.length,oe,fe=0,ae,be,Ie,De;z[z.length-1]==="="&&(re--,z[z.length-2]==="="&&re--);var Me=new ArrayBuffer(re),Be=new Uint8Array(Me);for(oe=0;oe<Z;oe+=4)ae=$e.indexOf(z[oe]),be=$e.indexOf(z[oe+1]),Ie=$e.indexOf(z[oe+2]),De=$e.indexOf(z[oe+3]),Be[fe++]=ae<<2|be>>4,Be[fe++]=(be&15)<<4|Ie>>2,Be[fe++]=(Ie&3)<<6|De&63;return Me}function je(z){var re=new Uint8Array(z),Z="",oe;for(oe=0;oe<re.length;oe+=3)Z+=$e[re[oe]>>2],Z+=$e[(re[oe]&3)<<4|re[oe+1]>>4],Z+=$e[(re[oe+1]&15)<<2|re[oe+2]>>6],Z+=$e[re[oe+2]&63];return re.length%3===2?Z=Z.substring(0,Z.length-1)+"=":re.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function rt(z,re){var Z="";if(z&&(Z=Re.call(z)),z&&(Z==="[object ArrayBuffer]"||z.buffer&&Re.call(z.buffer)==="[object ArrayBuffer]")){var oe,fe=at;z instanceof ArrayBuffer?(oe=z,fe+=gt):(oe=z.buffer,Z==="[object Int8Array]"?fe+=ot:Z==="[object Uint8Array]"?fe+=dt:Z==="[object Uint8ClampedArray]"?fe+=Xt:Z==="[object Int16Array]"?fe+=rr:Z==="[object Uint16Array]"?fe+=Vt:Z==="[object Int32Array]"?fe+=qt:Z==="[object Uint32Array]"?fe+=bt:Z==="[object Float32Array]"?fe+=or:Z==="[object Float64Array]"?fe+=ge:re(new Error("Failed to get type for BinaryArray"))),re(fe+je(oe))}else if(Z==="[object Blob]"){var ae=new FileReader;ae.onload=function(){var be=Xe+z.type+"~"+je(this.result);re(at+tt+be)},ae.readAsArrayBuffer(z)}else try{re(JSON.stringify(z))}catch(be){console.error("Couldn't convert value into a JSON string: ",z),re(null,be)}}function er(z){if(z.substring(0,vt)!==at)return JSON.parse(z);var re=z.substring(Se),Z=z.substring(vt,Se),oe;if(Z===tt&&ke.test(re)){var fe=re.match(ke);oe=fe[1],re=re.substring(fe[0].length)}var ae=He(re);switch(Z){case gt:return ae;case tt:return u([ae],{type:oe});case ot:return new Int8Array(ae);case dt:return new Uint8Array(ae);case Xt:return new Uint8ClampedArray(ae);case rr:return new Int16Array(ae);case Vt:return new Uint16Array(ae);case qt:return new Int32Array(ae);case bt:return new Uint32Array(ae);case or:return new Float32Array(ae);case ge:return new Float64Array(ae);default:throw new Error("Unkown type: "+Z)}}var wr={serialize:rt,deserialize:er,stringToBuffer:He,bufferToString:je};function Rn(z,re,Z,oe){z.executeSql("CREATE TABLE IF NOT EXISTS "+re.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,oe)}function In(z){var re=this,Z={db:null};if(z)for(var oe in z)Z[oe]=typeof z[oe]!="string"?z[oe].toString():z[oe];var fe=new f(function(ae,be){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ie){return be(Ie)}Z.db.transaction(function(Ie){Rn(Ie,Z,function(){re._dbInfo=Z,ae()},function(De,Me){be(Me)})},be)});return Z.serializer=wr,fe}function yr(z,re,Z,oe,fe,ae){z.executeSql(Z,oe,fe,function(be,Ie){Ie.code===Ie.SYNTAX_ERR?be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[re.storeName],function(De,Me){Me.rows.length?ae(De,Ie):Rn(De,re,function(){De.executeSql(Z,oe,fe,ae)},ae)},ae):ae(be,Ie)},ae)}function Ji(z,re){var Z=this;z=p(z);var oe=new f(function(fe,ae){Z.ready().then(function(){var be=Z._dbInfo;be.db.transaction(function(Ie){yr(Ie,be,"SELECT * FROM "+be.storeName+" WHERE key = ? LIMIT 1",[z],function(De,Me){var Be=Me.rows.length?Me.rows.item(0).value:null;Be&&(Be=be.serializer.deserialize(Be)),fe(Be)},function(De,Me){ae(Me)})})}).catch(ae)});return h(oe,re),oe}function ni(z,re){var Z=this,oe=new f(function(fe,ae){Z.ready().then(function(){var be=Z._dbInfo;be.db.transaction(function(Ie){yr(Ie,be,"SELECT * FROM "+be.storeName,[],function(De,Me){for(var Be=Me.rows,Qe=Be.length,Pt=0;Pt<Qe;Pt++){var Kt=Be.item(Pt),Zt=Kt.value;if(Zt&&(Zt=be.serializer.deserialize(Zt)),Zt=z(Zt,Kt.key,Pt+1),Zt!==void 0){fe(Zt);return}}fe()},function(De,Me){ae(Me)})})}).catch(ae)});return h(oe,re),oe}function gn(z,re,Z,oe){var fe=this;z=p(z);var ae=new f(function(be,Ie){fe.ready().then(function(){re===void 0&&(re=null);var De=re,Me=fe._dbInfo;Me.serializer.serialize(re,function(Be,Qe){Qe?Ie(Qe):Me.db.transaction(function(Pt){yr(Pt,Me,"INSERT OR REPLACE INTO "+Me.storeName+" (key, value) VALUES (?, ?)",[z,Be],function(){be(De)},function(Kt,Zt){Ie(Zt)})},function(Pt){if(Pt.code===Pt.QUOTA_ERR){if(oe>0){be(gn.apply(fe,[z,De,Z,oe-1]));return}Ie(Pt)}})})}).catch(Ie)});return h(ae,Z),ae}function ea(z,re,Z){return gn.apply(this,[z,re,Z,1])}function xa(z,re){var Z=this;z=p(z);var oe=new f(function(fe,ae){Z.ready().then(function(){var be=Z._dbInfo;be.db.transaction(function(Ie){yr(Ie,be,"DELETE FROM "+be.storeName+" WHERE key = ?",[z],function(){fe()},function(De,Me){ae(Me)})})}).catch(ae)});return h(oe,re),oe}function xo(z){var re=this,Z=new f(function(oe,fe){re.ready().then(function(){var ae=re._dbInfo;ae.db.transaction(function(be){yr(be,ae,"DELETE FROM "+ae.storeName,[],function(){oe()},function(Ie,De){fe(De)})})}).catch(fe)});return h(Z,z),Z}function yi(z){var re=this,Z=new f(function(oe,fe){re.ready().then(function(){var ae=re._dbInfo;ae.db.transaction(function(be){yr(be,ae,"SELECT COUNT(key) as c FROM "+ae.storeName,[],function(Ie,De){var Me=De.rows.item(0).c;oe(Me)},function(Ie,De){fe(De)})})}).catch(fe)});return h(Z,z),Z}function Is(z,re){var Z=this,oe=new f(function(fe,ae){Z.ready().then(function(){var be=Z._dbInfo;be.db.transaction(function(Ie){yr(Ie,be,"SELECT key FROM "+be.storeName+" WHERE id = ? LIMIT 1",[z+1],function(De,Me){var Be=Me.rows.length?Me.rows.item(0).key:null;fe(Be)},function(De,Me){ae(Me)})})}).catch(ae)});return h(oe,re),oe}function _i(z){var re=this,Z=new f(function(oe,fe){re.ready().then(function(){var ae=re._dbInfo;ae.db.transaction(function(be){yr(be,ae,"SELECT key FROM "+ae.storeName,[],function(Ie,De){for(var Me=[],Be=0;Be<De.rows.length;Be++)Me.push(De.rows.item(Be).key);oe(Me)},function(Ie,De){fe(De)})})}).catch(fe)});return h(Z,z),Z}function Ga(z){return new f(function(re,Z){z.transaction(function(oe){oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(fe,ae){for(var be=[],Ie=0;Ie<ae.rows.length;Ie++)be.push(ae.rows.item(Ie).name);re({db:z,storeNames:be})},function(fe,ae){Z(ae)})},function(oe){Z(oe)})})}function ii(z,re){re=v.apply(this,arguments);var Z=this.config();z=typeof z!="function"&&z||{},z.name||(z.name=z.name||Z.name,z.storeName=z.storeName||Z.storeName);var oe=this,fe;return z.name?fe=new f(function(ae){var be;z.name===Z.name?be=oe._dbInfo.db:be=openDatabase(z.name,"","",0),z.storeName?ae({db:be,storeNames:[z.storeName]}):ae(Ga(be))}).then(function(ae){return new f(function(be,Ie){ae.db.transaction(function(De){function Me(Kt){return new f(function(Zt,Ir){De.executeSql("DROP TABLE IF EXISTS "+Kt,[],function(){Zt()},function(pr,xi){Ir(xi)})})}for(var Be=[],Qe=0,Pt=ae.storeNames.length;Qe<Pt;Qe++)Be.push(Me(ae.storeNames[Qe]));f.all(Be).then(function(){be()}).catch(function(Kt){Ie(Kt)})},function(De){Ie(De)})})}):fe=f.reject("Invalid arguments"),h(fe,re),fe}var Hr={_driver:"webSQLStorage",_initStorage:In,_support:we(),iterate:ni,getItem:Ji,setItem:ea,removeItem:xa,clear:xo,length:yi,key:Is,keys:_i,dropInstance:ii};function Li(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ul(z,re){var Z=z.name+"/";return z.storeName!==re.storeName&&(Z+=z.storeName+"/"),Z}function sh(){var z="_localforage_support_test";try{return localStorage.setItem(z,!0),localStorage.removeItem(z),!1}catch{return!0}}function A_(){return!sh()||localStorage.length>0}function C_(z){var re=this,Z={};if(z)for(var oe in z)Z[oe]=z[oe];return Z.keyPrefix=Ul(z,re._defaultConfig),A_()?(re._dbInfo=Z,Z.serializer=wr,f.resolve()):f.reject()}function T_(z){var re=this,Z=re.ready().then(function(){for(var oe=re._dbInfo.keyPrefix,fe=localStorage.length-1;fe>=0;fe--){var ae=localStorage.key(fe);ae.indexOf(oe)===0&&localStorage.removeItem(ae)}});return h(Z,z),Z}function O_(z,re){var Z=this;z=p(z);var oe=Z.ready().then(function(){var fe=Z._dbInfo,ae=localStorage.getItem(fe.keyPrefix+z);return ae&&(ae=fe.serializer.deserialize(ae)),ae});return h(oe,re),oe}function P_(z,re){var Z=this,oe=Z.ready().then(function(){for(var fe=Z._dbInfo,ae=fe.keyPrefix,be=ae.length,Ie=localStorage.length,De=1,Me=0;Me<Ie;Me++){var Be=localStorage.key(Me);if(Be.indexOf(ae)===0){var Qe=localStorage.getItem(Be);if(Qe&&(Qe=fe.serializer.deserialize(Qe)),Qe=z(Qe,Be.substring(be),De++),Qe!==void 0)return Qe}}});return h(oe,re),oe}function R_(z,re){var Z=this,oe=Z.ready().then(function(){var fe=Z._dbInfo,ae;try{ae=localStorage.key(z)}catch{ae=null}return ae&&(ae=ae.substring(fe.keyPrefix.length)),ae});return h(oe,re),oe}function e0(z){var re=this,Z=re.ready().then(function(){for(var oe=re._dbInfo,fe=localStorage.length,ae=[],be=0;be<fe;be++){var Ie=localStorage.key(be);Ie.indexOf(oe.keyPrefix)===0&&ae.push(Ie.substring(oe.keyPrefix.length))}return ae});return h(Z,z),Z}function I_(z){var re=this,Z=re.keys().then(function(oe){return oe.length});return h(Z,z),Z}function F_(z,re){var Z=this;z=p(z);var oe=Z.ready().then(function(){var fe=Z._dbInfo;localStorage.removeItem(fe.keyPrefix+z)});return h(oe,re),oe}function k_(z,re,Z){var oe=this;z=p(z);var fe=oe.ready().then(function(){re===void 0&&(re=null);var ae=re;return new f(function(be,Ie){var De=oe._dbInfo;De.serializer.serialize(re,function(Me,Be){if(Be)Ie(Be);else try{localStorage.setItem(De.keyPrefix+z,Me),be(ae)}catch(Qe){(Qe.name==="QuotaExceededError"||Qe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ie(Qe),Ie(Qe)}})})});return h(fe,Z),fe}function D_(z,re){if(re=v.apply(this,arguments),z=typeof z!="function"&&z||{},!z.name){var Z=this.config();z.name=z.name||Z.name,z.storeName=z.storeName||Z.storeName}var oe=this,fe;return z.name?fe=new f(function(ae){z.storeName?ae(Ul(z,oe._defaultConfig)):ae(z.name+"/")}).then(function(ae){for(var be=localStorage.length-1;be>=0;be--){var Ie=localStorage.key(be);Ie.indexOf(ae)===0&&localStorage.removeItem(Ie)}}):fe=f.reject("Invalid arguments"),h(fe,re),fe}var M_={_driver:"localStorageWrapper",_initStorage:C_,_support:Li(),iterate:P_,getItem:O_,setItem:k_,removeItem:F_,clear:T_,length:I_,key:R_,keys:e0,dropInstance:D_},L_=function(re,Z){return re===Z||typeof re=="number"&&typeof Z=="number"&&isNaN(re)&&isNaN(Z)},nc=function(re,Z){for(var oe=re.length,fe=0;fe<oe;){if(L_(re[fe],Z))return!0;fe++}return!1},t0=Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"},bo={},r0={},Fs={INDEXEDDB:_e,WEBSQL:Hr,LOCALSTORAGE:M_},B_=[Fs.INDEXEDDB._driver,Fs.WEBSQL._driver,Fs.LOCALSTORAGE._driver],jl=["dropInstance"],ic=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(jl),n0={description:"",driver:B_.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function N_(z,re){z[re]=function(){var Z=arguments;return z.ready().then(function(){return z[re].apply(z,Z)})}}function lh(){for(var z=1;z<arguments.length;z++){var re=arguments[z];if(re)for(var Z in re)re.hasOwnProperty(Z)&&(t0(re[Z])?arguments[0][Z]=re[Z].slice():arguments[0][Z]=re[Z])}return arguments[0]}var U_=function(){function z(re){o(this,z);for(var Z in Fs)if(Fs.hasOwnProperty(Z)){var oe=Fs[Z],fe=oe._driver;this[Z]=fe,bo[fe]||this.defineDriver(oe)}this._defaultConfig=lh({},n0),this._config=lh({},this._defaultConfig,re),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return z.prototype.config=function(Z){if((typeof Z>"u"?"undefined":a(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var oe in Z){if(oe==="storeName"&&(Z[oe]=Z[oe].replace(/\W/g,"_")),oe==="version"&&typeof Z[oe]!="number")return new Error("Database version must be a number.");this._config[oe]=Z[oe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},z.prototype.defineDriver=function(Z,oe,fe){var ae=new f(function(be,Ie){try{var De=Z._driver,Me=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ie(Me);return}for(var Be=ic.concat("_initStorage"),Qe=0,Pt=Be.length;Qe<Pt;Qe++){var Kt=Be[Qe],Zt=!nc(jl,Kt);if((Zt||Z[Kt])&&typeof Z[Kt]!="function"){Ie(Me);return}}var Ir=function(){for(var ks=function(a0){return function(){var V_=new Error("Method "+a0+" is not implemented by the current driver"),o0=f.reject(V_);return h(o0,arguments[arguments.length-1]),o0}},uh=0,i0=jl.length;uh<i0;uh++){var ac=jl[uh];Z[ac]||(Z[ac]=ks(ac))}};Ir();var pr=function(ks){bo[De]&&console.info("Redefining LocalForage driver: "+De),bo[De]=Z,r0[De]=ks,be()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(pr,Ie):pr(!!Z._support):pr(!0)}catch(xi){Ie(xi)}});return d(ae,oe,fe),ae},z.prototype.driver=function(){return this._driver||null},z.prototype.getDriver=function(Z,oe,fe){var ae=bo[Z]?f.resolve(bo[Z]):f.reject(new Error("Driver not found."));return d(ae,oe,fe),ae},z.prototype.getSerializer=function(Z){var oe=f.resolve(wr);return d(oe,Z),oe},z.prototype.ready=function(Z){var oe=this,fe=oe._driverSet.then(function(){return oe._ready===null&&(oe._ready=oe._initDriver()),oe._ready});return d(fe,Z,Z),fe},z.prototype.setDriver=function(Z,oe,fe){var ae=this;t0(Z)||(Z=[Z]);var be=this._getSupportedDrivers(Z);function Ie(){ae._config.driver=ae.driver()}function De(Qe){return ae._extend(Qe),Ie(),ae._ready=ae._initStorage(ae._config),ae._ready}function Me(Qe){return function(){var Pt=0;function Kt(){for(;Pt<Qe.length;){var Zt=Qe[Pt];return Pt++,ae._dbInfo=null,ae._ready=null,ae.getDriver(Zt).then(De).catch(Kt)}Ie();var Ir=new Error("No available storage method found.");return ae._driverSet=f.reject(Ir),ae._driverSet}return Kt()}}var Be=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Be.then(function(){var Qe=be[0];return ae._dbInfo=null,ae._ready=null,ae.getDriver(Qe).then(function(Pt){ae._driver=Pt._driver,Ie(),ae._wrapLibraryMethodsWithReady(),ae._initDriver=Me(be)})}).catch(function(){Ie();var Qe=new Error("No available storage method found.");return ae._driverSet=f.reject(Qe),ae._driverSet}),d(this._driverSet,oe,fe),this._driverSet},z.prototype.supports=function(Z){return!!r0[Z]},z.prototype._extend=function(Z){lh(this,Z)},z.prototype._getSupportedDrivers=function(Z){for(var oe=[],fe=0,ae=Z.length;fe<ae;fe++){var be=Z[fe];this.supports(be)&&oe.push(be)}return oe},z.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,oe=ic.length;Z<oe;Z++)N_(this,ic[Z])},z.prototype.createInstance=function(Z){return new z(Z)},z}(),j_=new U_;n.exports=j_},{3:3}]},{},[4])(4)})})(I8);var Bu=I8.exports;const Ko=gi(Bu);var BT={exports:{}},F8=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},Mae=F8,Ku=Object.prototype.toString;function NT(t){return Ku.call(t)==="[object Array]"}function QE(t){return typeof t>"u"}function Lae(t){return t!==null&&!QE(t)&&t.constructor!==null&&!QE(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Bae(t){return Ku.call(t)==="[object ArrayBuffer]"}function Nae(t){return typeof FormData<"u"&&t instanceof FormData}function Uae(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function jae(t){return typeof t=="string"}function $ae(t){return typeof t=="number"}function k8(t){return t!==null&&typeof t=="object"}function rg(t){if(Ku.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Vae(t){return Ku.call(t)==="[object Date]"}function Gae(t){return Ku.call(t)==="[object File]"}function Wae(t){return Ku.call(t)==="[object Blob]"}function D8(t){return Ku.call(t)==="[object Function]"}function zae(t){return k8(t)&&D8(t.pipe)}function Hae(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Xae(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Yae(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function UT(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),NT(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function JE(){var t={};function e(i,a){rg(t[a])&&rg(i)?t[a]=JE(t[a],i):rg(i)?t[a]=JE({},i):NT(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)UT(arguments[r],e);return t}function qae(t,e,r){return UT(e,function(i,a){r&&typeof i=="function"?t[a]=Mae(i,r):t[a]=i}),t}function Kae(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var ma={isArray:NT,isArrayBuffer:Bae,isBuffer:Lae,isFormData:Nae,isArrayBufferView:Uae,isString:jae,isNumber:$ae,isObject:k8,isPlainObject:rg,isUndefined:QE,isDate:Vae,isFile:Gae,isBlob:Wae,isFunction:D8,isStream:zae,isURLSearchParams:Hae,isStandardBrowserEnv:Yae,forEach:UT,merge:JE,extend:qae,trim:Xae,stripBOM:Kae},bc=ma;function uD(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var M8=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(bc.isURLSearchParams(r))i=r.toString();else{var a=[];bc.forEach(r,function(c,l){c===null||typeof c>"u"||(bc.isArray(c)?l=l+"[]":c=[c],bc.forEach(c,function(f){bc.isDate(f)?f=f.toISOString():bc.isObject(f)&&(f=JSON.stringify(f)),a.push(uD(l)+"="+uD(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Zae=ma;function ny(){this.handlers=[]}ny.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ny.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ny.prototype.forEach=function(e){Zae.forEach(this.handlers,function(n){n!==null&&e(n)})};var Qae=ny,Jae=ma,eoe=function(e,r){Jae.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},L8=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},T1,cD;function B8(){if(cD)return T1;cD=1;var t=L8;return T1=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},T1}var O1,fD;function toe(){if(fD)return O1;fD=1;var t=B8();return O1=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},O1}var P1,hD;function roe(){if(hD)return P1;hD=1;var t=ma;return P1=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(s)&&l.push("domain="+s),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),P1}var R1,dD;function noe(){return dD||(dD=1,R1=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),R1}var I1,pD;function ioe(){return pD||(pD=1,I1=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),I1}var F1,vD;function aoe(){if(vD)return F1;vD=1;var t=noe(),e=ioe();return F1=function(n,i){return n&&!t(i)?e(n,i):i},F1}var k1,gD;function ooe(){if(gD)return k1;gD=1;var t=ma,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return k1=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(l){if(s=l.indexOf(":"),a=t.trim(l.substr(0,s)).toLowerCase(),o=t.trim(l.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},k1}var D1,mD;function soe(){if(mD)return D1;mD=1;var t=ma;return D1=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=t.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),D1}var M1,yD;function iy(){if(yD)return M1;yD=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,M1=t,M1}var L1,_D;function xD(){if(_D)return L1;_D=1;var t=ma,e=toe(),r=roe(),n=M8,i=aoe(),a=ooe(),o=soe(),s=B8(),c=ay(),l=iy();return L1=function(f){return new Promise(function(d,p){var v=f.data,y=f.headers,m=f.responseType,g;function x(){f.cancelToken&&f.cancelToken.unsubscribe(g),f.signal&&f.signal.removeEventListener("abort",g)}t.isFormData(v)&&delete y["Content-Type"];var b=new XMLHttpRequest;if(f.auth){var S=f.auth.username||"",w=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";y.Authorization="Basic "+btoa(S+":"+w)}var A=i(f.baseURL,f.url);b.open(f.method.toUpperCase(),n(A,f.params,f.paramsSerializer),!0),b.timeout=f.timeout;function C(){if(b){var P="getAllResponseHeaders"in b?a(b.getAllResponseHeaders()):null,I=!m||m==="text"||m==="json"?b.responseText:b.response,R={data:I,status:b.status,statusText:b.statusText,headers:P,config:f,request:b};e(function(D){d(D),x()},function(D){p(D),x()},R),b=null}}if("onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(p(s("Request aborted",f,"ECONNABORTED",b)),b=null)},b.onerror=function(){p(s("Network Error",f,null,b)),b=null},b.ontimeout=function(){var I=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",R=f.transitional||c.transitional;f.timeoutErrorMessage&&(I=f.timeoutErrorMessage),p(s(I,f,R.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},t.isStandardBrowserEnv()){var O=(f.withCredentials||o(A))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;O&&(y[f.xsrfHeaderName]=O)}"setRequestHeader"in b&&t.forEach(y,function(I,R){typeof v>"u"&&R.toLowerCase()==="content-type"?delete y[R]:b.setRequestHeader(R,I)}),t.isUndefined(f.withCredentials)||(b.withCredentials=!!f.withCredentials),m&&m!=="json"&&(b.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&b.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(g=function(P){b&&(p(!P||P&&P.type?new l("canceled"):P),b.abort(),b=null)},f.cancelToken&&f.cancelToken.subscribe(g),f.signal&&(f.signal.aborted?g():f.signal.addEventListener("abort",g))),v||(v=null),b.send(v)})},L1}var B1,bD;function ay(){if(bD)return B1;bD=1;var t=ma,e=eoe,r=L8,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function a(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=xD()),c}function o(c,l,u){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(f){if(f.name!=="SyntaxError")throw f}return(u||JSON.stringify)(c)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(l,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(u,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||u&&u["Content-Type"]==="application/json"?(i(u,"application/json"),o(l)):l}],transformResponse:[function(l){var u=this.transitional||s.transitional,f=u&&u.silentJSONParsing,h=u&&u.forcedJSONParsing,d=!f&&this.responseType==="json";if(d||h&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(p){if(d)throw p.name==="SyntaxError"?r(p,this,"E_JSON_PARSE"):p}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){s.headers[l]={}}),t.forEach(["post","put","patch"],function(l){s.headers[l]=t.merge(n)}),B1=s,B1}var loe=ma,uoe=ay(),coe=function(e,r,n){var i=this||uoe;return loe.forEach(n,function(o){e=o.call(i,e,r)}),e},N1,SD;function N8(){return SD||(SD=1,N1=function(e){return!!(e&&e.__CANCEL__)}),N1}var ED=ma,U1=coe,foe=N8(),hoe=ay(),doe=iy();function j1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new doe("canceled")}var poe=function(e){j1(e),e.headers=e.headers||{},e.data=U1.call(e,e.data,e.headers,e.transformRequest),e.headers=ED.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ED.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||hoe.adapter;return r(e).then(function(i){return j1(e),i.data=U1.call(e,i.data,i.headers,e.transformResponse),i},function(i){return foe(i)||(j1(e),i&&i.response&&(i.response.data=U1.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},sa=ma,U8=function(e,r){r=r||{};var n={};function i(u,f){return sa.isPlainObject(u)&&sa.isPlainObject(f)?sa.merge(u,f):sa.isPlainObject(f)?sa.merge({},f):sa.isArray(f)?f.slice():f}function a(u){if(sa.isUndefined(r[u])){if(!sa.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function o(u){if(!sa.isUndefined(r[u]))return i(void 0,r[u])}function s(u){if(sa.isUndefined(r[u])){if(!sa.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return sa.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=l[f]||a,d=h(f);sa.isUndefined(d)&&h!==c||(n[f]=d)}),n},$1,wD;function j8(){return wD||(wD=1,$1={version:"0.24.0"}),$1}var voe=j8().version,jT={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){jT[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var AD={};jT.transitional=function(e,r,n){function i(a,o){return"[Axios v"+voe+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!AD[o]&&(AD[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function goe(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],c=s===void 0||o(s,a,t);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var moe={assertOptions:goe,validators:jT},$8=ma,yoe=M8,CD=Qae,TD=poe,oy=U8,V8=moe,Sc=V8.validators;function Np(t){this.defaults=t,this.interceptors={request:new CD,response:new CD}}Np.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=oy(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&V8.assertOptions(r,{silentJSONParsing:Sc.transitional(Sc.boolean),forcedJSONParsing:Sc.transitional(Sc.boolean),clarifyTimeoutError:Sc.transitional(Sc.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var a=[];this.interceptors.response.forEach(function(h){a.push(h.fulfilled,h.rejected)});var o;if(!i){var s=[TD,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(a),o=Promise.resolve(e);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{o=TD(c)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Np.prototype.getUri=function(e){return e=oy(this.defaults,e),yoe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};$8.forEach(["delete","get","head","options"],function(e){Np.prototype[e]=function(r,n){return this.request(oy(n||{},{method:e,url:r,data:(n||{}).data}))}});$8.forEach(["post","put","patch"],function(e){Np.prototype[e]=function(r,n,i){return this.request(oy(i||{},{method:e,url:r,data:n}))}});var _oe=Np,V1,OD;function xoe(){if(OD)return V1;OD=1;var t=iy();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},V1=e,V1}var G1,PD;function boe(){return PD||(PD=1,G1=function(e){return function(n){return e.apply(null,n)}}),G1}var W1,RD;function Soe(){return RD||(RD=1,W1=function(e){return typeof e=="object"&&e.isAxiosError===!0}),W1}var ID=ma,Eoe=F8,ng=_oe,woe=U8,Aoe=ay();function G8(t){var e=new ng(t),r=Eoe(ng.prototype.request,e);return ID.extend(r,ng.prototype,e),ID.extend(r,e),r.create=function(i){return G8(woe(t,i))},r}var Zo=G8(Aoe);Zo.Axios=ng;Zo.Cancel=iy();Zo.CancelToken=xoe();Zo.isCancel=N8();Zo.VERSION=j8().version;Zo.all=function(e){return Promise.all(e)};Zo.spread=boe();Zo.isAxiosError=Soe();BT.exports=Zo;BT.exports.default=Zo;var Coe=BT.exports,Toe=Coe;const Ooe=Toe;class Poe{constructor(){this.url="",this.level="all",this.mongoUrl="mongodb://localhost:27017/",this.collection="main",this.isUpload=!0}init(e,r){this.url=e,r&&(this.mongoUrl=r)}setUpload(e){this.isUpload=e}setCollection(e){this.collection=e}setLevel(e){this.level=e.toUpperCase()}upload(e,r,n,i){typeof e!="string"&&this.error("log的第一个参数不是字符串",void 0,!1);let a={log:{info:e,data:r,level:n,now:i},mongoUrl:this.mongoUrl,collection:this.collection};const o=this;this.url!==""&&this.isUpload&&Ooe.post(this.url+"/log",a).then(s=>{o.trace("Logged to cloud.",void 0,!1)}).catch(s=>{o.error("Logging to cloud failed!",void 0,!1)})}clog(e,r,n,i,a,o){const s={all:7,ALL:7,TRACE:6,DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,NONE:0,none:0};s[n]<=s[this.level]&&(console.log("%c%s%c%s%c%s%c %s","color:white;background-color:"+i,"["+n+"]",""," ","color:"+i,"["+a.toLocaleString()+"]","",e),r&&(console.log(r),console.log("------------------------"))),o===void 0&&this.upload(e,r,n,a),o!==void 0&&o&&this.upload(e,r,n,a)}trace(e,r,n){const i=new Date,a="TRACE",o="#005CAF";this.clog(e,r,a,o,i,n)}debug(e,r,n){const i=new Date,a="DEBUG",o="#0089A7";this.clog(e,r,a,o,i,n)}info(e,r,n){const i=new Date,a="INFO",o="#00896C";this.clog(e,r,a,o,i,n)}warn(e,r,n){const i=new Date,a="WARN",o="#DDA52D";this.clog(e,r,a,o,i,n)}error(e,r,n){const i=new Date,a="ERROR",o="#AB3B3A";this.clog(e,r,a,o,i,n)}fatal(e,r,n){const i=new Date,a="FATAL",o="#E16B8C";this.clog(e,r,a,o,i,n)}}var Roe=Poe;const Ioe=gi(Roe),Ge=new Ioe,Foe={common:{yes:"OK",no:"Cancel"},menu:{options:{title:"OPTIONS",pages:{system:{title:"System",options:{autoSpeed:{title:"Autoplay Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},language:{title:"Language"},resetData:{title:"Clear or Reset Data",options:{clearGameSave:"Clear game saving",resetSettings:"Reset settings",clearAll:"Clear all data"},dialogs:{clearGameSave:"Are you sure you want to clear game saving",resetSettings:"Are you sure you want to reset all settings",clearAll:"Are you sure you want to clear all data"}},gameSave:{title:"Import or Export Game Saving and Options",options:{export:"Export game saving and options",import:"Import game saving and options"},dialogs:{import:{title:"Are you sure you want to import game saving and options",tip:"Import game saving",error:"Parse game saving failed"}}},about:{title:"About WebGAL",subTitle:"WebGAL: An Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Display",options:{fullScreen:{title:"Full Screen",options:{on:"ON",off:"OFF"}},textSpeed:{title:"Text Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},textSize:{title:"Text Size",options:{small:"Small",medium:"Medium",large:"Large"}},textFont:{title:"Text Font",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Preview Text Showing",text:"You are previewing the text's font, size and playback speed, now. You can adjust the above options according to your perception."}}},sound:{title:"Sound",options:{volumeMain:{title:"Main Volume"},vocalVolume:{title:"Vocal Volume"},bgmVolume:{title:"BGM Volume"},seVolume:{title:"Sound Effects Volume"},uiSeVolume:{title:"UI Sound Effects Volume"}}}}},saving:{title:"SAVE",isOverwrite:"Are you sure you want to overwrite this save?"},loadSaving:{title:"LOAD"},title:{title:"TITLE"},exit:{title:"BACK"}},title:{start:{title:"START",subtitle:""},continue:{title:"CONTINUE",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"LOAD",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"No saving",buttons:{hide:"Hide",show:"Show",backlog:"Backlog",replay:"Replay",auto:"Auto",forward:"Forward",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Save",load:"Load",options:"Options",title:"Title",titleTips:"Confirm return to the title screen"}},extra:{title:"EXTRA"},r18:{title:"Welcome!",desction:"Please verify that you are 18 years of age or older to enter this site.",agree:"Agree",disagree:"Disagree"}},koe={common:{yes:"はい",no:"いいえ"},menu:{options:{title:"CONFIG",pages:{system:{title:"システム",options:{autoSpeed:{title:"自動再生速度",options:{slow:"遅く",medium:"標準",fast:"速く"}},language:{title:"言語"},resetData:{title:"データの削除またに復元",options:{clearGameSave:"すべてのアーカイブを削除",resetSettings:"デフォルト設置を復元",clearAll:"すべてのデータを削除"},dialogs:{clearGameSave:"アーカイブをクリアしてもよろしいですか？",resetSettings:"デフォルト設定を復元してもよろしいですか？",clearAll:"すべてのデータを削除してもよろしいですか？"}},gameSave:{title:"アーカイブとオプションのインポートまたはエクスポート",options:{export:"アーカイブとオプションのエクスポート",import:"アーカイブとオプションのインポート"},dialogs:{import:{title:"アーカイブとオプションをインポートしますか？",tip:"インポートアーカイブ",error:"アーカイブの解析に失败しました"}}},about:{title:"WebGALについて",subTitle:"WebGAL：開源のウェブ基盤視覚小説エンジン",version:"版数",source:"源コード保管所",contributors:"貢献者",website:"ウェブサイト"}}},display:{title:"ウィンドウ",options:{textSpeed:{title:"テキスト表示速度",options:{slow:"遅く",medium:"標準",fast:"速く"}},textSize:{title:"テキストサイズ",options:{small:"小",medium:"中",large:"大"}},textFont:{title:"フォント",options:{siYuanSimSun:"源ノ明朝",SimHei:"黒体",lxgw:"霞鴎文隷"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"テキスト表示プレビュー",text:"プレビューはテキストボックスのテキストサイズとテキスト表示速度です。上記のオプションでフォントも変更できます。"}}},sound:{title:"サウンド",options:{volumeMain:{title:"MAIN 音量"},vocalVolume:{title:"VOICE 音量"},bgmVolume:{title:"BGM 音量"},seVolume:{title:"SE 音量"},uiSeVolume:{title:"UI 効果音音量"}}}}},saving:{title:"SAVE",isOverwrite:"上書きしますか？"},loadSaving:{title:"LOAD"},title:{title:"HOME"},exit:{title:"BACK"}},title:{start:{title:"初めから",subtitle:"START"},continue:{title:"続きから",subtitle:"CONTINUE"},options:{title:"設定",subtitle:"CONFIG"},load:{title:"ロード",subtitle:"LOAD"},extra:{title:"鑑賞モード",subtitle:"EXTRA"}},gaming:{noSaving:"クイックセーブなし",buttons:{hide:"CLOSE",show:"SHOW",backlog:"LOG",replay:"REPLAY",auto:"AUTO",forward:"SKIP",quicklySave:"QUICK SAVE",quicklyLoad:"QUICK LOAD",save:"SAVE",load:"LOAD",options:"CONFIG",title:"HOME",titleTips:"タイトル画面に戻ることを確認しますか"}},extra:{title:"鑑賞モード"}},Doe={common:{yes:"是",no:"否",cancel:"取消",confirm:"确定"},menu:{options:{title:"选项",pages:{system:{title:"系统",options:{autoSpeed:{title:"自动播放速度",options:{slow:"慢",medium:"中",fast:"快"}},language:{title:"语言"},resetData:{title:"清除或还原数据",options:{clearGameSave:"清除所有存档",resetSettings:"还原默认设置",clearAll:"清除所有数据"},dialogs:{clearGameSave:"确定要清除存档吗",resetSettings:"确定要还原默认设置吗",clearAll:"确定要清除所有数据吗"}},gameSave:{title:"导入或导出存档与选项",options:{export:"导出存档与选项",import:"导入存档与选项"},dialogs:{import:{title:"确定要导入存档与选项吗",tip:"导入存档",error:"存档解析失败"}}},about:{title:"关于 WebGAL",subTitle:"WebGAL：开源的网页端视觉小说引擎",version:"版本号",source:"源代码仓库",contributors:"贡献者",website:"网站"}}},display:{title:"显示",options:{fullScreen:{title:"全屏模式",options:{on:"开启",off:"关闭"}},textSpeed:{title:"文字显示速度",options:{slow:"慢",medium:"中",fast:"快"}},textSize:{title:"文本大小",options:{small:"小",medium:"中",large:"大"}},textFont:{title:"文本字体",options:{siYuanSimSun:"思源宋体",SimHei:"黑体",lxgw:"霞鹜文楷"}},textboxOpacity:{title:"文本框不透明度"},textPreview:{title:"文本显示预览",text:"现在预览的是文本框字体大小和播放速度的情况，您可以根据您的观感调整上面的选项。"}}},sound:{title:"音频",options:{volumeMain:{title:"主音量"},vocalVolume:{title:"语音音量"},bgmVolume:{title:"背景音乐音量"},seVolume:{title:"音效音量"},uiSeVolume:{title:"用户界面音效音量"},voiceOption:{title:"是否中断语音"},voiceStop:{title:"停止语音"},voiceContinue:{title:"继续语音"}}}}},saving:{title:"存档",isOverwrite:"是否覆盖存档？"},extra:{title:"鉴赏模式"},loadSaving:{title:"读档"},title:{title:"标题",options:{load:"",extra:"鉴赏模式"}},exit:{title:"返回"}},title:{start:{title:"开始游戏",subtitle:"START"},continue:{title:"继续游戏",subtitle:"CONTINUE"},options:{title:"游戏选项",subtitle:"OPTIONS"},load:{title:"读取存档",subtitle:"LOAD"},extra:{title:"鉴赏模式",subtitle:"EXTRA"},storyLine:{title:"故事线",subtitle:"STORYLINE"},achievement:{title:"成就",subtitle:"ACHIEVEMENT"},beautyGuide:{title:"美女图鉴",subtitle:"BEAUTYGUIDE"}},gaming:{noSaving:"暂无存档",buttons:{hide:"隐藏",show:"显示",backlog:"回想",replay:"重播",auto:"自动",forward:"快进",quicklySave:"快速存档",quicklyLoad:"快速读档",save:"存档",load:"读档",options:"选项",title:"标题",titleTips:"确认返回到标题界面吗",quitTips:"确认退出游戏吗？",collection:"收藏",collected:"已收藏",continue:"继续",backToLevel:"返回关卡",setting:"设置",backToHome:"返回主界面"}},extra:{title:"鉴赏模式"},r18:{title:"欢迎",desction:"请确认您已年满 18 周岁才能进入本网站。",agree:"同意",disagree:"不同意"}},Moe={common:{yes:"OK",no:"Annuler"},menu:{options:{title:"OPTIONS",pages:{system:{title:"Système",options:{autoSpeed:{title:"Vitesse de lecture automatique",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},language:{title:"Langue"},resetData:{title:"Effacer ou réinitialiser les données",options:{clearGameSave:"Effacer la sauvegarde du jeu",resetSettings:"Réinitialiser les paramètres",clearAll:"Tout effacer"},dialogs:{clearGameSave:"Êtes-vous sûr de vouloir effacer la sauvegarde du jeu",resetSettings:"Êtes-vous sûr de vouloir réinitialiser tous les paramètres",clearAll:"Êtes-vous sûr de vouloir tout effacer"}},gameSave:{title:"Importer ou exporter la sauvegarde du jeu et les options",options:{export:"Exporter la sauvegarde du jeu et les options",import:"Importer la sauvegarde du jeu et les options"},dialogs:{import:{title:"Êtes-vous sûr de vouloir importer la sauvegarde du jeu et les options",tip:"Importer la sauvegarde du jeu",error:"Impossible d'analyser la sauvegarde du jeu"}}},about:{title:"À propos de WebGAL",subTitle:"WebGAL: Un moteur de visual novel basé sur le web en open-source",version:"Version",source:"Dépôt de code source",contributors:"Contributeurs",website:"Site web"}}},display:{title:"Affichage",options:{textSpeed:{title:"Vitesse d'affichage du texte",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},textSize:{title:"Taille du texte",options:{small:"Petite",medium:"Moyenne",large:"Grande"}},textFont:{title:"Police du texte",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Aperçu de l'affichage du texte",text:"Vous prévisualisez la police, la taille et la vitesse de lecture du texte, maintenant. Vous pouvez ajuster les options ci-dessus selon votre perception."}}},sound:{title:"Son",options:{volumeMain:{title:"Volume principal"},vocalVolume:{title:"Volume des voix"},bgmVolume:{title:"Volume de la musique de fond"},seVolume:{title:"Volume des effets sonores"},uiSeVolume:{title:"Volume de l’interface utilisateur"}}}}},saving:{title:"SAUVEGARDER",isOverwrite:"Êtes-vous sûr de vouloir écraser cette sauvegarde ?"},loadSaving:{title:"CHARGER"},title:{title:"TITRE"},exit:{title:"RETOUR"}},title:{start:{title:"COMMENCER",subtitle:""},continue:{title:"CONTINUER",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"CHARGER",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Aucune sauvegarde",buttons:{hide:"Masquer",show:"Afficher",backlog:"Journal",replay:"Rejouer",auto:"Automatique",forward:"Avancer",quicklySave:"Sauvegarde rapide",quicklyLoad:"Chargement rapide",save:"Sauvegarder",load:"Charger",options:"Options",title:"Titre",titleTips:"Confirmer le retour à l'écran titre"}},extra:{title:"EXTRA"}},Loe={common:{yes:"Ja",no:"Nein"},menu:{options:{title:"OPTIONEN",pages:{system:{title:"System",options:{autoSpeed:{title:"Auto-Geschwindigkeit",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},language:{title:"Sprache"},resetData:{title:"Daten löschen oder zurücksetzen",options:{clearGameSave:"Alle Spielstände löschen",resetSettings:"Alle Einstellungen zurücksetzen",clearAll:"Alle Daten löschen"},dialogs:{clearGameSave:"Sind Sie sicher, dass Sie den Spielstand löschen möchten?",resetSettings:"Sind Sie sicher, dass Sie alle Einstellungen zurücksetzen möchten?",clearAll:"Sind Sie sicher, dass Sie alle Daten löschen möchten?"}},gameSave:{title:"Spielstand und Optionen importieren oder exportieren",options:{export:"Spielstand und Optionen exportieren",import:"Spielstand und Optionen importieren"},dialogs:{import:{title:"Sind Sie sicher, dass Sie den Spielstand und die Optionen importieren möchten?",tip:"Spielstand importieren",error:"Ein Fehler ist beim Analysieren des Spielstands aufgetreten"}}},about:{title:"Über WebGAL",subTitle:"WebGAL: Eine Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Darstellung",options:{textSpeed:{title:"Geschwindigkeit der Textanzeige",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},textSize:{title:"Textgröße",options:{small:"Klein",medium:"Normal",large:"Groß"}},textFont:{title:"Schriftart",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Vorschautext wird angezeigt",text:"Sie können jederzeit die Schriftart, Größe und Wiedergabegeschwindigkeit des Textes nach Ihrer Vorliebe anpassen."}}},sound:{title:"Ton",options:{volumeMain:{title:"Hauptlautstärke"},vocalVolume:{title:"Stimmlautstärke"},bgmVolume:{title:"Musiklautstärke"},seVolume:{title:"Soundeffektlautstärke"},uiSeVolume:{title:"UI Soundeffektlautstärke"}}}}},saving:{title:"SPEICHERN",isOverwrite:"Sind Sie sicher, dass Sie diesen Spielstand überschreiben möchten?"},loadSaving:{title:"LADEN"},title:{title:"TITEL"},exit:{title:"ZURÜCK"}},title:{start:{title:"STARTEN",subtitle:""},continue:{title:"WEITERLESEN",subtitle:""},options:{title:"OPTIONEN",subtitle:""},load:{title:"LADEN",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Keine Speicherung",buttons:{hide:"Verstecken",show:"Anzeigen",backlog:"Verlauf",replay:"Wiedergabe",auto:"Auto",forward:"Überspringen",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Speichern",load:"Laden",options:"Optionen",title:"Titel"}},extra:{title:"EXTRA"}},Boe={common:{yes:"是",no:"否"},menu:{options:{title:"選項",pages:{system:{title:"系統",options:{autoSpeed:{title:"自動播放速度",options:{slow:"慢",medium:"中",fast:"快"}},language:{title:"語言"},resetData:{title:"清除或還原數據",options:{clearGameSave:"清除所有存檔",resetSettings:"還原默認設定",clearAll:"清除所有數據"},dialogs:{clearGameSave:"確定要清除存檔嗎",resetSettings:"確定要還原默認設定嗎",clearAll:"確定要清除所有數據嗎"}},gameSave:{title:"導入或導出存檔與選項",options:{export:"導出存檔與選項",import:"導入存檔與選項"},dialogs:{import:{title:"確定要導入存檔與選項嗎",tip:"導入存檔",error:"存檔解析失敗"}}},about:{title:"關於 WebGAL",subTitle:"WebGAL：開源的線上視覺小說製作引擎",version:"版本號",source:"源代碼倉庫",contributors:"貢獻者",website:"網站"}}},display:{title:"顯示",options:{textSpeed:{title:"文字顯示速度",options:{slow:"慢",medium:"中",fast:"快"}},textSize:{title:"文字大小",options:{small:"小",medium:"中",large:"大"}},textFont:{title:"文字字體",options:{siYuanSimSun:"霞鹜文楷",SimHei:"黑體"}},textboxOpacity:{title:"文本框不透明度"},textPreview:{title:"文字顯示預覽",text:"現在預覽的是文字框字體大小和播放速度的情況，您可以根據您的觀感調整上面的選項。"}}},sound:{title:"音量",options:{volumeMain:{title:"主音量"},vocalVolume:{title:"語音音量"},bgmVolume:{title:"背景音樂音量"},seVolume:{title:"音效音量"},uiSeVolume:{title:"用戶界面音效音量"}}}}},saving:{title:"存檔",isOverwrite:"是否要覆蓋存檔?"},loadSaving:{title:"讀檔"},title:{title:"標題",options:{load:"",extra:"CG模式"}},exit:{title:"返回"}},title:{start:{title:"開始遊戲",subtitle:"START"},continue:{title:"繼續遊戲",subtitle:"CONTINUE"},options:{title:"遊戲選項",subtitle:"OPTIONS"},load:{title:"讀取存檔",subtitle:"LOAD"},extra:{title:"CG模式",subtitle:"EXTRA"}},gaming:{noSaving:"暫無存檔",buttons:{hide:"隱藏",show:"顯示",backlog:"回想",replay:"重播",auto:"自動",forward:"加速",quicklySave:"快速存檔",quicklyLoad:"快速讀檔",save:"存檔",load:"讀檔",options:"選項",title:"標題",titleTips:"確認返回到標題界面嗎"}},extra:{title:"CG模式"}};var zf=(t=>(t[t.zhCn=0]="zhCn",t[t.en=1]="en",t[t.jp=2]="jp",t[t.fr=3]="fr",t[t.de=4]="de",t[t.zhTw=5]="zhTw",t))(zf||{});const FD={zhCn:"中文",en:"English",jp:"日本語",fr:"Français",de:"Deutsch",zhTw:"繁體中文"},Noe={en:{translation:Foe},zhCn:{translation:Doe},jp:{translation:koe},fr:{translation:Moe},de:{translation:Loe},zhTw:{translation:Boe}},Uoe=0;var As=(t=>(t[t.slow=0]="slow",t[t.normal=1]="normal",t[t.fast=2]="fast",t))(As||{}),ml=(t=>(t[t.small=0]="small",t[t.medium=1]="medium",t[t.large=2]="large",t))(ml||{}),Cu=(t=>(t[t.song=0]="song",t[t.hei=1]="hei",t[t.lxgw=2]="lxgw",t))(Cu||{}),$T=(t=>(t[t.yes=0]="yes",t[t.no=1]="no",t))($T||{}),La=(t=>(t[t.on=0]="on",t[t.off=1]="off",t))(La||{}),du=(t=>(t.Size1080P="1920x1080",t.Size720P="1280x720",t))(du||{});const W8={slPage:1,volumeMain:100,textSpeed:As.normal,autoSpeed:As.normal,textSize:ml.medium,vocalVolume:100,bgmVolume:25,seVolume:100,uiSeVolume:50,textboxFont:Cu.song,textboxOpacity:75,language:zf.zhCn,voiceInterruption:$T.yes,fullScreen:La.off,uiLight:100,videoSize:du.Size720P},ew={optionData:W8,globalGameVar:{},appreciationData:{bgm:[],cg:[]}},z8=Ym({name:"userData",initialState:Gr(ew),reducers:{setUserData:(t,e)=>{const{key:r,value:n}=e.payload;t[r]=n},unlockCgInUserData:(t,e)=>{const{name:r,url:n,series:i}=e.payload;let a=!1;t.appreciationData.cg.forEach(o=>{n===o.url&&(a=!0,o.url=n,o.series=i)}),a||t.appreciationData.cg.push(e.payload)},unlockBgmInUserData:(t,e)=>{const{name:r,url:n,series:i}=e.payload;let a=!1;t.appreciationData.bgm.forEach(o=>{n===o.url&&(a=!0,o.url=n,o.series=i)}),a||t.appreciationData.bgm.push(e.payload)},resetUserData:(t,e)=>{Object.assign(t,e.payload)},setOptionData:(t,e)=>{const{key:r,value:n}=e.payload;t.optionData[r]=n},setGlobalVar:(t,e)=>{t.globalGameVar[e.payload.key]=e.payload.value},setSlPage:(t,e)=>{t.optionData.slPage=e.payload},resetOptionSet(t){Object.assign(t.optionData,W8)},resetAllData(t){Object.assign(t,Gr(ew))}}}),{setUserData:gNe,resetUserData:VT,setOptionData:ao,setGlobalVar:joe,setSlPage:GT,unlockCgInUserData:H8,unlockBgmInUserData:X8,resetOptionSet:mNe,resetAllData:yNe}=z8.actions,$oe=z8.reducer,Y8={backlog_size:200,fast_timeout:50},Voe={textInitialDelay:80};class Goe{constructor(e){qe(this,"isSaveBacklogNext",!1);qe(this,"backlog",[]);qe(this,"sceneManager");this.sceneManager=e}getBacklog(){return this.backlog}editLastBacklogItemEffect(e){this.backlog[this.backlog.length-1].currentStageState.effects=e}makeBacklogEmpty(){this.backlog.splice(0,this.backlog.length)}insertBacklogItem(e){this.backlog.push(e)}saveCurrentStateToBacklog(){const e=le.getState().stage,r=Gr(e);r.PerformList.forEach(i=>{i.script.args.forEach(a=>{a.key==="concat"&&(a.value=!1,i.script.content=r.showText)})});const n={currentStageState:r,saveScene:{currentSentenceId:this.sceneManager.sceneData.currentSentenceId,sceneStack:Gr(this.sceneManager.sceneData.sceneStack),sceneName:this.sceneManager.sceneData.currentScene.sceneName,sceneUrl:this.sceneManager.sceneData.currentScene.sceneUrl}};for(this.getBacklog().push(n);this.getBacklog().length>Y8.backlog_size;)this.getBacklog().shift()}}var $t=(t=>(t[t.background=0]="background",t[t.bgm=1]="bgm",t[t.figure=2]="figure",t[t.scene=3]="scene",t[t.tex=4]="tex",t[t.vocal=5]="vocal",t[t.video=6]="video",t[t.ui=7]="ui",t))($t||{});const Qt=(t,e)=>{if(t.match("http://")||t.match("https://"))return t;{let r;switch(e){case 0:r=`./game/background/${t}`;break;case 3:r=`./game/scene/${t}`;break;case 5:r=`./game/vocal/${t}`;break;case 2:r=`./game/figure/${t}`;break;case 1:r=`./game/bgm/${t}`;break;case 6:r=`./game/video/${t}`;break;case 7:r=`./game/ui/${t}`;break;default:r="";break}return r}},Woe=(t,e)=>{(!H.sceneManager.sceneAssetsList[e]||!Object.values(H.sceneManager.sceneAssetsList[e]).length)&&(H.sceneManager.sceneAssetsList[e]=t.reduce((r,n)=>(r[n.url]="",r),{}));for(const r of t){const n=H.sceneManager.sceneAssetsList[e];n[r.url]==="success"||n[r.url]==="loading"?(Uh(e),Ge.warn("该资源已在预加载列表中，无需重复加载")):(console.log("预加载资源：",r.url),r.url.endsWith(".mp4")||r.url.endsWith(".flv")?(n[r.url]="success",Uh(e),H.videoManager.preloadVideo(r.url)):(n[r.url]="loading",zoe(r.url,3,1e3,()=>{n[r.url]="success",Uh(e)},()=>{n[r.url]="error",Uh(e);const i=H.sceneManager.settledAssets.findIndex(a=>a===r.url);i>-1&&H.sceneManager.settledAssets.splice(i,1)}),H.sceneManager.settledAssets.push(r.url)))}t.length===0&&Uh(e)},Uh=t=>{const e=H.sceneManager.sceneAssetsList[t];Object.values(e).every(r=>r==="error"||r==="success"),H.sceneManager.sceneAssetsLoadedList[t]=Object.values(e).every(r=>r==="success")},zoe=(t,e,r,n,i)=>{const a=(o,s)=>{const c=()=>{n()},l=()=>{o>0?(console.log(`重试加载资源：${t}，剩余次数：${o}，延迟时间：${s}ms`),setTimeout(()=>{a(o-1,s*2)},s)):i()};if(document.createElement("link"),window.isSafari)fetch(t).then(u=>{if(!u.ok)throw new Error("Error!");const f=t.split(".").pop()||"",h=["jpg","jpeg","png","gif","bmp","svg","webp"],d=["mp4","webm","ogg","flv"],p=["wav","mp3","ogg"];return h.includes(f)?u.blob():p.includes(f)||d.includes(f)?u.arrayBuffer():u.blob()}).then(c).catch(l);else{const u=document.createElement("link");u.setAttribute("rel","prefetch"),u.setAttribute("href",t);const f=document.getElementsByTagName("head");u.onload=c,u.onerror=l,f.length&&f[0].appendChild(u)}};a(e,r)};var Ye;(function(t){t[t.say=0]="say",t[t.changeBg=1]="changeBg",t[t.changeFigure=2]="changeFigure",t[t.bgm=3]="bgm",t[t.video=4]="video",t[t.pixi=5]="pixi",t[t.pixiInit=6]="pixiInit",t[t.intro=7]="intro",t[t.miniAvatar=8]="miniAvatar",t[t.changeScene=9]="changeScene",t[t.choose=10]="choose",t[t.end=11]="end",t[t.setComplexAnimation=12]="setComplexAnimation",t[t.setFilter=13]="setFilter",t[t.label=14]="label",t[t.jumpLabel=15]="jumpLabel",t[t.chooseLabel=16]="chooseLabel",t[t.setVar=17]="setVar",t[t.if=18]="if",t[t.callScene=19]="callScene",t[t.showVars=20]="showVars",t[t.unlockCg=21]="unlockCg",t[t.unlockBgm=22]="unlockBgm",t[t.filmMode=23]="filmMode",t[t.setTextbox=24]="setTextbox",t[t.setAnimation=25]="setAnimation",t[t.playEffect=26]="playEffect",t[t.setTempAnimation=27]="setTempAnimation",t[t.comment=28]="comment",t[t.setTransform=29]="setTransform",t[t.setTransition=30]="setTransition",t[t.getUserInput=31]="getUserInput",t[t.applyStyle=32]="applyStyle",t[t.unlockAchieve=33]="unlockAchieve",t[t.unlockStoryline=34]="unlockStoryline",t[t.showValue=35]="showValue"})(Ye||(Ye={}));Ye.intro,Ye.changeBg,Ye.changeFigure,Ye.miniAvatar,Ye.changeScene,Ye.choose,Ye.end,Ye.bgm,Ye.video,Ye.setComplexAnimation,Ye.setFilter,Ye.pixiInit,Ye.pixi,Ye.label,Ye.jumpLabel,Ye.setVar,Ye.callScene,Ye.showVars,Ye.unlockCg,Ye.unlockBgm,Ye.say,Ye.filmMode,Ye.callScene,Ye.setTextbox,Ye.setAnimation,Ye.playEffect,Ye.applyStyle,Ye.unlockAchieve,Ye.unlockStoryline,Ye.showValue;Ye.bgm,Ye.pixi,Ye.pixiInit,Ye.label,Ye.if,Ye.miniAvatar,Ye.setVar,Ye.unlockBgm,Ye.unlockCg,Ye.filmMode,Ye.playEffect,Ye.showValue;var fn;(function(t){t[t.background=0]="background",t[t.bgm=1]="bgm",t[t.figure=2]="figure",t[t.scene=3]="scene",t[t.tex=4]="tex",t[t.vocal=5]="vocal",t[t.video=6]="video"})(fn||(fn={}));function q8(t,e){const r=[];let i=t.replace(/ /g," ").split(" -");return i=i.filter(a=>a!==""),i.forEach(a=>{const o=a.indexOf("=");let s=a.slice(0,o),c=a.slice(o+1);o<0&&(s=a,c=void 0),s.toLowerCase().match(/.ogg|.mp3|.wav/)?r.push({key:"vocal",value:e(a,fn.vocal)}):c===void 0?r.push({key:s,value:!0}):c==="true"||c==="false"?r.push({key:s,value:c==="true"}):isNaN(Number(c))?r.push({key:s,value:c}):r.push({key:s,value:Number(c)})}),r}function Hoe(t){const e=[];let r,n=t.split(";")[0];if(n==="")return{command:"",args:[],options:[]};const i=/:/.exec(n);i===null?r="":(r=n.substring(0,i.index),n=n.substring(i.index+1,n.length));const a=/ -/.exec(n);if(a){const o=n.substring(a.index,n.length);n=n.substring(0,a.index);for(const s of q8(o,(c,l)=>c))e.push(s)}return{command:r,args:n.split("|").map(o=>o.trim()).filter(o=>o!==""),options:e}}function Xoe(t){return t.replaceAll("\r","").split(`
`).map(r=>Hoe(r)).filter(r=>r.command!=="")}const kD=(t,e,r)=>{let n={type:Ye.say,additionalArgs:[]};const i=Yoe(t,e,r);return n.type=i,i===Ye.say&&t!=="say"&&n.additionalArgs.push({key:"speaker",value:t}),n=qoe(n,i,e),n};function Yoe(t,e,r){var n;return((n=r.get(t))==null?void 0:n.scriptType)??Ye.say}function qoe(t,e,r){return r.includes(e)&&t.additionalArgs.push({key:"next",value:!0}),t}const Koe=(t,e,r)=>{if(t==="none"||t==="")return"";switch(e){case Ye.playEffect:return r(t,fn.vocal);case Ye.changeBg:return r(t,fn.background);case Ye.changeFigure:return r(t,fn.figure);case Ye.bgm:return r(t,fn.bgm);case Ye.callScene:return r(t,fn.scene);case Ye.changeScene:return r(t,fn.scene);case Ye.miniAvatar:return r(t,fn.figure);case Ye.video:return r(t,fn.video);case Ye.choose:return Zoe(t,r);case Ye.unlockBgm:return r(t,fn.bgm);case Ye.unlockCg:return r(t,fn.background);default:return t}};function Zoe(t,e){const r=t.split("|"),n=[],i=[];for(const s of r)n.push(s.split(":")[0]??""),i.push(s.split(":")[1]??"");const a=i.map(s=>s.match(/\./)?e(s,fn.scene):s);let o="";for(let s=0;s<n.length;s++)s!==0&&(o=o+"|"),o=o+`${n[s]}:${a[s]}`;return o}const Qoe=(t,e,r)=>{const n=[];return t===Ye.say&&r.forEach(i=>{i.key==="vocal"&&n.push({name:i.value,url:i.value,lineNumber:0,type:fn.vocal})}),e==="none"||e===""||(t===Ye.changeBg&&n.push({name:e,url:e,lineNumber:0,type:fn.background}),t===Ye.changeFigure&&n.push({name:e,url:e,lineNumber:0,type:fn.figure}),t===Ye.miniAvatar&&n.push({name:e,url:e,lineNumber:0,type:fn.figure}),t===Ye.video&&n.push({name:e,url:e,lineNumber:0,type:fn.video}),t===Ye.bgm&&n.push({name:e,url:e,lineNumber:0,type:fn.bgm})),n},Joe=(t,e)=>{const r=[];return(t===Ye.changeScene||t===Ye.callScene)&&r.push(e),(t===Ye.choose||t===Ye.video)&&e.split("|").map(a=>a.split(":")[1]??"").forEach(a=>{a.match(/\./)&&r.push(a)}),r},ese=(t,e,r,n)=>{let i,a,o;const s=[];let c,l,u,f=t.split(";")[0];if(f==="")return{command:Ye.comment,commandRaw:"comment",content:t.split(";")[1]??"",args:[{key:"next",value:!0}],sentenceAssets:[],subScene:[]};const h=/:/.exec(f);if(h===null){u=f,l=kD(u,r,n),i=l.type;for(const p of l.additionalArgs)i===Ye.say&&p.key==="speaker"||s.push(p)}else{u=f.substring(0,h.index),f=f.substring(h.index+1,f.length),l=kD(u,r,n),i=l.type;for(const p of l.additionalArgs)s.push(p)}const d=/ -/.exec(f);if(d){const p=f.substring(d.index,t.length);f=f.substring(0,d.index);for(const v of q8(p,e))s.push(v)}return a=Koe(f,i,e),c=Qoe(i,a,s),o=Joe(i,a),{command:i,commandRaw:u,content:a,args:s,sentenceAssets:c,subScene:o}};var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tse=typeof iv=="object"&&iv&&iv.Object===Object&&iv,rse=tse,nse=rse,ise=typeof self=="object"&&self&&self.Object===Object&&self,ase=nse||ise||Function("return this")(),sy=ase,ose=sy,sse=ose.Symbol,K8=sse,DD=K8,Z8=Object.prototype,lse=Z8.hasOwnProperty,use=Z8.toString,jh=DD?DD.toStringTag:void 0;function cse(t){var e=lse.call(t,jh),r=t[jh];try{t[jh]=void 0;var n=!0}catch{}var i=use.call(t);return n&&(e?t[jh]=r:delete t[jh]),i}var fse=cse,hse=Object.prototype,dse=hse.toString;function pse(t){return dse.call(t)}var vse=pse,MD=K8,gse=fse,mse=vse,yse="[object Null]",_se="[object Undefined]",LD=MD?MD.toStringTag:void 0;function xse(t){return t==null?t===void 0?_se:yse:LD&&LD in Object(t)?gse(t):mse(t)}var bse=xse;function Sse(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Q8=Sse,Ese=bse,wse=Q8,Ase="[object AsyncFunction]",Cse="[object Function]",Tse="[object GeneratorFunction]",Ose="[object Proxy]";function Pse(t){if(!wse(t))return!1;var e=Ese(t);return e==Cse||e==Tse||e==Ase||e==Ose}var Rse=Pse,Ise=sy,Fse=Ise["__core-js_shared__"],kse=Fse,z1=kse,BD=function(){var t=/[^.]+$/.exec(z1&&z1.keys&&z1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Dse(t){return!!BD&&BD in t}var Mse=Dse,Lse=Function.prototype,Bse=Lse.toString;function Nse(t){if(t!=null){try{return Bse.call(t)}catch{}try{return t+""}catch{}}return""}var Use=Nse,jse=Rse,$se=Mse,Vse=Q8,Gse=Use,Wse=/[\\^$.*+?()[\]{}|]/g,zse=/^\[object .+?Constructor\]$/,Hse=Function.prototype,Xse=Object.prototype,Yse=Hse.toString,qse=Xse.hasOwnProperty,Kse=RegExp("^"+Yse.call(qse).replace(Wse,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zse(t){if(!Vse(t)||$se(t))return!1;var e=jse(t)?Kse:zse;return e.test(Gse(t))}var Qse=Zse;function Jse(t,e){return t==null?void 0:t[e]}var ele=Jse,tle=Qse,rle=ele;function nle(t,e){var r=rle(t,e);return tle(r)?r:void 0}var WT=nle,ile=WT,ale=ile(Object,"create"),ly=ale,ND=ly;function ole(){this.__data__=ND?ND(null):{},this.size=0}var sle=ole;function lle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ule=lle,cle=ly,fle="__lodash_hash_undefined__",hle=Object.prototype,dle=hle.hasOwnProperty;function ple(t){var e=this.__data__;if(cle){var r=e[t];return r===fle?void 0:r}return dle.call(e,t)?e[t]:void 0}var vle=ple,gle=ly,mle=Object.prototype,yle=mle.hasOwnProperty;function _le(t){var e=this.__data__;return gle?e[t]!==void 0:yle.call(e,t)}var xle=_le,ble=ly,Sle="__lodash_hash_undefined__";function Ele(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ble&&e===void 0?Sle:e,this}var wle=Ele,Ale=sle,Cle=ule,Tle=vle,Ole=xle,Ple=wle;function Hf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Hf.prototype.clear=Ale;Hf.prototype.delete=Cle;Hf.prototype.get=Tle;Hf.prototype.has=Ole;Hf.prototype.set=Ple;var Rle=Hf;function Ile(){this.__data__=[],this.size=0}var Fle=Ile;function kle(t,e){return t===e||t!==t&&e!==e}var Dle=kle,Mle=Dle;function Lle(t,e){for(var r=t.length;r--;)if(Mle(t[r][0],e))return r;return-1}var uy=Lle,Ble=uy,Nle=Array.prototype,Ule=Nle.splice;function jle(t){var e=this.__data__,r=Ble(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ule.call(e,r,1),--this.size,!0}var $le=jle,Vle=uy;function Gle(t){var e=this.__data__,r=Vle(e,t);return r<0?void 0:e[r][1]}var Wle=Gle,zle=uy;function Hle(t){return zle(this.__data__,t)>-1}var Xle=Hle,Yle=uy;function qle(t,e){var r=this.__data__,n=Yle(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Kle=qle,Zle=Fle,Qle=$le,Jle=Wle,eue=Xle,tue=Kle;function Xf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xf.prototype.clear=Zle;Xf.prototype.delete=Qle;Xf.prototype.get=Jle;Xf.prototype.has=eue;Xf.prototype.set=tue;var rue=Xf,nue=WT,iue=sy,aue=nue(iue,"Map"),oue=aue,UD=Rle,sue=rue,lue=oue;function uue(){this.size=0,this.__data__={hash:new UD,map:new(lue||sue),string:new UD}}var cue=uue;function fue(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var hue=fue,due=hue;function pue(t,e){var r=t.__data__;return due(e)?r[typeof e=="string"?"string":"hash"]:r.map}var cy=pue,vue=cy;function gue(t){var e=vue(this,t).delete(t);return this.size-=e?1:0,e}var mue=gue,yue=cy;function _ue(t){return yue(this,t).get(t)}var xue=_ue,bue=cy;function Sue(t){return bue(this,t).has(t)}var Eue=Sue,wue=cy;function Aue(t,e){var r=wue(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Cue=Aue,Tue=cue,Oue=mue,Pue=xue,Rue=Eue,Iue=Cue;function Yf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Yf.prototype.clear=Tue;Yf.prototype.delete=Oue;Yf.prototype.get=Pue;Yf.prototype.has=Rue;Yf.prototype.set=Iue;var Fue=Yf,kue="__lodash_hash_undefined__";function Due(t){return this.__data__.set(t,kue),this}var Mue=Due;function Lue(t){return this.__data__.has(t)}var Bue=Lue,Nue=Fue,Uue=Mue,jue=Bue;function Kg(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Nue;++e<r;)this.add(t[e])}Kg.prototype.add=Kg.prototype.push=Uue;Kg.prototype.has=jue;var $ue=Kg;function Vue(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var Gue=Vue;function Wue(t){return t!==t}var zue=Wue;function Hue(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Xue=Hue,Yue=Gue,que=zue,Kue=Xue;function Zue(t,e,r){return e===e?Kue(t,e,r):Yue(t,que,r)}var Que=Zue,Jue=Que;function ece(t,e){var r=t==null?0:t.length;return!!r&&Jue(t,e,0)>-1}var tce=ece;function rce(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var nce=rce;function ice(t,e){return t.has(e)}var ace=ice,oce=WT,sce=sy,lce=oce(sce,"Set"),uce=lce;function cce(){}var fce=cce;function hce(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var J8=hce,H1=uce,dce=fce,pce=J8,vce=1/0,gce=H1&&1/pce(new H1([,-0]))[1]==vce?function(t){return new H1(t)}:dce,mce=gce,yce=$ue,_ce=tce,xce=nce,bce=ace,Sce=mce,Ece=J8,wce=200;function Ace(t,e,r){var n=-1,i=_ce,a=t.length,o=!0,s=[],c=s;if(r)o=!1,i=xce;else if(a>=wce){var l=e?null:Sce(t);if(l)return Ece(l);o=!1,i=bce,c=new yce}else c=e?[]:s;e:for(;++n<a;){var u=t[n],f=e?e(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),s.push(u)}else i(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}var Cce=Ace,Tce=Cce;function Oce(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Tce(t,void 0,e):[]}var Pce=Oce;const Rce=(t,e,r,n,i,a,o)=>{const c=t.split(`
`);let l=[],u=[];const f=c.map(h=>{const d=ese(h,i,a,o);return l=[...l,...d.sentenceAssets],u=[...u,...d.subScene],d});return l=Pce(l),n(l,e),{sceneName:e,sceneUrl:r,sentenceList:f,assetsList:l,subSceneList:u}};function Ice(t){const[e,r]=Fce(t);return{classNameStyles:e,others:r}}function Fce(t){const e={};let r="",n;const i=/\.([^{\s]+)\s*{((?:[^{}]*|{[^}]*})*)}/g,a=/(@[^{]+{\s*(?:[^{}]*{[^}]*}[^{}]*)+\s*})/g;for(;(n=i.exec(t))!==null;){const o=n[1],s=n[2].trim().replace(/\s*;\s*/g,`;
`);e[o]=s}for(;(n=a.exec(t))!==null;)r+=n[1].trim()+`
`;return[e,r.trim()]}class kce{constructor(e,r,n,i){qe(this,"assetsPrefetcher");qe(this,"assetSetter");qe(this,"ADD_NEXT_ARG_LIST");qe(this,"SCRIPT_CONFIG_MAP");this.assetsPrefetcher=e,this.assetSetter=r,this.ADD_NEXT_ARG_LIST=n,Array.isArray(i)?(this.SCRIPT_CONFIG_MAP=new Map,i.forEach(a=>{this.SCRIPT_CONFIG_MAP.set(a.scriptString,a)})):this.SCRIPT_CONFIG_MAP=i}parse(e,r,n){return Rce(e,r,n,this.assetsPrefetcher,this.assetSetter,this.ADD_NEXT_ARG_LIST,this.SCRIPT_CONFIG_MAP)}parseConfig(e){return Xoe(e)}stringifyConfig(e){return e.reduce((r,n)=>r+`${n.command}:${n.args.join("|")}${n.options.length<=0?"":n.options.reduce((i,a)=>i+" -"+a.key+"="+a.value,"")};
`,"")}parseScssToWebgalStyleObj(e){return Ice(e)}}function Bt(t,e){const n=t.args.find(i=>i.key===e);return n?n.value:null}const Dce=t=>{let e=t.content,r="",n="default";t.args.forEach(o=>{o.key==="unlockname"&&(r=o.value.toString()),o.key==="series"&&(n=o.value.toString())});const i=Bt(t,"enter"),a=Bt(t,"volume");return r!==""&&le.dispatch(X8({name:r,url:e,series:n})),B2(e,typeof i=="number"&&i>=0?i:0,typeof a=="number"&&a>=0&&a<=100?a:100),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};var zT={exports:{}},e6=function(e,r){return function(){return e.apply(r,arguments)}},Mce=e6,HT=Object.prototype.toString,XT=function(t){return function(e){var r=HT.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Ml(t){return t=t.toLowerCase(),function(r){return XT(r)===t}}function fy(t){return Array.isArray(t)}function tw(t){return typeof t>"u"}function Lce(t){return t!==null&&!tw(t)&&t.constructor!==null&&!tw(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var t6=Ml("ArrayBuffer");function Bce(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t6(t.buffer),e}function Nce(t){return typeof t=="string"}function r6(t){return typeof t=="number"}function n6(t){return t!==null&&typeof t=="object"}function ig(t){if(XT(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Uce(t){return t&&Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}var jce=Ml("Date"),$ce=Ml("File"),Vce=Ml("Blob"),Gce=Ml("FileList");function YT(t){return HT.call(t)==="[object Function]"}function Wce(t){return n6(t)&&YT(t.pipe)}function zce(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||HT.call(t)===e||YT(t.toString)&&t.toString()===e)}var Hce=Ml("URLSearchParams");function Xce(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function Yce(){var t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"}function qT(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),fy(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function rw(){var t={};function e(i,a){ig(t[a])&&ig(i)?t[a]=rw(t[a],i):ig(i)?t[a]=rw({},i):fy(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)qT(arguments[r],e);return t}function qce(t,e,r){return qT(e,function(i,a){r&&typeof i=="function"?t[a]=Mce(i,r):t[a]=i}),t}function Kce(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Zce(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function Qce(t,e,r,n){var i,a,o,s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!n||n(o,t,e))&&!s[o]&&(e[o]=t[o],s[o]=!0);t=r!==!1&&Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function Jce(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function efe(t){if(!t)return null;if(fy(t))return t;var e=t.length;if(!r6(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var tfe=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));function rfe(t,e){for(var r=t&&t[Symbol.iterator],n=r.call(t),i;(i=n.next())&&!i.done;){var a=i.value;e.call(t,a[0],a[1])}}function nfe(t,e){for(var r,n=[];(r=t.exec(e))!==null;)n.push(r);return n}var ife=Ml("HTMLFormElement"),afe=function(e){return function(r,n){return e.call(r,n)}}(Object.prototype.hasOwnProperty),Pn={isArray:fy,isArrayBuffer:t6,isBuffer:Lce,isFormData:zce,isArrayBufferView:Bce,isString:Nce,isNumber:r6,isObject:n6,isPlainObject:ig,isEmptyObject:Uce,isUndefined:tw,isDate:jce,isFile:$ce,isBlob:Vce,isFunction:YT,isStream:Wce,isURLSearchParams:Hce,isStandardBrowserEnv:Yce,forEach:qT,merge:rw,extend:qce,trim:Xce,stripBOM:Kce,inherits:Zce,toFlatObject:Qce,kindOf:XT,kindOfTest:Ml,endsWith:Jce,toArray:efe,isTypedArray:tfe,isFileList:Gce,forEachEntry:rfe,matchAll:nfe,isHTMLForm:ife,hasOwnProperty:afe},i6=Pn;function yf(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}i6.inherits(yf,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a6=yf.prototype,o6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(t){o6[t]={value:t}});Object.defineProperties(yf,o6);Object.defineProperty(a6,"isAxiosError",{value:!0});yf.from=function(t,e,r,n,i,a){var o=Object.create(a6);return i6.toFlatObject(t,o,function(c){return c!==Error.prototype}),yf.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};var Zu=yf,ofe=typeof self=="object"?self.FormData:window.FormData,sfe=ofe,br=Pn,lfe=Zu,ufe=sfe;function nw(t){return br.isPlainObject(t)||br.isArray(t)}function s6(t){return br.endsWith(t,"[]")?t.slice(0,-2):t}function jD(t,e,r){return t?t.concat(e).map(function(i,a){return i=s6(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function cfe(t){return br.isArray(t)&&!t.some(nw)}var ffe=br.toFlatObject(br,{},null,function(e){return/^is[A-Z]/.test(e)});function hfe(t){return t&&br.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function dfe(t,e,r){if(!br.isObject(t))throw new TypeError("target must be an object");e=e||new(ufe||FormData),r=br.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!br.isUndefined(y[v])});var n=r.metaTokens,i=r.visitor||u,a=r.dots,o=r.indexes,s=r.Blob||typeof Blob<"u"&&Blob,c=s&&hfe(e);if(!br.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(br.isDate(p))return p.toISOString();if(!c&&br.isBlob(p))throw new lfe("Blob is not supported. Use a Buffer instead.");return br.isArrayBuffer(p)||br.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,v,y){var m=p;if(p&&!y&&typeof p=="object"){if(br.endsWith(v,"{}"))v=n?v:v.slice(0,-2),p=JSON.stringify(p);else if(br.isArray(p)&&cfe(p)||br.isFileList(p)||br.endsWith(v,"[]")&&(m=br.toArray(p)))return v=s6(v),m.forEach(function(x,b){!br.isUndefined(x)&&e.append(o===!0?jD([v],b,a):o===null?v:v+"[]",l(x))}),!1}return nw(p)?!0:(e.append(jD(y,v,a),l(p)),!1)}var f=[],h=Object.assign(ffe,{defaultVisitor:u,convertValue:l,isVisitable:nw});function d(p,v){if(!br.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(p),br.forEach(p,function(m,g){var x=!br.isUndefined(m)&&i.call(e,m,br.isString(g)?g.trim():g,v,h);x===!0&&d(m,v?v.concat(g):[g])}),f.pop()}}if(!br.isObject(t))throw new TypeError("data must be an object");return d(t),e}var hy=dfe,pfe=hy;function $D(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(n){return e[n]})}function l6(t,e){this._pairs=[],t&&pfe(t,this,e)}var u6=l6.prototype;u6.append=function(e,r){this._pairs.push([e,r])};u6.toString=function(e){var r=e?function(n){return e.call(this,n,$D)}:$D;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};var c6=l6,vfe=Pn,gfe=c6;function mfe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var f6=function(e,r,n){if(!r)return e;var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i));var a=n&&n.encode||mfe,o=vfe.isURLSearchParams(r)?r.toString():new gfe(r,n).toString(a);return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e},yfe=Pn;function Up(){this.handlers=[]}Up.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Up.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Up.prototype.clear=function(){this.handlers&&(this.handlers=[])};Up.prototype.forEach=function(e){yfe.forEach(this.handlers,function(n){n!==null&&e(n)})};var _fe=Up,xfe=Pn,h6=function(e,r){xfe.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},d6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bfe=c6,Sfe=typeof URLSearchParams<"u"?URLSearchParams:bfe,Efe=FormData,wfe={isBrowser:!0,classes:{URLSearchParams:Sfe,FormData:Efe,Blob},protocols:["http","https","file","blob","url","data"]},KT=wfe,Afe=Pn,Cfe=hy,VD=KT,Tfe=function(e,r){return Cfe(e,new VD.classes.URLSearchParams,Object.assign({visitor:function(n,i,a,o){return VD.isNode&&Afe.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},r))},zs=Pn;function Ofe(t){return zs.matchAll(/\w+|\[(\w*)]/g,t).map(function(e){return e[0]==="[]"?"":e[1]||e[0]})}function Pfe(t){var e={},r=Object.keys(t),n,i=r.length,a;for(n=0;n<i;n++)a=r[n],e[a]=t[a];return e}function Rfe(t){function e(n,i,a,o){var s=n[o++],c=Number.isFinite(+s),l=o>=n.length;if(s=!s&&zs.isArray(a)?a.length:s,l)return zs.hasOwnProperty(a,s)?a[s]=[a[s],i]:a[s]=i,!c;(!a[s]||!zs.isObject(a[s]))&&(a[s]=[]);var u=e(n,i,a[s],o);return u&&zs.isArray(a[s])&&(a[s]=Pfe(a[s])),!c}if(zs.isFormData(t)&&zs.isFunction(t.entries)){var r={};return zs.forEachEntry(t,function(n,i){e(Ofe(n),i,r,0)}),r}return null}var p6=Rfe,X1,GD;function Ife(){if(GD)return X1;GD=1;var t=Zu;return X1=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},X1}var Y1,WD;function Ffe(){if(WD)return Y1;WD=1;var t=Pn;return Y1=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(s)&&l.push("domain="+s),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Y1}var kfe=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Dfe=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Mfe=kfe,Lfe=Dfe,v6=function(e,r){return e&&!Mfe(r)?Lfe(e,r):r},q1,zD;function Bfe(){if(zD)return q1;zD=1;var t=Pn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return q1=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(l){if(s=l.indexOf(":"),a=t.trim(l.slice(0,s)).toLowerCase(),o=t.trim(l.slice(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},q1}var K1,HD;function Nfe(){if(HD)return K1;HD=1;var t=Pn;return K1=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=t.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),K1}var Z1,XD;function dy(){if(XD)return Z1;XD=1;var t=Zu,e=Pn;function r(n,i,a){t.call(this,n??"canceled",t.ERR_CANCELED,i,a),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),Z1=r,Z1}var Q1,YD;function Ufe(){return YD||(YD=1,Q1=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Q1}var J1,qD;function KD(){if(qD)return J1;qD=1;var t=Pn,e=Ife(),r=Ffe(),n=f6,i=v6,a=Bfe(),o=Nfe(),s=d6,c=Zu,l=dy(),u=Ufe(),f=KT;return J1=function(d){return new Promise(function(v,y){var m=d.data,g=d.headers,x=d.responseType,b=d.withXSRFToken,S;function w(){d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}t.isFormData(m)&&t.isStandardBrowserEnv()&&delete g["Content-Type"];var A=new XMLHttpRequest;if(d.auth){var C=d.auth.username||"",O=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";g.Authorization="Basic "+btoa(C+":"+O)}var P=i(d.baseURL,d.url);A.open(d.method.toUpperCase(),n(P,d.params,d.paramsSerializer),!0),A.timeout=d.timeout;function I(){if(A){var D="getAllResponseHeaders"in A?a(A.getAllResponseHeaders()):null,L=!x||x==="text"||x==="json"?A.responseText:A.response,U={data:L,status:A.status,statusText:A.statusText,headers:D,config:d,request:A};e(function(ee){v(ee),w()},function(ee){y(ee),w()},U),A=null}}if("onloadend"in A?A.onloadend=I:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(I)},A.onabort=function(){A&&(y(new c("Request aborted",c.ECONNABORTED,d,A)),A=null)},A.onerror=function(){y(new c("Network Error",c.ERR_NETWORK,d,A)),A=null},A.ontimeout=function(){var L=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",U=d.transitional||s;d.timeoutErrorMessage&&(L=d.timeoutErrorMessage),y(new c(L,U.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,d,A)),A=null},t.isStandardBrowserEnv()&&(b&&t.isFunction(b)&&(b=b(d)),b||b!==!1&&o(P))){var R=d.xsrfHeaderName&&d.xsrfCookieName&&r.read(d.xsrfCookieName);R&&(g[d.xsrfHeaderName]=R)}"setRequestHeader"in A&&t.forEach(g,function(L,U){typeof m>"u"&&U.toLowerCase()==="content-type"?delete g[U]:A.setRequestHeader(U,L)}),t.isUndefined(d.withCredentials)||(A.withCredentials=!!d.withCredentials),x&&x!=="json"&&(A.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&A.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(S=function(D){A&&(y(!D||D.type?new l(null,d,req):D),A.abort(),A=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S))),!m&&m!==!1&&m!==0&&m!==""&&(m=null);var F=u(P);if(F&&f.protocols.indexOf(F)===-1){y(new c("Unsupported protocol "+F+":",c.ERR_BAD_REQUEST,d));return}A.send(m)})},J1}var xn=Pn,ZD=h6,QD=Zu,jfe=d6,$fe=hy,Vfe=Tfe,JD=KT,Gfe=p6,Wfe={"Content-Type":"application/x-www-form-urlencoded"};function eM(t,e){!xn.isUndefined(t)&&xn.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function zfe(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=KD()),t}function Hfe(t,e,r){if(xn.isString(t))try{return(e||JSON.parse)(t),xn.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var py={transitional:jfe,adapter:zfe(),transformRequest:[function(e,r){ZD(r,"Accept"),ZD(r,"Content-Type");var n=r&&r["Content-Type"]||"",i=n.indexOf("application/json")>-1,a=xn.isObject(e);a&&xn.isHTMLForm(e)&&(e=new FormData(e));var o=xn.isFormData(e);if(o)return i?JSON.stringify(Gfe(e)):e;if(xn.isArrayBuffer(e)||xn.isBuffer(e)||xn.isStream(e)||xn.isFile(e)||xn.isBlob(e))return e;if(xn.isArrayBufferView(e))return e.buffer;if(xn.isURLSearchParams(e))return eM(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var s;if(a){if(n.indexOf("application/x-www-form-urlencoded")!==-1)return Vfe(e,this.formSerializer).toString();if((s=xn.isFileList(e))||n.indexOf("multipart/form-data")>-1){var c=this.env&&this.env.FormData;return $fe(s?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(eM(r,"application/json"),Hfe(e)):e}],transformResponse:[function(e){var r=this.transitional||py.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&xn.isString(e)&&(n&&!this.responseType||i)){var a=r&&r.silentJSONParsing,o=!a&&i;try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?QD.from(s,QD.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:JD.classes.FormData,Blob:JD.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xn.forEach(["delete","get","head"],function(e){py.headers[e]={}});xn.forEach(["post","put","patch"],function(e){py.headers[e]=xn.merge(Wfe)});var ZT=py,Xfe=Pn,Yfe=ZT,qfe=function(e,r,n,i){var a=this||Yfe;return Xfe.forEach(i,function(s){e=s.call(a,e,r,n)}),e},eb,tM;function g6(){return tM||(tM=1,eb=function(e){return!!(e&&e.__CANCEL__)}),eb}var rM=Pn,tb=qfe,Kfe=g6(),Zfe=ZT,Qfe=dy(),nM=h6;function rb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qfe}var Jfe=function(e){rb(e),e.headers=e.headers||{},e.data=tb.call(e,e.data,e.headers,null,e.transformRequest),nM(e.headers,"Accept"),nM(e.headers,"Content-Type"),e.headers=rM.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),rM.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Zfe.adapter;return r(e).then(function(i){return rb(e),i.data=tb.call(e,i.data,i.headers,i.status,e.transformResponse),i},function(i){return Kfe(i)||(rb(e),i&&i.response&&(i.response.data=tb.call(e,i.response.data,i.response.headers,i.response.status,e.transformResponse))),Promise.reject(i)})},wi=Pn,m6=function(e,r){r=r||{};var n={};function i(u,f){return wi.isPlainObject(u)&&wi.isPlainObject(f)?wi.merge(u,f):wi.isEmptyObject(f)?wi.merge({},u):wi.isPlainObject(f)?wi.merge({},f):wi.isArray(f)?f.slice():f}function a(u){if(wi.isUndefined(r[u])){if(!wi.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function o(u){if(!wi.isUndefined(r[u]))return i(void 0,r[u])}function s(u){if(wi.isUndefined(r[u])){if(!wi.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return wi.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=l[f]||a,d=h(f);wi.isUndefined(d)&&h!==c||(n[f]=d)}),n},nb,iM;function y6(){return iM||(iM=1,nb={version:"0.28.0"}),nb}var ehe=y6().version,Ys=Zu,QT={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){QT[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var aM={};QT.transitional=function(e,r,n){function i(a,o){return"[Axios v"+ehe+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Ys(i(o," has been removed"+(r?" in "+r:"")),Ys.ERR_DEPRECATED);return r&&!aM[o]&&(aM[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function the(t,e,r){if(typeof t!="object")throw new Ys("options must be an object",Ys.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],c=s===void 0||o(s,a,t);if(c!==!0)throw new Ys("option "+a+" must be "+c,Ys.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ys("Unknown option "+a,Ys.ERR_BAD_OPTION)}}var rhe={assertOptions:the,validators:QT},JT=Pn,nhe=f6,oM=_fe,sM=Jfe,vy=m6,ihe=v6,_6=rhe,Ec=_6.validators;function _f(t){this.defaults=t,this.interceptors={request:new oM,response:new oM}}_f.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=vy(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&_6.assertOptions(n,{silentJSONParsing:Ec.transitional(Ec.boolean),forcedJSONParsing:Ec.transitional(Ec.boolean),clarifyTimeoutError:Ec.transitional(Ec.boolean)},!1);var i=r.paramsSerializer;JT.isFunction(i)&&(r.paramsSerializer={serialize:i});var a=[],o=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(o=o&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});var s=[];this.interceptors.response.forEach(function(p){s.push(p.fulfilled,p.rejected)});var c;if(!o){var l=[sM,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(s),c=Promise.resolve(r);l.length;)c=c.then(l.shift(),l.shift());return c}for(var u=r;a.length;){var f=a.shift(),h=a.shift();try{u=f(u)}catch(d){h(d);break}}try{c=sM(u)}catch(d){return Promise.reject(d)}for(;s.length;)c=c.then(s.shift(),s.shift());return c};_f.prototype.getUri=function(e){e=vy(this.defaults,e);var r=ihe(e.baseURL,e.url);return nhe(r,e.params,e.paramsSerializer)};JT.forEach(["delete","get","head","options"],function(e){_f.prototype[e]=function(r,n){return this.request(vy(n||{},{method:e,url:r,data:(n||{}).data}))}});JT.forEach(["post","put","patch"],function(e){function r(n){return function(a,o,s){return this.request(vy(s||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}_f.prototype[e]=r(),_f.prototype[e+"Form"]=r(!0)});var ahe=_f,ib,lM;function ohe(){if(lM)return ib;lM=1;var t=dy();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){for(var o=i._listeners.length;o-- >0;)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o,s,c){i.reason||(i.reason=new t(o,s,c),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},ib=e,ib}var ab,uM;function she(){return uM||(uM=1,ab=function(e){return function(n){return e.apply(null,n)}}),ab}var ob,cM;function lhe(){if(cM)return ob;cM=1;var t=Pn;return ob=function(r){return t.isObject(r)&&r.isAxiosError===!0},ob}var iw=Pn,uhe=e6,ag=ahe,che=m6,fhe=ZT,hhe=p6;function x6(t){var e=new ag(t),r=uhe(ag.prototype.request,e);return iw.extend(r,ag.prototype,e),iw.extend(r,e),r.create=function(i){return x6(che(t,i))},r}var ki=x6(fhe);ki.Axios=ag;ki.CanceledError=dy();ki.CancelToken=ohe();ki.isCancel=g6();ki.VERSION=y6().version;ki.toFormData=hy;ki.AxiosError=Zu;ki.Cancel=ki.CanceledError;ki.all=function(e){return Promise.all(e)};ki.spread=she();ki.isAxiosError=lhe();ki.formToJSON=function(t){return hhe(iw.isHTMLForm(t)?new FormData(t):t)};zT.exports=ki;zT.exports.default=ki;var dhe=zT.exports,phe=dhe;const Hd=gi(phe),ya=t=>new Promise(e=>{Hd.get(t).then(r=>{const n=r.data.toString();e(n)})}),vhe={performName:"",duration:100,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0},gy=t=>{var n;let e=vhe;e=(((n=j5[t.command])==null?void 0:n.scriptFunction)??q5.say.scriptFunction)(t),e.arrangePerformPromise?e.arrangePerformPromise.then(i=>H.gameplay.performController.arrangeNewPerform(i,t)):H.gameplay.performController.arrangeNewPerform(e,t)},ghe=t=>{ya(t.sceneUrl).then(async e=>{await H.sceneManager.setCurrentScene(e,t.sceneName,t.sceneUrl,!0)&&(H.sceneManager.sceneData.currentSentenceId=t.continueLine+1,Ge.debug("现在恢复场景，恢复后场景：",H.sceneManager.sceneData.currentScene),ln())})};var e2={},Xd={document:{}},b6=Object.prototype.hasOwnProperty,S6=function(t){return my(t)?t.toLowerCase():t},Sd=Array.isArray,mhe=function(t){return my(t)?t.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)}):t};"I".toLowerCase()!=="i"&&(S6=mhe);var yhe,t2=Object.prototype.toString,E6=Object.getPrototypeOf,sb=O6("ng");Xd.angular||(Xd.angular={});Xd.document.documentMode;function _he(t){if(t==null||i2(t))return!1;if(Sd(t)||my(t)||yhe)return!0;var e="length"in Object(t)&&t.length;return n2(e)&&(e>=0&&(e-1 in t||t instanceof Array)||typeof t.item=="function")}function jr(t,e,r){var n,i;if(t)if(C6(t))for(n in t)n!=="prototype"&&n!=="length"&&n!=="name"&&t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else if(Sd(t)||_he(t)){var a=typeof t!="object";for(n=0,i=t.length;n<i;n++)(a||n in t)&&e.call(r,t[n],n,t)}else if(t.forEach&&t.forEach!==jr)t.forEach(e,r,t);else if(A6(t))for(n in t)e.call(r,t[n],n,t);else if(typeof t.hasOwnProperty=="function")for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else for(n in t)b6.call(t,n)&&e.call(r,t[n],n,t);return t}function xhe(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function r2(){}r2.$inject=[];function bhe(t){return typeof t>"u"}function Gc(t){return typeof t<"u"}function w6(t){return t!==null&&typeof t=="object"}function A6(t){return t!==null&&typeof t=="object"&&!E6(t)}function my(t){return typeof t=="string"}function n2(t){return typeof t=="number"}function C6(t){return typeof t=="function"}function i2(t){return t&&t.window===t}function T6(t){return t&&t.$evalAsync&&t.$watch}var She=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function Ehe(t){return t&&n2(t.length)&&She.test(t2.call(t))}function whe(t){return t2.call(t)==="[object ArrayBuffer]"}function Ahe(t,e){var r=[],n=[];if(e){if(Ehe(e)||whe(e))throw sb("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw sb("cpi","Can't copy! Source and destination are identical.");return Sd(e)?e.length=0:jr(e,function(s,c){c!=="$$hashKey"&&delete e[c]}),r.push(t),n.push(e),i(t,e)}return a(t);function i(s,c){var l=c.$$hashKey,u;if(Sd(s))for(var f=0,h=s.length;f<h;f++)c.push(a(s[f]));else if(A6(s))for(u in s)c[u]=a(s[u]);else if(s&&typeof s.hasOwnProperty=="function")for(u in s)s.hasOwnProperty(u)&&(c[u]=a(s[u]));else for(u in s)b6.call(s,u)&&(c[u]=a(s[u]));return xhe(c,l),c}function a(s){if(!w6(s))return s;var c=r.indexOf(s);if(c!==-1)return n[c];if(i2(s)||T6(s))throw sb("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var l=!1,u=o(s);return u===void 0&&(u=Sd(s)?[]:Object.create(E6(s)),l=!0),r.push(s),n.push(u),l?i(s,u):u}function o(s){switch(t2.call(s)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new s.constructor(a(s.buffer),s.byteOffset,s.length);case"[object ArrayBuffer]":if(!s.slice){var c=new ArrayBuffer(s.byteLength);return new Uint8Array(c).set(new Uint8Array(s)),c}return s.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new s.constructor(s.valueOf());case"[object RegExp]":var l=new RegExp(s.source,s.toString().match(/[^\/]*$/)[0]);return l.lastIndex=s.lastIndex,l;case"[object Blob]":return new s.constructor([s],{type:s.type})}if(C6(s.cloneNode))return s.cloneNode(!0)}}function Che(t,e){var r=e;return typeof t=="string"&&t.charAt(0)==="$"&&t.charAt(1)==="$"?r=void 0:i2(e)?r="$WINDOW":e&&Xd.document===e?r="$DOCUMENT":T6(e)&&(r="$SCOPE"),r}function The(t){if(!t.currentScript)return!0;var e=t.currentScript.getAttribute("src"),r=t.createElement("a");r.href=e;var n=r.protocol,i=t.location.protocol;return!((n==="resource:"||n==="chrome-extension:")&&i!==n)}The(Xd.document);function Ohe(){return Object.create(null)}function Phe(t){var e=[];return JSON.stringify(t,function(r,n){if(n=Che(r,n),w6(n)){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}function fM(t){return typeof t=="function"?t.toString().replace(/ \{[\s\S]*$/,""):bhe(t)?"undefined":typeof t!="string"?Phe(t):t}function O6(t,e){return e=e||Error,function(){var r=2,n=arguments,i=n[0],a="["+(t?t+":":"")+i+"] ",o=n[1],s,c;for(a+=o.replace(/\{\d+\}/g,function(l){var u=+l.slice(1,-1),f=u+r;return f<n.length?fM(n[f]):l}),a+=`
http://errors.angularjs.org/"NG_VERSION_FULL"/`+(t?t+"/":"")+i,c=r,s="?";c<n.length;c++,s="&")a+=s+"p"+(c-r)+"="+encodeURIComponent(fM(n[c]));return new e(a)}}var Wc=O6("$parse");({}).constructor.prototype.valueOf;function P6(t){return t+""}var og=Ohe();jr("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){og[t]=!0});var Rhe={n:`
`,f:"\f",r:"\r",t:"	",v:"\v","'":"'",'"':'"'},aw=function(e){this.options=e};aw.prototype={constructor:aw,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if(e==='"'||e==="'")this.readString(e);else if(this.isNumber(e)||e==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var r=e+this.peek(),n=r+this.peek(2),i=og[e],a=og[r],o=og[n];if(i||a||o){var s=o?n:a?r:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return e.indexOf(t)!==-1},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return"0"<=t&&t<="9"&&typeof t=="string"},isWhitespace:function(t){return t===" "||t==="\r"||t==="	"||t===`
`||t==="\v"||t===" "},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||t==="_"||t==="$"},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return t.length===1?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var r=t.charCodeAt(0),n=e.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?t+e:t},isExpOperator:function(t){return t==="-"||t==="+"||this.isNumber(t)},throwError:function(t,e,r){r=r||this.index;var n=Gc(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,r)+"]":" "+r;throw Wc("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var r=S6(this.text.charAt(this.index));if(r==="."||this.isNumber(r))t+=r;else{var n=this.peek();if(r==="e"&&this.isExpOperator(n))t+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&t.charAt(t.length-1)==="e")t+=r;else if(this.isExpOperator(r)&&(!n||!this.isNumber(n))&&t.charAt(t.length-1)==="e")this.throwError("Invalid exponent");else break}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var r="",n=t,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(n+=a,i){if(a==="u"){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,r+=String.fromCharCode(parseInt(o,16))}else{var s=Rhe[a];r=r+(s||a)}i=!1}else if(a==="\\")i=!0;else if(a===t){this.index++,this.tokens.push({index:e,text:n,constant:!0,value:r});return}else r+=a;this.index++}this.throwError("Unterminated quote",e)}};var Fe=function(e,r){this.lexer=e,this.options=r};Fe.Program="Program";Fe.ExpressionStatement="ExpressionStatement";Fe.AssignmentExpression="AssignmentExpression";Fe.ConditionalExpression="ConditionalExpression";Fe.LogicalExpression="LogicalExpression";Fe.BinaryExpression="BinaryExpression";Fe.UnaryExpression="UnaryExpression";Fe.CallExpression="CallExpression";Fe.MemberExpression="MemberExpression";Fe.Identifier="Identifier";Fe.Literal="Literal";Fe.ArrayExpression="ArrayExpression";Fe.Property="Property";Fe.ObjectExpression="ObjectExpression";Fe.ThisExpression="ThisExpression";Fe.LocalsExpression="LocalsExpression";Fe.NGValueParameter="NGValueParameter";Fe.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Fe.Program,body:t}},expressionStatement:function(){return{type:Fe.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!F6(t))throw Wc("lval","Trying to assign a value to a non l-value");t={type:Fe.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t=this.logicalOR(),e,r;return this.expect("?")&&(e=this.expression(),this.consume(":"))?(r=this.expression(),{type:Fe.ConditionalExpression,test:t,alternate:e,consequent:r}):t},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Fe.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Fe.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t=this.relational(),e;e=this.expect("==","!=","===","!==");)t={type:Fe.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var t=this.additive(),e;e=this.expect("<",">","<=",">=");)t={type:Fe.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var t=this.multiplicative(),e;e=this.expect("+","-");)t={type:Fe.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var t=this.unary(),e;e=this.expect("*","/","%");)t={type:Fe.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Fe.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=Ahe(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Fe.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)e.text==="("?(t={type:Fe.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):e.text==="["?(t={type:Fe.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):e.text==="."?t={type:Fe.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],r={type:Fe.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return r},parseArguments:function(){var t=[];if(this.peekToken().text!==")")do t.push(this.filterChain());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Fe.Identifier,name:t.text}},constant:function(){return{type:Fe.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Fe.ArrayExpression,elements:t}},object:function(){var t=[],e;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;e={type:Fe.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Fe.ObjectExpression,properties:t}},throwError:function(t,e){throw Wc("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(this.tokens.length===0)throw Wc("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(this.tokens.length===0)throw Wc("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,r,n){return this.peekAhead(0,t,e,r,n)},peekAhead:function(t,e,r,n,i){if(this.tokens.length>t){var a=this.tokens[t],o=a.text;if(o===e||o===r||o===n||o===i||!e&&!r&&!n&&!i)return a}return!1},expect:function(t,e,r,n){var i=this.peek(t,e,r,n);return i?(this.tokens.shift(),i):!1},selfReferential:{this:{type:Fe.ThisExpression},$locals:{type:Fe.LocalsExpression}}};function Ihe(t,e){return typeof t<"u"?t:e}function R6(t,e){return typeof t>"u"?e:typeof e>"u"?t:t+e}function Fhe(t,e){var r=t(e);if(!r)throw new Error("Filter '"+e+"' is not defined");return!r.$stateful}function Mn(t,e){var r,n,i;switch(t.type){case Fe.Program:r=!0,jr(t.body,function(a){Mn(a.expression,e),r=r&&a.expression.constant}),t.constant=r;break;case Fe.Literal:t.constant=!0,t.toWatch=[];break;case Fe.UnaryExpression:Mn(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Fe.BinaryExpression:Mn(t.left,e),Mn(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Fe.LogicalExpression:Mn(t.left,e),Mn(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Fe.ConditionalExpression:Mn(t.test,e),Mn(t.alternate,e),Mn(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Fe.Identifier:t.constant=!1,t.toWatch=[t];break;case Fe.MemberExpression:Mn(t.object,e),t.computed&&Mn(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Fe.CallExpression:i=t.filter?Fhe(e,t.callee.name):!1,r=i,n=[],jr(t.arguments,function(a){Mn(a,e),r=r&&a.constant,a.constant||n.push.apply(n,a.toWatch)}),t.constant=r,t.toWatch=i?n:[t];break;case Fe.AssignmentExpression:Mn(t.left,e),Mn(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Fe.ArrayExpression:r=!0,n=[],jr(t.elements,function(a){Mn(a,e),r=r&&a.constant,a.constant||n.push.apply(n,a.toWatch)}),t.constant=r,t.toWatch=n;break;case Fe.ObjectExpression:r=!0,n=[],jr(t.properties,function(a){Mn(a.value,e),r=r&&a.value.constant&&!a.computed,a.value.constant||n.push.apply(n,a.value.toWatch)}),t.constant=r,t.toWatch=n;break;case Fe.ThisExpression:t.constant=!1,t.toWatch=[];break;case Fe.LocalsExpression:t.constant=!1,t.toWatch=[];break}}function I6(t){if(t.length===1){var e=t[0].expression,r=e.toWatch;return r.length!==1||r[0]!==e?r:void 0}}function F6(t){return t.type===Fe.Identifier||t.type===Fe.MemberExpression}function k6(t){if(t.body.length===1&&F6(t.body[0].expression))return{type:Fe.AssignmentExpression,left:t.body[0].expression,right:{type:Fe.NGValueParameter},operator:"="}}function D6(t){return t.body.length===0||t.body.length===1&&(t.body[0].expression.type===Fe.Literal||t.body[0].expression.type===Fe.ArrayExpression||t.body[0].expression.type===Fe.ObjectExpression)}function M6(t){return t.constant}function L6(t,e){this.astBuilder=t,this.$filter=e}L6.prototype={compile:function(t){var e=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Mn(r,e.$filter);var n="",i;if(this.stage="assign",i=k6(r)){this.state.computing="assign";var a=this.nextId();this.recurse(i,a),this.return_(a),n="fn.assign="+this.generateFunction("assign","s,v,l")}var o=I6(r.body);e.stage="inputs",jr(o,function(l,u){var f="fn"+u;e.state[f]={vars:[],body:[],own:{}},e.state.computing=f;var h=e.nextId();e.recurse(l,h),e.return_(h),e.state.inputs.push(f),l.watchId=u}),this.state.computing="fn",this.stage="main",this.recurse(r);var s='"'+this.USE+" "+this.STRICT+`";
`+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",c=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,P6,Ihe,R6);return this.state=this.stage=void 0,c.ast=r,c.literal=D6(r),c.constant=M6(r),c},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,r=this;return jr(e,function(n){t.push("var "+n+"="+r.generateFunction(n,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return jr(this.state.filters,function(r,n){t.push(r+"=$filter("+e.escape(n)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,n,i,a){var o,s,c=this,l,u,f;if(n=n||r2,!a&&Gc(t.watchId)){e=e||this.nextId(),this.if_("i",this.lazyAssign(e,this.unsafeComputedMember("i",t.watchId)),this.lazyRecurse(t,e,r,n,i,!0));return}switch(t.type){case Fe.Program:jr(t.body,function(d,p){c.recurse(d.expression,void 0,void 0,function(v){s=v}),p!==t.body.length-1?c.current().body.push(s,";"):c.return_(s)});break;case Fe.Literal:u=this.escape(t.value),this.assign(e,u),n(e||u);break;case Fe.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(d){s=d}),u=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,u),n(u);break;case Fe.BinaryExpression:this.recurse(t.left,void 0,void 0,function(d){o=d}),this.recurse(t.right,void 0,void 0,function(d){s=d}),t.operator==="+"?u=this.plus(o,s):t.operator==="-"?u=this.ifDefined(o,0)+t.operator+this.ifDefined(s,0):u="("+o+")"+t.operator+"("+s+")",this.assign(e,u),n(u);break;case Fe.LogicalExpression:e=e||this.nextId(),c.recurse(t.left,e),c.if_(t.operator==="&&"?e:c.not(e),c.lazyRecurse(t.right,e)),n(e);break;case Fe.ConditionalExpression:e=e||this.nextId(),c.recurse(t.test,e),c.if_(e,c.lazyRecurse(t.alternate,e),c.lazyRecurse(t.consequent,e)),n(e);break;case Fe.Identifier:e=e||this.nextId();var h=c.current().inAssignment;r&&(h?r.context=this.assign(this.nextId(),"s"):r.context=c.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),c.if_(c.stage==="inputs"||c.not(c.getHasOwnProperty("l",t.name)),function(){c.if_(c.stage==="inputs"||c.and_("s",c.or_(c.isNull(c.nonComputedMember("s",t.name)),c.hasOwnProperty_("s",t.name))),function(){i&&i!==1&&c.if_(c.isNull(c.nonComputedMember("s",t.name)),c.lazyAssign(c.nonComputedMember("s",t.name),"{}")),c.assign(e,c.nonComputedMember("s",t.name))})},e&&c.lazyAssign(e,c.nonComputedMember("l",t.name))),n(e);break;case Fe.MemberExpression:o=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),c.recurse(t.object,o,void 0,function(){var d=null,p=c.current().inAssignment;t.computed?(s=c.nextId(),p||c.state.computing==="assign"?d=c.unsafeComputedMember(o,s):d=c.computedMember(o,s)):(p||c.state.computing==="assign"?d=c.unsafeNonComputedMember(o,t.property.name):d=c.nonComputedMember(o,t.property.name),s=t.property.name),t.computed&&t.property.type===Fe.Literal&&c.recurse(t.property,s),c.if_(c.and_(c.notNull(o),c.or_(c.isNull(d),c.hasOwnProperty_(o,s,t.computed))),function(){t.computed?(t.property.type!==Fe.Literal&&c.recurse(t.property,s),i&&i!==1&&c.if_(c.not(d),c.lazyAssign(d,"{}")),c.assign(e,d),r&&(r.computed=!0,r.name=s)):(i&&i!==1&&c.if_(c.isNull(d),c.lazyAssign(d,"{}")),c.assign(e,d),r&&(r.computed=!1,r.name=t.property.name))},function(){c.assign(e,"undefined")}),n(e)},!!i);break;case Fe.CallExpression:e=e||this.nextId(),t.filter?(s=c.filter(t.callee.name),l=[],jr(t.arguments,function(d){var p=c.nextId();c.recurse(d,p),l.push(p)}),u=s+".call("+s+","+l.join(",")+")",c.assign(e,u),n(e)):(s=c.nextId(),o={},l=[],c.recurse(t.callee,s,o,function(){c.if_(c.notNull(s),function(){if(jr(t.arguments,function(p){c.recurse(p,t.constant?void 0:c.nextId(),void 0,function(v){l.push(v)})}),o.name){var d=c.member(o.context,o.name,o.computed);u="("+d+" === null ? null : "+c.unsafeMember(o.context,o.name,o.computed)+".call("+[o.context].concat(l).join(",")+"))"}else u=s+"("+l.join(",")+")";c.assign(e,u)},function(){c.assign(e,"undefined")}),n(e)}));break;case Fe.AssignmentExpression:s=this.nextId(),o={},c.current().inAssignment=!0,this.recurse(t.left,void 0,o,function(){c.if_(c.and_(c.notNull(o.context),c.or_(c.hasOwnProperty_(o.context,o.name),c.isNull(c.member(o.context,o.name,o.computed)))),function(){c.recurse(t.right,s),u=c.member(o.context,o.name,o.computed)+t.operator+s,c.assign(e,u),n(e||u)}),c.current().inAssignment=!1,c.recurse(t.right,s),c.current().inAssignment=!0},1),c.current().inAssignment=!1;break;case Fe.ArrayExpression:l=[],jr(t.elements,function(d){c.recurse(d,t.constant?void 0:c.nextId(),void 0,function(p){l.push(p)})}),u="["+l.join(",")+"]",this.assign(e,u),n(e||u);break;case Fe.ObjectExpression:l=[],f=!1,jr(t.properties,function(d){d.computed&&(f=!0)}),f?(e=e||this.nextId(),this.assign(e,"{}"),jr(t.properties,function(d){d.computed?(o=c.nextId(),c.recurse(d.key,o)):o=d.key.type===Fe.Identifier?d.key.name:""+d.key.value,s=c.nextId(),c.recurse(d.value,s),c.assign(c.unsafeMember(e,o,d.computed),s)})):(jr(t.properties,function(d){c.recurse(d.value,t.constant?void 0:c.nextId(),void 0,function(p){l.push(c.escape(d.key.type===Fe.Identifier?d.key.name:""+d.key.value)+":"+p)})}),u="{"+l.join(",")+"}",this.assign(e,u)),n(e||u);break;case Fe.ThisExpression:this.assign(e,"s"),n(e||"s");break;case Fe.LocalsExpression:this.assign(e,"l"),n(e||"l");break;case Fe.NGValueParameter:this.assign(e,"v"),n(e||"v");break}},getHasOwnProperty:function(t,e){var r=t+"."+e,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[r]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,r){if(t===!0)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},or_:function(t,e){return"("+t+") || ("+e+")"},hasOwnProperty_:function(t,e,r){return r?"(Object.prototype.hasOwnProperty.call("+t+","+e+"))":"(Object.prototype.hasOwnProperty.call("+t+",'"+e+"'))"},and_:function(t,e){return"("+t+") && ("+e+")"},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,n=/[^$_a-zA-Z0-9]/g,i="";return r.test(e)?i=t+"."+e:(e=e.replace(n,this.stringEscapeFn),i=t+'["'+e+'"]'),i},unsafeComputedMember:function(t,e){return t+"["+e+"]"},unsafeNonComputedMember:function(t,e){return this.nonComputedMember(t,e)},computedMember:function(t,e){return this.state.computing==="assign"?this.unsafeComputedMember(t,e):"("+t+".hasOwnProperty("+e+") ? "+t+"["+e+"] : null)"},unsafeMember:function(t,e,r){return r?this.unsafeComputedMember(t,e):this.unsafeNonComputedMember(t,e)},member:function(t,e,r){return r?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,r,n,i,a){var o=this;return function(){o.recurse(t,e,r,n,i,a)}},lazyAssign:function(t,e){var r=this;return function(){r.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(my(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(n2(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(t===null)return"null";if(typeof t>"u")return"undefined";throw Wc("esc","IMPOSSIBLE")},nextId:function(t,e){var r="v"+this.state.nextId++;return t||this.current().vars.push(r+(e?"="+e:"")),r},current:function(){return this.state[this.state.computing]}};function B6(t,e){this.astBuilder=t,this.$filter=e}B6.prototype={compile:function(t){var e=this,r=this.astBuilder.ast(t);Mn(r,e.$filter);var n,i;(n=k6(r))&&(i=this.recurse(n));var a=I6(r.body),o;a&&(o=[],jr(a,function(l,u){var f=e.recurse(l);l.input=f,o.push(f),l.watchId=u}));var s=[];jr(r.body,function(l){s.push(e.recurse(l.expression))});var c=r.body.length===0?r2:r.body.length===1?s[0]:function(l,u){var f;return jr(s,function(h){f=h(l,u)}),f};return i&&(c.assign=function(l,u,f){return i(l,f,u)}),o&&(c.inputs=o),c.ast=r,c.literal=D6(r),c.constant=M6(r),c},recurse:function(t,e,r){var n,i,a=this,o;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Fe.Literal:return this.value(t.value,e);case Fe.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Fe.BinaryExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case Fe.LogicalExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case Fe.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Fe.Identifier:return a.identifier(t.name,e,r);case Fe.MemberExpression:return n=this.recurse(t.object,!1,!!r),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(n,i,e,r):this.nonComputedMember(n,i,e,r);case Fe.CallExpression:return o=[],jr(t.arguments,function(s){o.push(a.recurse(s))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(s,c,l,u){for(var f=[],h=0;h<o.length;++h)f.push(o[h](s,c,l,u));var d=i.apply(void 0,f,u);return e?{context:void 0,name:void 0,value:d}:d}:function(s,c,l,u){var f=i(s,c,l,u),h;if(f.value!=null){for(var d=[],p=0;p<o.length;++p)d.push(o[p](s,c,l,u));h=f.value.apply(f.context,d)}return e?{value:h}:h};case Fe.AssignmentExpression:return n=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(s,c,l,u){var f=n(s,!1,l,u),h=i(s,c,l,u);return f.context[f.name]=h,e?{value:h}:h};case Fe.ArrayExpression:return o=[],jr(t.elements,function(s){o.push(a.recurse(s))}),function(s,c,l,u){for(var f=[],h=0;h<o.length;++h)f.push(o[h](s,c,l,u));return e?{value:f}:f};case Fe.ObjectExpression:return o=[],jr(t.properties,function(s){s.computed?o.push({key:a.recurse(s.key),computed:!0,value:a.recurse(s.value)}):o.push({key:s.key.type===Fe.Identifier?s.key.name:""+s.key.value,computed:!1,value:a.recurse(s.value)})}),function(s,c,l,u){for(var f={},h=0;h<o.length;++h)o[h].computed?f[o[h].key(s,c,l,u)]=o[h].value(s,c,l,u):f[o[h].key]=o[h].value(s,c,l,u);return e?{value:f}:f};case Fe.ThisExpression:return function(s){return e?{value:s}:s};case Fe.LocalsExpression:return function(s,c){return e?{value:c}:c};case Fe.NGValueParameter:return function(s,c,l){return e?{value:l}:l}}},"unary+":function(t,e){return function(r,n,i,a){var o=t(r,n,i,a);return Gc(o)?o=+o:o=0,e?{value:o}:o}},"unary-":function(t,e){return function(r,n,i,a){var o=t(r,n,i,a);return Gc(o)?o=-o:o=-0,e?{value:o}:o}},"unary!":function(t,e){return function(r,n,i,a){var o=!t(r,n,i,a);return e?{value:o}:o}},"binary+":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o),c=e(n,i,a,o),l=R6(s,c);return r?{value:l}:l}},"binary-":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o),c=e(n,i,a,o),l=(Gc(s)?s:0)-(Gc(c)?c:0);return r?{value:l}:l}},"binary*":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)*e(n,i,a,o);return r?{value:s}:s}},"binary/":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)/e(n,i,a,o);return r?{value:s}:s}},"binary%":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)%e(n,i,a,o);return r?{value:s}:s}},"binary===":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)===e(n,i,a,o);return r?{value:s}:s}},"binary!==":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)!==e(n,i,a,o);return r?{value:s}:s}},"binary==":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)==e(n,i,a,o);return r?{value:s}:s}},"binary!=":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)!=e(n,i,a,o);return r?{value:s}:s}},"binary<":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)<e(n,i,a,o);return r?{value:s}:s}},"binary>":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)>e(n,i,a,o);return r?{value:s}:s}},"binary<=":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)<=e(n,i,a,o);return r?{value:s}:s}},"binary>=":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)>=e(n,i,a,o);return r?{value:s}:s}},"binary&&":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)&&e(n,i,a,o);return r?{value:s}:s}},"binary||":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)||e(n,i,a,o);return r?{value:s}:s}},"ternary?:":function(t,e,r,n){return function(i,a,o,s){var c=t(i,a,o,s)?e(i,a,o,s):r(i,a,o,s);return n?{value:c}:c}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,r){return function(n,i,a,o){var s=i&&t in i?i:n;r&&r!==1&&s&&s[t]==null&&(s[t]={});var c=s?s[t]:void 0;return e?{context:s,name:t,value:c}:c}},computedMember:function(t,e,r,n){return function(i,a,o,s){var c=t(i,a,o,s),l,u;return c!=null&&(l=e(i,a,o,s),l=P6(l),n&&n!==1&&c&&!c[l]&&(c[l]={}),Object.prototype.hasOwnProperty.call(c,l)&&(u=c[l])),r?{context:c,name:l,value:u}:u}},nonComputedMember:function(t,e,r,n){return function(i,a,o,s){var c=t(i,a,o,s);n&&n!==1&&c&&c[e]==null&&(c[e]={});var l=void 0;return c!=null&&Object.prototype.hasOwnProperty.call(c,e)&&(l=c[e]),r?{context:c,name:e,value:l}:l}},inputs:function(t,e){return function(r,n,i,a){return a?a[e]:t(r,n,i)}}};var ow=function(e,r,n){this.lexer=e,this.$filter=r,this.options=n,this.ast=new Fe(e,n),this.astCompiler=n.csp?new B6(this.ast,r):new L6(this.ast,r)};ow.prototype={constructor:ow,parse:function(t){return this.astCompiler.compile(t)}};e2.Lexer=aw;e2.Parser=ow;var N6=e2,khe={},Dhe=N6.Lexer,Mhe=N6.Parser;function a2(t,e){e=e||{};var r=e.filters||khe,n=e.filters?e.cache||{}:a2.cache,i=e,a;if(typeof t!="string")throw new TypeError("src must be a string, instead saw '"+typeof t+"'");var o={csp:e.csp!=null?e.csp:!1,literals:e.literals!=null?e.literals:{true:!0,false:!1,null:null,undefined:void 0}},s=new Dhe(i),c=new Mhe(s,function(u){return r[u]},o);return n?(a=n[t],a||(a=n[t]=c.parse(t)),a):c.parse(t)}a2.cache=Object.create(null);var U6=a2;function Lhe(t,e){return typeof t!="number"&&(t=0),typeof e!="number"&&(t=0),t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t-1))+t+1}const Bhe=t=>{let e=!1,r=null,n=null,i=!1,a=0;t.args.forEach(s=>{s.key==="global"?e=!0:s.key==="minValue"?r=s.value:s.key==="maxValue"?n=s.value:s.key==="random"&&(i=s.value)}),i&&r!==null&&n!==null&&(a=Lhe(r,n));let o;if(e?o=joe:o=R8,t.content.match(/=/)){const s=t.content.split(/=/)[0],c=t.content.split(/=/)[1];if(c==="random()"){const l=i?a:Math.random();le.dispatch(o({key:s,value:l})),le.dispatch(xc({key:s,value:l}))}else if(c.match(/[+\-*\/()]/)&&!i){const u=c.split(/([+\-*\/()])/g).map(d=>d.match(/[a-zA-Z]/)?o2(d).toString():d).reduce((d,p)=>d+p,"");let h=U6(u)();typeof h=="number"&&(typeof r=="number"&&h<r&&(h=r),typeof n=="number"&&h>n&&(h=n)),le.dispatch(o({key:s,value:h})),le.dispatch(xc({key:s,value:h}))}else c.match(/true|false/)&&!i?(c.match(/true/)&&(le.dispatch(o({key:s,value:!0})),le.dispatch(xc({key:s,value:!0}))),c.match(/false/)&&(le.dispatch(o({key:s,value:!1})),le.dispatch(xc({key:s,value:!1})))):isNaN(Number(c))?(le.dispatch(o({key:s,value:i?a:c})),le.dispatch(xc({key:s,value:i?a:c}))):(le.dispatch(o({key:s,value:i?a:Number(c)})),le.dispatch(xc({key:s,value:i?a:Number(c)})));e?(Ge.debug("设置全局变量：",{key:s,value:le.getState().userData.globalGameVar[s]}),nU()):Ge.debug("设置变量：",{key:s,value:le.getState().stage.GameVar[s]})}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function o2(t){let e=0;return le.getState().stage.GameVar.hasOwnProperty(t)?e=le.getState().stage.GameVar[t]:le.getState().userData.globalGameVar.hasOwnProperty(t)&&(e=le.getState().userData.globalGameVar[t]),e}function Nhe(t){return U6(t)()}const sw=t=>{if(t===void 0)return!0;const e=t.split(/([+\-*\/()><!]|>=|<=|==|&&|\|\||!=)/g);if(e.every(n=>n.length)){const n=e.map(i=>i.match(/[a-zA-Z]/)?i.match(/true/)||i.match(/false/)?i:o2(i).toString():i).reduce((i,a)=>i+a,"");return!!Nhe(n)}return!0},j6=()=>{const t=H.sceneManager.sceneData.currentScene.sceneName;if(H.sceneManager.sceneData.currentSentenceId>H.sceneManager.sceneData.currentScene.sentenceList.length-1&&t!=="storyline.txt"&&t!=="achieve.txt"){if(H.sceneManager.sceneData.sceneStack.length!==0){const u=H.sceneManager.sceneData.sceneStack.pop();u!==void 0&&ghe(u)}return}const e=H.sceneManager.sceneData.currentScene.sentenceList[H.sceneManager.sceneData.currentSentenceId],r=u=>{let f=u,h;if(window.isSafari){const d=f.match(/\{.*?\}/g);d?h=d.filter((p,v)=>{const y=f.indexOf(p,v?f.indexOf(d[v-1])+d[v-1].length:0);return y===0||f[y-1]!=="\\"}):h=null}else h=f.match(new RegExp("(?<!\\\\)\\{(.*?)\\}","g"));return h!==null&&h.forEach(d=>{const p=o2(window.isSafari?d.slice(1,-1):d.replace(new RegExp("(?<!\\\\)\\{(.*)\\}"),"$1"));f=f.replace(d,p?p.toString():d)}),f=f.replace(/\\{/g,"{").replace(/\\}/g,"}"),f};(()=>{e.content=r((e==null?void 0:e.content)??""),e.args.forEach(u=>{u.value&&typeof u.value=="string"&&(u.value=r(u.value))})})();let i=!0,a=!1,o="";if(e.args.forEach(u=>{u.key==="when"&&(a=!0,o=u.value.toString())}),a&&(i=sw(o)),!i){Ge.warn("不满足条件，跳过本句！"),H.sceneManager.sceneData.currentSentenceId++,ln();return}gy(e);let s=!1;e.args.forEach(u=>{u.key==="next"&&u.value&&(s=!0)});let c=e.command===It.say;e.args.forEach(u=>{u.key==="notend"&&u.value===!0&&(c=!1)});let l;if(s){H.sceneManager.sceneData.currentSentenceId++,j6();return}setTimeout(()=>{l=le.getState().stage;const u={currentStageState:l,globalGameVar:le.getState().userData.globalGameVar};Ge.debug("本条语句执行结果",u),c&&H.backlogManager.saveCurrentStateToBacklog()},0),H.sceneManager.sceneData.currentSentenceId++},ln=()=>{if(H.events.userInteractNext.emit(),le.getState().GUI.showTitle)return;let e=!1;if(H.gameplay.performController.performList.forEach(i=>{i.blockingNext()&&!H.gameplay.isFast&&!H.gameplay.isSyncingWithOrigine&&(e=!0)}),e){Ge.warn("next 被阻塞！");return}let r=!0;if(H.gameplay.performController.performList.forEach(i=>{!i.isHoldOn&&!i.skipNextCollect&&(r=!1)}),r){const i=le.getState().stage,a=Gr(i);for(let o=0;o<a.PerformList.length;o++)a.PerformList[o].isHoldOn||(a.PerformList.splice(o,1),o--);le.dispatch(ry(a)),j6();return}Ge.warn("提前结束被触发，现在清除普通演出");let n=!1;for(let i=0;i<H.gameplay.performController.performList.length;i++){const a=H.gameplay.performController.performList[i];a.isHoldOn||(a.goNextWhenOver&&(n=!0),a.skipNextCollect||(a.stopFunction(),clearTimeout(a.stopTimeout),H.gameplay.performController.performList.splice(i,1),i--))}n&&ln()};var Uhe="__lodash_hash_undefined__";function jhe(t){return this.__data__.set(t,Uhe),this}var $he=jhe;function Vhe(t){return this.__data__.has(t)}var Ghe=Vhe,Whe=wT,zhe=$he,Hhe=Ghe;function Zg(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Whe;++e<r;)this.add(t[e])}Zg.prototype.add=Zg.prototype.push=zhe;Zg.prototype.has=Hhe;var $6=Zg;function Xhe(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var Yhe=Xhe;function qhe(t){return t!==t}var Khe=qhe;function Zhe(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Qhe=Zhe,Jhe=Yhe,ede=Khe,tde=Qhe;function rde(t,e,r){return e===e?tde(t,e,r):Jhe(t,ede,r)}var nde=rde,ide=nde;function ade(t,e){var r=t==null?0:t.length;return!!r&&ide(t,e,0)>-1}var ode=ade;function sde(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var lde=sde;function ude(t,e){return t.has(e)}var V6=ude;function cde(){}var fde=cde;function hde(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var s2=hde,lb=E8,dde=fde,pde=s2,vde=1/0,gde=lb&&1/pde(new lb([,-0]))[1]==vde?function(t){return new lb(t)}:dde,mde=gde,yde=$6,_de=ode,xde=lde,bde=V6,Sde=mde,Ede=s2,wde=200;function Ade(t,e,r){var n=-1,i=_de,a=t.length,o=!0,s=[],c=s;if(r)o=!1,i=xde;else if(a>=wde){var l=e?null:Sde(t);if(l)return Ede(l);o=!1,i=bde,c=new yde}else c=e?[]:s;e:for(;++n<a;){var u=t[n],f=e?e(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),s.push(u)}else i(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}var Cde=Ade,Tde=Cde;function Ode(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Tde(t,void 0,e):[]}var Pde=Ode;const jp=gi(Pde),qf=t=>{for(const e of t)H.sceneManager.settledScenes.includes(e)?Ge.warn(`场景${e}已经加载过，无需再次加载`):(Ge.info(`现在预加载场景${e}`),ya(e).then(r=>{Kd(r,e,e)}))},Rde=(t,e)=>{H.sceneManager.sceneData.sceneStack.push({sceneName:H.sceneManager.sceneData.currentScene.sceneName,sceneUrl:H.sceneManager.sceneData.currentScene.sceneUrl,continueLine:H.sceneManager.sceneData.currentSentenceId}),ya(t).then(async r=>{if(await H.sceneManager.setCurrentScene(r,e,t,!0)){H.sceneManager.sceneData.currentSentenceId=0;const i=H.sceneManager.sceneData.currentScene.subSceneList;H.sceneManager.settledScenes.push(t);const a=jp(i);qf(a),Ge.debug("现在调用场景，调用结果：",H.sceneManager.sceneData),ln()}})},Ide=t=>{const e=t.content.split("/"),r=e[e.length-1];return Rde(t.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Yd(t,e,r){let n;const a=le.getState().stage.effects.find(o=>o.target===t);if(e.duration=500,r&&typeof r=="number"&&(e.duration=r),n=[e],a){const o={...a.transform,duration:0};n.unshift(o)}else{const o={...e,alpha:0,duration:0};n.unshift(o)}return n}function G6(t,e){const r=H.gameplay.pixiStage.getStageObjByKey(t);function n(){r&&(r.pixiContainer.alpha=0)}function i(){r&&(r.pixiContainer.alpha=1)}function a(o){if(r){const s=r.pixiContainer,c=H.gameplay.pixiStage.frameDuration,u=1/(e/c*o);s.alpha<1&&(s.alpha+=u)}}return{setStartState:n,setEndState:i,tickerFunc:a}}function W6(t,e){const r=H.gameplay.pixiStage.getStageObjByKey(t);function n(){}function i(){r&&(r.pixiContainer.alpha=0)}function a(o){if(r){const s=r.pixiContainer,c=H.gameplay.pixiStage.frameDuration,u=1/(e/c*o);s.alpha>0&&(s.alpha-=u)}}return{setStartState:n,setEndState:i,tickerFunc:a}}const l2={alpha:1,scale:{x:1,y:1},position:{x:0,y:0},rotation:0,blur:0};function z6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var Fde=function(){},hM=function(){};const lw=(t,e,r)=>Math.min(Math.max(r,t),e),ub=.001,kde=.01,dM=10,Dde=.05,Mde=1;function Lde({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,a;Fde(t<=dM*1e3);let o=1-e;o=lw(Dde,Mde,o),t=lw(kde,dM,t/1e3),o<1?(i=l=>{const u=l*o,f=u*t,h=u-r,d=uw(l,o),p=Math.exp(-f);return ub-h/d*p},a=l=>{const f=l*o*t,h=f*r+r,d=Math.pow(o,2)*Math.pow(l,2)*t,p=Math.exp(-f),v=uw(Math.pow(l,2),o);return(-i(l)+ub>0?-1:1)*((h-d)*p)/v}):(i=l=>{const u=Math.exp(-l*t),f=(l-r)*t+1;return-ub+u*f},a=l=>{const u=Math.exp(-l*t),f=(r-l)*(t*t);return u*f});const s=5/t,c=Nde(i,a,s);if(t=t*1e3,isNaN(c))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(c,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const Bde=12;function Nde(t,e,r){let n=r;for(let i=1;i<Bde;i++)n=n-t(n)/e(n);return n}function uw(t,e){return t*Math.sqrt(1-e*e)}const Ude=["duration","bounce"],jde=["stiffness","damping","mass"];function pM(t,e){return e.some(r=>t[r]!==void 0)}function $de(t){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!pM(t,jde)&&pM(t,Ude)){const r=Lde(t);e=Object.assign(Object.assign(Object.assign({},e),r),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function u2(t){var{from:e=0,to:r=1,restSpeed:n=2,restDelta:i}=t,a=z6(t,["from","to","restSpeed","restDelta"]);const o={done:!1,value:e};let{stiffness:s,damping:c,mass:l,velocity:u,duration:f,isResolvedFromDuration:h}=$de(a),d=vM,p=vM;function v(){const y=u?-(u/1e3):0,m=r-e,g=c/(2*Math.sqrt(s*l)),x=Math.sqrt(s/l)/1e3;if(i===void 0&&(i=Math.min(Math.abs(r-e)/100,.4)),g<1){const b=uw(x,g);d=S=>{const w=Math.exp(-g*x*S);return r-w*((y+g*x*m)/b*Math.sin(b*S)+m*Math.cos(b*S))},p=S=>{const w=Math.exp(-g*x*S);return g*x*w*(Math.sin(b*S)*(y+g*x*m)/b+m*Math.cos(b*S))-w*(Math.cos(b*S)*(y+g*x*m)-b*m*Math.sin(b*S))}}else if(g===1)d=b=>r-Math.exp(-x*b)*(m+(y+x*m)*b);else{const b=x*Math.sqrt(g*g-1);d=S=>{const w=Math.exp(-g*x*S),A=Math.min(b*S,300);return r-w*((y+g*x*m)*Math.sinh(A)+b*m*Math.cosh(A))/b}}}return v(),{next:y=>{const m=d(y);if(h)o.done=y>=f;else{const g=p(y)*1e3,x=Math.abs(g)<=n,b=Math.abs(r-m)<=i;o.done=x&&b}return o.value=o.done?r:m,o},flipTarget:()=>{u=-u,[e,r]=[r,e],v()}}}u2.needsInterpolation=(t,e)=>typeof t=="string"||typeof e=="string";const vM=t=>0,H6=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},c2=(t,e,r)=>-r*t+r*e+t,X6=(t,e)=>r=>Math.max(Math.min(r,e),t),Ed=t=>t%1?Number(t.toFixed(5)):t,Qg=/(-)?([\d]*\.?[\d])+/g,cw=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Vde=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $p(t){return typeof t=="string"}const yy={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Y6=Object.assign(Object.assign({},yy),{transform:X6(0,1)});Object.assign(Object.assign({},yy),{default:1});const Gde=t=>({test:e=>$p(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wd=Gde("%");Object.assign(Object.assign({},wd),{parse:t=>wd.parse(t)/100,transform:t=>wd.transform(t*100)});const f2=(t,e)=>r=>!!($p(r)&&Vde.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),q6=(t,e,r)=>n=>{if(!$p(n))return n;const[i,a,o,s]=n.match(Qg);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},xu={test:f2("hsl","hue"),parse:q6("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+wd.transform(Ed(e))+", "+wd.transform(Ed(r))+", "+Ed(Y6.transform(n))+")"},Wde=X6(0,255),cb=Object.assign(Object.assign({},yy),{transform:t=>Math.round(Wde(t))}),nl={test:f2("rgb","red"),parse:q6("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+cb.transform(t)+", "+cb.transform(e)+", "+cb.transform(r)+", "+Ed(Y6.transform(n))+")"};function zde(t){let e="",r="",n="",i="";return t.length>5?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2),i=t.substr(7,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),i=t.substr(4,1),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const fw={test:f2("#"),parse:zde,transform:nl.transform},_y={test:t=>nl.test(t)||fw.test(t)||xu.test(t),parse:t=>nl.test(t)?nl.parse(t):xu.test(t)?xu.parse(t):fw.parse(t),transform:t=>$p(t)?t:t.hasOwnProperty("red")?nl.transform(t):xu.transform(t)},K6="${c}",Z6="${n}";function Hde(t){var e,r,n,i;return isNaN(t)&&$p(t)&&((r=(e=t.match(Qg))===null||e===void 0?void 0:e.length)!==null&&r!==void 0?r:0)+((i=(n=t.match(cw))===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0}function Q6(t){typeof t=="number"&&(t=`${t}`);const e=[];let r=0;const n=t.match(cw);n&&(r=n.length,t=t.replace(cw,K6),e.push(...n.map(_y.parse)));const i=t.match(Qg);return i&&(t=t.replace(Qg,Z6),e.push(...i.map(yy.parse))),{values:e,numColors:r,tokenised:t}}function J6(t){return Q6(t).values}function e5(t){const{values:e,numColors:r,tokenised:n}=Q6(t),i=e.length;return a=>{let o=n;for(let s=0;s<i;s++)o=o.replace(s<r?K6:Z6,s<r?_y.transform(a[s]):Ed(a[s]));return o}}const Xde=t=>typeof t=="number"?0:t;function Yde(t){const e=J6(t);return e5(t)(e.map(Xde))}const t5={test:Hde,parse:J6,createTransformer:e5,getAnimatableNone:Yde};function fb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function gM({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,o=0;if(!e)i=a=o=r;else{const s=r<.5?r*(1+e):r+e-r*e,c=2*r-s;i=fb(c,s,t+1/3),a=fb(c,s,t),o=fb(c,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const qde=(t,e,r)=>{const n=t*t,i=e*e;return Math.sqrt(Math.max(0,r*(i-n)+n))},Kde=[fw,nl,xu],mM=t=>Kde.find(e=>e.test(t)),r5=(t,e)=>{let r=mM(t),n=mM(e),i=r.parse(t),a=n.parse(e);r===xu&&(i=gM(i),r=nl),n===xu&&(a=gM(a),n=nl);const o=Object.assign({},i);return s=>{for(const c in o)c!=="alpha"&&(o[c]=qde(i[c],a[c],s));return o.alpha=c2(i.alpha,a.alpha,s),r.transform(o)}},Zde=t=>typeof t=="number",Qde=(t,e)=>r=>e(t(r)),n5=(...t)=>t.reduce(Qde);function i5(t,e){return Zde(t)?r=>c2(t,e,r):_y.test(t)?r5(t,e):o5(t,e)}const a5=(t,e)=>{const r=[...t],n=r.length,i=t.map((a,o)=>i5(a,e[o]));return a=>{for(let o=0;o<n;o++)r[o]=i[o](a);return r}},Jde=(t,e)=>{const r=Object.assign(Object.assign({},t),e),n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=i5(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}};function yM(t){const e=t5.parse(t),r=e.length;let n=0,i=0,a=0;for(let o=0;o<r;o++)n||typeof e[o]=="number"?n++:e[o].hue!==void 0?a++:i++;return{parsed:e,numNumbers:n,numRGB:i,numHSL:a}}const o5=(t,e)=>{const r=t5.createTransformer(e),n=yM(t),i=yM(e);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?n5(a5(n.parsed,i.parsed),r):o=>`${o>0?e:t}`},epe=(t,e)=>r=>c2(t,e,r);function tpe(t){if(typeof t=="number")return epe;if(typeof t=="string")return _y.test(t)?r5:o5;if(Array.isArray(t))return a5;if(typeof t=="object")return Jde}function rpe(t,e,r){const n=[],i=r||tpe(t[0]),a=t.length-1;for(let o=0;o<a;o++){let s=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]:e;s=n5(c,s)}n.push(s)}return n}function npe([t,e],[r]){return n=>r(H6(t,e,n))}function ipe(t,e){const r=t.length,n=r-1;return i=>{let a=0,o=!1;if(i<=t[0]?o=!0:i>=t[n]&&(a=n-1,o=!0),!o){let c=1;for(;c<r&&!(t[c]>i||c===n);c++);a=c-1}const s=H6(t[a],t[a+1],i);return e[a](s)}}function s5(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;hM(a===e.length),hM(!n||!Array.isArray(n)||n.length===a-1),t[0]>t[a-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());const o=rpe(e,n,i),s=a===2?npe(t,o):ipe(t,o);return r?c=>s(lw(t[0],t[a-1],c)):s}const ape=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ope=t=>e=>Math.pow(e,t),spe=t=>e=>e*e*((t+1)*e-t),lpe=t=>{const e=spe(t);return r=>(r*=2)<1?.5*e(r):.5*(2-Math.pow(2,-10*(r-1)))},upe=1.525,cpe=ope(2),fpe=ape(cpe);lpe(upe);function hpe(t,e){return t.map(()=>e||fpe).splice(0,t.length-1)}function dpe(t){const e=t.length;return t.map((r,n)=>n!==0?n/(e-1):0)}function ppe(t,e){return t.map(r=>r*e)}function sg({from:t=0,to:e=1,ease:r,offset:n,duration:i=300}){const a={done:!1,value:t},o=Array.isArray(e)?e:[t,e],s=ppe(n&&n.length===o.length?n:dpe(o),i);function c(){return s5(s,o,{ease:Array.isArray(r)?r:hpe(o,r)})}let l=c();return{next:u=>(a.value=l(u),a.done=u>=i,a),flipTarget:()=>{o.reverse(),l=c()}}}function vpe({velocity:t=0,from:e=0,power:r=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:a}){const o={done:!1,value:e};let s=r*t;const c=e+s,l=a===void 0?c:a(c);return l!==c&&(s=l-e),{next:u=>{const f=-s*Math.exp(-u/n);return o.done=!(f>i||f<-i),o.value=o.done?l:l+f,o},flipTarget:()=>{}}}const _M={keyframes:sg,spring:u2,decay:vpe};function gpe(t){if(Array.isArray(t.to))return sg;if(_M[t.type])return _M[t.type];const e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?sg:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?u2:sg}const l5=1/60*1e3,mpe=typeof performance<"u"?()=>performance.now():()=>Date.now(),u5=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(mpe()),l5);function ype(t){let e=[],r=[],n=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(c,l=!1,u=!1)=>{const f=u&&i,h=f?e:r;return l&&o.add(c),h.indexOf(c)===-1&&(h.push(c),f&&i&&(n=e.length)),c},cancel:c=>{const l=r.indexOf(c);l!==-1&&r.splice(l,1),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[e,r]=[r,e],r.length=0,n=e.length,n)for(let l=0;l<n;l++){const u=e[l];u(c),o.has(u)&&(s.schedule(u),t())}i=!1,a&&(a=!1,s.process(c))}};return s}const _pe=40;let hw=!0,qd=!1,dw=!1;const Ad={delta:0,timestamp:0},Vp=["read","update","preRender","render","postRender"],xy=Vp.reduce((t,e)=>(t[e]=ype(()=>qd=!0),t),{}),xpe=Vp.reduce((t,e)=>{const r=xy[e];return t[e]=(n,i=!1,a=!1)=>(qd||Epe(),r.schedule(n,i,a)),t},{}),bpe=Vp.reduce((t,e)=>(t[e]=xy[e].cancel,t),{});Vp.reduce((t,e)=>(t[e]=()=>xy[e].process(Ad),t),{});const Spe=t=>xy[t].process(Ad),c5=t=>{qd=!1,Ad.delta=hw?l5:Math.max(Math.min(t-Ad.timestamp,_pe),1),Ad.timestamp=t,dw=!0,Vp.forEach(Spe),dw=!1,qd&&(hw=!1,u5(c5))},Epe=()=>{qd=!0,hw=!0,dw||u5(c5)},wpe=xpe;function f5(t,e,r=0){return t-e-r}function Ape(t,e,r=0,n=!0){return n?f5(e+-t,e,r):e-(t-e)+r}function Cpe(t,e,r,n){return n?t>=e+r:t<=-r}const Tpe=t=>{const e=({delta:r})=>t(r);return{start:()=>wpe.update(e,!0),stop:()=>bpe.update(e)}};function Ope(t){var e,r,{from:n,autoplay:i=!0,driver:a=Tpe,elapsed:o=0,repeat:s=0,repeatType:c="loop",repeatDelay:l=0,onPlay:u,onStop:f,onComplete:h,onRepeat:d,onUpdate:p}=t,v=z6(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:y}=v,m,g=0,x=v.duration,b,S=!1,w=!0,A;const C=gpe(v);!((r=(e=C).needsInterpolation)===null||r===void 0)&&r.call(e,n,y)&&(A=s5([0,100],[n,y],{clamp:!1}),n=0,y=100);const O=C(Object.assign(Object.assign({},v),{from:n,to:y}));function P(){g++,c==="reverse"?(w=g%2===0,o=Ape(o,x,l,w)):(o=f5(o,x,l),c==="mirror"&&O.flipTarget()),S=!1,d&&d()}function I(){m.stop(),h&&h()}function R(D){if(w||(D=-D),o+=D,!S){const L=O.next(Math.max(0,o));b=L.value,A&&(b=A(b)),S=w?L.done:o<=0}p==null||p(b),S&&(g===0&&(x??(x=o)),g<s?Cpe(o,x,l,w)&&P():I())}function F(){u==null||u(),m=a(R),m.start()}return i&&F(),{stop:()=>{f==null||f(),m.stop()}}}function Ppe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Rpe=Ppe,Ipe=$6,Fpe=Rpe,kpe=V6,Dpe=1,Mpe=2;function Lpe(t,e,r,n,i,a){var o=r&Dpe,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(t),u=a.get(e);if(l&&u)return l==e&&u==t;var f=-1,h=!0,d=r&Mpe?new Ipe:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var y=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(y!==void 0){if(y)continue;h=!1;break}if(d){if(!Fpe(e,function(m,g){if(!kpe(d,g)&&(p===m||i(p,m,r,n,a)))return d.push(g)})){h=!1;break}}else if(!(p===v||i(p,v,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var h5=Lpe;function Bpe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var Npe=Bpe,xM=Lp,bM=A8,Upe=ST,jpe=h5,$pe=Npe,Vpe=s2,Gpe=1,Wpe=2,zpe="[object Boolean]",Hpe="[object Date]",Xpe="[object Error]",Ype="[object Map]",qpe="[object Number]",Kpe="[object RegExp]",Zpe="[object Set]",Qpe="[object String]",Jpe="[object Symbol]",e0e="[object ArrayBuffer]",t0e="[object DataView]",SM=xM?xM.prototype:void 0,hb=SM?SM.valueOf:void 0;function r0e(t,e,r,n,i,a,o){switch(r){case t0e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case e0e:return!(t.byteLength!=e.byteLength||!a(new bM(t),new bM(e)));case zpe:case Hpe:case qpe:return Upe(+t,+e);case Xpe:return t.name==e.name&&t.message==e.message;case Kpe:case Qpe:return t==e+"";case Ype:var s=$pe;case Zpe:var c=n&Gpe;if(s||(s=Vpe),t.size!=e.size&&!c)return!1;var l=o.get(t);if(l)return l==e;n|=Wpe,o.set(t,e);var u=jpe(s(t),s(e),n,i,a,o);return o.delete(t),u;case Jpe:if(hb)return hb.call(t)==hb.call(e)}return!1}var n0e=r0e,EM=b8,i0e=1,a0e=Object.prototype,o0e=a0e.hasOwnProperty;function s0e(t,e,r,n,i,a){var o=r&i0e,s=EM(t),c=s.length,l=EM(e),u=l.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=s[f];if(!(o?h in e:o0e.call(e,h)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var v=!0;a.set(t,e),a.set(e,t);for(var y=o;++f<c;){h=s[f];var m=t[h],g=e[h];if(n)var x=o?n(g,m,h,e,t,a):n(m,g,h,t,e,a);if(!(x===void 0?m===g||i(m,g,r,n,a):x)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var b=t.constructor,S=e.constructor;b!=S&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof S=="function"&&S instanceof S)&&(v=!1)}return a.delete(t),a.delete(e),v}var l0e=s0e,db=AT,u0e=h5,c0e=n0e,f0e=l0e,wM=ty,AM=Rs,CM=TT,h0e=h8,d0e=1,TM="[object Arguments]",OM="[object Array]",av="[object Object]",p0e=Object.prototype,PM=p0e.hasOwnProperty;function v0e(t,e,r,n,i,a){var o=AM(t),s=AM(e),c=o?OM:wM(t),l=s?OM:wM(e);c=c==TM?av:c,l=l==TM?av:l;var u=c==av,f=l==av,h=c==l;if(h&&CM(t)){if(!CM(e))return!1;o=!0,u=!1}if(h&&!u)return a||(a=new db),o||h0e(t)?u0e(t,e,r,n,i,a):c0e(t,e,c,r,n,i,a);if(!(r&d0e)){var d=u&&PM.call(t,"__wrapped__"),p=f&&PM.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,y=p?e.value():e;return a||(a=new db),i(v,y,r,n,a)}}return h?(a||(a=new db),f0e(t,e,r,n,i,a)):!1}var g0e=v0e,m0e=g0e,RM=qu;function d5(t,e,r,n,i){return t===e?!0:t==null||e==null||!RM(t)&&!RM(e)?t!==t&&e!==e:m0e(t,e,r,n,d5,i)}var p5=d5,y0e=AT,_0e=p5,x0e=1,b0e=2;function S0e(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var c=s[0],l=t[c],u=s[1];if(o&&s[2]){if(l===void 0&&!(c in t))return!1}else{var f=new y0e;if(n)var h=n(l,u,c,t,e,f);if(!(h===void 0?_0e(u,l,x0e|b0e,n,f):h))return!1}}return!0}var E0e=S0e,w0e=qo;function A0e(t){return t===t&&!w0e(t)}var v5=A0e,C0e=v5,T0e=ey;function O0e(t){for(var e=T0e(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,C0e(i)]}return e}var P0e=O0e;function R0e(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var g5=R0e,I0e=E0e,F0e=P0e,k0e=g5;function D0e(t){var e=F0e(t);return e.length==1&&e[0][2]?k0e(e[0][0],e[0][1]):function(r){return r===t||I0e(r,t,e)}}var M0e=D0e,L0e=Bp,B0e=qu,N0e="[object Symbol]";function U0e(t){return typeof t=="symbol"||B0e(t)&&L0e(t)==N0e}var by=U0e,j0e=Rs,$0e=by,V0e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G0e=/^\w*$/;function W0e(t,e){if(j0e(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||$0e(t)?!0:G0e.test(t)||!V0e.test(t)||e!=null&&t in Object(e)}var h2=W0e,m5=wT,z0e="Expected a function";function d2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(z0e);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(d2.Cache||m5),r}d2.Cache=m5;var H0e=d2,X0e=H0e,Y0e=500;function q0e(t){var e=X0e(t,function(n){return r.size===Y0e&&r.clear(),n}),r=e.cache;return e}var K0e=q0e,Z0e=K0e,Q0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J0e=/\\(\\)?/g,eve=Z0e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Q0e,function(r,n,i,a){e.push(i?a.replace(J0e,"$1"):n||r)}),e}),tve=eve;function rve(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var y5=rve,IM=Lp,nve=y5,ive=Rs,ave=by,ove=1/0,FM=IM?IM.prototype:void 0,kM=FM?FM.toString:void 0;function _5(t){if(typeof t=="string")return t;if(ive(t))return nve(t,_5)+"";if(ave(t))return kM?kM.call(t):"";var e=t+"";return e=="0"&&1/t==-ove?"-0":e}var sve=_5,lve=sve;function uve(t){return t==null?"":lve(t)}var cve=uve,fve=Rs,hve=h2,dve=tve,pve=cve;function vve(t,e){return fve(t)?t:hve(t,e)?[t]:dve(pve(t))}var Sy=vve,gve=by,mve=1/0;function yve(t){if(typeof t=="string"||gve(t))return t;var e=t+"";return e=="0"&&1/t==-mve?"-0":e}var Gp=yve,_ve=Sy,xve=Gp;function bve(t,e){e=_ve(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[xve(e[r++])];return r&&r==n?t:void 0}var p2=bve,Sve=p2;function Eve(t,e,r){var n=t==null?void 0:Sve(t,e);return n===void 0?r:n}var wve=Eve;function Ave(t,e){return t!=null&&e in Object(t)}var Cve=Ave,Tve=Sy,Ove=f8,Pve=Rs,Rve=OT,Ive=PT,Fve=Gp;function kve(t,e,r){e=Tve(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=Fve(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&Ive(i)&&Rve(o,i)&&(Pve(t)||Ove(t)))}var Dve=kve,Mve=Cve,Lve=Dve;function Bve(t,e){return t!=null&&Lve(t,e,Mve)}var Nve=Bve,Uve=p5,jve=wve,$ve=Nve,Vve=h2,Gve=v5,Wve=g5,zve=Gp,Hve=1,Xve=2;function Yve(t,e){return Vve(t)&&Gve(e)?Wve(zve(t),e):function(r){var n=jve(r,t);return n===void 0&&n===e?$ve(r,t):Uve(e,n,Hve|Xve)}}var qve=Yve;function Kve(t){return t}var Zve=Kve;function Qve(t){return function(e){return e==null?void 0:e[t]}}var Jve=Qve,ege=p2;function tge(t){return function(e){return ege(e,t)}}var rge=tge,nge=Jve,ige=rge,age=h2,oge=Gp;function sge(t){return age(t)?nge(oge(t)):ige(t)}var lge=sge,uge=M0e,cge=qve,fge=Zve,hge=Rs,dge=lge;function pge(t){return typeof t=="function"?t:t==null?fge:typeof t=="object"?hge(t)?cge(t[0],t[1]):uge(t):dge(t)}var x5=pge,vge="Expected a function";function gge(t){if(typeof t!="function")throw new TypeError(vge);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var mge=gge,yge=CT,_ge=Sy,xge=OT,DM=qo,bge=Gp;function Sge(t,e,r,n){if(!DM(t))return t;e=_ge(e,t);for(var i=-1,a=e.length,o=a-1,s=t;s!=null&&++i<a;){var c=bge(e[i]),l=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=o){var u=s[c];l=n?n(u,c,s):void 0,l===void 0&&(l=DM(u)?u:xge(e[i+1])?[]:{})}yge(s,c,l),s=s[c]}return t}var Ege=Sge,wge=p2,Age=Ege,Cge=Sy;function Tge(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=wge(t,o);r(s,o)&&Age(a,Cge(o,t),s)}return a}var Oge=Tge,Pge=y5,Rge=x5,Ige=Oge,Fge=S8;function kge(t,e){if(t==null)return{};var r=Pge(Fge(t),function(n){return[n]});return e=Rge(e),Ige(t,r,function(n,i){return e(n,i[0])})}var Dge=kge,Mge=x5,Lge=mge,Bge=Dge;function Nge(t,e){return Bge(t,Lge(Mge(e)))}var Uge=Nge;const pb=gi(Uge);function jge(t){return t===void 0}var $ge=jge;const cs=gi($ge);function b5(t,e,r){const n=H.gameplay.pixiStage.getStageObjByKey(e);let i=0;const a=[],o=[];for(const m of t){const g=m.duration;i+=g;const{position:x,scale:b,...S}=m;a.push({x:x.x,y:x.y,scaleX:b.x,scaleY:b.y,...S}),r!==0?o.push(i/r):o.push(0)}const s=n==null?void 0:n.pixiContainer;let c=null;r>0&&(c=Ope({to:a,offset:o,duration:r,onUpdate:m=>{if(s){const{scaleX:g,scaleY:x,...b}=m;Object.assign(s,pb(b,cs)),cs(g)||(s.scale.x=g),cs(x)||(s.scale.y=x)}}}));const{duration:l,...u}=v();le.dispatch(Wi.updateEffect({target:e,transform:u}));function f(){if(n!=null&&n.pixiContainer){const{position:m,scale:g,...x}=p(),b=pb({x:m.x,y:m.y,...x},cs);Object.assign(n==null?void 0:n.pixiContainer,b),n!=null&&n.pixiContainer&&(cs(g.x)||(n.pixiContainer.scale.x=g.x),cs(g==null?void 0:g.y)||(n.pixiContainer.scale.y=g.y))}}function h(){if(c&&c.stop(),c=null,n!=null&&n.pixiContainer){const{position:m,scale:g,...x}=v(),b=pb({x:m.x,y:m.y,...x},cs);Object.assign(n==null?void 0:n.pixiContainer,b),n!=null&&n.pixiContainer&&(cs(g.x)||(n.pixiContainer.scale.x=g.x),cs(g==null?void 0:g.y)||(n.pixiContainer.scale.y=g.y))}}function d(m){}function p(){return t[0]}function v(){return t[t.length-1]}function y(){const m=t[t.length-1],{alpha:g,rotation:x,blur:b,duration:S,scale:w,position:A,...C}=m;return C}return{setStartState:f,setEndState:h,tickerFunc:d,getEndFilterEffect:y}}function Jg(t,e,r){const n=H.animationManager.getAnimations().find(i=>i.name===t);if(n){const i=n.effects.map(a=>{const o=le.getState().stage.effects.find(c=>c.target===e),s=Gr({...(o==null?void 0:o.transform)??l2,duration:0});return Object.assign(s,a),s.duration=a.duration,s});return Ge.debug("装载自定义动画",i),b5(i,e,r)}return null}function zi(t){const e=H.animationManager.getAnimations().find(r=>r.name===t);if(e){let r=0;return e.effects.forEach(n=>{r+=n.duration}),r}return 0}function Js(t,e,r=!1){if(e==="enter"){let n=500;r&&(n=1500);let i=G6(t,n);const a=H.animationManager.nextEnterAnimationName.get(t);return a&&(Ge.debug("取代默认进入动画",t),i=Jg(a,t,zi(a)),n=zi(a),H.animationManager.nextEnterAnimationName.delete(t)),{duration:n,animation:i}}else{let n=750;r&&(n=1500);let i=W6(t,n);const a=H.animationManager.nextExitAnimationName.get(t);return a&&(Ge.debug("取代默认退出动画",t),i=Jg(a,t,zi(a)),n=zi(a),H.animationManager.nextExitAnimationName.delete(t)),{duration:n,animation:i}}}const Vge=t=>{const e=t.content,r=le.dispatch;if(le.getState().GUI.showStoryLine)return r(lt({key:"storyLineBg",value:e})),t.args.forEach(f=>{f.key==="x"&&f.value!==""&&r(lt({key:"storyLineBgX",value:f.value})),f.key==="y"&&f.value!==""&&r(lt({key:"storyLineBgY",value:f.value}))}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};if(le.getState().GUI.showAchievement)return r(Iae(e)),t.args.forEach(f=>{f.key==="x"&&f.value!==""&&r(lt({key:"achieveBgX",value:f.value})),f.key==="y"&&f.value!==""&&r(lt({key:"achieveBgY",value:f.value}))}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};let n="",i="default",a=0,o=0;t.args.forEach(f=>{switch(f.key){case"unlockname":n=f.value.toString();break;case"series":i=f.value.toString();break;case"x":a=Number((f==null?void 0:f.value)??0);break;case"y":o=Number((f==null?void 0:f.value)??0);break}}),n!==""&&r(H8({name:n,url:e,series:i})),r(Wi.removeEffectByTargetId("bg-main"));const s=Bt(t,"transform");let c=Bt(t,"duration");(!c||typeof c!="number")&&(c=1e3);let l;if(s)try{const f=JSON.parse(s.toString());l=Yd("bg-main",f,c),l[0].alpha=0;const h=(Math.random()*10).toString(16),d={name:h,effects:l};H.animationManager.addAnimation(d),c=zi(h),H.animationManager.nextEnterAnimationName.set("bg-main",h)}catch{u()}else u();function u(){l=Yd("bg-main",{},c),l[0].alpha=0;const h=(Math.random()*10).toString(16),d={name:h,effects:l};H.animationManager.addAnimation(d),c=zi(h),H.animationManager.nextEnterAnimationName.set("bg-main",h)}return Bt(t,"enter")&&(H.animationManager.nextEnterAnimationName.set("bg-main",Bt(t,"enter").toString()),c=zi(Bt(t,"enter").toString())),Bt(t,"exit")&&(H.animationManager.nextExitAnimationName.set("bg-main-off",Bt(t,"exit").toString()),c=zi(Bt(t,"exit").toString())),a&&r(lt({key:"bgX",value:a})),o&&r(lt({key:"bgY",value:o})),r(lt({key:"bgName",value:t.content})),{performName:"none",duration:c,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Gge(t){let e="center",r=t.content,n=!1,i="",a="",o="",s=500,c="",l="",u="",f="",h="",d="";const p=le.dispatch;for(const S of t.args)switch(S.key){case"left":S.value===!0&&(e="left");break;case"right":S.value===!0&&(e="right");break;case"clear":S.value===!0&&(r="");break;case"id":n=!0,o=S.value.toString();break;case"motion":i=S.value.toString();break;case"expression":a=S.value.toString();break;case"mouthOpen":c=S.value.toString(),c=Qt(c,$t.figure);break;case"mouthClose":l=S.value.toString(),l=Qt(l,$t.figure);break;case"mouthHalfOpen":u=S.value.toString(),u=Qt(u,$t.figure);break;case"eyesOpen":f=S.value.toString(),f=Qt(f,$t.figure);break;case"eyesClose":h=S.value.toString(),h=Qt(h,$t.figure);break;case"animationFlag":d=S.value.toString();break;case"none":r="";break}const v=o||`fig-${e}`,m=le.getState().stage.figureAssociatedAnimation.filter(S=>S.targetId!==v),g={targetId:v,animationFlag:d,mouthAnimation:{open:c,close:l,halfOpen:u},blinkAnimation:{open:f,close:h}};m.push(g),p(lt({key:"figureAssociatedAnimation",value:m}));let x=!0;if(o!==""){const S=le.getState().stage.freeFigure.find(w=>w.key===o);S&&S.name===t.content&&(x=!1)}else e==="center"&&le.getState().stage.figName===t.content&&(x=!1),e==="left"&&le.getState().stage.figNameLeft===t.content&&(x=!1),e==="right"&&le.getState().stage.figNameRight===t.content&&(x=!1);if(x){const S=`fig-${e}`,w=`${o}`;le.dispatch(Wi.removeEffectByTargetId(S)),le.dispatch(Wi.removeEffectByTargetId(w))}const b=(S,w)=>{const A=Bt(w,"transform"),C=Bt(w,"duration");C&&typeof C=="number"&&(s=C);let O;if(A){console.log(A);try{const F=JSON.parse(A.toString());O=Yd(S,F,s),O[0].alpha=0;const D=(Math.random()*10).toString(16),L={name:D,effects:O};H.animationManager.addAnimation(L),s=zi(D),H.animationManager.nextEnterAnimationName.set(S,D)}catch{P()}}else P();function P(){O=Yd(S,{},s),O[0].alpha=0;const D=(Math.random()*10).toString(16),L={name:D,effects:O};H.animationManager.addAnimation(L),s=zi(D),H.animationManager.nextEnterAnimationName.set(S,D)}const I=Bt(w,"enter"),R=Bt(w,"exit");I&&(H.animationManager.nextEnterAnimationName.set(S,I.toString()),s=zi(I.toString())),R&&(H.animationManager.nextExitAnimationName.set(S+"-off",R.toString()),s=zi(R.toString()))};if(n){le.getState().stage.freeFigure;const S={key:o,name:r,basePosition:e};b(o,t),i&&p(Wi.setLive2dMotion({target:o,motion:i})),a&&p(Wi.setLive2dExpression({target:o,expression:a})),p(Wi.setFreeFigureByKey(S))}else{const S={center:"fig-center",left:"fig-left",right:"fig-right"},w={center:"figName",left:"figNameLeft",right:"figNameRight"};o=S[e],b(o,t),i&&p(Wi.setLive2dMotion({target:o,motion:i})),a&&p(Wi.setLive2dExpression({target:o,expression:a})),p(lt({key:w[e],value:r}))}return{performName:"none",duration:s,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}}const S5=(t,e)=>{ya(t).then(async r=>{if(await H.sceneManager.setCurrentScene(r,e,t,!0)){H.sceneManager.sceneData.currentSentenceId=0;const i=[];H.sceneManager.sceneData.currentScene.assetsList.forEach(s=>{(s.url.endsWith(".mp4")||s.url.endsWith(".flv"))&&i.push(s.url)}),H.videoManager.destroyExcept(i);const a=H.sceneManager.sceneData.currentScene.subSceneList;H.sceneManager.settledScenes.push(t);const o=jp(a);qf(o),Ge.debug("现在切换场景，切换后的结果：",H.sceneManager.sceneData),ln()}})},Wge=t=>{const e=t.content.split("/"),r=e[e.length-1];return S5(t.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},E5=t=>{const e=H.sceneManager.sceneData.currentSentenceId;let r=e;H.sceneManager.sceneData.currentScene.sentenceList.forEach((n,i)=>{n.command===It.label&&n.content===t&&i!==e&&(r=i)}),H.sceneManager.sceneData.currentSentenceId=r,setTimeout(ln,1)},zge="_Choose_Main_13clt_1",Hge="_Choose_item_13clt_13",Xge="_Choose_item_image_13clt_30",Yge="_Choose_item_countdown_13clt_45",qge="_Choose_item_countdown_disabled_13clt_52",Kge="_Choose_item_progress_bar_13clt_59",Zge="_Choose_item_disabled_13clt_68",Kl={Choose_Main:zge,Choose_item:Hge,Choose_item_image:Xge,Choose_item_countdown:Yge,Choose_item_countdown_disabled:qge,Choose_item_progress_bar:Kge,Choose_item_disabled:Zge},Qge=""+new URL("page-flip-1.mp3",import.meta.url).href,Jge=""+new URL("switch-1.mp3",import.meta.url).href,w5=""+new URL("mouse-enter.mp3",import.meta.url).href,eme=""+new URL("dialog.mp3",import.meta.url).href,A5=""+new URL("click.mp3",import.meta.url).href;var C5={exports:{}},T5={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=ve;function tme(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rme=typeof Object.is=="function"?Object.is:tme,nme=xf.useState,ime=xf.useEffect,ame=xf.useLayoutEffect,ome=xf.useDebugValue;function sme(t,e){var r=e(),n=nme({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return ame(function(){i.value=r,i.getSnapshot=e,vb(i)&&a({inst:i})},[t,r,e]),ime(function(){return vb(i)&&a({inst:i}),t(function(){vb(i)&&a({inst:i})})},[t]),ome(r),r}function vb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!rme(t,r)}catch{return!0}}function lme(t,e){return e()}var ume=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lme:sme;T5.useSyncExternalStore=xf.useSyncExternalStore!==void 0?xf.useSyncExternalStore:ume;C5.exports=T5;var cme=C5.exports,O5={exports:{}},P5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey=ve,fme=cme;function hme(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dme=typeof Object.is=="function"?Object.is:hme,pme=fme.useSyncExternalStore,vme=Ey.useRef,gme=Ey.useEffect,mme=Ey.useMemo,yme=Ey.useDebugValue;P5.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=vme(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=mme(function(){function c(d){if(!l){if(l=!0,u=d,d=n(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,dme(u,d))return p;var v=n(d);return i!==void 0&&i(p,v)?p:(u=d,f=v)}var l=!1,u,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,i]);var s=pme(t,a[0],a[1]);return gme(function(){o.hasValue=!0,o.value=s},[s]),yme(s),s};O5.exports=P5;var _me=O5.exports;function xme(t){t()}let R5=xme;const bme=t=>R5=t,Sme=()=>R5,MM=Symbol.for("react-redux-context"),LM=typeof globalThis<"u"?globalThis:{};function Eme(){var t;if(!ve.createContext)return{};const e=(t=LM[MM])!=null?t:LM[MM]=new Map;let r=e.get(ve.createContext);return r||(r=ve.createContext(null),e.set(ve.createContext,r)),r}const Ol=Eme();function v2(t=Ol){return function(){return ve.useContext(t)}}const I5=v2(),wme=()=>{throw new Error("uSES not initialized!")};let F5=wme;const Ame=t=>{F5=t},Cme=(t,e)=>t===e;function Tme(t=Ol){const e=t===Ol?I5:v2(t);return function(n,i={}){const{equalityFn:a=Cme,stabilityCheck:o=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:c,subscription:l,getServerState:u,stabilityCheck:f,noopCheck:h}=e();ve.useRef(!0);const d=ve.useCallback({[n.name](v){return n(v)}}[n.name],[n,f,o]),p=F5(l.addNestedSub,c.getState,u||c.getState,d,a);return ve.useDebugValue(p),p}}const it=Tme();function Ome(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var k5={exports:{}},dr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zn=typeof Symbol=="function"&&Symbol.for,g2=zn?Symbol.for("react.element"):60103,m2=zn?Symbol.for("react.portal"):60106,wy=zn?Symbol.for("react.fragment"):60107,Ay=zn?Symbol.for("react.strict_mode"):60108,Cy=zn?Symbol.for("react.profiler"):60114,Ty=zn?Symbol.for("react.provider"):60109,Oy=zn?Symbol.for("react.context"):60110,y2=zn?Symbol.for("react.async_mode"):60111,Py=zn?Symbol.for("react.concurrent_mode"):60111,Ry=zn?Symbol.for("react.forward_ref"):60112,Iy=zn?Symbol.for("react.suspense"):60113,Pme=zn?Symbol.for("react.suspense_list"):60120,Fy=zn?Symbol.for("react.memo"):60115,ky=zn?Symbol.for("react.lazy"):60116,Rme=zn?Symbol.for("react.block"):60121,Ime=zn?Symbol.for("react.fundamental"):60117,Fme=zn?Symbol.for("react.responder"):60118,kme=zn?Symbol.for("react.scope"):60119;function _a(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case g2:switch(t=t.type,t){case y2:case Py:case wy:case Cy:case Ay:case Iy:return t;default:switch(t=t&&t.$$typeof,t){case Oy:case Ry:case ky:case Fy:case Ty:return t;default:return e}}case m2:return e}}}function D5(t){return _a(t)===Py}dr.AsyncMode=y2;dr.ConcurrentMode=Py;dr.ContextConsumer=Oy;dr.ContextProvider=Ty;dr.Element=g2;dr.ForwardRef=Ry;dr.Fragment=wy;dr.Lazy=ky;dr.Memo=Fy;dr.Portal=m2;dr.Profiler=Cy;dr.StrictMode=Ay;dr.Suspense=Iy;dr.isAsyncMode=function(t){return D5(t)||_a(t)===y2};dr.isConcurrentMode=D5;dr.isContextConsumer=function(t){return _a(t)===Oy};dr.isContextProvider=function(t){return _a(t)===Ty};dr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===g2};dr.isForwardRef=function(t){return _a(t)===Ry};dr.isFragment=function(t){return _a(t)===wy};dr.isLazy=function(t){return _a(t)===ky};dr.isMemo=function(t){return _a(t)===Fy};dr.isPortal=function(t){return _a(t)===m2};dr.isProfiler=function(t){return _a(t)===Cy};dr.isStrictMode=function(t){return _a(t)===Ay};dr.isSuspense=function(t){return _a(t)===Iy};dr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===wy||t===Py||t===Cy||t===Ay||t===Iy||t===Pme||typeof t=="object"&&t!==null&&(t.$$typeof===ky||t.$$typeof===Fy||t.$$typeof===Ty||t.$$typeof===Oy||t.$$typeof===Ry||t.$$typeof===Ime||t.$$typeof===Fme||t.$$typeof===kme||t.$$typeof===Rme)};dr.typeOf=_a;k5.exports=dr;var Dme=k5.exports,M5=Dme,Mme={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Lme={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L5={};L5[M5.ForwardRef]=Mme;L5[M5.Memo]=Lme;var gr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2=Symbol.for("react.element"),x2=Symbol.for("react.portal"),Dy=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),By=Symbol.for("react.provider"),Ny=Symbol.for("react.context"),Bme=Symbol.for("react.server_context"),Uy=Symbol.for("react.forward_ref"),jy=Symbol.for("react.suspense"),$y=Symbol.for("react.suspense_list"),Vy=Symbol.for("react.memo"),Gy=Symbol.for("react.lazy"),Nme=Symbol.for("react.offscreen"),B5;B5=Symbol.for("react.module.reference");function Va(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _2:switch(t=t.type,t){case Dy:case Ly:case My:case jy:case $y:return t;default:switch(t=t&&t.$$typeof,t){case Bme:case Ny:case Uy:case Gy:case Vy:case By:return t;default:return e}}case x2:return e}}}gr.ContextConsumer=Ny;gr.ContextProvider=By;gr.Element=_2;gr.ForwardRef=Uy;gr.Fragment=Dy;gr.Lazy=Gy;gr.Memo=Vy;gr.Portal=x2;gr.Profiler=Ly;gr.StrictMode=My;gr.Suspense=jy;gr.SuspenseList=$y;gr.isAsyncMode=function(){return!1};gr.isConcurrentMode=function(){return!1};gr.isContextConsumer=function(t){return Va(t)===Ny};gr.isContextProvider=function(t){return Va(t)===By};gr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_2};gr.isForwardRef=function(t){return Va(t)===Uy};gr.isFragment=function(t){return Va(t)===Dy};gr.isLazy=function(t){return Va(t)===Gy};gr.isMemo=function(t){return Va(t)===Vy};gr.isPortal=function(t){return Va(t)===x2};gr.isProfiler=function(t){return Va(t)===Ly};gr.isStrictMode=function(t){return Va(t)===My};gr.isSuspense=function(t){return Va(t)===jy};gr.isSuspenseList=function(t){return Va(t)===$y};gr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Dy||t===Ly||t===My||t===jy||t===$y||t===Nme||typeof t=="object"&&t!==null&&(t.$$typeof===Gy||t.$$typeof===Vy||t.$$typeof===By||t.$$typeof===Ny||t.$$typeof===Uy||t.$$typeof===B5||t.getModuleId!==void 0)};gr.typeOf=Va;function Ume(){const t=Sme();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,a=r={callback:n,next:null,prev:r};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}const BM={notify(){},get:()=>[]};function jme(t,e){let r,n=BM,i=0,a=!1;function o(v){u();const y=n.subscribe(v);let m=!1;return()=>{m||(m=!0,y(),f())}}function s(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function l(){return a}function u(){i++,r||(r=e?e.addNestedSub(c):t.subscribe(c),n=Ume())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=BM)}function h(){a||(a=!0,u())}function d(){a&&(a=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:l,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return p}const $me=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vme=$me?ve.useLayoutEffect:ve.useEffect;function Gme({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:a="once"}){const o=ve.useMemo(()=>{const l=jme(t);return{store:t,subscription:l,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:a}},[t,n,i,a]),s=ve.useMemo(()=>t.getState(),[t]);Vme(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==t.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,s]);const c=e||Ol;return ve.createElement(c.Provider,{value:o},r)}function N5(t=Ol){const e=t===Ol?I5:v2(t);return function(){const{store:n}=e();return n}}const Wme=N5();function zme(t=Ol){const e=t===Ol?Wme:N5(t);return function(){return e().dispatch}}const Br=zme();Ame(_me.useSyncExternalStoreWithSelector);bme(HN.unstable_batchedUpdates);const ri=()=>{const t=Br();return it(o=>o.stage),{playSeEnter:()=>{t(lt({key:"uiSe",value:w5}))},playSeClick:()=>{t(lt({key:"uiSe",value:A5}))},playSePageChange:()=>{t(lt({key:"uiSe",value:Qge}))},playSeDialogOpen:()=>{t(lt({key:"uiSe",value:eme}))},playSeSwitch:()=>{t(lt({key:"uiSe",value:Jge}))}}},b2=()=>({playSeEnter:()=>{le.dispatch(lt({key:"uiSe",value:w5}))},playSeClick:()=>{le.dispatch(lt({key:"uiSe",value:A5}))}}),Hme=""+new URL("progress-bar-bg.png",import.meta.url).href,Xme=""+new URL("progress-bar.png",import.meta.url).href;var em={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */em.exports;(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,h=2,d=4,p=1,v=2,y=1,m=2,g=4,x=8,b=16,S=32,w=64,A=128,C=256,O=512,P=30,I="...",R=800,F=16,D=1,L=2,U=3,Y=1/0,ee=9007199254740991,J=17976931348623157e292,X=0/0,M=4294967295,V=M-1,$=M>>>1,j=[["ary",A],["bind",y],["bindKey",m],["curry",x],["curryRight",b],["flip",O],["partial",S],["partialRight",w],["rearg",C]],te="[object Arguments]",ie="[object Array]",de="[object AsyncFunction]",he="[object Boolean]",Ee="[object Date]",Oe="[object DOMException]",ye="[object Error]",Ae="[object Function]",_e="[object GeneratorFunction]",we="[object Map]",$e="[object Number]",Xe="[object Null]",ke="[object Object]",at="[object Promise]",vt="[object Proxy]",gt="[object RegExp]",tt="[object Set]",ot="[object String]",dt="[object Symbol]",Xt="[object Undefined]",rr="[object WeakMap]",qt="[object WeakSet]",Vt="[object ArrayBuffer]",bt="[object DataView]",or="[object Float32Array]",ge="[object Float64Array]",Se="[object Int8Array]",Re="[object Int16Array]",He="[object Int32Array]",je="[object Uint8Array]",rt="[object Uint8ClampedArray]",er="[object Uint16Array]",wr="[object Uint32Array]",Rn=/\b__p \+= '';/g,In=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ji=/&(?:amp|lt|gt|quot|#39);/g,ni=/[&<>"']/g,gn=RegExp(Ji.source),ea=RegExp(ni.source),xa=/<%-([\s\S]+?)%>/g,xo=/<%([\s\S]+?)%>/g,yi=/<%=([\s\S]+?)%>/g,Is=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_i=/^\w*$/,Ga=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ii=/[\\^$.*+?()[\]{}|]/g,Hr=RegExp(ii.source),Li=/^\s+/,Ul=/\s/,sh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,A_=/\{\n\/\* \[wrapped with (.+)\] \*/,C_=/,? & /,T_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,O_=/[()=,{}\[\]\/\s]/,P_=/\\(\\)?/g,R_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,e0=/\w*$/,I_=/^[-+]0x[0-9a-f]+$/i,F_=/^0b[01]+$/i,k_=/^\[object .+?Constructor\]$/,D_=/^0o[0-7]+$/i,M_=/^(?:0|[1-9]\d*)$/,L_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nc=/($^)/,t0=/['\n\r\u2028\u2029\\]/g,bo="\\ud800-\\udfff",r0="\\u0300-\\u036f",Fs="\\ufe20-\\ufe2f",B_="\\u20d0-\\u20ff",jl=r0+Fs+B_,ic="\\u2700-\\u27bf",n0="a-z\\xdf-\\xf6\\xf8-\\xff",N_="\\xac\\xb1\\xd7\\xf7",lh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",U_="\\u2000-\\u206f",j_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",z="A-Z\\xc0-\\xd6\\xd8-\\xde",re="\\ufe0e\\ufe0f",Z=N_+lh+U_+j_,oe="['’]",fe="["+bo+"]",ae="["+Z+"]",be="["+jl+"]",Ie="\\d+",De="["+ic+"]",Me="["+n0+"]",Be="[^"+bo+Z+Ie+ic+n0+z+"]",Qe="\\ud83c[\\udffb-\\udfff]",Pt="(?:"+be+"|"+Qe+")",Kt="[^"+bo+"]",Zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ir="[\\ud800-\\udbff][\\udc00-\\udfff]",pr="["+z+"]",xi="\\u200d",ks="(?:"+Me+"|"+Be+")",uh="(?:"+pr+"|"+Be+")",i0="(?:"+oe+"(?:d|ll|m|re|s|t|ve))?",ac="(?:"+oe+"(?:D|LL|M|RE|S|T|VE))?",$_=Pt+"?",a0="["+re+"]?",V_="(?:"+xi+"(?:"+[Kt,Zt,Ir].join("|")+")"+a0+$_+")*",o0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dV="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ZP=a0+$_+V_,pV="(?:"+[De,Zt,Ir].join("|")+")"+ZP,vV="(?:"+[Kt+be+"?",be,Zt,Ir,fe].join("|")+")",gV=RegExp(oe,"g"),mV=RegExp(be,"g"),G_=RegExp(Qe+"(?="+Qe+")|"+vV+ZP,"g"),yV=RegExp([pr+"?"+Me+"+"+i0+"(?="+[ae,pr,"$"].join("|")+")",uh+"+"+ac+"(?="+[ae,pr+ks,"$"].join("|")+")",pr+"?"+ks+"+"+i0,pr+"+"+ac,dV,o0,Ie,pV].join("|"),"g"),_V=RegExp("["+xi+bo+jl+re+"]"),xV=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bV=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],SV=-1,Ar={};Ar[or]=Ar[ge]=Ar[Se]=Ar[Re]=Ar[He]=Ar[je]=Ar[rt]=Ar[er]=Ar[wr]=!0,Ar[te]=Ar[ie]=Ar[Vt]=Ar[he]=Ar[bt]=Ar[Ee]=Ar[ye]=Ar[Ae]=Ar[we]=Ar[$e]=Ar[ke]=Ar[gt]=Ar[tt]=Ar[ot]=Ar[rr]=!1;var _r={};_r[te]=_r[ie]=_r[Vt]=_r[bt]=_r[he]=_r[Ee]=_r[or]=_r[ge]=_r[Se]=_r[Re]=_r[He]=_r[we]=_r[$e]=_r[ke]=_r[gt]=_r[tt]=_r[ot]=_r[dt]=_r[je]=_r[rt]=_r[er]=_r[wr]=!0,_r[ye]=_r[Ae]=_r[rr]=!1;var EV={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},wV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AV={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},CV={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},TV=parseFloat,OV=parseInt,QP=typeof st=="object"&&st&&st.Object===Object&&st,PV=typeof self=="object"&&self&&self.Object===Object&&self,Xn=QP||PV||Function("return this")(),W_=e&&!e.nodeType&&e,$l=W_&&!0&&t&&!t.nodeType&&t,JP=$l&&$l.exports===W_,z_=JP&&QP.process,ba=function(){try{var se=$l&&$l.require&&$l.require("util").types;return se||z_&&z_.binding&&z_.binding("util")}catch{}}(),eR=ba&&ba.isArrayBuffer,tR=ba&&ba.isDate,rR=ba&&ba.isMap,nR=ba&&ba.isRegExp,iR=ba&&ba.isSet,aR=ba&&ba.isTypedArray;function ta(se,xe,me){switch(me.length){case 0:return se.call(xe);case 1:return se.call(xe,me[0]);case 2:return se.call(xe,me[0],me[1]);case 3:return se.call(xe,me[0],me[1],me[2])}return se.apply(xe,me)}function RV(se,xe,me,Ke){for(var St=-1,nr=se==null?0:se.length;++St<nr;){var mn=se[St];xe(Ke,mn,me(mn),se)}return Ke}function Sa(se,xe){for(var me=-1,Ke=se==null?0:se.length;++me<Ke&&xe(se[me],me,se)!==!1;);return se}function IV(se,xe){for(var me=se==null?0:se.length;me--&&xe(se[me],me,se)!==!1;);return se}function oR(se,xe){for(var me=-1,Ke=se==null?0:se.length;++me<Ke;)if(!xe(se[me],me,se))return!1;return!0}function Ds(se,xe){for(var me=-1,Ke=se==null?0:se.length,St=0,nr=[];++me<Ke;){var mn=se[me];xe(mn,me,se)&&(nr[St++]=mn)}return nr}function s0(se,xe){var me=se==null?0:se.length;return!!me&&oc(se,xe,0)>-1}function H_(se,xe,me){for(var Ke=-1,St=se==null?0:se.length;++Ke<St;)if(me(xe,se[Ke]))return!0;return!1}function Fr(se,xe){for(var me=-1,Ke=se==null?0:se.length,St=Array(Ke);++me<Ke;)St[me]=xe(se[me],me,se);return St}function Ms(se,xe){for(var me=-1,Ke=xe.length,St=se.length;++me<Ke;)se[St+me]=xe[me];return se}function X_(se,xe,me,Ke){var St=-1,nr=se==null?0:se.length;for(Ke&&nr&&(me=se[++St]);++St<nr;)me=xe(me,se[St],St,se);return me}function FV(se,xe,me,Ke){var St=se==null?0:se.length;for(Ke&&St&&(me=se[--St]);St--;)me=xe(me,se[St],St,se);return me}function Y_(se,xe){for(var me=-1,Ke=se==null?0:se.length;++me<Ke;)if(xe(se[me],me,se))return!0;return!1}var kV=q_("length");function DV(se){return se.split("")}function MV(se){return se.match(T_)||[]}function sR(se,xe,me){var Ke;return me(se,function(St,nr,mn){if(xe(St,nr,mn))return Ke=nr,!1}),Ke}function l0(se,xe,me,Ke){for(var St=se.length,nr=me+(Ke?1:-1);Ke?nr--:++nr<St;)if(xe(se[nr],nr,se))return nr;return-1}function oc(se,xe,me){return xe===xe?XV(se,xe,me):l0(se,lR,me)}function LV(se,xe,me,Ke){for(var St=me-1,nr=se.length;++St<nr;)if(Ke(se[St],xe))return St;return-1}function lR(se){return se!==se}function uR(se,xe){var me=se==null?0:se.length;return me?Z_(se,xe)/me:X}function q_(se){return function(xe){return xe==null?r:xe[se]}}function K_(se){return function(xe){return se==null?r:se[xe]}}function cR(se,xe,me,Ke,St){return St(se,function(nr,mn,mr){me=Ke?(Ke=!1,nr):xe(me,nr,mn,mr)}),me}function BV(se,xe){var me=se.length;for(se.sort(xe);me--;)se[me]=se[me].value;return se}function Z_(se,xe){for(var me,Ke=-1,St=se.length;++Ke<St;){var nr=xe(se[Ke]);nr!==r&&(me=me===r?nr:me+nr)}return me}function Q_(se,xe){for(var me=-1,Ke=Array(se);++me<se;)Ke[me]=xe(me);return Ke}function NV(se,xe){return Fr(xe,function(me){return[me,se[me]]})}function fR(se){return se&&se.slice(0,vR(se)+1).replace(Li,"")}function ra(se){return function(xe){return se(xe)}}function J_(se,xe){return Fr(xe,function(me){return se[me]})}function ch(se,xe){return se.has(xe)}function hR(se,xe){for(var me=-1,Ke=se.length;++me<Ke&&oc(xe,se[me],0)>-1;);return me}function dR(se,xe){for(var me=se.length;me--&&oc(xe,se[me],0)>-1;);return me}function UV(se,xe){for(var me=se.length,Ke=0;me--;)se[me]===xe&&++Ke;return Ke}var jV=K_(EV),$V=K_(wV);function VV(se){return"\\"+CV[se]}function GV(se,xe){return se==null?r:se[xe]}function sc(se){return _V.test(se)}function WV(se){return xV.test(se)}function zV(se){for(var xe,me=[];!(xe=se.next()).done;)me.push(xe.value);return me}function ex(se){var xe=-1,me=Array(se.size);return se.forEach(function(Ke,St){me[++xe]=[St,Ke]}),me}function pR(se,xe){return function(me){return se(xe(me))}}function Ls(se,xe){for(var me=-1,Ke=se.length,St=0,nr=[];++me<Ke;){var mn=se[me];(mn===xe||mn===u)&&(se[me]=u,nr[St++]=me)}return nr}function u0(se){var xe=-1,me=Array(se.size);return se.forEach(function(Ke){me[++xe]=Ke}),me}function HV(se){var xe=-1,me=Array(se.size);return se.forEach(function(Ke){me[++xe]=[Ke,Ke]}),me}function XV(se,xe,me){for(var Ke=me-1,St=se.length;++Ke<St;)if(se[Ke]===xe)return Ke;return-1}function YV(se,xe,me){for(var Ke=me+1;Ke--;)if(se[Ke]===xe)return Ke;return Ke}function lc(se){return sc(se)?KV(se):kV(se)}function Wa(se){return sc(se)?ZV(se):DV(se)}function vR(se){for(var xe=se.length;xe--&&Ul.test(se.charAt(xe)););return xe}var qV=K_(AV);function KV(se){for(var xe=G_.lastIndex=0;G_.test(se);)++xe;return xe}function ZV(se){return se.match(G_)||[]}function QV(se){return se.match(yV)||[]}var JV=function se(xe){xe=xe==null?Xn:uc.defaults(Xn.Object(),xe,uc.pick(Xn,bV));var me=xe.Array,Ke=xe.Date,St=xe.Error,nr=xe.Function,mn=xe.Math,mr=xe.Object,tx=xe.RegExp,eG=xe.String,Ea=xe.TypeError,c0=me.prototype,tG=nr.prototype,cc=mr.prototype,f0=xe["__core-js_shared__"],h0=tG.toString,cr=cc.hasOwnProperty,rG=0,gR=function(){var _=/[^.]+$/.exec(f0&&f0.keys&&f0.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),d0=cc.toString,nG=h0.call(mr),iG=Xn._,aG=tx("^"+h0.call(cr).replace(ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p0=JP?xe.Buffer:r,Bs=xe.Symbol,v0=xe.Uint8Array,mR=p0?p0.allocUnsafe:r,g0=pR(mr.getPrototypeOf,mr),yR=mr.create,_R=cc.propertyIsEnumerable,m0=c0.splice,xR=Bs?Bs.isConcatSpreadable:r,fh=Bs?Bs.iterator:r,Vl=Bs?Bs.toStringTag:r,y0=function(){try{var _=Xl(mr,"defineProperty");return _({},"",{}),_}catch{}}(),oG=xe.clearTimeout!==Xn.clearTimeout&&xe.clearTimeout,sG=Ke&&Ke.now!==Xn.Date.now&&Ke.now,lG=xe.setTimeout!==Xn.setTimeout&&xe.setTimeout,_0=mn.ceil,x0=mn.floor,rx=mr.getOwnPropertySymbols,uG=p0?p0.isBuffer:r,bR=xe.isFinite,cG=c0.join,fG=pR(mr.keys,mr),yn=mn.max,ai=mn.min,hG=Ke.now,dG=xe.parseInt,SR=mn.random,pG=c0.reverse,nx=Xl(xe,"DataView"),hh=Xl(xe,"Map"),ix=Xl(xe,"Promise"),fc=Xl(xe,"Set"),dh=Xl(xe,"WeakMap"),ph=Xl(mr,"create"),b0=dh&&new dh,hc={},vG=Yl(nx),gG=Yl(hh),mG=Yl(ix),yG=Yl(fc),_G=Yl(dh),S0=Bs?Bs.prototype:r,vh=S0?S0.valueOf:r,ER=S0?S0.toString:r;function G(_){if(Xr(_)&&!Et(_)&&!(_ instanceof Nt)){if(_ instanceof wa)return _;if(cr.call(_,"__wrapped__"))return wI(_)}return new wa(_)}var dc=function(){function _(){}return function(E){if(!Ur(E))return{};if(yR)return yR(E);_.prototype=E;var T=new _;return _.prototype=r,T}}();function E0(){}function wa(_,E){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!E,this.__index__=0,this.__values__=r}G.templateSettings={escape:xa,evaluate:xo,interpolate:yi,variable:"",imports:{_:G}},G.prototype=E0.prototype,G.prototype.constructor=G,wa.prototype=dc(E0.prototype),wa.prototype.constructor=wa;function Nt(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function xG(){var _=new Nt(this.__wrapped__);return _.__actions__=Bi(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Bi(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Bi(this.__views__),_}function bG(){if(this.__filtered__){var _=new Nt(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function SG(){var _=this.__wrapped__.value(),E=this.__dir__,T=Et(_),k=E<0,N=T?_.length:0,q=D7(0,N,this.__views__),Q=q.start,ne=q.end,ce=ne-Q,Ce=k?ne:Q-1,Te=this.__iteratees__,Pe=Te.length,We=0,nt=ai(ce,this.__takeCount__);if(!T||!k&&N==ce&&nt==ce)return XR(_,this.__actions__);var ft=[];e:for(;ce--&&We<nt;){Ce+=E;for(var Rt=-1,ht=_[Ce];++Rt<Pe;){var Lt=Te[Rt],Gt=Lt.iteratee,aa=Lt.type,Ei=Gt(ht);if(aa==L)ht=Ei;else if(!Ei){if(aa==D)continue e;break e}}ft[We++]=ht}return ft}Nt.prototype=dc(E0.prototype),Nt.prototype.constructor=Nt;function Gl(_){var E=-1,T=_==null?0:_.length;for(this.clear();++E<T;){var k=_[E];this.set(k[0],k[1])}}function EG(){this.__data__=ph?ph(null):{},this.size=0}function wG(_){var E=this.has(_)&&delete this.__data__[_];return this.size-=E?1:0,E}function AG(_){var E=this.__data__;if(ph){var T=E[_];return T===c?r:T}return cr.call(E,_)?E[_]:r}function CG(_){var E=this.__data__;return ph?E[_]!==r:cr.call(E,_)}function TG(_,E){var T=this.__data__;return this.size+=this.has(_)?0:1,T[_]=ph&&E===r?c:E,this}Gl.prototype.clear=EG,Gl.prototype.delete=wG,Gl.prototype.get=AG,Gl.prototype.has=CG,Gl.prototype.set=TG;function ts(_){var E=-1,T=_==null?0:_.length;for(this.clear();++E<T;){var k=_[E];this.set(k[0],k[1])}}function OG(){this.__data__=[],this.size=0}function PG(_){var E=this.__data__,T=w0(E,_);if(T<0)return!1;var k=E.length-1;return T==k?E.pop():m0.call(E,T,1),--this.size,!0}function RG(_){var E=this.__data__,T=w0(E,_);return T<0?r:E[T][1]}function IG(_){return w0(this.__data__,_)>-1}function FG(_,E){var T=this.__data__,k=w0(T,_);return k<0?(++this.size,T.push([_,E])):T[k][1]=E,this}ts.prototype.clear=OG,ts.prototype.delete=PG,ts.prototype.get=RG,ts.prototype.has=IG,ts.prototype.set=FG;function rs(_){var E=-1,T=_==null?0:_.length;for(this.clear();++E<T;){var k=_[E];this.set(k[0],k[1])}}function kG(){this.size=0,this.__data__={hash:new Gl,map:new(hh||ts),string:new Gl}}function DG(_){var E=L0(this,_).delete(_);return this.size-=E?1:0,E}function MG(_){return L0(this,_).get(_)}function LG(_){return L0(this,_).has(_)}function BG(_,E){var T=L0(this,_),k=T.size;return T.set(_,E),this.size+=T.size==k?0:1,this}rs.prototype.clear=kG,rs.prototype.delete=DG,rs.prototype.get=MG,rs.prototype.has=LG,rs.prototype.set=BG;function Wl(_){var E=-1,T=_==null?0:_.length;for(this.__data__=new rs;++E<T;)this.add(_[E])}function NG(_){return this.__data__.set(_,c),this}function UG(_){return this.__data__.has(_)}Wl.prototype.add=Wl.prototype.push=NG,Wl.prototype.has=UG;function za(_){var E=this.__data__=new ts(_);this.size=E.size}function jG(){this.__data__=new ts,this.size=0}function $G(_){var E=this.__data__,T=E.delete(_);return this.size=E.size,T}function VG(_){return this.__data__.get(_)}function GG(_){return this.__data__.has(_)}function WG(_,E){var T=this.__data__;if(T instanceof ts){var k=T.__data__;if(!hh||k.length<i-1)return k.push([_,E]),this.size=++T.size,this;T=this.__data__=new rs(k)}return T.set(_,E),this.size=T.size,this}za.prototype.clear=jG,za.prototype.delete=$G,za.prototype.get=VG,za.prototype.has=GG,za.prototype.set=WG;function wR(_,E){var T=Et(_),k=!T&&ql(_),N=!T&&!k&&Vs(_),q=!T&&!k&&!N&&mc(_),Q=T||k||N||q,ne=Q?Q_(_.length,eG):[],ce=ne.length;for(var Ce in _)(E||cr.call(_,Ce))&&!(Q&&(Ce=="length"||N&&(Ce=="offset"||Ce=="parent")||q&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||os(Ce,ce)))&&ne.push(Ce);return ne}function AR(_){var E=_.length;return E?_[vx(0,E-1)]:r}function zG(_,E){return B0(Bi(_),zl(E,0,_.length))}function HG(_){return B0(Bi(_))}function ax(_,E,T){(T!==r&&!Ha(_[E],T)||T===r&&!(E in _))&&ns(_,E,T)}function gh(_,E,T){var k=_[E];(!(cr.call(_,E)&&Ha(k,T))||T===r&&!(E in _))&&ns(_,E,T)}function w0(_,E){for(var T=_.length;T--;)if(Ha(_[T][0],E))return T;return-1}function XG(_,E,T,k){return Ns(_,function(N,q,Q){E(k,N,T(N),Q)}),k}function CR(_,E){return _&&Eo(E,Fn(E),_)}function YG(_,E){return _&&Eo(E,Ui(E),_)}function ns(_,E,T){E=="__proto__"&&y0?y0(_,E,{configurable:!0,enumerable:!0,value:T,writable:!0}):_[E]=T}function ox(_,E){for(var T=-1,k=E.length,N=me(k),q=_==null;++T<k;)N[T]=q?r:jx(_,E[T]);return N}function zl(_,E,T){return _===_&&(T!==r&&(_=_<=T?_:T),E!==r&&(_=_>=E?_:E)),_}function Aa(_,E,T,k,N,q){var Q,ne=E&f,ce=E&h,Ce=E&d;if(T&&(Q=N?T(_,k,N,q):T(_)),Q!==r)return Q;if(!Ur(_))return _;var Te=Et(_);if(Te){if(Q=L7(_),!ne)return Bi(_,Q)}else{var Pe=oi(_),We=Pe==Ae||Pe==_e;if(Vs(_))return KR(_,ne);if(Pe==ke||Pe==te||We&&!N){if(Q=ce||We?{}:vI(_),!ne)return ce?A7(_,YG(Q,_)):w7(_,CR(Q,_))}else{if(!_r[Pe])return N?_:{};Q=B7(_,Pe,ne)}}q||(q=new za);var nt=q.get(_);if(nt)return nt;q.set(_,Q),WI(_)?_.forEach(function(ht){Q.add(Aa(ht,E,T,ht,_,q))}):VI(_)&&_.forEach(function(ht,Lt){Q.set(Lt,Aa(ht,E,T,Lt,_,q))});var ft=Ce?ce?Cx:Ax:ce?Ui:Fn,Rt=Te?r:ft(_);return Sa(Rt||_,function(ht,Lt){Rt&&(Lt=ht,ht=_[Lt]),gh(Q,Lt,Aa(ht,E,T,Lt,_,q))}),Q}function qG(_){var E=Fn(_);return function(T){return TR(T,_,E)}}function TR(_,E,T){var k=T.length;if(_==null)return!k;for(_=mr(_);k--;){var N=T[k],q=E[N],Q=_[N];if(Q===r&&!(N in _)||!q(Q))return!1}return!0}function OR(_,E,T){if(typeof _!="function")throw new Ea(o);return Eh(function(){_.apply(r,T)},E)}function mh(_,E,T,k){var N=-1,q=s0,Q=!0,ne=_.length,ce=[],Ce=E.length;if(!ne)return ce;T&&(E=Fr(E,ra(T))),k?(q=H_,Q=!1):E.length>=i&&(q=ch,Q=!1,E=new Wl(E));e:for(;++N<ne;){var Te=_[N],Pe=T==null?Te:T(Te);if(Te=k||Te!==0?Te:0,Q&&Pe===Pe){for(var We=Ce;We--;)if(E[We]===Pe)continue e;ce.push(Te)}else q(E,Pe,k)||ce.push(Te)}return ce}var Ns=tI(So),PR=tI(lx,!0);function KG(_,E){var T=!0;return Ns(_,function(k,N,q){return T=!!E(k,N,q),T}),T}function A0(_,E,T){for(var k=-1,N=_.length;++k<N;){var q=_[k],Q=E(q);if(Q!=null&&(ne===r?Q===Q&&!ia(Q):T(Q,ne)))var ne=Q,ce=q}return ce}function ZG(_,E,T,k){var N=_.length;for(T=Ct(T),T<0&&(T=-T>N?0:N+T),k=k===r||k>N?N:Ct(k),k<0&&(k+=N),k=T>k?0:HI(k);T<k;)_[T++]=E;return _}function RR(_,E){var T=[];return Ns(_,function(k,N,q){E(k,N,q)&&T.push(k)}),T}function Yn(_,E,T,k,N){var q=-1,Q=_.length;for(T||(T=U7),N||(N=[]);++q<Q;){var ne=_[q];E>0&&T(ne)?E>1?Yn(ne,E-1,T,k,N):Ms(N,ne):k||(N[N.length]=ne)}return N}var sx=rI(),IR=rI(!0);function So(_,E){return _&&sx(_,E,Fn)}function lx(_,E){return _&&IR(_,E,Fn)}function C0(_,E){return Ds(E,function(T){return ss(_[T])})}function Hl(_,E){E=js(E,_);for(var T=0,k=E.length;_!=null&&T<k;)_=_[wo(E[T++])];return T&&T==k?_:r}function FR(_,E,T){var k=E(_);return Et(_)?k:Ms(k,T(_))}function bi(_){return _==null?_===r?Xt:Xe:Vl&&Vl in mr(_)?k7(_):H7(_)}function ux(_,E){return _>E}function QG(_,E){return _!=null&&cr.call(_,E)}function JG(_,E){return _!=null&&E in mr(_)}function e7(_,E,T){return _>=ai(E,T)&&_<yn(E,T)}function cx(_,E,T){for(var k=T?H_:s0,N=_[0].length,q=_.length,Q=q,ne=me(q),ce=1/0,Ce=[];Q--;){var Te=_[Q];Q&&E&&(Te=Fr(Te,ra(E))),ce=ai(Te.length,ce),ne[Q]=!T&&(E||N>=120&&Te.length>=120)?new Wl(Q&&Te):r}Te=_[0];var Pe=-1,We=ne[0];e:for(;++Pe<N&&Ce.length<ce;){var nt=Te[Pe],ft=E?E(nt):nt;if(nt=T||nt!==0?nt:0,!(We?ch(We,ft):k(Ce,ft,T))){for(Q=q;--Q;){var Rt=ne[Q];if(!(Rt?ch(Rt,ft):k(_[Q],ft,T)))continue e}We&&We.push(ft),Ce.push(nt)}}return Ce}function t7(_,E,T,k){return So(_,function(N,q,Q){E(k,T(N),q,Q)}),k}function yh(_,E,T){E=js(E,_),_=_I(_,E);var k=_==null?_:_[wo(Ta(E))];return k==null?r:ta(k,_,T)}function kR(_){return Xr(_)&&bi(_)==te}function r7(_){return Xr(_)&&bi(_)==Vt}function n7(_){return Xr(_)&&bi(_)==Ee}function _h(_,E,T,k,N){return _===E?!0:_==null||E==null||!Xr(_)&&!Xr(E)?_!==_&&E!==E:i7(_,E,T,k,_h,N)}function i7(_,E,T,k,N,q){var Q=Et(_),ne=Et(E),ce=Q?ie:oi(_),Ce=ne?ie:oi(E);ce=ce==te?ke:ce,Ce=Ce==te?ke:Ce;var Te=ce==ke,Pe=Ce==ke,We=ce==Ce;if(We&&Vs(_)){if(!Vs(E))return!1;Q=!0,Te=!1}if(We&&!Te)return q||(q=new za),Q||mc(_)?hI(_,E,T,k,N,q):I7(_,E,ce,T,k,N,q);if(!(T&p)){var nt=Te&&cr.call(_,"__wrapped__"),ft=Pe&&cr.call(E,"__wrapped__");if(nt||ft){var Rt=nt?_.value():_,ht=ft?E.value():E;return q||(q=new za),N(Rt,ht,T,k,q)}}return We?(q||(q=new za),F7(_,E,T,k,N,q)):!1}function a7(_){return Xr(_)&&oi(_)==we}function fx(_,E,T,k){var N=T.length,q=N,Q=!k;if(_==null)return!q;for(_=mr(_);N--;){var ne=T[N];if(Q&&ne[2]?ne[1]!==_[ne[0]]:!(ne[0]in _))return!1}for(;++N<q;){ne=T[N];var ce=ne[0],Ce=_[ce],Te=ne[1];if(Q&&ne[2]){if(Ce===r&&!(ce in _))return!1}else{var Pe=new za;if(k)var We=k(Ce,Te,ce,_,E,Pe);if(!(We===r?_h(Te,Ce,p|v,k,Pe):We))return!1}}return!0}function DR(_){if(!Ur(_)||$7(_))return!1;var E=ss(_)?aG:k_;return E.test(Yl(_))}function o7(_){return Xr(_)&&bi(_)==gt}function s7(_){return Xr(_)&&oi(_)==tt}function l7(_){return Xr(_)&&G0(_.length)&&!!Ar[bi(_)]}function MR(_){return typeof _=="function"?_:_==null?ji:typeof _=="object"?Et(_)?NR(_[0],_[1]):BR(_):nF(_)}function hx(_){if(!Sh(_))return fG(_);var E=[];for(var T in mr(_))cr.call(_,T)&&T!="constructor"&&E.push(T);return E}function u7(_){if(!Ur(_))return z7(_);var E=Sh(_),T=[];for(var k in _)k=="constructor"&&(E||!cr.call(_,k))||T.push(k);return T}function dx(_,E){return _<E}function LR(_,E){var T=-1,k=Ni(_)?me(_.length):[];return Ns(_,function(N,q,Q){k[++T]=E(N,q,Q)}),k}function BR(_){var E=Ox(_);return E.length==1&&E[0][2]?mI(E[0][0],E[0][1]):function(T){return T===_||fx(T,_,E)}}function NR(_,E){return Rx(_)&&gI(E)?mI(wo(_),E):function(T){var k=jx(T,_);return k===r&&k===E?$x(T,_):_h(E,k,p|v)}}function T0(_,E,T,k,N){_!==E&&sx(E,function(q,Q){if(N||(N=new za),Ur(q))c7(_,E,Q,T,T0,k,N);else{var ne=k?k(Fx(_,Q),q,Q+"",_,E,N):r;ne===r&&(ne=q),ax(_,Q,ne)}},Ui)}function c7(_,E,T,k,N,q,Q){var ne=Fx(_,T),ce=Fx(E,T),Ce=Q.get(ce);if(Ce){ax(_,T,Ce);return}var Te=q?q(ne,ce,T+"",_,E,Q):r,Pe=Te===r;if(Pe){var We=Et(ce),nt=!We&&Vs(ce),ft=!We&&!nt&&mc(ce);Te=ce,We||nt||ft?Et(ne)?Te=ne:en(ne)?Te=Bi(ne):nt?(Pe=!1,Te=KR(ce,!0)):ft?(Pe=!1,Te=ZR(ce,!0)):Te=[]:wh(ce)||ql(ce)?(Te=ne,ql(ne)?Te=XI(ne):(!Ur(ne)||ss(ne))&&(Te=vI(ce))):Pe=!1}Pe&&(Q.set(ce,Te),N(Te,ce,k,q,Q),Q.delete(ce)),ax(_,T,Te)}function UR(_,E){var T=_.length;if(T)return E+=E<0?T:0,os(E,T)?_[E]:r}function jR(_,E,T){E.length?E=Fr(E,function(q){return Et(q)?function(Q){return Hl(Q,q.length===1?q[0]:q)}:q}):E=[ji];var k=-1;E=Fr(E,ra(ct()));var N=LR(_,function(q,Q,ne){var ce=Fr(E,function(Ce){return Ce(q)});return{criteria:ce,index:++k,value:q}});return BV(N,function(q,Q){return E7(q,Q,T)})}function f7(_,E){return $R(_,E,function(T,k){return $x(_,k)})}function $R(_,E,T){for(var k=-1,N=E.length,q={};++k<N;){var Q=E[k],ne=Hl(_,Q);T(ne,Q)&&xh(q,js(Q,_),ne)}return q}function h7(_){return function(E){return Hl(E,_)}}function px(_,E,T,k){var N=k?LV:oc,q=-1,Q=E.length,ne=_;for(_===E&&(E=Bi(E)),T&&(ne=Fr(_,ra(T)));++q<Q;)for(var ce=0,Ce=E[q],Te=T?T(Ce):Ce;(ce=N(ne,Te,ce,k))>-1;)ne!==_&&m0.call(ne,ce,1),m0.call(_,ce,1);return _}function VR(_,E){for(var T=_?E.length:0,k=T-1;T--;){var N=E[T];if(T==k||N!==q){var q=N;os(N)?m0.call(_,N,1):yx(_,N)}}return _}function vx(_,E){return _+x0(SR()*(E-_+1))}function d7(_,E,T,k){for(var N=-1,q=yn(_0((E-_)/(T||1)),0),Q=me(q);q--;)Q[k?q:++N]=_,_+=T;return Q}function gx(_,E){var T="";if(!_||E<1||E>ee)return T;do E%2&&(T+=_),E=x0(E/2),E&&(_+=_);while(E);return T}function kt(_,E){return kx(yI(_,E,ji),_+"")}function p7(_){return AR(yc(_))}function v7(_,E){var T=yc(_);return B0(T,zl(E,0,T.length))}function xh(_,E,T,k){if(!Ur(_))return _;E=js(E,_);for(var N=-1,q=E.length,Q=q-1,ne=_;ne!=null&&++N<q;){var ce=wo(E[N]),Ce=T;if(ce==="__proto__"||ce==="constructor"||ce==="prototype")return _;if(N!=Q){var Te=ne[ce];Ce=k?k(Te,ce,ne):r,Ce===r&&(Ce=Ur(Te)?Te:os(E[N+1])?[]:{})}gh(ne,ce,Ce),ne=ne[ce]}return _}var GR=b0?function(_,E){return b0.set(_,E),_}:ji,g7=y0?function(_,E){return y0(_,"toString",{configurable:!0,enumerable:!1,value:Gx(E),writable:!0})}:ji;function m7(_){return B0(yc(_))}function Ca(_,E,T){var k=-1,N=_.length;E<0&&(E=-E>N?0:N+E),T=T>N?N:T,T<0&&(T+=N),N=E>T?0:T-E>>>0,E>>>=0;for(var q=me(N);++k<N;)q[k]=_[k+E];return q}function y7(_,E){var T;return Ns(_,function(k,N,q){return T=E(k,N,q),!T}),!!T}function O0(_,E,T){var k=0,N=_==null?k:_.length;if(typeof E=="number"&&E===E&&N<=$){for(;k<N;){var q=k+N>>>1,Q=_[q];Q!==null&&!ia(Q)&&(T?Q<=E:Q<E)?k=q+1:N=q}return N}return mx(_,E,ji,T)}function mx(_,E,T,k){var N=0,q=_==null?0:_.length;if(q===0)return 0;E=T(E);for(var Q=E!==E,ne=E===null,ce=ia(E),Ce=E===r;N<q;){var Te=x0((N+q)/2),Pe=T(_[Te]),We=Pe!==r,nt=Pe===null,ft=Pe===Pe,Rt=ia(Pe);if(Q)var ht=k||ft;else Ce?ht=ft&&(k||We):ne?ht=ft&&We&&(k||!nt):ce?ht=ft&&We&&!nt&&(k||!Rt):nt||Rt?ht=!1:ht=k?Pe<=E:Pe<E;ht?N=Te+1:q=Te}return ai(q,V)}function WR(_,E){for(var T=-1,k=_.length,N=0,q=[];++T<k;){var Q=_[T],ne=E?E(Q):Q;if(!T||!Ha(ne,ce)){var ce=ne;q[N++]=Q===0?0:Q}}return q}function zR(_){return typeof _=="number"?_:ia(_)?X:+_}function na(_){if(typeof _=="string")return _;if(Et(_))return Fr(_,na)+"";if(ia(_))return ER?ER.call(_):"";var E=_+"";return E=="0"&&1/_==-Y?"-0":E}function Us(_,E,T){var k=-1,N=s0,q=_.length,Q=!0,ne=[],ce=ne;if(T)Q=!1,N=H_;else if(q>=i){var Ce=E?null:P7(_);if(Ce)return u0(Ce);Q=!1,N=ch,ce=new Wl}else ce=E?[]:ne;e:for(;++k<q;){var Te=_[k],Pe=E?E(Te):Te;if(Te=T||Te!==0?Te:0,Q&&Pe===Pe){for(var We=ce.length;We--;)if(ce[We]===Pe)continue e;E&&ce.push(Pe),ne.push(Te)}else N(ce,Pe,T)||(ce!==ne&&ce.push(Pe),ne.push(Te))}return ne}function yx(_,E){return E=js(E,_),_=_I(_,E),_==null||delete _[wo(Ta(E))]}function HR(_,E,T,k){return xh(_,E,T(Hl(_,E)),k)}function P0(_,E,T,k){for(var N=_.length,q=k?N:-1;(k?q--:++q<N)&&E(_[q],q,_););return T?Ca(_,k?0:q,k?q+1:N):Ca(_,k?q+1:0,k?N:q)}function XR(_,E){var T=_;return T instanceof Nt&&(T=T.value()),X_(E,function(k,N){return N.func.apply(N.thisArg,Ms([k],N.args))},T)}function _x(_,E,T){var k=_.length;if(k<2)return k?Us(_[0]):[];for(var N=-1,q=me(k);++N<k;)for(var Q=_[N],ne=-1;++ne<k;)ne!=N&&(q[N]=mh(q[N]||Q,_[ne],E,T));return Us(Yn(q,1),E,T)}function YR(_,E,T){for(var k=-1,N=_.length,q=E.length,Q={};++k<N;){var ne=k<q?E[k]:r;T(Q,_[k],ne)}return Q}function xx(_){return en(_)?_:[]}function bx(_){return typeof _=="function"?_:ji}function js(_,E){return Et(_)?_:Rx(_,E)?[_]:EI(sr(_))}var _7=kt;function $s(_,E,T){var k=_.length;return T=T===r?k:T,!E&&T>=k?_:Ca(_,E,T)}var qR=oG||function(_){return Xn.clearTimeout(_)};function KR(_,E){if(E)return _.slice();var T=_.length,k=mR?mR(T):new _.constructor(T);return _.copy(k),k}function Sx(_){var E=new _.constructor(_.byteLength);return new v0(E).set(new v0(_)),E}function x7(_,E){var T=E?Sx(_.buffer):_.buffer;return new _.constructor(T,_.byteOffset,_.byteLength)}function b7(_){var E=new _.constructor(_.source,e0.exec(_));return E.lastIndex=_.lastIndex,E}function S7(_){return vh?mr(vh.call(_)):{}}function ZR(_,E){var T=E?Sx(_.buffer):_.buffer;return new _.constructor(T,_.byteOffset,_.length)}function QR(_,E){if(_!==E){var T=_!==r,k=_===null,N=_===_,q=ia(_),Q=E!==r,ne=E===null,ce=E===E,Ce=ia(E);if(!ne&&!Ce&&!q&&_>E||q&&Q&&ce&&!ne&&!Ce||k&&Q&&ce||!T&&ce||!N)return 1;if(!k&&!q&&!Ce&&_<E||Ce&&T&&N&&!k&&!q||ne&&T&&N||!Q&&N||!ce)return-1}return 0}function E7(_,E,T){for(var k=-1,N=_.criteria,q=E.criteria,Q=N.length,ne=T.length;++k<Q;){var ce=QR(N[k],q[k]);if(ce){if(k>=ne)return ce;var Ce=T[k];return ce*(Ce=="desc"?-1:1)}}return _.index-E.index}function JR(_,E,T,k){for(var N=-1,q=_.length,Q=T.length,ne=-1,ce=E.length,Ce=yn(q-Q,0),Te=me(ce+Ce),Pe=!k;++ne<ce;)Te[ne]=E[ne];for(;++N<Q;)(Pe||N<q)&&(Te[T[N]]=_[N]);for(;Ce--;)Te[ne++]=_[N++];return Te}function eI(_,E,T,k){for(var N=-1,q=_.length,Q=-1,ne=T.length,ce=-1,Ce=E.length,Te=yn(q-ne,0),Pe=me(Te+Ce),We=!k;++N<Te;)Pe[N]=_[N];for(var nt=N;++ce<Ce;)Pe[nt+ce]=E[ce];for(;++Q<ne;)(We||N<q)&&(Pe[nt+T[Q]]=_[N++]);return Pe}function Bi(_,E){var T=-1,k=_.length;for(E||(E=me(k));++T<k;)E[T]=_[T];return E}function Eo(_,E,T,k){var N=!T;T||(T={});for(var q=-1,Q=E.length;++q<Q;){var ne=E[q],ce=k?k(T[ne],_[ne],ne,T,_):r;ce===r&&(ce=_[ne]),N?ns(T,ne,ce):gh(T,ne,ce)}return T}function w7(_,E){return Eo(_,Px(_),E)}function A7(_,E){return Eo(_,dI(_),E)}function R0(_,E){return function(T,k){var N=Et(T)?RV:XG,q=E?E():{};return N(T,_,ct(k,2),q)}}function pc(_){return kt(function(E,T){var k=-1,N=T.length,q=N>1?T[N-1]:r,Q=N>2?T[2]:r;for(q=_.length>3&&typeof q=="function"?(N--,q):r,Q&&Si(T[0],T[1],Q)&&(q=N<3?r:q,N=1),E=mr(E);++k<N;){var ne=T[k];ne&&_(E,ne,k,q)}return E})}function tI(_,E){return function(T,k){if(T==null)return T;if(!Ni(T))return _(T,k);for(var N=T.length,q=E?N:-1,Q=mr(T);(E?q--:++q<N)&&k(Q[q],q,Q)!==!1;);return T}}function rI(_){return function(E,T,k){for(var N=-1,q=mr(E),Q=k(E),ne=Q.length;ne--;){var ce=Q[_?ne:++N];if(T(q[ce],ce,q)===!1)break}return E}}function C7(_,E,T){var k=E&y,N=bh(_);function q(){var Q=this&&this!==Xn&&this instanceof q?N:_;return Q.apply(k?T:this,arguments)}return q}function nI(_){return function(E){E=sr(E);var T=sc(E)?Wa(E):r,k=T?T[0]:E.charAt(0),N=T?$s(T,1).join(""):E.slice(1);return k[_]()+N}}function vc(_){return function(E){return X_(tF(eF(E).replace(gV,"")),_,"")}}function bh(_){return function(){var E=arguments;switch(E.length){case 0:return new _;case 1:return new _(E[0]);case 2:return new _(E[0],E[1]);case 3:return new _(E[0],E[1],E[2]);case 4:return new _(E[0],E[1],E[2],E[3]);case 5:return new _(E[0],E[1],E[2],E[3],E[4]);case 6:return new _(E[0],E[1],E[2],E[3],E[4],E[5]);case 7:return new _(E[0],E[1],E[2],E[3],E[4],E[5],E[6])}var T=dc(_.prototype),k=_.apply(T,E);return Ur(k)?k:T}}function T7(_,E,T){var k=bh(_);function N(){for(var q=arguments.length,Q=me(q),ne=q,ce=gc(N);ne--;)Q[ne]=arguments[ne];var Ce=q<3&&Q[0]!==ce&&Q[q-1]!==ce?[]:Ls(Q,ce);if(q-=Ce.length,q<T)return lI(_,E,I0,N.placeholder,r,Q,Ce,r,r,T-q);var Te=this&&this!==Xn&&this instanceof N?k:_;return ta(Te,this,Q)}return N}function iI(_){return function(E,T,k){var N=mr(E);if(!Ni(E)){var q=ct(T,3);E=Fn(E),T=function(ne){return q(N[ne],ne,N)}}var Q=_(E,T,k);return Q>-1?N[q?E[Q]:Q]:r}}function aI(_){return as(function(E){var T=E.length,k=T,N=wa.prototype.thru;for(_&&E.reverse();k--;){var q=E[k];if(typeof q!="function")throw new Ea(o);if(N&&!Q&&M0(q)=="wrapper")var Q=new wa([],!0)}for(k=Q?k:T;++k<T;){q=E[k];var ne=M0(q),ce=ne=="wrapper"?Tx(q):r;ce&&Ix(ce[0])&&ce[1]==(A|x|S|C)&&!ce[4].length&&ce[9]==1?Q=Q[M0(ce[0])].apply(Q,ce[3]):Q=q.length==1&&Ix(q)?Q[ne]():Q.thru(q)}return function(){var Ce=arguments,Te=Ce[0];if(Q&&Ce.length==1&&Et(Te))return Q.plant(Te).value();for(var Pe=0,We=T?E[Pe].apply(this,Ce):Te;++Pe<T;)We=E[Pe].call(this,We);return We}})}function I0(_,E,T,k,N,q,Q,ne,ce,Ce){var Te=E&A,Pe=E&y,We=E&m,nt=E&(x|b),ft=E&O,Rt=We?r:bh(_);function ht(){for(var Lt=arguments.length,Gt=me(Lt),aa=Lt;aa--;)Gt[aa]=arguments[aa];if(nt)var Ei=gc(ht),oa=UV(Gt,Ei);if(k&&(Gt=JR(Gt,k,N,nt)),q&&(Gt=eI(Gt,q,Q,nt)),Lt-=oa,nt&&Lt<Ce){var tn=Ls(Gt,Ei);return lI(_,E,I0,ht.placeholder,T,Gt,tn,ne,ce,Ce-Lt)}var Xa=Pe?T:this,us=We?Xa[_]:_;return Lt=Gt.length,ne?Gt=X7(Gt,ne):ft&&Lt>1&&Gt.reverse(),Te&&ce<Lt&&(Gt.length=ce),this&&this!==Xn&&this instanceof ht&&(us=Rt||bh(us)),us.apply(Xa,Gt)}return ht}function oI(_,E){return function(T,k){return t7(T,_,E(k),{})}}function F0(_,E){return function(T,k){var N;if(T===r&&k===r)return E;if(T!==r&&(N=T),k!==r){if(N===r)return k;typeof T=="string"||typeof k=="string"?(T=na(T),k=na(k)):(T=zR(T),k=zR(k)),N=_(T,k)}return N}}function Ex(_){return as(function(E){return E=Fr(E,ra(ct())),kt(function(T){var k=this;return _(E,function(N){return ta(N,k,T)})})})}function k0(_,E){E=E===r?" ":na(E);var T=E.length;if(T<2)return T?gx(E,_):E;var k=gx(E,_0(_/lc(E)));return sc(E)?$s(Wa(k),0,_).join(""):k.slice(0,_)}function O7(_,E,T,k){var N=E&y,q=bh(_);function Q(){for(var ne=-1,ce=arguments.length,Ce=-1,Te=k.length,Pe=me(Te+ce),We=this&&this!==Xn&&this instanceof Q?q:_;++Ce<Te;)Pe[Ce]=k[Ce];for(;ce--;)Pe[Ce++]=arguments[++ne];return ta(We,N?T:this,Pe)}return Q}function sI(_){return function(E,T,k){return k&&typeof k!="number"&&Si(E,T,k)&&(T=k=r),E=ls(E),T===r?(T=E,E=0):T=ls(T),k=k===r?E<T?1:-1:ls(k),d7(E,T,k,_)}}function D0(_){return function(E,T){return typeof E=="string"&&typeof T=="string"||(E=Oa(E),T=Oa(T)),_(E,T)}}function lI(_,E,T,k,N,q,Q,ne,ce,Ce){var Te=E&x,Pe=Te?Q:r,We=Te?r:Q,nt=Te?q:r,ft=Te?r:q;E|=Te?S:w,E&=~(Te?w:S),E&g||(E&=~(y|m));var Rt=[_,E,N,nt,Pe,ft,We,ne,ce,Ce],ht=T.apply(r,Rt);return Ix(_)&&xI(ht,Rt),ht.placeholder=k,bI(ht,_,E)}function wx(_){var E=mn[_];return function(T,k){if(T=Oa(T),k=k==null?0:ai(Ct(k),292),k&&bR(T)){var N=(sr(T)+"e").split("e"),q=E(N[0]+"e"+(+N[1]+k));return N=(sr(q)+"e").split("e"),+(N[0]+"e"+(+N[1]-k))}return E(T)}}var P7=fc&&1/u0(new fc([,-0]))[1]==Y?function(_){return new fc(_)}:Hx;function uI(_){return function(E){var T=oi(E);return T==we?ex(E):T==tt?HV(E):NV(E,_(E))}}function is(_,E,T,k,N,q,Q,ne){var ce=E&m;if(!ce&&typeof _!="function")throw new Ea(o);var Ce=k?k.length:0;if(Ce||(E&=~(S|w),k=N=r),Q=Q===r?Q:yn(Ct(Q),0),ne=ne===r?ne:Ct(ne),Ce-=N?N.length:0,E&w){var Te=k,Pe=N;k=N=r}var We=ce?r:Tx(_),nt=[_,E,T,k,N,Te,Pe,q,Q,ne];if(We&&W7(nt,We),_=nt[0],E=nt[1],T=nt[2],k=nt[3],N=nt[4],ne=nt[9]=nt[9]===r?ce?0:_.length:yn(nt[9]-Ce,0),!ne&&E&(x|b)&&(E&=~(x|b)),!E||E==y)var ft=C7(_,E,T);else E==x||E==b?ft=T7(_,E,ne):(E==S||E==(y|S))&&!N.length?ft=O7(_,E,T,k):ft=I0.apply(r,nt);var Rt=We?GR:xI;return bI(Rt(ft,nt),_,E)}function cI(_,E,T,k){return _===r||Ha(_,cc[T])&&!cr.call(k,T)?E:_}function fI(_,E,T,k,N,q){return Ur(_)&&Ur(E)&&(q.set(E,_),T0(_,E,r,fI,q),q.delete(E)),_}function R7(_){return wh(_)?r:_}function hI(_,E,T,k,N,q){var Q=T&p,ne=_.length,ce=E.length;if(ne!=ce&&!(Q&&ce>ne))return!1;var Ce=q.get(_),Te=q.get(E);if(Ce&&Te)return Ce==E&&Te==_;var Pe=-1,We=!0,nt=T&v?new Wl:r;for(q.set(_,E),q.set(E,_);++Pe<ne;){var ft=_[Pe],Rt=E[Pe];if(k)var ht=Q?k(Rt,ft,Pe,E,_,q):k(ft,Rt,Pe,_,E,q);if(ht!==r){if(ht)continue;We=!1;break}if(nt){if(!Y_(E,function(Lt,Gt){if(!ch(nt,Gt)&&(ft===Lt||N(ft,Lt,T,k,q)))return nt.push(Gt)})){We=!1;break}}else if(!(ft===Rt||N(ft,Rt,T,k,q))){We=!1;break}}return q.delete(_),q.delete(E),We}function I7(_,E,T,k,N,q,Q){switch(T){case bt:if(_.byteLength!=E.byteLength||_.byteOffset!=E.byteOffset)return!1;_=_.buffer,E=E.buffer;case Vt:return!(_.byteLength!=E.byteLength||!q(new v0(_),new v0(E)));case he:case Ee:case $e:return Ha(+_,+E);case ye:return _.name==E.name&&_.message==E.message;case gt:case ot:return _==E+"";case we:var ne=ex;case tt:var ce=k&p;if(ne||(ne=u0),_.size!=E.size&&!ce)return!1;var Ce=Q.get(_);if(Ce)return Ce==E;k|=v,Q.set(_,E);var Te=hI(ne(_),ne(E),k,N,q,Q);return Q.delete(_),Te;case dt:if(vh)return vh.call(_)==vh.call(E)}return!1}function F7(_,E,T,k,N,q){var Q=T&p,ne=Ax(_),ce=ne.length,Ce=Ax(E),Te=Ce.length;if(ce!=Te&&!Q)return!1;for(var Pe=ce;Pe--;){var We=ne[Pe];if(!(Q?We in E:cr.call(E,We)))return!1}var nt=q.get(_),ft=q.get(E);if(nt&&ft)return nt==E&&ft==_;var Rt=!0;q.set(_,E),q.set(E,_);for(var ht=Q;++Pe<ce;){We=ne[Pe];var Lt=_[We],Gt=E[We];if(k)var aa=Q?k(Gt,Lt,We,E,_,q):k(Lt,Gt,We,_,E,q);if(!(aa===r?Lt===Gt||N(Lt,Gt,T,k,q):aa)){Rt=!1;break}ht||(ht=We=="constructor")}if(Rt&&!ht){var Ei=_.constructor,oa=E.constructor;Ei!=oa&&"constructor"in _&&"constructor"in E&&!(typeof Ei=="function"&&Ei instanceof Ei&&typeof oa=="function"&&oa instanceof oa)&&(Rt=!1)}return q.delete(_),q.delete(E),Rt}function as(_){return kx(yI(_,r,TI),_+"")}function Ax(_){return FR(_,Fn,Px)}function Cx(_){return FR(_,Ui,dI)}var Tx=b0?function(_){return b0.get(_)}:Hx;function M0(_){for(var E=_.name+"",T=hc[E],k=cr.call(hc,E)?T.length:0;k--;){var N=T[k],q=N.func;if(q==null||q==_)return N.name}return E}function gc(_){var E=cr.call(G,"placeholder")?G:_;return E.placeholder}function ct(){var _=G.iteratee||Wx;return _=_===Wx?MR:_,arguments.length?_(arguments[0],arguments[1]):_}function L0(_,E){var T=_.__data__;return j7(E)?T[typeof E=="string"?"string":"hash"]:T.map}function Ox(_){for(var E=Fn(_),T=E.length;T--;){var k=E[T],N=_[k];E[T]=[k,N,gI(N)]}return E}function Xl(_,E){var T=GV(_,E);return DR(T)?T:r}function k7(_){var E=cr.call(_,Vl),T=_[Vl];try{_[Vl]=r;var k=!0}catch{}var N=d0.call(_);return k&&(E?_[Vl]=T:delete _[Vl]),N}var Px=rx?function(_){return _==null?[]:(_=mr(_),Ds(rx(_),function(E){return _R.call(_,E)}))}:Xx,dI=rx?function(_){for(var E=[];_;)Ms(E,Px(_)),_=g0(_);return E}:Xx,oi=bi;(nx&&oi(new nx(new ArrayBuffer(1)))!=bt||hh&&oi(new hh)!=we||ix&&oi(ix.resolve())!=at||fc&&oi(new fc)!=tt||dh&&oi(new dh)!=rr)&&(oi=function(_){var E=bi(_),T=E==ke?_.constructor:r,k=T?Yl(T):"";if(k)switch(k){case vG:return bt;case gG:return we;case mG:return at;case yG:return tt;case _G:return rr}return E});function D7(_,E,T){for(var k=-1,N=T.length;++k<N;){var q=T[k],Q=q.size;switch(q.type){case"drop":_+=Q;break;case"dropRight":E-=Q;break;case"take":E=ai(E,_+Q);break;case"takeRight":_=yn(_,E-Q);break}}return{start:_,end:E}}function M7(_){var E=_.match(A_);return E?E[1].split(C_):[]}function pI(_,E,T){E=js(E,_);for(var k=-1,N=E.length,q=!1;++k<N;){var Q=wo(E[k]);if(!(q=_!=null&&T(_,Q)))break;_=_[Q]}return q||++k!=N?q:(N=_==null?0:_.length,!!N&&G0(N)&&os(Q,N)&&(Et(_)||ql(_)))}function L7(_){var E=_.length,T=new _.constructor(E);return E&&typeof _[0]=="string"&&cr.call(_,"index")&&(T.index=_.index,T.input=_.input),T}function vI(_){return typeof _.constructor=="function"&&!Sh(_)?dc(g0(_)):{}}function B7(_,E,T){var k=_.constructor;switch(E){case Vt:return Sx(_);case he:case Ee:return new k(+_);case bt:return x7(_,T);case or:case ge:case Se:case Re:case He:case je:case rt:case er:case wr:return ZR(_,T);case we:return new k;case $e:case ot:return new k(_);case gt:return b7(_);case tt:return new k;case dt:return S7(_)}}function N7(_,E){var T=E.length;if(!T)return _;var k=T-1;return E[k]=(T>1?"& ":"")+E[k],E=E.join(T>2?", ":" "),_.replace(sh,`{
/* [wrapped with `+E+`] */
`)}function U7(_){return Et(_)||ql(_)||!!(xR&&_&&_[xR])}function os(_,E){var T=typeof _;return E=E??ee,!!E&&(T=="number"||T!="symbol"&&M_.test(_))&&_>-1&&_%1==0&&_<E}function Si(_,E,T){if(!Ur(T))return!1;var k=typeof E;return(k=="number"?Ni(T)&&os(E,T.length):k=="string"&&E in T)?Ha(T[E],_):!1}function Rx(_,E){if(Et(_))return!1;var T=typeof _;return T=="number"||T=="symbol"||T=="boolean"||_==null||ia(_)?!0:_i.test(_)||!Is.test(_)||E!=null&&_ in mr(E)}function j7(_){var E=typeof _;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?_!=="__proto__":_===null}function Ix(_){var E=M0(_),T=G[E];if(typeof T!="function"||!(E in Nt.prototype))return!1;if(_===T)return!0;var k=Tx(T);return!!k&&_===k[0]}function $7(_){return!!gR&&gR in _}var V7=f0?ss:Yx;function Sh(_){var E=_&&_.constructor,T=typeof E=="function"&&E.prototype||cc;return _===T}function gI(_){return _===_&&!Ur(_)}function mI(_,E){return function(T){return T==null?!1:T[_]===E&&(E!==r||_ in mr(T))}}function G7(_){var E=$0(_,function(k){return T.size===l&&T.clear(),k}),T=E.cache;return E}function W7(_,E){var T=_[1],k=E[1],N=T|k,q=N<(y|m|A),Q=k==A&&T==x||k==A&&T==C&&_[7].length<=E[8]||k==(A|C)&&E[7].length<=E[8]&&T==x;if(!(q||Q))return _;k&y&&(_[2]=E[2],N|=T&y?0:g);var ne=E[3];if(ne){var ce=_[3];_[3]=ce?JR(ce,ne,E[4]):ne,_[4]=ce?Ls(_[3],u):E[4]}return ne=E[5],ne&&(ce=_[5],_[5]=ce?eI(ce,ne,E[6]):ne,_[6]=ce?Ls(_[5],u):E[6]),ne=E[7],ne&&(_[7]=ne),k&A&&(_[8]=_[8]==null?E[8]:ai(_[8],E[8])),_[9]==null&&(_[9]=E[9]),_[0]=E[0],_[1]=N,_}function z7(_){var E=[];if(_!=null)for(var T in mr(_))E.push(T);return E}function H7(_){return d0.call(_)}function yI(_,E,T){return E=yn(E===r?_.length-1:E,0),function(){for(var k=arguments,N=-1,q=yn(k.length-E,0),Q=me(q);++N<q;)Q[N]=k[E+N];N=-1;for(var ne=me(E+1);++N<E;)ne[N]=k[N];return ne[E]=T(Q),ta(_,this,ne)}}function _I(_,E){return E.length<2?_:Hl(_,Ca(E,0,-1))}function X7(_,E){for(var T=_.length,k=ai(E.length,T),N=Bi(_);k--;){var q=E[k];_[k]=os(q,T)?N[q]:r}return _}function Fx(_,E){if(!(E==="constructor"&&typeof _[E]=="function")&&E!="__proto__")return _[E]}var xI=SI(GR),Eh=lG||function(_,E){return Xn.setTimeout(_,E)},kx=SI(g7);function bI(_,E,T){var k=E+"";return kx(_,N7(k,Y7(M7(k),T)))}function SI(_){var E=0,T=0;return function(){var k=hG(),N=F-(k-T);if(T=k,N>0){if(++E>=R)return arguments[0]}else E=0;return _.apply(r,arguments)}}function B0(_,E){var T=-1,k=_.length,N=k-1;for(E=E===r?k:E;++T<E;){var q=vx(T,N),Q=_[q];_[q]=_[T],_[T]=Q}return _.length=E,_}var EI=G7(function(_){var E=[];return _.charCodeAt(0)===46&&E.push(""),_.replace(Ga,function(T,k,N,q){E.push(N?q.replace(P_,"$1"):k||T)}),E});function wo(_){if(typeof _=="string"||ia(_))return _;var E=_+"";return E=="0"&&1/_==-Y?"-0":E}function Yl(_){if(_!=null){try{return h0.call(_)}catch{}try{return _+""}catch{}}return""}function Y7(_,E){return Sa(j,function(T){var k="_."+T[0];E&T[1]&&!s0(_,k)&&_.push(k)}),_.sort()}function wI(_){if(_ instanceof Nt)return _.clone();var E=new wa(_.__wrapped__,_.__chain__);return E.__actions__=Bi(_.__actions__),E.__index__=_.__index__,E.__values__=_.__values__,E}function q7(_,E,T){(T?Si(_,E,T):E===r)?E=1:E=yn(Ct(E),0);var k=_==null?0:_.length;if(!k||E<1)return[];for(var N=0,q=0,Q=me(_0(k/E));N<k;)Q[q++]=Ca(_,N,N+=E);return Q}function K7(_){for(var E=-1,T=_==null?0:_.length,k=0,N=[];++E<T;){var q=_[E];q&&(N[k++]=q)}return N}function Z7(){var _=arguments.length;if(!_)return[];for(var E=me(_-1),T=arguments[0],k=_;k--;)E[k-1]=arguments[k];return Ms(Et(T)?Bi(T):[T],Yn(E,1))}var Q7=kt(function(_,E){return en(_)?mh(_,Yn(E,1,en,!0)):[]}),J7=kt(function(_,E){var T=Ta(E);return en(T)&&(T=r),en(_)?mh(_,Yn(E,1,en,!0),ct(T,2)):[]}),eW=kt(function(_,E){var T=Ta(E);return en(T)&&(T=r),en(_)?mh(_,Yn(E,1,en,!0),r,T):[]});function tW(_,E,T){var k=_==null?0:_.length;return k?(E=T||E===r?1:Ct(E),Ca(_,E<0?0:E,k)):[]}function rW(_,E,T){var k=_==null?0:_.length;return k?(E=T||E===r?1:Ct(E),E=k-E,Ca(_,0,E<0?0:E)):[]}function nW(_,E){return _&&_.length?P0(_,ct(E,3),!0,!0):[]}function iW(_,E){return _&&_.length?P0(_,ct(E,3),!0):[]}function aW(_,E,T,k){var N=_==null?0:_.length;return N?(T&&typeof T!="number"&&Si(_,E,T)&&(T=0,k=N),ZG(_,E,T,k)):[]}function AI(_,E,T){var k=_==null?0:_.length;if(!k)return-1;var N=T==null?0:Ct(T);return N<0&&(N=yn(k+N,0)),l0(_,ct(E,3),N)}function CI(_,E,T){var k=_==null?0:_.length;if(!k)return-1;var N=k-1;return T!==r&&(N=Ct(T),N=T<0?yn(k+N,0):ai(N,k-1)),l0(_,ct(E,3),N,!0)}function TI(_){var E=_==null?0:_.length;return E?Yn(_,1):[]}function oW(_){var E=_==null?0:_.length;return E?Yn(_,Y):[]}function sW(_,E){var T=_==null?0:_.length;return T?(E=E===r?1:Ct(E),Yn(_,E)):[]}function lW(_){for(var E=-1,T=_==null?0:_.length,k={};++E<T;){var N=_[E];k[N[0]]=N[1]}return k}function OI(_){return _&&_.length?_[0]:r}function uW(_,E,T){var k=_==null?0:_.length;if(!k)return-1;var N=T==null?0:Ct(T);return N<0&&(N=yn(k+N,0)),oc(_,E,N)}function cW(_){var E=_==null?0:_.length;return E?Ca(_,0,-1):[]}var fW=kt(function(_){var E=Fr(_,xx);return E.length&&E[0]===_[0]?cx(E):[]}),hW=kt(function(_){var E=Ta(_),T=Fr(_,xx);return E===Ta(T)?E=r:T.pop(),T.length&&T[0]===_[0]?cx(T,ct(E,2)):[]}),dW=kt(function(_){var E=Ta(_),T=Fr(_,xx);return E=typeof E=="function"?E:r,E&&T.pop(),T.length&&T[0]===_[0]?cx(T,r,E):[]});function pW(_,E){return _==null?"":cG.call(_,E)}function Ta(_){var E=_==null?0:_.length;return E?_[E-1]:r}function vW(_,E,T){var k=_==null?0:_.length;if(!k)return-1;var N=k;return T!==r&&(N=Ct(T),N=N<0?yn(k+N,0):ai(N,k-1)),E===E?YV(_,E,N):l0(_,lR,N,!0)}function gW(_,E){return _&&_.length?UR(_,Ct(E)):r}var mW=kt(PI);function PI(_,E){return _&&_.length&&E&&E.length?px(_,E):_}function yW(_,E,T){return _&&_.length&&E&&E.length?px(_,E,ct(T,2)):_}function _W(_,E,T){return _&&_.length&&E&&E.length?px(_,E,r,T):_}var xW=as(function(_,E){var T=_==null?0:_.length,k=ox(_,E);return VR(_,Fr(E,function(N){return os(N,T)?+N:N}).sort(QR)),k});function bW(_,E){var T=[];if(!(_&&_.length))return T;var k=-1,N=[],q=_.length;for(E=ct(E,3);++k<q;){var Q=_[k];E(Q,k,_)&&(T.push(Q),N.push(k))}return VR(_,N),T}function Dx(_){return _==null?_:pG.call(_)}function SW(_,E,T){var k=_==null?0:_.length;return k?(T&&typeof T!="number"&&Si(_,E,T)?(E=0,T=k):(E=E==null?0:Ct(E),T=T===r?k:Ct(T)),Ca(_,E,T)):[]}function EW(_,E){return O0(_,E)}function wW(_,E,T){return mx(_,E,ct(T,2))}function AW(_,E){var T=_==null?0:_.length;if(T){var k=O0(_,E);if(k<T&&Ha(_[k],E))return k}return-1}function CW(_,E){return O0(_,E,!0)}function TW(_,E,T){return mx(_,E,ct(T,2),!0)}function OW(_,E){var T=_==null?0:_.length;if(T){var k=O0(_,E,!0)-1;if(Ha(_[k],E))return k}return-1}function PW(_){return _&&_.length?WR(_):[]}function RW(_,E){return _&&_.length?WR(_,ct(E,2)):[]}function IW(_){var E=_==null?0:_.length;return E?Ca(_,1,E):[]}function FW(_,E,T){return _&&_.length?(E=T||E===r?1:Ct(E),Ca(_,0,E<0?0:E)):[]}function kW(_,E,T){var k=_==null?0:_.length;return k?(E=T||E===r?1:Ct(E),E=k-E,Ca(_,E<0?0:E,k)):[]}function DW(_,E){return _&&_.length?P0(_,ct(E,3),!1,!0):[]}function MW(_,E){return _&&_.length?P0(_,ct(E,3)):[]}var LW=kt(function(_){return Us(Yn(_,1,en,!0))}),BW=kt(function(_){var E=Ta(_);return en(E)&&(E=r),Us(Yn(_,1,en,!0),ct(E,2))}),NW=kt(function(_){var E=Ta(_);return E=typeof E=="function"?E:r,Us(Yn(_,1,en,!0),r,E)});function UW(_){return _&&_.length?Us(_):[]}function jW(_,E){return _&&_.length?Us(_,ct(E,2)):[]}function $W(_,E){return E=typeof E=="function"?E:r,_&&_.length?Us(_,r,E):[]}function Mx(_){if(!(_&&_.length))return[];var E=0;return _=Ds(_,function(T){if(en(T))return E=yn(T.length,E),!0}),Q_(E,function(T){return Fr(_,q_(T))})}function RI(_,E){if(!(_&&_.length))return[];var T=Mx(_);return E==null?T:Fr(T,function(k){return ta(E,r,k)})}var VW=kt(function(_,E){return en(_)?mh(_,E):[]}),GW=kt(function(_){return _x(Ds(_,en))}),WW=kt(function(_){var E=Ta(_);return en(E)&&(E=r),_x(Ds(_,en),ct(E,2))}),zW=kt(function(_){var E=Ta(_);return E=typeof E=="function"?E:r,_x(Ds(_,en),r,E)}),HW=kt(Mx);function XW(_,E){return YR(_||[],E||[],gh)}function YW(_,E){return YR(_||[],E||[],xh)}var qW=kt(function(_){var E=_.length,T=E>1?_[E-1]:r;return T=typeof T=="function"?(_.pop(),T):r,RI(_,T)});function II(_){var E=G(_);return E.__chain__=!0,E}function KW(_,E){return E(_),_}function N0(_,E){return E(_)}var ZW=as(function(_){var E=_.length,T=E?_[0]:0,k=this.__wrapped__,N=function(q){return ox(q,_)};return E>1||this.__actions__.length||!(k instanceof Nt)||!os(T)?this.thru(N):(k=k.slice(T,+T+(E?1:0)),k.__actions__.push({func:N0,args:[N],thisArg:r}),new wa(k,this.__chain__).thru(function(q){return E&&!q.length&&q.push(r),q}))});function QW(){return II(this)}function JW(){return new wa(this.value(),this.__chain__)}function ez(){this.__values__===r&&(this.__values__=zI(this.value()));var _=this.__index__>=this.__values__.length,E=_?r:this.__values__[this.__index__++];return{done:_,value:E}}function tz(){return this}function rz(_){for(var E,T=this;T instanceof E0;){var k=wI(T);k.__index__=0,k.__values__=r,E?N.__wrapped__=k:E=k;var N=k;T=T.__wrapped__}return N.__wrapped__=_,E}function nz(){var _=this.__wrapped__;if(_ instanceof Nt){var E=_;return this.__actions__.length&&(E=new Nt(this)),E=E.reverse(),E.__actions__.push({func:N0,args:[Dx],thisArg:r}),new wa(E,this.__chain__)}return this.thru(Dx)}function iz(){return XR(this.__wrapped__,this.__actions__)}var az=R0(function(_,E,T){cr.call(_,T)?++_[T]:ns(_,T,1)});function oz(_,E,T){var k=Et(_)?oR:KG;return T&&Si(_,E,T)&&(E=r),k(_,ct(E,3))}function sz(_,E){var T=Et(_)?Ds:RR;return T(_,ct(E,3))}var lz=iI(AI),uz=iI(CI);function cz(_,E){return Yn(U0(_,E),1)}function fz(_,E){return Yn(U0(_,E),Y)}function hz(_,E,T){return T=T===r?1:Ct(T),Yn(U0(_,E),T)}function FI(_,E){var T=Et(_)?Sa:Ns;return T(_,ct(E,3))}function kI(_,E){var T=Et(_)?IV:PR;return T(_,ct(E,3))}var dz=R0(function(_,E,T){cr.call(_,T)?_[T].push(E):ns(_,T,[E])});function pz(_,E,T,k){_=Ni(_)?_:yc(_),T=T&&!k?Ct(T):0;var N=_.length;return T<0&&(T=yn(N+T,0)),W0(_)?T<=N&&_.indexOf(E,T)>-1:!!N&&oc(_,E,T)>-1}var vz=kt(function(_,E,T){var k=-1,N=typeof E=="function",q=Ni(_)?me(_.length):[];return Ns(_,function(Q){q[++k]=N?ta(E,Q,T):yh(Q,E,T)}),q}),gz=R0(function(_,E,T){ns(_,T,E)});function U0(_,E){var T=Et(_)?Fr:LR;return T(_,ct(E,3))}function mz(_,E,T,k){return _==null?[]:(Et(E)||(E=E==null?[]:[E]),T=k?r:T,Et(T)||(T=T==null?[]:[T]),jR(_,E,T))}var yz=R0(function(_,E,T){_[T?0:1].push(E)},function(){return[[],[]]});function _z(_,E,T){var k=Et(_)?X_:cR,N=arguments.length<3;return k(_,ct(E,4),T,N,Ns)}function xz(_,E,T){var k=Et(_)?FV:cR,N=arguments.length<3;return k(_,ct(E,4),T,N,PR)}function bz(_,E){var T=Et(_)?Ds:RR;return T(_,V0(ct(E,3)))}function Sz(_){var E=Et(_)?AR:p7;return E(_)}function Ez(_,E,T){(T?Si(_,E,T):E===r)?E=1:E=Ct(E);var k=Et(_)?zG:v7;return k(_,E)}function wz(_){var E=Et(_)?HG:m7;return E(_)}function Az(_){if(_==null)return 0;if(Ni(_))return W0(_)?lc(_):_.length;var E=oi(_);return E==we||E==tt?_.size:hx(_).length}function Cz(_,E,T){var k=Et(_)?Y_:y7;return T&&Si(_,E,T)&&(E=r),k(_,ct(E,3))}var Tz=kt(function(_,E){if(_==null)return[];var T=E.length;return T>1&&Si(_,E[0],E[1])?E=[]:T>2&&Si(E[0],E[1],E[2])&&(E=[E[0]]),jR(_,Yn(E,1),[])}),j0=sG||function(){return Xn.Date.now()};function Oz(_,E){if(typeof E!="function")throw new Ea(o);return _=Ct(_),function(){if(--_<1)return E.apply(this,arguments)}}function DI(_,E,T){return E=T?r:E,E=_&&E==null?_.length:E,is(_,A,r,r,r,r,E)}function MI(_,E){var T;if(typeof E!="function")throw new Ea(o);return _=Ct(_),function(){return--_>0&&(T=E.apply(this,arguments)),_<=1&&(E=r),T}}var Lx=kt(function(_,E,T){var k=y;if(T.length){var N=Ls(T,gc(Lx));k|=S}return is(_,k,E,T,N)}),LI=kt(function(_,E,T){var k=y|m;if(T.length){var N=Ls(T,gc(LI));k|=S}return is(E,k,_,T,N)});function BI(_,E,T){E=T?r:E;var k=is(_,x,r,r,r,r,r,E);return k.placeholder=BI.placeholder,k}function NI(_,E,T){E=T?r:E;var k=is(_,b,r,r,r,r,r,E);return k.placeholder=NI.placeholder,k}function UI(_,E,T){var k,N,q,Q,ne,ce,Ce=0,Te=!1,Pe=!1,We=!0;if(typeof _!="function")throw new Ea(o);E=Oa(E)||0,Ur(T)&&(Te=!!T.leading,Pe="maxWait"in T,q=Pe?yn(Oa(T.maxWait)||0,E):q,We="trailing"in T?!!T.trailing:We);function nt(tn){var Xa=k,us=N;return k=N=r,Ce=tn,Q=_.apply(us,Xa),Q}function ft(tn){return Ce=tn,ne=Eh(Lt,E),Te?nt(tn):Q}function Rt(tn){var Xa=tn-ce,us=tn-Ce,iF=E-Xa;return Pe?ai(iF,q-us):iF}function ht(tn){var Xa=tn-ce,us=tn-Ce;return ce===r||Xa>=E||Xa<0||Pe&&us>=q}function Lt(){var tn=j0();if(ht(tn))return Gt(tn);ne=Eh(Lt,Rt(tn))}function Gt(tn){return ne=r,We&&k?nt(tn):(k=N=r,Q)}function aa(){ne!==r&&qR(ne),Ce=0,k=ce=N=ne=r}function Ei(){return ne===r?Q:Gt(j0())}function oa(){var tn=j0(),Xa=ht(tn);if(k=arguments,N=this,ce=tn,Xa){if(ne===r)return ft(ce);if(Pe)return qR(ne),ne=Eh(Lt,E),nt(ce)}return ne===r&&(ne=Eh(Lt,E)),Q}return oa.cancel=aa,oa.flush=Ei,oa}var Pz=kt(function(_,E){return OR(_,1,E)}),Rz=kt(function(_,E,T){return OR(_,Oa(E)||0,T)});function Iz(_){return is(_,O)}function $0(_,E){if(typeof _!="function"||E!=null&&typeof E!="function")throw new Ea(o);var T=function(){var k=arguments,N=E?E.apply(this,k):k[0],q=T.cache;if(q.has(N))return q.get(N);var Q=_.apply(this,k);return T.cache=q.set(N,Q)||q,Q};return T.cache=new($0.Cache||rs),T}$0.Cache=rs;function V0(_){if(typeof _!="function")throw new Ea(o);return function(){var E=arguments;switch(E.length){case 0:return!_.call(this);case 1:return!_.call(this,E[0]);case 2:return!_.call(this,E[0],E[1]);case 3:return!_.call(this,E[0],E[1],E[2])}return!_.apply(this,E)}}function Fz(_){return MI(2,_)}var kz=_7(function(_,E){E=E.length==1&&Et(E[0])?Fr(E[0],ra(ct())):Fr(Yn(E,1),ra(ct()));var T=E.length;return kt(function(k){for(var N=-1,q=ai(k.length,T);++N<q;)k[N]=E[N].call(this,k[N]);return ta(_,this,k)})}),Bx=kt(function(_,E){var T=Ls(E,gc(Bx));return is(_,S,r,E,T)}),jI=kt(function(_,E){var T=Ls(E,gc(jI));return is(_,w,r,E,T)}),Dz=as(function(_,E){return is(_,C,r,r,r,E)});function Mz(_,E){if(typeof _!="function")throw new Ea(o);return E=E===r?E:Ct(E),kt(_,E)}function Lz(_,E){if(typeof _!="function")throw new Ea(o);return E=E==null?0:yn(Ct(E),0),kt(function(T){var k=T[E],N=$s(T,0,E);return k&&Ms(N,k),ta(_,this,N)})}function Bz(_,E,T){var k=!0,N=!0;if(typeof _!="function")throw new Ea(o);return Ur(T)&&(k="leading"in T?!!T.leading:k,N="trailing"in T?!!T.trailing:N),UI(_,E,{leading:k,maxWait:E,trailing:N})}function Nz(_){return DI(_,1)}function Uz(_,E){return Bx(bx(E),_)}function jz(){if(!arguments.length)return[];var _=arguments[0];return Et(_)?_:[_]}function $z(_){return Aa(_,d)}function Vz(_,E){return E=typeof E=="function"?E:r,Aa(_,d,E)}function Gz(_){return Aa(_,f|d)}function Wz(_,E){return E=typeof E=="function"?E:r,Aa(_,f|d,E)}function zz(_,E){return E==null||TR(_,E,Fn(E))}function Ha(_,E){return _===E||_!==_&&E!==E}var Hz=D0(ux),Xz=D0(function(_,E){return _>=E}),ql=kR(function(){return arguments}())?kR:function(_){return Xr(_)&&cr.call(_,"callee")&&!_R.call(_,"callee")},Et=me.isArray,Yz=eR?ra(eR):r7;function Ni(_){return _!=null&&G0(_.length)&&!ss(_)}function en(_){return Xr(_)&&Ni(_)}function qz(_){return _===!0||_===!1||Xr(_)&&bi(_)==he}var Vs=uG||Yx,Kz=tR?ra(tR):n7;function Zz(_){return Xr(_)&&_.nodeType===1&&!wh(_)}function Qz(_){if(_==null)return!0;if(Ni(_)&&(Et(_)||typeof _=="string"||typeof _.splice=="function"||Vs(_)||mc(_)||ql(_)))return!_.length;var E=oi(_);if(E==we||E==tt)return!_.size;if(Sh(_))return!hx(_).length;for(var T in _)if(cr.call(_,T))return!1;return!0}function Jz(_,E){return _h(_,E)}function eH(_,E,T){T=typeof T=="function"?T:r;var k=T?T(_,E):r;return k===r?_h(_,E,r,T):!!k}function Nx(_){if(!Xr(_))return!1;var E=bi(_);return E==ye||E==Oe||typeof _.message=="string"&&typeof _.name=="string"&&!wh(_)}function tH(_){return typeof _=="number"&&bR(_)}function ss(_){if(!Ur(_))return!1;var E=bi(_);return E==Ae||E==_e||E==de||E==vt}function $I(_){return typeof _=="number"&&_==Ct(_)}function G0(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=ee}function Ur(_){var E=typeof _;return _!=null&&(E=="object"||E=="function")}function Xr(_){return _!=null&&typeof _=="object"}var VI=rR?ra(rR):a7;function rH(_,E){return _===E||fx(_,E,Ox(E))}function nH(_,E,T){return T=typeof T=="function"?T:r,fx(_,E,Ox(E),T)}function iH(_){return GI(_)&&_!=+_}function aH(_){if(V7(_))throw new St(a);return DR(_)}function oH(_){return _===null}function sH(_){return _==null}function GI(_){return typeof _=="number"||Xr(_)&&bi(_)==$e}function wh(_){if(!Xr(_)||bi(_)!=ke)return!1;var E=g0(_);if(E===null)return!0;var T=cr.call(E,"constructor")&&E.constructor;return typeof T=="function"&&T instanceof T&&h0.call(T)==nG}var Ux=nR?ra(nR):o7;function lH(_){return $I(_)&&_>=-ee&&_<=ee}var WI=iR?ra(iR):s7;function W0(_){return typeof _=="string"||!Et(_)&&Xr(_)&&bi(_)==ot}function ia(_){return typeof _=="symbol"||Xr(_)&&bi(_)==dt}var mc=aR?ra(aR):l7;function uH(_){return _===r}function cH(_){return Xr(_)&&oi(_)==rr}function fH(_){return Xr(_)&&bi(_)==qt}var hH=D0(dx),dH=D0(function(_,E){return _<=E});function zI(_){if(!_)return[];if(Ni(_))return W0(_)?Wa(_):Bi(_);if(fh&&_[fh])return zV(_[fh]());var E=oi(_),T=E==we?ex:E==tt?u0:yc;return T(_)}function ls(_){if(!_)return _===0?_:0;if(_=Oa(_),_===Y||_===-Y){var E=_<0?-1:1;return E*J}return _===_?_:0}function Ct(_){var E=ls(_),T=E%1;return E===E?T?E-T:E:0}function HI(_){return _?zl(Ct(_),0,M):0}function Oa(_){if(typeof _=="number")return _;if(ia(_))return X;if(Ur(_)){var E=typeof _.valueOf=="function"?_.valueOf():_;_=Ur(E)?E+"":E}if(typeof _!="string")return _===0?_:+_;_=fR(_);var T=F_.test(_);return T||D_.test(_)?OV(_.slice(2),T?2:8):I_.test(_)?X:+_}function XI(_){return Eo(_,Ui(_))}function pH(_){return _?zl(Ct(_),-ee,ee):_===0?_:0}function sr(_){return _==null?"":na(_)}var vH=pc(function(_,E){if(Sh(E)||Ni(E)){Eo(E,Fn(E),_);return}for(var T in E)cr.call(E,T)&&gh(_,T,E[T])}),YI=pc(function(_,E){Eo(E,Ui(E),_)}),z0=pc(function(_,E,T,k){Eo(E,Ui(E),_,k)}),gH=pc(function(_,E,T,k){Eo(E,Fn(E),_,k)}),mH=as(ox);function yH(_,E){var T=dc(_);return E==null?T:CR(T,E)}var _H=kt(function(_,E){_=mr(_);var T=-1,k=E.length,N=k>2?E[2]:r;for(N&&Si(E[0],E[1],N)&&(k=1);++T<k;)for(var q=E[T],Q=Ui(q),ne=-1,ce=Q.length;++ne<ce;){var Ce=Q[ne],Te=_[Ce];(Te===r||Ha(Te,cc[Ce])&&!cr.call(_,Ce))&&(_[Ce]=q[Ce])}return _}),xH=kt(function(_){return _.push(r,fI),ta(qI,r,_)});function bH(_,E){return sR(_,ct(E,3),So)}function SH(_,E){return sR(_,ct(E,3),lx)}function EH(_,E){return _==null?_:sx(_,ct(E,3),Ui)}function wH(_,E){return _==null?_:IR(_,ct(E,3),Ui)}function AH(_,E){return _&&So(_,ct(E,3))}function CH(_,E){return _&&lx(_,ct(E,3))}function TH(_){return _==null?[]:C0(_,Fn(_))}function OH(_){return _==null?[]:C0(_,Ui(_))}function jx(_,E,T){var k=_==null?r:Hl(_,E);return k===r?T:k}function PH(_,E){return _!=null&&pI(_,E,QG)}function $x(_,E){return _!=null&&pI(_,E,JG)}var RH=oI(function(_,E,T){E!=null&&typeof E.toString!="function"&&(E=d0.call(E)),_[E]=T},Gx(ji)),IH=oI(function(_,E,T){E!=null&&typeof E.toString!="function"&&(E=d0.call(E)),cr.call(_,E)?_[E].push(T):_[E]=[T]},ct),FH=kt(yh);function Fn(_){return Ni(_)?wR(_):hx(_)}function Ui(_){return Ni(_)?wR(_,!0):u7(_)}function kH(_,E){var T={};return E=ct(E,3),So(_,function(k,N,q){ns(T,E(k,N,q),k)}),T}function DH(_,E){var T={};return E=ct(E,3),So(_,function(k,N,q){ns(T,N,E(k,N,q))}),T}var MH=pc(function(_,E,T){T0(_,E,T)}),qI=pc(function(_,E,T,k){T0(_,E,T,k)}),LH=as(function(_,E){var T={};if(_==null)return T;var k=!1;E=Fr(E,function(q){return q=js(q,_),k||(k=q.length>1),q}),Eo(_,Cx(_),T),k&&(T=Aa(T,f|h|d,R7));for(var N=E.length;N--;)yx(T,E[N]);return T});function BH(_,E){return KI(_,V0(ct(E)))}var NH=as(function(_,E){return _==null?{}:f7(_,E)});function KI(_,E){if(_==null)return{};var T=Fr(Cx(_),function(k){return[k]});return E=ct(E),$R(_,T,function(k,N){return E(k,N[0])})}function UH(_,E,T){E=js(E,_);var k=-1,N=E.length;for(N||(N=1,_=r);++k<N;){var q=_==null?r:_[wo(E[k])];q===r&&(k=N,q=T),_=ss(q)?q.call(_):q}return _}function jH(_,E,T){return _==null?_:xh(_,E,T)}function $H(_,E,T,k){return k=typeof k=="function"?k:r,_==null?_:xh(_,E,T,k)}var ZI=uI(Fn),QI=uI(Ui);function VH(_,E,T){var k=Et(_),N=k||Vs(_)||mc(_);if(E=ct(E,4),T==null){var q=_&&_.constructor;N?T=k?new q:[]:Ur(_)?T=ss(q)?dc(g0(_)):{}:T={}}return(N?Sa:So)(_,function(Q,ne,ce){return E(T,Q,ne,ce)}),T}function GH(_,E){return _==null?!0:yx(_,E)}function WH(_,E,T){return _==null?_:HR(_,E,bx(T))}function zH(_,E,T,k){return k=typeof k=="function"?k:r,_==null?_:HR(_,E,bx(T),k)}function yc(_){return _==null?[]:J_(_,Fn(_))}function HH(_){return _==null?[]:J_(_,Ui(_))}function XH(_,E,T){return T===r&&(T=E,E=r),T!==r&&(T=Oa(T),T=T===T?T:0),E!==r&&(E=Oa(E),E=E===E?E:0),zl(Oa(_),E,T)}function YH(_,E,T){return E=ls(E),T===r?(T=E,E=0):T=ls(T),_=Oa(_),e7(_,E,T)}function qH(_,E,T){if(T&&typeof T!="boolean"&&Si(_,E,T)&&(E=T=r),T===r&&(typeof E=="boolean"?(T=E,E=r):typeof _=="boolean"&&(T=_,_=r)),_===r&&E===r?(_=0,E=1):(_=ls(_),E===r?(E=_,_=0):E=ls(E)),_>E){var k=_;_=E,E=k}if(T||_%1||E%1){var N=SR();return ai(_+N*(E-_+TV("1e-"+((N+"").length-1))),E)}return vx(_,E)}var KH=vc(function(_,E,T){return E=E.toLowerCase(),_+(T?JI(E):E)});function JI(_){return Vx(sr(_).toLowerCase())}function eF(_){return _=sr(_),_&&_.replace(L_,jV).replace(mV,"")}function ZH(_,E,T){_=sr(_),E=na(E);var k=_.length;T=T===r?k:zl(Ct(T),0,k);var N=T;return T-=E.length,T>=0&&_.slice(T,N)==E}function QH(_){return _=sr(_),_&&ea.test(_)?_.replace(ni,$V):_}function JH(_){return _=sr(_),_&&Hr.test(_)?_.replace(ii,"\\$&"):_}var eX=vc(function(_,E,T){return _+(T?"-":"")+E.toLowerCase()}),tX=vc(function(_,E,T){return _+(T?" ":"")+E.toLowerCase()}),rX=nI("toLowerCase");function nX(_,E,T){_=sr(_),E=Ct(E);var k=E?lc(_):0;if(!E||k>=E)return _;var N=(E-k)/2;return k0(x0(N),T)+_+k0(_0(N),T)}function iX(_,E,T){_=sr(_),E=Ct(E);var k=E?lc(_):0;return E&&k<E?_+k0(E-k,T):_}function aX(_,E,T){_=sr(_),E=Ct(E);var k=E?lc(_):0;return E&&k<E?k0(E-k,T)+_:_}function oX(_,E,T){return T||E==null?E=0:E&&(E=+E),dG(sr(_).replace(Li,""),E||0)}function sX(_,E,T){return(T?Si(_,E,T):E===r)?E=1:E=Ct(E),gx(sr(_),E)}function lX(){var _=arguments,E=sr(_[0]);return _.length<3?E:E.replace(_[1],_[2])}var uX=vc(function(_,E,T){return _+(T?"_":"")+E.toLowerCase()});function cX(_,E,T){return T&&typeof T!="number"&&Si(_,E,T)&&(E=T=r),T=T===r?M:T>>>0,T?(_=sr(_),_&&(typeof E=="string"||E!=null&&!Ux(E))&&(E=na(E),!E&&sc(_))?$s(Wa(_),0,T):_.split(E,T)):[]}var fX=vc(function(_,E,T){return _+(T?" ":"")+Vx(E)});function hX(_,E,T){return _=sr(_),T=T==null?0:zl(Ct(T),0,_.length),E=na(E),_.slice(T,T+E.length)==E}function dX(_,E,T){var k=G.templateSettings;T&&Si(_,E,T)&&(E=r),_=sr(_),E=z0({},E,k,cI);var N=z0({},E.imports,k.imports,cI),q=Fn(N),Q=J_(N,q),ne,ce,Ce=0,Te=E.interpolate||nc,Pe="__p += '",We=tx((E.escape||nc).source+"|"+Te.source+"|"+(Te===yi?R_:nc).source+"|"+(E.evaluate||nc).source+"|$","g"),nt="//# sourceURL="+(cr.call(E,"sourceURL")?(E.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++SV+"]")+`
`;_.replace(We,function(ht,Lt,Gt,aa,Ei,oa){return Gt||(Gt=aa),Pe+=_.slice(Ce,oa).replace(t0,VV),Lt&&(ne=!0,Pe+=`' +
__e(`+Lt+`) +
'`),Ei&&(ce=!0,Pe+=`';
`+Ei+`;
__p += '`),Gt&&(Pe+=`' +
((__t = (`+Gt+`)) == null ? '' : __t) +
'`),Ce=oa+ht.length,ht}),Pe+=`';
`;var ft=cr.call(E,"variable")&&E.variable;if(!ft)Pe=`with (obj) {
`+Pe+`
}
`;else if(O_.test(ft))throw new St(s);Pe=(ce?Pe.replace(Rn,""):Pe).replace(In,"$1").replace(yr,"$1;"),Pe="function("+(ft||"obj")+`) {
`+(ft?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ne?", __e = _.escape":"")+(ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pe+`return __p
}`;var Rt=rF(function(){return nr(q,nt+"return "+Pe).apply(r,Q)});if(Rt.source=Pe,Nx(Rt))throw Rt;return Rt}function pX(_){return sr(_).toLowerCase()}function vX(_){return sr(_).toUpperCase()}function gX(_,E,T){if(_=sr(_),_&&(T||E===r))return fR(_);if(!_||!(E=na(E)))return _;var k=Wa(_),N=Wa(E),q=hR(k,N),Q=dR(k,N)+1;return $s(k,q,Q).join("")}function mX(_,E,T){if(_=sr(_),_&&(T||E===r))return _.slice(0,vR(_)+1);if(!_||!(E=na(E)))return _;var k=Wa(_),N=dR(k,Wa(E))+1;return $s(k,0,N).join("")}function yX(_,E,T){if(_=sr(_),_&&(T||E===r))return _.replace(Li,"");if(!_||!(E=na(E)))return _;var k=Wa(_),N=hR(k,Wa(E));return $s(k,N).join("")}function _X(_,E){var T=P,k=I;if(Ur(E)){var N="separator"in E?E.separator:N;T="length"in E?Ct(E.length):T,k="omission"in E?na(E.omission):k}_=sr(_);var q=_.length;if(sc(_)){var Q=Wa(_);q=Q.length}if(T>=q)return _;var ne=T-lc(k);if(ne<1)return k;var ce=Q?$s(Q,0,ne).join(""):_.slice(0,ne);if(N===r)return ce+k;if(Q&&(ne+=ce.length-ne),Ux(N)){if(_.slice(ne).search(N)){var Ce,Te=ce;for(N.global||(N=tx(N.source,sr(e0.exec(N))+"g")),N.lastIndex=0;Ce=N.exec(Te);)var Pe=Ce.index;ce=ce.slice(0,Pe===r?ne:Pe)}}else if(_.indexOf(na(N),ne)!=ne){var We=ce.lastIndexOf(N);We>-1&&(ce=ce.slice(0,We))}return ce+k}function xX(_){return _=sr(_),_&&gn.test(_)?_.replace(Ji,qV):_}var bX=vc(function(_,E,T){return _+(T?" ":"")+E.toUpperCase()}),Vx=nI("toUpperCase");function tF(_,E,T){return _=sr(_),E=T?r:E,E===r?WV(_)?QV(_):MV(_):_.match(E)||[]}var rF=kt(function(_,E){try{return ta(_,r,E)}catch(T){return Nx(T)?T:new St(T)}}),SX=as(function(_,E){return Sa(E,function(T){T=wo(T),ns(_,T,Lx(_[T],_))}),_});function EX(_){var E=_==null?0:_.length,T=ct();return _=E?Fr(_,function(k){if(typeof k[1]!="function")throw new Ea(o);return[T(k[0]),k[1]]}):[],kt(function(k){for(var N=-1;++N<E;){var q=_[N];if(ta(q[0],this,k))return ta(q[1],this,k)}})}function wX(_){return qG(Aa(_,f))}function Gx(_){return function(){return _}}function AX(_,E){return _==null||_!==_?E:_}var CX=aI(),TX=aI(!0);function ji(_){return _}function Wx(_){return MR(typeof _=="function"?_:Aa(_,f))}function OX(_){return BR(Aa(_,f))}function PX(_,E){return NR(_,Aa(E,f))}var RX=kt(function(_,E){return function(T){return yh(T,_,E)}}),IX=kt(function(_,E){return function(T){return yh(_,T,E)}});function zx(_,E,T){var k=Fn(E),N=C0(E,k);T==null&&!(Ur(E)&&(N.length||!k.length))&&(T=E,E=_,_=this,N=C0(E,Fn(E)));var q=!(Ur(T)&&"chain"in T)||!!T.chain,Q=ss(_);return Sa(N,function(ne){var ce=E[ne];_[ne]=ce,Q&&(_.prototype[ne]=function(){var Ce=this.__chain__;if(q||Ce){var Te=_(this.__wrapped__),Pe=Te.__actions__=Bi(this.__actions__);return Pe.push({func:ce,args:arguments,thisArg:_}),Te.__chain__=Ce,Te}return ce.apply(_,Ms([this.value()],arguments))})}),_}function FX(){return Xn._===this&&(Xn._=iG),this}function Hx(){}function kX(_){return _=Ct(_),kt(function(E){return UR(E,_)})}var DX=Ex(Fr),MX=Ex(oR),LX=Ex(Y_);function nF(_){return Rx(_)?q_(wo(_)):h7(_)}function BX(_){return function(E){return _==null?r:Hl(_,E)}}var NX=sI(),UX=sI(!0);function Xx(){return[]}function Yx(){return!1}function jX(){return{}}function $X(){return""}function VX(){return!0}function GX(_,E){if(_=Ct(_),_<1||_>ee)return[];var T=M,k=ai(_,M);E=ct(E),_-=M;for(var N=Q_(k,E);++T<_;)E(T);return N}function WX(_){return Et(_)?Fr(_,wo):ia(_)?[_]:Bi(EI(sr(_)))}function zX(_){var E=++rG;return sr(_)+E}var HX=F0(function(_,E){return _+E},0),XX=wx("ceil"),YX=F0(function(_,E){return _/E},1),qX=wx("floor");function KX(_){return _&&_.length?A0(_,ji,ux):r}function ZX(_,E){return _&&_.length?A0(_,ct(E,2),ux):r}function QX(_){return uR(_,ji)}function JX(_,E){return uR(_,ct(E,2))}function eY(_){return _&&_.length?A0(_,ji,dx):r}function tY(_,E){return _&&_.length?A0(_,ct(E,2),dx):r}var rY=F0(function(_,E){return _*E},1),nY=wx("round"),iY=F0(function(_,E){return _-E},0);function aY(_){return _&&_.length?Z_(_,ji):0}function oY(_,E){return _&&_.length?Z_(_,ct(E,2)):0}return G.after=Oz,G.ary=DI,G.assign=vH,G.assignIn=YI,G.assignInWith=z0,G.assignWith=gH,G.at=mH,G.before=MI,G.bind=Lx,G.bindAll=SX,G.bindKey=LI,G.castArray=jz,G.chain=II,G.chunk=q7,G.compact=K7,G.concat=Z7,G.cond=EX,G.conforms=wX,G.constant=Gx,G.countBy=az,G.create=yH,G.curry=BI,G.curryRight=NI,G.debounce=UI,G.defaults=_H,G.defaultsDeep=xH,G.defer=Pz,G.delay=Rz,G.difference=Q7,G.differenceBy=J7,G.differenceWith=eW,G.drop=tW,G.dropRight=rW,G.dropRightWhile=nW,G.dropWhile=iW,G.fill=aW,G.filter=sz,G.flatMap=cz,G.flatMapDeep=fz,G.flatMapDepth=hz,G.flatten=TI,G.flattenDeep=oW,G.flattenDepth=sW,G.flip=Iz,G.flow=CX,G.flowRight=TX,G.fromPairs=lW,G.functions=TH,G.functionsIn=OH,G.groupBy=dz,G.initial=cW,G.intersection=fW,G.intersectionBy=hW,G.intersectionWith=dW,G.invert=RH,G.invertBy=IH,G.invokeMap=vz,G.iteratee=Wx,G.keyBy=gz,G.keys=Fn,G.keysIn=Ui,G.map=U0,G.mapKeys=kH,G.mapValues=DH,G.matches=OX,G.matchesProperty=PX,G.memoize=$0,G.merge=MH,G.mergeWith=qI,G.method=RX,G.methodOf=IX,G.mixin=zx,G.negate=V0,G.nthArg=kX,G.omit=LH,G.omitBy=BH,G.once=Fz,G.orderBy=mz,G.over=DX,G.overArgs=kz,G.overEvery=MX,G.overSome=LX,G.partial=Bx,G.partialRight=jI,G.partition=yz,G.pick=NH,G.pickBy=KI,G.property=nF,G.propertyOf=BX,G.pull=mW,G.pullAll=PI,G.pullAllBy=yW,G.pullAllWith=_W,G.pullAt=xW,G.range=NX,G.rangeRight=UX,G.rearg=Dz,G.reject=bz,G.remove=bW,G.rest=Mz,G.reverse=Dx,G.sampleSize=Ez,G.set=jH,G.setWith=$H,G.shuffle=wz,G.slice=SW,G.sortBy=Tz,G.sortedUniq=PW,G.sortedUniqBy=RW,G.split=cX,G.spread=Lz,G.tail=IW,G.take=FW,G.takeRight=kW,G.takeRightWhile=DW,G.takeWhile=MW,G.tap=KW,G.throttle=Bz,G.thru=N0,G.toArray=zI,G.toPairs=ZI,G.toPairsIn=QI,G.toPath=WX,G.toPlainObject=XI,G.transform=VH,G.unary=Nz,G.union=LW,G.unionBy=BW,G.unionWith=NW,G.uniq=UW,G.uniqBy=jW,G.uniqWith=$W,G.unset=GH,G.unzip=Mx,G.unzipWith=RI,G.update=WH,G.updateWith=zH,G.values=yc,G.valuesIn=HH,G.without=VW,G.words=tF,G.wrap=Uz,G.xor=GW,G.xorBy=WW,G.xorWith=zW,G.zip=HW,G.zipObject=XW,G.zipObjectDeep=YW,G.zipWith=qW,G.entries=ZI,G.entriesIn=QI,G.extend=YI,G.extendWith=z0,zx(G,G),G.add=HX,G.attempt=rF,G.camelCase=KH,G.capitalize=JI,G.ceil=XX,G.clamp=XH,G.clone=$z,G.cloneDeep=Gz,G.cloneDeepWith=Wz,G.cloneWith=Vz,G.conformsTo=zz,G.deburr=eF,G.defaultTo=AX,G.divide=YX,G.endsWith=ZH,G.eq=Ha,G.escape=QH,G.escapeRegExp=JH,G.every=oz,G.find=lz,G.findIndex=AI,G.findKey=bH,G.findLast=uz,G.findLastIndex=CI,G.findLastKey=SH,G.floor=qX,G.forEach=FI,G.forEachRight=kI,G.forIn=EH,G.forInRight=wH,G.forOwn=AH,G.forOwnRight=CH,G.get=jx,G.gt=Hz,G.gte=Xz,G.has=PH,G.hasIn=$x,G.head=OI,G.identity=ji,G.includes=pz,G.indexOf=uW,G.inRange=YH,G.invoke=FH,G.isArguments=ql,G.isArray=Et,G.isArrayBuffer=Yz,G.isArrayLike=Ni,G.isArrayLikeObject=en,G.isBoolean=qz,G.isBuffer=Vs,G.isDate=Kz,G.isElement=Zz,G.isEmpty=Qz,G.isEqual=Jz,G.isEqualWith=eH,G.isError=Nx,G.isFinite=tH,G.isFunction=ss,G.isInteger=$I,G.isLength=G0,G.isMap=VI,G.isMatch=rH,G.isMatchWith=nH,G.isNaN=iH,G.isNative=aH,G.isNil=sH,G.isNull=oH,G.isNumber=GI,G.isObject=Ur,G.isObjectLike=Xr,G.isPlainObject=wh,G.isRegExp=Ux,G.isSafeInteger=lH,G.isSet=WI,G.isString=W0,G.isSymbol=ia,G.isTypedArray=mc,G.isUndefined=uH,G.isWeakMap=cH,G.isWeakSet=fH,G.join=pW,G.kebabCase=eX,G.last=Ta,G.lastIndexOf=vW,G.lowerCase=tX,G.lowerFirst=rX,G.lt=hH,G.lte=dH,G.max=KX,G.maxBy=ZX,G.mean=QX,G.meanBy=JX,G.min=eY,G.minBy=tY,G.stubArray=Xx,G.stubFalse=Yx,G.stubObject=jX,G.stubString=$X,G.stubTrue=VX,G.multiply=rY,G.nth=gW,G.noConflict=FX,G.noop=Hx,G.now=j0,G.pad=nX,G.padEnd=iX,G.padStart=aX,G.parseInt=oX,G.random=qH,G.reduce=_z,G.reduceRight=xz,G.repeat=sX,G.replace=lX,G.result=UH,G.round=nY,G.runInContext=se,G.sample=Sz,G.size=Az,G.snakeCase=uX,G.some=Cz,G.sortedIndex=EW,G.sortedIndexBy=wW,G.sortedIndexOf=AW,G.sortedLastIndex=CW,G.sortedLastIndexBy=TW,G.sortedLastIndexOf=OW,G.startCase=fX,G.startsWith=hX,G.subtract=iY,G.sum=aY,G.sumBy=oY,G.template=dX,G.times=GX,G.toFinite=ls,G.toInteger=Ct,G.toLength=HI,G.toLower=pX,G.toNumber=Oa,G.toSafeInteger=pH,G.toString=sr,G.toUpper=vX,G.trim=gX,G.trimEnd=mX,G.trimStart=yX,G.truncate=_X,G.unescape=xX,G.uniqueId=zX,G.upperCase=bX,G.upperFirst=Vx,G.each=FI,G.eachRight=kI,G.first=OI,zx(G,function(){var _={};return So(G,function(E,T){cr.call(G.prototype,T)||(_[T]=E)}),_}(),{chain:!1}),G.VERSION=n,Sa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){G[_].placeholder=G}),Sa(["drop","take"],function(_,E){Nt.prototype[_]=function(T){T=T===r?1:yn(Ct(T),0);var k=this.__filtered__&&!E?new Nt(this):this.clone();return k.__filtered__?k.__takeCount__=ai(T,k.__takeCount__):k.__views__.push({size:ai(T,M),type:_+(k.__dir__<0?"Right":"")}),k},Nt.prototype[_+"Right"]=function(T){return this.reverse()[_](T).reverse()}}),Sa(["filter","map","takeWhile"],function(_,E){var T=E+1,k=T==D||T==U;Nt.prototype[_]=function(N){var q=this.clone();return q.__iteratees__.push({iteratee:ct(N,3),type:T}),q.__filtered__=q.__filtered__||k,q}}),Sa(["head","last"],function(_,E){var T="take"+(E?"Right":"");Nt.prototype[_]=function(){return this[T](1).value()[0]}}),Sa(["initial","tail"],function(_,E){var T="drop"+(E?"":"Right");Nt.prototype[_]=function(){return this.__filtered__?new Nt(this):this[T](1)}}),Nt.prototype.compact=function(){return this.filter(ji)},Nt.prototype.find=function(_){return this.filter(_).head()},Nt.prototype.findLast=function(_){return this.reverse().find(_)},Nt.prototype.invokeMap=kt(function(_,E){return typeof _=="function"?new Nt(this):this.map(function(T){return yh(T,_,E)})}),Nt.prototype.reject=function(_){return this.filter(V0(ct(_)))},Nt.prototype.slice=function(_,E){_=Ct(_);var T=this;return T.__filtered__&&(_>0||E<0)?new Nt(T):(_<0?T=T.takeRight(-_):_&&(T=T.drop(_)),E!==r&&(E=Ct(E),T=E<0?T.dropRight(-E):T.take(E-_)),T)},Nt.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Nt.prototype.toArray=function(){return this.take(M)},So(Nt.prototype,function(_,E){var T=/^(?:filter|find|map|reject)|While$/.test(E),k=/^(?:head|last)$/.test(E),N=G[k?"take"+(E=="last"?"Right":""):E],q=k||/^find/.test(E);N&&(G.prototype[E]=function(){var Q=this.__wrapped__,ne=k?[1]:arguments,ce=Q instanceof Nt,Ce=ne[0],Te=ce||Et(Q),Pe=function(Lt){var Gt=N.apply(G,Ms([Lt],ne));return k&&We?Gt[0]:Gt};Te&&T&&typeof Ce=="function"&&Ce.length!=1&&(ce=Te=!1);var We=this.__chain__,nt=!!this.__actions__.length,ft=q&&!We,Rt=ce&&!nt;if(!q&&Te){Q=Rt?Q:new Nt(this);var ht=_.apply(Q,ne);return ht.__actions__.push({func:N0,args:[Pe],thisArg:r}),new wa(ht,We)}return ft&&Rt?_.apply(this,ne):(ht=this.thru(Pe),ft?k?ht.value()[0]:ht.value():ht)})}),Sa(["pop","push","shift","sort","splice","unshift"],function(_){var E=c0[_],T=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",k=/^(?:pop|shift)$/.test(_);G.prototype[_]=function(){var N=arguments;if(k&&!this.__chain__){var q=this.value();return E.apply(Et(q)?q:[],N)}return this[T](function(Q){return E.apply(Et(Q)?Q:[],N)})}}),So(Nt.prototype,function(_,E){var T=G[E];if(T){var k=T.name+"";cr.call(hc,k)||(hc[k]=[]),hc[k].push({name:E,func:T})}}),hc[I0(r,m).name]=[{name:"wrapper",func:r}],Nt.prototype.clone=xG,Nt.prototype.reverse=bG,Nt.prototype.value=SG,G.prototype.at=ZW,G.prototype.chain=QW,G.prototype.commit=JW,G.prototype.next=ez,G.prototype.plant=rz,G.prototype.reverse=nz,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=iz,G.prototype.first=G.prototype.head,fh&&(G.prototype[fh]=tz),G},uc=JV();$l?(($l.exports=uc)._=uc,W_._=uc):Xn._=uc}).call(st)})(em,em.exports);var U5=em.exports;function Yt(t,e,r){return{scriptType:t,scriptFunction:e,...r}}const j5={};function Yme(t){const e={};for(const[r,n]of Object.entries(t))e[r]=j5[n.scriptType]={scriptString:r,...n};return e}const Tt=t=>(typeof t=="string"?Number(t):t)/.5;function lo(t){const e={};return t&&(t.x!==void 0&&(e.left=Tt(t.x)+"px",e.position="absolute",e.transform="translateX(-50%)"),t.y!==void 0&&(e.top=Tt(t.y)+"px",e.position="absolute",e.transform+=" translateY(-50%)"),t.scale!==void 0&&(e.transform+=` scale(${t.scale})`),t.fontSize!==void 0&&(e.fontSize=Tt(t.fontSize)+"px"),t.fontColor!==void 0&&(e.color=t.fontColor),t.width!==void 0&&(e.width=Tt(t.width)+"px"),t.height!==void 0&&(e.height=Tt(t.height)+"px"),t.marginLeft!==void 0&&(e.marginLeft=Tt(t.marginLeft)+"px"),t.marginRight!==void 0&&(e.marginRight=Tt(t.marginRight)+"px"),t.gap!==void 0&&(e.gap=Tt(t.gap)+"px"),t.rowGap!==void 0&&(e.rowGap=Tt(t.rowGap)+"px"),t.columnGap!==void 0&&(e.columnGap=Tt(t.columnGap)+"px"),t.position&&(e.position=t.position)),e}function qme(t){if(!t||U5.isEmpty(t))return[];const e=[];return Object.keys(t).forEach(r=>{const n=t[r];e.push({key:r,type:"image",url:Qt(n,$t.ui)})}),e}class S2{constructor(e,r){qe(this,"text");qe(this,"jump");qe(this,"jumpToScene");qe(this,"showCondition");qe(this,"enableCondition");qe(this,"style");this.text=e,this.jump=r,this.jumpToScene=r.match(/\./)!==null}static parse(e){const r=e.split("->"),n=r.length>1?r[0]:null,i=r.length>1?r[1]:r[0],a=i.split(":"),o=a[0].replace(/\${[^{}]*}/,""),s=new S2(o,a[1]),c=/\$\{(.*?)\}/,l=i.match(c);if(l){const f=l[1].split(","),h={};f.forEach(d=>{const[p,v]=d.split("=");p&&v&&(h[p.trim()]=isNaN(Number(v.trim()))?v.trim():Number(v.trim()))}),s.style=h}if(n!==null){const u=n.match(/\((.*)\)/);u&&(s.showCondition=u[1]);const f=n.match(/\[(.*)\]/);f&&(s.enableCondition=f[1])}return s}}const pw=(t,e)=>{const n=t.content.split("|").map(f=>S2.parse(f)),a=le.getState().userData.optionData.textboxFont===Cu.song?'"思源宋体", serif':'"WebgalUI", serif',{playSeEnter:o,playSeClick:s}=b2();let c=!1,l={current:null};const u=f=>f.filter((h,d)=>sw(h.showCondition)).map((h,d)=>{var g,x;const p=sw(h.enableCondition);let v=p?Kl.Choose_item:Kl.Choose_item_disabled;const y=()=>{if(!(!p&&!c)){if(s(),e==null||e(),l.current&&(clearTimeout(l.current),l.current=null),h.jumpToScene){const b=h.jump.split("./game/scene/")[1];S5(h.jump,b)}else E5(h.jump);H.gameplay.performController.unmountPerform("choose"),c=!1}};let m={fontFamily:a};if(h.style&&(m=lo(h.style)),typeof((g=h.style)==null?void 0:g.countdown)=="number"){v=p?Kl.Choose_item_countdown:Kl.Choose_item_countdown_disabled;let b=h.style.countdown,S=1082,w=1082/(b*1e3/16);const A=()=>{b<=0&&l.current?(clearTimeout(l),l.current=null,c=!p,y()):l.current=setTimeout(()=>{b-=.016,S-=w;let C=document.getElementById("rect");C==null||C.setAttribute("width",Math.max(0,S).toString()),A()},16)};return A(),B.jsxs(ei.Fragment,{children:[B.jsxs("div",{className:v,style:m,onClick:y,children:[B.jsx("img",{src:Hme,alt:h.text,style:{width:"1082px",height:"106px"}}),B.jsx("img",{src:Xme,className:Kl.Choose_item_progress_bar})]}),B.jsx("svg",{width:"0",height:"0",children:B.jsx("defs",{children:B.jsx("clipPath",{id:"myClip",children:B.jsx("rect",{id:"rect",width:"1082",height:"106",rx:"53",ry:"53",style:{fill:"#ffffff"}})})})})]},h.jump+d)}if((x=h.style)!=null&&x.image){v=Kl.Choose_item_image;const b=Qt(h.style.image,$t.ui),S=`img-option-${d}`,w=new Image;return w.src=b,w.onload=function(){let A=document.getElementById(S);w.style.width=w.naturalWidth+"px",w.style.height=w.naturalHeight+"px",w.style.position="absolute",w.alt=h.text,A&&(A.style.width=w.naturalWidth+"px",A.style.height=w.naturalHeight+"px",setTimeout(()=>{A==null||A.prepend(w),A=null},32))},B.jsx("div",{id:S,className:v,style:m,onClick:y,onMouseEnter:p?o:void 0,children:B.jsx("span",{children:h.text})},h.jump+d)}return B.jsx("div",{className:v,style:m,onClick:y,onMouseEnter:p?o:void 0,children:h.text},h.jump+d)});return Mu.render(B.jsx("div",{className:Kl.Choose_Main,children:u(n)}),document.getElementById("chooseContainer")),{performName:"choose",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{Mu.render(B.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},Kme=t=>(Ge.debug(`脚本内注释${t.content}`),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Zme=t=>(t.content!==""&&t.content!=="none"?le.dispatch(lt({key:"enableFilm",value:t.content})):le.dispatch(lt({key:"enableFilm",value:""})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Qme="_Choose_Main_4xkm5_1",Jme="_Choose_item_4xkm5_13",eye="_glabalDialog_container_inner_4xkm5_28",tye="_glabalDialog_container_4xkm5_28",rye="_title_4xkm5_47",nye="_button_4xkm5_59",wc={Choose_Main:Qme,Choose_item:Jme,glabalDialog_container_inner:eye,glabalDialog_container:tye,title:rye,button:nye},iye=t=>{const e=t.content.toString().trim(),r=Bt(t,"title"),n=(r===0?"Please Input":r)??"Please Input",i=Bt(t,"buttonText"),a=(i===0?"OK":i)??"OK",s=le.getState().userData.optionData.textboxFont===Cu.song?'"思源宋体", serif':'"WebgalUI", serif',{playSeEnter:c,playSeClick:l}=b2(),u=B.jsx("div",{style:{fontFamily:s},className:wc.glabalDialog_container,children:B.jsxs("div",{className:wc.glabalDialog_container_inner,children:[B.jsx("div",{className:wc.title,children:n}),B.jsx("input",{id:"user-input",className:wc.Choose_item}),B.jsx("div",{onMouseEnter:c,onClick:()=>{const f=document.getElementById("user-input");f&&le.dispatch(R8({key:e,value:((f==null?void 0:f.value)??"")===""?" ":(f==null?void 0:f.value)??""})),l(),H.gameplay.performController.unmountPerform("userInput"),ln()},className:wc.button,children:a})]})});return Mu.render(B.jsx("div",{className:wc.Choose_Main,children:u}),document.getElementById("chooseContainer")),{performName:"userInput",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{Mu.render(B.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},aye="_FullScreenPerform_main_7er8a_2",oye="_FullScreenPerform_element_7er8a_9",sye="_fullScreen_video_7er8a_17",lye="_fadeIn_7er8a_74",uye="_intro_showSoftly_7er8a_1",cye="_slideIn_7er8a_80",fye="_typingEffect_7er8a_86",hye="_typing_7er8a_86",dye="_blinkCursor_7er8a_1",pye="_pixelateEffect_7er8a_95",vye="_pixelateAnimation_7er8a_1",gye="_revealAnimation_7er8a_101",mye="_videoContainer_7er8a_115",Hs={FullScreenPerform_main:aye,FullScreenPerform_element:oye,fullScreen_video:sye,fadeIn:lye,intro_showSoftly:uye,slideIn:cye,typingEffect:fye,typing:hye,blinkCursor:dye,pixelateEffect:pye,pixelateAnimation:vye,revealAnimation:gye,videoContainer:mye},yye=t=>{const e=`introPerform${Math.random().toString()}`;let r,n="rgba(0, 0, 0, 1)",i="rgba(255, 255, 255, 1)";const a=(S,w=0)=>{switch(S){case"fadeIn":return Hs.fadeIn;case"slideIn":return Hs.slideIn;case"typingEffect":return`${Hs.typingEffect} ${w}`;case"pixelateEffect":return Hs.pixelateEffect;case"revealAnimation":return Hs.revealAnimation;default:return Hs.fadeIn}};let o=Hs.fadeIn,s=1500,c=!1;for(const S of t.args){if(S.key==="backgroundColor"&&(n=S.value||"rgba(0, 0, 0, 1)"),S.key==="fontColor"&&(i=S.value||"rgba(255, 255, 255, 1)"),S.key==="fontSize")switch(S.value){case"small":r="280%";break;case"medium":r="350%";break;case"large":r="420%";break}if(S.key==="animation"&&(o=a(S.value)),S.key==="delayTime"){const w=parseInt(S.value.toString(),10);s=isNaN(w)?s:w}S.key==="hold"&&S.value===!0&&(c=!0)}const l={background:n,color:i,fontSize:r||"350%",width:"100%",height:"100%"},u=t.content.split(/\|/);let h=1e3+s*u.length;const d=c?1e3*60*60*24:1e3+s*u.length;let p=!0,v=setTimeout(()=>{p=!1},h),y=setTimeout(()=>{});const m=()=>{const S=document.getElementById("introContainer");if(h-=s,clearTimeout(v),v=setTimeout(()=>{p=!1},h),S){const w=S.childNodes[0].childNodes[0].childNodes,A=w.length;w.forEach((C,O)=>{const P=Number(C.style.animationDelay.split("ms")[0]);P>0&&(C.style.animationDelay=`${P-s}ms`),O===A-1&&(P===0?(clearTimeout(y),H.gameplay.performController.unmountPerform(e)):(clearTimeout(y),c||(y=setTimeout(()=>{H.gameplay.performController.unmountPerform(e),setTimeout(ln,0)},h))))})}};H.events.userInteractNext.on(m);const g=u.map((S,w)=>B.jsxs("div",{style:{animationDelay:`${s*w}ms`},className:o,children:[S,S===""?" ":""]},"introtext"+w+Math.random().toString())),x=B.jsx("div",{style:l,children:B.jsx("div",{style:{padding:"3em 4em 3em 4em"},children:g})});Mu.render(x,document.getElementById("introContainer"));const b=document.getElementById("introContainer");return b&&(b.style.display="block"),{performName:e,duration:d,isHoldOn:!1,stopFunction:()=>{const S=document.getElementById("introContainer");S&&(S.style.display="none"),H.events.userInteractNext.off(m)},blockingNext:()=>p,blockingAuto:()=>p,stopTimeout:void 0,goNextWhenOver:!0}},_ye=t=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),xye=t=>{let e=t.content;return(t.content==="none"||t.content==="")&&(e=""),le.dispatch(lt({key:"miniAvatar",value:e})),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},bye="modulepreload",Sye=function(t,e){return new URL(t,e).href},NM={},Eye=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=Sye(a,n),a in NM)return;NM[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":bye,o||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),o)return new Promise((u,f)=>{l.addEventListener("load",u),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},$5=new Map;function wye(t){return t?typeof t=="string"?t:t():null}function V5(t){const e=wye(t);return e||(Ge.error("Get name of perform failed. There no name of the perform."),"")}function _Ne(t,e){if(!e||typeof e!="function")throw new Error(`"${t}" is not a callback.`);$5.set(V5(t),e)}function Aye(t,e=[]){const r=$5.get(V5(t));if(!r||!(r instanceof Function))throw Ge.error(`Can't call the perform named "${t}"`),new Error(`"${t}" don't have the pixiPerform callback.`);return r(...e)}Eye(()=>import("./initRegister-f4819d42.js"),[],import.meta.url);const Cye=t=>{const e="PixiPerform"+t.content;H.gameplay.performController.performList.forEach(a=>{if(a.performName===e)return{performName:"none",duration:0,isOver:!1,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}});const r=Aye(t.content),{container:n,tickerKey:i}=r;return{performName:e,duration:0,isHoldOn:!0,stopFunction:()=>{var a,o;Ge.warn("现在正在卸载pixi演出"),n.destroy({texture:!0,baseTexture:!0}),(a=H.gameplay.pixiStage)==null||a.effectsContainer.removeChild(n),(o=H.gameplay.pixiStage)==null||o.removeAnimation(i)},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},Tye=t=>{var a;Ge.debug("play SE");let e="effect-sound";H.gameplay.performController.unmountPerform(e,!0);let r=t.content,n=!1;Bt(t,"id")&&(e=`effect-sound-${((a=Bt(t,"id"))==null?void 0:a.toString())??""}`,H.gameplay.performController.unmountPerform(e,!0),n=!0);let i=!1;return{performName:"none",blockingAuto(){return!1},blockingNext(){return!1},isHoldOn:!1,stopFunction(){},stopTimeout:void 0,duration:1e3*60*60,arrangePerformPromise:new Promise(o=>{setTimeout(()=>{var p;const s=Bt(t,"volume");let c=document.createElement("audio");c.src=r,n&&(c.loop=!0);const l=le.getState().userData,u=l.optionData.volumeMain,f=typeof s=="number"&&s>=0&&s<=100?s:100,h=u*.01*(((p=l.optionData)==null?void 0:p.seVolume)??100)*.01*f*.01;c.volume=h,c.currentTime=0;const d={performName:e,duration:1e3*60*60,isHoldOn:n,skipNextCollect:!0,stopFunction:()=>{c.pause()},blockingNext:()=>!1,blockingAuto:()=>n?!1:!i,stopTimeout:void 0};o(d),c==null||c.play(),c.onended=()=>{for(const v of H.gameplay.performController.performList)v.performName===e&&(i=!0,v.stopFunction(),H.gameplay.performController.unmountPerform(v.performName))}},1)})}},E2=()=>Math.random().toString().substring(0,10);class Oye{constructor(){qe(this,"performList",[]);qe(this,"timeoutList",[])}arrangeNewPerform(e,r,n=!0){if(e.performName!=="none"){if(n){const i={id:e.performName,isHoldOn:e.isHoldOn,script:r};le.dispatch(Wi.addPerform(i))}e.stopTimeout=setTimeout(()=>{e.isHoldOn||(this.unmountPerform(e.performName),e.goNextWhenOver&&this.goNextWhenOver())},e.duration),this.performList.push(e)}}unmountPerform(e,r=!1){if(r)for(let n=0;n<this.performList.length;n++){const i=this.performList[n];i.performName===e&&(i.stopFunction(),clearTimeout(i.stopTimeout),this.performList.splice(n,1),n--,this.erasePerformFromState(e))}else for(let n=0;n<this.performList.length;n++){const i=this.performList[n];!i.isHoldOn&&i.performName===e&&(i.stopFunction(),clearTimeout(i.stopTimeout),this.performList.splice(n,1),n--)}}erasePerformFromState(e){le.dispatch(Wi.removePerformByName(e))}removeAllPerform(){for(const e of this.performList)e.stopFunction();this.performList=[];for(const e of this.timeoutList)clearTimeout(e)}goNextWhenOver(){let e=!1;this.performList.forEach(r=>{r.blockingAuto()&&(e=!0)}),e?setTimeout(this.goNextWhenOver,100):ln()}}const Pye={saveData:[],quickSaveData:null,unlockStorylineList:[],saveVideoData:null,unlockAchieveData:[],isShowUnlock:!1,unlockAchieveAllTotal:0,unlockAchieveListAll:[],isLoadVideo:!1,isUnlockStoryline:!1,allUnlockAchieveList:[],allStorylineData:[]},G5=Ym({name:"saveData",initialState:Gr(Pye),reducers:{setFastSave:(t,e)=>{t.quickSaveData=e.payload},resetFastSave:t=>{t.quickSaveData=null},resetSaves:t=>{t.quickSaveData=null,t.saveData=[]},saveGame:(t,e)=>{t.saveData[e.payload.index]=e.payload.saveData},replaceSaveGame:(t,e)=>{t.saveData=e.payload},setStorylineListFromStorage:(t,e)=>{t.unlockStorylineList=e.payload},addStorylineList:(t,e)=>{t.unlockStorylineList.push(e.payload)},replaceStorylineList:(t,e)=>{t.unlockStorylineList[e.payload.index]={...t.unlockStorylineList[e.payload.index],storyLine:e.payload.data.storyLine}},setSaveVideoData:(t,e)=>{t.saveVideoData=e.payload},setUnlockAchieveData:(t,e)=>{t.unlockAchieveData=[...e.payload]},resetStorylineList:t=>{t.unlockStorylineList=[]},resetUnlockAchieveData:t=>{t.unlockAchieveData=[]},addUnlockAchieveData:(t,e)=>{const r=[...t.unlockAchieveData,e.payload];t.unlockAchieveData=r},replaceUnlockAchieveData:(t,e)=>{t.unlockAchieveData[e.payload.index]=e.payload.data},setIsShowUnlock:(t,e)=>{t.isShowUnlock=e.payload},setShowStoryline:(t,e)=>{t.isUnlockStoryline=e.payload},setUnlockAchieveAllTotal:(t,e)=>{t.unlockAchieveAllTotal=e.payload},setUnlockAchieveAll:(t,e)=>{t.unlockAchieveListAll=e.payload},setLoadVideo:(t,e)=>{t.isLoadVideo=e.payload},saveAllUnlockAchieveList:(t,e)=>{t.allUnlockAchieveList=e.payload},saveAllStorylineData:(t,e)=>{t.allStorylineData=e.payload}}}),ur=G5.actions,Rye=G5.reducer;function Iye(t,e){for(let r=t;r<=e;r++){const n=le.getState().saveData.saveData[r];n&&Ko.setItem(`${H.gameKey}-saves${r}`,n).then(()=>{Ge.info(`存档${r}写入本地存储`)})}}async function Wp(t,e){for(let r=t;r<=e;r++){const n=await Ko.getItem(`${H.gameKey}-saves${r}`);le.dispatch(ur.saveGame({index:r,saveData:n})),Ge.info(`存档${r}读取自本地存储`)}}async function Fye(){const t=le.getState().saveData.quickSaveData;await Ko.setItem(`${H.gameKey}-saves-fast`,t),Ge.info("快速存档写入本地存储")}async function W5(){const t=await Ko.getItem(`${H.gameKey}-saves-fast`);le.dispatch(ur.setFastSave(t)),Ge.info("快速存档读取自本地存储")}async function z5(){const t=le.getState().saveData.unlockStorylineList;await Ko.setItem(`${H.gameKey}-storyline`,{data:t}),Ge.info("故事线 >> 写入本地存储")}async function w2(){const t=await Ko.getItem(`${H.gameKey}-storyline`);le.dispatch(ur.setStorylineListFromStorage((t==null?void 0:t.data)??[])),Ge.info("故事线 >> 读取自本地存储")}async function H5(){const t=le.getState().saveData.unlockAchieveData;await Ko.setItem(`${H.gameKey}-unlock-achieve`,{data:t}),Ge.info("解锁成就 >>> 写入本地存储")}async function kye(){const t=await Ko.getItem(`${H.gameKey}-unlock-achieve`);le.dispatch(ur.setUnlockAchieveData((t==null?void 0:t.data)||[])),Ge.info("解锁成就 >>> 读取本地存储")}const tm=async(t,e)=>{const r=await X5(t,!0,e);le.dispatch(ur.saveGame({index:t,saveData:r})),Iye(t,t)};async function X5(t,e=!0,r){const n=le.getState().stage,i=Gr(H.backlogManager.getBacklog());let a="";if(e){const c=document.getElementById("pixiCanvas"),l=document.createElement("canvas"),u=l.getContext("2d");l.width=480,l.height=270,u.drawImage(c,0,0,480,270),a=l.toDataURL("image/webp",.5),l.remove()}if(e&&!r){const c=H.videoManager.videosByKey[H.videoManager.currentPlayingVideo];c.player&&(a=c.poster)}const o=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1});return{nowStageState:Gr(n),backlog:i,index:t,saveName:r||o,saveTime:o,sceneData:{currentSentenceId:H.sceneManager.sceneData.currentSentenceId,sceneStack:Gr(H.sceneManager.sceneData.sceneStack),sceneName:H.sceneManager.sceneData.currentScene.sceneName,sceneUrl:H.sceneManager.sceneData.currentScene.sceneUrl},previewImage:a}}function Dye(){const t=le.getState().stage,e=Gr(H.backlogManager.getBacklog()),r=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),n={nowStageState:Gr(t),backlog:e,saveTime:r,saveName:"",index:-1,previewImage:"",sceneData:{currentSentenceId:H.sceneManager.sceneData.currentSentenceId,sceneStack:Gr(H.sceneManager.sceneData.sceneStack),sceneName:H.sceneManager.sceneData.currentScene.sceneName,sceneUrl:H.sceneManager.sceneData.currentScene.sceneUrl}};return le.dispatch(ur.setSaveVideoData(n)),n}const Mye=t=>{const e=le.getState().userData,r=e.optionData.volumeMain,n=r*.01*e.optionData.vocalVolume*.01,i=r*.01*e.optionData.bgmVolume*.01,a="videoPlay."+E2();let o="",s=!1;const c=Date.now();le.dispatch(Qd(!1));const l={current:()=>{console.log("快进状态尝试跳过视频")}};t.args.forEach(d=>{d.key==="choose"&&(o="choose:"+d.value),d.key==="continueBgm"&&d.value,d.key==="loop"&&(s=d.value===!0)});const u=()=>{let d=Bt(t,"skipOff"),p=!0;return H.gameplay.isFast&&H.gameplay.isSyncingWithOrigine?(p=!1,d&&(p=!0),s&&(p=!1),o!==""&&(p=!0,l.current())):(d||s||o!=="")&&(p=!0),p};H.videoManager.showVideo(t.content);let f=!1;return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:u,blockingAuto:()=>!0,stopTimeout:void 0,arrangePerformPromise:new Promise(d=>{const p=v=>{f=!0,v.stopFunction(),H.gameplay.performController.unmountPerform(v.performName)};setTimeout(()=>{const v=t.content,y=le.getState().saveData.isLoadVideo;H.videoManager.seek(v,.03),H.videoManager.setVolume(v,i),H.videoManager.setLoop(v,s);const m=o?o.slice(7).split("|").map(A=>"game/scene/"+A.split(":")[1]):[];m.length&&qf(m);const g=()=>{if(y){le.dispatch(_t({component:"showExtra",visibility:!0}));return}for(const A of H.gameplay.performController.performList)if(A.performName===a)if(o!==""&&!s){const C=Kd(o,`${c}.txt`,""),O=H.videoManager.getDuration(v);H.videoManager.seek(v,(O||0)-.03),H.videoManager.pauseVideo(v);const P=C.sentenceList[0],I=pw(P,()=>{p(A)});H.gameplay.performController.arrangeNewPerform(I,P)}else p(A),ln()};l.current=g;const x={performName:a,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:(A=!1)=>{const C=document.getElementById("currentVocal");C&&(C.volume=n.toString()),H.videoManager.destroy(v,A)},blockingNext:u,blockingAuto:()=>!f,stopTimeout:void 0,goNextWhenOver:!0};d(x);const b=0,S=document.getElementById("currentVocal");S&&(S.volume=b.toString()),H.videoManager.playVideo(v);const w=le.getState().saveData.saveData||[];if(w!=null&&w.length&&w.forEach(A=>{var C,O;(O=(C=A==null?void 0:A.nowStageState)==null?void 0:C.PerformList)==null||O.forEach(P=>{var I;((I=P==null?void 0:P.script)==null?void 0:I.content)===v&&setTimeout(()=>{le.dispatch(Qd(!0))})})}),o&&s){const C=Kd(o,`${c}.txt`,"").sentenceList[0],O=pw(C,g);H.gameplay.performController.arrangeNewPerform(O,C)}setTimeout(()=>{Dye()},1e3),H.videoManager.onEnded(v,()=>{if(s)H.videoManager.seek(v,.03),H.videoManager.playVideo(v);else{const A=le.getState().stage.showValueList;if(A!=null&&A.length){const C=le.getState().stage.showValueName,O=A.filter(P=>P.showValueName!==C);le.dispatch(kae(O))}g()}})},100)})}},Lye=t=>{var o;le.getState().stage.currentDialogKey;const e=t.content,r=zi(e),n=(((o=Bt(t,"target"))==null?void 0:o.toString())??"default_id").toString(),i=`${n}-${e}-${r}`;let a;return setTimeout(()=>{var c,l;(c=H.gameplay.pixiStage)==null||c.stopPresetAnimationOnTarget(n);const s=Jg(e,n,r);s&&(Ge.debug(`动画${e}作用在${n}`,r),(l=H.gameplay.pixiStage)==null||l.registerAnimation(s,i,n))},0),a=()=>{setTimeout(()=>{var s;le.getState().stage.currentDialogKey,(s=H.gameplay.pixiStage)==null||s.removeAnimationWithSetEffects(i)},0)},{performName:i,duration:r,isHoldOn:!1,stopFunction:a,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Bye(t,e){const r=H.gameplay.pixiStage.getStageObjByKey(t);function n(){r&&(r.pixiContainer.alpha=0,r.pixiContainer.blur=0)}function i(){r&&(r.pixiContainer.alpha=1,r.pixiContainer.blur=5)}function a(o){if(r){const s=r.pixiContainer,c=H.gameplay.pixiStage.frameDuration,l=e/c*o,u=1/l,f=5/l;s.alpha<1&&(s.alpha+=u),s.blur<5&&(s.blur+=f)}}return{setStartState:n,setEndState:i,tickerFunc:a}}const Nye=[{name:"universalSoftIn",animationGenerateFunc:G6},{name:"universalSoftOff",animationGenerateFunc:W6},{name:"testblur",animationGenerateFunc:Bye}],Uye=t=>{var s,c,l;le.getState().stage.currentDialogKey;const e=t.content,r=Bt(t,"duration")??0,n=((s=Bt(t,"target"))==null?void 0:s.toString())??"0",i=`${n}-${e}-${r}`,a=jye(e);let o=()=>{};if(a){Ge.debug(`动画${e}作用在${n}`,r);const u=a(n,r);(c=H.gameplay.pixiStage)==null||c.stopPresetAnimationOnTarget(n),(l=H.gameplay.pixiStage)==null||l.registerAnimation(u,i,n),o=()=>{var f;le.getState().stage.currentDialogKey,(f=H.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(i)}}return{performName:i,duration:r,isHoldOn:!1,stopFunction:o,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function jye(t){const e=Nye.find(r=>r.name===t);return Ge.debug("装载动画",e),e?e.animationGenerateFunc:null}const $ye=t=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Vye=t=>{var l;le.getState().stage.currentDialogKey;const e=(Math.random()*10).toString(16),r=t.content;let n;try{n=JSON.parse(r)}catch{n=[]}const i={name:e,effects:n};H.animationManager.addAnimation(i);const a=zi(e),o=((l=Bt(t,"target"))==null?void 0:l.toString())??"0",s=`${o}-${e}-${a}`;let c=()=>{};return setTimeout(()=>{var f,h;(f=H.gameplay.pixiStage)==null||f.stopPresetAnimationOnTarget(o);const u=Jg(e,o,a);u&&(Ge.debug(`动画${e}作用在${o}`,a),(h=H.gameplay.pixiStage)==null||h.registerAnimation(u,s,o))},0),c=()=>{setTimeout(()=>{var u;le.getState().stage.currentDialogKey,(u=H.gameplay.pixiStage)==null||u.removeAnimationWithSetEffects(s)},0)},{performName:s,duration:a,isHoldOn:!1,stopFunction:c,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Gye(t){return t.content==="hide"?le.dispatch(lt({key:"isDisableTextbox",value:!0})):le.dispatch(lt({key:"isDisableTextbox",value:!1})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const Wye=t=>{var u;le.getState().stage.currentDialogKey;const e=(Math.random()*10).toString(16),r=t.content;let n;const i=Bt(t,"duration"),a=((u=Bt(t,"target"))==null?void 0:u.toString())??"0";try{const f=JSON.parse(r);n=Yd(a,f,i)}catch{n=[]}const o={name:e,effects:n};H.animationManager.addAnimation(o);const s=Hye(e),c=`${a}-${e}-${s}`;let l=()=>{};return setTimeout(()=>{var h,d;(h=H.gameplay.pixiStage)==null||h.stopPresetAnimationOnTarget(a);const f=zye(e,a,s);f&&(Ge.debug(`动画${e}作用在${a}`,s),(d=H.gameplay.pixiStage)==null||d.registerAnimation(f,c,a))},0),l=()=>{setTimeout(()=>{var f;le.getState().stage.currentDialogKey,(f=H.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(c)},0)},{performName:c,duration:s,isHoldOn:!1,stopFunction:l,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function zye(t,e,r){const n=H.animationManager.getAnimations().find(i=>i.name===t);if(n){const i=n.effects.map(a=>{const o=Gr({...l2,duration:0});return Object.assign(o,a),o.duration=a.duration,o});return Ge.debug("装载自定义动画",i),b5(i,e,r)}return null}function Hye(t){const e=H.animationManager.getAnimations().find(r=>r.name===t);if(e){let r=0;return e.effects.forEach(n=>{r+=n.duration}),r}return 0}const Xye=t=>{let e="0";for(const r of t.args)r.key==="target"&&(e=r.value.toString());return Bt(t,"enter")&&H.animationManager.nextEnterAnimationName.set(e,Bt(t,"enter").toString()),Bt(t,"exit")&&H.animationManager.nextExitAnimationName.set(e+"-off",Bt(t,"exit").toString()),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},Yye=t=>{const e=t.content;let r=t.content,n="default";t.args.forEach(a=>{a.key==="name"&&(r=a.value.toString()),a.key==="series"&&(n=a.value.toString())}),Ge.info(`解锁BGM：${r}，路径：${e}，所属系列：${n}`),le.dispatch(X8({name:r,url:e,series:n}));const i=le.getState().userData;return Ko.setItem(H.gameKey,i).then(()=>{}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},qye=t=>{const e=t.content;let r=t.content,n="default";t.args.forEach(a=>{a.key==="name"&&(r=a.value.toString()),a.key==="series"&&(n=a.value.toString())}),Ge.info(`解锁CG：${r}，路径：${e}，所属系列：${n}`),le.dispatch(H8({name:r,url:e,series:n}));const i=le.getState().userData;return Ko.setItem(H.gameKey,i).then(()=>{}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},A2=(t,e=!0,r=!0)=>{t&&H.backlogManager.makeBacklogEmpty(),r&&H.videoManager.destroyAll(!0),e&&H.sceneManager.resetScene(),H.gameplay.performController.removeAllPerform(),H.gameplay.resetGamePlay();const n=Gr(P8),i=le.getState().stage.GameVar;le.dispatch(ry(n)),e||le.dispatch(lt({key:"GameVar",value:i})),le.dispatch(ur.setLoadVideo(!1))},Kye=t=>{A2(!0);const e=le.dispatch,r=Qt("start.txt",$t.scene);return setTimeout(()=>{H.sceneManager.resetScene()},5),e(ur.resetFastSave()),nU(),ya(r).then(n=>{H.sceneManager.setCurrentScene(n,"start.txt",r)}),e(_t({component:"showTitle",visibility:!0})),B2(le.getState().GUI.titleBgm),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Zye=t=>(E5(t.content),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Qye=t=>(H.gameplay.performController.performList.forEach(e=>{if(e.performName.match(/PixiPerform/)){Ge.warn("pixi 被脚本重新初始化",e.performName);for(let r=0;r<H.gameplay.performController.performList.length;r++){const n=H.gameplay.performController.performList[r];n.performName===e.performName&&(n.stopFunction(),clearTimeout(n.stopTimeout),H.gameplay.performController.performList.splice(r,1),r--)}le.dispatch(Wi.removeAllPixiPerforms())}}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),lr={audioContext:new AudioContext,source:null,analyser:void 0,dataArray:void 0,audioLevelInterval:setInterval(()=>{},0),blinkTimerID:setTimeout(()=>{},0),maxAudioLevel:0},Jye=t=>(lr.maxAudioLevel=Math.max(t,lr.maxAudioLevel),{OPEN_THRESHOLD:lr.maxAudioLevel*.75,HALF_OPEN_THRESHOLD:lr.maxAudioLevel*.5}),e_e=t=>{let e=!1;function r(){var n;e||t.animationEndTime&&Date.now()>t.animationEndTime||(e=!0,(n=H.gameplay.pixiStage)==null||n.performBlinkAnimation(t.key,t.animationItem,"closed",t.pos),lr.blinkTimerID=setTimeout(()=>{var a;(a=H.gameplay.pixiStage)==null||a.performBlinkAnimation(t.key,t.animationItem,"open",t.pos),e=!1;const i=Math.random()*300+3500;lr.blinkTimerID=setTimeout(r,i)},200))}r()},t_e=(t,e,r)=>{t.getByteFrequencyData(e);let n=0;for(let i=0;i<r;i++)n+=e[i];return n/r},UM=t=>{var h,d;const{audioLevel:e,OPEN_THRESHOLD:r,HALF_OPEN_THRESHOLD:n,currentMouthValue:i,lerpSpeed:a,key:o,animationItem:s,pos:c}=t;let l;e>r?l=1:e>n?l=.5:l=0;const u=i+(l-i)*a;(h=H.gameplay.pixiStage)==null||h.setModelMouthY(o,e);let f;u>.75?f="open":u>.25?f="half_open":f="closed",s!==void 0&&((d=H.gameplay.pixiStage)==null||d.performMouthSyncAnimation(o,s,f,c))};class r_e{constructor(e){qe(this,"subject");qe(this,"result");qe(this,"isEnd",!1);this.subject=e}with(e,r){return!this.isEnd&&this.subject===e&&(this.result=r(),this.isEnd=!0),this}endsWith(e,r){return!this.isEnd&&this.subject===e&&(this.result=r(),this.isEnd=!0),this.evaluate()}default(e){return this.isEnd||(this.result=e()),this.evaluate()}evaluate(){return this.result}}function Wy(t){return new r_e(t)}const n_e=t=>{Ge.debug("play vocal");const e="vocal-play",r=Bt(t,"vocal"),n=Bt(t,"volume");let i;i=le.getState().stage;let a="",o="";const s=i.freeFigure,c=i.figureAssociatedAnimation;let l=0,u=0;const f=1;let h=document.getElementById("currentVocal");H.gameplay.performController.unmountPerform("vocal-play",!0),h!==null&&(h.currentTime=0,h.pause());for(const p of t.args)p.value===!0&&Wy(p.key).with("left",()=>{a="left"}).with("right",()=>{a="right"}).endsWith("center",()=>{a="center"}),p.key==="figureId"&&(o=`${p.value.toString()}`);le.dispatch(lt({key:"playVocal",value:r})),le.dispatch(lt({key:"vocal",value:r}));let d=!1;return{arrangePerformPromise:new Promise(p=>{setTimeout(()=>{let v=document.getElementById("currentVocal");if(typeof n=="number"&&n>=0&&n<=100?le.dispatch(lt({key:"vocalVolume",value:n})):le.dispatch(lt({key:"vocalVolume",value:100})),v!==null){v.currentTime=0;const y={performName:e,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:()=>{clearInterval(lr.audioLevelInterval),v.pause(),o=o||`fig-${a}`;const g=c.find(x=>x.targetId===o);UM({audioLevel:0,OPEN_THRESHOLD:1,HALF_OPEN_THRESHOLD:1,currentMouthValue:u,lerpSpeed:f,key:o,animationItem:g,pos:a}),clearTimeout(lr.blinkTimerID)},blockingNext:()=>!1,blockingAuto:()=>!d,skipNextCollect:!0,stopTimeout:void 0};H.gameplay.performController.arrangeNewPerform(y,t,!1),o=o||`fig-${a}`;const m=c.find(g=>g.targetId===o);if(m){const g=s.find(S=>S.key===o);if(g&&(a=g.basePosition),!lr.audioContext){let S;S=new AudioContext,lr.analyser=S.createAnalyser(),lr.analyser.fftSize=256,lr.dataArray=new Uint8Array(lr.analyser.frequencyBinCount)}lr.analyser||(lr.analyser=lr.audioContext.createAnalyser(),lr.analyser.fftSize=256),l=lr.analyser.frequencyBinCount,lr.dataArray=new Uint8Array(l);let x=document.getElementById("currentVocal");lr.source||(lr.source=lr.audioContext.createMediaElementSource(x),lr.source.connect(lr.analyser)),lr.analyser.connect(lr.audioContext.destination),lr.audioLevelInterval=setInterval(()=>{const S=t_e(lr.analyser,lr.dataArray,l),{OPEN_THRESHOLD:w,HALF_OPEN_THRESHOLD:A}=Jye(S);UM({audioLevel:S,OPEN_THRESHOLD:w,HALF_OPEN_THRESHOLD:A,currentMouthValue:u,lerpSpeed:f,key:o,animationItem:m,pos:a})},50);let b;b=Date.now()+1e4,e_e({key:o,animationItem:m,pos:a,animationEndTime:b}),setTimeout(()=>{clearTimeout(lr.blinkTimerID)},1e4)}v==null||v.play(),v.onended=()=>{for(const g of H.gameplay.performController.performList)g.performName===e&&(d=!0,g.stopFunction(),H.gameplay.performController.unmountPerform(g.performName))}}},1)})}};function Y5(t){switch(t){case As.slow:return 80;case As.normal:return 35;case As.fast:return 3}}function i_e(t){switch(t){case As.slow:return 800;case As.normal:return 350;case As.fast:return 200}}const a_e=t=>{const e=le.getState().stage,r=le.getState().userData,n=le.dispatch;let i=Math.random().toString(),a=t.content;const o=Bt(t,"concat"),s=Bt(t,"notend"),c=Bt(t,"speaker"),l=Bt(t,"clear"),u=Bt(t,"vocal");o?(i=e.currentDialogKey,a=e.showText+a,n(lt({key:"currentConcatDialogPrev",value:e.showText}))):n(lt({key:"currentConcatDialogPrev",value:""})),n(lt({key:"showText",value:a})),n(lt({key:"vocal",value:""})),r.optionData.voiceInterruption===$T.no&&u===null||(n(lt({key:"playVocal",value:""})),H.gameplay.performController.unmountPerform("vocal-play",!0)),n(lt({key:"currentDialogKey",value:i}));const h=Y5(r.optionData.textSpeed)*t.content.length;for(const y of t.args)if(y.key==="fontSize")switch(y.value){case"default":n(lt({key:"showTextSize",value:-1}));break;case"small":n(lt({key:"showTextSize",value:ml.small}));break;case"medium":n(lt({key:"showTextSize",value:ml.medium}));break;case"large":n(lt({key:"showTextSize",value:ml.large}));break}let d=e.showName;c!==null&&(d=c),l&&(d=""),n(lt({key:"showName",value:d})),u&&n_e(t);const p=E2();let v=750-r.optionData.textSpeed*250;return s&&(v=0),{performName:p,duration:h+v,isHoldOn:!1,stopFunction:()=>{H.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:s}},o_e=t=>{const e=le.getState().stage,r=le.getState().userData,n=le.dispatch,i={stageGameVar:e.GameVar,globalGameVar:r.globalGameVar};n(lt({key:"showText",value:JSON.stringify(i)})),n(lt({key:"showName",value:"展示变量"})),Ge.debug("展示变量：",i),setTimeout(()=>{H.events.textSettle.emit()},0);const a=E2(),o=750-r.optionData.textSpeed*250;return{performName:a,duration:o,isHoldOn:!1,stopFunction:()=>{H.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},s_e=t=>{const{content:e}=t,r=e.split(",");for(const n of r){const i=n.split("->");if(i.length>=2){const a=i[0],o=i[1];le.dispatch(Wi.replaceUIlable([a,o]))}}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},l_e=t=>(console.log("解锁故事线 >>>>>>>> start : ",{sentence:t}),(async()=>{var s,c;await w2(),t!=null&&t.content;const r={};if(t.args.forEach(l=>{var u;switch(l.key){case"name":r.name=((u=l.value)==null?void 0:u.toString())??"";break;case"x":r.x=l.value&&Number(l.value)||0;break;case"y":r.y=l.value&&Number(l.value)||0;break;case"hideName":r.isHideName=l.value.toString()==="true";break}}),!r.name)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const n=le.getState().saveData,i=(s=n.unlockStorylineList)==null?void 0:s.findIndex(l=>l.storyLine.name===r.name);let a;i!==-1&&(a=n.unlockStorylineList[i]);const o={name:r.name||"",thumbnailUrl:r.thumbnailUrl||"",x:r.x||0,y:r.y||0,isHideName:r.isHideName||!1,isUnlock:((c=a==null?void 0:a.storyLine)==null?void 0:c.isUnlock)||n.isUnlockStoryline||!1};i===-1?le.dispatch(ur.addStorylineList({storyLine:o,videoData:le.getState().saveData.saveVideoData})):le.dispatch(ur.replaceStorylineList({index:i,data:{storyLine:o,videoData:le.getState().saveData.saveVideoData}})),z5()})(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),u_e=t=>{var l;console.log("解锁成就 >>>>>>>> start : ",{sentence:t});let e=(t==null?void 0:t.content)||"";const r={};if(r.url=e,t.args.forEach(u=>{var f,h;switch(u.key){case"unlockname":r.unlockname=((f=u.value)==null?void 0:f.toString())??"";break;case"x":r.x=u.value&&Number(u.value)||0;break;case"y":r.y=u.value&&Number(u.value)||0;break;case"condition":r.condition=((h=u.value)==null?void 0:h.toString())??"";break}}),!r.unlockname||!r.url)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const n=le.getState().saveData;if(!n.isShowUnlock)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const i=(l=n.unlockAchieveData)==null?void 0:l.findIndex(u=>u.unlockname===r.unlockname&&u.url===r.url);let a;i!==-1&&(a=n.unlockAchieveData[i]);const o=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),s={unlockname:r.unlockname||"",url:r.url||"",x:r.x||0,y:r.y||0,condition:r.condition||"",saveTime:o,isShowUnlock:(a==null?void 0:a.isShowUnlock)||n.isShowUnlock||!1},c=n.allUnlockAchieveList.map(u=>(u.unlockname===r.unlockname&&r.url&&r.url.includes(u.url)&&(u=s),u));return le.dispatch(ur.saveAllUnlockAchieveList(c)),i===-1?le.dispatch(ur.addUnlockAchieveData(s)):le.dispatch(ur.replaceUnlockAchieveData({index:i,data:s})),H5(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function c_e(t){const e={isShowValueSWitch:!1,showValueName:"",showValueAxisX:0,showValueAxisY:0};return t!=null&&t.content&&(le.dispatch(lt({key:"showValueName",value:t.content})),e.showValueName=t.content),t.args.forEach(r=>{r.key==="switchValue"?(le.dispatch(lt({key:"isShowValueSWitch",value:r.value})),e.isShowValueSWitch=!!r.value):r.key==="x"?(le.dispatch(lt({key:"showValueAxisX",value:Number(r.value)})),e.showValueAxisX=Number(r.value)):r.key==="y"&&(le.dispatch(lt({key:"showValueAxisY",value:Number(r.value)})),e.showValueAxisY=Number(r.value))}),le.dispatch(Fae(e)),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const q5=Yme({intro:Yt(It.intro,yye),changeBg:Yt(It.changeBg,Vge),changeFigure:Yt(It.changeFigure,Gge),miniAvatar:Yt(It.miniAvatar,xye,{next:!0}),changeScene:Yt(It.changeScene,Wge),choose:Yt(It.choose,pw),end:Yt(It.end,Kye),bgm:Yt(It.bgm,Dce,{next:!0}),playVideo:Yt(It.video,Mye),setComplexAnimation:Yt(It.setComplexAnimation,Uye),setFilter:Yt(It.setFilter,$ye),pixiInit:Yt(It.pixiInit,Qye,{next:!0}),pixiPerform:Yt(It.pixi,Cye,{next:!0}),label:Yt(It.label,_ye,{next:!0}),jumpLabel:Yt(It.jumpLabel,Zye),setVar:Yt(It.setVar,Bhe,{next:!0}),showVars:Yt(It.showVars,o_e),unlockCg:Yt(It.unlockCg,qye,{next:!0}),unlockBgm:Yt(It.unlockBgm,Yye,{next:!0}),say:Yt(It.say,a_e),filmMode:Yt(It.filmMode,Zme,{next:!0}),callScene:Yt(It.callScene,Ide),setTextbox:Yt(It.setTextbox,Gye),setAnimation:Yt(It.setAnimation,Lye),playEffect:Yt(It.playEffect,Tye,{next:!0}),setTempAnimation:Yt(It.setTempAnimation,Vye),__commment:Yt(It.comment,Kme,{next:!0}),setTransform:Yt(It.setTransform,Wye),setTransition:Yt(It.setTransition,Xye,{next:!0}),getUserInput:Yt(It.getUserInput,iye),applyStyle:Yt(It.applyStyle,s_e,{next:!0}),unlockAchieve:Yt(It.unlockAchieve,u_e,{next:!0}),unlockStoryline:Yt(It.unlockStoryline,l_e,{next:!0}),showValue:Yt(It.showValue,c_e,{next:!0})}),K5=Object.values(q5),f_e=K5.filter(t=>t.next).map(t=>t.scriptType),zy=new kce(Woe,Qt,f_e,K5),Kd=(t,e,r)=>{const n=zy.parse(t,e,r);return Ge.info(`解析场景：${e}，数据为：`,n),n};var yl=(t=>(t.Start="start.txt",t.Achieve="achieve.txt",t.Storyline="storyline.txt",t))(yl||{});const jM={currentSentenceId:0,sceneStack:[],currentScene:{sceneName:"",sceneUrl:"",sentenceList:[],assetsList:[],subSceneList:[]}};class h_e{constructor(){qe(this,"settledScenes",[]);qe(this,"settledAssets",[]);qe(this,"sceneData",Gr(jM));qe(this,"sceneAssetsList",{});qe(this,"sceneAssetsLoadedList",{})}resetScene(){this.sceneData.currentSentenceId=0,this.sceneData.sceneStack=[],this.sceneData.currentScene=Gr(jM.currentScene)}setCurrentScene(e,r,n,i=!1){return new Promise(a=>{this.sceneData.currentScene=Kd(e,r,n);const o=this.sceneData.currentScene.sentenceList;r==="storyline.txt"&&this.getAllStorylineList(o),r==="achieve.txt"&&this.getAllUnlockAchieveList(o),a(this.sceneData.currentScene)})}async getAllStorylineList(e){await w2();const r=new Map,n=new Map;le.getState().saveData.unlockStorylineList.forEach(o=>{const{name:s,isUnlock:c=!1}=o.storyLine||{};r.set(s,s),n.set(s,o.videoData)});const i=e.filter(o=>o.command===It.unlockStoryline).map(o=>{const s={thumbnailUrl:(o==null?void 0:o.content)??"",name:"",x:0,y:0,isUnlock:!1,isHideName:!1},c={storyLine:{},videoData:null};return o.args.forEach(l=>{l.key==="name"?s.name=l.value.toString():l.key==="x"?s.x=Number(l.value):l.key==="y"?s.y=Number(l.value):l.key==="hideName"&&(s.isHideName=l.value.toString()==="true")}),r.get(s.name)&&n.get(s.name)?(s.isUnlock=!0,c.videoData=n.get(s.name)):s.isUnlock=!1,c.storyLine=s,c});le.dispatch(ur.saveAllStorylineData(i));const a=i.filter(o=>o.storyLine.isUnlock);le.dispatch(ur.setStorylineListFromStorage(a)),await z5()}async getAllUnlockAchieveList(e){await kye();const r=new Map,n=new Map;le.getState().saveData.unlockAchieveData.forEach(o=>{o.isShowUnlock&&(r.set(o.unlockname,o.isShowUnlock),n.set(o.unlockname,(o==null?void 0:o.saveTime)??""))});const i=e.filter(o=>o.command===It.unlockAchieve).map(o=>{const s={url:(o==null?void 0:o.content)??"",unlockname:"",condition:"",saveTime:"",x:0,y:0,isShowUnlock:!1};return o.args.forEach(c=>{c.key==="unlockname"?s.unlockname=c.value.toString():c.key==="x"?s.x=Number(c.value):c.key==="y"?s.y=Number(c.value):c.key==="condition"&&(s.condition=c.value.toString())}),r!=null&&r.get(s==null?void 0:s.unlockname)&&(s.isShowUnlock=!0,s.saveTime=n==null?void 0:n.get(s==null?void 0:s.unlockname)),s});le.dispatch(ur.saveAllUnlockAchieveList(i));const a=i.filter(o=>o==null?void 0:o.isShowUnlock);le.dispatch(ur.setUnlockAchieveData(a)),await H5()}compareFilenames(e,r){const n=e.match(/\/?([^/]+)\.\w+$/),i=r.match(/\/?([^/]+)\.\w+$/);return n&&i?n[1]===i[1]:!1}}class d_e{constructor(){qe(this,"nextEnterAnimationName",new Map);qe(this,"nextExitAnimationName",new Map);qe(this,"animations",[])}addAnimation(e){this.animations.push(e)}getAnimations(){return this.animations}}class p_e{constructor(){qe(this,"isAuto",!1);qe(this,"isFast",!1);qe(this,"isSyncingWithOrigine",!1);qe(this,"autoInterval",null);qe(this,"fastInterval",null);qe(this,"autoTimeout",null);qe(this,"pixiStage",null);qe(this,"performController",new Oye)}resetGamePlay(){this.performController.timeoutList=[],this.isAuto=!1,this.isFast=!1;const e=this.autoInterval;e!==null&&clearInterval(e),this.autoInterval=null;const r=this.fastInterval;r!==null&&clearInterval(r),this.fastInterval=null;const n=this.autoTimeout;n!==null&&clearInterval(n),this.autoTimeout=null}}function v_e(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}class g_e{constructor(){qe(this,"textSettle",ov("text-settle"));qe(this,"userInteractNext",ov("__NEXT"));qe(this,"fullscreenDbClick",ov("fullscreen-dbclick"));qe(this,"styleUpdate",ov("style-update"))}}const gb=v_e();function ov(t){return{on:(e,r)=>{gb.on(`${t}-${r??""}`,e)},emit:(e,r)=>{gb.emit(`${t}-${r??""}`,e)},off:(e,r)=>{gb.off(`${t}-${r??""}`,e)}}}var Z5={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(self,function(){return function(){var r={"./node_modules/es6-promise/dist/es6-promise.js":function(o,s,c){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(l,u){o.exports=u()})(this,function(){function l(ge){var Se=typeof ge;return ge!==null&&(Se==="object"||Se==="function")}function u(ge){return typeof ge=="function"}var f=void 0;Array.isArray?f=Array.isArray:f=function(ge){return Object.prototype.toString.call(ge)==="[object Array]"};var h=f,d=0,p=void 0,v=void 0,y=function(Se,Re){F[d]=Se,F[d+1]=Re,d+=2,d===2&&(v?v(D):U())};function m(ge){v=ge}function g(ge){y=ge}var x=typeof window<"u"?window:void 0,b=x||{},S=b.MutationObserver||b.WebKitMutationObserver,w=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",A=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function C(){return function(){return process.nextTick(D)}}function O(){return typeof p<"u"?function(){p(D)}:R()}function P(){var ge=0,Se=new S(D),Re=document.createTextNode("");return Se.observe(Re,{characterData:!0}),function(){Re.data=ge=++ge%2}}function I(){var ge=new MessageChannel;return ge.port1.onmessage=D,function(){return ge.port2.postMessage(0)}}function R(){var ge=setTimeout;return function(){return ge(D,1)}}var F=new Array(1e3);function D(){for(var ge=0;ge<d;ge+=2){var Se=F[ge],Re=F[ge+1];Se(Re),F[ge]=void 0,F[ge+1]=void 0}d=0}function L(){try{var ge=Function("return this")().require("vertx");return p=ge.runOnLoop||ge.runOnContext,O()}catch{return R()}}var U=void 0;w?U=C():S?U=P():A?U=I():x===void 0?U=L():U=R();function Y(ge,Se){var Re=this,He=new this.constructor(X);He[J]===void 0&&gt(He);var je=Re._state;if(je){var rt=arguments[je-1];y(function(){return Xe(je,He,rt,Re._result)})}else we(Re,He,ge,Se);return He}function ee(ge){var Se=this;if(ge&&typeof ge=="object"&&ge.constructor===Se)return ge;var Re=new Se(X);return Oe(Re,ge),Re}var J=Math.random().toString(36).substring(2);function X(){}var M=void 0,V=1,$=2;function j(){return new TypeError("You cannot resolve a promise with itself")}function te(){return new TypeError("A promises callback cannot return that same promise.")}function ie(ge,Se,Re,He){try{ge.call(Se,Re,He)}catch(je){return je}}function de(ge,Se,Re){y(function(He){var je=!1,rt=ie(Re,Se,function(er){je||(je=!0,Se!==er?Oe(He,er):Ae(He,er))},function(er){je||(je=!0,_e(He,er))},"Settle: "+(He._label||" unknown promise"));!je&&rt&&(je=!0,_e(He,rt))},ge)}function he(ge,Se){Se._state===V?Ae(ge,Se._result):Se._state===$?_e(ge,Se._result):we(Se,void 0,function(Re){return Oe(ge,Re)},function(Re){return _e(ge,Re)})}function Ee(ge,Se,Re){Se.constructor===ge.constructor&&Re===Y&&Se.constructor.resolve===ee?he(ge,Se):Re===void 0?Ae(ge,Se):u(Re)?de(ge,Se,Re):Ae(ge,Se)}function Oe(ge,Se){if(ge===Se)_e(ge,j());else if(l(Se)){var Re=void 0;try{Re=Se.then}catch(He){_e(ge,He);return}Ee(ge,Se,Re)}else Ae(ge,Se)}function ye(ge){ge._onerror&&ge._onerror(ge._result),$e(ge)}function Ae(ge,Se){ge._state===M&&(ge._result=Se,ge._state=V,ge._subscribers.length!==0&&y($e,ge))}function _e(ge,Se){ge._state===M&&(ge._state=$,ge._result=Se,y(ye,ge))}function we(ge,Se,Re,He){var je=ge._subscribers,rt=je.length;ge._onerror=null,je[rt]=Se,je[rt+V]=Re,je[rt+$]=He,rt===0&&ge._state&&y($e,ge)}function $e(ge){var Se=ge._subscribers,Re=ge._state;if(Se.length!==0){for(var He=void 0,je=void 0,rt=ge._result,er=0;er<Se.length;er+=3)He=Se[er],je=Se[er+Re],He?Xe(Re,He,je,rt):je(rt);ge._subscribers.length=0}}function Xe(ge,Se,Re,He){var je=u(Re),rt=void 0,er=void 0,wr=!0;if(je){try{rt=Re(He)}catch(Rn){wr=!1,er=Rn}if(Se===rt){_e(Se,te());return}}else rt=He;Se._state!==M||(je&&wr?Oe(Se,rt):wr===!1?_e(Se,er):ge===V?Ae(Se,rt):ge===$&&_e(Se,rt))}function ke(ge,Se){try{Se(function(He){Oe(ge,He)},function(He){_e(ge,He)})}catch(Re){_e(ge,Re)}}var at=0;function vt(){return at++}function gt(ge){ge[J]=at++,ge._state=void 0,ge._result=void 0,ge._subscribers=[]}function tt(){return new Error("Array Methods must be provided an Array")}var ot=function(){function ge(Se,Re){this._instanceConstructor=Se,this.promise=new Se(X),this.promise[J]||gt(this.promise),h(Re)?(this.length=Re.length,this._remaining=Re.length,this._result=new Array(this.length),this.length===0?Ae(this.promise,this._result):(this.length=this.length||0,this._enumerate(Re),this._remaining===0&&Ae(this.promise,this._result))):_e(this.promise,tt())}return ge.prototype._enumerate=function(Re){for(var He=0;this._state===M&&He<Re.length;He++)this._eachEntry(Re[He],He)},ge.prototype._eachEntry=function(Re,He){var je=this._instanceConstructor,rt=je.resolve;if(rt===ee){var er=void 0,wr=void 0,Rn=!1;try{er=Re.then}catch(yr){Rn=!0,wr=yr}if(er===Y&&Re._state!==M)this._settledAt(Re._state,He,Re._result);else if(typeof er!="function")this._remaining--,this._result[He]=Re;else if(je===bt){var In=new je(X);Rn?_e(In,wr):Ee(In,Re,er),this._willSettleAt(In,He)}else this._willSettleAt(new je(function(yr){return yr(Re)}),He)}else this._willSettleAt(rt(Re),He)},ge.prototype._settledAt=function(Re,He,je){var rt=this.promise;rt._state===M&&(this._remaining--,Re===$?_e(rt,je):this._result[He]=je),this._remaining===0&&Ae(rt,this._result)},ge.prototype._willSettleAt=function(Re,He){var je=this;we(Re,void 0,function(rt){return je._settledAt(V,He,rt)},function(rt){return je._settledAt($,He,rt)})},ge}();function dt(ge){return new ot(this,ge).promise}function Xt(ge){var Se=this;return h(ge)?new Se(function(Re,He){for(var je=ge.length,rt=0;rt<je;rt++)Se.resolve(ge[rt]).then(Re,He)}):new Se(function(Re,He){return He(new TypeError("You must pass an array to race."))})}function rr(ge){var Se=this,Re=new Se(X);return _e(Re,ge),Re}function qt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Vt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var bt=function(){function ge(Se){this[J]=vt(),this._result=this._state=void 0,this._subscribers=[],X!==Se&&(typeof Se!="function"&&qt(),this instanceof ge?ke(this,Se):Vt())}return ge.prototype.catch=function(Re){return this.then(null,Re)},ge.prototype.finally=function(Re){var He=this,je=He.constructor;return u(Re)?He.then(function(rt){return je.resolve(Re()).then(function(){return rt})},function(rt){return je.resolve(Re()).then(function(){throw rt})}):He.then(Re,Re)},ge}();bt.prototype.then=Y,bt.all=dt,bt.race=Xt,bt.resolve=ee,bt.reject=rr,bt._setScheduler=m,bt._setAsap=g,bt._asap=y;function or(){var ge=void 0;if(typeof c.g<"u")ge=c.g;else if(typeof self<"u")ge=self;else try{ge=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Se=ge.Promise;if(Se){var Re=null;try{Re=Object.prototype.toString.call(Se.resolve())}catch{}if(Re==="[object Promise]"&&!Se.cast)return}ge.Promise=bt}return bt.polyfill=or,bt.Promise=bt,bt})},"./node_modules/events/events.js":function(o){var s=typeof Reflect=="object"?Reflect:null,c=s&&typeof s.apply=="function"?s.apply:function(R,F,D){return Function.prototype.apply.call(R,F,D)},l;s&&typeof s.ownKeys=="function"?l=s.ownKeys:Object.getOwnPropertySymbols?l=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:l=function(R){return Object.getOwnPropertyNames(R)};function u(I){console&&console.warn&&console.warn(I)}var f=Number.isNaN||function(R){return R!==R};function h(){h.init.call(this)}o.exports=h,o.exports.once=C,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var d=10;function p(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(I){if(typeof I!="number"||I<0||f(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");d=I}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||f(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function v(I){return I._maxListeners===void 0?h.defaultMaxListeners:I._maxListeners}h.prototype.getMaxListeners=function(){return v(this)},h.prototype.emit=function(R){for(var F=[],D=1;D<arguments.length;D++)F.push(arguments[D]);var L=R==="error",U=this._events;if(U!==void 0)L=L&&U.error===void 0;else if(!L)return!1;if(L){var Y;if(F.length>0&&(Y=F[0]),Y instanceof Error)throw Y;var ee=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw ee.context=Y,ee}var J=U[R];if(J===void 0)return!1;if(typeof J=="function")c(J,this,F);else for(var X=J.length,M=S(J,X),D=0;D<X;++D)c(M[D],this,F);return!0};function y(I,R,F,D){var L,U,Y;if(p(F),U=I._events,U===void 0?(U=I._events=Object.create(null),I._eventsCount=0):(U.newListener!==void 0&&(I.emit("newListener",R,F.listener?F.listener:F),U=I._events),Y=U[R]),Y===void 0)Y=U[R]=F,++I._eventsCount;else if(typeof Y=="function"?Y=U[R]=D?[F,Y]:[Y,F]:D?Y.unshift(F):Y.push(F),L=v(I),L>0&&Y.length>L&&!Y.warned){Y.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+Y.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=I,ee.type=R,ee.count=Y.length,u(ee)}return I}h.prototype.addListener=function(R,F){return y(this,R,F,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(R,F){return y(this,R,F,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(I,R,F){var D={fired:!1,wrapFn:void 0,target:I,type:R,listener:F},L=m.bind(D);return L.listener=F,D.wrapFn=L,L}h.prototype.once=function(R,F){return p(F),this.on(R,g(this,R,F)),this},h.prototype.prependOnceListener=function(R,F){return p(F),this.prependListener(R,g(this,R,F)),this},h.prototype.removeListener=function(R,F){var D,L,U,Y,ee;if(p(F),L=this._events,L===void 0)return this;if(D=L[R],D===void 0)return this;if(D===F||D.listener===F)--this._eventsCount===0?this._events=Object.create(null):(delete L[R],L.removeListener&&this.emit("removeListener",R,D.listener||F));else if(typeof D!="function"){for(U=-1,Y=D.length-1;Y>=0;Y--)if(D[Y]===F||D[Y].listener===F){ee=D[Y].listener,U=Y;break}if(U<0)return this;U===0?D.shift():w(D,U),D.length===1&&(L[R]=D[0]),L.removeListener!==void 0&&this.emit("removeListener",R,ee||F)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(R){var F,D,L;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[R]),this;if(arguments.length===0){var U=Object.keys(D),Y;for(L=0;L<U.length;++L)Y=U[L],Y!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(F=D[R],typeof F=="function")this.removeListener(R,F);else if(F!==void 0)for(L=F.length-1;L>=0;L--)this.removeListener(R,F[L]);return this};function x(I,R,F){var D=I._events;if(D===void 0)return[];var L=D[R];return L===void 0?[]:typeof L=="function"?F?[L.listener||L]:[L]:F?A(L):S(L,L.length)}h.prototype.listeners=function(R){return x(this,R,!0)},h.prototype.rawListeners=function(R){return x(this,R,!1)},h.listenerCount=function(I,R){return typeof I.listenerCount=="function"?I.listenerCount(R):b.call(I,R)},h.prototype.listenerCount=b;function b(I){var R=this._events;if(R!==void 0){var F=R[I];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]};function S(I,R){for(var F=new Array(R),D=0;D<R;++D)F[D]=I[D];return F}function w(I,R){for(;R+1<I.length;R++)I[R]=I[R+1];I.pop()}function A(I){for(var R=new Array(I.length),F=0;F<R.length;++F)R[F]=I[F].listener||I[F];return R}function C(I,R){return new Promise(function(F,D){function L(Y){I.removeListener(R,U),D(Y)}function U(){typeof I.removeListener=="function"&&I.removeListener("error",L),F([].slice.call(arguments))}P(I,R,U,{once:!0}),R!=="error"&&O(I,L,{once:!0})})}function O(I,R,F){typeof I.on=="function"&&P(I,"error",R,F)}function P(I,R,F,D){if(typeof I.on=="function")D.once?I.once(R,F):I.on(R,F);else if(typeof I.addEventListener=="function")I.addEventListener(R,function L(U){D.once&&I.removeEventListener(R,L),F(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}},"./node_modules/webworkify-webpack/index.js":function(o,s,c){function l(m){var g={};function x(S){if(g[S])return g[S].exports;var w=g[S]={i:S,l:!1,exports:{}};return m[S].call(w.exports,w,w.exports,x),w.l=!0,w.exports}x.m=m,x.c=g,x.i=function(S){return S},x.d=function(S,w,A){x.o(S,w)||Object.defineProperty(S,w,{configurable:!1,enumerable:!0,get:A})},x.r=function(S){Object.defineProperty(S,"__esModule",{value:!0})},x.n=function(S){var w=S&&S.__esModule?function(){return S.default}:function(){return S};return x.d(w,"a",w),w},x.o=function(S,w){return Object.prototype.hasOwnProperty.call(S,w)},x.p="/",x.oe=function(S){throw console.error(S),S};var b=x(x.s=ENTRY_MODULE);return b.default||b}var u="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+u+").*?\\)";function h(m){return(m+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function d(m){return!isNaN(1*m)}function p(m,g,x){var b={};b[x]=[];var S=g.toString(),w=S.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!w)return b;for(var A=w[1],C=new RegExp("(\\\\n|\\W)"+h(A)+f,"g"),O;O=C.exec(S);)O[3]!=="dll-reference"&&b[x].push(O[3]);for(C=new RegExp("\\("+h(A)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+f,"g");O=C.exec(S);)m[O[2]]||(b[x].push(O[1]),m[O[2]]=c(O[1]).m),b[O[2]]=b[O[2]]||[],b[O[2]].push(O[4]);for(var P=Object.keys(b),I=0;I<P.length;I++)for(var R=0;R<b[P[I]].length;R++)d(b[P[I]][R])&&(b[P[I]][R]=1*b[P[I]][R]);return b}function v(m){var g=Object.keys(m);return g.reduce(function(x,b){return x||m[b].length>0},!1)}function y(m,g){for(var x={main:[g]},b={main:[]},S={main:{}};v(x);)for(var w=Object.keys(x),A=0;A<w.length;A++){var C=w[A],O=x[C],P=O.pop();if(S[C]=S[C]||{},!(S[C][P]||!m[C][P])){S[C][P]=!0,b[C]=b[C]||[],b[C].push(P);for(var I=p(m,m[C][P],C),R=Object.keys(I),F=0;F<R.length;F++)x[R[F]]=x[R[F]]||[],x[R[F]]=x[R[F]].concat(I[R[F]])}}return b}o.exports=function(m,g){g=g||{};var x={main:c.m},b=g.all?{main:Object.keys(x.main)}:y(x,m),S="";Object.keys(b).filter(function(P){return P!=="main"}).forEach(function(P){for(var I=0;b[P][I];)I++;b[P].push(I),x[P][I]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",S=S+"var "+P+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(I))+")({"+b[P].map(function(R){return""+JSON.stringify(R)+": "+x[P][R].toString()}).join(",")+`});
`}),S=S+"new (("+l.toString().replace("ENTRY_MODULE",JSON.stringify(m))+")({"+b.main.map(function(P){return""+JSON.stringify(P)+": "+x.main[P].toString()}).join(",")+"}))(self);";var w=new window.Blob([S],{type:"text/javascript"});if(g.bare)return w;var A=window.URL||window.webkitURL||window.mozURL||window.msURL,C=A.createObjectURL(w),O=new window.Worker(C);return O.objectURL=C,O}},"./src/config.js":function(o,s,c){c.r(s),c.d(s,{defaultConfig:function(){return l},createDefaultConfig:function(){return u}});var l={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function u(){return Object.assign({},l)}},"./src/core/features.js":function(o,s,c){c.r(s);var l=c("./src/io/io-controller.js"),u=c("./src/config.js"),f=function(){function h(){}return h.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},h.supportNetworkStreamIO=function(){var d=new l.default({},(0,u.createDefaultConfig)()),p=d.loaderType;return d.destroy(),p=="fetch-stream-loader"||p=="xhr-moz-chunked-loader"},h.getNetworkLoaderTypeName=function(){var d=new l.default({},(0,u.createDefaultConfig)()),p=d.loaderType;return d.destroy(),p},h.supportNativeMediaPlayback=function(d){h.videoElement==null&&(h.videoElement=window.document.createElement("video"));var p=h.videoElement.canPlayType(d);return p==="probably"||p=="maybe"},h.getFeatureList=function(){var d={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return d.mseFlvPlayback=h.supportMSEH264Playback(),d.networkStreamIO=h.supportNetworkStreamIO(),d.networkLoaderName=h.getNetworkLoaderTypeName(),d.mseLiveFlvPlayback=d.mseFlvPlayback&&d.networkStreamIO,d.nativeMP4H264Playback=h.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),d.nativeWebmVP8Playback=h.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),d.nativeWebmVP9Playback=h.supportNativeMediaPlayback('video/webm; codecs="vp9"'),d},h}();s.default=f},"./src/core/media-info.js":function(o,s,c){c.r(s);var l=function(){function u(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return u.prototype.isComplete=function(){var f=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,h=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&f&&h},u.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},u.prototype.getNearestKeyframe=function(f){if(this.keyframesIndex==null)return null;var h=this.keyframesIndex,d=this._search(h.times,f);return{index:d,milliseconds:h.times[d],fileposition:h.filepositions[d]}},u.prototype._search=function(f,h){var d=0,p=f.length-1,v=0,y=0,m=p;for(h<f[0]&&(d=0,y=m+1);y<=m;)if(v=y+Math.floor((m-y)/2),v===p||h>=f[v]&&h<f[v+1]){d=v;break}else f[v]<h?y=v+1:m=v-1;return d},u}();s.default=l},"./src/core/media-segment-info.js":function(o,s,c){c.r(s),c.d(s,{SampleInfo:function(){return l},MediaSegmentInfo:function(){return u},IDRSampleList:function(){return f},MediaSegmentInfoList:function(){return h}});var l=function(){function d(p,v,y,m,g){this.dts=p,this.pts=v,this.duration=y,this.originalDts=m,this.isSyncPoint=g,this.fileposition=null}return d}(),u=function(){function d(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return d.prototype.appendSyncPoint=function(p){p.isSyncPoint=!0,this.syncPoints.push(p)},d}(),f=function(){function d(){this._list=[]}return d.prototype.clear=function(){this._list=[]},d.prototype.appendArray=function(p){var v=this._list;p.length!==0&&(v.length>0&&p[0].originalDts<v[v.length-1].originalDts&&this.clear(),Array.prototype.push.apply(v,p))},d.prototype.getLastSyncPointBeforeDts=function(p){if(this._list.length==0)return null;var v=this._list,y=0,m=v.length-1,g=0,x=0,b=m;for(p<v[0].dts&&(y=0,x=b+1);x<=b;)if(g=x+Math.floor((b-x)/2),g===m||p>=v[g].dts&&p<v[g+1].dts){y=g;break}else v[g].dts<p?x=g+1:b=g-1;return this._list[y]},d}(),h=function(){function d(p){this._type=p,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(d.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),d.prototype.isEmpty=function(){return this._list.length===0},d.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},d.prototype._searchNearestSegmentBefore=function(p){var v=this._list;if(v.length===0)return-2;var y=v.length-1,m=0,g=0,x=y,b=0;if(p<v[0].originalBeginDts)return b=-1,b;for(;g<=x;)if(m=g+Math.floor((x-g)/2),m===y||p>v[m].lastSample.originalDts&&p<v[m+1].originalBeginDts){b=m;break}else v[m].originalBeginDts<p?g=m+1:x=m-1;return b},d.prototype._searchNearestSegmentAfter=function(p){return this._searchNearestSegmentBefore(p)+1},d.prototype.append=function(p){var v=this._list,y=p,m=this._lastAppendLocation,g=0;m!==-1&&m<v.length&&y.originalBeginDts>=v[m].lastSample.originalDts&&(m===v.length-1||m<v.length-1&&y.originalBeginDts<v[m+1].originalBeginDts)?g=m+1:v.length>0&&(g=this._searchNearestSegmentBefore(y.originalBeginDts)+1),this._lastAppendLocation=g,this._list.splice(g,0,y)},d.prototype.getLastSegmentBefore=function(p){var v=this._searchNearestSegmentBefore(p);return v>=0?this._list[v]:null},d.prototype.getLastSampleBefore=function(p){var v=this.getLastSegmentBefore(p);return v!=null?v.lastSample:null},d.prototype.getLastSyncPointBefore=function(p){for(var v=this._searchNearestSegmentBefore(p),y=this._list[v].syncPoints;y.length===0&&v>0;)v--,y=this._list[v].syncPoints;return y.length>0?y[y.length-1]:null},d}()},"./src/core/mse-controller.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),d=c("./src/core/mse-events.js"),p=c("./src/core/media-segment-info.js"),v=c("./src/utils/exception.js"),y=function(){function m(g){this.TAG="MSEController",this._config=g,this._emitter=new(u()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new p.IDRSampleList}return m.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},m.prototype.on=function(g,x){this._emitter.addListener(g,x)},m.prototype.off=function(g,x){this._emitter.removeListener(g,x)},m.prototype.attachMediaElement=function(g){if(this._mediaSource)throw new v.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var x=this._mediaSource=new window.MediaSource;x.addEventListener("sourceopen",this.e.onSourceOpen),x.addEventListener("sourceended",this.e.onSourceEnded),x.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=g,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),g.src=this._mediaSourceObjectURL},m.prototype.detachMediaElement=function(){if(this._mediaSource){var g=this._mediaSource;for(var x in this._sourceBuffers){var b=this._pendingSegments[x];b.splice(0,b.length),this._pendingSegments[x]=null,this._pendingRemoveRanges[x]=null,this._lastInitSegments[x]=null;var S=this._sourceBuffers[x];if(S){if(g.readyState!=="closed"){try{g.removeSourceBuffer(S)}catch(w){f.default.e(this.TAG,w.message)}S.removeEventListener("error",this.e.onSourceBufferError),S.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[x]=null,this._sourceBuffers[x]=null}}if(g.readyState==="open")try{g.endOfStream()}catch(w){f.default.e(this.TAG,w.message)}g.removeEventListener("sourceopen",this.e.onSourceOpen),g.removeEventListener("sourceended",this.e.onSourceEnded),g.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},m.prototype.appendInitSegment=function(g,x){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(g),this._pendingSegments[g.type].push(g);return}var b=g,S=""+b.container;b.codec&&b.codec.length>0&&(S+=";codecs="+b.codec);var w=!1;if(f.default.v(this.TAG,"Received Initialization Segment, mimeType: "+S),this._lastInitSegments[b.type]=b,S!==this._mimeTypes[b.type]){if(this._mimeTypes[b.type])f.default.v(this.TAG,"Notice: "+b.type+" mimeType changed, origin: "+this._mimeTypes[b.type]+", target: "+S);else{w=!0;try{var A=this._sourceBuffers[b.type]=this._mediaSource.addSourceBuffer(S);A.addEventListener("error",this.e.onSourceBufferError),A.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(C){f.default.e(this.TAG,C.message),this._emitter.emit(d.default.ERROR,{code:C.code,msg:C.message});return}}this._mimeTypes[b.type]=S}x||this._pendingSegments[b.type].push(b),w||this._sourceBuffers[b.type]&&!this._sourceBuffers[b.type].updating&&this._doAppendSegments(),h.default.safari&&b.container==="audio/mpeg"&&b.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=b.mediaDuration/1e3,this._updateMediaSourceDuration())},m.prototype.appendMediaSegment=function(g){var x=g;this._pendingSegments[x.type].push(x),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var b=this._sourceBuffers[x.type];b&&!b.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},m.prototype.seek=function(g){for(var x in this._sourceBuffers)if(this._sourceBuffers[x]){var b=this._sourceBuffers[x];if(this._mediaSource.readyState==="open")try{b.abort()}catch(P){f.default.e(this.TAG,P.message)}this._idrList.clear();var S=this._pendingSegments[x];if(S.splice(0,S.length),this._mediaSource.readyState!=="closed"){for(var w=0;w<b.buffered.length;w++){var A=b.buffered.start(w),C=b.buffered.end(w);this._pendingRemoveRanges[x].push({start:A,end:C})}if(b.updating||this._doRemoveRanges(),h.default.safari){var O=this._lastInitSegments[x];O&&(this._pendingSegments[x].push(O),b.updating||this._doAppendSegments())}}}},m.prototype.endOfStream=function(){var g=this._mediaSource,x=this._sourceBuffers;if(!g||g.readyState!=="open"){g&&g.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}x.video&&x.video.updating||x.audio&&x.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,g.endOfStream())},m.prototype.getNearestKeyframe=function(g){return this._idrList.getLastSyncPointBeforeDts(g)},m.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var g=this._mediaElement.currentTime;for(var x in this._sourceBuffers){var b=this._sourceBuffers[x];if(b){var S=b.buffered;if(S.length>=1&&g-S.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},m.prototype._doCleanupSourceBuffer=function(){var g=this._mediaElement.currentTime;for(var x in this._sourceBuffers){var b=this._sourceBuffers[x];if(b){for(var S=b.buffered,w=!1,A=0;A<S.length;A++){var C=S.start(A),O=S.end(A);if(C<=g&&g<O+3){if(g-C>=this._config.autoCleanupMaxBackwardDuration){w=!0;var P=g-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[x].push({start:C,end:P})}}else O<g&&(w=!0,this._pendingRemoveRanges[x].push({start:C,end:O}))}w&&!b.updating&&this._doRemoveRanges()}}},m.prototype._updateMediaSourceDuration=function(){var g=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(g.video&&g.video.updating||g.audio&&g.audio.updating)){var x=this._mediaSource.duration,b=this._pendingMediaDuration;b>0&&(isNaN(x)||b>x)&&(f.default.v(this.TAG,"Update MediaSource duration from "+x+" to "+b),this._mediaSource.duration=b),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},m.prototype._doRemoveRanges=function(){for(var g in this._pendingRemoveRanges)if(!(!this._sourceBuffers[g]||this._sourceBuffers[g].updating))for(var x=this._sourceBuffers[g],b=this._pendingRemoveRanges[g];b.length&&!x.updating;){var S=b.shift();x.remove(S.start,S.end)}},m.prototype._doAppendSegments=function(){var g=this._pendingSegments;for(var x in g)if(!(!this._sourceBuffers[x]||this._sourceBuffers[x].updating)&&g[x].length>0){var b=g[x].shift();if(b.timestampOffset){var S=this._sourceBuffers[x].timestampOffset,w=b.timestampOffset/1e3,A=Math.abs(S-w);A>.1&&(f.default.v(this.TAG,"Update MPEG audio timestampOffset from "+S+" to "+w),this._sourceBuffers[x].timestampOffset=w),delete b.timestampOffset}if(!b.data||b.data.byteLength===0)continue;try{this._sourceBuffers[x].appendBuffer(b.data),this._isBufferFull=!1,x==="video"&&b.hasOwnProperty("info")&&this._idrList.appendArray(b.info.syncPoints)}catch(C){this._pendingSegments[x].unshift(b),C.code===22?(this._isBufferFull||this._emitter.emit(d.default.BUFFER_FULL),this._isBufferFull=!0):(f.default.e(this.TAG,C.message),this._emitter.emit(d.default.ERROR,{code:C.code,msg:C.message}))}}},m.prototype._onSourceOpen=function(){if(f.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var g=this._pendingSourceBufferInit;g.length;){var x=g.shift();this.appendInitSegment(x,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(d.default.SOURCE_OPEN)},m.prototype._onSourceEnded=function(){f.default.v(this.TAG,"MediaSource onSourceEnded")},m.prototype._onSourceClose=function(){f.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},m.prototype._hasPendingSegments=function(){var g=this._pendingSegments;return g.video.length>0||g.audio.length>0},m.prototype._hasPendingRemoveRanges=function(){var g=this._pendingRemoveRanges;return g.video.length>0||g.audio.length>0},m.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(d.default.UPDATE_END)},m.prototype._onSourceBufferError=function(g){f.default.e(this.TAG,"SourceBuffer Error: "+g)},m}();s.default=y},"./src/core/mse-events.js":function(o,s,c){c.r(s);var l={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};s.default=l},"./src/core/transmuxer.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./node_modules/webworkify-webpack/index.js"),h=c.n(f),d=c("./src/utils/logger.js"),p=c("./src/utils/logging-control.js"),v=c("./src/core/transmuxing-controller.js"),y=c("./src/core/transmuxing-events.js"),m=c("./src/core/media-info.js"),g=function(){function x(b,S){if(this.TAG="Transmuxer",this._emitter=new(u()),S.enableWorker&&typeof Worker<"u")try{this._worker=h()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[b,S]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},p.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:p.default.getConfig()})}catch{d.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new v.default(b,S)}else this._controller=new v.default(b,S);if(this._controller){var w=this._controller;w.on(y.default.IO_ERROR,this._onIOError.bind(this)),w.on(y.default.DEMUX_ERROR,this._onDemuxError.bind(this)),w.on(y.default.INIT_SEGMENT,this._onInitSegment.bind(this)),w.on(y.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),w.on(y.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),w.on(y.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),w.on(y.default.MEDIA_INFO,this._onMediaInfo.bind(this)),w.on(y.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),w.on(y.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),w.on(y.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),w.on(y.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return x.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),p.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(b,S){this._emitter.addListener(b,S)},x.prototype.off=function(b,S){this._emitter.removeListener(b,S)},x.prototype.hasWorker=function(){return this._worker!=null},x.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},x.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},x.prototype.seek=function(b){this._worker?this._worker.postMessage({cmd:"seek",param:b}):this._controller.seek(b)},x.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},x.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},x.prototype._onInitSegment=function(b,S){var w=this;Promise.resolve().then(function(){w._emitter.emit(y.default.INIT_SEGMENT,b,S)})},x.prototype._onMediaSegment=function(b,S){var w=this;Promise.resolve().then(function(){w._emitter.emit(y.default.MEDIA_SEGMENT,b,S)})},x.prototype._onLoadingComplete=function(){var b=this;Promise.resolve().then(function(){b._emitter.emit(y.default.LOADING_COMPLETE)})},x.prototype._onRecoveredEarlyEof=function(){var b=this;Promise.resolve().then(function(){b._emitter.emit(y.default.RECOVERED_EARLY_EOF)})},x.prototype._onMediaInfo=function(b){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.MEDIA_INFO,b)})},x.prototype._onMetaDataArrived=function(b){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.METADATA_ARRIVED,b)})},x.prototype._onScriptDataArrived=function(b){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.SCRIPTDATA_ARRIVED,b)})},x.prototype._onStatisticsInfo=function(b){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.STATISTICS_INFO,b)})},x.prototype._onIOError=function(b,S){var w=this;Promise.resolve().then(function(){w._emitter.emit(y.default.IO_ERROR,b,S)})},x.prototype._onDemuxError=function(b,S){var w=this;Promise.resolve().then(function(){w._emitter.emit(y.default.DEMUX_ERROR,b,S)})},x.prototype._onRecommendSeekpoint=function(b){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.RECOMMEND_SEEKPOINT,b)})},x.prototype._onLoggingConfigChanged=function(b){this._worker&&this._worker.postMessage({cmd:"logging_config",param:b})},x.prototype._onWorkerMessage=function(b){var S=b.data,w=S.data;if(S.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(S.msg){case y.default.INIT_SEGMENT:case y.default.MEDIA_SEGMENT:this._emitter.emit(S.msg,w.type,w.data);break;case y.default.LOADING_COMPLETE:case y.default.RECOVERED_EARLY_EOF:this._emitter.emit(S.msg);break;case y.default.MEDIA_INFO:Object.setPrototypeOf(w,m.default.prototype),this._emitter.emit(S.msg,w);break;case y.default.METADATA_ARRIVED:case y.default.SCRIPTDATA_ARRIVED:case y.default.STATISTICS_INFO:this._emitter.emit(S.msg,w);break;case y.default.IO_ERROR:case y.default.DEMUX_ERROR:this._emitter.emit(S.msg,w.type,w.info);break;case y.default.RECOMMEND_SEEKPOINT:this._emitter.emit(S.msg,w);break;case"logcat_callback":d.default.emitter.emit("log",w.type,w.logcat);break}},x}();s.default=g},"./src/core/transmuxing-controller.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),d=c("./src/core/media-info.js"),p=c("./src/demux/flv-demuxer.js"),v=c("./src/remux/mp4-remuxer.js"),y=c("./src/demux/demux-errors.js"),m=c("./src/io/io-controller.js"),g=c("./src/core/transmuxing-events.js"),x=function(){function b(S,w){this.TAG="TransmuxingController",this._emitter=new(u()),this._config=w,S.segments||(S.segments=[{duration:S.duration,filesize:S.filesize,url:S.url}]),typeof S.cors!="boolean"&&(S.cors=!0),typeof S.withCredentials!="boolean"&&(S.withCredentials=!1),this._mediaDataSource=S,this._currentSegmentIndex=0;var A=0;this._mediaDataSource.segments.forEach(function(C){C.timestampBase=A,A+=C.duration,C.cors=S.cors,C.withCredentials=S.withCredentials,w.referrerPolicy&&(C.referrerPolicy=w.referrerPolicy)}),!isNaN(A)&&this._mediaDataSource.duration!==A&&(this._mediaDataSource.duration=A),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return b.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},b.prototype.on=function(S,w){this._emitter.addListener(S,w)},b.prototype.off=function(S,w){this._emitter.removeListener(S,w)},b.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},b.prototype._loadSegment=function(S,w){this._currentSegmentIndex=S;var A=this._mediaDataSource.segments[S],C=this._ioctl=new m.default(A,this._config,S);C.onError=this._onIOException.bind(this),C.onSeeked=this._onIOSeeked.bind(this),C.onComplete=this._onIOComplete.bind(this),C.onRedirect=this._onIORedirect.bind(this),C.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),w?this._demuxer.bindDataSource(this._ioctl):C.onDataArrival=this._onInitChunkArrival.bind(this),C.open(w)},b.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},b.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},b.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},b.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},b.prototype.seek=function(S){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var w=this._searchSegmentIndexContains(S);if(w===this._currentSegmentIndex){var A=this._mediaInfo.segments[w];if(A==null)this._pendingSeekTime=S;else{var C=A.getNearestKeyframe(S);this._remuxer.seek(C.milliseconds),this._ioctl.seek(C.fileposition),this._pendingResolveSeekPoint=C.milliseconds}}else{var O=this._mediaInfo.segments[w];if(O==null)this._pendingSeekTime=S,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(w);else{var C=O.getNearestKeyframe(S);this._internalAbort(),this._remuxer.seek(S),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[w].timestampBase,this._loadSegment(w,C.fileposition),this._pendingResolveSeekPoint=C.milliseconds,this._reportSegmentMediaInfo(w)}}this._enableStatisticsReporter()}},b.prototype._searchSegmentIndexContains=function(S){for(var w=this._mediaDataSource.segments,A=w.length-1,C=0;C<w.length;C++)if(S<w[C].timestampBase){A=C-1;break}return A},b.prototype._onInitChunkArrival=function(S,w){var A=this,C=null,O=0;if(w>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,O=this._demuxer.parseChunks(S,w);else if((C=p.default.probe(S)).match){this._demuxer=new p.default(C,this._config),this._remuxer||(this._remuxer=new v.default(this._config));var P=this._mediaDataSource;P.duration!=null&&!isNaN(P.duration)&&(this._demuxer.overridedDuration=P.duration),typeof P.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=P.hasAudio),typeof P.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=P.hasVideo),this._demuxer.timestampBase=P.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),O=this._demuxer.parseChunks(S,w)}else C=null,f.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){A._internalAbort()}),this._emitter.emit(g.default.DEMUX_ERROR,y.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),O=0;return O},b.prototype._onMediaInfo=function(S){var w=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},S),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,d.default.prototype));var A=Object.assign({},S);Object.setPrototypeOf(A,d.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=A,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var C=w._pendingSeekTime;w._pendingSeekTime=null,w.seek(C)})},b.prototype._onMetaDataArrived=function(S){this._emitter.emit(g.default.METADATA_ARRIVED,S)},b.prototype._onScriptDataArrived=function(S){this._emitter.emit(g.default.SCRIPTDATA_ARRIVED,S)},b.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},b.prototype._onIOComplete=function(S){var w=S,A=w+1;A<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(A)):(this._remuxer.flushStashedSamples(),this._emitter.emit(g.default.LOADING_COMPLETE),this._disableStatisticsReporter())},b.prototype._onIORedirect=function(S){var w=this._ioctl.extraData;this._mediaDataSource.segments[w].redirectedURL=S},b.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(g.default.RECOVERED_EARLY_EOF)},b.prototype._onIOException=function(S,w){f.default.e(this.TAG,"IOException: type = "+S+", code = "+w.code+", msg = "+w.msg),this._emitter.emit(g.default.IO_ERROR,S,w),this._disableStatisticsReporter()},b.prototype._onDemuxException=function(S,w){f.default.e(this.TAG,"DemuxException: type = "+S+", info = "+w),this._emitter.emit(g.default.DEMUX_ERROR,S,w)},b.prototype._onRemuxerInitSegmentArrival=function(S,w){this._emitter.emit(g.default.INIT_SEGMENT,S,w)},b.prototype._onRemuxerMediaSegmentArrival=function(S,w){if(this._pendingSeekTime==null&&(this._emitter.emit(g.default.MEDIA_SEGMENT,S,w),this._pendingResolveSeekPoint!=null&&S==="video")){var A=w.info.syncPoints,C=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,h.default.safari&&A.length>0&&A[0].originalDts===C&&(C=A[0].pts),this._emitter.emit(g.default.RECOMMEND_SEEKPOINT,C)}},b.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},b.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},b.prototype._reportSegmentMediaInfo=function(S){var w=this._mediaInfo.segments[S],A=Object.assign({},w);A.duration=this._mediaInfo.duration,A.segmentCount=this._mediaInfo.segmentCount,delete A.segments,delete A.keyframesIndex,this._emitter.emit(g.default.MEDIA_INFO,A)},b.prototype._reportStatisticsInfo=function(){var S={};S.url=this._ioctl.currentURL,S.hasRedirect=this._ioctl.hasRedirect,S.hasRedirect&&(S.redirectedURL=this._ioctl.currentRedirectedURL),S.speed=this._ioctl.currentSpeed,S.loaderType=this._ioctl.loaderType,S.currentSegmentIndex=this._currentSegmentIndex,S.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(g.default.STATISTICS_INFO,S)},b}();s.default=x},"./src/core/transmuxing-events.js":function(o,s,c){c.r(s);var l={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};s.default=l},"./src/core/transmuxing-worker.js":function(o,s,c){c.r(s);var l=c("./src/utils/logging-control.js"),u=c("./src/utils/polyfill.js"),f=c("./src/core/transmuxing-controller.js"),h=c("./src/core/transmuxing-events.js"),d=function(p){var v=null,y=R.bind(this);u.default.install(),p.addEventListener("message",function(F){switch(F.data.cmd){case"init":v=new f.default(F.data.param[0],F.data.param[1]),v.on(h.default.IO_ERROR,O.bind(this)),v.on(h.default.DEMUX_ERROR,P.bind(this)),v.on(h.default.INIT_SEGMENT,m.bind(this)),v.on(h.default.MEDIA_SEGMENT,g.bind(this)),v.on(h.default.LOADING_COMPLETE,x.bind(this)),v.on(h.default.RECOVERED_EARLY_EOF,b.bind(this)),v.on(h.default.MEDIA_INFO,S.bind(this)),v.on(h.default.METADATA_ARRIVED,w.bind(this)),v.on(h.default.SCRIPTDATA_ARRIVED,A.bind(this)),v.on(h.default.STATISTICS_INFO,C.bind(this)),v.on(h.default.RECOMMEND_SEEKPOINT,I.bind(this));break;case"destroy":v&&(v.destroy(),v=null),p.postMessage({msg:"destroyed"});break;case"start":v.start();break;case"stop":v.stop();break;case"seek":v.seek(F.data.param);break;case"pause":v.pause();break;case"resume":v.resume();break;case"logging_config":{var D=F.data.param;l.default.applyConfig(D),D.enableCallback===!0?l.default.addLogListener(y):l.default.removeLogListener(y);break}}});function m(F,D){var L={msg:h.default.INIT_SEGMENT,data:{type:F,data:D}};p.postMessage(L,[D.data])}function g(F,D){var L={msg:h.default.MEDIA_SEGMENT,data:{type:F,data:D}};p.postMessage(L,[D.data])}function x(){var F={msg:h.default.LOADING_COMPLETE};p.postMessage(F)}function b(){var F={msg:h.default.RECOVERED_EARLY_EOF};p.postMessage(F)}function S(F){var D={msg:h.default.MEDIA_INFO,data:F};p.postMessage(D)}function w(F){var D={msg:h.default.METADATA_ARRIVED,data:F};p.postMessage(D)}function A(F){var D={msg:h.default.SCRIPTDATA_ARRIVED,data:F};p.postMessage(D)}function C(F){var D={msg:h.default.STATISTICS_INFO,data:F};p.postMessage(D)}function O(F,D){p.postMessage({msg:h.default.IO_ERROR,data:{type:F,info:D}})}function P(F,D){p.postMessage({msg:h.default.DEMUX_ERROR,data:{type:F,info:D}})}function I(F){p.postMessage({msg:h.default.RECOMMEND_SEEKPOINT,data:F})}function R(F,D){p.postMessage({msg:"logcat_callback",data:{type:F,logcat:D}})}};s.default=d},"./src/demux/amf-parser.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/utils/utf8-conv.js"),f=c("./src/utils/exception.js"),h=function(){var p=new ArrayBuffer(2);return new DataView(p).setInt16(0,256,!0),new Int16Array(p)[0]===256}(),d=function(){function p(){}return p.parseScriptData=function(v,y,m){var g={};try{var x=p.parseValue(v,y,m),b=p.parseValue(v,y+x.size,m-x.size);g[x.data]=b.data}catch(S){l.default.e("AMF",S.toString())}return g},p.parseObject=function(v,y,m){if(m<3)throw new f.IllegalStateException("Data not enough when parse ScriptDataObject");var g=p.parseString(v,y,m),x=p.parseValue(v,y+g.size,m-g.size),b=x.objectEnd;return{data:{name:g.data,value:x.data},size:g.size+x.size,objectEnd:b}},p.parseVariable=function(v,y,m){return p.parseObject(v,y,m)},p.parseString=function(v,y,m){if(m<2)throw new f.IllegalStateException("Data not enough when parse String");var g=new DataView(v,y,m),x=g.getUint16(0,!h),b;return x>0?b=(0,u.default)(new Uint8Array(v,y+2,x)):b="",{data:b,size:2+x}},p.parseLongString=function(v,y,m){if(m<4)throw new f.IllegalStateException("Data not enough when parse LongString");var g=new DataView(v,y,m),x=g.getUint32(0,!h),b;return x>0?b=(0,u.default)(new Uint8Array(v,y+4,x)):b="",{data:b,size:4+x}},p.parseDate=function(v,y,m){if(m<10)throw new f.IllegalStateException("Data size invalid when parse Date");var g=new DataView(v,y,m),x=g.getFloat64(0,!h),b=g.getInt16(8,!h);return x+=b*60*1e3,{data:new Date(x),size:8+2}},p.parseValue=function(v,y,m){if(m<1)throw new f.IllegalStateException("Data not enough when parse Value");var g=new DataView(v,y,m),x=1,b=g.getUint8(0),S,w=!1;try{switch(b){case 0:S=g.getFloat64(1,!h),x+=8;break;case 1:{var A=g.getUint8(1);S=!!A,x+=1;break}case 2:{var C=p.parseString(v,y+1,m-1);S=C.data,x+=C.size;break}case 3:{S={};var O=0;for((g.getUint32(m-4,!h)&16777215)===9&&(O=3);x<m-4;){var P=p.parseObject(v,y+x,m-x-O);if(P.objectEnd)break;S[P.data.name]=P.data.value,x+=P.size}if(x<=m-3){var I=g.getUint32(x-1,!h)&16777215;I===9&&(x+=3)}break}case 8:{S={},x+=4;var O=0;for((g.getUint32(m-4,!h)&16777215)===9&&(O=3);x<m-8;){var R=p.parseVariable(v,y+x,m-x-O);if(R.objectEnd)break;S[R.data.name]=R.data.value,x+=R.size}if(x<=m-3){var I=g.getUint32(x-1,!h)&16777215;I===9&&(x+=3)}break}case 9:S=void 0,x=1,w=!0;break;case 10:{S=[];var F=g.getUint32(1,!h);x+=4;for(var D=0;D<F;D++){var L=p.parseValue(v,y+x,m-x);S.push(L.data),x+=L.size}break}case 11:{var U=p.parseDate(v,y+1,m-1);S=U.data,x+=U.size;break}case 12:{var Y=p.parseString(v,y+1,m-1);S=Y.data,x+=Y.size;break}default:x=m,l.default.w("AMF","Unsupported AMF value type "+b)}}catch(ee){l.default.e("AMF",ee.toString())}return{data:S,size:x,objectEnd:w}},p}();s.default=d},"./src/demux/demux-errors.js":function(o,s,c){c.r(s);var l={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};s.default=l},"./src/demux/exp-golomb.js":function(o,s,c){c.r(s);var l=c("./src/utils/exception.js"),u=function(){function f(h){this.TAG="ExpGolomb",this._buffer=h,this._buffer_index=0,this._total_bytes=h.byteLength,this._total_bits=h.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return f.prototype.destroy=function(){this._buffer=null},f.prototype._fillCurrentWord=function(){var h=this._total_bytes-this._buffer_index;if(h<=0)throw new l.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var d=Math.min(4,h),p=new Uint8Array(4);p.set(this._buffer.subarray(this._buffer_index,this._buffer_index+d)),this._current_word=new DataView(p.buffer).getUint32(0,!1),this._buffer_index+=d,this._current_word_bits_left=d*8},f.prototype.readBits=function(h){if(h>32)throw new l.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(h<=this._current_word_bits_left){var d=this._current_word>>>32-h;return this._current_word<<=h,this._current_word_bits_left-=h,d}var p=this._current_word_bits_left?this._current_word:0;p=p>>>32-this._current_word_bits_left;var v=h-this._current_word_bits_left;this._fillCurrentWord();var y=Math.min(v,this._current_word_bits_left),m=this._current_word>>>32-y;return this._current_word<<=y,this._current_word_bits_left-=y,p=p<<y|m,p},f.prototype.readBool=function(){return this.readBits(1)===1},f.prototype.readByte=function(){return this.readBits(8)},f.prototype._skipLeadingZero=function(){var h;for(h=0;h<this._current_word_bits_left;h++)if(this._current_word&2147483648>>>h)return this._current_word<<=h,this._current_word_bits_left-=h,h;return this._fillCurrentWord(),h+this._skipLeadingZero()},f.prototype.readUEG=function(){var h=this._skipLeadingZero();return this.readBits(h+1)-1},f.prototype.readSEG=function(){var h=this.readUEG();return h&1?h+1>>>1:-1*(h>>>1)},f}();s.default=u},"./src/demux/flv-demuxer.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/demux/amf-parser.js"),f=c("./src/demux/sps-parser.js"),h=c("./src/demux/demux-errors.js"),d=c("./src/core/media-info.js"),p=c("./src/utils/exception.js");function v(m,g){return m[g]<<24|m[g+1]<<16|m[g+2]<<8|m[g+3]}var y=function(){function m(g,x){this.TAG="FLVDemuxer",this._config=x,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=g.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=g.hasAudioTrack,this._hasVideo=g.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new d.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var b=new ArrayBuffer(2);return new DataView(b).setInt16(0,256,!0),new Int16Array(b)[0]===256}()}return m.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},m.probe=function(g){var x=new Uint8Array(g),b={match:!1};if(x[0]!==70||x[1]!==76||x[2]!==86||x[3]!==1)return b;var S=(x[4]&4)>>>2!==0,w=(x[4]&1)!==0,A=v(x,5);return A<9?b:{match:!0,consumed:A,dataOffset:A,hasAudioTrack:S,hasVideoTrack:w}},m.prototype.bindDataSource=function(g){return g.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(m.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(g){this._onTrackMetadata=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(g){this._onMediaInfo=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(g){this._onMetaDataArrived=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(g){this._onScriptDataArrived=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onError",{get:function(){return this._onError},set:function(g){this._onError=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(g){this._onDataAvailable=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(g){this._timestampBase=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"overridedDuration",{get:function(){return this._duration},set:function(g){this._durationOverrided=!0,this._duration=g,this._mediaInfo.duration=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"overridedHasAudio",{set:function(g){this._hasAudioFlagOverrided=!0,this._hasAudio=g,this._mediaInfo.hasAudio=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"overridedHasVideo",{set:function(g){this._hasVideoFlagOverrided=!0,this._hasVideo=g,this._mediaInfo.hasVideo=g},enumerable:!1,configurable:!0}),m.prototype.resetMediaInfo=function(){this._mediaInfo=new d.default},m.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},m.prototype.parseChunks=function(g,x){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new p.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var b=0,S=this._littleEndian;if(x===0)if(g.byteLength>13){var w=m.probe(g);b=w.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,x+b!==this._dataOffset&&l.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var A=new DataView(g,b),C=A.getUint32(0,!S);C!==0&&l.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),b+=4}for(;b<g.byteLength;){this._dispatch=!0;var A=new DataView(g,b);if(b+11+4>g.byteLength)break;var O=A.getUint8(0),P=A.getUint32(0,!S)&16777215;if(b+11+P+4>g.byteLength)break;if(O!==8&&O!==9&&O!==18){l.default.w(this.TAG,"Unsupported tag type "+O+", skipped"),b+=11+P+4;continue}var I=A.getUint8(4),R=A.getUint8(5),F=A.getUint8(6),D=A.getUint8(7),L=F|R<<8|I<<16|D<<24,U=A.getUint32(7,!S)&16777215;U!==0&&l.default.w(this.TAG,"Meet tag which has StreamID != 0!");var Y=b+11;switch(O){case 8:this._parseAudioData(g,Y,P,L);break;case 9:this._parseVideoData(g,Y,P,L,x+b);break;case 18:this._parseScriptData(g,Y,P);break}var ee=A.getUint32(11+P,!S);ee!==11+P&&l.default.w(this.TAG,"Invalid PrevTagSize "+ee),b+=11+P+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),b},m.prototype._parseScriptData=function(g,x,b){var S=u.default.parseScriptData(g,x,b);if(S.hasOwnProperty("onMetaData")){if(S.onMetaData==null||typeof S.onMetaData!="object"){l.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&l.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=S;var w=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},w)),typeof w.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=w.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof w.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=w.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof w.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=w.audiodatarate),typeof w.videodatarate=="number"&&(this._mediaInfo.videoDataRate=w.videodatarate),typeof w.width=="number"&&(this._mediaInfo.width=w.width),typeof w.height=="number"&&(this._mediaInfo.height=w.height),typeof w.duration=="number"){if(!this._durationOverrided){var A=Math.floor(w.duration*this._timescale);this._duration=A,this._mediaInfo.duration=A}}else this._mediaInfo.duration=0;if(typeof w.framerate=="number"){var C=Math.floor(w.framerate*1e3);if(C>0){var O=C/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=O,this._referenceFrameRate.fps_num=C,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=O}}if(typeof w.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var P=w.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(P),w.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=w,l.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(S).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},S))},m.prototype._parseKeyframesIndex=function(g){for(var x=[],b=[],S=1;S<g.times.length;S++){var w=this._timestampBase+Math.floor(g.times[S]*1e3);x.push(w),b.push(g.filepositions[S])}return{times:x,filepositions:b}},m.prototype._parseAudioData=function(g,x,b,S){if(b<=1){l.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var w=new DataView(g,x,b),A=w.getUint8(0),C=A>>>4;if(C!==2&&C!==10){this._onError(h.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+C);return}var O=0,P=(A&12)>>>2;if(P>=0&&P<=4)O=this._flvSoundRateTable[P];else{this._onError(h.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+P);return}var I=A&1,R=this._audioMetadata,F=this._audioTrack;if(R||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),R=this._audioMetadata={},R.type="audio",R.id=F.id,R.timescale=this._timescale,R.duration=this._duration,R.audioSampleRate=O,R.channelCount=I===0?1:2),C===10){var D=this._parseAACAudioData(g,x+1,b-1);if(D==null)return;if(D.packetType===0){R.config&&l.default.w(this.TAG,"Found another AudioSpecificConfig!");var L=D.data;R.audioSampleRate=L.samplingRate,R.channelCount=L.channelCount,R.codec=L.codec,R.originalCodec=L.originalCodec,R.config=L.config,R.refSampleDuration=1024/R.audioSampleRate*R.timescale,l.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",R);var U=this._mediaInfo;U.audioCodec=R.originalCodec,U.audioSampleRate=R.audioSampleRate,U.audioChannelCount=R.channelCount,U.hasVideo?U.videoCodec!=null&&(U.mimeType='video/x-flv; codecs="'+U.videoCodec+","+U.audioCodec+'"'):U.mimeType='video/x-flv; codecs="'+U.audioCodec+'"',U.isComplete()&&this._onMediaInfo(U)}else if(D.packetType===1){var Y=this._timestampBase+S,ee={unit:D.data,length:D.data.byteLength,dts:Y,pts:Y};F.samples.push(ee),F.length+=D.data.length}else l.default.e(this.TAG,"Flv: Unsupported AAC data type "+D.packetType)}else if(C===2){if(!R.codec){var L=this._parseMP3AudioData(g,x+1,b-1,!0);if(L==null)return;R.audioSampleRate=L.samplingRate,R.channelCount=L.channelCount,R.codec=L.codec,R.originalCodec=L.originalCodec,R.refSampleDuration=1152/R.audioSampleRate*R.timescale,l.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",R);var U=this._mediaInfo;U.audioCodec=R.codec,U.audioSampleRate=R.audioSampleRate,U.audioChannelCount=R.channelCount,U.audioDataRate=L.bitRate,U.hasVideo?U.videoCodec!=null&&(U.mimeType='video/x-flv; codecs="'+U.videoCodec+","+U.audioCodec+'"'):U.mimeType='video/x-flv; codecs="'+U.audioCodec+'"',U.isComplete()&&this._onMediaInfo(U)}var J=this._parseMP3AudioData(g,x+1,b-1,!1);if(J==null)return;var Y=this._timestampBase+S,X={unit:J,length:J.byteLength,dts:Y,pts:Y};F.samples.push(X),F.length+=J.length}}},m.prototype._parseAACAudioData=function(g,x,b){if(b<=1){l.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var S={},w=new Uint8Array(g,x,b);return S.packetType=w[0],w[0]===0?S.data=this._parseAACAudioSpecificConfig(g,x+1,b-1):S.data=w.subarray(1),S},m.prototype._parseAACAudioSpecificConfig=function(g,x,b){var S=new Uint8Array(g,x,b),w=null,A=0,C=0,O=0,P=null;if(A=C=S[0]>>>3,O=(S[0]&7)<<1|S[1]>>>7,O<0||O>=this._mpegSamplingRates.length){this._onError(h.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var I=this._mpegSamplingRates[O],R=(S[1]&120)>>>3;if(R<0||R>=8){this._onError(h.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}A===5&&(P=(S[1]&7)<<1|S[2]>>>7,(S[2]&124)>>>2);var F=self.navigator.userAgent.toLowerCase();return F.indexOf("firefox")!==-1?O>=6?(A=5,w=new Array(4),P=O-3):(A=2,w=new Array(2),P=O):F.indexOf("android")!==-1?(A=2,w=new Array(2),P=O):(A=5,P=O,w=new Array(4),O>=6?P=O-3:R===1&&(A=2,w=new Array(2),P=O)),w[0]=A<<3,w[0]|=(O&15)>>>1,w[1]=(O&15)<<7,w[1]|=(R&15)<<3,A===5&&(w[1]|=(P&15)>>>1,w[2]=(P&1)<<7,w[2]|=8,w[3]=0),{config:w,samplingRate:I,channelCount:R,codec:"mp4a.40."+A,originalCodec:"mp4a.40."+C}},m.prototype._parseMP3AudioData=function(g,x,b,S){if(b<4){l.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var w=new Uint8Array(g,x,b),A=null;if(S){if(w[0]!==255)return;var C=w[1]>>>3&3,O=(w[1]&6)>>1,P=(w[2]&240)>>>4,I=(w[2]&12)>>>2,R=w[3]>>>6&3,F=R!==3?2:1,D=0,L=0,U="mp3";switch(C){case 0:D=this._mpegAudioV25SampleRateTable[I];break;case 2:D=this._mpegAudioV20SampleRateTable[I];break;case 3:D=this._mpegAudioV10SampleRateTable[I];break}switch(O){case 1:P<this._mpegAudioL3BitRateTable.length&&(L=this._mpegAudioL3BitRateTable[P]);break;case 2:P<this._mpegAudioL2BitRateTable.length&&(L=this._mpegAudioL2BitRateTable[P]);break;case 3:P<this._mpegAudioL1BitRateTable.length&&(L=this._mpegAudioL1BitRateTable[P]);break}A={bitRate:L,samplingRate:D,channelCount:F,codec:U,originalCodec:U}}else A=w;return A},m.prototype._parseVideoData=function(g,x,b,S,w){if(b<=1){l.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var A=new Uint8Array(g,x,b)[0],C=(A&240)>>>4,O=A&15;if(O!==7){this._onError(h.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+O);return}this._parseAVCVideoPacket(g,x+1,b-1,S,w,C)}},m.prototype._parseAVCVideoPacket=function(g,x,b,S,w,A){if(b<4){l.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var C=this._littleEndian,O=new DataView(g,x,b),P=O.getUint8(0),I=O.getUint32(0,!C)&16777215,R=I<<8>>8;if(P===0)this._parseAVCDecoderConfigurationRecord(g,x+4,b-4);else if(P===1)this._parseAVCVideoData(g,x+4,b-4,S,w,A,R);else if(P!==2){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid video packet type "+P);return}},m.prototype._parseAVCDecoderConfigurationRecord=function(g,x,b){if(b<7){l.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var S=this._videoMetadata,w=this._videoTrack,A=this._littleEndian,C=new DataView(g,x,b);S?typeof S.avcc<"u"&&l.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),S=this._videoMetadata={},S.type="video",S.id=w.id,S.timescale=this._timescale,S.duration=this._duration);var O=C.getUint8(0),P=C.getUint8(1);if(C.getUint8(2),C.getUint8(3),O!==1||P===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(C.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(h.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var I=C.getUint8(5)&31;if(I===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else I>1&&l.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+I);for(var R=6,F=0;F<I;F++){var D=C.getUint16(R,!A);if(R+=2,D!==0){var L=new Uint8Array(g,x+R,D);R+=D;var U=f.default.parseSPS(L);if(F===0){S.codecWidth=U.codec_size.width,S.codecHeight=U.codec_size.height,S.presentWidth=U.present_size.width,S.presentHeight=U.present_size.height,S.profile=U.profile_string,S.level=U.level_string,S.bitDepth=U.bit_depth,S.chromaFormat=U.chroma_format,S.sarRatio=U.sar_ratio,S.frameRate=U.frame_rate,(U.frame_rate.fixed===!1||U.frame_rate.fps_num===0||U.frame_rate.fps_den===0)&&(S.frameRate=this._referenceFrameRate);var Y=S.frameRate.fps_den,ee=S.frameRate.fps_num;S.refSampleDuration=S.timescale*(Y/ee);for(var J=L.subarray(1,4),X="avc1.",M=0;M<3;M++){var V=J[M].toString(16);V.length<2&&(V="0"+V),X+=V}S.codec=X;var $=this._mediaInfo;$.width=S.codecWidth,$.height=S.codecHeight,$.fps=S.frameRate.fps,$.profile=S.profile,$.level=S.level,$.refFrames=U.ref_frames,$.chromaFormat=U.chroma_format_string,$.sarNum=S.sarRatio.width,$.sarDen=S.sarRatio.height,$.videoCodec=X,$.hasAudio?$.audioCodec!=null&&($.mimeType='video/x-flv; codecs="'+$.videoCodec+","+$.audioCodec+'"'):$.mimeType='video/x-flv; codecs="'+$.videoCodec+'"',$.isComplete()&&this._onMediaInfo($)}}}var j=C.getUint8(R);if(j===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else j>1&&l.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+j);R++;for(var F=0;F<j;F++){var D=C.getUint16(R,!A);R+=2,D!==0&&(R+=D)}S.avcc=new Uint8Array(b),S.avcc.set(new Uint8Array(g,x,b),0),l.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",S)},m.prototype._parseAVCVideoData=function(g,x,b,S,w,A,C){for(var O=this._littleEndian,P=new DataView(g,x,b),I=[],R=0,F=0,D=this._naluLengthSize,L=this._timestampBase+S,U=A===1;F<b;){if(F+4>=b){l.default.w(this.TAG,"Malformed Nalu near timestamp "+L+", offset = "+F+", dataSize = "+b);break}var Y=P.getUint32(F,!O);if(D===3&&(Y>>>=8),Y>b-D){l.default.w(this.TAG,"Malformed Nalus near timestamp "+L+", NaluSize > DataSize!");return}var ee=P.getUint8(F+D)&31;ee===5&&(U=!0);var J=new Uint8Array(g,x+F,D+Y),X={type:ee,data:J};I.push(X),R+=J.byteLength,F+=D+Y}if(I.length){var M=this._videoTrack,V={units:I,length:R,isKeyframe:U,dts:L,cts:C,pts:L+C};U&&(V.fileposition=w),M.samples.push(V),M.length+=R}},m}();s.default=y},"./src/demux/sps-parser.js":function(o,s,c){c.r(s);var l=c("./src/demux/exp-golomb.js"),u=function(){function f(){}return f._ebsp2rbsp=function(h){for(var d=h,p=d.byteLength,v=new Uint8Array(p),y=0,m=0;m<p;m++)m>=2&&d[m]===3&&d[m-1]===0&&d[m-2]===0||(v[y]=d[m],y++);return new Uint8Array(v.buffer,0,y)},f.parseSPS=function(h){var d=f._ebsp2rbsp(h),p=new l.default(d);p.readByte();var v=p.readByte();p.readByte();var y=p.readByte();p.readUEG();var m=f.getProfileString(v),g=f.getLevelString(y),x=1,b=420,S=[0,420,422,444],w=8;if((v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128||v===138||v===144)&&(x=p.readUEG(),x===3&&p.readBits(1),x<=3&&(b=S[x]),w=p.readUEG()+8,p.readUEG(),p.readBits(1),p.readBool()))for(var A=x!==3?8:12,C=0;C<A;C++)p.readBool()&&(C<6?f._skipScalingList(p,16):f._skipScalingList(p,64));p.readUEG();var O=p.readUEG();if(O===0)p.readUEG();else if(O===1){p.readBits(1),p.readSEG(),p.readSEG();for(var P=p.readUEG(),C=0;C<P;C++)p.readSEG()}var I=p.readUEG();p.readBits(1);var R=p.readUEG(),F=p.readUEG(),D=p.readBits(1);D===0&&p.readBits(1),p.readBits(1);var L=0,U=0,Y=0,ee=0,J=p.readBool();J&&(L=p.readUEG(),U=p.readUEG(),Y=p.readUEG(),ee=p.readUEG());var X=1,M=1,V=0,$=!0,j=0,te=0,ie=p.readBool();if(ie){if(p.readBool()){var de=p.readByte(),he=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ee=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];de>0&&de<16?(X=he[de-1],M=Ee[de-1]):de===255&&(X=p.readByte()<<8|p.readByte(),M=p.readByte()<<8|p.readByte())}if(p.readBool()&&p.readBool(),p.readBool()&&(p.readBits(4),p.readBool()&&p.readBits(24)),p.readBool()&&(p.readUEG(),p.readUEG()),p.readBool()){var Oe=p.readBits(32),ye=p.readBits(32);$=p.readBool(),j=ye,te=Oe*2,V=j/te}}var Ae=1;(X!==1||M!==1)&&(Ae=X/M);var _e=0,we=0;if(x===0)_e=1,we=2-D;else{var $e=x===3?1:2,Xe=x===1?2:1;_e=$e,we=Xe*(2-D)}var ke=(R+1)*16,at=(2-D)*((F+1)*16);ke-=(L+U)*_e,at-=(Y+ee)*we;var vt=Math.ceil(ke*Ae);return p.destroy(),p=null,{profile_string:m,level_string:g,bit_depth:w,ref_frames:I,chroma_format:b,chroma_format_string:f.getChromaFormatString(b),frame_rate:{fixed:$,fps:V,fps_den:te,fps_num:j},sar_ratio:{width:X,height:M},codec_size:{width:ke,height:at},present_size:{width:vt,height:at}}},f._skipScalingList=function(h,d){for(var p=8,v=8,y=0,m=0;m<d;m++)v!==0&&(y=h.readSEG(),v=(p+y+256)%256),p=v===0?p:v},f.getProfileString=function(h){switch(h){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},f.getLevelString=function(h){return(h/10).toFixed(1)},f.getChromaFormatString=function(h){switch(h){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},f}();s.default=u},"./src/flv.js":function(o,s,c){c.r(s);var l=c("./src/utils/polyfill.js"),u=c("./src/core/features.js"),f=c("./src/io/loader.js"),h=c("./src/player/flv-player.js"),d=c("./src/player/native-player.js"),p=c("./src/player/player-events.js"),v=c("./src/player/player-errors.js"),y=c("./src/utils/logging-control.js"),m=c("./src/utils/exception.js");l.default.install();function g(w,A){var C=w;if(C==null||typeof C!="object")throw new m.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!C.hasOwnProperty("type"))throw new m.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(C.type){case"flv":return new h.default(C,A);default:return new d.default(C,A)}}function x(){return u.default.supportMSEH264Playback()}function b(){return u.default.getFeatureList()}var S={};S.createPlayer=g,S.isSupported=x,S.getFeatureList=b,S.BaseLoader=f.BaseLoader,S.LoaderStatus=f.LoaderStatus,S.LoaderErrors=f.LoaderErrors,S.Events=p.default,S.ErrorTypes=v.ErrorTypes,S.ErrorDetails=v.ErrorDetails,S.FlvPlayer=h.default,S.NativePlayer=d.default,S.LoggingControl=y.default,Object.defineProperty(S,"version",{enumerable:!0,get:function(){return"1.6.2"}}),s.default=S},"./src/index.js":function(o,s,c){o.exports=c("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/browser.js"),u=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),h=function(){var p=function(v,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(m[x]=g[x])},p(v,y)};return function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(v,y);function m(){this.constructor=v}v.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),d=function(p){h(v,p);function v(y,m){var g=p.call(this,"fetch-stream-loader")||this;return g.TAG="FetchStreamLoader",g._seekHandler=y,g._config=m,g._needStash=!0,g._requestAbort=!1,g._contentLength=null,g._receivedLength=0,g}return v.isSupported=function(){try{var y=l.default.msedge&&l.default.version.minor>=15048,m=l.default.msedge?y:!0;return self.fetch&&self.ReadableStream&&m}catch{return!1}},v.prototype.destroy=function(){this.isWorking()&&this.abort(),p.prototype.destroy.call(this)},v.prototype.open=function(y,m){var g=this;this._dataSource=y,this._range=m;var x=y.url;this._config.reuseRedirectedURL&&y.redirectedURL!=null&&(x=y.redirectedURL);var b=this._seekHandler.getConfig(x,m),S=new self.Headers;if(typeof b.headers=="object"){var w=b.headers;for(var A in w)w.hasOwnProperty(A)&&S.append(A,w[A])}var C={method:"GET",headers:S,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var A in this._config.headers)S.append(A,this._config.headers[A]);y.cors===!1&&(C.mode="same-origin"),y.withCredentials&&(C.credentials="include"),y.referrerPolicy&&(C.referrerPolicy=y.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,C.signal=this._abortController.signal),this._status=u.LoaderStatus.kConnecting,self.fetch(b.url,C).then(function(O){if(g._requestAbort){g._status=u.LoaderStatus.kIdle,O.body.cancel();return}if(O.ok&&O.status>=200&&O.status<=299){if(O.url!==b.url&&g._onURLRedirect){var P=g._seekHandler.removeURLParameters(O.url);g._onURLRedirect(P)}var I=O.headers.get("Content-Length");return I!=null&&(g._contentLength=parseInt(I),g._contentLength!==0&&g._onContentLengthKnown&&g._onContentLengthKnown(g._contentLength)),g._pump.call(g,O.body.getReader())}else if(g._status=u.LoaderStatus.kError,g._onError)g._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:O.status,msg:O.statusText});else throw new f.RuntimeException("FetchStreamLoader: Http code invalid, "+O.status+" "+O.statusText)}).catch(function(O){if(!(g._abortController&&g._abortController.signal.aborted))if(g._status=u.LoaderStatus.kError,g._onError)g._onError(u.LoaderErrors.EXCEPTION,{code:-1,msg:O.message});else throw O})},v.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==u.LoaderStatus.kBuffering||!l.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},v.prototype._pump=function(y){var m=this;return y.read().then(function(g){if(g.done)if(m._contentLength!==null&&m._receivedLength<m._contentLength){m._status=u.LoaderStatus.kError;var x=u.LoaderErrors.EARLY_EOF,b={code:-1,msg:"Fetch stream meet Early-EOF"};if(m._onError)m._onError(x,b);else throw new f.RuntimeException(b.msg)}else m._status=u.LoaderStatus.kComplete,m._onComplete&&m._onComplete(m._range.from,m._range.from+m._receivedLength-1);else{if(m._abortController&&m._abortController.signal.aborted){m._status=u.LoaderStatus.kComplete;return}else if(m._requestAbort===!0)return m._status=u.LoaderStatus.kComplete,y.cancel();m._status=u.LoaderStatus.kBuffering;var S=g.value.buffer,w=m._range.from+m._receivedLength;m._receivedLength+=S.byteLength,m._onDataArrival&&m._onDataArrival(S,w,m._receivedLength),m._pump(y)}}).catch(function(g){if(m._abortController&&m._abortController.signal.aborted){m._status=u.LoaderStatus.kComplete;return}if(!(g.code===11&&l.default.msedge)){m._status=u.LoaderStatus.kError;var x=0,b=null;if((g.code===19||g.message==="network error")&&(m._contentLength===null||m._contentLength!==null&&m._receivedLength<m._contentLength)?(x=u.LoaderErrors.EARLY_EOF,b={code:g.code,msg:"Fetch stream meet Early-EOF"}):(x=u.LoaderErrors.EXCEPTION,b={code:g.code,msg:g.message}),m._onError)m._onError(x,b);else throw new f.RuntimeException(b.msg)}})},v}(u.BaseLoader);s.default=d},"./src/io/io-controller.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),h=c("./src/io/fetch-stream-loader.js"),d=c("./src/io/xhr-moz-chunked-loader.js"),p=c("./src/io/xhr-range-loader.js"),v=c("./src/io/websocket-loader.js"),y=c("./src/io/range-seek-handler.js"),m=c("./src/io/param-seek-handler.js"),g=c("./src/utils/exception.js"),x=function(){function b(S,w,A){this.TAG="IOController",this._config=w,this._extraData=A,this._stashInitialSize=1024*384,w.stashInitialSize!=null&&w.stashInitialSize>0&&(this._stashInitialSize=w.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,w.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=S,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(S.url),this._refTotalLength=S.filesize?S.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new u.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return b.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},b.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},b.prototype.isPaused=function(){return this._paused},Object.defineProperty(b.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"extraData",{get:function(){return this._extraData},set:function(S){this._extraData=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(S){this._onDataArrival=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(S){this._onSeeked=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onError",{get:function(){return this._onError},set:function(S){this._onError=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onComplete",{get:function(){return this._onComplete},set:function(S){this._onComplete=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(S){this._onRedirect=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(S){this._onRecoveredEarlyEof=S},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentSpeed",{get:function(){return this._loaderClass===p.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),b.prototype._selectSeekHandler=function(){var S=this._config;if(S.seekType==="range")this._seekHandler=new y.default(this._config.rangeLoadZeroStart);else if(S.seekType==="param"){var w=S.seekParamStart||"bstart",A=S.seekParamEnd||"bend";this._seekHandler=new m.default(w,A)}else if(S.seekType==="custom"){if(typeof S.customSeekHandler!="function")throw new g.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new S.customSeekHandler}else throw new g.InvalidArgumentException("Invalid seekType in config: "+S.seekType)},b.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=v.default;else if(h.default.isSupported())this._loaderClass=h.default;else if(d.default.isSupported())this._loaderClass=d.default;else if(p.default.isSupported())this._loaderClass=p.default;else throw new g.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},b.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},b.prototype.open=function(S){this._currentRange={from:0,to:-1},S&&(this._currentRange.from=S),this._speedSampler.reset(),S||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},b.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},b.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},b.prototype.resume=function(){if(this._paused){this._paused=!1;var S=this._resumeFrom;this._resumeFrom=0,this._internalSeek(S,!0)}},b.prototype.seek=function(S){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(S,!0)},b.prototype._internalSeek=function(S,w){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(w),this._loader.destroy(),this._loader=null;var A={from:S,to:-1};this._currentRange={from:A.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,A),this._onSeeked&&this._onSeeked()},b.prototype.updateUrl=function(S){if(!S||typeof S!="string"||S.length===0)throw new g.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=S},b.prototype._expandBuffer=function(S){for(var w=this._stashSize;w+1024*1024*1<S;)w*=2;if(w+=1024*1024*1,w!==this._bufferSize){var A=new ArrayBuffer(w);if(this._stashUsed>0){var C=new Uint8Array(this._stashBuffer,0,this._stashUsed),O=new Uint8Array(A,0,w);O.set(C,0)}this._stashBuffer=A,this._bufferSize=w}},b.prototype._normalizeSpeed=function(S){var w=this._speedNormalizeList,A=w.length-1,C=0,O=0,P=A;if(S<w[0])return w[0];for(;O<=P;){if(C=O+Math.floor((P-O)/2),C===A||S>=w[C]&&S<w[C+1])return w[C];w[C]<S?O=C+1:P=C-1}},b.prototype._adjustStashSize=function(S){var w=0;this._config.isLive||S<512?w=S:S>=512&&S<=1024?w=Math.floor(S*1.5):w=S*2,w>8192&&(w=8192);var A=w*1024+1024*1024*1;this._bufferSize<A&&this._expandBuffer(A),this._stashSize=w*1024},b.prototype._dispatchChunks=function(S,w){return this._currentRange.to=w+S.byteLength-1,this._onDataArrival(S,w)},b.prototype._onURLRedirect=function(S){this._redirectedURL=S,this._onRedirect&&this._onRedirect(S)},b.prototype._onContentLengthKnown=function(S){S&&this._fullRequestFlag&&(this._totalLength=S,this._fullRequestFlag=!1)},b.prototype._onLoaderChunkArrival=function(S,w,A){if(!this._onDataArrival)throw new g.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(S.byteLength);var C=this._speedSampler.lastSecondKBps;if(C!==0){var O=this._normalizeSpeed(C);this._speedNormalized!==O&&(this._speedNormalized=O,this._adjustStashSize(O))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=w),this._stashUsed+S.byteLength<=this._stashSize){var R=new Uint8Array(this._stashBuffer,0,this._stashSize);R.set(new Uint8Array(S),this._stashUsed),this._stashUsed+=S.byteLength}else{var R=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var D=this._stashBuffer.slice(0,this._stashUsed),P=this._dispatchChunks(D,this._stashByteStart);if(P<D.byteLength){if(P>0){var F=new Uint8Array(D,P);R.set(F,0),this._stashUsed=F.byteLength,this._stashByteStart+=P}}else this._stashUsed=0,this._stashByteStart+=P;this._stashUsed+S.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+S.byteLength),R=new Uint8Array(this._stashBuffer,0,this._bufferSize)),R.set(new Uint8Array(S),this._stashUsed),this._stashUsed+=S.byteLength}else{var P=this._dispatchChunks(S,w);if(P<S.byteLength){var I=S.byteLength-P;I>this._bufferSize&&(this._expandBuffer(I),R=new Uint8Array(this._stashBuffer,0,this._bufferSize)),R.set(new Uint8Array(S,P),0),this._stashUsed+=I,this._stashByteStart=w+P}}}else if(this._stashUsed===0){var P=this._dispatchChunks(S,w);if(P<S.byteLength){var I=S.byteLength-P;I>this._bufferSize&&this._expandBuffer(I);var R=new Uint8Array(this._stashBuffer,0,this._bufferSize);R.set(new Uint8Array(S,P),0),this._stashUsed+=I,this._stashByteStart=w+P}}else{this._stashUsed+S.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+S.byteLength);var R=new Uint8Array(this._stashBuffer,0,this._bufferSize);R.set(new Uint8Array(S),this._stashUsed),this._stashUsed+=S.byteLength;var P=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(P<this._stashUsed&&P>0){var F=new Uint8Array(this._stashBuffer,P);R.set(F,0)}this._stashUsed-=P,this._stashByteStart+=P}}},b.prototype._flushStashBuffer=function(S){if(this._stashUsed>0){var w=this._stashBuffer.slice(0,this._stashUsed),A=this._dispatchChunks(w,this._stashByteStart),C=w.byteLength-A;if(A<w.byteLength)if(S)l.default.w(this.TAG,C+" bytes unconsumed data remain when flush buffer, dropped");else{if(A>0){var O=new Uint8Array(this._stashBuffer,0,this._bufferSize),P=new Uint8Array(w,A);O.set(P,0),this._stashUsed=P.byteLength,this._stashByteStart+=A}return 0}return this._stashUsed=0,this._stashByteStart=0,C}return 0},b.prototype._onLoaderComplete=function(S,w){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},b.prototype._onLoaderError=function(S,w){switch(l.default.e(this.TAG,"Loader error, code = "+w.code+", msg = "+w.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,S=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF),S){case f.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var A=this._currentRange.to+1;A<this._totalLength&&(l.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(A,!1));return}S=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case f.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case f.LoaderErrors.CONNECTING_TIMEOUT:case f.LoaderErrors.HTTP_STATUS_CODE_INVALID:case f.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(S,w);else throw new g.RuntimeException("IOException: "+w.msg)},b}();s.default=x},"./src/io/loader.js":function(o,s,c){c.r(s),c.d(s,{LoaderStatus:function(){return u},LoaderErrors:function(){return f},BaseLoader:function(){return h}});var l=c("./src/utils/exception.js"),u={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},f={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},h=function(){function d(p){this._type=p||"undefined",this._status=u.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return d.prototype.destroy=function(){this._status=u.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},d.prototype.isWorking=function(){return this._status===u.kConnecting||this._status===u.kBuffering},Object.defineProperty(d.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(p){this._onContentLengthKnown=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(p){this._onURLRedirect=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(p){this._onDataArrival=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onError",{get:function(){return this._onError},set:function(p){this._onError=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onComplete",{get:function(){return this._onComplete},set:function(p){this._onComplete=p},enumerable:!1,configurable:!0}),d.prototype.open=function(p,v){throw new l.NotImplementedException("Unimplemented abstract function!")},d.prototype.abort=function(){throw new l.NotImplementedException("Unimplemented abstract function!")},d}()},"./src/io/param-seek-handler.js":function(o,s,c){c.r(s);var l=function(){function u(f,h){this._startName=f,this._endName=h}return u.prototype.getConfig=function(f,h){var d=f;if(h.from!==0||h.to!==-1){var p=!0;d.indexOf("?")===-1&&(d+="?",p=!1),p&&(d+="&"),d+=this._startName+"="+h.from.toString(),h.to!==-1&&(d+="&"+this._endName+"="+h.to.toString())}return{url:d,headers:{}}},u.prototype.removeURLParameters=function(f){var h=f.split("?")[0],d=void 0,p=f.indexOf("?");p!==-1&&(d=f.substring(p+1));var v="";if(d!=null&&d.length>0)for(var y=d.split("&"),m=0;m<y.length;m++){var g=y[m].split("="),x=m>0;g[0]!==this._startName&&g[0]!==this._endName&&(x&&(v+="&"),v+=y[m])}return v.length===0?h:h+"?"+v},u}();s.default=l},"./src/io/range-seek-handler.js":function(o,s,c){c.r(s);var l=function(){function u(f){this._zeroStart=f||!1}return u.prototype.getConfig=function(f,h){var d={};if(h.from!==0||h.to!==-1){var p=void 0;h.to!==-1?p="bytes="+h.from.toString()+"-"+h.to.toString():p="bytes="+h.from.toString()+"-",d.Range=p}else this._zeroStart&&(d.Range="bytes=0-");return{url:f,headers:d}},u.prototype.removeURLParameters=function(f){return f},u}();s.default=l},"./src/io/speed-sampler.js":function(o,s,c){c.r(s);var l=function(){function u(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return u.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},u.prototype.addBytes=function(f){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=f,this._totalBytes+=f):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=f,this._totalBytes+=f):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=f,this._totalBytes+=f,this._lastCheckpoint=this._now())},Object.defineProperty(u.prototype,"currentKBps",{get:function(){this.addBytes(0);var f=(this._now()-this._lastCheckpoint)/1e3;return f==0&&(f=1),this._intervalBytes/f/1024},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"averageKBps",{get:function(){var f=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/f/1024},enumerable:!1,configurable:!0}),u}();s.default=l},"./src/io/websocket-loader.js":function(o,s,c){c.r(s);var l=c("./src/io/loader.js"),u=c("./src/utils/exception.js"),f=function(){var d=function(p,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(y[g]=m[g])},d(p,v)};return function(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");d(p,v);function y(){this.constructor=p}p.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}}(),h=function(d){f(p,d);function p(){var v=d.call(this,"websocket-loader")||this;return v.TAG="WebSocketLoader",v._needStash=!0,v._ws=null,v._requestAbort=!1,v._receivedLength=0,v}return p.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},p.prototype.destroy=function(){this._ws&&this.abort(),d.prototype.destroy.call(this)},p.prototype.open=function(v){try{var y=this._ws=new self.WebSocket(v.url);y.binaryType="arraybuffer",y.onopen=this._onWebSocketOpen.bind(this),y.onclose=this._onWebSocketClose.bind(this),y.onmessage=this._onWebSocketMessage.bind(this),y.onerror=this._onWebSocketError.bind(this),this._status=l.LoaderStatus.kConnecting}catch(g){this._status=l.LoaderStatus.kError;var m={code:g.code,msg:g.message};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,m);else throw new u.RuntimeException(m.msg)}},p.prototype.abort=function(){var v=this._ws;v&&(v.readyState===0||v.readyState===1)&&(this._requestAbort=!0,v.close()),this._ws=null,this._status=l.LoaderStatus.kComplete},p.prototype._onWebSocketOpen=function(v){this._status=l.LoaderStatus.kBuffering},p.prototype._onWebSocketClose=function(v){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},p.prototype._onWebSocketMessage=function(v){var y=this;if(v.data instanceof ArrayBuffer)this._dispatchArrayBuffer(v.data);else if(v.data instanceof Blob){var m=new FileReader;m.onload=function(){y._dispatchArrayBuffer(m.result)},m.readAsArrayBuffer(v.data)}else{this._status=l.LoaderStatus.kError;var g={code:-1,msg:"Unsupported WebSocket message type: "+v.data.constructor.name};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,g);else throw new u.RuntimeException(g.msg)}},p.prototype._dispatchArrayBuffer=function(v){var y=v,m=this._receivedLength;this._receivedLength+=y.byteLength,this._onDataArrival&&this._onDataArrival(y,m,this._receivedLength)},p.prototype._onWebSocketError=function(v){this._status=l.LoaderStatus.kError;var y={code:v.code,msg:v.message};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,y);else throw new u.RuntimeException(y.msg)},p}(l.BaseLoader);s.default=h},"./src/io/xhr-moz-chunked-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),h=function(){var p=function(v,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(m[x]=g[x])},p(v,y)};return function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(v,y);function m(){this.constructor=v}v.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),d=function(p){h(v,p);function v(y,m){var g=p.call(this,"xhr-moz-chunked-loader")||this;return g.TAG="MozChunkedLoader",g._seekHandler=y,g._config=m,g._needStash=!0,g._xhr=null,g._requestAbort=!1,g._contentLength=null,g._receivedLength=0,g}return v.isSupported=function(){try{var y=new XMLHttpRequest;return y.open("GET","https://example.com",!0),y.responseType="moz-chunked-arraybuffer",y.responseType==="moz-chunked-arraybuffer"}catch(m){return l.default.w("MozChunkedLoader",m.message),!1}},v.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),p.prototype.destroy.call(this)},v.prototype.open=function(y,m){this._dataSource=y,this._range=m;var g=y.url;this._config.reuseRedirectedURL&&y.redirectedURL!=null&&(g=y.redirectedURL);var x=this._seekHandler.getConfig(g,m);this._requestURL=x.url;var b=this._xhr=new XMLHttpRequest;if(b.open("GET",x.url,!0),b.responseType="moz-chunked-arraybuffer",b.onreadystatechange=this._onReadyStateChange.bind(this),b.onprogress=this._onProgress.bind(this),b.onloadend=this._onLoadEnd.bind(this),b.onerror=this._onXhrError.bind(this),y.withCredentials&&(b.withCredentials=!0),typeof x.headers=="object"){var S=x.headers;for(var w in S)S.hasOwnProperty(w)&&b.setRequestHeader(w,S[w])}if(typeof this._config.headers=="object"){var S=this._config.headers;for(var w in S)S.hasOwnProperty(w)&&b.setRequestHeader(w,S[w])}this._status=u.LoaderStatus.kConnecting,b.send()},v.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=u.LoaderStatus.kComplete},v.prototype._onReadyStateChange=function(y){var m=y.target;if(m.readyState===2){if(m.responseURL!=null&&m.responseURL!==this._requestURL&&this._onURLRedirect){var g=this._seekHandler.removeURLParameters(m.responseURL);this._onURLRedirect(g)}if(m.status!==0&&(m.status<200||m.status>299))if(this._status=u.LoaderStatus.kError,this._onError)this._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:m.status,msg:m.statusText});else throw new f.RuntimeException("MozChunkedLoader: Http code invalid, "+m.status+" "+m.statusText);else this._status=u.LoaderStatus.kBuffering}},v.prototype._onProgress=function(y){if(this._status!==u.LoaderStatus.kError){this._contentLength===null&&y.total!==null&&y.total!==0&&(this._contentLength=y.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var m=y.target.response,g=this._range.from+this._receivedLength;this._receivedLength+=m.byteLength,this._onDataArrival&&this._onDataArrival(m,g,this._receivedLength)}},v.prototype._onLoadEnd=function(y){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===u.LoaderStatus.kError)return;this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},v.prototype._onXhrError=function(y){this._status=u.LoaderStatus.kError;var m=0,g=null;if(this._contentLength&&y.loaded<this._contentLength?(m=u.LoaderErrors.EARLY_EOF,g={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(m=u.LoaderErrors.EXCEPTION,g={code:-1,msg:y.constructor.name+" "+y.type}),this._onError)this._onError(m,g);else throw new f.RuntimeException(g.msg)},v}(u.BaseLoader);s.default=d},"./src/io/xhr-range-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),h=c("./src/utils/exception.js"),d=function(){var v=function(y,m){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(g[b]=x[b])},v(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");v(y,m);function g(){this.constructor=y}y.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),p=function(v){d(y,v);function y(m,g){var x=v.call(this,"xhr-range-loader")||this;return x.TAG="RangeLoader",x._seekHandler=m,x._config=g,x._needStash=!1,x._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],x._currentChunkSizeKB=384,x._currentSpeedNormalized=0,x._zeroSpeedChunkCount=0,x._xhr=null,x._speedSampler=new u.default,x._requestAbort=!1,x._waitForTotalLength=!1,x._totalLengthReceived=!1,x._currentRequestURL=null,x._currentRedirectedURL=null,x._currentRequestRange=null,x._totalLength=null,x._contentLength=null,x._receivedLength=0,x._lastTimeLoaded=0,x}return y.isSupported=function(){try{var m=new XMLHttpRequest;return m.open("GET","https://example.com",!0),m.responseType="arraybuffer",m.responseType==="arraybuffer"}catch(g){return l.default.w("RangeLoader",g.message),!1}},y.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),v.prototype.destroy.call(this)},Object.defineProperty(y.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),y.prototype.open=function(m,g){this._dataSource=m,this._range=g,this._status=f.LoaderStatus.kConnecting;var x=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(x=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!x?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},y.prototype._openSubRange=function(){var m=this._currentChunkSizeKB*1024,g=this._range.from+this._receivedLength,x=g+m;this._contentLength!=null&&x-this._range.from>=this._contentLength&&(x=this._range.from+this._contentLength-1),this._currentRequestRange={from:g,to:x},this._internalOpen(this._dataSource,this._currentRequestRange)},y.prototype._internalOpen=function(m,g){this._lastTimeLoaded=0;var x=m.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?x=this._currentRedirectedURL:m.redirectedURL!=null&&(x=m.redirectedURL));var b=this._seekHandler.getConfig(x,g);this._currentRequestURL=b.url;var S=this._xhr=new XMLHttpRequest;if(S.open("GET",b.url,!0),S.responseType="arraybuffer",S.onreadystatechange=this._onReadyStateChange.bind(this),S.onprogress=this._onProgress.bind(this),S.onload=this._onLoad.bind(this),S.onerror=this._onXhrError.bind(this),m.withCredentials&&(S.withCredentials=!0),typeof b.headers=="object"){var w=b.headers;for(var A in w)w.hasOwnProperty(A)&&S.setRequestHeader(A,w[A])}if(typeof this._config.headers=="object"){var w=this._config.headers;for(var A in w)w.hasOwnProperty(A)&&S.setRequestHeader(A,w[A])}S.send()},y.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=f.LoaderStatus.kComplete},y.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},y.prototype._onReadyStateChange=function(m){var g=m.target;if(g.readyState===2){if(g.responseURL!=null){var x=this._seekHandler.removeURLParameters(g.responseURL);g.responseURL!==this._currentRequestURL&&x!==this._currentRedirectedURL&&(this._currentRedirectedURL=x,this._onURLRedirect&&this._onURLRedirect(x))}if(g.status>=200&&g.status<=299){if(this._waitForTotalLength)return;this._status=f.LoaderStatus.kBuffering}else if(this._status=f.LoaderStatus.kError,this._onError)this._onError(f.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:g.status,msg:g.statusText});else throw new h.RuntimeException("RangeLoader: Http code invalid, "+g.status+" "+g.statusText)}},y.prototype._onProgress=function(m){if(this._status!==f.LoaderStatus.kError){if(this._contentLength===null){var g=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,g=!0;var x=m.total;this._internalAbort(),x!=null&x!==0&&(this._totalLength=x)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,g){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var b=m.loaded-this._lastTimeLoaded;this._lastTimeLoaded=m.loaded,this._speedSampler.addBytes(b)}},y.prototype._normalizeSpeed=function(m){var g=this._chunkSizeKBList,x=g.length-1,b=0,S=0,w=x;if(m<g[0])return g[0];for(;S<=w;){if(b=S+Math.floor((w-S)/2),b===x||m>=g[b]&&m<g[b+1])return g[b];g[b]<m?S=b+1:w=b-1}},y.prototype._onLoad=function(m){if(this._status!==f.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var g=this._speedSampler.lastSecondKBps;if(g===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(g=this._speedSampler.currentKBps)),g!==0){var x=this._normalizeSpeed(g);this._currentSpeedNormalized!==x&&(this._currentSpeedNormalized=x,this._currentChunkSizeKB=x)}var b=m.target.response,S=this._range.from+this._receivedLength;this._receivedLength+=b.byteLength;var w=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():w=!0,this._onDataArrival&&this._onDataArrival(b,S,this._receivedLength),w&&(this._status=f.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},y.prototype._onXhrError=function(m){this._status=f.LoaderStatus.kError;var g=0,x=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(g=f.LoaderErrors.EARLY_EOF,x={code:-1,msg:"RangeLoader meet Early-Eof"}):(g=f.LoaderErrors.EXCEPTION,x={code:-1,msg:m.constructor.name+" "+m.type}),this._onError)this._onError(g,x);else throw new h.RuntimeException(x.msg)},y}(f.BaseLoader);s.default=p},"./src/player/flv-player.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),d=c("./src/player/player-events.js"),p=c("./src/core/transmuxer.js"),v=c("./src/core/transmuxing-events.js"),y=c("./src/core/mse-controller.js"),m=c("./src/core/mse-events.js"),g=c("./src/player/player-errors.js"),x=c("./src/config.js"),b=c("./src/utils/exception.js"),S=function(){function w(A,C){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(u()),this._config=(0,x.createDefaultConfig)(),typeof C=="object"&&Object.assign(this._config,C),A.type.toLowerCase()!=="flv")throw new b.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");A.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=A,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var O=h.default.chrome&&(h.default.version.major<50||h.default.version.major===50&&h.default.version.build<2661);this._alwaysSeekKeyframe=!!(O||h.default.msedge||h.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return w.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},w.prototype.on=function(A,C){var O=this;A===d.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){O._emitter.emit(d.default.MEDIA_INFO,O.mediaInfo)}):A===d.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){O._emitter.emit(d.default.STATISTICS_INFO,O.statisticsInfo)}),this._emitter.addListener(A,C)},w.prototype.off=function(A,C){this._emitter.removeListener(A,C)},w.prototype.attachMediaElement=function(A){var C=this;if(this._mediaElement=A,A.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),A.addEventListener("seeking",this.e.onvSeeking),A.addEventListener("canplay",this.e.onvCanPlay),A.addEventListener("stalled",this.e.onvStalled),A.addEventListener("progress",this.e.onvProgress),this._msectl=new y.default(this._config),this._msectl.on(m.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(m.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(m.default.SOURCE_OPEN,function(){C._mseSourceOpened=!0,C._hasPendingLoad&&(C._hasPendingLoad=!1,C.load())}),this._msectl.on(m.default.ERROR,function(O){C._emitter.emit(d.default.ERROR,g.ErrorTypes.MEDIA_ERROR,g.ErrorDetails.MEDIA_MSE_ERROR,O)}),this._msectl.attachMediaElement(A),this._pendingSeekTime!=null)try{A.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},w.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},w.prototype.load=function(){var A=this;if(!this._mediaElement)throw new b.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new b.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new p.default(this._mediaDataSource,this._config),this._transmuxer.on(v.default.INIT_SEGMENT,function(C,O){A._msectl.appendInitSegment(O)}),this._transmuxer.on(v.default.MEDIA_SEGMENT,function(C,O){if(A._msectl.appendMediaSegment(O),A._config.lazyLoad&&!A._config.isLive){var P=A._mediaElement.currentTime;O.info.endDts>=(P+A._config.lazyLoadMaxDuration)*1e3&&A._progressChecker==null&&(f.default.v(A.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),A._suspendTransmuxer())}}),this._transmuxer.on(v.default.LOADING_COMPLETE,function(){A._msectl.endOfStream(),A._emitter.emit(d.default.LOADING_COMPLETE)}),this._transmuxer.on(v.default.RECOVERED_EARLY_EOF,function(){A._emitter.emit(d.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(v.default.IO_ERROR,function(C,O){A._emitter.emit(d.default.ERROR,g.ErrorTypes.NETWORK_ERROR,C,O)}),this._transmuxer.on(v.default.DEMUX_ERROR,function(C,O){A._emitter.emit(d.default.ERROR,g.ErrorTypes.MEDIA_ERROR,C,{code:-1,msg:O})}),this._transmuxer.on(v.default.MEDIA_INFO,function(C){A._mediaInfo=C,A._emitter.emit(d.default.MEDIA_INFO,Object.assign({},C))}),this._transmuxer.on(v.default.METADATA_ARRIVED,function(C){A._emitter.emit(d.default.METADATA_ARRIVED,C)}),this._transmuxer.on(v.default.SCRIPTDATA_ARRIVED,function(C){A._emitter.emit(d.default.SCRIPTDATA_ARRIVED,C)}),this._transmuxer.on(v.default.STATISTICS_INFO,function(C){A._statisticsInfo=A._fillStatisticsInfo(C),A._emitter.emit(d.default.STATISTICS_INFO,Object.assign({},A._statisticsInfo))}),this._transmuxer.on(v.default.RECOMMEND_SEEKPOINT,function(C){A._mediaElement&&!A._config.accurateSeek&&(A._requestSetTime=!0,A._mediaElement.currentTime=C/1e3)}),this._transmuxer.open()}},w.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},w.prototype.play=function(){return this._mediaElement.play()},w.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(w.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(A){this._mediaElement.volume=A},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(A){this._mediaElement.muted=A},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(A){this._mediaElement?this._internalSeek(A):this._pendingSeekTime=A},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),w.prototype._fillStatisticsInfo=function(A){if(A.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return A;var C=!0,O=0,P=0;if(this._mediaElement.getVideoPlaybackQuality){var I=this._mediaElement.getVideoPlaybackQuality();O=I.totalVideoFrames,P=I.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(O=this._mediaElement.webkitDecodedFrameCount,P=this._mediaElement.webkitDroppedFrameCount):C=!1;return C&&(A.decodedFrames=O,A.droppedFrames=P),A},w.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var A=this._mediaElement.buffered,C=this._mediaElement.currentTime,O=0,P=0;P<A.length;P++){var I=A.start(P),R=A.end(P);if(I<=C&&C<R){O=R;break}}O>=C+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(f.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},w.prototype._onmseBufferFull=function(){f.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},w.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},w.prototype._checkProgressAndResume=function(){for(var A=this._mediaElement.currentTime,C=this._mediaElement.buffered,O=!1,P=0;P<C.length;P++){var I=C.start(P),R=C.end(P);if(A>=I&&A<R){A>=R-this._config.lazyLoadRecoverDuration&&(O=!0);break}}O&&(window.clearInterval(this._progressChecker),this._progressChecker=null,O&&(f.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},w.prototype._isTimepointBuffered=function(A){for(var C=this._mediaElement.buffered,O=0;O<C.length;O++){var P=C.start(O),I=C.end(O);if(A>=P&&A<I)return!0}return!1},w.prototype._internalSeek=function(A){var C=this._isTimepointBuffered(A),O=!1,P=0;if(A<1&&this._mediaElement.buffered.length>0){var I=this._mediaElement.buffered.start(0);(I<1&&A<I||h.default.safari)&&(O=!0,P=h.default.safari?.1:I)}if(O)this._requestSetTime=!0,this._mediaElement.currentTime=P;else if(C){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=A;else{var R=this._msectl.getNearestKeyframe(Math.floor(A*1e3));this._requestSetTime=!0,R!=null?this._mediaElement.currentTime=R.dts/1e3:this._mediaElement.currentTime=A}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(A),this._transmuxer.seek(Math.floor(A*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=A)},w.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var A=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(A)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(A),this._transmuxer.seek(Math.floor(A*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=A))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},w.prototype._checkAndResumeStuckPlayback=function(A){var C=this._mediaElement;if(A||!this._receivedCanPlay||C.readyState<2){var O=C.buffered;O.length>0&&C.currentTime<O.start(0)&&(f.default.w(this.TAG,"Playback seems stuck at "+C.currentTime+", seek to "+O.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=O.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},w.prototype._onvLoadedMetadata=function(A){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},w.prototype._onvSeeking=function(A){var C=this._mediaElement.currentTime,O=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(C<1&&O.length>0){var P=O.start(0);if(P<1&&C<P||h.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=h.default.safari?.1:P;return}}if(this._isTimepointBuffered(C)){if(this._alwaysSeekKeyframe){var I=this._msectl.getNearestKeyframe(Math.floor(C*1e3));I!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=I.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:C,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},w.prototype._onvCanPlay=function(A){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},w.prototype._onvStalled=function(A){this._checkAndResumeStuckPlayback(!0)},w.prototype._onvProgress=function(A){this._checkAndResumeStuckPlayback()},w}();s.default=S},"./src/player/native-player.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/player/player-events.js"),h=c("./src/config.js"),d=c("./src/utils/exception.js"),p=function(){function v(y,m){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(u()),this._config=(0,h.createDefaultConfig)(),typeof m=="object"&&Object.assign(this._config,m),y.type.toLowerCase()==="flv")throw new d.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(y.hasOwnProperty("segments"))throw new d.InvalidArgumentException("NativePlayer("+y.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=y,this._mediaElement=null}return v.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},v.prototype.on=function(y,m){var g=this;y===f.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){g._emitter.emit(f.default.MEDIA_INFO,g.mediaInfo)}):y===f.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){g._emitter.emit(f.default.STATISTICS_INFO,g.statisticsInfo)}),this._emitter.addListener(y,m)},v.prototype.off=function(y,m){this._emitter.removeListener(y,m)},v.prototype.attachMediaElement=function(y){if(this._mediaElement=y,y.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{y.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},v.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},v.prototype.load=function(){if(!this._mediaElement)throw new d.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},v.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},v.prototype.play=function(){return this._mediaElement.play()},v.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(v.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(y){this._mediaElement.volume=y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(y){this._mediaElement.muted=y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(y){this._mediaElement?this._mediaElement.currentTime=y:this._pendingSeekTime=y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"mediaInfo",{get:function(){var y=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",m={mimeType:y+this._mediaDataSource.type};return this._mediaElement&&(m.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(m.width=this._mediaElement.videoWidth,m.height=this._mediaElement.videoHeight)),m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"statisticsInfo",{get:function(){var y={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return y;var m=!0,g=0,x=0;if(this._mediaElement.getVideoPlaybackQuality){var b=this._mediaElement.getVideoPlaybackQuality();g=b.totalVideoFrames,x=b.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(g=this._mediaElement.webkitDecodedFrameCount,x=this._mediaElement.webkitDroppedFrameCount):m=!1;return m&&(y.decodedFrames=g,y.droppedFrames=x),y},enumerable:!1,configurable:!0}),v.prototype._onvLoadedMetadata=function(y){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(f.default.MEDIA_INFO,this.mediaInfo)},v.prototype._reportStatisticsInfo=function(){this._emitter.emit(f.default.STATISTICS_INFO,this.statisticsInfo)},v}();s.default=p},"./src/player/player-errors.js":function(o,s,c){c.r(s),c.d(s,{ErrorTypes:function(){return f},ErrorDetails:function(){return h}});var l=c("./src/io/loader.js"),u=c("./src/demux/demux-errors.js"),f={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},h={NETWORK_EXCEPTION:l.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:u.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:u.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:u.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(o,s,c){c.r(s);var l={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};s.default=l},"./src/remux/aac-silent.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.getSilentFrame=function(f,h){if(f==="mp4a.40.2"){if(h===1)return new Uint8Array([0,200,0,128,35,128]);if(h===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(h===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(h===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(h===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(h===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(h===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(h===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(h===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},u}();s.default=l},"./src/remux/mp4-generator.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.init=function(){u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var f in u.types)u.types.hasOwnProperty(f)&&(u.types[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);var h=u.constants={};h.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),h.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),h.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSC=h.STCO=h.STTS,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),h.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),h.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},u.box=function(f){for(var h=8,d=null,p=Array.prototype.slice.call(arguments,1),v=p.length,y=0;y<v;y++)h+=p[y].byteLength;d=new Uint8Array(h),d[0]=h>>>24&255,d[1]=h>>>16&255,d[2]=h>>>8&255,d[3]=h&255,d.set(f,4);for(var m=8,y=0;y<v;y++)d.set(p[y],m),m+=p[y].byteLength;return d},u.generateInitSegment=function(f){var h=u.box(u.types.ftyp,u.constants.FTYP),d=u.moov(f),p=new Uint8Array(h.byteLength+d.byteLength);return p.set(h,0),p.set(d,h.byteLength),p},u.moov=function(f){var h=u.mvhd(f.timescale,f.duration),d=u.trak(f),p=u.mvex(f);return u.box(u.types.moov,h,d,p)},u.mvhd=function(f,h){return u.box(u.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},u.trak=function(f){return u.box(u.types.trak,u.tkhd(f),u.mdia(f))},u.tkhd=function(f){var h=f.id,d=f.duration,p=f.presentWidth,v=f.presentHeight;return u.box(u.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>>8&255,p&255,0,0,v>>>8&255,v&255,0,0]))},u.mdia=function(f){return u.box(u.types.mdia,u.mdhd(f),u.hdlr(f),u.minf(f))},u.mdhd=function(f){var h=f.timescale,d=f.duration;return u.box(u.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,85,196,0,0]))},u.hdlr=function(f){var h=null;return f.type==="audio"?h=u.constants.HDLR_AUDIO:h=u.constants.HDLR_VIDEO,u.box(u.types.hdlr,h)},u.minf=function(f){var h=null;return f.type==="audio"?h=u.box(u.types.smhd,u.constants.SMHD):h=u.box(u.types.vmhd,u.constants.VMHD),u.box(u.types.minf,h,u.dinf(),u.stbl(f))},u.dinf=function(){var f=u.box(u.types.dinf,u.box(u.types.dref,u.constants.DREF));return f},u.stbl=function(f){var h=u.box(u.types.stbl,u.stsd(f),u.box(u.types.stts,u.constants.STTS),u.box(u.types.stsc,u.constants.STSC),u.box(u.types.stsz,u.constants.STSZ),u.box(u.types.stco,u.constants.STCO));return h},u.stsd=function(f){return f.type==="audio"?f.codec==="mp3"?u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp3(f)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp4a(f)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.avc1(f))},u.mp3=function(f){var h=f.channelCount,d=f.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h,0,16,0,0,0,0,d>>>8&255,d&255,0,0]);return u.box(u.types[".mp3"],p)},u.mp4a=function(f){var h=f.channelCount,d=f.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h,0,16,0,0,0,0,d>>>8&255,d&255,0,0]);return u.box(u.types.mp4a,p,u.esds(f))},u.esds=function(f){var h=f.config||[],d=h.length,p=new Uint8Array([0,0,0,0,3,23+d,0,1,0,4,15+d,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([d]).concat(h).concat([6,1,2]));return u.box(u.types.esds,p)},u.avc1=function(f){var h=f.avcc,d=f.codecWidth,p=f.codecHeight,v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>>8&255,d&255,p>>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return u.box(u.types.avc1,v,u.box(u.types.avcC,h))},u.mvex=function(f){return u.box(u.types.mvex,u.trex(f))},u.trex=function(f){var h=f.id,d=new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return u.box(u.types.trex,d)},u.moof=function(f,h){return u.box(u.types.moof,u.mfhd(f.sequenceNumber),u.traf(f,h))},u.mfhd=function(f){var h=new Uint8Array([0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255]);return u.box(u.types.mfhd,h)},u.traf=function(f,h){var d=f.id,p=u.box(u.types.tfhd,new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255])),v=u.box(u.types.tfdt,new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255])),y=u.sdtp(f),m=u.trun(f,y.byteLength+16+16+8+16+8+8);return u.box(u.types.traf,p,v,m,y)},u.sdtp=function(f){for(var h=f.samples||[],d=h.length,p=new Uint8Array(4+d),v=0;v<d;v++){var y=h[v].flags;p[v+4]=y.isLeading<<6|y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy}return u.box(u.types.sdtp,p)},u.trun=function(f,h){var d=f.samples||[],p=d.length,v=12+16*p,y=new Uint8Array(v);h+=8+v,y.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,p&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255],0);for(var m=0;m<p;m++){var g=d[m].duration,x=d[m].size,b=d[m].flags,S=d[m].cts;y.set([g>>>24&255,g>>>16&255,g>>>8&255,g&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255,b.isLeading<<2|b.dependsOn,b.isDependedOn<<6|b.hasRedundancy<<4|b.isNonSync,0,0,S>>>24&255,S>>>16&255,S>>>8&255,S&255],12+16*m)}return u.box(u.types.trun,y)},u.mdat=function(f){return u.box(u.types.mdat,f)},u}();l.init(),s.default=l},"./src/remux/mp4-remuxer.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/remux/mp4-generator.js"),f=c("./src/remux/aac-silent.js"),h=c("./src/utils/browser.js"),d=c("./src/core/media-segment-info.js"),p=c("./src/utils/exception.js"),v=function(){function y(m){this.TAG="MP4Remuxer",this._config=m,this._isLive=m.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new d.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new d.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(h.default.chrome&&(h.default.version.major<50||h.default.version.major===50&&h.default.version.build<2661)),this._fillSilentAfterSeek=h.default.msedge||h.default.msie,this._mp3UseMpegAudio=!h.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return y.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},y.prototype.bindDataSource=function(m){return m.onDataAvailable=this.remux.bind(this),m.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(y.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(m){this._onInitSegment=m},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(m){this._onMediaSegment=m},enumerable:!1,configurable:!0}),y.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},y.prototype.seek=function(m){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},y.prototype.remux=function(m,g){if(!this._onMediaSegment)throw new p.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(m,g),this._remuxVideo(g),this._remuxAudio(m)},y.prototype._onTrackMetadataReceived=function(m,g){var x=null,b="mp4",S=g.codec;if(m==="audio")this._audioMeta=g,g.codec==="mp3"&&this._mp3UseMpegAudio?(b="mpeg",S="",x=new Uint8Array):x=u.default.generateInitSegment(g);else if(m==="video")this._videoMeta=g,x=u.default.generateInitSegment(g);else return;if(!this._onInitSegment)throw new p.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(m,{type:m,data:x.buffer,codec:S,container:m+"/"+b,mediaDuration:g.duration})},y.prototype._calculateDtsBase=function(m,g){this._dtsBaseInited||(m.samples&&m.samples.length&&(this._audioDtsBase=m.samples[0].dts),g.samples&&g.samples.length&&(this._videoDtsBase=g.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},y.prototype.flushStashedSamples=function(){var m=this._videoStashedLastSample,g=this._audioStashedLastSample,x={type:"video",id:1,sequenceNumber:0,samples:[],length:0};m!=null&&(x.samples.push(m),x.length=m.length);var b={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};g!=null&&(b.samples.push(g),b.length=g.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(x,!0),this._remuxAudio(b,!0)},y.prototype._remuxAudio=function(m,g){if(this._audioMeta!=null){var x=m,b=x.samples,S=void 0,w=-1,A=-1,C=this._audioMeta.refSampleDuration,O=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,P=this._dtsBaseInited&&this._audioNextDts===void 0,I=!1;if(!(!b||b.length===0)&&!(b.length===1&&!g)){var R=0,F=null,D=0;O?(R=0,D=x.length):(R=8,D=8+x.length);var L=null;if(b.length>1&&(L=b.pop(),D-=L.length),this._audioStashedLastSample!=null){var U=this._audioStashedLastSample;this._audioStashedLastSample=null,b.unshift(U),D+=U.length}L!=null&&(this._audioStashedLastSample=L);var Y=b[0].dts-this._dtsBase;if(this._audioNextDts)S=Y-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())S=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(I=!0);else{var ee=this._audioSegmentInfoList.getLastSampleBefore(Y);if(ee!=null){var J=Y-(ee.originalDts+ee.duration);J<=3&&(J=0);var X=ee.dts+ee.duration+J;S=Y-X}else S=0}if(I){var M=Y-S,V=this._videoSegmentInfoList.getLastSegmentBefore(Y);if(V!=null&&V.beginDts<M){var $=f.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if($){var j=V.beginDts,te=M-V.beginDts;l.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+j+", duration: "+te),b.unshift({unit:$,dts:j,pts:j}),D+=$.byteLength}}else I=!1}for(var ie=[],de=0;de<b.length;de++){var U=b[de],he=U.unit,Ee=U.dts-this._dtsBase,j=Ee,Oe=!1,ye=null,Ae=0;if(!(Ee<-.001)){if(this._audioMeta.codec!=="mp3"){var _e=Ee,we=3;if(this._audioNextDts&&(_e=this._audioNextDts),S=Ee-_e,S<=-we*C){l.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+Ee+" ms ,curRefDts: "+_e+" ms)  due to dtsCorrection: "+S+" ms overlap.");continue}else if(S>=we*C&&this._fillAudioTimestampGap&&!h.default.safari){Oe=!0;var $e=Math.floor(S/C);l.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+Ee+" ms, curRefDts: "+_e+" ms, ")+("dtsCorrection: "+Math.round(S)+" ms, generate: "+$e+" frames")),j=Math.floor(_e),Ae=Math.floor(_e+C)-j;var $=f.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);$==null&&(l.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),$=he),ye=[];for(var Xe=0;Xe<$e;Xe++){_e=_e+C;var ke=Math.floor(_e),at=Math.floor(_e+C)-ke,vt={dts:ke,pts:ke,cts:0,unit:$,size:$.byteLength,duration:at,originalDts:Ee,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};ye.push(vt),D+=vt.size}this._audioNextDts=_e+C}else j=Math.floor(_e),Ae=Math.floor(_e+C)-j,this._audioNextDts=_e+C}else{if(j=Ee-S,de!==b.length-1){var gt=b[de+1].dts-this._dtsBase-S;Ae=gt-j}else if(L!=null){var gt=L.dts-this._dtsBase-S;Ae=gt-j}else ie.length>=1?Ae=ie[ie.length-1].duration:Ae=Math.floor(C);this._audioNextDts=j+Ae}w===-1&&(w=j),ie.push({dts:j,pts:j,cts:0,unit:U.unit,size:U.unit.byteLength,duration:Ae,originalDts:Ee,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),Oe&&ie.push.apply(ie,ye)}}if(ie.length===0){x.samples=[],x.length=0;return}O?F=new Uint8Array(D):(F=new Uint8Array(D),F[0]=D>>>24&255,F[1]=D>>>16&255,F[2]=D>>>8&255,F[3]=D&255,F.set(u.default.types.mdat,4));for(var de=0;de<ie.length;de++){var he=ie[de].unit;F.set(he,R),R+=he.byteLength}var tt=ie[ie.length-1];A=tt.dts+tt.duration;var ot=new d.MediaSegmentInfo;ot.beginDts=w,ot.endDts=A,ot.beginPts=w,ot.endPts=A,ot.originalBeginDts=ie[0].originalDts,ot.originalEndDts=tt.originalDts+tt.duration,ot.firstSample=new d.SampleInfo(ie[0].dts,ie[0].pts,ie[0].duration,ie[0].originalDts,!1),ot.lastSample=new d.SampleInfo(tt.dts,tt.pts,tt.duration,tt.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(ot),x.samples=ie,x.sequenceNumber++;var dt=null;O?dt=new Uint8Array:dt=u.default.moof(x,w),x.samples=[],x.length=0;var Xt={type:"audio",data:this._mergeBoxes(dt,F).buffer,sampleCount:ie.length,info:ot};O&&P&&(Xt.timestampOffset=w),this._onMediaSegment("audio",Xt)}}},y.prototype._remuxVideo=function(m,g){if(this._videoMeta!=null){var x=m,b=x.samples,S=void 0,w=-1,A=-1,C=-1,O=-1;if(!(!b||b.length===0)&&!(b.length===1&&!g)){var P=8,I=null,R=8+m.length,F=null;if(b.length>1&&(F=b.pop(),R-=F.length),this._videoStashedLastSample!=null){var D=this._videoStashedLastSample;this._videoStashedLastSample=null,b.unshift(D),R+=D.length}F!=null&&(this._videoStashedLastSample=F);var L=b[0].dts-this._dtsBase;if(this._videoNextDts)S=L-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())S=0;else{var U=this._videoSegmentInfoList.getLastSampleBefore(L);if(U!=null){var Y=L-(U.originalDts+U.duration);Y<=3&&(Y=0);var ee=U.dts+U.duration+Y;S=L-ee}else S=0}for(var J=new d.MediaSegmentInfo,X=[],M=0;M<b.length;M++){var D=b[M],V=D.dts-this._dtsBase,$=D.isKeyframe,j=V-S,te=D.cts,ie=j+te;w===-1&&(w=j,C=ie);var de=0;if(M!==b.length-1){var he=b[M+1].dts-this._dtsBase-S;de=he-j}else if(F!=null){var he=F.dts-this._dtsBase-S;de=he-j}else X.length>=1?de=X[X.length-1].duration:de=Math.floor(this._videoMeta.refSampleDuration);if($){var Ee=new d.SampleInfo(j,ie,de,D.dts,!0);Ee.fileposition=D.fileposition,J.appendSyncPoint(Ee)}X.push({dts:j,pts:ie,cts:te,units:D.units,size:D.length,isKeyframe:$,duration:de,originalDts:V,flags:{isLeading:0,dependsOn:$?2:1,isDependedOn:$?1:0,hasRedundancy:0,isNonSync:$?0:1}})}I=new Uint8Array(R),I[0]=R>>>24&255,I[1]=R>>>16&255,I[2]=R>>>8&255,I[3]=R&255,I.set(u.default.types.mdat,4);for(var M=0;M<X.length;M++)for(var Oe=X[M].units;Oe.length;){var ye=Oe.shift(),Ae=ye.data;I.set(Ae,P),P+=Ae.byteLength}var _e=X[X.length-1];if(A=_e.dts+_e.duration,O=_e.pts+_e.duration,this._videoNextDts=A,J.beginDts=w,J.endDts=A,J.beginPts=C,J.endPts=O,J.originalBeginDts=X[0].originalDts,J.originalEndDts=_e.originalDts+_e.duration,J.firstSample=new d.SampleInfo(X[0].dts,X[0].pts,X[0].duration,X[0].originalDts,X[0].isKeyframe),J.lastSample=new d.SampleInfo(_e.dts,_e.pts,_e.duration,_e.originalDts,_e.isKeyframe),this._isLive||this._videoSegmentInfoList.append(J),x.samples=X,x.sequenceNumber++,this._forceFirstIDR){var we=X[0].flags;we.dependsOn=2,we.isNonSync=0}var $e=u.default.moof(x,w);x.samples=[],x.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes($e,I).buffer,sampleCount:X.length,info:J})}}},y.prototype._mergeBoxes=function(m,g){var x=new Uint8Array(m.byteLength+g.byteLength);return x.set(m,0),x.set(g,m.byteLength),x},y}();s.default=v},"./src/utils/browser.js":function(o,s,c){c.r(s);var l={};function u(){var f=self.navigator.userAgent.toLowerCase(),h=/(edge)\/([\w.]+)/.exec(f)||/(opr)[\/]([\w.]+)/.exec(f)||/(chrome)[ \/]([\w.]+)/.exec(f)||/(iemobile)[\/]([\w.]+)/.exec(f)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+)/.exec(f)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(f)||/(msie) ([\w.]+)/.exec(f)||f.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(f)||f.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(f)||[],d=/(ipad)/.exec(f)||/(ipod)/.exec(f)||/(windows phone)/.exec(f)||/(iphone)/.exec(f)||/(kindle)/.exec(f)||/(android)/.exec(f)||/(windows)/.exec(f)||/(mac)/.exec(f)||/(linux)/.exec(f)||/(cros)/.exec(f)||[],p={browser:h[5]||h[3]||h[1]||"",version:h[2]||h[4]||"0",majorVersion:h[4]||h[2]||"0",platform:d[0]||""},v={};if(p.browser){v[p.browser]=!0;var y=p.majorVersion.split(".");v.version={major:parseInt(p.majorVersion,10),string:p.version},y.length>1&&(v.version.minor=parseInt(y[1],10)),y.length>2&&(v.version.build=parseInt(y[2],10))}if(p.platform&&(v[p.platform]=!0),(v.chrome||v.opr||v.safari)&&(v.webkit=!0),v.rv||v.iemobile){v.rv&&delete v.rv;var m="msie";p.browser=m,v[m]=!0}if(v.edge){delete v.edge;var g="msedge";p.browser=g,v[g]=!0}if(v.opr){var x="opera";p.browser=x,v[x]=!0}if(v.safari&&v.android){var b="android";p.browser=b,v[b]=!0}v.name=p.browser,v.platform=p.platform;for(var S in l)l.hasOwnProperty(S)&&delete l[S];Object.assign(l,v)}u(),s.default=l},"./src/utils/exception.js":function(o,s,c){c.r(s),c.d(s,{RuntimeException:function(){return u},IllegalStateException:function(){return f},InvalidArgumentException:function(){return h},NotImplementedException:function(){return d}});var l=function(){var p=function(v,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(m[x]=g[x])},p(v,y)};return function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(v,y);function m(){this.constructor=v}v.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),u=function(){function p(v){this._message=v}return Object.defineProperty(p.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),p.prototype.toString=function(){return this.name+": "+this.message},p}(),f=function(p){l(v,p);function v(y){return p.call(this,y)||this}return Object.defineProperty(v.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),v}(u),h=function(p){l(v,p);function v(y){return p.call(this,y)||this}return Object.defineProperty(v.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),v}(u),d=function(p){l(v,p);function v(y){return p.call(this,y)||this}return Object.defineProperty(v.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),v}(u)},"./src/utils/logger.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=function(){function h(){}return h.e=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","error",v),h.ENABLE_ERROR&&(console.error?console.error(v):console.warn?console.warn(v):console.log(v))},h.i=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","info",v),h.ENABLE_INFO&&(console.info?console.info(v):console.log(v))},h.w=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","warn",v),h.ENABLE_WARN&&(console.warn?console.warn(v):console.log(v))},h.d=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","debug",v),h.ENABLE_DEBUG&&(console.debug?console.debug(v):console.log(v))},h.v=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","verbose",v),h.ENABLE_VERBOSE&&console.log(v)},h}();f.GLOBAL_TAG="flv.js",f.FORCE_GLOBAL_TAG=!1,f.ENABLE_ERROR=!0,f.ENABLE_INFO=!0,f.ENABLE_WARN=!0,f.ENABLE_DEBUG=!0,f.ENABLE_VERBOSE=!0,f.ENABLE_CALLBACK=!1,f.emitter=new(u()),s.default=f},"./src/utils/logging-control.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=function(){function d(){}return Object.defineProperty(d,"forceGlobalTag",{get:function(){return f.default.FORCE_GLOBAL_TAG},set:function(p){f.default.FORCE_GLOBAL_TAG=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"globalTag",{get:function(){return f.default.GLOBAL_TAG},set:function(p){f.default.GLOBAL_TAG=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableAll",{get:function(){return f.default.ENABLE_VERBOSE&&f.default.ENABLE_DEBUG&&f.default.ENABLE_INFO&&f.default.ENABLE_WARN&&f.default.ENABLE_ERROR},set:function(p){f.default.ENABLE_VERBOSE=p,f.default.ENABLE_DEBUG=p,f.default.ENABLE_INFO=p,f.default.ENABLE_WARN=p,f.default.ENABLE_ERROR=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableDebug",{get:function(){return f.default.ENABLE_DEBUG},set:function(p){f.default.ENABLE_DEBUG=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableVerbose",{get:function(){return f.default.ENABLE_VERBOSE},set:function(p){f.default.ENABLE_VERBOSE=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableInfo",{get:function(){return f.default.ENABLE_INFO},set:function(p){f.default.ENABLE_INFO=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableWarn",{get:function(){return f.default.ENABLE_WARN},set:function(p){f.default.ENABLE_WARN=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableError",{get:function(){return f.default.ENABLE_ERROR},set:function(p){f.default.ENABLE_ERROR=p,d._notifyChange()},enumerable:!1,configurable:!0}),d.getConfig=function(){return{globalTag:f.default.GLOBAL_TAG,forceGlobalTag:f.default.FORCE_GLOBAL_TAG,enableVerbose:f.default.ENABLE_VERBOSE,enableDebug:f.default.ENABLE_DEBUG,enableInfo:f.default.ENABLE_INFO,enableWarn:f.default.ENABLE_WARN,enableError:f.default.ENABLE_ERROR,enableCallback:f.default.ENABLE_CALLBACK}},d.applyConfig=function(p){f.default.GLOBAL_TAG=p.globalTag,f.default.FORCE_GLOBAL_TAG=p.forceGlobalTag,f.default.ENABLE_VERBOSE=p.enableVerbose,f.default.ENABLE_DEBUG=p.enableDebug,f.default.ENABLE_INFO=p.enableInfo,f.default.ENABLE_WARN=p.enableWarn,f.default.ENABLE_ERROR=p.enableError,f.default.ENABLE_CALLBACK=p.enableCallback},d._notifyChange=function(){var p=d.emitter;if(p.listenerCount("change")>0){var v=d.getConfig();p.emit("change",v)}},d.registerListener=function(p){d.emitter.addListener("change",p)},d.removeListener=function(p){d.emitter.removeListener("change",p)},d.addLogListener=function(p){f.default.emitter.addListener("log",p),f.default.emitter.listenerCount("log")>0&&(f.default.ENABLE_CALLBACK=!0,d._notifyChange())},d.removeLogListener=function(p){f.default.emitter.removeListener("log",p),f.default.emitter.listenerCount("log")===0&&(f.default.ENABLE_CALLBACK=!1,d._notifyChange())},d}();h.emitter=new(u()),s.default=h},"./src/utils/polyfill.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f},Object.assign=Object.assign||function(f){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(f),d=1;d<arguments.length;d++){var p=arguments[d];if(p!=null)for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v])}return h},typeof self.Promise!="function"&&c("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},u}();l.install(),s.default=l},"./src/utils/utf8-conv.js":function(o,s,c){c.r(s);function l(f,h,d){var p=f;if(h+d<p.length){for(;d--;)if((p[++h]&192)!==128)return!1;return!0}else return!1}function u(f){for(var h=[],d=f,p=0,v=f.length;p<v;){if(d[p]<128){h.push(String.fromCharCode(d[p])),++p;continue}else if(!(d[p]<192)){if(d[p]<224){if(l(d,p,1)){var y=(d[p]&31)<<6|d[p+1]&63;if(y>=128){h.push(String.fromCharCode(y&65535)),p+=2;continue}}}else if(d[p]<240){if(l(d,p,2)){var y=(d[p]&15)<<12|(d[p+1]&63)<<6|d[p+2]&63;if(y>=2048&&(y&63488)!==55296){h.push(String.fromCharCode(y&65535)),p+=3;continue}}}else if(d[p]<248&&l(d,p,3)){var y=(d[p]&7)<<18|(d[p+1]&63)<<12|(d[p+2]&63)<<6|d[p+3]&63;if(y>65536&&y<1114112){y-=65536,h.push(String.fromCharCode(y>>>10|55296)),h.push(String.fromCharCode(y&1023|56320)),p+=4;continue}}}h.push(String.fromCharCode(65533)),++p}return h.join("")}s.default=u}},n={};function i(o){var s=n[o];if(s!==void 0)return s.exports;var c=n[o]={exports:{}};return r[o].call(c.exports,c,c.exports,i),c.exports}i.m=r,function(){i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,{a:s}),s}}(),function(){i.d=function(o,s){for(var c in s)i.o(s,c)&&!i.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:s[c]})}}(),function(){i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)}}(),function(){i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}();var a=i("./src/index.js");return a}()})})(Z5);var m_e=Z5.exports;const y_e=gi(m_e);var Q5={exports:{}},mb={exports:{}};const __e={},x_e=Object.freeze(Object.defineProperty({__proto__:null,default:__e},Symbol.toStringTag,{value:"Module"})),J5=uY(x_e);var $M;function Ht(){return $M||($M=1,function(t,e){(function(r,n){t.exports=n()})(st,function(){var r=r||function(n,i){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof st<"u"&&st.crypto&&(a=st.crypto),!a&&typeof od=="function")try{a=J5}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function g(){}return function(x){var b;return g.prototype=x,b=new g,g.prototype=null,b}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(g){var x=s(this);return g&&x.mixIn(g),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var x in g)g.hasOwnProperty(x)&&(this[x]=g[x]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(g,x){g=this.words=g||[],x!=i?this.sigBytes=x:this.sigBytes=g.length*4},toString:function(g){return(g||d).stringify(this)},concat:function(g){var x=this.words,b=g.words,S=this.sigBytes,w=g.sigBytes;if(this.clamp(),S%4)for(var A=0;A<w;A++){var C=b[A>>>2]>>>24-A%4*8&255;x[S+A>>>2]|=C<<24-(S+A)%4*8}else for(var O=0;O<w;O+=4)x[S+O>>>2]=b[O>>>2];return this.sigBytes+=w,this},clamp:function(){var g=this.words,x=this.sigBytes;g[x>>>2]&=4294967295<<32-x%4*8,g.length=n.ceil(x/4)},clone:function(){var g=u.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var x=[],b=0;b<g;b+=4)x.push(o());return new f.init(x,g)}}),h=c.enc={},d=h.Hex={stringify:function(g){for(var x=g.words,b=g.sigBytes,S=[],w=0;w<b;w++){var A=x[w>>>2]>>>24-w%4*8&255;S.push((A>>>4).toString(16)),S.push((A&15).toString(16))}return S.join("")},parse:function(g){for(var x=g.length,b=[],S=0;S<x;S+=2)b[S>>>3]|=parseInt(g.substr(S,2),16)<<24-S%8*4;return new f.init(b,x/2)}},p=h.Latin1={stringify:function(g){for(var x=g.words,b=g.sigBytes,S=[],w=0;w<b;w++){var A=x[w>>>2]>>>24-w%4*8&255;S.push(String.fromCharCode(A))}return S.join("")},parse:function(g){for(var x=g.length,b=[],S=0;S<x;S++)b[S>>>2]|=(g.charCodeAt(S)&255)<<24-S%4*8;return new f.init(b,x)}},v=h.Utf8={stringify:function(g){try{return decodeURIComponent(escape(p.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return p.parse(unescape(encodeURIComponent(g)))}},y=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=v.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var x,b=this._data,S=b.words,w=b.sigBytes,A=this.blockSize,C=A*4,O=w/C;g?O=n.ceil(O):O=n.max((O|0)-this._minBufferSize,0);var P=O*A,I=n.min(P*4,w);if(P){for(var R=0;R<P;R+=A)this._doProcessBlock(S,R);x=S.splice(0,P),b.sigBytes-=I}return new f.init(x,I)},clone:function(){var g=u.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0});l.Hasher=y.extend({cfg:u.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(g){return function(x,b){return new g.init(b).finalize(x)}},_createHmacHelper:function(g){return function(x,b){return new m.HMAC.init(g,b).finalize(x)}}});var m=c.algo={};return c}(Math);return r})}(mb)),mb.exports}var yb={exports:{}},VM;function Hy(){return VM||(VM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(n){var i=r,a=i.lib,o=a.Base,s=a.WordArray,c=i.x64={};c.Word=o.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=o.extend({init:function(l,u){l=this.words=l||[],u!=n?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,f=[],h=0;h<u;h++){var d=l[h];f.push(d.high),f.push(d.low)}return s.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),u=l.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return l}})}(),r})}(yb)),yb.exports}var _b={exports:{}},GM;function b_e(){return GM||(GM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,a=i.WordArray,o=a.init,s=a.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],f=0;f<l;f++)u[f>>>2]|=c[f]<<24-f%4*8;o.call(this,u,l)}else o.apply(this,arguments)};s.prototype=a}}(),r.lib.WordArray})}(_b)),_b.exports}var xb={exports:{}},WM;function S_e(){return WM||(WM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],h=0;h<u;h+=2){var d=l[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(d))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return a.create(u,l*2)}},o.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],h=0;h<u;h+=2){var d=s(l[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(d))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=s(c.charCodeAt(f)<<16-f%2*16);return a.create(u,l*2)}};function s(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(xb)),xb.exports}var bb={exports:{}},zM;function Qu(){return zM||(zM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var h=[],d=0;d<u;d+=3)for(var p=l[d>>>2]>>>24-d%4*8&255,v=l[d+1>>>2]>>>24-(d+1)%4*8&255,y=l[d+2>>>2]>>>24-(d+2)%4*8&255,m=p<<16|v<<8|y,g=0;g<4&&d+g*.75<u;g++)h.push(f.charAt(m>>>6*(3-g)&63));var x=f.charAt(64);if(x)for(;h.length%4;)h.push(x);return h.join("")},parse:function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var d=u.charAt(64);if(d){var p=c.indexOf(d);p!==-1&&(l=p)}return s(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(c,l,u){for(var f=[],h=0,d=0;d<l;d++)if(d%4){var p=u[c.charCodeAt(d-1)]<<d%4*2,v=u[c.charCodeAt(d)]>>>6-d%4*2,y=p|v;f[h>>>2]|=y<<24-h%4*8,h++}return a.create(f,h)}}(),r.enc.Base64})}(bb)),bb.exports}var Sb={exports:{}},HM;function E_e(){return HM||(HM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,h=l?this._safe_map:this._map;c.clamp();for(var d=[],p=0;p<f;p+=3)for(var v=u[p>>>2]>>>24-p%4*8&255,y=u[p+1>>>2]>>>24-(p+1)%4*8&255,m=u[p+2>>>2]>>>24-(p+2)%4*8&255,g=v<<16|y<<8|m,x=0;x<4&&p+x*.75<f;x++)d.push(h.charAt(g>>>6*(3-x)&63));var b=h.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<f.length;d++)h[f.charCodeAt(d)]=d}var p=f.charAt(64);if(p){var v=c.indexOf(p);v!==-1&&(u=v)}return s(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(c,l,u){for(var f=[],h=0,d=0;d<l;d++)if(d%4){var p=u[c.charCodeAt(d-1)]<<d%4*2,v=u[c.charCodeAt(d)]>>>6-d%4*2,y=p|v;f[h>>>2]|=y<<24-h%4*8,h++}return a.create(f,h)}}(),r.enc.Base64url})}(Sb)),Sb.exports}var Eb={exports:{}},XM;function Ju(){return XM||(XM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=[];(function(){for(var v=0;v<64;v++)l[v]=n.abs(n.sin(v+1))*4294967296|0})();var u=c.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,y){for(var m=0;m<16;m++){var g=y+m,x=v[g];v[g]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,S=v[y+0],w=v[y+1],A=v[y+2],C=v[y+3],O=v[y+4],P=v[y+5],I=v[y+6],R=v[y+7],F=v[y+8],D=v[y+9],L=v[y+10],U=v[y+11],Y=v[y+12],ee=v[y+13],J=v[y+14],X=v[y+15],M=b[0],V=b[1],$=b[2],j=b[3];M=f(M,V,$,j,S,7,l[0]),j=f(j,M,V,$,w,12,l[1]),$=f($,j,M,V,A,17,l[2]),V=f(V,$,j,M,C,22,l[3]),M=f(M,V,$,j,O,7,l[4]),j=f(j,M,V,$,P,12,l[5]),$=f($,j,M,V,I,17,l[6]),V=f(V,$,j,M,R,22,l[7]),M=f(M,V,$,j,F,7,l[8]),j=f(j,M,V,$,D,12,l[9]),$=f($,j,M,V,L,17,l[10]),V=f(V,$,j,M,U,22,l[11]),M=f(M,V,$,j,Y,7,l[12]),j=f(j,M,V,$,ee,12,l[13]),$=f($,j,M,V,J,17,l[14]),V=f(V,$,j,M,X,22,l[15]),M=h(M,V,$,j,w,5,l[16]),j=h(j,M,V,$,I,9,l[17]),$=h($,j,M,V,U,14,l[18]),V=h(V,$,j,M,S,20,l[19]),M=h(M,V,$,j,P,5,l[20]),j=h(j,M,V,$,L,9,l[21]),$=h($,j,M,V,X,14,l[22]),V=h(V,$,j,M,O,20,l[23]),M=h(M,V,$,j,D,5,l[24]),j=h(j,M,V,$,J,9,l[25]),$=h($,j,M,V,C,14,l[26]),V=h(V,$,j,M,F,20,l[27]),M=h(M,V,$,j,ee,5,l[28]),j=h(j,M,V,$,A,9,l[29]),$=h($,j,M,V,R,14,l[30]),V=h(V,$,j,M,Y,20,l[31]),M=d(M,V,$,j,P,4,l[32]),j=d(j,M,V,$,F,11,l[33]),$=d($,j,M,V,U,16,l[34]),V=d(V,$,j,M,J,23,l[35]),M=d(M,V,$,j,w,4,l[36]),j=d(j,M,V,$,O,11,l[37]),$=d($,j,M,V,R,16,l[38]),V=d(V,$,j,M,L,23,l[39]),M=d(M,V,$,j,ee,4,l[40]),j=d(j,M,V,$,S,11,l[41]),$=d($,j,M,V,C,16,l[42]),V=d(V,$,j,M,I,23,l[43]),M=d(M,V,$,j,D,4,l[44]),j=d(j,M,V,$,Y,11,l[45]),$=d($,j,M,V,X,16,l[46]),V=d(V,$,j,M,A,23,l[47]),M=p(M,V,$,j,S,6,l[48]),j=p(j,M,V,$,R,10,l[49]),$=p($,j,M,V,J,15,l[50]),V=p(V,$,j,M,P,21,l[51]),M=p(M,V,$,j,Y,6,l[52]),j=p(j,M,V,$,C,10,l[53]),$=p($,j,M,V,L,15,l[54]),V=p(V,$,j,M,w,21,l[55]),M=p(M,V,$,j,F,6,l[56]),j=p(j,M,V,$,X,10,l[57]),$=p($,j,M,V,I,15,l[58]),V=p(V,$,j,M,ee,21,l[59]),M=p(M,V,$,j,O,6,l[60]),j=p(j,M,V,$,U,10,l[61]),$=p($,j,M,V,A,15,l[62]),V=p(V,$,j,M,D,21,l[63]),b[0]=b[0]+M|0,b[1]=b[1]+V|0,b[2]=b[2]+$|0,b[3]=b[3]+j|0},_doFinalize:function(){var v=this._data,y=v.words,m=this._nDataBytes*8,g=v.sigBytes*8;y[g>>>5]|=128<<24-g%32;var x=n.floor(m/4294967296),b=m;y[(g+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y[(g+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,v.sigBytes=(y.length+1)*4,this._process();for(var S=this._hash,w=S.words,A=0;A<4;A++){var C=w[A];w[A]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return S},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v}});function f(v,y,m,g,x,b,S){var w=v+(y&m|~y&g)+x+S;return(w<<b|w>>>32-b)+y}function h(v,y,m,g,x,b,S){var w=v+(y&g|m&~g)+x+S;return(w<<b|w>>>32-b)+y}function d(v,y,m,g,x,b,S){var w=v+(y^m^g)+x+S;return(w<<b|w>>>32-b)+y}function p(v,y,m,g,x,b,S){var w=v+(m^(y|~g))+x+S;return(w<<b|w>>>32-b)+y}i.MD5=s._createHelper(u),i.HmacMD5=s._createHmacHelper(u)}(Math),r.MD5})}(Eb)),Eb.exports}var wb={exports:{}},YM;function eU(){return YM||(YM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=i.Hasher,s=n.algo,c=[],l=s.SHA1=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,d=h[0],p=h[1],v=h[2],y=h[3],m=h[4],g=0;g<80;g++){if(g<16)c[g]=u[f+g]|0;else{var x=c[g-3]^c[g-8]^c[g-14]^c[g-16];c[g]=x<<1|x>>>31}var b=(d<<5|d>>>27)+m+c[g];g<20?b+=(p&v|~p&y)+1518500249:g<40?b+=(p^v^y)+1859775393:g<60?b+=(p&v|p&y|v&y)-1894007588:b+=(p^v^y)-899497514,m=y,y=v,v=p<<30|p>>>2,p=d,d=b}h[0]=h[0]+d|0,h[1]=h[1]+p|0,h[2]=h[2]+v|0,h[3]=h[3]+y|0,h[4]=h[4]+m|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,d=u.sigBytes*8;return f[d>>>5]|=128<<24-d%32,f[(d+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(d+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=o._createHelper(l),n.HmacSHA1=o._createHmacHelper(l)}(),r.SHA1})}(wb)),wb.exports}var Ab={exports:{}},qM;function C2(){return qM||(qM=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=[],u=[];(function(){function d(m){for(var g=n.sqrt(m),x=2;x<=g;x++)if(!(m%x))return!1;return!0}function p(m){return(m-(m|0))*4294967296|0}for(var v=2,y=0;y<64;)d(v)&&(y<8&&(l[y]=p(n.pow(v,1/2))),u[y]=p(n.pow(v,1/3)),y++),v++})();var f=[],h=c.SHA256=s.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(d,p){for(var v=this._hash.words,y=v[0],m=v[1],g=v[2],x=v[3],b=v[4],S=v[5],w=v[6],A=v[7],C=0;C<64;C++){if(C<16)f[C]=d[p+C]|0;else{var O=f[C-15],P=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,I=f[C-2],R=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;f[C]=P+f[C-7]+R+f[C-16]}var F=b&S^~b&w,D=y&m^y&g^m&g,L=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),U=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),Y=A+U+F+u[C]+f[C],ee=L+D;A=w,w=S,S=b,b=x+Y|0,x=g,g=m,m=y,y=Y+ee|0}v[0]=v[0]+y|0,v[1]=v[1]+m|0,v[2]=v[2]+g|0,v[3]=v[3]+x|0,v[4]=v[4]+b|0,v[5]=v[5]+S|0,v[6]=v[6]+w|0,v[7]=v[7]+A|0},_doFinalize:function(){var d=this._data,p=d.words,v=this._nDataBytes*8,y=d.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=n.floor(v/4294967296),p[(y+64>>>9<<4)+15]=v,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});i.SHA256=s._createHelper(h),i.HmacSHA256=s._createHmacHelper(h)}(Math),r.SHA256})}(Ab)),Ab.exports}var Cb={exports:{}},KM;function w_e(){return KM||(KM=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),C2())})(st,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.algo,s=o.SHA256,c=o.SHA224=s.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=s._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=s._createHelper(c),n.HmacSHA224=s._createHmacHelper(c)}(),r.SHA224})}(Cb)),Cb.exports}var Tb={exports:{}},ZM;function tU(){return ZM||(ZM=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hy())})(st,function(r){return function(){var n=r,i=n.lib,a=i.Hasher,o=n.x64,s=o.Word,c=o.WordArray,l=n.algo;function u(){return s.create.apply(s,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var p=0;p<80;p++)h[p]=u()})();var d=l.SHA512=a.extend({_doReset:function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,v){for(var y=this._hash.words,m=y[0],g=y[1],x=y[2],b=y[3],S=y[4],w=y[5],A=y[6],C=y[7],O=m.high,P=m.low,I=g.high,R=g.low,F=x.high,D=x.low,L=b.high,U=b.low,Y=S.high,ee=S.low,J=w.high,X=w.low,M=A.high,V=A.low,$=C.high,j=C.low,te=O,ie=P,de=I,he=R,Ee=F,Oe=D,ye=L,Ae=U,_e=Y,we=ee,$e=J,Xe=X,ke=M,at=V,vt=$,gt=j,tt=0;tt<80;tt++){var ot,dt,Xt=h[tt];if(tt<16)dt=Xt.high=p[v+tt*2]|0,ot=Xt.low=p[v+tt*2+1]|0;else{var rr=h[tt-15],qt=rr.high,Vt=rr.low,bt=(qt>>>1|Vt<<31)^(qt>>>8|Vt<<24)^qt>>>7,or=(Vt>>>1|qt<<31)^(Vt>>>8|qt<<24)^(Vt>>>7|qt<<25),ge=h[tt-2],Se=ge.high,Re=ge.low,He=(Se>>>19|Re<<13)^(Se<<3|Re>>>29)^Se>>>6,je=(Re>>>19|Se<<13)^(Re<<3|Se>>>29)^(Re>>>6|Se<<26),rt=h[tt-7],er=rt.high,wr=rt.low,Rn=h[tt-16],In=Rn.high,yr=Rn.low;ot=or+wr,dt=bt+er+(ot>>>0<or>>>0?1:0),ot=ot+je,dt=dt+He+(ot>>>0<je>>>0?1:0),ot=ot+yr,dt=dt+In+(ot>>>0<yr>>>0?1:0),Xt.high=dt,Xt.low=ot}var Ji=_e&$e^~_e&ke,ni=we&Xe^~we&at,gn=te&de^te&Ee^de&Ee,ea=ie&he^ie&Oe^he&Oe,xa=(te>>>28|ie<<4)^(te<<30|ie>>>2)^(te<<25|ie>>>7),xo=(ie>>>28|te<<4)^(ie<<30|te>>>2)^(ie<<25|te>>>7),yi=(_e>>>14|we<<18)^(_e>>>18|we<<14)^(_e<<23|we>>>9),Is=(we>>>14|_e<<18)^(we>>>18|_e<<14)^(we<<23|_e>>>9),_i=f[tt],Ga=_i.high,ii=_i.low,Hr=gt+Is,Li=vt+yi+(Hr>>>0<gt>>>0?1:0),Hr=Hr+ni,Li=Li+Ji+(Hr>>>0<ni>>>0?1:0),Hr=Hr+ii,Li=Li+Ga+(Hr>>>0<ii>>>0?1:0),Hr=Hr+ot,Li=Li+dt+(Hr>>>0<ot>>>0?1:0),Ul=xo+ea,sh=xa+gn+(Ul>>>0<xo>>>0?1:0);vt=ke,gt=at,ke=$e,at=Xe,$e=_e,Xe=we,we=Ae+Hr|0,_e=ye+Li+(we>>>0<Ae>>>0?1:0)|0,ye=Ee,Ae=Oe,Ee=de,Oe=he,de=te,he=ie,ie=Hr+Ul|0,te=Li+sh+(ie>>>0<Hr>>>0?1:0)|0}P=m.low=P+ie,m.high=O+te+(P>>>0<ie>>>0?1:0),R=g.low=R+he,g.high=I+de+(R>>>0<he>>>0?1:0),D=x.low=D+Oe,x.high=F+Ee+(D>>>0<Oe>>>0?1:0),U=b.low=U+Ae,b.high=L+ye+(U>>>0<Ae>>>0?1:0),ee=S.low=ee+we,S.high=Y+_e+(ee>>>0<we>>>0?1:0),X=w.low=X+Xe,w.high=J+$e+(X>>>0<Xe>>>0?1:0),V=A.low=V+at,A.high=M+ke+(V>>>0<at>>>0?1:0),j=C.low=j+gt,C.high=$+vt+(j>>>0<gt>>>0?1:0)},_doFinalize:function(){var p=this._data,v=p.words,y=this._nDataBytes*8,m=p.sigBytes*8;v[m>>>5]|=128<<24-m%32,v[(m+128>>>10<<5)+30]=Math.floor(y/4294967296),v[(m+128>>>10<<5)+31]=y,p.sigBytes=v.length*4,this._process();var g=this._hash.toX32();return g},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});n.SHA512=a._createHelper(d),n.HmacSHA512=a._createHmacHelper(d)}(),r.SHA512})}(Tb)),Tb.exports}var Ob={exports:{}},QM;function A_e(){return QM||(QM=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hy(),tU())})(st,function(r){return function(){var n=r,i=n.x64,a=i.Word,o=i.WordArray,s=n.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l)}(),r.SHA384})}(Ob)),Ob.exports}var Pb={exports:{}},JM;function C_e(){return JM||(JM=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hy())})(st,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.x64,l=c.Word,u=i.algo,f=[],h=[],d=[];(function(){for(var y=1,m=0,g=0;g<24;g++){f[y+5*m]=(g+1)*(g+2)/2%64;var x=m%5,b=(2*y+3*m)%5;y=x,m=b}for(var y=0;y<5;y++)for(var m=0;m<5;m++)h[y+5*m]=m+(2*y+3*m)%5*5;for(var S=1,w=0;w<24;w++){for(var A=0,C=0,O=0;O<7;O++){if(S&1){var P=(1<<O)-1;P<32?C^=1<<P:A^=1<<P-32}S&128?S=S<<1^113:S<<=1}d[w]=l.create(A,C)}})();var p=[];(function(){for(var y=0;y<25;y++)p[y]=l.create()})();var v=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],m=0;m<25;m++)y[m]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,m){for(var g=this._state,x=this.blockSize/2,b=0;b<x;b++){var S=y[m+2*b],w=y[m+2*b+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;var A=g[b];A.high^=w,A.low^=S}for(var C=0;C<24;C++){for(var O=0;O<5;O++){for(var P=0,I=0,R=0;R<5;R++){var A=g[O+5*R];P^=A.high,I^=A.low}var F=p[O];F.high=P,F.low=I}for(var O=0;O<5;O++)for(var D=p[(O+4)%5],L=p[(O+1)%5],U=L.high,Y=L.low,P=D.high^(U<<1|Y>>>31),I=D.low^(Y<<1|U>>>31),R=0;R<5;R++){var A=g[O+5*R];A.high^=P,A.low^=I}for(var ee=1;ee<25;ee++){var P,I,A=g[ee],J=A.high,X=A.low,M=f[ee];M<32?(P=J<<M|X>>>32-M,I=X<<M|J>>>32-M):(P=X<<M-32|J>>>64-M,I=J<<M-32|X>>>64-M);var V=p[h[ee]];V.high=P,V.low=I}var $=p[0],j=g[0];$.high=j.high,$.low=j.low;for(var O=0;O<5;O++)for(var R=0;R<5;R++){var ee=O+5*R,A=g[ee],te=p[ee],ie=p[(O+1)%5+5*R],de=p[(O+2)%5+5*R];A.high=te.high^~ie.high&de.high,A.low=te.low^~ie.low&de.low}var A=g[0],he=d[C];A.high^=he.high,A.low^=he.low}},_doFinalize:function(){var y=this._data,m=y.words;this._nDataBytes*8;var g=y.sigBytes*8,x=this.blockSize*32;m[g>>>5]|=1<<24-g%32,m[(n.ceil((g+1)/x)*x>>>5)-1]|=128,y.sigBytes=m.length*4,this._process();for(var b=this._state,S=this.cfg.outputLength/8,w=S/8,A=[],C=0;C<w;C++){var O=b[C],P=O.high,I=O.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,A.push(I),A.push(P)}return new o.init(A,S)},clone:function(){for(var y=s.clone.call(this),m=y._state=this._state.slice(0),g=0;g<25;g++)m[g]=m[g].clone();return y}});i.SHA3=s._createHelper(v),i.HmacSHA3=s._createHmacHelper(v)}(Math),r.SHA3})}(Pb)),Pb.exports}var Rb={exports:{}},eL;function T_e(){return eL||(eL=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),v=c.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,A){for(var C=0;C<16;C++){var O=A+C,P=w[O];w[O]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var I=this._hash.words,R=d.words,F=p.words,D=l.words,L=u.words,U=f.words,Y=h.words,ee,J,X,M,V,$,j,te,ie,de;$=ee=I[0],j=J=I[1],te=X=I[2],ie=M=I[3],de=V=I[4];for(var he,C=0;C<80;C+=1)he=ee+w[A+D[C]]|0,C<16?he+=y(J,X,M)+R[0]:C<32?he+=m(J,X,M)+R[1]:C<48?he+=g(J,X,M)+R[2]:C<64?he+=x(J,X,M)+R[3]:he+=b(J,X,M)+R[4],he=he|0,he=S(he,U[C]),he=he+V|0,ee=V,V=M,M=S(X,10),X=J,J=he,he=$+w[A+L[C]]|0,C<16?he+=b(j,te,ie)+F[0]:C<32?he+=x(j,te,ie)+F[1]:C<48?he+=g(j,te,ie)+F[2]:C<64?he+=m(j,te,ie)+F[3]:he+=y(j,te,ie)+F[4],he=he|0,he=S(he,Y[C]),he=he+de|0,$=de,de=ie,ie=S(te,10),te=j,j=he;he=I[1]+X+ie|0,I[1]=I[2]+M+de|0,I[2]=I[3]+V+$|0,I[3]=I[4]+ee+j|0,I[4]=I[0]+J+te|0,I[0]=he},_doFinalize:function(){var w=this._data,A=w.words,C=this._nDataBytes*8,O=w.sigBytes*8;A[O>>>5]|=128<<24-O%32,A[(O+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,w.sigBytes=(A.length+1)*4,this._process();for(var P=this._hash,I=P.words,R=0;R<5;R++){var F=I[R];I[R]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return P},clone:function(){var w=s.clone.call(this);return w._hash=this._hash.clone(),w}});function y(w,A,C){return w^A^C}function m(w,A,C){return w&A|~w&C}function g(w,A,C){return(w|~A)^C}function x(w,A,C){return w&C|A&~C}function b(w,A,C){return w^(A|~C)}function S(w,A){return w<<A|w>>>32-A}i.RIPEMD160=s._createHelper(v),i.HmacRIPEMD160=s._createHmacHelper(v)}(),r.RIPEMD160})}(Rb)),Rb.exports}var Ib={exports:{}},tL;function T2(){return tL||(tL=1,function(t,e){(function(r,n){t.exports=n(Ht())})(st,function(r){(function(){var n=r,i=n.lib,a=i.Base,o=n.enc,s=o.Utf8,c=n.algo;c.HMAC=a.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=s.parse(u));var f=l.blockSize,h=f*4;u.sigBytes>h&&(u=l.finalize(u)),u.clamp();for(var d=this._oKey=u.clone(),p=this._iKey=u.clone(),v=d.words,y=p.words,m=0;m<f;m++)v[m]^=1549556828,y[m]^=909522486;d.sigBytes=p.sigBytes=h,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,f=u.finalize(l);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(Ib)),Ib.exports}var Fb={exports:{}},rL;function O_e(){return rL||(rL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),C2(),T2())})(st,function(r){return function(){var n=r,i=n.lib,a=i.Base,o=i.WordArray,s=n.algo,c=s.SHA256,l=s.HMAC,u=s.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var d=this.cfg,p=l.create(d.hasher,f),v=o.create(),y=o.create([1]),m=v.words,g=y.words,x=d.keySize,b=d.iterations;m.length<x;){var S=p.update(h).finalize(y);p.reset();for(var w=S.words,A=w.length,C=S,O=1;O<b;O++){C=p.finalize(C),p.reset();for(var P=C.words,I=0;I<A;I++)w[I]^=P[I]}v.concat(S),g[0]++}return v.sigBytes=x*4,v}});n.PBKDF2=function(f,h,d){return u.create(d).compute(f,h)}}(),r.PBKDF2})}(Fb)),Fb.exports}var kb={exports:{}},nL;function Ll(){return nL||(nL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),eU(),T2())})(st,function(r){return function(){var n=r,i=n.lib,a=i.Base,o=i.WordArray,s=n.algo,c=s.MD5,l=s.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,d=this.cfg,p=d.hasher.create(),v=o.create(),y=v.words,m=d.keySize,g=d.iterations;y.length<m;){h&&p.update(h),h=p.update(u).finalize(f),p.reset();for(var x=1;x<g;x++)h=p.finalize(h),p.reset();v.concat(h)}return v.sigBytes=m*4,v}});n.EvpKDF=function(u,f,h){return l.create(h).compute(u,f)}}(),r.EvpKDF})}(kb)),kb.exports}var Db={exports:{}},iL;function Hn(){return iL||(iL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Ll())})(st,function(r){r.lib.Cipher||function(n){var i=r,a=i.lib,o=a.Base,s=a.WordArray,c=a.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,f=i.algo,h=f.EvpKDF,d=a.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(P,I){return this.create(this._ENC_XFORM_MODE,P,I)},createDecryptor:function(P,I){return this.create(this._DEC_XFORM_MODE,P,I)},init:function(P,I,R){this.cfg=this.cfg.extend(R),this._xformMode=P,this._key=I,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){P&&this._append(P);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function P(I){return typeof I=="string"?O:w}return function(I){return{encrypt:function(R,F,D){return P(F).encrypt(I,R,F,D)},decrypt:function(R,F,D){return P(F).decrypt(I,R,F,D)}}}}()});a.StreamCipher=d.extend({_doFinalize:function(){var P=this._process(!0);return P},blockSize:1});var p=i.mode={},v=a.BlockCipherMode=o.extend({createEncryptor:function(P,I){return this.Encryptor.create(P,I)},createDecryptor:function(P,I){return this.Decryptor.create(P,I)},init:function(P,I){this._cipher=P,this._iv=I}}),y=p.CBC=function(){var P=v.extend();P.Encryptor=P.extend({processBlock:function(R,F){var D=this._cipher,L=D.blockSize;I.call(this,R,F,L),D.encryptBlock(R,F),this._prevBlock=R.slice(F,F+L)}}),P.Decryptor=P.extend({processBlock:function(R,F){var D=this._cipher,L=D.blockSize,U=R.slice(F,F+L);D.decryptBlock(R,F),I.call(this,R,F,L),this._prevBlock=U}});function I(R,F,D){var L,U=this._iv;U?(L=U,this._iv=n):L=this._prevBlock;for(var Y=0;Y<D;Y++)R[F+Y]^=L[Y]}return P}(),m=i.pad={},g=m.Pkcs7={pad:function(P,I){for(var R=I*4,F=R-P.sigBytes%R,D=F<<24|F<<16|F<<8|F,L=[],U=0;U<F;U+=4)L.push(D);var Y=s.create(L,F);P.concat(Y)},unpad:function(P){var I=P.words[P.sigBytes-1>>>2]&255;P.sigBytes-=I}};a.BlockCipher=d.extend({cfg:d.cfg.extend({mode:y,padding:g}),reset:function(){var P;d.reset.call(this);var I=this.cfg,R=I.iv,F=I.mode;this._xformMode==this._ENC_XFORM_MODE?P=F.createEncryptor:(P=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==P?this._mode.init(this,R&&R.words):(this._mode=P.call(F,this,R&&R.words),this._mode.__creator=P)},_doProcessBlock:function(P,I){this._mode.processBlock(P,I)},_doFinalize:function(){var P,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),P=this._process(!0)):(P=this._process(!0),I.unpad(P)),P},blockSize:128/32});var x=a.CipherParams=o.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),b=i.format={},S=b.OpenSSL={stringify:function(P){var I,R=P.ciphertext,F=P.salt;return F?I=s.create([1398893684,1701076831]).concat(F).concat(R):I=R,I.toString(u)},parse:function(P){var I,R=u.parse(P),F=R.words;return F[0]==1398893684&&F[1]==1701076831&&(I=s.create(F.slice(2,4)),F.splice(0,4),R.sigBytes-=16),x.create({ciphertext:R,salt:I})}},w=a.SerializableCipher=o.extend({cfg:o.extend({format:S}),encrypt:function(P,I,R,F){F=this.cfg.extend(F);var D=P.createEncryptor(R,F),L=D.finalize(I),U=D.cfg;return x.create({ciphertext:L,key:R,iv:U.iv,algorithm:P,mode:U.mode,padding:U.padding,blockSize:P.blockSize,formatter:F.format})},decrypt:function(P,I,R,F){F=this.cfg.extend(F),I=this._parse(I,F.format);var D=P.createDecryptor(R,F).finalize(I.ciphertext);return D},_parse:function(P,I){return typeof P=="string"?I.parse(P,this):P}}),A=i.kdf={},C=A.OpenSSL={execute:function(P,I,R,F,D){if(F||(F=s.random(64/8)),D)var L=h.create({keySize:I+R,hasher:D}).compute(P,F);else var L=h.create({keySize:I+R}).compute(P,F);var U=s.create(L.words.slice(I),R*4);return L.sigBytes=I*4,x.create({key:L,iv:U,salt:F})}},O=a.PasswordBasedCipher=w.extend({cfg:w.cfg.extend({kdf:C}),encrypt:function(P,I,R,F){F=this.cfg.extend(F);var D=F.kdf.execute(R,P.keySize,P.ivSize,F.salt,F.hasher);F.iv=D.iv;var L=w.encrypt.call(this,P,I,D.key,F);return L.mixIn(D),L},decrypt:function(P,I,R,F){F=this.cfg.extend(F),I=this._parse(I,F.format);var D=F.kdf.execute(R,P.keySize,P.ivSize,I.salt,F.hasher);F.iv=D.iv;var L=w.decrypt.call(this,P,I,D.key,F);return L}})}()})}(Db)),Db.exports}var Mb={exports:{}},aL;function P_e(){return aL||(aL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize;i.call(this,a,o,c,s),this._prevBlock=a.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=a.slice(o,o+c);i.call(this,a,o,c,s),this._prevBlock=l}});function i(a,o,s,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var f=0;f<s;f++)a[o+f]^=l[f]}return n}(),r.mode.CFB})}(Mb)),Mb.exports}var Lb={exports:{}},oL;function R_e(){return oL||(oL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var f=u.slice(0);s.encryptBlock(f,0),u[c-1]=u[c-1]+1|0;for(var h=0;h<c;h++)a[o+h]^=f[h]}});return n.Decryptor=i,n}(),r.mode.CTR})}(Lb)),Lb.exports}var Bb={exports:{}},sL;function I_e(){return sL||(sL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(s){if((s>>24&255)===255){var c=s>>16&255,l=s>>8&255,u=s&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,s=0,s+=c<<16,s+=l<<8,s+=u}else s+=1<<24;return s}function a(s){return(s[0]=i(s[0]))===0&&(s[1]=i(s[1])),s}var o=n.Encryptor=n.extend({processBlock:function(s,c){var l=this._cipher,u=l.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),a(h);var d=h.slice(0);l.encryptBlock(d,0);for(var p=0;p<u;p++)s[c+p]^=d[p]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(Bb)),Bb.exports}var Nb={exports:{}},lL;function F_e(){return lL||(lL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var f=0;f<c;f++)a[o+f]^=u[f]}});return n.Decryptor=i,n}(),r.mode.OFB})}(Nb)),Nb.exports}var Ub={exports:{}},uL;function k_e(){return uL||(uL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,a){this._cipher.encryptBlock(i,a)}}),n.Decryptor=n.extend({processBlock:function(i,a){this._cipher.decryptBlock(i,a)}}),n}(),r.mode.ECB})}(Ub)),Ub.exports}var jb={exports:{}},cL;function D_e(){return cL||(cL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.pad.AnsiX923={pad:function(n,i){var a=n.sigBytes,o=i*4,s=o-a%o,c=a+s-1;n.clamp(),n.words[c>>>2]|=s<<24-c%4*8,n.sigBytes+=s},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(jb)),jb.exports}var $b={exports:{}},fL;function M_e(){return fL||(fL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.pad.Iso10126={pad:function(n,i){var a=i*4,o=a-n.sigBytes%a;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}($b)),$b.exports}var Vb={exports:{}},hL;function L_e(){return hL||(hL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Vb)),Vb.exports}var Gb={exports:{}},dL;function B_e(){return dL||(dL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.pad.ZeroPadding={pad:function(n,i){var a=i*4;n.clamp(),n.sigBytes+=a-(n.sigBytes%a||a)},unpad:function(n){for(var i=n.words,a=n.sigBytes-1,a=n.sigBytes-1;a>=0;a--)if(i[a>>>2]>>>24-a%4*8&255){n.sigBytes=a+1;break}}},r.pad.ZeroPadding})}(Gb)),Gb.exports}var Wb={exports:{}},pL;function N_e(){return pL||(pL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Wb)),Wb.exports}var zb={exports:{}},vL;function U_e(){return vL||(vL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Hn())})(st,function(r){return function(n){var i=r,a=i.lib,o=a.CipherParams,s=i.enc,c=s.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var f=c.parse(u);return o.create({ciphertext:f})}}}(),r.format.Hex})}(zb)),zb.exports}var Hb={exports:{}},gL;function j_e(){return gL||(gL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Qu(),Ju(),Ll(),Hn())})(st,function(r){return function(){var n=r,i=n.lib,a=i.BlockCipher,o=n.algo,s=[],c=[],l=[],u=[],f=[],h=[],d=[],p=[],v=[],y=[];(function(){for(var x=[],b=0;b<256;b++)b<128?x[b]=b<<1:x[b]=b<<1^283;for(var S=0,w=0,b=0;b<256;b++){var A=w^w<<1^w<<2^w<<3^w<<4;A=A>>>8^A&255^99,s[S]=A,c[A]=S;var C=x[S],O=x[C],P=x[O],I=x[A]*257^A*16843008;l[S]=I<<24|I>>>8,u[S]=I<<16|I>>>16,f[S]=I<<8|I>>>24,h[S]=I;var I=P*16843009^O*65537^C*257^S*16843008;d[A]=I<<24|I>>>8,p[A]=I<<16|I>>>16,v[A]=I<<8|I>>>24,y[A]=I,S?(S=C^x[x[x[P^C]]],w^=x[x[w]]):S=w=1}})();var m=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=a.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,S=b.words,w=b.sigBytes/4,A=this._nRounds=w+6,C=(A+1)*4,O=this._keySchedule=[],P=0;P<C;P++)P<w?O[P]=S[P]:(x=O[P-1],P%w?w>6&&P%w==4&&(x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255]):(x=x<<8|x>>>24,x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255],x^=m[P/w|0]<<24),O[P]=O[P-w]^x);for(var I=this._invKeySchedule=[],R=0;R<C;R++){var P=C-R;if(R%4)var x=O[P];else var x=O[P-4];R<4||P<=4?I[R]=x:I[R]=d[s[x>>>24]]^p[s[x>>>16&255]]^v[s[x>>>8&255]]^y[s[x&255]]}}},encryptBlock:function(x,b){this._doCryptBlock(x,b,this._keySchedule,l,u,f,h,s)},decryptBlock:function(x,b){var S=x[b+1];x[b+1]=x[b+3],x[b+3]=S,this._doCryptBlock(x,b,this._invKeySchedule,d,p,v,y,c);var S=x[b+1];x[b+1]=x[b+3],x[b+3]=S},_doCryptBlock:function(x,b,S,w,A,C,O,P){for(var I=this._nRounds,R=x[b]^S[0],F=x[b+1]^S[1],D=x[b+2]^S[2],L=x[b+3]^S[3],U=4,Y=1;Y<I;Y++){var ee=w[R>>>24]^A[F>>>16&255]^C[D>>>8&255]^O[L&255]^S[U++],J=w[F>>>24]^A[D>>>16&255]^C[L>>>8&255]^O[R&255]^S[U++],X=w[D>>>24]^A[L>>>16&255]^C[R>>>8&255]^O[F&255]^S[U++],M=w[L>>>24]^A[R>>>16&255]^C[F>>>8&255]^O[D&255]^S[U++];R=ee,F=J,D=X,L=M}var ee=(P[R>>>24]<<24|P[F>>>16&255]<<16|P[D>>>8&255]<<8|P[L&255])^S[U++],J=(P[F>>>24]<<24|P[D>>>16&255]<<16|P[L>>>8&255]<<8|P[R&255])^S[U++],X=(P[D>>>24]<<24|P[L>>>16&255]<<16|P[R>>>8&255]<<8|P[F&255])^S[U++],M=(P[L>>>24]<<24|P[R>>>16&255]<<16|P[F>>>8&255]<<8|P[D&255])^S[U++];x[b]=ee,x[b+1]=J,x[b+2]=X,x[b+3]=M},keySize:256/32});n.AES=a._createHelper(g)}(),r.AES})}(Hb)),Hb.exports}var Xb={exports:{}},mL;function $_e(){return mL||(mL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Qu(),Ju(),Ll(),Hn())})(st,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=i.BlockCipher,s=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=o.extend({_doReset:function(){for(var m=this._key,g=m.words,x=[],b=0;b<56;b++){var S=c[b]-1;x[b]=g[S>>>5]>>>31-S%32&1}for(var w=this._subKeys=[],A=0;A<16;A++){for(var C=w[A]=[],O=u[A],b=0;b<24;b++)C[b/6|0]|=x[(l[b]-1+O)%28]<<31-b%6,C[4+(b/6|0)]|=x[28+(l[b+24]-1+O)%28]<<31-b%6;C[0]=C[0]<<1|C[0]>>>31;for(var b=1;b<7;b++)C[b]=C[b]>>>(b-1)*4+3;C[7]=C[7]<<5|C[7]>>>27}for(var P=this._invSubKeys=[],b=0;b<16;b++)P[b]=w[15-b]},encryptBlock:function(m,g){this._doCryptBlock(m,g,this._subKeys)},decryptBlock:function(m,g){this._doCryptBlock(m,g,this._invSubKeys)},_doCryptBlock:function(m,g,x){this._lBlock=m[g],this._rBlock=m[g+1],p.call(this,4,252645135),p.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),p.call(this,1,1431655765);for(var b=0;b<16;b++){for(var S=x[b],w=this._lBlock,A=this._rBlock,C=0,O=0;O<8;O++)C|=f[O][((A^S[O])&h[O])>>>0];this._lBlock=A,this._rBlock=w^C}var P=this._lBlock;this._lBlock=this._rBlock,this._rBlock=P,p.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),m[g]=this._lBlock,m[g+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(m,g){var x=(this._lBlock>>>m^this._rBlock)&g;this._rBlock^=x,this._lBlock^=x<<m}function v(m,g){var x=(this._rBlock>>>m^this._lBlock)&g;this._lBlock^=x,this._rBlock^=x<<m}n.DES=o._createHelper(d);var y=s.TripleDES=o.extend({_doReset:function(){var m=this._key,g=m.words;if(g.length!==2&&g.length!==4&&g.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=g.slice(0,2),b=g.length<4?g.slice(0,2):g.slice(2,4),S=g.length<6?g.slice(0,2):g.slice(4,6);this._des1=d.createEncryptor(a.create(x)),this._des2=d.createEncryptor(a.create(b)),this._des3=d.createEncryptor(a.create(S))},encryptBlock:function(m,g){this._des1.encryptBlock(m,g),this._des2.decryptBlock(m,g),this._des3.encryptBlock(m,g)},decryptBlock:function(m,g){this._des3.decryptBlock(m,g),this._des2.encryptBlock(m,g),this._des1.decryptBlock(m,g)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(y)}(),r.TripleDES})}(Xb)),Xb.exports}var Yb={exports:{}},yL;function V_e(){return yL||(yL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Qu(),Ju(),Ll(),Hn())})(st,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=o.RC4=a.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,d=this._S=[],p=0;p<256;p++)d[p]=p;for(var p=0,v=0;p<256;p++){var y=p%h,m=f[y>>>2]>>>24-y%4*8&255;v=(v+d[p]+m)%256;var g=d[p];d[p]=d[v],d[v]=g}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,f=this._i,h=this._j,d=0,p=0;p<4;p++){f=(f+1)%256,h=(h+u[f])%256;var v=u[f];u[f]=u[h],u[h]=v,d|=u[(u[f]+u[h])%256]<<24-p*8}return this._i=f,this._j=h,d}n.RC4=a._createHelper(s);var l=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});n.RC4Drop=a._createHelper(l)}(),r.RC4})}(Yb)),Yb.exports}var qb={exports:{}},_L;function G_e(){return _L||(_L=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Qu(),Ju(),Ll(),Hn())})(st,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=[],c=[],l=[],u=o.Rabbit=a.extend({_doReset:function(){for(var h=this._key.words,d=this.cfg.iv,p=0;p<4;p++)h[p]=(h[p]<<8|h[p]>>>24)&16711935|(h[p]<<24|h[p]>>>8)&4278255360;var v=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],y=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)y[p]^=v[p+4&7];if(d){var m=d.words,g=m[0],x=m[1],b=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=b>>>16|S&4294901760,A=S<<16|b&65535;y[0]^=b,y[1]^=w,y[2]^=S,y[3]^=A,y[4]^=b,y[5]^=w,y[6]^=S,y[7]^=A;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(h,d){var p=this._X;f.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,h[d+v]^=s[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,d=this._C,p=0;p<8;p++)c[p]=d[p];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<c[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<c[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<c[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<c[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<c[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<c[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<c[6]>>>0?1:0)|0,this._b=d[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var v=h[p]+d[p],y=v&65535,m=v>>>16,g=((y*y>>>17)+y*m>>>15)+m*m,x=((v&4294901760)*v|0)+((v&65535)*v|0);l[p]=g^x}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=a._createHelper(u)}(),r.Rabbit})}(qb)),qb.exports}var Kb={exports:{}},xL;function W_e(){return xL||(xL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Qu(),Ju(),Ll(),Hn())})(st,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=[],c=[],l=[],u=o.RabbitLegacy=a.extend({_doReset:function(){var h=this._key.words,d=this.cfg.iv,p=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)v[y]^=p[y+4&7];if(d){var m=d.words,g=m[0],x=m[1],b=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=b>>>16|S&4294901760,A=S<<16|b&65535;v[0]^=b,v[1]^=w,v[2]^=S,v[3]^=A,v[4]^=b,v[5]^=w,v[6]^=S,v[7]^=A;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(h,d){var p=this._X;f.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,h[d+v]^=s[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,d=this._C,p=0;p<8;p++)c[p]=d[p];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<c[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<c[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<c[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<c[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<c[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<c[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<c[6]>>>0?1:0)|0,this._b=d[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var v=h[p]+d[p],y=v&65535,m=v>>>16,g=((y*y>>>17)+y*m>>>15)+m*m,x=((v&4294901760)*v|0)+((v&65535)*v|0);l[p]=g^x}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=a._createHelper(u)}(),r.RabbitLegacy})}(Kb)),Kb.exports}var Zb={exports:{}},bL;function z_e(){return bL||(bL=1,function(t,e){(function(r,n,i){t.exports=n(Ht(),Qu(),Ju(),Ll(),Hn())})(st,function(r){return function(){var n=r,i=n.lib,a=i.BlockCipher,o=n.algo;const s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(y,m){let g=m>>24&255,x=m>>16&255,b=m>>8&255,S=m&255,w=y.sbox[0][g]+y.sbox[1][x];return w=w^y.sbox[2][b],w=w+y.sbox[3][S],w}function h(y,m,g){let x=m,b=g,S;for(let w=0;w<s;++w)x=x^y.pbox[w],b=f(y,x)^b,S=x,x=b,b=S;return S=x,x=b,b=S,b=b^y.pbox[s],x=x^y.pbox[s+1],{left:x,right:b}}function d(y,m,g){let x=m,b=g,S;for(let w=s+1;w>1;--w)x=x^y.pbox[w],b=f(y,x)^b,S=x,x=b,b=S;return S=x,x=b,b=S,b=b^y.pbox[1],x=x^y.pbox[0],{left:x,right:b}}function p(y,m,g){for(let A=0;A<4;A++){y.sbox[A]=[];for(let C=0;C<256;C++)y.sbox[A][C]=l[A][C]}let x=0;for(let A=0;A<s+2;A++)y.pbox[A]=c[A]^m[x],x++,x>=g&&(x=0);let b=0,S=0,w=0;for(let A=0;A<s+2;A+=2)w=h(y,b,S),b=w.left,S=w.right,y.pbox[A]=b,y.pbox[A+1]=S;for(let A=0;A<4;A++)for(let C=0;C<256;C+=2)w=h(y,b,S),b=w.left,S=w.right,y.sbox[A][C]=b,y.sbox[A][C+1]=S;return!0}var v=o.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,m=y.words,g=y.sigBytes/4;p(u,m,g)}},encryptBlock:function(y,m){var g=h(u,y[m],y[m+1]);y[m]=g.left,y[m+1]=g.right},decryptBlock:function(y,m){var g=d(u,y[m],y[m+1]);y[m]=g.left,y[m+1]=g.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=a._createHelper(v)}(),r.Blowfish})}(Zb)),Zb.exports}(function(t,e){(function(r,n,i){t.exports=n(Ht(),Hy(),b_e(),S_e(),Qu(),E_e(),Ju(),eU(),C2(),w_e(),tU(),A_e(),C_e(),T_e(),T2(),O_e(),Ll(),Hn(),P_e(),R_e(),I_e(),F_e(),k_e(),D_e(),M_e(),L_e(),B_e(),N_e(),U_e(),j_e(),$_e(),V_e(),G_e(),W_e(),z_e())})(st,function(r){return r})})(Q5);var H_e=Q5.exports;const lg=gi(H_e);function X_e(t){const e=new Uint8Array(t),r=[];for(let n=0;n<e.length;n+=4)r.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return lg.lib.WordArray.create(r,e.length)}async function Y_e(t,e,r,n){const i=lg.enc.Hex.parse(e),a=lg.enc.Hex.parse(r),o=X_e(t),s=lg.AES.decrypt({ciphertext:o},i,{iv:a}),c=new Uint8Array(s.sigBytes);for(let l=0;l<s.sigBytes;l++)c[l]=s.words[l>>>2]>>>24-l%4*8&255;return new Blob([c],{type:`video/${n==="mp4"?"mp4":"x-flv"}`})}class q_e{constructor(){qe(this,"videosByKey");qe(this,"currentPlayingVideo","");qe(this,"videoIndex",0);this.videosByKey={},this.currentPlayingVideo=""}preloadVideo(e,r=!1){var c;if(this.videosByKey[e])return;console.info("开始预加载视频",e);const n="video-"+this.videoIndex++,i=document.createElement("div"),a=document.createElement("video"),o=e.endsWith(".flv")?"flv":"mp4";i.setAttribute("id",n),i.style.width="100%",i.style.height="100%",i.style.zIndex="-99",i.style.display="block",i.style.opacity="0",i.style.background="#000",i.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.zIndex="11",a.style.position="absolute",a.style.display="block",a.playsInline=!0,a.controls=!1,a.addEventListener("play",function(){a.controls=!1}),a.addEventListener("pause",function(){a.controls=!1}),a.volume=0;const s=()=>{this.videosByKey[e].events.ended.callbacks.forEach(u=>u())};i.appendChild(a),(c=document.getElementById("videoContainer"))==null||c.appendChild(i),this.videosByKey[e]={player:null,id:n,progressTimer:null,waitCommands:{},events:{ended:{callbacks:[],handler:s}}},r&&(this.videosByKey[e].waitCommands={playVideo:!0,showVideo:!0}),fetch(e).then(l=>l.status>200?null:l.arrayBuffer()).then(async l=>{if(!l)return;const u="ENCRYPTED",f=u.length,h=new Uint8Array(l.slice(0,f));let d=!1;for(let m=0;m<f;m++){if(String.fromCharCode(h[m])!==u[m]){d=!1;break}d=!0}let p;if(d){const m=l.slice(f);p=await Y_e(m,"40e6ad429a13020a07be290c5ef1d7dc7e45e5c4bf34d54a5664282627946e4d","9d6bac74c64ee8714e7959cef75271d0",o)}else p=new Blob([new Uint8Array(l)],{type:`video/${o==="mp4"?"mp4":"x-flv"}`});const v=y_e.createPlayer({type:e.endsWith(".mp4")?"mp4":"flv",url:URL.createObjectURL(p)});v.attachMediaElement(a),v.load();const y={...this.videosByKey[e],player:v};this.videosByKey[e]=y,a.onloadeddata=()=>{const m=Object.keys(y.waitCommands);if(y){const g=document.createElement("canvas"),x=g.getContext("2d");g.width=480,g.height=270,x.drawImage(a,0,0,480,270);const b=g.toDataURL("image/webp",.5);g.remove(),y.poster=b}m.length&&m.forEach(g=>{if(!y){console.log("没有找到视频缓存资源",e);return}this[g](e,y.waitCommands[g])})}})}pauseVideo(e){const r=this.videosByKey[e];r!=null&&r.player&&r.player.pause()}showVideo(e){const r=this.videosByKey[e];if(r!=null&&r.player){const n=document.getElementById(r.id);n&&(n.style.opacity="1",n.style.zIndex="11")}else r?r.waitCommands.showVideo=!0:this.preloadVideo(e,!0)}playVideo(e){const r=this.videosByKey[e];this.currentPlayingVideo=e,r!=null&&r.player?(r.player.play(),this.checkProgress(e)):r?r.waitCommands.playVideo=!0:this.preloadVideo(e,!0)}setLoop(e,r){const n=this.videosByKey[e];if(n!=null&&n.player){const i=document.getElementById(n.id);i&&(i.loop=r)}else n.waitCommands.setLoop=r}seek(e,r){const n=this.videosByKey[e];n!=null&&n.player?n.player.currentTime=r:n.waitCommands.seek=r}backward(e){const r=this.videosByKey[e];r!=null&&r.player&&r.player.currentTime>0&&(r.player.currentTime-=1)}forward(e){const r=this.videosByKey[e];r!=null&&r.player&&(r.player.currentTime+=1)}setVolume(e,r){const n=this.videosByKey[e];n!=null&&n.player?n.player.volume=r:n.waitCommands.setVolume=r}destroy(e,r=!1,n=!1){const i=this.videosByKey[e];if(i!=null&&i.player){i.player.pause(),i.player.volume=0;const a=document.getElementById(i.id);a&&(a.style.opacity="0",a.style.zIndex="-99"),i!=null&&i.progressTimer&&clearTimeout(i.progressTimer),setTimeout(()=>{var o;try{const s=a==null?void 0:a.getElementsByTagName("video");s!=null&&s.length&&((o=i.player)==null||o.destroy())}catch(s){console.warn(s)}setTimeout(()=>{a==null||a.remove()},r?0:500),delete this.videosByKey[e]},r?0:2e3)}}destroyAll(e=!1){Object.keys(this.videosByKey).forEach(r=>{this.destroy(r,e)})}onEnded(e,r){this.videosByKey[e].events.ended.callbacks.push(r)}getDuration(e){const r=this.videosByKey[e];if(r!=null&&r.player)return r.player.duration}destroyExcept(e){Object.keys(this.videosByKey).forEach(r=>{e.includes(r)||this.destroy(r)})}checkProgress(e){const r=this.videosByKey[e];if(r!=null&&r.player){const n=r.player,i=n.currentTime;if(n.duration-i<=.03){clearTimeout(r.progressTimer),r.progressTimer=null,r.events.ended.handler();return}r.progressTimer=setTimeout(()=>{this.checkProgress(e)},100)}}}class K_e{constructor(){qe(this,"sceneManager",new h_e);qe(this,"backlogManager",new Goe(this.sceneManager));qe(this,"animationManager",new d_e);qe(this,"gameplay",new p_e);qe(this,"gameName","");qe(this,"gameKey","");qe(this,"events",new g_e);qe(this,"videoManager",new q_e)}}const H=new K_e,jn=rU(()=>{const t=le.getState().userData;Bu.setItem(H.gameKey,t).then(()=>{Ge.info("写入本地存储")})},100),rm=rU(()=>{Bu.getItem(H.gameKey).then(t=>{if(!t||!iU(t)){Ge.warn("现在重置数据"),jn();return}le.dispatch(VT(t))})},100);function rU(t,e){let r;function n(...i){clearTimeout(r);let a;return r=setTimeout(()=>{a=t.apply(n,i)},e),a}return n}const nU=()=>{const t=le.getState().userData;Bu.setItem(H.gameKey,t).then(()=>{Bu.getItem(H.gameKey).then(e=>{if(!e){jn();return}le.dispatch(VT(e))}),Ge.info("同步本地存储")})};function iU(t){let e=!0;for(const r in ew)t.hasOwnProperty(r)||(e=!1);return e}async function Z_e(){const t=await Bu.getItem(H.gameKey);if(!t||!iU(t)){const e=le.getState().userData;return Ge.warn("现在重置数据"),await Bu.setItem(H.gameKey,e)}else le.dispatch(VT(t))}var Ra=(t=>(t.Game_start_button="Game_start_button",t.Game_achievement_button="Game_achievement_button",t.Game_storyline_button="Game_storyline_button",t.Game_extra_button="Game_extra_button",t.Game_collection_button="Game_collection_button",t.Game_option_button="Game_option_button",t.Game_load_button="Game_load_button",t.Game_continue_button="Game_continue_button",t))(Ra||{}),O2=(t=>(t.Load_back_button="Load_back_button",t))(O2||{}),P2=(t=>(t.Storyline_back_button="Storyline_back_button",t))(P2||{}),R2=(t=>(t.Achievement_back_button="Achievement_back_button",t))(R2||{}),I2=(t=>(t.Extra_back_button="Extra_back_button",t.Extra_bgm_button="Extra_bgm_button",t.Extra_video_button="Extra_video_button",t))(I2||{}),F2=(t=>(t.Extra_title="Extra_title",t.Extra_bg="Extra_bg",t.Extra_bgm_locked_item_bg="Extra_bgm_locked_item_bg",t.Extra_bgm_unlocked_item="Extra_bgm_unlocked_item",t.Extra_video_unlocked_item="Extra_video_unlocked_item",t.Extra_indicator="Extra_indicator",t.Extra_video_locked_item_bg="Extra_video_locked_item_bg",t))(F2||{}),ko=(t=>(t.Collection_title="Collection_title",t.Collection_bg="Collection_bg",t.Collection_img1="Collection_img1",t.Collection_img2="Collection_img2",t.Collection_img3="Collection_img3",t.Collection_detail_bg="Collection_detail_bg",t.Collection_detail_title="Collection_detail_title",t.Collection_detail_dialog_bg="Collection_detail_dialog_bg",t.Collection_detail_dialog_text="Collection_detail_dialog_text",t))(ko||{}),Xy=(t=>(t.Option_back_button="Option_back_button",t))(Xy||{}),k2=(t=>(t.Collection_back_button="Collection_back_button",t.Collection_detail_dialog_prev_button="Collection_detail_dialog_prev_button",t.Collection_detail_dialog_next_button="Collection_detail_dialog_next_button",t))(k2||{}),ua=(t=>(t.Option_title="Option_title",t.Option_bg="Option_bg",t.Option_window_label="Option_window_label",t.Option_text_speed_label="Option_text_speed_label",t.Option_global_volume_label="Option_global_volume_label",t.Option_bg_music_volume_label="Option_bg_music_volume_label",t.Option_effect_volume_label="Option_effect_volume_label",t.Option_voice_volume_label="Option_voice_volume_label",t.Option_voice_slider="Option_voice_slider",t.Option_text_speed_slider="Option_text_speed_slider",t.Option_global_volume_slider="Option_global_volume_slider",t.Option_bg_music_volume_slider="Option_bg_music_volume_slider",t.Option_effect_volume_slider="Option_effect_volume_slider",t.Option_fullscreen_checkbox_label="Option_fullscreen_checkbox_label",t.Option_window_checkbox_label="Option_window_checkbox_label",t.Option_fullscreen_checkbox="Option_fullscreen_checkbox",t.Option_window_checkbox="Option_window_checkbox",t.Option_videoSize1080_checkbox="Option_videoSize1080_checkbox",t.Option_videoSize720_checkbox="Option_videoSize720_checkbox",t.Options_light_slider="Options_light_slider",t))(ua||{}),D2=(t=>(t.Achievement_title="Achievement_title",t))(D2||{}),M2=(t=>(t.Storyline_title="Storyline_title",t))(M2||{}),L2=(t=>(t.Load_bg="Load_bg",t.Load_title="Load_title",t.Load_item="Load_item",t.Load_locked_item="Load_locked_item",t.Load_indicator="Load_indicator",t))(L2||{}),Zd=(t=>(t.Title_img="Title_img",t.Title_bgm="Title_bgm",t))(Zd||{}),Bn=(t=>(t.title="title",t.load="load",t.storyline="storyline",t.achievement="achievement",t.extra="extra",t.option="option",t.collection="collection",t))(Bn||{});const Qb={title:{buttons:Ra,other:Zd},load:{buttons:O2,other:L2},storyline:{buttons:P2,other:M2},achievement:{buttons:R2,other:D2},extra:{buttons:I2,other:F2},option:{buttons:Xy,other:ua},collection:{buttons:k2,other:ko}},et=(t=[])=>{const e={hide:!1,style:{}};return t.forEach(r=>{e[r]={}}),e},Q_e={title:{key:"title",other:{Title_img:{key:"Title_img",content:"",args:{hide:!1,style:{}}},Title_bgm:{key:"Title_bgm",content:"",args:et()}},buttons:{Game_start_button:{key:"Game_start_button",content:"",args:et(["hoverStyle"])},Game_load_button:{key:"Game_load_button",content:"",args:et(["hoverStyle"])},Game_option_button:{key:"Game_option_button",content:"",args:et(["hoverStyle"])},Game_storyline_button:{key:"Game_storyline_button",content:"",args:et(["hoverStyle"])},Game_achievement_button:{key:"Game_achievement_button",content:"",args:et(["hoverStyle"])},Game_extra_button:{key:"Game_extra_button",content:"",args:et(["hoverStyle"])},Game_collection_button:{key:"Game_collection_button",content:"",args:et(["hoverStyle"])},Game_continue_button:{key:"Game_continue_button",content:"",args:et(["hoverStyle"])}}},load:{key:"load",other:{Load_bg:{key:"Load_bg",content:"",args:et()},Load_title:{key:"Load_title",content:"",args:et(["hoverStyle"])},Load_item:{key:"Load_item",content:"",args:et(["contentStyle","backgroundStyle","extraStyle","contentHoverStyle","backgroundHoverStyle","extraHoverStyle"])},Load_indicator:{key:"Load_indicator",content:"",args:et(["indicatorStyle","indicatorHoverStyle","indicatorLeftStyle","indicatorLeftHoverStyle","indicatorRightStyle","indicatorRightHoverStyle"])},Load_locked_item:{key:"Load_locked_item",content:"",args:et(["hoverStyle"])}},buttons:{Load_back_button:{key:"Load_back_button",content:"",args:et(["hoverStyle"])}}},storyline:{key:"storyline",other:{Storyline_title:{key:"Storyline_title",content:"",args:et(["hoverStyle"])}},buttons:{Storyline_back_button:{key:"Storyline_back_button",content:"",args:et(["hoverStyle"])}}},achievement:{key:"achievement",other:{Achievement_title:{key:"Achievement_title",content:"",args:et(["hoverStyle"])}},buttons:{Achievement_back_button:{key:"Achievement_back_button",content:"",args:et(["hoverStyle"])}}},extra:{key:"extra",other:{Extra_title:{key:"Extra_title",content:"",args:et(["hoverStyle"])},Extra_bgm_unlocked_item:{key:"Extra_bgm_unlocked_item",content:"",args:et(["contentStyle","backgroundStyle","extraStyle","backgroundHoverStyle","extraHoverStyle"])},Extra_bgm_locked_item_bg:{key:"Extra_bgm_locked_item_bg",content:"",args:et()},Extra_indicator:{key:"Extra_indicator",content:"",args:et(["indicatorStyle","indicatorHoverStyle","indicatorLeftStyle","indicatorLeftHoverStyle","indicatorRightStyle","indicatorRightHoverStyle"])},Extra_bg:{key:"Extra_bg",content:"",args:et()},Extra_video_locked_item_bg:{key:"Extra_video_locked_item_bg",content:"",args:et()},Extra_video_unlocked_item:{key:"Extra_video_unlocked_item",content:"",args:et(["contentStyle","backgroundStyle","extraStyle","contentHoverStyle","backgroundHoverStyle","extraHoverStyle"])}},buttons:{Extra_back_button:{key:"Extra_back_button",content:"",args:et(["hoverStyle"])},Extra_video_button:{key:"Extra_video_button",content:"",args:et(["hoverStyle"])},Extra_bgm_button:{key:"Extra_bgm_button",content:"",args:et(["hoverStyle"])}}},option:{key:"option",other:{Option_bg:{key:"Option_bg",content:"",args:et()},Option_title:{key:"Option_title",content:"",args:et(["hoverStyle"])},Option_window_label:{key:"Option_window_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_text_speed_label:{key:"Option_text_speed_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_voice_volume_label:{key:"Option_voice_volume_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_window_checkbox_label:{key:"Option_text_speed_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_global_volume_label:{key:"Option_global_volume_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_bg_music_volume_label:{key:"Option_bg_music_volume_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_effect_volume_label:{key:"Option_effect_volume_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_fullscreen_checkbox_label:{key:"Option_fullscreen_checkbox_label",content:"",args:et(["contentStyle","backgroundStyle","backgroundHoverStyle"])},Option_bg_music_volume_slider:{key:"Option_bg_music_volume_slider",content:"",args:et(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_effect_volume_slider:{key:"Option_effect_volume_slider",content:"",args:et(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_text_speed_slider:{key:"Option_text_speed_slider",content:"",args:et(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_fullscreen_checkbox:{key:"Option_fullscreen_checkbox",content:"",args:et(["hoverStyle"])},Option_window_checkbox:{key:"Option_window_checkbox",content:"",args:et(["hoverStyle"])},Option_videoSize1080_checkbox:{key:"Option_videoSize1080_checkbox",content:"",args:et(["hoverStyle"])},Option_videoSize720_checkbox:{key:"Option_videoSize720_checkbox",content:"",args:et(["hoverStyle"])},Options_light_slider:{key:"Options_light_slider",content:"",args:et(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_global_volume_slider:{key:"Option_global_volume_slider",content:"",args:et(["sliderStyle","sliderBgStyle","sliderThumbStyle"])},Option_voice_slider:{key:"Option_voice_slider",content:"",args:et(["sliderStyle","sliderBgStyle","sliderThumbStyle"])}},buttons:{Option_back_button:{key:"Option_back_button",content:"",args:et(["hoverStyle"])}}},collection:{key:"collection",other:{Collection_title:{key:"Collection_title",content:"",args:et(["hoverStyle"])},Collection_bg:{key:"Collection_bg",content:"",args:et()},Collection_img1:{key:"Collection_img1",content:"",args:et()},Collection_img2:{key:"Collection_img2",content:"",args:et()},Collection_img3:{key:"Collection_img3",content:"",args:et()},Collection_detail_title:{key:"Collection_detail_title",content:"",args:et(["hoverStyle"])},Collection_detail_bg:{key:"Collection_detail_bg",content:"",args:et()},Collection_detail_dialog_bg:{key:"Collection_detail_dialog_bg",content:"",args:et()},Collection_detail_dialog_text:{key:"Collection_detail_dialog_text",content:"",args:et()}},buttons:{Collection_back_button:{key:"Collection_back_button",content:"",args:et(["hoverStyle"])},Collection_detail_dialog_prev_button:{key:"Collection_detail_dialog_prev_button",content:"",args:et(["hoverStyle"])},Collection_detail_dialog_next_button:{key:"Collection_detail_dialog_next_button",content:"",args:et(["hoverStyle"])}}}},J_e={Title_img:1,Load_bg:1,Extra_bg:1,Option_bg:1,Collection_bg:1,Collection_detail_bg:1,Collection_detail_dialog_bg:1};var qi=(t=>(t[t.Save=0]="Save",t[t.Load=1]="Load",t[t.Option=2]="Option",t))(qi||{}),Oi=(t=>(t.Esc_continueGame_button="Esc_continueGame_button",t.Esc_backToLevel_button="Esc_backToLevel_button",t.Esc_setting_button="Esc_setting_button",t.Esc_exitGame_button="Esc_exitGame_button",t))(Oi||{}),lu=(t=>(t.Achievement_back_button="Achievement_back_button",t.Achievement_title="Achievement_title",t.Achievement_progress_bg="Achievement_progress_bg",t.Achievement_progress_text="Achievement_progress_text",t.Achievement_progress="Achievement_progress",t.Achievement_notUnlock="Achievement_notUnlock",t))(lu||{});const Ac={content:"",args:{hide:!0,style:{},hoverStyle:{}}},sv={content:"",args:{hide:!1,style:{x:0,y:0,scale:1,fontSize:0,fontColor:"",btnImage:"",btnPosition:"",align:"",fontFamily:""}}},nm={showBacklog:!1,showStarter:!0,showTitle:!0,showMenuPanel:!1,showTextBox:!0,showControls:!0,controlsVisibility:!0,currentMenuTag:qi.Option,titleBg:"",titleBgm:"",logoImage:[],showExtra:!1,showGlobalDialog:!1,showPanicOverlay:!1,isEnterGame:!1,isShowLogo:!0,showStoryLine:!1,showAchievement:!1,showFavorited:!1,gameUIConfigs:Q_e,showBeautyGuide:!1,showBeautyGuideDetail:!1,showBeautyGuideImageDialog:!1,isShowR18Modal:!1,openR18Modal:!1,isShowGameMenu:!1,escMenus:{Esc_continueGame_button:sv,Esc_backToLevel_button:sv,Esc_setting_button:sv,Esc_exitGame_button:sv},achievementUI:{Achievement_progress_bg:Ac,Achievement_progress_text:Ac,Achievement_progress:Ac,Achievement_notUnlock:Ac,Achievement_back_button:Ac,Achievement_title:Ac}},aU=Ym({name:"gui",initialState:nm,reducers:{setVisibility:(t,e)=>{rm();const{component:r,visibility:n}=e.payload;t[r]=n},setMenuPanelTag:(t,e)=>{rm(),t.currentMenuTag=e.payload},setGuiAsset:(t,e)=>{const{asset:r,value:n}=e.payload;t[r]=n},setLogoImage:(t,e)=>{t.logoImage=[...e.payload]},setShowStoryLine:(t,e)=>{t.showStoryLine=e.payload},setshowFavorited:(t,e)=>{t.showFavorited=e.payload},setGameUIConfigs:(t,e)=>{t.gameUIConfigs=e.payload},setGameR18:(t,e)=>{t.isShowR18Modal=e.payload},setEscMenus:(t,e)=>{t.escMenus=e.payload},setAchievementUI:(t,e)=>{t.achievementUI=e.payload}}}),{setVisibility:_t,setMenuPanelTag:im,setGuiAsset:SL,setLogoImage:exe,setShowStoryLine:vw,setshowFavorited:Qd,setGameUIConfigs:txe,setGameR18:oU,setEscMenus:rxe,setAchievementUI:nxe}=aU.actions,ixe=aU.reducer,le=eZ({reducer:{stage:Dae,GUI:ixe,userData:$oe,saveData:Rye},middleware:n8({serializableCheck:!1})});let EL;function B2(t,e=0,r=100){if(Ge.info("playing bgm"+t),t===""){EL=setTimeout(()=>{le.dispatch(lt({key:"bgm",value:{src:"",enter:0,volume:100}}))},e);const i=le.getState().stage.bgm.src;le.dispatch(lt({key:"bgm",value:{src:i,enter:-e,volume:r}}))}else clearTimeout(EL),le.dispatch(lt({key:"bgm",value:{src:t,enter:e,volume:r}}));const n=document.getElementById("currentBgm");n.src&&(n==null||n.play())}function zp(t){const e=document.getElementById("ebg");e&&(e.style.backgroundImage=`url("${t}")`)}const N2=()=>{Ge.warn("清除所有演出");for(let t=0;t<H.gameplay.performController.performList.length;t++){const e=H.gameplay.performController.performList[t];e.performName.startsWith("videoPlay")?e.stopFunction(!0):e.stopFunction(),clearTimeout(e.stopTimeout),H.gameplay.performController.performList.splice(t,1),t--}},U2=()=>{le.getState().stage.PerformList.forEach(e=>{gy(e.script)})},axe=t=>{const e=le.dispatch,r=H.backlogManager.getBacklog()[t];Ge.debug("读取的backlog数据",r),ya(r.saveScene.sceneUrl).then(async i=>{if(await H.sceneManager.setCurrentScene(i,r.saveScene.sceneName,r.saveScene.sceneUrl)){const o=H.sceneManager.sceneData.currentScene.subSceneList;H.sceneManager.settledScenes.push(H.sceneManager.sceneData.currentScene.sceneUrl);const s=jp(o);qf(s)}}),H.sceneManager.sceneData.currentSentenceId=r.saveScene.currentSentenceId,H.sceneManager.sceneData.sceneStack=Gr(r.saveScene.sceneStack),N2();for(let i=H.backlogManager.getBacklog().length-1;i>t;i--)H.backlogManager.getBacklog().pop();H.backlogManager.isSaveBacklogNext=!0;const n=Gr(r.currentStageState);e(ry(n)),setTimeout(U2,0),e(_t({component:"showBacklog",visibility:!1})),e(_t({component:"showTextBox",visibility:!0}))},sU=(t,e=!1)=>{const n=le.getState().saveData.saveData[t];Ge.debug("读取的存档数据",n),j2(n,e)};async function j2(t,e=!1){if(!t){Ge.info("暂无存档");return}const r=t;try{const o=await ya(r.sceneData.sceneUrl);if(!await H.sceneManager.setCurrentScene(o,r.sceneData.sceneName,r.sceneData.sceneUrl,!0))return;const c=H.sceneManager.sceneData.currentScene.subSceneList;H.sceneManager.settledScenes.push(H.sceneManager.sceneData.currentScene.sceneUrl);const l=jp(c);qf(l)}catch(o){Ge.error("场景加载失败",o);return}H.sceneManager.sceneData.currentSentenceId=r.sceneData.currentSentenceId,H.sceneManager.sceneData.sceneStack=Gr(r.sceneData.sceneStack),N2();const n=r.backlog;H.backlogManager.getBacklog().splice(0,H.backlogManager.getBacklog().length);for(const o of n)H.backlogManager.getBacklog().push(o);const i=Gr(r.nowStageState),a=le.dispatch;a(ry(i)),e?(a(ur.setLoadVideo(!0)),console.log(33333,r),r.nowStageState.PerformList.forEach(o=>{gy(o.script)})):setTimeout(U2,0),a(_t({component:"showTitle",visibility:!1})),a(_t({component:"showMenuPanel",visibility:!1})),a(_t({component:"showExtra",visibility:!1})),zp(le.getState().stage.bgName)}function oxe(){`${H.gameName}${H.gameKey}`,`${H.gameName}${H.gameKey}`}async function sxe(){const t=await X5(-1,!1),e=Gr(t);le.dispatch(ur.setFastSave(e)),await Fye()}async function lxe(){return await Z_e(),le.getState().saveData.quickSaveData!==null}async function uxe(){await W5();const t=le.getState().saveData.quickSaveData;t&&j2(t)}const lU=t=>{const e=document.body;t=typeof t=="string"?Number(t):t,e&&(e.style.opacity=(t/100).toFixed(2))},cxe=()=>{A2(!0,!0,!1);const t=Qt("start.txt",$t.scene);ya(t).then(e=>{H.sceneManager.setCurrentScene(e,"start.txt",t).then(r=>{r&&ln()})}),le.dispatch(ur.setIsShowUnlock(!0)),le.dispatch(ur.setShowStoryline(!0)),le.dispatch(_t({component:"showTitle",visibility:!1})),lU(le.getState().userData.optionData.uiLight)};async function fxe(){if(zp(le.getState().stage.bgName),await lxe()&&H.sceneManager.sceneData.currentSentenceId===0){await uxe();return}H.sceneManager.sceneData.currentSentenceId===0&&H.sceneManager.sceneData.currentScene.sceneName==="start.txt"?ln():U2()}const hxe=async()=>{var n,i;const t=Qt(yl.Storyline,$t.scene);H.sceneManager.resetScene();const e=await ya(t),r=await H.sceneManager.setCurrentScene(e,yl.Storyline,t);if(((n=r==null?void 0:r.sentenceList)==null?void 0:n.length)>0){const a=r.sentenceList[0];a.commandRaw==="changeBg"&&(le.dispatch(lt({key:"storyLineBg",value:(a==null?void 0:a.content)??""})),(i=a==null?void 0:a.args)==null||i.forEach(o=>{(o==null?void 0:o.key)==="x"?le.dispatch(lt({key:"storyLineBgX",value:o==null?void 0:o.value})):(o==null?void 0:o.key)==="y"&&le.dispatch(lt({key:"storyLineBgY",value:o==null?void 0:o.value}))})),ln()}le.dispatch(_t({component:"showMenuPanel",visibility:!1})),le.dispatch(_t({component:"showTextBox",visibility:!1})),le.dispatch(vw(!0))},dxe=()=>{le.dispatch(_t({component:"showBeautyGuide",visibility:!0}))};function pxe(t){return zy.parseScssToWebgalStyleObj(t)}function Nu(t){const[e,r]=ve.useState(t);return{_value:e,set:function(n){this._value=n,r(n)},get value(){return this._value},set value(n){this.set(n)}}}function vxe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function gxe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var mxe=function(){function t(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(gxe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=vxe(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},t}(),li="-ms-",am="-moz-",ir="-webkit-",uU="comm",$2="rule",V2="decl",yxe="@import",cU="@keyframes",_xe="@layer",xxe=Math.abs,Yy=String.fromCharCode,bxe=Object.assign;function Sxe(t,e){return Qn(t,0)^45?(((e<<2^Qn(t,0))<<2^Qn(t,1))<<2^Qn(t,2))<<2^Qn(t,3):0}function fU(t){return t.trim()}function Exe(t,e){return(t=e.exec(t))?t[0]:t}function ar(t,e,r){return t.replace(e,r)}function gw(t,e){return t.indexOf(e)}function Qn(t,e){return t.charCodeAt(e)|0}function Jd(t,e,r){return t.slice(e,r)}function Ro(t){return t.length}function G2(t){return t.length}function lv(t,e){return e.push(t),t}function wxe(t,e){return t.map(e).join("")}var qy=1,bf=1,hU=0,Zi=0,vn=0,Kf="";function Ky(t,e,r,n,i,a,o){return{value:t,root:e,parent:r,type:n,props:i,children:a,line:qy,column:bf,length:o,return:""}}function $h(t,e){return bxe(Ky("",null,null,"",null,null,0),t,{length:-t.length},e)}function Axe(){return vn}function Cxe(){return vn=Zi>0?Qn(Kf,--Zi):0,bf--,vn===10&&(bf=1,qy--),vn}function da(){return vn=Zi<hU?Qn(Kf,Zi++):0,bf++,vn===10&&(bf=1,qy++),vn}function Vo(){return Qn(Kf,Zi)}function ug(){return Zi}function Hp(t,e){return Jd(Kf,t,e)}function ep(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dU(t){return qy=bf=1,hU=Ro(Kf=t),Zi=0,[]}function pU(t){return Kf="",t}function cg(t){return fU(Hp(Zi-1,mw(t===91?t+2:t===40?t+1:t)))}function Txe(t){for(;(vn=Vo())&&vn<33;)da();return ep(t)>2||ep(vn)>3?"":" "}function Oxe(t,e){for(;--e&&da()&&!(vn<48||vn>102||vn>57&&vn<65||vn>70&&vn<97););return Hp(t,ug()+(e<6&&Vo()==32&&da()==32))}function mw(t){for(;da();)switch(vn){case t:return Zi;case 34:case 39:t!==34&&t!==39&&mw(vn);break;case 40:t===41&&mw(t);break;case 92:da();break}return Zi}function Pxe(t,e){for(;da()&&t+vn!==47+10;)if(t+vn===42+42&&Vo()===47)break;return"/*"+Hp(e,Zi-1)+"*"+Yy(t===47?t:da())}function Rxe(t){for(;!ep(Vo());)da();return Hp(t,Zi)}function Ixe(t){return pU(fg("",null,null,null,[""],t=dU(t),0,[0],t))}function fg(t,e,r,n,i,a,o,s,c){for(var l=0,u=0,f=o,h=0,d=0,p=0,v=1,y=1,m=1,g=0,x="",b=i,S=a,w=n,A=x;y;)switch(p=g,g=da()){case 40:if(p!=108&&Qn(A,f-1)==58){gw(A+=ar(cg(g),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:A+=cg(g);break;case 9:case 10:case 13:case 32:A+=Txe(p);break;case 92:A+=Oxe(ug()-1,7);continue;case 47:switch(Vo()){case 42:case 47:lv(Fxe(Pxe(da(),ug()),e,r),c);break;default:A+="/"}break;case 123*v:s[l++]=Ro(A)*m;case 125*v:case 59:case 0:switch(g){case 0:case 125:y=0;case 59+u:m==-1&&(A=ar(A,/\f/g,"")),d>0&&Ro(A)-f&&lv(d>32?AL(A+";",n,r,f-1):AL(ar(A," ","")+";",n,r,f-2),c);break;case 59:A+=";";default:if(lv(w=wL(A,e,r,l,u,i,s,x,b=[],S=[],f),a),g===123)if(u===0)fg(A,e,w,w,b,a,f,s,S);else switch(h===99&&Qn(A,3)===110?100:h){case 100:case 108:case 109:case 115:fg(t,w,w,n&&lv(wL(t,w,w,0,0,i,s,x,i,b=[],f),S),i,S,f,s,n?b:S);break;default:fg(A,w,w,w,[""],S,0,s,S)}}l=u=d=0,v=m=1,x=A="",f=o;break;case 58:f=1+Ro(A),d=p;default:if(v<1){if(g==123)--v;else if(g==125&&v++==0&&Cxe()==125)continue}switch(A+=Yy(g),g*v){case 38:m=u>0?1:(A+="\f",-1);break;case 44:s[l++]=(Ro(A)-1)*m,m=1;break;case 64:Vo()===45&&(A+=cg(da())),h=Vo(),u=f=Ro(x=A+=Rxe(ug())),g++;break;case 45:p===45&&Ro(A)==2&&(v=0)}}return a}function wL(t,e,r,n,i,a,o,s,c,l,u){for(var f=i-1,h=i===0?a:[""],d=G2(h),p=0,v=0,y=0;p<n;++p)for(var m=0,g=Jd(t,f+1,f=xxe(v=o[p])),x=t;m<d;++m)(x=fU(v>0?h[m]+" "+g:ar(g,/&\f/g,h[m])))&&(c[y++]=x);return Ky(t,e,r,i===0?$2:s,c,l,u)}function Fxe(t,e,r){return Ky(t,e,r,uU,Yy(Axe()),Jd(t,2,-2),0)}function AL(t,e,r,n){return Ky(t,e,r,V2,Jd(t,0,n),Jd(t,n+1,-1),n)}function of(t,e){for(var r="",n=G2(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function kxe(t,e,r,n){switch(t.type){case _xe:if(t.children.length)break;case yxe:case V2:return t.return=t.return||t.value;case uU:return"";case cU:return t.return=t.value+"{"+of(t.children,n)+"}";case $2:t.value=t.props.join(",")}return Ro(r=of(t.children,n))?t.return=t.value+"{"+r+"}":""}function Dxe(t){var e=G2(t);return function(r,n,i,a){for(var o="",s=0;s<e;s++)o+=t[s](r,n,i,a)||"";return o}}function Mxe(t){return function(e){e.root||(e=e.return)&&t(e)}}function Lxe(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var Bxe=function(e,r,n){for(var i=0,a=0;i=a,a=Vo(),i===38&&a===12&&(r[n]=1),!ep(a);)da();return Hp(e,Zi)},Nxe=function(e,r){var n=-1,i=44;do switch(ep(i)){case 0:i===38&&Vo()===12&&(r[n]=1),e[n]+=Bxe(Zi-1,r,n);break;case 2:e[n]+=cg(i);break;case 4:if(i===44){e[++n]=Vo()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=Yy(i)}while(i=da());return e},Uxe=function(e,r){return pU(Nxe(dU(e),r))},CL=new WeakMap,jxe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!CL.get(n))&&!i){CL.set(e,!0);for(var a=[],o=Uxe(r,a),s=n.props,c=0,l=0;c<o.length;c++)for(var u=0;u<s.length;u++,l++)e.props[l]=a[c]?o[c].replace(/&\f/g,s[u]):s[u]+" "+o[c]}}},$xe=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function vU(t,e){switch(Sxe(t,e)){case 5103:return ir+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ir+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ir+t+am+t+li+t+t;case 6828:case 4268:return ir+t+li+t+t;case 6165:return ir+t+li+"flex-"+t+t;case 5187:return ir+t+ar(t,/(\w+).+(:[^]+)/,ir+"box-$1$2"+li+"flex-$1$2")+t;case 5443:return ir+t+li+"flex-item-"+ar(t,/flex-|-self/,"")+t;case 4675:return ir+t+li+"flex-line-pack"+ar(t,/align-content|flex-|-self/,"")+t;case 5548:return ir+t+li+ar(t,"shrink","negative")+t;case 5292:return ir+t+li+ar(t,"basis","preferred-size")+t;case 6060:return ir+"box-"+ar(t,"-grow","")+ir+t+li+ar(t,"grow","positive")+t;case 4554:return ir+ar(t,/([^-])(transform)/g,"$1"+ir+"$2")+t;case 6187:return ar(ar(ar(t,/(zoom-|grab)/,ir+"$1"),/(image-set)/,ir+"$1"),t,"")+t;case 5495:case 3959:return ar(t,/(image-set\([^]*)/,ir+"$1$`$1");case 4968:return ar(ar(t,/(.+:)(flex-)?(.*)/,ir+"box-pack:$3"+li+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ir+t+t;case 4095:case 3583:case 4068:case 2532:return ar(t,/(.+)-inline(.+)/,ir+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ro(t)-1-e>6)switch(Qn(t,e+1)){case 109:if(Qn(t,e+4)!==45)break;case 102:return ar(t,/(.+:)(.+)-([^]+)/,"$1"+ir+"$2-$3$1"+am+(Qn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~gw(t,"stretch")?vU(ar(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Qn(t,e+1)!==115)break;case 6444:switch(Qn(t,Ro(t)-3-(~gw(t,"!important")&&10))){case 107:return ar(t,":",":"+ir)+t;case 101:return ar(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ir+(Qn(t,14)===45?"inline-":"")+"box$3$1"+ir+"$2$3$1"+li+"$2box$3")+t}break;case 5936:switch(Qn(t,e+11)){case 114:return ir+t+li+ar(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ir+t+li+ar(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ir+t+li+ar(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ir+t+li+t+t}return t}var Vxe=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case V2:e.return=vU(e.value,e.length);break;case cU:return of([$h(e,{value:ar(e.value,"@","@"+ir)})],i);case $2:if(e.length)return wxe(e.props,function(a){switch(Exe(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return of([$h(e,{props:[ar(a,/:(read-\w+)/,":"+am+"$1")]})],i);case"::placeholder":return of([$h(e,{props:[ar(a,/:(plac\w+)/,":"+ir+"input-$1")]}),$h(e,{props:[ar(a,/:(plac\w+)/,":"+am+"$1")]}),$h(e,{props:[ar(a,/:(plac\w+)/,li+"input-$1")]})],i)}return""})}},Gxe=[Vxe],Wxe=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||Gxe,a={},o,s=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),m=1;m<y.length;m++)a[y[m]]=!0;s.push(v)});var c,l=[jxe,$xe];{var u,f=[kxe,Mxe(function(v){u.insert(v)})],h=Dxe(l.concat(i,f)),d=function(y){return of(Ixe(y),h)};c=function(y,m,g,x){u=g,d(y?y+"{"+m.styles+"}":m.styles),x&&(p.inserted[m.name]=!0)}}var p={key:r,sheet:new mxe({key:r,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:c};return p.sheet.hydrate(s),p};function zxe(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Hxe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xxe=/[A-Z]|^ms/g,Yxe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,gU=function(e){return e.charCodeAt(1)===45},TL=function(e){return e!=null&&typeof e!="boolean"},Jb=Lxe(function(t){return gU(t)?t:t.replace(Xxe,"-$&").toLowerCase()}),OL=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(Yxe,function(n,i,a){return Io={name:i,styles:a,next:Io},i})}return Hxe[e]!==1&&!gU(e)&&typeof r=="number"&&r!==0?r+"px":r};function tp(t,e,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Io={name:r.name,styles:r.styles,next:Io},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Io={name:n.name,styles:n.styles,next:Io},n=n.next;var i=r.styles+";";return i}return qxe(t,e,r)}case"function":{if(t!==void 0){var a=Io,o=r(t);return Io=a,tp(t,e,o)}break}}if(e==null)return r;var s=e[r];return s!==void 0?s:r}function qxe(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=tp(t,e,r[i])+";";else for(var a in r){var o=r[a];if(typeof o!="object")e!=null&&e[o]!==void 0?n+=a+"{"+e[o]+"}":TL(o)&&(n+=Jb(a)+":"+OL(a,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var s=0;s<o.length;s++)TL(o[s])&&(n+=Jb(a)+":"+OL(a,o[s])+";");else{var c=tp(t,e,o);switch(a){case"animation":case"animationName":{n+=Jb(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}return n}var PL=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Io,eS=function(e,r,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,a="";Io=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,a+=tp(n,r,o)):a+=o[0];for(var s=1;s<e.length;s++)a+=tp(n,r,e[s]),i&&(a+=o[s]);PL.lastIndex=0;for(var c="",l;(l=PL.exec(a))!==null;)c+="-"+l[1];var u=zxe(a)+c;return{name:u,styles:a,next:Io}},Kxe=!0;function mU(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):n+=i+" "}),n}var Zxe=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||Kxe===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},Qxe=function(e,r,n){Zxe(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var a=r;do e.insert(r===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function RL(t,e){if(t.inserted[e.name]===void 0)return t.insert("",e,t.sheet,!0)}function IL(t,e,r){var n=[],i=mU(t,n,r);return n.length<2?r:i+e(n)}var Jxe=function(e){var r=Wxe(e);r.sheet.speedy=function(s){this.isSpeedy=s},r.compat=!0;var n=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=eS(l,r.registered,void 0);return Qxe(r,f,!1),r.key+"-"+f.name},i=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=eS(l,r.registered),h="animation-"+f.name;return RL(r,{name:f.name,styles:"@keyframes "+h+"{"+f.styles+"}"}),h},a=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=eS(l,r.registered);RL(r,f)},o=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return IL(r.registered,n,e1e(l))};return{css:n,cx:o,injectGlobal:a,keyframes:i,hydrate:function(c){c.forEach(function(l){r.inserted[l]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:mU.bind(null,r.registered),merge:IL.bind(null,r.registered,n)}},e1e=function t(e){for(var r="",n=0;n<e.length;n++){var i=e[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=t(i);else{a="";for(var o in i)i[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=i}a&&(r&&(r+=" "),r+=a)}}return r},yU=Jxe({key:"css"}),t1e=yU.injectGlobal,r1e=yU.css;function W2(t){const e=Nu({classNameStyles:{},others:""}),r=it(a=>a.stage.replacedUIlable),n=(a,o)=>{var c;const s=(r==null?void 0:r[a])??a;if(Object.keys(e.value.classNameStyles).includes(s)){const l=r1e(((c=e.value.classNameStyles)==null?void 0:c[s])??"");return`${o} ${l}`}return o},i=async()=>{Ge.debug("更新 Scss 文件",t);const o=(await Hd.get(`game/template/${t}`)).data;e.set(pxe(o))};return ve.useEffect(()=>{i()},[]),ve.useEffect(()=>{t1e(e.value.others)},[e.value.others]),n1e(i),n}function n1e(t){const e=()=>{t()};ve.useEffect(()=>(H.events.styleUpdate.on(e),()=>H.events.styleUpdate.off(e)),[])}function Zf(t){const e=it(t),r=ve.useRef(e);return ve.useEffect(()=>{r.current=e},[e]),r}function Qf(t){ve.useEffect(()=>{t()},[])}function Jf(t){ve.useEffect(()=>function(){t()},[])}function i1e(t){ve.useEffect(()=>{t()})}const a1e="_main_axj0i_1",o1e="_fallBack_axj0i_16",s1e="_pause_axj0i_32",l1e="_advance_axj0i_51",u1e="_collect_axj0i_67",c1e="_autoplay_axj0i_83",f1e="_button_axj0i_100",h1e="_button_text_axj0i_107",d1e="_button_on_axj0i_115",p1e="_singleButton_axj0i_126",v1e="_button_icon_axj0i_139",g1e="_fastSlPreview_axj0i_161",m1e="_fastSlEnter_axj0i_1",y1e="_fastsave_axj0i_175",_1e="_fastSPreview_axj0i_175",x1e="_fastload_axj0i_179",b1e="_fastLPreview_axj0i_179",S1e="_slPreviewMain_axj0i_191",E1e="_imgContainer_axj0i_199",w1e="_textContainer_axj0i_207",ci={main:a1e,fallBack:o1e,pause:s1e,advance:l1e,collect:u1e,autoplay:c1e,button:f1e,button_text:h1e,button_on:d1e,singleButton:p1e,button_icon:v1e,fastSlPreview:g1e,fastSlEnter:m1e,fastsave:y1e,fastSPreview:_1e,fastload:x1e,fastLPreview:b1e,slPreviewMain:S1e,imgContainer:E1e,textContainer:w1e},_U=t=>{const e=document.getElementById("Button_ControlPanel_auto");e&&(t?e.className=ci.button_on:e.className=ci.singleButton)},z2=()=>{H.gameplay.isAuto=!1,_U(!1),H.gameplay.autoInterval!==null&&(clearInterval(H.gameplay.autoInterval),H.gameplay.autoInterval=null),H.gameplay.autoTimeout!==null&&(clearTimeout(H.gameplay.autoTimeout),H.gameplay.autoTimeout=null)},A1e=()=>{H.gameplay.isAuto?z2():(H.gameplay.isAuto=!0,_U(!0),H.gameplay.autoInterval=setInterval(T1e,100))},C1e=()=>{ln(),H.gameplay.autoTimeout=null},T1e=()=>{const e=750-250*le.getState().userData.optionData.autoSpeed;let r=!1;H.gameplay.performController.performList.forEach(n=>{n.blockingAuto()&&(r=!0)}),!r&&H.gameplay.autoTimeout===null&&(H.gameplay.autoTimeout=setTimeout(C1e,e))},xU=t=>{const e=document.getElementById("Button_ControlPanel_fast");e&&(t?e.className=ci.button_on:e.className=ci.singleButton)},sf=()=>{SU()&&(H.gameplay.isFast=!1,xU(!1),H.gameplay.fastInterval!==null&&(clearInterval(H.gameplay.fastInterval),H.gameplay.fastInterval=null))},bU=()=>{SU()||(H.gameplay.isFast=!0,xU(!0),H.gameplay.fastInterval=setInterval(()=>{ln()},Y8.fast_timeout))},SU=function(){return H.gameplay.isFast},H2=()=>{sf(),z2()},O1e=()=>{H.gameplay.isFast?sf():bU()},P1e="_Backlog_main_zwyao_2",R1e="_backlog_soft_in_zwyao_1",I1e="_Backlog_main_out_zwyao_15",F1e="_backlog_soft_out_zwyao_1",k1e="_Backlog_main_out_IndexHide_zwyao_28",D1e="_Backlog_main_DisableScroll_zwyao_32",M1e="_backlog_top_zwyao_36",L1e="_backlog_top_icon_zwyao_42",B1e="_backlog_icon_softin_zwyao_1",N1e="_backlog_title_zwyao_62",U1e="_backlog_content_zwyao_72",j1e="_backlog_item_zwyao_84",$1e="_backlog_item_in_zwyao_1",V1e="_backlog_item_out_zwyao_94",G1e="_backlog_func_area_zwyao_104",W1e="_backlog_item_content_name_zwyao_113",z1e="_backlog_item_content_zwyao_113",H1e="_backlog_item_button_list_zwyao_137",X1e="_backlog_item_button_element_zwyao_144",Y1e="_backlog_item_content_text_zwyao_157",qn={Backlog_main:P1e,backlog_soft_in:R1e,Backlog_main_out:I1e,backlog_soft_out:F1e,Backlog_main_out_IndexHide:k1e,Backlog_main_DisableScroll:D1e,backlog_top:M1e,backlog_top_icon:L1e,backlog_icon_softin:B1e,backlog_title:N1e,backlog_content:U1e,backlog_item:j1e,backlog_item_in:$1e,backlog_item_out:V1e,backlog_func_area:G1e,backlog_item_content_name:W1e,backlog_item_content:z1e,backlog_item_button_list:H1e,backlog_item_button_element:X1e,backlog_item_content_text:Y1e};var q1e=po,K1e=function(){return q1e.Date.now()},Z1e=K1e,Q1e=/\s/;function J1e(t){for(var e=t.length;e--&&Q1e.test(t.charAt(e)););return e}var ebe=J1e,tbe=ebe,rbe=/^\s+/;function nbe(t){return t&&t.slice(0,tbe(t)+1).replace(rbe,"")}var ibe=nbe,abe=ibe,FL=qo,obe=by,kL=0/0,sbe=/^[-+]0x[0-9a-f]+$/i,lbe=/^0b[01]+$/i,ube=/^0o[0-7]+$/i,cbe=parseInt;function fbe(t){if(typeof t=="number")return t;if(obe(t))return kL;if(FL(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=FL(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=abe(t);var r=lbe.test(t);return r||ube.test(t)?cbe(t.slice(2),r?2:8):sbe.test(t)?kL:+t}var hbe=fbe,dbe=qo,tS=Z1e,DL=hbe,pbe="Expected a function",vbe=Math.max,gbe=Math.min;function mbe(t,e,r){var n,i,a,o,s,c,l=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(pbe);e=DL(e)||0,dbe(r)&&(u=!!r.leading,f="maxWait"in r,a=f?vbe(DL(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function d(w){var A=n,C=i;return n=i=void 0,l=w,o=t.apply(C,A),o}function p(w){return l=w,s=setTimeout(m,e),u?d(w):o}function v(w){var A=w-c,C=w-l,O=e-A;return f?gbe(O,a-C):O}function y(w){var A=w-c,C=w-l;return c===void 0||A>=e||A<0||f&&C>=a}function m(){var w=tS();if(y(w))return g(w);s=setTimeout(m,v(w))}function g(w){return s=void 0,h&&n?d(w):(n=i=void 0,o)}function x(){s!==void 0&&clearTimeout(s),l=0,n=c=i=s=void 0}function b(){return s===void 0?o:g(tS())}function S(){var w=tS(),A=y(w);if(n=arguments,i=this,c=w,A){if(s===void 0)return p(c);if(f)return clearTimeout(s),s=setTimeout(m,e),d(c)}return s===void 0&&(s=setTimeout(m,e)),o}return S.cancel=x,S.flush=b,S}var ybe=mbe,_be=ybe,xbe=qo,bbe="Expected a function";function Sbe(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(bbe);return xbe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),_be(t,e,{leading:n,maxWait:e,trailing:i})}var Ebe=Sbe;const wbe=gi(Ebe),zc="keyboard"in navigator&&navigator.keyboard;function Abe(t){Cbe(),Obe(),Rbe(),Pbe(),Ibe(),Lbe(),Nbe()}function Cbe(){const t=Zf(c=>c.GUI),e=Qy(),r=Zy(t),n=EU(t),i=Fbe(t),a=Dbe(t),o=kbe(t),s=ve.useCallback(c=>i()?(e("showGlobalDialog",!1),c.preventDefault(),!1):(o()&&e("showExtra",!1),r()&&e("showTextBox",!t.current.showTextBox),n()&&(e("showBacklog",!1),e("showTextBox",!0)),a()&&e("showMenuPanel",!1),c.preventDefault(),!1),[]);Qf(()=>{document.addEventListener("contextmenu",s)}),Jf(()=>{document.removeEventListener("contextmenu",s)})}let Tbe=setTimeout(()=>{},0);function Obe(){const t=Zf(s=>s.GUI),e=Qy(),r=Zy(t),n=EU(t),i=wU(t),a=ve.useCallback(wbe(()=>{ln()},100),[]),o=ve.useRef(0);ve.useCallback(s=>{if(i())return;const c=s.wheelDelta&&(s.wheelDelta>0?"up":"down")||s.detail&&(s.detail<0?"up":"down")||"down",l=s.ctrlKey,u=document.querySelector(`.${qn.backlog_content}`);if(r()&&c==="up"&&!l)e("showBacklog",!0),e("showTextBox",!1);else if(n()&&c==="down"&&!l){if(u){let f=Bbe(u),h=new Date().getTime();f&&h-o.current>100&&(e("showBacklog",!1),e("showTextBox",!0)),o.current=h}}else r()&&c==="down"&&!l&&(clearTimeout(Tbe),H.gameplay.isFast=!0,setTimeout(()=>{H.gameplay.isFast=!1},150),a())},[]),Qf(()=>{}),Jf(()=>{})}function Pbe(){const t=["Escape","Backquote"],e=s=>!s.isComposing&&!s.defaultPrevented&&t.includes(s.code),r=Zf(s=>s.GUI),n=ve.useCallback(()=>r.current.showTitle,[r]),i=wU(r),a=Qy(),o=ve.useCallback(s=>{!e(s)||n()||(i()?a("showPanicOverlay",!1):(a("showPanicOverlay",!0),H2()))},[]);Qf(()=>{document.addEventListener("keyup",o)}),Jf(()=>{document.removeEventListener("keyup",o)})}function Rbe(){const t=Zf(o=>o.GUI),e=Zy(t),r=ve.useCallback(o=>o.keyCode===17,[]),n=ve.useCallback(o=>{r(o)&&e()&&bU()},[]),i=ve.useCallback(o=>{r(o)&&e()&&sf()},[]),a=ve.useCallback(o=>{sf()},[]);Qf(()=>{document.addEventListener("keydown",n),document.addEventListener("keyup",i),window.addEventListener("blur",a)}),Jf(()=>{document.removeEventListener("keydown",n),document.removeEventListener("keyup",i),window.removeEventListener("blur",a)}),i1e(()=>{e()||sf()})}function Ibe(){const t=Mbe(),e=ve.useCallback(async r=>{t()&&await sxe()},[]);Qf(()=>{window.addEventListener("beforeunload",e)}),Jf(()=>{window.removeEventListener("beforeunload",e)})}function Zy(t){return ve.useCallback(()=>!t.current.showTitle&&!t.current.showMenuPanel&&!t.current.showBacklog&&!t.current.showPanicOverlay,[t])}function EU(t){return ve.useCallback(()=>t.current.showBacklog,[t])}function Fbe(t){return ve.useCallback(()=>t.current.showGlobalDialog,[t])}function kbe(t){return ve.useCallback(()=>t.current.showExtra,[t])}function wU(t){return ve.useCallback(()=>t.current.showPanicOverlay,[t])}function Dbe(t){return ve.useCallback(()=>[qi.Save,qi.Load,qi.Option].includes(t.current.currentMenuTag),[t])}function Mbe(){return ve.useCallback(()=>H.sceneManager.sceneData.currentSentenceId!==0,[H.sceneManager.sceneData])}function Qy(){const t=Br();return(e,r)=>{t(_t({component:e,visibility:r}))}}function Lbe(){const t=Zf(c=>c.GUI),e=Zy(t),r=Qy(),n=ve.useRef(!1),i=ve.useCallback(c=>c.keyCode===32||c.keyCode===13,[]),a=ve.useCallback(c=>{if(i(c)&&e()&&!n.current){if(!t.current.showTextBox){r("showTextBox",!0);return}H2(),ln(),n.current=!0}},[]),o=ve.useCallback(c=>{i(c)&&e()&&(n.current=!1)},[]),s=ve.useCallback(c=>{n.current=!1},[]);Qf(()=>{document.addEventListener("keydown",a),document.addEventListener("keyup",o),document.addEventListener("blur",s)}),Jf(()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",o),document.removeEventListener("blur",s)})}function Bbe(t){const{scrollTop:e,clientHeight:r,scrollHeight:n}=t;return e===0}function Nbe(){const t=it(n=>n.userData),e=Br(),r=t.optionData.fullScreen;ve.useEffect(()=>{const n=i=>{i.code==="F11"&&(i.preventDefault(),r!==La.on?(e(ao({key:"fullScreen",value:La.on})),jn()):(e(ao({key:"fullScreen",value:La.off})),jn()))};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[r])}const Ube=async()=>{le.dispatch(ur.setIsShowUnlock(!1));const t=Qt(yl.Achieve,$t.scene);H.sceneManager.resetScene(),ya(t).then(e=>{H.sceneManager.setCurrentScene(e,yl.Achieve,t).then(r=>{r&&(ln(),H.sceneManager.setCurrentScene(e,yl.Achieve,t))})}),le.dispatch(_t({component:"showMenuPanel",visibility:!1})),le.dispatch(_t({component:"showTextBox",visibility:!1})),le.dispatch(_t({component:"showAchievement",visibility:!0}))},jbe=""+new URL("bar-bg.png",import.meta.url).href,$be=""+new URL("bar-checked.png",import.meta.url).href;const Vbe=({text:t,defaultClass:e,defaultHoverClass:r,style:n,hoverStyle:i,onMouseEnter:a,onMouseLeave:o,onClick:s})=>{const[c,l]=ve.useState(!1);let u=e,f=n;const h=()=>{i&&l(!0),a&&a()},d=()=>{l(!1),o&&o()};return c&&(u=`${e} ${r}`,f={...n,...i}),B.jsx("span",{className:u,onMouseEnter:h,onMouseLeave:d,onClick:s,style:f,children:t})},om=({src:t,hoverSrc:e,defaultClass:r,defaultHoverClass:n,style:i,hoverStyle:a,onMouseEnter:o,onMouseLeave:s,onClick:c,nId:l})=>{const[u,f]=ve.useState(!1),[h,d]=ve.useState(0),p=()=>d(b=>b+1),v=ve.useRef({width:void 0,height:void 0});let y=r,m=i||{};const g=U5.debounce(()=>{a&&f(!0),o&&o()},100),x=()=>{f(!1),s&&s()};return u&&(y=`${r} ${n} imageHoverAnimation`,m={...i,...a}),m.width===void 0&&(m.width=v.current.width,m.height=v.current.height),B.jsx("img",{id:l,src:u&&e?e:t,className:y,onMouseEnter:g,onMouseLeave:x,style:m,onClick:c,onLoad:b=>{m.width===void 0&&(v.current.width=b.currentTarget.naturalWidth,v.current.height=b.currentTarget.naturalHeight,p())}})},AU=({children:t,defaultClass:e,defaultHoverClass:r,style:n,hoverStyle:i,onMouseEnter:a,onMouseLeave:o,onClick:s})=>{const[c,l]=ve.useState(!1);let u=e,f=n;const h=()=>{i&&l(!0),a&&a()},d=()=>{l(!1),o&&o()};return c&&(u=`${e} ${r}`,f={...n,...i}),B.jsx("div",{className:u,onMouseEnter:h,onMouseLeave:d,onClick:s,style:f,children:t})},Xp=({item:t,defaultClass:e,key:r})=>{var a,o;if(t.args.hide)return null;const n=lo(t.args.style),i=Qt(((a=t.args.style)==null?void 0:a.image)||"",$t.background);return(o=t.args.style)!=null&&o.image?B.jsx(om,{defaultClass:e,src:i,style:n},r):B.jsx("div",{className:e,style:n})},Ki=({item:t,defaultClass:e,defaultTextClass:r,key:n,defaultHoverClass:i,onMouseEnter:a,onMouseLeave:o,onClick:s,type:c="button",checked:l=!1,onChecked:u=()=>{},defaultText:f=""})=>{var b,S;if(t.args.hide)return null;const h=lo(t.args.style),d=lo(t.args.hoverStyle),p=((b=t.args.style)==null?void 0:b.image)||"",v=((S=t.args.hoverStyle)==null?void 0:S.image)||p,y=t,m={},g=p?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}:{};h.width&&(m.width=h.width),h.height&&(m.height=h.height),p&&(h.backgroundImage=`url(${Qt(p,$t.ui)})`,h.backgroundSize="100% 100%",h.backgroundRepeat="no-repeat");const x=w=>{c==="checkbox"&&u(!l),s&&s()};return B.jsxs(AU,{onMouseEnter:a,onMouseLeave:o,onClick:x,defaultClass:e,defaultHoverClass:i,style:h,hoverStyle:d,children:[!!v&&c==="checkbox"&&l&&B.jsx(om,{nId:n,src:Qt(v,$t.ui),hoverSrc:c!=="checkbox"?v:"",style:m,onMouseEnter:a,onMouseLeave:o}),y.content?B.jsx(Vbe,{text:y.content,defaultClass:r,style:g}):!p&&f]},n)},rS=({item:t,defaultClass:e,uniqueID:r,initValue:n,onChange:i,min:a,max:o,className:s})=>{var v,y;const{playSeEnter:c}=ri();ve.useEffect(()=>{setTimeout(()=>{const m=document.getElementById(r);m!==null&&m.setAttribute("value",(n||0).toString()),l()},1)},[]),ve.useEffect(()=>{l()},[n]),ve.useEffect(()=>{const m=lo(t.args.sliderThumbStyle),g=Gbe(m);g&&(nS(`#${r}::-webkit-slider-thumb`,`#${r}::-webkit-slider-thumb { ${g} }`),nS(`#${r}::-moz-range-thumb`,`#${r}::-moz-range-thumb { ${g} }`),nS(`#${r}::-ms-thumb`,`#${r}::-ms-thumb { ${g} }`))},[t.args.sliderThumbStyle,r]);function l(){var g,x;const m=document.getElementById(`${r}-bg`);if(m!==null)if(r==="light"){const S=(Number(n)-50)/50*((((g=t.args.style)==null?void 0:g.width)||342)*2)+"px";m.style.width=S}else m.style.width=Number(n.toString())/100*(((x=t.args.style)==null?void 0:x.width)||342)/.5+"px"}const u=lo(t.args.style),f=lo(t.args.sliderStyle),h=lo(t.args.sliderBgStyle),d=((v=t.args.sliderStyle)==null?void 0:v.image)||$be,p=((y=t.args.sliderBgStyle)==null?void 0:y.image)||jbe;return B.jsxs(AU,{style:u,defaultClass:`Option_WebGAL_slider ${e}`,children:[B.jsx("input",{className:"Rang_input",id:r,type:"range",min:a||0,max:o||100,onChange:i,onFocus:c,onMouseEnter:c}),B.jsxs("div",{className:"Slider_group",children:[B.jsx(om,{src:d,style:f,defaultClass:"Slider_bg",nId:`${r}-bg`}),B.jsx(om,{src:p,style:h,defaultClass:"Slider_bg_under"})]})]})};function nS(t,e){const r=document.styleSheets[0];if(!e||e.includes("{}")){console.warn(`跳过插入空规则: ${e}`);return}for(let n=0;n<r.cssRules.length;n++)if(r.cssRules[n].selectorText===t){r.deleteRule(n),r.insertRule(e,n);return}r.insertRule(e,r.cssRules.length)}function Gbe(t){const e=r=>r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return Object.entries(t).map(([r,n])=>{const i=e(r);let a=n;return typeof n=="number"&&i!=="z-index"&&i!=="opacity"&&(a=`${n}px`),`${i}: ${a};`}).join(" ")}const Wbe=()=>{const t=it(l=>l.userData),e=it(l=>l.GUI),r=Br(),n=t.optionData.fullScreen,{playSeEnter:i,playSeClick:a}=ri(),o=e.gameUIConfigs[Bn.title],s=W2("UI/Title/title.scss"),c={[Ra.Game_start_button]:()=>{cxe(),a(),r(Qd(!1))},[Ra.Game_achievement_button]:()=>{Ube(),a()},[Ra.Game_storyline_button]:()=>{hxe(),a()},[Ra.Game_extra_button]:()=>{r(_t({component:"showExtra",visibility:!0})),a()},[Ra.Game_collection_button]:()=>{dxe(),a()},[Ra.Game_continue_button]:()=>{a(),r(_t({component:"showTitle",visibility:!1})),fxe()},[Ra.Game_option_button]:()=>{a(),r(_t({component:"showMenuPanel",visibility:!0})),r(im(qi.Option))},[Ra.Game_load_button]:()=>{a(),r(_t({component:"showMenuPanel",visibility:!0})),r(im(qi.Load))}};return B.jsxs(B.Fragment,{children:[e.showTitle&&B.jsx("div",{className:s("Title_backup_background",Bh.Title_backup_background)}),B.jsx("div",{id:"enter_game_target",onClick:()=>{B2(e.titleBgm),r(_t({component:"isEnterGame",visibility:!0})),n===La.on&&(document.documentElement.requestFullscreen(),zc&&zc.lock(["Escape","F11"]))},onMouseEnter:i}),e.showTitle&&B.jsxs("div",{children:[B.jsx(Xp,{defaultClass:s("Title_main",Bh.Title_main),item:o.other[Zd.Title_img]}),B.jsx("div",{className:s("Title_buttonList",Bh.Title_buttonList),children:Object.keys(o.buttons).map(l=>{let u=l,f=o.buttons[u];return B.jsx(Ki,{item:f,defaultClass:Bh.Title_button,defaultTextClass:Bh.Title_button_text,onClick:c[u],onMouseEnter:i},u)})})]})]})},zbe="_Logo_main_19jxx_1",Hbe="_overlay_19jxx_14",Xbe="_Logo_Back_19jxx_61",Ybe="_animationActive_19jxx_75",qbe="_fadeout_19jxx_1",uv={Logo_main:zbe,"change-img-anim":"_change-img-anim_19jxx_1",overlay:Hbe,"fade-in":"_fade-in_19jxx_1",Logo_Back:Xbe,animationActive:Ybe,fadeout:qbe,"fade-in-out":"_fade-in-out_19jxx_1"},Kbe=()=>{const t=Br(),e=it(l=>l.GUI),r=e.logoImage,n=e.isEnterGame,i=Nu(-1),a=Nu(-1),o=5e3,s=()=>{clearTimeout(a.value),i.value<r.length-1?(i.set(i.value+1),a.set(setTimeout(s,o))):(e!=null&&e.isShowR18Modal&&t(_t({component:"openR18Modal",visibility:!0})),i.set(-1))};ve.useEffect(()=>{n&&r.length>0&&(i.set(0),a.set(setTimeout(s,o)))},[n,r]);const c=i.value===-1?"":r[i.value];return B.jsxs(B.Fragment,{children:[i.value!==-1&&B.jsx("div",{className:uv.Logo_Back+" "+(i.value===r.length-1?uv.animationActive:""),style:{animationDuration:`${o}ms`}},i.value+"wh"),c!==""&&B.jsxs(B.Fragment,{children:[B.jsx("div",{className:uv.Logo_main,onClick:s,style:{backgroundImage:`url("${c}")`,animationDuration:`${o}ms`}},i.value+"bg"),B.jsx("div",{className:uv.overlay})]})]})},Cc=new Map([["true",!0],["false",!1],[!0,!0],[!1,!1]]),Zbe=t=>{const e=le.getState().GUI,r=le.dispatch;Hd.get(t).then(n=>{var o;let i=n.data;const a=zy.parseConfig(i);if(Ge.info("获取到游戏信息",a),e){const s={...e.gameUIConfigs},c={};let l=!1;const u={};let f=!1;a.forEach(h=>{const{command:d,args:p,options:v}=h;switch(d){case"Title_img":{const y=Qt(p.join(""),$t.background);r(SL({asset:"titleBg",value:y})),zp(y);break}case"Game_Logo":{const y=p.map(m=>Qt(m,$t.background));r(exe(y));break}case"Game_cursor":{const y=p.map(m=>Qt(m,$t.background));if(y!=null&&y.length){const m=y.map(x=>`url('${x}'), auto`).join(", "),g=document.createElement("style");g.innerHTML=`
                html, body, div, span { cursor: ${m} !important; }
                html:hover, body:hover, div:hover, span:hover { cursor: ${m} !important; }
              `,document.head.appendChild(g)}break}case"Title_bgm":{const y=Qt(p[0],$t.bgm);r(SL({asset:"titleBgm",value:y}));break}case"Game_name":{H.gameName=p[0],document.title=p[0];break}case"Game_key":{H.gameKey=p[0],rm(),W5(),Wp(0,0);break}case"Game_r18":{(p==null?void 0:p.length)>0&&r(oU(!!Cc.get(p[0])));break}case"Game_sound":{if((v==null?void 0:v.length)>0){const y=v.map(m=>{var g;if(typeof m.value=="string"){const x=(g=m.value)==null?void 0:g.split(",");x!=null&&x.length&&!Cc.get(x[0])&&(m.value=x[1]?Qt(x[1],$t.bgm):"")}return m});r(lt({key:"gameScounds",value:y}))}break}case"Menu_sound":{if((v==null?void 0:v.length)>0){const y=v.map(m=>{var g;if(typeof m.value=="string"){const x=(g=m.value)==null?void 0:g.split(",");x!=null&&x.length&&!Cc.get(x[0])&&(m.value=x[1]?Qt(x[1],$t.bgm):"")}return m});r(lt({key:"menuScounds",value:y}))}break}case"Game_Icon":{if(p[0]){const y=Qt(p[0],$t.background),m=document.getElementById("dynamic-favicon");m&&(m.href=y+`?t=${new Date().getTime()}`)}break}case Oi.Esc_continueGame_button:case Oi.Esc_backToLevel_button:case Oi.Esc_setting_button:case Oi.Esc_exitGame_button:{if(!(v!=null&&v.length))break;let y="",m=!1;const g={},x=["x","y","scale","fontSize"];v==null||v.forEach(S=>{var w;(w=S.value)==null||w.split(",").forEach(A=>{const[C,O]=(A==null?void 0:A.split("="))||[];C==="name"?y=O:C==="hide"?m=(Cc==null?void 0:Cc.get(O))??!1:g[C]=x.includes(C)?Number(O):O})});const b={...nm.escMenus[Oi[d]].args.style};c[Oi[d]]={content:y,args:{hide:m,style:{...b,...g}}},l=!0;break}case lu.Achievement_progress_bg:case lu.Achievement_progress_text:case lu.Achievement_notUnlock:case lu.Achievement_progress:{u[lu[d]]=Qbe(lu[d],p,v),f=!0;break}}if((Ra[d]||Zd[d])&&d!==Zd.Title_bgm){const y=Bn.title;Zl(s,y,h)}else if(O2[d]||L2[d]){const y=Bn.load;Zl(s,y,h)}else if(P2[d]||M2[d]){const y=Bn.storyline;Zl(s,y,h)}else if(R2[d]||D2[d]){const y=Bn.achievement;Zl(s,y,h)}else if(Xy[d]||ua[d]){const y=Bn.option;Zl(s,y,h)}else if(I2[d]||F2[d]){const y=Bn.extra;Zl(s,y,h)}else if(k2[d]||ko[d]){const y=Bn.collection;Zl(s,y,h)}}),r(txe(s)),l&&r(rxe(c)),f&&r(nxe(u))}(o=window==null?void 0:window.renderPromise)==null||o.call(window),delete window.renderPromise,oxe()})};function Zl(t,e,r){const n=(i,a="")=>{const o=c=>{let l={};const u=/\{(.*?)\}/,f=c.match(u);if(f){const d=f[1].split(","),p={};d.forEach(v=>{const[y,m]=v.split("=");y&&m&&(p[y.trim()]=isNaN(Number(m.trim()))?m.trim():Number(m.trim()))}),l=p}return l},s={hide:!1,style:{}};return i.forEach(c=>{if(c.key==="hide")s.hide=c.value===!0;else if(c.key.toLowerCase().endsWith("style")){const l=o(c.value);c.key==="style"&&a&&(l.image=a),s[c.key]=l}else if(c.key.includes("info")||c.key.includes("images")){const l=o(c.value);s[c.key]=l}}),s};if(Qb[e]){if(t[e]={...t[e]},r.options=r.options??[],r.options.some(a=>a.key==="style")||r.options.push({key:"style",value:"{}"}),Qb[e].buttons[r.command])t[e].buttons={...t[e].buttons},t[e].buttons[r.command]={key:r.command,content:r.args[0]??"",args:n(r.options??[])};else if(Qb[e].other[r.command]){let a=!1;J_e[r.command]&&(a=!0),t[e].other={...t[e].other},t[e].other[r.command]={key:r.command,content:a?"":r.args[0]??"",args:n(r.options??[],r.args[0])}}}return t}function Qbe(t,e,r){var l,u,f;const n=((l=r.find(h=>h.key==="hide"))==null?void 0:l.value)||!1,i=((u=r.find(h=>h.key==="style"))==null?void 0:u.value)||"",a=((f=r.find(h=>h.key==="hoverStyle"))==null?void 0:f.value)||"";let o={...nm.achievementUI[t].args.style},s={...nm.achievementUI[t].args.hoverStyle};o=c(i),s=c(a);function c(h){const d=/\{(.*?)\}/,p=h.match(d);if(p){const y=p[1].split(","),m={};return y.forEach(g=>{const[x,b]=g.split("=");x&&b&&(m[x.trim()]=isNaN(Number(b.trim()))?b.trim():Number(b.trim()))}),m}}return{content:e!=null&&e.length?e[0]:"",args:{hide:n,style:o,hoverStyle:s}}}const Jbe=(t,e)=>{Ge.warn("正在跳转到"+t+":"+e);const r=le.dispatch;r(_t({component:"showTitle",visibility:!1})),r(_t({component:"showMenuPanel",visibility:!1})),r(_t({component:"isShowLogo",visibility:!1}));const n=document.getElementById("Title_enter_page");n&&(n.style.display="none"),A2(!0);const i=Qt(t,$t.scene);setTimeout(()=>{ya(i).then(async a=>{if(!await H.sceneManager.setCurrentScene(a,"start.txt",i))return;const s=H.sceneManager.sceneData.currentScene.sceneName;H.gameplay.isFast=!0,H.gameplay.isSyncingWithOrigine=!0,X2(e,s)})},16)};function X2(t,e){H.sceneManager.sceneData.currentSentenceId<t&&H.sceneManager.sceneData.currentScene.sceneName===e?(ln(),setTimeout(()=>X2(t,e),100)):(H.gameplay.isSyncingWithOrigine=!1,H.gameplay.isFast=!1)}const eSe=()=>{window.JMP=X2};var sd=(t=>(t[t.JUMP=0]="JUMP",t[t.SYNCFC=1]="SYNCFC",t[t.SYNCFE=2]="SYNCFE",t[t.EXE_COMMAND=3]="EXE_COMMAND",t[t.REFETCH_TEMPLATE_FILES=4]="REFETCH_TEMPLATE_FILES",t))(sd||{});const tSe=()=>{const t=window.location.hostname,e=window.location.protocol,r=window.location.port;let n="";if(r&&r!=="80"&&r!=="443"&&(n=`:${r}`),e!=="http:"&&e!=="https:")return;let i=`ws://${t}:9999`;e==="https:"&&(i=`wss://${t}${n}/api/webgalsync`),Ge.info("正在启动socket连接位于："+i);const a=new WebSocket(i);a.onopen=()=>{Ge.info("socket已连接"),window.pubsub.publish("isPreviewMode",!0);function o(){const s={event:"message",data:{command:sd.SYNCFC,sceneMsg:{scene:H.sceneManager.sceneData.currentScene.sceneName,sentence:H.sceneManager.sceneData.currentSentenceId},stageSyncMsg:le.getState().stage,message:"sync"}};a.send(JSON.stringify(s)),setTimeout(o,1e3)}o()},a.onmessage=o=>{const s=o.data,l=JSON.parse(s).data;if(l.command===sd.JUMP&&Jbe(l.sceneMsg.scene,l.sceneMsg.sentence),l.command===sd.EXE_COMMAND){const u=l.message,h=zy.parse(u,"temp.txt","temp.txt").sentenceList[0];gy(h)}if(l.command===sd.REFETCH_TEMPLATE_FILES){const u=document.getElementById("Title_enter_page");u&&(u.style.display="none"),H.events.styleUpdate.emit()}},a.onerror=o=>{window.pubsub.publish("isPreviewMode",!0),Ge.info("当前没有连接到 Terre 编辑器")}};function rSe(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function nSe(t){var e=this;return new e(function(r,n){if(!(t&&typeof t.length<"u"))return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(i.length===0)return r([]);var a=i.length;function o(c,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(f){o(c,f)},function(f){i[c]={status:"rejected",reason:f},--a===0&&r(i)});return}}i[c]={status:"fulfilled",value:l},--a===0&&r(i)}for(var s=0;s<i.length;s++)o(s,i[s])})}function CU(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}CU.prototype=Error.prototype;function iSe(t){var e=this;return new e(function(r,n){if(!(t&&typeof t.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return n();for(var a=[],o=0;o<i.length;o++)try{e.resolve(i[o]).then(r).catch(function(s){a.push(s),a.length===i.length&&n(new CU(a,"All promises were rejected"))})}catch(s){n(s)}})}var aSe=setTimeout;function TU(t){return!!(t&&typeof t.length<"u")}function oSe(){}function sSe(t,e){return function(){t.apply(e,arguments)}}function Wr(t){if(!(this instanceof Wr))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],PU(t,this)}function OU(t,e){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(e);return}t._handled=!0,Wr._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?yw:rp)(e.promise,t._value);return}var n;try{n=r(t._value)}catch(i){rp(e.promise,i);return}yw(e.promise,n)})}function yw(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof Wr){t._state=3,t._value=e,_w(t);return}else if(typeof r=="function"){PU(sSe(r,e),t);return}}t._state=1,t._value=e,_w(t)}catch(n){rp(t,n)}}function rp(t,e){t._state=2,t._value=e,_w(t)}function _w(t){t._state===2&&t._deferreds.length===0&&Wr._immediateFn(function(){t._handled||Wr._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)OU(t,t._deferreds[e]);t._deferreds=null}function lSe(t,e,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function PU(t,e){var r=!1;try{t(function(n){r||(r=!0,yw(e,n))},function(n){r||(r=!0,rp(e,n))})}catch(n){if(r)return;r=!0,rp(e,n)}}Wr.prototype.catch=function(t){return this.then(null,t)};Wr.prototype.then=function(t,e){var r=new this.constructor(oSe);return OU(this,new lSe(t,e,r)),r};Wr.prototype.finally=rSe;Wr.all=function(t){return new Wr(function(e,r){if(!TU(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function a(s,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var l=c.then;if(typeof l=="function"){l.call(c,function(u){a(s,u)},r);return}}n[s]=c,--i===0&&e(n)}catch(u){r(u)}}for(var o=0;o<n.length;o++)a(o,n[o])})};Wr.any=iSe;Wr.allSettled=nSe;Wr.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Wr?t:new Wr(function(e){e(t)})};Wr.reject=function(t){return new Wr(function(e,r){r(t)})};Wr.race=function(t){return new Wr(function(e,r){if(!TU(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)Wr.resolve(t[n]).then(e,r)})};Wr._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){aSe(t,0)};Wr._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Wr);Object.assign||(Object.assign=pY);var uSe=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var cSe=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-cSe}}var iS=Date.now(),ML=["ms","moz","webkit","o"];for(var aS=0;aS<ML.length&&!globalThis.requestAnimationFrame;++aS){var oS=ML[aS];globalThis.requestAnimationFrame=globalThis[oS+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[oS+"CancelAnimationFrame"]||globalThis[oS+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var e=Date.now(),r=uSe+iS-e;return r<0&&(r=0),iS=e,globalThis.self.setTimeout(function(){iS=Date.now(),t(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Go;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Go||(Go={}));var Sf;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Sf||(Sf={}));var np;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(np||(np={}));var ze;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ze||(ze={}));var fa;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(fa||(fa={}));var Ue;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ue||(Ue={}));var _l;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(_l||(_l={}));var ut;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(ut||(ut={}));var ip;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(ip||(ip={}));var An;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(An||(An={}));var uo;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(uo||(uo={}));var Di;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Di||(Di={}));var Qi;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Qi||(Qi={}));var ka;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(ka||(ka={}));var ap;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(ap||(ap={}));var Hi;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Hi||(Hi={}));var nn;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(nn||(nn={}));var xw;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(xw||(xw={}));var Pr;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Pr||(Pr={}));var co;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(co||(co={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var RU={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},sS=/iPhone/i,LL=/iPod/i,BL=/iPad/i,NL=/\biOS-universal(?:.+)Mac\b/i,lS=/\bAndroid(?:.+)Mobile\b/i,UL=/Android/i,Tc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,cv=/Silk/i,fs=/Windows Phone/i,jL=/\bWindows(?:.+)ARM\b/i,$L=/BlackBerry/i,VL=/BB10/i,GL=/Opera Mini/i,WL=/\b(CriOS|Chrome)(?:.+)Mobile/i,zL=/Mobile(?:.+)Firefox\b/i,HL=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function fSe(t){return function(e){return e.test(t)}}function hSe(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=fSe(r),a={apple:{phone:i(sS)&&!i(fs),ipod:i(LL),tablet:!i(sS)&&(i(BL)||HL(e))&&!i(fs),universal:i(NL),device:(i(sS)||i(LL)||i(BL)||i(NL)||HL(e))&&!i(fs)},amazon:{phone:i(Tc),tablet:!i(Tc)&&i(cv),device:i(Tc)||i(cv)},android:{phone:!i(fs)&&i(Tc)||!i(fs)&&i(lS),tablet:!i(fs)&&!i(Tc)&&!i(lS)&&(i(cv)||i(UL)),device:!i(fs)&&(i(Tc)||i(cv)||i(lS)||i(UL))||i(/\bokhttp\b/i)},windows:{phone:i(fs),tablet:i(jL),device:i(fs)||i(jL)},other:{blackberry:i($L),blackberry10:i(VL),opera:i(GL),firefox:i(zL),chrome:i(WL),device:i($L)||i(VL)||i(GL)||i(zL)||i(WL)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var Ba=hSe(globalThis.navigator);function dSe(){return!Ba.apple.device}function pSe(t){var e=!0;if(Ba.tablet||Ba.phone){if(Ba.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(e=!1)}}if(Ba.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(e=!1)}}}return e?t:4}var Ve={ADAPTER:RU,MIPMAP_TEXTURES:Di.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Pr.NONE,SPRITE_MAX_TEXTURES:pSe(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:ap.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:uo.CLAMP,SCALE_MODE:An.LINEAR,PRECISION_VERTEX:Hi.HIGH,PRECISION_FRAGMENT:Ba.apple.device?Hi.HIGH:Hi.MEDIUM,CAN_UPLOAD_SAME_BUFFER:dSe(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},IU={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||c,h),p=r?r+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],d]:c._events[p].push(d):(c._events[p]=d,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)e.call(u,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},s.prototype.listeners=function(l){var u=r?r+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(l){var u=r?r+l:l,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,u,f,h,d,p){var v=r?r+l:l;if(!this._events[v])return!1;var y=this._events[v],m=arguments.length,g,x;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,h),!0;case 5:return y.fn.call(y.context,u,f,h,d),!0;case 6:return y.fn.call(y.context,u,f,h,d,p),!0}for(x=1,g=new Array(m-1);x<m;x++)g[x-1]=arguments[x];y.fn.apply(y.context,g)}else{var b=y.length,S;for(x=0;x<b;x++)switch(y[x].once&&this.removeListener(l,y[x].fn,void 0,!0),m){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,u);break;case 3:y[x].fn.call(y[x].context,u,f);break;case 4:y[x].fn.call(y[x].context,u,f,h);break;default:if(!g)for(S=1,g=new Array(m-1);S<m;S++)g[S-1]=arguments[S];y[x].fn.apply(y[x].context,g)}}return!0},s.prototype.on=function(l,u,f){return a(this,l,u,f,!1)},s.prototype.once=function(l,u,f){return a(this,l,u,f,!0)},s.prototype.removeListener=function(l,u,f,h){var d=r?r+l:l;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var v=0,y=[],m=p.length;v<m;v++)(p[v].fn!==u||h&&!p[v].once||f&&p[v].context!==f)&&y.push(p[v]);y.length?this._events[d]=y.length===1?y[0]:y:o(this,d)}return this},s.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(IU);var vSe=IU.exports;const eh=gi(vSe);var Y2={exports:{}};Y2.exports=Jy;Y2.exports.default=Jy;function Jy(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,a=FU(t,0,i,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,c,l,u,f,h,d;if(n&&(a=xSe(t,e,a,r)),t.length>80*r){s=l=t[0],c=u=t[1];for(var p=r;p<i;p+=r)f=t[p],h=t[p+1],f<s&&(s=f),h<c&&(c=h),f>l&&(l=f),h>u&&(u=h);d=Math.max(l-s,u-c),d=d!==0?32767/d:0}return op(a,o,r,s,c,d,0),o}function FU(t,e,r,n,i){var a,o;if(i===Ew(t,e,r,n)>0)for(a=e;a<r;a+=n)o=XL(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=XL(a,t[a],t[a+1],o);return o&&e_(o,o.next)&&(lp(o),o=o.next),o}function Uu(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(e_(r,r.next)||Vr(r.prev,r,r.next)===0)){if(lp(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function op(t,e,r,n,i,a,o){if(t){!o&&a&&ASe(t,n,i,a);for(var s=t,c,l;t.prev!==t.next;){if(c=t.prev,l=t.next,a?mSe(t,n,i,a):gSe(t)){e.push(c.i/r|0),e.push(t.i/r|0),e.push(l.i/r|0),lp(t),t=l.next,s=l.next;continue}if(t=l,t===s){o?o===1?(t=ySe(Uu(t),e,r),op(t,e,r,n,i,a,2)):o===2&&_Se(t,e,r,n,i,a):op(Uu(t),e,r,n,i,a,1);break}}}}function gSe(t){var e=t.prev,r=t,n=t.next;if(Vr(e,r,n)>=0)return!1;for(var i=e.x,a=r.x,o=n.x,s=e.y,c=r.y,l=n.y,u=i<a?i<o?i:o:a<o?a:o,f=s<c?s<l?s:l:c<l?c:l,h=i>a?i>o?i:o:a>o?a:o,d=s>c?s>l?s:l:c>l?c:l,p=n.next;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=f&&p.y<=d&&Hc(i,s,a,c,o,l,p.x,p.y)&&Vr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function mSe(t,e,r,n){var i=t.prev,a=t,o=t.next;if(Vr(i,a,o)>=0)return!1;for(var s=i.x,c=a.x,l=o.x,u=i.y,f=a.y,h=o.y,d=s<c?s<l?s:l:c<l?c:l,p=u<f?u<h?u:h:f<h?f:h,v=s>c?s>l?s:l:c>l?c:l,y=u>f?u>h?u:h:f>h?f:h,m=bw(d,p,e,r,n),g=bw(v,y,e,r,n),x=t.prevZ,b=t.nextZ;x&&x.z>=m&&b&&b.z<=g;){if(x.x>=d&&x.x<=v&&x.y>=p&&x.y<=y&&x!==i&&x!==o&&Hc(s,u,c,f,l,h,x.x,x.y)&&Vr(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=d&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&Hc(s,u,c,f,l,h,b.x,b.y)&&Vr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=m;){if(x.x>=d&&x.x<=v&&x.y>=p&&x.y<=y&&x!==i&&x!==o&&Hc(s,u,c,f,l,h,x.x,x.y)&&Vr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=g;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&Hc(s,u,c,f,l,h,b.x,b.y)&&Vr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function ySe(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!e_(i,a)&&kU(i,n,n.next,a)&&sp(i,a)&&sp(a,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(a.i/r|0),lp(n),lp(n.next),n=t=a),n=n.next}while(n!==t);return Uu(n)}function _Se(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&OSe(o,s)){var c=DU(o,s);o=Uu(o,o.next),c=Uu(c,c.next),op(o,e,r,n,i,a,0),op(c,e,r,n,i,a,0);return}s=s.next}o=o.next}while(o!==t)}function xSe(t,e,r,n){var i=[],a,o,s,c,l;for(a=0,o=e.length;a<o;a++)s=e[a]*n,c=a<o-1?e[a+1]*n:t.length,l=FU(t,s,c,n,!1),l===l.next&&(l.steiner=!0),i.push(TSe(l));for(i.sort(bSe),a=0;a<i.length;a++)r=SSe(i[a],r);return r}function bSe(t,e){return t.x-e.x}function SSe(t,e){var r=ESe(t,e);if(!r)return e;var n=DU(r,t);return Uu(n,n.next),Uu(r,r.next)}function ESe(t,e){var r=e,n=t.x,i=t.y,a=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,o=r.x<r.next.x?r:r.next,s===n))return o}r=r.next}while(r!==e);if(!o)return null;var c=o,l=o.x,u=o.y,f=1/0,h;r=o;do n>=r.x&&r.x>=l&&n!==r.x&&Hc(i<u?n:a,i,l,u,i<u?a:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),sp(r,t)&&(h<f||h===f&&(r.x>o.x||r.x===o.x&&wSe(o,r)))&&(o=r,f=h)),r=r.next;while(r!==c);return o}function wSe(t,e){return Vr(t.prev,t,e.prev)<0&&Vr(e.next,t,t.next)<0}function ASe(t,e,r,n){var i=t;do i.z===0&&(i.z=bw(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,CSe(i)}function CSe(t){var e,r,n,i,a,o,s,c,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ,!!n);e++);for(c=l;s>0||c>0&&n;)s!==0&&(c===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1);return t}function bw(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function TSe(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Hc(t,e,r,n,i,a,o,s){return(i-o)*(e-s)>=(t-o)*(a-s)&&(t-o)*(n-s)>=(r-o)*(e-s)&&(r-o)*(a-s)>=(i-o)*(n-s)}function OSe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!PSe(t,e)&&(sp(t,e)&&sp(e,t)&&RSe(t,e)&&(Vr(t.prev,t,e.prev)||Vr(t,e.prev,e))||e_(t,e)&&Vr(t.prev,t,t.next)>0&&Vr(e.prev,e,e.next)>0)}function Vr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function e_(t,e){return t.x===e.x&&t.y===e.y}function kU(t,e,r,n){var i=hv(Vr(t,e,r)),a=hv(Vr(t,e,n)),o=hv(Vr(r,n,t)),s=hv(Vr(r,n,e));return!!(i!==a&&o!==s||i===0&&fv(t,r,e)||a===0&&fv(t,n,e)||o===0&&fv(r,t,n)||s===0&&fv(r,e,n))}function fv(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function hv(t){return t>0?1:t<0?-1:0}function PSe(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&kU(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function sp(t,e){return Vr(t.prev,t,t.next)<0?Vr(t,e,t.next)>=0&&Vr(t,t.prev,e)>=0:Vr(t,e,t.prev)<0||Vr(t,t.next,e)<0}function RSe(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function DU(t,e){var r=new Sw(t.i,t.x,t.y),n=new Sw(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function XL(t,e,r,n){var i=new Sw(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function lp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Sw(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Jy.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(Ew(t,0,a,r));if(i)for(var s=0,c=e.length;s<c;s++){var l=e[s]*r,u=s<c-1?e[s+1]*r:t.length;o-=Math.abs(Ew(t,l,u,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function Ew(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}Jy.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var ISe=Y2.exports;const q2=gi(ISe);var sm={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */sm.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,a=typeof st=="object"&&st;(a.global===a||a.window===a||a.self===a)&&(r=a);var o,s=2147483647,c=36,l=1,u=26,f=38,h=700,d=72,p=128,v="-",y=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=c-l,S=Math.floor,w=String.fromCharCode,A;function C(X){throw new RangeError(x[X])}function O(X,M){for(var V=X.length,$=[];V--;)$[V]=M(X[V]);return $}function P(X,M){var V=X.split("@"),$="";V.length>1&&($=V[0]+"@",X=V[1]),X=X.replace(g,".");var j=X.split("."),te=O(j,M).join(".");return $+te}function I(X){for(var M=[],V=0,$=X.length,j,te;V<$;)j=X.charCodeAt(V++),j>=55296&&j<=56319&&V<$?(te=X.charCodeAt(V++),(te&64512)==56320?M.push(((j&1023)<<10)+(te&1023)+65536):(M.push(j),V--)):M.push(j);return M}function R(X){return O(X,function(M){var V="";return M>65535&&(M-=65536,V+=w(M>>>10&1023|55296),M=56320|M&1023),V+=w(M),V}).join("")}function F(X){return X-48<10?X-22:X-65<26?X-65:X-97<26?X-97:c}function D(X,M){return X+22+75*(X<26)-((M!=0)<<5)}function L(X,M,V){var $=0;for(X=V?S(X/h):X>>1,X+=S(X/M);X>b*u>>1;$+=c)X=S(X/b);return S($+(b+1)*X/(X+f))}function U(X){var M=[],V=X.length,$,j=0,te=p,ie=d,de,he,Ee,Oe,ye,Ae,_e,we,$e;for(de=X.lastIndexOf(v),de<0&&(de=0),he=0;he<de;++he)X.charCodeAt(he)>=128&&C("not-basic"),M.push(X.charCodeAt(he));for(Ee=de>0?de+1:0;Ee<V;){for(Oe=j,ye=1,Ae=c;Ee>=V&&C("invalid-input"),_e=F(X.charCodeAt(Ee++)),(_e>=c||_e>S((s-j)/ye))&&C("overflow"),j+=_e*ye,we=Ae<=ie?l:Ae>=ie+u?u:Ae-ie,!(_e<we);Ae+=c)$e=c-we,ye>S(s/$e)&&C("overflow"),ye*=$e;$=M.length+1,ie=L(j-Oe,$,Oe==0),S(j/$)>s-te&&C("overflow"),te+=S(j/$),j%=$,M.splice(j++,0,te)}return R(M)}function Y(X){var M,V,$,j,te,ie,de,he,Ee,Oe,ye,Ae=[],_e,we,$e,Xe;for(X=I(X),_e=X.length,M=p,V=0,te=d,ie=0;ie<_e;++ie)ye=X[ie],ye<128&&Ae.push(w(ye));for($=j=Ae.length,j&&Ae.push(v);$<_e;){for(de=s,ie=0;ie<_e;++ie)ye=X[ie],ye>=M&&ye<de&&(de=ye);for(we=$+1,de-M>S((s-V)/we)&&C("overflow"),V+=(de-M)*we,M=de,ie=0;ie<_e;++ie)if(ye=X[ie],ye<M&&++V>s&&C("overflow"),ye==M){for(he=V,Ee=c;Oe=Ee<=te?l:Ee>=te+u?u:Ee-te,!(he<Oe);Ee+=c)Xe=he-Oe,$e=c-Oe,Ae.push(w(D(Oe+Xe%$e,0))),he=S(Xe/$e);Ae.push(w(D(he,0))),te=L(V,we,$==j),V=0,++$}++V,++M}return Ae.join("")}function ee(X){return P(X,function(M){return y.test(M)?U(M.slice(4).toLowerCase()):M})}function J(X){return P(X,function(M){return m.test(M)?"xn--"+Y(M):M})}if(o={version:"1.4.1",ucs2:{decode:I,encode:R},decode:U,encode:Y,toASCII:J,toUnicode:ee},n&&i)if(t.exports==n)i.exports=o;else for(A in o)o.hasOwnProperty(A)&&(n[A]=o[A]);else r.punycode=o})(st)})(sm,sm.exports);var FSe=sm.exports,kSe=Error,DSe=EvalError,MSe=RangeError,LSe=ReferenceError,MU=SyntaxError,Yp=TypeError,BSe=URIError,NSe=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},YL=typeof Symbol<"u"&&Symbol,USe=NSe,jSe=function(){return typeof YL!="function"||typeof Symbol!="function"||typeof YL("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:USe()},uS={__proto__:null,foo:{}},$Se=Object,VSe=function(){return{__proto__:uS}.foo===uS.foo&&!(uS instanceof $Se)},GSe="Function.prototype.bind called on incompatible ",WSe=Object.prototype.toString,zSe=Math.max,HSe="[object Function]",qL=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},XSe=function(e,r){for(var n=[],i=r||0,a=0;i<e.length;i+=1,a+=1)n[a]=e[i];return n},YSe=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},qSe=function(e){var r=this;if(typeof r!="function"||WSe.apply(r)!==HSe)throw new TypeError(GSe+r);for(var n=XSe(arguments,1),i,a=function(){if(this instanceof i){var u=r.apply(this,qL(n,arguments));return Object(u)===u?u:this}return r.apply(e,qL(n,arguments))},o=zSe(0,r.length-n.length),s=[],c=0;c<o;c++)s[c]="$"+c;if(i=Function("binder","return function ("+YSe(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},KSe=qSe,K2=Function.prototype.bind||KSe,ZSe=Function.prototype.call,QSe=Object.prototype.hasOwnProperty,JSe=K2,eEe=JSe.call(ZSe,QSe),Ut,tEe=kSe,rEe=DSe,nEe=MSe,iEe=LSe,Ef=MU,lf=Yp,aEe=BSe,LU=Function,cS=function(t){try{return LU('"use strict"; return ('+t+").constructor;")()}catch{}},Tu=Object.getOwnPropertyDescriptor;if(Tu)try{Tu({},"")}catch{Tu=null}var fS=function(){throw new lf},oEe=Tu?function(){try{return arguments.callee,fS}catch{try{return Tu(arguments,"callee").get}catch{return fS}}}():fS,Oc=jSe(),sEe=VSe(),Ln=Object.getPrototypeOf||(sEe?function(t){return t.__proto__}:null),Lc={},lEe=typeof Uint8Array>"u"||!Ln?Ut:Ln(Uint8Array),Ou={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ut:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ut:ArrayBuffer,"%ArrayIteratorPrototype%":Oc&&Ln?Ln([][Symbol.iterator]()):Ut,"%AsyncFromSyncIteratorPrototype%":Ut,"%AsyncFunction%":Lc,"%AsyncGenerator%":Lc,"%AsyncGeneratorFunction%":Lc,"%AsyncIteratorPrototype%":Lc,"%Atomics%":typeof Atomics>"u"?Ut:Atomics,"%BigInt%":typeof BigInt>"u"?Ut:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ut:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ut:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ut:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":tEe,"%eval%":eval,"%EvalError%":rEe,"%Float32Array%":typeof Float32Array>"u"?Ut:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ut:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ut:FinalizationRegistry,"%Function%":LU,"%GeneratorFunction%":Lc,"%Int8Array%":typeof Int8Array>"u"?Ut:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ut:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ut:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Oc&&Ln?Ln(Ln([][Symbol.iterator]())):Ut,"%JSON%":typeof JSON=="object"?JSON:Ut,"%Map%":typeof Map>"u"?Ut:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Oc||!Ln?Ut:Ln(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ut:Promise,"%Proxy%":typeof Proxy>"u"?Ut:Proxy,"%RangeError%":nEe,"%ReferenceError%":iEe,"%Reflect%":typeof Reflect>"u"?Ut:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ut:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Oc||!Ln?Ut:Ln(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ut:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Oc&&Ln?Ln(""[Symbol.iterator]()):Ut,"%Symbol%":Oc?Symbol:Ut,"%SyntaxError%":Ef,"%ThrowTypeError%":oEe,"%TypedArray%":lEe,"%TypeError%":lf,"%Uint8Array%":typeof Uint8Array>"u"?Ut:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ut:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ut:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ut:Uint32Array,"%URIError%":aEe,"%WeakMap%":typeof WeakMap>"u"?Ut:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ut:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ut:WeakSet};if(Ln)try{null.error}catch(t){var uEe=Ln(Ln(t));Ou["%Error.prototype%"]=uEe}var cEe=function t(e){var r;if(e==="%AsyncFunction%")r=cS("async function () {}");else if(e==="%GeneratorFunction%")r=cS("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=cS("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Ln&&(r=Ln(i.prototype))}return Ou[e]=r,r},KL={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},qp=K2,lm=eEe,fEe=qp.call(Function.call,Array.prototype.concat),hEe=qp.call(Function.apply,Array.prototype.splice),ZL=qp.call(Function.call,String.prototype.replace),um=qp.call(Function.call,String.prototype.slice),dEe=qp.call(Function.call,RegExp.prototype.exec),pEe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,vEe=/\\(\\)?/g,gEe=function(e){var r=um(e,0,1),n=um(e,-1);if(r==="%"&&n!=="%")throw new Ef("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ef("invalid intrinsic syntax, expected opening `%`");var i=[];return ZL(e,pEe,function(a,o,s,c){i[i.length]=s?ZL(c,vEe,"$1"):o||a}),i},mEe=function(e,r){var n=e,i;if(lm(KL,n)&&(i=KL[n],n="%"+i[0]+"%"),lm(Ou,n)){var a=Ou[n];if(a===Lc&&(a=cEe(n)),typeof a>"u"&&!r)throw new lf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new Ef("intrinsic "+e+" does not exist!")},th=function(e,r){if(typeof e!="string"||e.length===0)throw new lf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new lf('"allowMissing" argument must be a boolean');if(dEe(/^%?[^%]*%?$/,e)===null)throw new Ef("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=gEe(e),i=n.length>0?n[0]:"",a=mEe("%"+i+"%",r),o=a.name,s=a.value,c=!1,l=a.alias;l&&(i=l[0],hEe(n,fEe([0,1],l)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],d=um(h,0,1),p=um(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Ef("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,o="%"+i+"%",lm(Ou,o))s=Ou[o];else if(s!=null){if(!(h in s)){if(!r)throw new lf("base intrinsic for "+e+" exists, but the property is not available.");return}if(Tu&&u+1>=n.length){var v=Tu(s,h);f=!!v,f&&"get"in v&&!("originalValue"in v.get)?s=v.get:s=s[h]}else f=lm(s,h),s=s[h];f&&!c&&(Ou[o]=s)}}return s},BU={exports:{}},hS,QL;function Z2(){if(QL)return hS;QL=1;var t=th,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return hS=e,hS}var yEe=th,hg=yEe("%Object.getOwnPropertyDescriptor%",!0);if(hg)try{hg([],"length")}catch{hg=null}var NU=hg,JL=Z2(),_Ee=MU,Pc=Yp,eB=NU,xEe=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Pc("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Pc("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Pc("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Pc("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Pc("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Pc("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,c=!!eB&&eB(e,r);if(JL)JL(e,r,{configurable:o===null&&c?c.configurable:!o,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:a===null&&c?c.writable:!a});else if(s||!i&&!a&&!o)e[r]=n;else throw new _Ee("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ww=Z2(),UU=function(){return!!ww};UU.hasArrayLengthDefineBug=function(){if(!ww)return null;try{return ww([],"length",{value:1}).length!==1}catch{return!0}};var bEe=UU,SEe=th,tB=xEe,EEe=bEe(),rB=NU,nB=Yp,wEe=SEe("%Math.floor%"),AEe=function(e,r){if(typeof e!="function")throw new nB("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||wEe(r)!==r)throw new nB("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in e&&rB){var o=rB(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(a=!1)}return(i||a||!n)&&(EEe?tB(e,"length",r,!0,!0):tB(e,"length",r)),e};(function(t){var e=K2,r=th,n=AEe,i=Yp,a=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(o,a),c=Z2(),l=r("%Math.max%");t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var d=s(e,o,arguments);return n(d,1+l(0,h.length-(arguments.length-1)),!0)};var u=function(){return s(e,a,arguments)};c?c(t.exports,"apply",{value:u}):t.exports.apply=u})(BU);var CEe=BU.exports,jU=th,$U=CEe,TEe=$U(jU("String.prototype.indexOf")),OEe=function(e,r){var n=jU(e,!!r);return typeof n=="function"&&TEe(e,".prototype.")>-1?$U(n):n},Q2=typeof Map=="function"&&Map.prototype,dS=Object.getOwnPropertyDescriptor&&Q2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,cm=Q2&&dS&&typeof dS.get=="function"?dS.get:null,iB=Q2&&Map.prototype.forEach,J2=typeof Set=="function"&&Set.prototype,pS=Object.getOwnPropertyDescriptor&&J2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,fm=J2&&pS&&typeof pS.get=="function"?pS.get:null,aB=J2&&Set.prototype.forEach,PEe=typeof WeakMap=="function"&&WeakMap.prototype,Cd=PEe?WeakMap.prototype.has:null,REe=typeof WeakSet=="function"&&WeakSet.prototype,Td=REe?WeakSet.prototype.has:null,IEe=typeof WeakRef=="function"&&WeakRef.prototype,oB=IEe?WeakRef.prototype.deref:null,FEe=Boolean.prototype.valueOf,kEe=Object.prototype.toString,DEe=Function.prototype.toString,MEe=String.prototype.match,eO=String.prototype.slice,il=String.prototype.replace,LEe=String.prototype.toUpperCase,sB=String.prototype.toLowerCase,VU=RegExp.prototype.test,lB=Array.prototype.concat,Fo=Array.prototype.join,BEe=Array.prototype.slice,uB=Math.floor,Aw=typeof BigInt=="function"?BigInt.prototype.valueOf:null,vS=Object.getOwnPropertySymbols,Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,wf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",vi=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===wf||"symbol")?Symbol.toStringTag:null,GU=Object.prototype.propertyIsEnumerable,cB=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function fB(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||VU.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-uB(-t):uB(t);if(n!==t){var i=String(n),a=eO.call(e,i.length+1);return il.call(i,r,"$&_")+"."+il.call(il.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return il.call(e,r,"$&_")}var Tw=J5,hB=Tw.custom,dB=zU(hB)?hB:null,NEe=function t(e,r,n,i){var a=r||{};if(qs(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qs(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=qs(a,"customInspect")?a.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qs(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qs(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=a.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return XU(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return s?fB(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return s?fB(e,l):l}var u=typeof a.depth>"u"?5:a.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return Ow(e)?"[Array]":"[Object]";var f=rwe(a,n);if(typeof i>"u")i=[];else if(HU(i,e)>=0)return"[Circular]";function h(F,D,L){if(D&&(i=BEe.call(i),i.push(D)),L){var U={depth:a.depth};return qs(a,"quoteStyle")&&(U.quoteStyle=a.quoteStyle),t(F,U,n+1,i)}return t(F,a,n+1,i)}if(typeof e=="function"&&!pB(e)){var d=XEe(e),p=dv(e,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+Fo.call(p,", ")+" }":"")}if(zU(e)){var v=wf?il.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Cw.call(e);return typeof e=="object"&&!wf?Vh(v):v}if(JEe(e)){for(var y="<"+sB.call(String(e.nodeName)),m=e.attributes||[],g=0;g<m.length;g++)y+=" "+m[g].name+"="+WU(UEe(m[g].value),"double",a);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+sB.call(String(e.nodeName))+">",y}if(Ow(e)){if(e.length===0)return"[]";var x=dv(e,h);return f&&!twe(x)?"["+Pw(x,f)+"]":"[ "+Fo.call(x,", ")+" ]"}if($Ee(e)){var b=dv(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!GU.call(e,"cause")?"{ ["+String(e)+"] "+Fo.call(lB.call("[cause]: "+h(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Fo.call(b,", ")+" }"}if(typeof e=="object"&&o){if(dB&&typeof e[dB]=="function"&&Tw)return Tw(e,{depth:u-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(YEe(e)){var S=[];return iB&&iB.call(e,function(F,D){S.push(h(D,e,!0)+" => "+h(F,e))}),vB("Map",cm.call(e),S,f)}if(ZEe(e)){var w=[];return aB&&aB.call(e,function(F){w.push(h(F,e))}),vB("Set",fm.call(e),w,f)}if(qEe(e))return gS("WeakMap");if(QEe(e))return gS("WeakSet");if(KEe(e))return gS("WeakRef");if(GEe(e))return Vh(h(Number(e)));if(zEe(e))return Vh(h(Aw.call(e)));if(WEe(e))return Vh(FEe.call(e));if(VEe(e))return Vh(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===st)return"{ [object globalThis] }";if(!jEe(e)&&!pB(e)){var A=dv(e,h),C=cB?cB(e)===Object.prototype:e instanceof Object||e.constructor===Object,O=e instanceof Object?"":"null prototype",P=!C&&vi&&Object(e)===e&&vi in e?eO.call(Bl(e),8,-1):O?"Object":"",I=C||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",R=I+(P||O?"["+Fo.call(lB.call([],P||[],O||[]),": ")+"] ":"");return A.length===0?R+"{}":f?R+"{"+Pw(A,f)+"}":R+"{ "+Fo.call(A,", ")+" }"}return String(e)};function WU(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function UEe(t){return il.call(String(t),/"/g,"&quot;")}function Ow(t){return Bl(t)==="[object Array]"&&(!vi||!(typeof t=="object"&&vi in t))}function jEe(t){return Bl(t)==="[object Date]"&&(!vi||!(typeof t=="object"&&vi in t))}function pB(t){return Bl(t)==="[object RegExp]"&&(!vi||!(typeof t=="object"&&vi in t))}function $Ee(t){return Bl(t)==="[object Error]"&&(!vi||!(typeof t=="object"&&vi in t))}function VEe(t){return Bl(t)==="[object String]"&&(!vi||!(typeof t=="object"&&vi in t))}function GEe(t){return Bl(t)==="[object Number]"&&(!vi||!(typeof t=="object"&&vi in t))}function WEe(t){return Bl(t)==="[object Boolean]"&&(!vi||!(typeof t=="object"&&vi in t))}function zU(t){if(wf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Cw)return!1;try{return Cw.call(t),!0}catch{}return!1}function zEe(t){if(!t||typeof t!="object"||!Aw)return!1;try{return Aw.call(t),!0}catch{}return!1}var HEe=Object.prototype.hasOwnProperty||function(t){return t in this};function qs(t,e){return HEe.call(t,e)}function Bl(t){return kEe.call(t)}function XEe(t){if(t.name)return t.name;var e=MEe.call(DEe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function HU(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function YEe(t){if(!cm||!t||typeof t!="object")return!1;try{cm.call(t);try{fm.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function qEe(t){if(!Cd||!t||typeof t!="object")return!1;try{Cd.call(t,Cd);try{Td.call(t,Td)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function KEe(t){if(!oB||!t||typeof t!="object")return!1;try{return oB.call(t),!0}catch{}return!1}function ZEe(t){if(!fm||!t||typeof t!="object")return!1;try{fm.call(t);try{cm.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function QEe(t){if(!Td||!t||typeof t!="object")return!1;try{Td.call(t,Td);try{Cd.call(t,Cd)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function JEe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function XU(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return XU(eO.call(t,0,e.maxStringLength),e)+n}var i=il.call(il.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,ewe);return WU(i,"single",e)}function ewe(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+LEe.call(e.toString(16))}function Vh(t){return"Object("+t+")"}function gS(t){return t+" { ? }"}function vB(t,e,r,n){var i=n?Pw(r,n):Fo.call(r,", ");return t+" ("+e+") {"+i+"}"}function twe(t){for(var e=0;e<t.length;e++)if(HU(t[e],`
`)>=0)return!1;return!0}function rwe(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Fo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Fo.call(Array(e+1),r)}}function Pw(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Fo.call(t,","+r)+`
`+e.prev}function dv(t,e){var r=Ow(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=qs(t,i)?e(t[i],t):""}var a=typeof vS=="function"?vS(t):[],o;if(wf){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in t)qs(t,c)&&(r&&String(Number(c))===c&&c<t.length||wf&&o["$"+c]instanceof Symbol||(VU.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof vS=="function")for(var l=0;l<a.length;l++)GU.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}var YU=th,rh=OEe,nwe=NEe,iwe=Yp,pv=YU("%WeakMap%",!0),vv=YU("%Map%",!0),awe=rh("WeakMap.prototype.get",!0),owe=rh("WeakMap.prototype.set",!0),swe=rh("WeakMap.prototype.has",!0),lwe=rh("Map.prototype.get",!0),uwe=rh("Map.prototype.set",!0),cwe=rh("Map.prototype.has",!0),tO=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},fwe=function(t,e){var r=tO(t,e);return r&&r.value},hwe=function(t,e,r){var n=tO(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},dwe=function(t,e){return!!tO(t,e)},pwe=function(){var e,r,n,i={assert:function(a){if(!i.has(a))throw new iwe("Side channel does not contain "+nwe(a))},get:function(a){if(pv&&a&&(typeof a=="object"||typeof a=="function")){if(e)return awe(e,a)}else if(vv){if(r)return lwe(r,a)}else if(n)return fwe(n,a)},has:function(a){if(pv&&a&&(typeof a=="object"||typeof a=="function")){if(e)return swe(e,a)}else if(vv){if(r)return cwe(r,a)}else if(n)return dwe(n,a);return!1},set:function(a,o){pv&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new pv),owe(e,a,o)):vv?(r||(r=new vv),uwe(r,a,o)):(n||(n={key:{},next:null}),hwe(n,a,o))}};return i},vwe=String.prototype.replace,gwe=/%20/g,mS={RFC1738:"RFC1738",RFC3986:"RFC3986"},rO={default:mS.RFC3986,formatters:{RFC1738:function(t){return vwe.call(t,gwe,"+")},RFC3986:function(t){return String(t)}},RFC1738:mS.RFC1738,RFC3986:mS.RFC3986},mwe=rO,yS=Object.prototype.hasOwnProperty,pu=Array.isArray,Ao=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),ywe=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(pu(n)){for(var i=[],a=0;a<n.length;++a)typeof n[a]<"u"&&i.push(n[a]);r.obj[r.prop]=i}}},qU=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},_we=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(pu(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!yS.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return pu(e)&&!pu(r)&&(i=qU(e,n)),pu(e)&&pu(r)?(r.forEach(function(a,o){if(yS.call(e,o)){var s=e[o];s&&typeof s=="object"&&a&&typeof a=="object"?e[o]=t(s,a,n):e.push(a)}else e[o]=a}),e):Object.keys(r).reduce(function(a,o){var s=r[o];return yS.call(a,o)?a[o]=t(a[o],s,n):a[o]=s,a},i)},xwe=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},bwe=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Swe=function(e,r,n,i,a){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var s="",c=0;c<o.length;++c){var l=o.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||a===mwe.RFC1738&&(l===40||l===41)){s+=o.charAt(c);continue}if(l<128){s=s+Ao[l];continue}if(l<2048){s=s+(Ao[192|l>>6]+Ao[128|l&63]);continue}if(l<55296||l>=57344){s=s+(Ao[224|l>>12]+Ao[128|l>>6&63]+Ao[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|o.charCodeAt(c)&1023),s+=Ao[240|l>>18]+Ao[128|l>>12&63]+Ao[128|l>>6&63]+Ao[128|l&63]}return s},Ewe=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var a=r[i],o=a.obj[a.prop],s=Object.keys(o),c=0;c<s.length;++c){var l=s[c],u=o[l];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:o,prop:l}),n.push(u))}return ywe(r),e},wwe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Awe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Cwe=function(e,r){return[].concat(e,r)},Twe=function(e,r){if(pu(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},KU={arrayToObject:qU,assign:xwe,combine:Cwe,compact:Ewe,decode:bwe,encode:Swe,isBuffer:Awe,isRegExp:wwe,maybeMap:Twe,merge:_we},ZU=pwe,dg=KU,Od=rO,Owe=Object.prototype.hasOwnProperty,QU={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Po=Array.isArray,Pwe=Array.prototype.push,JU=function(t,e){Pwe.apply(t,Po(e)?e:[e])},Rwe=Date.prototype.toISOString,gB=Od.default,_n={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:dg.encode,encodeValuesOnly:!1,format:gB,formatter:Od.formatters[gB],indices:!1,serializeDate:function(e){return Rwe.call(e)},skipNulls:!1,strictNullHandling:!1},Iwe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},_S={},Fwe=function t(e,r,n,i,a,o,s,c,l,u,f,h,d,p,v,y,m,g){for(var x=e,b=g,S=0,w=!1;(b=b.get(_S))!==void 0&&!w;){var A=b.get(e);if(S+=1,typeof A<"u"){if(A===S)throw new RangeError("Cyclic object value");w=!0}typeof b.get(_S)>"u"&&(S=0)}if(typeof u=="function"?x=u(r,x):x instanceof Date?x=d(x):n==="comma"&&Po(x)&&(x=dg.maybeMap(x,function(X){return X instanceof Date?d(X):X})),x===null){if(o)return l&&!y?l(r,_n.encoder,m,"key",p):r;x=""}if(Iwe(x)||dg.isBuffer(x)){if(l){var C=y?r:l(r,_n.encoder,m,"key",p);return[v(C)+"="+v(l(x,_n.encoder,m,"value",p))]}return[v(r)+"="+v(String(x))]}var O=[];if(typeof x>"u")return O;var P;if(n==="comma"&&Po(x))y&&l&&(x=dg.maybeMap(x,l)),P=[{value:x.length>0?x.join(",")||null:void 0}];else if(Po(u))P=u;else{var I=Object.keys(x);P=f?I.sort(f):I}var R=c?r.replace(/\./g,"%2E"):r,F=i&&Po(x)&&x.length===1?R+"[]":R;if(a&&Po(x)&&x.length===0)return F+"[]";for(var D=0;D<P.length;++D){var L=P[D],U=typeof L=="object"&&typeof L.value<"u"?L.value:x[L];if(!(s&&U===null)){var Y=h&&c?L.replace(/\./g,"%2E"):L,ee=Po(x)?typeof n=="function"?n(F,Y):F:F+(h?"."+Y:"["+Y+"]");g.set(e,S);var J=ZU();J.set(_S,g),JU(O,t(U,ee,n,i,a,o,s,c,n==="comma"&&y&&Po(x)?null:l,u,f,h,d,p,v,y,m,J))}}return O},kwe=function(e){if(!e)return _n;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||_n.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Od.default;if(typeof e.format<"u"){if(!Owe.call(Od.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Od.formatters[n],a=_n.filter;(typeof e.filter=="function"||Po(e.filter))&&(a=e.filter);var o;if(e.arrayFormat in QU?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=_n.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:_n.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:_n.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:_n.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:_n.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?_n.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:_n.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:_n.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:_n.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:_n.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:_n.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:_n.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:_n.strictNullHandling}},Dwe=function(t,e){var r=t,n=kwe(e),i,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):Po(n.filter)&&(a=n.filter,i=a);var o=[];if(typeof r!="object"||r===null)return"";var s=QU[n.arrayFormat],c=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=ZU(),u=0;u<i.length;++u){var f=i[u];n.skipNulls&&r[f]===null||JU(o,Fwe(r[f],f,s,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var h=o.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""},Af=KU,Rw=Object.prototype.hasOwnProperty,Mwe=Array.isArray,rn={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Af.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Lwe=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},ej=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Bwe="utf8=%26%2310003%3B",Nwe="utf8=%E2%9C%93",Uwe=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,a),s=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===Nwe?l="utf-8":o[c]===Bwe&&(l="iso-8859-1"),s=c,c=o.length);for(c=0;c<o.length;++c)if(c!==s){var u=o[c],f=u.indexOf("]="),h=f===-1?u.indexOf("="):f+1,d,p;h===-1?(d=r.decoder(u,rn.decoder,l,"key"),p=r.strictNullHandling?null:""):(d=r.decoder(u.slice(0,h),rn.decoder,l,"key"),p=Af.maybeMap(ej(u.slice(h+1),r),function(y){return r.decoder(y,rn.decoder,l,"value")})),p&&r.interpretNumericEntities&&l==="iso-8859-1"&&(p=Lwe(p)),u.indexOf("[]=")>-1&&(p=Mwe(p)?[p]:p);var v=Rw.call(n,d);v&&r.duplicates==="combine"?n[d]=Af.combine(n[d],p):(!v||r.duplicates==="last")&&(n[d]=p)}return n},jwe=function(t,e,r,n){for(var i=n?e:ej(e,r),a=t.length-1;a>=0;--a){var o,s=t[a];if(s==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=r.plainObjects?Object.create(null):{};var c=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(l,10);!r.parseArrays&&l===""?o={0:i}:!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},$we=function(e,r,n,i){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,c=n.depth>0&&o.exec(a),l=c?a.slice(0,c.index):a,u=[];if(l){if(!n.plainObjects&&Rw.call(Object.prototype,l)&&!n.allowPrototypes)return;u.push(l)}for(var f=0;n.depth>0&&(c=s.exec(a))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&Rw.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+a.slice(c.index)+"]"),jwe(u,r,n,i)}},Vwe=function(e){if(!e)return rn;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?rn.charset:e.charset,n=typeof e.duplicates>"u"?rn.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:rn.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:rn.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:rn.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:rn.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:rn.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:rn.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:rn.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:rn.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:rn.decoder,delimiter:typeof e.delimiter=="string"||Af.isRegExp(e.delimiter)?e.delimiter:rn.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:rn.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:rn.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:rn.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:rn.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:rn.strictNullHandling}},Gwe=function(t,e){var r=Vwe(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Uwe(t,r):t,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],c=$we(s,n[s],r,typeof t=="string");i=Af.merge(i,c,r)}return r.allowSparse===!0?i:Af.compact(i)},Wwe=Dwe,zwe=Gwe,Hwe=rO,Xwe={formats:Hwe,parse:zwe,stringify:Wwe},Ywe=FSe;function fo(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var qwe=/^([a-z0-9.+-]+:)/i,Kwe=/:[0-9]*$/,Zwe=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Qwe=["<",">",'"',"`"," ","\r",`
`,"	"],Jwe=["{","}","|","\\","^","`"].concat(Qwe),Iw=["'"].concat(Jwe),mB=["%","/","?",";","#"].concat(Iw),yB=["/","?","#"],eAe=255,_B=/^[+a-z0-9A-Z_-]{0,63}$/,tAe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rAe={javascript:!0,"javascript:":!0},Fw={javascript:!0,"javascript:":!0},uf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},kw=Xwe;function t_(t,e,r){if(t&&typeof t=="object"&&t instanceof fo)return t;var n=new fo;return n.parse(t,e,r),n}fo.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",a=t.split(i),o=/\\/g;a[0]=a[0].replace(o,"/"),t=a.join(i);var s=t;if(s=s.trim(),!r&&t.split("#").length===1){var c=Zwe.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=kw.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=qwe.exec(s);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@/]+@[^@/]+/)){var f=s.substr(0,2)==="//";f&&!(l&&Fw[l])&&(s=s.substr(2),this.slashes=!0)}if(!Fw[l]&&(f||l&&!uf[l])){for(var h=-1,d=0;d<yB.length;d++){var p=s.indexOf(yB[d]);p!==-1&&(h===-1||p<h)&&(h=p)}var v,y;h===-1?y=s.lastIndexOf("@"):y=s.lastIndexOf("@",h),y!==-1&&(v=s.slice(0,y),s=s.slice(y+1),this.auth=decodeURIComponent(v)),h=-1;for(var d=0;d<mB.length;d++){var p=s.indexOf(mB[d]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m)for(var g=this.hostname.split(/\./),d=0,x=g.length;d<x;d++){var b=g[d];if(b&&!b.match(_B)){for(var S="",w=0,A=b.length;w<A;w++)b.charCodeAt(w)>127?S+="x":S+=b[w];if(!S.match(_B)){var C=g.slice(0,d),O=g.slice(d+1),P=b.match(tAe);P&&(C.push(P[1]),O.unshift(P[2])),O.length&&(s="/"+O.join(".")+s),this.hostname=C.join(".");break}}}this.hostname.length>eAe?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=Ywe.toASCII(this.hostname));var I=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+I,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!rAe[u])for(var d=0,x=Iw.length;d<x;d++){var F=Iw[d];if(s.indexOf(F)!==-1){var D=encodeURIComponent(F);D===F&&(D=escape(F)),s=s.split(F).join(D)}}var L=s.indexOf("#");L!==-1&&(this.hash=s.substr(L),s=s.slice(0,L));var U=s.indexOf("?");if(U!==-1?(this.search=s.substr(U),this.query=s.substr(U+1),e&&(this.query=kw.parse(this.query)),s=s.slice(0,U)):e&&(this.search="",this.query={}),s&&(this.pathname=s),uf[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",Y=this.search||"";this.path=I+Y}return this.href=this.format(),this};function nAe(t){return typeof t=="string"&&(t=t_(t)),t instanceof fo?t.format():fo.prototype.format.call(t)}fo.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(a=kw.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||a&&"?"+a||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||uf[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),o=o.replace("#","%23"),e+i+r+o+n};function iAe(t,e){return t_(t,!1,!0).resolve(e)}fo.prototype.resolve=function(t){return this.resolveObject(t_(t,!1,!0)).format()};fo.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new fo;e.parse(t,!1,!0),t=e}for(var r=new fo,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),s=0;s<o.length;s++){var c=o[s];c!=="protocol"&&(r[c]=t[c])}return uf[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!uf[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var f=l[u];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Fw[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),r.pathname=x.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var h=r.pathname||"",d=r.search||"";r.path=h+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",v=t.host||t.pathname&&t.pathname.charAt(0)==="/",y=v||p||r.host&&t.pathname,m=y,g=r.pathname&&r.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],b=r.protocol&&!uf[r.protocol];if(b&&(r.hostname="",r.port=null,r.host&&(g[0]===""?g[0]=r.host:g.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),y=y&&(x[0]===""||g[0]==="")),v)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,g=x;else if(x.length)g||(g=[]),g.pop(),g=g.concat(x),r.search=t.search,r.query=t.query;else if(t.search!=null){if(b){r.host=g.shift(),r.hostname=r.host;var S=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;S&&(r.auth=S.shift(),r.hostname=S.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!g.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=g.slice(-1)[0],A=(r.host||t.host||g.length>1)&&(w==="."||w==="..")||w==="",C=0,O=g.length;O>=0;O--)w=g[O],w==="."?g.splice(O,1):w===".."?(g.splice(O,1),C++):C&&(g.splice(O,1),C--);if(!y&&!m)for(;C--;C)g.unshift("..");y&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),A&&g.join("/").substr(-1)!=="/"&&g.push("");var P=g[0]===""||g[0]&&g[0].charAt(0)==="/";if(b){r.hostname=P?"":g.length?g.shift():"",r.host=r.hostname;var S=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;S&&(r.auth=S.shift(),r.hostname=S.shift(),r.host=r.hostname)}return y=y||r.host&&g.length,y&&!P&&g.unshift(""),g.length>0?r.pathname=g.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};fo.prototype.parseHost=function(){var t=this.host,e=Kwe.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var aAe=t_,oAe=iAe,sAe=nAe;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var bu={parse:aAe,format:sAe,resolve:oAe};function qa(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function xB(t){var e=t.split("?")[0];return e.split("#")[0]}function lAe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function uAe(t,e,r){return t.replace(new RegExp(lAe(e),"g"),r)}function cAe(t,e){for(var r="",n=0,i=-1,a=0,o,s=0;s<=t.length;++s){if(s<t.length)o=t.charCodeAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=s,a=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=s,a=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,s):r=t.slice(i+1,s),n=s-i-1;i=s,a=0}else o===46&&a!==-1?++a:a=-1}return r}var tj={toPosix:function(t){return uAe(t,"\\","/")},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){qa(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){var a=(r==null?void 0:r[0])||(n==null?void 0:n[0])||(i==null?void 0:i[0]);e=a,t=t.slice(a.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var n=xB(this.toPosix(e??Ve.ADAPTER.getBaseUrl())),i=xB(this.toPosix(r??this.rootname(n)));if(qa(t),t=this.toPosix(t),t.startsWith("/"))return tj.join(i,t.slice(1));var a=this.isAbsolute(t)?t:this.join(n,t);return a},normalize:function(t){if(t=this.toPosix(t),qa(t),t.length===0)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var n=t.endsWith("/");return t=cAe(t,!1),t.length>0&&n&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return qa(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join:function(){for(var t=arguments,e,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length===0)return".";for(var i,a=0;a<r.length;++a){var o=r[a];if(qa(o),o.length>0)if(i===void 0)i=o;else{var s=(e=r[a-1])!==null&&e!==void 0?e:"";this.extname(s)?i+="/../"+o:i+="/"+o}}return i===void 0?".":this.normalize(i)},dirname:function(t){if(qa(t),t.length===0)return".";t=this.toPosix(t);var e=t.charCodeAt(0),r=e===47,n=-1,i=!0,a=this.getProtocol(t),o=t;t=t.slice(a.length);for(var s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),e===47){if(!i){n=s;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?a+t:a:r&&n===1?"//":a+t.slice(0,n)},rootname:function(t){qa(t),t=this.toPosix(t);var e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename:function(t,e){qa(t),e&&qa(e),t=this.toPosix(t);var r=0,n=-1,i=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var o=e.length-1,s=-1;for(a=t.length-1;a>=0;--a){var c=t.charCodeAt(a);if(c===47){if(!i){r=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===e.charCodeAt(o)?--o===-1&&(n=a):(o=-1,n=s))}return r===n?n=s:n===-1&&(n=t.length),t.slice(r,n)}for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!i){r=a+1;break}}else n===-1&&(i=!1,n=a+1);return n===-1?"":t.slice(r,n)},extname:function(t){qa(t),t=this.toPosix(t);for(var e=-1,r=0,n=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(s===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),s===46?e===-1?e=o:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||n===-1||a===0||a===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse:function(t){qa(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=this.toPosix(t);var r=t.charCodeAt(0),n=this.isAbsolute(t),i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;for(var a=-1,o=0,s=-1,c=!0,l=t.length-1,u=0;l>=i;--l){if(r=t.charCodeAt(l),r===47){if(!c){o=l+1;break}continue}s===-1&&(c=!1,s=l+1),r===46?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}return a===-1||s===-1||u===0||u===1&&a===s-1&&a===o+1?s!==-1&&(o===0&&n?e.base=e.name=t.slice(1,s):e.base=e.name=t.slice(o,s)):(o===0&&n?(e.name=t.slice(1,a),e.base=t.slice(1,s)):(e.name=t.slice(o,a),e.base=t.slice(o,s)),e.ext=t.slice(a,s)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};Ve.RETINA_PREFIX=/@([0-9\.]+)x/;Ve.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Dw=!1,bB="6.5.10";function fAe(){Dw=!0}function rj(t){var e;if(!Dw){if(Ve.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+bB+" - ✰ "+t+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+bB+" - "+t+" - http://www.pixijs.com/");Dw=!0}}var xS;function nj(){return typeof xS>"u"&&(xS=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:Ve.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Ve.ADAPTER.getWebGLRenderingContext())return!1;var r=Ve.ADAPTER.createCanvas(),n=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),i=!!(n&&n.getContextAttributes().stencil);if(n){var a=n.getExtension("WEBGL_lose_context");a&&a.loseContext()}return n=null,i}catch{return!1}}()),xS}var hAe="#f0f8ff",dAe="#faebd7",pAe="#00ffff",vAe="#7fffd4",gAe="#f0ffff",mAe="#f5f5dc",yAe="#ffe4c4",_Ae="#000000",xAe="#ffebcd",bAe="#0000ff",SAe="#8a2be2",EAe="#a52a2a",wAe="#deb887",AAe="#5f9ea0",CAe="#7fff00",TAe="#d2691e",OAe="#ff7f50",PAe="#6495ed",RAe="#fff8dc",IAe="#dc143c",FAe="#00ffff",kAe="#00008b",DAe="#008b8b",MAe="#b8860b",LAe="#a9a9a9",BAe="#006400",NAe="#a9a9a9",UAe="#bdb76b",jAe="#8b008b",$Ae="#556b2f",VAe="#ff8c00",GAe="#9932cc",WAe="#8b0000",zAe="#e9967a",HAe="#8fbc8f",XAe="#483d8b",YAe="#2f4f4f",qAe="#2f4f4f",KAe="#00ced1",ZAe="#9400d3",QAe="#ff1493",JAe="#00bfff",eCe="#696969",tCe="#696969",rCe="#1e90ff",nCe="#b22222",iCe="#fffaf0",aCe="#228b22",oCe="#ff00ff",sCe="#dcdcdc",lCe="#f8f8ff",uCe="#daa520",cCe="#ffd700",fCe="#808080",hCe="#008000",dCe="#adff2f",pCe="#808080",vCe="#f0fff0",gCe="#ff69b4",mCe="#cd5c5c",yCe="#4b0082",_Ce="#fffff0",xCe="#f0e68c",bCe="#fff0f5",SCe="#e6e6fa",ECe="#7cfc00",wCe="#fffacd",ACe="#add8e6",CCe="#f08080",TCe="#e0ffff",OCe="#fafad2",PCe="#d3d3d3",RCe="#90ee90",ICe="#d3d3d3",FCe="#ffb6c1",kCe="#ffa07a",DCe="#20b2aa",MCe="#87cefa",LCe="#778899",BCe="#778899",NCe="#b0c4de",UCe="#ffffe0",jCe="#00ff00",$Ce="#32cd32",VCe="#faf0e6",GCe="#ff00ff",WCe="#800000",zCe="#66cdaa",HCe="#0000cd",XCe="#ba55d3",YCe="#9370db",qCe="#3cb371",KCe="#7b68ee",ZCe="#00fa9a",QCe="#48d1cc",JCe="#c71585",eTe="#191970",tTe="#f5fffa",rTe="#ffe4e1",nTe="#ffe4b5",iTe="#ffdead",aTe="#000080",oTe="#fdf5e6",sTe="#808000",lTe="#6b8e23",uTe="#ffa500",cTe="#ff4500",fTe="#da70d6",hTe="#eee8aa",dTe="#98fb98",pTe="#afeeee",vTe="#db7093",gTe="#ffefd5",mTe="#ffdab9",yTe="#cd853f",_Te="#ffc0cb",xTe="#dda0dd",bTe="#b0e0e6",STe="#800080",ETe="#663399",wTe="#ff0000",ATe="#bc8f8f",CTe="#4169e1",TTe="#8b4513",OTe="#fa8072",PTe="#f4a460",RTe="#2e8b57",ITe="#fff5ee",FTe="#a0522d",kTe="#c0c0c0",DTe="#87ceeb",MTe="#6a5acd",LTe="#708090",BTe="#708090",NTe="#fffafa",UTe="#00ff7f",jTe="#4682b4",$Te="#d2b48c",VTe="#008080",GTe="#d8bfd8",WTe="#ff6347",zTe="#40e0d0",HTe="#ee82ee",XTe="#f5deb3",YTe="#ffffff",qTe="#f5f5f5",KTe="#ffff00",ZTe="#9acd32",QTe={aliceblue:hAe,antiquewhite:dAe,aqua:pAe,aquamarine:vAe,azure:gAe,beige:mAe,bisque:yAe,black:_Ae,blanchedalmond:xAe,blue:bAe,blueviolet:SAe,brown:EAe,burlywood:wAe,cadetblue:AAe,chartreuse:CAe,chocolate:TAe,coral:OAe,cornflowerblue:PAe,cornsilk:RAe,crimson:IAe,cyan:FAe,darkblue:kAe,darkcyan:DAe,darkgoldenrod:MAe,darkgray:LAe,darkgreen:BAe,darkgrey:NAe,darkkhaki:UAe,darkmagenta:jAe,darkolivegreen:$Ae,darkorange:VAe,darkorchid:GAe,darkred:WAe,darksalmon:zAe,darkseagreen:HAe,darkslateblue:XAe,darkslategray:YAe,darkslategrey:qAe,darkturquoise:KAe,darkviolet:ZAe,deeppink:QAe,deepskyblue:JAe,dimgray:eCe,dimgrey:tCe,dodgerblue:rCe,firebrick:nCe,floralwhite:iCe,forestgreen:aCe,fuchsia:oCe,gainsboro:sCe,ghostwhite:lCe,goldenrod:uCe,gold:cCe,gray:fCe,green:hCe,greenyellow:dCe,grey:pCe,honeydew:vCe,hotpink:gCe,indianred:mCe,indigo:yCe,ivory:_Ce,khaki:xCe,lavenderblush:bCe,lavender:SCe,lawngreen:ECe,lemonchiffon:wCe,lightblue:ACe,lightcoral:CCe,lightcyan:TCe,lightgoldenrodyellow:OCe,lightgray:PCe,lightgreen:RCe,lightgrey:ICe,lightpink:FCe,lightsalmon:kCe,lightseagreen:DCe,lightskyblue:MCe,lightslategray:LCe,lightslategrey:BCe,lightsteelblue:NCe,lightyellow:UCe,lime:jCe,limegreen:$Ce,linen:VCe,magenta:GCe,maroon:WCe,mediumaquamarine:zCe,mediumblue:HCe,mediumorchid:XCe,mediumpurple:YCe,mediumseagreen:qCe,mediumslateblue:KCe,mediumspringgreen:ZCe,mediumturquoise:QCe,mediumvioletred:JCe,midnightblue:eTe,mintcream:tTe,mistyrose:rTe,moccasin:nTe,navajowhite:iTe,navy:aTe,oldlace:oTe,olive:sTe,olivedrab:lTe,orange:uTe,orangered:cTe,orchid:fTe,palegoldenrod:hTe,palegreen:dTe,paleturquoise:pTe,palevioletred:vTe,papayawhip:gTe,peachpuff:mTe,peru:yTe,pink:_Te,plum:xTe,powderblue:bTe,purple:STe,rebeccapurple:ETe,red:wTe,rosybrown:ATe,royalblue:CTe,saddlebrown:TTe,salmon:OTe,sandybrown:PTe,seagreen:RTe,seashell:ITe,sienna:FTe,silver:kTe,skyblue:DTe,slateblue:MTe,slategray:LTe,slategrey:BTe,snow:NTe,springgreen:UTe,steelblue:jTe,tan:$Te,teal:VTe,thistle:GTe,tomato:WTe,turquoise:zTe,violet:HTe,wheat:XTe,white:YTe,whitesmoke:qTe,yellow:KTe,yellowgreen:ZTe};function Tn(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function nO(t){var e=t.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function iO(t){return typeof t=="string"&&(t=QTe[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function Ii(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function JTe(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[ze.NORMAL_NPM]=ze.NORMAL,t[ze.ADD_NPM]=ze.ADD,t[ze.SCREEN_NPM]=ze.SCREEN,e[ze.NORMAL]=ze.NORMAL_NPM,e[ze.ADD]=ze.ADD_NPM,e[ze.SCREEN]=ze.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}var aO=JTe();function oO(t,e){return aO[e?1:0][t]}function ij(t,e,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function r_(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,n=t>>8&255,i=t&255;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(e*255<<24)+(r<<16)+(n<<8)+i}function sO(t,e,r,n){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(n||n===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function aj(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function n_(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var e2e={Float32Array,Uint32Array,Int32Array,Uint8Array};function t2e(t,e){for(var r=0,n=0,i={},a=0;a<t.length;a++)n+=e[a],r+=t[a].length;for(var o=new ArrayBuffer(r*4),s=null,c=0,a=0;a<t.length;a++){var l=e[a],u=t[a],f=n_(u);i[f]||(i[f]=new e2e[f](o)),s=i[f];for(var h=0;h<u.length;h++){var d=(h/l|0)*n+c,p=h%l;s[d+p]=u[h]}c+=l}return new Float32Array(o)}function up(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Mw(t){return!(t&t-1)&&!!t}function Lw(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Pu(t,e,r){var n=t.length,i;if(!(e>=n||r===0)){r=e+r>n?n-e:r;var a=n-r;for(i=e;i<a;++i)t[i]=t[i+r];t.length=a}}function Su(t){return t===0?0:t<0?-1:1}var r2e=0;function Pl(){return++r2e}var SB={};function Fi(t,e,r){if(r===void 0&&(r=3),!SB[e]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(n))),SB[e]=!0}}var Bw={},Gi=Object.create(null),Ia=Object.create(null);function n2e(){var t;for(t in Gi)Gi[t].destroy();for(t in Ia)Ia[t].destroy()}function oj(){var t;for(t in Gi)delete Gi[t];for(t in Ia)delete Ia[t]}var Nw=function(){function t(e,r,n){this.canvas=Ve.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||Ve.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function sj(t){var e=t.width,r=t.height,n=t.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,e,r),a=i.data,o=a.length,s={top:null,left:null,right:null,bottom:null},c=null,l,u,f;for(l=0;l<o;l+=4)a[l+3]!==0&&(u=l/4%e,f=~~(l/4/e),s.top===null&&(s.top=f),(s.left===null||u<s.left)&&(s.left=u),(s.right===null||s.right<u)&&(s.right=u+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(e=s.right-s.left,r=s.bottom-s.top+1,c=n.getImageData(s.left,s.top,e,r)),{height:r,width:e,data:c}}var lj=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function i2e(t){var e=lj.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var gv;function uj(t,e){if(e===void 0&&(e=globalThis.location),t.indexOf("data:")===0)return"";e=e||globalThis.location,gv||(gv=document.createElement("a")),gv.href=t;var r=bu.parse(gv.href),n=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!n||r.protocol!==e.protocol?"anonymous":""}function cp(t,e){var r=Ve.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}const a2e=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Ia,CanvasRenderTarget:Nw,DATA_URI:lj,EventEmitter:eh,ProgramCache:Bw,TextureCache:Gi,clearTextureCache:oj,correctBlendMode:oO,createIndicesForQuads:aj,decomposeDataUri:i2e,deprecation:Fi,destroyTextureCache:n2e,determineCrossOrigin:uj,earcut:q2,getBufferType:n_,getResolutionOfUrl:cp,hex2rgb:Tn,hex2string:nO,interleaveTypedArrays:t2e,isMobile:Ba,isPow2:Mw,isWebGLSupported:nj,log2:Lw,nextPow2:up,path:tj,premultiplyBlendMode:aO,premultiplyRgba:ij,premultiplyTint:r_,premultiplyTintToRgba:sO,removeItems:Pu,rgb2hex:Ii,sayHello:rj,sign:Su,skipHello:fAe,string2hex:iO,trimCanvas:sj,uid:Pl,url:bu},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fp=Math.PI*2,cj=180/Math.PI,Rl=Math.PI/180,En;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(En||(En={}));var Dt=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),mv=[new Dt,new Dt,new Dt,new Dt],Mt=function(){function t(e,r,n,i){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=En.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.intersects=function(e,r){if(!r){var n=this.x<e.x?e.x:this.x,i=this.right>e.right?e.right:this.right;if(i<=n)return!1;var a=this.y<e.y?e.y:this.y,o=this.bottom>e.bottom?e.bottom:this.bottom;return o>a}var s=this.left,c=this.right,l=this.top,u=this.bottom;if(c<=s||u<=l)return!1;var f=mv[0].set(e.left,e.top),h=mv[1].set(e.left,e.bottom),d=mv[2].set(e.right,e.top),p=mv[3].set(e.right,e.bottom);if(d.x<=f.x||h.y<=f.y)return!1;var v=Math.sign(r.a*r.d-r.b*r.c);if(v===0||(r.apply(f,f),r.apply(h,h),r.apply(d,d),r.apply(p,p),Math.max(f.x,h.x,d.x,p.x)<=s||Math.min(f.x,h.x,d.x,p.x)>=c||Math.max(f.y,h.y,d.y,p.y)<=l||Math.min(f.y,h.y,d.y,p.y)>=u))return!1;var y=v*(h.y-f.y),m=v*(f.x-h.x),g=y*s+m*l,x=y*c+m*l,b=y*s+m*u,S=y*c+m*u;if(Math.max(g,x,b,S)<=y*f.x+m*f.y||Math.min(g,x,b,S)>=y*p.x+m*p.y)return!1;var w=v*(f.y-d.y),A=v*(d.x-f.x),C=w*s+A*l,O=w*c+A*l,P=w*s+A*u,I=w*c+A*u;return!(Math.max(C,O,P,I)<=w*f.x+A*f.y||Math.min(C,O,P,I)>=w*p.x+A*p.y)},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(a-i,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=a-i,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),fj=function(){function t(e,r,n){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=e,this.y=r,this.radius=n,this.type=En.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-e,a=this.y-r;return i*=i,a*=a,i+a<=n},t.prototype.getBounds=function(){return new Mt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),hj=function(){function t(e,r,n,i){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=r,this.width=n,this.height=i,this.type=En.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1},t.prototype.getBounds=function(){return new Mt(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),cf=function(){function t(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=Array.isArray(r[0])?r[0]:r;if(typeof i[0]!="number"){for(var a=[],o=0,s=i.length;o<s;o++)a.push(i[o].x,i[o].y);i=a}this.points=i,this.type=En.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var n=!1,i=this.points.length/2,a=0,o=i-1;a<i;o=a++){var s=this.points[a*2],c=this.points[a*2+1],l=this.points[o*2],u=this.points[o*2+1],f=c>r!=u>r&&e<(l-s)*((r-c)/(u-c))+s;f&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),dj=function(){function t(e,r,n,i,a){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=20),this.x=e,this.y=r,this.width=n,this.height=i,this.radius=a,this.type=En.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var i=e-(this.x+n),a=r-(this.y+n),o=n*n;if(i*i+a*a<=o||(i=e-(this.x+this.width-n),i*i+a*a<=o)||(a=r-(this.y+this.height-n),i*i+a*a<=o)||(i=e-(this.x+n),i*i+a*a<=o))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),al=function(){function t(e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),zr=function(){function t(e,r,n,i,a,o){e===void 0&&(e=1),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=0),o===void 0&&(o=0),this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,n,i,a,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(e,r){r=r||new Dt;var n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new Dt;var n=1/(this.a*this.d+this.c*-this.b),i=e.x,a=e.y;return r.x=this.d*n*i+-this.c*n*a+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*a+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),n=Math.sin(e),i=this.a,a=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=a*r-this.d*n,this.d=a*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this},t.prototype.append=function(e){var r=this.a,n=this.b,i=this.c,a=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*a,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*a,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*a+this.ty,this},t.prototype.setTransform=function(e,r,n,i,a,o,s,c,l){return this.a=Math.cos(s+l)*a,this.b=Math.sin(s+l)*a,this.c=-Math.sin(s-c)*o,this.d=Math.cos(s-c)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,n=this.b,i=this.c,a=this.d,o=e.pivot,s=-Math.atan2(-i,a),c=Math.atan2(n,r),l=Math.abs(s+c);return l<1e-5||Math.abs(fp-l)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=c),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+a*a),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*a),e},t.prototype.invert=function(){var e=this.a,r=this.b,n=this.c,i=this.d,a=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*a)/o,this.ty=-(e*this.ty-r*a)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),uu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],fu=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hu=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Uw=[],pj=[],yv=Math.sign;function o2e(){for(var t=0;t<16;t++){var e=[];Uw.push(e);for(var r=0;r<16;r++)for(var n=yv(uu[t]*uu[r]+fu[t]*cu[r]),i=yv(cu[t]*uu[r]+hu[t]*cu[r]),a=yv(uu[t]*fu[r]+fu[t]*hu[r]),o=yv(cu[t]*fu[r]+hu[t]*hu[r]),s=0;s<16;s++)if(uu[s]===n&&cu[s]===i&&fu[s]===a&&hu[s]===o){e.push(s);break}}for(var t=0;t<16;t++){var c=new zr;c.set(uu[t],cu[t],fu[t],hu[t],0,0),pj.push(c)}}o2e();var kr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return uu[t]},uY:function(t){return cu[t]},vX:function(t){return fu[t]},vY:function(t){return hu[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return Uw[t][e]},sub:function(t,e){return Uw[t][kr.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?kr.S:kr.N:Math.abs(e)*2<=Math.abs(t)?t>0?kr.E:kr.W:e>0?t>0?kr.SE:kr.SW:t>0?kr.NE:kr.NW},matrixAppendRotationInv:function(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=pj[kr.inv(e)];i.tx=r,i.ty=n,t.append(i)}},i_=function(){function t(){this.worldTransform=new zr,this.localTransform=new zr,this.position=new al(this.onChange,this,0,0),this.scale=new al(this.onChange,this,1,1),this.pivot=new al(this.onChange,this,0,0),this.skew=new al(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,i=this.worldTransform;i.a=r.a*n.a+r.b*n.c,i.b=r.a*n.b+r.b*n.d,i.c=r.c*n.a+r.d*n.c,i.d=r.c*n.b+r.d*n.d,i.tx=r.tx*n.a+r.ty*n.c+n.tx,i.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ve.SORTABLE_CHILDREN=!1;var hp=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Mt.EMPTY:(e=e||new Mt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var n=e.a,i=e.b,a=e.c,o=e.d,s=e.tx,c=e.ty,l=n*r.x+a*r.y+s,u=i*r.x+o*r.y+c;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(e){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY,o=e[0],s=e[1];r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=e[2],s=e[3],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=e[4],s=e[5],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=e[6],s=e[7],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,this.minX=r,this.minY=n,this.maxX=i,this.maxY=a},t.prototype.addFrame=function(e,r,n,i,a){this.addFrameMatrix(e.worldTransform,r,n,i,a)},t.prototype.addFrameMatrix=function(e,r,n,i,a){var o=e.a,s=e.b,c=e.c,l=e.d,u=e.tx,f=e.ty,h=this.minX,d=this.minY,p=this.maxX,v=this.maxY,y=o*r+c*n+u,m=s*r+l*n+f;h=y<h?y:h,d=m<d?m:d,p=y>p?y:p,v=m>v?m:v,y=o*i+c*n+u,m=s*i+l*n+f,h=y<h?y:h,d=m<d?m:d,p=y>p?y:p,v=m>v?m:v,y=o*r+c*a+u,m=s*r+l*a+f,h=y<h?y:h,d=m<d?m:d,p=y>p?y:p,v=m>v?m:v,y=o*i+c*a+u,m=s*i+l*a+f,h=y<h?y:h,d=m<d?m:d,p=y>p?y:p,v=m>v?m:v,this.minX=h,this.minY=d,this.maxX=p,this.maxY=v},t.prototype.addVertexData=function(e,r,n){for(var i=this.minX,a=this.minY,o=this.maxX,s=this.maxY,c=r;c<n;c+=2){var l=e[c],u=e[c+1];i=l<i?l:i,a=u<a?u:a,o=l>o?l:o,s=u>s?u:s}this.minX=i,this.minY=a,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)},t.prototype.addVerticesMatrix=function(e,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=a);for(var s=e.a,c=e.b,l=e.c,u=e.d,f=e.tx,h=e.ty,d=this.minX,p=this.minY,v=this.maxX,y=this.maxY,m=n;m<i;m+=2){var g=r[m],x=r[m+1],b=s*g+l*x+f,S=u*x+c*g+h;d=Math.min(d,b-a),v=Math.max(v,b+a),p=Math.min(p,S-o),y=Math.max(y,S+o)}this.minX=d,this.minY=p,this.maxX=v,this.maxY=y},t.prototype.addBounds=function(e){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>a?e.maxY:a},t.prototype.addBoundsMask=function(e,r){var n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,a=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,a=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,n,i,a,o){e-=a,r-=o,n+=a,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jw=function(t,e){return jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},jw(t,e)};function lO(t,e){jw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Qr=function(t){lO(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new i_,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new hp,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var a=n[i];Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(r,a))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Mt),n=this._boundsRect),this._bounds.getRectangle(n)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new Mt),r=this._localBoundsRect),this._localBounds||(this._localBounds=new hp);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=a,this._bounds.updateID+=this._boundsID-o,s},e.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},e.prototype.toLocal=function(r,n,i,a){return n&&(r=n.toGlobal(r,i,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,n,i,a,o,s,c,l,u){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=1),o===void 0&&(o=0),s===void 0&&(s=0),c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=a||1,this.rotation=o,this.skew.x=s,this.skew.y=c,this.pivot.x=l,this.pivot.y=u,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new uO),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*cj},set:function(r){this.transform.rotation=r*Rl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=r,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(eh),uO=function(t){lO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(Qr);Qr.prototype.displayObjectUpdateTransform=Qr.prototype.updateTransform;function s2e(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var Cn=function(t){lO(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=Ve.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.addChild(n[a]);else{var o=n[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return n[0]},e.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},e.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),a=this.getChildIndex(n);this.children[i]=n,this.children[a]=r,this.onChildrenChange(i<a?i:a)}},e.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},e.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);Pu(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.removeChild(n[a]);else{var o=n[0],s=this.children.indexOf(o);if(s===-1)return null;o.parent=null,o.transform._parentID=-1,Pu(this.children,s,1),this._boundsID++,this.onChildrenChange(s),o.emit("removed",this),this.emit("childRemoved",o,this,s)}return n[0]},e.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,Pu(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},e.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,a=n,o=a-i,s;if(o>0&&o<=a){s=this.children.splice(i,o);for(var c=0;c<s.length;++c)s[c].parent=null,s[c].transform&&(s[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<s.length;++c)s[c].emit("removed",this),this.emit("childRemoved",s[c],this,c);return s}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var a=this.children[n];a._lastSortedIndex=n,!r&&a.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(s2e),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=t.prototype.getLocalBounds.call(this,r);if(!n)for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a];s.visible&&s.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,a;if(this.cullArea?(i=this.cullArea,a=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,a))this._render(r);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var c=this.children[o],l=c.cullable;c.cullable=l||!this.cullArea,c.render(r),c.cullable=l}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},e.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<n.length;a++)n[a].enabled&&this._enabledFilters.push(n[a])}var o=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==nn.NONE));if(o&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var a=0,s=this.children.length;a<s;++a)this.children[a].render(r)}o&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var a=0;a<i.length;++a)i[a].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(Qr);Cn.prototype.containerUpdateTransform=Cn.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pd=function(){return Pd=Object.assign||function(e){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pd.apply(this,arguments)},hr;(function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"})(hr||(hr={}));var EB=function(t){if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e=typeof t.extension!="object"?{type:t.extension}:t.extension;t=Pd(Pd({},e),{ref:t})}if(typeof t=="object")t=Pd({},t);else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Qo={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(EB).forEach(function(i){i.type.forEach(function(a){var o,s;return(s=(o=e._removeHandlers)[a])===null||s===void 0?void 0:s.call(o,i)})}),this},add:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(EB).forEach(function(i){i.type.forEach(function(a){var o=e._addHandlers,s=e._queue;o[a]?o[a](i):(s[a]=s[a]||[],s[a].push(i))})}),this},handle:function(t,e,r){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[t]||i[t])throw new Error("Extension type "+t+" already has a handler");n[t]=e,i[t]=r;var a=this._queue;return a[t]&&(a[t].forEach(function(o){return e(o)}),delete a[t]),this},handleByMap:function(t,e){return this.handle(t,function(r){e[r.name]=r.ref},function(r){delete e[r.name]})},handleByList:function(t,e){return this.handle(t,function(r){var n,i;e.includes(r.ref)||(e.push(r.ref),t===hr.Loader&&((i=(n=r.ref).add)===null||i===void 0||i.call(n)))},function(r){var n=e.indexOf(r.ref);n!==-1&&e.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Nn=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,n,i,a,o,s,c){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,f=l.items;this._aliasCount++;for(var h=0,d=f.length;h<d;h++)f[h][u](e,r,n,i,a,o,s,c);return f===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Nn.prototype,{dispatch:{value:Nn.prototype.emit},run:{value:Nn.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ve.TARGET_FPMS=.06;var ho;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(ho||(ho={}));var bS=function(){function t(e,r,n,i){r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),$r=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bS(null,null,1/0),this.deltaMS=1/Ve.TARGET_FPMS,this.elapsedMS=1/Ve.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,n){return n===void 0&&(n=ho.NORMAL),this._addListener(new bS(e,r,n))},t.prototype.addOnce=function(e,r,n){return n===void 0&&(n=ho.NORMAL),this._addListener(new bS(e,r,n,!0))},t.prototype._addListener=function(e){var r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var n=this._head.next;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*Ve.TARGET_FPMS;for(var i=this._head,a=i.next;a;)a=a.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,Ve.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),vj=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,ho.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?$r.shared:new $r,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t.extension=hr.Application,t}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ve.PREFER_ENV=Ba.any?Go.WEBGL:Go.WEBGL2;Ve.STRICT_TEXTURE_CACHE=!1;var dp=[];function a_(t,e){if(!t)return null;var r="";if(typeof t=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(var i=dp.length-1;i>=0;--i){var a=dp[i];if(a.test&&a.test(t,r))return new a(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $w=function(t,e){return $w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},$w(t,e)};function Er(t,e){$w(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Vw=function(){return Vw=Object.assign||function(e){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Vw.apply(this,arguments)};function l2e(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var ju=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Nn("setRealSize"),this.onUpdate=new Nn("update"),this.onError=new Nn("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),ec=function(t){Er(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return i=t.call(this,o,s)||this,i.data=r,i}return e.prototype.upload=function(r,n,i){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Qi.UNPACK);var o=n.realWidth,s=n.realHeight;return i.width===o&&i.height===s?a.texSubImage2D(n.target,0,0,0,o,s,n.format,i.type,this.data):(i.width=o,i.height=s,a.texImage2D(n.target,0,i.internalFormat,o,s,0,n.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(ju),u2e={scaleMode:An.NEAREST,format:Ue.RGBA,alphaMode:Qi.NPM},zt=function(t){Er(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var i=t.call(this)||this;n=n||{};var a=n.alphaMode,o=n.mipmap,s=n.anisotropicLevel,c=n.scaleMode,l=n.width,u=n.height,f=n.wrapMode,h=n.format,d=n.type,p=n.target,v=n.resolution,y=n.resourceOptions;return r&&!(r instanceof ju)&&(r=a_(r,y),r.internal=!0),i.resolution=v||Ve.RESOLUTION,i.width=Math.round((l||0)*i.resolution)/i.resolution,i.height=Math.round((u||0)*i.resolution)/i.resolution,i._mipmap=o!==void 0?o:Ve.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:Ve.ANISOTROPIC_LEVEL,i._wrapMode=f||Ve.WRAP_MODE,i._scaleMode=c!==void 0?c:Ve.SCALE_MODE,i.format=h||Ue.RGBA,i.type=d||ut.UNSIGNED_BYTE,i.target=p||_l.TEXTURE_2D,i.alphaMode=a!==void 0?a:Qi.UNPACK,i.uid=Pl(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&u>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,n){var i;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,n,i){return i=i||this.resolution,this.setRealSize(r*i,n*i,i)},e.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Mw(this.realWidth)&&Mw(this.realHeight)},e.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ia[this.cacheId],delete Gi[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,n,i){i===void 0&&(i=Ve.STRICT_TEXTURE_CACHE);var a=typeof r=="string",o=null;if(a)o=r;else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+Pl()}o=r._pixiId}var c=Ia[o];if(a&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return c||(c=new e(r,n),c.cacheId=o,e.addToCache(c,o)),c},e.fromBuffer=function(r,n,i,a){r=r||new Float32Array(n*i*4);var o=new ec(r,{width:n,height:i}),s=r instanceof Float32Array?ut.FLOAT:ut.UNSIGNED_BYTE;return new e(o,Object.assign({},u2e,a||{width:n,height:i,type:s}))},e.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Ia[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),Ia[n]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var n=Ia[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Ia[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)delete Ia[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(eh),o_=function(t){Er(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height;i=t.call(this,o,s)||this,i.items=[],i.itemDirtyIds=[];for(var c=0;c<r;c++){var l=new zt;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=r,i._load=null,i.baseTexture=null,i}return e.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)r[i]&&(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof ju?this.addResourceAt(r[i],i):this.addResourceAt(a_(r[i],n),i))},e.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(a){return a.resource}).filter(function(a){return a}),i=n.map(function(a){return a.load()});return this._load=Promise.all(i).then(function(){var a=r.items[0],o=a.realWidth,s=a.realHeight;return r.resize(o,s),Promise.resolve(r)}),this._load},e}(ju),cO=function(t){Er(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height,c,l;return Array.isArray(r)?(c=r,l=r.length):l=r,i=t.call(this,l,{width:o,height:s})||this,c&&i.initFromArray(c,n),i}return e.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=_l.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,n,i){var a=this,o=a.length,s=a.itemDirtyIds,c=a.items,l=r.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,o,0,n.format,i.type,null);for(var u=0;u<o;u++){var f=c[u];s[u]<f.dirtyId&&(s[u]=f.dirtyId,f.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},e}(o_),Wo=function(t){Er(e,t);function e(r){var n=this,i=r,a=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return n=t.call(this,a,o)||this,n.source=r,n.noSubImage=!1,n}return e.crossOrigin=function(r,n,i){i===void 0&&n.indexOf("data:")!==0?r.crossOrigin=uj(n):i!==!1&&(r.crossOrigin=typeof i=="string"?i:"anonymous")},e.prototype.upload=function(r,n,i,a){var o=r.gl,s=n.realWidth,c=n.realHeight;if(a=a||this.source,a instanceof HTMLImageElement){if(!a.complete||a.naturalWidth===0)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Qi.UNPACK),!this.noSubImage&&n.target===o.TEXTURE_2D&&i.width===s&&i.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,n.format,i.type,a):(i.width=s,i.height=c,o.texImage2D(n.target,0,i.internalFormat,n.format,i.type,a)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;this.resize(n,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ju),fO=function(t){Er(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(Wo),hO=function(t){Er(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height,c=a.autoLoad,l=a.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=t.call(this,6,{width:o,height:s})||this;for(var u=0;u<e.SIDES;u++)i.items[u].target=_l.TEXTURE_CUBE_MAP_POSITIVE_X+u;return i.linkBaseTexture=l!==!1,r&&i.initFromArray(r,n),c!==!1&&i.load(),i}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=_l.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=_l.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},e.prototype.upload=function(r,n,i){for(var a=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];(a[o]<s.dirtyId||i.dirtyId<n.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(r,s,i),a[o]=s.dirtyId):a[o]<-1&&(r.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),a[o]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(o_),s_=function(t){Er(e,t);function e(r,n){var i=this;if(n=n||{},!(r instanceof HTMLImageElement)){var a=new Image;Wo.crossOrigin(a,r,n.crossorigin),a.src=r,r=a}return i=t.call(this,r)||this,!r.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=r.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:Ve.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(i,a){var o=n.source;n.url=o.src;var s=function(){n.destroyed||(o.onload=null,o.onerror=null,n.resize(o.width,o.height),n._load=null,n.createBitmap?i(n.process()):i(n))};o.complete&&o.src?s():(o.onload=s,o.onerror=function(c){a(c),n.onError.emit(c)})}),this._load)},e.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,a=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:a?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return i(o,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===null||r.alphaMode===Qi.UNPACK?"premultiply":"none"})}).then(function(o){return r.destroyed?Promise.reject():(r.bitmap=o,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,n,i,this.bitmap),!this.preserveBitmap){var a=!0,o=n._glTextures;for(var s in o){var c=o[s];if(c!==i&&c.dirtyId!==n.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(Wo),dO=function(t){Er(e,t);function e(r,n){var i=this;return n=n||{},i=t.call(this,Ve.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=r,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,n=new Image;Wo.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){r._resolve&&(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(r._resolve){var i=n.width,a=n.height;if(!i||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=i*r.scale,s=a*r.scale;(r._overrideWidth||r._overrideHeight)&&(o=r._overrideWidth||r._overrideHeight/a*i,s=r._overrideHeight||r._overrideWidth/i*a),o=Math.round(o),s=Math.round(s);var c=r.source;c.width=o,c.height=s,c._pixiId="canvas_"+Pl(),c.getContext("2d").drawImage(n,0,0,i,a,0,0,o,s),r._resolve(),r._resolve=null}}},e.getSize=function(r){var n=e.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,n){return n==="svg"||typeof r=="string"&&r.startsWith("data:image/svg+xml")||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Wo),pO=function(t){Er(e,t);function e(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var o=r[0].src||r[0];Wo.crossOrigin(a,o,n.crossorigin);for(var s=0;s<r.length;++s){var c=document.createElement("source"),l=r[s],u=l.src,f=l.mime;u=u||r[s];var h=u.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);f=f||e.MIME_TYPES[d]||"video/"+d,c.src=u,c.type=f,a.appendChild(c)}r=a}return i=t.call(this,r)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return e.prototype.update=function(r){if(!this.destroyed){var n=$r.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){r.valid?i(r):(r._resolve=i,n.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return!r.paused&&!r.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&($r.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&($r.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&($r.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?($r.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&($r.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Wo),vO=function(t){Er(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&r instanceof ImageBitmap},e}(Wo);dp.push(s_,vO,fO,pO,dO,ec,hO,cO);var gj={__proto__:null,Resource:ju,BaseImageResource:Wo,INSTALLED:dp,autoDetectResource:a_,AbstractMultiResource:o_,ArrayResource:cO,BufferResource:ec,CanvasResource:fO,CubeResource:hO,ImageResource:s_,SVGResource:dO,VideoResource:pO,ImageBitmapResource:vO},c2e=function(t){Er(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,n,i){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Qi.UNPACK);var o=n.realWidth,s=n.realHeight;return i.width===o&&i.height===s?a.texSubImage2D(n.target,0,0,0,o,s,n.format,i.type,this.data):(i.width=o,i.height=s,a.texImage2D(n.target,0,i.internalFormat,o,s,0,n.format,i.type,this.data)),!0},e}(ec),hm=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Nn("disposeFramebuffer"),this.multisample=Pr.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new zt(null,{scaleMode:An.NEAREST,resolution:1,mipmap:Di.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new zt(new c2e(null,{width:this.width,height:this.height}),{scaleMode:An.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Di.OFF,format:Ue.DEPTH_COMPONENT,type:ut.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],a=i.resolution;i.setSize(e/a,r/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(e/a,r/a)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),gO=function(t){Er(e,t);function e(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];r={width:i,height:a,scaleMode:o,resolution:s}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Pr.NONE,n=t.call(this,null,r)||this,n.mipmap=Di.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new hm(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return e.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(zt),mO=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,n){var i=r.width,a=r.height;if(n){var o=e.width/2/i,s=e.height/2/a,c=e.x/i+o,l=e.y/a+s;n=kr.add(n,kr.NW),this.x0=c+o*kr.uX(n),this.y0=l+s*kr.uY(n),n=kr.add(n,2),this.x1=c+o*kr.uX(n),this.y1=l+s*kr.uY(n),n=kr.add(n,2),this.x2=c+o*kr.uX(n),this.y2=l+s*kr.uY(n),n=kr.add(n,2),this.x3=c+o*kr.uX(n),this.y3=l+s*kr.uY(n)}else this.x0=e.x/i,this.y0=e.y/a,this.x1=(e.x+e.width)/i,this.y1=e.y/a,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/a,this.x3=e.x/i,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),wB=new mO;function _v(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var pt=function(t){Er(e,t);function e(r,n,i,a,o,s){var c=t.call(this)||this;if(c.noFrame=!1,n||(c.noFrame=!0,n=new Mt(0,0,1,1)),r instanceof e&&(r=r.baseTexture),c.baseTexture=r,c._frame=n,c.trim=a,c.valid=!1,c._uvs=wB,c.uvMatrix=null,c.orig=i||n,c._rotate=Number(o||0),o===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new Dt(s.x,s.y):new Dt(0,0),c._updateID=0,c.textureCacheIds=[],r.valid?c.noFrame?r.valid&&c.onBaseTextureUpdated(r):c.frame=n:r.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&r.on("update",c.onBaseTextureUpdated,c),c}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&Gi[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=r),i},e.prototype.updateUvs=function(){this._uvs===wB&&(this._uvs=new mO),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,n,i){n===void 0&&(n={}),i===void 0&&(i=Ve.STRICT_TEXTURE_CACHE);var a=typeof r=="string",o=null;if(a)o=r;else if(r instanceof zt){if(!r.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";r.cacheId=s+"-"+Pl(),zt.addToCache(r,r.cacheId)}o=r.cacheId}else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+Pl()}o=r._pixiId}var c=Gi[o];if(a&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!c&&!(r instanceof zt)?(n.resolution||(n.resolution=cp(r)),c=new e(new zt(r,n)),c.baseTexture.cacheId=o,zt.addToCache(c.baseTexture,o),e.addToCache(c,o)):!c&&r instanceof zt&&(c=new e(r),e.addToCache(c,o)),c},e.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),a=e.from(r,Object.assign({resourceOptions:i},n),!1),o=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):o.load().then(function(){return Promise.resolve(a)})},e.fromBuffer=function(r,n,i,a){return new e(zt.fromBuffer(r,n,i,a))},e.fromLoader=function(r,n,i,a){var o=new zt(r,Object.assign({scaleMode:Ve.SCALE_MODE,resolution:cp(n)},a)),s=o.resource;s instanceof s_&&(s.url=n);var c=new e(o);return i||(i=n),zt.addToCache(c.baseTexture,i),e.addToCache(c,i),i!==n&&(zt.addToCache(c.baseTexture,n),e.addToCache(c,n)),c.baseTexture.valid?Promise.resolve(c):new Promise(function(l){c.baseTexture.once("loaded",function(){return l(c)})})},e.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),Gi[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),Gi[n]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var n=Gi[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete Gi[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)Gi[r.textureCacheIds[a]]===r&&delete Gi[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,a=r.width,o=r.height,s=n+a>this.baseTexture.width,c=i+o>this.baseTexture.height;if(s||c){var l=s&&c?"and":"or",u="X: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.width,f="Y: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+l+" "+f))}this.valid=a&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new zt),_v(e._EMPTY),_v(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=Ve.ADAPTER.createCanvas(16,16),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(zt.from(r)),_v(e._WHITE),_v(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(eh),Il=function(t){Er(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,n,i){i===void 0&&(i=!0);var a=this.baseTexture.resolution,o=Math.round(r*a)/a,s=Math.round(n*a)/a;this.valid=o>0&&s>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(o,s),this.updateUvs()},e.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},e.create=function(r){for(var n=arguments,i=[],a=1;a<arguments.length;a++)i[a-1]=n[a];return typeof r=="number"&&(Fi("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new gO(r))},e}(pt),mj=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,n){n===void 0&&(n=Pr.NONE);var i=new gO(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new Il(i)},t.prototype.getOptimalTexture=function(e,r,n,i){n===void 0&&(n=1),i===void 0&&(i=Pr.NONE);var a;e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=up(e),r=up(r),a=((e&65535)<<16|r&65535)>>>0,i>1&&(a+=i*4294967296)):a=i>1?-i:-1,this.texturePool[a]||(this.texturePool[a]=[]);var o=this.texturePool[a].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=a,o.setResolution(n),o},t.prototype.getFilterTexture=function(e,r,n){var i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||Pr.NONE);return i.filterFrame=e.filterFrame,i},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),Gw=function(){function t(e,r,n,i,a,o,s){r===void 0&&(r=0),n===void 0&&(n=!1),i===void 0&&(i=ut.FLOAT),this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=a,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,n,i,a){return new t(e,r,n,i,a)},t}(),f2e=0,hn=function(){function t(e,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=f2e++,this.disposeRunner=new Nn("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===co.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?co.ELEMENT_ARRAY_BUFFER:co.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),h2e={Float32Array,Uint32Array,Int32Array,Uint8Array};function d2e(t,e){for(var r=0,n=0,i={},a=0;a<t.length;a++)n+=e[a],r+=t[a].length;for(var o=new ArrayBuffer(r*4),s=null,c=0,a=0;a<t.length;a++){var l=e[a],u=t[a],f=n_(u);i[f]||(i[f]=new h2e[f](o)),s=i[f];for(var h=0;h<u.length;h++){var d=(h/l|0)*n+c,p=h%l;s[d+p]=u[h]}c+=l}return new Float32Array(o)}var AB={5126:4,5123:2,5121:1},p2e=0,v2e={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},nh=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=p2e++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Nn("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,n,i,a,o,s,c){if(n===void 0&&(n=0),i===void 0&&(i=!1),c===void 0&&(c=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof hn||(r instanceof Array&&(r=new Float32Array(r)),r=new hn(r));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],r,n,i,a);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new Gw(f,n,i,a,o,s,c),this.instanced=this.instanced||c,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof hn||(e instanceof Array&&(e=new Uint16Array(e)),e=new hn(e)),e.type=co.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],n=new hn,i;for(i in this.attributes){var a=this.attributes[i],o=this.buffers[a.buffer];e.push(o.data),r.push(a.size*AB[a.type]/4),a.buffer=0}for(n.data=d2e(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new hn(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];e.attributes[r]=new Gw(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=co.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,n=[],i=[],a=[],o,s=0;s<e.length;s++){o=e[s];for(var c=0;c<o.buffers.length;c++)i[c]=i[c]||0,i[c]+=o.buffers[c].data.length,a[c]=0}for(var s=0;s<o.buffers.length;s++)n[s]=new v2e[n_(o.buffers[s].data)](i[s]),r.buffers[s]=new hn(n[s]);for(var s=0;s<e.length;s++){o=e[s];for(var c=0;c<o.buffers.length;c++)n[c].set(o.buffers[c].data,a[c]),a[c]+=o.buffers[c].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=co.ELEMENT_ARRAY_BUFFER;for(var l=0,u=0,f=0,h=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){h=s;break}for(var s in o.attributes){var d=o.attributes[s];(d.buffer|0)===h&&(u+=d.size*AB[d.type]/4)}for(var s=0;s<e.length;s++){for(var p=e[s].indexBuffer.data,c=0;c<p.length;c++)r.indexBuffer.data[c+f]+=l;l+=e[s].buffers[h].data.length/u,f+=p.length}}return r},t}(),yj=function(t){Er(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(nh),yO=function(t){Er(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new hn(r.vertices),r.uvBuffer=new hn(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,n){var i=0,a=0;return this.uvs[0]=i,this.uvs[1]=a,this.uvs[2]=i+n.width/r.width,this.uvs[3]=a,this.uvs[4]=i+n.width/r.width,this.uvs[5]=a+n.height/r.height,this.uvs[6]=i,this.uvs[7]=a+n.height/r.height,i=n.x,a=n.y,this.vertices[0]=i,this.vertices[1]=a,this.vertices[2]=i+n.width,this.vertices[3]=a,this.vertices[4]=i+n.width,this.vertices[5]=a+n.height,this.vertices[6]=i,this.vertices[7]=a+n.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(nh),g2e=0,xl=function(){function t(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=g2e++,this.static=!!r,this.ubo=!!n,e instanceof hn?(this.buffer=e,this.buffer.type=co.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new hn(new Float32Array(1)),this.buffer.type=co.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,n){if(!this.ubo)this.uniforms[e]=new t(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,n){return new t(e,r,n)},t.uboFrom=function(e,r){return new t(e,r??!0,!0)},t}(),_j=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Pr.NONE,this.sourceFrame=new Mt,this.destinationFrame=new Mt,this.bindingSourceFrame=new Mt,this.bindingDestinationFrame=new Mt,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),xv=[new Dt,new Dt,new Dt,new Dt],SS=new zr,_O=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new mj,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new yj,this.quadUv=new yO,this.tempRect=new Mt,this.activeState={},this.globalUniforms=new xl({outputFrame:new Mt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var n,i,a=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new _j,c=this.renderer.renderTexture,l=r[0].resolution,u=r[0].multisample,f=r[0].padding,h=r[0].autoFit,d=(n=r[0].legacy)!==null&&n!==void 0?n:!0,p=1;p<r.length;p++){var v=r[p];l=Math.min(l,v.resolution),u=Math.min(u,v.multisample),f=this.useMaxPadding?Math.max(f,v.padding):f+v.padding,h=h&&v.autoFit,d=d||((i=v.legacy)!==null&&i!==void 0?i:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),o.push(s),s.resolution=l,s.multisample=u,s.legacy=d,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(f);var y=this.tempRect.copyFrom(c.sourceFrame);a.projection.transform&&this.transformAABB(SS.copyFrom(a.projection.transform).invert(),y),h?(s.sourceFrame.fit(y),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(y)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,c.current?c.current.resolution:a.resolution,c.sourceFrame,c.destinationFrame,a.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,u),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(c.sourceFrame),s.bindingDestinationFrame.copyFrom(c.destinationFrame),s.transform=a.projection.transform,a.projection.transform=null,c.bind(s.renderTexture,s.sourceFrame,m),a.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var a=i.inputSize,o=i.inputPixel,s=i.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],o[0]=Math.round(a[0]*r.resolution),o[1]=Math.round(a[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=r.sourceFrame.width*a[2]-.5*o[2],s[3]=r.sourceFrame.height*a[3]-.5*o[3],r.legacy){var c=i.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,ka.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var u=r.renderTexture,f=this.getOptimalFilterTexture(u.width,u.height,r.resolution);f.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){h===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(u.width,u.height,r.resolution),f.filterFrame=u.filterFrame),n[h].apply(this,u,f,ka.CLEAR,r);var d=u;u=f,f=d}n[h].apply(this,u,l.renderTexture,ka.BLEND,r),h>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=ka.CLEAR);var n=this.renderer,i=n.renderTexture,a=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=a.stateId&1||this.forceClear;(r===ka.CLEAR||r===ka.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,n,i){var a=this.renderer;a.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(fa.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(fa.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var n=this.activeState,i=n.sourceFrame,a=n.destinationFrame,o=r._texture.orig,s=e.set(a.width,0,0,a.height,i.x,i.y),c=r.worldTransform.copyTo(zr.TEMP_MATRIX);return c.invert(),s.prepend(c),s.scale(1/o.width,1/o.height),s.translate(r.anchor.x,r.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,n,i){return n===void 0&&(n=1),i===void 0&&(i=Pr.NONE),this.texturePool.getOptimalTexture(e,r,n,i)},t.prototype.getFilterTexture=function(e,r,n){if(typeof e=="number"){var i=e;e=r,r=i}e=e||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||Pr.NONE);return a.filterFrame=e.filterFrame,a},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var n=xv[0],i=xv[1],a=xv[2],o=xv[3];n.set(r.left,r.top),i.set(r.left,r.bottom),a.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(a,a),e.apply(o,o);var s=Math.min(n.x,i.x,a.x,o.x),c=Math.min(n.y,i.y,a.y,o.y),l=Math.max(n.x,i.x,a.x,o.x),u=Math.max(n.y,i.y,a.y,o.y);r.x=s,r.y=c,r.width=l-s,r.height=u-c},t.prototype.roundFrame=function(e,r,n,i,a){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(a){var o=a.a,s=a.b,c=a.c,l=a.d;if((Math.abs(s)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}a=a?SS.copyFrom(a):SS.identity(),a.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(a,e),e.ceil(r),this.transformAABB(a.invert(),e)}},t}(),Kp=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),xO=function(){function t(e){this.renderer=e,this.emptyRenderer=new Kp(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var n=this.renderer.texture.boundTextures,i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)},t.prototype.boundArray=function(e,r,n,i){for(var a=e.elements,o=e.ids,s=e.count,c=0,l=0;l<s;l++){var u=a[l],f=u._batchLocation;if(f>=0&&f<i&&r[f]===u){o[l]=f;continue}for(;c<i;){var h=r[c];if(h&&h._batchEnabled===n&&h._batchLocation===c){c++;continue}o[l]=c,u._batchLocation=c,r[c]=u;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),CB=0,bO=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=CB++},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=CB++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var n;if(Ve.PREFER_ENV>=Go.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){var r=this;e.preventDefault(),setTimeout(function(){r.gl.isContextLost()&&r.extensions.loseContext&&r.extensions.loseContext.restoreContext()},0)},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),xj=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Pr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),m2e=new Mt,SO=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new hm(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Mt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;Ve.PREFER_ENV===Go.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=function(i){return r.drawBuffersWEBGL(i)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,n){n===void 0&&(n=0);var i=this.gl;if(e){var a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=n),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var s=e.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var c=r.width>>n,l=r.height>>n,u=c/r.width;this.setViewport(r.x*u,r.y*u,c,l)}else{var c=e.width>>n,l=e.height>>n;this.setViewport(0,0,c,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,n,i){var a=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(a.width!==n||a.height!==i||a.x!==e||a.y!==r)&&(a.x=e,a.y=r,a.width=n,a.height=i,this.gl.viewport(e,r,n,i))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,n,i,a){a===void 0&&(a=np.COLOR|np.DEPTH);var o=this.gl;o.clearColor(e,r,n,i),o.clear(a)},t.prototype.initFramebuffer=function(e){var r=this.gl,n=new xj(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,e.width,e.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,a=i.length;r.drawBuffers||(a=Math.min(a,1));for(var o=0;o<a;o++){var s=i[o],c=s.parentTextureArray||s;this.renderer.texture.bind(c,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var n=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures,o=a.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],c=0;c<o;c++){var l=a[c],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),!(c===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+c,l.target,u._glTextures[this.CONTEXT_UID].texture,r),s.push(n.COLOR_ATTACHMENT0+c))}if(s.length>1&&n.drawBuffers(s),e.depthTexture){var f=this.writeDepthTexture;if(f){var h=e.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,n=Pr.NONE;if(e<=1||r===null)return n;for(var i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=Pr.NONE),n},t.prototype.blit=function(e,r,n){var i=this,a=i.current,o=i.renderer,s=i.gl,c=i.CONTEXT_UID;if(o.context.webGLVersion===2&&a){var l=a.glFramebuffers[c];if(l){if(!e){if(!l.msaaBuffer)return;var u=a.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new hm(a.width,a.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==a.width||e.height!==a.height)&&(e.width=a.width,e.height=a.height,e.dirtyId++,e.dirtySize++)}r||(r=m2e,r.width=a.width,r.height=a.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,f?s.NEAREST:s.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var n=e.width,i=e.height,a=this.gl,o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),r.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,r.multisample,a.DEPTH24_STENCIL8,n,i):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,i),r.stencil=o,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Mt},t.prototype.destroy=function(){this.renderer=null},t}(),ES={5126:4,5123:2,5121:1},EO=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;Ve.PREFER_ENV===Go.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(a){return n.bindVertexArrayOES(a)},e.deleteVertexArray=function(a){return n.deleteVertexArrayOES(a)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(a,o){return i.vertexAttribDivisorANGLE(a,o)},e.drawElementsInstanced=function(a,o,s,c,l){return i.drawElementsInstancedANGLE(a,o,s,c,l)},e.drawArraysInstanced=function(a,o,s,c){return i.drawArraysInstancedANGLE(a,o,s,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var n=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},a=!0);var o=i[r.program.id]||this.initGeometryVao(e,r,a);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,n=0;n<e.buffers.length;n++){var i=e.buffers[n];r.update(i)}},t.prototype.checkCompatibility=function(e,r){var n=e.attributes,i=r.attributeData;for(var a in i)if(!n[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},t.prototype.getSignature=function(e,r){var n=e.attributes,i=r.attributeData,a=["g",e.id];for(var o in n)i[o]&&a.push(o,i[o].location);return a.join("-")},t.prototype.initGeometryVao=function(e,r,n){n===void 0&&(n=!0);var i=this.gl,a=this.CONTEXT_UID,o=this.renderer.buffer,s=r.program;s.glPrograms[a]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,s);var c=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[c];if(u)return l[s.id]=u,u;var f=e.buffers,h=e.attributes,d={},p={};for(var v in f)d[v]=0,p[v]=0;for(var v in h)!h[v].size&&s.attributeData[v]?h[v].size=s.attributeData[v].size:h[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[v].buffer]+=h[v].size*ES[h[v].type];for(var v in h){var y=h[v],m=y.size;y.stride===void 0&&(d[y.buffer]===m*ES[y.type]?y.stride=0:y.stride=d[y.buffer]),y.start===void 0&&(y.start=p[y.buffer],p[y.buffer]+=m*ES[y.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(var g=0;g<f.length;g++){var x=f[g];o.bind(x),n&&x._glBuffers[a].refCount++}return this.activateVao(e,s),this._activeVao=u,l[s.id]=u,l[c]=u,u},t.prototype.disposeGeometry=function(e,r){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,o=e.buffers,s=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(e.disposeRunner.remove(this),!!i){if(s)for(var c=0;c<o.length;c++){var l=o[c]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(o[c],r))}if(!r){for(var u in i)if(u[0]==="g"){var f=i[u];this._activeVao===f&&this.unbind(),a.deleteVertexArray(f)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)},t.prototype.activateVao=function(e,r){var n=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,o=e.buffers,s=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);var c=null;for(var l in s){var u=s[l],f=o[u.buffer],h=f._glBuffers[i];if(r.attributeData[l]){c!==h&&(a.bind(f),c=h);var d=r.attributeData[l].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,n,i){var a=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,c=s===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?o.instanced?a.drawElementsInstanced(e,r||o.indexBuffer.data.length,c,(n||0)*s,i||1):a.drawElements(e,r||o.indexBuffer.data.length,c,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?a.drawArraysInstanced(e,n,r||o.getSize(),i||1):a.drawArrays(e,n,r||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),bj=function(){function t(e){e===void 0&&(e=null),this.type=nn.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ve.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=nn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function TB(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function OB(t,e){var r=t.getShaderSource(e).split(`
`).map(function(l,u){return u+": "+l}),n=t.getShaderInfoLog(e),i=n.split(`
`),a={},o=i.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!a[l]?(a[l]=!0,!0):!1}),s=[""];o.forEach(function(l){r[l-1]="%c"+r[l-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var c=r.join(`
`);s[0]=c,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function y2e(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||OB(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||OB(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function wS(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Sj(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return wS(2*e);case"bvec3":return wS(3*e);case"bvec4":return wS(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Ej={},Gh=Ej;function wj(){if(Gh===Ej||Gh&&Gh.isContextLost()){var t=Ve.ADAPTER.createCanvas(),e=void 0;Ve.PREFER_ENV>=Go.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Gh=e}return Gh}var bv;function _2e(){if(!bv){bv=Hi.MEDIUM;var t=wj();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);bv=e.precision?Hi.HIGH:Hi.MEDIUM}}return bv}function PB(t,e,r){if(t.substring(0,9)!=="precision"){var n=e;return e===Hi.HIGH&&r!==Hi.HIGH&&(n=Hi.MEDIUM),"precision "+n+` float;
`+t}else if(r!==Hi.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var x2e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Aj(t){return x2e[t]}var Sv=null,RB={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Cj(t,e){if(!Sv){var r=Object.keys(RB);Sv={};for(var n=0;n<r.length;++n){var i=r[n];Sv[t[i]]=RB[i]}}return Sv[e]}var Ru=[{test:function(t){return t.type==="float"&&t.size===1&&!t.isArray},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t,e){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0)},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1&&!t.isArray},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1&&!t.isArray},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],b2e={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},S2e={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function E2e(t,e){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in t.uniforms){var a=e[i];if(!a){!((r=t.uniforms[i])===null||r===void 0)&&r.group&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var o=t.uniforms[i],s=!1,c=0;c<Ru.length;c++)if(Ru[c].test(a,o)){n.push(Ru[c].code(i,o)),s=!0;break}if(!s){var l=a.size===1&&!a.isArray?b2e:S2e,u=l[a.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var w2e=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function A2e(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function Tj(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var n=w2e.replace(/%forloop%/gi,A2e(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var Wh;function C2e(){if(typeof Wh=="boolean")return Wh;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Wh=t({a:"b"},"a","b")===!0}catch{Wh=!1}return Wh}var T2e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,O2e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,P2e=0,Ev={},ih=function(){function t(e,r,n){n===void 0&&(n="pixi-shader"),this.id=P2e++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Ev[n]?(Ev[n]++,n+="-"+Ev[n]):Ev[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=PB(this.vertexSrc,Ve.PRECISION_VERTEX,Hi.HIGH),this.fragmentSrc=PB(this.fragmentSrc,Ve.PRECISION_FRAGMENT,_2e())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return O2e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return T2e},enumerable:!1,configurable:!0}),t.from=function(e,r,n){var i=e+r,a=Bw[i];return a||(Bw[i]=a=new t(e,r,n)),a},t}(),Cs=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof xl?this.uniformGroup=r:this.uniformGroup=new xl(r):this.uniformGroup=new xl({}),this.disposeRunner=new Nn("disposeShader")}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var n in r.uniforms){var i=r.uniforms[n];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,n){var i=ih.from(e,r);return new t(i,n)},t}(),AS=0,CS=1,TS=2,OS=3,PS=4,RS=5,Nl=function(){function t(){this.data=0,this.blendMode=ze.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<AS)},set:function(e){!!(this.data&1<<AS)!==e&&(this.data^=1<<AS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<CS)},set:function(e){!!(this.data&1<<CS)!==e&&(this.data^=1<<CS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<TS)},set:function(e){!!(this.data&1<<TS)!==e&&(this.data^=1<<TS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<OS)},set:function(e){!!(this.data&1<<OS)!==e&&(this.data^=1<<OS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<RS)},set:function(e){!!(this.data&1<<RS)!==e&&(this.data^=1<<RS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<PS)},set:function(e){!!(this.data&1<<PS)!==e&&(this.data^=1<<PS)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ze.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),R2e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,I2e=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,xt=function(t){Er(e,t);function e(r,n,i){var a=this,o=ih.from(r||e.defaultVertexSrc,n||e.defaultFragmentSrc);return a=t.call(this,o,i)||this,a.padding=0,a.resolution=Ve.FILTER_RESOLUTION,a.multisample=Ve.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Nl,a}return e.prototype.apply=function(r,n,i,a,o){r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return I2e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return R2e},enumerable:!1,configurable:!0}),e}(Cs),F2e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,k2e=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,IB=new zr,l_=function(){function t(e,r){this._texture=e,this.mapCoord=new zr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var n=this.mapCoord,i=0;i<e.length;i+=2){var a=e[i],o=e[i+1];r[i]=a*n.a+o*n.c+n.tx,r[i+1]=a*n.b+o*n.d+n.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=r.orig,a=r.trim;a&&(IB.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(IB));var o=r.baseTexture,s=this.uClampFrame,c=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(r._frame.x+c+l)/o.width,s[1]=(r._frame.y+c+l)/o.height,s[2]=(r._frame.x+r._frame.width-c+l)/o.width,s[3]=(r._frame.y+r._frame.height-c+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0},t}(),Oj=function(t){Er(e,t);function e(r,n,i){var a=this,o=null;return typeof r!="string"&&n===void 0&&i===void 0&&(o=r,r=void 0,n=void 0,i=void 0),a=t.call(this,r||F2e,n||k2e,i)||this,a.maskSprite=o,a.maskMatrix=new zr,a}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,n,i,a){var o=this._maskSprite,s=o._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new l_(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,o).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,r.applyFilter(this,n,i,a))},e}(xt),wO=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new bj;i.pooled=!0,i.maskObject=r,n=i}var a=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(a),n._colorMask=a?a._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==nn.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case nn.SCISSOR:this.renderer.scissor.push(n);break;case nn.STENCIL:this.renderer.stencil.push(n);break;case nn.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case nn.COLOR:this.pushColorMask(n);break}n.type===nn.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case nn.SCISSOR:this.renderer.scissor.pop(r);break;case nn.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case nn.SPRITE:this.popSpriteMask(r);break;case nn.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===nn.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=nn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=nn.SCISSOR:e.type=nn.STENCIL:e.type=nn.COLOR},t.prototype.pushSpriteMask=function(e){var r,n,i=e.maskObject,a=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Oj]));var s=this.renderer,c=s.renderTexture,l,u;if(c.current){var f=c.current;l=e.resolution||f.resolution,u=(r=e.multisample)!==null&&r!==void 0?r:f.multisample}else l=e.resolution||s.resolution,u=(n=e.multisample)!==null&&n!==void 0?n:s.multisample;o[0].resolution=l,o[0].multisample=u,o[0].maskSprite=i;var h=a.filterArea;a.filterArea=i.getBounds(!0),s.filter.push(a,o),a.filterArea=h,e._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(e){var r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},t.prototype.popColorMask=function(e){var r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},t.prototype.destroy=function(){this.renderer=null},t}(),Pj=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),FB=new zr,kB=[],AO=function(t){Er(e,t);function e(r){var n=t.call(this,r)||this;return n.glConst=Ve.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){var n;if(!r._scissorRectLocal){var i=r._scissorRect,a=r.maskObject,o=this.renderer,s=o.renderTexture,c=a.getBounds(!0,(n=kB.pop())!==null&&n!==void 0?n:new Mt);this.roundFrameToPixels(c,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),i&&c.fit(i),r._scissorRectLocal=c}},e.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,i=r.b,a=r.c,o=r.d;return(Math.abs(i)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(o)>1e-4)},e.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var i=r._scissorRectLocal;return i.width>0&&i.height>0},e.prototype.roundFrameToPixels=function(r,n,i,a,o){e.isMatrixRotated(o)||(o=o?FB.copyFrom(o):FB.identity(),o.translate(-i.x,-i.y).scale(a.width/i.width,a.height/i.height).translate(a.x,a.y),this.renderer.filter.transformAABB(o,r),r.fit(a),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(r){var n=this.renderer.gl;r&&kB.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},e}(Pj),CO=function(t){Er(e,t);function e(r){var n=t.call(this,r)||this;return n.glConst=Ve.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,a=r._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),r._stencilCounter++;var o=r._colorMask;o!==0&&(r._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,a,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,o!==0&&(r._colorMask=o,i.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},e.prototype.pop=function(r){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,a=i?i._colorMask:15;a!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,a!==0&&(i._colorMask=a,n.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(Pj),TO=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new zr,this.transform=null}return t.prototype.update=function(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,n,i){var a=this.projectionMatrix,o=i?-1:1;a.identity(),a.a=1/r.width*2,a.d=o*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-o-r.y*a.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),Ql=new Mt,zh=new Mt,OO=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Mt,this.destinationFrame=new Mt,this.viewportFrame=new Mt}return t.prototype.bind=function(e,r,n){e===void 0&&(e=null);var i=this.renderer;this.current=e;var a,o,s;e?(a=e.baseTexture,s=a.resolution,r||(Ql.width=e.frame.width,Ql.height=e.frame.height,r=Ql),n||(zh.x=e.frame.x,zh.y=e.frame.y,zh.width=r.width,zh.height=r.height,n=zh),o=a.framebuffer):(s=i.resolution,r||(Ql.width=i.screen.width,Ql.height=i.screen.height,r=Ql),n||(n=Ql,n.width=r.width,n.height=r.height));var c=this.viewportFrame;c.x=n.x*s,c.y=n.y*s,c.width=n.width*s,c.height=n.height*s,e||(c.y=i.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(o,c),this.renderer.projection.update(n,r,s,!o),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,a=n.width!==i.width||n.height!==i.height;if(a){var o=this.viewportFrame,s=o.x,c=o.y,l=o.width,u=o.height;s=Math.round(s),c=Math.round(c),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,c,l,u)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),a&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function D2e(t,e,r,n,i){r.buffer.update(i)}var M2e={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Rj={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Ij(t){for(var e=t.map(function(c){return{data:c,offset:0,dataLen:0,dirty:0}}),r=0,n=0,i=0,a=0;a<e.length;a++){var o=e[a];if(r=Rj[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){var s=n%r%16;n+=s,i+=s}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function Fj(t,e){var r=[];for(var n in t)e[n]&&r.push(e[n]);return r.sort(function(i,a){return i.index-a.index}),r}function kj(t,e){if(!t.autoManage)return{size:0,syncFunc:D2e};for(var r=Fj(t.uniforms,e),n=Ij(r),i=n.uboElements,a=n.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<i.length;s++){for(var c=i[s],l=t.uniforms[c.data.name],u=c.data.name,f=!1,h=0;h<Ru.length;h++){var d=Ru[h];if(d.codeUbo&&d.test(c.data,l)){o.push("offset = "+c.offset/4+";",Ru[h].codeUbo(c.data.name,l)),f=!0;break}}if(!f)if(c.data.size>1){var p=Aj(c.data.type),v=Math.max(Rj[c.data.type]/16,1),y=p/v,m=(4-y%4)%4;o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+c.offset/4+`;

                t = 0;

                for(var i=0; i < `+c.data.size*v+`; i++)
                {
                    for(var j = 0; j < `+y+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+m+`;
                }

                `)}else{var g=M2e[c.data.type];o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+c.offset/4+`;
                `+g+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var L2e=function(){function t(){}return t}(),Dj=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function B2e(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=e.getActiveAttrib(t,i);if(a.name.indexOf("gl_")!==0){var o=Cj(e,a.type),s={type:o,name:a.name,size:Aj(o),location:e.getAttribLocation(t,a.name)};r[a.name]=s}}return r}function N2e(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=e.getActiveUniform(t,i),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),c=Cj(e,a.type);r[o]={name:o,index:i,type:c,size:a.size,isArray:s,value:Sj(c,a.size)}}return r}function Mj(t,e){var r=TB(t,t.VERTEX_SHADER,e.vertexSrc),n=TB(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,r),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||y2e(t,i,r,n),e.attributeData=B2e(i,t),e.uniformData=N2e(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var a=Object.keys(e.attributeData);a.sort(function(u,f){return u>f?1:-1});for(var o=0;o<a.length;o++)e.attributeData[a[o]].location=o,t.bindAttribLocation(i,o,a[o]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);var s={};for(var o in e.uniformData){var c=e.uniformData[o];s[o]={location:t.getUniformLocation(i,o),value:Sj(c.type,c.size)}}var l=new Dj(i,s);return l}var U2e=0,wv={textureCount:0,uboCount:0},PO=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=U2e++}return t.prototype.systemCheck=function(){if(!C2e())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(wv.textureCount=0,wv.uboCount=0,this.syncUniformGroup(e.uniformGroup,wv)),i},t.prototype.setUniforms=function(e){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))},t.prototype.syncUniforms=function(e,r,n){var i=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);i(r.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=E2e(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;var i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,wv,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,n){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var a=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=kj(e,this.shader.program.uniformData)),e.autoManage){var c=new Float32Array(s.size/4);e.buffer.update(c)}return r.uniformGroups[e.id]=s.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,n){var i=e.uniforms,a=[n+"-"];for(var o in i)a.push(o),r[o]&&a.push(r[o].type);return a.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,n=e.program,i=Mj(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function j2e(t,e){return e===void 0&&(e=[]),e[ze.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.ADD]=[t.ONE,t.ONE],e[ze.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.NONE]=[0,0],e[ze.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[ze.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ze.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[ze.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[ze.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ze.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[ze.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[ze.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[ze.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[ze.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ze.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var $2e=0,V2e=1,G2e=2,W2e=3,z2e=4,H2e=5,RO=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ze.NONE,this._blendEq=!1,this.map=[],this.map[$2e]=this.setBlend,this.map[V2e]=this.setOffset,this.map[G2e]=this.setCullFace,this.map[W2e]=this.setDepthTest,this.map[z2e]=this.setFrontFace,this.map[H2e]=this.setDepthMask,this.checks=[],this.defaultState=new Nl,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=j2e(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,n=0;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),IO=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Ve.GC_MAX_IDLE,this.checkCountMax=Ve.GC_MAX_CHECK_COUNT,this.mode=Ve.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ap.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,n=!1,i=0;i<r.length;i++){var a=r[i];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),r[i]=null,n=!0)}if(n){for(var o=0,i=0;i<r.length;i++)r[i]!==null&&(r[o++]=r[i]);r.length=o}},t.prototype.unload=function(e){var r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},t.prototype.destroy=function(){this.renderer=null},t}();function X2e(t){var e,r,n,i,a,o,s,c,l,u,f,h,d,p,v,y,m,g,x,b,S,w,A;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?A=(e={},e[ut.UNSIGNED_BYTE]=(r={},r[Ue.RGBA]=t.RGBA8,r[Ue.RGB]=t.RGB8,r[Ue.RG]=t.RG8,r[Ue.RED]=t.R8,r[Ue.RGBA_INTEGER]=t.RGBA8UI,r[Ue.RGB_INTEGER]=t.RGB8UI,r[Ue.RG_INTEGER]=t.RG8UI,r[Ue.RED_INTEGER]=t.R8UI,r[Ue.ALPHA]=t.ALPHA,r[Ue.LUMINANCE]=t.LUMINANCE,r[Ue.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[ut.BYTE]=(n={},n[Ue.RGBA]=t.RGBA8_SNORM,n[Ue.RGB]=t.RGB8_SNORM,n[Ue.RG]=t.RG8_SNORM,n[Ue.RED]=t.R8_SNORM,n[Ue.RGBA_INTEGER]=t.RGBA8I,n[Ue.RGB_INTEGER]=t.RGB8I,n[Ue.RG_INTEGER]=t.RG8I,n[Ue.RED_INTEGER]=t.R8I,n),e[ut.UNSIGNED_SHORT]=(i={},i[Ue.RGBA_INTEGER]=t.RGBA16UI,i[Ue.RGB_INTEGER]=t.RGB16UI,i[Ue.RG_INTEGER]=t.RG16UI,i[Ue.RED_INTEGER]=t.R16UI,i[Ue.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,i),e[ut.SHORT]=(a={},a[Ue.RGBA_INTEGER]=t.RGBA16I,a[Ue.RGB_INTEGER]=t.RGB16I,a[Ue.RG_INTEGER]=t.RG16I,a[Ue.RED_INTEGER]=t.R16I,a),e[ut.UNSIGNED_INT]=(o={},o[Ue.RGBA_INTEGER]=t.RGBA32UI,o[Ue.RGB_INTEGER]=t.RGB32UI,o[Ue.RG_INTEGER]=t.RG32UI,o[Ue.RED_INTEGER]=t.R32UI,o[Ue.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,o),e[ut.INT]=(s={},s[Ue.RGBA_INTEGER]=t.RGBA32I,s[Ue.RGB_INTEGER]=t.RGB32I,s[Ue.RG_INTEGER]=t.RG32I,s[Ue.RED_INTEGER]=t.R32I,s),e[ut.FLOAT]=(c={},c[Ue.RGBA]=t.RGBA32F,c[Ue.RGB]=t.RGB32F,c[Ue.RG]=t.RG32F,c[Ue.RED]=t.R32F,c[Ue.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,c),e[ut.HALF_FLOAT]=(l={},l[Ue.RGBA]=t.RGBA16F,l[Ue.RGB]=t.RGB16F,l[Ue.RG]=t.RG16F,l[Ue.RED]=t.R16F,l),e[ut.UNSIGNED_SHORT_5_6_5]=(u={},u[Ue.RGB]=t.RGB565,u),e[ut.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Ue.RGBA]=t.RGBA4,f),e[ut.UNSIGNED_SHORT_5_5_5_1]=(h={},h[Ue.RGBA]=t.RGB5_A1,h),e[ut.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Ue.RGBA]=t.RGB10_A2,d[Ue.RGBA_INTEGER]=t.RGB10_A2UI,d),e[ut.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[Ue.RGB]=t.R11F_G11F_B10F,p),e[ut.UNSIGNED_INT_5_9_9_9_REV]=(v={},v[Ue.RGB]=t.RGB9_E5,v),e[ut.UNSIGNED_INT_24_8]=(y={},y[Ue.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,y),e[ut.FLOAT_32_UNSIGNED_INT_24_8_REV]=(m={},m[Ue.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,m),e):A=(g={},g[ut.UNSIGNED_BYTE]=(x={},x[Ue.RGBA]=t.RGBA,x[Ue.RGB]=t.RGB,x[Ue.ALPHA]=t.ALPHA,x[Ue.LUMINANCE]=t.LUMINANCE,x[Ue.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,x),g[ut.UNSIGNED_SHORT_5_6_5]=(b={},b[Ue.RGB]=t.RGB,b),g[ut.UNSIGNED_SHORT_4_4_4_4]=(S={},S[Ue.RGBA]=t.RGBA,S),g[ut.UNSIGNED_SHORT_5_5_5_1]=(w={},w[Ue.RGBA]=t.RGBA,w),g),A}var pg=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ut.UNSIGNED_BYTE,this.internalFormat=Ue.RGBA,this.samplerType=0}return t}(),FO=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new zt,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=X2e(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new pg(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new pg(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var n=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,n=r.gl,i=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<i.length;a++)i[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<i.length;a++)i[a]===e&&(this.currentLocation!==a&&(n.activeTexture(n.TEXTURE0+a),this.currentLocation=a),n.bindTexture(e.target,this.emptyTextures[e.target].texture),i[a]=null)},t.prototype.ensureSamplerType=function(e){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,a=r.CONTEXT_UID;if(i)for(var o=e-1;o>=0;--o){var s=n[o];if(s){var c=s._glTextures[a];c.samplerType!==ip.FLOAT&&this.renderer.texture.unbind(s)}}},t.prototype.initTexture=function(e){var r=new pg(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var n,i;r.internalFormat=(i=(n=this.internalFormats[e.type])===null||n===void 0?void 0:n[e.format])!==null&&i!==void 0?i:e.format,this.webGLVersion===2&&e.type===ut.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(n,e,r))r.samplerType!==ip.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,a=e.realHeight,o=n.gl;(r.width!==i||r.height!==a||r.dirtyId<0)&&(r.width=i,r.height=a,o.texImage2D(e.target,0,r.internalFormat,i,a,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var i=this.managedTextures.indexOf(e);i!==-1&&Pu(this.managedTextures,i,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Di.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=uo.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var n=this.gl;if(r.mipmap&&e.mipmap!==Di.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===An.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===An.LINEAR){var a=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===An.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===An.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),Lj={__proto__:null,FilterSystem:_O,BatchSystem:xO,ContextSystem:bO,FramebufferSystem:SO,GeometrySystem:EO,MaskSystem:wO,ScissorSystem:AO,StencilSystem:CO,ProjectionSystem:TO,RenderTextureSystem:OO,ShaderSystem:PO,StateSystem:RO,TextureGCSystem:IO,TextureSystem:FO},IS=new zr,Bj=function(t){Er(e,t);function e(r,n){r===void 0&&(r=Sf.UNKNOWN);var i=t.call(this)||this;return n=Object.assign({},Ve.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new Mt(0,0,n.width,n.height),i.view=n.view||Ve.ADAPTER.createCanvas(),i.resolution=n.resolution||Ve.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(Fi("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return e.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=i,this.screen.height=a,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=a+"px"),this.emit("resize",i,a)},e.prototype.generateTexture=function(r,n,i,a){n===void 0&&(n={}),typeof n=="number"&&(Fi("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:a});var o=n.region,s=l2e(n,["region"]);a=o||r.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var c=Il.create(Vw({width:a.width,height:a.height},s));return IS.tx=-a.x,IS.ty=-a.y,this.render(r,{renderTexture:c,clear:!1,transform:IS,skipUpdateTransform:!!r.parent}),c},e.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Sf.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=nO(r),Tn(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(eh),Y2e=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),q2e=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,n=r.gl,i=r.CONTEXT_UID,a=e._glBuffers[i]||this.createGLBuffer(e);n.bindBuffer(e.type,a.buffer)},t.prototype.bindBufferBase=function(e,r){var n=this,i=n.gl,a=n.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var o=e._glBuffers[a]||this.createGLBuffer(e);this.boundBufferBases[r]=e,i.bindBufferBase(i.UNIFORM_BUFFER,r,o.buffer)}},t.prototype.bindBufferRange=function(e,r,n){var i=this,a=i.gl,o=i.CONTEXT_UID;n=n||0;var s=e._glBuffers[o]||this.createGLBuffer(e);a.bindBufferRange(a.UNIFORM_BUFFER,r||0,s.buffer,n*256,256)},t.prototype.update=function(e){var r=this,n=r.gl,i=r.CONTEXT_UID,a=e._glBuffers[i];if(e._updateID!==a.updateID)if(a.updateID=e._updateID,n.bindBuffer(e.type,a.buffer),a.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{var o=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;a.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,o)}},t.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)},t.prototype.createGLBuffer=function(e){var r=this,n=r.CONTEXT_UID,i=r.gl;return e._glBuffers[n]=new Y2e(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]},t}(),kO=function(t){Er(e,t);function e(r){var n=t.call(this,Sf.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Nn("destroy"),contextChange:new Nn("contextChange"),reset:new Nn("reset"),update:new Nn("update"),postrender:new Nn("postrender"),prerender:new Nn("prerender"),resize:new Nn("resize")},n.runners.contextChange.add(n),n.globalUniforms=new xl({projectionMatrix:new zr},!0),n.addSystem(wO,"mask").addSystem(bO,"context").addSystem(RO,"state").addSystem(PO,"shader").addSystem(FO,"texture").addSystem(q2e,"buffer").addSystem(EO,"geometry").addSystem(SO,"framebuffer").addSystem(AO,"scissor").addSystem(CO,"stencil").addSystem(TO,"projection").addSystem(IO,"textureGC").addSystem(_O,"filter").addSystem(OO,"renderTexture").addSystem(xO,"batch"),n.initPlugins(e.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,rj(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return e.create=function(r){if(nj())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var i=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,i)}else{var i=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i)}n>=Pr.HIGH?this.multisample=Pr.HIGH:n>=Pr.MEDIUM?this.multisample=Pr.MEDIUM:n>=Pr.LOW?this.multisample=Pr.LOW:this.multisample=Pr.NONE},e.prototype.addSystem=function(r,n){var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var a in this.runners)this.runners[a].add(i);return this},e.prototype.render=function(r,n){var i,a,o,s;if(n&&(n instanceof Il?(Fi("6.0.0","Renderer#render arguments changed, use options instead."),i=n,a=arguments[2],o=arguments[3],s=arguments[4]):(i=n.renderTexture,a=n.clear,o=n.transform,s=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(i||(this._lastObjectRendered=r),!s){var c=r.enableTempParent();r.updateTransform(),r.disableTempParent(c)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,n,i,a){n===void 0&&(n={});var o=t.prototype.generateTexture.call(this,r,n,i,a);return this.framebuffer.blit(),o},e.prototype.resize=function(r,n){t.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Fi("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,n){Fi("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Qo.add({name:r,type:hr.RendererPlugin,ref:n})},e.__plugins={},e}(Bj);Qo.handleByMap(hr.RendererPlugin,kO.__plugins);function Nj(t){return kO.create(t)}var K2e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Z2e=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Uj=K2e,DO=Z2e,Q2e=function(){function t(e){Fi("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return t.prototype.destroy=function(){this.renderer=null},t}(),dm=function(){function t(){this.texArray=null,this.blend=0,this.type=fa.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),pm=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),vm=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),jj=function(t){Er(e,t);function e(r){var n=t.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Nl.for2d(),n.size=Ve.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return e.prototype.contextChange=function(){var r=this.renderer.gl;Ve.PREFER_ENV===Go.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Ve.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Tj(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,n=e._textureArrayPool,i=this.size/4,a=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new dm);for(;n.length<a;)n.push(new pm);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,i=r.MAX_TEXTURES,a=e._textureArrayPool,o=this.renderer.batch,s=this._tempBoundTextures,c=this.renderer.textureGC.count,l=++zt._globalBatch,u=0,f=a[0],h=0;o.copyBoundTextures(s,i);for(var d=0;d<this._bufferSize;++d){var p=n[d];n[d]=null,p._batchEnabled!==l&&(f.count>=i&&(o.boundArray(f,s,l,i),this.buildDrawCalls(f,h,d),h=d,f=a[++u],++l),p._batchEnabled=l,p.touched=c,f.elements[f.count++]=p)}f.count>0&&(o.boundArray(f,s,l,i),this.buildDrawCalls(f,h,this._bufferSize),++u,++l);for(var d=0;d<s.length;d++)s[d]=null;zt._globalBatch=l},e.prototype.buildDrawCalls=function(r,n,i){var a=this,o=a._bufferedElements,s=a._attributeBuffer,c=a._indexBuffer,l=a.vertexSize,u=e._drawCallPool,f=this._dcIndex,h=this._aIndex,d=this._iIndex,p=u[f];p.start=this._iIndex,p.texArray=r;for(var v=n;v<i;++v){var y=o[v],m=y._texture.baseTexture,g=aO[m.alphaMode?1:0][y.blendMode];o[v]=null,n<v&&p.blend!==g&&(p.size=d-p.start,n=v,p=u[++f],p.texArray=r,p.start=d),this.packInterleavedGeometry(y,s,c,h,d),h+=y.vertexData.length/2*l,d+=y.indices.length,p.blend=g}n<i&&(p.size=d-p.start,++f),this._dcIndex=f,this._aIndex=h,this._iIndex=d},e.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,i=r._attributeBuffer,a=r._indexBuffer;Ve.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,a=n.state,o=e._drawCallPool,s=null,c=0;c<r;c++){var l=o[c],u=l.texArray,f=l.type,h=l.size,d=l.start,p=l.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=p,a.set(this.state),i.drawElements(f,h,i.UNSIGNED_SHORT,d*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Ve.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var n=up(Math.ceil(r/8)),i=Lw(n),a=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[a];return o||(this._aBuffers[a]=o=new vm(a*this.vertexSize*4)),o},e.prototype.getIndexBuffer=function(r){var n=up(Math.ceil(r/12)),i=Lw(n),a=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(a)),o},e.prototype.packInterleavedGeometry=function(r,n,i,a,o){for(var s=n.uint32View,c=n.float32View,l=a/this.vertexSize,u=r.uvs,f=r.indices,h=r.vertexData,d=r._texture.baseTexture._batchLocation,p=Math.min(r.worldAlpha,1),v=p<1&&r._texture.baseTexture.alphaMode?r_(r._tintRGB,p):r._tintRGB+(p*255<<24),y=0;y<h.length;y+=2)c[a++]=h[y],c[a++]=h[y+1],c[a++]=u[y],c[a++]=u[y+1],s[a++]=v,c[a++]=d;for(var y=0;y<f.length;y++)i[o++]=l+f[y]},e._drawCallPool=[],e._textureArrayPool=[],e}(Kp),$j=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),n=0;n<e;n++)r[n]=n;this.defaultGroupCache[e]=xl.from({uSamplers:r},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+e),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new ih(this.vertexSrc,i)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new zr,default:this.defaultGroupCache[e]};return new Cs(this.programCache[e],a)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),MO=function(t){Er(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this)||this;return n._buffer=new hn(null,r,!1),n._indexBuffer=new hn(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,ut.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,ut.FLOAT).addAttribute("aColor",n._buffer,4,!0,ut.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,ut.FLOAT).addIndex(n._indexBuffer),n}return e}(nh),DB=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,MB=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Vj=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:DB,fragment:MB,geometryClass:MO,vertexSize:6},e),n=r.vertex,i=r.fragment,a=r.vertexSize,o=r.geometryClass;return function(s){Er(c,s);function c(l){var u=s.call(this,l)||this;return u.shaderGenerator=new $j(n,i),u.geometryClass=o,u.vertexSize=a,u}return c}(jj)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return DB},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return MB},enumerable:!1,configurable:!0}),t}(),LO=Vj.create();Object.assign(LO,{extension:{name:"batch",type:hr.RendererPlugin}});var Gj={},J2e=function(t){Object.defineProperty(Gj,t,{get:function(){return Fi("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),gj[t]}})};for(var BO in gj)J2e(BO);var Wj={},eOe=function(t){Object.defineProperty(Wj,t,{get:function(){return Fi("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Lj[t]}})};for(var BO in Lj)eOe(BO);var tOe="6.5.10";/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zj={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Qr.mixin(zj);var rOe=9,Av=100,nOe=0,iOe=0,LB=2,BB=1,aOe=-1e3,oOe=-1e3,sOe=2,Hj=function(){function t(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ba.tablet||Ba.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=Av+"px",r.style.height=Av+"px",r.style.position="absolute",r.style.top=nOe+"px",r.style.left=iOe+"px",r.style.zIndex=LB.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=BB+"px",r.style.height=BB+"px",r.style.position="absolute",r.style.top=aOe+"px",r.style.left=oOe+"px",r.style.zIndex=sOe.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},t.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},t.prototype.update=function(){var e=performance.now();if(!(Ba.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,i=r.top,a=r.width,o=r.height,s=this.renderer,c=s.width,l=s.height,u=s.resolution,f=a/c*u,h=o/l*u,d=this.div;d.style.left=n+"px",d.style.top=i+"px",d.style.width=c+"px",d.style.height=l+"px";for(var p=0;p<this.children.length;p++){var v=this.children[p];if(v.renderId!==this.renderId)v._accessibleActive=!1,Pu(this.children,p,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,p--;else{d=v._accessibleDiv;var y=v.hitArea,m=v.worldTransform;v.hitArea?(d.style.left=(m.tx+y.x*m.a)*f+"px",d.style.top=(m.ty+y.y*m.d)*h+"px",d.style.width=y.width*m.a*f+"px",d.style.height=y.height*m.d*h+"px"):(y=v.getBounds(),this.capHitArea(y),d.style.left=y.x*f+"px",d.style.top=y.y*h+"px",d.style.width=y.width*f+"px",d.style.height=y.height*h+"px",d.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(d.title=v.accessibleTitle),d.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&d.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==d.title||v.tabIndex!==d.tabIndex)&&(d.title=v.accessibleTitle,d.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},t.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,n=r.width,i=r.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>i&&(e.height=i-e.y)},t.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=Av+"px",r.style.height=Av+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=LB.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},t.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,n=e.target.displayObject,i=r.eventData;r.dispatchEvent(n,"click",i),r.dispatchEvent(n,"pointertap",i),r.dispatchEvent(n,"tap",i)},t.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=e.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseover",i)},t.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=e.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseout",i)},t.prototype._onKeyDown=function(e){e.keyCode===rOe&&this.activate()},t.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[hr.RendererPlugin,hr.CanvasRendererPlugin]},t}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ww=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Dt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)},t.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zw=function(t,e){return zw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},zw(t,e)};function lOe(t,e){zw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Xj=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),vg=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),uOe=function(){function t(){this._tempPoint=new Dt}return t.prototype.recursiveFindHit=function(e,r,n,i,a){var o;if(!r||!r.visible)return!1;var s=e.data.global;a=r.interactive||a;var c=!1,l=a,u=!0;if(r.hitArea)i&&(r.worldTransform.applyInverse(s,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?c=!0:(i=!1,u=!1)),l=!1;else if(r._mask&&i){var f=r._mask.isMaskData?r._mask.maskObject:r._mask;f&&!(!((o=f.containsPoint)===null||o===void 0)&&o.call(f,s))&&(i=!1)}if(u&&r.interactiveChildren&&r.children)for(var h=r.children,d=h.length-1;d>=0;d--){var p=h[d],v=this.recursiveFindHit(e,p,n,i,l);if(v){if(!p.parent)continue;l=!1,v&&(e.target&&(i=!1),c=!0)}}return a&&(i&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(s)&&(c=!0),r.interactive&&(c&&!e.target&&(e.target=r),n&&n(e,r,!!c))),c},t.prototype.findHit=function(e,r,n,i){this.recursiveFindHit(e,r,n,i,!1)},t}(),Yj={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Qr.mixin(Yj);var Cv=1,Tv={target:null,data:{global:null}},qj=function(t){lOe(e,t);function e(r,n){var i=t.call(this)||this;return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new Ww,i.mouse.identifier=Cv,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Cv]=i.mouse,i.interactionDataPool=[],i.eventData=new Xj,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new uOe,i._tempDisplayObject=new uO,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,n){return Tv.target=null,Tv.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive(Tv,n,null,!0),Tv.target},e.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||($r.system.add(this.tickerUpdate,this,ho.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&($r.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,n,i){(!i.stopPropagationHint||r===i.stopsPropagatingAt)&&(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},e.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},e.prototype.mapPositionToPoint=function(r,n,i){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;r.x=(n-a.left)*(this.interactionDOMElement.width/a.width)*o,r.y=(i-a.top)*(this.interactionDOMElement.height/a.height)*o},e.prototype.processInteractive=function(r,n,i,a){var o=this.search.findHit(r,n,i,a),s=this.delayedEvents;if(!s.length)return o;r.stopPropagationHint=!1;var c=s.length;this.delayedEvents=[];for(var l=0;l<c;l++){var u=s[l],f=u.displayObject,h=u.eventString,d=u.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,h,d)}return o},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var i=r.cancelable||!("cancelable"in r);i&&r.preventDefault()}for(var a=n.length,o=0;o<a;o++){var s=n[o],c=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,c);if(l.data.originalEvent=r,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),s.pointerType==="touch")this.emit("touchstart",l);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,n,i){var a=r.data,o=r.data.identifier;if(i){if(n.trackedPointers[o]||(n.trackedPointers[o]=new vg(o)),this.dispatchEvent(n,"pointerdown",r),a.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;s?n.trackedPointers[o].rightDown=!0:n.trackedPointers[o].leftDown=!0,this.dispatchEvent(n,s?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,n,i){var a=this.normalizeToPointerData(r),o=a.length,s=r.target;r.composedPath&&r.composedPath().length>0&&(s=r.composedPath()[0]);for(var c=s!==this.interactionDOMElement?"outside":"",l=0;l<o;l++){var u=a[l],f=this.getInteractionDataForPointerId(u),h=this.configureInteractionEventForDOMEvent(this.eventData,u,f);if(h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,i,n||!c),this.emit(n?"pointercancel":"pointerup"+c,h),u.pointerType==="mouse"||u.pointerType==="pen"){var d=u.button===2;this.emit(d?"rightup"+c:"mouseup"+c,h)}else u.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+c,h),this.releaseInteractionDataForPointerId(u.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,n){var i=r.data,a=r.data.identifier;n.trackedPointers[a]!==void 0&&(delete n.trackedPointers[a],this.dispatchEvent(n,"pointercancel",r),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,n,i){var a=r.data,o=r.data.identifier,s=n.trackedPointers[o],c=a.pointerType==="touch",l=a.pointerType==="mouse"||a.pointerType==="pen",u=!1;if(l){var f=a.button===2,h=vg.FLAGS,d=f?h.RIGHT_DOWN:h.LEFT_DOWN,p=s!==void 0&&s.flags&d;i?(this.dispatchEvent(n,f?"rightup":"mouseup",r),p&&(this.dispatchEvent(n,f?"rightclick":"click",r),u=!0)):p&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),s&&(f?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),c&&this.dispatchEvent(n,"touchend",r),s&&((!l||u)&&this.dispatchEvent(n,"pointertap",r),c&&(this.dispatchEvent(n,"tap",r),s.over=!1))):s&&(this.dispatchEvent(n,"pointerupoutside",r),c&&this.dispatchEvent(n,"touchendoutside",r)),s&&s.none&&delete n.trackedPointers[o]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,a=0;a<i;a++){var o=n[a],s=this.getInteractionDataForPointerId(o),c=this.configureInteractionEventForDOMEvent(this.eventData,o,s);c.data.originalEvent=r,this.processInteractive(c,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",c),o.pointerType==="touch"&&this.emit("touchmove",c),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",c)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,n,i){var a=r.data,o=a.pointerType==="touch",s=a.pointerType==="mouse"||a.pointerType==="pen";s&&this.processPointerOverOut(r,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",r),o&&this.dispatchEvent(n,"touchmove",r),s&&this.dispatchEvent(n,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=i,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(a.identifier)}},e.prototype.processPointerOverOut=function(r,n,i){var a=r.data,o=r.data.identifier,s=a.pointerType==="mouse"||a.pointerType==="pen",c=n.trackedPointers[o];i&&!c&&(c=n.trackedPointers[o]=new vg(o)),c!==void 0&&(i&&this.mouseOverRenderer?(c.over||(c.over=!0,this.delayDispatchEvent(n,"pointerover",r),s&&this.delayDispatchEvent(n,"mouseover",r)),s&&this.cursor===null&&(this.cursor=n.cursor)):c.over&&(c.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),s&&this.dispatchEvent(n,"mouseout",r),c.none&&delete n.trackedPointers[o]))},e.prototype.onPointerOver=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0],a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",o)}},e.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,i;return n===Cv||r.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new Ww,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(r),i},e.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},e.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,a=r.changedTouches.length;i<a;i++){var o=r.changedTouches[i];typeof o.button>"u"&&(o.button=r.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=r.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,n.push(o)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var s=r;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=Cv),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(r);return n},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[hr.RendererPlugin,hr.CanvasRendererPlugin]},e}(eh);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var cOe=new Mt,fOe=4,Kj=function(){function t(e){this.renderer=e}return t.prototype.image=function(e,r,n){var i=new Image;return i.src=this.base64(e,r,n),i},t.prototype.base64=function(e,r,n){return this.canvas(e).toDataURL(r,n)},t.prototype.canvas=function(e,r){var n=this._rawPixels(e,r),i=n.pixels,a=n.width,o=n.height,s=n.flipY,c=new Nw(a,o,1),l=c.context.getImageData(0,0,a,o);if(t.arrayPostDivide(i,l.data),c.context.putImageData(l,0,0),s){var u=new Nw(c.width,c.height,1);u.context.scale(1,-1),u.context.drawImage(c.canvas,0,-o),c.destroy(),c=u}return c.canvas},t.prototype.pixels=function(e,r){var n=this._rawPixels(e,r).pixels;return t.arrayPostDivide(n,n),n},t.prototype._rawPixels=function(e,r){var n=this.renderer,i,a=!1,o,s=!1;if(e)if(e instanceof Il)o=e;else{var c=n.context.webGLVersion>=2?n.multisample:Pr.NONE;if(o=this.renderer.generateTexture(e,{multisample:c}),c!==Pr.NONE){var l=Il.create({width:o.width,height:o.height});n.framebuffer.bind(o.framebuffer),n.framebuffer.blit(l.framebuffer),n.framebuffer.bind(null),o.destroy(!0),o=l}s=!0}o?(i=o.baseTexture.resolution,r=r??o.frame,a=!1,n.renderTexture.bind(o)):(i=n.resolution,r||(r=cOe,r.width=n.width,r.height=n.height),a=!0,n.renderTexture.bind(null));var u=Math.round(r.width*i),f=Math.round(r.height*i),h=new Uint8Array(fOe*u*f),d=n.gl;return d.readPixels(Math.round(r.x*i),Math.round(r.y*i),u,f,d.RGBA,d.UNSIGNED_BYTE,h),s&&o.destroy(!0),{pixels:h,width:u,height:f,flipY:a}},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(e,r){for(var n=0;n<e.length;n+=4){var i=r[n+3]=e[n+3];i!==0?(r[n]=Math.round(Math.min(e[n]*255/i,255)),r[n+1]=Math.round(Math.min(e[n+1]*255/i,255)),r[n+2]=Math.round(Math.min(e[n+2]*255/i,255))):(r[n]=e[n],r[n+1]=e[n+1],r[n+2]=e[n+2])}},t.extension={name:"extract",type:hr.RendererPlugin},t}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ov=function(){function t(e,r,n){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function NB(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var _s=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},t.prototype.has=function(e){if(!(e instanceof Ov))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,r),i=i._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return NB(this,new Ov(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return NB(this,new Ov(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof Ov))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function Zj(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},a=14;a--;)i[r.key[a]]=n[a]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(o,s,c){s&&(i[r.q.name][s]=c)}),i}var FS,Pv=null,hOe=0,UB=200,dOe=204,pOe=1223,vOe=2;function jB(){}function $B(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function kS(t){return t.toString().replace("object ","")}var vr=function(){function t(e,r,n){if(this._dequeue=jB,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=jB,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new _s,this.onProgress=new _s,this.onComplete=new _s,this.onAfterMiddleware=new _s}return t.setExtensionLoadType=function(e,r){$B(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){$B(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof FS>"u"&&(FS=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),FS&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,n){n||(n=e+"/"+this._getExtension(r));var i=document.createElement("source");return i.src=r,i.type=n,i},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(kS(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(kS(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(kS(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n=typeof e.status>"u"?UB:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(r=e.responseText),n===hOe&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=UB:n===pOe&&(n=dOe);var i=n/100|0;if(i===vOe)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,Pv||(Pv=document.createElement("a")),Pv.href=e;var n=Zj(Pv.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,a=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||a!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var n=e.indexOf("/");r=e.substring(n+1,e.indexOf(";",n))}else{var i=e.indexOf("?"),a=e.indexOf("#"),o=Math.min(i>-1?i:e.length,a>-1?a:e.length);e=e.substring(0,o),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,avif:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,avif:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(vr||(vr={}));function Jl(){}function gOe(t){return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(t===null)throw new Error("Callback was already called.");var a=t;t=null,a.apply(this,n)}}var mOe=function(){function t(e,r){this.data=e,this.callback=r}return t}(),DS=function(){function t(e,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Jl,this.unsaturated=Jl,this.empty=Jl,this.drain=Jl,this.error=Jl,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,a,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var s=new mOe(i,typeof o=="function"?o:Jl);a?n._tasks.unshift(s):n._tasks.push(s),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,gOe(n._next(i)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var n=arguments,i=[],a=0;a<arguments.length;a++)i[a]=n[a];r.workers-=1,e.callback.apply(e,i),i[0]!=null&&r.error(i[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=Jl,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,n,i){var a=0,o=e.length;function s(c){if(c||a===o){n&&n(c);return}i?setTimeout(function(){r(e[a++],s)},1):r(e[a++],s)}s()},t.queue=function(e,r){return new t(e,r)},t}(),MS=100,yOe=/(#[\w-]+)?$/,$u=function(){function t(e,r){var n=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return n._loadResource(c,l)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return n._loadResource(c,l)},this._queue=DS.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new _s,this.onError=new _s,this.onLoad=new _s,this.onStart=new _s,this.onComplete=new _s;for(var i=0;i<t._plugins.length;++i){var a=t._plugins[i],o=a.pre,s=a.use;o&&this.pre(o),s&&this.use(s)}this._protected=!1}return t.prototype._add=function(e,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new vr(e,r,n),typeof i=="function"&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var a=n.parentResource,o=[],s=0;s<a.children.length;++s)a.children[s].isComplete||o.push(a.children[s]);var c=a.progressChunk*(o.length+1),l=c/(o.length+2);a.children.push(this.resources[e]),a.progressChunk=l;for(var s=0;s<o.length;++s)o[s].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(Fi("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=MS/r,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=Zj(e,{strictMode:!0}),n;if(r.protocol||!r.path||e.indexOf("//")===0?n=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?n=this.baseUrl+"/"+e:n=this.baseUrl+e,this.defaultQueryString){var i=yOe.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},t.prototype._loadResource=function(e,r){var n=this;e._dequeue=r,DS.eachSeries(this._beforeMiddleware,function(i,a){i.call(n,e,function(){a(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=MS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),DS.eachSeries(this._afterMiddleware,function(n,i){n.call(r,e,i)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(MS,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return Fi("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Qo.add({type:hr.Loader,ref:e}),t},t._plugins=[],t}();Qo.handleByList(hr.Loader,$u._plugins);$u.prototype.add=function(e,r,n,i){if(Array.isArray(e)){for(var a=0;a<e.length;++a)this.add(e[a]);return this}if(typeof e=="object"&&(n=e,i=r||n.callback||n.onComplete,r=n.url,e=n.name||n.key||n.url),typeof r!="string"&&(i=n,n=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(e,r,n,i)};var Qj=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?$u.shared:new $u},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=hr.Application,t}(),Jj=function(){function t(){}return t.add=function(){vr.setExtensionLoadType("svg",vr.LOAD_TYPE.XHR),vr.setExtensionXhrType("svg",vr.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===vr.TYPE.IMAGE||e.extension==="svg")){var n=e.data,i=e.url,a=e.name,o=e.metadata;pt.fromLoader(n,i,a,o).then(function(s){e.texture=s,r()}).catch(r)}else r()},t.extension=hr.Loader,t}(),_Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xOe(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],i=[0,0,0,0],a=0;a<n.length;++a)r<t.length?n[a]=t.charCodeAt(r++)&255:n[a]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var o=r-(t.length-1);switch(o){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var a=0;a<i.length;++a)e+=_Oe.charAt(i[a])}return e}function bOe(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===vr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+xOe(t.xhr.responseText),t.type=vr.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.type=vr.TYPE.IMAGE,t.data.onload=function(){n.revokeObjectURL(i),t.data.onload=null,e()};return}}e()}var SOe=function(){function t(){}return t.extension=hr.Loader,t.use=bOe,t}();Qo.add(Jj,SOe);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fr,wt;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(wt||(wt={}));var pp=(fr={},fr[wt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,fr[wt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,fr[wt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,fr[wt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,fr[wt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,fr[wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,fr[wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,fr[wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,fr[wt.COMPRESSED_R11_EAC]=.5,fr[wt.COMPRESSED_SIGNED_R11_EAC]=.5,fr[wt.COMPRESSED_RG11_EAC]=1,fr[wt.COMPRESSED_SIGNED_RG11_EAC]=1,fr[wt.COMPRESSED_RGB8_ETC2]=.5,fr[wt.COMPRESSED_RGBA8_ETC2_EAC]=1,fr[wt.COMPRESSED_SRGB8_ETC2]=.5,fr[wt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,fr[wt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,fr[wt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,fr[wt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,fr[wt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,fr[wt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,fr[wt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,fr[wt.COMPRESSED_RGB_ETC1_WEBGL]=.5,fr[wt.COMPRESSED_RGB_ATC_WEBGL]=.5,fr[wt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,fr[wt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,fr[wt.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,fr);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hw=function(t,e){return Hw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Hw(t,e)};function e$(t,e){Hw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function EOe(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})}function wOe(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var t$=function(t){e$(e,t);function e(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,a,o;return typeof r=="string"?(a=r,o=new Uint8Array):(a=null,o=r),i=t.call(this,o,n)||this,i.origin=a,i.buffer=o?new vm(o):null,i.origin&&n.autoLoad!==!1&&i.load(),o&&o.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return EOe(this,void 0,Promise,function(){var r,n,i;return wOe(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return r=a.sent(),[4,r.blob()];case 2:return n=a.sent(),[4,n.arrayBuffer()];case 3:return i=a.sent(),this.data=new Uint32Array(i),this.buffer=new vm(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},e}(ec),gm=function(t){e$(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=e._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return e.prototype.upload=function(r,n,i){var a=r.gl,o=r.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,c=this.levels;s<c;s++){var l=this._levelBuffers[s],u=l.levelID,f=l.levelWidth,h=l.levelHeight,d=l.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,u,this.format,f,h,0,d)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,n,i,a,o,s,c){for(var l=new Array(i),u=r.byteOffset,f=s,h=c,d=f+a-1&~(a-1),p=h+o-1&~(o-1),v=d*p*pp[n],y=0;y<i;y++)l[y]={levelID:y,levelWidth:i>1?f:d,levelHeight:i>1?h:p,levelBuffer:new Uint8Array(r.buffer,u,v)},u+=v,f=f>>1||1,h=h>>1||1,d=f+a-1&~(a-1),p=h+o-1&~(o-1),v=d*p*pp[n];return l},e}(t$),r$=function(){function t(){}return t.use=function(e,r){var n=e.data,i=this;if(e.type===vr.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var a=n.textures,o=void 0,s=void 0,c=0,l=a.length;c<l;c++){var u=a[c],f=u.src,h=u.format;if(h||(s=f),t.textureFormats[h]){o=f;break}}if(o=o||s,!o){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(o===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=bu.resolve(e.url.replace(i.baseUrl,""),o),v=n.cacheID;i.add(v,p,d,function(y){if(y.error){r(y.error);return}var m=y.texture,g=m===void 0?null:m,x=y.textures,b=x===void 0?{}:x;Object.assign(e,{texture:g,textures:b}),r()})}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=Ve.ADAPTER.createCanvas(),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=n}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;t._textureFormats={};for(var r in e){var n=e[r];n&&Object.assign(t._textureFormats,Object.getPrototypeOf(n))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=hr.Loader,t}();function n$(t,e,r){var n={textures:{},texture:null};if(!e)return n;var i=e.map(function(a){return new pt(new zt(a,Object.assign({mipmap:Di.OFF,alphaMode:Qi.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(a,o){var s=a.baseTexture,c=t+"-"+(o+1);zt.addToCache(s,c),pt.addToCache(a,c),o===0&&(zt.addToCache(s,t),pt.addToCache(a,t),n.texture=a),n.textures[c]=a}),n}var Hh,Ka,LS=4,Rv=124,AOe=32,VB=20,COe=542327876,Iv={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},TOe={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Fv={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},eo;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(eo||(eo={}));var Xw;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Xw||(Xw={}));var OOe=1,POe=2,ROe=4,IOe=64,FOe=512,kOe=131072,DOe=827611204,MOe=861165636,LOe=894720068,BOe=808540228,NOe=4,UOe=(Hh={},Hh[DOe]=wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Hh[MOe]=wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Hh[LOe]=wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Hh),jOe=(Ka={},Ka[eo.DXGI_FORMAT_BC1_TYPELESS]=wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ka[eo.DXGI_FORMAT_BC1_UNORM]=wt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ka[eo.DXGI_FORMAT_BC2_TYPELESS]=wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ka[eo.DXGI_FORMAT_BC2_UNORM]=wt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ka[eo.DXGI_FORMAT_BC3_TYPELESS]=wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ka[eo.DXGI_FORMAT_BC3_UNORM]=wt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ka[eo.DXGI_FORMAT_BC1_UNORM_SRGB]=wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Ka[eo.DXGI_FORMAT_BC2_UNORM_SRGB]=wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Ka[eo.DXGI_FORMAT_BC3_UNORM_SRGB]=wt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Ka);function i$(t){var e=new Uint32Array(t),r=e[0];if(r!==COe)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,Rv/Uint32Array.BYTES_PER_ELEMENT),i=n[Iv.HEIGHT],a=n[Iv.WIDTH],o=n[Iv.MIPMAP_COUNT],s=new Uint32Array(t,Iv.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,AOe/Uint32Array.BYTES_PER_ELEMENT),c=s[OOe];if(c&ROe){var l=s[TOe.FOURCC];if(l!==BOe){var u=UOe[l],f=LS+Rv,h=new Uint8Array(t,f),d=new gm(h,{format:u,width:a,height:i,levels:o});return[d]}var p=LS+Rv,v=new Uint32Array(e.buffer,p,VB/Uint32Array.BYTES_PER_ELEMENT),y=v[Fv.DXGI_FORMAT],m=v[Fv.RESOURCE_DIMENSION],g=v[Fv.MISC_FLAG],x=v[Fv.ARRAY_SIZE],b=jOe[y];if(b===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+y);if(g===NOe)throw new Error("DDSParser does not support cubemap textures");if(m===Xw.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var S=new Array,w=LS+Rv+VB;if(x===1)S.push(new Uint8Array(t,w));else{for(var A=pp[b],C=0,O=a,P=i,I=0;I<o;I++){var R=Math.max(1,O+3&-4),F=Math.max(1,P+3&-4),D=R*F*A;C+=D,O=O>>>1,P=P>>>1}for(var L=w,I=0;I<x;I++)S.push(new Uint8Array(t,L,C)),L+=C}return S.map(function(U){return new gm(U,{format:b,width:a,height:i,levels:o})})}throw c&IOe?new Error("DDSParser does not support uncompressed texture data."):c&FOe?new Error("DDSParser does not supported YUV uncompressed texture data."):c&kOe?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&POe?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Gs,hs,Xh,GB=[171,75,84,88,32,49,49,187,13,10,26,10],$Oe=67305985,Za={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Yw=64,qw=(Gs={},Gs[ut.UNSIGNED_BYTE]=1,Gs[ut.UNSIGNED_SHORT]=2,Gs[ut.INT]=4,Gs[ut.UNSIGNED_INT]=4,Gs[ut.FLOAT]=4,Gs[ut.HALF_FLOAT]=8,Gs),a$=(hs={},hs[Ue.RGBA]=4,hs[Ue.RGB]=3,hs[Ue.RG]=2,hs[Ue.RED]=1,hs[Ue.LUMINANCE]=1,hs[Ue.LUMINANCE_ALPHA]=2,hs[Ue.ALPHA]=1,hs),o$=(Xh={},Xh[ut.UNSIGNED_SHORT_4_4_4_4]=2,Xh[ut.UNSIGNED_SHORT_5_5_5_1]=2,Xh[ut.UNSIGNED_SHORT_5_6_5]=2,Xh);function s$(t,e,r){r===void 0&&(r=!1);var n=new DataView(e);if(!VOe(t,n))return null;var i=n.getUint32(Za.ENDIANNESS,!0)===$Oe,a=n.getUint32(Za.GL_TYPE,i),o=n.getUint32(Za.GL_FORMAT,i),s=n.getUint32(Za.GL_INTERNAL_FORMAT,i),c=n.getUint32(Za.PIXEL_WIDTH,i),l=n.getUint32(Za.PIXEL_HEIGHT,i)||1,u=n.getUint32(Za.PIXEL_DEPTH,i)||1,f=n.getUint32(Za.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=n.getUint32(Za.NUMBER_OF_FACES,i),d=n.getUint32(Za.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(Za.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||u!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var v=4,y=4,m=c+3&-4,g=l+3&-4,x=new Array(f),b=c*l;a===0&&(b=m*g);var S;if(a!==0?qw[a]?S=qw[a]*a$[o]:S=o$[a]:S=pp[s],S===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var w=r?WOe(n,p,i):null,A=b*S,C=A,O=c,P=l,I=m,R=g,F=Yw+p,D=0;D<d;D++){for(var L=n.getUint32(F,i),U=F+4,Y=0;Y<f;Y++){var ee=x[Y];ee||(ee=x[Y]=new Array(d)),ee[D]={levelID:D,levelWidth:d>1||a!==0?O:I,levelHeight:d>1||a!==0?P:R,levelBuffer:new Uint8Array(e,U,C)},U+=C}F+=L+4,F=F%4!==0?F+4-F%4:F,O=O>>1||1,P=P>>1||1,I=O+v-1&~(v-1),R=P+y-1&~(y-1),C=I*R*S}return a!==0?{uncompressed:x.map(function(J){var X=J[0].levelBuffer,M=!1;return a===ut.FLOAT?X=new Float32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4):a===ut.UNSIGNED_INT?(M=!0,X=new Uint32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4)):a===ut.INT&&(M=!0,X=new Int32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4)),{resource:new ec(X,{width:J[0].levelWidth,height:J[0].levelHeight}),type:a,format:M?GOe(o):o}}),kvData:w}:{compressed:x.map(function(J){return new gm(null,{format:s,width:c,height:l,levels:d,levelBuffers:J})}),kvData:w}}function VOe(t,e){for(var r=0;r<GB.length;r++)if(e.getUint8(r)!==GB[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}function GOe(t){switch(t){case Ue.RGBA:return Ue.RGBA_INTEGER;case Ue.RGB:return Ue.RGB_INTEGER;case Ue.RG:return Ue.RG_INTEGER;case Ue.RED:return Ue.RED_INTEGER;default:return t}}function WOe(t,e,r){for(var n=new Map,i=0;i<e;){var a=t.getUint32(Yw+i,r),o=Yw+i+4,s=3-(a+3)%4;if(a===0||a>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var c=0;c<a&&t.getUint8(o+c)!==0;c++);if(c===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=new TextDecoder().decode(new Uint8Array(t.buffer,o,c)),u=new DataView(t.buffer,o+c+1,a-c-1);n.set(l,u),i+=4+a+s}return n}vr.setExtensionXhrType("dds",vr.XHR_RESPONSE_TYPE.BUFFER);var l$=function(){function t(){}return t.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,n$(e.name||e.url,i$(e.data),e.metadata))}catch(n){r(n);return}r()},t.extension=hr.Loader,t}();vr.setExtensionXhrType("ktx",vr.XHR_RESPONSE_TYPE.BUFFER);var u$=function(){function t(){}return t.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var n=e.name||e.url,i=s$(n,e.data,this.loadKeyValueData),a=i.compressed,o=i.uncompressed,s=i.kvData;if(a){var c=n$(n,a,e.metadata);if(s&&c.textures)for(var l in c.textures)c.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(e,c)}else if(o){var u={};o.forEach(function(f,h){var d=new pt(new zt(f.resource,{mipmap:Di.OFF,alphaMode:Qi.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),p=n+"-"+(h+1);s&&(d.baseTexture.ktxKeyValueData=s),zt.addToCache(d.baseTexture,p),pt.addToCache(d,p),h===0&&(u[n]=d,zt.addToCache(d.baseTexture,n),pt.addToCache(d,n)),u[p]=d}),Object.assign(e,{textures:u})}}catch(f){r(f);return}r()},t.extension=hr.Loader,t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kw=function(t,e){return Kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Kw(t,e)};function c$(t,e){Kw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var zOe=function(t){c$(e,t);function e(r,n,i,a){r===void 0&&(r=1500),i===void 0&&(i=16384),a===void 0&&(a=!1);var o=t.call(this)||this,s=16384;return i>s&&(i=s),o._properties=[!1,!0,!1,!1,!1],o._maxSize=r,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=ze.NORMAL,o.autoResize=a,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,Tn(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Cn),WB=function(){function t(e,r,n){this.geometry=new nh,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var a=e[i];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||ut.FLOAT,offset:a.offset},r[i]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new hn(aj(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=r,r+=i.size,this.dynamicStride+=i.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new hn(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=o,o+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new hn(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];e.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===ut.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];e.addAttribute(i.attributeName,this.staticBuffer,0,i.type===ut.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},t.prototype.uploadDynamic=function(e,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var a=this.dynamicProperties[i];a.uploadFunction(e,r,n,a.type===ut.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(e,r,n){for(var i=0;i<this.staticProperties.length;i++){var a=this.staticProperties[i];a.uploadFunction(e,r,n,a.type===ut.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),HOe=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,XOe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,f$=function(t){c$(e,t);function e(r){var n=t.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new zr,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ut.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Cs.from(XOe,HOe,{}),n.state=Nl.for2d(),n}return e.prototype.render=function(r){var n=r.children,i=r._maxSize,a=r._batchSize,o=this.renderer,s=n.length;if(s!==0){s>i&&!r.autoResize&&(s=i);var c=r._buffers;c||(c=r._buffers=this.generateBuffers(r));var l=n[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=oO(r.blendMode,u),o.state.set(this.state);var f=o.gl,h=r.worldTransform.copyTo(this.tempMatrix);h.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=ij(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var d=!1,p=0,v=0;p<s;p+=a,v+=1){var y=s-p;y>a&&(y=a),v>=c.length&&c.push(this._generateOneMoreBuffer(r));var m=c[v];m.uploadDynamic(n,p,y);var g=r._bufferUpdateIDs[v]||0;d=d||m._updateID<g,d&&(m._updateID=r._updateID,m.uploadStatic(n,p,y)),o.geometry.bind(m.geometry),f.drawElements(f.TRIANGLES,y*6,f.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,a=r._batchSize,o=r._properties,s=0;s<i;s+=a)n.push(new WB(this.properties,o,a));return n},e.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new WB(this.properties,i,n)},e.prototype.uploadVertices=function(r,n,i,a,o,s){for(var c=0,l=0,u=0,f=0,h=0;h<i;++h){var d=r[n+h],p=d._texture,v=d.scale.x,y=d.scale.y,m=p.trim,g=p.orig;m?(l=m.x-d.anchor.x*g.width,c=l+m.width,f=m.y-d.anchor.y*g.height,u=f+m.height):(c=g.width*(1-d.anchor.x),l=g.width*-d.anchor.x,u=g.height*(1-d.anchor.y),f=g.height*-d.anchor.y),a[s]=l*v,a[s+1]=f*y,a[s+o]=c*v,a[s+o+1]=f*y,a[s+o*2]=c*v,a[s+o*2+1]=u*y,a[s+o*3]=l*v,a[s+o*3+1]=u*y,s+=o*4}},e.prototype.uploadPosition=function(r,n,i,a,o,s){for(var c=0;c<i;c++){var l=r[n+c].position;a[s]=l.x,a[s+1]=l.y,a[s+o]=l.x,a[s+o+1]=l.y,a[s+o*2]=l.x,a[s+o*2+1]=l.y,a[s+o*3]=l.x,a[s+o*3+1]=l.y,s+=o*4}},e.prototype.uploadRotation=function(r,n,i,a,o,s){for(var c=0;c<i;c++){var l=r[n+c].rotation;a[s]=l,a[s+o]=l,a[s+o*2]=l,a[s+o*3]=l,s+=o*4}},e.prototype.uploadUvs=function(r,n,i,a,o,s){for(var c=0;c<i;++c){var l=r[n+c]._texture._uvs;l?(a[s]=l.x0,a[s+1]=l.y0,a[s+o]=l.x1,a[s+o+1]=l.y1,a[s+o*2]=l.x2,a[s+o*2+1]=l.y2,a[s+o*3]=l.x3,a[s+o*3+1]=l.y3,s+=o*4):(a[s]=0,a[s+1]=0,a[s+o]=0,a[s+o+1]=0,a[s+o*2]=0,a[s+o*2+1]=0,a[s+o*3]=0,a[s+o*3+1]=0,s+=o*4)}},e.prototype.uploadTint=function(r,n,i,a,o,s){for(var c=0;c<i;++c){var l=r[n+c],u=l._texture.baseTexture.alphaMode>0,f=l.alpha,h=f<1&&u?r_(l._tintRGB,f):l._tintRGB+(f*255<<24);a[s]=h,a[s+o]=h,a[s+o*2]=h,a[s+o*3]=h,s+=o*4}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:hr.RendererPlugin},e}(Kp);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Do;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(Do||(Do={}));var Ss;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(Ss||(Ss={}));var Cf={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(e===void 0&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},NO=function(){function t(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=pt.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zw=function(t,e){return Zw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Zw(t,e)};function UO(t,e){Zw(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function zB(t,e){var r,n;e===void 0&&(e=!1);var i=t.length;if(!(i<6)){for(var a=0,o=0,s=t[i-2],c=t[i-1];o<i;o+=2){var l=t[o],u=t[o+1];a+=(l-s)*(u+c),s=l,c=u}if(!e&&a>0||e&&a<=0)for(var f=i/2,o=f+f%2;o<i;o+=2){var h=i-o-2,d=i-o-1,p=o,v=o+1;r=[t[p],t[h]],t[h]=r[0],t[p]=r[1],n=[t[v],t[d]],t[d]=n[0],t[v]=n[1]}}}var jO={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,n=t.holes,i=e.points,a=e.indices;if(r.length>=6){zB(r,!1);for(var o=[],s=0;s<n.length;s++){var c=n[s];zB(c.points,!0),o.push(r.length/2),r=r.concat(c.points)}var l=q2(r,o,2);if(!l)return;for(var u=i.length/2,s=0;s<l.length;s+=3)a.push(l[s]+u),a.push(l[s+1]+u),a.push(l[s+2]+u);for(var s=0;s<r.length;s++)i.push(r[s])}}},vp={build:function(t){var e=t.points,r,n,i,a,o,s;if(t.type===En.CIRC){var c=t.shape;r=c.x,n=c.y,o=s=c.radius,i=a=0}else if(t.type===En.ELIP){var l=t.shape;r=l.x,n=l.y,o=l.width,s=l.height,i=a=0}else{var u=t.shape,f=u.width/2,h=u.height/2;r=u.x+f,n=u.y+h,o=s=Math.max(0,Math.min(u.radius,Math.min(f,h))),i=f-o,a=h-s}if(!(o>=0&&s>=0&&i>=0&&a>=0)){e.length=0;return}var d=Math.ceil(2.3*Math.sqrt(o+s)),p=d*8+(i?4:0)+(a?4:0);if(e.length=p,p!==0){if(d===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+a,e[2]=e[4]=r-i,e[5]=e[7]=n-a;return}var v=0,y=d*4+(i?2:0)+2,m=y,g=p;{var x=i+o,b=a,S=r+x,w=r-x,A=n+b;if(e[v++]=S,e[v++]=A,e[--y]=A,e[--y]=w,a){var C=n-b;e[m++]=w,e[m++]=C,e[--g]=C,e[--g]=S}}for(var O=1;O<d;O++){var P=Math.PI/2*(O/d),x=i+Math.cos(P)*o,b=a+Math.sin(P)*s,S=r+x,w=r-x,A=n+b,C=n-b;e[v++]=S,e[v++]=A,e[--y]=A,e[--y]=w,e[m++]=w,e[m++]=C,e[--g]=C,e[--g]=S}{var x=i,b=a+s,S=r+x,w=r-x,A=n+b,C=n-b;e[v++]=S,e[v++]=A,e[--g]=C,e[--g]=S,i&&(e[v++]=w,e[v++]=A,e[--g]=C,e[--g]=w)}}},triangulate:function(t,e){var r=t.points,n=e.points,i=e.indices;if(r.length!==0){var a=n.length/2,o=a,s,c;if(t.type!==En.RREC){var l=t.shape;s=l.x,c=l.y}else{var u=t.shape;s=u.x+u.width/2,c=u.y+u.height/2}var f=t.matrix;n.push(t.matrix?f.a*s+f.c*c+f.tx:s,t.matrix?f.b*s+f.d*c+f.ty:c),a++,n.push(r[0],r[1]);for(var h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),i.push(a++,o,a);i.push(o+1,o,a)}}},h$={build:function(t){var e=t.shape,r=e.x,n=e.y,i=e.width,a=e.height,o=t.points;o.length=0,o.push(r,n,r+i,n,r+i,n+a,r,n+a)},triangulate:function(t,e){var r=t.points,n=e.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function Rc(t,e,r){var n=e-t;return t+n*r}function kv(t,e,r,n,i,a,o){o===void 0&&(o=[]);for(var s=20,c=o,l=0,u=0,f=0,h=0,d=0,p=0,v=0,y=0;v<=s;++v)y=v/s,l=Rc(t,r,y),u=Rc(e,n,y),f=Rc(r,i,y),h=Rc(n,a,y),d=Rc(l,f,y),p=Rc(u,h,y),!(v===0&&c[c.length-2]===d&&c[c.length-1]===p)&&c.push(d,p);return c}var d$={build:function(t){if(Tf.nextRoundedRectBehavior){vp.build(t);return}var e=t.shape,r=t.points,n=e.x,i=e.y,a=e.width,o=e.height,s=Math.max(0,Math.min(e.radius,Math.min(a,o)/2));r.length=0,s?(kv(n,i+s,n,i,n+s,i,r),kv(n+a-s,i,n+a,i,n+a,i+s,r),kv(n+a,i+o-s,n+a,i+o,n+a-s,i+o,r),kv(n+s,i+o,n,i+o,n,i+o-s,r)):r.push(n,i,n+a,i,n+a,i+o,n,i+o)},triangulate:function(t,e){if(Tf.nextRoundedRectBehavior){vp.triangulate(t,e);return}for(var r=t.points,n=e.points,i=e.indices,a=n.length/2,o=q2(r,null,2),s=0,c=o.length;s<c;s+=3)i.push(o[s]+a),i.push(o[s+1]+a),i.push(o[s+2]+a);for(var s=0,c=r.length;s<c;s++)n.push(r[s],r[++s])}};function HB(t,e,r,n,i,a,o,s){var c=t-r*i,l=e-n*i,u=t+r*a,f=e+n*a,h,d;o?(h=n,d=-r):(h=-n,d=r);var p=c+h,v=l+d,y=u+h,m=f+d;return s.push(p,v),s.push(y,m),2}function eu(t,e,r,n,i,a,o,s){var c=r-t,l=n-e,u=Math.atan2(c,l),f=Math.atan2(i-t,a-e);s&&u<f?u+=Math.PI*2:!s&&u>f&&(f+=Math.PI*2);var h=u,d=f-u,p=Math.abs(d),v=Math.sqrt(c*c+l*l),y=(15*p*Math.sqrt(v)/Math.PI>>0)+1,m=d/y;if(h+=m,s){o.push(t,e),o.push(r,n);for(var g=1,x=h;g<y;g++,x+=m)o.push(t,e),o.push(t+Math.sin(x)*v,e+Math.cos(x)*v);o.push(t,e),o.push(i,a)}else{o.push(r,n),o.push(t,e);for(var g=1,x=h;g<y;g++,x+=m)o.push(t+Math.sin(x)*v,e+Math.cos(x)*v),o.push(t,e);o.push(i,a),o.push(t,e)}return y*2}function YOe(t,e){var r=t.shape,n=t.points||r.points.slice(),i=e.closePointEps;if(n.length!==0){var a=t.lineStyle,o=new Dt(n[0],n[1]),s=new Dt(n[n.length-2],n[n.length-1]),c=r.type!==En.POLY||r.closeStroke,l=Math.abs(o.x-s.x)<i&&Math.abs(o.y-s.y)<i;if(c){n=n.slice(),l&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var u=(o.x+s.x)*.5,f=(s.y+o.y)*.5;n.unshift(u,f),n.push(u,f)}var h=e.points,d=n.length/2,p=n.length,v=h.length/2,y=a.width/2,m=y*y,g=a.miterLimit*a.miterLimit,x=n[0],b=n[1],S=n[2],w=n[3],A=0,C=0,O=-(b-w),P=x-S,I=0,R=0,F=Math.sqrt(O*O+P*P);O/=F,P/=F,O*=y,P*=y;var D=a.alignment,L=(1-D)*2,U=D*2;c||(a.cap===Ss.ROUND?p+=eu(x-O*(L-U)*.5,b-P*(L-U)*.5,x-O*L,b-P*L,x+O*U,b+P*U,h,!0)+2:a.cap===Ss.SQUARE&&(p+=HB(x,b,O,P,L,U,!0,h))),h.push(x-O*L,b-P*L),h.push(x+O*U,b+P*U);for(var Y=1;Y<d-1;++Y){x=n[(Y-1)*2],b=n[(Y-1)*2+1],S=n[Y*2],w=n[Y*2+1],A=n[(Y+1)*2],C=n[(Y+1)*2+1],O=-(b-w),P=x-S,F=Math.sqrt(O*O+P*P),O/=F,P/=F,O*=y,P*=y,I=-(w-C),R=S-A,F=Math.sqrt(I*I+R*R),I/=F,R/=F,I*=y,R*=y;var ee=S-x,J=b-w,X=S-A,M=C-w,V=ee*X+J*M,$=J*X-M*ee,j=$<0;if(Math.abs($)<.001*Math.abs(V)){h.push(S-O*L,w-P*L),h.push(S+O*U,w+P*U),V>=0&&(a.join===Do.ROUND?p+=eu(S,w,S-O*L,w-P*L,S-I*L,w-R*L,h,!1)+4:p+=2,h.push(S-I*U,w-R*U),h.push(S+I*L,w+R*L));continue}var te=(-O+x)*(-P+w)-(-O+S)*(-P+b),ie=(-I+A)*(-R+w)-(-I+S)*(-R+C),de=(ee*ie-X*te)/$,he=(M*te-J*ie)/$,Ee=(de-S)*(de-S)+(he-w)*(he-w),Oe=S+(de-S)*L,ye=w+(he-w)*L,Ae=S-(de-S)*U,_e=w-(he-w)*U,we=Math.min(ee*ee+J*J,X*X+M*M),$e=j?L:U,Xe=we+$e*$e*m,ke=Ee<=Xe;ke?a.join===Do.BEVEL||Ee/m>g?(j?(h.push(Oe,ye),h.push(S+O*U,w+P*U),h.push(Oe,ye),h.push(S+I*U,w+R*U)):(h.push(S-O*L,w-P*L),h.push(Ae,_e),h.push(S-I*L,w-R*L),h.push(Ae,_e)),p+=2):a.join===Do.ROUND?j?(h.push(Oe,ye),h.push(S+O*U,w+P*U),p+=eu(S,w,S+O*U,w+P*U,S+I*U,w+R*U,h,!0)+4,h.push(Oe,ye),h.push(S+I*U,w+R*U)):(h.push(S-O*L,w-P*L),h.push(Ae,_e),p+=eu(S,w,S-O*L,w-P*L,S-I*L,w-R*L,h,!1)+4,h.push(S-I*L,w-R*L),h.push(Ae,_e)):(h.push(Oe,ye),h.push(Ae,_e)):(h.push(S-O*L,w-P*L),h.push(S+O*U,w+P*U),a.join===Do.ROUND?j?p+=eu(S,w,S+O*U,w+P*U,S+I*U,w+R*U,h,!0)+2:p+=eu(S,w,S-O*L,w-P*L,S-I*L,w-R*L,h,!1)+2:a.join===Do.MITER&&Ee/m<=g&&(j?(h.push(Ae,_e),h.push(Ae,_e)):(h.push(Oe,ye),h.push(Oe,ye)),p+=2),h.push(S-I*L,w-R*L),h.push(S+I*U,w+R*U),p+=2)}x=n[(d-2)*2],b=n[(d-2)*2+1],S=n[(d-1)*2],w=n[(d-1)*2+1],O=-(b-w),P=x-S,F=Math.sqrt(O*O+P*P),O/=F,P/=F,O*=y,P*=y,h.push(S-O*L,w-P*L),h.push(S+O*U,w+P*U),c||(a.cap===Ss.ROUND?p+=eu(S-O*(L-U)*.5,w-P*(L-U)*.5,S-O*L,w-P*L,S+O*U,w+P*U,h,!1)+2:a.cap===Ss.SQUARE&&(p+=HB(S,w,O,P,L,U,!1,h)));for(var at=e.indices,vt=Cf.epsilon*Cf.epsilon,Y=v;Y<p+v-2;++Y)x=h[Y*2],b=h[Y*2+1],S=h[(Y+1)*2],w=h[(Y+1)*2+1],A=h[(Y+2)*2],C=h[(Y+2)*2+1],!(Math.abs(x*(w-C)+S*(C-b)+A*(b-w))<vt)&&at.push(Y,Y+1,Y+2)}}function qOe(t,e){var r=0,n=t.shape,i=t.points||n.points,a=n.type!==En.POLY||n.closeStroke;if(i.length!==0){var o=e.points,s=e.indices,c=i.length/2,l=o.length/2,u=l;for(o.push(i[0],i[1]),r=1;r<c;r++)o.push(i[r*2],i[r*2+1]),s.push(u,u+1),u++;a&&s.push(u,l)}}function Qw(t,e){t.lineStyle.native?qOe(t,e):YOe(t,e)}var Jw=function(){function t(){}return t.curveTo=function(e,r,n,i,a,o){var s=o[o.length-2],c=o[o.length-1],l=c-r,u=s-e,f=i-r,h=n-e,d=Math.abs(l*h-u*f);if(d<1e-8||a===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;var p=l*l+u*u,v=f*f+h*h,y=l*f+u*h,m=a*Math.sqrt(p)/d,g=a*Math.sqrt(v)/d,x=m*y/p,b=g*y/v,S=m*h+g*u,w=m*f+g*l,A=u*(g+x),C=l*(g+x),O=h*(m+b),P=f*(m+b),I=Math.atan2(C-w,A-S),R=Math.atan2(P-w,O-S);return{cx:S+e,cy:w+r,radius:a,startAngle:I,endAngle:R,anticlockwise:u*f>h*l}},t.arc=function(e,r,n,i,a,o,s,c,l){for(var u=s-o,f=Cf._segmentsCount(Math.abs(u)*a,Math.ceil(Math.abs(u)/fp)*40),h=u/(f*2),d=h*2,p=Math.cos(h),v=Math.sin(h),y=f-1,m=y%1/y,g=0;g<=y;++g){var x=g+m*g,b=h+o+d*x,S=Math.cos(b),w=-Math.sin(b);l.push((p*S+v*w)*a+n,(p*-w+v*S)*a+i)}},t}(),p$=function(){function t(){}return t.curveLength=function(e,r,n,i,a,o,s,c){for(var l=10,u=0,f=0,h=0,d=0,p=0,v=0,y=0,m=0,g=0,x=0,b=0,S=e,w=r,A=1;A<=l;++A)f=A/l,h=f*f,d=h*f,p=1-f,v=p*p,y=v*p,m=y*e+3*v*f*n+3*p*h*a+d*s,g=y*r+3*v*f*i+3*p*h*o+d*c,x=S-m,b=w-g,S=m,w=g,u+=Math.sqrt(x*x+b*b);return u},t.curveTo=function(e,r,n,i,a,o,s){var c=s[s.length-2],l=s[s.length-1];s.length-=2;var u=Cf._segmentsCount(t.curveLength(c,l,e,r,n,i,a,o)),f=0,h=0,d=0,p=0,v=0;s.push(c,l);for(var y=1,m=0;y<=u;++y)m=y/u,f=1-m,h=f*f,d=h*f,p=m*m,v=p*m,s.push(d*c+3*h*m*e+3*f*p*n+v*a,d*l+3*h*m*r+3*f*p*i+v*o)},t}(),v$=function(){function t(){}return t.curveLength=function(e,r,n,i,a,o){var s=e-2*n+a,c=r-2*i+o,l=2*n-2*e,u=2*i-2*r,f=4*(s*s+c*c),h=4*(s*l+c*u),d=l*l+u*u,p=2*Math.sqrt(f+h+d),v=Math.sqrt(f),y=2*f*v,m=2*Math.sqrt(d),g=h/v;return(y*p+v*h*(p-m)+(4*d*f-h*h)*Math.log((2*v+g+p)/(g+m)))/(4*y)},t.curveTo=function(e,r,n,i,a){for(var o=a[a.length-2],s=a[a.length-1],c=Cf._segmentsCount(t.curveLength(o,s,e,r,n,i)),l=0,u=0,f=1;f<=c;++f){var h=f/c;l=o+(e-o)*h,u=s+(r-s)*h,a.push(l+(e+(n-e)*h-l)*h,u+(r+(i-r)*h-u)*h)}},t}(),g$=function(){function t(){this.reset()}return t.prototype.begin=function(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n},t.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),tu,gg=(tu={},tu[En.POLY]=jO,tu[En.CIRC]=vp,tu[En.ELIP]=vp,tu[En.RECT]=h$,tu[En.RREC]=d$,tu),eA=[],ld=[],tA=function(){function t(e,r,n,i){r===void 0&&(r=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Ic=new Dt,m$=function(t){UO(e,t);function e(){var r=t.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new hp,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),ld.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),eA.push(n)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,n,i,a){n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=null);var o=new tA(r,n,i,a);return this.graphicsData.push(o),this.dirty++,this},e.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new tA(r,null,null,n),a=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=a.lineStyle,a.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var a=n[i];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(r,Ic):Ic.copyFrom(r),a.shape.contains(Ic.x,Ic.y))){var o=!1;if(a.holes)for(var s=0;s<a.holes.length;s++){var c=a.holes[s];if(c.shape.contains(Ic.x,Ic.y)){o=!0;break}}if(!o)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,i=null,a=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],a=i.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var s=n[o],c=s.fillStyle,l=s.lineStyle,u=gg[s.type];u.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(c.visible||l.visible)&&this.processHoles(s.holes);for(var f=0;f<2;f++){var h=f===0?c:l;if(h.visible){var d=h.texture.baseTexture,p=this.indices.length,v=this.points.length/2;d.wrapMode=uo.REPEAT,f===0?this.processFill(s):this.processLine(s);var y=this.points.length/2-v;y!==0&&(i&&!this._compareStyles(a,h)&&(i.end(p,v),i=null),i||(i=eA.pop()||new g$,i.begin(h,p,v),this.batches.push(i),a=h),this.addUvs(this.points,r,h.texture,v,y,h.matrix))}}}var m=this.indices.length,g=this.points.length/2;if(i&&i.end(m,g),this.batches.length===0){this.batchable=!0;return}var x=g>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&x===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=x?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],a=i.fillStyle,o=i.lineStyle;if(a&&!a.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var a=r[n],o=0;o<a.size;o++){var s=a.start+o;this.indicesUint16[s]=this.indicesUint16[s]-a.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++zt._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),ld.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,a=this.textureIds,o=ld.pop();o||(o=new dm,o.texArray=new pm),o.texArray.count=0,o.start=0,o.size=0,o.type=fa.TRIANGLES;var s=0,c=null,l=0,u=!1,f=fa.TRIANGLES,h=0;this.drawCalls.push(o);for(var n=0;n<this.batches.length;n++){var d=this.batches[n],p=8,v=d.style,y=v.texture.baseTexture;u!==!!v.native&&(u=!!v.native,f=u?fa.LINES:fa.TRIANGLES,c=null,s=p,r++),c!==y&&(c=y,y._batchEnabled!==r&&(s===p&&(r++,s=0,o.size>0&&(o=ld.pop(),o||(o=new dm,o.texArray=new pm),this.drawCalls.push(o)),o.start=h,o.size=0,o.texArray.count=0,o.type=f),y.touched=1,y._batchEnabled=r,y._batchLocation=s,y.wrapMode=uo.REPEAT,o.texArray.elements[o.texArray.count++]=y,s++)),o.size+=d.size,h+=d.size,l=y._batchLocation,this.addColors(i,v.color,v.alpha,d.attribSize,d.attribStart),this.addTextureIds(a,l,d.attribSize,d.attribStart)}zt._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,a=this.textureIds,o=new ArrayBuffer(r.length*3*4),s=new Float32Array(o),c=new Uint32Array(o),l=0,u=0;u<r.length/2;u++)s[l++]=r[u*2],s[l++]=r[u*2+1],s[l++]=n[u*2],s[l++]=n[u*2+1],c[l++]=i[u],s[l++]=a[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)jO.triangulate(r,this);else{var n=gg[r.type];n.triangulate(r,this)}},e.prototype.processLine=function(r){Qw(r,this);for(var n=0;n<r.holes.length;n++)Qw(r.holes[n],this)},e.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n],a=gg[i.type];a.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var a=r[i*2],o=r[i*2+1];r[i*2]=n.a*a+n.c*o+n.tx,r[i*2+1]=n.b*a+n.d*o+n.ty}},e.prototype.addColors=function(r,n,i,a,o){o===void 0&&(o=0);var s=(n>>16)+(n&65280)+((n&255)<<16),c=r_(s,i);r.length=Math.max(r.length,o+a);for(var l=0;l<a;l++)r[o+l]=c},e.prototype.addTextureIds=function(r,n,i,a){a===void 0&&(a=0),r.length=Math.max(r.length,a+i);for(var o=0;o<i;o++)r[a+o]=n},e.prototype.addUvs=function(r,n,i,a,o,s){s===void 0&&(s=null);for(var c=0,l=n.length,u=i.frame;c<o;){var f=r[(a+c)*2],h=r[(a+c)*2+1];if(s){var d=s.a*f+s.c*h+s.tx;h=s.b*f+s.d*h+s.ty,f=d}c++,n.push(f/u.width,h/u.height)}var p=i.baseTexture;(u.width<p.width||u.height<p.height)&&this.adjustUvs(n,i,l,o)},e.prototype.adjustUvs=function(r,n,i,a){for(var o=n.baseTexture,s=1e-6,c=i+a*2,l=n.frame,u=l.width/o.width,f=l.height/o.height,h=l.x/l.width,d=l.y/l.height,p=Math.floor(r[i]+s),v=Math.floor(r[i+1]+s),y=i+2;y<c;y+=2)p=Math.min(p,Math.floor(r[y]+s)),v=Math.min(v,Math.floor(r[y+1]+s));h-=p,d-=v;for(var y=i;y<c;y+=2)r[y]=(r[y]+h)*u,r[y+1]=(r[y+1]+d)*f},e.BATCHABLE_SIZE=100,e}(MO),y$=function(t){UO(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=Ss.BUTT,r.join=Do.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(NO),KOe=new Float32Array(3),BS={},Tf=function(t){UO(e,t);function e(r){r===void 0&&(r=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new NO,n._lineStyle=new y$,n._matrix=null,n._holeMode=!1,n.state=Nl.for2d(),n._geometry=r||new m$,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=ze.NORMAL,n}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,n,i,a,o){return r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=.5),o===void 0&&(o=!1),typeof r=="number"&&(r={width:r,color:n,alpha:i,alignment:a,native:o}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:pt.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ss.BUTT,join:Do.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new cf,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new cf,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},e.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,a=i[i.length-2],o=i[i.length-1];return(a!==r||o!==n)&&i.push(r,n),this},e.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},e.prototype.quadraticCurveTo=function(r,n,i,a){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),v$.curveTo(r,n,i,a,o),this},e.prototype.bezierCurveTo=function(r,n,i,a,o,s){return this._initCurve(),p$.curveTo(r,n,i,a,o,s,this.currentPath.points),this},e.prototype.arcTo=function(r,n,i,a,o){this._initCurve(r,n);var s=this.currentPath.points,c=Jw.curveTo(r,n,i,a,o,s);if(c){var l=c.cx,u=c.cy,f=c.radius,h=c.startAngle,d=c.endAngle,p=c.anticlockwise;this.arc(l,u,f,h,d,p)}return this},e.prototype.arc=function(r,n,i,a,o,s){if(s===void 0&&(s=!1),a===o)return this;!s&&o<=a?o+=fp:s&&a<=o&&(a+=fp);var c=o-a;if(c===0)return this;var l=r+Math.cos(a)*i,u=n+Math.sin(a)*i,f=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var d=Math.abs(h[h.length-2]-l),p=Math.abs(h[h.length-1]-u);d<f&&p<f||h.push(l,u)}else this.moveTo(l,u),h=this.currentPath.points;return Jw.arc(l,u,r,n,i,a,o,s,h),this},e.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:pt.WHITE,color:r,alpha:n})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:pt.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,n,i,a){return this.drawShape(new Mt(r,n,i,a))},e.prototype.drawRoundedRect=function(r,n,i,a,o){return this.drawShape(new dj(r,n,i,a,o))},e.prototype.drawCircle=function(r,n,i){return this.drawShape(new fj(r,n,i))},e.prototype.drawEllipse=function(r,n,i,a){return this.drawShape(new hj(r,n,i,a))},e.prototype.drawPolygon=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var a,o=!0,s=n[0];s.points?(o=s.closeStroke,a=s.points):Array.isArray(n[0])?a=n[0]:a=n;var c=new cf(a);return c.closeStroke=o,this.drawShape(c),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===En.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var a=0;a<i;a++){var o=r.batches[a],s=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(r.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(r.indicesUint16.buffer,o.start*2,o.size),f={vertexData:c,blendMode:n,indices:u,uvs:l,_batchRGB:Tn(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[a]=f}},e.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var a=this.batches[n];a.worldAlpha=this.worldAlpha*a.alpha,r.plugins[this.pluginName].render(a)}}},e.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,a=this.tint,o=this.worldAlpha,s=n.uniforms,c=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(a>>16&255)/255*o,s.tint[1]=(a>>8&255)/255*o,s.tint[2]=(a&255)/255*o,s.tint[3]=o,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var l=0,u=c.length;l<u;l++)this._renderDrawCallDirect(r,i.drawCalls[l])},e.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,a=n.type,o=n.size,s=n.start,c=i.count,l=0;l<c;l++)r.texture.bind(i.elements[l],l);r.geometry.draw(a,o,s)},e.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!BS[i]){for(var a=r.plugins[i].MAX_TEXTURES,o=new Int32Array(a),s=0;s<a;s++)o[s]=s;var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new zr,default:xl.from({uSamplers:o},!0)},l=r.plugins[i]._shader.program;BS[i]=new Cs(l,c)}n=BS[i]}return n},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var n=r.bounds,i=n.minX,a=n.minY,o=n.maxX,s=n.maxY;this._bounds.addFrame(this.transform,i,a,o,s)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=Tn(this.tint,KOe),n=0;n<this.batches.length;n++){var i=this.batches[n],a=i._batchRGB,o=r[0]*a[0]*255,s=r[1]*a[1]*255,c=r[2]*a[2]*255,l=(o<<16)+(s<<8)+(c|0);i._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,a=n.b,o=n.c,s=n.d,c=n.tx,l=n.ty,u=this._geometry.points,f=this.vertexData,h=0,d=0;d<u.length;d+=2){var p=u[d],v=u[d+1];f[h++]=i*p+o*v+c,f[h++]=s*v+a*p+l}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new Dt,e}(Cn),ZOe={buildPoly:jO,buildCircle:vp,buildRectangle:h$,buildRoundedRectangle:d$,buildLine:Qw,ArcUtils:Jw,BezierUtils:p$,QuadraticUtils:v$,BatchPart:g$,FILL_COMMANDS:gg,BATCH_POOL:eA,DRAW_CALL_POOL:ld};/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rA=function(t,e){return rA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},rA(t,e)};function QOe(t,e){rA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yh=new Dt,JOe=new Uint16Array([0,1,2,0,2,3]),ca=function(t){QOe(e,t);function e(r){var n=t.call(this)||this;return n._anchor=new al(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ze.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||pt.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=JOe,n.pluginName="batch",n.isSprite=!0,n._roundPixels=Ve.ROUND_PIXELS,n}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Su(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Su(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,a=n.b,o=n.c,s=n.d,c=n.tx,l=n.ty,u=this.vertexData,f=r.trim,h=r.orig,d=this._anchor,p=0,v=0,y=0,m=0;if(f?(v=f.x-d._x*h.width,p=v+f.width,m=f.y-d._y*h.height,y=m+f.height):(v=-d._x*h.width,p=v+h.width,m=-d._y*h.height,y=m+h.height),u[0]=i*v+o*m+c,u[1]=s*m+a*v+l,u[2]=i*p+o*m+c,u[3]=s*m+a*p+l,u[4]=i*p+o*y+c,u[5]=s*y+a*p+l,u[6]=i*v+o*y+c,u[7]=s*y+a*v+l,this._roundPixels)for(var g=Ve.RESOLUTION,x=0;x<u.length;++x)u[x]=Math.round((u[x]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,a=this._anchor,o=this.transform.worldTransform,s=o.a,c=o.b,l=o.c,u=o.d,f=o.tx,h=o.ty,d=-a._x*i.width,p=d+i.width,v=-a._y*i.height,y=v+i.height;n[0]=s*d+l*v+f,n[1]=u*v+c*d+h,n[2]=s*p+l*v+f,n[3]=u*v+c*p+h,n[4]=s*p+l*y+f,n[5]=u*y+c*p+h,n[6]=s*d+l*y+f,n[7]=u*y+c*d+h},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new hp),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Mt),r=this._localBoundsRect),this._localBounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,Yh);var n=this._texture.orig.width,i=this._texture.orig.height,a=-n*this.anchor.x,o=0;return Yh.x>=a&&Yh.x<a+n&&(o=-i*this.anchor.y,Yh.y>=o&&Yh.y<o+i)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var i=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(r,n){var i=r instanceof pt?r:pt.from(r,n);return new e(i)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=Su(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=Su(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||pt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Cn);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nA=function(t,e){return nA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},nA(t,e)};function ePe(t,e){nA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Of;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Of||(Of={}));var NS={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Of.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},tPe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Vu=function(){function t(e){this.styleID=0,this.reset(),jS(this,e,e)}return t.prototype.clone=function(){var e={};return jS(e,this,NS),new t(e)},t.prototype.reset=function(){jS(this,NS,NS)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=US(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=US(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){rPe(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=US(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&tPe.indexOf(i)<0&&(i='"'+i+'"'),r[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},t}();function XB(t){return typeof t=="number"?nO(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function US(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=XB(t[e]);return t}else return XB(t)}function rPe(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function jS(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var Dv={willReadFrequently:!0},vo=function(){function t(e,r,n,i,a,o,s,c,l){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=a,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=c,this.fontProperties=l}return t.measureText=function(e,r,n,i){i===void 0&&(i=t._canvas),n=n??r.wordWrap;var a=r.toFontString(),o=t.measureFont(a);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);var s=i.getContext("2d",Dv);s.font=a;for(var c=n?t.wordWrap(e,r,i):e,l=c.split(/(?:\r\n|\r|\n)/),u=new Array(l.length),f=0,h=0;h<l.length;h++){var d=s.measureText(l[h]).width+(l[h].length-1)*r.letterSpacing;u[h]=d,f=Math.max(f,d)}var p=f+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);var v=r.lineHeight||o.fontSize+r.strokeThickness,y=Math.max(v,o.fontSize+r.strokeThickness)+(l.length-1)*(v+r.leading);return r.dropShadow&&(y+=r.dropShadowDistance),new t(e,r,p,y,l,u,v+r.leading,f,o)},t.wordWrap=function(e,r,n){n===void 0&&(n=t._canvas);for(var i=n.getContext("2d",Dv),a=0,o="",s="",c=Object.create(null),l=r.letterSpacing,u=r.whiteSpace,f=t.collapseSpaces(u),h=t.collapseNewlines(u),d=!f,p=r.wordWrapWidth+l,v=t.tokenize(e),y=0;y<v.length;y++){var m=v[y];if(t.isNewline(m)){if(!h){s+=t.addLine(o),d=!f,o="",a=0;continue}m=" "}if(f){var g=t.isBreakingSpace(m),x=t.isBreakingSpace(o[o.length-1]);if(g&&x)continue}var b=t.getFromCache(m,l,c,i);if(b>p)if(o!==""&&(s+=t.addLine(o),o="",a=0),t.canBreakWords(m,r.breakWords))for(var S=t.wordWrapSplit(m),w=0;w<S.length;w++){for(var A=S[w],C=1;S[w+C];){var O=S[w+C],P=A[A.length-1];if(!t.canBreakChars(P,O,m,w,r.breakWords))A+=O;else break;C++}w+=A.length-1;var I=t.getFromCache(A,l,c,i);I+a>p&&(s+=t.addLine(o),d=!1,o="",a=0),o+=A,a+=I}else{o.length>0&&(s+=t.addLine(o),o="",a=0);var R=y===v.length-1;s+=t.addLine(m,!R),d=!1,o="",a=0}else b+a>p&&(d=!1,s+=t.addLine(o),o="",a=0),(o.length>0||!t.isBreakingSpace(m)||d)&&(o+=m,a+=b)}return s+=t.addLine(o,!1),s},t.addLine=function(e,r){return r===void 0&&(r=!0),e=t.trimRight(e),e=r?e+`
`:e,e},t.getFromCache=function(e,r,n,i){var a=n[e];if(typeof a!="number"){var o=e.length*r;a=i.measureText(e).width+o,n[e]=a}return a},t.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},t.collapseNewlines=function(e){return e==="normal"},t.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return typeof e!="string"?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return typeof e!="string"?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],n="";if(typeof e!="string")return r;for(var i=0;i<e.length;i++){var a=e[i],o=e[i+1];if(t.isBreakingSpace(a,o)||t.isNewline(a)){n!==""&&(r.push(n),n=""),r.push(a);continue}n+=a}return n!==""&&r.push(n),r},t.canBreakWords=function(e,r){return r},t.canBreakChars=function(e,r,n,i,a){return!0},t.wordWrapSplit=function(e){return e.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},n=t._canvas,i=t._context;i.font=e;var a=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),c=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,n.width=o,n.height=c,i.fillStyle="#f00",i.fillRect(0,0,o,c),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var l=i.getImageData(0,0,o,c).data,u=l.length,f=o*4,h=0,d=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<f;v+=4)if(l[d+v]!==255){p=!0;break}if(!p)d+=f;else break}for(r.ascent=s-h,d=u-f,p=!1,h=c;h>s;--h){for(var v=0;v<f;v+=4)if(l[d+v]!==255){p=!0;break}if(!p)d-=f;else break}return r.descent=h-s,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){e===void 0&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",Dv);if(n&&n.measureText)return t.__canvas=r,r;e=Ve.ADAPTER.createCanvas()}catch{e=Ve.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d",Dv)),t.__context},enumerable:!1,configurable:!0}),t}();vo._fonts={};vo.METRICS_STRING="|ÉqÅ";vo.BASELINE_SYMBOL="M";vo.BASELINE_MULTIPLIER=1.4;vo.HEIGHT_MULTIPLIER=2;vo._newlines=[10,13];vo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var nPe={texture:!0,children:!1,baseTexture:!0},$O=function(t){ePe(e,t);function e(r,n,i){var a=this,o=!1;i||(i=Ve.ADAPTER.createCanvas(),o=!0),i.width=3,i.height=3;var s=pt.from(i);return s.orig=new Mt,s.trim=new Mt,a=t.call(this,s)||this,a._ownCanvas=o,a.canvas=i,a.context=i.getContext("2d",{willReadFrequently:!0}),a._resolution=Ve.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=r,a.style=n,a.localStyleID=-1,a}return e.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var i=this.context,a=vo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=a.width,s=a.height,c=a.lines,l=a.lineHeight,u=a.lineWidths,f=a.maxLineWidth,h=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var d,p,v=n.dropShadow?2:1,y=0;y<v;++y){var m=n.dropShadow&&y===0,g=m?Math.ceil(Math.max(1,s)+n.padding*2):0,x=g*this._resolution;if(m){i.fillStyle="black",i.strokeStyle="black";var b=n.dropShadowColor,S=Tn(typeof b=="number"?b:iO(b)),w=n.dropShadowBlur*this._resolution,A=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+S[0]*255+","+S[1]*255+","+S[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=w,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*A,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*A+x}else i.fillStyle=this._generateFillStyle(n,c,a),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var C=(l-h.fontSize)/2;(!e.nextLineHeightBehavior||l-h.fontSize<0)&&(C=0);for(var O=0;O<c.length;O++)d=n.strokeThickness/2,p=n.strokeThickness/2+O*l+h.ascent+C,n.align==="right"?d+=f-u[O]:n.align==="center"&&(d+=(f-u[O])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(c[O],d+n.padding,p+n.padding-g,!0),n.fill&&this.drawLetterSpacing(c[O],d+n.padding,p+n.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,n,i,a){a===void 0&&(a=!1);var o=this._style,s=o.letterSpacing,c=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||c){c&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),a?this.context.strokeText(r,n,i):this.context.fillText(r,n,i);return}for(var l=n,u=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,h=0,d=0;d<u.length;++d){var p=u[d];a?this.context.strokeText(p,l,i):this.context.fillText(p,l,i);for(var v="",y=d+1;y<u.length;++y)v+=u[y];h=this.context.measureText(v).width,l+=f-h+s,f=h}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=sj(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,a=this._style,o=a.trim?0:a.padding,s=i.baseTexture;i.trim.width=i._frame.width=r.width/this._resolution,i.trim.height=i._frame.height=r.height/this._resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),t.prototype.getBounds.call(this,r,n)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),t.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,n,i){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,s=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,l=this.canvas.width/this._resolution-s-c*2,u=this.canvas.height/this._resolution-s-c*2,f=a.slice(),h=r.fillGradientStops.slice();if(!h.length)for(var d=f.length+1,p=1;p<d;++p)h.push(p/d);if(f.unshift(a[0]),h.unshift(0),f.push(a[a.length-1]),h.push(1),r.fillGradientType===Of.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,c,l/2,u+c);for(var v=i.fontProperties.fontSize+r.strokeThickness,p=0;p<n.length;p++){var y=i.lineHeight*(p-1)+v,m=i.lineHeight*p,g=m;p>0&&y>m&&(g=(m+y)/2);var x=m+v,b=i.lineHeight*(p+1),S=x;p+1<n.length&&b<x&&(S=(x+b)/2);for(var w=(S-g)/u,A=0;A<f.length;A++){var C=0;typeof h[A]=="number"?C=h[A]:C=A/f.length;var O=Math.min(1,Math.max(0,g/u+C*w));O=Number(O.toFixed(5)),o.addColorStop(O,f[A])}}}else{o=this.context.createLinearGradient(c,u/2,l+c,u/2);for(var P=f.length+1,I=1,p=0;p<f.length;p++){var R=void 0;typeof h[p]=="number"?R=h[p]:R=I/P,o.addColorStop(R,f[p]),I++}}return o},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},nPe,r),t.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=Su(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=Su(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Vu?this._style=r:this._style=new Vu(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(ca);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ve.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iA=function(t,e){return iA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},iA(t,e)};function iPe(t,e){iA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _$=function(){function t(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function aPe(t,e){var r=!1;if(t&&t._textures&&t._textures.length){for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof pt){var i=t._textures[n].baseTexture;e.indexOf(i)===-1&&(e.push(i),r=!0)}}return r}function oPe(t,e){if(t.baseTexture instanceof zt){var r=t.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function sPe(t,e){if(t._texture&&t._texture instanceof pt){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function lPe(t,e){return e instanceof $O?(e.updateText(!0),!0):!1}function uPe(t,e){if(e instanceof Vu){var r=e.toFontString();return vo.measureFont(r),!0}return!1}function cPe(t,e){if(t instanceof $O){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function fPe(t,e){return t instanceof Vu?(e.indexOf(t)===-1&&e.push(t),!0):!1}var x$=function(){function t(e){var r=this;this.limiter=new _$(Ve.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(cPe),this.registerFindHook(fPe),this.registerFindHook(aPe),this.registerFindHook(oPe),this.registerFindHook(sPe),this.registerUploadHook(lPe),this.registerUploadHook(uPe)}return t.prototype.upload=function(e,r){var n=this;return typeof e=="function"&&(r=e,e=null),r&&Fi("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){e&&n.add(e);var a=function(){r==null||r(),i()};n.queue.length?(n.completes.push(a),n.ticking||(n.ticking=!0,$r.system.addOnce(n.tick,n,ho.UTILITY))):a()})},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)$r.system.addOnce(this.tick,this,ho.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var n=0,i=a.length;n<i;n++)a[n]()}},t.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},t.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},t.prototype.add=function(e){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof Cn)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},t.prototype.destroy=function(){this.ticking&&$r.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function b$(t,e){return e instanceof zt?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function hPe(t,e){if(!(e instanceof Tf))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var a=n[i].style.texture;a&&b$(t,a.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function dPe(t,e){return t instanceof Tf?(e.push(t),!0):!1}var S$=function(t){iPe(e,t);function e(r){var n=t.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(dPe),n.registerUploadHook(b$),n.registerUploadHook(hPe),n}return e.extension={name:"prepare",type:hr.RendererPlugin},e}(x$),pPe=function(){function t(e){this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var E$=function(){function t(e,r,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=e instanceof pt?e:null,this.baseTexture=e instanceof zt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,n=cp(e,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){var r=this;return e&&Fi("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){r._callback=function(i){e==null||e(i),n(i)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE;r-e<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],a=this._frames[i],o=a.frame;if(o){var s=null,c=null,l=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,u=new Mt(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);a.rotated?s=new Mt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):s=new Mt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(c=new Mt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new pt(this.baseTexture,s,u,c,a.rotated?2:0,a.anchor),pt.addToCache(this.textures[i],i)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var n=0;n<e[r].length;n++){var i=e[r][n];this.animations[r].push(this.textures[i])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),w$=function(){function t(){}return t.use=function(e,r){var n,i,a=this,o=e.name+"_image";if(!e.data||e.type!==vr.TYPE.JSON||!e.data.frames||a.resources[o]){r();return}var s=(i=(n=e.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(s))for(var c=function(p){if(typeof p!="string")return"continue";var v=p.replace(".json",""),y=bu.resolve(e.url.replace(a.baseUrl,""),p);if(a.resources[v]||Object.values(a.resources).some(function(g){return bu.format(bu.parse(g.url))===y}))return"continue";var m={crossOrigin:e.crossOrigin,loadType:vr.LOAD_TYPE.XHR,xhrType:vr.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};a.add(v,y,m)},l=0,u=s;l<u.length;l++){var f=u[l];c(f)}var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,a.baseUrl);a.add(o,d,h,function(v){if(v.error){r(v.error);return}var y=new E$(v.texture,e.data,e.url);y.parse().then(function(){e.spritesheet=y,e.textures=y.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:bu.resolve(e.url.replace(r,""),e.data.meta.image)},t.extension=hr.Loader,t}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var aA=function(t,e){return aA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},aA(t,e)};function A$(t,e){aA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qh=new Dt,vPe=function(t){A$(e,t);function e(r,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var a=t.call(this,r)||this;return a.tileTransform=new i_,a._width=n,a._height=i,a.uvMatrix=a.texture.uvMatrix||new l_(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,a)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new Mt),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,qh);var n=this._width,i=this._height,a=-n*this.anchor._x;if(qh.x>=a&&qh.x<a+n){var o=-i*this.anchor._y;if(qh.y>=o&&qh.y<o+i)return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,n){var i=r instanceof pt?r:pt.from(r,n);return new e(i,n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e}(ca),gPe=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,YB=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,mPe=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,yPe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,_Pe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Mv=new zr,C$=function(t){A$(e,t);function e(r){var n=t.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new yO,n.state=Nl.for2d(),n}return e.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=Cs.from(YB,gPe,n),this.shader=r.context.webGLVersion>1?Cs.from(yPe,_Pe,n):Cs.from(YB,mPe,n)},e.prototype.render=function(r){var n=this.renderer,i=this.quad,a=i.vertices;a[0]=a[6]=r._width*-r.anchor.x,a[1]=a[3]=r._height*-r.anchor.y,a[2]=a[4]=r._width*(1-r.anchor.x),a[5]=a[7]=r._height*(1-r.anchor.y);var o=r.uvRespectAnchor?r.anchor.x:0,s=r.uvRespectAnchor?r.anchor.y:0;a=i.uvs,a[0]=a[6]=-o,a[1]=a[3]=-s,a[2]=a[4]=1-o,a[5]=a[7]=1-s,i.invalidate();var c=r._texture,l=c.baseTexture,u=l.alphaMode>0,f=r.tileTransform.localTransform,h=r.uvMatrix,d=l.isPowerOfTwo&&c.frame.width===l.width&&c.frame.height===l.height;d&&(l._glTextures[n.CONTEXT_UID]?d=l.wrapMode!==uo.CLAMP:l.wrapMode===uo.CLAMP&&(l.wrapMode=uo.REPEAT));var p=d?this.simpleShader:this.shader,v=c.width,y=c.height,m=r._width,g=r._height;Mv.set(f.a*v/m,f.b*v/g,f.c*y/m,f.d*y/g,f.tx/m,f.ty/g),Mv.invert(),d?Mv.prepend(h.mapCoord):(p.uniforms.uMapCoord=h.mapCoord.toArray(!0),p.uniforms.uClampFrame=h.uClampFrame,p.uniforms.uClampOffset=h.uClampOffset),p.uniforms.uTransform=Mv.toArray(!0),p.uniforms.uColor=sO(r.tint,r.worldAlpha,p.uniforms.uColor,u),p.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),p.uniforms.uSampler=c,n.shader.bind(p),n.geometry.bind(i),this.state.blendMode=oO(r.blendMode,u),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:hr.RendererPlugin},e}(Kp);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oA=function(t,e){return oA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},oA(t,e)};function VO(t,e){oA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var T$=function(){function t(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},t}(),$S=new Dt,qB=new cf,Pf=function(t){VO(e,t);function e(r,n,i,a){a===void 0&&(a=fa.TRIANGLES);var o=t.call(this)||this;return o.geometry=r,o.shader=n,o.state=i||Nl.for2d(),o.drawMode=a,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=Ve.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===fa.TRIANGLES&&n.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var a=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[a]),r.plugins[a].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],i=n.data,a=n._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var o=this.transform.worldTransform,s=o.a,c=o.b,l=o.c,u=o.d,f=o.tx,h=o.ty,d=this.vertexData,p=0;p<d.length/2;p++){var v=i[p*2],y=i[p*2+1];d[p*2]=s*v+l*y+f,d[p*2+1]=c*v+u*y+h}if(this._roundPixels)for(var m=Ve.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*m|0)/m);this.vertexDirty=a}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new T$(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,$S);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=qB.points,a=this.geometry.getIndex().data,o=a.length,s=this.drawMode===4?3:1,c=0;c+2<o;c+=s){var l=a[c]*2,u=a[c+1]*2,f=a[c+2]*2;if(i[0]=n[l],i[1]=n[l+1],i[2]=n[u],i[3]=n[u+1],i[4]=n[f],i[5]=n[f+1],qB.contains($S.x,$S.y))return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Cn),xPe=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,bPe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Rf=function(t){VO(e,t);function e(r,n){var i=this,a={uSampler:r,alpha:1,uTextureMatrix:zr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(a,n.uniforms),i=t.call(this,n.program||ih.from(bPe,xPe),a)||this,i._colorDirty=!1,i.uvMatrix=new l_(r),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;sO(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Cs),Zp=function(t){VO(e,t);function e(r,n,i){var a=t.call(this)||this,o=new hn(r),s=new hn(n,!0),c=new hn(i,!0,!0);return a.addAttribute("aVertexPosition",o,2,!1,ut.FLOAT).addAttribute("aTextureCoord",s,2,!1,ut.FLOAT).addIndex(c),a._updateId=-1,a}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(nh);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sA=function(t,e){return sA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},sA(t,e)};function SPe(t,e){sA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var gp=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),O$=function(){function t(){}return t.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},t.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in r){var a=r[i].match(/^[a-z]+/gm)[0],o=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var c in o){var l=o[c].split("="),u=l[0],f=l[1].replace(/"/gm,""),h=parseFloat(f),d=isNaN(h)?f:h;s[u]=d}n[a].push(s)}var p=new gp;return n.info.forEach(function(v){return p.info.push({face:v.face,size:parseInt(v.size,10)})}),n.common.forEach(function(v){return p.common.push({lineHeight:parseInt(v.lineHeight,10)})}),n.page.forEach(function(v){return p.page.push({id:parseInt(v.id,10),file:v.file})}),n.char.forEach(function(v){return p.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),n.kerning.forEach(function(v){return p.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),n.distanceField.forEach(function(v){return p.distanceField.push({distanceRange:parseInt(v.distanceRange,10),fieldType:v.fieldType})}),p},t}(),mm=function(){function t(){}return t.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(e){for(var r=new gp,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),s=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField"),l=0;l<n.length;l++)r.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var l=0;l<i.length;l++)r.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(var l=0;l<a.length;l++)r.page.push({id:parseInt(a[l].getAttribute("id"),10)||0,file:a[l].getAttribute("file")});for(var l=0;l<o.length;l++){var u=o[l];r.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var l=0;l<s.length;l++)r.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(var l=0;l<c.length;l++)r.distanceField.push({fieldType:c[l].getAttribute("fieldType"),distanceRange:parseInt(c[l].getAttribute("distanceRange"),10)});return r},t}(),P$=function(){function t(){}return t.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return mm.test(r)}return!1},t.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return mm.parse(r)},t}(),VS=[O$,mm,P$];function GO(t){for(var e=0;e<VS.length;e++)if(VS[e].test(t))return VS[e];return null}function EPe(t,e,r,n,i,a){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,c=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=t.width/n-c-l*2,f=t.height/n-c-l*2,h=o.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var p=h.length+1,v=1;v<p;++v)d.push(v/p);if(h.unshift(o[0]),d.unshift(0),h.push(o[o.length-1]),d.push(1),r.fillGradientType===Of.LINEAR_VERTICAL){s=e.createLinearGradient(u/2,l,u/2,f+l);for(var y=0,m=a.fontProperties.fontSize+r.strokeThickness,g=m/f,v=0;v<i.length;v++)for(var x=a.lineHeight*v,b=0;b<h.length;b++){var S=0;typeof d[b]=="number"?S=d[b]:S=b/h.length;var w=x/f+S*g,A=Math.max(y,w);A=Math.min(A,1),s.addColorStop(A,h[b]),y=A}}else{s=e.createLinearGradient(l,f/2,u+l,f/2);for(var C=h.length+1,O=1,v=0;v<h.length;v++){var P=void 0;typeof d[v]=="number"?P=d[v]:P=O/C,s.addColorStop(P,h[v]),O++}}return s}function wPe(t,e,r,n,i,a,o){var s=r.text,c=r.fontProperties;e.translate(n,i),e.scale(a,a);var l=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=EPe(t,e,o,a,[s],r),e.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,h=Tn(typeof f=="number"?f:iO(f)),d=o.dropShadowBlur*a,p=o.dropShadowDistance*a;e.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+o.dropShadowAlpha+")",e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(s,l,u+r.lineHeight-c.descent),o.fill&&e.fillText(s,l,u+r.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function R$(t){return Array.from?Array.from(t):t.split("")}function APe(t){typeof t=="string"&&(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var a=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,c=o;s<=c;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,R$(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function mg(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var gs=function(){function t(e,r,n){var i,a,o=e.info[0],s=e.common[0],c=e.page[0],l=e.distanceField[0],u=cp(c.file),f={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=f;for(var h=0;h<e.page.length;h++){var d=e.page[h],p=d.id,v=d.file;f[p]=r instanceof Array?r[h]:r[v],l!=null&&l.fieldType&&l.fieldType!=="none"&&(f[p].baseTexture.alphaMode=Qi.NO_PREMULTIPLIED_ALPHA,f[p].baseTexture.mipmap=Di.OFF)}for(var h=0;h<e.char.length;h++){var y=e.char[h],p=y.id,m=y.page,g=e.char[h],x=g.x,b=g.y,S=g.width,w=g.height,A=g.xoffset,C=g.yoffset,O=g.xadvance;x/=u,b/=u,S/=u,w/=u,A/=u,C/=u,O/=u;var P=new Mt(x+f[m].frame.x/u,b+f[m].frame.y/u,S,w);this.chars[p]={xOffset:A,yOffset:C,xAdvance:O,kerning:{},texture:new pt(f[m].baseTexture,P),page:m}}for(var h=0;h<e.kerning.length;h++){var I=e.kerning[h],R=I.first,F=I.second,D=I.amount;R/=u,F/=u,D/=u,this.chars[F]&&(this.chars[F].kerning[R]=D)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(a=(i=l==null?void 0:l.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&a!==void 0?a:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,n){var i;if(e instanceof gp)i=e;else{var a=GO(e);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(e)}r instanceof pt&&(r=[r]);var o=new t(i,r,n);return t.available[o.font]=o,o},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,n),a=i.chars,o=i.padding,s=i.resolution,c=i.textureWidth,l=i.textureHeight,u=APe(a),f=r instanceof Vu?r:new Vu(r),h=c,d=new gp;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var p=0,v=0,y,m,g,x=0,b=[],S=0;S<u.length;S++){y||(y=Ve.ADAPTER.createCanvas(),y.width=c,y.height=l,m=y.getContext("2d"),g=new zt(y,{resolution:s}),b.push(new pt(g)),d.page.push({id:b.length-1,file:""}));var w=u[S],A=vo.measureText(w,f,!1,y),C=A.width,O=Math.ceil(A.height),P=Math.ceil((f.fontStyle==="italic"?2:1)*C);if(v>=l-O*s){if(v===0)throw new Error("[BitmapFont] textureHeight "+l+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+w+"')"));--S,y=null,m=null,g=null,v=0,p=0,x=0;continue}if(x=Math.max(O+A.fontProperties.descent,x),P*s+p>=h){if(p===0)throw new Error("[BitmapFont] textureWidth "+c+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+w+"')"));--S,v+=x*s,v=Math.ceil(v),p=0,x=0;continue}wPe(y,m,A,p,v,s,f);var I=mg(A.text);d.char.push({id:I,page:b.length-1,x:p/s,y:v/s,width:P,height:O,xoffset:0,yoffset:0,xadvance:Math.ceil(C-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),p+=(P+2*o)*s,p=Math.ceil(p)}if(!(n!=null&&n.skipKerning))for(var S=0,R=u.length;S<R;S++)for(var F=u[S],D=0;D<R;D++){var L=u[D],U=m.measureText(F).width,Y=m.measureText(L).width,ee=m.measureText(F+L).width,J=ee-(U+Y);J&&d.kerning.push({first:mg(F),second:mg(L),amount:J})}var X=new t(d,b,!0);return t.available[e]!==void 0&&t.uninstall(e),t.available[e]=X,X},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),CPe=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,TPe=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,KB=[],ZB=[],QB=[],OPe=function(t){SPe(e,t);function e(r,n){n===void 0&&(n={});var i=t.call(this)||this;i._tint=16777215;var a=Object.assign({},e.styleDefaults,n),o=a.align,s=a.tint,c=a.maxWidth,l=a.letterSpacing,u=a.fontName,f=a.fontSize;if(!gs.available[u])throw new Error('Missing BitmapFont "'+u+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=s,i._font=void 0,i._fontName=u,i._fontSize=f,i.text=r,i._maxWidth=c,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new al(function(){i.dirty=!0},i,0,0),i._roundPixels=Ve.ROUND_PIXELS,i.dirty=!0,i._resolution=Ve.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return e.prototype.updateText=function(){for(var r,n=gs.available[this._fontName],i=this.fontSize,a=i/n.size,o=new Dt,s=[],c=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",f=R$(u),h=this._maxWidth*n.size/i,d=n.distanceFieldType==="none"?KB:ZB,p=null,v=0,y=0,m=0,g=-1,x=0,b=0,S=0,w=0,A=0;A<f.length;A++){var C=f[A],O=mg(C);if(/(?:\s)/.test(C)&&(g=A,x=v,w++),C==="\r"||C===`
`){c.push(v),l.push(-1),y=Math.max(y,v),++m,++b,o.x=0,o.y+=n.lineHeight,p=null,w=0;continue}var P=n.chars[O];if(P){p&&P.kerning[p]&&(o.x+=P.kerning[p]);var I=QB.pop()||{texture:pt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Dt};I.texture=P.texture,I.line=m,I.charCode=O,I.position.x=o.x+P.xOffset+this._letterSpacing/2,I.position.y=o.y+P.yOffset,I.prevSpaces=w,s.push(I),v=I.position.x+Math.max(P.xAdvance-P.xOffset,P.texture.orig.width),o.x+=P.xAdvance+this._letterSpacing,S=Math.max(S,P.yOffset+P.texture.height),p=O,g!==-1&&h>0&&o.x>h&&(++b,Pu(s,1+g-b,1+A-g),A=g,g=-1,c.push(x),l.push(s.length>0?s[s.length-1].prevSpaces:0),y=Math.max(y,x),m++,o.x=0,o.y+=n.lineHeight,p=null,w=0)}}var R=f[f.length-1];R!=="\r"&&R!==`
`&&(/(?:\s)/.test(R)&&(v=x),c.push(v),y=Math.max(y,v),l.push(-1));for(var F=[],A=0;A<=m;A++){var D=0;this._align==="right"?D=y-c[A]:this._align==="center"?D=(y-c[A])/2:this._align==="justify"&&(D=l[A]<0?0:(y-c[A])/l[A]),F.push(D)}var L=s.length,U={},Y=[],ee=this._activePagesMeshData;d.push.apply(d,ee);for(var A=0;A<L;A++){var J=s[A].texture,X=J.baseTexture.uid;if(!U[X]){var M=d.pop();if(!M){var V=new Zp,$=void 0,j=void 0;n.distanceFieldType==="none"?($=new Rf(pt.EMPTY),j=ze.NORMAL):($=new Rf(pt.EMPTY,{program:ih.from(TPe,CPe),uniforms:{uFWidth:0}}),j=ze.NORMAL_NPM);var te=new Pf(V,$);te.blendMode=j,M={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:te,vertices:null,uvs:null,indices:null}}M.index=0,M.indexCount=0,M.vertexCount=0,M.uvsCount=0,M.total=0;var ie=this._textureCache;ie[X]=ie[X]||new pt(J.baseTexture),M.mesh.texture=ie[X],M.mesh.tint=this._tint,Y.push(M),U[X]=M}U[X].total++}for(var A=0;A<ee.length;A++)Y.indexOf(ee[A])===-1&&this.removeChild(ee[A].mesh);for(var A=0;A<Y.length;A++)Y[A].mesh.parent!==this&&this.addChild(Y[A].mesh);this._activePagesMeshData=Y;for(var A in U){var M=U[A],de=M.total;if(!(((r=M.indices)===null||r===void 0?void 0:r.length)>6*de)||M.vertices.length<Pf.BATCHABLE_SIZE*2)M.vertices=new Float32Array(4*2*de),M.uvs=new Float32Array(4*2*de),M.indices=new Uint16Array(6*de);else for(var he=M.total,Ee=M.vertices,Oe=he*4*2;Oe<Ee.length;Oe++)Ee[Oe]=0;M.mesh.size=6*de}for(var A=0;A<L;A++){var C=s[A],ye=C.position.x+F[C.line]*(this._align==="justify"?C.prevSpaces:1);this._roundPixels&&(ye=Math.round(ye));var Ae=ye*a,_e=C.position.y*a,J=C.texture,we=U[J.baseTexture.uid],$e=J.frame,Xe=J._uvs,ke=we.index++;we.indices[ke*6+0]=0+ke*4,we.indices[ke*6+1]=1+ke*4,we.indices[ke*6+2]=2+ke*4,we.indices[ke*6+3]=0+ke*4,we.indices[ke*6+4]=2+ke*4,we.indices[ke*6+5]=3+ke*4,we.vertices[ke*8+0]=Ae,we.vertices[ke*8+1]=_e,we.vertices[ke*8+2]=Ae+$e.width*a,we.vertices[ke*8+3]=_e,we.vertices[ke*8+4]=Ae+$e.width*a,we.vertices[ke*8+5]=_e+$e.height*a,we.vertices[ke*8+6]=Ae,we.vertices[ke*8+7]=_e+$e.height*a,we.uvs[ke*8+0]=Xe.x0,we.uvs[ke*8+1]=Xe.y0,we.uvs[ke*8+2]=Xe.x1,we.uvs[ke*8+3]=Xe.y1,we.uvs[ke*8+4]=Xe.x2,we.uvs[ke*8+5]=Xe.y2,we.uvs[ke*8+6]=Xe.x3,we.uvs[ke*8+7]=Xe.y3}this._textWidth=y*a,this._textHeight=(o.y+n.lineHeight)*a;for(var A in U){var M=U[A];if(this.anchor.x!==0||this.anchor.y!==0)for(var at=0,vt=this._textWidth*this.anchor.x,gt=this._textHeight*this.anchor.y,tt=0;tt<M.total;tt++)M.vertices[at++]-=vt,M.vertices[at++]-=gt,M.vertices[at++]-=vt,M.vertices[at++]-=gt,M.vertices[at++]-=vt,M.vertices[at++]-=gt,M.vertices[at++]-=vt,M.vertices[at++]-=gt;this._maxLineHeight=S*a;var ot=M.mesh.geometry.getBuffer("aVertexPosition"),dt=M.mesh.geometry.getBuffer("aTextureCoord"),Xt=M.mesh.geometry.getIndex();ot.data=M.vertices,dt.data=M.uvs,Xt.data=M.indices,ot.update(),dt.update(),Xt.update()}for(var A=0;A<s.length;A++)QB.push(s[A]);this._font=n,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=gs.available[this._fontName],i=n.distanceFieldRange,a=n.distanceFieldType,o=n.size;if(a!=="none")for(var s=this.worldTransform,c=s.a,l=s.b,u=s.c,f=s.d,h=Math.sqrt(c*c+l*l),d=Math.sqrt(u*u+f*f),p=(Math.abs(h)+Math.abs(d))/2,v=this.fontSize/o,y=0,m=this._activePagesMeshData;y<m.length;y++){var g=m[y];g.mesh.shader.uniforms.uFWidth=p*i*v*this._resolution}t.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var r=gs.available[this._fontName];if(!r)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==r&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!gs.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var r;return(r=this._fontSize)!==null&&r!==void 0?r:gs.available[this._fontName].size},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var n=this._textureCache,i=gs.available[this._fontName],a=i.distanceFieldType==="none"?KB:ZB;a.push.apply(a,this._activePagesMeshData);for(var o=0,s=this._activePagesMeshData;o<s.length;o++){var c=s[o];this.removeChild(c.mesh)}this._activePagesMeshData=[],a.filter(function(f){return n[f.mesh.texture.baseTexture.uid]}).forEach(function(f){f.mesh.texture=pt.EMPTY});for(var l in n){var u=n[l];u.destroy(),delete n[l]}this._font=null,this._textureCache=null,t.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Cn),I$=function(){function t(){}return t.add=function(){vr.setExtensionXhrType("fnt",vr.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var n=GO(e.data);if(!n){r();return}for(var i=t.getBaseUrl(this,e),a=n.parse(e.data),o={},s=function(v){o[v.metadata.pageFile]=v.texture,Object.keys(o).length===a.page.length&&(e.bitmapFont=gs.install(a,o,!0),r())},c=0;c<a.page.length;++c){var l=a.page[c].file,u=i+l,f=!1;for(var h in this.resources){var d=this.resources[h];if(d.url===u){d.metadata.pageFile=l,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var p={crossOrigin:e.crossOrigin,loadType:vr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(u,p,s)}}},t.getBaseUrl=function(e,r){var n=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),e.baseUrl&&n&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(e.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},t.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},t.extension=hr.Loader,t}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lA=function(t,e){return lA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},lA(t,e)};function PPe(t,e){lA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var RPe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,F$=function(t){PPe(e,t);function e(r){r===void 0&&(r=1);var n=t.call(this,Uj,RPe,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uA=function(t,e){return uA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},uA(t,e)};function k$(t,e){uA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var IPe=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function FPe(t,e){var r=Math.ceil(t/2),n=IPe,i="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var s=a.replace("%index%",o.toString());s=s.replace("%sampleIndex%",o-(r-1)+".0"),i+=s,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}var kPe={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},DPe=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function MPe(t){for(var e=kPe[t],r=e.length,n=DPe,i="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,s=0;s<t;s++){var c=a.replace("%index%",s.toString());o=s,s>=r&&(o=t-s-1),c=c.replace("%value%",e[o].toString()),i+=c,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}var mp=function(t){k$(e,t);function e(r,n,i,a,o){n===void 0&&(n=8),i===void 0&&(i=4),a===void 0&&(a=Ve.FILTER_RESOLUTION),o===void 0&&(o=5);var s=this,c=FPe(o,r),l=MPe(o);return s=t.call(this,c,l)||this,s.horizontal=r,s.resolution=a,s._quality=0,s.quality=i,s.blur=n,s}return e.prototype.apply=function(r,n,i,a){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,i,a);else{var o=r.getFilterTexture(),s=r.renderer,c=n,l=o;this.state.blend=!1,r.applyFilter(this,c,l,ka.CLEAR);for(var u=1;u<this.passes-1;u++){r.bindAndClear(c,ka.BLIT),this.uniforms.uSampler=l;var f=l;l=c,c=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,l,i,a),r.returnFilterTexture(o)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}(xt),LPe=function(t){k$(e,t);function e(r,n,i,a){r===void 0&&(r=8),n===void 0&&(n=4),i===void 0&&(i=Ve.FILTER_RESOLUTION),a===void 0&&(a=5);var o=t.call(this)||this;return o.blurXFilter=new mp(!0,r,n,i,a),o.blurYFilter=new mp(!1,r,n,i,a),o.resolution=i,o.quality=n,o.blur=r,o.repeatEdgePixels=!1,o}return e.prototype.apply=function(r,n,i,a){var o=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(o&&s){var c=r.getFilterTexture();this.blurXFilter.apply(r,n,c,ka.CLEAR),this.blurYFilter.apply(r,c,i,a),r.returnFilterTexture(c)}else s?this.blurYFilter.apply(r,n,i,a):this.blurXFilter.apply(r,n,i,a)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cA=function(t,e){return cA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},cA(t,e)};function BPe(t,e){cA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var NPe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,fA=function(t){BPe(e,t);function e(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=t.call(this,DO,NPe,n)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},e.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},e.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.tint=function(r,n){var i=r>>16&255,a=r>>8&255,o=r&255,s=[i/255,0,0,0,0,0,a/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),a=Math.sin(r),o=Math.sqrt,s=1/3,c=o(s),l=i+(1-i)*s,u=s*(1-i)-c*a,f=s*(1-i)+c*a,h=s*(1-i)+c*a,d=i+s*(1-i),p=s*(1-i)-c*a,v=s*(1-i)-c*a,y=s*(1-i)+c*a,m=i+s*(1-i),g=[l,u,f,0,0,h,d,p,0,0,v,y,m,0,0,0,0,0,1,0];this._loadMatrix(g,n)},e.prototype.contrast=function(r,n){var i=(r||0)+1,a=-.5*(i-1),o=[i,0,0,0,a,0,i,0,0,a,0,0,i,0,a,0,0,0,1,0];this._loadMatrix(o,n)},e.prototype.saturate=function(r,n){r===void 0&&(r=0);var i=r*2/3+1,a=(i-1)*-.5,o=[i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0];this._loadMatrix(o,n)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.colorTone=function(r,n,i,a,o){r=r||.2,n=n||.15,i=i||16770432,a=a||3375104;var s=(i>>16&255)/255,c=(i>>8&255)/255,l=(i&255)/255,u=(a>>16&255)/255,f=(a>>8&255)/255,h=(a&255)/255,d=[.3,.59,.11,0,0,s,c,l,r,0,u,f,h,n,0,s-u,c-f,l-h,0,0];this._loadMatrix(d,o)},e.prototype.night=function(r,n){r=r||.1;var i=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(xt);fA.prototype.grayscale=fA.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hA=function(t,e){return hA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},hA(t,e)};function UPe(t,e){hA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jPe=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,$Pe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,VPe=function(t){UPe(e,t);function e(r,n){var i=this,a=new zr;return r.renderable=!1,i=t.call(this,$Pe,jPe,{mapSampler:r._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=r,i.maskMatrix=a,n==null&&(n=20),i.scale=new Dt(n,n),i}return e.prototype.apply=function(r,n,i,a){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,s=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);s!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/s,this.uniforms.rotation[1]=o.b/s,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dA=function(t,e){return dA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},dA(t,e)};function GPe(t,e){dA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var WPe=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,zPe=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,HPe=function(t){GPe(e,t);function e(){return t.call(this,WPe,zPe)||this}return e}(xt);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pA=function(t,e){return pA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},pA(t,e)};function XPe(t,e){pA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var YPe=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,qPe=function(t){XPe(e,t);function e(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var i=t.call(this,DO,YPe,{uNoise:0,uSeed:0})||this;return i.noise=r,i.seed=n,i}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var D$=new zr;Qr.prototype._cacheAsBitmap=!1;Qr.prototype._cacheData=null;Qr.prototype._cacheAsBitmapResolution=null;Qr.prototype._cacheAsBitmapMultisample=Pr.NONE;var KPe=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(Qr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new KPe),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});Qr.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};Qr.prototype._initCachedDisplayObject=function(e){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var a=this.filters[0].padding;i.pad(a)}i.ceil(Ve.RESOLUTION);var o=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),c=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,u=Il.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:e.multisample}),f="cacheAsBitmap_"+Pl();this._cacheData.textureCacheId=f,zt.addToCache(u.baseTexture,f),pt.addToCache(u,f);var h=this.transform.localTransform.copyTo(D$).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=l,e.renderTexture.bind(o,s,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new ca(u);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(i.x/i.width),d.anchor.y=-(i.y/i.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};Qr.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};Qr.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=e.context,a=e._projTransform;r.ceil(Ve.RESOLUTION);var o=Il.create({width:r.width,height:r.height}),s="cacheAsBitmap_"+Pl();this._cacheData.textureCacheId=s,zt.addToCache(o.baseTexture,s),pt.addToCache(o,s);var c=D$;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=r.x,c.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:c,skipUpdateTransform:!1}),e.context=i,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new ca(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(r.x/r.width),l.anchor.y=-(r.y/r.height),l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};Qr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Qr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Qr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,zt.removeFromCache(this._cacheData.textureCacheId),pt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Qr.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Qr.prototype.name=null;Cn.prototype.getChildByName=function(e,r){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===e)return this.children[n];if(r)for(var n=0,i=this.children.length;n<i;n++){var a=this.children[n];if(a.getChildByName){var o=a.getChildByName(e,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Qr.prototype.getGlobalPosition=function(e,r){return e===void 0&&(e=new Dt),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var M$=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var n,i;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var a=r._resizeTo,o=a.clientWidth,s=a.clientHeight;n=o,i=s}r.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=hr.Application,t}(),WO=function(){function t(e){var r=this;this.stage=new Cn,e=Object.assign({forceCanvas:!1},e),this.renderer=Nj(e),t._plugins.forEach(function(n){n.init.call(r,e)})}return t.registerPlugin=function(e){Fi("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Qo.add({type:hr.Application,ref:e})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var n=this,i=t._plugins.slice(0);i.reverse(),i.forEach(function(a){a.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();Qo.handleByList(hr.Application,WO._plugins);Qo.add(M$);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vA=function(t,e){return vA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},vA(t,e)};function ah(t,e){vA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var L$=function(t){ah(e,t);function e(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=100),i===void 0&&(i=10),a===void 0&&(a=10);var o=t.call(this)||this;return o.segWidth=i,o.segHeight=a,o.width=r,o.height=n,o.build(),o}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],a=[],o=this.segWidth-1,s=this.segHeight-1,c=this.width/o,l=this.height/s,u=0;u<r;u++){var f=u%this.segWidth,h=u/this.segWidth|0;n.push(f*c,h*l),i.push(f/o,h/s)}for(var d=o*s,u=0;u<d;u++){var p=u%o,v=u/o|0,y=v*this.segWidth+p,m=v*this.segWidth+p+1,g=(v+1)*this.segWidth+p,x=(v+1)*this.segWidth+p+1;a.push(y,m,g,m,x,g)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Zp),B$=function(t){ah(e,t);function e(r,n,i){r===void 0&&(r=200),i===void 0&&(i=0);var a=t.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return a.points=n,a._width=r,a.textureScale=i,a.build(),a}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),i.data=new Float32Array(r.length*4),a.data=new Uint16Array((r.length-1)*6));var o=i.data,s=a.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var c=0,l=r[0],u=this._width*this.textureScale,f=r.length,h=0;h<f;h++){var d=h*4;if(this.textureScale>0){var p=l.x-r[h].x,v=l.y-r[h].y,y=Math.sqrt(p*p+v*v);l=r[h],c+=y/u}else c=h/(f-1);o[d]=c,o[d+1]=0,o[d+2]=c,o[d+3]=1}for(var m=0,h=0;h<f-1;h++){var d=h*2;s[m++]=d,s[m++]=d+1,s[m++]=d+2,s[m++]=d+2,s[m++]=d+1,s[m++]=d+3}i.update(),a.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],i,a=0,o=0,s=this.buffers[0].data,c=r.length,l=0;l<c;l++){var u=r[l],f=l*4;l<r.length-1?i=r[l+1]:i=u,o=-(i.x-n.x),a=i.y-n.y;var h=Math.sqrt(a*a+o*o),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=h,o/=h,a*=d,o*=d,s[f]=u.x+a,s[f+1]=u.y+o,s[f+2]=u.x-a,s[f+3]=u.y-o,n=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Zp),ZPe=function(t){ah(e,t);function e(r,n,i){i===void 0&&(i=0);var a=this,o=new B$(r.height,n,i),s=new Rf(r);return i>0&&(r.baseTexture.wrapMode=uo.REPEAT),a=t.call(this,o,s)||this,a.autoUpdate=!0,a}return e.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,r)},e}(Pf),N$=function(t){ah(e,t);function e(r,n,i){var a=this,o=new L$(r.width,r.height,n,i),s=new Rf(pt.WHITE);return a=t.call(this,o,s)||this,a.texture=r,a.autoResize=!0,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,i=n.width,a=n.height;this.autoResize&&(r.width!==i||r.height!==a)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,r)},e}(Pf),U$=function(t){ah(e,t);function e(r,n,i,a,o){r===void 0&&(r=pt.EMPTY);var s=this,c=new Zp(n,i,a);c.getBuffer("aVertexPosition").static=!1;var l=new Rf(r);return s=t.call(this,c,l,null,o)||this,s.autoUpdate=!0,s}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,r)},e}(Pf),Lv=10,QPe=function(t){ah(e,t);function e(r,n,i,a,o){n===void 0&&(n=Lv),i===void 0&&(i=Lv),a===void 0&&(a=Lv),o===void 0&&(o=Lv);var s=t.call(this,pt.WHITE,4,4)||this;return s._origWidth=r.orig.width,s._origHeight=r.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=a,s._topHeight=i,s._bottomHeight=o,s.texture=r,s}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,a=this._height>i?1:this._height/i,o=Math.min(n,a);return o},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,a=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=a*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(N$);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gA=function(t,e){return gA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},gA(t,e)};function JPe(t,e){gA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var eRe=function(t){JPe(e,t);function e(r,n){n===void 0&&(n=!0);var i=t.call(this,r[0]instanceof pt?r[0]:r[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=r,i}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&($r.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&($r.shared.add(this.update,this,ho.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(this._playing){var n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=n/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),t.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(pt.from(r[i]));return new e(n)},e.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(pt.from(r[i]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof pt)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?($r.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&($r.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(ca);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Qo.add(Hj,Kj,qj,f$,S$,LO,C$,I$,r$,l$,u$,w$,vj,Qj);var j$={AlphaFilter:F$,BlurFilter:LPe,BlurFilterPass:mp,ColorMatrixFilter:fA,DisplacementFilter:VPe,FXAAFilter:HPe,NoiseFilter:qPe};const tRe=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Qi},AbstractBatchRenderer:jj,AbstractMultiResource:o_,AbstractRenderer:Bj,AccessibilityManager:Hj,AnimatedSprite:eRe,AppLoaderPlugin:Qj,Application:WO,ArrayResource:cO,Attribute:Gw,get BLEND_MODES(){return ze},get BUFFER_BITS(){return np},get BUFFER_TYPE(){return co},BaseImageResource:Wo,BasePrepare:x$,BaseRenderTexture:gO,BaseTexture:zt,BatchDrawCall:dm,BatchGeometry:MO,BatchPluginFactory:Vj,BatchRenderer:LO,BatchShaderGenerator:$j,BatchSystem:xO,BatchTextureArray:pm,BitmapFont:gs,BitmapFontData:gp,BitmapFontLoader:I$,BitmapText:OPe,BlobResource:t$,Bounds:hp,BrowserAdapter:RU,Buffer:hn,BufferResource:ec,get CLEAR_MODES(){return ka},get COLOR_MASK_BITS(){return xw},CanvasResource:fO,Circle:fj,CompressedTextureLoader:r$,CompressedTextureResource:gm,Container:Cn,ContextSystem:bO,CountLimiter:_$,CubeResource:hO,DDSLoader:l$,DEG_TO_RAD:Rl,get DRAW_MODES(){return fa},DisplayObject:Qr,get ENV(){return Go},Ellipse:hj,get ExtensionType(){return hr},Extract:Kj,get FORMATS(){return Ue},FORMATS_TO_COMPONENTS:a$,FillStyle:NO,Filter:xt,FilterState:_j,FilterSystem:_O,Framebuffer:hm,FramebufferSystem:SO,get GC_MODES(){return ap},GLFramebuffer:xj,GLProgram:Dj,GLTexture:pg,GRAPHICS_CURVES:Cf,Geometry:nh,GeometrySystem:EO,Graphics:Tf,GraphicsData:tA,GraphicsGeometry:m$,IGLUniformData:L2e,INSTALLED:dp,get INTERNAL_FORMATS(){return wt},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:pp,ImageBitmapResource:vO,ImageResource:s_,InteractionData:Ww,InteractionEvent:Xj,InteractionManager:qj,InteractionTrackingData:vg,KTXLoader:u$,get LINE_CAP(){return Ss},get LINE_JOIN(){return Do},LineStyle:y$,Loader:$u,get LoaderResource(){return vr},get MASK_TYPES(){return nn},get MIPMAP_MODES(){return Di},get MSAA_QUALITY(){return Pr},MaskData:bj,MaskSystem:wO,Matrix:zr,Mesh:Pf,MeshBatchUvs:T$,MeshGeometry:Zp,MeshMaterial:Rf,NineSlicePlane:QPe,ObjectRenderer:Kp,ObservablePoint:al,PI_2:fp,get PRECISION(){return Hi},ParticleContainer:zOe,ParticleRenderer:f$,PlaneGeometry:L$,Point:Dt,Polygon:cf,Prepare:S$,Program:ih,ProjectionSystem:TO,Quad:yj,QuadUv:yO,RAD_TO_DEG:cj,get RENDERER_TYPE(){return Sf},Rectangle:Mt,RenderTexture:Il,RenderTexturePool:mj,RenderTextureSystem:OO,Renderer:kO,ResizePlugin:M$,Resource:ju,RopeGeometry:B$,RoundedRectangle:dj,Runner:Nn,get SAMPLER_TYPES(){return ip},get SCALE_MODES(){return An},get SHAPES(){return En},SVGResource:dO,ScissorSystem:AO,Shader:Cs,ShaderSystem:PO,SimpleMesh:U$,SimplePlane:N$,SimpleRope:ZPe,Sprite:ca,SpriteMaskFilter:Oj,Spritesheet:E$,SpritesheetLoader:w$,State:Nl,StateSystem:RO,StencilSystem:CO,System:Q2e,get TARGETS(){return _l},get TEXT_GRADIENT(){return Of},get TYPES(){return ut},TYPES_TO_BYTES_PER_COMPONENT:qw,TYPES_TO_BYTES_PER_PIXEL:o$,TemporaryDisplayObject:uO,Text:$O,TextFormat:O$,TextMetrics:vo,TextStyle:Vu,Texture:pt,TextureGCSystem:IO,TextureLoader:Jj,TextureMatrix:l_,TextureSystem:FO,TextureUvs:mO,Ticker:$r,TickerPlugin:vj,TilingSprite:vPe,TilingSpriteRenderer:C$,TimeLimiter:pPe,Transform:i_,get UPDATE_PRIORITY(){return ho},UniformGroup:xl,VERSION:tOe,VideoResource:pO,ViewableBuffer:vm,get WRAP_MODES(){return uo},XMLFormat:mm,XMLStringFormat:P$,accessibleTarget:zj,autoDetectFormat:GO,autoDetectRenderer:Nj,autoDetectResource:a_,checkMaxIfStatementsInShader:Tj,createUBOElements:Ij,defaultFilterVertex:DO,defaultVertex:Uj,extensions:Qo,filters:j$,generateProgram:Mj,generateUniformBufferSync:kj,getTestContext:wj,getUBOData:Fj,graphicsUtils:ZOe,groupD8:kr,interactiveTarget:Yj,isMobile:Ba,parseDDS:i$,parseKTX:s$,resources:Gj,settings:Ve,systems:Wj,uniformParsers:Ru,utils:a2e},Symbol.toStringTag,{value:"Module"}));let Bv;const rRe=new Uint8Array(16);function nRe(){if(!Bv&&(Bv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bv(rRe)}const Kn=[];for(let t=0;t<256;++t)Kn.push((t+256).toString(16).slice(1));function iRe(t,e=0){return Kn[t[e+0]]+Kn[t[e+1]]+Kn[t[e+2]]+Kn[t[e+3]]+"-"+Kn[t[e+4]]+Kn[t[e+5]]+"-"+Kn[t[e+6]]+Kn[t[e+7]]+"-"+Kn[t[e+8]]+Kn[t[e+9]]+"-"+Kn[t[e+10]]+Kn[t[e+11]]+Kn[t[e+12]]+Kn[t[e+13]]+Kn[t[e+14]]+Kn[t[e+15]]}const aRe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JB={randomUUID:aRe};function Kh(t,e,r){if(JB.randomUUID&&!e&&!t)return JB.randomUUID();t=t||{};const n=t.random||(t.rng||nRe)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return iRe(n)}/*!
 * @pixi/filter-old-film - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mA=function(t,e){return mA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mA(t,e)};function oRe(t,e){mA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var sRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,lRe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,uRe=function(t){oRe(e,t);function e(r,n){n===void 0&&(n=0);var i=t.call(this,sRe,lRe)||this;return i.seed=0,i.uniforms.dimensions=new Float32Array(2),typeof r=="number"?(i.seed=r,r=void 0):i.seed=n,Object.assign(i,e.defaults,r),i}return e.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.seed=this.seed,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(r){this.uniforms.sepia=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(r){this.uniforms.scratch=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(r){this.uniforms.scratchDensity=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(r){this.uniforms.scratchWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),e.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},e}(xt);/*!
 * @pixi/filter-dot - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yA=function(t,e){return yA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},yA(t,e)};function cRe(t,e){yA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,hRe=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,dRe=function(t){cRe(e,t);function e(r,n){r===void 0&&(r=1),n===void 0&&(n=5);var i=t.call(this,fRe,hRe)||this;return i.scale=r,i.angle=n,i}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(r){this.uniforms.scale=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/filter-reflection - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _A=function(t,e){return _A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_A(t,e)};function pRe(t,e){_A(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,gRe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,mRe=function(t){pRe(e,t);function e(r){var n=t.call(this,vRe,gRe)||this;return n.time=0,n.uniforms.amplitude=new Float32Array(2),n.uniforms.waveLength=new Float32Array(2),n.uniforms.alpha=new Float32Array(2),n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(r){this.uniforms.mirror=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(r){this.uniforms.boundary=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude[0]=r[0],this.uniforms.amplitude[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(r){this.uniforms.waveLength[0]=r[0],this.uniforms.waveLength[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha[0]=r[0],this.uniforms.alpha[1]=r[1]},enumerable:!1,configurable:!0}),e.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},e}(xt);/*!
 * @pixi/filter-glitch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xA=function(t,e){return xA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},xA(t,e)};function yRe(t,e){xA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _Re=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xRe=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,bRe=function(t){yRe(e,t);function e(r){var n=t.call(this,_Re,xRe)||this;return n.offset=100,n.fillMode=e.TRANSPARENT,n.average=!1,n.seed=0,n.minSize=8,n.sampleSize=512,n._slices=0,n._offsets=new Float32Array(1),n._sizes=new Float32Array(1),n._direction=-1,n.uniforms.dimensions=new Float32Array(2),n._canvas=document.createElement("canvas"),n._canvas.width=4,n._canvas.height=n.sampleSize,n.texture=pt.from(n._canvas,{scaleMode:An.NEAREST}),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.aspect=c/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,r.applyFilter(this,n,i,a)},e.prototype._randomizeSizes=function(){var r=this._sizes,n=this._slices-1,i=this.sampleSize,a=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var o=this._slices,s=1,c=0;c<n;c++){var l=s/(o-c),u=Math.max(l*(1-Math.random()*.6),a);r[c]=u,s-=u}r[n]=s}else{for(var s=1,f=Math.sqrt(1/this._slices),c=0;c<n;c++){var u=Math.max(f*s*Math.random(),a);r[c]=u,s-=u}r[n]=s}this.shuffle()},e.prototype.shuffle=function(){for(var r=this._sizes,n=this._slices-1,i=n;i>0;i--){var a=Math.random()*i>>0,o=r[i];r[i]=r[a],r[a]=o}},e.prototype._randomizeOffsets=function(){for(var r=0;r<this._slices;r++)this._offsets[r]=Math.random()*(Math.random()<.5?-1:1)},e.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},e.prototype.redraw=function(){var r=this.sampleSize,n=this.texture,i=this._canvas.getContext("2d");i.clearRect(0,0,8,r);for(var a,o=0,s=0;s<this._slices;s++){a=Math.floor(this._offsets[s]*256);var c=this._sizes[s]*r,l=a>0?a:0,u=a<0?-a:0;i.fillStyle="rgba("+l+", "+u+", 0, 1)",i.fillRect(0,o>>0,r,c+1>>0),o+=c}n.baseTexture.update(),this.uniforms.displacementMap=n},Object.defineProperty(e.prototype,"sizes",{get:function(){return this._sizes},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._sizes[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return this._offsets},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._offsets[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"slices",{get:function(){return this._slices},set:function(r){this._slices!==r&&(this._slices=r,this.uniforms.slices=r,this._sizes=this.uniforms.slicesWidth=new Float32Array(r),this._offsets=this.uniforms.slicesOffset=new Float32Array(r),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(r){if(this._direction!==r){this._direction=r;var n=r*Rl;this.uniforms.sinDir=Math.sin(n),this.uniforms.cosDir=Math.cos(n)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var r;(r=this.texture)===null||r===void 0||r.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},e.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},e.TRANSPARENT=0,e.ORIGINAL=1,e.LOOP=2,e.CLAMP=3,e.MIRROR=4,e}(xt);/*!
 * @pixi/filter-rgb-split - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bA=function(t,e){return bA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},bA(t,e)};function SRe(t,e){bA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ERe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,wRe=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,ARe=function(t){SRe(e,t);function e(r,n,i){r===void 0&&(r=[-10,0]),n===void 0&&(n=[0,10]),i===void 0&&(i=[0,0]);var a=t.call(this,ERe,wRe)||this;return a.red=r,a.green=n,a.blue=i,a}return Object.defineProperty(e.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/filter-godray - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SA=function(t,e){return SA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},SA(t,e)};function CRe(t,e){SA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var TRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ORe=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,PRe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`,RRe=function(t){CRe(e,t);function e(r){var n=t.call(this,TRe,PRe.replace("${perlin}",ORe))||this;n.parallel=!0,n.time=0,n._angle=0,n.uniforms.dimensions=new Float32Array(2);var i=Object.assign(e.defaults,r);return n._angleLight=new Dt,n.angle=i.angle,n.gain=i.gain,n.lacunarity=i.lacunarity,n.alpha=i.alpha,n.parallel=i.parallel,n.center=i.center,n.time=i.time,n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.aspect=c/s,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r;var n=r*Rl;this._angleLight.x=Math.cos(n),this._angleLight.y=Math.sin(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(r){this.uniforms.gain=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(r){this.uniforms.lacunarity=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha=r},enumerable:!1,configurable:!0}),e.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},e}(xt);/*!
 * @pixi/filter-adjustment - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var EA=function(t,e){return EA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},EA(t,e)};function IRe(t,e){EA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var FRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,kRe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`;(function(t){IRe(e,t);function e(r){var n=t.call(this,FRe,kRe)||this;return n.gamma=1,n.saturation=1,n.contrast=1,n.brightness=1,n.red=1,n.green=1,n.blue=1,n.alpha=1,Object.assign(n,r),n}return e.prototype.apply=function(r,n,i,a){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,a)},e})(xt);/*!
 * @pixi/filter-kawase-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wA=function(t,e){return wA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},wA(t,e)};function DRe(t,e){wA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var MRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,LRe=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,BRe=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,ym=function(t){DRe(e,t);function e(r,n,i){r===void 0&&(r=4),n===void 0&&(n=3),i===void 0&&(i=!1);var a=t.call(this,MRe,i?BRe:LRe)||this;return a._kernels=[],a._blur=4,a._quality=3,a.uniforms.uOffset=new Float32Array(2),a._pixelSize=new Dt,a.pixelSize=1,a._clamp=i,Array.isArray(r)?a.kernels=r:(a._blur=r,a.quality=n),a}return e.prototype.apply=function(r,n,i,a){var o=this._pixelSize.x/n._frame.width,s=this._pixelSize.y/n._frame.height,c;if(this._quality===1||this._blur===0)c=this._kernels[0]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,n,i,a);else{for(var l=r.getFilterTexture(),u=n,f=l,h=void 0,d=this._quality-1,p=0;p<d;p++)c=this._kernels[p]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,u,f,1),h=u,u=f,f=h;c=this._kernels[d]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,u,i,a),r.returnFilterTexture(l)}},e.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(r,n){return r+n+.5},0))},e.prototype._generateKernels=function(){var r=this._blur,n=this._quality,i=[r];if(r>0)for(var a=r,o=r/n,s=1;s<n;s++)a-=o,i.push(a);this._kernels=i,this._updatePadding()},Object.defineProperty(e.prototype,"kernels",{get:function(){return this._kernels},set:function(r){Array.isArray(r)&&r.length>0?(this._kernels=r,this._quality=r.length,this._blur=Math.max.apply(Math,r)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(r){typeof r=="number"?(this._pixelSize.x=r,this._pixelSize.y=r):Array.isArray(r)?(this._pixelSize.x=r[0],this._pixelSize.y=r[1]):r instanceof Dt?(this._pixelSize.x=r.x,this._pixelSize.y=r.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=Math.max(1,Math.round(r)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blur},set:function(r){this._blur=r,this._generateKernels()},enumerable:!1,configurable:!0}),e}(xt);/*!
 * @pixi/filter-advanced-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var AA=function(t,e){return AA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},AA(t,e)};function $$(t,e){AA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var V$=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,NRe=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,URe=function(t){$$(e,t);function e(r){r===void 0&&(r=.5);var n=t.call(this,V$,NRe)||this;return n.threshold=r,n}return Object.defineProperty(e.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(r){this.uniforms.threshold=r},enumerable:!1,configurable:!0}),e}(xt),jRe=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;(function(t){$$(e,t);function e(r){var n=t.call(this,V$,jRe)||this;n.bloomScale=1,n.brightness=1,n._resolution=Ve.FILTER_RESOLUTION,typeof r=="number"&&(r={threshold:r});var i=Object.assign(e.defaults,r);n.bloomScale=i.bloomScale,n.brightness=i.brightness;var a=i.kernels,o=i.blur,s=i.quality,c=i.pixelSize,l=i.resolution;return n._extractFilter=new URe(i.threshold),n._extractFilter.resolution=l,n._blurFilter=a?new ym(a):new ym(o,s),n.pixelSize=c,n.resolution=l,n}return e.prototype.apply=function(r,n,i,a,o){var s=r.getFilterTexture();this._extractFilter.apply(r,n,s,1,o);var c=r.getFilterTexture();this._blurFilter.apply(r,s,c,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=c,r.applyFilter(this,n,i,a),r.returnFilterTexture(c),r.returnFilterTexture(s)},Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._extractFilter&&(this._extractFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(r){this._extractFilter.threshold=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),e.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:Ve.FILTER_RESOLUTION},e})(xt);/*!
 * @pixi/filter-ascii - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var CA=function(t,e){return CA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},CA(t,e)};function $Re(t,e){CA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var VRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,GRe=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`;(function(t){$Re(e,t);function e(r){r===void 0&&(r=8);var n=t.call(this,VRe,GRe)||this;return n.size=r,n}return Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(r){this.uniforms.pixelSize=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-bevel - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TA=function(t,e){return TA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},TA(t,e)};function WRe(t,e){TA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var zRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,HRe=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`;(function(t){WRe(e,t);function e(r){var n=t.call(this,zRe,HRe)||this;return n._thickness=2,n._angle=0,n.uniforms.lightColor=new Float32Array(3),n.uniforms.shadowColor=new Float32Array(3),Object.assign(n,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},r),n.padding=1,n}return e.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._angle/Rl},set:function(r){this._angle=r*Rl,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return Ii(this.uniforms.lightColor)},set:function(r){Tn(r,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(r){this.uniforms.lightAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return Ii(this.uniforms.shadowColor)},set:function(r){Tn(r,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(r){this.uniforms.shadowAlpha=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OA=function(t,e){return OA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},OA(t,e)};function XRe(t,e){OA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(function(t){XRe(e,t);function e(r,n,i,a){r===void 0&&(r=2),n===void 0&&(n=4),i===void 0&&(i=Ve.FILTER_RESOLUTION),a===void 0&&(a=5);var o=t.call(this)||this,s,c;return typeof r=="number"?(s=r,c=r):r instanceof Dt?(s=r.x,c=r.y):Array.isArray(r)&&(s=r[0],c=r[1]),o.blurXFilter=new mp(!0,s,n,i,a),o.blurYFilter=new mp(!1,c,n,i,a),o.blurYFilter.blendMode=ze.SCREEN,o.defaultFilter=new F$,o}return e.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this.defaultFilter.apply(r,n,i,a),this.blurXFilter.apply(r,n,o,1),this.blurYFilter.apply(r,o,i,0),r.returnFilterTexture(o)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-bulge-pinch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var PA=function(t,e){return PA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},PA(t,e)};function YRe(t,e){PA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,KRe=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;(function(t){YRe(e,t);function e(r){var n=t.call(this,qRe,KRe)||this;return n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),e.defaults={center:[.5,.5],radius:100,strength:1},e})(xt);/*!
 * @pixi/filter-color-map - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var RA=function(t,e){return RA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},RA(t,e)};function ZRe(t,e){RA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var QRe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,JRe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`;(function(t){ZRe(e,t);function e(r,n,i){n===void 0&&(n=!1),i===void 0&&(i=1);var a=t.call(this,QRe,JRe)||this;return a.mix=1,a._size=0,a._sliceSize=0,a._slicePixelSize=0,a._sliceInnerSize=0,a._nearest=!1,a._scaleMode=null,a._colorMap=null,a._scaleMode=null,a.nearest=n,a.mix=i,a.colorMap=r,a}return e.prototype.apply=function(r,n,i,a){this.uniforms._mix=this.mix,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorMap",{get:function(){return this._colorMap},set:function(r){var n;r&&(r instanceof pt||(r=pt.from(r)),!((n=r)===null||n===void 0)&&n.baseTexture&&(r.baseTexture.scaleMode=this._scaleMode,r.baseTexture.mipmap=Di.OFF,this._size=r.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=r),this._colorMap=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nearest",{get:function(){return this._nearest},set:function(r){this._nearest=r,this._scaleMode=r?An.NEAREST:An.LINEAR;var n=this._colorMap;n&&n.baseTexture&&(n.baseTexture._glTextures={},n.baseTexture.scaleMode=this._scaleMode,n.baseTexture.mipmap=Di.OFF,n._updateID++,n.baseTexture.emit("update",n.baseTexture))},enumerable:!1,configurable:!0}),e.prototype.updateColorMap=function(){var r=this._colorMap;r&&r.baseTexture&&(r._updateID++,r.baseTexture.emit("update",r.baseTexture),this.colorMap=r)},e.prototype.destroy=function(r){r===void 0&&(r=!1),this._colorMap&&this._colorMap.destroy(r),t.prototype.destroy.call(this)},e})(xt);/*!
 * @pixi/filter-color-overlay - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var IA=function(t,e){return IA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},IA(t,e)};function eIe(t,e){IA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var tIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,rIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`;(function(t){eIe(e,t);function e(r,n){r===void 0&&(r=0),n===void 0&&(n=1);var i=t.call(this,tIe,rIe)||this;return i._color=0,i._alpha=1,i.uniforms.color=new Float32Array(3),i.color=r,i.alpha=n,i}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.color;typeof r=="number"?(Tn(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._color=Ii(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){this.uniforms.alpha=r,this._alpha=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var FA=function(t,e){return FA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},FA(t,e)};function nIe(t,e){FA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var iIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`;(function(t){nIe(e,t);function e(r,n,i){r===void 0&&(r=16711680),n===void 0&&(n=0),i===void 0&&(i=.4);var a=t.call(this,iIe,aIe)||this;return a._originalColor=16711680,a._newColor=0,a.uniforms.originalColor=new Float32Array(3),a.uniforms.newColor=new Float32Array(3),a.originalColor=r,a.newColor=n,a.epsilon=i,a}return Object.defineProperty(e.prototype,"originalColor",{get:function(){return this._originalColor},set:function(r){var n=this.uniforms.originalColor;typeof r=="number"?(Tn(r,n),this._originalColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._originalColor=Ii(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newColor",{get:function(){return this._newColor},set:function(r){var n=this.uniforms.newColor;typeof r=="number"?(Tn(r,n),this._newColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._newColor=Ii(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-convolution - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kA=function(t,e){return kA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},kA(t,e)};function oIe(t,e){kA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var sIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,lIe=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`;(function(t){oIe(e,t);function e(r,n,i){n===void 0&&(n=200),i===void 0&&(i=200);var a=t.call(this,sIe,lIe)||this;return a.uniforms.texelSize=new Float32Array(2),a.uniforms.matrix=new Float32Array(9),r!==void 0&&(a.matrix=r),a.width=n,a.height=i,a}return Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(r){var n=this;r.forEach(function(i,a){n.uniforms.matrix[a]=i})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(r){this.uniforms.texelSize[0]=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(r){this.uniforms.texelSize[1]=1/r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-cross-hatch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var DA=function(t,e){return DA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},DA(t,e)};function uIe(t,e){DA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var cIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,fIe=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`;(function(t){uIe(e,t);function e(){return t.call(this,cIe,fIe)||this}return e})(xt);/*!
 * @pixi/filter-crt - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MA=function(t,e){return MA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},MA(t,e)};function hIe(t,e){MA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var dIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,pIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;(function(t){hIe(e,t);function e(r){var n=t.call(this,dIe,pIe)||this;return n.time=0,n.seed=0,n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.seed=this.seed,this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(r){this.uniforms.curvature=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(r){this.uniforms.lineWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(r){this.uniforms.lineContrast=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(r){this.uniforms.verticalLine=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),e.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},e})(xt);/*!
 * @pixi/filter-drop-shadow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LA=function(t,e){return LA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},LA(t,e)};function vIe(t,e){LA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _m=function(){return _m=Object.assign||function(e){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_m.apply(this,arguments)},gIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,mIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`;(function(t){vIe(e,t);function e(r){var n=t.call(this)||this;n.angle=45,n._distance=5,n._resolution=Ve.FILTER_RESOLUTION;var i=r?_m(_m({},e.defaults),r):e.defaults,a=i.kernels,o=i.blur,s=i.quality,c=i.pixelSize,l=i.resolution;n._tintFilter=new xt(gIe,mIe),n._tintFilter.uniforms.color=new Float32Array(4),n._tintFilter.uniforms.shift=new Dt,n._tintFilter.resolution=l,n._blurFilter=a?new ym(a):new ym(o,s),n.pixelSize=c,n.resolution=l;var u=i.shadowOnly,f=i.rotation,h=i.distance,d=i.alpha,p=i.color;return n.shadowOnly=u,n.rotation=f,n.distance=h,n.alpha=d,n.color=p,n._updatePadding(),n}return e.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this._tintFilter.apply(r,n,o,1),this._blurFilter.apply(r,o,i,a),this.shadowOnly!==!0&&r.applyFilter(this,n,i,0),r.returnFilterTexture(o)},e.prototype._updatePadding=function(){this.padding=this.distance+this.blur*2},e.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._tintFilter&&(this._tintFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(r){this._distance=r,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.angle/Rl},set:function(r){this.angle=r*Rl,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(r){this._tintFilter.uniforms.alpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return Ii(this._tintFilter.uniforms.color)},set:function(r){Tn(r,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),e.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:Ve.FILTER_RESOLUTION},e})(xt);/*!
 * @pixi/filter-emboss - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var BA=function(t,e){return BA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},BA(t,e)};function yIe(t,e){BA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _Ie=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xIe=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`;(function(t){yIe(e,t);function e(r){r===void 0&&(r=5);var n=t.call(this,_Ie,xIe)||this;return n.strength=r,n}return Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-glow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NA=function(t,e){return NA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},NA(t,e)};function bIe(t,e){NA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var SIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,EIe=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;(function(t){bIe(e,t);function e(r){var n=this,i=Object.assign({},e.defaults,r),a=i.outerStrength,o=i.innerStrength,s=i.color,c=i.knockout,l=i.quality,u=Math.round(i.distance);return n=t.call(this,SIe,EIe.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/l/u).toFixed(7)).replace(/__DIST__/gi,u.toFixed(0)+".0"))||this,n.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(n,{color:s,outerStrength:a,innerStrength:o,padding:u,knockout:c}),n}return Object.defineProperty(e.prototype,"color",{get:function(){return Ii(this.uniforms.glowColor)},set:function(r){Tn(r,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(r){this.uniforms.outerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(r){this.uniforms.innerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(r){this.uniforms.knockout=r},enumerable:!1,configurable:!0}),e.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},e})(xt);/*!
 * @pixi/filter-motion-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UA=function(t,e){return UA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},UA(t,e)};function wIe(t,e){UA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var AIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,CIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`;(function(t){wIe(e,t);function e(r,n,i){r===void 0&&(r=[0,0]),n===void 0&&(n=5),i===void 0&&(i=0);var a=t.call(this,AIe,CIe)||this;return a.kernelSize=5,a.uniforms.uVelocity=new Float32Array(2),a._velocity=new al(a.velocityChanged,a),a.setVelocity(r),a.kernelSize=n,a.offset=i,a}return e.prototype.apply=function(r,n,i,a){var o=this.velocity,s=o.x,c=o.y;this.uniforms.uKernelSize=s!==0||c!==0?this.kernelSize:0,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"velocity",{get:function(){return this._velocity},set:function(r){this.setVelocity(r)},enumerable:!1,configurable:!0}),e.prototype.setVelocity=function(r){if(Array.isArray(r)){var n=r[0],i=r[1];this._velocity.set(n,i)}else this._velocity.copyFrom(r)},e.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1},Object.defineProperty(e.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(r){this.uniforms.uOffset=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-multi-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jA=function(t,e){return jA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},jA(t,e)};function TIe(t,e){jA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var OIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,PIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`;(function(t){TIe(e,t);function e(r,n,i){n===void 0&&(n=.05),i===void 0&&(i=r.length);var a=t.call(this,OIe,PIe.replace(/%maxColors%/g,i.toFixed(0)))||this;return a._replacements=[],a._maxColors=0,a.epsilon=n,a._maxColors=i,a.uniforms.originalColors=new Float32Array(i*3),a.uniforms.targetColors=new Float32Array(i*3),a.replacements=r,a}return Object.defineProperty(e.prototype,"replacements",{get:function(){return this._replacements},set:function(r){var n=this.uniforms.originalColors,i=this.uniforms.targetColors,a=r.length;if(a>this._maxColors)throw new Error("Length of replacements ("+a+") exceeds the maximum colors length ("+this._maxColors+")");n[a*3]=-1;for(var o=0;o<a;o++){var s=r[o],c=s[0];typeof c=="number"?c=Tn(c):s[0]=Ii(c),n[o*3]=c[0],n[o*3+1]=c[1],n[o*3+2]=c[2];var l=s[1];typeof l=="number"?l=Tn(l):s[1]=Ii(l),i[o*3]=l[0],i[o*3+1]=l[1],i[o*3+2]=l[2]}this._replacements=r},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(e.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-outline - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $A=function(t,e){return $A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},$A(t,e)};function RIe(t,e){$A(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var IIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,FIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`;(function(t){RIe(e,t);function e(r,n,i){r===void 0&&(r=1),n===void 0&&(n=0),i===void 0&&(i=.1);var a=t.call(this,IIe,FIe.replace(/\$\{angleStep\}/,e.getAngleStep(i)))||this;return a._thickness=1,a.uniforms.thickness=new Float32Array([0,0]),a.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(a,{thickness:r,color:n,quality:i}),a}return e.getAngleStep=function(r){var n=Math.max(r*e.MAX_SAMPLES,e.MIN_SAMPLES);return(Math.PI*2/n).toFixed(7)},e.prototype.apply=function(r,n,i,a){this.uniforms.thickness[0]=this._thickness/n._frame.width,this.uniforms.thickness[1]=this._thickness/n._frame.height,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"color",{get:function(){return Ii(this.uniforms.outlineColor)},set:function(r){Tn(r,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this.padding=r},enumerable:!1,configurable:!0}),e.MIN_SAMPLES=1,e.MAX_SAMPLES=100,e})(xt);/*!
 * @pixi/filter-pixelate - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var VA=function(t,e){return VA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},VA(t,e)};function kIe(t,e){VA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var DIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,MIe=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`;(function(t){kIe(e,t);function e(r){r===void 0&&(r=10);var n=t.call(this,DIe,MIe)||this;return n.size=r,n}return Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.size},set:function(r){typeof r=="number"&&(r=[r,r]),this.uniforms.size=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-radial-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var GA=function(t,e){return GA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},GA(t,e)};function LIe(t,e){GA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var BIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,NIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`;(function(t){LIe(e,t);function e(r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=[0,0]),i===void 0&&(i=5),a===void 0&&(a=-1);var o=t.call(this,BIe,NIe)||this;return o._angle=0,o.angle=r,o.center=n,o.kernelSize=i,o.radius=a,o}return e.prototype.apply=function(r,n,i,a){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this.uniforms.uRadian=r*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-shockwave - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WA=function(t,e){return WA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},WA(t,e)};function UIe(t,e){WA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$Ie=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,VIe=function(t){UIe(e,t);function e(r,n,i){r===void 0&&(r=[0,0]),i===void 0&&(i=0);var a=t.call(this,jIe,$Ie)||this;return a.center=r,Object.assign(a,e.defaults,n),a.time=i,a}return e.prototype.apply=function(r,n,i,a){this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(r){this.uniforms.wavelength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(r){this.uniforms.brightness=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(r){this.uniforms.speed=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),e.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},e}(xt);/*!
 * @pixi/filter-simple-lightmap - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zA=function(t,e){return zA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},zA(t,e)};function GIe(t,e){zA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var WIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zIe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`;(function(t){GIe(e,t);function e(r,n,i){n===void 0&&(n=0),i===void 0&&(i=1);var a=t.call(this,WIe,zIe)||this;return a._color=0,a.uniforms.dimensions=new Float32Array(2),a.uniforms.ambientColor=new Float32Array([0,0,0,i]),a.texture=r,a.color=n,a}return e.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(r){this.uniforms.uLightmap=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.ambientColor;typeof r=="number"?(Tn(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],this._color=Ii(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(r){this.uniforms.ambientColor[3]=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-tilt-shift - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var HA=function(t,e){return HA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},HA(t,e)};function u_(t,e){HA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var HIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,XIe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,G$=function(t){u_(e,t);function e(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=600);var o=t.call(this,HIe,XIe)||this;return o.uniforms.blur=r,o.uniforms.gradientBlur=n,o.uniforms.start=i||new Dt(0,window.innerHeight/2),o.uniforms.end=a||new Dt(600,window.innerHeight/2),o.uniforms.delta=new Dt(30,30),o.uniforms.texSize=new Dt(window.innerWidth,window.innerHeight),o.updateDelta(),o}return e.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(e.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(r){this.uniforms.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(r){this.uniforms.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.uniforms.start},set:function(r){this.uniforms.start=r,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.uniforms.end},set:function(r){this.uniforms.end=r,this.updateDelta()},enumerable:!1,configurable:!0}),e}(xt),YIe=function(t){u_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=r/i,this.uniforms.delta.y=n/i},e}(G$),qIe=function(t){u_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=-n/i,this.uniforms.delta.y=r/i},e}(G$);(function(t){u_(e,t);function e(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=600);var o=t.call(this)||this;return o.tiltShiftXFilter=new YIe(r,n,i,a),o.tiltShiftYFilter=new qIe(r,n,i,a),o}return e.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this.tiltShiftXFilter.apply(r,n,o,1),this.tiltShiftYFilter.apply(r,o,i,a),r.returnFilterTexture(o)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(r){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(r){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(r){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(r){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=r},enumerable:!1,configurable:!0}),e})(xt);/*!
 * @pixi/filter-twist - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XA=function(t,e){return XA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},XA(t,e)};function KIe(t,e){XA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ZIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,QIe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;(function(t){KIe(e,t);function e(r){var n=t.call(this,ZIe,QIe)||this;return Object.assign(n,e.defaults,r),n}return Object.defineProperty(e.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(r){this.uniforms.offset=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),e.defaults={radius:200,angle:4,padding:20,offset:new Dt},e})(xt);/*!
 * @pixi/filter-zoom-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var YA=function(t,e){return YA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},YA(t,e)};function JIe(t,e){YA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function eFe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var tFe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,rFe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;(function(t){JIe(e,t);function e(r){var n=this,i=Object.assign(e.defaults,r),a=i.maxKernelSize,o=eFe(i,["maxKernelSize"]);return n=t.call(this,tFe,rFe.replace("${maxKernelSize}",a.toFixed(1)))||this,Object.assign(n,o),n}return Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(r){this.uniforms.uStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(r){this.uniforms.uInnerRadius=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),e.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},e})(xt);const qA="shockwaveFilter";function nFe(t,e){const r=t.containerFilters.get(qA);if(r)return r;if(e){const n=new VIe([1280,720]);return n.time=0,t.addFilter(n),t.containerFilters.set(qA,n),n}}function iFe(t){return t.getOrCreateShockwaveFilter(!1)?t.getOrCreateShockwaveFilter().time:0}function aFe(t,e){if(e===0)t.removeFilter(qA);else{const r=t.getOrCreateShockwaveFilter();r&&(r.time=e)}}const KA=0,ZA="radiusAlphaFilter";class oFe extends xt{constructor(e,r){const n=`
// 半径透明度的fragment shader
precision mediump float;

uniform sampler2D uSampler;  // 输入纹理
varying vec2 vTextureCoord;  // 当前片元的纹理坐标
uniform vec2 center;         // 圆心坐标
uniform float radius;        // 圆的半径

void main(void) {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // 计算屏幕宽高比
    float aspect = 16.0 / 9.0;

    // 根据宽高比校正纹理坐标
    vec2 aspectCorrectCoord = vTextureCoord;
    aspectCorrectCoord.x *= aspect;

    // 计算片元到圆心的距离
    float dist = distance(aspectCorrectCoord, center * vec2(aspect, 1.0));

    // 使用smoothstep函数计算alpha值,实现边缘羽化效果
    float alpha = smoothstep(radius, radius + 0.05, dist);

    // 输出最终颜色
    gl_FragColor = color * (1.0 - alpha);
}
    `;super(null,n),this.uniforms.center=[e.x,e.y],this.uniforms.radius=r}set center(e){this.uniforms.center=[e.x,e.y]}get center(){return new Dt(this.uniforms.center[0],this.uniforms.center[1])}set radius(e){this.uniforms.radius=e}get radius(){return this.uniforms.radius}}function sFe(t,e){const r=t.containerFilters.get(ZA);if(r)return r;if(e){const n=new oFe(new Dt(.5,.5),KA);return n.radius=KA,t.addFilter(n),t.containerFilters.set(ZA,n),n}}function lFe(t){return t.getOrCreateShockwaveFilter(!1)?t.getOrCreateRadiusAlphaFilter().radius:KA}function uFe(t,e){if(e===0)t.removeFilter(ZA);else{const r=t.getOrCreateRadiusAlphaFilter();r&&(r.radius=e)}}class GS extends Cn{constructor(){super();qe(this,"containerFilters",new Map);qe(this,"baseX",0);qe(this,"baseY",0)}addFilter(r){this.filters?this.filters.push(r):this.filters=[r]}removeFilter(r){const n=this.containerFilters.get(r);if(n){const i=((this==null?void 0:this.filters)??[]).findIndex(a=>a===n);this.filters&&(this.filters.splice(i,1),this.containerFilters.delete(r))}}get blur(){return this.getOrCreateBlurFilter().blur}set blur(r){this.getOrCreateBlurFilter().blur=r}get x(){var n;return(((n=super.position)==null?void 0:n.x)??0)-this.baseX}set x(r){super.position&&(super.position.x=r+this.baseX)}get y(){var n;return(((n=super.position)==null?void 0:n.y)??0)-this.baseY}set y(r){super.position&&(super.position.y=r+this.baseY)}setBaseX(r){const n=this.x;this.baseX=r,this.x=n}setBaseY(r){const n=this.y;this.baseY=r,this.y=n}getOrCreateBlurFilter(){const r=this.containerFilters.get("blur");if(r)return r;{const n=new j$.BlurFilter;return n.blur=0,this.addFilter(n),this.containerFilters.set("blur",n),n}}getOrCreateOldFilmFilter(r=!0){const n=this.containerFilters.get("oldFilm");if(n)return n;if(r){const i=new uRe;return this.addFilter(i),this.containerFilters.set("oldFilm",i),i}else return null}get oldFilm(){return this.getOrCreateOldFilmFilter(!1)?1:0}set oldFilm(r){r===0?this.removeFilter("oldFilm"):this.getOrCreateOldFilmFilter()}getOrCreateDotFilter(r=!0){const n=this.containerFilters.get("dotFilm");if(n)return n;if(r){const i=new dRe;return this.addFilter(i),this.containerFilters.set("dotFilm",i),i}else return null}get dotFilm(){return this.getOrCreateDotFilter(!1)?1:0}set dotFilm(r){r===0?this.removeFilter("dotFilm"):this.getOrCreateDotFilter()}getOrCreateReflectionFilter(r=!0){const n=this.containerFilters.get("reflectionFilm");if(n)return n;if(r){const i=new mRe;return this.addFilter(i),this.containerFilters.set("reflectionFilm",i),i}else return null}get reflectionFilm(){return this.getOrCreateReflectionFilter(!1)?1:0}set reflectionFilm(r){r===0?this.removeFilter("reflectionFilm"):this.getOrCreateReflectionFilter()}getOrCreateGlitchFilter(r=!0){const n=this.containerFilters.get("glitchFilm");if(n)return n;if(r){const i=new bRe;return this.addFilter(i),this.containerFilters.set("glitchFilm",i),i}else return null}get glitchFilm(){return this.getOrCreateGlitchFilter(!1)?1:0}set glitchFilm(r){r===0?this.removeFilter("glitchFilm"):this.getOrCreateGlitchFilter()}getOrCreateRGBSplitFilter(r=!0){const n=this.containerFilters.get("rgbFilm");if(n)return n;if(r){const i=new ARe;return this.addFilter(i),this.containerFilters.set("rgbFilm",i),i}}get rgbFilm(){return this.getOrCreateRGBSplitFilter(!1)?1:0}set rgbFilm(r){r===0?this.removeFilter("rgbFilm"):this.getOrCreateRGBSplitFilter()}getOrCreateGodrayFilter(r=!0){const n=this.containerFilters.get("godrayFilm");if(n)return n;if(r){const i=new RRe;return this.addFilter(i),this.containerFilters.set("godrayFilm",i),i}}get godrayFilm(){return this.getOrCreateGodrayFilter(!1)?1:0}set godrayFilm(r){r===0?this.removeFilter("godrayFilm"):this.getOrCreateGodrayFilter()}getOrCreateShockwaveFilter(r=!0){return nFe(this,r)}get shockwaveFilter(){return iFe(this)}set shockwaveFilter(r){aFe(this,r)}getOrCreateRadiusAlphaFilter(r=!0){return sFe(this,r)}get radiusAlphaFilter(){return lFe(this)}set radiusAlphaFilter(r){uFe(this,r)}}var Ot;(function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"})(Ot||(Ot={}));var xm=function(){function t(e,r,n,i){r===void 0&&(r=new Array),n===void 0&&(n=0),i===void 0&&(i=new DataView(e.buffer)),this.strings=r,this.index=n,this.buffer=i}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},t.prototype.readShort=function(){var e=this.buffer.getInt16(this.index);return this.index+=2,e},t.prototype.readInt32=function(){var e=this.buffer.getInt32(this.index);return this.index+=4,e},t.prototype.readInt=function(e){var r=this.readByte(),n=r&127;return r&128&&(r=this.readByte(),n|=(r&127)<<7,r&128&&(r=this.readByte(),n|=(r&127)<<14,r&128&&(r=this.readByte(),n|=(r&127)<<21,r&128&&(r=this.readByte(),n|=(r&127)<<28)))),e?n:n>>>1^-(n&1)},t.prototype.readStringRef=function(){var e=this.readInt(!0);return e==0?null:this.strings[e-1]},t.prototype.readString=function(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;for(var r="",n=0;n<e;){var i=this.readUnsignedByte();switch(i>>4){case 12:case 13:r+=String.fromCharCode((i&31)<<6|this.readByte()&63),n+=2;break;case 14:r+=String.fromCharCode((i&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:r+=String.fromCharCode(i),n++}}return r},t.prototype.readFloat=function(){var e=this.buffer.getFloat32(this.index);return this.index+=4,e},t.prototype.readBoolean=function(){return this.readByte()!=0},t}(),W;(function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"})(W||(W={}));var At;(function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"})(At||(At={}));var Mr;(function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"})(Mr||(Mr={}));var Zr;(function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"})(Zr||(Zr={}));var mt;(function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"})(mt||(mt={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var QA=function(t,e){return QA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},QA(t,e)};function oh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");QA(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function e3(t){switch(t.toLowerCase()){case"nearest":return Pi.Nearest;case"linear":return Pi.Linear;case"mipmap":return Pi.MipMap;case"mipmapnearestnearest":return Pi.MipMapNearestNearest;case"mipmaplinearnearest":return Pi.MipMapLinearNearest;case"mipmapnearestlinear":return Pi.MipMapNearestLinear;case"mipmaplinearlinear":return Pi.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}}var Pi;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"})(Pi||(Pi={}));var ol;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"})(ol||(ol={}));var JA=function(){function t(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(t.prototype,"width",{get:function(){var e=this.texture;return e.trim?e.trim.width:e.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var e=this.texture;return e.trim?e.trim.height:e.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var e=this.texture;return e.trim?e.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var e=this.texture;return e.trim?e.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var e=this.texture;return this.originalHeight-this.height-(e.trim?e.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this.texture.rotate!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"degrees",{get:function(){return(360-this.texture.rotate*45)%360},enumerable:!1,configurable:!0}),t}(),cFe=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}return t}(),fFe=function(){function t(e,r,n){this.pages=new Array,this.regions=new Array,e&&this.addSpineAtlas(e,r,n)}return t.prototype.addTexture=function(e,r){for(var n=this.pages,i=null,a=0;a<n.length;a++)if(n[a].baseTexture===r.baseTexture){i=n[a];break}if(i===null){i=new t3,i.name="texturePage";var o=r.baseTexture;i.width=o.realWidth,i.height=o.realHeight,i.baseTexture=o,i.minFilter=i.magFilter=Pi.Nearest,i.uWrap=ol.ClampToEdge,i.vWrap=ol.ClampToEdge,n.push(i)}var s=new r3;return s.name=e,s.page=i,s.texture=r,s.index=-1,this.regions.push(s),s},t.prototype.addTextureHash=function(e,r){for(var n in e)e.hasOwnProperty(n)&&this.addTexture(r&&n.indexOf(".")!==-1?n.substr(0,n.lastIndexOf(".")):n,e[n])},t.prototype.addSpineAtlas=function(e,r,n){return this.load(e,r,n)},t.prototype.load=function(e,r,n){var i=this;if(r==null)throw new Error("textureLoader cannot be null.");var a=new hFe(e),o=new Array(4),s=null,c={},l=null;c.size=function(){s.width=parseInt(o[1]),s.height=parseInt(o[2])},c.format=function(){},c.filter=function(){s.minFilter=e3(o[1]),s.magFilter=e3(o[2])},c.repeat=function(){o[1].indexOf("x")!=-1&&(s.uWrap=ol.Repeat),o[1].indexOf("y")!=-1&&(s.vWrap=ol.Repeat)},c.pma=function(){s.pma=o[1]=="true"};var u={};u.xy=function(){l.x=parseInt(o[1]),l.y=parseInt(o[2])},u.size=function(){l.width=parseInt(o[1]),l.height=parseInt(o[2])},u.bounds=function(){l.x=parseInt(o[1]),l.y=parseInt(o[2]),l.width=parseInt(o[3]),l.height=parseInt(o[4])},u.offset=function(){l.offsetX=parseInt(o[1]),l.offsetY=parseInt(o[2])},u.orig=function(){l.originalWidth=parseInt(o[1]),l.originalHeight=parseInt(o[2])},u.offsets=function(){l.offsetX=parseInt(o[1]),l.offsetY=parseInt(o[2]),l.originalWidth=parseInt(o[3]),l.originalHeight=parseInt(o[4])},u.rotate=function(){var d=o[1],p=0;d.toLocaleLowerCase()=="true"?p=6:d.toLocaleLowerCase()=="false"?p=0:p=(720-parseFloat(d))%360/45,l.rotate=p},u.index=function(){l.index=parseInt(o[1])};for(var f=a.readLine();f!=null&&f.trim().length==0;)f=a.readLine();for(;!(f==null||f.trim().length==0||a.readEntry(o,f)==0);)f=a.readLine();var h=function(){for(;;){if(f==null)return n&&n(i);if(f.trim().length==0)s=null,f=a.readLine();else if(s===null){for(s=new t3,s.name=f.trim();a.readEntry(o,f=a.readLine())!=0;){var d=c[o[0]];d&&d()}i.pages.push(s),r(s.name,function(O){if(O===null)return i.pages.splice(i.pages.indexOf(s),1),n&&n(null);s.baseTexture=O,s.pma&&(O.alphaMode=Qi.PMA),O.valid||O.setSize(s.width,s.height),s.setFilters(),(!s.width||!s.height)&&(s.width=O.realWidth,s.height=O.realHeight,(!s.width||!s.height)&&console.log("ERROR spine atlas page "+s.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),h()});break}else{l=new cFe;var p=new r3;p.name=f,p.page=s;for(var v=null,y=null;;){var m=a.readEntry(o,f=a.readLine());if(m==0)break;var d=u[o[0]];if(d)d();else{v==null&&(v=[],y=[]),v.push(o[0]);for(var g=[],x=0;x<m;x++)g.push(parseInt(o[x+1]));y.push(g)}}l.originalWidth==0&&l.originalHeight==0&&(l.originalWidth=l.width,l.originalHeight=l.height);var b=s.baseTexture.resolution;l.x/=b,l.y/=b,l.width/=b,l.height/=b,l.originalWidth/=b,l.originalHeight/=b,l.offsetX/=b,l.offsetY/=b;var S=l.rotate%4!==0,w=new Mt(l.x,l.y,S?l.height:l.width,S?l.width:l.height),A=new Mt(0,0,l.originalWidth,l.originalHeight),C=new Mt(l.offsetX,l.originalHeight-l.height-l.offsetY,l.width,l.height);p.texture=new pt(p.page.baseTexture,w,A,C,l.rotate),p.index=l.index,p.texture.updateUvs(),i.regions.push(p)}}};h()},t.prototype.findRegion=function(e){for(var r=0;r<this.regions.length;r++)if(this.regions[r].name==e)return this.regions[r];return null},t.prototype.dispose=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].baseTexture.dispose()},t}(),hFe=function(){function t(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readEntry=function(e,r){if(r==null||(r=r.trim(),r.length==0))return 0;var n=r.indexOf(":");if(n==-1)return 0;e[0]=r.substr(0,n).trim();for(var i=1,a=n+1;;i++){var o=r.indexOf(",",a);if(o==-1)return e[i]=r.substr(a).trim(),i;if(e[i]=r.substr(a,o-a).trim(),a=o+1,i==4)return 4}},t}(),t3=function(){function t(){this.minFilter=Pi.Nearest,this.magFilter=Pi.Nearest,this.uWrap=ol.ClampToEdge,this.vWrap=ol.ClampToEdge}return t.prototype.setFilters=function(){var e=this.baseTexture,r=this.minFilter;r==Pi.Linear?e.scaleMode=An.LINEAR:this.minFilter==Pi.Nearest?e.scaleMode=An.NEAREST:(e.mipmap=Di.POW2,r==Pi.MipMapNearestNearest?e.scaleMode=An.NEAREST:e.scaleMode=An.LINEAR)},t}(),r3=function(t){oh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(JA),dFe=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)),pFe=Math.fround||dFe,W$=function(){function t(){this.array=new Array}return t.prototype.add=function(e){var r=this.contains(e);return this.array[e|0]=e|0,!r},t.prototype.contains=function(e){return this.array[e|0]!=null},t.prototype.remove=function(e){this.array[e|0]=void 0},t.prototype.clear=function(){this.array.length=0},t}(),z$=function(){function t(){this.entries={},this.size=0}return t.prototype.add=function(e){var r=this.entries[e];return this.entries[e]=!0,r?!1:(this.size++,!0)},t.prototype.addAll=function(e){for(var r=this.size,n=0,i=e.length;n<i;n++)this.add(e[n]);return r!=this.size},t.prototype.contains=function(e){return this.entries[e]},t.prototype.clear=function(){this.entries={},this.size=0},t}(),Ne=function(){function t(e,r,n,i){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.r=e,this.g=r,this.b=n,this.a=i}return t.prototype.set=function(e,r,n,i){return this.r=e,this.g=r,this.b=n,this.a=i,this.clamp()},t.prototype.setFromColor=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},t.prototype.setFromString=function(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this},t.prototype.add=function(e,r,n,i){return this.r+=e,this.g+=r,this.b+=n,this.a+=i,this.clamp()},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(e,r){e.r=((r&4278190080)>>>24)/255,e.g=((r&16711680)>>>16)/255,e.b=((r&65280)>>>8)/255,e.a=(r&255)/255},t.rgb888ToColor=function(e,r){e.r=((r&16711680)>>>16)/255,e.g=((r&65280)>>>8)/255,e.b=(r&255)/255},t.fromString=function(e){return new t().setFromString(e)},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}(),K=function(){function t(){}return t.clamp=function(e,r,n){return e<r?r:e>n?n:e},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(e){return e>0?1:e<0?-1:0},t.toInt=function(e){return e>0?Math.floor(e):Math.ceil(e)},t.cbrt=function(e){var r=Math.pow(Math.abs(e),.3333333333333333);return e<0?-r:r},t.randomTriangular=function(e,r){return t.randomTriangularWith(e,r,(e+r)*.5)},t.randomTriangularWith=function(e,r,n){var i=Math.random(),a=r-e;return i<=(n-e)/a?e+Math.sqrt(i*a*(n-e)):r-Math.sqrt((1-i)*a*(r-n))},t.isPowerOfTwo=function(e){return e&&(e&e-1)===0},t.PI=3.1415927,t.PI2=t.PI*2,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}(),vFe=function(){function t(){}return t.prototype.apply=function(e,r,n){return e+(r-e)*this.applyInternal(n)},t}(),gFe=function(t){oh(e,t);function e(r){var n=t.call(this)||this;return n.power=2,n.power=r,n}return e.prototype.applyInternal=function(r){return r<=.5?Math.pow(r*2,this.power)/2:Math.pow((r-1)*2,this.power)/(this.power%2==0?-2:2)+1},e}(vFe),H$=function(t){oh(e,t);function e(r){return t.call(this,r)||this}return e.prototype.applyInternal=function(r){return Math.pow(r-1,this.power)*(this.power%2==0?-1:1)+1},e}(gFe),ue=function(){function t(){}return t.arrayCopy=function(e,r,n,i,a){for(var o=r,s=i;o<r+a;o++,s++)n[s]=e[o]},t.arrayFill=function(e,r,n,i){for(var a=r;a<n;a++)e[a]=i},t.setArraySize=function(e,r,n){n===void 0&&(n=0);var i=e.length;if(i==r)return e;if(e.length=r,i<r)for(var a=i;a<r;a++)e[a]=n;return e},t.ensureArrayCapacity=function(e,r,n){return n===void 0&&(n=0),e.length>=r?e:t.setArraySize(e,r,n)},t.newArray=function(e,r){for(var n=new Array(e),i=0;i<e;i++)n[i]=r;return n},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?pFe(e):e},t.webkit602BugfixHelper=function(e,r){},t.contains=function(e,r,n){for(var i=0;i<e.length;i++)if(e[i]==r)return!0;return!1},t.enumValue=function(e,r){return e[r[0].toUpperCase()+r.slice(1)]},t.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",t}(),c_=function(){function t(e){this.items=new Array,this.instantiator=e}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(e){e.reset&&e.reset(),this.items.push(e)},t.prototype.freeAll=function(e){for(var r=0;r<e.length;r++)this.free(e[r])},t.prototype.clear=function(){this.items.length=0},t}(),yp=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=e,this.y=r}return t.prototype.set=function(e,r){return this.x=e,this.y=r,this},t.prototype.length=function(){var e=this.x,r=this.y;return Math.sqrt(e*e+r*r)},t.prototype.normalize=function(){var e=this.length();return e!=0&&(this.x/=e,this.y/=e),this},t}(),zO=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new c_(function(){return ue.newFloatArray(16)})}return t.prototype.update=function(e,r){if(!e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,i=this.polygons,a=this.polygonPool,o=e.slots,s=o.length;n.length=0,a.freeAll(i),i.length=0;for(var c=0;c<s;c++){var l=o[c];if(l.bone.active){var u=l.getAttachment();if(u!=null&&u.type===Ot.BoundingBox){var f=u;n.push(f);var h=a.obtain();h.length!=f.worldVerticesLength&&(h=ue.newFloatArray(f.worldVerticesLength)),i.push(h),f.computeWorldVertices(l,0,f.worldVerticesLength,h,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var e=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=this.polygons,o=0,s=a.length;o<s;o++)for(var c=a[o],l=c,u=0,f=c.length;u<f;u+=2){var h=l[u],d=l[u+1];e=Math.min(e,h),r=Math.min(r,d),n=Math.max(n,h),i=Math.max(i,d)}this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.aabbContainsPoint=function(e,r){return e>=this.minX&&e<=this.maxX&&r>=this.minY&&r<=this.maxY},t.prototype.aabbIntersectsSegment=function(e,r,n,i){var a=this.minX,o=this.minY,s=this.maxX,c=this.maxY;if(e<=a&&n<=a||r<=o&&i<=o||e>=s&&n>=s||r>=c&&i>=c)return!1;var l=(i-r)/(n-e),u=l*(a-e)+r;if(u>o&&u<c||(u=l*(s-e)+r,u>o&&u<c))return!0;var f=(o-r)/l+e;return f>a&&f<s||(f=(c-r)/l+e,f>a&&f<s)},t.prototype.aabbIntersectsSkeleton=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},t.prototype.containsPoint=function(e,r){for(var n=this.polygons,i=0,a=n.length;i<a;i++)if(this.containsPointPolygon(n[i],e,r))return this.boundingBoxes[i];return null},t.prototype.containsPointPolygon=function(e,r,n){for(var i=e,a=e.length,o=a-2,s=!1,c=0;c<a;c+=2){var l=i[c+1],u=i[o+1];if(l<n&&u>=n||u<n&&l>=n){var f=i[c];f+(n-l)/(u-l)*(i[o]-f)<r&&(s=!s)}o=c}return s},t.prototype.intersectsSegment=function(e,r,n,i){for(var a=this.polygons,o=0,s=a.length;o<s;o++)if(this.intersectsSegmentPolygon(a[o],e,r,n,i))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(e,r,n,i,a){for(var o=e,s=e.length,c=r-i,l=n-a,u=r*a-n*i,f=o[s-2],h=o[s-1],d=0;d<s;d+=2){var p=o[d],v=o[d+1],y=f*v-h*p,m=f-p,g=h-v,x=c*g-l*m,b=(u*m-c*y)/x;if((b>=f&&b<=p||b>=p&&b<=f)&&(b>=r&&b<=i||b>=i&&b<=r)){var S=(u*g-l*y)/x;if((S>=h&&S<=v||S>=v&&S<=h)&&(S>=n&&S<=a||S>=a&&S<=n))return!0}f=p,h=v}return!1},t.prototype.getPolygon=function(e){if(!e)throw new Error("boundingBox cannot be null.");var r=this.boundingBoxes.indexOf(e);return r==-1?null:this.polygons[r]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),mFe={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},Ws=[0,0,0],yFe=function(t){oh(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.region=null,r.attachment=null,r}return e}(ca),_Fe=function(t){oh(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i,a,o)||this;return s.region=null,s.attachment=null,s}return e}(U$),Qp=function(t){oh(e,t);function e(r){var n=t.call(this)||this;if(!r)throw new Error("The spineData param is required.");if(typeof r=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=r,n.createSkeleton(r),n.slotContainers=[],n.tempClipContainers=[];for(var i=0,a=n.skeleton.slots.length;i<a;i++){var o=n.skeleton.slots[i],s=o.getAttachment(),c=n.newContainer();if(n.slotContainers.push(c),n.addChild(c),n.tempClipContainers.push(null),!!s)if(s.type===Ot.Region){var l=s.name,u=n.createSprite(o,s,l);o.currentSprite=u,o.currentSpriteName=l,c.addChild(u)}else if(s.type===Ot.Mesh){var f=n.createMesh(o,s);o.currentMesh=f,o.currentMeshId=s.id,o.currentMeshName=s.name,c.addChild(f)}else s.type===Ot.Clipping&&(n.createGraphics(o,s),c.addChild(o.clippingContainer),c.addChild(o.currentGraphics))}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(r){var n;r!=this._debug&&((n=this._debug)===null||n===void 0||n.unregisterSpine(this),r==null||r.registerSpine(this),this._debug=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,this.updateTransform=r?e.prototype.autoUpdateTransform:Cn.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return Ii(this.tintRgb)},set:function(r){this.tintRgb=Tn(r,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delayLimit",{get:function(){var r=typeof this.localDelayLimit<"u"?this.localDelayLimit:mFe.GLOBAL_DELAY_LIMIT;return r||Number.MAX_VALUE},enumerable:!1,configurable:!0}),e.prototype.update=function(r){var n,i=this.delayLimit;if(r>i&&(r=i),this.state.update(r),this.state.apply(this.skeleton),!!this.skeleton){this.skeleton.updateWorldTransform();var a=this.skeleton.slots,o=this.color,s=null,c=null;o?(s=o.light,c=o.dark):s=this.tintRgb;for(var l=0,u=a.length;l<u;l++){var f=a[l],h=f.getAttachment(),d=this.slotContainers[l];if(!h){d.visible=!1;continue}var p=null;h.sequence&&h.sequence.apply(f,h);var v=h.region,y=h.color;switch(h!=null&&h.type){case Ot.Region:var m=d.transform;if(m.setFromMatrix(f.bone.matrix),v=h.region,f.currentMesh&&(f.currentMesh.visible=!1,f.currentMesh=null,f.currentMeshId=void 0,f.currentMeshName=void 0),!v){f.currentSprite&&(f.currentSprite.renderable=!1);break}if(!f.currentSpriteName||f.currentSpriteName!==h.name){var g=h.name;if(f.currentSprite&&(f.currentSprite.visible=!1),f.sprites=f.sprites||{},f.sprites[g]!==void 0)f.sprites[g].visible=!0;else{var x=this.createSprite(f,h,g);d.addChild(x)}f.currentSprite=f.sprites[g],f.currentSpriteName=g}f.currentSprite.renderable=!0,f.hackRegion||this.setSpriteRegion(h,f.currentSprite,v),f.currentSprite.color?p=f.currentSprite.color:(Ws[0]=s[0]*f.color.r*y.r,Ws[1]=s[1]*f.color.g*y.g,Ws[2]=s[2]*f.color.b*y.b,f.currentSprite.tint=Ii(Ws)),f.currentSprite.blendMode=f.blendMode;break;case Ot.Mesh:if(f.currentSprite){f.currentSprite.visible=!1,f.currentSprite=null,f.currentSpriteName=void 0;var b=new i_;b._parentID=-1,b._worldID=d.transform._worldID,d.transform=b}if(!v){f.currentMesh&&(f.currentMesh.renderable=!1);break}var S=h.id;if(f.currentMeshId===void 0||f.currentMeshId!==S){var w=S;if(f.currentMesh&&(f.currentMesh.visible=!1),f.meshes=f.meshes||{},f.meshes[w]!==void 0)f.meshes[w].visible=!0;else{var A=this.createMesh(f,h);d.addChild(A)}f.currentMesh=f.meshes[w],f.currentMeshName=h.name,f.currentMeshId=w}f.currentMesh.renderable=!0,h.computeWorldVerticesOld(f,f.currentMesh.vertices),f.currentMesh.color?p=f.currentMesh.color:(Ws[0]=s[0]*f.color.r*y.r,Ws[1]=s[1]*f.color.g*y.g,Ws[2]=s[2]*f.color.b*y.b,f.currentMesh.tint=Ii(Ws)),f.currentMesh.blendMode=f.blendMode,f.hackRegion||this.setMeshRegion(h,f.currentMesh,v);break;case Ot.Clipping:f.currentGraphics||(this.createGraphics(f,h),d.addChild(f.clippingContainer),d.addChild(f.currentGraphics)),this.updateGraphics(f,h),d.alpha=1,d.visible=!0;continue;default:d.visible=!1;continue}if(d.visible=!0,p){var C=f.color.r*y.r,O=f.color.g*y.g,P=f.color.b*y.b;p.setLight(s[0]*C+c[0]*(1-C),s[1]*O+c[1]*(1-O),s[2]*P+c[2]*(1-P)),f.darkColor?(C=f.darkColor.r,O=f.darkColor.g,P=f.darkColor.b):(C=0,O=0,P=0),p.setDark(s[0]*C+c[0]*(1-C),s[1]*O+c[1]*(1-O),s[2]*P+c[2]*(1-P))}d.alpha=f.color.a}for(var I=this.skeleton.drawOrder,R=null,F=null,l=0,u=I.length;l<u;l++){var f=a[I[l].data.index],d=this.slotContainers[I[l].data.index];if(F||d.parent!==null&&d.parent!==this&&(d.parent.removeChild(d),d.parent=this),f.currentGraphics&&f.getAttachment())F=f.clippingContainer,R=f.getAttachment(),F.children.length=0,this.children[l]=d,R.endSlot===f.data&&(R.endSlot=null);else if(F){var D=this.tempClipContainers[l];D||(D=this.tempClipContainers[l]=this.newContainer(),D.visible=!1),this.children[l]=D,d.parent=null,F.addChild(d),R.endSlot==f.data&&(F.renderable=!0,F=null,R=null)}else this.children[l]=d}(n=this._debug)===null||n===void 0||n.renderDebug(this)}},e.prototype.setSpriteRegion=function(r,n,i){n.attachment===r&&n.region===i||(n.region=i,n.attachment=r,n.texture=i.texture,n.rotation=r.rotation*K.degRad,n.position.x=r.x,n.position.y=r.y,n.alpha=r.color.a,i.size?(n.scale.x=i.size.width/i.originalWidth,n.scale.y=-i.size.height/i.originalHeight):(n.scale.x=r.scaleX*r.width/i.originalWidth,n.scale.y=-r.scaleY*r.height/i.originalHeight))},e.prototype.setMeshRegion=function(r,n,i){n.attachment===r&&n.region===i||(n.region=i,n.attachment=r,n.texture=i.texture,i.texture.updateUvs(),n.uvBuffer.update(r.regionUVs))},e.prototype.autoUpdateTransform=function(){{this.lastTime=this.lastTime||Date.now();var r=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(r)}Cn.prototype.updateTransform.call(this)},e.prototype.createSprite=function(r,n,i){var a=n.region;r.hackAttachment===n&&(a=r.hackRegion);var o=a?a.texture:null,s=this.newSprite(o);return s.anchor.set(.5),a&&this.setSpriteRegion(n,s,n.region),r.sprites=r.sprites||{},r.sprites[i]=s,s},e.prototype.createMesh=function(r,n){var i=n.region;r.hackAttachment===n&&(i=r.hackRegion,r.hackAttachment=null,r.hackRegion=null);var a=this.newMesh(i?i.texture:null,new Float32Array(n.regionUVs.length),n.regionUVs,new Uint16Array(n.triangles),fa.TRIANGLES);return typeof a._canvasPadding<"u"&&(a._canvasPadding=1.5),a.alpha=n.color.a,a.region=n.region,i&&this.setMeshRegion(n,a,i),r.meshes=r.meshes||{},r.meshes[n.id]=a,a},e.prototype.createGraphics=function(r,n){var i=this.newGraphics(),a=new cf([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(a),i.renderable=!1,r.currentGraphics=i,r.clippingContainer=this.newContainer(),r.clippingContainer.mask=r.currentGraphics,i},e.prototype.updateGraphics=function(r,n){var i=r.currentGraphics.geometry,a=i.graphicsData[0].shape.points,o=n.worldVerticesLength;a.length=o,n.computeWorldVertices(r,0,o,a,0,2),i.invalidate()},e.prototype.hackTextureBySlotIndex=function(r,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var a=this.skeleton.slots[r];if(!a)return!1;var o=a.getAttachment(),s=o.region;return n?(s=new JA,s.texture=n,s.size=i,a.hackRegion=s,a.hackAttachment=o):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite?this.setSpriteRegion(o,a.currentSprite,s):a.currentMesh&&this.setMeshRegion(o,a.currentMesh,s),!0},e.prototype.hackTextureBySlotName=function(r,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var a=this.skeleton.findSlotIndex(r);return a==-1?!1:this.hackTextureBySlotIndex(a,n,i)},e.prototype.hackTextureAttachment=function(r,n,i,a){a===void 0&&(a=null);var o=this.skeleton.findSlotIndex(r),s=this.skeleton.getAttachmentByName(r,n);s.region.texture=i;var c=this.skeleton.slots[o];if(!c)return!1;var l=c.getAttachment();if(n===l.name){var u=s.region;return i?(u=new JA,u.texture=i,u.size=a,c.hackRegion=u,c.hackAttachment=l):(c.hackRegion=null,c.hackAttachment=null),c.currentSprite&&c.currentSprite.region!=u?(this.setSpriteRegion(l,c.currentSprite,u),c.currentSprite.region=u):c.currentMesh&&c.currentMesh.region!=u&&this.setMeshRegion(l,c.currentMesh,u),!0}return!1},e.prototype.newContainer=function(){return new Cn},e.prototype.newSprite=function(r){return new yFe(r)},e.prototype.newGraphics=function(){return new Tf},e.prototype.newMesh=function(r,n,i,a,o){return new _Fe(r,n,i,a,o)},e.prototype.transformHack=function(){return 1},e.prototype.hackAttachmentGroups=function(r,n,i){if(r){for(var a=[],o=[],s=0,c=this.skeleton.slots.length;s<c;s++){var l=this.skeleton.slots[s],u=l.currentSpriteName||l.currentMeshName||"",f=l.currentSprite||l.currentMesh;u.endsWith(r)?(f.parentGroup=n,o.push(f)):i&&f&&(f.parentGroup=i,a.push(f))}return[a,o]}},e.prototype.destroy=function(r){this.debug=null;for(var n=0,i=this.skeleton.slots.length;n<i;n++){var a=this.skeleton.slots[n];for(var o in a.meshes)a.meshes[o].destroy(r);a.meshes=null;for(var s in a.sprites)a.sprites[s].destroy(r);a.sprites=null}for(var n=0,i=this.slotContainers.length;n<i;n++)this.slotContainers[n].destroy(r);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,t.prototype.destroy.call(this,r)},e.clippingPolygon=[],e}(Cn);Object.defineProperty(Qp.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}});function xFe(t){return t.type===vr.TYPE.JSON}function bFe(t){return t.xhrType===vr.XHR_RESPONSE_TYPE.BUFFER}vr.setExtensionXhrType("skel",vr.XHR_RESPONSE_TYPE.BUFFER);var SFe=function(){function t(){}return t.prototype.genMiddleware=function(){var e=this;return{use:function(r,n){if(!r.data)return n();var i=xFe(r)&&r.data.bones,a=bFe(r)&&(r.extension==="skel"||r.metadata&&r.metadata.spineMetadata);if(!i&&!a)return n();var o=null,s=r.data;i?o=e.createJsonParser():(o=e.createBinaryParser(),r.data instanceof ArrayBuffer&&(s=new Uint8Array(r.data)));var c=r.metadata||{},l=c?c.spineSkeletonScale:null;l&&(o.scale=l);var u=c.spineAtlas;if(u===!1)return n();if(u&&u.pages)return e.parseData(r,o,u,s),n();var f=c.spineAtlasSuffix||".atlas",h=r.url,d=h.indexOf("?");d>0&&(h=h.substr(0,d)),h=h.substr(0,h.lastIndexOf("."))+f,c.spineAtlasFile&&(h=c.spineAtlasFile),h=h.replace(this.baseUrl,"");var p={crossOrigin:r.crossOrigin,xhrType:vr.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:r},v={crossOrigin:r.crossOrigin,metadata:c.imageMetadata||null,parentResource:r},y=r.url.substr(0,r.url.lastIndexOf("/")+1);y=y.replace(this.baseUrl,"");var m=c.imageNamePrefix||r.name+"_atlas_page_",g=c.images?n3(c.images):c.image?n3({default:c.image}):c.imageLoader?c.imageLoader(this,m,y,v):EFe(this,m,y,v);function x(b){new fFe(b,g,function(S){S&&e.parseData(r,o,S,s),n()})}c.atlasRawData?x(c.atlasRawData):this.add(r.name+"_atlas",h,p,function(b){b.error?n():x(b.data)})}}},t}();function EFe(t,e,r,n){return r&&r.lastIndexOf("/")!==r.length-1&&(r+="/"),function(i,a){var o=e+i,s=r+i,c=t.resources[o];if(c){var l=function(){a(c.texture.baseTexture)};c.texture?l():c.onAfterMiddleware.add(l)}else t.add(o,s,n,function(u){u.error?a(null):(i.indexOf("-pma.")>=0&&(u.texture.baseTexture.alphaMode=Qi.PMA),a(u.texture.baseTexture))})}}function n3(t){return function(e,r){var n=t[e]||t.default;n&&n.baseTexture?r(n.baseTexture):r(n)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eC=function(t,e){return eC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},eC(t,e)};function Nr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");eC(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var HO=function(){function t(e){if(e==null)throw new Error("name cannot be null.");this.name=e}return t}(),tc=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.id=(e.nextID++&65535)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return e.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.deform,u=this.vertices,f=this.bones;if(f==null){l.length>0&&(u=l);for(var h=r.bone.matrix,d=h.tx,p=h.ty,v=h.a,y=h.c,m=h.b,g=h.d,x=n,b=o;b<i;x+=2,b+=s){var S=u[x],w=u[x+1];a[b]=S*v+w*y+d,a[b+1]=S*m+w*g+p}return}for(var A=0,C=0,O=0;O<n;O+=2){var P=f[A];A+=P+1,C+=P}var I=c.bones;if(l.length==0)for(var b=o,y=C*3;b<i;b+=s){var R=0,F=0,P=f[A++];for(P+=A;A<P;A++,y+=3){var h=I[f[A]].matrix,S=u[y],w=u[y+1],D=u[y+2];R+=(S*h.a+w*h.c+h.tx)*D,F+=(S*h.b+w*h.d+h.ty)*D}a[b]=R,a[b+1]=F}else for(var L=l,b=o,y=C*3,U=C<<1;b<i;b+=s){var R=0,F=0,P=f[A++];for(P+=A;A<P;A++,y+=3,U+=2){var h=I[f[A]].matrix,S=u[y]+L[U],w=u[y+1]+L[U+1],D=u[y+2];R+=(S*h.a+w*h.c+h.tx)*D,F+=(S*h.b+w*h.d+h.ty)*D}a[b]=R,a[b+1]=F}},e.prototype.copyTo=function(r){this.bones!=null?(r.bones=new Array(this.bones.length),ue.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,this.vertices!=null?(r.vertices=ue.newFloatArray(this.vertices.length),ue.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)):r.vertices=null,r.worldVerticesLength=this.worldVerticesLength,r.deformAttachment=this.deformAttachment},e.nextID=0,e}(HO),X$=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.BoundingBox,n.color=new Ne(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},e}(tc),Y$=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Clipping,n.color=new Ne(.2275,.2275,.8078,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},e}(tc),f_=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Mesh,n.color=new Ne(1,1,1,1),n.tempColor=new Ne(0,0,0,0),n}return e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},e.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var r=new e(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Float32Array(this.regionUVs.length),ue.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.triangles=new Array(this.triangles.length),ue.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,this.edges!=null&&(r.edges=new Array(this.edges.length),ue.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},e.prototype.newLinkedMesh=function(){var r=new e(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),r.deformAttachment=this.deformAttachment,r.setParentMesh(this.parentMesh!=null?this.parentMesh:this),r},e}(tc),_p=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Path,n.closed=!1,n.constantSpeed=!1,n.color=new Ne(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),ue.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},e}(tc),q$=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Point,n.color=new Ne(.38,.94,0,1),n}return e.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},e.prototype.computeWorldRotation=function(r){var n=r.matrix,i=K.cosDeg(this.rotation),a=K.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*K.radDeg},e.prototype.copy=function(){var r=new e(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},e}(tc),XO=function(){function t(e,r){if(this.deform=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new Ne,this.darkColor=e.darkColor==null?null:new Ne,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),YO=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new Ne(1,1,1,1),n.offset=ue.newFloatArray(8),n.uvs=ue.newFloatArray(8),n.tempColor=new Ne(1,1,1,1),n}return e.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*n,o=i+this.region.width*r,s=a+this.region.height*n,c=this.rotation*Math.PI/180,l=Math.cos(c),u=Math.sin(c),f=i*l+this.x,h=i*u,d=a*l+this.y,p=a*u,v=o*l+this.x,y=o*u,m=s*l+this.y,g=s*u,x=this.offset;x[e.OX1]=f-p,x[e.OY1]=d+h,x[e.OX2]=f-g,x[e.OY2]=m+h,x[e.OX3]=v-g,x[e.OY3]=m+y,x[e.OX4]=v-p,x[e.OY4]=d+y},e.prototype.setRegion=function(r){this.region=r;var n=this.uvs;r.rotate?(n[2]=r.u,n[3]=r.v2,n[4]=r.u,n[5]=r.v,n[6]=r.u2,n[7]=r.v,n[0]=r.u2,n[1]=r.v2):(n[0]=r.u,n[1]=r.v2,n[2]=r.u,n[3]=r.v,n[4]=r.u2,n[5]=r.v,n[6]=r.u2,n[7]=r.v2)},e.prototype.computeWorldVertices=function(r,n,i,a){var o=this.offset,s=r instanceof XO?r.bone.matrix:r.matrix,c=s.tx,l=s.ty,u=s.a,f=s.c,h=s.b,d=s.d,p=0,v=0;p=o[e.OX1],v=o[e.OY1],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX2],v=o[e.OY2],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX3],v=o[e.OY3],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX4],v=o[e.OY4],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l},e.prototype.copy=function(){var r=new e(this.name);return r.region=this.region,r.rendererObject=this.rendererObject,r.path=this.path,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,ue.arrayCopy(this.uvs,0,r.uvs,0,8),ue.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(HO),wFe=function(){function t(e,r){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=r}return t.prototype.begin=function(e){},t.prototype.transform=function(e,r,n,i){e.x+=K.randomTriangular(-this.jitterX,this.jitterY),e.y+=K.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),AFe=function(){function t(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return t.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},t.prototype.transform=function(e,r,n,i){var a=this.angle*K.degreesToRadians,o=e.x-this.worldX,s=e.y-this.worldY,c=Math.sqrt(o*o+s*s);if(c<this.radius){var l=t.interpolation.apply(0,a,(this.radius-c)/this.radius),u=Math.cos(l),f=Math.sin(l);e.x=u*o-f*s+this.worldX,e.y=f*o+u*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new H$(2),t}(),sn=function(){function t(e,r,n){if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=e,this.timelines=r,this.timelineIds=[];for(var i=0;i<r.length;i++)this.timelineIds[r[i].getPropertyId()]=!0;this.duration=n}return t.prototype.hasTimeline=function(e){return this.timelineIds[e]==!0},t.prototype.apply=function(e,r,n,i,a,o,s,c){if(e==null)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(e,r,n,a,o,s,c)},t.binarySearch=function(e,r,n){n===void 0&&(n=1);var i=0,a=e.length/n-2;if(a==0)return n;for(var o=a>>>1;;){if(e[(o+1)*n]<=r?i=o+1:a=o,i==a)return(i+1)*n;o=i+a>>>1}},t.linearSearch=function(e,r,n){for(var i=0,a=e.length-n;i<=a;i+=n)if(e[i]>r)return i;return-1},t}(),Gn;(function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"})(Gn||(Gn={}));var Jo=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=ue.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var r=e*t.BEZIER_SIZE;if(r==this.curves.length)return t.LINEAR;var n=this.curves[r];return n==t.LINEAR?t.LINEAR:n==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,r,n,i,a){var o=(-r*2+i)*.03,s=(-n*2+a)*.03,c=((r-i)*3+1)*.006,l=((n-a)*3+1)*.006,u=o*2+c,f=s*2+l,h=r*.3+o+c*.16666667,d=n*.3+s+l*.16666667,p=e*t.BEZIER_SIZE,v=this.curves;v[p++]=t.BEZIER;for(var y=h,m=d,g=p+t.BEZIER_SIZE-1;p<g;p+=2)v[p]=y,v[p+1]=m,h+=u,d+=f,u+=c,f+=l,y+=h,m+=d},t.prototype.getCurvePercent=function(e,r){r=K.clamp(r,0,1);var n=this.curves,i=e*t.BEZIER_SIZE,a=n[i];if(a==t.LINEAR)return r;if(a==t.STEPPED)return 0;i++;for(var o=0,s=i,c=i+t.BEZIER_SIZE-1;i<c;i+=2)if(o=n[i],o>=r){var l=void 0,u=void 0;return i==s?(l=0,u=0):(l=n[i-2],u=n[i-1]),u+(n[i+1]-u)*(r-l)/(o-l)}var f=n[i-1];return f+(1-f)*(r-o)/(1-o)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=10*2-1,t}(),la=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r<<1),n}return e.prototype.getPropertyId=function(){return(Gn.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+e.ROTATION]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.rotation=u.data.rotation;return;case W.first:var f=u.data.rotation-u.rotation;u.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*o}return}if(i>=l[l.length-e.ENTRIES]){var h=l[l.length+e.PREV_ROTATION];switch(s){case W.setup:u.rotation=u.data.rotation+h*o;break;case W.first:case W.replace:h+=u.data.rotation-u.rotation,h-=(16384-(16384.499999999996-h/360|0))*360;case W.add:u.rotation+=h*o}return}var d=sn.binarySearch(l,i,e.ENTRIES),p=l[d+e.PREV_ROTATION],v=l[d],y=this.getCurvePercent((d>>1)-1,1-(i-v)/(l[d+e.PREV_TIME]-v)),m=l[d+e.ROTATION]-p;switch(m=p+(m-(16384-(16384.499999999996-m/360|0))*360)*y,s){case W.setup:u.rotation=u.data.rotation+(m-(16384-(16384.499999999996-m/360|0))*360)*o;break;case W.first:case W.replace:m+=u.data.rotation-u.rotation;case W.add:u.rotation+=(m-(16384-(16384.499999999996-m/360|0))*360)*o}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(Jo),Gu=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.translate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.X]=i,this.frames[r+e.Y]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.x=u.data.x,u.y=u.data.y;return;case W.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=sn.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.X]-f)*v,h+=(l[d+e.Y]-h)*v}switch(s){case W.setup:u.x=u.data.x+f*o,u.y=u.data.y+h*o;break;case W.first:case W.replace:u.x+=(u.data.x+f-u.x)*o,u.y+=(u.data.y+h-u.y)*o;break;case W.add:u.x+=f*o,u.y+=h*o}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(Jo),qO=function(t){Nr(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Gn.scale<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case W.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X]*u.data.scaleX,h=l[l.length+e.PREV_Y]*u.data.scaleY;else{var d=sn.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=(f+(l[d+e.X]-f)*v)*u.data.scaleX,h=(h+(l[d+e.Y]-h)*v)*u.data.scaleY}if(o==1)s==W.add?(u.scaleX+=f-u.data.scaleX,u.scaleY+=h-u.data.scaleY):(u.scaleX=f,u.scaleY=h);else{var y=0,m=0;if(c==At.mixOut)switch(s){case W.setup:y=u.data.scaleX,m=u.data.scaleY,u.scaleX=y+(Math.abs(f)*K.signum(y)-y)*o,u.scaleY=m+(Math.abs(h)*K.signum(m)-m)*o;break;case W.first:case W.replace:y=u.scaleX,m=u.scaleY,u.scaleX=y+(Math.abs(f)*K.signum(y)-y)*o,u.scaleY=m+(Math.abs(h)*K.signum(m)-m)*o;break;case W.add:y=u.scaleX,m=u.scaleY,u.scaleX=y+(Math.abs(f)*K.signum(y)-u.data.scaleX)*o,u.scaleY=m+(Math.abs(h)*K.signum(m)-u.data.scaleY)*o}else switch(s){case W.setup:y=Math.abs(u.data.scaleX)*K.signum(f),m=Math.abs(u.data.scaleY)*K.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=m+(h-m)*o;break;case W.first:case W.replace:y=Math.abs(u.scaleX)*K.signum(f),m=Math.abs(u.scaleY)*K.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=m+(h-m)*o;break;case W.add:y=K.signum(f),m=K.signum(h),u.scaleX=Math.abs(u.scaleX)*y+(f-Math.abs(u.data.scaleX)*y)*o,u.scaleY=Math.abs(u.scaleY)*m+(h-Math.abs(u.data.scaleY)*m)*o}}}},e}(Gu),KO=function(t){Nr(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Gn.shear<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case W.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=sn.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=f+(l[d+e.X]-f)*v,h=h+(l[d+e.Y]-h)*v}switch(s){case W.setup:u.shearX=u.data.shearX+f*o,u.shearY=u.data.shearY+h*o;break;case W.first:case W.replace:u.shearX+=(u.data.shearX+f-u.shearX)*o,u.shearY+=(u.data.shearY+h-u.shearY)*o;break;case W.add:u.shearX+=f*o,u.shearY+=h*o}}},e}(Gu),xp=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.color<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.color.setFromColor(l.data.color);return;case W.first:var f=l.color,h=l.data.color;f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var d=0,p=0,v=0,y=0;if(i>=u[u.length-e.ENTRIES]){var m=u.length;d=u[m+e.PREV_R],p=u[m+e.PREV_G],v=u[m+e.PREV_B],y=u[m+e.PREV_A]}else{var g=sn.binarySearch(u,i,e.ENTRIES);d=u[g+e.PREV_R],p=u[g+e.PREV_G],v=u[g+e.PREV_B],y=u[g+e.PREV_A];var x=u[g],b=this.getCurvePercent(g/e.ENTRIES-1,1-(i-x)/(u[g+e.PREV_TIME]-x));d+=(u[g+e.R]-d)*b,p+=(u[g+e.G]-p)*b,v+=(u[g+e.B]-v)*b,y+=(u[g+e.A]-y)*b}if(o==1)l.color.set(d,p,v,y);else{var f=l.color;s==W.setup&&f.setFromColor(l.data.color),f.add((d-f.r)*o,(p-f.g)*o,(v-f.b)*o,(y-f.a)*o)}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(Jo),bp=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s,this.frames[r+e.R2]=c,this.frames[r+e.G2]=l,this.frames[r+e.B2]=u},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case W.first:var f=l.color,h=l.darkColor,d=l.data.color,p=l.data.darkColor;f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),h.add((p.r-h.r)*o,(p.g-h.g)*o,(p.b-h.b)*o,0)}return}var v=0,y=0,m=0,g=0,x=0,b=0,S=0;if(i>=u[u.length-e.ENTRIES]){var w=u.length;v=u[w+e.PREV_R],y=u[w+e.PREV_G],m=u[w+e.PREV_B],g=u[w+e.PREV_A],x=u[w+e.PREV_R2],b=u[w+e.PREV_G2],S=u[w+e.PREV_B2]}else{var A=sn.binarySearch(u,i,e.ENTRIES);v=u[A+e.PREV_R],y=u[A+e.PREV_G],m=u[A+e.PREV_B],g=u[A+e.PREV_A],x=u[A+e.PREV_R2],b=u[A+e.PREV_G2],S=u[A+e.PREV_B2];var C=u[A],O=this.getCurvePercent(A/e.ENTRIES-1,1-(i-C)/(u[A+e.PREV_TIME]-C));v+=(u[A+e.R]-v)*O,y+=(u[A+e.G]-y)*O,m+=(u[A+e.B]-m)*O,g+=(u[A+e.A]-g)*O,x+=(u[A+e.R2]-x)*O,b+=(u[A+e.G2]-b)*O,S+=(u[A+e.B2]-S)*O}if(o==1)l.color.set(v,y,m,g),l.darkColor.set(x,b,S,1);else{var f=l.color,h=l.darkColor;s==W.setup&&(f.setFromColor(l.data.color),h.setFromColor(l.data.darkColor)),f.add((v-f.r)*o,(y-f.g)*o,(m-f.b)*o,(g-f.a)*o),h.add((x-h.r)*o,(b-h.g)*o,(S-h.b)*o,0)}}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(Jo),Eu=function(){function t(e){this.frames=ue.newFloatArray(e),this.attachmentNames=new Array(e)}return t.prototype.getPropertyId=function(){return(Gn.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.attachmentNames[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.slots[this.slotIndex];if(c.bone.active){if(s==At.mixOut){o==W.setup&&this.setAttachment(e,c,c.data.attachmentName);return}var l=this.frames;if(n<l[0]){(o==W.setup||o==W.first)&&this.setAttachment(e,c,c.data.attachmentName);return}var u=0;n>=l[l.length-1]?u=l.length-1:u=sn.binarySearch(l,n,1)-1;var f=this.attachmentNames[u];e.slots[this.slotIndex].setAttachment(f==null?null:e.getAttachment(this.slotIndex,f))}},t.prototype.setAttachment=function(e,r,n){r.setAttachment(n==null?null:e.getAttachment(this.slotIndex,n))},t}(),i3=null,ZO=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r),n.frameVertices=new Array(r),i3==null&&(i3=ue.newFloatArray(64)),n}return e.prototype.getPropertyId=function(){return(Gn.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.frameVertices[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(!(!(u instanceof tc)||u.deformAttachment!=this.attachment)){var f=l.deform;f.length==0&&(s=W.setup);var h=this.frameVertices,d=h[0].length,p=this.frames;if(i<p[0]){var v=u;switch(s){case W.setup:f.length=0;return;case W.first:if(o==1){f.length=0;break}var y=ue.setArraySize(f,d);if(v.bones==null)for(var m=v.vertices,g=0;g<d;g++)y[g]+=(m[g]-y[g])*o;else{o=1-o;for(var g=0;g<d;g++)y[g]*=o}}return}var x=ue.setArraySize(f,d);if(i>=p[p.length-1]){var b=h[p.length-1];if(o==1)if(s==W.add){var v=u;if(v.bones==null)for(var m=v.vertices,S=0;S<d;S++)x[S]+=b[S]-m[S];else for(var w=0;w<d;w++)x[w]+=b[w]}else ue.arrayCopy(b,0,x,0,d);else switch(s){case W.setup:{var A=u;if(A.bones==null)for(var m=A.vertices,C=0;C<d;C++){var O=m[C];x[C]=O+(b[C]-O)*o}else for(var P=0;P<d;P++)x[P]=b[P]*o;break}case W.first:case W.replace:for(var I=0;I<d;I++)x[I]+=(b[I]-x[I])*o;break;case W.add:var v=u;if(v.bones==null)for(var m=v.vertices,R=0;R<d;R++)x[R]+=(b[R]-m[R])*o;else for(var F=0;F<d;F++)x[F]+=b[F]*o}return}var D=sn.binarySearch(p,i),L=h[D-1],U=h[D],Y=p[D],ee=this.getCurvePercent(D-1,1-(i-Y)/(p[D-1]-Y));if(o==1)if(s==W.add){var v=u;if(v.bones==null)for(var m=v.vertices,J=0;J<d;J++){var X=L[J];x[J]+=X+(U[J]-X)*ee-m[J]}else for(var M=0;M<d;M++){var X=L[M];x[M]+=X+(U[M]-X)*ee}}else for(var V=0;V<d;V++){var X=L[V];x[V]=X+(U[V]-X)*ee}else switch(s){case W.setup:{var $=u;if($.bones==null)for(var m=$.vertices,j=0;j<d;j++){var X=L[j],O=m[j];x[j]=O+(X+(U[j]-X)*ee-O)*o}else for(var te=0;te<d;te++){var X=L[te];x[te]=(X+(U[te]-X)*ee)*o}break}case W.first:case W.replace:for(var ie=0;ie<d;ie++){var X=L[ie];x[ie]+=(X+(U[ie]-X)*ee-x[ie])*o}break;case W.add:var v=u;if(v.bones==null)for(var m=v.vertices,de=0;de<d;de++){var X=L[de];x[de]+=(X+(U[de]-X)*ee-m[de])*o}else for(var he=0;he<d;he++){var X=L[he];x[he]+=(X+(U[he]-X)*ee)*o}}}}},e}(Jo),h_=function(){function t(e){this.frames=ue.newFloatArray(e),this.events=new Array(e)}return t.prototype.getPropertyId=function(){return Gn.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r){this.frames[e]=r.time,this.events[e]=r},t.prototype.apply=function(e,r,n,i,a,o,s){if(i!=null){var c=this.frames,l=this.frames.length;if(r>n)this.apply(e,r,Number.MAX_VALUE,i,a,o,s),r=-1;else if(r>=c[l-1])return;if(!(n<c[0])){var u=0;if(r<c[0])u=0;else{u=sn.binarySearch(c,r);for(var f=c[u];u>0&&c[u-1]==f;)u--}for(;u<l&&n>=c[u];u++)i.push(this.events[u])}}},t}(),ff=function(){function t(e){this.frames=ue.newFloatArray(e),this.drawOrders=new Array(e)}return t.prototype.getPropertyId=function(){return Gn.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.drawOrders[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.drawOrder,l=e.slots;if(s==At.mixOut&&o==W.setup){ue.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var u=this.frames;if(n<u[0]){(o==W.setup||o==W.first)&&ue.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var f=0;n>=u[u.length-1]?f=u.length-1:f=sn.binarySearch(u,n)-1;var h=this.drawOrders[f];if(h==null)ue.arrayCopy(l,0,c,0,l.length);else for(var d=0,p=h.length;d<p;d++)c[d]=l[h[d]]},t}(),Sp=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s,c){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.MIX]=i,this.frames[r+e.SOFTNESS]=a,this.frames[r+e.BEND_DIRECTION]=o,this.frames[r+e.COMPRESS]=s?1:0,this.frames[r+e.STRETCH]=c?1:0},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.ikConstraints[this.ikConstraintIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case W.first:u.mix+=(u.data.mix-u.mix)*o,u.softness+=(u.data.softness-u.softness)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}if(i>=l[l.length-e.ENTRIES]){s==W.setup?(u.mix=u.data.mix+(l[l.length+e.PREV_MIX]-u.data.mix)*o,u.softness=u.data.softness+(l[l.length+e.PREV_SOFTNESS]-u.data.softness)*o,c==At.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0)):(u.mix+=(l[l.length+e.PREV_MIX]-u.mix)*o,u.softness+=(l[l.length+e.PREV_SOFTNESS]-u.softness)*o,c==At.mixIn&&(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0));return}var f=sn.binarySearch(l,i,e.ENTRIES),h=l[f+e.PREV_MIX],d=l[f+e.PREV_SOFTNESS],p=l[f],v=this.getCurvePercent(f/e.ENTRIES-1,1-(i-p)/(l[f+e.PREV_TIME]-p));s==W.setup?(u.mix=u.data.mix+(h+(l[f+e.MIX]-h)*v-u.data.mix)*o,u.softness=u.data.softness+(d+(l[f+e.SOFTNESS]-d)*v-u.data.softness)*o,c==At.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0)):(u.mix+=(h+(l[f+e.MIX]-h)*v-u.mix)*o,u.softness+=(d+(l[f+e.SOFTNESS]-d)*v-u.softness)*o,c==At.mixIn&&(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0))}},e.ENTRIES=6,e.PREV_TIME=-6,e.PREV_MIX=-5,e.PREV_SOFTNESS=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.SOFTNESS=2,e.BEND_DIRECTION=3,e.COMPRESS=4,e.STRETCH=5,e}(Jo),Ep=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a,this.frames[r+e.SCALE]=o,this.frames[r+e.SHEAR]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.transformConstraints[this.transformConstraintIndex];if(u.active){if(i<l[0]){var f=u.data;switch(s){case W.setup:u.rotateMix=f.rotateMix,u.translateMix=f.translateMix,u.scaleMix=f.scaleMix,u.shearMix=f.shearMix;return;case W.first:u.rotateMix+=(f.rotateMix-u.rotateMix)*o,u.translateMix+=(f.translateMix-u.translateMix)*o,u.scaleMix+=(f.scaleMix-u.scaleMix)*o,u.shearMix+=(f.shearMix-u.shearMix)*o}return}var h=0,d=0,p=0,v=0;if(i>=l[l.length-e.ENTRIES]){var y=l.length;h=l[y+e.PREV_ROTATE],d=l[y+e.PREV_TRANSLATE],p=l[y+e.PREV_SCALE],v=l[y+e.PREV_SHEAR]}else{var m=sn.binarySearch(l,i,e.ENTRIES);h=l[m+e.PREV_ROTATE],d=l[m+e.PREV_TRANSLATE],p=l[m+e.PREV_SCALE],v=l[m+e.PREV_SHEAR];var g=l[m],x=this.getCurvePercent(m/e.ENTRIES-1,1-(i-g)/(l[m+e.PREV_TIME]-g));h+=(l[m+e.ROTATE]-h)*x,d+=(l[m+e.TRANSLATE]-d)*x,p+=(l[m+e.SCALE]-p)*x,v+=(l[m+e.SHEAR]-v)*x}if(s==W.setup){var f=u.data;u.rotateMix=f.rotateMix+(h-f.rotateMix)*o,u.translateMix=f.translateMix+(d-f.translateMix)*o,u.scaleMix=f.scaleMix+(p-f.scaleMix)*o,u.shearMix=f.shearMix+(v-f.shearMix)*o}else u.rotateMix+=(h-u.rotateMix)*o,u.translateMix+=(d-u.translateMix)*o,u.scaleMix+=(p-u.scaleMix)*o,u.shearMix+=(v-u.shearMix)*o}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(Jo),If=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.VALUE]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.position=u.data.position;return;case W.first:u.position+=(u.data.position-u.position)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=sn.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==W.setup?u.position=u.data.position+(f-u.data.position)*o:u.position+=(f-u.position)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(Jo),QO=function(t){Nr(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Gn.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.spacing=u.data.spacing;return;case W.first:u.spacing+=(u.data.spacing-u.spacing)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=sn.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==W.setup?u.spacing=u.data.spacing+(f-u.data.spacing)*o:u.spacing+=(f-u.spacing)*o}},e}(If),wp=function(t){Nr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Gn.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case W.setup:u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix;return;case W.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*o,u.translateMix+=(u.data.translateMix-u.translateMix)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_ROTATE],h=l[l.length+e.PREV_TRANSLATE];else{var d=sn.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_ROTATE],h=l[d+e.PREV_TRANSLATE];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.ROTATE]-f)*v,h+=(l[d+e.TRANSLATE]-h)*v}s==W.setup?(u.rotateMix=u.data.rotateMix+(f-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(h-u.data.translateMix)*o):(u.rotateMix+=(f-u.rotateMix)*o,u.translateMix+=(h-u.translateMix)*o)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(Jo),K$=function(){function t(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Q$(this),this.propertyIDs=new W$,this.animationsChanged=!1,this.trackEntryPool=new c_(function(){return new Z$}),this.data=e}return t.prototype.update=function(e){e*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a!=null){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=e*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s!=null){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime+=a.timeScale==0?0:(c/a.timeScale+e)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom!=null;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&a.mixingFrom==null){r[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(a.mixingFrom!=null&&this.updateMixingFrom(a,e)){var l=a.mixingFrom;for(a.mixingFrom=null,l!=null&&(l.mixingTo=null);l!=null;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,r){var n=e.mixingFrom;if(n==null)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,e.mixTime+=r,!1)},t.prototype.apply=function(e){if(e==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(s==null||s.delay>0)){i=!0;var c=a==0?W.first:s.mixBlend,l=s.alpha;s.mixingFrom!=null?l*=this.applyMixingFrom(s,e,c):s.trackTime>=s.trackEnd&&s.next==null&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=s.animation.timelines.length,d=s.animation.timelines;if(a==0&&l==1||c==W.add)for(var p=0;p<h;p++){ue.webkit602BugfixHelper(l,c);var v=d[p];v instanceof Eu?this.applyAttachmentTimeline(v,e,f,c,!0):v.apply(e,u,f,r,l,c,At.mixIn)}else{var y=s.timelineMode,m=s.timelinesRotation.length==0;m&&ue.setArraySize(s.timelinesRotation,h<<1,null);for(var g=s.timelinesRotation,p=0;p<h;p++){var x=d[p],b=y[p]==t.SUBSEQUENT?c:W.setup;x instanceof la?this.applyRotateTimeline(x,e,f,l,b,g,p<<1,m):x instanceof Eu?this.applyAttachmentTimeline(x,e,f,c,!0):(ue.webkit602BugfixHelper(l,c),x.apply(e,u,f,r,l,b,At.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}for(var S=this.unkeyedState+t.SETUP,w=e.slots,A=0,C=e.slots.length;A<C;A++){var O=w[A];if(O.attachmentState==S){var P=O.data.attachmentName;O.setAttachment(P==null?null:e.getAttachment(O.data.index,P))}}return this.unkeyedState+=2,this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,r,n){var i=e.mixingFrom;i.mixingFrom!=null&&this.applyMixingFrom(i,r,n);var a=0;e.mixDuration==0?(a=1,n==W.first&&(n=W.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),n!=W.first&&(n=i.mixBlend));var o=a<i.eventThreshold?this.events:null,s=a<i.attachmentThreshold,c=a<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,h=i.animation.timelines,d=i.alpha*e.interruptAlpha,p=d*(1-a);if(n==W.add)for(var v=0;v<f;v++)h[v].apply(r,l,u,o,p,n,At.mixOut);else{var y=i.timelineMode,m=i.timelineHoldMix,g=i.timelinesRotation.length==0;g&&ue.setArraySize(i.timelinesRotation,f<<1,null);var x=i.timelinesRotation;i.totalAlpha=0;for(var v=0;v<f;v++){var b=h[v],S=At.mixOut,w=void 0,A=0;switch(y[v]){case t.SUBSEQUENT:if(!c&&b instanceof ff)continue;w=n,A=p;break;case t.FIRST:w=W.setup,A=p;break;case t.HOLD_SUBSEQUENT:w=n,A=d;break;case t.HOLD_FIRST:w=W.setup,A=d;break;default:w=W.setup;var C=m[v];A=d*Math.max(0,1-C.mixTime/C.mixDuration);break}i.totalAlpha+=A,b instanceof la?this.applyRotateTimeline(b,r,u,A,w,x,v<<1,g):b instanceof Eu?this.applyAttachmentTimeline(b,r,u,w,s):(ue.webkit602BugfixHelper(A,n),c&&b instanceof ff&&w==W.setup&&(S=At.mixIn),b.apply(r,l,u,o,A,w,S))}}return e.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,a},t.prototype.applyAttachmentTimeline=function(e,r,n,i,a){var o=r.slots[e.slotIndex];if(o.bone.active){var s=e.frames;if(n<s[0])(i==W.setup||i==W.first)&&this.setAttachment(r,o,o.data.attachmentName,a);else{var c;n>=s[s.length-1]?c=s.length-1:c=sn.binarySearch(s,n)-1,this.setAttachment(r,o,e.attachmentNames[c],a)}o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(e,r,n,i){r.setAttachment(n==null?null:e.getAttachment(r.data.index,n)),i&&(r.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(e,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){e.apply(r,0,n,null,1,a,At.mixIn);return}var l=e,u=l.frames,f=r.bones[l.boneIndex];if(f.active){var h=0,d=0;if(n<u[0])switch(a){case W.setup:f.rotation=f.data.rotation;default:return;case W.first:h=f.rotation,d=f.data.rotation}else if(h=a==W.setup?f.data.rotation:f.rotation,n>=u[u.length-la.ENTRIES])d=f.data.rotation+u[u.length+la.PREV_ROTATION];else{var p=sn.binarySearch(u,n,la.ENTRIES),v=u[p+la.PREV_ROTATION],y=u[p],m=l.getCurvePercent((p>>1)-1,1-(n-y)/(u[p+la.PREV_TIME]-y));d=u[p+la.ROTATION]-v,d-=(16384-(16384.499999999996-d/360|0))*360,d=v+d*m+f.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var g=0,x=d-h;if(x-=(16384-(16384.499999999996-x/360|0))*360,x==0)g=o[s];else{var b=0,S=0;c?(b=0,S=x):(b=o[s],S=o[s+1]);var w=x>0,A=b>=0;K.signum(S)!=K.signum(x)&&Math.abs(S)<=90&&(Math.abs(b)>180&&(b+=360*K.signum(b)),A=w),g=x+b-b%360,A!=w&&(g+=360*K.signum(b)),o[s]=g}o[s+1]=x,h+=g*i,f.rotation=h-(16384-(16384.499999999996-h/360|0))*360}},t.prototype.queueEvents=function(e,r){for(var n=e.animationStart,i=e.animationEnd,a=i-n,o=e.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(e,u)}var f=!1;for(e.loop?f=a==0||o>e.trackTime%a:f=r>=i&&e.animationLast<i,f&&this.queue.complete(e);c<l;c++){var h=s[c];h.time<n||this.queue.event(e,s[c])}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var r=this.tracks[e];if(r!=null){this.queue.end(r),this.disposeNext(r);for(var n=r;;){var i=n.mixingFrom;if(i==null)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,r,n){var i=this.expandToIndex(e);this.tracks[e]=r,i!=null&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom!=null&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},t.prototype.setAnimation=function(e,r,n){var i=this.data.skeletonData.findAnimation(r);if(i==null)throw new Error("Animation not found: "+r);return this.setAnimationWith(e,i,n)},t.prototype.setAnimationWith=function(e,r,n){if(r==null)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(e);a!=null&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,i=!1):this.disposeNext(a));var o=this.trackEntry(e,r,n,a);return this.setCurrent(e,o,i),this.queue.drain(),o},t.prototype.addAnimation=function(e,r,n,i){var a=this.data.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);return this.addAnimationWith(e,a,n,i)},t.prototype.addAnimationWith=function(e,r,n,i){if(r==null)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(a!=null)for(;a.next!=null;)a=a.next;var o=this.trackEntry(e,r,n,a);if(a==null)this.setCurrent(e,o,!0),this.queue.drain();else if(a.next=o,i<=0){var s=a.animationEnd-a.animationStart;s!=0?(a.loop?i+=s*(1+(a.trackTime/s|0)):i+=Math.max(s,a.trackTime),i-=this.data.getMix(a.animation,r)):i=a.trackTime}return o.delay=i,o},t.prototype.setEmptyAnimation=function(e,r){var n=this.setAnimationWith(e,t.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},t.prototype.addEmptyAnimation=function(e,r,n){n<=0&&(n-=r);var i=this.addAnimationWith(e,t.emptyAnimation,!1,n);return i.mixDuration=r,i.trackEnd=r,i},t.prototype.setEmptyAnimations=function(e){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a!=null&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=r,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(ue.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,r,n,i){var a=this.trackEntryPool.obtain();return a.trackIndex=e,a.animation=r,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=i==null?0:this.data.getMix(i.animation,r),a.mixBlend=W.replace,a},t.prototype.disposeNext=function(e){for(var r=e.next;r!=null;)this.queue.dispose(r),r=r.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var n=this.tracks[e];if(n!=null){for(;n.mixingFrom!=null;)n=n.mixingFrom;do(n.mixingFrom==null||n.mixBlend!=W.add)&&this.computeHold(n),n=n.mixingTo;while(n!=null)}}},t.prototype.computeHold=function(e){var r=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,a=ue.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var o=ue.setArraySize(e.timelineHoldMix,i),s=this.propertyIDs;if(r!=null&&r.holdPrevious){for(var c=0;c<i;c++)a[c]=s.add(n[c].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;return}e:for(var c=0;c<i;c++){var l=n[c],u=l.getPropertyId();if(!s.add(u))a[c]=t.SUBSEQUENT;else if(r==null||l instanceof Eu||l instanceof ff||l instanceof h_||!r.animation.hasTimeline(u))a[c]=t.FIRST;else{for(var f=r.mixingTo;f!=null;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(e.mixDuration>0){a[c]=t.HOLD_MIX,o[c]=f;continue e}break}a[c]=t.HOLD_FIRST}}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(e==null)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,r,n)},t.prototype.addAnimationByName=function(e,r,n,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,r,n,i)},t.prototype.hasAnimation=function(e){var r=this.data.skeletonData.findAnimation(e);return r!==null},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new sn("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),Z$=function(){function t(){this.mixBlend=W.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),Q$=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(Ai.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(Ai.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(Ai.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(Ai.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(Ai.complete),this.objects.push(e)},t.prototype.event=function(e,r){this.objects.push(Ai.event),this.objects.push(e),this.objects.push(r)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];switch(i){case Ai.start:a.listener!=null&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++)r[o].start&&r[o].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case Ai.interrupt:a.listener!=null&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++)r[o].interrupt&&r[o].interrupt(a);break;case Ai.end:a.listener!=null&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++)r[o].end&&r[o].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case Ai.dispose:a.listener!=null&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++)r[o].dispose&&r[o].dispose(a);this.animState.trackEntryPool.free(a);break;case Ai.complete:a.listener!=null&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++)r[o].complete&&r[o].complete(a);var s=K.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,s);break;case Ai.event:var c=e[n+++2];a.listener!=null&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++)r[o].event&&r[o].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}(),Ai;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(Ai||(Ai={}));var CFe=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,r){},t}(),J$=function(){function t(e){if(this.animationToMixTime={},this.defaultMix=0,e==null)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return t.prototype.setMix=function(e,r,n){var i=this.skeletonData.findAnimation(e);if(i==null)throw new Error("Animation not found: "+e);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},t.prototype.setMixByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,r,n)},t.prototype.setMixWith=function(e,r,n){if(e==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var i=e.name+"."+r.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(e,r){var n=e.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},t.deprecatedWarning1=!1,t}(),JO=function(){function t(e){this.atlas=e}return t.prototype.newRegionAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var a=new YO(r);return a.region=i,a},t.prototype.newMeshAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var a=new f_(r);return a.region=i,a},t.prototype.newBoundingBoxAttachment=function(e,r){return new X$(r)},t.prototype.newPathAttachment=function(e,r){return new _p(r)},t.prototype.newPointAttachment=function(e,r){return new q$(r)},t.prototype.newClippingAttachment=function(e,r){return new Y$(r)},t}(),tC=function(){function t(e,r,n){if(this.matrix=new zr,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,r,n,i,a,o,s){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(c==null){var h=this.skeleton,d=n+90+s;l.a=K.cosDeg(n+o)*i*u,l.c=K.cosDeg(d)*a*u,l.b=K.sinDeg(n+o)*i*f,l.d=K.sinDeg(d)*a*f,l.tx=e*u+h.x,l.ty=r*f+h.y;return}var p=c.matrix.a,v=c.matrix.c,y=c.matrix.b,m=c.matrix.d;switch(l.tx=p*e+v*r+c.matrix.tx,l.ty=y*e+m*r+c.matrix.ty,this.data.transformMode){case mt.Normal:{var d=n+90+s,g=K.cosDeg(n+o)*i,x=K.cosDeg(d)*a,b=K.sinDeg(n+o)*i,S=K.sinDeg(d)*a;l.a=p*g+v*b,l.c=p*x+v*S,l.b=y*g+m*b,l.d=y*x+m*S;return}case mt.OnlyTranslation:{var d=n+90+s;l.a=K.cosDeg(n+o)*i,l.c=K.cosDeg(d)*a,l.b=K.sinDeg(n+o)*i,l.d=K.sinDeg(d)*a;break}case mt.NoRotationOrReflection:{var w=p*p+y*y,A=0;w>1e-4?(w=Math.abs(p*m-v*y)/w,p/=this.skeleton.scaleX,y/=this.skeleton.scaleY,v=y*w,m=p*w,A=Math.atan2(y,p)*K.radDeg):(p=0,y=0,A=90-Math.atan2(m,v)*K.radDeg);var C=n+o-A,O=n+s-A+90,g=K.cosDeg(C)*i,x=K.cosDeg(O)*a,b=K.sinDeg(C)*i,S=K.sinDeg(O)*a;l.a=p*g-v*b,l.c=p*x-v*S,l.b=y*g+m*b,l.d=y*x+m*S;break}case mt.NoScale:case mt.NoScaleOrReflection:{var P=K.cosDeg(n),I=K.sinDeg(n),R=(p*P+v*I)/u,F=(y*P+m*I)/f,w=Math.sqrt(R*R+F*F);w>1e-5&&(w=1/w),R*=w,F*=w,w=Math.sqrt(R*R+F*F),this.data.transformMode==mt.NoScale&&p*m-v*y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(w=-w);var D=Math.PI/2+Math.atan2(F,R),L=Math.cos(D)*w,U=Math.sin(D)*w,g=K.cosDeg(o)*i,x=K.cosDeg(90+s)*a,b=K.sinDeg(o)*i,S=K.sinDeg(90+s)*a;l.a=R*g+L*b,l.c=R*x+L*S,l.b=F*g+U*b,l.d=F*x+U*S;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*K.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*K.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,r=this.matrix;if(e==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*K.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*K.radDeg;return}var n=e.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,d=c*r.b-u*r.a,p=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+d*d),this.ascaleX>1e-4){var v=f*p-h*d;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(f*h+d*p,v)*K.radDeg,this.arotation=Math.atan2(d,f)*K.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*K.radDeg},t.prototype.worldToLocal=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=e.x-r.tx,l=e.y-r.ty;return e.x=c*o*s-l*i*s,e.y=l*n*s-c*a*s,e},t.prototype.localToWorld=function(e){var r=this.matrix,n=e.x,i=e.y;return e.x=n*r.a+i*r.c+r.tx,e.y=n*r.b+i*r.d+r.ty,e},t.prototype.worldToLocalRotation=function(e){var r=K.sinDeg(e),n=K.cosDeg(e),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*K.radDeg},t.prototype.localToWorldRotation=function(e){var r=K.sinDeg(e),n=K.cosDeg(e),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*K.radDeg},t.prototype.rotateWorld=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=K.cosDeg(e),c=K.sinDeg(e);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o,this.appliedValid=!1},t}(),eP=function(){function t(e,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=mt.Normal,this.skinRequired=!1,this.color=new Ne,e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}return t}(),d_=function(){function t(e,r,n){this.name=e,this.order=r,this.skinRequired=n}return t}(),tP=function(){function t(e,r){if(r==null)throw new Error("data cannot be null.");this.time=e,this.data=r}return t}(),rP=function(){function t(e){this.name=e}return t}(),e9=function(){function t(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},t.prototype.apply1=function(e,r,n,i,a,o,s){e.appliedValid||e.updateAppliedTransform();var c=e.parent.matrix,l=c.a,u=c.c,f=c.b,h=c.d,d=-e.ashearX-e.arotation,p=0,v=0;switch(e.data.transformMode){case mt.OnlyTranslation:p=r-e.worldX,v=n-e.worldY;break;case mt.NoRotationOrReflection:var y=Math.abs(l*h-u*f)/(l*l+f*f),m=l/e.skeleton.scaleX,g=f/e.skeleton.scaleY;u=-g*y*e.skeleton.scaleX,h=m*y*e.skeleton.scaleY,d+=Math.atan2(g,m)*K.radDeg;default:var x=r-c.tx,b=n-c.ty,S=l*h-u*f;p=(x*h-b*u)/S-e.ax,v=(b*l-x*f)/S-e.ay}d+=Math.atan2(v,p)*K.radDeg,e.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var w=e.ascaleX,A=e.ascaleY;if(i||a){switch(e.data.transformMode){case mt.NoScale:case mt.NoScaleOrReflection:p=r-e.worldX,v=n-e.worldY}var C=e.data.length*w,O=Math.sqrt(p*p+v*v);if(i&&O<C||a&&O>C&&C>1e-4){var y=(O/C-1)*s+1;w*=y,o&&(A*=y)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+d*s,w,A,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,r,n,i,a,o,s,c){if(c==0){r.updateWorldTransform();return}e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var l=e.ax,u=e.ay,f=e.ascaleX,h=f,d=e.ascaleY,p=r.ascaleX,v=e.matrix,y=0,m=0,g=0;f<0?(f=-f,y=180,g=-1):(y=0,g=1),d<0&&(d=-d,g=-g),p<0?(p=-p,m=180):m=0;var x=r.ax,b=0,S=0,w=0,A=v.a,C=v.c,O=v.b,P=v.d,I=Math.abs(f-d)<=1e-4;I?(b=r.ay,S=A*x+C*b+v.tx,w=O*x+P*b+v.ty):(b=0,S=A*x+v.tx,w=O*x+v.ty);var R=e.parent.matrix;A=R.a,C=R.c,O=R.b,P=R.d;var F=1/(A*P-C*O),D=S-R.tx,L=w-R.ty,U=(D*P-L*C)*F-l,Y=(L*A-D*O)*F-u,ee=Math.sqrt(U*U+Y*Y),J=r.data.length*p,X,M;if(ee<1e-4){this.apply1(e,n,i,!1,o,!1,c),r.updateWorldTransformWith(x,b,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}D=n-R.tx,L=i-R.ty;var V=(D*P-L*C)*F-l,$=(L*A-D*O)*F-u,j=V*V+$*$;if(s!=0){s*=f*(p+1)/2;var te=Math.sqrt(j),ie=te-ee-J*f+s;if(ie>0){var de=Math.min(1,ie/(s*2))-1;de=(ie-s*(1-de*de))/te,V-=de*V,$-=de*$,j=V*V+$*$}}e:if(I){J*=f;var he=(j-ee*ee-J*J)/(2*ee*J);he<-1?he=-1:he>1&&(he=1,o&&(h*=(Math.sqrt(j)/(ee+J)-1)*c+1)),M=Math.acos(he)*a,A=ee+J*he,C=J*Math.sin(M),X=Math.atan2($*A-V*C,V*A+$*C)}else{A=f*J,C=d*J;var Ee=A*A,Oe=C*C,ye=Math.atan2($,V);O=Oe*ee*ee+Ee*j-Ee*Oe;var Ae=-2*Oe*ee,_e=Oe-Ee;if(P=Ae*Ae-4*_e*O,P>=0){var we=Math.sqrt(P);Ae<0&&(we=-we),we=-(Ae+we)/2;var $e=we/_e,Xe=O/we,ke=Math.abs($e)<Math.abs(Xe)?$e:Xe;if(ke*ke<=j){L=Math.sqrt(j-ke*ke)*a,X=ye-Math.atan2(L,ke),M=Math.atan2(L/d,(ke-ee)/f);break e}}var at=K.PI,vt=ee-A,gt=vt*vt,tt=0,ot=0,dt=ee+A,Xt=dt*dt,rr=0;O=-A*ee/(Ee-Oe),O>=-1&&O<=1&&(O=Math.acos(O),D=A*Math.cos(O)+ee,L=C*Math.sin(O),P=D*D+L*L,P<gt&&(at=O,gt=P,vt=D,tt=L),P>Xt&&(ot=O,Xt=P,dt=D,rr=L)),j<=(gt+Xt)/2?(X=ye-Math.atan2(tt*a,vt),M=at*a):(X=ye-Math.atan2(rr*a,dt),M=ot*a)}var qt=Math.atan2(b,x)*g,Vt=e.arotation;X=(X-qt)*K.radDeg+y-Vt,X>180?X-=360:X<-180&&(X+=360),e.updateWorldTransformWith(l,u,Vt+X*c,h,e.ascaleY,0,0),Vt=r.arotation,M=((M+qt)*K.radDeg-r.ashearX)*g+m-Vt,M>180?M-=360:M<-180&&(M+=360),r.updateWorldTransformWith(x,b,Vt+M*c,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},t}(),nP=function(t){Nr(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return e}(d_),iP=function(t){Nr(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n}return e}(d_),Sn;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"})(Sn||(Sn={}));var t9=function(){function t(e,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,i=e.bones.length;n<i;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof _p){var r=this.rotateMix,n=this.translateMix,i=n>0,a=r>0;if(!(!i&&!a)){var o=this.data,s=o.spacingMode,c=s==Sn.Length,l=o.rotateMode,u=l==Zr.Tangent,f=l==Zr.ChainScale,h=this.bones.length,d=u?h:h+1,p=this.bones,v=ue.setArraySize(this.spaces,d),y=null,m=this.spacing;if(f||c){f&&(y=ue.setArraySize(this.lengths,h));for(var g=0,x=d-1;g<x;){var b=p[g],S=b.data.length;if(S<t.epsilon)f&&(y[g]=0),v[++g]=0;else{var w=S*b.matrix.a,A=S*b.matrix.b,C=Math.sqrt(w*w+A*A);f&&(y[g]=C),v[++g]=(c?S+m:m)*C/S}}}else for(var g=1;g<d;g++)v[g]=m;var O=this.computeWorldPositions(e,d,u,o.positionMode==Mr.Percent,s==Sn.Percent),P=O[0],I=O[1],R=o.offsetRotation,F=!1;if(R==0)F=l==Zr.Chain;else{F=!1;var D=this.target.bone.matrix;R*=D.a*D.d-D.b*D.c>0?K.degRad:-K.degRad}for(var g=0,D=3;g<h;g++,D+=3){var b=p[g],L=b.matrix;L.tx+=(P-L.tx)*n,L.ty+=(I-L.ty)*n;var w=O[D],A=O[D+1],U=w-P,Y=A-I;if(f){var ee=y[g];if(ee!=0){var J=(Math.sqrt(U*U+Y*Y)/ee-1)*r+1;L.a*=J,L.b*=J}}if(P=w,I=A,a){var X=L.a,M=L.c,V=L.b,$=L.d,j=0,te=0,ie=0;if(u?j=O[D-1]:v[g+1]==0?j=O[D+2]:j=Math.atan2(Y,U),j-=Math.atan2(V,X),F){te=Math.cos(j),ie=Math.sin(j);var de=b.data.length;P+=(de*(te*X-ie*V)-U)*r,I+=(de*(ie*X+te*V)-Y)*r}else j+=R;j>K.PI?j-=K.PI2:j<-K.PI&&(j+=K.PI2),j*=r,te=Math.cos(j),ie=Math.sin(j),L.a=te*X-ie*V,L.c=te*M-ie*$,L.b=ie*X+te*V,L.d=ie*M+te*$}b.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,r,n,i,a){var o=this.target,s=this.position,c=this.spaces,l=ue.setArraySize(this.positions,r*3+2),u=null,f=e.closed,h=e.worldVerticesLength,d=h/6,p=t.NONE;if(!e.constantSpeed){var v=e.lengths;d-=f?1:2;var y=v[d];if(i&&(s*=y),a)for(var m=0;m<r;m++)c[m]*=y;u=ue.setArraySize(this.world,8);for(var m=0,g=0,x=0;m<r;m++,g+=3){var b=c[m];s+=b;var S=s;if(f)S%=y,S<0&&(S+=y),x=0;else if(S<0){p!=t.BEFORE&&(p=t.BEFORE,e.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(S,u,0,l,g);continue}else if(S>y){p!=t.AFTER&&(p=t.AFTER,e.computeWorldVertices(o,h-6,4,u,0,2)),this.addAfterPosition(S-y,u,0,l,g);continue}for(;;x++){var w=v[x];if(!(S>w)){if(x==0)S/=w;else{var A=v[x-1];S=(S-A)/(w-A)}break}}x!=p&&(p=x,f&&x==d?(e.computeWorldVertices(o,h-4,4,u,0,2),e.computeWorldVertices(o,0,4,u,4,2)):e.computeWorldVertices(o,x*6+2,8,u,0,2)),this.addCurvePosition(S,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,g,n||m>0&&b==0)}return l}f?(h+=2,u=ue.setArraySize(this.world,h),e.computeWorldVertices(o,2,h-4,u,0,2),e.computeWorldVertices(o,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(d--,h-=4,u=ue.setArraySize(this.world,h),e.computeWorldVertices(o,2,h,u,0,2));for(var C=ue.setArraySize(this.curves,d),O=0,P=u[0],I=u[1],R=0,F=0,D=0,L=0,U=0,Y=0,ee=0,J=0,X=0,M=0,V=0,$=0,j=0,te=0,m=0,ie=2;m<d;m++,ie+=6)R=u[ie],F=u[ie+1],D=u[ie+2],L=u[ie+3],U=u[ie+4],Y=u[ie+5],ee=(P-R*2+D)*.1875,J=(I-F*2+L)*.1875,X=((R-D)*3-P+U)*.09375,M=((F-L)*3-I+Y)*.09375,V=ee*2+X,$=J*2+M,j=(R-P)*.75+ee+X*.16666667,te=(F-I)*.75+J+M*.16666667,O+=Math.sqrt(j*j+te*te),j+=V,te+=$,V+=X,$+=M,O+=Math.sqrt(j*j+te*te),j+=V,te+=$,O+=Math.sqrt(j*j+te*te),j+=V+X,te+=$+M,O+=Math.sqrt(j*j+te*te),C[m]=O,P=U,I=Y;if(i&&(s*=O),a)for(var m=0;m<r;m++)c[m]*=O;for(var de=this.segments,he=0,m=0,g=0,x=0,Ee=0;m<r;m++,g+=3){var b=c[m];s+=b;var S=s;if(f)S%=O,S<0&&(S+=O),x=0;else if(S<0){this.addBeforePosition(S,u,0,l,g);continue}else if(S>O){this.addAfterPosition(S-O,u,h-4,l,g);continue}for(;;x++){var Oe=C[x];if(!(S>Oe)){if(x==0)S/=Oe;else{var A=C[x-1];S=(S-A)/(Oe-A)}break}}if(x!=p){p=x;var ye=x*6;for(P=u[ye],I=u[ye+1],R=u[ye+2],F=u[ye+3],D=u[ye+4],L=u[ye+5],U=u[ye+6],Y=u[ye+7],ee=(P-R*2+D)*.03,J=(I-F*2+L)*.03,X=((R-D)*3-P+U)*.006,M=((F-L)*3-I+Y)*.006,V=ee*2+X,$=J*2+M,j=(R-P)*.3+ee+X*.16666667,te=(F-I)*.3+J+M*.16666667,he=Math.sqrt(j*j+te*te),de[0]=he,ye=1;ye<8;ye++)j+=V,te+=$,V+=X,$+=M,he+=Math.sqrt(j*j+te*te),de[ye]=he;j+=V,te+=$,he+=Math.sqrt(j*j+te*te),de[8]=he,j+=V+X,te+=$+M,he+=Math.sqrt(j*j+te*te),de[9]=he,Ee=0}for(S*=he;;Ee++){var Ae=de[Ee];if(!(S>Ae)){if(Ee==0)S/=Ae;else{var A=de[Ee-1];S=Ee+(S-A)/(Ae-A)}break}}this.addCurvePosition(S*.1,P,I,R,F,D,L,U,Y,l,g,n||m>0&&b==0)}return l},t.prototype.addBeforePosition=function(e,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addAfterPosition=function(e,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addCurvePosition=function(e,r,n,i,a,o,s,c,l,u,f,h){(e==0||isNaN(e))&&(e=1e-4);var d=e*e,p=d*e,v=1-e,y=v*v,m=y*v,g=v*e,x=g*3,b=v*x,S=x*e,w=r*m+i*b+o*S+c*p,A=n*m+a*b+s*S+l*p;u[f]=w,u[f+1]=A,h&&(u[f+2]=Math.atan2(A-(n*y+a*g*2+s*d),w-(r*y+i*g*2+o*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),r9=function(){function t(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new yp,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?K.degRad:-K.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var m=p[v],g=!1,x=m.matrix;if(e!=0){var b=x.a,S=x.c,w=x.b,A=x.d,C=Math.atan2(l,s)-Math.atan2(w,b)+h;C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2),C*=e;var O=Math.cos(C),P=Math.sin(C);x.a=O*b-P*w,x.c=O*S-P*A,x.b=P*b+O*w,x.d=P*S+O*A,g=!0}if(r!=0){var I=this.temp;a.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),x.tx+=(I.x-x.tx)*r,x.ty+=(I.y-x.ty)*r,g=!0}if(n>0){var R=Math.sqrt(x.a*x.a+x.b*x.b),F=Math.sqrt(s*s+l*l);R>1e-5&&(R=(R+(F-R+this.data.offsetScaleX)*n)/R),x.a*=R,x.b*=R,R=Math.sqrt(x.c*x.c+x.d*x.d),F=Math.sqrt(c*c+u*u),R>1e-5&&(R=(R+(F-R+this.data.offsetScaleY)*n)/R),x.c*=R,x.d*=R,g=!0}if(i>0){var S=x.c,A=x.d,D=Math.atan2(A,S),C=Math.atan2(u,c)-Math.atan2(l,s)-(D-Math.atan2(x.b,x.a));C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2),C=D+(C+d)*i;var R=Math.sqrt(S*S+A*A);x.c=Math.cos(C)*R,x.d=Math.sin(C)*R,g=!0}g&&(m.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?K.degRad:-K.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var m=p[v],g=!1,x=m.matrix;if(e!=0){var b=x.a,S=x.c,w=x.b,A=x.d,C=Math.atan2(l,s)+h;C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2),C*=e;var O=Math.cos(C),P=Math.sin(C);x.a=O*b-P*w,x.c=O*S-P*A,x.b=P*b+O*w,x.d=P*S+O*A,g=!0}if(r!=0){var I=this.temp;a.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),x.tx+=I.x*r,x.ty+=I.y*r,g=!0}if(n>0){var R=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*n+1;x.a*=R,x.b*=R,R=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1,x.c*=R,x.d*=R,g=!0}if(i>0){var C=Math.atan2(u,c)-Math.atan2(l,s);C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2);var S=x.c,A=x.d;C=Math.atan2(A,S)+(C-K.PI/2+d)*i;var R=Math.sqrt(S*S+A*A);x.c=Math.cos(C)*R,x.d=Math.sin(C)*R,g=!0}g&&(m.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(e!=0){var f=a.arotation-u+this.data.offsetRotation;f-=(16384-(16384.499999999996-f/360|0))*360,u+=f*e}var h=l.ax,d=l.ay;r!=0&&(h+=(a.ax-h+this.data.offsetX)*r,d+=(a.ay-d+this.data.offsetY)*r);var p=l.ascaleX,v=l.ascaleY;n>0&&(p>1e-5&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*n)/p),v>1e-5&&(v=(v+(a.ascaleY-v+this.data.offsetScaleY)*n)/v));var y=l.ashearY;if(i>0){var f=a.ashearY-y+this.data.offsetShearY;f-=(16384-(16384.499999999996-f/360|0))*360,l.shearY+=f*i}l.updateWorldTransformWith(h,d,u,p,v,l.ashearX,y)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;e!=0&&(u+=(a.arotation+this.data.offsetRotation)*e);var f=l.ax,h=l.ay;r!=0&&(f+=(a.ax+this.data.offsetX)*r,h+=(a.ay+this.data.offsetY)*r);var d=l.ascaleX,p=l.ascaleY;n>0&&(d>1e-5&&(d*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var v=l.ashearY;i>0&&(v+=(a.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(f,h,u,d,p,l.ashearX,v)}},t}(),n9=function(){function t(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,e==null)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var n=e.bones[r],i=void 0;if(n.parent==null)i=new tC(n,this,null);else{var a=this.bones[n.parent.index];i=new tC(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<e.slots.length;r++){var o=e.slots[r],i=this.bones[o.boneData.index],s=new XO(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<e.ikConstraints.length;r++){var c=e.ikConstraints[r];this.ikConstraints.push(new e9(c,this))}this.transformConstraints=new Array;for(var r=0;r<e.transformConstraints.length;r++){var l=e.transformConstraints[r];this.transformConstraints.push(new r9(l,this))}this.pathConstraints=new Array;for(var r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new t9(u,this))}this.color=new Ne(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var e=this._updateCache;e.length=0,this.updateCacheReset.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin!=null)for(var o=this.skin.bones,n=0,i=this.skin.bones.length;n<i;n++){var a=this.bones[o[n].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a!=null)}var s=this.ikConstraints,c=this.transformConstraints,l=this.pathConstraints,u=s.length,f=c.length,h=l.length,d=u+f+h;e:for(var n=0;n<d;n++){for(var p=0;p<u;p++){var v=s[p];if(v.data.order==n){this.sortIkConstraint(v);continue e}}for(var p=0;p<f;p++){var v=c[p];if(v.data.order==n){this.sortTransformConstraint(v);continue e}}for(var p=0;p<h;p++){var v=l[p];if(v.data.order==n){this.sortPathConstraint(v);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},t.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin!=null&&ue.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target;this.sortBone(r);var n=e.bones,i=n[0];if(this.sortBone(i),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(e),this.sortReset(i.children),n[n.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin!=null&&ue.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target,n=r.data.index,i=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof _p&&this.sortPathConstraintAttachmentWith(s,i);for(var c=e.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(e);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0}},t.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin!=null&&ue.contains(this.skin.constraints,e.data,!0)),!!e.active){this.sortBone(e.target);var r=e.bones,n=r.length;if(e.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(var o=0;o<n;o++)r[o].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(e,r,n){var i=e.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},t.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof _p){var n=e.bones;if(n==null)this.sortBone(r);else for(var i=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var c=n[a];this.sortBone(i[c])}}},t.prototype.sortBone=function(e){if(!e.sorted){var r=e.parent;r!=null&&this.sortBone(r),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var r=0,n=e.length;r<n;r++){var i=e[r];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,r=0,n=e.length;r<n;r++){var i=e[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++)e[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;ue.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,n=e.length;r<n;r++)e[r].setToSetupPose()},t.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var r=this.data.findSkin(e);if(r==null)throw new Error("Skin not found: "+e);this.setSkin(r)},t.prototype.setSkin=function(e){if(e!=this.skin){if(e!=null)if(this.skin!=null)e.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o!=null){var s=e.getAttachment(n,o);s!=null&&a.setAttachment(s)}}this.skin=e,this.updateCache()}},t.prototype.getAttachmentByName=function(e,r){return this.getAttachment(this.data.findSlotIndex(e),r)},t.prototype.getAttachment=function(e,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(e,r);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(e,r):null},t.prototype.setAttachment=function(e,r){if(e==null)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==e){var s=null;if(r!=null&&(s=this.getAttachment(i,r),s==null))throw new Error("Attachment not found: "+r+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.getBounds=function(e,r,n){if(n===void 0&&(n=new Array(2)),e==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l];if(f.bone.active){var h=0,d=null,p=f.getAttachment();if(p instanceof YO)h=8,d=ue.setArraySize(n,h,0),p.computeWorldVertices(f.bone,d,0,2);else if(p instanceof f_){var v=p;h=v.worldVerticesLength,d=ue.setArraySize(n,h,0),v.computeWorldVertices(f,0,h,d,0,2)}if(d!=null)for(var y=0,m=d.length;y<m;y+=2){var g=d[y],x=d[y+1];a=Math.min(a,g),o=Math.min(o,x),s=Math.max(s,g),c=Math.max(c,x)}}}e.set(a,o),r.set(s-a,c-o)},t.prototype.update=function(e){this.time+=e},Object.defineProperty(t.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),aP=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSkin=function(e){if(e==null)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findEvent=function(e){if(e==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findAnimation=function(e){if(e==null)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraintIndex=function(e){if(e==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t}(),oP=function(){function t(e,r,n){if(this.color=new Ne(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}return t}(),sP=function(t){Nr(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return e}(d_),rC=function(){function t(e,r,n){this.slotIndex=e,this.name=r,this.attachment=n}return t}(),bm=function(){function t(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,e==null)throw new Error("name cannot be null.");this.name=e}return t.prototype.setAttachment=function(e,r,n){if(n==null)throw new Error("attachment cannot be null.");var i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][r]=n},t.prototype.addSkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];this.setAttachment(c.slotIndex,c.name,c.attachment)}},t.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];c.attachment!=null&&(c.attachment instanceof f_?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},t.prototype.getAttachment=function(e,r){var n=this.attachments[e];return n?n[r]:null},t.prototype.removeAttachment=function(e,r){var n=this.attachments[e];n&&(n[r]=null)},t.prototype.getAttachments=function(){for(var e=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var i in n){var a=n[i];a&&e.push(new rC(r,i,a))}}return e},t.prototype.getAttachmentsForSlot=function(e,r){var n=this.attachments[e];if(n)for(var i in n){var a=n[i];a&&r.push(new rC(e,i,a))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(e,r){for(var n=0,i=0;i<e.slots.length;i++){var a=e.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u!=null&&a.setAttachment(u);break}}}n++}},t}(),i9=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new aP;n.name="";var i=new xm(e);if(n.hash=i.readString(),n.version=i.readString(),n.version==="3.8.75"){var a="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(a)}n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();var o=i.readBoolean();o&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());var s=0;s=i.readInt(!0);for(var c=0;c<s;c++)i.strings.push(i.readString());s=i.readInt(!0);for(var c=0;c<s;c++){var l=i.readString(),u=c==0?null:n.bones[i.readInt(!0)],f=new eP(c,l,u);f.rotation=i.readFloat(),f.x=i.readFloat()*r,f.y=i.readFloat()*r,f.scaleX=i.readFloat(),f.scaleY=i.readFloat(),f.shearX=i.readFloat(),f.shearY=i.readFloat(),f.length=i.readFloat()*r,f.transformMode=t.TransformModeValues[i.readInt(!0)],f.skinRequired=i.readBoolean(),o&&Ne.rgba8888ToColor(f.color,i.readInt32()),n.bones.push(f)}s=i.readInt(!0);for(var c=0;c<s;c++){var h=i.readString(),d=n.bones[i.readInt(!0)],f=new oP(c,h,d);Ne.rgba8888ToColor(f.color,i.readInt32());var p=i.readInt32();p!=-1&&Ne.rgb888ToColor(f.darkColor=new Ne,p),f.attachmentName=i.readStringRef(),f.blendMode=t.BlendModeValues[i.readInt(!0)],n.slots.push(f)}s=i.readInt(!0);for(var c=0,v=void 0;c<s;c++){var f=new nP(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var y=0;y<v;y++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)],f.mix=i.readFloat(),f.softness=i.readFloat()*r,f.bendDirection=i.readByte(),f.compress=i.readBoolean(),f.stretch=i.readBoolean(),f.uniform=i.readBoolean(),n.ikConstraints.push(f)}s=i.readInt(!0);for(var c=0,v=void 0;c<s;c++){var f=new sP(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var y=0;y<v;y++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)],f.local=i.readBoolean(),f.relative=i.readBoolean(),f.offsetRotation=i.readFloat(),f.offsetX=i.readFloat()*r,f.offsetY=i.readFloat()*r,f.offsetScaleX=i.readFloat(),f.offsetScaleY=i.readFloat(),f.offsetShearY=i.readFloat(),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),f.scaleMix=i.readFloat(),f.shearMix=i.readFloat(),n.transformConstraints.push(f)}s=i.readInt(!0);for(var c=0,v=void 0;c<s;c++){var f=new iP(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var y=0;y<v;y++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.slots[i.readInt(!0)],f.positionMode=t.PositionModeValues[i.readInt(!0)],f.spacingMode=t.SpacingModeValues[i.readInt(!0)],f.rotateMode=t.RotateModeValues[i.readInt(!0)],f.offsetRotation=i.readFloat(),f.position=i.readFloat(),f.positionMode==Mr.Fixed&&(f.position*=r),f.spacing=i.readFloat(),(f.spacingMode==Sn.Length||f.spacingMode==Sn.Fixed)&&(f.spacing*=r),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),n.pathConstraints.push(f)}var m=this.readSkin(i,n,!0,o);m!=null&&(n.defaultSkin=m,n.skins.push(m));{var c=n.skins.length;for(ue.setArraySize(n.skins,s=c+i.readInt(!0));c<s;c++)n.skins[c]=this.readSkin(i,n,!1,o)}s=this.linkedMeshes.length;for(var c=0;c<s;c++){var g=this.linkedMeshes[c],x=g.skin==null?n.defaultSkin:n.findSkin(g.skin);if(x==null)throw new Error("Skin not found: "+g.skin);var b=x.getAttachment(g.slotIndex,g.parent);if(b==null)throw new Error("Parent mesh not found: "+g.parent);g.mesh.deformAttachment=g.inheritDeform?b:g.mesh,g.mesh.setParentMesh(b)}this.linkedMeshes.length=0,s=i.readInt(!0);for(var c=0;c<s;c++){var f=new rP(i.readStringRef());f.intValue=i.readInt(!1),f.floatValue=i.readFloat(),f.stringValue=i.readString(),f.audioPath=i.readString(),f.audioPath!=null&&(f.volume=i.readFloat(),f.balance=i.readFloat()),n.events.push(f)}s=i.readInt(!0);for(var c=0;c<s;c++)n.animations.push(this.readAnimation(i,i.readString(),n));return n},t.prototype.readSkin=function(e,r,n,i){var a=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;a=new bm("default")}else{a=new bm(e.readStringRef()),a.bones.length=e.readInt(!0);for(var s=0,c=a.bones.length;s<c;s++)a.bones[s]=r.bones[e.readInt(!0)];for(var s=0,c=e.readInt(!0);s<c;s++)a.constraints.push(r.ikConstraints[e.readInt(!0)]);for(var s=0,c=e.readInt(!0);s<c;s++)a.constraints.push(r.transformConstraints[e.readInt(!0)]);for(var s=0,c=e.readInt(!0);s<c;s++)a.constraints.push(r.pathConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(var s=0;s<o;s++)for(var l=e.readInt(!0),u=0,f=e.readInt(!0);u<f;u++){var h=e.readStringRef(),d=this.readAttachment(e,r,a,l,h,i);d!=null&&a.setAttachment(l,h,d)}return a},t.prototype.readAttachment=function(e,r,n,i,a,o){var s=this.scale,c=e.readStringRef();c==null&&(c=a);var l=e.readByte(),u=t.AttachmentTypeValues[l];switch(u){case Ot.Region:{var f=e.readStringRef(),h=e.readFloat(),d=e.readFloat(),p=e.readFloat(),v=e.readFloat(),y=e.readFloat(),m=e.readFloat(),g=e.readFloat(),x=e.readInt32();f==null&&(f=c);var b=this.attachmentLoader.newRegionAttachment(n,c,f);return b==null?null:(b.path=f,b.x=d*s,b.y=p*s,b.scaleX=v,b.scaleY=y,b.rotation=h,b.width=m*s,b.height=g*s,Ne.rgba8888ToColor(b.color,x),b)}case Ot.BoundingBox:{var S=e.readInt(!0),w=this.readVertices(e,S),x=o?e.readInt32():0,A=this.attachmentLoader.newBoundingBoxAttachment(n,c);return A==null?null:(A.worldVerticesLength=S<<1,A.vertices=w.vertices,A.bones=w.bones,o&&Ne.rgba8888ToColor(A.color,x),A)}case Ot.Mesh:{var f=e.readStringRef(),x=e.readInt32(),S=e.readInt(!0),C=this.readFloatArray(e,S<<1,1),O=this.readShortArray(e),w=this.readVertices(e,S),P=e.readInt(!0),I=null,m=0,g=0;o&&(I=this.readShortArray(e),m=e.readFloat(),g=e.readFloat()),f==null&&(f=c);var R=this.attachmentLoader.newMeshAttachment(n,c,f);return R==null?null:(R.path=f,Ne.rgba8888ToColor(R.color,x),R.bones=w.bones,R.vertices=w.vertices,R.worldVerticesLength=S<<1,R.triangles=O,R.regionUVs=new Float32Array(C),R.hullLength=P<<1,o&&(R.edges=I,R.width=m*s,R.height=g*s),R)}case Ot.LinkedMesh:{var f=e.readStringRef(),x=e.readInt32(),F=e.readStringRef(),D=e.readStringRef(),L=e.readBoolean(),m=0,g=0;o&&(m=e.readFloat(),g=e.readFloat()),f==null&&(f=c);var R=this.attachmentLoader.newMeshAttachment(n,c,f);return R==null?null:(R.path=f,Ne.rgba8888ToColor(R.color,x),o&&(R.width=m*s,R.height=g*s),this.linkedMeshes.push(new TFe(R,F,i,D,L)),R)}case Ot.Path:{for(var U=e.readBoolean(),Y=e.readBoolean(),S=e.readInt(!0),w=this.readVertices(e,S),ee=ue.newArray(S/3,0),J=0,X=ee.length;J<X;J++)ee[J]=e.readFloat()*s;var x=o?e.readInt32():0,f=this.attachmentLoader.newPathAttachment(n,c);return f==null?null:(f.closed=U,f.constantSpeed=Y,f.worldVerticesLength=S<<1,f.vertices=w.vertices,f.bones=w.bones,f.lengths=ee,o&&Ne.rgba8888ToColor(f.color,x),f)}case Ot.Point:{var h=e.readFloat(),d=e.readFloat(),p=e.readFloat(),x=o?e.readInt32():0,M=this.attachmentLoader.newPointAttachment(n,c);return M==null?null:(M.x=d*s,M.y=p*s,M.rotation=h,o&&Ne.rgba8888ToColor(M.color,x),M)}case Ot.Clipping:{var V=e.readInt(!0),S=e.readInt(!0),w=this.readVertices(e,S),x=o?e.readInt32():0,$=this.attachmentLoader.newClippingAttachment(n,c);return $==null?null:($.endSlot=r.slots[V],$.worldVerticesLength=S<<1,$.vertices=w.vertices,$.bones=w.bones,o&&Ne.rgba8888ToColor($.color,x),$)}}return null},t.prototype.readVertices=function(e,r){var n=r<<1,i=new OFe,a=this.scale;if(!e.readBoolean())return i.vertices=this.readFloatArray(e,n,a),i;for(var o=new Array,s=new Array,c=0;c<r;c++){var l=e.readInt(!0);s.push(l);for(var u=0;u<l;u++)s.push(e.readInt(!0)),o.push(e.readFloat()*a),o.push(e.readFloat()*a),o.push(e.readFloat())}return i.vertices=ue.toFloatArray(o),i.bones=s,i},t.prototype.readFloatArray=function(e,r,n){var i=new Array(r);if(n==1)for(var a=0;a<r;a++)i[a]=e.readFloat();else for(var a=0;a<r;a++)i[a]=e.readFloat()*n;return i},t.prototype.readShortArray=function(e){for(var r=e.readInt(!0),n=new Array(r),i=0;i<r;i++)n[i]=e.readShort();return n},t.prototype.readAnimation=function(e,r,n){for(var i=new Array,a=this.scale,o=0,s=new Ne,c=new Ne,l=0,u=e.readInt(!0);l<u;l++)for(var f=e.readInt(!0),h=0,d=e.readInt(!0);h<d;h++){var p=e.readByte(),v=e.readInt(!0);switch(p){case t.SLOT_ATTACHMENT:{var y=new Eu(v);y.slotIndex=f;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readStringRef());i.push(y),o=Math.max(o,y.frames[v-1]);break}case t.SLOT_COLOR:{var y=new xp(v);y.slotIndex=f;for(var m=0;m<v;m++){var g=e.readFloat();Ne.rgba8888ToColor(s,e.readInt32()),y.setFrame(m,g,s.r,s.g,s.b,s.a),m<v-1&&this.readCurve(e,m,y)}i.push(y),o=Math.max(o,y.frames[(v-1)*xp.ENTRIES]);break}case t.SLOT_TWO_COLOR:{var y=new bp(v);y.slotIndex=f;for(var m=0;m<v;m++){var g=e.readFloat();Ne.rgba8888ToColor(s,e.readInt32()),Ne.rgb888ToColor(c,e.readInt32()),y.setFrame(m,g,s.r,s.g,s.b,s.a,c.r,c.g,c.b),m<v-1&&this.readCurve(e,m,y)}i.push(y),o=Math.max(o,y.frames[(v-1)*bp.ENTRIES]);break}}}for(var l=0,u=e.readInt(!0);l<u;l++)for(var x=e.readInt(!0),h=0,d=e.readInt(!0);h<d;h++){var p=e.readByte(),v=e.readInt(!0);switch(p){case t.BONE_ROTATE:{var y=new la(v);y.boneIndex=x;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readFloat()),m<v-1&&this.readCurve(e,m,y);i.push(y),o=Math.max(o,y.frames[(v-1)*la.ENTRIES]);break}case t.BONE_TRANSLATE:case t.BONE_SCALE:case t.BONE_SHEAR:{var y=void 0,b=1;p==t.BONE_SCALE?y=new qO(v):p==t.BONE_SHEAR?y=new KO(v):(y=new Gu(v),b=a),y.boneIndex=x;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readFloat()*b,e.readFloat()*b),m<v-1&&this.readCurve(e,m,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Gu.ENTRIES]);break}}}for(var l=0,u=e.readInt(!0);l<u;l++){var S=e.readInt(!0),v=e.readInt(!0),y=new Sp(v);y.ikConstraintIndex=S;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readFloat(),e.readFloat()*a,e.readByte(),e.readBoolean(),e.readBoolean()),m<v-1&&this.readCurve(e,m,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Sp.ENTRIES])}for(var l=0,u=e.readInt(!0);l<u;l++){var S=e.readInt(!0),v=e.readInt(!0),y=new Ep(v);y.transformConstraintIndex=S;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()),m<v-1&&this.readCurve(e,m,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Ep.ENTRIES])}for(var l=0,u=e.readInt(!0);l<u;l++)for(var S=e.readInt(!0),w=n.pathConstraints[S],h=0,d=e.readInt(!0);h<d;h++){var p=e.readByte(),v=e.readInt(!0);switch(p){case t.PATH_POSITION:case t.PATH_SPACING:{var y=void 0,b=1;p==t.PATH_SPACING?(y=new QO(v),(w.spacingMode==Sn.Length||w.spacingMode==Sn.Fixed)&&(b=a)):(y=new If(v),w.positionMode==Mr.Fixed&&(b=a)),y.pathConstraintIndex=S;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readFloat()*b),m<v-1&&this.readCurve(e,m,y);i.push(y),o=Math.max(o,y.frames[(v-1)*If.ENTRIES]);break}case t.PATH_MIX:{var y=new wp(v);y.pathConstraintIndex=S;for(var m=0;m<v;m++)y.setFrame(m,e.readFloat(),e.readFloat(),e.readFloat()),m<v-1&&this.readCurve(e,m,y);i.push(y),o=Math.max(o,y.frames[(v-1)*wp.ENTRIES]);break}}}for(var l=0,u=e.readInt(!0);l<u;l++)for(var A=n.skins[e.readInt(!0)],h=0,d=e.readInt(!0);h<d;h++)for(var f=e.readInt(!0),C=0,O=e.readInt(!0);C<O;C++){var P=A.getAttachment(f,e.readStringRef()),I=P.bones!=null,R=P.vertices,F=I?R.length/3*2:R.length,v=e.readInt(!0),y=new ZO(v);y.slotIndex=f,y.attachment=P;for(var m=0;m<v;m++){var g=e.readFloat(),D=void 0,L=e.readInt(!0);if(L==0)D=I?ue.newFloatArray(F):R;else{D=ue.newFloatArray(F);var U=e.readInt(!0);if(L+=U,a==1)for(var Y=U;Y<L;Y++)D[Y]=e.readFloat();else for(var Y=U;Y<L;Y++)D[Y]=e.readFloat()*a;if(!I)for(var Y=0,ee=D.length;Y<ee;Y++)D[Y]+=R[Y]}y.setFrame(m,g,D),m<v-1&&this.readCurve(e,m,y)}i.push(y),o=Math.max(o,y.frames[v-1])}var J=e.readInt(!0);if(J>0){for(var y=new ff(J),X=n.slots.length,l=0;l<J;l++){for(var g=e.readFloat(),M=e.readInt(!0),V=ue.newArray(X,0),h=X-1;h>=0;h--)V[h]=-1;for(var $=ue.newArray(X-M,0),j=0,te=0,h=0;h<M;h++){for(var f=e.readInt(!0);j!=f;)$[te++]=j++;V[j+e.readInt(!0)]=j++}for(;j<X;)$[te++]=j++;for(var h=X-1;h>=0;h--)V[h]==-1&&(V[h]=$[--te]);y.setFrame(l,g,V)}i.push(y),o=Math.max(o,y.frames[J-1])}var ie=e.readInt(!0);if(ie>0){for(var y=new h_(ie),l=0;l<ie;l++){var g=e.readFloat(),de=n.events[e.readInt(!0)],he=new tP(g,de);he.intValue=e.readInt(!1),he.floatValue=e.readFloat(),he.stringValue=e.readBoolean()?e.readString():de.stringValue,he.data.audioPath!=null&&(he.volume=e.readFloat(),he.balance=e.readFloat()),y.setFrame(l,he)}i.push(y),o=Math.max(o,y.frames[ie-1])}return new sn(r,i,o)},t.prototype.readCurve=function(e,r,n){switch(e.readByte()){case t.CURVE_STEPPED:n.setStepped(r);break;case t.CURVE_BEZIER:this.setCurve(n,r,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat());break}},t.prototype.setCurve=function(e,r,n,i,a,o){e.setCurve(r,n,i,a,o)},t.AttachmentTypeValues=[0,1,2,3,4,5,6],t.TransformModeValues=[mt.Normal,mt.OnlyTranslation,mt.NoRotationOrReflection,mt.NoScale,mt.NoScaleOrReflection],t.PositionModeValues=[Mr.Fixed,Mr.Percent],t.SpacingModeValues=[Sn.Length,Sn.Fixed,Sn.Percent],t.RotateModeValues=[Zr.Tangent,Zr.Chain,Zr.ChainScale],t.BlendModeValues=[ze.NORMAL,ze.ADD,ze.MULTIPLY,ze.SCREEN],t.BONE_ROTATE=0,t.BONE_TRANSLATE=1,t.BONE_SCALE=2,t.BONE_SHEAR=3,t.SLOT_ATTACHMENT=0,t.SLOT_COLOR=1,t.SLOT_TWO_COLOR=2,t.PATH_POSITION=0,t.PATH_SPACING=1,t.PATH_MIX=2,t.CURVE_LINEAR=0,t.CURVE_STEPPED=1,t.CURVE_BEZIER=2,t}(),TFe=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritDeform=a}return t}(),OFe=function(){function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null),this.bones=e,this.vertices=r}return t}(),PFe=function(t){Nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(zO),a9=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new aP,i=typeof e=="string"?JSON.parse(e):e,a=i.skeleton;if(a!=null){if(n.hash=a.hash,n.version=a.spine,n.version.substr(0,3)!=="3.8"){var o="Spine 3.8 loader cant load version "+a.spine+". Please configure your pixi-spine bundle";console.error(o)}if(n.version==="3.8.75"){var o="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(o)}n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(i.bones)for(var s=0;s<i.bones.length;s++){var c=i.bones[s],l=null,u=this.getValue(c,"parent",null);if(u!=null&&(l=n.findBone(u),l==null))throw new Error("Parent bone not found: "+u);var f=new eP(n.bones.length,c.name,l);f.length=this.getValue(c,"length",0)*r,f.x=this.getValue(c,"x",0)*r,f.y=this.getValue(c,"y",0)*r,f.rotation=this.getValue(c,"rotation",0),f.scaleX=this.getValue(c,"scaleX",1),f.scaleY=this.getValue(c,"scaleY",1),f.shearX=this.getValue(c,"shearX",0),f.shearY=this.getValue(c,"shearY",0),f.transformMode=t.transformModeFromString(this.getValue(c,"transform","normal")),f.skinRequired=this.getValue(c,"skin",!1),n.bones.push(f)}if(i.slots)for(var s=0;s<i.slots.length;s++){var h=i.slots[s],d=h.name,p=h.bone,v=n.findBone(p);if(v==null)throw new Error("Slot bone not found: "+p);var f=new oP(n.slots.length,d,v),y=this.getValue(h,"color",null);y!=null&&f.color.setFromString(y);var m=this.getValue(h,"dark",null);m!=null&&(f.darkColor=new Ne(1,1,1,1),f.darkColor.setFromString(m)),f.attachmentName=this.getValue(h,"attachment",null),f.blendMode=t.blendModeFromString(this.getValue(h,"blend","normal")),n.slots.push(f)}if(i.ik)for(var s=0;s<i.ik.length;s++){var g=i.ik[s],f=new nP(g.name);f.order=this.getValue(g,"order",0),f.skinRequired=this.getValue(g,"skin",!1);for(var x=0;x<g.bones.length;x++){var p=g.bones[x],b=n.findBone(p);if(b==null)throw new Error("IK bone not found: "+p);f.bones.push(b)}var S=g.target;if(f.target=n.findBone(S),f.target==null)throw new Error("IK target bone not found: "+S);f.mix=this.getValue(g,"mix",1),f.softness=this.getValue(g,"softness",0)*r,f.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,f.compress=this.getValue(g,"compress",!1),f.stretch=this.getValue(g,"stretch",!1),f.uniform=this.getValue(g,"uniform",!1),n.ikConstraints.push(f)}if(i.transform)for(var s=0;s<i.transform.length;s++){var g=i.transform[s],f=new sP(g.name);f.order=this.getValue(g,"order",0),f.skinRequired=this.getValue(g,"skin",!1);for(var x=0;x<g.bones.length;x++){var p=g.bones[x],b=n.findBone(p);if(b==null)throw new Error("Transform constraint bone not found: "+p);f.bones.push(b)}var S=g.target;if(f.target=n.findBone(S),f.target==null)throw new Error("Transform constraint target bone not found: "+S);f.local=this.getValue(g,"local",!1),f.relative=this.getValue(g,"relative",!1),f.offsetRotation=this.getValue(g,"rotation",0),f.offsetX=this.getValue(g,"x",0)*r,f.offsetY=this.getValue(g,"y",0)*r,f.offsetScaleX=this.getValue(g,"scaleX",0),f.offsetScaleY=this.getValue(g,"scaleY",0),f.offsetShearY=this.getValue(g,"shearY",0),f.rotateMix=this.getValue(g,"rotateMix",1),f.translateMix=this.getValue(g,"translateMix",1),f.scaleMix=this.getValue(g,"scaleMix",1),f.shearMix=this.getValue(g,"shearMix",1),n.transformConstraints.push(f)}if(i.path)for(var s=0;s<i.path.length;s++){var g=i.path[s],f=new iP(g.name);f.order=this.getValue(g,"order",0),f.skinRequired=this.getValue(g,"skin",!1);for(var x=0;x<g.bones.length;x++){var p=g.bones[x],b=n.findBone(p);if(b==null)throw new Error("Transform constraint bone not found: "+p);f.bones.push(b)}var S=g.target;if(f.target=n.findSlot(S),f.target==null)throw new Error("Path target slot not found: "+S);f.positionMode=t.positionModeFromString(this.getValue(g,"positionMode","percent")),f.spacingMode=t.spacingModeFromString(this.getValue(g,"spacingMode","length")),f.rotateMode=t.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),f.offsetRotation=this.getValue(g,"rotation",0),f.position=this.getValue(g,"position",0),f.positionMode==Mr.Fixed&&(f.position*=r),f.spacing=this.getValue(g,"spacing",0),(f.spacingMode==Sn.Length||f.spacingMode==Sn.Fixed)&&(f.spacing*=r),f.rotateMix=this.getValue(g,"rotateMix",1),f.translateMix=this.getValue(g,"translateMix",1),n.pathConstraints.push(f)}if(i.skins)for(var s=0;s<i.skins.length;s++){var w=i.skins[s],A=new bm(w.name);if(w.bones)for(var C=0;C<w.bones.length;C++){var b=n.findBone(w.bones[C]);if(b==null)throw new Error("Skin bone not found: "+w.bones[s]);A.bones.push(b)}if(w.ik)for(var C=0;C<w.ik.length;C++){var O=n.findIkConstraint(w.ik[C]);if(O==null)throw new Error("Skin IK constraint not found: "+w.ik[s]);A.constraints.push(O)}if(w.transform)for(var C=0;C<w.transform.length;C++){var O=n.findTransformConstraint(w.transform[C]);if(O==null)throw new Error("Skin transform constraint not found: "+w.transform[s]);A.constraints.push(O)}if(w.path)for(var C=0;C<w.path.length;C++){var O=n.findPathConstraint(w.path[C]);if(O==null)throw new Error("Skin path constraint not found: "+w.path[s]);A.constraints.push(O)}for(var d in w.attachments){var P=n.findSlot(d);if(P==null)throw new Error("Slot not found: "+d);var h=w.attachments[d];for(var I in h){var R=this.readAttachment(h[I],A,P.index,I,n);R!=null&&A.setAttachment(P.index,I,R)}}n.skins.push(A),A.name=="default"&&(n.defaultSkin=A)}for(var s=0,F=this.linkedMeshes.length;s<F;s++){var D=this.linkedMeshes[s],A=D.skin==null?n.defaultSkin:n.findSkin(D.skin);if(A==null)throw new Error("Skin not found: "+D.skin);var L=A.getAttachment(D.slotIndex,D.parent);if(L==null)throw new Error("Parent mesh not found: "+D.parent);D.mesh.deformAttachment=D.inheritDeform?L:D.mesh,D.mesh.setParentMesh(L)}if(this.linkedMeshes.length=0,i.events)for(var U in i.events){var Y=i.events[U],f=new rP(U);f.intValue=this.getValue(Y,"int",0),f.floatValue=this.getValue(Y,"float",0),f.stringValue=this.getValue(Y,"string",""),f.audioPath=this.getValue(Y,"audio",null),f.audioPath!=null&&(f.volume=this.getValue(Y,"volume",1),f.balance=this.getValue(Y,"balance",0)),n.events.push(f)}if(i.animations)for(var ee in i.animations){var J=i.animations[ee];this.readAnimation(J,ee,n)}return n},t.prototype.readAttachment=function(e,r,n,i,a){var o=this.scale;i=this.getValue(e,"name",i);var s=this.getValue(e,"type","region");switch(s){case"region":{var c=this.getValue(e,"path",i),l=this.attachmentLoader.newRegionAttachment(r,i,c);if(l==null)return null;l.path=c,l.x=this.getValue(e,"x",0)*o,l.y=this.getValue(e,"y",0)*o,l.scaleX=this.getValue(e,"scaleX",1),l.scaleY=this.getValue(e,"scaleY",1),l.rotation=this.getValue(e,"rotation",0),l.width=e.width*o,l.height=e.height*o;var u=this.getValue(e,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(f==null)return null;this.readVertices(e,f,e.vertexCount<<1);var u=this.getValue(e,"color",null);return u!=null&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var c=this.getValue(e,"path",i),h=this.attachmentLoader.newMeshAttachment(r,i,c);if(h==null)return null;h.path=c;var u=this.getValue(e,"color",null);u!=null&&h.color.setFromString(u),h.width=this.getValue(e,"width",0)*o,h.height=this.getValue(e,"height",0)*o;var d=this.getValue(e,"parent",null);if(d!=null)return this.linkedMeshes.push(new RFe(h,this.getValue(e,"skin",null),n,d,this.getValue(e,"deform",!0))),h;var p=e.uvs;return this.readVertices(e,h,p.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(p),h.edges=this.getValue(e,"edges",null),h.hullLength=this.getValue(e,"hull",0)*2,h}case"path":{var c=this.attachmentLoader.newPathAttachment(r,i);if(c==null)return null;c.closed=this.getValue(e,"closed",!1),c.constantSpeed=this.getValue(e,"constantSpeed",!0);var v=e.vertexCount;this.readVertices(e,c,v<<1);for(var y=ue.newArray(v/3,0),m=0;m<e.lengths.length;m++)y[m]=e.lengths[m]*o;c.lengths=y;var u=this.getValue(e,"color",null);return u!=null&&c.color.setFromString(u),c}case"point":{var g=this.attachmentLoader.newPointAttachment(r,i);if(g==null)return null;g.x=this.getValue(e,"x",0)*o,g.y=this.getValue(e,"y",0)*o,g.rotation=this.getValue(e,"rotation",0);var u=this.getValue(e,"color",null);return u!=null&&g.color.setFromString(u),g}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(r,i);if(x==null)return null;var b=this.getValue(e,"end",null);if(b!=null){var S=a.findSlot(b);if(S==null)throw new Error("Clipping end slot not found: "+b);x.endSlot=S}var v=e.vertexCount;this.readVertices(e,x,v<<1);var u=this.getValue(e,"color",null);return u!=null&&x.color.setFromString(u),x}}return null},t.prototype.readVertices=function(e,r,n){var i=this.scale;r.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=ue.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=ue.toFloatArray(l)},t.prototype.readAnimation=function(e,r,n){var i=this.scale,a=new Array,o=0;if(e.slots)for(var s in e.slots){var c=e.slots[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+s);for(var u in c){var f=c[u];if(u=="attachment"){var h=new Eu(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d++,this.getValue(v,"time",0),v.name)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}else if(u=="color"){var h=new xp(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],y=new Ne;y.setFromString(v.color||"ffffffff"),h.setFrame(d,this.getValue(v,"time",0),y.r,y.g,y.b,y.a),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*xp.ENTRIES])}else if(u=="twoColor"){var h=new bp(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],m=new Ne,g=new Ne;m.setFromString(v.light),g.setFromString(v.dark),h.setFrame(d,this.getValue(v,"time",0),m.r,m.g,m.b,m.a,g.r,g.g,g.b),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*bp.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+u+" ("+s+")")}}if(e.bones)for(var x in e.bones){var b=e.bones[x],S=n.findBoneIndex(x);if(S==-1)throw new Error("Bone not found: "+x);for(var u in b){var f=b[u];if(u==="rotate"){var h=new la(f.length);h.boneIndex=S;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"angle",0)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*la.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){var h=null,w=1,A=0;u==="scale"?(h=new qO(f.length),A=1):u==="shear"?h=new KO(f.length):(h=new Gu(f.length),w=i),h.boneIndex=S;for(var d=0,p=0;p<f.length;p++){var v=f[p],C=this.getValue(v,"x",A),O=this.getValue(v,"y",A);h.setFrame(d,this.getValue(v,"time",0),C*w,O*w),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Gu.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+u+" ("+x+")")}}if(e.ik)for(var P in e.ik){var I=e.ik[P],R=n.findIkConstraint(P),h=new Sp(I.length);h.ikConstraintIndex=n.ikConstraints.indexOf(R);for(var d=0,p=0;p<I.length;p++){var v=I[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"mix",1),this.getValue(v,"softness",0)*i,this.getValue(v,"bendPositive",!0)?1:-1,this.getValue(v,"compress",!1),this.getValue(v,"stretch",!1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Sp.ENTRIES])}if(e.transform)for(var P in e.transform){var I=e.transform[P],R=n.findTransformConstraint(P),h=new Ep(I.length);h.transformConstraintIndex=n.transformConstraints.indexOf(R);for(var d=0,p=0;p<I.length;p++){var v=I[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1),this.getValue(v,"scaleMix",1),this.getValue(v,"shearMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Ep.ENTRIES])}if(e.path)for(var P in e.path){var I=e.path[P],F=n.findPathConstraintIndex(P);if(F==-1)throw new Error("Path constraint not found: "+P);var D=n.pathConstraints[F];for(var u in I){var f=I[u];if(u==="position"||u==="spacing"){var h=null,w=1;u==="spacing"?(h=new QO(f.length),(D.spacingMode==Sn.Length||D.spacingMode==Sn.Fixed)&&(w=i)):(h=new If(f.length),D.positionMode==Mr.Fixed&&(w=i)),h.pathConstraintIndex=F;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,u,0)*w),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*If.ENTRIES])}else if(u==="mix"){var h=new wp(f.length);h.pathConstraintIndex=F;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*wp.ENTRIES])}}}if(e.deform)for(var L in e.deform){var U=e.deform[L],Y=n.findSkin(L);if(Y!=null)for(var s in U){var c=U[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+c.name);for(var u in c){var f=c[u],ee=Y.getAttachment(l,u);if(ee==null)throw new Error("Deform attachment not found: "+f.name);var J=ee.bones!=null,X=ee.vertices,M=J?X.length/3*2:X.length,h=new ZO(f.length);h.slotIndex=l,h.attachment=ee;for(var d=0,V=0;V<f.length;V++){var v=f[V],$=void 0,j=this.getValue(v,"vertices",null);if(j==null)$=J?ue.newFloatArray(M):X;else{$=ue.newFloatArray(M);var te=this.getValue(v,"offset",0);if(ue.arrayCopy(j,0,$,te,j.length),i!=1)for(var p=te,ie=p+j.length;p<ie;p++)$[p]*=i;if(!J)for(var p=0;p<M;p++)$[p]+=X[p]}h.setFrame(d,this.getValue(v,"time",0),$),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var de=e.drawOrder;if(de==null&&(de=e.draworder),de!=null){for(var h=new ff(de.length),he=n.slots.length,d=0,V=0;V<de.length;V++){var Ee=de[V],Oe=null,ye=this.getValue(Ee,"offsets",null);if(ye!=null){Oe=ue.newArray(he,-1);for(var Ae=ue.newArray(he-ye.length,0),_e=0,we=0,p=0;p<ye.length;p++){var $e=ye[p],l=n.findSlotIndex($e.slot);if(l==-1)throw new Error("Slot not found: "+$e.slot);for(;_e!=l;)Ae[we++]=_e++;Oe[_e+$e.offset]=_e++}for(;_e<he;)Ae[we++]=_e++;for(var p=he-1;p>=0;p--)Oe[p]==-1&&(Oe[p]=Ae[--we])}h.setFrame(d++,this.getValue(Ee,"time",0),Oe)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(e.events){for(var h=new h_(e.events.length),d=0,p=0;p<e.events.length;p++){var Xe=e.events[p],ke=n.findEvent(Xe.name);if(ke==null)throw new Error("Event not found: "+Xe.name);var at=new tP(ue.toSinglePrecision(this.getValue(Xe,"time",0)),ke);at.intValue=this.getValue(Xe,"int",ke.intValue),at.floatValue=this.getValue(Xe,"float",ke.floatValue),at.stringValue=this.getValue(Xe,"string",ke.stringValue),at.data.audioPath!=null&&(at.volume=this.getValue(Xe,"volume",1),at.balance=this.getValue(Xe,"balance",0)),h.setFrame(d++,at)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new sn(r,a,o))},t.prototype.readCurve=function(e,r,n){if(e.hasOwnProperty("curve"))if(e.curve==="stepped")r.setStepped(n);else{var i=e.curve;r.setCurve(n,i,this.getValue(e,"c2",0),this.getValue(e,"c3",1),this.getValue(e,"c4",1))}},t.prototype.getValue=function(e,r,n){return e[r]!==void 0?e[r]:n},t.blendModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return ze.NORMAL;if(e=="additive")return ze.ADD;if(e=="multiply")return ze.MULTIPLY;if(e=="screen")return ze.SCREEN;throw new Error("Unknown blend mode: "+e)},t.positionModeFromString=function(e){if(e=e.toLowerCase(),e=="fixed")return Mr.Fixed;if(e=="percent")return Mr.Percent;throw new Error("Unknown position mode: "+e)},t.spacingModeFromString=function(e){if(e=e.toLowerCase(),e=="length")return Sn.Length;if(e=="fixed")return Sn.Fixed;if(e=="percent")return Sn.Percent;throw new Error("Unknown position mode: "+e)},t.rotateModeFromString=function(e){if(e=e.toLowerCase(),e=="tangent")return Zr.Tangent;if(e=="chain")return Zr.Chain;if(e=="chainscale")return Zr.ChainScale;throw new Error("Unknown rotate mode: "+e)},t.transformModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return mt.Normal;if(e=="onlytranslation")return mt.OnlyTranslation;if(e=="norotationorreflection")return mt.NoRotationOrReflection;if(e=="noscale")return mt.NoScale;if(e=="noscaleorreflection")return mt.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},t}(),RFe=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritDeform=a}return t}(),IFe=function(t){Nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){this.skeleton=new n9(r),this.skeleton.updateWorldTransform(),this.stateData=new J$(r),this.state=new K$(this.stateData)},e}(Qp);const FFe=Object.freeze(Object.defineProperty({__proto__:null,Animation:sn,AnimationState:K$,AnimationStateAdapter:CFe,AnimationStateData:J$,AtlasAttachmentLoader:JO,Attachment:HO,AttachmentTimeline:Eu,Bone:tC,BoneData:eP,BoundingBoxAttachment:X$,ClippingAttachment:Y$,ColorTimeline:xp,ConstraintData:d_,CurveTimeline:Jo,DeformTimeline:ZO,DrawOrderTimeline:ff,Event:tP,EventData:rP,EventQueue:Q$,EventTimeline:h_,get EventType(){return Ai},IkConstraint:e9,IkConstraintData:nP,IkConstraintTimeline:Sp,JitterEffect:wFe,MeshAttachment:f_,PathAttachment:_p,PathConstraint:t9,PathConstraintData:iP,PathConstraintMixTimeline:wp,PathConstraintPositionTimeline:If,PathConstraintSpacingTimeline:QO,PointAttachment:q$,RegionAttachment:YO,RotateTimeline:la,ScaleTimeline:qO,ShearTimeline:KO,Skeleton:n9,SkeletonBinary:i9,SkeletonBounds:PFe,SkeletonData:aP,SkeletonJson:a9,Skin:bm,SkinEntry:rC,Slot:XO,SlotData:oP,get SpacingMode(){return Sn},Spine:IFe,SwirlEffect:AFe,get TimelineType(){return Gn},TrackEntry:Z$,TransformConstraint:r9,TransformConstraintData:sP,TransformConstraintTimeline:Ep,TranslateTimeline:Gu,TwoColorTimeline:bp,VertexAttachment:tc},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nC=function(t,e){return nC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},nC(t,e)};function un(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nC(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var lP=function(){function t(e){if(e==null)throw new Error("name cannot be null.");this.name=e}return t}(),rc=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.id=(e.nextID++&65535)<<11,n.worldVerticesLength=0,n}return e.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.attachmentVertices,u=this.vertices,f=this.bones;if(f==null){l.length>0&&(u=l);for(var h=r.bone.matrix,d=h.tx,p=h.ty,v=h.a,y=h.c,m=h.b,g=h.d,x=n,b=o;b<i;x+=2,b+=s){var S=u[x],w=u[x+1];a[b]=S*v+w*y+d,a[b+1]=S*m+w*g+p}return}for(var A=0,C=0,O=0;O<n;O+=2){var P=f[A];A+=P+1,C+=P}var I=c.bones;if(l.length==0)for(var b=o,y=C*3;b<i;b+=s){var R=0,F=0,P=f[A++];for(P+=A;A<P;A++,y+=3){var h=I[f[A]].matrix,S=u[y],w=u[y+1],D=u[y+2];R+=(S*h.a+w*h.c+h.tx)*D,F+=(S*h.b+w*h.d+h.ty)*D}a[b]=R,a[b+1]=F}else for(var L=l,b=o,y=C*3,U=C<<1;b<i;b+=s){var R=0,F=0,P=f[A++];for(P+=A;A<P;A++,y+=3,U+=2){var h=I[f[A]].matrix,S=u[y]+L[U],w=u[y+1]+L[U+1],D=u[y+2];R+=(S*h.a+w*h.c+h.tx)*D,F+=(S*h.b+w*h.d+h.ty)*D}a[b]=R,a[b+1]=F}},e.prototype.applyDeform=function(r){return this==r},e.nextID=0,e}(lP),o9=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.BoundingBox,n.color=new Ne(1,1,1,1),n}return e}(rc),s9=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Clipping,n.color=new Ne(.2275,.2275,.8078,1),n}return e}(rc),uP=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Mesh,n.color=new Ne(1,1,1,1),n.inheritDeform=!1,n.tempColor=new Ne(0,0,0,0),n}return e.prototype.applyDeform=function(r){return this==r||this.inheritDeform&&this.parentMesh==r},e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},e}(rc),Ap=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Path,n.closed=!1,n.constantSpeed=!1,n.color=new Ne(1,1,1,1),n}return e}(rc),l9=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Point,n.color=new Ne(.38,.94,0,1),n}return e.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},e.prototype.computeWorldRotation=function(r){var n=r.matrix,i=K.cosDeg(this.rotation),a=K.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*K.radDeg},e}(rc),cP=function(){function t(e,r){if(this.attachmentVertices=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new Ne,this.darkColor=e.darkColor==null?null:new Ne,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),fP=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new Ne(1,1,1,1),n.offset=ue.newFloatArray(8),n.uvs=ue.newFloatArray(8),n.tempColor=new Ne(1,1,1,1),n}return e.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*n,o=i+this.region.width*r,s=a+this.region.height*n,c=this.rotation*Math.PI/180,l=Math.cos(c),u=Math.sin(c),f=i*l+this.x,h=i*u,d=a*l+this.y,p=a*u,v=o*l+this.x,y=o*u,m=s*l+this.y,g=s*u,x=this.offset;x[e.OX1]=f-p,x[e.OY1]=d+h,x[e.OX2]=f-g,x[e.OY2]=m+h,x[e.OX3]=v-g,x[e.OY3]=m+y,x[e.OX4]=v-p,x[e.OY4]=d+y},e.prototype.setRegion=function(r){this.region=r;var n=this.uvs;r.rotate?(n[2]=r.u,n[3]=r.v2,n[4]=r.u,n[5]=r.v,n[6]=r.u2,n[7]=r.v,n[0]=r.u2,n[1]=r.v2):(n[0]=r.u,n[1]=r.v2,n[2]=r.u,n[3]=r.v,n[4]=r.u2,n[5]=r.v,n[6]=r.u2,n[7]=r.v2)},e.prototype.computeWorldVertices=function(r,n,i,a){var o=this.offset,s=r instanceof cP?r.bone.matrix:r.matrix,c=s.tx,l=s.ty,u=s.a,f=s.c,h=s.b,d=s.d,p=0,v=0;p=o[e.OX1],v=o[e.OY1],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX2],v=o[e.OY2],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX3],v=o[e.OY3],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX4],v=o[e.OY4],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(lP),kFe=function(){function t(e,r){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=r}return t.prototype.begin=function(e){},t.prototype.transform=function(e,r,n,i){e.x+=K.randomTriangular(-this.jitterX,this.jitterY),e.y+=K.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),DFe=function(){function t(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return t.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},t.prototype.transform=function(e,r,n,i){var a=this.angle*K.degreesToRadians,o=e.x-this.worldX,s=e.y-this.worldY,c=Math.sqrt(o*o+s*s);if(c<this.radius){var l=t.interpolation.apply(0,a,(this.radius-c)/this.radius),u=Math.cos(l),f=Math.sin(l);e.x=u*o-f*s+this.worldX,e.y=f*o+u*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new H$(2),t}(),On=function(){function t(e,r,n){if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=e,this.timelines=r,this.duration=n}return t.prototype.apply=function(e,r,n,i,a,o,s,c){if(e==null)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(e,r,n,a,o,s,c)},t.binarySearch=function(e,r,n){n===void 0&&(n=1);var i=0,a=e.length/n-2;if(a==0)return n;for(var o=a>>>1;;){if(e[(o+1)*n]<=r?i=o+1:a=o,i==a)return(i+1)*n;o=i+a>>>1}},t.linearSearch=function(e,r,n){for(var i=0,a=e.length-n;i<=a;i+=n)if(e[i]>r)return i;return-1},t}(),Wn;(function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"})(Wn||(Wn={}));var es=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=ue.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var r=e*t.BEZIER_SIZE;if(r==this.curves.length)return t.LINEAR;var n=this.curves[r];return n==t.LINEAR?t.LINEAR:n==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,r,n,i,a){var o=(-r*2+i)*.03,s=(-n*2+a)*.03,c=((r-i)*3+1)*.006,l=((n-a)*3+1)*.006,u=o*2+c,f=s*2+l,h=r*.3+o+c*.16666667,d=n*.3+s+l*.16666667,p=e*t.BEZIER_SIZE,v=this.curves;v[p++]=t.BEZIER;for(var y=h,m=d,g=p+t.BEZIER_SIZE-1;p<g;p+=2)v[p]=y,v[p+1]=m,h+=u,d+=f,u+=c,f+=l,y+=h,m+=d},t.prototype.getCurvePercent=function(e,r){r=K.clamp(r,0,1);var n=this.curves,i=e*t.BEZIER_SIZE,a=n[i];if(a==t.LINEAR)return r;if(a==t.STEPPED)return 0;i++;for(var o=0,s=i,c=i+t.BEZIER_SIZE-1;i<c;i+=2)if(o=n[i],o>=r){var l=void 0,u=void 0;return i==s?(l=0,u=0):(l=n[i-2],u=n[i-1]),u+(n[i+1]-u)*(r-l)/(o-l)}var f=n[i-1];return f+(1-f)*(r-o)/(1-o)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=10*2-1,t}(),io=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r<<1),n}return e.prototype.getPropertyId=function(){return(Wn.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+e.ROTATION]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case W.setup:u.rotation=u.data.rotation;return;case W.first:var f=u.data.rotation-u.rotation;u.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*o}return}if(i>=l[l.length-e.ENTRIES]){var h=l[l.length+e.PREV_ROTATION];switch(s){case W.setup:u.rotation=u.data.rotation+h*o;break;case W.first:case W.replace:h+=u.data.rotation-u.rotation,h-=(16384-(16384.499999999996-h/360|0))*360;case W.add:u.rotation+=h*o}return}var d=On.binarySearch(l,i,e.ENTRIES),p=l[d+e.PREV_ROTATION],v=l[d],y=this.getCurvePercent((d>>1)-1,1-(i-v)/(l[d+e.PREV_TIME]-v)),m=l[d+e.ROTATION]-p;switch(m=p+(m-(16384-(16384.499999999996-m/360|0))*360)*y,s){case W.setup:u.rotation=u.data.rotation+(m-(16384-(16384.499999999996-m/360|0))*360)*o;break;case W.first:case W.replace:m+=u.data.rotation-u.rotation;case W.add:u.rotation+=(m-(16384-(16384.499999999996-m/360|0))*360)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(es),Cp=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.translate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.X]=i,this.frames[r+e.Y]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case W.setup:u.x=u.data.x,u.y=u.data.y;return;case W.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=On.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.X]-f)*v,h+=(l[d+e.Y]-h)*v}switch(s){case W.setup:u.x=u.data.x+f*o,u.y=u.data.y+h*o;break;case W.first:case W.replace:u.x+=(u.data.x+f-u.x)*o,u.y+=(u.data.y+h-u.y)*o;break;case W.add:u.x+=f*o,u.y+=h*o}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(es),u9=function(t){un(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Wn.scale<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case W.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case W.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X]*u.data.scaleX,h=l[l.length+e.PREV_Y]*u.data.scaleY;else{var d=On.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=(f+(l[d+e.X]-f)*v)*u.data.scaleX,h=(h+(l[d+e.Y]-h)*v)*u.data.scaleY}if(o==1)s==W.add?(u.scaleX+=f-u.data.scaleX,u.scaleY+=h-u.data.scaleY):(u.scaleX=f,u.scaleY=h);else{var y=0,m=0;if(c==At.mixOut)switch(s){case W.setup:y=u.data.scaleX,m=u.data.scaleY,u.scaleX=y+(Math.abs(f)*K.signum(y)-y)*o,u.scaleY=m+(Math.abs(h)*K.signum(m)-m)*o;break;case W.first:case W.replace:y=u.scaleX,m=u.scaleY,u.scaleX=y+(Math.abs(f)*K.signum(y)-y)*o,u.scaleY=m+(Math.abs(h)*K.signum(m)-m)*o;break;case W.add:y=u.scaleX,m=u.scaleY,u.scaleX=y+(Math.abs(f)*K.signum(y)-u.data.scaleX)*o,u.scaleY=m+(Math.abs(h)*K.signum(m)-u.data.scaleY)*o}else switch(s){case W.setup:y=Math.abs(u.data.scaleX)*K.signum(f),m=Math.abs(u.data.scaleY)*K.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=m+(h-m)*o;break;case W.first:case W.replace:y=Math.abs(u.scaleX)*K.signum(f),m=Math.abs(u.scaleY)*K.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=m+(h-m)*o;break;case W.add:y=K.signum(f),m=K.signum(h),u.scaleX=Math.abs(u.scaleX)*y+(f-Math.abs(u.data.scaleX)*y)*o,u.scaleY=Math.abs(u.scaleY)*m+(h-Math.abs(u.data.scaleY)*m)*o}}},e}(Cp),c9=function(t){un(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Wn.shear<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case W.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case W.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=On.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=f+(l[d+e.X]-f)*v,h=h+(l[d+e.Y]-h)*v}switch(s){case W.setup:u.shearX=u.data.shearX+f*o,u.shearY=u.data.shearY+h*o;break;case W.first:case W.replace:u.shearX+=(u.data.shearX+f-u.shearX)*o,u.shearY+=(u.data.shearY+h-u.shearY)*o;break;case W.add:u.shearX+=f*o,u.shearY+=h*o}},e}(Cp),iC=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.color<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=this.frames;if(i<u[0]){switch(s){case W.setup:l.color.setFromColor(l.data.color);return;case W.first:var f=l.color,h=l.data.color;f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var d=0,p=0,v=0,y=0;if(i>=u[u.length-e.ENTRIES]){var m=u.length;d=u[m+e.PREV_R],p=u[m+e.PREV_G],v=u[m+e.PREV_B],y=u[m+e.PREV_A]}else{var g=On.binarySearch(u,i,e.ENTRIES);d=u[g+e.PREV_R],p=u[g+e.PREV_G],v=u[g+e.PREV_B],y=u[g+e.PREV_A];var x=u[g],b=this.getCurvePercent(g/e.ENTRIES-1,1-(i-x)/(u[g+e.PREV_TIME]-x));d+=(u[g+e.R]-d)*b,p+=(u[g+e.G]-p)*b,v+=(u[g+e.B]-v)*b,y+=(u[g+e.A]-y)*b}if(o==1)l.color.set(d,p,v,y);else{var f=l.color;s==W.setup&&f.setFromColor(l.data.color),f.add((d-f.r)*o,(p-f.g)*o,(v-f.b)*o,(y-f.a)*o)}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(es),aC=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s,this.frames[r+e.R2]=c,this.frames[r+e.G2]=l,this.frames[r+e.B2]=u},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=this.frames;if(i<u[0]){switch(s){case W.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case W.first:var f=l.color,h=l.darkColor,d=l.data.color,p=l.data.darkColor;f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),h.add((p.r-h.r)*o,(p.g-h.g)*o,(p.b-h.b)*o,0)}return}var v=0,y=0,m=0,g=0,x=0,b=0,S=0;if(i>=u[u.length-e.ENTRIES]){var w=u.length;v=u[w+e.PREV_R],y=u[w+e.PREV_G],m=u[w+e.PREV_B],g=u[w+e.PREV_A],x=u[w+e.PREV_R2],b=u[w+e.PREV_G2],S=u[w+e.PREV_B2]}else{var A=On.binarySearch(u,i,e.ENTRIES);v=u[A+e.PREV_R],y=u[A+e.PREV_G],m=u[A+e.PREV_B],g=u[A+e.PREV_A],x=u[A+e.PREV_R2],b=u[A+e.PREV_G2],S=u[A+e.PREV_B2];var C=u[A],O=this.getCurvePercent(A/e.ENTRIES-1,1-(i-C)/(u[A+e.PREV_TIME]-C));v+=(u[A+e.R]-v)*O,y+=(u[A+e.G]-y)*O,m+=(u[A+e.B]-m)*O,g+=(u[A+e.A]-g)*O,x+=(u[A+e.R2]-x)*O,b+=(u[A+e.G2]-b)*O,S+=(u[A+e.B2]-S)*O}if(o==1)l.color.set(v,y,m,g),l.darkColor.set(x,b,S,1);else{var f=l.color,h=l.darkColor;s==W.setup&&(f.setFromColor(l.data.color),h.setFromColor(l.data.darkColor)),f.add((v-f.r)*o,(y-f.g)*o,(m-f.b)*o,(g-f.a)*o),h.add((x-h.r)*o,(b-h.g)*o,(S-h.b)*o,0)}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(es),Sm=function(){function t(e){this.frames=ue.newFloatArray(e),this.attachmentNames=new Array(e)}return t.prototype.getPropertyId=function(){return(Wn.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.attachmentNames[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.slots[this.slotIndex];if(s==At.mixOut&&o==W.setup){var l=c.data.attachmentName;c.setAttachment(l==null?null:e.getAttachment(this.slotIndex,l));return}var u=this.frames;if(n<u[0]){if(o==W.setup||o==W.first){var f=c.data.attachmentName;c.setAttachment(f==null?null:e.getAttachment(this.slotIndex,f))}return}var h=0;n>=u[u.length-1]?h=u.length-1:h=On.binarySearch(u,n,1)-1;var d=this.attachmentNames[h];e.slots[this.slotIndex].setAttachment(d==null?null:e.getAttachment(this.slotIndex,d))},t}(),a3=null,f9=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r),n.frameVertices=new Array(r),a3==null&&(a3=ue.newFloatArray(64)),n}return e.prototype.getPropertyId=function(){return(Wn.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.frameVertices[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=l.getAttachment();if(!(!(u instanceof rc)||!u.applyDeform(this.attachment))){var f=l.attachmentVertices;f.length==0&&(s=W.setup);var h=this.frameVertices,d=h[0].length,p=this.frames;if(i<p[0]){var v=u;switch(s){case W.setup:f.length=0;return;case W.first:if(o==1){f.length=0;break}var y=ue.setArraySize(f,d);if(v.bones==null)for(var m=v.vertices,g=0;g<d;g++)y[g]+=(m[g]-y[g])*o;else{o=1-o;for(var g=0;g<d;g++)y[g]*=o}}return}var x=ue.setArraySize(f,d);if(i>=p[p.length-1]){var b=h[p.length-1];if(o==1)if(s==W.add){var v=u;if(v.bones==null)for(var m=v.vertices,g=0;g<d;g++)x[g]+=b[g]-m[g];else for(var g=0;g<d;g++)x[g]+=b[g]}else ue.arrayCopy(b,0,x,0,d);else switch(s){case W.setup:{var S=u;if(S.bones==null)for(var m=S.vertices,g=0;g<d;g++){var w=m[g];x[g]=w+(b[g]-w)*o}else for(var g=0;g<d;g++)x[g]=b[g]*o;break}case W.first:case W.replace:for(var g=0;g<d;g++)x[g]+=(b[g]-x[g])*o;case W.add:var v=u;if(v.bones==null)for(var m=v.vertices,g=0;g<d;g++)x[g]+=(b[g]-m[g])*o;else for(var g=0;g<d;g++)x[g]+=b[g]*o}return}var A=On.binarySearch(p,i),C=h[A-1],O=h[A],P=p[A],I=this.getCurvePercent(A-1,1-(i-P)/(p[A-1]-P));if(o==1)if(s==W.add){var v=u;if(v.bones==null)for(var m=v.vertices,g=0;g<d;g++){var R=C[g];x[g]+=R+(O[g]-R)*I-m[g]}else for(var g=0;g<d;g++){var R=C[g];x[g]+=R+(O[g]-R)*I}}else for(var g=0;g<d;g++){var R=C[g];x[g]=R+(O[g]-R)*I}else switch(s){case W.setup:{var F=u;if(F.bones==null)for(var m=F.vertices,g=0;g<d;g++){var R=C[g],w=m[g];x[g]=w+(R+(O[g]-R)*I-w)*o}else for(var g=0;g<d;g++){var R=C[g];x[g]=(R+(O[g]-R)*I)*o}break}case W.first:case W.replace:for(var g=0;g<d;g++){var R=C[g];x[g]+=(R+(O[g]-R)*I-x[g])*o}break;case W.add:var v=u;if(v.bones==null)for(var m=v.vertices,g=0;g<d;g++){var R=C[g];x[g]+=(R+(O[g]-R)*I-m[g])*o}else for(var g=0;g<d;g++){var R=C[g];x[g]+=(R+(O[g]-R)*I)*o}}}},e}(es),h9=function(){function t(e){this.frames=ue.newFloatArray(e),this.events=new Array(e)}return t.prototype.getPropertyId=function(){return Wn.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r){this.frames[e]=r.time,this.events[e]=r},t.prototype.apply=function(e,r,n,i,a,o,s){if(i!=null){var c=this.frames,l=this.frames.length;if(r>n)this.apply(e,r,Number.MAX_VALUE,i,a,o,s),r=-1;else if(r>=c[l-1])return;if(!(n<c[0])){var u=0;if(r<c[0])u=0;else{u=On.binarySearch(c,r);for(var f=c[u];u>0&&c[u-1]==f;)u--}for(;u<l&&n>=c[u];u++)i.push(this.events[u])}}},t}(),Em=function(){function t(e){this.frames=ue.newFloatArray(e),this.drawOrders=new Array(e)}return t.prototype.getPropertyId=function(){return Wn.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.drawOrders[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.drawOrder,l=e.slots;if(s==At.mixOut&&o==W.setup){ue.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var u=this.frames;if(n<u[0]){(o==W.setup||o==W.first)&&ue.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var f=0;n>=u[u.length-1]?f=u.length-1:f=On.binarySearch(u,n)-1;var h=this.drawOrders[f];if(h==null)ue.arrayCopy(l,0,c,0,l.length);else for(var d=0,p=h.length;d<p;d++)c[d]=l[h[d]]},t}(),oC=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.MIX]=i,this.frames[r+e.BEND_DIRECTION]=a,this.frames[r+e.COMPRESS]=o?1:0,this.frames[r+e.STRETCH]=s?1:0},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.ikConstraints[this.ikConstraintIndex];if(i<l[0]){switch(s){case W.setup:u.mix=u.data.mix,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case W.first:u.mix+=(u.data.mix-u.mix)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}if(i>=l[l.length-e.ENTRIES]){s==W.setup?(u.mix=u.data.mix+(l[l.length+e.PREV_MIX]-u.data.mix)*o,c==At.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0)):(u.mix+=(l[l.length+e.PREV_MIX]-u.mix)*o,c==At.mixIn&&(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0));return}var f=On.binarySearch(l,i,e.ENTRIES),h=l[f+e.PREV_MIX],d=l[f],p=this.getCurvePercent(f/e.ENTRIES-1,1-(i-d)/(l[f+e.PREV_TIME]-d));s==W.setup?(u.mix=u.data.mix+(h+(l[f+e.MIX]-h)*p-u.data.mix)*o,c==At.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0)):(u.mix+=(h+(l[f+e.MIX]-h)*p-u.mix)*o,c==At.mixIn&&(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0))},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_MIX=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.BEND_DIRECTION=2,e.COMPRESS=3,e.STRETCH=4,e}(es),sC=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a,this.frames[r+e.SCALE]=o,this.frames[r+e.SHEAR]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.transformConstraints[this.transformConstraintIndex];if(i<l[0]){var f=u.data;switch(s){case W.setup:u.rotateMix=f.rotateMix,u.translateMix=f.translateMix,u.scaleMix=f.scaleMix,u.shearMix=f.shearMix;return;case W.first:u.rotateMix+=(f.rotateMix-u.rotateMix)*o,u.translateMix+=(f.translateMix-u.translateMix)*o,u.scaleMix+=(f.scaleMix-u.scaleMix)*o,u.shearMix+=(f.shearMix-u.shearMix)*o}return}var h=0,d=0,p=0,v=0;if(i>=l[l.length-e.ENTRIES]){var y=l.length;h=l[y+e.PREV_ROTATE],d=l[y+e.PREV_TRANSLATE],p=l[y+e.PREV_SCALE],v=l[y+e.PREV_SHEAR]}else{var m=On.binarySearch(l,i,e.ENTRIES);h=l[m+e.PREV_ROTATE],d=l[m+e.PREV_TRANSLATE],p=l[m+e.PREV_SCALE],v=l[m+e.PREV_SHEAR];var g=l[m],x=this.getCurvePercent(m/e.ENTRIES-1,1-(i-g)/(l[m+e.PREV_TIME]-g));h+=(l[m+e.ROTATE]-h)*x,d+=(l[m+e.TRANSLATE]-d)*x,p+=(l[m+e.SCALE]-p)*x,v+=(l[m+e.SHEAR]-v)*x}if(s==W.setup){var f=u.data;u.rotateMix=f.rotateMix+(h-f.rotateMix)*o,u.translateMix=f.translateMix+(d-f.translateMix)*o,u.scaleMix=f.scaleMix+(p-f.scaleMix)*o,u.shearMix=f.shearMix+(v-f.shearMix)*o}else u.rotateMix+=(h-u.rotateMix)*o,u.translateMix+=(d-u.translateMix)*o,u.scaleMix+=(p-u.scaleMix)*o,u.shearMix+=(v-u.shearMix)*o},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(es),wm=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.VALUE]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case W.setup:u.position=u.data.position;return;case W.first:u.position+=(u.data.position-u.position)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=On.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==W.setup?u.position=u.data.position+(f-u.data.position)*o:u.position+=(f-u.position)*o},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(es),d9=function(t){un(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Wn.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case W.setup:u.spacing=u.data.spacing;return;case W.first:u.spacing+=(u.data.spacing-u.spacing)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=On.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==W.setup?u.spacing=u.data.spacing+(f-u.data.spacing)*o:u.spacing+=(f-u.spacing)*o},e}(wm),lC=function(t){un(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=ue.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Wn.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case W.setup:u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix;return;case W.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*o,u.translateMix+=(u.data.translateMix-u.translateMix)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_ROTATE],h=l[l.length+e.PREV_TRANSLATE];else{var d=On.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_ROTATE],h=l[d+e.PREV_TRANSLATE];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.ROTATE]-f)*v,h+=(l[d+e.TRANSLATE]-h)*v}s==W.setup?(u.rotateMix=u.data.rotateMix+(f-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(h-u.data.translateMix)*o):(u.rotateMix+=(f-u.rotateMix)*o,u.translateMix+=(h-u.translateMix)*o)},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(es),p9=function(){function t(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new g9(this),this.propertyIDs=new W$,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new c_(function(){return new v9}),this.data=e}return t.prototype.update=function(e){e*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a!=null){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=e*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s!=null){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime=a.timeScale==0?0:(c/a.timeScale+e)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom!=null;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&a.mixingFrom==null){r[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(a.mixingFrom!=null&&this.updateMixingFrom(a,e)){var l=a.mixingFrom;for(a.mixingFrom=null,l!=null&&(l.mixingTo=null);l!=null;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,r){var n=e.mixingFrom;if(n==null)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,e.mixTime+=r,!1)},t.prototype.apply=function(e){if(e==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(s==null||s.delay>0)){i=!0;var c=a==0?W.first:s.mixBlend,l=s.alpha;s.mixingFrom!=null?l*=this.applyMixingFrom(s,e,c):s.trackTime>=s.trackEnd&&s.next==null&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=s.animation.timelines.length,d=s.animation.timelines;if(a==0&&l==1||c==W.add)for(var p=0;p<h;p++)ue.webkit602BugfixHelper(l,c),d[p].apply(e,u,f,r,l,c,At.mixIn);else{var v=s.timelineMode,y=s.timelinesRotation.length==0;y&&ue.setArraySize(s.timelinesRotation,h<<1,null);for(var m=s.timelinesRotation,p=0;p<h;p++){var g=d[p],x=v[p]==t.SUBSEQUENT?c:W.setup;g instanceof io?this.applyRotateTimeline(g,e,f,l,x,m,p<<1,y):(ue.webkit602BugfixHelper(l,c),g.apply(e,u,f,r,l,x,At.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}return this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,r,n){var i=e.mixingFrom;i.mixingFrom!=null&&this.applyMixingFrom(i,r,n);var a=0;e.mixDuration==0?(a=1,n==W.first&&(n=W.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),n!=W.first&&(n=i.mixBlend));var o=a<i.eventThreshold?this.events:null,s=a<i.attachmentThreshold,c=a<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,h=i.animation.timelines,d=i.alpha*e.interruptAlpha,p=d*(1-a);if(n==W.add)for(var v=0;v<f;v++)h[v].apply(r,l,u,o,p,n,At.mixOut);else{var y=i.timelineMode,m=i.timelineHoldMix,g=i.timelinesRotation.length==0;g&&ue.setArraySize(i.timelinesRotation,f<<1,null);var x=i.timelinesRotation;i.totalAlpha=0;for(var v=0;v<f;v++){var b=h[v],S=At.mixOut,w=void 0,A=0;switch(y[v]){case t.SUBSEQUENT:if(!s&&b instanceof Sm||!c&&b instanceof Em)continue;w=n,A=p;break;case t.FIRST:w=W.setup,A=p;break;case t.HOLD:w=W.setup,A=d;break;default:w=W.setup;var C=m[v];A=d*Math.max(0,1-C.mixTime/C.mixDuration);break}i.totalAlpha+=A,b instanceof io?this.applyRotateTimeline(b,r,u,A,w,x,v<<1,g):(ue.webkit602BugfixHelper(A,n),w==W.setup&&(b instanceof Sm?s&&(S=At.mixOut):b instanceof Em&&c&&(S=At.mixOut)),b.apply(r,l,u,o,A,w,S))}}return e.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,a},t.prototype.applyRotateTimeline=function(e,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){e.apply(r,0,n,null,1,a,At.mixIn);return}var l=e,u=l.frames,f=r.bones[l.boneIndex],h=0,d=0;if(n<u[0])switch(a){case W.setup:f.rotation=f.data.rotation;default:return;case W.first:h=f.rotation,d=f.data.rotation}else if(h=a==W.setup?f.data.rotation:f.rotation,n>=u[u.length-io.ENTRIES])d=f.data.rotation+u[u.length+io.PREV_ROTATION];else{var p=On.binarySearch(u,n,io.ENTRIES),v=u[p+io.PREV_ROTATION],y=u[p],m=l.getCurvePercent((p>>1)-1,1-(n-y)/(u[p+io.PREV_TIME]-y));d=u[p+io.ROTATION]-v,d-=(16384-(16384.499999999996-d/360|0))*360,d=v+d*m+f.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var g=0,x=d-h;if(x-=(16384-(16384.499999999996-x/360|0))*360,x==0)g=o[s];else{var b=0,S=0;c?(b=0,S=x):(b=o[s],S=o[s+1]);var w=x>0,A=b>=0;K.signum(S)!=K.signum(x)&&Math.abs(S)<=90&&(Math.abs(b)>180&&(b+=360*K.signum(b)),A=w),g=x+b-b%360,A!=w&&(g+=360*K.signum(b)),o[s]=g}o[s+1]=x,h+=g*i,f.rotation=h-(16384-(16384.499999999996-h/360|0))*360},t.prototype.queueEvents=function(e,r){for(var n=e.animationStart,i=e.animationEnd,a=i-n,o=e.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(e,u)}var f=!1;for(e.loop?f=a==0||o>e.trackTime%a:f=r>=i&&e.animationLast<i,f&&this.queue.complete(e);c<l;c++){var h=s[c];h.time<n||this.queue.event(e,s[c])}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var r=this.tracks[e];if(r!=null){this.queue.end(r),this.disposeNext(r);for(var n=r;;){var i=n.mixingFrom;if(i==null)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,r,n){var i=this.expandToIndex(e);this.tracks[e]=r,i!=null&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom!=null&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},t.prototype.setAnimation=function(e,r,n){var i=this.data.skeletonData.findAnimation(r);if(i==null)throw new Error("Animation not found: "+r);return this.setAnimationWith(e,i,n)},t.prototype.setAnimationWith=function(e,r,n){if(r==null)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(e);a!=null&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,i=!1):this.disposeNext(a));var o=this.trackEntry(e,r,n,a);return this.setCurrent(e,o,i),this.queue.drain(),o},t.prototype.addAnimation=function(e,r,n,i){var a=this.data.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);return this.addAnimationWith(e,a,n,i)},t.prototype.addAnimationWith=function(e,r,n,i){if(r==null)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(a!=null)for(;a.next!=null;)a=a.next;var o=this.trackEntry(e,r,n,a);if(a==null)this.setCurrent(e,o,!0),this.queue.drain();else if(a.next=o,i<=0){var s=a.animationEnd-a.animationStart;s!=0?(a.loop?i+=s*(1+(a.trackTime/s|0)):i+=Math.max(s,a.trackTime),i-=this.data.getMix(a.animation,r)):i=a.trackTime}return o.delay=i,o},t.prototype.setEmptyAnimation=function(e,r){var n=this.setAnimationWith(e,t.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},t.prototype.addEmptyAnimation=function(e,r,n){n<=0&&(n-=r);var i=this.addAnimationWith(e,t.emptyAnimation,!1,n);return i.mixDuration=r,i.trackEnd=r,i},t.prototype.setEmptyAnimations=function(e){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a!=null&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=r,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(ue.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,r,n,i){var a=this.trackEntryPool.obtain();return a.trackIndex=e,a.animation=r,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=i==null?0:this.data.getMix(i.animation,r),a},t.prototype.disposeNext=function(e){for(var r=e.next;r!=null;)this.queue.dispose(r),r=r.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var n=this.tracks[e];if(n!=null){for(;n.mixingFrom!=null;)n=n.mixingFrom;do(n.mixingFrom==null||n.mixBlend!=W.add)&&this.setTimelineModes(n),n=n.mixingTo;while(n!=null)}}},t.prototype.setTimelineModes=function(e){var r=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,a=ue.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var o=ue.setArraySize(e.timelineHoldMix,i),s=this.propertyIDs;if(r!=null&&r.holdPrevious){for(var c=0;c<i;c++)s.add(n[c].getPropertyId()),a[c]=t.HOLD;return}e:for(var c=0;c<i;c++){var l=n[c].getPropertyId();if(!s.add(l))a[c]=t.SUBSEQUENT;else if(r==null||!this.hasTimeline(r,l))a[c]=t.FIRST;else{for(var u=r.mixingTo;u!=null;u=u.mixingTo)if(!this.hasTimeline(u,l)){if(e.mixDuration>0){a[c]=t.HOLD_MIX,o[c]=u;continue e}break}a[c]=t.HOLD}}},t.prototype.hasTimeline=function(e,r){for(var n=e.animation.timelines,i=0,a=n.length;i<a;i++)if(n[i].getPropertyId()==r)return!0;return!1},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(e==null)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,r,n)},t.prototype.addAnimationByName=function(e,r,n,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,r,n,i)},t.prototype.hasAnimation=function(e){var r=this.data.skeletonData.findAnimation(e);return r!==null},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new On("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD=2,t.HOLD_MIX=3,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),v9=function(){function t(){this.mixBlend=W.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),g9=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(Ci.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(Ci.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(Ci.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(Ci.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(Ci.complete),this.objects.push(e)},t.prototype.event=function(e,r){this.objects.push(Ci.event),this.objects.push(e),this.objects.push(r)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];switch(i){case Ci.start:a.listener!=null&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++)r[o].start&&r[o].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case Ci.interrupt:a.listener!=null&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++)r[o].interrupt&&r[o].interrupt(a);break;case Ci.end:a.listener!=null&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++)r[o].end&&r[o].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case Ci.dispose:a.listener!=null&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++)r[o].dispose&&r[o].dispose(a);this.animState.trackEntryPool.free(a);break;case Ci.complete:a.listener!=null&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++)r[o].complete&&r[o].complete(a);var s=K.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,s);break;case Ci.event:var c=e[n+++2];a.listener!=null&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++)r[o].event&&r[o].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}(),Ci;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(Ci||(Ci={}));var MFe=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,r){},t}(),m9=function(){function t(e){if(this.animationToMixTime={},this.defaultMix=0,e==null)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return t.prototype.setMix=function(e,r,n){var i=this.skeletonData.findAnimation(e);if(i==null)throw new Error("Animation not found: "+e);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},t.prototype.setMixByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,r,n)},t.prototype.setMixWith=function(e,r,n){if(e==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var i=e.name+"."+r.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(e,r){var n=e.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},t.deprecatedWarning1=!1,t}(),y9=function(){function t(e){this.atlas=e}return t.prototype.newRegionAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var a=new fP(r);return a.region=i,a},t.prototype.newMeshAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var a=new uP(r);return a.region=i,a},t.prototype.newBoundingBoxAttachment=function(e,r){return new o9(r)},t.prototype.newPathAttachment=function(e,r){return new Ap(r)},t.prototype.newPointAttachment=function(e,r){return new l9(r)},t.prototype.newClippingAttachment=function(e,r){return new s9(r)},t}(),uC=function(){function t(e,r,n){if(this.matrix=new zr,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,r,n,i,a,o,s){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(c==null){var h=this.skeleton,d=n+90+s;l.a=K.cosDeg(n+o)*i*u,l.c=K.cosDeg(d)*a*u,l.b=K.sinDeg(n+o)*i*f,l.d=K.sinDeg(d)*a*f,l.tx=e*u+h.x,l.ty=r*f+h.y;return}var p=c.matrix.a,v=c.matrix.c,y=c.matrix.b,m=c.matrix.d;switch(l.tx=p*e+v*r+c.matrix.tx,l.ty=y*e+m*r+c.matrix.ty,this.data.transformMode){case mt.Normal:{var d=n+90+s,g=K.cosDeg(n+o)*i,x=K.cosDeg(d)*a,b=K.sinDeg(n+o)*i,S=K.sinDeg(d)*a;l.a=p*g+v*b,l.c=p*x+v*S,l.b=y*g+m*b,l.d=y*x+m*S;return}case mt.OnlyTranslation:{var d=n+90+s;l.a=K.cosDeg(n+o)*i,l.c=K.cosDeg(d)*a,l.b=K.sinDeg(n+o)*i,l.d=K.sinDeg(d)*a;break}case mt.NoRotationOrReflection:{var w=p*p+y*y,A=0;w>1e-4?(w=Math.abs(p*m-v*y)/w,v=y*w,m=p*w,A=Math.atan2(y,p)*K.radDeg):(p=0,y=0,A=90-Math.atan2(m,v)*K.radDeg);var C=n+o-A,O=n+s-A+90,g=K.cosDeg(C)*i,x=K.cosDeg(O)*a,b=K.sinDeg(C)*i,S=K.sinDeg(O)*a;l.a=p*g-v*b,l.c=p*x-v*S,l.b=y*g+m*b,l.d=y*x+m*S;break}case mt.NoScale:case mt.NoScaleOrReflection:{var P=K.cosDeg(n),I=K.sinDeg(n),R=(p*P+v*I)/u,F=(y*P+m*I)/f,w=Math.sqrt(R*R+F*F);w>1e-5&&(w=1/w),R*=w,F*=w,w=Math.sqrt(R*R+F*F),this.data.transformMode==mt.NoScale&&p*m-v*y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(w=-w);var D=Math.PI/2+Math.atan2(F,R),L=Math.cos(D)*w,U=Math.sin(D)*w,g=K.cosDeg(o)*i,x=K.cosDeg(90+s)*a,b=K.sinDeg(o)*i,S=K.sinDeg(90+s)*a;l.a=R*g+L*b,l.c=R*x+L*S,l.b=F*g+U*b,l.d=F*x+U*S;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*K.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*K.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,r=this.matrix;if(e==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*K.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*K.radDeg;return}var n=e.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,d=c*r.b-u*r.a,p=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+d*d),this.ascaleX>1e-4){var v=f*p-h*d;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(f*h+d*p,v)*K.radDeg,this.arotation=Math.atan2(d,f)*K.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*K.radDeg},t.prototype.worldToLocal=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=e.x-r.tx,l=e.y-r.ty;return e.x=c*o*s-l*i*s,e.y=l*n*s-c*a*s,e},t.prototype.localToWorld=function(e){var r=this.matrix,n=e.x,i=e.y;return e.x=n*r.a+i*r.c+r.tx,e.y=n*r.b+i*r.d+r.ty,e},t.prototype.worldToLocalRotation=function(e){var r=K.sinDeg(e),n=K.cosDeg(e),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*K.radDeg},t.prototype.localToWorldRotation=function(e){var r=K.sinDeg(e),n=K.cosDeg(e),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*K.radDeg},t.prototype.rotateWorld=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=K.cosDeg(e),c=K.sinDeg(e);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o,this.appliedValid=!1},t}(),_9=function(){function t(e,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=mt.Normal,e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}return t}(),x9=function(){function t(e,r){if(r==null)throw new Error("data cannot be null.");this.time=e,this.data=r}return t}(),b9=function(){function t(e){this.name=e}return t}(),S9=function(){function t(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.mix);break}},t.prototype.apply1=function(e,r,n,i,a,o,s){e.appliedValid||e.updateAppliedTransform();var c=e.parent.matrix,l=1/(c.a*c.d-c.b*c.c),u=r-c.tx,f=n-c.ty,h=(u*c.d-f*c.c)*l-e.ax,d=(f*c.a-u*c.b)*l-e.ay,p=Math.atan2(d,h)*K.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var v=e.ascaleX,y=e.ascaleY;if(i||a){var m=e.data.length*v,g=Math.sqrt(h*h+d*d);if(i&&g<m||a&&g>m&&m>1e-4){var x=(g/m-1)*s+1;v*=x,o&&(y*=x)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*s,v,y,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,r,n,i,a,o,s){if(s==0){r.updateWorldTransform();return}e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var c=e.ax,l=e.ay,u=e.ascaleX,f=u,h=e.ascaleY,d=r.ascaleX,p=e.matrix,v=0,y=0,m=0;u<0?(u=-u,v=180,m=-1):(v=0,m=1),h<0&&(h=-h,m=-m),d<0?(d=-d,y=180):y=0;var g=r.ax,x=0,b=0,S=0,w=p.a,A=p.c,C=p.b,O=p.d,P=Math.abs(u-h)<=1e-4;P?(x=r.ay,b=w*g+A*x+p.tx,S=C*g+O*x+p.ty):(x=0,b=w*g+p.tx,S=C*g+p.ty);var I=e.parent.matrix;w=I.a,A=I.c,C=I.b,O=I.d;var R=1/(w*O-A*C),F=n-I.tx,D=i-I.ty,L=(F*O-D*A)*R-c,U=(D*w-F*C)*R-l,Y=L*L+U*U;F=b-I.tx,D=S-I.ty;var ee=(F*O-D*A)*R-c,J=(D*w-F*C)*R-l,X=Math.sqrt(ee*ee+J*J),M=r.data.length*d,V=0,$=0;e:if(P){M*=u;var j=(Y-X*X-M*M)/(2*X*M);j<-1?j=-1:j>1&&(j=1,o&&X+M>1e-4&&(f*=(Math.sqrt(Y)/(X+M)-1)*s+1)),$=Math.acos(j)*a,w=X+M*j,A=M*Math.sin($),V=Math.atan2(U*w-L*A,L*w+U*A)}else{w=u*M,A=h*M;var te=w*w,ie=A*A,de=Math.atan2(U,L);C=ie*X*X+te*Y-te*ie;var he=-2*ie*X,Ee=ie-te;if(O=he*he-4*Ee*C,O>=0){var Oe=Math.sqrt(O);he<0&&(Oe=-Oe),Oe=-(he+Oe)/2;var ye=Oe/Ee,Ae=C/Oe,_e=Math.abs(ye)<Math.abs(Ae)?ye:Ae;if(_e*_e<=Y){D=Math.sqrt(Y-_e*_e)*a,V=de-Math.atan2(D,_e),$=Math.atan2(D/h,(_e-X)/u);break e}}var we=K.PI,$e=X-w,Xe=$e*$e,ke=0,at=0,vt=X+w,gt=vt*vt,tt=0;C=-w*X/(te-ie),C>=-1&&C<=1&&(C=Math.acos(C),F=w*Math.cos(C)+X,D=A*Math.sin(C),O=F*F+D*D,O<Xe&&(we=C,Xe=O,$e=F,ke=D),O>gt&&(at=C,gt=O,vt=F,tt=D)),Y<=(Xe+gt)/2?(V=de-Math.atan2(ke*a,$e),$=we*a):(V=de-Math.atan2(tt*a,vt),$=at*a)}var ot=Math.atan2(x,g)*m,dt=e.arotation;V=(V-ot)*K.radDeg+v-dt,V>180?V-=360:V<-180&&(V+=360),e.updateWorldTransformWith(c,l,dt+V*s,f,e.ascaleY,0,0),dt=r.arotation,$=(($+ot)*K.radDeg-r.ashearX)*m+y-dt,$>180?$-=360:$<-180&&($+=360),r.updateWorldTransformWith(g,x,dt+$*s,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},t}(),E9=function(){function t(e){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=e}return t}(),w9=function(){function t(e){this.order=0,this.bones=new Array,this.name=e}return t}(),Fa;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"})(Fa||(Fa={}));var A9=function(){function t(e,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,i=e.bones.length;n<i;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof Ap){var r=this.rotateMix,n=this.translateMix,i=n>0,a=r>0;if(!(!i&&!a)){var o=this.data,s=o.spacingMode,c=s==Fa.Length,l=o.rotateMode,u=l==Zr.Tangent,f=l==Zr.ChainScale,h=this.bones.length,d=u?h:h+1,p=this.bones,v=ue.setArraySize(this.spaces,d),y=null,m=this.spacing;if(f||c){f&&(y=ue.setArraySize(this.lengths,h));for(var g=0,x=d-1;g<x;){var b=p[g],S=b.data.length;if(S<t.epsilon)f&&(y[g]=0),v[++g]=0;else{var w=S*b.matrix.a,A=S*b.matrix.b,C=Math.sqrt(w*w+A*A);f&&(y[g]=C),v[++g]=(c?S+m:m)*C/S}}}else for(var g=1;g<d;g++)v[g]=m;var O=this.computeWorldPositions(e,d,u,o.positionMode==Mr.Percent,s==Fa.Percent),P=O[0],I=O[1],R=o.offsetRotation,F=!1;if(R==0)F=l==Zr.Chain;else{F=!1;var D=this.target.bone.matrix;R*=D.a*D.d-D.b*D.c>0?K.degRad:-K.degRad}for(var g=0,D=3;g<h;g++,D+=3){var b=p[g],L=b.matrix;L.tx+=(P-L.tx)*n,L.ty+=(I-L.ty)*n;var w=O[D],A=O[D+1],U=w-P,Y=A-I;if(f){var ee=y[g];if(ee!=0){var J=(Math.sqrt(U*U+Y*Y)/ee-1)*r+1;L.a*=J,L.b*=J}}if(P=w,I=A,a){var X=L.a,M=L.c,V=L.b,$=L.d,j=0,te=0,ie=0;if(u?j=O[D-1]:v[g+1]==0?j=O[D+2]:j=Math.atan2(Y,U),j-=Math.atan2(V,X),F){te=Math.cos(j),ie=Math.sin(j);var de=b.data.length;P+=(de*(te*X-ie*V)-U)*r,I+=(de*(ie*X+te*V)-Y)*r}else j+=R;j>K.PI?j-=K.PI2:j<-K.PI&&(j+=K.PI2),j*=r,te=Math.cos(j),ie=Math.sin(j),L.a=te*X-ie*V,L.c=te*M-ie*$,L.b=ie*X+te*V,L.d=ie*M+te*$}b.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,r,n,i,a){var o=this.target,s=this.position,c=this.spaces,l=ue.setArraySize(this.positions,r*3+2),u=null,f=e.closed,h=e.worldVerticesLength,d=h/6,p=t.NONE;if(!e.constantSpeed){var v=e.lengths;d-=f?1:2;var y=v[d];if(i&&(s*=y),a)for(var m=0;m<r;m++)c[m]*=y;u=ue.setArraySize(this.world,8);for(var m=0,g=0,x=0;m<r;m++,g+=3){var b=c[m];s+=b;var S=s;if(f)S%=y,S<0&&(S+=y),x=0;else if(S<0){p!=t.BEFORE&&(p=t.BEFORE,e.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(S,u,0,l,g);continue}else if(S>y){p!=t.AFTER&&(p=t.AFTER,e.computeWorldVertices(o,h-6,4,u,0,2)),this.addAfterPosition(S-y,u,0,l,g);continue}for(;;x++){var w=v[x];if(!(S>w)){if(x==0)S/=w;else{var A=v[x-1];S=(S-A)/(w-A)}break}}x!=p&&(p=x,f&&x==d?(e.computeWorldVertices(o,h-4,4,u,0,2),e.computeWorldVertices(o,0,4,u,4,2)):e.computeWorldVertices(o,x*6+2,8,u,0,2)),this.addCurvePosition(S,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,g,n||m>0&&b==0)}return l}f?(h+=2,u=ue.setArraySize(this.world,h),e.computeWorldVertices(o,2,h-4,u,0,2),e.computeWorldVertices(o,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(d--,h-=4,u=ue.setArraySize(this.world,h),e.computeWorldVertices(o,2,h,u,0,2));for(var C=ue.setArraySize(this.curves,d),O=0,P=u[0],I=u[1],R=0,F=0,D=0,L=0,U=0,Y=0,ee=0,J=0,X=0,M=0,V=0,$=0,j=0,te=0,m=0,ie=2;m<d;m++,ie+=6)R=u[ie],F=u[ie+1],D=u[ie+2],L=u[ie+3],U=u[ie+4],Y=u[ie+5],ee=(P-R*2+D)*.1875,J=(I-F*2+L)*.1875,X=((R-D)*3-P+U)*.09375,M=((F-L)*3-I+Y)*.09375,V=ee*2+X,$=J*2+M,j=(R-P)*.75+ee+X*.16666667,te=(F-I)*.75+J+M*.16666667,O+=Math.sqrt(j*j+te*te),j+=V,te+=$,V+=X,$+=M,O+=Math.sqrt(j*j+te*te),j+=V,te+=$,O+=Math.sqrt(j*j+te*te),j+=V+X,te+=$+M,O+=Math.sqrt(j*j+te*te),C[m]=O,P=U,I=Y;if(i&&(s*=O),a)for(var m=0;m<r;m++)c[m]*=O;for(var de=this.segments,he=0,m=0,g=0,x=0,Ee=0;m<r;m++,g+=3){var b=c[m];s+=b;var S=s;if(f)S%=O,S<0&&(S+=O),x=0;else if(S<0){this.addBeforePosition(S,u,0,l,g);continue}else if(S>O){this.addAfterPosition(S-O,u,h-4,l,g);continue}for(;;x++){var Oe=C[x];if(!(S>Oe)){if(x==0)S/=Oe;else{var A=C[x-1];S=(S-A)/(Oe-A)}break}}if(x!=p){p=x;var ye=x*6;for(P=u[ye],I=u[ye+1],R=u[ye+2],F=u[ye+3],D=u[ye+4],L=u[ye+5],U=u[ye+6],Y=u[ye+7],ee=(P-R*2+D)*.03,J=(I-F*2+L)*.03,X=((R-D)*3-P+U)*.006,M=((F-L)*3-I+Y)*.006,V=ee*2+X,$=J*2+M,j=(R-P)*.3+ee+X*.16666667,te=(F-I)*.3+J+M*.16666667,he=Math.sqrt(j*j+te*te),de[0]=he,ye=1;ye<8;ye++)j+=V,te+=$,V+=X,$+=M,he+=Math.sqrt(j*j+te*te),de[ye]=he;j+=V,te+=$,he+=Math.sqrt(j*j+te*te),de[8]=he,j+=V+X,te+=$+M,he+=Math.sqrt(j*j+te*te),de[9]=he,Ee=0}for(S*=he;;Ee++){var Ae=de[Ee];if(!(S>Ae)){if(Ee==0)S/=Ae;else{var A=de[Ee-1];S=Ee+(S-A)/(Ae-A)}break}}this.addCurvePosition(S*.1,P,I,R,F,D,L,U,Y,l,g,n||m>0&&b==0)}return l},t.prototype.addBeforePosition=function(e,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addAfterPosition=function(e,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addCurvePosition=function(e,r,n,i,a,o,s,c,l,u,f,h){(e==0||isNaN(e))&&(e=1e-4);var d=e*e,p=d*e,v=1-e,y=v*v,m=y*v,g=v*e,x=g*3,b=v*x,S=x*e,w=r*m+i*b+o*S+c*p,A=n*m+a*b+s*S+l*p;u[f]=w,u[f+1]=A,h&&(u[f+2]=Math.atan2(A-(n*y+a*g*2+s*d),w-(r*y+i*g*2+o*d)))},t.prototype.getOrder=function(){return this.data.order},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),C9=function(){function t(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new yp,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?K.degRad:-K.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var m=p[v],g=!1,x=m.matrix;if(e!=0){var b=x.a,S=x.c,w=x.b,A=x.d,C=Math.atan2(l,s)-Math.atan2(w,b)+h;C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2),C*=e;var O=Math.cos(C),P=Math.sin(C);x.a=O*b-P*w,x.c=O*S-P*A,x.b=P*b+O*w,x.d=P*S+O*A,g=!0}if(r!=0){var I=this.temp;a.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),x.tx+=(I.x-x.tx)*r,x.ty+=(I.y-x.ty)*r,g=!0}if(n>0){var R=Math.sqrt(x.a*x.a+x.b*x.b),F=Math.sqrt(s*s+l*l);R>1e-5&&(R=(R+(F-R+this.data.offsetScaleX)*n)/R),x.a*=R,x.b*=R,R=Math.sqrt(x.c*x.c+x.d*x.d),F=Math.sqrt(c*c+u*u),R>1e-5&&(R=(R+(F-R+this.data.offsetScaleY)*n)/R),x.c*=R,x.d*=R,g=!0}if(i>0){var S=x.c,A=x.d,D=Math.atan2(A,S),C=Math.atan2(u,c)-Math.atan2(l,s)-(D-Math.atan2(x.b,x.a));C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2),C=D+(C+d)*i;var R=Math.sqrt(S*S+A*A);x.c=Math.cos(C)*R,x.d=Math.sin(C)*R,g=!0}g&&(m.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?K.degRad:-K.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var m=p[v],g=!1,x=m.matrix;if(e!=0){var b=x.a,S=x.c,w=x.b,A=x.d,C=Math.atan2(l,s)+h;C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2),C*=e;var O=Math.cos(C),P=Math.sin(C);x.a=O*b-P*w,x.c=O*S-P*A,x.b=P*b+O*w,x.d=P*S+O*A,g=!0}if(r!=0){var I=this.temp;a.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),x.tx+=I.x*r,x.ty+=I.y*r,g=!0}if(n>0){var R=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*n+1;x.a*=R,x.b*=R,R=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1,x.c*=R,x.d*=R,g=!0}if(i>0){var C=Math.atan2(u,c)-Math.atan2(l,s);C>K.PI?C-=K.PI2:C<-K.PI&&(C+=K.PI2);var S=x.c,A=x.d;C=Math.atan2(A,S)+(C-K.PI/2+d)*i;var R=Math.sqrt(S*S+A*A);x.c=Math.cos(C)*R,x.d=Math.sin(C)*R,g=!0}g&&(m.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(e!=0){var f=a.arotation-u+this.data.offsetRotation;f-=(16384-(16384.499999999996-f/360|0))*360,u+=f*e}var h=l.ax,d=l.ay;r!=0&&(h+=(a.ax-h+this.data.offsetX)*r,d+=(a.ay-d+this.data.offsetY)*r);var p=l.ascaleX,v=l.ascaleY;n>0&&(p>1e-5&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*n)/p),v>1e-5&&(v=(v+(a.ascaleY-v+this.data.offsetScaleY)*n)/v));var y=l.ashearY;if(i>0){var f=a.ashearY-y+this.data.offsetShearY;f-=(16384-(16384.499999999996-f/360|0))*360,l.shearY+=f*i}l.updateWorldTransformWith(h,d,u,p,v,l.ashearX,y)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;e!=0&&(u+=(a.arotation+this.data.offsetRotation)*e);var f=l.ax,h=l.ay;r!=0&&(f+=(a.ax+this.data.offsetX)*r,h+=(a.ay+this.data.offsetY)*r);var d=l.ascaleX,p=l.ascaleY;n>0&&(d>1e-5&&(d*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var v=l.ashearY;i>0&&(v+=(a.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(f,h,u,d,p,l.ashearX,v)}},t.prototype.getOrder=function(){return this.data.order},t}(),T9=function(){function t(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,e==null)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var n=e.bones[r],i=void 0;if(n.parent==null)i=new uC(n,this,null);else{var a=this.bones[n.parent.index];i=new uC(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<e.slots.length;r++){var o=e.slots[r],i=this.bones[o.boneData.index],s=new cP(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<e.ikConstraints.length;r++){var c=e.ikConstraints[r];this.ikConstraints.push(new S9(c,this))}this.transformConstraints=new Array;for(var r=0;r<e.transformConstraints.length;r++){var l=e.transformConstraints[r];this.transformConstraints.push(new C9(l,this))}this.pathConstraints=new Array;for(var r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new A9(u,this))}this.color=new Ne(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var e=this._updateCache;e.length=0,this.updateCacheReset.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++)r[n].sorted=!1;var a=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,c=a.length,l=o.length,u=s.length,f=c+l+u;e:for(var n=0;n<f;n++){for(var h=0;h<c;h++){var d=a[h];if(d.data.order==n){this.sortIkConstraint(d);continue e}}for(var h=0;h<l;h++){var d=o[h];if(d.data.order==n){this.sortTransformConstraint(d);continue e}}for(var h=0;h<u;h++){var d=s[h];if(d.data.order==n){this.sortPathConstraint(d);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},t.prototype.sortIkConstraint=function(e){var r=e.target;this.sortBone(r);var n=e.bones,i=n[0];if(this.sortBone(i),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(e),this.sortReset(i.children),n[n.length-1].sorted=!0},t.prototype.sortPathConstraint=function(e){var r=e.target,n=r.data.index,i=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof Ap&&this.sortPathConstraintAttachmentWith(s,i);for(var c=e.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(e);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0},t.prototype.sortTransformConstraint=function(e){this.sortBone(e.target);var r=e.bones,n=r.length;if(e.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(var o=0;o<n;o++)r[o].sorted=!0},t.prototype.sortPathConstraintAttachment=function(e,r,n){var i=e.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},t.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof Ap){var n=e.bones;if(n==null)this.sortBone(r);else for(var i=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var c=n[a];this.sortBone(i[c])}}},t.prototype.sortBone=function(e){if(!e.sorted){var r=e.parent;r!=null&&this.sortBone(r),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var r=0,n=e.length;r<n;r++){var i=e[r];i.sorted&&this.sortReset(i.children),i.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,r=0,n=e.length;r<n;r++){var i=e[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++)e[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.bendDirection=a.data.bendDirection,a.mix=a.data.mix}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;ue.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,n=e.length;r<n;r++)e[r].setToSetupPose()},t.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var r=this.data.findSkin(e);if(r==null)throw new Error("Skin not found: "+e);this.setSkin(r)},t.prototype.setSkin=function(e){if(e!=null)if(this.skin!=null)e.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o!=null){var s=e.getAttachment(n,o);s!=null&&a.setAttachment(s)}}this.skin=e},t.prototype.getAttachmentByName=function(e,r){return this.getAttachment(this.data.findSlotIndex(e),r)},t.prototype.getAttachment=function(e,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(e,r);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(e,r):null},t.prototype.setAttachment=function(e,r){if(e==null)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==e){var s=null;if(r!=null&&(s=this.getAttachment(i,r),s==null))throw new Error("Attachment not found: "+r+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.getBounds=function(e,r,n){if(e==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l],h=0,d=null,p=f.getAttachment();if(p instanceof fP)h=8,d=ue.setArraySize(n,h,0),p.computeWorldVertices(f.bone,d,0,2);else if(p instanceof uP){var v=p;h=v.worldVerticesLength,d=ue.setArraySize(n,h,0),v.computeWorldVertices(f,0,h,d,0,2)}if(d!=null)for(var y=0,m=d.length;y<m;y+=2){var g=d[y],x=d[y+1];a=Math.min(a,g),o=Math.min(o,x),s=Math.max(s,g),c=Math.max(c,x)}}e.set(a,o),r.set(s-a,c-o)},t.prototype.update=function(e){this.time+=e},Object.defineProperty(t.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),LFe=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(zO),O9=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSkin=function(e){if(e==null)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findEvent=function(e){if(e==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findAnimation=function(e){if(e==null)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraintIndex=function(e){if(e==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t}(),P9=function(){function t(e,r,n){if(this.color=new Ne(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}return t}(),R9=function(){function t(e){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,e==null)throw new Error("name cannot be null.");this.name=e}return t}(),I9=function(){function t(e){if(this.attachments=new Array,e==null)throw new Error("name cannot be null.");this.name=e}return t.prototype.addAttachment=function(e,r,n){if(n==null)throw new Error("attachment cannot be null.");var i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][r]=n},t.prototype.getAttachment=function(e,r){var n=this.attachments[e];return n?n[r]:null},t.prototype.attachAll=function(e,r){for(var n=0,i=0;i<e.slots.length;i++){var a=e.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u!=null&&a.setAttachment(u);break}}}n++}},t}(),F9=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new O9,i=typeof e=="string"?JSON.parse(e):e,a=i.skeleton;if(a!=null&&(n.hash=a.hash,n.version=a.spine,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images),i.bones)for(var o=0;o<i.bones.length;o++){var s=i.bones[o],c=null,l=this.getValue(s,"parent",null);if(l!=null&&(c=n.findBone(l),c==null))throw new Error("Parent bone not found: "+l);var u=new _9(n.bones.length,s.name,c);u.length=this.getValue(s,"length",0)*r,u.x=this.getValue(s,"x",0)*r,u.y=this.getValue(s,"y",0)*r,u.rotation=this.getValue(s,"rotation",0),u.scaleX=this.getValue(s,"scaleX",1),u.scaleY=this.getValue(s,"scaleY",1),u.shearX=this.getValue(s,"shearX",0),u.shearY=this.getValue(s,"shearY",0),u.transformMode=t.transformModeFromString(this.getValue(s,"transform","normal")),n.bones.push(u)}if(i.slots)for(var o=0;o<i.slots.length;o++){var f=i.slots[o],h=f.name,d=f.bone,p=n.findBone(d);if(p==null)throw new Error("Slot bone not found: "+d);var u=new P9(n.slots.length,h,p),v=this.getValue(f,"color",null);v!=null&&u.color.setFromString(v);var y=this.getValue(f,"dark",null);y!=null&&(u.darkColor=new Ne(1,1,1,1),u.darkColor.setFromString(y)),u.attachmentName=this.getValue(f,"attachment",null),u.blendMode=t.blendModeFromString(this.getValue(f,"blend","normal")),n.slots.push(u)}if(i.ik)for(var o=0;o<i.ik.length;o++){var m=i.ik[o],u=new E9(m.name);u.order=this.getValue(m,"order",0);for(var g=0;g<m.bones.length;g++){var d=m.bones[g],x=n.findBone(d);if(x==null)throw new Error("IK bone not found: "+d);u.bones.push(x)}var b=m.target;if(u.target=n.findBone(b),u.target==null)throw new Error("IK target bone not found: "+b);u.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,u.mix=this.getValue(m,"mix",1),n.ikConstraints.push(u)}if(i.transform)for(var o=0;o<i.transform.length;o++){var m=i.transform[o],u=new R9(m.name);u.order=this.getValue(m,"order",0);for(var g=0;g<m.bones.length;g++){var d=m.bones[g],x=n.findBone(d);if(x==null)throw new Error("Transform constraint bone not found: "+d);u.bones.push(x)}var b=m.target;if(u.target=n.findBone(b),u.target==null)throw new Error("Transform constraint target bone not found: "+b);u.local=this.getValue(m,"local",!1),u.relative=this.getValue(m,"relative",!1),u.offsetRotation=this.getValue(m,"rotation",0),u.offsetX=this.getValue(m,"x",0)*r,u.offsetY=this.getValue(m,"y",0)*r,u.offsetScaleX=this.getValue(m,"scaleX",0),u.offsetScaleY=this.getValue(m,"scaleY",0),u.offsetShearY=this.getValue(m,"shearY",0),u.rotateMix=this.getValue(m,"rotateMix",1),u.translateMix=this.getValue(m,"translateMix",1),u.scaleMix=this.getValue(m,"scaleMix",1),u.shearMix=this.getValue(m,"shearMix",1),n.transformConstraints.push(u)}if(i.path)for(var o=0;o<i.path.length;o++){var m=i.path[o],u=new w9(m.name);u.order=this.getValue(m,"order",0);for(var g=0;g<m.bones.length;g++){var d=m.bones[g],x=n.findBone(d);if(x==null)throw new Error("Transform constraint bone not found: "+d);u.bones.push(x)}var b=m.target;if(u.target=n.findSlot(b),u.target==null)throw new Error("Path target slot not found: "+b);u.positionMode=t.positionModeFromString(this.getValue(m,"positionMode","percent")),u.spacingMode=t.spacingModeFromString(this.getValue(m,"spacingMode","length")),u.rotateMode=t.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),u.offsetRotation=this.getValue(m,"rotation",0),u.position=this.getValue(m,"position",0),u.positionMode==Mr.Fixed&&(u.position*=r),u.spacing=this.getValue(m,"spacing",0),(u.spacingMode==Fa.Length||u.spacingMode==Fa.Fixed)&&(u.spacing*=r),u.rotateMix=this.getValue(m,"rotateMix",1),u.translateMix=this.getValue(m,"translateMix",1),n.pathConstraints.push(u)}if(i.skins)for(var S in i.skins){var w=i.skins[S],A=new I9(S);for(var h in w){var C=n.findSlotIndex(h);if(C==-1)throw new Error("Slot not found: "+h);var f=w[h];for(var O in f){var P=this.readAttachment(f[O],A,C,O,n);P!=null&&A.addAttachment(C,O,P)}}n.skins.push(A),A.name=="default"&&(n.defaultSkin=A)}for(var o=0,I=this.linkedMeshes.length;o<I;o++){var R=this.linkedMeshes[o],A=R.skin==null?n.defaultSkin:n.findSkin(R.skin);if(A==null)throw new Error("Skin not found: "+R.skin);var F=A.getAttachment(R.slotIndex,R.parent);if(F==null)throw new Error("Parent mesh not found: "+R.parent);R.mesh.setParentMesh(F)}if(this.linkedMeshes.length=0,i.events)for(var D in i.events){var L=i.events[D],u=new b9(D);u.intValue=this.getValue(L,"int",0),u.floatValue=this.getValue(L,"float",0),u.stringValue=this.getValue(L,"string",""),u.audioPath=this.getValue(L,"audio",null),u.audioPath!=null&&(u.volume=this.getValue(L,"volume",1),u.balance=this.getValue(L,"balance",0)),n.events.push(u)}if(i.animations)for(var U in i.animations){var Y=i.animations[U];this.readAnimation(Y,U,n)}return n},t.prototype.readAttachment=function(e,r,n,i,a){var o=this.scale;i=this.getValue(e,"name",i);var s=this.getValue(e,"type","region");switch(s){case"region":{var c=this.getValue(e,"path",i),l=this.attachmentLoader.newRegionAttachment(r,i,c);if(l==null)return null;l.path=c,l.x=this.getValue(e,"x",0)*o,l.y=this.getValue(e,"y",0)*o,l.scaleX=this.getValue(e,"scaleX",1),l.scaleY=this.getValue(e,"scaleY",1),l.rotation=this.getValue(e,"rotation",0),l.width=e.width*o,l.height=e.height*o;var u=this.getValue(e,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(f==null)return null;this.readVertices(e,f,e.vertexCount<<1);var u=this.getValue(e,"color",null);return u!=null&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var c=this.getValue(e,"path",i),h=this.attachmentLoader.newMeshAttachment(r,i,c);if(h==null)return null;h.path=c;var u=this.getValue(e,"color",null);u!=null&&h.color.setFromString(u);var d=this.getValue(e,"parent",null);if(d!=null)return h.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new BFe(h,this.getValue(e,"skin",null),n,d)),h;var p=e.uvs;return this.readVertices(e,h,p.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(p),h.hullLength=this.getValue(e,"hull",0)*2,h}case"path":{var c=this.attachmentLoader.newPathAttachment(r,i);if(c==null)return null;c.closed=this.getValue(e,"closed",!1),c.constantSpeed=this.getValue(e,"constantSpeed",!0);var v=e.vertexCount;this.readVertices(e,c,v<<1);for(var y=ue.newArray(v/3,0),m=0;m<e.lengths.length;m++)y[m]=e.lengths[m]*o;c.lengths=y;var u=this.getValue(e,"color",null);return u!=null&&c.color.setFromString(u),c}case"point":{var g=this.attachmentLoader.newPointAttachment(r,i);if(g==null)return null;g.x=this.getValue(e,"x",0)*o,g.y=this.getValue(e,"y",0)*o,g.rotation=this.getValue(e,"rotation",0);var u=this.getValue(e,"color",null);return u!=null&&g.color.setFromString(u),g}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(r,i);if(x==null)return null;var b=this.getValue(e,"end",null);if(b!=null){var S=a.findSlot(b);if(S==null)throw new Error("Clipping end slot not found: "+b);x.endSlot=S}var v=e.vertexCount;this.readVertices(e,x,v<<1);var u=this.getValue(e,"color",null);return u!=null&&x.color.setFromString(u),x}}return null},t.prototype.readVertices=function(e,r,n){var i=this.scale;r.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=ue.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=ue.toFloatArray(l)},t.prototype.readAnimation=function(e,r,n){var i=this.scale,a=new Array,o=0;if(e.slots)for(var s in e.slots){var c=e.slots[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+s);for(var u in c){var f=c[u];if(u=="attachment"){var h=new Sm(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d++,v.time,v.name)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}else if(u=="color"){var h=new iC(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],y=new Ne;y.setFromString(v.color||"ffffffff"),h.setFrame(d,v.time,y.r,y.g,y.b,y.a),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*iC.ENTRIES])}else if(u=="twoColor"){var h=new aC(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],m=new Ne,g=new Ne;m.setFromString(v.light),g.setFromString(v.dark),h.setFrame(d,v.time,m.r,m.g,m.b,m.a,g.r,g.g,g.b),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*aC.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+u+" ("+s+")")}}if(e.bones)for(var x in e.bones){var b=e.bones[x],S=n.findBoneIndex(x);if(S==-1)throw new Error("Bone not found: "+x);for(var u in b){var f=b[u];if(u==="rotate"){var h=new io(f.length);h.boneIndex=S;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,v.time,v.angle),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*io.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){var h=null,w=1;u==="scale"?h=new u9(f.length):u==="shear"?h=new c9(f.length):(h=new Cp(f.length),w=i),h.boneIndex=S;for(var d=0,p=0;p<f.length;p++){var v=f[p],A=this.getValue(v,"x",0),C=this.getValue(v,"y",0);h.setFrame(d,v.time,A*w,C*w),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Cp.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+u+" ("+x+")")}}if(e.ik)for(var O in e.ik){var P=e.ik[O],I=n.findIkConstraint(O),h=new oC(P.length);h.ikConstraintIndex=n.ikConstraints.indexOf(I);for(var d=0,p=0;p<P.length;p++){var v=P[p];h.setFrame(d,v.time,this.getValue(v,"mix",1),this.getValue(v,"bendPositive",!0)?1:-1,this.getValue(v,"compress",!1),this.getValue(v,"stretch",!1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*oC.ENTRIES])}if(e.transform)for(var O in e.transform){var P=e.transform[O],I=n.findTransformConstraint(O),h=new sC(P.length);h.transformConstraintIndex=n.transformConstraints.indexOf(I);for(var d=0,p=0;p<P.length;p++){var v=P[p];h.setFrame(d,v.time,this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1),this.getValue(v,"scaleMix",1),this.getValue(v,"shearMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*sC.ENTRIES])}if(e.paths)for(var O in e.paths){var P=e.paths[O],R=n.findPathConstraintIndex(O);if(R==-1)throw new Error("Path constraint not found: "+O);var F=n.pathConstraints[R];for(var u in P){var f=P[u];if(u==="position"||u==="spacing"){var h=null,w=1;u==="spacing"?(h=new d9(f.length),(F.spacingMode==Fa.Length||F.spacingMode==Fa.Fixed)&&(w=i)):(h=new wm(f.length),F.positionMode==Mr.Fixed&&(w=i)),h.pathConstraintIndex=R;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,v.time,this.getValue(v,u,0)*w),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*wm.ENTRIES])}else if(u==="mix"){var h=new lC(f.length);h.pathConstraintIndex=R;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,v.time,this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*lC.ENTRIES])}}}if(e.deform)for(var D in e.deform){var L=e.deform[D],U=n.findSkin(D);if(U!=null)for(var s in L){var c=L[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+c.name);for(var u in c){var f=c[u],Y=U.getAttachment(l,u);if(Y==null)throw new Error("Deform attachment not found: "+f.name);var ee=Y.bones!=null,J=Y.vertices,X=ee?J.length/3*2:J.length,h=new f9(f.length);h.slotIndex=l,h.attachment=Y;for(var d=0,M=0;M<f.length;M++){var v=f[M],V=void 0,$=this.getValue(v,"vertices",null);if($==null)V=ee?ue.newFloatArray(X):J;else{V=ue.newFloatArray(X);var j=this.getValue(v,"offset",0);if(ue.arrayCopy($,0,V,j,$.length),i!=1)for(var p=j,te=p+$.length;p<te;p++)V[p]*=i;if(!ee)for(var p=0;p<X;p++)V[p]+=J[p]}h.setFrame(d,v.time,V),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var ie=e.drawOrder;if(ie==null&&(ie=e.draworder),ie!=null){for(var h=new Em(ie.length),de=n.slots.length,d=0,M=0;M<ie.length;M++){var he=ie[M],Ee=null,Oe=this.getValue(he,"offsets",null);if(Oe!=null){Ee=ue.newArray(de,-1);for(var ye=ue.newArray(de-Oe.length,0),Ae=0,_e=0,p=0;p<Oe.length;p++){var we=Oe[p],l=n.findSlotIndex(we.slot);if(l==-1)throw new Error("Slot not found: "+we.slot);for(;Ae!=l;)ye[_e++]=Ae++;Ee[Ae+we.offset]=Ae++}for(;Ae<de;)ye[_e++]=Ae++;for(var p=de-1;p>=0;p--)Ee[p]==-1&&(Ee[p]=ye[--_e])}h.setFrame(d++,he.time,Ee)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(e.events){for(var h=new h9(e.events.length),d=0,p=0;p<e.events.length;p++){var $e=e.events[p],Xe=n.findEvent($e.name);if(Xe==null)throw new Error("Event not found: "+$e.name);var ke=new x9(ue.toSinglePrecision($e.time),Xe);ke.intValue=this.getValue($e,"int",Xe.intValue),ke.floatValue=this.getValue($e,"float",Xe.floatValue),ke.stringValue=this.getValue($e,"string",Xe.stringValue),ke.data.audioPath!=null&&(ke.volume=this.getValue($e,"volume",1),ke.balance=this.getValue($e,"balance",0)),h.setFrame(d++,ke)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new On(r,a,o))},t.prototype.readCurve=function(e,r,n){if(e.curve){if(e.curve==="stepped")r.setStepped(n);else if(Object.prototype.toString.call(e.curve)==="[object Array]"){var i=e.curve;r.setCurve(n,i[0],i[1],i[2],i[3])}}},t.prototype.getValue=function(e,r,n){return e[r]!==void 0?e[r]:n},t.blendModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return ze.NORMAL;if(e=="additive")return ze.ADD;if(e=="multiply")return ze.MULTIPLY;if(e=="screen")return ze.SCREEN;throw new Error("Unknown blend mode: "+e)},t.positionModeFromString=function(e){if(e=e.toLowerCase(),e=="fixed")return Mr.Fixed;if(e=="percent")return Mr.Percent;throw new Error("Unknown position mode: "+e)},t.spacingModeFromString=function(e){if(e=e.toLowerCase(),e=="length")return Fa.Length;if(e=="fixed")return Fa.Fixed;if(e=="percent")return Fa.Percent;throw new Error("Unknown position mode: "+e)},t.rotateModeFromString=function(e){if(e=e.toLowerCase(),e=="tangent")return Zr.Tangent;if(e=="chain")return Zr.Chain;if(e=="chainscale")return Zr.ChainScale;throw new Error("Unknown rotate mode: "+e)},t.transformModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return mt.Normal;if(e=="onlytranslation")return mt.OnlyTranslation;if(e=="norotationorreflection")return mt.NoRotationOrReflection;if(e=="noscale")return mt.NoScale;if(e=="noscaleorreflection")return mt.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},t}(),BFe=function(){function t(e,r,n,i){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i}return t}(),NFe=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){this.skeleton=new T9(r),this.skeleton.updateWorldTransform(),this.stateData=new m9(r),this.state=new p9(this.stateData)},e}(Qp);const UFe=Object.freeze(Object.defineProperty({__proto__:null,Animation:On,AnimationState:p9,AnimationStateAdapter2:MFe,AnimationStateData:m9,AtlasAttachmentLoader:y9,Attachment:lP,AttachmentTimeline:Sm,Bone:uC,BoneData:_9,BoundingBoxAttachment:o9,ClippingAttachment:s9,ColorTimeline:iC,CurveTimeline:es,DeformTimeline:f9,DrawOrderTimeline:Em,Event:x9,EventData:b9,EventQueue:g9,EventTimeline:h9,get EventType(){return Ci},IkConstraint:S9,IkConstraintData:E9,IkConstraintTimeline:oC,JitterEffect:kFe,MeshAttachment:uP,PathAttachment:Ap,PathConstraint:A9,PathConstraintData:w9,PathConstraintMixTimeline:lC,PathConstraintPositionTimeline:wm,PathConstraintSpacingTimeline:d9,PointAttachment:l9,RegionAttachment:fP,RotateTimeline:io,ScaleTimeline:u9,ShearTimeline:c9,Skeleton:T9,SkeletonBounds:LFe,SkeletonData:O9,SkeletonJson:F9,Skin:I9,Slot:cP,SlotData:P9,get SpacingMode(){return Fa},Spine:NFe,SwirlEffect:DFe,get TimelineType(){return Wn},TrackEntry:v9,TransformConstraint:C9,TransformConstraintData:R9,TransformConstraintTimeline:sC,TranslateTimeline:Cp,TwoColorTimeline:aC,VertexAttachment:rc},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cC=function(t,e){return cC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},cC(t,e)};function Ft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cC(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var hP=function(){function t(e){if(!e)throw new Error("name cannot be null.");this.name=e}return t}(),zo=function(t){Ft(e,t);function e(r){var n=t.call(this,r)||this;return n.id=e.nextID++,n.bones=null,n.vertices=[],n.worldVerticesLength=0,n.timelineAttachment=n,n}return e.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.deform,u=this.vertices,f=this.bones;if(!f){l.length>0&&(u=l);for(var h=r.bone.matrix,d=h.tx,p=h.ty,v=h.a,y=h.c,m=h.b,g=h.d,x=n,b=o;b<i;x+=2,b+=s){var S=u[x],w=u[x+1];a[b]=S*v+w*y+d,a[b+1]=S*m+w*g+p}return}for(var A=0,C=0,O=0;O<n;O+=2){var P=f[A];A+=P+1,C+=P}var I=c.bones;if(l.length==0)for(var b=o,y=C*3;b<i;b+=s){var R=0,F=0,P=f[A++];for(P+=A;A<P;A++,y+=3){var h=I[f[A]].matrix,S=u[y],w=u[y+1],D=u[y+2];R+=(S*h.a+w*h.c+h.tx)*D,F+=(S*h.b+w*h.d+h.ty)*D}a[b]=R,a[b+1]=F}else for(var L=l,b=o,y=C*3,U=C<<1;b<i;b+=s){var R=0,F=0,P=f[A++];for(P+=A;A<P;A++,y+=3,U+=2){var h=I[f[A]].matrix,S=u[y]+L[U],w=u[y+1]+L[U+1],D=u[y+2];R+=(S*h.a+w*h.c+h.tx)*D,F+=(S*h.b+w*h.d+h.ty)*D}a[b]=R,a[b+1]=F}},e.prototype.copyTo=function(r){this.bones?(r.bones=new Array(this.bones.length),ue.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,this.vertices&&(r.vertices=ue.newFloatArray(this.vertices.length),ue.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)),r.worldVerticesLength=this.worldVerticesLength,r.timelineAttachment=this.timelineAttachment},e.nextID=0,e}(hP),k9=function(t){Ft(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.BoundingBox,n.color=new Ne(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},e}(zo),D9=function(t){Ft(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Clipping,n.endSlot=null,n.color=new Ne(.2275,.2275,.8078,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},e}(zo),p_=function(t){Ft(e,t);function e(r,n){var i=t.call(this,r)||this;return i.type=Ot.Mesh,i.region=null,i.triangles=[],i.color=new Ne(1,1,1,1),i.width=0,i.height=0,i.hullLength=0,i.edges=[],i.parentMesh=null,i.sequence=null,i.tempColor=new Ne(0,0,0,0),i.path=n,i}return e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(r){this.parentMesh=r,r&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},e.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var r=new e(this.name,this.path);return r.region=this.region,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Float32Array(this.regionUVs.length),ue.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.triangles=new Array(this.triangles.length),ue.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,r.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(r.edges=new Array(this.edges.length),ue.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){this.sequence!=null&&this.sequence.apply(r,this),t.prototype.computeWorldVertices.call(this,r,n,i,a,o,s)},e.prototype.newLinkedMesh=function(){var r=new e(this.name,this.path);return r.region=this.region,r.color.setFromColor(this.color),r.timelineAttachment=this.timelineAttachment,r.setParentMesh(this.parentMesh?this.parentMesh:this),r},e}(zo),Tp=function(t){Ft(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Path,n.lengths=[],n.closed=!1,n.constantSpeed=!1,n.color=new Ne(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),ue.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},e}(zo),M9=function(t){Ft(e,t);function e(r){var n=t.call(this,r)||this;return n.type=Ot.Point,n.x=0,n.y=0,n.rotation=0,n.color=new Ne(.38,.94,0,1),n}return e.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},e.prototype.computeWorldRotation=function(r){var n=r.matrix,i=K.cosDeg(this.rotation),a=K.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*K.radDeg},e.prototype.copy=function(){var r=new e(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},e}(zo),dP=function(t){Ft(e,t);function e(r,n){var i=t.call(this,r)||this;return i.type=Ot.Region,i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new Ne(1,1,1,1),i.rendererObject=null,i.region=null,i.sequence=null,i.offset=ue.newFloatArray(8),i.uvs=ue.newFloatArray(8),i.tempColor=new Ne(1,1,1,1),i.path=n,i}return e.prototype.updateRegion=function(){if(!this.region)throw new Error("Region not set.");var r=this.region,n=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*n,o=-this.height/2*this.scaleY+this.region.offsetY*i,s=a+this.region.width*n,c=o+this.region.height*i,l=this.rotation*Math.PI/180,u=Math.cos(l),f=Math.sin(l),h=this.x,d=this.y,p=a*u+h,v=a*f,y=o*u+d,m=o*f,g=s*u+h,x=s*f,b=c*u+d,S=c*f,w=this.offset;w[0]=p-m,w[1]=y+v,w[2]=p-S,w[3]=b+v,w[4]=g-S,w[5]=b+x,w[6]=g-m,w[7]=y+x;var A=this.uvs;r.degrees==90?(A[2]=r.u,A[3]=r.v2,A[4]=r.u,A[5]=r.v,A[6]=r.u2,A[7]=r.v,A[0]=r.u2,A[1]=r.v2):(A[0]=r.u,A[1]=r.v2,A[2]=r.u,A[3]=r.v,A[4]=r.u2,A[5]=r.v,A[6]=r.u2,A[7]=r.v2)},e.prototype.computeWorldVertices=function(r,n,i,a){this.sequence!=null&&this.sequence.apply(r,this);var o=r.bone,s=this.offset,c=o.matrix,l=c.tx,u=c.ty,f=c.a,h=c.c,d=c.b,p=c.d,v=0,y=0;v=s[0],y=s[1],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u,i+=a,v=s[2],y=s[3],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u,i+=a,v=s[4],y=s[5],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u,i+=a,v=s[6],y=s[7],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u},e.prototype.copy=function(){var r=new e(this.name,this.path);return r.region=this.region,r.rendererObject=this.rendererObject,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,ue.arrayCopy(this.uvs,0,r.uvs,0,8),ue.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r.sequence=this.sequence!=null?this.sequence.copy():null,r},e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(hP),pP=function(){function t(e){this.id=t.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(e)}return t.prototype.copy=function(){var e=new t(this.regions.length);return ue.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e},t.prototype.apply=function(e,r){var n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);var i=this.regions[n];r.region!=i&&(r.region=i)},t.prototype.getPath=function(e,r){for(var n=e,i=(this.start+r).toString(),a=this.digits-i.length;a>0;a--)n+="0";return n+=i,n},t.nextID=function(){return t._nextID++},t._nextID=0,t}(),Un;(function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"})(Un||(Un={}));var vP=[Un.hold,Un.once,Un.loop,Un.pingpong,Un.onceReverse,Un.loopReverse,Un.pingpongReverse],v_=function(){function t(e,r,n){if(this.timelines=[],this.timelineIds=new z$,!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(r),this.duration=n}return t.prototype.setTimelines=function(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var r=0;r<e.length;r++)this.timelineIds.addAll(e[r].getPropertyIds())},t.prototype.hasTimeline=function(e){for(var r=0;r<e.length;r++)if(this.timelineIds.contains(e[r]))return!0;return!1},t.prototype.apply=function(e,r,n,i,a,o,s,c){if(!e)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(e,r,n,a,o,s,c)},t}(),tr={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},Jr=function(){function t(e,r){this.propertyIds=r,this.frames=ue.newFloatArray(e*this.getFrameEntries())}return t.prototype.getPropertyIds=function(){return this.propertyIds},t.prototype.getFrameEntries=function(){return 1},t.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},t.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},t.search1=function(e,r){for(var n=e.length,i=1;i<n;i++)if(e[i]>r)return i-1;return n-1},t.search=function(e,r,n){for(var i=e.length,a=n;a<i;a+=n)if(e[a]>r)return a-n;return i-n},t}(),go=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,i)||this;return a.curves=ue.newFloatArray(r+n*18),a.curves[r-1]=1,a}return e.prototype.setLinear=function(r){this.curves[r]=0},e.prototype.setStepped=function(r){this.curves[r]=1},e.prototype.shrink=function(r){var n=this.getFrameCount()+r*18;if(this.curves.length>n){var i=ue.newFloatArray(n);ue.arrayCopy(this.curves,0,i,0,n),this.curves=i}},e.prototype.setBezier=function(r,n,i,a,o,s,c,l,u,f,h){var d=this.curves,p=this.getFrameCount()+r*18;i==0&&(d[n]=2+p);for(var v=(a-s*2+l)*.03,y=(o-c*2+u)*.03,m=((s-l)*3-a+f)*.006,g=((c-u)*3-o+h)*.006,x=v*2+m,b=y*2+g,S=(s-a)*.3+v+m*.16666667,w=(c-o)*.3+y+g*.16666667,A=a+S,C=o+w,O=p+18;p<O;p+=2)d[p]=A,d[p+1]=C,S+=x,w+=b,x+=m,b+=g,A+=S,C+=w},e.prototype.getBezierValue=function(r,n,i,a){var o=this.curves;if(o[a]>r){var s=this.frames[n],c=this.frames[n+i];return c+(r-s)/(o[a]-s)*(o[a+1]-c)}var l=a+18;for(a+=2;a<l;a+=2)if(o[a]>=r){var u=o[a-2],f=o[a-1];return f+(r-u)/(o[a]-u)*(o[a+1]-f)}n+=this.getFrameEntries();var h=o[l-2],d=o[l-1];return d+(r-h)/(this.frames[n]-h)*(this.frames[n+i]-d)},e}(Jr),mo=function(t){Ft(e,t);function e(r,n,i){return t.call(this,r,n,[i])||this}return e.prototype.getFrameEntries=function(){return 2},e.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+1]=i},e.prototype.getCurveValue=function(r){for(var n=this.frames,i=n.length-2,a=2;a<=i;a+=2)if(n[a]>r){i=a-2;break}var o=this.curves[i>>1];switch(o){case 0:var s=n[i],c=n[i+1];return c+(r-s)/(n[i+2]-s)*(n[i+2+1]-c);case 1:return n[i+1]}return this.getBezierValue(r,i,1,o-2)},e}(go),g_=function(t){Ft(e,t);function e(r,n,i,a){return t.call(this,r,n,[i,a])||this}return e.prototype.getFrameEntries=function(){return 3},e.prototype.setFrame=function(r,n,i,a){r*=3,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a},e}(go),Op=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.rotate+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.rotation=l.data.rotation;return;case W.first:l.rotation+=(l.data.rotation-l.rotation)*o}return}var f=this.getCurveValue(i);switch(s){case W.setup:l.rotation=l.data.rotation+f*o;break;case W.first:case W.replace:f+=l.data.rotation-l.rotation;case W.add:l.rotation+=f*o}}},e}(mo),gP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.x+"|"+i,tr.y+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.x=l.data.x,l.y=l.data.y;return;case W.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}return}var f=0,h=0,d=Jr.search(u,i,3),p=this.curves[d/3];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+3]-v);f+=(u[d+3+1]-f)*y,h+=(u[d+3+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}switch(s){case W.setup:l.x=l.data.x+f*o,l.y=l.data.y+h*o;break;case W.first:case W.replace:l.x+=(l.data.x+f-l.x)*o,l.y+=(l.data.y+h-l.y)*o;break;case W.add:l.x+=f*o,l.y+=h*o}}},e}(g_),mP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.x+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.x=l.data.x;return;case W.first:l.x+=(l.data.x-l.x)*o}return}var f=this.getCurveValue(i);switch(s){case W.setup:l.x=l.data.x+f*o;break;case W.first:case W.replace:l.x+=(l.data.x+f-l.x)*o;break;case W.add:l.x+=f*o}}},e}(mo),yP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.y+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.y=l.data.y;return;case W.first:l.y+=(l.data.y-l.y)*o}return}var f=this.getCurveValue(i);switch(s){case W.setup:l.y=l.data.y+f*o;break;case W.first:case W.replace:l.y+=(l.data.y+f-l.y)*o;break;case W.add:l.y+=f*o}}},e}(mo),_P=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.scaleX+"|"+i,tr.scaleY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case W.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var f,h,d=Jr.search(u,i,3),p=this.curves[d/3];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+3]-v);f+=(u[d+3+1]-f)*y,h+=(u[d+3+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}if(f*=l.data.scaleX,h*=l.data.scaleY,o==1)s==W.add?(l.scaleX+=f-l.data.scaleX,l.scaleY+=h-l.data.scaleY):(l.scaleX=f,l.scaleY=h);else{var m=0,g=0;if(c==At.mixOut)switch(s){case W.setup:m=l.data.scaleX,g=l.data.scaleY,l.scaleX=m+(Math.abs(f)*K.signum(m)-m)*o,l.scaleY=g+(Math.abs(h)*K.signum(g)-g)*o;break;case W.first:case W.replace:m=l.scaleX,g=l.scaleY,l.scaleX=m+(Math.abs(f)*K.signum(m)-m)*o,l.scaleY=g+(Math.abs(h)*K.signum(g)-g)*o;break;case W.add:l.scaleX+=(f-l.data.scaleX)*o,l.scaleY+=(h-l.data.scaleY)*o}else switch(s){case W.setup:m=Math.abs(l.data.scaleX)*K.signum(f),g=Math.abs(l.data.scaleY)*K.signum(h),l.scaleX=m+(f-m)*o,l.scaleY=g+(h-g)*o;break;case W.first:case W.replace:m=Math.abs(l.scaleX)*K.signum(f),g=Math.abs(l.scaleY)*K.signum(h),l.scaleX=m+(f-m)*o,l.scaleY=g+(h-g)*o;break;case W.add:l.scaleX+=(f-l.data.scaleX)*o,l.scaleY+=(h-l.data.scaleY)*o}}}},e}(g_),xP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.scaleX+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.scaleX=l.data.scaleX;return;case W.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o}return}var f=this.getCurveValue(i)*l.data.scaleX;if(o==1)s==W.add?l.scaleX+=f-l.data.scaleX:l.scaleX=f;else{var h=0;if(c==At.mixOut)switch(s){case W.setup:h=l.data.scaleX,l.scaleX=h+(Math.abs(f)*K.signum(h)-h)*o;break;case W.first:case W.replace:h=l.scaleX,l.scaleX=h+(Math.abs(f)*K.signum(h)-h)*o;break;case W.add:l.scaleX+=(f-l.data.scaleX)*o}else switch(s){case W.setup:h=Math.abs(l.data.scaleX)*K.signum(f),l.scaleX=h+(f-h)*o;break;case W.first:case W.replace:h=Math.abs(l.scaleX)*K.signum(f),l.scaleX=h+(f-h)*o;break;case W.add:l.scaleX+=(f-l.data.scaleX)*o}}}},e}(mo),bP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.scaleY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.scaleY=l.data.scaleY;return;case W.first:l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var f=this.getCurveValue(i)*l.data.scaleY;if(o==1)s==W.add?l.scaleY+=f-l.data.scaleY:l.scaleY=f;else{var h=0;if(c==At.mixOut)switch(s){case W.setup:h=l.data.scaleY,l.scaleY=h+(Math.abs(f)*K.signum(h)-h)*o;break;case W.first:case W.replace:h=l.scaleY,l.scaleY=h+(Math.abs(f)*K.signum(h)-h)*o;break;case W.add:l.scaleY+=(f-l.data.scaleY)*o}else switch(s){case W.setup:h=Math.abs(l.data.scaleY)*K.signum(f),l.scaleY=h+(f-h)*o;break;case W.first:case W.replace:h=Math.abs(l.scaleY)*K.signum(f),l.scaleY=h+(f-h)*o;break;case W.add:l.scaleY+=(f-l.data.scaleY)*o}}}},e}(mo),SP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.shearX+"|"+i,tr.shearY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case W.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}return}var f=0,h=0,d=Jr.search(u,i,3),p=this.curves[d/3];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+3]-v);f+=(u[d+3+1]-f)*y,h+=(u[d+3+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}switch(s){case W.setup:l.shearX=l.data.shearX+f*o,l.shearY=l.data.shearY+h*o;break;case W.first:case W.replace:l.shearX+=(l.data.shearX+f-l.shearX)*o,l.shearY+=(l.data.shearY+h-l.shearY)*o;break;case W.add:l.shearX+=f*o,l.shearY+=h*o}}},e}(g_),EP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.shearX+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.shearX=l.data.shearX;return;case W.first:l.shearX+=(l.data.shearX-l.shearX)*o}return}var f=this.getCurveValue(i);switch(s){case W.setup:l.shearX=l.data.shearX+f*o;break;case W.first:case W.replace:l.shearX+=(l.data.shearX+f-l.shearX)*o;break;case W.add:l.shearX+=f*o}}},e}(mo),wP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.shearY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.shearY=l.data.shearY;return;case W.first:l.shearY+=(l.data.shearY-l.shearY)*o}return}var f=this.getCurveValue(i);switch(s){case W.setup:l.shearY=l.data.shearY+f*o;break;case W.first:case W.replace:l.shearY+=(l.data.shearY+f-l.shearY)*o;break;case W.add:l.shearY+=f*o}}},e}(mo),AP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.rgb+"|"+i,tr.alpha+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 5},e.prototype.setFrame=function(r,n,i,a,o,s){r*=5,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color;if(i<u[0]){var h=l.data.color;switch(s){case W.setup:f.setFromColor(h);return;case W.first:f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var d=0,p=0,v=0,y=0,m=Jr.search(u,i,5),g=this.curves[m/5];switch(g){case 0:var x=u[m];d=u[m+1],p=u[m+2],v=u[m+3],y=u[m+4];var b=(i-x)/(u[m+5]-x);d+=(u[m+5+1]-d)*b,p+=(u[m+5+2]-p)*b,v+=(u[m+5+3]-v)*b,y+=(u[m+5+4]-y)*b;break;case 1:d=u[m+1],p=u[m+2],v=u[m+3],y=u[m+4];break;default:d=this.getBezierValue(i,m,1,g-2),p=this.getBezierValue(i,m,2,g+18-2),v=this.getBezierValue(i,m,3,g+18*2-2),y=this.getBezierValue(i,m,4,g+18*3-2)}o==1?f.set(d,p,v,y):(s==W.setup&&f.setFromColor(l.data.color),f.add((d-f.r)*o,(p-f.g)*o,(v-f.b)*o,(y-f.a)*o))}},e}(go),CP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.rgb+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(r,n,i,a,o){r<<=2,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color;if(i<u[0]){var h=l.data.color;switch(s){case W.setup:f.r=h.r,f.g=h.g,f.b=h.b;return;case W.first:f.r+=(h.r-f.r)*o,f.g+=(h.g-f.g)*o,f.b+=(h.b-f.b)*o}return}var d=0,p=0,v=0,y=Jr.search(u,i,4),m=this.curves[y>>2];switch(m){case 0:var g=u[y];d=u[y+1],p=u[y+2],v=u[y+3];var x=(i-g)/(u[y+4]-g);d+=(u[y+4+1]-d)*x,p+=(u[y+4+2]-p)*x,v+=(u[y+4+3]-v)*x;break;case 1:d=u[y+1],p=u[y+2],v=u[y+3];break;default:d=this.getBezierValue(i,y,1,m-2),p=this.getBezierValue(i,y,2,m+18-2),v=this.getBezierValue(i,y,3,m+18*2-2)}if(o==1)f.r=d,f.g=p,f.b=v;else{if(s==W.setup){var h=l.data.color;f.r=h.r,f.g=h.g,f.b=h.b}f.r+=(d-f.r)*o,f.g+=(p-f.g)*o,f.b+=(v-f.b)*o}}},e}(go),TP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.alpha+"|"+i)||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.color;if(i<this.frames[0]){var f=l.data.color;switch(s){case W.setup:u.a=f.a;return;case W.first:u.a+=(f.a-u.a)*o}return}var h=this.getCurveValue(i);o==1?u.a=h:(s==W.setup&&(u.a=l.data.color.a),u.a+=(h-u.a)*o)}},e}(mo),OP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.rgb+"|"+i,tr.alpha+"|"+i,tr.rgb2+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 8},e.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r<<=3,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s,this.frames[r+5]=c,this.frames[r+6]=l,this.frames[r+7]=u},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color,h=l.darkColor;if(i<u[0]){var d=l.data.color,p=l.data.darkColor;switch(s){case W.setup:f.setFromColor(d),h.r=p.r,h.g=p.g,h.b=p.b;return;case W.first:f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),h.r+=(p.r-h.r)*o,h.g+=(p.g-h.g)*o,h.b+=(p.b-h.b)*o}return}var v=0,y=0,m=0,g=0,x=0,b=0,S=0,w=Jr.search(u,i,8),A=this.curves[w>>3];switch(A){case 0:var C=u[w];v=u[w+1],y=u[w+2],m=u[w+3],g=u[w+4],x=u[w+5],b=u[w+6],S=u[w+7];var O=(i-C)/(u[w+8]-C);v+=(u[w+8+1]-v)*O,y+=(u[w+8+2]-y)*O,m+=(u[w+8+3]-m)*O,g+=(u[w+8+4]-g)*O,x+=(u[w+8+5]-x)*O,b+=(u[w+8+6]-b)*O,S+=(u[w+8+7]-S)*O;break;case 1:v=u[w+1],y=u[w+2],m=u[w+3],g=u[w+4],x=u[w+5],b=u[w+6],S=u[w+7];break;default:v=this.getBezierValue(i,w,1,A-2),y=this.getBezierValue(i,w,2,A+18-2),m=this.getBezierValue(i,w,3,A+18*2-2),g=this.getBezierValue(i,w,4,A+18*3-2),x=this.getBezierValue(i,w,5,A+18*4-2),b=this.getBezierValue(i,w,6,A+18*5-2),S=this.getBezierValue(i,w,7,A+18*6-2)}if(o==1)f.set(v,y,m,g),h.r=x,h.g=b,h.b=S;else{if(s==W.setup){f.setFromColor(l.data.color);var p=l.data.darkColor;h.r=p.r,h.g=p.g,h.b=p.b}f.add((v-f.r)*o,(y-f.g)*o,(m-f.b)*o,(g-f.a)*o),h.r+=(x-h.r)*o,h.g+=(b-h.g)*o,h.b+=(S-h.b)*o}}},e}(go),PP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.rgb+"|"+i,tr.rgb2+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(r,n,i,a,o,s,c,l){r*=7,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s,this.frames[r+5]=c,this.frames[r+6]=l},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color,h=l.darkColor;if(i<u[0]){var d=l.data.color,p=l.data.darkColor;switch(s){case W.setup:f.r=d.r,f.g=d.g,f.b=d.b,h.r=p.r,h.g=p.g,h.b=p.b;return;case W.first:f.r+=(d.r-f.r)*o,f.g+=(d.g-f.g)*o,f.b+=(d.b-f.b)*o,h.r+=(p.r-h.r)*o,h.g+=(p.g-h.g)*o,h.b+=(p.b-h.b)*o}return}var v=0,y=0,m=0,g=0,x=0,b=0,S=Jr.search(u,i,7),w=this.curves[S/7];switch(w){case 0:var A=u[S];v=u[S+1],y=u[S+2],m=u[S+3],g=u[S+4],x=u[S+5],b=u[S+6];var C=(i-A)/(u[S+7]-A);v+=(u[S+7+1]-v)*C,y+=(u[S+7+2]-y)*C,m+=(u[S+7+3]-m)*C,g+=(u[S+7+4]-g)*C,x+=(u[S+7+5]-x)*C,b+=(u[S+7+6]-b)*C;break;case 1:v=u[S+1],y=u[S+2],m=u[S+3],g=u[S+4],x=u[S+5],b=u[S+6];break;default:v=this.getBezierValue(i,S,1,w-2),y=this.getBezierValue(i,S,2,w+18-2),m=this.getBezierValue(i,S,3,w+18*2-2),g=this.getBezierValue(i,S,4,w+18*3-2),x=this.getBezierValue(i,S,5,w+18*4-2),b=this.getBezierValue(i,S,6,w+18*5-2)}if(o==1)f.r=v,f.g=y,f.b=m,h.r=g,h.g=x,h.b=b;else{if(s==W.setup){var d=l.data.color,p=l.data.darkColor;f.r=d.r,f.g=d.g,f.b=d.b,h.r=p.r,h.g=p.g,h.b=p.b}f.r+=(v-f.r)*o,f.g+=(y-f.g)*o,f.b+=(m-f.b)*o,h.r+=(g-h.r)*o,h.g+=(x-h.g)*o,h.b+=(b-h.b)*o}}},e}(go),wu=function(t){Ft(e,t);function e(r,n){var i=t.call(this,r,[tr.attachment+"|"+n])||this;return i.slotIndex=0,i.slotIndex=n,i.attachmentNames=new Array(r),i}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.attachmentNames[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){if(c==At.mixOut){s==W.setup&&this.setAttachment(r,l,l.data.attachmentName);return}if(i<this.frames[0]){(s==W.setup||s==W.first)&&this.setAttachment(r,l,l.data.attachmentName);return}this.setAttachment(r,l,this.attachmentNames[Jr.search1(this.frames,i)])}},e.prototype.setAttachment=function(r,n,i){n.setAttachment(i?r.getAttachment(this.slotIndex,i):null)},e}(Jr),RP=function(t){Ft(e,t);function e(r,n,i,a){var o=t.call(this,r,n,[tr.deform+"|"+i+"|"+a.id])||this;return o.slotIndex=0,o.slotIndex=i,o.attachment=a,o.vertices=new Array(r),o}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.vertices[r]=i},e.prototype.setBezier=function(r,n,i,a,o,s,c,l,u,f,h){var d=this.curves,p=this.getFrameCount()+r*18;i==0&&(d[n]=2+p);for(var v=(a-s*2+l)*.03,y=u*.03-c*.06,m=((s-l)*3-a+f)*.006,g=(c-u+.33333333)*.018,x=v*2+m,b=y*2+g,S=(s-a)*.3+v+m*.16666667,w=c*.3+y+g*.16666667,A=a+S,C=w,O=p+18;p<O;p+=2)d[p]=A,d[p+1]=C,S+=x,w+=b,x+=m,b+=g,A+=S,C+=w},e.prototype.getCurvePercent=function(r,n){var i=this.curves,a=i[n];switch(a){case 0:var o=this.frames[n];return(r-o)/(this.frames[n+this.getFrameEntries()]-o);case 1:return 0}if(a-=2,i[a]>r){var s=this.frames[n];return i[a+1]*(r-s)/(i[a]-s)}var c=a+18;for(a+=2;a<c;a+=2)if(i[a]>=r){var l=i[a-2],u=i[a-1];return u+(r-l)/(i[a]-l)*(i[a+1]-u)}var f=i[c-2],h=i[c-1];return h+(1-h)*(r-f)/(this.frames[n+this.getFrameEntries()]-f)},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(u&&!(!(u instanceof zo)||u.timelineAttachment!=this.attachment)){var f=l.deform;f.length==0&&(s=W.setup);var h=this.vertices,d=h[0].length,p=this.frames;if(i<p[0]){switch(s){case W.setup:f.length=0;return;case W.first:if(o==1){f.length=0;return}f.length=d;var v=u;if(v.bones){o=1-o;for(var m=0;m<d;m++)f[m]*=o}else for(var y=v.vertices,m=0;m<d;m++)f[m]+=(y[m]-f[m])*o}return}if(f.length=d,i>=p[p.length-1]){var g=h[p.length-1];if(o==1)if(s==W.add){var v=u;if(v.bones)for(var b=0;b<d;b++)f[b]+=g[b];else for(var y=v.vertices,x=0;x<d;x++)f[x]+=g[x]-y[x]}else ue.arrayCopy(g,0,f,0,d);else switch(s){case W.setup:{var S=u;if(S.bones)for(var C=0;C<d;C++)f[C]=g[C]*o;else for(var y=S.vertices,w=0;w<d;w++){var A=y[w];f[w]=A+(g[w]-A)*o}break}case W.first:case W.replace:for(var O=0;O<d;O++)f[O]+=(g[O]-f[O])*o;break;case W.add:var v=u;if(v.bones)for(var I=0;I<d;I++)f[I]+=g[I]*o;else for(var y=v.vertices,P=0;P<d;P++)f[P]+=(g[P]-y[P])*o}return}var R=Jr.search1(p,i),F=this.getCurvePercent(i,R),D=h[R],L=h[R+1];if(o==1)if(s==W.add){var v=u;if(v.bones)for(var ee=0;ee<d;ee++){var Y=D[ee];f[ee]+=Y+(L[ee]-Y)*F}else for(var y=v.vertices,U=0;U<d;U++){var Y=D[U];f[U]+=Y+(L[U]-Y)*F-y[U]}}else for(var J=0;J<d;J++){var Y=D[J];f[J]=Y+(L[J]-Y)*F}else switch(s){case W.setup:{var X=u;if(X.bones)for(var V=0;V<d;V++){var Y=D[V];f[V]=(Y+(L[V]-Y)*F)*o}else for(var y=X.vertices,M=0;M<d;M++){var Y=D[M],A=y[M];f[M]=A+(Y+(L[M]-Y)*F-A)*o}break}case W.first:case W.replace:for(var $=0;$<d;$++){var Y=D[$];f[$]+=(Y+(L[$]-Y)*F-f[$])*o}break;case W.add:var v=u;if(v.bones)for(var te=0;te<d;te++){var Y=D[te];f[te]+=(Y+(L[te]-Y)*F)*o}else for(var y=v.vertices,j=0;j<d;j++){var Y=D[j];f[j]+=(Y+(L[j]-Y)*F-y[j])*o}}}}},e}(go),m_=function(t){Ft(e,t);function e(r){var n=t.call(this,r,e.propertyIds)||this;return n.events=new Array(r),n}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n){this.frames[r]=n.time,this.events[r]=n},e.prototype.apply=function(r,n,i,a,o,s,c){if(a){var l=this.frames,u=this.frames.length;if(n>i)this.apply(r,n,Number.MAX_VALUE,a,o,s,c),n=-1;else if(n>=l[u-1])return;if(!(i<l[0])){var f=0;if(n<l[0])f=0;else{f=Jr.search1(l,n)+1;for(var h=l[f];f>0&&l[f-1]==h;)f--}for(;f<u&&i>=l[f];f++)a.push(this.events[f])}}},e.propertyIds=[""+tr.event],e}(Jr),hf=function(t){Ft(e,t);function e(r){var n=t.call(this,r,e.propertyIds)||this;return n.drawOrders=new Array(r),n}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.drawOrders[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){if(c==At.mixOut){s==W.setup&&ue.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);return}if(i<this.frames[0]){(s==W.setup||s==W.first)&&ue.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);return}var l=Jr.search1(this.frames,i),u=this.drawOrders[l];if(!u)ue.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);else for(var f=r.drawOrder,h=r.slots,d=0,p=u.length;d<p;d++)f[d]=h[u[d]]},e.propertyIds=[""+tr.drawOrder],e}(Jr),IP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.ikConstraint+"|"+i])||this;return a.ikConstraintIndex=0,a.ikConstraintIndex=i,a}return e.prototype.getFrameEntries=function(){return 6},e.prototype.setFrame=function(r,n,i,a,o,s,c){r*=6,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s?1:0,this.frames[r+5]=c?1:0},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.ikConstraints[this.ikConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case W.first:l.mix+=(l.data.mix-l.mix)*o,l.softness+=(l.data.softness-l.softness)*o,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}var f=0,h=0,d=Jr.search(u,i,6),p=this.curves[d/6];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+6]-v);f+=(u[d+6+1]-f)*y,h+=(u[d+6+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}s==W.setup?(l.mix=l.data.mix+(f-l.data.mix)*o,l.softness=l.data.softness+(h-l.data.softness)*o,c==At.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=u[d+3],l.compress=u[d+4]!=0,l.stretch=u[d+5]!=0)):(l.mix+=(f-l.mix)*o,l.softness+=(h-l.softness)*o,c==At.mixIn&&(l.bendDirection=u[d+3],l.compress=u[d+4]!=0,l.stretch=u[d+5]!=0))}},e}(go),FP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.transformConstraint+"|"+i])||this;return a.transformConstraintIndex=0,a.transformConstraintIndex=i,a}return e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(r,n,i,a,o,s,c,l){var u=this.frames;r*=7,u[r]=n,u[r+1]=i,u[r+2]=a,u[r+3]=o,u[r+4]=s,u[r+5]=c,u[r+6]=l},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.transformConstraints[this.transformConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){var f=l.data;switch(s){case W.setup:l.mixRotate=f.mixRotate,l.mixX=f.mixX,l.mixY=f.mixY,l.mixScaleX=f.mixScaleX,l.mixScaleY=f.mixScaleY,l.mixShearY=f.mixShearY;return;case W.first:l.mixRotate+=(f.mixRotate-l.mixRotate)*o,l.mixX+=(f.mixX-l.mixX)*o,l.mixY+=(f.mixY-l.mixY)*o,l.mixScaleX+=(f.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(f.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(f.mixShearY-l.mixShearY)*o}return}var h,d,p,v,y,m,g=Jr.search(u,i,7),x=this.curves[g/7];switch(x){case 0:var b=u[g];h=u[g+1],d=u[g+2],p=u[g+3],v=u[g+4],y=u[g+5],m=u[g+6];var S=(i-b)/(u[g+7]-b);h+=(u[g+7+1]-h)*S,d+=(u[g+7+2]-d)*S,p+=(u[g+7+3]-p)*S,v+=(u[g+7+4]-v)*S,y+=(u[g+7+5]-y)*S,m+=(u[g+7+6]-m)*S;break;case 1:h=u[g+1],d=u[g+2],p=u[g+3],v=u[g+4],y=u[g+5],m=u[g+6];break;default:h=this.getBezierValue(i,g,1,x-2),d=this.getBezierValue(i,g,2,x+18-2),p=this.getBezierValue(i,g,3,x+18*2-2),v=this.getBezierValue(i,g,4,x+18*3-2),y=this.getBezierValue(i,g,5,x+18*4-2),m=this.getBezierValue(i,g,6,x+18*5-2)}if(s==W.setup){var f=l.data;l.mixRotate=f.mixRotate+(h-f.mixRotate)*o,l.mixX=f.mixX+(d-f.mixX)*o,l.mixY=f.mixY+(p-f.mixY)*o,l.mixScaleX=f.mixScaleX+(v-f.mixScaleX)*o,l.mixScaleY=f.mixScaleY+(y-f.mixScaleY)*o,l.mixShearY=f.mixShearY+(m-f.mixShearY)*o}else l.mixRotate+=(h-l.mixRotate)*o,l.mixX+=(d-l.mixX)*o,l.mixY+=(p-l.mixY)*o,l.mixScaleX+=(v-l.mixScaleX)*o,l.mixScaleY+=(y-l.mixScaleY)*o,l.mixShearY+=(m-l.mixShearY)*o}},e}(go),kP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.pathConstraintPosition+"|"+i)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.position=l.data.position;return;case W.first:l.position+=(l.data.position-l.position)*o}return}var f=this.getCurveValue(i);s==W.setup?l.position=l.data.position+(f-l.data.position)*o:l.position+=(f-l.position)*o}},e}(mo),DP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,tr.pathConstraintSpacing+"|"+i)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.spacing=l.data.spacing;return;case W.first:l.spacing+=(l.data.spacing-l.spacing)*o}return}var f=this.getCurveValue(i);s==W.setup?l.spacing=l.data.spacing+(f-l.data.spacing)*o:l.spacing+=(f-l.spacing)*o}},e}(mo),MP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,n,[tr.pathConstraintMix+"|"+i])||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(r,n,i,a,o){var s=this.frames;r<<=2,s[r]=n,s[r+1]=i,s[r+2]=a,s[r+3]=o},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case W.setup:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;return;case W.first:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*o,l.mixX+=(l.data.mixX-l.mixX)*o,l.mixY+=(l.data.mixY-l.mixY)*o}return}var f,h,d,p=Jr.search(u,i,4),v=this.curves[p>>2];switch(v){case 0:var y=u[p];f=u[p+1],h=u[p+2],d=u[p+3];var m=(i-y)/(u[p+4]-y);f+=(u[p+4+1]-f)*m,h+=(u[p+4+2]-h)*m,d+=(u[p+4+3]-d)*m;break;case 1:f=u[p+1],h=u[p+2],d=u[p+3];break;default:f=this.getBezierValue(i,p,1,v-2),h=this.getBezierValue(i,p,2,v+18-2),d=this.getBezierValue(i,p,3,v+18*2-2)}if(s==W.setup){var g=l.data;l.mixRotate=g.mixRotate+(f-g.mixRotate)*o,l.mixX=g.mixX+(h-g.mixX)*o,l.mixY=g.mixY+(d-g.mixY)*o}else l.mixRotate+=(f-l.mixRotate)*o,l.mixX+=(h-l.mixX)*o,l.mixY+=(d-l.mixY)*o}},e}(go),LP=function(t){Ft(e,t);function e(r,n,i){var a=t.call(this,r,[tr.sequence+"|"+n+"|"+i.sequence.id])||this;return a.slotIndex=n,a.attachment=i,a}return e.prototype.getFrameEntries=function(){return e.ENTRIES},e.prototype.getSlotIndex=function(){return this.slotIndex},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setFrame=function(r,n,i,a,o){var s=this.frames;r*=e.ENTRIES,s[r]=n,s[r+e.MODE]=i|a<<4,s[r+e.DELAY]=o},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.attachment,f=this.attachment;if(!(u!=f&&(!(u instanceof zo)||u.timelineAttachment!=f))){var h=this.frames;if(i<h[0]){(s==W.setup||s==W.first)&&(l.sequenceIndex=-1);return}var d=Jr.search(h,i,e.ENTRIES),p=h[d],v=h[d+e.MODE],y=h[d+e.DELAY];if(this.attachment.sequence){var m=v>>4,g=this.attachment.sequence.regions.length,x=vP[v&15];if(x!=Un.hold)switch(m+=(i-p)/y+1e-5|0,x){case Un.once:m=Math.min(g-1,m);break;case Un.loop:m%=g;break;case Un.pingpong:{var b=(g<<1)-2;m=b==0?0:m%b,m>=g&&(m=b-m);break}case Un.onceReverse:m=Math.max(g-1-m,0);break;case Un.loopReverse:m=g-1-m%g;break;case Un.pingpongReverse:{var b=(g<<1)-2;m=b==0?0:(m+g-1)%b,m>=g&&(m=b-m)}}l.sequenceIndex=m}}}},e.ENTRIES=3,e.MODE=1,e.DELAY=2,e}(Jr),L9=function(){function t(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new N9(this),this.propertyIDs=new z$,this.animationsChanged=!1,this.trackEntryPool=new c_(function(){return new B9}),this.data=e}return t.emptyAnimation=function(){return t._emptyAnimation},t.prototype.update=function(e){e*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=e*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime+=a.timeScale==0?0:(c/a.timeScale+e)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){r[n]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,e)){var l=a.mixingFrom;for(a.mixingFrom=null,l&&(l.mixingTo=null);l;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,r){var n=e.mixingFrom;if(!n)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,e.mixTime+=r,!1)},t.prototype.apply=function(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(!s||s.delay>0)){i=!0;var c=a==0?W.first:s.mixBlend,l=s.alpha;s.mixingFrom?l*=this.applyMixingFrom(s,e,c):s.trackTime>=s.trackEnd&&!s.next&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=f,d=r;s.reverse&&(h=s.animation.duration-h,d=null);var p=s.animation.timelines,v=p.length;if(a==0&&l==1||c==W.add)for(var y=0;y<v;y++){ue.webkit602BugfixHelper(l,c);var m=p[y];m instanceof wu?this.applyAttachmentTimeline(m,e,h,c,!0):m.apply(e,u,h,d,l,c,At.mixIn)}else{var g=s.timelineMode,x=s.shortestRotation,b=!x&&s.timelinesRotation.length!=v<<1;b&&(s.timelinesRotation.length=v<<1);for(var y=0;y<v;y++){var S=p[y],w=g[y]==WS?c:W.setup;!x&&S instanceof Op?this.applyRotateTimeline(S,e,h,l,w,s.timelinesRotation,y<<1,b):S instanceof wu?this.applyAttachmentTimeline(S,e,h,c,!0):(ue.webkit602BugfixHelper(l,c),S.apply(e,u,h,d,l,w,At.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}for(var A=this.unkeyedState+l3,C=e.slots,O=0,P=e.slots.length;O<P;O++){var I=C[O];if(I.attachmentState==A){var R=I.data.attachmentName;I.setAttachment(R?e.getAttachment(I.data.index,R):null)}}return this.unkeyedState+=2,this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,r,n){var i=e.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,r,n);var a=0;e.mixDuration==0?(a=1,n==W.first&&(n=W.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),n!=W.first&&(n=i.mixBlend));var o=a<i.attachmentThreshold,s=a<i.drawOrderThreshold,c=i.animation.timelines,l=c.length,u=i.alpha*e.interruptAlpha,f=u*(1-a),h=i.animationLast,d=i.getAnimationTime(),p=d,v=null;if(i.reverse?p=i.animation.duration-p:a<i.eventThreshold&&(v=this.events),n==W.add)for(var y=0;y<l;y++)c[y].apply(r,h,p,v,f,n,At.mixOut);else{var m=i.timelineMode,g=i.timelineHoldMix,x=i.shortestRotation,b=!x&&i.timelinesRotation.length!=l<<1;b&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(var y=0;y<l;y++){var S=c[y],w=At.mixOut,A=void 0,C=0;switch(m[y]){case WS:if(!s&&S instanceof hf)continue;A=n,C=f;break;case o3:A=W.setup,C=f;break;case s3:A=n,C=u;break;case zS:A=W.setup,C=u;break;default:A=W.setup;var O=g[y];C=u*Math.max(0,1-O.mixTime/O.mixDuration);break}i.totalAlpha+=C,!x&&S instanceof Op?this.applyRotateTimeline(S,r,p,C,A,i.timelinesRotation,y<<1,b):S instanceof wu?this.applyAttachmentTimeline(S,r,p,A,o):(ue.webkit602BugfixHelper(C,n),s&&S instanceof hf&&A==W.setup&&(w=At.mixIn),S.apply(r,h,p,v,C,A,w))}}return e.mixDuration>0&&this.queueEvents(i,d),this.events.length=0,i.nextAnimationLast=d,i.nextTrackLast=i.trackTime,a},t.prototype.applyAttachmentTimeline=function(e,r,n,i,a){var o=r.slots[e.slotIndex];o.bone.active&&(n<e.frames[0]?(i==W.setup||i==W.first)&&this.setAttachment(r,o,o.data.attachmentName,a):this.setAttachment(r,o,e.attachmentNames[Jr.search1(e.frames,n)],a),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+l3))},t.prototype.setAttachment=function(e,r,n,i){r.setAttachment(n?e.getAttachment(r.data.index,n):null),i&&(r.attachmentState=this.unkeyedState+VFe)},t.prototype.applyRotateTimeline=function(e,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){e.apply(r,0,n,null,1,a,At.mixIn);return}var l=r.bones[e.boneIndex];if(l.active){var u=e.frames,f=0,h=0;if(n<u[0])switch(a){case W.setup:l.rotation=l.data.rotation;default:return;case W.first:f=l.rotation,h=l.data.rotation}else f=a==W.setup?l.data.rotation:l.rotation,h=l.data.rotation+e.getCurveValue(n);var d=0,p=h-f;if(p-=(16384-(16384.499999999996-p/360|0))*360,p==0)d=o[s];else{var v=0,y=0;c?(v=0,y=p):(v=o[s],y=o[s+1]);var m=p>0,g=v>=0;K.signum(y)!=K.signum(p)&&Math.abs(y)<=90&&(Math.abs(v)>180&&(v+=360*K.signum(v)),g=m),d=p+v-v%360,g!=m&&(d+=360*K.signum(v)),o[s]=d}o[s+1]=p,l.rotation=f+d*i}},t.prototype.queueEvents=function(e,r){for(var n=e.animationStart,i=e.animationEnd,a=i-n,o=e.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(e,u)}var f=!1;for(e.loop?f=a==0||o>e.trackTime%a:f=r>=i&&e.animationLast<i,f&&this.queue.complete(e);c<l;c++){var h=s[c];h.time<n||this.queue.event(e,h)}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var r=this.tracks[e];if(r){this.queue.end(r),this.clearNext(r);for(var n=r;;){var i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,r,n){var i=this.expandToIndex(e);this.tracks[e]=r,r.previous=null,i&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},t.prototype.setAnimation=function(e,r,n){n===void 0&&(n=!1);var i=this.data.skeletonData.findAnimation(r);if(!i)throw new Error("Animation not found: "+r);return this.setAnimationWith(e,i,n)},t.prototype.setAnimationWith=function(e,r,n){if(n===void 0&&(n=!1),!r)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(e);a&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,i=!1):this.clearNext(a));var o=this.trackEntry(e,r,n,a);return this.setCurrent(e,o,i),this.queue.drain(),o},t.prototype.addAnimation=function(e,r,n,i){n===void 0&&(n=!1),i===void 0&&(i=0);var a=this.data.skeletonData.findAnimation(r);if(!a)throw new Error("Animation not found: "+r);return this.addAnimationWith(e,a,n,i)},t.prototype.addAnimationWith=function(e,r,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=0),!r)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(a)for(;a.next;)a=a.next;var o=this.trackEntry(e,r,n,a);return a?(a.next=o,o.previous=a,i<=0&&(i+=a.getTrackComplete()-o.mixDuration)):(this.setCurrent(e,o,!0),this.queue.drain()),o.delay=i,o},t.prototype.setEmptyAnimation=function(e,r){r===void 0&&(r=0);var n=this.setAnimationWith(e,t.emptyAnimation(),!1);return n.mixDuration=r,n.trackEnd=r,n},t.prototype.addEmptyAnimation=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=this.addAnimationWith(e,t.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-r),i.mixDuration=r,i.trackEnd=r,i},t.prototype.setEmptyAnimations=function(e){e===void 0&&(e=0);var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=r,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(ue.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,r,n,i){var a=this.trackEntryPool.obtain();return a.reset(),a.trackIndex=e,a.animation=r,a.loop=n,a.holdPrevious=!1,a.reverse=!1,a.shortestRotation=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.mixTime=0,a.mixDuration=i?this.data.getMix(i.animation,r):0,a.interruptAlpha=1,a.totalAlpha=0,a.mixBlend=W.replace,a},t.prototype.clearNext=function(e){for(var r=e.next;r;)this.queue.dispose(r),r=r.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=this.tracks,r=0,n=e.length;r<n;r++){var i=e[r];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=W.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}},t.prototype.computeHold=function(e){var r=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,a=e.timelineMode;a.length=i;var o=e.timelineHoldMix;o.length=0;var s=this.propertyIDs;if(r&&r.holdPrevious){for(var c=0;c<i;c++)a[c]=s.addAll(n[c].getPropertyIds())?zS:s3;return}e:for(var c=0;c<i;c++){var l=n[c],u=l.getPropertyIds();if(!s.addAll(u))a[c]=WS;else if(!r||l instanceof wu||l instanceof hf||l instanceof m_||!r.animation.hasTimeline(u))a[c]=o3;else{for(var f=r.mixingTo;f;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(e.mixDuration>0){a[c]=$Fe,o[c]=f;continue e}break}a[c]=zS}}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,r,n)},t.prototype.addAnimationByName=function(e,r,n,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,r,n,i)},t.prototype.hasAnimation=function(e){var r=this.data.skeletonData.findAnimation(e);return r!==null},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t._emptyAnimation=new v_("<empty>",[],0),t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),B9=function(){function t(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=W.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t.prototype.getTrackComplete=function(){var e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),N9=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(Ti.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(Ti.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(Ti.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(Ti.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(Ti.complete),this.objects.push(e)},t.prototype.event=function(e,r){this.objects.push(Ti.event),this.objects.push(e),this.objects.push(r)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];switch(i){case Ti.start:a.listener&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++){var s=r[o];s.start&&s.start(a)}break;case Ti.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++){var s=r[o];s.interrupt&&s.interrupt(a)}break;case Ti.end:a.listener&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++){var s=r[o];s.end&&s.end(a)}case Ti.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++){var s=r[o];s.dispose&&s.dispose(a)}this.animState.trackEntryPool.free(a);break;case Ti.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++){var s=r[o];s.complete&&s.complete(a)}break;case Ti.event:var c=e[n+++2];a.listener&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++){var s=r[o];s.event&&s.event(a,c)}break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}(),Ti;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(Ti||(Ti={}));var jFe=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,r){},t}(),WS=0,o3=1,s3=2,zS=3,$Fe=4,l3=1,VFe=2,U9=function(){function t(e){if(this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return t.prototype.setMix=function(e,r,n){var i=this.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);var a=this.skeletonData.findAnimation(r);if(!a)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},t.prototype.setMixWith=function(e,r,n){if(!e)throw new Error("from cannot be null.");if(!r)throw new Error("to cannot be null.");var i=e.name+"."+r.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(e,r){var n=e.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},t}(),BP=function(){function t(e){this.atlas=e}return t.prototype.loadSequence=function(e,r,n){for(var i=n.regions,a=0,o=i.length;a<o;a++){var s=n.getPath(r,a),c=this.atlas.findRegion(s);if(c==null)throw new Error("Region not found in atlas: "+s+" (sequence: "+e+")");i[a]=c,i[a].renderObject=i[a]}},t.prototype.newRegionAttachment=function(e,r,n,i){var a=new dP(r,n);if(i!=null)this.loadSequence(r,n,i);else{var o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");o.renderObject=o,a.region=o}return a},t.prototype.newMeshAttachment=function(e,r,n,i){var a=new p_(r,n);if(i!=null)this.loadSequence(r,n,i);else{var o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");o.renderObject=o,a.region=o}return a},t.prototype.newBoundingBoxAttachment=function(e,r){return new k9(r)},t.prototype.newPathAttachment=function(e,r){return new Tp(r)},t.prototype.newPointAttachment=function(e,r){return new M9(r)},t.prototype.newClippingAttachment=function(e,r){return new D9(r)},t}(),fC=function(){function t(e,r,n){if(this.matrix=new zr,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,r,n,i,a,o,s){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(!c){var h=this.skeleton,d=n+90+s;l.a=K.cosDeg(n+o)*i*u,l.c=K.cosDeg(d)*a*u,l.b=K.sinDeg(n+o)*i*f,l.d=K.sinDeg(d)*a*f,l.tx=e*u+h.x,l.ty=r*f+h.y;return}var p=c.matrix.a,v=c.matrix.c,y=c.matrix.b,m=c.matrix.d;switch(l.tx=p*e+v*r+c.matrix.tx,l.ty=y*e+m*r+c.matrix.ty,this.data.transformMode){case mt.Normal:{var d=n+90+s,g=K.cosDeg(n+o)*i,x=K.cosDeg(d)*a,b=K.sinDeg(n+o)*i,S=K.sinDeg(d)*a;l.a=p*g+v*b,l.c=p*x+v*S,l.b=y*g+m*b,l.d=y*x+m*S;return}case mt.OnlyTranslation:{var d=n+90+s;l.a=K.cosDeg(n+o)*i,l.c=K.cosDeg(d)*a,l.b=K.sinDeg(n+o)*i,l.d=K.sinDeg(d)*a;break}case mt.NoRotationOrReflection:{var w=p*p+y*y,A=0;w>1e-4?(w=Math.abs(p*m-v*y)/w,p/=u,y/=f,v=y*w,m=p*w,A=Math.atan2(y,p)*K.radDeg):(p=0,y=0,A=90-Math.atan2(m,v)*K.radDeg);var C=n+o-A,O=n+s-A+90,g=K.cosDeg(C)*i,x=K.cosDeg(O)*a,b=K.sinDeg(C)*i,S=K.sinDeg(O)*a;l.a=p*g-v*b,l.c=p*x-v*S,l.b=y*g+m*b,l.d=y*x+m*S;break}case mt.NoScale:case mt.NoScaleOrReflection:{var P=K.cosDeg(n),I=K.sinDeg(n),R=(p*P+v*I)/u,F=(y*P+m*I)/f,w=Math.sqrt(R*R+F*F);w>1e-5&&(w=1/w),R*=w,F*=w,w=Math.sqrt(R*R+F*F),this.data.transformMode==mt.NoScale&&p*m-v*y<0!=(u<0!=f<0)&&(w=-w);var D=Math.PI/2+Math.atan2(F,R),L=Math.cos(D)*w,U=Math.sin(D)*w,g=K.cosDeg(o)*i,x=K.cosDeg(90+s)*a,b=K.sinDeg(o)*i,S=K.sinDeg(90+s)*a;l.a=R*g+L*b,l.c=R*x+L*S,l.b=F*g+U*b,l.d=F*x+U*S;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*K.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*K.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.b*e.b)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.c*e.c+e.d*e.d)},t.prototype.updateAppliedTransform=function(){var e=this.parent,r=this.matrix;if(!e){this.ax=r.tx-this.skeleton.x,this.ay=r.ty-this.skeleton.y,this.arotation=Math.atan2(r.b,r.a)*K.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*K.radDeg;return}var n=e.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,d=c*r.b-u*r.a,p=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+d*d),this.ascaleX>1e-4){var v=f*p-h*d;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(f*h+d*p,v)*K.radDeg,this.arotation=Math.atan2(d,f)*K.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*K.radDeg},t.prototype.worldToLocal=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=e.x-r.tx,l=e.y-r.ty;return e.x=c*o*s-l*i*s,e.y=l*n*s-c*a*s,e},t.prototype.localToWorld=function(e){var r=this.matrix,n=e.x,i=e.y;return e.x=n*r.a+i*r.c+r.tx,e.y=n*r.b+i*r.d+r.ty,e},t.prototype.worldToLocalRotation=function(e){var r=K.sinDeg(e),n=K.cosDeg(e),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*K.radDeg},t.prototype.localToWorldRotation=function(e){e-=this.rotation-this.shearX;var r=K.sinDeg(e),n=K.cosDeg(e),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*K.radDeg},t.prototype.rotateWorld=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=K.cosDeg(e),c=K.sinDeg(e);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o},t}(),NP=function(){function t(e,r,n){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=mt.Normal,this.skinRequired=!1,this.color=new Ne,e<0)throw new Error("index must be >= 0.");if(!r)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}return t}(),y_=function(){function t(e,r,n){this.name=e,this.order=r,this.skinRequired=n}return t}(),UP=function(){function t(e,r){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!r)throw new Error("data cannot be null.");this.time=e,this.data=r}return t}(),jP=function(){function t(e){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=e}return t}(),j9=function(){function t(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=r.findBone(e.bones[n].name);if(!i)throw new Error("Couldn't find bone "+e.bones[n].name);this.bones.push(i)}var a=r.findBone(e.target.name);if(!a)throw new Error("Couldn't find bone "+e.target.name);this.target=a}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){if(this.mix!=0){var e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}},t.prototype.apply1=function(e,r,n,i,a,o,s){var c=e.parent.matrix;if(!c)throw new Error("IK bone must have parent.");var l=c.a,u=c.c,f=c.b,h=c.d,d=-e.ashearX-e.arotation,p=0,v=0,y=e.skeleton.scaleX,m=-e.skeleton.scaleY;switch(e.data.transformMode){case mt.OnlyTranslation:p=r-e.worldX,v=n-e.worldY,v=-v;break;case mt.NoRotationOrReflection:var g=Math.abs(l*h-u*f)/(l*l+f*f),x=l/y,b=f/m;u=-b*g*y,h=x*g*m,d+=Math.atan2(b,x)*K.radDeg;default:var S=r-c.tx,w=n-c.ty,A=l*h-u*f;p=(S*h-w*u)/A-e.ax,v=(w*l-S*f)/A-e.ay}d+=Math.atan2(v,p)*K.radDeg,e.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var C=e.ascaleX,O=e.ascaleY;if(i||a){switch(e.data.transformMode){case mt.NoScale:case mt.NoScaleOrReflection:p=r-e.worldX,v=n-e.worldY}var P=e.data.length*C,I=Math.sqrt(p*p+v*v);if(i&&I<P||a&&I>P&&P>1e-4){var g=(I/P-1)*s+1;C*=g,o&&(O*=g)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+d*s,C,O,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,r,n,i,a,o,s,c,l){var u=e.ax,f=e.ay,h=e.ascaleX,d=e.ascaleY,p=h,v=d,y=r.ascaleX,m=e.matrix,g=0,x=0,b=0;h<0?(h=-h,g=180,b=-1):(g=0,b=1),d<0&&(d=-d,b=-b),y<0?(y=-y,x=180):x=0;var S=r.ax,w=0,A=0,C=0,O=m.a,P=m.c,I=m.b,R=m.d,F=Math.abs(h-d)<=1e-4;!F||o?(w=0,A=O*S+m.tx,C=I*S+m.ty):(w=r.ay,A=O*S+P*w+m.tx,C=I*S+R*w+m.ty);var D=e.parent.matrix;if(!D)throw new Error("IK parent must itself have a parent.");O=D.a,P=D.c,I=D.b,R=D.d;var L=1/(O*R-P*I),U=A-D.tx,Y=C-D.ty,ee=(U*R-Y*P)*L-u,J=(Y*O-U*I)*L-f,X=Math.sqrt(ee*ee+J*J),M=r.data.length*y,V,$;if(X<1e-4){this.apply1(e,n,i,!1,o,!1,l),r.updateWorldTransformWith(S,w,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}U=n-D.tx,Y=i-D.ty;var j=(U*R-Y*P)*L-u,te=(Y*O-U*I)*L-f,ie=j*j+te*te;if(c!=0){c*=h*(y+1)*.5;var de=Math.sqrt(ie),he=de-X-M*h+c;if(he>0){var Ee=Math.min(1,he/(c*2))-1;Ee=(he-c*(1-Ee*Ee))/de,j-=Ee*j,te-=Ee*te,ie=j*j+te*te}}e:if(F){M*=h;var Oe=(ie-X*X-M*M)/(2*X*M);Oe<-1?(Oe=-1,$=Math.PI*a):Oe>1?(Oe=1,$=0,o&&(O=(Math.sqrt(ie)/(X+M)-1)*l+1,p*=O,s&&(v*=O))):$=Math.acos(Oe)*a,O=X+M*Oe,P=M*Math.sin($),V=Math.atan2(te*O-j*P,j*O+te*P)}else{O=h*M,P=d*M;var ye=O*O,Ae=P*P,_e=Math.atan2(te,j);I=Ae*X*X+ye*ie-ye*Ae;var we=-2*Ae*X,$e=Ae-ye;if(R=we*we-4*$e*I,R>=0){var Xe=Math.sqrt(R);we<0&&(Xe=-Xe),Xe=-(we+Xe)*.5;var ke=Xe/$e,at=I/Xe,vt=Math.abs(ke)<Math.abs(at)?ke:at;if(vt*vt<=ie){Y=Math.sqrt(ie-vt*vt)*a,V=_e-Math.atan2(Y,vt),$=Math.atan2(Y/d,(vt-X)/h);break e}}var gt=K.PI,tt=X-O,ot=tt*tt,dt=0,Xt=0,rr=X+O,qt=rr*rr,Vt=0;I=-O*X/(ye-Ae),I>=-1&&I<=1&&(I=Math.acos(I),U=O*Math.cos(I)+X,Y=P*Math.sin(I),R=U*U+Y*Y,R<ot&&(gt=I,ot=R,tt=U,dt=Y),R>qt&&(Xt=I,qt=R,rr=U,Vt=Y)),ie<=(ot+qt)*.5?(V=_e-Math.atan2(dt*a,tt),$=gt*a):(V=_e-Math.atan2(Vt*a,rr),$=Xt*a)}var bt=Math.atan2(w,S)*b,or=e.arotation;V=(V-bt)*K.radDeg+g-or,V>180?V-=360:V<-180&&(V+=360),e.updateWorldTransformWith(u,f,or+V*l,p,v,0,0),or=r.arotation,$=(($+bt)*K.radDeg-r.ashearX)*b+x-or,$>180?$-=360:$<-180&&($+=360),r.updateWorldTransformWith(S,w,or+$*l,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},t}(),$P=function(t){Ft(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return Object.defineProperty(e.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),e}(y_),VP=function(t){Ft(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.positionMode=Mr.Fixed,n.spacingMode=dn.Fixed,n.rotateMode=Zr.Chain,n.offsetRotation=0,n.position=0,n.spacing=0,n.mixRotate=0,n.mixX=0,n.mixY=0,n}return Object.defineProperty(e.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),e}(y_),dn;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"})(dn||(dn={}));var $9=function(){function t(e,r){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,i=e.bones.length;n<i;n++){var a=r.findBone(e.bones[n].name);if(!a)throw new Error("Couldn't find bone "+e.bones[n].name+".");this.bones.push(a)}var o=r.findSlot(e.target.name);if(!o)throw new Error("Couldn't find target bone "+e.target.name);this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof Tp){var r=this.mixRotate,n=this.mixX,i=this.mixY;if(!(r==0&&n==0&&i==0)){var a=this.data,o=a.rotateMode==Zr.Tangent,s=a.rotateMode==Zr.ChainScale,c=this.bones,l=c.length,u=o?l:l+1,f=ue.setArraySize(this.spaces,u),h=s?this.lengths=ue.setArraySize(this.lengths,l):[],d=this.spacing;switch(a.spacingMode){case dn.Percent:if(s)for(var p=0,v=u-1;p<v;p++){var y=c[p],m=y.data.length;if(m<t.epsilon)h[p]=0;else{var g=m*y.matrix.a,x=m*y.matrix.b;h[p]=Math.sqrt(g*g+x*x)}}ue.arrayFill(f,1,u,d);break;case dn.Proportional:for(var b=0,p=0,v=u-1;p<v;){var y=c[p],m=y.data.length;if(m<t.epsilon)s&&(h[p]=0),f[++p]=d;else{var g=m*y.matrix.a,x=m*y.matrix.b,S=Math.sqrt(g*g+x*x);s&&(h[p]=S),f[++p]=S,b+=S}}if(b>0){b=u/b*d;for(var p=1;p<u;p++)f[p]*=b}break;default:for(var w=a.spacingMode==dn.Length,p=0,v=u-1;p<v;){var y=c[p],m=y.data.length;if(m<t.epsilon)s&&(h[p]=0),f[++p]=d;else{var g=m*y.matrix.a,x=m*y.matrix.b,A=Math.sqrt(g*g+x*x);s&&(h[p]=A),f[++p]=(w?m+d:d)*A/m}}}var C=this.computeWorldPositions(e,u,o),O=C[0],P=C[1],I=a.offsetRotation,R=!1;if(I==0)R=a.rotateMode==Zr.Chain;else{R=!1;var F=this.target.bone.matrix;I*=F.a*F.d-F.b*F.c>0?K.degRad:-K.degRad}for(var p=0,F=3;p<l;p++,F+=3){var y=c[p],D=y.matrix;D.tx+=(O-D.tx)*n,D.ty+=(P-D.ty)*i;var g=C[F],x=C[F+1],L=g-O,U=x-P;if(s){var Y=h[p];if(Y!=0){var ee=(Math.sqrt(L*L+U*U)/Y-1)*r+1;D.a*=ee,D.b*=ee}}if(O=g,P=x,r>0){var J=D.a,X=D.c,M=D.b,V=D.d,$=0,j=0,te=0;if(o?$=C[F-1]:f[p+1]==0?$=C[F+2]:$=Math.atan2(U,L),$-=Math.atan2(M,J),R){j=Math.cos($),te=Math.sin($);var ie=y.data.length;O+=(ie*(j*J-te*M)-L)*r,P+=(ie*(te*J+j*M)-U)*r}else $+=I;$>K.PI?$-=K.PI2:$<-K.PI&&($+=K.PI2),$*=r,j=Math.cos($),te=Math.sin($),D.a=j*J-te*M,D.c=j*X-te*V,D.b=te*J+j*M,D.d=te*X+j*V}y.updateAppliedTransform()}}}},t.prototype.computeWorldPositions=function(e,r,n){var i=this.target,a=this.position,o=this.spaces,s=ue.setArraySize(this.positions,r*3+2),c=this.world,l=e.closed,u=e.worldVerticesLength,f=u/6,h=t.NONE;if(!e.constantSpeed){var d=e.lengths;f-=l?1:2;var p=d[f];this.data.positionMode==Mr.Percent&&(a*=p);var v;switch(this.data.spacingMode){case dn.Percent:v=p;break;case dn.Proportional:v=p/r;break;default:v=1}c=ue.setArraySize(this.world,8);for(var y=0,m=0,g=0;y<r;y++,m+=3){var x=o[y]*v;a+=x;var b=a;if(l)b%=p,b<0&&(b+=p),g=0;else if(b<0){h!=t.BEFORE&&(h=t.BEFORE,e.computeWorldVertices(i,2,4,c,0,2)),this.addBeforePosition(b,c,0,s,m);continue}else if(b>p){h!=t.AFTER&&(h=t.AFTER,e.computeWorldVertices(i,u-6,4,c,0,2)),this.addAfterPosition(b-p,c,0,s,m);continue}for(;;g++){var S=d[g];if(!(b>S)){if(g==0)b/=S;else{var w=d[g-1];b=(b-w)/(S-w)}break}}g!=h&&(h=g,l&&g==f?(e.computeWorldVertices(i,u-4,4,c,0,2),e.computeWorldVertices(i,0,4,c,4,2)):e.computeWorldVertices(i,g*6+2,8,c,0,2)),this.addCurvePosition(b,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],s,m,n||y>0&&x==0)}return s}l?(u+=2,c=ue.setArraySize(this.world,u),e.computeWorldVertices(i,2,u-4,c,0,2),e.computeWorldVertices(i,0,2,c,u-4,2),c[u-2]=c[0],c[u-1]=c[1]):(f--,u-=4,c=ue.setArraySize(this.world,u),e.computeWorldVertices(i,2,u,c,0,2));for(var A=ue.setArraySize(this.curves,f),C=0,O=c[0],P=c[1],I=0,R=0,F=0,D=0,L=0,U=0,Y=0,ee=0,J=0,X=0,M=0,V=0,$=0,j=0,y=0,te=2;y<f;y++,te+=6)I=c[te],R=c[te+1],F=c[te+2],D=c[te+3],L=c[te+4],U=c[te+5],Y=(O-I*2+F)*.1875,ee=(P-R*2+D)*.1875,J=((I-F)*3-O+L)*.09375,X=((R-D)*3-P+U)*.09375,M=Y*2+J,V=ee*2+X,$=(I-O)*.75+Y+J*.16666667,j=(R-P)*.75+ee+X*.16666667,C+=Math.sqrt($*$+j*j),$+=M,j+=V,M+=J,V+=X,C+=Math.sqrt($*$+j*j),$+=M,j+=V,C+=Math.sqrt($*$+j*j),$+=M+J,j+=V+X,C+=Math.sqrt($*$+j*j),A[y]=C,O=L,P=U;this.data.positionMode==Mr.Percent&&(a*=C);var ie;switch(this.data.spacingMode){case dn.Percent:ie=C;break;case dn.Proportional:ie=C/r;break;default:ie=1}for(var de=this.segments,he=0,y=0,m=0,g=0,Ee=0;y<r;y++,m+=3){var x=o[y]*ie;a+=x;var b=a;if(l)b%=C,b<0&&(b+=C),g=0;else if(b<0){this.addBeforePosition(b,c,0,s,m);continue}else if(b>C){this.addAfterPosition(b-C,c,u-4,s,m);continue}for(;;g++){var Oe=A[g];if(!(b>Oe)){if(g==0)b/=Oe;else{var w=A[g-1];b=(b-w)/(Oe-w)}break}}if(g!=h){h=g;var ye=g*6;for(O=c[ye],P=c[ye+1],I=c[ye+2],R=c[ye+3],F=c[ye+4],D=c[ye+5],L=c[ye+6],U=c[ye+7],Y=(O-I*2+F)*.03,ee=(P-R*2+D)*.03,J=((I-F)*3-O+L)*.006,X=((R-D)*3-P+U)*.006,M=Y*2+J,V=ee*2+X,$=(I-O)*.3+Y+J*.16666667,j=(R-P)*.3+ee+X*.16666667,he=Math.sqrt($*$+j*j),de[0]=he,ye=1;ye<8;ye++)$+=M,j+=V,M+=J,V+=X,he+=Math.sqrt($*$+j*j),de[ye]=he;$+=M,j+=V,he+=Math.sqrt($*$+j*j),de[8]=he,$+=M+J,j+=V+X,he+=Math.sqrt($*$+j*j),de[9]=he,Ee=0}for(b*=he;;Ee++){var Ae=de[Ee];if(!(b>Ae)){if(Ee==0)b/=Ae;else{var w=de[Ee-1];b=Ee+(b-w)/(Ae-w)}break}}this.addCurvePosition(b*.1,O,P,I,R,F,D,L,U,s,m,n||y>0&&x==0)}return s},t.prototype.addBeforePosition=function(e,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addAfterPosition=function(e,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addCurvePosition=function(e,r,n,i,a,o,s,c,l,u,f,h){if(e==0||isNaN(e)){u[f]=r,u[f+1]=n,u[f+2]=Math.atan2(a-n,i-r);return}var d=e*e,p=d*e,v=1-e,y=v*v,m=y*v,g=v*e,x=g*3,b=v*x,S=x*e,w=r*m+i*b+o*S+c*p,A=n*m+a*b+s*S+l*p;u[f]=w,u[f+1]=A,h&&(e<.001?u[f+2]=Math.atan2(a-n,i-r):u[f+2]=Math.atan2(A-(n*y+a*g*2+s*d),w-(r*y+i*g*2+o*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),V9=function(){function t(e,r){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!e)throw new Error("data cannot be null.");if(!r)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new Ne,this.darkColor=e.darkColor?new Ne:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getSkeleton=function(){return this.bone.skeleton},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&((!(e instanceof zo)||!(this.attachment instanceof zo)||e.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null},t}(),G9=function(){function t(e,r){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new yp,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=r.findBone(e.bones[n].name);if(!i)throw new Error("Couldn't find bone "+e.bones[n].name+".");this.bones.push(i)}var a=r.findBone(e.target.name);if(!a)throw new Error("Couldn't find target bone "+e.target.name+".");this.target=a}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},t.prototype.applyAbsoluteWorld=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=r!=0||n!=0,c=this.target,l=c.matrix,u=l.a,f=l.c,h=l.b,d=l.d,p=u*d-f*h>0?K.degRad:-K.degRad,v=this.data.offsetRotation*p,y=this.data.offsetShearY*p,m=this.bones,g=0,x=m.length;g<x;g++){var b=m[g],S=b.matrix;if(e!=0){var w=S.a,A=S.c,C=S.b,O=S.d,P=Math.atan2(h,u)-Math.atan2(C,w)+v;P>K.PI?P-=K.PI2:P<-K.PI&&(P+=K.PI2),P*=e;var I=Math.cos(P),R=Math.sin(P);S.a=I*w-R*C,S.c=I*A-R*O,S.b=R*w+I*C,S.d=R*A+I*O}if(s){var F=this.temp;c.localToWorld(F.set(this.data.offsetX,this.data.offsetY)),S.tx+=(F.x-S.tx)*r,S.ty+=(F.y-S.ty)*n}if(i!=0){var D=Math.sqrt(S.a*S.a+S.b*S.b);D!=0&&(D=(D+(Math.sqrt(u*u+h*h)-D+this.data.offsetScaleX)*i)/D),S.a*=D,S.b*=D}if(a!=0){var D=Math.sqrt(S.c*S.c+S.d*S.d);D!=0&&(D=(D+(Math.sqrt(f*f+d*d)-D+this.data.offsetScaleY)*a)/D),S.c*=D,S.d*=D}if(o>0){var A=S.c,O=S.d,L=Math.atan2(O,A),P=Math.atan2(d,f)-Math.atan2(h,u)-(L-Math.atan2(S.b,S.a));P>K.PI?P-=K.PI2:P<-K.PI&&(P+=K.PI2),P=L+(P+y)*o;var D=Math.sqrt(A*A+O*O);S.c=Math.cos(P)*D,S.d=Math.sin(P)*D}b.updateAppliedTransform()}},t.prototype.applyRelativeWorld=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=r!=0||n!=0,c=this.target,l=c.matrix,u=l.a,f=l.c,h=l.b,d=l.d,p=u*d-f*h>0?K.degRad:-K.degRad,v=this.data.offsetRotation*p,y=this.data.offsetShearY*p,m=this.bones,g=0,x=m.length;g<x;g++){var b=m[g],S=b.matrix;if(e!=0){var w=S.a,A=S.c,C=S.b,O=S.d,P=Math.atan2(h,u)+v;P>K.PI?P-=K.PI2:P<-K.PI&&(P+=K.PI2),P*=e;var I=Math.cos(P),R=Math.sin(P);S.a=I*w-R*C,S.c=I*A-R*O,S.b=R*w+I*C,S.d=R*A+I*O}if(s){var F=this.temp;c.localToWorld(F.set(this.data.offsetX,this.data.offsetY)),S.tx+=F.x*r,S.ty+=F.y*n}if(i!=0){var D=(Math.sqrt(u*u+h*h)-1+this.data.offsetScaleX)*i+1;S.a*=D,S.b*=D}if(a!=0){var D=(Math.sqrt(f*f+d*d)-1+this.data.offsetScaleY)*a+1;S.c*=D,S.d*=D}if(o>0){var P=Math.atan2(d,f)-Math.atan2(h,u);P>K.PI?P-=K.PI2:P<-K.PI&&(P+=K.PI2);var A=S.c,O=S.d;P=Math.atan2(O,A)+(P-K.PI/2+y)*o;var D=Math.sqrt(A*A+O*O);S.c=Math.cos(P)*D,S.d=Math.sin(P)*D}b.updateAppliedTransform()}},t.prototype.applyAbsoluteLocal=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=this.target,c=this.bones,l=0,u=c.length;l<u;l++){var f=c[l],h=f.arotation;if(e!=0){var d=s.arotation-h+this.data.offsetRotation;d-=(16384-(16384.499999999996-d/360|0))*360,h+=d*e}var p=f.ax,v=f.ay;p+=(s.ax-p+this.data.offsetX)*r,v+=(s.ay-v+this.data.offsetY)*n;var y=f.ascaleX,m=f.ascaleY;i!=0&&y!=0&&(y=(y+(s.ascaleX-y+this.data.offsetScaleX)*i)/y),a!=0&&m!=0&&(m=(m+(s.ascaleY-m+this.data.offsetScaleY)*a)/m);var g=f.ashearY;if(o!=0){var d=s.ashearY-g+this.data.offsetShearY;d-=(16384-(16384.499999999996-d/360|0))*360,g+=d*o}f.updateWorldTransformWith(p,v,h,y,m,f.ashearX,g)}},t.prototype.applyRelativeLocal=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=this.target,c=this.bones,l=0,u=c.length;l<u;l++){var f=c[l],h=f.arotation+(s.arotation+this.data.offsetRotation)*e,d=f.ax+(s.ax+this.data.offsetX)*r,p=f.ay+(s.ay+this.data.offsetY)*n,v=f.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*i+1),y=f.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*a+1),m=f.ashearY+(s.ashearY+this.data.offsetShearY)*o;f.updateWorldTransformWith(d,p,h,v,y,f.ashearX,m)}},t}(),W9=function(){function t(e){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var n=e.bones[r],i=void 0;if(!n.parent)i=new fC(n,this,null);else{var a=this.bones[n.parent.index];i=new fC(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<e.slots.length;r++){var o=e.slots[r],i=this.bones[o.boneData.index],s=new V9(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<e.ikConstraints.length;r++){var c=e.ikConstraints[r];this.ikConstraints.push(new j9(c,this))}this.transformConstraints=new Array;for(var r=0;r<e.transformConstraints.length;r++){var l=e.transformConstraints[r];this.transformConstraints.push(new G9(l,this))}this.pathConstraints=new Array;for(var r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new $9(u,this))}this.color=new Ne(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var e=this._updateCache;e.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin)for(var o=this.skin.bones,n=0,i=this.skin.bones.length;n<i;n++){var a=this.bones[o[n].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a)}var s=this.ikConstraints,c=this.transformConstraints,l=this.pathConstraints,u=s.length,f=c.length,h=l.length,d=u+f+h;e:for(var n=0;n<d;n++){for(var p=0;p<u;p++){var v=s[p];if(v.data.order==n){this.sortIkConstraint(v);continue e}}for(var p=0;p<f;p++){var v=c[p];if(v.data.order==n){this.sortTransformConstraint(v);continue e}}for(var p=0;p<h;p++){var v=l[p];if(v.data.order==n){this.sortPathConstraint(v);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},t.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&ue.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target;this.sortBone(r);var n=e.bones,i=n[0];if(this.sortBone(i),n.length==1)this._updateCache.push(e),this.sortReset(i.children);else{var a=n[n.length-1];this.sortBone(a),this._updateCache.push(e),this.sortReset(i.children),a.sorted=!0}}},t.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&ue.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target,n=r.data.index,i=r.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof Tp&&this.sortPathConstraintAttachmentWith(s,i);for(var c=e.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(e);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0}},t.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&ue.contains(this.skin.constraints,e.data,!0)),!!e.active){this.sortBone(e.target);var r=e.bones,n=r.length;if(e.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this.sortBone(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var i=0;i<n;i++)this.sortReset(r[i].children);for(var i=0;i<n;i++)r[i].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(e,r,n){var i=e.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},t.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof Tp){var n=e.bones;if(!n)this.sortBone(r);else for(var i=this.bones,a=0,o=n.length;a<o;){var s=n[a++];for(s+=a;a<s;)this.sortBone(i[n[a++]])}}},t.prototype.sortBone=function(e){if(e&&!e.sorted){var r=e.parent;r&&this.sortBone(r),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var r=0,n=e.length;r<n;r++){var i=e[r];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++){var i=e[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},t.prototype.updateWorldTransformWith=function(e){var r=this.getRootBone(),n=e.matrix.a,i=e.matrix.c,a=e.matrix.b,o=e.matrix.d;r.matrix.tx=n*this.x+i*this.y+e.worldX,r.matrix.ty=a*this.x+o*this.y+e.worldY;var s=r.rotation+90+r.shearY,c=K.cosDeg(r.rotation+r.shearX)*r.scaleX,l=K.cosDeg(s)*r.scaleY,u=K.sinDeg(r.rotation+r.shearX)*r.scaleX,f=K.sinDeg(s)*r.scaleY,h=this.scaleX,d=-this.scaleY;r.matrix.a=(n*c+i*u)*h,r.matrix.c=(n*l+i*f)*h,r.matrix.b=(a*c+o*u)*d,r.matrix.d=(a*l+o*f)*d;for(var p=this._updateCache,v=0,y=p.length;v<y;v++){var m=p[v];m!=r&&m.update()}},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++)e[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY,a.mixScaleX=s.mixScaleX,a.mixScaleY=s.mixScaleY,a.mixShearY=s.mixShearY}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;ue.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,n=e.length;r<n;r++)e[r].setToSetupPose()},t.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},t.prototype.findBone=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var r=this.data.findSkin(e);if(!r)throw new Error("Skin not found: "+e);this.setSkin(r)},t.prototype.setSkin=function(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o){var s=e.getAttachment(n,o);s&&a.setAttachment(s)}}this.skin=e,this.updateCache()}},t.prototype.getAttachmentByName=function(e,r){var n=this.data.findSlot(e);if(!n)throw new Error("Can't find slot with name "+e);return this.getAttachment(n.index,r)},t.prototype.getAttachment=function(e,r){if(!r)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(e,r);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,r):null},t.prototype.setAttachment=function(e,r){if(!e)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==e){var s=null;if(r&&(s=this.getAttachment(i,r),!s))throw new Error("Attachment not found: "+r+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.getBoundsRect=function(){var e=new yp,r=new yp;return this.getBounds(e,r),{x:e.x,y:e.y,width:r.x,height:r.y}},t.prototype.getBounds=function(e,r,n){if(n===void 0&&(n=new Array(2)),!e)throw new Error("offset cannot be null.");if(!r)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l];if(f.bone.active){var h=0,d=null,p=f.getAttachment();if(p instanceof dP)h=8,d=ue.setArraySize(n,h,0),p.computeWorldVertices(f,d,0,2);else if(p instanceof p_){var v=p;h=v.worldVerticesLength,d=ue.setArraySize(n,h,0),v.computeWorldVertices(f,0,h,d,0,2)}if(d)for(var y=0,m=d.length;y<m;y+=2){var g=d[y],x=d[y+1];a=Math.min(a,g),o=Math.min(o,x),s=Math.max(s,g),c=Math.max(c,x)}}}e.set(a,o),r.set(s-a,c-o)},Object.defineProperty(t.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),GP=function(){function t(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return t.prototype.findBone=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSlot=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSkin=function(e){if(!e)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findEvent=function(e){if(!e)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findAnimation=function(e){if(!e)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findIkConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraintIndex=function(e){if(e==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t}(),WP=function(){function t(e,r,n){if(this.index=0,this.color=new Ne(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ze.NORMAL,e<0)throw new Error("index must be >= 0.");if(!r)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}return t}(),zP=function(t){Ft(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.mixRotate=0,n.mixX=0,n.mixY=0,n.mixScaleX=0,n.mixScaleY=0,n.mixShearY=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return Object.defineProperty(e.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),e}(y_),hC=function(){function t(e,r,n){this.slotIndex=e,this.name=r,this.attachment=n}return t}(),Am=function(){function t(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}return t.prototype.setAttachment=function(e,r,n){if(!n)throw new Error("attachment cannot be null.");var i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][r]=n},t.prototype.addSkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];this.setAttachment(c.slotIndex,c.name,c.attachment)}},t.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];c.attachment&&(c.attachment instanceof p_?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},t.prototype.getAttachment=function(e,r){var n=this.attachments[e];return n?n[r]:null},t.prototype.removeAttachment=function(e,r){var n=this.attachments[e];n&&delete n[r]},t.prototype.getAttachments=function(){for(var e=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var i in n){var a=n[i];a&&e.push(new hC(r,i,a))}}return e},t.prototype.getAttachmentsForSlot=function(e,r){var n=this.attachments[e];if(n)for(var i in n){var a=n[i];a&&r.push(new hC(e,i,a))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(e,r){for(var n=0,i=0;i<e.slots.length;i++){var a=e.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u&&a.setAttachment(u);break}}}n++}},t}(),z9=function(){function t(e){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new GP;n.name="";var i=new xm(e),a=i.readInt32(),o=i.readInt32();n.hash=o==0&&a==0?null:o.toString(16)+a.toString(16),n.version=i.readString();var s=n.version.substr(0,3);if(s!=="4.0"&&s!=="4.1"){var c="Spine 4.1 loader cant load version "+n.version+". Please configure your pixi-spine bundle";console.error(c)}this.ver40=s==="4.0",n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();var l=i.readBoolean();l&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());var u=0;u=i.readInt(!0);for(var f=0;f<u;f++){var h=i.readString();if(!h)throw new Error("String in string table must not be null.");i.strings.push(h)}u=i.readInt(!0);for(var f=0;f<u;f++){var d=i.readString();if(!d)throw new Error("Bone name must not be null.");var p=f==0?null:n.bones[i.readInt(!0)],v=new NP(f,d,p);v.rotation=i.readFloat(),v.x=i.readFloat()*r,v.y=i.readFloat()*r,v.scaleX=i.readFloat(),v.scaleY=i.readFloat(),v.shearX=i.readFloat(),v.shearY=i.readFloat(),v.length=i.readFloat()*r,v.transformMode=i.readInt(!0),v.skinRequired=i.readBoolean(),l&&Ne.rgba8888ToColor(v.color,i.readInt32()),n.bones.push(v)}u=i.readInt(!0);for(var f=0;f<u;f++){var y=i.readString();if(!y)throw new Error("Slot name must not be null.");var m=n.bones[i.readInt(!0)],v=new WP(f,y,m);Ne.rgba8888ToColor(v.color,i.readInt32());var g=i.readInt32();g!=-1&&Ne.rgb888ToColor(v.darkColor=new Ne,g),v.attachmentName=i.readStringRef(),v.blendMode=i.readInt(!0),n.slots.push(v)}u=i.readInt(!0);for(var f=0,x=void 0;f<u;f++){var b=i.readString();if(!b)throw new Error("IK constraint data name must not be null.");var v=new $P(b);v.order=i.readInt(!0),v.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var S=0;S<x;S++)v.bones.push(n.bones[i.readInt(!0)]);v.target=n.bones[i.readInt(!0)],v.mix=i.readFloat(),v.softness=i.readFloat()*r,v.bendDirection=i.readByte(),v.compress=i.readBoolean(),v.stretch=i.readBoolean(),v.uniform=i.readBoolean(),n.ikConstraints.push(v)}u=i.readInt(!0);for(var f=0,x=void 0;f<u;f++){var w=i.readString();if(!w)throw new Error("Transform constraint data name must not be null.");var v=new zP(w);v.order=i.readInt(!0),v.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var S=0;S<x;S++)v.bones.push(n.bones[i.readInt(!0)]);v.target=n.bones[i.readInt(!0)],v.local=i.readBoolean(),v.relative=i.readBoolean(),v.offsetRotation=i.readFloat(),v.offsetX=i.readFloat()*r,v.offsetY=i.readFloat()*r,v.offsetScaleX=i.readFloat(),v.offsetScaleY=i.readFloat(),v.offsetShearY=i.readFloat(),v.mixRotate=i.readFloat(),v.mixX=i.readFloat(),v.mixY=i.readFloat(),v.mixScaleX=i.readFloat(),v.mixScaleY=i.readFloat(),v.mixShearY=i.readFloat(),n.transformConstraints.push(v)}u=i.readInt(!0);for(var f=0,x=void 0;f<u;f++){var A=i.readString();if(!A)throw new Error("Path constraint data name must not be null.");var v=new VP(A);v.order=i.readInt(!0),v.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var S=0;S<x;S++)v.bones.push(n.bones[i.readInt(!0)]);v.target=n.slots[i.readInt(!0)],v.positionMode=i.readInt(!0),v.spacingMode=i.readInt(!0),v.rotateMode=i.readInt(!0),v.offsetRotation=i.readFloat(),v.position=i.readFloat(),v.positionMode==Mr.Fixed&&(v.position*=r),v.spacing=i.readFloat(),(v.spacingMode==dn.Length||v.spacingMode==dn.Fixed)&&(v.spacing*=r),v.mixRotate=i.readFloat(),v.mixX=i.readFloat(),v.mixY=i.readFloat(),n.pathConstraints.push(v)}var C=this.readSkin(i,n,!0,l);C&&(n.defaultSkin=C,n.skins.push(C));{var f=n.skins.length;for(ue.setArraySize(n.skins,u=f+i.readInt(!0));f<u;f++){var O=this.readSkin(i,n,!1,l);if(!O)throw new Error("readSkin() should not have returned null.");n.skins[f]=O}}u=this.linkedMeshes.length;for(var f=0;f<u;f++){var P=this.linkedMeshes[f],O=P.skin?n.findSkin(P.skin):n.defaultSkin;if(!O)throw new Error("Not skin found for linked mesh.");if(!P.parent)throw new Error("Linked mesh parent must not be null");var I=O.getAttachment(P.slotIndex,P.parent);if(!I)throw new Error("Parent mesh not found: "+P.parent);P.mesh.timelineAttachment=P.inheritTimeline?I:P.mesh,P.mesh.setParentMesh(I)}this.linkedMeshes.length=0,u=i.readInt(!0);for(var f=0;f<u;f++){var R=i.readStringRef();if(!R)throw new Error;var v=new jP(R);v.intValue=i.readInt(!1),v.floatValue=i.readFloat(),v.stringValue=i.readString(),v.audioPath=i.readString(),v.audioPath&&(v.volume=i.readFloat(),v.balance=i.readFloat()),n.events.push(v)}u=i.readInt(!0);for(var f=0;f<u;f++){var F=i.readString();if(!F)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(i,F,n))}return n},t.prototype.readSkin=function(e,r,n,i){var a=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;a=new Am("default")}else{var s=e.readStringRef();if(!s)throw new Error("Skin name must not be null.");a=new Am(s),a.bones.length=e.readInt(!0);for(var c=0,l=a.bones.length;c<l;c++)a.bones[c]=r.bones[e.readInt(!0)];for(var c=0,l=e.readInt(!0);c<l;c++)a.constraints.push(r.ikConstraints[e.readInt(!0)]);for(var c=0,l=e.readInt(!0);c<l;c++)a.constraints.push(r.transformConstraints[e.readInt(!0)]);for(var c=0,l=e.readInt(!0);c<l;c++)a.constraints.push(r.pathConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(var c=0;c<o;c++)for(var u=e.readInt(!0),f=0,h=e.readInt(!0);f<h;f++){var d=e.readStringRef();if(!d)throw new Error("Attachment name must not be null");var p=this.readAttachment(e,r,a,u,d,i);p&&a.setAttachment(u,d,p)}return a},t.prototype.readAttachment=function(e,r,n,i,a,o){var s=this.scale,c=e.readStringRef();switch(c||(c=a),e.readByte()){case Ot.Region:{var l=e.readStringRef(),u=e.readFloat(),f=e.readFloat(),h=e.readFloat(),d=e.readFloat(),p=e.readFloat(),v=e.readFloat(),y=e.readFloat(),m=e.readInt32(),g=this.readSequence(e);l||(l=c);var x=this.attachmentLoader.newRegionAttachment(n,c,l,g);return x?(x.path=l,x.x=f*s,x.y=h*s,x.scaleX=d,x.scaleY=p,x.rotation=u,x.width=v*s,x.height=y*s,Ne.rgba8888ToColor(x.color,m),x.sequence=g,g==null&&x.updateRegion(),x):null}case Ot.BoundingBox:{var b=e.readInt(!0),S=this.readVertices(e,b),m=o?e.readInt32():0,w=this.attachmentLoader.newBoundingBoxAttachment(n,c);return w?(w.worldVerticesLength=b<<1,w.vertices=S.vertices,w.bones=S.bones,o&&Ne.rgba8888ToColor(w.color,m),w):null}case Ot.Mesh:{var l=e.readStringRef(),m=e.readInt32(),b=e.readInt(!0),A=this.readFloatArray(e,b<<1,1),C=this.readShortArray(e),S=this.readVertices(e,b),O=e.readInt(!0),g=this.readSequence(e),P=[],v=0,y=0;o&&(P=this.readShortArray(e),v=e.readFloat(),y=e.readFloat()),l||(l=c);var I=this.attachmentLoader.newMeshAttachment(n,c,l,g);return I?(I.path=l,Ne.rgba8888ToColor(I.color,m),I.bones=S.bones,I.vertices=S.vertices,I.worldVerticesLength=b<<1,I.triangles=C,I.regionUVs=new Float32Array(A),I.hullLength=O<<1,I.sequence=g,o&&(I.edges=P,I.width=v*s,I.height=y*s),I):null}case Ot.LinkedMesh:{var l=e.readStringRef(),m=e.readInt32(),R=e.readStringRef(),F=e.readStringRef(),D=e.readBoolean(),g=this.readSequence(e),v=0,y=0;o&&(v=e.readFloat(),y=e.readFloat()),l||(l=c);var I=this.attachmentLoader.newMeshAttachment(n,c,l,g);return I?(I.path=l,Ne.rgba8888ToColor(I.color,m),I.sequence=g,o&&(I.width=v*s,I.height=y*s),this.linkedMeshes.push(new GFe(I,R,i,F,D)),I):null}case Ot.Path:{for(var L=e.readBoolean(),U=e.readBoolean(),b=e.readInt(!0),S=this.readVertices(e,b),Y=ue.newArray(b/3,0),ee=0,J=Y.length;ee<J;ee++)Y[ee]=e.readFloat()*s;var m=o?e.readInt32():0,l=this.attachmentLoader.newPathAttachment(n,c);return l?(l.closed=L,l.constantSpeed=U,l.worldVerticesLength=b<<1,l.vertices=S.vertices,l.bones=S.bones,l.lengths=Y,o&&Ne.rgba8888ToColor(l.color,m),l):null}case Ot.Point:{var u=e.readFloat(),f=e.readFloat(),h=e.readFloat(),m=o?e.readInt32():0,X=this.attachmentLoader.newPointAttachment(n,c);return X?(X.x=f*s,X.y=h*s,X.rotation=u,o&&Ne.rgba8888ToColor(X.color,m),X):null}case Ot.Clipping:{var M=e.readInt(!0),b=e.readInt(!0),S=this.readVertices(e,b),m=o?e.readInt32():0,V=this.attachmentLoader.newClippingAttachment(n,c);return V?(V.endSlot=r.slots[M],V.worldVerticesLength=b<<1,V.vertices=S.vertices,V.bones=S.bones,o&&Ne.rgba8888ToColor(V.color,m),V):null}}return null},t.prototype.readSequence=function(e){if(this.ver40||!e.readBoolean())return null;var r=new pP(e.readInt(!0));return r.start=e.readInt(!0),r.digits=e.readInt(!0),r.setupIndex=e.readInt(!0),r},t.prototype.readDeformTimelineType=function(e){return this.ver40?u3:e.readByte()},t.prototype.readVertices=function(e,r){var n=this.scale,i=r<<1,a=new WFe;if(!e.readBoolean())return a.vertices=this.readFloatArray(e,i,n),a;for(var o=new Array,s=new Array,c=0;c<r;c++){var l=e.readInt(!0);s.push(l);for(var u=0;u<l;u++)s.push(e.readInt(!0)),o.push(e.readFloat()*n),o.push(e.readFloat()*n),o.push(e.readFloat())}return a.vertices=ue.toFloatArray(o),a.bones=s,a},t.prototype.readFloatArray=function(e,r,n){var i=new Array(r);if(n==1)for(var a=0;a<r;a++)i[a]=e.readFloat();else for(var a=0;a<r;a++)i[a]=e.readFloat()*n;return i},t.prototype.readShortArray=function(e){for(var r=e.readInt(!0),n=new Array(r),i=0;i<r;i++)n[i]=e.readShort();return n},t.prototype.readAnimation=function(e,r,n){e.readInt(!0);for(var i=new Array,a=this.scale,o=0,s=e.readInt(!0);o<s;o++)for(var c=e.readInt(!0),l=0,u=e.readInt(!0);l<u;l++){var f=e.readByte(),h=e.readInt(!0),d=h-1;switch(f){case tke:{for(var p=new wu(h,c),v=0;v<h;v++)p.setFrame(v,e.readFloat(),e.readStringRef());i.push(p);break}case rke:{for(var y=e.readInt(!0),p=new AP(h,y,c),m=e.readFloat(),g=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,S=e.readUnsignedByte()/255,v=0,w=0;p.setFrame(v,m,g,x,b,S),v!=d;v++){var A=e.readFloat(),C=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,P=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255;switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,g,C,1),jt(e,p,w++,v,1,m,A,x,O,1),jt(e,p,w++,v,2,m,A,b,P,1),jt(e,p,w++,v,3,m,A,S,I,1)}m=A,g=C,x=O,b=P,S=I}i.push(p);break}case nke:{for(var y=e.readInt(!0),p=new CP(h,y,c),m=e.readFloat(),g=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,v=0,w=0;p.setFrame(v,m,g,x,b),v!=d;v++){var A=e.readFloat(),C=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,P=e.readUnsignedByte()/255;switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,g,C,1),jt(e,p,w++,v,1,m,A,x,O,1),jt(e,p,w++,v,2,m,A,b,P,1)}m=A,g=C,x=O,b=P}i.push(p);break}case ike:{for(var y=e.readInt(!0),p=new OP(h,y,c),m=e.readFloat(),g=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,S=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,P=e.readUnsignedByte()/255,v=0,w=0;p.setFrame(v,m,g,x,b,S,C,O,P),v!=d;v++){var A=e.readFloat(),R=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,L=e.readUnsignedByte()/255,U=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,ee=e.readUnsignedByte()/255;switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,g,R,1),jt(e,p,w++,v,1,m,A,x,F,1),jt(e,p,w++,v,2,m,A,b,D,1),jt(e,p,w++,v,3,m,A,S,L,1),jt(e,p,w++,v,4,m,A,C,U,1),jt(e,p,w++,v,5,m,A,O,Y,1),jt(e,p,w++,v,6,m,A,P,ee,1)}m=A,g=R,x=F,b=D,S=L,C=U,O=Y,P=ee}i.push(p);break}case ake:{for(var y=e.readInt(!0),p=new PP(h,y,c),m=e.readFloat(),g=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,P=e.readUnsignedByte()/255,v=0,w=0;p.setFrame(v,m,g,x,b,C,O,P),v!=d;v++){var A=e.readFloat(),R=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,U=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,ee=e.readUnsignedByte()/255;switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,g,R,1),jt(e,p,w++,v,1,m,A,x,F,1),jt(e,p,w++,v,2,m,A,b,D,1),jt(e,p,w++,v,3,m,A,C,U,1),jt(e,p,w++,v,4,m,A,O,Y,1),jt(e,p,w++,v,5,m,A,P,ee,1)}m=A,g=R,x=F,b=D,C=U,O=Y,P=ee}i.push(p);break}case oke:{for(var p=new TP(h,e.readInt(!0),c),m=e.readFloat(),S=e.readUnsignedByte()/255,v=0,w=0;p.setFrame(v,m,S),v!=d;v++){var A=e.readFloat(),I=e.readUnsignedByte()/255;switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,S,I,1)}m=A,S=I}i.push(p)}}}for(var o=0,s=e.readInt(!0);o<s;o++)for(var J=e.readInt(!0),l=0,u=e.readInt(!0);l<u;l++){var X=e.readByte(),h=e.readInt(!0),y=e.readInt(!0);switch(X){case zFe:i.push(ds(e,new Op(h,y,J),1));break;case HFe:i.push(HS(e,new gP(h,y,J),a));break;case XFe:i.push(ds(e,new mP(h,y,J),a));break;case YFe:i.push(ds(e,new yP(h,y,J),a));break;case qFe:i.push(HS(e,new _P(h,y,J),1));break;case KFe:i.push(ds(e,new xP(h,y,J),1));break;case ZFe:i.push(ds(e,new bP(h,y,J),1));break;case QFe:i.push(HS(e,new SP(h,y,J),1));break;case JFe:i.push(ds(e,new EP(h,y,J),1));break;case eke:i.push(ds(e,new wP(h,y,J),1))}}for(var o=0,s=e.readInt(!0);o<s;o++){for(var M=e.readInt(!0),h=e.readInt(!0),d=h-1,p=new IP(h,e.readInt(!0),M),m=e.readFloat(),V=e.readFloat(),$=e.readFloat()*a,v=0,w=0;p.setFrame(v,m,V,$,e.readByte(),e.readBoolean(),e.readBoolean()),v!=d;v++){var A=e.readFloat(),j=e.readFloat(),te=e.readFloat()*a;switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,V,j,1),jt(e,p,w++,v,1,m,A,$,te,a)}m=A,V=j,$=te}i.push(p)}for(var o=0,s=e.readInt(!0);o<s;o++){for(var M=e.readInt(!0),h=e.readInt(!0),d=h-1,p=new FP(h,e.readInt(!0),M),m=e.readFloat(),ie=e.readFloat(),de=e.readFloat(),he=e.readFloat(),Ee=e.readFloat(),Oe=e.readFloat(),ye=e.readFloat(),v=0,w=0;p.setFrame(v,m,ie,de,he,Ee,Oe,ye),v!=d;v++){var A=e.readFloat(),Ae=e.readFloat(),_e=e.readFloat(),we=e.readFloat(),$e=e.readFloat(),Xe=e.readFloat(),ke=e.readFloat();switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,ie,Ae,1),jt(e,p,w++,v,1,m,A,de,_e,1),jt(e,p,w++,v,2,m,A,he,we,1),jt(e,p,w++,v,3,m,A,Ee,$e,1),jt(e,p,w++,v,4,m,A,Oe,Xe,1),jt(e,p,w++,v,5,m,A,ye,ke,1)}m=A,ie=Ae,de=_e,he=we,Ee=$e,Oe=Xe,ye=ke}i.push(p)}for(var o=0,s=e.readInt(!0);o<s;o++)for(var M=e.readInt(!0),at=n.pathConstraints[M],l=0,u=e.readInt(!0);l<u;l++)switch(e.readByte()){case lke:i.push(ds(e,new kP(e.readInt(!0),e.readInt(!0),M),at.positionMode==Mr.Fixed?a:1));break;case uke:i.push(ds(e,new DP(e.readInt(!0),e.readInt(!0),M),at.spacingMode==dn.Length||at.spacingMode==dn.Fixed?a:1));break;case cke:for(var p=new MP(e.readInt(!0),e.readInt(!0),M),m=e.readFloat(),ie=e.readFloat(),de=e.readFloat(),he=e.readFloat(),v=0,w=0,d=p.getFrameCount()-1;p.setFrame(v,m,ie,de,he),v!=d;v++){var A=e.readFloat(),Ae=e.readFloat(),_e=e.readFloat(),we=e.readFloat();switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,ie,Ae,1),jt(e,p,w++,v,1,m,A,de,_e,1),jt(e,p,w++,v,2,m,A,he,we,1)}m=A,ie=Ae,de=_e,he=we}i.push(p)}for(var o=0,s=e.readInt(!0);o<s;o++)for(var vt=n.skins[e.readInt(!0)],l=0,u=e.readInt(!0);l<u;l++)for(var c=e.readInt(!0),gt=0,tt=e.readInt(!0);gt<tt;gt++){var ot=e.readStringRef();if(!ot)throw new Error("attachmentName must not be null.");var dt=vt.getAttachment(c,ot),f=this.readDeformTimelineType(e),h=e.readInt(!0),d=h-1;switch(f){case u3:{for(var Xt=dt,rr=Xt.bones,qt=Xt.vertices,Vt=rr?qt.length/3*2:qt.length,y=e.readInt(!0),p=new RP(h,y,c,Xt),m=e.readFloat(),v=0,w=0;;v++){var bt=void 0,or=e.readInt(!0);if(or==0)bt=rr?ue.newFloatArray(Vt):qt;else{bt=ue.newFloatArray(Vt);var ge=e.readInt(!0);if(or+=ge,a==1)for(var Se=ge;Se<or;Se++)bt[Se]=e.readFloat();else for(var Se=ge;Se<or;Se++)bt[Se]=e.readFloat()*a;if(!rr)for(var Se=0,Re=bt.length;Se<Re;Se++)bt[Se]+=qt[Se]}if(p.setFrame(v,m,bt),v==d)break;var A=e.readFloat();switch(e.readByte()){case to:p.setStepped(v);break;case ro:jt(e,p,w++,v,0,m,A,0,1,1)}m=A}i.push(p);break}case ske:{for(var p=new LP(h,c,dt),v=0;v<h;v++){var m=e.readFloat(),He=e.readInt32();p.setFrame(v,m,vP[He&15],He>>4,e.readFloat())}i.push(p);break}}}var je=e.readInt(!0);if(je>0){for(var p=new hf(je),rt=n.slots.length,o=0;o<je;o++){for(var m=e.readFloat(),er=e.readInt(!0),wr=ue.newArray(rt,0),l=rt-1;l>=0;l--)wr[l]=-1;for(var Rn=ue.newArray(rt-er,0),In=0,yr=0,l=0;l<er;l++){for(var c=e.readInt(!0);In!=c;)Rn[yr++]=In++;wr[In+e.readInt(!0)]=In++}for(;In<rt;)Rn[yr++]=In++;for(var l=rt-1;l>=0;l--)wr[l]==-1&&(wr[l]=Rn[--yr]);p.setFrame(o,m,wr)}i.push(p)}var Ji=e.readInt(!0);if(Ji>0){for(var p=new m_(Ji),o=0;o<Ji;o++){var m=e.readFloat(),ni=n.events[e.readInt(!0)],gn=new UP(m,ni);gn.intValue=e.readInt(!1),gn.floatValue=e.readFloat(),gn.stringValue=e.readBoolean()?e.readString():ni.stringValue,gn.data.audioPath&&(gn.volume=e.readFloat(),gn.balance=e.readFloat()),p.setFrame(o,gn)}i.push(p)}for(var ea=0,o=0,s=i.length;o<s;o++)ea=Math.max(ea,i[o].getDuration());return new v_(r,i,ea)},t.BlendModeValues=[ze.NORMAL,ze.ADD,ze.MULTIPLY,ze.SCREEN],t}(),GFe=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritTimeline=a}return t}(),WFe=function(){function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null),this.bones=e,this.vertices=r}return t}();function ds(t,e,r){for(var n=t.readFloat(),i=t.readFloat()*r,a=0,o=0,s=e.getFrameCount()-1;e.setFrame(a,n,i),a!=s;a++){var c=t.readFloat(),l=t.readFloat()*r;switch(t.readByte()){case to:e.setStepped(a);break;case ro:jt(t,e,o++,a,0,n,c,i,l,r)}n=c,i=l}return e}function HS(t,e,r){for(var n=t.readFloat(),i=t.readFloat()*r,a=t.readFloat()*r,o=0,s=0,c=e.getFrameCount()-1;e.setFrame(o,n,i,a),o!=c;o++){var l=t.readFloat(),u=t.readFloat()*r,f=t.readFloat()*r;switch(t.readByte()){case to:e.setStepped(o);break;case ro:jt(t,e,s++,o,0,n,l,i,u,r),jt(t,e,s++,o,1,n,l,a,f,r)}n=l,i=u,a=f}return e}function jt(t,e,r,n,i,a,o,s,c,l){e.setBezier(r,n,i,a,s,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,o,c)}var zFe=0,HFe=1,XFe=2,YFe=3,qFe=4,KFe=5,ZFe=6,QFe=7,JFe=8,eke=9,tke=0,rke=1,nke=2,ike=3,ake=4,oke=5,u3=0,ske=1,lke=0,uke=1,cke=2,to=1,ro=2,fke=function(t){Ft(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(zO),H9=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new GP,i=typeof e=="string"?JSON.parse(e):e,a=i.skeleton;if(a){n.hash=a.hash,n.version=a.spine;var o=n.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){var s="Spine 4.1 loader cant load version "+a.spine+". Please configure your pixi-spine bundle";console.error(s)}n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(i.bones)for(var c=0;c<i.bones.length;c++){var l=i.bones[c],u=null,f=pe(l,"parent",null);if(f!=null&&(u=n.findBone(f),u==null))throw new Error("Parent bone not found: "+f);var h=new NP(n.bones.length,l.name,u);h.length=pe(l,"length",0)*r,h.x=pe(l,"x",0)*r,h.y=pe(l,"y",0)*r,h.rotation=pe(l,"rotation",0),h.scaleX=pe(l,"scaleX",1),h.scaleY=pe(l,"scaleY",1),h.shearX=pe(l,"shearX",0),h.shearY=pe(l,"shearY",0),h.transformMode=ue.enumValue(mt,pe(l,"transform","Normal")),h.skinRequired=pe(l,"skin",!1);var d=pe(l,"color",null);d&&h.color.setFromString(d),n.bones.push(h)}if(i.slots)for(var c=0;c<i.slots.length;c++){var p=i.slots[c],v=n.findBone(p.bone);if(!v)throw new Error("Couldn't find bone "+p.bone+" for slot "+p.name);var h=new WP(n.slots.length,p.name,v),d=pe(p,"color",null);d&&h.color.setFromString(d);var y=pe(p,"dark",null);y&&(h.darkColor=Ne.fromString(y)),h.attachmentName=pe(p,"attachment",null),h.blendMode=t.blendModeFromString(pe(p,"blend","normal")),n.slots.push(h)}if(i.ik)for(var c=0;c<i.ik.length;c++){var m=i.ik[c],h=new $P(m.name);h.order=pe(m,"order",0),h.skinRequired=pe(m,"skin",!1);for(var g=0;g<m.bones.length;g++){var x=m.bones[g],b=n.findBone(x);if(b==null)throw new Error("IK bone not found: "+x);h.bones.push(b)}h.target=n.findBone(m.target),h.mix=pe(m,"mix",1),h.softness=pe(m,"softness",0)*r,h.bendDirection=pe(m,"bendPositive",!0)?1:-1,h.compress=pe(m,"compress",!1),h.stretch=pe(m,"stretch",!1),h.uniform=pe(m,"uniform",!1),n.ikConstraints.push(h)}if(i.transform)for(var c=0;c<i.transform.length;c++){var m=i.transform[c],h=new zP(m.name);h.order=pe(m,"order",0),h.skinRequired=pe(m,"skin",!1);for(var g=0;g<m.bones.length;g++){var x=m.bones[g],b=n.findBone(x);if(!b)throw new Error("Couldn't find bone "+x+" for transform constraint "+m.name+".");h.bones.push(b)}var S=m.target,w=n.findBone(S);if(!w)throw new Error("Couldn't find target bone "+S+" for transform constraint "+m.name+".");h.target=w,h.local=pe(m,"local",!1),h.relative=pe(m,"relative",!1),h.offsetRotation=pe(m,"rotation",0),h.offsetX=pe(m,"x",0)*r,h.offsetY=pe(m,"y",0)*r,h.offsetScaleX=pe(m,"scaleX",0),h.offsetScaleY=pe(m,"scaleY",0),h.offsetShearY=pe(m,"shearY",0),h.mixRotate=pe(m,"mixRotate",1),h.mixX=pe(m,"mixX",1),h.mixY=pe(m,"mixY",h.mixX),h.mixScaleX=pe(m,"mixScaleX",1),h.mixScaleY=pe(m,"mixScaleY",h.mixScaleX),h.mixShearY=pe(m,"mixShearY",1),n.transformConstraints.push(h)}if(i.path)for(var c=0;c<i.path.length;c++){var m=i.path[c],h=new VP(m.name);h.order=pe(m,"order",0),h.skinRequired=pe(m,"skin",!1);for(var g=0;g<m.bones.length;g++){var x=m.bones[g],b=n.findBone(x);if(!b)throw new Error("Couldn't find bone "+x+" for path constraint "+m.name+".");h.bones.push(b)}var S=m.target,w=n.findSlot(S);if(!w)throw new Error("Couldn't find target slot "+S+" for path constraint "+m.name+".");h.target=w,h.positionMode=ue.enumValue(Mr,pe(m,"positionMode","Percent")),h.spacingMode=ue.enumValue(dn,pe(m,"spacingMode","Length")),h.rotateMode=ue.enumValue(Zr,pe(m,"rotateMode","Tangent")),h.offsetRotation=pe(m,"rotation",0),h.position=pe(m,"position",0),h.positionMode==Mr.Fixed&&(h.position*=r),h.spacing=pe(m,"spacing",0),(h.spacingMode==dn.Length||h.spacingMode==dn.Fixed)&&(h.spacing*=r),h.mixRotate=pe(m,"mixRotate",1),h.mixX=pe(m,"mixX",1),h.mixY=pe(m,"mixY",h.mixX),n.pathConstraints.push(h)}if(i.skins)for(var c=0;c<i.skins.length;c++){var A=i.skins[c],C=new Am(A.name);if(A.bones)for(var g=0;g<A.bones.length;g++){var x=A.bones[g],b=n.findBone(x);if(!b)throw new Error("Couldn't find bone "+x+" for skin "+A.name+".");C.bones.push(b)}if(A.ik)for(var g=0;g<A.ik.length;g++){var O=A.ik[g],P=n.findIkConstraint(O);if(!P)throw new Error("Couldn't find IK constraint "+O+" for skin "+A.name+".");C.constraints.push(P)}if(A.transform)for(var g=0;g<A.transform.length;g++){var O=A.transform[g],P=n.findTransformConstraint(O);if(!P)throw new Error("Couldn't find transform constraint "+O+" for skin "+A.name+".");C.constraints.push(P)}if(A.path)for(var g=0;g<A.path.length;g++){var O=A.path[g],P=n.findPathConstraint(O);if(!P)throw new Error("Couldn't find path constraint "+O+" for skin "+A.name+".");C.constraints.push(P)}for(var I in A.attachments){var R=n.findSlot(I);if(!R)throw new Error("Couldn't find slot "+I+" for skin "+A.name+".");var p=A.attachments[I];for(var F in p){var D=this.readAttachment(p[F],C,R.index,F,n);D&&C.setAttachment(R.index,F,D)}}n.skins.push(C),C.name=="default"&&(n.defaultSkin=C)}for(var c=0,L=this.linkedMeshes.length;c<L;c++){var U=this.linkedMeshes[c],C=U.skin?n.findSkin(U.skin):n.defaultSkin;if(!C)throw new Error("Skin not found: "+U.skin);var Y=C.getAttachment(U.slotIndex,U.parent);if(!Y)throw new Error("Parent mesh not found: "+U.parent);U.mesh.timelineAttachment=U.inheritTimeline?Y:U.mesh,U.mesh.setParentMesh(Y)}if(this.linkedMeshes.length=0,i.events)for(var ee in i.events){var J=i.events[ee],h=new jP(ee);h.intValue=pe(J,"int",0),h.floatValue=pe(J,"float",0),h.stringValue=pe(J,"string",""),h.audioPath=pe(J,"audio",null),h.audioPath&&(h.volume=pe(J,"volume",1),h.balance=pe(J,"balance",0)),n.events.push(h)}if(i.animations)for(var X in i.animations){var M=i.animations[X];this.readAnimation(M,X,n)}return n},t.prototype.readAttachment=function(e,r,n,i,a){var o=this.scale;switch(i=pe(e,"name",i),pe(e,"type","region")){case"region":{var s=pe(e,"path",i),c=this.readSequence(pe(e,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(r,i,s,c);if(!l)return null;l.path=s,l.x=pe(e,"x",0)*o,l.y=pe(e,"y",0)*o,l.scaleX=pe(e,"scaleX",1),l.scaleY=pe(e,"scaleY",1),l.rotation=pe(e,"rotation",0),l.width=e.width*o,l.height=e.height*o,l.sequence=c;var u=pe(e,"color",null);return u&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(!f)return null;this.readVertices(e,f,e.vertexCount<<1);var u=pe(e,"color",null);return u&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var s=pe(e,"path",i),c=this.readSequence(pe(e,"sequence",null)),h=this.attachmentLoader.newMeshAttachment(r,i,s,c);if(!h)return null;h.path=s;var u=pe(e,"color",null);u&&h.color.setFromString(u),h.width=pe(e,"width",0)*o,h.height=pe(e,"height",0)*o,h.sequence=c;var d=pe(e,"parent",null);if(d)return this.linkedMeshes.push(new hke(h,pe(e,"skin",null),n,d,pe(e,"timelines",!0))),h;var p=e.uvs;return this.readVertices(e,h,p.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(p),h.edges=pe(e,"edges",null),h.hullLength=pe(e,"hull",0)*2,h}case"path":{var s=this.attachmentLoader.newPathAttachment(r,i);if(!s)return null;s.closed=pe(e,"closed",!1),s.constantSpeed=pe(e,"constantSpeed",!0);var v=e.vertexCount;this.readVertices(e,s,v<<1);for(var y=ue.newArray(v/3,0),m=0;m<e.lengths.length;m++)y[m]=e.lengths[m]*o;s.lengths=y;var u=pe(e,"color",null);return u&&s.color.setFromString(u),s}case"point":{var g=this.attachmentLoader.newPointAttachment(r,i);if(!g)return null;g.x=pe(e,"x",0)*o,g.y=pe(e,"y",0)*o,g.rotation=pe(e,"rotation",0);var u=pe(e,"color",null);return u&&g.color.setFromString(u),g}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(r,i);if(!x)return null;var b=pe(e,"end",null);if(b!=null){var S=a.findSlot(b);if(S==null)throw new Error("Clipping end slot not found: "+b);x.endSlot=S}var v=e.vertexCount;this.readVertices(e,x,v<<1);var u=pe(e,"color",null);return u&&x.color.setFromString(u),x}}return null},t.prototype.readSequence=function(e){if(e==null)return null;var r=new pP(pe(e,"count",0));return r.start=pe(e,"start",1),r.digits=pe(e,"digits",0),r.setupIndex=pe(e,"setup",0),r},t.prototype.readVertices=function(e,r,n){var i=this.scale;r.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=ue.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=ue.toFloatArray(l)},t.prototype.readAnimation=function(e,r,n){var i=this.scale,a=new Array;if(e.slots)for(var o in e.slots){var s=e.slots[o],c=n.findSlot(o);if(!c)throw new Error("Slot not found: "+o);var l=c.index;for(var u in s){var f=s[u];if(f){var h=f.length;if(u=="attachment"){for(var d=new wu(h,l),p=0;p<h;p++){var v=f[p];d.setFrame(p,pe(v,"time",0),pe(v,"name",null))}a.push(d)}else if(u=="rgba"){for(var d=new AP(h,h<<2,l),v=f[0],y=pe(v,"time",0),m=Ne.fromString(v.color),p=0,g=0;;p++){d.setFrame(p,y,m.r,m.g,m.b,m.a);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),S=Ne.fromString(x.color),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,m.r,S.r,1),g=Wt(w,d,g,p,1,y,b,m.g,S.g,1),g=Wt(w,d,g,p,2,y,b,m.b,S.b,1),g=Wt(w,d,g,p,3,y,b,m.a,S.a,1)),y=b,m=S,v=x}a.push(d)}else if(u=="rgb"){for(var d=new CP(h,h*3,l),v=f[0],y=pe(v,"time",0),m=Ne.fromString(v.color),p=0,g=0;;p++){d.setFrame(p,y,m.r,m.g,m.b);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),S=Ne.fromString(x.color),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,m.r,S.r,1),g=Wt(w,d,g,p,1,y,b,m.g,S.g,1),g=Wt(w,d,g,p,2,y,b,m.b,S.b,1)),y=b,m=S,v=x}a.push(d)}else if(u=="alpha")a.push(Co(f,new TP(h,h,l),0,1));else if(u=="rgba2"){for(var d=new OP(h,h*7,l),v=f[0],y=pe(v,"time",0),m=Ne.fromString(v.light),A=Ne.fromString(v.dark),p=0,g=0;;p++){d.setFrame(p,y,m.r,m.g,m.b,m.a,A.r,A.g,A.b);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),S=Ne.fromString(x.light),C=Ne.fromString(x.dark),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,m.r,S.r,1),g=Wt(w,d,g,p,1,y,b,m.g,S.g,1),g=Wt(w,d,g,p,2,y,b,m.b,S.b,1),g=Wt(w,d,g,p,3,y,b,m.a,S.a,1),g=Wt(w,d,g,p,4,y,b,A.r,C.r,1),g=Wt(w,d,g,p,5,y,b,A.g,C.g,1),g=Wt(w,d,g,p,6,y,b,A.b,C.b,1)),y=b,m=S,A=C,v=x}a.push(d)}else if(u=="rgb2"){for(var d=new PP(h,h*6,l),v=f[0],y=pe(v,"time",0),m=Ne.fromString(v.light),A=Ne.fromString(v.dark),p=0,g=0;;p++){d.setFrame(p,y,m.r,m.g,m.b,A.r,A.g,A.b);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),S=Ne.fromString(x.light),C=Ne.fromString(x.dark),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,m.r,S.r,1),g=Wt(w,d,g,p,1,y,b,m.g,S.g,1),g=Wt(w,d,g,p,2,y,b,m.b,S.b,1),g=Wt(w,d,g,p,3,y,b,A.r,C.r,1),g=Wt(w,d,g,p,4,y,b,A.g,C.g,1),g=Wt(w,d,g,p,5,y,b,A.b,C.b,1)),y=b,m=S,A=C,v=x}a.push(d)}}}}if(e.bones)for(var O in e.bones){var P=e.bones[O],I=n.findBone(O);if(!I)throw new Error("Bone not found: "+O);var R=I.index;for(var u in P){var f=P[u],F=f.length;if(F!=0){if(u==="rotate")a.push(Co(f,new Op(F,F,R),0,1));else if(u==="translate"){var d=new gP(F,F<<1,R);a.push(XS(f,d,"x","y",0,i))}else if(u==="translatex"){var d=new mP(F,F,R);a.push(Co(f,d,0,i))}else if(u==="translatey"){var d=new yP(F,F,R);a.push(Co(f,d,0,i))}else if(u==="scale"){var d=new _P(F,F<<1,R);a.push(XS(f,d,"x","y",1,1))}else if(u==="scalex"){var d=new xP(F,F,R);a.push(Co(f,d,1,1))}else if(u==="scaley"){var d=new bP(F,F,R);a.push(Co(f,d,1,1))}else if(u==="shear"){var d=new SP(F,F<<1,R);a.push(XS(f,d,"x","y",0,1))}else if(u==="shearx"){var d=new EP(F,F,R);a.push(Co(f,d,0,1))}else if(u==="sheary"){var d=new wP(F,F,R);a.push(Co(f,d,0,1))}}}}if(e.ik)for(var D in e.ik){var L=e.ik[D],v=L[0];if(v){var U=n.findIkConstraint(D);if(!U)throw new Error("IK Constraint not found: "+D);for(var Y=n.ikConstraints.indexOf(U),d=new IP(L.length,L.length<<1,Y),y=pe(v,"time",0),ee=pe(v,"mix",1),J=pe(v,"softness",0)*i,p=0,g=0;;p++){d.setFrame(p,y,ee,J,pe(v,"bendPositive",!0)?1:-1,pe(v,"compress",!1),pe(v,"stretch",!1));var x=L[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),X=pe(x,"mix",1),M=pe(x,"softness",0)*i,w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,ee,X,1),g=Wt(w,d,g,p,1,y,b,J,M,i)),y=b,ee=X,J=M,v=x}a.push(d)}}if(e.transform)for(var D in e.transform){var f=e.transform[D],v=f[0];if(v){var U=n.findTransformConstraint(D);if(!U)throw new Error("Transform constraint not found: "+D);for(var Y=n.transformConstraints.indexOf(U),d=new FP(f.length,f.length*6,Y),y=pe(v,"time",0),V=pe(v,"mixRotate",1),$=pe(v,"mixX",1),j=pe(v,"mixY",$),te=pe(v,"mixScaleX",1),ie=pe(v,"mixScaleY",te),de=pe(v,"mixShearY",1),p=0,g=0;;p++){d.setFrame(p,y,V,$,j,te,ie,de);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),he=pe(x,"mixRotate",1),Ee=pe(x,"mixX",1),Oe=pe(x,"mixY",Ee),ye=pe(x,"mixScaleX",1),Ae=pe(x,"mixScaleY",ye),_e=pe(x,"mixShearY",1),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,V,he,1),g=Wt(w,d,g,p,1,y,b,$,Ee,1),g=Wt(w,d,g,p,2,y,b,j,Oe,1),g=Wt(w,d,g,p,3,y,b,te,ye,1),g=Wt(w,d,g,p,4,y,b,ie,Ae,1),g=Wt(w,d,g,p,5,y,b,de,_e,1)),y=b,V=he,$=Ee,j=Oe,te=ye,ie=Ae,te=ye,v=x}a.push(d)}}if(e.path)for(var D in e.path){var L=e.path[D],U=n.findPathConstraint(D);if(!U)throw new Error("Path constraint not found: "+D);var Y=n.pathConstraints.indexOf(U);for(var u in L){var f=L[u],v=f[0];if(v){var we=f.length;if(u==="position"){var d=new kP(we,we,Y);a.push(Co(f,d,0,U.positionMode==Mr.Fixed?i:1))}else if(u==="spacing"){var d=new DP(we,we,Y);a.push(Co(f,d,0,U.spacingMode==dn.Length||U.spacingMode==dn.Fixed?i:1))}else if(u==="mix"){for(var d=new MP(we,we*3,Y),y=pe(v,"time",0),V=pe(v,"mixRotate",1),$=pe(v,"mixX",1),j=pe(v,"mixY",$),p=0,g=0;;p++){d.setFrame(p,y,V,$,j);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),he=pe(x,"mixRotate",1),Ee=pe(x,"mixX",1),Oe=pe(x,"mixY",Ee),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,V,he,1),g=Wt(w,d,g,p,1,y,b,$,Ee,1),g=Wt(w,d,g,p,2,y,b,j,Oe,1)),y=b,V=he,$=Ee,j=Oe,v=x}a.push(d)}}}}if(e.deform){e.attachments={};for(var $e in e.deform){var Xe=e.deform[$e],ke=e.attachments[$e]={};for(var o in Xe){var s=Xe[o],at=ke[o]={};for(var vt in s)at[vt]={deform:s[vt]}}}}if(e.attachments)for(var gt in e.attachments){var tt=e.attachments[gt],ot=n.findSkin(gt);if(ot!=null)for(var dt in tt){var s=tt[dt],c=n.findSlot(dt);if(!c)throw new Error("Slot not found: "+dt);var l=c.index;for(var Xt in s){var rr=s[Xt],qt=ot.getAttachment(l,Xt);for(var Vt in rr){var f=rr[Vt],v=f[0];if(v){if(Vt=="deform"){for(var bt=qt.bones,or=qt.vertices,ge=bt?or.length/3*2:or.length,d=new RP(f.length,f.length,l,qt),y=pe(v,"time",0),p=0,g=0;;p++){var Se=void 0,Re=pe(v,"vertices",null);if(!Re)Se=bt?ue.newFloatArray(ge):or;else{Se=ue.newFloatArray(ge);var He=pe(v,"offset",0);if(ue.arrayCopy(Re,0,Se,He,Re.length),i!=1)for(var je=He,rt=je+Re.length;je<rt;je++)Se[je]*=i;if(!bt)for(var je=0;je<ge;je++)Se[je]+=or[je]}d.setFrame(p,y,Se);var x=f[p+1];if(!x){d.shrink(g);break}var b=pe(x,"time",0),w=v.curve;w&&(g=Wt(w,d,g,p,0,y,b,0,1,1)),y=b,v=x}a.push(d)}else if(Vt=="sequence"){for(var d=new LP(f.length,l,qt),er=0,p=0;p<f.length;p++){var wr=pe(v,"delay",er),y=pe(v,"time",0),Rn=Un[pe(v,"mode","hold")],In=pe(v,"index",0);d.setFrame(p,y,Rn,In,wr),er=wr,v=f[p+1]}a.push(d)}}}}}}if(e.drawOrder){for(var d=new hf(e.drawOrder.length),yr=n.slots.length,p=0,je=0;je<e.drawOrder.length;je++,p++){var Ji=e.drawOrder[je],ni=null,gn=pe(Ji,"offsets",null);if(gn){ni=ue.newArray(yr,-1);for(var ea=ue.newArray(yr-gn.length,0),xa=0,xo=0,yi=0;yi<gn.length;yi++){var Is=gn[yi],c=n.findSlot(Is.slot);if(!c)throw new Error("Slot not found: "+c);for(var l=c.index;xa!=l;)ea[xo++]=xa++;ni[xa+Is.offset]=xa++}for(;xa<yr;)ea[xo++]=xa++;for(var yi=yr-1;yi>=0;yi--)ni[yi]==-1&&(ni[yi]=ea[--xo])}d.setFrame(p,pe(Ji,"time",0),ni)}a.push(d)}if(e.events){for(var d=new m_(e.events.length),p=0,je=0;je<e.events.length;je++,p++){var _i=e.events[je],Ga=n.findEvent(_i.name);if(!Ga)throw new Error("Event not found: "+_i.name);var ii=new UP(ue.toSinglePrecision(pe(_i,"time",0)),Ga);ii.intValue=pe(_i,"int",Ga.intValue),ii.floatValue=pe(_i,"float",Ga.floatValue),ii.stringValue=pe(_i,"string",Ga.stringValue),ii.data.audioPath&&(ii.volume=pe(_i,"volume",1),ii.balance=pe(_i,"balance",0)),d.setFrame(p,ii)}a.push(d)}for(var Hr=0,je=0,rt=a.length;je<rt;je++)Hr=Math.max(Hr,a[je].getDuration());if(isNaN(Hr))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new v_(r,a,Hr))},t.blendModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return ze.NORMAL;if(e=="additive")return ze.ADD;if(e=="multiply")return ze.MULTIPLY;if(e=="screen")return ze.SCREEN;throw new Error("Unknown blend mode: "+e)},t}(),hke=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritTimeline=a}return t}();function Co(t,e,r,n){for(var i=t[0],a=pe(i,"time",0),o=pe(i,"value",r)*n,s=0,c=0;;c++){e.setFrame(c,a,o);var l=t[c+1];if(!l)return e.shrink(s),e;var u=pe(l,"time",0),f=pe(l,"value",r)*n;i.curve&&(s=Wt(i.curve,e,s,c,0,a,u,o,f,n)),a=u,o=f,i=l}}function XS(t,e,r,n,i,a){for(var o=t[0],s=pe(o,"time",0),c=pe(o,r,i)*a,l=pe(o,n,i)*a,u=0,f=0;;f++){e.setFrame(f,s,c,l);var h=t[f+1];if(!h)return e.shrink(u),e;var d=pe(h,"time",0),p=pe(h,r,i)*a,v=pe(h,n,i)*a,y=o.curve;y&&(u=Wt(y,e,u,f,0,s,d,c,p,a),u=Wt(y,e,u,f,1,s,d,l,v,a)),s=d,c=p,l=v,o=h}}function Wt(t,e,r,n,i,a,o,s,c,l){if(t=="stepped")return e.setStepped(n),r;var u=i<<2,f=t[u],h=t[u+1]*l,d=t[u+2],p=t[u+3]*l;return e.setBezier(r,n,i,a,s,f,h,d,p,o,c),r+1}function pe(t,e,r){return t[e]!==void 0?t[e]:r}var dke=function(t){Ft(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){this.skeleton=new W9(r),this.skeleton.updateWorldTransform(),this.stateData=new U9(r),this.state=new L9(this.stateData)},e}(Qp);const pke=Object.freeze(Object.defineProperty({__proto__:null,AlphaTimeline:TP,Animation:v_,AnimationState:L9,AnimationStateAdapter:jFe,AnimationStateData:U9,AtlasAttachmentLoader:BP,Attachment:hP,AttachmentTimeline:wu,Bone:fC,BoneData:NP,BoundingBoxAttachment:k9,ClippingAttachment:D9,ConstraintData:y_,CurveTimeline:go,CurveTimeline1:mo,CurveTimeline2:g_,DeformTimeline:RP,DrawOrderTimeline:hf,Event:UP,EventData:jP,EventQueue:N9,EventTimeline:m_,get EventType(){return Ti},IkConstraint:j9,IkConstraintData:$P,IkConstraintTimeline:IP,MeshAttachment:p_,PathAttachment:Tp,PathConstraint:$9,PathConstraintData:VP,PathConstraintMixTimeline:MP,PathConstraintPositionTimeline:kP,PathConstraintSpacingTimeline:DP,PointAttachment:M9,RGB2Timeline:PP,RGBA2Timeline:OP,RGBATimeline:AP,RGBTimeline:CP,RegionAttachment:dP,RotateTimeline:Op,ScaleTimeline:_P,ScaleXTimeline:xP,ScaleYTimeline:bP,Sequence:pP,get SequenceMode(){return Un},SequenceModeValues:vP,SequenceTimeline:LP,ShearTimeline:SP,ShearXTimeline:EP,ShearYTimeline:wP,Skeleton:W9,SkeletonBinary:z9,SkeletonBounds:fke,SkeletonData:GP,SkeletonJson:H9,Skin:Am,SkinEntry:hC,Slot:V9,SlotData:WP,get SpacingMode(){return dn},Spine:dke,Timeline:Jr,TrackEntry:B9,TransformConstraint:G9,TransformConstraintData:zP,TransformConstraintTimeline:FP,TranslateTimeline:gP,TranslateXTimeline:mP,TranslateYTimeline:yP,VertexAttachment:zo},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dC=function(t,e){return dC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},dC(t,e)};function X9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dC(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pn;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VER37=37]="VER37",t[t.VER38=38]="VER38",t[t.VER40=40]="VER40",t[t.VER41=41]="VER41"})(pn||(pn={}));function Cm(t){var e=t.substr(0,3),r=Math.floor(+e*10+.001);return e==="3.7"?pn.VER37:e==="3.8"?pn.VER38:e==="4.0"?pn.VER40:e==="4.1"?pn.VER41:r<pn.VER37?pn.VER37:pn.UNKNOWN}var vke=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(e,r){var n=null,i=this.readVersionOldFormat(r),a=Cm(i);if(a===pn.VER38&&(n=new i9(new JO(e))),i=this.readVersionNewFormat(r),a=Cm(i),(a===pn.VER40||a===pn.VER41)&&(n=new z9(new BP(e))),!n){var o="Unsupported version of spine model "+i+", please update pixi-spine";console.error(o)}return n.scale=this.scale,n.readSkeletonData(r)},t.prototype.readVersionOldFormat=function(e){var r=new xm(e),n;try{r.readString(),n=r.readString()}catch{n=""}return n||""},t.prototype.readVersionNewFormat=function(e){var r=new xm(e);r.readInt32(),r.readInt32();var n;try{n=r.readString()}catch{n=""}return n||""},t}(),gke=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(e,r){var n=r.skeleton.spine,i=Cm(n),a=null;if(i===pn.VER37&&(a=new F9(new y9(e))),i===pn.VER38&&(a=new a9(new JO(e))),(i===pn.VER40||i===pn.VER41)&&(a=new H9(new BP(e))),!a){var o="Unsupported version of spine model "+n+", please update pixi-spine";console.error(o)}return a.scale=this.scale,a.readSkeletonData(r)},t}(),mke=function(t){X9(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createBinaryParser=function(){return new vke},e.prototype.createJsonParser=function(){return new gke},e.prototype.parseData=function(r,n,i,a){var o=n;r.spineData=o.readSkeletonData(i,a),r.spineAtlas=i},e.registerLoaderPlugin=function(){$u.registerPlugin(e)},e.use=new e().genMiddleware().use,e}(SFe),yke=function(t){X9(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){var n=Cm(r.version),i=null;if(n===pn.VER37&&(i=UFe),n===pn.VER38&&(i=FFe),(n===pn.VER40||n===pn.VER41)&&(i=pke),!i){var a="Cant detect version of spine model "+r.version;console.error(a)}this.skeleton=new i.Skeleton(r),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(r),this.state=new i.AnimationState(this.stateData)},e}(Qp);mke.registerLoaderPlugin();const Tm={height:1440,width:2560};/*!
 * @pixi/gif - v1.1.3
 * https://github.com/pixijs/gif
 * Compiled Wed, 21 Sep 2022 20:13:39 UTC
 *
 * @pixi/gif is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */var pC=function(t,e){return pC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},pC(t,e)},vC=function(){return vC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vC.apply(this,arguments)},Iu={},Y9={},Es={};Object.defineProperty(Es,"__esModule",{value:!0}),Es.loop=Es.conditional=Es.parse=void 0;Es.parse=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;if(Array.isArray(r))r.forEach(function(o){return t(e,o,n,i)});else if(typeof r=="function")r(e,n,i,t);else{var a=Object.keys(r)[0];Array.isArray(r[a])?(i[a]={},t(e,r[a],n,i[a])):i[a]=r[a](e,n,i,t)}return n};Es.conditional=function(t,e){return function(r,n,i,a){e(r,n,i)&&a(r,t,n,i)}};Es.loop=function(t,e){return function(r,n,i,a){for(var o=[],s=r.pos;e(r,n,i);){var c={};if(a(r,t,n,c),r.pos===s)break;s=r.pos,o.push(c)}return o}};var an={};Object.defineProperty(an,"__esModule",{value:!0}),an.readBits=an.readArray=an.readUnsigned=an.readString=an.peekBytes=an.readBytes=an.peekByte=an.readByte=an.buildStream=void 0;an.buildStream=function(t){return{data:t,pos:0}};var _ke=function(){return function(t){return t.data[t.pos++]}};an.readByte=_ke;an.peekByte=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return function(e){return e.data[e.pos+t]}};var __=function(t){return function(e){return e.data.subarray(e.pos,e.pos+=t)}};an.readBytes=__;an.peekBytes=function(t){return function(e){return e.data.subarray(e.pos,e.pos+t)}};an.readString=function(t){return function(e){return Array.from(__(t)(e)).map(function(r){return String.fromCharCode(r)}).join("")}};an.readUnsigned=function(t){return function(e){var r=__(2)(e);return t?(r[1]<<8)+r[0]:(r[0]<<8)+r[1]}};an.readArray=function(t,e){return function(r,n,i){for(var a=typeof e=="function"?e(r,n,i):e,o=__(t),s=new Array(a),c=0;c<a;c++)s[c]=o(r);return s}};an.readBits=function(t){return function(e){for(var r=function(a){return a.data[a.pos++]}(e),n=new Array(8),i=0;i<8;i++)n[7-i]=!!(r&1<<i);return Object.keys(t).reduce(function(a,o){var s=t[o];return s.length?a[o]=function(c,l,u){for(var f=0,h=0;h<u;h++)f+=c[l+h]&&Math.pow(2,u-h-1);return f}(n,s.index,s.length):a[o]=n[s.index],a},{})}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=Es,r=an,n={blocks:function(u){for(var f=[],h=u.data.length,d=0,p=(0,r.readByte)()(u);p!==0&&p;p=(0,r.readByte)()(u)){if(u.pos+p>=h){var v=h-u.pos;f.push((0,r.readBytes)(v)(u)),d+=v;break}f.push((0,r.readBytes)(p)(u)),d+=p}for(var y=new Uint8Array(d),m=0,g=0;g<f.length;g++)y.set(f[g],m),m+=f[g].length;return y}},i=(0,e.conditional)({gce:[{codes:(0,r.readBytes)(2)},{byteSize:(0,r.readByte)()},{extras:(0,r.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,r.readUnsigned)(!0)},{transparentColorIndex:(0,r.readByte)()},{terminator:(0,r.readByte)()}]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===249}),a=(0,e.conditional)({image:[{code:(0,r.readByte)()},{descriptor:[{left:(0,r.readUnsigned)(!0)},{top:(0,r.readUnsigned)(!0)},{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{lct:(0,r.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,e.conditional)({lct:(0,r.readArray)(3,function(u,f,h){return Math.pow(2,h.descriptor.lct.size+1)})},function(u,f,h){return h.descriptor.lct.exists}),{data:[{minCodeSize:(0,r.readByte)()},n]}]},function(u){return(0,r.peekByte)()(u)===44}),o=(0,e.conditional)({text:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{preData:function(u,f,h){return(0,r.readBytes)(h.text.blockSize)(u)}},n]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===1}),s=(0,e.conditional)({application:[{codes:(0,r.readBytes)(2)},{blockSize:(0,r.readByte)()},{id:function(u,f,h){return(0,r.readString)(h.blockSize)(u)}},n]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===255}),c=(0,e.conditional)({comment:[{codes:(0,r.readBytes)(2)},n]},function(u){var f=(0,r.peekBytes)(2)(u);return f[0]===33&&f[1]===254}),l=[{header:[{signature:(0,r.readString)(3)},{version:(0,r.readString)(3)}]},{lsd:[{width:(0,r.readUnsigned)(!0)},{height:(0,r.readUnsigned)(!0)},{gct:(0,r.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,r.readByte)()},{pixelAspectRatio:(0,r.readByte)()}]},(0,e.conditional)({gct:(0,r.readArray)(3,function(u,f){return Math.pow(2,f.lsd.gct.size+1)})},function(u,f){return f.lsd.gct.exists}),{frames:(0,e.loop)([i,s,c,a,o],function(u){var f=(0,r.peekByte)()(u);return f===33||f===44})}];t.default=l}(Y9);var Om={};Object.defineProperty(Om,"__esModule",{value:!0}),Om.deinterlace=void 0;Om.deinterlace=function(t,e){for(var r=new Array(t.length),n=t.length/e,i=function(u,f){var h=t.slice(f*e,(f+1)*e);r.splice.apply(r,[u*e,e].concat(h))},a=[0,4,2,1],o=[8,8,4,2],s=0,c=0;c<4;c++)for(var l=a[c];l<n;l+=o[c])i(l,s),s++;return r};var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.lzw=void 0;Pm.lzw=function(t,e,r){var n,i,a,o,s,c,l,u,f,h,d,p,v,y,m,g,x=4096,b=r,S=new Array(r),w=new Array(x),A=new Array(x),C=new Array(4097);for(s=(i=1<<(h=t))+1,n=i+2,l=-1,a=(1<<(o=h+1))-1,u=0;u<i;u++)w[u]=0,A[u]=u;for(d=p=v=y=m=g=0,f=0;f<b;){if(y===0){if(p<o){d+=e[g]<<p,p+=8,g++;continue}if(u=d&a,d>>=o,p-=o,u>n||u==s)break;if(u==i){a=(1<<(o=h+1))-1,n=i+2,l=-1;continue}if(l==-1){C[y++]=A[u],l=u,v=u;continue}for(c=u,u==n&&(C[y++]=v,u=l);u>i;)C[y++]=A[u],u=w[u];v=255&A[u],C[y++]=v,n<x&&(w[n]=l,A[n]=v,!(++n&a)&&n<x&&(o++,a+=n)),l=c}y--,S[m++]=C[y],f++}for(f=m;f<b;f++)S[f]=0;return S},Object.defineProperty(Iu,"__esModule",{value:!0});var Nv,q9=Iu.decompressFrames=Iu.decompressFrame=K9=Iu.parseGIF=void 0,xke=(Nv=Y9)&&Nv.__esModule?Nv:{default:Nv},bke=Es,Ske=an,Eke=Om,wke=Pm,K9=Iu.parseGIF=function(t){var e=new Uint8Array(t);return(0,bke.parse)((0,Ske.buildStream)(e),xke.default)},Z9=function(t,e,r){if(t.image){var n=t.image,i=n.descriptor.width*n.descriptor.height,a=(0,wke.lzw)(n.data.minCodeSize,n.data.blocks,i);n.descriptor.lct.interlaced&&(a=(0,Eke.deinterlace)(a,n.descriptor.width));var o={pixels:a,dims:{top:t.image.descriptor.top,left:t.image.descriptor.left,width:t.image.descriptor.width,height:t.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?o.colorTable=n.lct:o.colorTable=e,t.gce&&(o.delay=10*(t.gce.delay||10),o.disposalType=t.gce.extras.disposal,t.gce.extras.transparentColorGiven&&(o.transparentIndex=t.gce.transparentColorIndex)),r&&(o.patch=function(s){for(var c=s.pixels.length,l=new Uint8ClampedArray(4*c),u=0;u<c;u++){var f=4*u,h=s.pixels[u],d=s.colorTable[h]||[0,0,0];l[f]=d[0],l[f+1]=d[1],l[f+2]=d[2],l[f+3]=h!==s.transparentIndex?255:0}return l}(o)),o}};Iu.decompressFrame=Z9;q9=Iu.decompressFrames=function(t,e){return t.frames.filter(function(r){return r.image}).map(function(r){return Z9(r,t.gct,e)})};var Ake=function(t){function e(r,n){var i=this,a=Object.assign({},e.defaultOptions,n),o=a.scaleMode,s=a.width,c=a.height,l=function(h,d){var p={};for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&d.indexOf(v)<0&&(p[v]=h[v]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var y=0;for(v=Object.getOwnPropertySymbols(h);y<v.length;y++)d.indexOf(v[y])<0&&Object.prototype.propertyIsEnumerable.call(h,v[y])&&(p[v[y]]=h[v[y]])}return p}(a,["scaleMode","width","height"]),u=document.createElement("canvas"),f=u.getContext("2d");return u.width=s,u.height=c,(i=t.call(this,pt.from(u,{scaleMode:o}))||this).duration=r[r.length-1].end,i._frames=r,i._context=f,i._playing=!1,i._currentTime=0,i._isConnectedToTicker=!1,Object.assign(i,l),i.currentFrame=0,i.autoPlay&&i.play(),i}return function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=r}pC(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(e,t),e.fromBuffer=function(r,n){if(!r||r.byteLength===0)throw new Error("Invalid buffer");var i=K9(r);(function(D){for(var L,U=null,Y=0,ee=D.frames;Y<ee.length;Y++){var J=ee[Y];U=(L=J.gce)!==null&&L!==void 0?L:U,"image"in J&&!("gce"in J)&&(J.gce=U)}})(i);var a=q9(i,!0),o=[],s=document.createElement("canvas"),c=s.getContext("2d"),l=document.createElement("canvas"),u=l.getContext("2d");s.width=i.lsd.width,s.height=i.lsd.height;for(var f=0,h=1e3/Object.assign({},e.defaultOptions,n).fps,d=0;d<a.length;d++){var p=a[d],v=p.disposalType,y=v===void 0?2:v,m=p.delay,g=m===void 0?h:m,x=p.patch,b=p.dims,S=b.width,w=b.height,A=b.left,C=b.top;l.width=S,l.height=w,u.clearRect(0,0,S,w);var O=u.createImageData(S,w);O.data.set(x),u.putImageData(O,0,0),c.drawImage(l,A,C);var P=c.getImageData(0,0,s.width,s.height);y!==2&&y!==3||c.clearRect(0,0,s.width,s.height),o.push({start:f,end:f+g,imageData:P}),f+=g}s.width=s.height=0,l.width=l.height=0;var I=i.lsd,R=I.width,F=I.height;return new e(o,vC({width:R,height:F},n))},e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&($r.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&($r.shared.add(this.update,this,ho.HIGH),this._isConnectedToTicker=!0),this.loop||this.currentFrame!==this._frames.length-1||(this._currentTime=0))},Object.defineProperty(e.prototype,"progress",{get:function(){return this._currentTime/this.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),e.prototype.update=function(r){var n,i;if(this._playing){var a=this.animationSpeed*r/Ve.TARGET_FPMS,o=this._currentTime+a,s=o%this.duration,c=this._frames.findIndex(function(l){return l.start<=s&&l.end>s});o>=this.duration?this.loop?(this._currentTime=s,this.updateFrameIndex(c),(n=this.onLoop)===null||n===void 0||n.call(this)):(this._currentTime=this.duration,this.updateFrameIndex(this._frames.length-1),(i=this.onComplete)===null||i===void 0||i.call(this),this.stop()):(this._currentTime=s,this.updateFrameIndex(c))}},e.prototype.updateFrame=function(){if(this.dirty){var r=this._frames[this._currentFrame].imageData;this._context.putImageData(r,0,0),this._context.fillStyle="transparent",this._context.fillRect(0,0,0,1),this.texture.update(),this.dirty=!1}},e.prototype._render=function(r){this.updateFrame(),t.prototype._render.call(this,r)},e.prototype._renderCanvas=function(r){this.updateFrame(),t.prototype._renderCanvas.call(this,r)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?($r.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&($r.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._currentFrame},set:function(r){this.updateFrameIndex(r),this._currentTime=this._frames[r].start},enumerable:!1,configurable:!0}),e.prototype.updateFrameIndex=function(r){var n;if(r<0||r>=this._frames.length)throw new Error("Frame index out of range, expecting 0 to ".concat(this.totalFrames,", got ").concat(r));this._currentFrame!==r&&(this._currentFrame=r,this.dirty=!0,(n=this.onFrameChange)===null||n===void 0||n.call(this,r))},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._frames.length},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this,!0),this._context=null,this._frames=null,this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.prototype.clone=function(){return new e(function(r,n,i){if(i||arguments.length===2)for(var a,o=0,s=n.length;o<s;o++)!a&&o in n||(a||(a=Array.prototype.slice.call(n,0,o)),a[o]=n[o]);return r.concat(a||Array.prototype.slice.call(n))}([],this._frames,!0),{autoUpdate:this._autoUpdate,loop:this.loop,autoPlay:this.autoPlay,scaleMode:this.texture.baseTexture.scaleMode,animationSpeed:this.animationSpeed,width:this._context.canvas.width,height:this._context.canvas.height,onComplete:this.onComplete,onFrameChange:this.onFrameChange,onLoop:this.onLoop})},e.defaultOptions={scaleMode:An.LINEAR,fps:$r.shared.FPS,loop:!0,animationSpeed:1,autoPlay:!0,autoUpdate:!0,onComplete:null,onFrameChange:null,onLoop:null},e}(ca);window.PIXI=tRe;class Cke{constructor(){qe(this,"currentApp",null);qe(this,"effectsContainer");qe(this,"frameDuration",16.67);qe(this,"notUpdateBacklogEffects",!1);qe(this,"figureContainer");qe(this,"figureObjects",[]);qe(this,"backgroundContainer");qe(this,"backgroundObjects",[]);qe(this,"stageAnimations",[]);qe(this,"assetLoader",new $u);qe(this,"loadQueue",[]);qe(this,"live2dFigureRecorder",[]);qe(this,"lockTransformTarget",[]);qe(this,"stageWidth",Tm.width);qe(this,"stageHeight",Tm.height);qe(this,"MAX_TEX_COUNT",10);const e=new WO({backgroundAlpha:0,preserveDrawingBuffer:!0});window.PIXIapp=this,window.__PIXI_APP__=e;const r=document.getElementById("pixiContianer");r&&(r.innerHTML="",r.appendChild(e.view)),e.renderer.view.style.position="absolute",e.renderer.view.style.display="block",e.renderer.view.id="pixiCanvas",e.renderer.autoResize=!0;const n=document.getElementById("root");n&&e.renderer.resize(n.clientWidth,n.clientHeight),HP&&(e.renderer.view.style.zIndex="-5"),e.stage.sortableChildren=!0,this.effectsContainer=new Cn,this.effectsContainer.zIndex=3,this.figureContainer=new Cn,this.figureContainer.zIndex=2,this.backgroundContainer=new Cn,this.backgroundContainer.zIndex=0,e.stage.addChild(this.effectsContainer,this.figureContainer,this.backgroundContainer),this.currentApp=e;const i=()=>{this.updateFps(),setTimeout(i,1e4)};i();const a=()=>{setTimeout(a,500),this.callLoader()};a()}getFigureObjects(){return this.figureObjects}getAllLockedObject(){return this.lockTransformTarget}registerAnimation(e,r,n="default"){var i;e&&(this.stageAnimations.push({uuid:Kh(),animationObject:e,key:r,targetKey:n,type:"common"}),this.lockStageObject(n),e.setStartState(),(i=this.currentApp)==null||i.ticker.add(e.tickerFunc))}registerPresetAnimation(e,r,n="default",i){var o;if(!e)return;const a=i.find(s=>s.target===n);if(a){const s=this.getStageObjByKey(n);if(s){const c=s.pixiContainer;Object.assign(c,a.transform)}return}this.stageAnimations.push({uuid:Kh(),animationObject:e,key:r,targetKey:n,type:"preset"}),this.lockStageObject(n),e.setStartState(),(o=this.currentApp)==null||o.ticker.add(e.tickerFunc)}stopPresetAnimationOnTarget(e){const r=this.stageAnimations.find(n=>n.targetKey===e&&n.type==="preset");r&&this.removeAnimation(r.key)}removeAnimation(e){var n;const r=this.stageAnimations.findIndex(i=>i.key===e);if(r>=0){const i=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(i.animationObject.tickerFunc),i.animationObject.setEndState(),this.unlockStageObject(i.targetKey??"default"),this.stageAnimations.splice(r,1)}}removeAnimationWithSetEffects(e){var n,i,a;const r=this.stageAnimations.findIndex(o=>o.key===e);if(r>=0){const o=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(o.animationObject.tickerFunc),o.animationObject.setEndState();const s=((a=(i=o.animationObject).getEndFilterEffect)==null?void 0:a.call(i))??{};if(this.unlockStageObject(o.targetKey??"default"),o.targetKey){const c=this.getStageObjByKey(o.targetKey);if(c){const l={alpha:c.pixiContainer.alpha,scale:{x:c.pixiContainer.scale.x,y:c.pixiContainer.scale.y},position:{x:c.pixiContainer.x,y:c.pixiContainer.y},rotation:c.pixiContainer.rotation,blur:c.pixiContainer.blur,...s};let u={target:o.targetKey,transform:l};le.dispatch(Wi.updateEffect(u))}}this.stageAnimations.splice(r,1)}}performMouthSyncAnimation(e,r,n,i){var s;const a=(s=this.getStageObjByKey(e))==null?void 0:s.pixiContainer;if(!a)return;const o={open:r.mouthAnimation.open,half_open:r.mouthAnimation.halfOpen,closed:r.mouthAnimation.close};this.loadAsset(o[n],()=>{const c=this.assetLoader.resources[o[n]].texture;if(!c)return;const l=c.width,u=c.height,f=this.stageWidth/l,h=this.stageHeight/u,d=Math.min(f,h),p=new ca(c);p.scale.x=d,p.scale.y=d,p.anchor.set(.5),p.position.y=this.stageHeight/2;const v=l*d,y=u*d;a.setBaseY(this.stageHeight/2),y<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-y/2),i==="center"&&a.setBaseX(this.stageWidth/2),i==="left"&&a.setBaseX(v/2),i==="right"&&a.setBaseX(this.stageWidth-v/2),a.pivot.set(0,this.stageHeight/2),a.addChild(p)})}performBlinkAnimation(e,r,n,i){var s;const a=(s=this.getStageObjByKey(e))==null?void 0:s.pixiContainer;if(!a)return;const o={open:r.blinkAnimation.open,closed:r.blinkAnimation.close};this.loadAsset(o[n],()=>{const c=this.assetLoader.resources[o[n]].texture;if(!c)return;const l=c.width,u=c.height,f=this.stageWidth/l,h=this.stageHeight/u,d=Math.min(f,h),p=new ca(c);p.scale.x=d,p.scale.y=d,p.anchor.set(.5),p.position.y=this.stageHeight/2;const v=l*d,y=u*d;a.setBaseY(this.stageHeight/2),y<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-y/2),i==="center"&&a.setBaseX(this.stageWidth/2),i==="left"&&a.setBaseX(v/2),i==="right"&&a.setBaseX(this.stageWidth-v/2),a.pivot.set(0,this.stageHeight/2),a.addChild(p)})}addBg(e,r,n,i){var h,d;const a=this.assetLoader,o=new GS;this.backgroundObjects.findIndex(p=>p.key===e)>=0&&this.removeStageObjectByKey(e);const l=(p,v,y,m)=>{fetch(p).then(g=>g.arrayBuffer()).then(Ake.fromBuffer).then(g=>{v&&(g.transform=v.transform),y&&(g.width=Tt(y)),m&&(g.height=Tt(m)),o.addChild(g)})};this.backgroundContainer.addChild(o);const u=Kh();this.backgroundObjects.push({uuid:u,key:e,pixiContainer:o,sourceUrl:r,sourceType:r.includes(".gif")?"gif":"img",sourceExt:this.getExtName(r)});const f=()=>{var v,y;const p=(y=(v=a.resources)==null?void 0:v[r])==null?void 0:y.texture;if(p&&this.getStageObjByUuid(u)){const m=p.width,g=p.height,x=this.stageWidth/m,b=this.stageHeight/g,S=Math.max(x,b),w=new ca(p);if(w.scale.x=S,w.scale.y=S,w.anchor.set(.5),r.includes(".gif")){l(r,w,n,i);return}w.position.y=this.stageHeight/2,o.setBaseX(this.stageWidth/2),o.setBaseY(this.stageHeight/2),o.pivot.set(0,this.stageHeight/2),o.addChild(w)}};this.cacheGC(),(d=(h=a.resources)==null?void 0:h[r])!=null&&d.texture?f():this.loadAsset(r,f)}addFigure(e,r,n="center"){var u,f;const i=this.assetLoader,a=new GS;this.figureObjects.findIndex(h=>h.key===e)>=0&&this.removeStageObjectByKey(e),this.figureContainer.addChild(a);const c=Kh();this.figureObjects.push({uuid:c,key:e,pixiContainer:a,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)});const l=()=>{var d,p;const h=(p=(d=i.resources)==null?void 0:d[r])==null?void 0:p.texture;if(h&&this.getStageObjByUuid(c)){const v=h.width,y=h.height,m=this.stageWidth/v,g=this.stageHeight/y,x=Math.min(m,g),b=new ca(h);b.scale.x=x,b.scale.y=x,b.anchor.set(.5),b.position.y=this.stageHeight/2;const S=v*x,w=y*x;a.setBaseY(this.stageHeight/2),w<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-w/2),n==="center"&&a.setBaseX(this.stageWidth/2),n==="left"&&a.setBaseX(S/2),n==="right"&&a.setBaseX(this.stageWidth-S/2),a.pivot.set(0,this.stageHeight/2),a.addChild(b)}};this.cacheGC(),(f=(u=i.resources)==null?void 0:u[r])!=null&&f.texture?l():this.loadAsset(r,l)}addSpineFigure(e,r,n="center"){var f;const i=`spine-${r}`,a=this.assetLoader,o=new GS;this.figureObjects.findIndex(h=>h.key===e)>=0&&this.removeStageObjectByKey(e),this.figureContainer.addChild(o);const l=Kh();this.figureObjects.push({uuid:l,key:e,pixiContainer:o,sourceUrl:r,sourceType:"live2d",sourceExt:this.getExtName(r)});const u=()=>{var d,p;console.log(this.assetLoader.resources);const h=(d=this.assetLoader.resources)==null?void 0:d[i];if(h&&this.getStageObjByUuid(l)){const v=new yke(h.spineData),y=((p=h==null?void 0:h.spineData)==null?void 0:p.y)??0;console.log(v);const m=v.width,g=v.height,x=this.stageWidth/m,b=this.stageHeight/g;v.y=-(b*y)/2,console.log(v.state),v.state.setAnimation(0,"07",!0);const S=Math.min(x,b),w=new ca;w.addChild(v),w.scale.x=S,w.scale.y=S,w.anchor.set(.5),w.position.y=this.stageHeight/2;const A=m*S,C=g*S;o.setBaseY(this.stageHeight/2),C<this.stageHeight&&o.setBaseY(this.stageHeight/2+this.stageHeight-C/2),n==="center"&&o.setBaseX(this.stageWidth/2),n==="left"&&o.setBaseX(A/2),n==="right"&&o.setBaseX(this.stageWidth-A/2),o.pivot.set(0,this.stageHeight/2),o.addChild(w)}};this.cacheGC(),(f=a.resources)!=null&&f[r]?u():this.loadAsset(r,u,i)}changeModelMotionByKey(e,r){var a,o;const n=this.figureObjects.find(s=>s.key===e);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(s=>s.target===e);if(n&&(i==null?void 0:i.motion)!==r){const c=n.pixiContainer.children;for(const l of c){let u=r,f=0,h=3;const d=(l==null?void 0:l.internalModel)??void 0;(o=(a=d==null?void 0:d.motionManager)==null?void 0:a.stopAllMotions)==null||o.call(a),l.motion(u,f,h)}this.updateL2dMotionByKey(e,r)}}changeModelExpressionByKey(e,r){const n=this.figureObjects.find(a=>a.key===e);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(a=>a.target===e);if(n&&(i==null?void 0:i.expression)!==r){const o=n.pixiContainer.children;for(const s of o)s.expression(r);this.updateL2dExpressionByKey(e,r)}}setModelMouthY(e,r){var o,s,c,l,u,f,h,d,p;function n(v){return v<50?0:(v-50)/50}const i=n(r),a=this.figureObjects.find(v=>v.key===e);if(a){const y=a.pixiContainer.children;for(const m of y)m!=null&&m.internalModel&&((s=(o=m==null?void 0:m.internalModel)==null?void 0:o.coreModel)!=null&&s.setParamFloat&&((u=(l=(c=m==null?void 0:m.internalModel)==null?void 0:c.coreModel)==null?void 0:l.setParamFloat)==null||u.call(l,"PARAM_MOUTH_OPEN_Y",i)),(h=(f=m==null?void 0:m.internalModel)==null?void 0:f.coreModel)!=null&&h.setParameterValueById&&((p=(d=m==null?void 0:m.internalModel)==null?void 0:d.coreModel)==null||p.setParameterValueById("ParamMouthOpenY",i)))}}getStageObjByKey(e){return[...this.figureObjects,...this.backgroundObjects].find(r=>r.key===e)}getStageObjByUuid(e){return[...this.figureObjects,...this.backgroundObjects].find(r=>r.uuid===e)}getAllStageObj(){return[...this.figureObjects,...this.backgroundObjects]}removeStageObjectByKey(e){const r=this.figureObjects.findIndex(i=>i.key===e),n=this.backgroundObjects.findIndex(i=>i.key===e);if(r>=0){const i=this.figureObjects[r];for(const a of i.pixiContainer.children)a.destroy();i.pixiContainer.destroy(),this.figureContainer.removeChild(i.pixiContainer),this.figureObjects.splice(r,1)}if(n>=0){const i=this.backgroundObjects[n];for(const a of i.pixiContainer.children)a.destroy();i.pixiContainer.destroy(),this.backgroundContainer.removeChild(i.pixiContainer),this.backgroundObjects.splice(n,1)}}cacheGC(){oj()}updateL2dMotionByKey(e,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===e);n>=0?this.live2dFigureRecorder[n].motion=r:this.live2dFigureRecorder.push({target:e,motion:r,expression:""})}updateL2dExpressionByKey(e,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===e);n>=0?this.live2dFigureRecorder[n].expression=r:this.live2dFigureRecorder.push({target:e,motion:"",expression:r})}loadAsset(e,r,n){this.loadQueue.unshift({url:e,callback:r,name:n}),this.callLoader()}callLoader(){if(!this.assetLoader.loading){const e=this.loadQueue.shift();if(e)try{this.assetLoader.resources[e.url]?(e.callback(),this.callLoader()):e.name?this.assetLoader.add(e.name,e.url).load(()=>{e.callback(),this.callLoader()}):this.assetLoader.add(e.url).load(()=>{e.callback(),this.callLoader()})}catch(r){Ge.fatal("PIXI Loader 故障",r),e.callback(),this.callLoader()}}}updateFps(){YS==null||YS(120).then(e=>{this.frameDuration=1e3/e})}lockStageObject(e){this.lockTransformTarget.push(e)}unlockStageObject(e){const r=this.lockTransformTarget.findIndex(n=>n===e);r>=0&&this.lockTransformTarget.splice(r,1)}getExtName(e){return e.split(".").pop()??"png"}}const YS=(()=>{const t=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame].find(e=>e);if(!t){console.error("requestAnimationFrame is not supported!");return}return(e=60)=>{if(e<1)throw new Error("targetCount cannot be less than 1.");const r=Date.now();let n=0;return new Promise(i=>{(function a(){t(()=>{if(++n>=e){const o=Date.now()-r,s=n/o*1e3;return i(s)}a()})})()})}})(),Tke={version:"IdolTime 1.0.0"},Oke=navigator.userAgent,HP=!!Oke.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),Pke=()=>{Ge.info(Tke.version),Ge.info("Made with ❤ by IdolTime"),HP&&alert(`iOS 用户请横屏使用以获得最佳体验
| iOS 用戶請橫屏使用以獲得最佳體驗`),Rke("./game/userStyleSheet.css"),Ike(),Zbe("./game/config.txt");const t=Qt("start.txt",$t.scene);ya(t).then(async e=>{const r=await H.sceneManager.setCurrentScene(e,"start.txt",t);if(!r)return;const n=H.sceneManager.sceneData.currentScene.subSceneList;H.sceneManager.settledScenes.push(t);const i=jp(n);qf(i);const a=(r==null?void 0:r.sentenceList)??[],o=a==null?void 0:a.filter(s=>(s==null?void 0:s.commandRaw)==="unlockAchieve");le.dispatch(ur.setUnlockAchieveAllTotal((o==null?void 0:o.length)??0))}),H.gameplay.pixiStage=new Cke,eSe(),tSe()};function Rke(t){const e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}function Ike(){Hd.get("./game/animation/animationTable.json").then(t=>{const e=t.data;for(const r of e)Hd.get(`./game/animation/${r}.json`).then(n=>{if(n.data){const i={name:r,effects:n.data};H.animationManager.addAnimation(i)}})})}const Fke="_Menu_main_x2m75_1",kke="_Menu_ShowSoftly_x2m75_1",Dke="_Menu_TagContent_x2m75_10",c3={Menu_main:Fke,Menu_ShowSoftly:kke,Menu_TagContent:Dke},Mke="_Save_Load_main_kz9xf_2",Lke="_Save_Load_top_kz9xf_9",Bke="_Elements_in_kz9xf_1",Nke="_goback_kz9xf_17",Uke="_extraVideo_goback_kz9xf_36",jke="_Save_Load_title_kz9xf_41",$ke="_Save_title_text_kz9xf_57",Vke="_Load_title_text_kz9xf_65",Gke="_Save_Load_top_buttonList_kz9xf_72",Wke="_Save_Load_top_button_kz9xf_72",zke="_Save_Load_top_button_text_kz9xf_90",Hke="_Save_Load_top_button_on_kz9xf_101",Xke="_Load_top_button_on_kz9xf_114",Yke="_Load_top_button_kz9xf_114",qke="_Save_Load_content_kz9xf_127",Kke="_Save_Load_content_element_kz9xf_136",Zke="_Elements_in_transform_kz9xf_1",Qke="_Save_Load_content_element_top_kz9xf_152",Jke="_Save_Load_content_element_top_index_kz9xf_159",eDe="_Load_content_elememt_top_index_kz9xf_168",tDe="_Save_Load_content_element_top_date_kz9xf_172",rDe="_Load_content_element_top_date_kz9xf_183",nDe="_Save_Load_content_text_kz9xf_187",iDe="_Save_Load_content_text_padding_kz9xf_201",aDe="_Save_Load_content_speaker_kz9xf_205",oDe="_Load_content_speaker_kz9xf_214",sDe="_Load_content_text_kz9xf_218",lDe="_Save_Load_content_miniRen_kz9xf_222",uDe="_Save_Load_content_miniRen_bg_kz9xf_229",cDe="_Save_Load_content_miniRen_figure_kz9xf_236",fDe="_Save_Load_content_miniRen_figLeft_kz9xf_244",hDe="_Save_Load_content_miniRen_figRight_kz9xf_249",Je={Save_Load_main:Mke,Save_Load_top:Lke,Elements_in:Bke,goback:Nke,extraVideo_goback:Uke,Save_Load_title:jke,Save_title_text:$ke,Load_title_text:Vke,Save_Load_top_buttonList:Gke,Save_Load_top_button:Wke,Save_Load_top_button_text:zke,Save_Load_top_button_on:Hke,Load_top_button_on:Xke,Load_top_button:Yke,Save_Load_content:qke,Save_Load_content_element:Kke,Elements_in_transform:Zke,Save_Load_content_element_top:Qke,Save_Load_content_element_top_index:Jke,Load_content_elememt_top_index:eDe,Save_Load_content_element_top_date:tDe,Load_content_element_top_date:rDe,Save_Load_content_text:nDe,Save_Load_content_text_padding:iDe,Save_Load_content_speaker:aDe,Load_content_speaker:oDe,Load_content_text:sDe,Save_Load_content_miniRen:lDe,Save_Load_content_miniRen_bg:uDe,Save_Load_content_miniRen_figure:cDe,Save_Load_content_miniRen_figLeft:fDe,Save_Load_content_miniRen_figRight:hDe},dDe="_GlobalDialog_main_101j8_2",pDe="_showGlobalDialog_101j8_1",vDe="_glabalDialog_container_inner_101j8_17",gDe="_glabalDialog_container_101j8_17",mDe="_title_101j8_36",yDe="_button_list_101j8_41",_De="_button_101j8_41",ru={GlobalDialog_main:dDe,showGlobalDialog:pDe,glabalDialog_container_inner:vDe,glabalDialog_container:gDe,title:mDe,button_list:yDe,button:_De};function xDe(){const t=it(e=>e.GUI.showGlobalDialog);return B.jsx(B.Fragment,{children:t&&B.jsx("div",{id:"globalDialogContainer"})})}function Q9(t){const{playSeClick:e,playSeEnter:r}=b2();le.dispatch(_t({component:"showGlobalDialog",visibility:!0}));const n=()=>{e(),t.leftFunc(),f3()},i=()=>{e(),t.rightFunc(),f3()},a=B.jsx("div",{className:ru.GlobalDialog_main,children:B.jsx("div",{className:ru.glabalDialog_container,children:B.jsxs("div",{className:ru.glabalDialog_container_inner,children:[B.jsx("div",{className:ru.title,children:t.title}),B.jsxs("div",{className:ru.button_list,children:[B.jsx("div",{className:ru.button,onClick:n,onMouseEnter:r,children:t.leftText}),B.jsx("div",{className:ru.button,onClick:i,onMouseEnter:r,children:t.rightText})]})]})})});setTimeout(()=>{Mu.render(a,document.getElementById("globalDialogContainer"))},100)}function f3(){le.dispatch(_t({component:"showGlobalDialog",visibility:!1}))}function XP(t,e){if(t==null)return{};var r=Ome(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var bDe={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const SDe=gi(bDe);var EDe=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function h3(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=t.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(e.name=r[1],(SDe[r[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var n=t.indexOf("-->");return{type:"comment",comment:n!==-1?t.slice(4,n):""}}for(var i=new RegExp(EDe),a=null;(a=i.exec(t))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),e.attrs[s[0]]=s[1],i.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var wDe=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ADe=/^\s*$/,CDe=Object.create(null);function J9(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(r){var n=[];for(var i in r)n.push(i+'="'+r[i]+'"');return n.length?" "+n.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(J9,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var TDe={parse:function(t,e){e||(e={}),e.components||(e.components=CDe);var r,n=[],i=[],a=-1,o=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");n.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace(wDe,function(c,l){if(o){if(c!=="</"+r.name+">")return;o=!1}var u,f=c.charAt(1)!=="/",h=c.startsWith("<!--"),d=l+c.length,p=t.charAt(d);if(h){var v=h3(c);return a<0?(n.push(v),n):((u=i[a]).children.push(v),n)}if(f&&(a++,(r=h3(c)).type==="tag"&&e.components[r.name]&&(r.type="component",o=!0),r.voidElement||o||!p||p==="<"||r.children.push({type:"text",content:t.slice(d,t.indexOf("<",d))}),a===0&&n.push(r),(u=i[a-1])&&u.children.push(r),i[a]=r),(!f||r.voidElement)&&(a>-1&&(r.voidElement||r.name===c.slice(2,-1))&&(a--,r=a===-1?n:i[a]),!o&&p!=="<"&&p)){u=a===-1?n:i[a].children;var y=t.indexOf("<",d),m=t.slice(d,y===-1?void 0:y);ADe.test(m)&&(m=" "),(y>-1&&a+u.length>=0||m!==" ")&&u.push({type:"text",content:m})}}),n},stringify:function(t){return t.reduce(function(e,r){return e+J9("",r)},"")}};function yg(){if(console&&console.warn){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(t=console).warn.apply(t,r)}}var d3={};function Rm(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];typeof e[0]=="string"&&d3[e[0]]||(typeof e[0]=="string"&&(d3[e[0]]=new Date),yg.apply(void 0,e))}var eV=function(e,r){return function(){if(e.isInitialized)r();else{var n=function i(){setTimeout(function(){e.off("initialized",i)},0),r()};e.on("initialized",n)}}};function p3(t,e,r){t.loadNamespaces(e,eV(t,r))}function v3(t,e,r,n){typeof r=="string"&&(r=[r]),r.forEach(function(i){t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,eV(t,n))}function ODe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.languages[0],i=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var o=function(c,l){var u=e.services.backendConnector.state["".concat(c,"|").concat(l)];return u===-1||u===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(n,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(n,t)&&(!i||o(a,t)))}function PDe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return Rm("i18n.languages were undefined or empty",e.languages),!0;var n=e.options.ignoreJSONStructure!==void 0;return n?e.hasLoadedNamespace(t,{lng:r.lng,precheck:function(a,o){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,t))return!1}}):ODe(t,e,r)}var RDe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,IDe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},FDe=function(e){return IDe[e]},kDe=function(e){return e.replace(RDe,FDe)};function g3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var gC={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:kDe};function DDe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};gC=m3(m3({},gC),t)}function tV(){return gC}var rV;function MDe(t){rV=t}function YP(){return rV}var LDe=["format"],BDe=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function y3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qS(t,e){if(!t)return!1;var r=t.props?t.props.children:t.children;return e?r.length>0:!!r}function KS(t){return t?t.props?t.props.children:t.children:[]}function NDe(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(function(e){return ve.isValidElement(e)})}function ud(t){return Array.isArray(t)?t:[t]}function UDe(t,e){var r=bn({},e);return r.props=Object.assign(t.props,e.props),r}function nV(t,e){if(!t)return"";var r="",n=ud(t),i=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return n.forEach(function(a,o){if(typeof a=="string")r+="".concat(a);else if(ve.isValidElement(a)){var s=Object.keys(a.props).length,c=i.indexOf(a.type)>-1,l=a.props.children;if(!l&&c&&s===0)r+="<".concat(a.type,"/>");else if(!l&&(!c||s!==0))r+="<".concat(o,"></").concat(o,">");else if(a.props.i18nIsDynamicList)r+="<".concat(o,"></").concat(o,">");else if(c&&s===1&&typeof l=="string")r+="<".concat(a.type,">").concat(l,"</").concat(a.type,">");else{var u=nV(l,e);r+="<".concat(o,">").concat(u,"</").concat(o,">")}}else if(a===null)yg("Trans: the passed in value is invalid - seems you passed in a null child.");else if($n(a)==="object"){var f=a.format,h=XP(a,LDe),d=Object.keys(h);if(d.length===1){var p=f?"".concat(d[0],", ").concat(f):d[0];r+="{{".concat(p,"}}")}else yg("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",a)}else yg("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",a)}),r}function jDe(t,e,r,n,i,a){if(e==="")return[];var o=n.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(o.join("|")).test(e);if(!t&&!s)return[e];var c={};function l(y){var m=ud(y);m.forEach(function(g){typeof g!="string"&&(qS(g)?l(KS(g)):$n(g)==="object"&&!ve.isValidElement(g)&&Object.assign(c,g))})}l(t);var u=TDe.parse("<0>".concat(e,"</0>")),f=bn(bn({},c),i);function h(y,m,g){var x=KS(y),b=p(x,m.children,g);return NDe(x)&&b.length===0?x:b}function d(y,m,g,x,b){y.dummy&&(y.children=m),g.push(ve.cloneElement(y,bn(bn({},y.props),{},{key:x}),b?void 0:m))}function p(y,m,g){var x=ud(y),b=ud(m);return b.reduce(function(S,w,A){var C=w.children&&w.children[0]&&w.children[0].content&&r.services.interpolator.interpolate(w.children[0].content,f,r.language);if(w.type==="tag"){var O=x[parseInt(w.name,10)];!O&&g.length===1&&g[0][w.name]&&(O=g[0][w.name]),O||(O={});var P=Object.keys(w.attrs).length!==0?UDe({props:w.attrs},O):O,I=ve.isValidElement(P),R=I&&qS(w,!0)&&!w.voidElement,F=s&&$n(P)==="object"&&P.dummy&&!I,D=$n(t)==="object"&&t!==null&&Object.hasOwnProperty.call(t,w.name);if(typeof P=="string"){var L=r.services.interpolator.interpolate(P,f,r.language);S.push(L)}else if(qS(P)||R){var U=h(P,w,g);d(P,U,S,A)}else if(F){var Y=p(x,w.children,g);S.push(ve.cloneElement(P,bn(bn({},P.props),{},{key:A}),Y))}else if(Number.isNaN(parseFloat(w.name)))if(D){var ee=h(P,w,g);d(P,ee,S,A,w.voidElement)}else if(n.transSupportBasicHtmlNodes&&o.indexOf(w.name)>-1)if(w.voidElement)S.push(ve.createElement(w.name,{key:"".concat(w.name,"-").concat(A)}));else{var J=p(x,w.children,g);S.push(ve.createElement(w.name,{key:"".concat(w.name,"-").concat(A)},J))}else if(w.voidElement)S.push("<".concat(w.name," />"));else{var X=p(x,w.children,g);S.push("<".concat(w.name,">").concat(X,"</").concat(w.name,">"))}else if($n(P)==="object"&&!I){var M=w.children[0]?C:null;M&&S.push(M)}else w.children.length===1&&C?S.push(ve.cloneElement(P,bn(bn({},P.props),{},{key:A}),C)):S.push(ve.cloneElement(P,bn(bn({},P.props),{},{key:A})))}else if(w.type==="text"){var V=n.transWrapTextNodes,$=a?n.unescape(r.services.interpolator.interpolate(w.content,f,r.language)):r.services.interpolator.interpolate(w.content,f,r.language);V?S.push(ve.createElement(V,{key:"".concat(w.name,"-").concat(A)},$)):S.push($)}return S},[])}var v=p([{dummy:!0,children:t||[]}],u,ud(t||[]));return KS(v[0])}function $De(t){var e=t.children,r=t.count,n=t.parent,i=t.i18nKey,a=t.context,o=t.tOptions,s=o===void 0?{}:o,c=t.values,l=t.defaults,u=t.components,f=t.ns,h=t.i18n,d=t.t,p=t.shouldUnescape,v=XP(t,BDe),y=h||YP();if(!y)return Rm("You will need to pass in an i18next instance by using i18nextReactModule"),e;var m=d||y.t.bind(y)||function(R){return R};a&&(s.context=a);var g=bn(bn({},tV()),y.options&&y.options.react),x=f||m.ns||y.options&&y.options.defaultNS;x=typeof x=="string"?[x]:x||["translation"];var b=l||nV(e,g)||g.transEmptyNodeValue||i,S=g.hashTransKey,w=i||(S?S(b):b),A=c?s.interpolation:{interpolation:bn(bn({},s.interpolation),{},{prefix:"#$?",suffix:"?$#"})},C=bn(bn(bn(bn({},s),{},{count:r},c),A),{},{defaultValue:b,ns:x}),O=w?m(w,C):b,P=jDe(u||e,O,y,g,C,p),I=n!==void 0?n:g.defaultTransParent;return I?ve.createElement(I,v,P):P}function yo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QN(n.key),n)}}function _o(t,e,r){return e&&_3(t.prototype,e),r&&_3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var VDe={type:"3rdParty",init:function(e){DDe(e.options.react),MDe(e)}},iV=ve.createContext(),GDe=function(){function t(){yo(this,t),this.usedNamespaces={}}return _o(t,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}(),WDe=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function x3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zDe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HDe(t){var e=t.children,r=t.count,n=t.parent,i=t.i18nKey,a=t.context,o=t.tOptions,s=o===void 0?{}:o,c=t.values,l=t.defaults,u=t.components,f=t.ns,h=t.i18n,d=t.t,p=t.shouldUnescape,v=XP(t,WDe),y=ve.useContext(iV)||{},m=y.i18n,g=y.defaultNS,x=h||m||YP(),b=d||x&&x.t.bind(x);return $De(zDe({children:e,count:r,parent:n,i18nKey:i,context:a,tOptions:s,values:c,defaults:l,components:u,ns:f||b&&b.ns||g||x&&x.options&&x.options.defaultNS,i18n:x,t:d,shouldUnescape:p},v))}function aV(t){if(Array.isArray(t))return t}function XDe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function b3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oV(t,e){if(t){if(typeof t=="string")return b3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b3(t,e)}}function sV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YDe(t,e){return aV(t)||XDe(t,e)||oV(t,e)||sV()}function S3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var qDe=function(e,r){var n=ve.useRef();return ve.useEffect(function(){n.current=r?n.current:e},[e,r]),n.current};function x_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.i18n,n=ve.useContext(iV)||{},i=n.i18n,a=n.defaultNS,o=r||i||YP();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new GDe),!o){Rm("You will need to pass in an i18next instance by using initReactI18next");var s=function(O,P){return typeof P=="string"?P:P&&$n(P)==="object"&&typeof P.defaultValue=="string"?P.defaultValue:Array.isArray(O)?O[O.length-1]:O},c=[s,{},!1];return c.t=s,c.i18n={},c.ready=!1,c}o.options.react&&o.options.react.wait!==void 0&&Rm("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=ZS(ZS(ZS({},tV()),o.options.react),e),u=l.useSuspense,f=l.keyPrefix,h=t||a||o.options&&o.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var d=(o.isInitialized||o.initializedStoreOnce)&&h.every(function(C){return PDe(C,o,l)});function p(){return o.getFixedT(e.lng||null,l.nsMode==="fallback"?h:h[0],f)}var v=ve.useState(p),y=YDe(v,2),m=y[0],g=y[1],x=h.join();e.lng&&(x="".concat(e.lng).concat(x));var b=qDe(x),S=ve.useRef(!0);ve.useEffect(function(){var C=l.bindI18n,O=l.bindI18nStore;S.current=!0,!d&&!u&&(e.lng?v3(o,e.lng,h,function(){S.current&&g(p)}):p3(o,h,function(){S.current&&g(p)})),d&&b&&b!==x&&S.current&&g(p);function P(){S.current&&g(p)}return C&&o&&o.on(C,P),O&&o&&o.store.on(O,P),function(){S.current=!1,C&&o&&C.split(" ").forEach(function(I){return o.off(I,P)}),O&&o&&O.split(" ").forEach(function(I){return o.store.off(I,P)})}},[o,x]);var w=ve.useRef(!0);ve.useEffect(function(){S.current&&!w.current&&g(p),w.current=!1},[o,f]);var A=[m,o,d];if(A.t=m,A.i18n=o,A.ready=d,d||!d&&!u)return A;throw new Promise(function(C){e.lng?v3(o,e.lng,h,function(){return C()}):p3(o,h,function(){return C()})})}function Ho(t){const{t:e}=x_(),r=i=>e(i[0]==="$"?i.slice(1):t+i);function n(i,...a){return a.length?[r(i),...a.map(o=>r(o))]:r(i)}return n}const KDe=()=>{const{playSePageChange:t,playSeEnter:e,playSeDialogOpen:r}=ri(),n=it(d=>d.userData),i=it(d=>d.saveData),a=Br(),o=[];for(let d=1;d<=20;d++){let p=Je.Save_Load_top_button;d===n.optionData.slPage&&(p=p+" "+Je.Save_Load_top_button_on);const v=B.jsx("div",{onClick:()=>{a(GT(d)),jn(),t()},onMouseEnter:e,className:p,children:B.jsx("div",{className:Je.Save_Load_top_button_text,children:d})},"Save_element_page"+d);o.push(v)}const s=Ho("common."),c=[],l=(n.optionData.slPage-1)*10+1,u=l+9;ve.useEffect(()=>{Wp(l,u)},[l,u]);let f=0;for(let d=l;d<=u;d++){f++;const p=i.saveData[d];let v=B.jsx("div",{});if(p){const m=p.nowStageState.showName===""?" ":`${p.nowStageState.showName}`;v=B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:Je.Save_Load_content_element_top,children:[B.jsx("div",{className:Je.Save_Load_content_element_top_index,children:p.index}),B.jsx("div",{className:Je.Save_Load_content_element_top_date,children:p.saveTime})]}),B.jsx("div",{className:Je.Save_Load_content_miniRen,children:B.jsx("img",{className:Je.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:p.previewImage})}),B.jsxs("div",{className:Je.Save_Load_content_text,children:[B.jsx("div",{className:Je.Save_Load_content_speaker,children:m}),B.jsx("div",{className:Je.Save_Load_content_text_padding,children:p.nowStageState.showText})]})]})}const y=B.jsx("div",{onClick:()=>{i.saveData[d]?(r(),Q9({title:h("saving.isOverwrite"),leftText:s("yes"),rightText:s("no"),leftFunc:()=>{tm(d),jn()},rightFunc:()=>{}})):(t(),tm(d))},onMouseEnter:e,className:Je.Save_Load_content_element,style:{animationDelay:`${f*30}ms`},children:v},"saveElement_"+d);c.push(y)}const h=Ho("menu.");return B.jsxs("div",{className:Je.Save_Load_main,children:[B.jsxs("div",{className:Je.Save_Load_top,children:[B.jsx("div",{className:Je.Save_Load_title,children:B.jsx("div",{className:Je.Save_title_text,children:h("saving.title")})}),B.jsx("div",{className:Je.Save_Load_top_buttonList,children:o})]}),B.jsx("div",{className:Je.Save_Load_content,id:"Save_content_page_"+n.optionData.slPage,children:c})]})},ZDe=()=>{var y,m,g,x,b,S,w;const t=Br(),{playSeClick:e,playSeEnter:r,playSePageChange:n}=ri(),i=it(A=>A.userData),a=it(A=>A.saveData),o=it(A=>A.GUI.gameUIConfigs[Bn.load]),s=[];for(let A=1;A<=20;A++){let C=Je.Save_Load_top_button+" "+Je.Load_top_button;A===i.optionData.slPage&&(C=C+" "+Je.Save_Load_top_button_on+" "+Je.Load_top_button_on);const O=B.jsx("div",{onClick:()=>{t(GT(A)),jn(),n()},onMouseEnter:r,className:C,children:B.jsx("div",{className:Je.Save_Load_top_button_text,style:v((y=o==null?void 0:o.other)==null?void 0:y.Load_indicator,{hasDisplay:!1,imgType:$t.ui}),children:A})},"Load_element_page"+A);s.push(O)}const c=[],l=(i.optionData.slPage-1)*10+1,u=l+9;ve.useEffect(()=>{Wp(l,u)},[l,u]);let f=0;for(let A=l;A<=u;A++){f++;const C=a.saveData[A];let O=B.jsx("div",{});if(C){const I=C.nowStageState.showName===""?" ":`${C.nowStageState.showName}`;O=B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:Je.Save_Load_content_element_top,children:[B.jsx("div",{className:Je.Save_Load_content_element_top_index+" "+Je.Load_content_elememt_top_index,children:C.index}),B.jsx("div",{className:Je.Save_Load_content_element_top_date+" "+Je.Load_content_element_top_date,children:C.saveTime})]}),B.jsx("div",{className:Je.Save_Load_content_miniRen,children:B.jsx("img",{className:Je.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:C.previewImage})}),B.jsxs("div",{className:Je.Save_Load_content_text,children:[B.jsx("div",{className:Je.Save_Load_content_speaker+" "+Je.Load_content_speaker,children:I}),B.jsx("div",{className:Je.Save_Load_content_text_padding,children:C.nowStageState.showText})]})]})}const P=B.jsx("div",{onClick:()=>{sU(A),e()},onMouseEnter:r,className:Je.Save_Load_content_element,style:{animationDelay:`${f*30}ms`,...v((m=o==null?void 0:o.other)==null?void 0:m.Load_locked_item,{hasDisplay:!0,imgType:$t.ui})},children:O},"loadElement_"+A);c.push(P)}const h=Ho("menu."),d=()=>{e(),t(_t({component:"showMenuPanel",visibility:!1}))};function p(A,C){return Qt(A,C)}function v(A,{hasDisplay:C=!1,id:O="",imgType:P}){const I={},R=A==null?void 0:A.args;if(!R||R!=null&&R.hide&&!C)return I;R!=null&&R.hide&&C&&(I.display="none");const F=R.style,D=/\.(png|jpeg|jpg|webp|icon|fig)$/;if(F!=null&&F.image)if(D.test(F.image)&&P)I.backgroundImage=`url(${p(F==null?void 0:F.image,P)})`,I.position=F.position,I.backgroundSize="100% 100%",I.backgroundRepeat="no-repeat";else{const L=document.getElementById(O);L&&(L.innerText=F==null?void 0:F.image)}return F!=null&&F.scale&&(I.transform=`scale(${F.scale})`),typeof(F==null?void 0:F.x)=="number"&&(I.top=`${Tt(F.x)}px`),typeof(F==null?void 0:F.y)=="number"&&(I.top=`${Tt(F.y)}px`),F!=null&&F.width&&(I.width=`${Tt(F.width)}px`),F!=null&&F.height&&(I.height=`${Tt(F.height)}px`),F!=null&&F.height&&(I.height=`${Tt(F.height)}px`),F!=null&&F.fontColor&&(I.color=F.fontColor),F!=null&&F.fontSize&&(I.fontSize=F.fontSize),I}return B.jsxs("div",{className:Je.Save_Load_main,style:v((g=o==null?void 0:o.other)==null?void 0:g.Load_bg,{hasDisplay:!1,imgType:$t.background}),children:[B.jsxs("div",{className:Je.Save_Load_top,children:[B.jsx("div",{className:Je.goback,style:v((x=o==null?void 0:o.buttons)==null?void 0:x.Load_back_button,{hasDisplay:!0,imgType:$t.ui}),onClick:d,onMouseEnter:r}),B.jsx("div",{className:Je.Save_Load_title,style:v((b=o==null?void 0:o.other)==null?void 0:b.Load_title,{hasDisplay:!0,id:(S=o==null?void 0:o.other)==null?void 0:S.Load_title.key}),children:B.jsx("div",{id:(w=o==null?void 0:o.other)==null?void 0:w.Load_title.key,className:Je.Load_title_text,children:h("loadSaving.title")})}),B.jsx("div",{className:Je.Save_Load_top_buttonList,children:s})]}),B.jsx("div",{className:Je.Save_Load_content,id:"Load_content_page_"+i.optionData.slPage,children:c})]})},QDe="_Options_main_afqu4_2",JDe="_Options_bg_afqu4_9",eMe="_Options_back_afqu4_21",tMe="_Options_checkbox_afqu4_37",rMe="_Options_main_slider_afqu4_49",nMe="_Options_light_slider_afqu4_55",iMe="_label_afqu4_60",aMe="_Options_sound_slider_afqu4_66",oMe="_Options_checkbox_window_afqu4_72",sMe="_Options_checkbox_active_afqu4_76",lMe="_Options_top_afqu4_80",uMe="_Options_title_afqu4_87",cMe="_Option_title_text_afqu4_96",fMe="_Elements_in_afqu4_1",hMe="_Option_title_text_shadow_afqu4_105",dMe="_Option_title_text_ts_afqu4_112",pMe="_Options_main_content_afqu4_119",vMe="_Options_main_content_half_afqu4_126",gMe="_About_title_text_afqu4_136",mMe="_About_text_afqu4_144",yMe="_Options_page_container_afqu4_163",_Me="_Options_button_list_afqu4_169",xMe="_Options_page_button_afqu4_173",bMe="_Options_page_button_active_afqu4_185",Qa={Options_main:QDe,Options_bg:JDe,Options_back:eMe,Options_checkbox:tMe,Options_main_slider:rMe,Options_light_slider:nMe,label:iMe,Options_sound_slider:aMe,Options_checkbox_window:oMe,Options_checkbox_active:sMe,Options_top:lMe,Options_title:uMe,Option_title_text:cMe,Elements_in:fMe,Option_title_text_shadow:hMe,Option_title_text_ts:dMe,Options_main_content:pMe,Options_main_content_half:vMe,About_title_text:gMe,About_text:mMe,Options_page_container:yMe,Options_button_list:_Me,Options_page_button:xMe,Options_page_button_active:bMe},SMe="_OptionVideoSize_main_1osvs_1",EMe="_label_1osvs_5",wMe="_option_item_1osvs_9",AMe="_option_item_checkbox_1osvs_23",CMe="_option_item_checkbox_active_1osvs_34",Uv={OptionVideoSize_main:SMe,label:EMe,option_item:wMe,option_item_checkbox:AMe,option_item_checkbox_active:CMe},TMe=t=>{const e=Br(),{playSeEnter:r,playSeClick:n}=ri(),i=it(l=>l.userData),[a,o]=ve.useState(du.Size720P),s=it(l=>l.GUI.gameUIConfigs[Bn.option]),c=[du.Size1080P,du.Size720P];return B.jsxs("div",{className:Uv.OptionVideoSize_main,children:[t.label&&B.jsx("label",{className:Uv.label,children:t.label}),B.jsx(Ki,{type:"checkbox",checked:i.optionData.videoSize===du.Size1080P,item:s.other[ua.Option_videoSize1080_checkbox],defaultClass:`${Uv.Options_checkbox}`,onMouseEnter:r,onChecked:()=>{n(),o(c[0]),e(ao({key:"videoSize",value:c[0]})),jn()}},ua.Option_videoSize1080_checkbox),B.jsx(Ki,{type:"checkbox",checked:i.optionData.videoSize===du.Size720P,item:s.other[ua.Option_videoSize720_checkbox],defaultClass:`${Uv.Options_checkbox}`,onMouseEnter:r,onChecked:()=>{n(),o(c[1]),e(ao({key:"videoSize",value:c[1]})),jn()}},ua.Option_videoSize720_checkbox)]})},jv={min:50,max:100},OMe=()=>{const{playSeEnter:t,playSeSwitch:e,playSeClick:r}=ri(),n=it(o=>o.userData);Nu(0),ve.useEffect(rm,[]);const i=Br(),a=it(o=>o.GUI.gameUIConfigs[Bn.option]);return Ho("menu.options."),B.jsxs("div",{className:Qa.Options_main,children:[B.jsx(Xp,{item:a.other[ua.Option_bg],defaultClass:Qa.Options_bg}),B.jsx(Ki,{item:a.buttons[Xy.Option_back_button],defaultClass:Qa.Options_back,onMouseEnter:t,onClick:()=>{r(),i(_t({component:"showMenuPanel",visibility:!1}))}}),B.jsx(Ki,{checked:n.optionData.fullScreen===La.on,item:a.other[ua.Option_fullscreen_checkbox],defaultClass:`${Qa.Options_checkbox} ${n.optionData.fullScreen?"":Qa.Options_checkbox_active}`,onMouseEnter:t,type:"checkbox",onChecked:()=>{r(),i(ao({key:"fullScreen",value:La.on})),jn()}}),B.jsx(Ki,{checked:n.optionData.fullScreen===La.off,item:a.other[ua.Option_window_checkbox],defaultClass:`${Qa.Options_checkbox} ${Qa.Options_checkbox_window} ${n.optionData.fullScreen?Qa.Options_checkbox_active:""}`,onMouseEnter:t,type:"checkbox",onChecked:()=>{r(),i(ao({key:"fullScreen",value:La.off})),jn()}}),B.jsx(TMe,{}),B.jsx(rS,{item:a.other[ua.Options_light_slider],defaultClass:Qa.Options_light_slider,initValue:n.optionData.uiLight,uniqueID:"light",min:jv.min,max:jv.max,onChange:o=>{let s=Number(o.target.value);s<jv.min&&(s=jv.min),lU(s),i(ao({key:"uiLight",value:s})),jn()}}),B.jsx(rS,{item:a.other[ua.Option_effect_volume_slider],defaultClass:Qa.Options_sound_slider,initValue:n.optionData.seVolume,uniqueID:"seVolume",onChange:o=>{const s=o.target.value;i(ao({key:"seVolume",value:Number(s)})),i(ao({key:"uiSeVolume",value:Number(s)})),jn()}}),B.jsx(rS,{initValue:n.optionData.volumeMain,item:a.other[ua.Option_global_volume_slider],defaultClass:Qa.Options_main_slider,uniqueID:"volumeMain",onChange:o=>{const s=o.target.value;i(ao({key:"volumeMain",value:Number(s)})),jn()}})]})},PMe=()=>{const t=it(r=>r.GUI);let e;switch(t.currentMenuTag){case qi.Save:e=B.jsx(KDe,{});break;case qi.Load:e=B.jsx(ZDe,{});break;case qi.Option:e=B.jsx(OMe,{});break}return B.jsx(B.Fragment,{children:t.showMenuPanel&&B.jsx("div",{className:c3.Menu_main,children:B.jsx("div",{className:c3.Menu_TagContent,children:e})})})},RMe="_MainStage_main_9enex_1",IMe="_MainStage_main_container_9enex_10",FMe="_MainStage_bgContainer_9enex_17",kMe="_MainStage_showBgSoftly_9enex_1",DMe="_MainStage_bgContainer_Settled_9enex_27",MMe="_MainStage_oldBgContainer_9enex_37",LMe="_MainStage_oldBgFadeout_9enex_1",BMe="_MainStage_oldBgContainer_Settled_9enex_47",NMe="_pixiContainer_9enex_72",UMe="_chooseContainer_9enex_77",QS={MainStage_main:RMe,MainStage_main_container:IMe,MainStage_bgContainer:FMe,MainStage_showBgSoftly:kMe,MainStage_bgContainer_Settled:DMe,MainStage_oldBgContainer:MMe,MainStage_oldBgFadeout:LMe,MainStage_oldBgContainer_Settled:BMe,pixiContainer:NMe,chooseContainer:UMe};function jMe(){const t=it(r=>r.userData.optionData.textboxFont);function e(){return Wy(t).with(Cu.song,()=>'"思源宋体", serif').with(Cu.lxgw,()=>'"LXGW", serif').with(Cu.hei,()=>'"WebgalUI", serif').default(()=>'"WebgalUI", serif')}return e()}function E3(t){switch(t){case 0:return 150;case 1:return 205;case 2:return 240;default:return 205}}const $Me="_TextBox_EventHandler_1junu_1",VMe="_TextBox_Container_1junu_9",GMe="_showSoftly_1junu_1",WMe="_TextBox_main_1junu_17",zMe="_TextBox_Background_1junu_38",HMe="_TextBox_textElement_start_1junu_51",XMe="_TextDelayShow_1junu_1",YMe="_outer_1junu_57",qMe="_inner_1junu_69",KMe="_zhanwei_1junu_78",ZMe="_TextBox_textElement_Settled_1junu_83",QMe="_TextBox_showName_1junu_88",JMe="_TextBox_ShowName_Background_1junu_101",eLe="_miniAvatarContainer_1junu_116",tLe="_miniAvatarImg_1junu_126",rLe="_nameContainer_1junu_134",nLe="_outerName_1junu_140",iLe="_innerName_1junu_151",aLe="_text_1junu_158",Cr={TextBox_EventHandler:$Me,TextBox_Container:VMe,showSoftly:GMe,TextBox_main:WMe,TextBox_Background:zMe,TextBox_textElement_start:HMe,TextDelayShow:XMe,outer:YMe,inner:qMe,zhanwei:KMe,TextBox_textElement_Settled:ZMe,TextBox_showName:QMe,TextBox_ShowName_Background:JMe,miniAvatarContainer:eLe,miniAvatarImg:tLe,nameContainer:rLe,outerName:nLe,innerName:iLe,text:aLe};function oLe(t){const{textArray:e,textDelay:r,currentConcatDialogPrev:n,currentDialogKey:i,isText:a,isSafari:o,isFirefox:s,fontSize:c,miniAvatar:l,showName:u,font:f,textDuration:h,isUseStroke:d,textboxOpacity:p}=t,v=W2("Stage/TextBox/textbox.scss");ve.useEffect(()=>{function g(){[...document.querySelectorAll(".Textelement_start")].forEach(S=>{S.className=v("TextBox_textElement_Settled",Cr.TextBox_textElement_Settled)})}return H.events.textSettle.on(g),()=>{H.events.textSettle.off(g)}},[]);let y=0;const m=e.map((g,x)=>{const b=g.map((S,w)=>{let A=y*r;y++;let C=n.length;return n!==""&&w>=C&&(A=A-C*r),w<C?B.jsx("span",{id:`${A}`,className:v("TextBox_textElement_Settled",Cr.TextBox_textElement_Settled),style:{animationDelay:`${A}ms`,animationDuration:`${h}ms`},children:B.jsxs("span",{className:Cr.zhanwei,children:[S,B.jsx("span",{className:v("outer",Cr.outer),children:S}),d&&B.jsx("span",{className:v("inner",Cr.inner),children:S})]})},i+w):B.jsx("span",{"data-text":S,id:`${A}`,className:`${v("TextBox_textElement_start",Cr.TextBox_textElement_start)} Textelement_start`,style:{animationDelay:`${A}ms`,position:"relative"},children:B.jsxs("span",{className:Cr.zhanwei,children:[S,B.jsx("span",{className:v("outer",Cr.outer),children:S}),d&&B.jsx("span",{className:v("inner",Cr.inner),children:S})]})},i+w)});return B.jsx("div",{style:{wordBreak:o||t.isFirefox?"break-all":void 0,display:o?"flex":void 0,flexWrap:o?"wrap":void 0},children:b},`text-line-${x}`)});return console.log(`${p/100}`),B.jsx(B.Fragment,{children:a&&B.jsxs("div",{className:Cr.TextBox_Container,children:[B.jsx("div",{className:v("TextBox_main",Cr.TextBox_main)+" "+v("TextBox_Background",Cr.TextBox_Background),style:{opacity:`${p/100}`,left:l===""?25:void 0}}),B.jsxs("div",{id:"textBoxMain",className:v("TextBox_main",Cr.TextBox_main),style:{fontFamily:f,left:l===""?25:void 0},children:[B.jsx("div",{id:"miniAvatar",className:v("miniAvatarContainer",Cr.miniAvatarContainer),children:l!==""&&B.jsx("img",{className:v("miniAvatarImg",Cr.miniAvatarImg),alt:"miniAvatar",src:l})}),u!==""&&B.jsxs(B.Fragment,{children:[B.jsx("div",{className:v("TextBox_showName",Cr.TextBox_showName)+" "+v("TextBox_ShowName_Background",Cr.TextBox_ShowName_Background),style:{opacity:`${p/100}`,fontSize:"200%"},children:B.jsx("div",{style:{opacity:0},children:u.split("").map((g,x)=>B.jsx("span",{style:{position:"relative"},children:B.jsxs("span",{className:Cr.zhanwei,children:[g,B.jsx("span",{className:v("outerName",Cr.outerName),children:g}),d&&B.jsx("span",{className:v("innerName",Cr.innerName),children:g})]})},g+x))})}),B.jsx("div",{className:v("TextBox_showName",Cr.TextBox_showName),style:{fontSize:"200%"},children:u.split("").map((g,x)=>B.jsx("span",{style:{position:"relative"},children:B.jsxs("span",{className:Cr.zhanwei,children:[g,B.jsx("span",{className:v("outerName",Cr.outerName),children:g}),d&&B.jsx("span",{className:v("innerName",Cr.innerName),children:g})]})},g+x))},u)]}),B.jsx("div",{className:v("text",Cr.text),style:{fontSize:c,flexFlow:"column",overflow:"hidden",paddingLeft:"0.1em"},children:m})]})]})})}const lV=navigator.userAgent,sLe=/firefox/i.test(lV),lLe=/^((?!chrome|android).)*safari/i.test(lV),uLe=()=>{const[t,e]=ve.useState(!0);ve.useEffect(()=>{const g=()=>{const x=Tm.height,b=Tm.width,S=window.innerHeight,w=window.innerWidth,A=S/x,C=w/b,O=w/x,P=S/b;[A,C,O,P].forEach(I=>{I<=.2?e(!1):e(!0)})};return window.addEventListener("resize",g),g(),()=>{window.removeEventListener("resize",g)}},[]);const r=it(g=>g.stage),n=it(g=>g.userData),i=Y5(n.optionData.textSpeed),a=i_e(n.optionData.textSpeed);let o=E3(n.optionData.textSize)+"%";const s=jMe(),c=r.showText!==""||r.showName!=="";let l=n.optionData.textSize;c&&r.showTextSize!==-1&&(o=E3(r.showTextSize)+"%",l=r.showTextSize);const u=Wy(n.optionData.textSize).with(ml.small,()=>3).with(ml.medium,()=>2).with(ml.large,()=>2).default(()=>2),f=uV(r.showText,u),h=r.showName,d=r.currentConcatDialogPrev,p=r.currentDialogKey,v=r.miniAvatar,y=n.optionData.textboxOpacity,m=oLe;return B.jsx(m,{textArray:f,isText:c,textDelay:i,showName:h,currentConcatDialogPrev:d,fontSize:o,currentDialogKey:p,isSafari:lLe,isFirefox:sLe,miniAvatar:v,textDuration:a,font:s,textSizeState:l,lineLimit:u,isUseStroke:t,textboxOpacity:y})};function w3(t){return!!t.match(/[\u4e00-\u9fa5]|[\u0800-\u4e00]|[\uac00-\ud7ff]/)}function uV(t,e,r){return t.split("|").map(o=>fLe(o)).map(o=>{const s=[];return o.forEach((c,l)=>{Wy(c.type).with("SegmentType.String",()=>{const u=cLe(c.value);s.push(...u)}).endsWith("SegmentType.Link",()=>{const u=c.value,f=B.jsxs("ruby",{children:[u.text,B.jsx("rt",{children:u.link})]},l+u.text);s.push(f)})}),s}).slice(0,r?void 0:e)}function cLe(t){if(!t)return[];const e=[];let r="",n=w3(t[0]);const i=a=>/[!-\/:-@\[-`{-~\u2000-\u206F\u3000-\u303F\uff00-\uffef]/g.test(a);for(const a of t)if(a===" ")r&&(e.push(r),r=""),e.push(" "),n=!1;else if(w3(a)&&!i(a))!n&&r&&(e.push(r),r=""),e.push(a),n=!0;else{if(i(a)){r?(r+=a,e.push(r),r=""):e.length>0?e[e.length-1]+=a:e.push(a);continue}n&&r&&(e.push(r),r=""),r+=a,n=!1}return r&&e.push(r),e}function fLe(t){const e=/(\[(.*?)\]\((.*?)\))|([^\[\]]+)/g,r=[];let n;for(;(n=e.exec(t))!==null;)if(n[1]){const i=n[2],a=n[3];r.push({type:"SegmentType.Link",value:{text:i,link:a}})}else{const i=n[0];r.push({type:"SegmentType.String",value:i})}return r}async function A3(t){if(!window.isSafari||!t.toLowerCase().endsWith(".ogg"))return t;try{const r=await(await fetch(t)).arrayBuffer();return await hLe(r)}catch(e){throw console.error("Error fetching or decoding Ogg file:",e),e}}function hLe(t){return new Promise((e,r)=>{let n=new Uint8Array(t),i=new Worker("./decoderWorker.js"),a=new Worker("./waveWorker.js"),o=8e3;i.postMessage({command:"init",decoderSampleRate:o,outputBufferSampleRate:o}),a.postMessage({command:"init",wavBitDepth:16,wavSampleRate:o}),i.onmessage=function(s){s.data===null?a.postMessage({command:"done"}):a.postMessage({command:"encode",buffers:s.data},s.data.map(function(c){return c.buffer}))},a.onmessage=function(s){if(s.data.message==="page"){let c=new Blob([s.data.page],{type:"audio/wav"}),l=URL.createObjectURL(c);e(l)}},i.postMessage({command:"decode",pages:n},[n.buffer])})}const dLe=()=>{var m;const t=it(g=>g.stage),e=it(g=>g.GUI.titleBgm),r=it(g=>g.GUI.showTitle),n=it(g=>g.userData),i=n.optionData.volumeMain,a=i*.01*n.optionData.vocalVolume*.01*t.vocalVolume*.01,o=i*.01*n.optionData.bgmVolume*.01*t.bgm.volume*.01,s=t.bgm.enter,c=t.uiSe,l=i*.01*(((m=n.optionData)==null?void 0:m.seVolume)??100)*.01,u=i*.01*(n.optionData.uiSeVolume??50)*.01,f=it(g=>g.GUI.isEnterGame),[h,d]=ve.useState(""),[p,v]=ve.useState(setTimeout(()=>{},0)),y=(g,x,b)=>{b>=0?g.volume=0:g.volume=x;const S=10,w=x/b*S,A=()=>{const C=setTimeout(()=>{g.volume+w>=x?g.volume=x:g.volume+w<=0?(g.volume=0,le.dispatch(lt({key:"bgm",value:{src:"",enter:0,volume:100}}))):(g.volume+=w,A())},S);v(C)};A()};return ve.useEffect(()=>{clearTimeout(p);const g=document.getElementById("currentBgm");g&&(s===0?g.volume=o:y(g,o,s))},[h,o,s]),ve.useEffect(()=>{(async()=>{const x=await A3(r?e:t.bgm.src);d(x)})()},[r,e,t.bgm.src]),ve.useEffect(()=>{Ge.debug(`设置背景音量：${o}`)},[o]),ve.useEffect(()=>{Ge.debug(`设置背景音量淡入时间: ${s}`)},[s]),ve.useEffect(()=>{Ge.debug(`设置语音音量：${a}`);const g=document.getElementById("currentVocal");g&&(g.volume=a.toString())},[a]),ve.useEffect(()=>{if(c==="")return;(async()=>{const x=await A3(c),b=document.createElement("audio");b.src=x,b.loop=!1,isNaN(u)?(Ge.error("UI SE Vol is NaN"),b.volume=isNaN(l)?i/100:l/100):b.volume=u,b.play(),b.addEventListener("ended",()=>{b.remove()}),le.dispatch(lt({key:"uiSe",value:""}))})()},[c]),ve.useEffect(()=>{Ge.debug(`设置音效音量: ${l}`)},[l]),ve.useEffect(()=>{Ge.debug(`设置用户界面音效音量: ${u}`)},[u]),B.jsxs("div",{children:[B.jsx("audio",{id:"currentBgm",src:h,loop:!0,autoPlay:f},r.toString()+h),B.jsx("audio",{id:"currentVocal",src:t.playVocal})]})},pLe=()=>{const t=it(i=>i.stage);let e="100%",r="100%",n="0";return t.enableFilm!==""&&(r="76%",n="12%"),B.jsx("div",{className:Hs.FullScreenPerform_main,style:{width:e,height:r,top:n},children:B.jsx("div",{id:"videoContainer"})})},vLe="_TextBox_EventHandler_449dq_2",gLe="_TextBox_main_449dq_10",mLe="_showSoftly_449dq_1",yLe="_TextBox_textElement_449dq_38",_Le="_TextBox_textElement_start_449dq_43",xLe="_TextDelayShow_449dq_1",bLe="_TextBox_textElement_Settled_449dq_48",SLe="_TextBox_showName_449dq_52",ELe="_miniAvatarContainer_449dq_68",wLe="_miniAvatarImg_449dq_76",JS={TextBox_EventHandler:vLe,TextBox_main:gLe,showSoftly:mLe,TextBox_textElement:yLe,TextBox_textElement_start:_Le,TextDelayShow:xLe,TextBox_textElement_Settled:bLe,TextBox_showName:SLe,miniAvatarContainer:ELe,miniAvatarImg:wLe},ALe=()=>{const t=it(o=>o.stage),e=it(o=>o.userData);ve.useEffect(()=>{});const r=Voe.textInitialDelay-20*e.optionData.textSpeed,n=e.optionData.textSize*50+200+"%",a=t.showText.split("").map((o,s)=>{let c=s*r,l=t.currentConcatDialogPrev.length;return t.currentConcatDialogPrev!==""&&s>=l&&(c=c-l*r),s<l?B.jsx("span",{id:`${c}`,className:JS.TextBox_textElement_Settled,style:{animationDelay:`${c}ms`},children:o},t.currentDialogKey+s):B.jsx("span",{id:`${c}`,className:JS.TextBox_textElement_start,style:{animationDelay:`${c}ms`},children:o},t.currentDialogKey+s)});return B.jsx("div",{id:"textBoxMain",className:JS.TextBox_main,children:B.jsx("div",{style:{fontSize:n},children:a})})};function CLe(t){const e=t.bgName;ve.useEffect(()=>{var n,i,a;const r="bg-main";if(e!==""){const{bgX:o,bgY:s}=t,c=(n=H.gameplay.pixiStage)==null?void 0:n.getStageObjByKey(r);c&&c.sourceUrl!==e&&C3(c),(i=H.gameplay.pixiStage)==null||i.addBg(r,e,o,s),zp(e),Ge.debug("重设背景"),setTimeout(()=>{const{duration:l,animation:u}=Js("bg-main","enter",!0);H.gameplay.pixiStage.registerPresetAnimation(u,"bg-main-softin",r,t.effects),setTimeout(()=>H.gameplay.pixiStage.removeAnimationWithSetEffects("bg-main-softin"),l)},0)}else{const o=(a=H.gameplay.pixiStage)==null?void 0:a.getStageObjByKey(r);o&&C3(o)}},[e])}function C3(t){var i,a;(i=H.gameplay.pixiStage)==null||i.removeAnimationWithSetEffects("bg-main-softin");const e=t.key;t.key="bg-main-off",(a=H.gameplay.pixiStage)==null||a.removeStageObjectByKey(e);const{duration:r,animation:n}=Js("bg-main-off","exit",!0);H.gameplay.pixiStage.registerAnimation(n,"bg-main-softoff","bg-main-off"),setTimeout(()=>{var o,s;(o=H.gameplay.pixiStage)==null||o.removeAnimation("bg-main-softoff"),(s=H.gameplay.pixiStage)==null||s.removeStageObjectByKey("bg-main-off")},r)}function TLe(t){const{figNameLeft:e,figName:r,figNameRight:n,freeFigure:i,live2dMotion:a,live2dExpression:o}=t;ve.useEffect(()=>{var s;for(const c of a)(s=H.gameplay.pixiStage)==null||s.changeModelMotionByKey(c.target,c.motion)},[a]),ve.useEffect(()=>{var s;for(const c of o)(s=H.gameplay.pixiStage)==null||s.changeModelExpressionByKey(c.target,c.expression)},[o]),ve.useEffect(()=>{var l,u;const s="fig-center",c="fig-center-softin";if(r!==""){const f=(l=H.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(s);f&&f.sourceUrl!==r&&ps(f,c,t.effects),Zh(void 0,s,r,"center"),Ge.debug("中立绘已重设"),setTimeout(()=>{const{duration:h,animation:d}=Js(s,"enter");H.gameplay.pixiStage.registerPresetAnimation(d,c,s,t.effects),setTimeout(()=>H.gameplay.pixiStage.removeAnimationWithSetEffects(c),h)},0)}else{Ge.debug("移除中立绘");const f=(u=H.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==r&&ps(f,c,t.effects)}},[r]),ve.useEffect(()=>{var l,u;const s="fig-left",c="fig-left-softin";if(e!==""){const f=(l=H.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(s);f&&f.sourceUrl!==e&&ps(f,c,t.effects),Zh(void 0,s,e,"left"),Ge.debug("左立绘已重设"),setTimeout(()=>{const{duration:h,animation:d}=Js(s,"enter");H.gameplay.pixiStage.registerPresetAnimation(d,c,s,t.effects),setTimeout(()=>H.gameplay.pixiStage.removeAnimationWithSetEffects(c),h)},0)}else{Ge.debug("移除左立绘");const f=(u=H.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==e&&ps(f,c,t.effects)}},[e]),ve.useEffect(()=>{var l,u;const s="fig-right",c="fig-right-softin";if(n!==""){const f=(l=H.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(s);f&&f.sourceUrl!==n&&ps(f,c,t.effects),Zh(void 0,s,n,"right"),Ge.debug("右立绘已重设"),setTimeout(()=>{const{duration:h,animation:d}=Js(s,"enter");H.gameplay.pixiStage.registerPresetAnimation(d,c,s,t.effects),setTimeout(()=>H.gameplay.pixiStage.removeAnimationWithSetEffects(c),h)},0)}else{const f=(u=H.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==n&&ps(f,c,t.effects)}},[n]),ve.useEffect(()=>{var c,l,u;for(const f of i){const h=`${f.key}`,d=`${f.key}-softin`;if(f.name!==""){const p=(c=H.gameplay.pixiStage)==null?void 0:c.getStageObjByKey(h);p?p.sourceUrl!==f.name&&(ps(p,d,t.effects),Zh(void 0,h,f.name,f.basePosition),Ge.debug(`${f.key}立绘已重设`),setTimeout(()=>{const{duration:v,animation:y}=Js(h,"enter");H.gameplay.pixiStage.registerPresetAnimation(y,d,h,t.effects),setTimeout(()=>H.gameplay.pixiStage.removeAnimationWithSetEffects(d),v)},0)):(Zh(void 0,h,f.name,f.basePosition),Ge.debug(`${f.key}立绘已重设`),setTimeout(()=>{const{duration:v,animation:y}=Js(h,"enter");H.gameplay.pixiStage.registerPresetAnimation(y,d,h,t.effects),setTimeout(()=>H.gameplay.pixiStage.removeAnimationWithSetEffects(d),v)},0))}else{const p=(l=H.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(h);p&&p.sourceUrl!==f.name&&ps(p,d,t.effects)}}const s=(u=H.gameplay.pixiStage)==null?void 0:u.getFigureObjects();if(s){for(const f of s)if(!(f.key==="fig-left"||f.key==="fig-center"||f.key==="fig-right"||f.key.endsWith("-off"))){const h=f.key;if(i.findIndex(p=>p.key===h)<0){const p=`${f.key}-softin`;ps(f,p,t.effects)}}}},[i])}function ps(t,e,r){var c,l,u;if((c=H.gameplay.pixiStage)==null||c.removeAnimationWithSetEffects(e),H.gameplay.isFast){Ge.info("快速模式，立刻关闭立绘"),(l=H.gameplay.pixiStage)==null||l.removeStageObjectByKey(t.key);return}const n=t.key;t.key=t.key+"-off",(u=H.gameplay.pixiStage)==null||u.removeStageObjectByKey(n);const i=t.key,a=i+"-softoff",{duration:o,animation:s}=Js(i,"exit");H.gameplay.pixiStage.registerPresetAnimation(s,a,i,r),setTimeout(()=>{var f,h;(f=H.gameplay.pixiStage)==null||f.removeAnimation(a),(h=H.gameplay.pixiStage)==null||h.removeStageObjectByKey(i)},o)}function Zh(t,...e){var n,i;const r=e[1];return r.endsWith(".json")?OLe(...e):r.endsWith(".skel")?(n=H.gameplay.pixiStage)==null?void 0:n.addSpineFigure(...e):(i=H.gameplay.pixiStage)==null?void 0:i.addFigure(...e)}function OLe(...t){}function PLe(t){const e=t.effects;setTimeout(()=>{RLe(e)},10)}function RLe(t){var r,n,i,a;const e=((r=H.gameplay.pixiStage)==null?void 0:r.getAllStageObj())??[];for(const o of e){const s=o.key,c=t.find(u=>u.target===s);if(!(((n=H.gameplay.pixiStage)==null?void 0:n.getAllLockedObject())??[]).includes(s))if(c){const u=(i=H.gameplay.pixiStage)==null?void 0:i.getStageObjByKey(s);if(u){const f=u.pixiContainer;Object.assign(f,T3(c.transform))}}else{const u=(a=H.gameplay.pixiStage)==null?void 0:a.getStageObjByKey(s);if(u){const f=u.pixiContainer;Object.assign(f,T3(l2))}}}}function T3(t){if(!t)return{};const{position:e,...r}=t;return{...r,x:e.x,y:e.y}}function ILe(){const t=it(e=>e.stage);return CLe(t),TLe(t),PLe(t),B.jsx("div",{style:{display:"none"}})}const FLe="_introContainer_119k8_1",kLe={introContainer:FLe};function DLe(){return B.jsx("div",{className:kLe.introContainer,id:"introContainer"})}const MLe="_variableNameWrapper_eflox_1",LLe={variableNameWrapper:MLe},BLe=()=>{var r,n;const t=it(i=>i.stage),e=ve.useMemo(()=>{const i=new Map,a=t.showValues;return a!=null&&a.length&&a.forEach(o=>{i.set(o.key,o.value)}),i},[t]);return B.jsx(B.Fragment,{children:((r=t.showValueList)==null?void 0:r.length)&&((n=t.showValueList)==null?void 0:n.map(i=>i.isShowValueSWitch?B.jsx("div",{className:LLe.variableNameWrapper,style:{position:"fixed",left:i.showValueAxisX+"px",top:i.showValueAxisY+"px"},children:e.get(i.showValueName)||""}):null))||null})};function O3(t){const e=document.getElementById("textBoxMain");if(!e)return!1;let r=e.getBoundingClientRect();return t.clientX>r.left&&t.clientX<r.right&&t.clientY>r.top&&t.clientY<r.bottom}function NLe(t,e,r){!e.controlsVisibility&&O3(t)&&r(_t({component:"controlsVisibility",visibility:!0})),e.controlsVisibility&&!O3(t)&&r(_t({component:"controlsVisibility",visibility:!1}))}function ULe(t,e){var i;return!!(!e.showTextBox||t.isDisableTextbox||!(t.showText!==""||t.showName!=="")||((i=document.getElementById("introContainer"))==null?void 0:i.style.display)==="block")}let eE=null;function jLe(t,e,r,n){ULe(e,r)?(eE&&clearTimeout(eE),n(_t({component:"controlsVisibility",visibility:!0})),eE=setTimeout(()=>{n(_t({component:"controlsVisibility",visibility:!1}))},1e3)):NLe(t,r,n)}const $Le=()=>{const t=it(n=>n.stage),e=it(n=>n.GUI),r=Br();return Abe(),B.jsxs("div",{className:QS.MainStage_main,children:[B.jsx(pLe,{}),B.jsx(ILe,{}),B.jsx("div",{id:"pixiContianer",className:QS.pixiContainer,style:{zIndex:HP?"-5":void 0}}),B.jsx("div",{id:"chooseContainer",className:QS.chooseContainer}),e.showTextBox&&t.enableFilm===""&&!t.isDisableTextbox&&B.jsx(uLe,{}),e.showTextBox&&t.enableFilm!==""&&B.jsx(ALe,{}),B.jsx(dLe,{}),B.jsx("div",{onClick:()=>{if(!e.showTextBox){r(_t({component:"showTextBox",visibility:!0}));return}H2(),ln()},onDoubleClick:()=>{H.events.fullscreenDbClick.emit()},id:"FullScreenClick",style:{width:"100%",height:"100%",position:"absolute",zIndex:"12",top:"0"},onMouseMove:n=>!e.showControls&&jLe(n,t,e,r)}),B.jsx(DLe,{}),t.isShowValueSWitch&&B.jsx(BLe,{})]})},VLe=""+new URL("gaming-continue.png",import.meta.url).href,GLe=""+new URL("gaming-stop.png",import.meta.url).href,WLe=()=>{const t=Ho("gaming."),{i18n:e}=x_(),{playSeEnter:r,playSeClick:n,playSeDialogOpen:i}=ri();ve.useState(!1);const[a,o]=ve.useState(!1),[s,c]=ve.useState(!1);let l=null;const f=e.language==="fr";let h="150%";f&&(h="125%");const d=it(O=>O.GUI),p=it(O=>O.stage),v=Br(),y=it(O=>O.saveData.saveData);if(t("noSaving"),y[0]){const O=y[0];ci.slPreviewMain,ci.imgContainer,O.previewImage,ci.textContainer,O.nowStageState.showName,O.nowStageState.showText}const m=async()=>{for(let O=1;O<=20;O++){const P=(O-1)*10+1,I=P+9;await Wp(P,I);const R=le.getState().saveData.saveData;for(let F=1;F<R.length;F++){const D=(O-1)*10+F;if(!R[F])return D}}return(20-1)*10+9},g=async O=>{if(O.stopPropagation(),n(),d.showFavorited)return;v(Qd(!0));const P=await m();tm(P),jn()},x=O=>{c(!0);const P=()=>{c(!1),clearTimeout(l),clearInterval(l),document.removeEventListener("mouseup",P)};document.addEventListener("mouseup",P),l=setTimeout(()=>{l=setInterval(()=>{O==="fallBack"?b():O==="forward"&&S()},200)},500)},b=()=>{s||n();const O=H.videoManager.currentPlayingVideo;H.videoManager.backward(O)},S=()=>{s||n();const O=H.videoManager.currentPlayingVideo;H.videoManager.forward(O)},w=()=>{n();const O=H.videoManager.currentPlayingVideo;a?(o(!1),H.videoManager.playVideo(O)):(o(!0),H.videoManager.pauseVideo(O))},A=()=>{var I,R,F;let O=!0;if((F=(R=(I=H.gameplay)==null?void 0:I.performController)==null?void 0:R.performList)==null||F.forEach(D=>{D.performName==="choose"&&(O=!1)}),!O)return;n();const P=H.videoManager.currentPlayingVideo;H.videoManager.destroy(P),H.gameplay.isFast=!0,H.gameplay.isSyncingWithOrigine=!0,ln(),setTimeout(()=>{H.gameplay.isFast=!1,H.gameplay.isSyncingWithOrigine=!1},1e3)},C=()=>{var P;const O=(P=d.gameUIConfigs[Bn.title])==null?void 0:P.buttons[Ra.Game_extra_button];return!(!O||O.args.hide)};return B.jsx(B.Fragment,{children:d.showTextBox&&p.enableFilm===""&&B.jsxs("div",{className:ci.main,style:{visibility:d.controlsVisibility?"visible":"hidden"},children:[B.jsx("span",{className:ci.fallBack,onMouseEnter:r,onClick:()=>{b()},onMouseDown:()=>x("fallBack")}),B.jsx("span",{className:ci.pause,onMouseEnter:r,onClick:w,children:B.jsx("img",{src:a?GLe:VLe,className:ci.icon})}),B.jsx("span",{className:ci.advance,onMouseEnter:r,onClick:S,onMouseDown:()=>x("forward")}),B.jsx("span",{className:ci.autoplay,onMouseEnter:r,onClick:A}),C()&&B.jsxs("span",{className:ci.singleButton,style:{fontSize:h},onClick:g,onMouseEnter:r,children:[B.jsx("span",{className:ci.button_icon}),B.jsx("span",{className:ci.button_text,children:t(`${d.showFavorited?"buttons.collected":"buttons.collection"}`)})]})]})})};var zLe=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function P3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function R3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P3(Object(r),!0).forEach(function(n){HLe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HLe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XLe(t,e){if(t==null)return{};var r=YLe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YLe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var qLe={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function KLe(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function ZLe(t,e,r){var n=typeof e.fill=="string"?[e.fill]:e.fill||[],i=[],a=e.theme||r.theme;switch(a){case"outline":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none");break;case"filled":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("#FFF"),i.push("#FFF");break;case"two-tone":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone);break;case"multi-color":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.multiColor.outFillColor),i.push(typeof n[2]=="string"?n[2]:r.colors.multiColor.innerStrokeColor),i.push(typeof n[3]=="string"?n[3]:r.colors.multiColor.innerFillColor);break}return{size:e.size||r.size,strokeWidth:e.strokeWidth||r.strokeWidth,strokeLinecap:e.strokeLinecap||r.strokeLinecap,strokeLinejoin:e.strokeLinejoin||r.strokeLinejoin,colors:i,id:t}}var cV=ve.createContext(qLe);cV.Provider;function b_(t,e,r){return function(n){var i=n.size,a=n.strokeWidth,o=n.strokeLinecap,s=n.strokeLinejoin,c=n.theme,l=n.fill,u=n.className,f=n.spin,h=XLe(n,zLe),d=ve.useContext(cV),p=ve.useMemo(KLe,[]),v=ZLe(p,{size:i,strokeWidth:a,strokeLinecap:o,strokeLinejoin:s,theme:c,fill:l},d),y=[d.prefix+"-icon"];return y.push(d.prefix+"-icon-"+t),e&&d.rtl&&y.push(d.prefix+"-icon-rtl"),f&&y.push(d.prefix+"-icon-spin"),u&&y.push(u),ei.createElement("span",R3(R3({},h),{},{className:y.join(" ")}),r(v))}}const QLe=b_("close-small",!1,function(t){return ei.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},ei.createElement("path",{d:"M14 14L34 34",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),ei.createElement("path",{d:"M14 34L34 14",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),JLe=b_("hamburger-button",!1,function(t){return ei.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},ei.createElement("path",{d:"M7.94971 11.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),ei.createElement("path",{d:"M7.94971 23.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),ei.createElement("path",{d:"M7.94971 35.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),eBe=b_("return",!0,function(t){return ei.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},ei.createElement("path",{d:"M12.9998 8L6 14L12.9998 21",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),ei.createElement("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),tBe=b_("volume-notice",!0,function(t){return ei.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},ei.createElement("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),ei.createElement("path",{d:"M32 15L32 15C32.6232 15.5565 33.1881 16.1797 33.6841 16.8588C35.1387 18.8504 36 21.3223 36 24C36 26.6545 35.1535 29.1067 33.7218 31.0893C33.2168 31.7885 32.6391 32.4293 32 33",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),ei.createElement("path",{d:"M34.2359 41.1857C40.0836 37.6953 44 31.305 44 24C44 16.8085 40.2043 10.5035 34.507 6.97906",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}))}),rBe=()=>{var h,d;const t=Ho("gaming."),{playSeEnter:e,playSeClick:r}=ri(),n=it(p=>p.GUI),i=Br(),a="0.8em",[o,s]=ve.useState(!1),[c,l]=ve.useState(!1);let u=ve.useRef();const f=ve.useMemo(()=>{let p=[];for(let v=0;v<H.backlogManager.getBacklog().length;v++){const y=H.backlogManager.getBacklog()[v],m=uV(y.currentStageState.showText,3,!0),x=nBe(m).map((S,w)=>B.jsx("div",{children:S.map((A,C)=>A==="<br />"?B.jsx("br",{},`br${C}`):A)},`backlog-line-${w}`)),b=B.jsxs("div",{className:qn.backlog_item,style:{animationDelay:`${20*(H.backlogManager.getBacklog().length-v)}ms`},children:[B.jsxs("div",{className:qn.backlog_func_area,children:[B.jsxs("div",{className:qn.backlog_item_button_list,children:[B.jsx("div",{onClick:S=>{r(),axe(v),S.preventDefault(),S.stopPropagation()},onMouseEnter:e,className:qn.backlog_item_button_element,children:B.jsx(eBe,{theme:"outline",size:a,fill:"#ffffff",strokeWidth:3})}),y.currentStageState.vocal?B.jsx("div",{onClick:()=>{r();const S=document.getElementById("backlog_audio_play_element_"+v);if(S){S.currentTime=0;const w=le.getState().userData,A=w.optionData.volumeMain;S.volume=A*.01*w.optionData.vocalVolume*.01,S==null||S.play()}},onMouseEnter:e,className:qn.backlog_item_button_element,children:B.jsx(tBe,{theme:"outline",size:a,fill:"#ffffff",strokeWidth:3})}):null]}),B.jsx("div",{className:qn.backlog_item_content_name,children:y.currentStageState.showName})]}),B.jsx("div",{className:qn.backlog_item_content,children:B.jsx("span",{className:qn.backlog_item_content_text,children:x})}),B.jsx("audio",{id:"backlog_audio_play_element_"+v,src:y.currentStageState.vocal})]},"backlogItem"+y.currentStageState.showText+y.saveScene.currentSentenceId);p.unshift(b)}return p},[((d=(h=H.backlogManager.getBacklog()[H.backlogManager.getBacklog().length-1])==null?void 0:h.saveScene)==null?void 0:d.currentSentenceId)??0]);return ve.useEffect(()=>{n.showBacklog?(u.current&&clearTimeout(u.current),s(!1),l(!0),setTimeout(()=>{l(!1)},0)):u.current=setTimeout(()=>{s(!0),u.current=void 0},700+80)},[n.showBacklog]),B.jsx(B.Fragment,{children:B.jsxs("div",{className:`
          ${n.showBacklog?qn.Backlog_main:qn.Backlog_main_out}
          ${o?qn.Backlog_main_out_IndexHide:""}
          `,children:[B.jsxs("div",{className:qn.backlog_top,children:[B.jsx(QLe,{className:qn.backlog_top_icon,onClick:()=>{r(),i(_t({component:"showBacklog",visibility:!1})),i(_t({component:"showTextBox",visibility:!0}))},onMouseEnter:e,theme:"outline",size:"4em",fill:"#ffffff",strokeWidth:3}),B.jsx("div",{className:qn.backlog_title,onClick:()=>{Ge.info("Rua! Testing")},children:t("buttons.backlog")})]}),n.showBacklog&&B.jsx("div",{className:`${qn.backlog_content} ${c?qn.Backlog_main_DisableScroll:""}`,children:f})]})})};function nBe(t){let e=[],r="";for(let n=0;n<t.length;n++){const i=t[n];typeof i=="string"?r+=i:(r!==""&&(e.push(r),r=""),e.push(i))}return r!==""&&e.push(r),e}const iBe="_extra_idelc_2",aBe="_extra_top_idelc_14",oBe="_extra_top_icon_idelc_19",sBe="_extra_icon_softin_idelc_1",lBe="_extra_title_idelc_39",uBe="_mainContainer_idelc_50",cBe="_bgmContainer_idelc_58",fBe="_bgmListContainer_idelc_75",hBe="_bgmPlayerMain_idelc_90",dBe="_bgmControlButton_idelc_94",pBe="_bgmName_idelc_109",vBe="_bgmElement_idelc_117",gBe="_bgmElement_active_idelc_147",mBe="_cgMain_idelc_152",yBe="_cgContainer_idelc_157",_Be="_cgElement_idelc_169",xBe="_cgShowDiv_idelc_184",bBe="_cgShowDivWarpper_idelc_193",SBe="_cgNav_idelc_202",EBe="_cgNav_active_idelc_221",wBe="_showFullContainer_idelc_231",ABe="_showFullCgMain_idelc_244",CBe="_fullCgIn_idelc_1",TBe="_editDialogMark_idelc_265",OBe="_editDialog_idelc_265",PBe="_editDialog_content_idelc_287",RBe="_editDialog_footer_idelc_303",IBe="_button_idelc_310",FBe="_bgmElement_In_idelc_1",Ks={extra:iBe,extra_top:aBe,extra_top_icon:oBe,extra_icon_softin:sBe,extra_title:lBe,mainContainer:uBe,bgmContainer:cBe,bgmListContainer:fBe,bgmPlayerMain:hBe,bgmControlButton:dBe,bgmName:pBe,bgmElement:vBe,bgmElement_active:gBe,cgMain:mBe,cgContainer:yBe,cgElement:_Be,cgShowDiv:xBe,cgShowDivWarpper:bBe,cgNav:SBe,cgNav_active:EBe,showFullContainer:wBe,showFullCgMain:ABe,fullCgIn:CBe,editDialogMark:TBe,editDialog:OBe,editDialog_content:PBe,editDialog_footer:RBe,button:IBe,bgmElement_In:FBe},kBe=t=>{const[e,r]=ve.useState("");ve.useEffect(()=>{t.value&&r(t.value)},[]);const n=()=>{t.onConfirm(e)},i=()=>{t.onCancel()};return B.jsxs(B.Fragment,{children:[B.jsx("div",{className:Ks.editDialogMark}),B.jsxs("div",{className:Ks.editDialog,children:[B.jsxs("div",{className:Ks.editDialog_content,children:[B.jsx("label",{children:"重新命名为："}),B.jsx("input",{value:e,onChange:a=>{r(a.target.value)}})]}),B.jsxs("div",{className:Ks.editDialog_footer,children:[B.jsx("span",{className:Ks.button,onClick:n,children:"确认"}),B.jsx("span",{className:Ks.button,onClick:i,children:"取消"})]})]})]})};let $v="",I3=0;const DBe=()=>{const{playSeClick:t,playSeEnter:e,playSePageChange:r}=ri(),n=it(g=>g.userData),i=it(g=>g.saveData),a=Br(),[o,s]=ve.useState(!1),c=[];for(let g=1;g<=20;g++){let x=Je.Save_Load_top_button+" "+Je.Load_top_button;g===n.optionData.slPage&&(x=x+" "+Je.Save_Load_top_button_on+" "+Je.Load_top_button_on);const b=B.jsx("div",{onClick:()=>{a(GT(g)),jn(),r()},onMouseEnter:e,className:x,children:B.jsx("div",{className:Je.Save_Load_top_button_text,children:g})},"Load_element_page"+g);c.push(b)}const l=[],u=(n.optionData.slPage-1)*10+1,f=u+9;ve.useEffect(()=>{Wp(u,f)},[u,f]);const h=(g,x,b)=>{g.stopPropagation(),$v=x.saveName||x.saveTime,I3=b,setTimeout(()=>{s(!0)},100)},d=()=>{s(!1),$v=""},p=g=>{$v="",tm(I3,g),jn(),s(!1)};let v=0;for(let g=u;g<=f;g++){v++;const x=i.saveData[g];let b=B.jsx("div",{});x&&(b=B.jsxs(B.Fragment,{children:[B.jsx("div",{className:Je.Save_Load_content_element_top,children:B.jsx("div",{className:Je.Save_Load_content_element_top_index+" "+Je.Load_content_elememt_top_index,children:x.index})}),B.jsx("div",{className:Je.Save_Load_content_miniRen,children:B.jsx("img",{className:Je.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:x.previewImage})}),B.jsx("div",{children:B.jsx("div",{className:Je.Save_Load_content_element_top_date+" "+Je.Load_content_element_top_date,style:{width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},onClick:w=>h(w,x,g),title:`${x.saveName||x.saveTime}`,children:x.saveName||x.saveTime})})]}));const S=B.jsx("div",{onClick:()=>{a(Qd(!0)),sU(g,!0),t()},onMouseEnter:e,className:Je.Save_Load_content_element,style:{animationDelay:`${v*30}ms`},children:b},"loadElement_"+g);l.push(S)}const y=Ho("menu."),m=()=>{t(),a(_t({component:"showExtra",visibility:!1})),a(ur.setLoadVideo(!1))};return B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:Je.Save_Load_main,children:[B.jsxs("div",{className:Je.Save_Load_top,children:[B.jsx("div",{className:`${Je.goback} ${Je.extraVideo_goback}`,onClick:m,onMouseEnter:e}),B.jsx("div",{className:Je.Save_Load_title,children:B.jsx("div",{className:Je.Load_title_text,children:y("extra.title")})}),B.jsx("div",{className:Je.Save_Load_top_buttonList,children:c})]}),B.jsx("div",{className:Je.Save_Load_content,id:"Load_content_page_"+n.optionData.slPage,children:l})]}),o&&B.jsx(kBe,{value:$v,onCancel:d,onConfirm:p})]})};function MBe(){ri();const t=it(r=>r.GUI.showExtra),e=Br();return Ho("extra."),ve.useEffect(()=>{t&&e(ur.setLoadVideo(!0))},[t]),B.jsx(B.Fragment,{children:t&&B.jsx("div",{className:Ks.extra,children:B.jsx("div",{className:Ks.mainContainer,children:B.jsx(DBe,{})})})})}const LBe="_tag_yghix_2",BBe="_container_yghix_17",NBe="_showContainer_yghix_1",UBe="_singleButton_yghix_33",jBe="_button_text_yghix_37",Dn={tag:LBe,container:BBe,showContainer:NBe,singleButton:UBe,button_text:jBe},S_=()=>{const t=le.dispatch;N2(),z2(),sf(),t(lt({key:"playVocal",value:""})),t(_t({component:"showTitle",visibility:!0})),t(ur.setIsShowUnlock(!1)),t(ur.setShowStoryline(!1)),zp(le.getState().GUI.titleBg)},$Be=()=>{const t=Nu(!1),e=it(a=>a.stage),r=Br(),n=(a,o)=>{r(_t({component:a,visibility:o}))},i=a=>{r(im(a))};return B.jsx(B.Fragment,{children:e.enableFilm!==""&&B.jsxs(B.Fragment,{children:[B.jsx("div",{className:Dn.tag,onClick:()=>{t.set(!t.value)},children:B.jsx(JLe,{theme:"outline",size:"32",fill:"#fff"})}),t.value&&B.jsxs("div",{className:Dn.container,children:[B.jsx("span",{className:Dn.singleButton,onClick:()=>{n("showBacklog",!0),n("showTextBox",!1),t.set(!t.value)},children:B.jsx("span",{className:Dn.button_text,children:"剧情回想 / BACKLOG"})}),B.jsx("span",{className:Dn.singleButton,onClick:()=>{t.set(!t.value);let a=document.getElementById("currentVocal");a!==null&&(a.currentTime=0,a.pause(),a==null||a.play())},children:B.jsx("span",{className:Dn.button_text,children:"重播语音 / REPLAY VOICE"})}),B.jsx("span",{id:"Button_ControlPanel_auto",className:Dn.singleButton,onClick:()=>{A1e(),t.set(!t.value)},children:B.jsx("span",{className:Dn.button_text,children:"自动模式 / AUTO"})}),B.jsx("span",{id:"Button_ControlPanel_fast",className:Dn.singleButton,onClick:()=>{O1e(),t.set(!t.value)},children:B.jsx("span",{className:Dn.button_text,children:"快进 / FAST"})}),B.jsx("span",{className:Dn.singleButton,onClick:()=>{t.set(!t.value),i(qi.Save),n("showMenuPanel",!0)},children:B.jsx("span",{className:Dn.button_text,children:"存档 / SAVE"})}),B.jsx("span",{className:Dn.singleButton,onClick:()=>{t.set(!t.value),i(qi.Load),n("showMenuPanel",!0)},children:B.jsx("span",{className:Dn.button_text,children:"读档 / LOAD"})}),B.jsx("span",{className:Dn.singleButton,onClick:()=>{t.set(!t.value),i(qi.Option),n("showMenuPanel",!0)},children:B.jsx("span",{className:Dn.button_text,children:"选项 / OPTIONS"})}),B.jsx("span",{className:Dn.singleButton,onClick:()=>{t.set(!t.value),S_()},children:B.jsx("span",{className:Dn.button_text,children:"标题 / TITLE"})})]})]})})},VBe="_devPanelMain_11x6i_1",GBe="_devPanelOpener_11x6i_13",F3={devPanelMain:VBe,devPanelOpener:GBe};function WBe(){document.getElementById("pixiCanvas").toBlob(e=>{if(e){const r=document.createElement("a");document.body.append(r),r.download="screenshot",r.href=URL.createObjectURL(e),r.click(),r.remove()}},"image/png")}function zBe(){function t(){return!!window.location.hash.match(/dev/)}const e=Nu(!1),r=Nu(window.location.hash),n=it(c=>c.stage);ve.useEffect(()=>{window.onhashchange=()=>{r.set(window.location.hash)}},[]);const i=t(),{t:a,i18n:o}=x_(),s=B.jsxs(B.Fragment,{children:[B.jsx("div",{onClick:()=>WBe(),children:"Save PIXI Screenshot"}),B.jsxs("div",{children:["Current Language:",o.language]}),B.jsx("div",{onClick:()=>{var c;return(c=H.gameplay.pixiStage)==null?void 0:c.removeAnimation("snow-Ticker")},children:"Remove Snow Ticker"}),B.jsx("div",{children:"Stage State"}),B.jsx("div",{children:JSON.stringify(n,null,"  ")})]});return B.jsxs(B.Fragment,{children:[i&&e.value&&B.jsxs("div",{className:F3.devPanelMain,children:[B.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[B.jsx("div",{onClick:()=>e.set(!1),style:{fontSize:"150%",padding:"0 0 0 15px",cursor:"pointer"},children:"×"}),B.jsx("div",{style:{padding:"0 0 0 15px",fontSize:"115%"},children:"WebGAL DEV PANEL"})]}),B.jsx("div",{style:{padding:"10px 10px 10px 10px",overflow:"auto"},children:s})]}),!e.value&&i&&B.jsx("div",{onClick:()=>e.set(!0),className:F3.devPanelOpener,children:"Open Dev Panel"})]})}function HBe(t){return zf[t]}function XBe(){const{i18n:t}=x_(),e=Zf(n=>n.userData),r=Br();return(n,i=!0)=>{var s;const a=n??((s=e.current)==null?void 0:s.optionData.language)??zf.zhCn,o=HBe(a);t.changeLanguage(o),r(ao({key:"language",value:a})),Ge.info("设置语言: "+o),window==null||window.localStorage.setItem("lang",a.toString()),i&&jn()}}const YBe="_trans_8uz61_2",qBe="_langWrapper_8uz61_10",KBe="_lang_8uz61_10",ZBe="_langSelect_8uz61_29",QBe="_langSelectButton_8uz61_35",Qh={trans:YBe,langWrapper:qBe,lang:KBe,langSelect:ZBe,langSelectButton:QBe};function JBe(){const t=XBe(),[e,r]=ve.useState(!1);ve.useEffect(()=>{(window==null?void 0:window.localStorage.getItem("lang"))||"0"?t(Number(window==null?void 0:window.localStorage.getItem("lang")),!1):r(!0)},[]);const n=i=>{r(!1),t(i)};return B.jsx(B.Fragment,{children:e&&B.jsx("div",{className:Qh.trans,children:B.jsxs("div",{className:Qh.langWrapper,children:[B.jsx("div",{className:Qh.lang,children:"LANGUAGE SELECT"}),B.jsx("div",{className:Qh.langSelect,children:Object.keys(FD).map(i=>B.jsx("div",{className:Qh.langSelectButton,onClick:()=>n(zf[i]),children:FD[i]},i))})]})})})}const e3e=()=>{const t=it(n=>n.GUI),[e,r]=ve.useState(!1);return ve.useEffect(()=>{r(t.showPanicOverlay)},[t.showPanicOverlay]),null};function t3e(){const t=it(i=>i.userData),e=it(i=>i.GUI);Br();const r=t.optionData.fullScreen,n=e.isEnterGame;ve.useEffect(()=>{switch(r){case La.on:{n&&(document.documentElement.requestFullscreen(),zc&&zc.lock(["Escape","F11"]));break}case La.off:{document.fullscreenElement&&(document.exitFullscreen(),zc&&zc.unlock());break}}},[r])}const r3e="_storyLine_rt89d_2",n3e="_goBack_rt89d_12",i3e="_storyLine_content_rt89d_30",a3e="_storyLine_item_rt89d_38",o3e="_info_card_rt89d_47",s3e="_playButton_icon_rt89d_66",l3e="_name_rt89d_83",nu={storyLine:r3e,goBack:n3e,storyLine_content:i3e,storyLine_item:a3e,info_card:o3e,playButton_icon:s3e,name:l3e},u3e=()=>{const{playSeClick:t,playSeEnter:e}=ri(),r=Br(),n=it(u=>u.GUI),i=it(u=>u.stage),a=it(u=>u.saveData.allStorylineData),o=it(u=>u.GUI.gameUIConfigs[Bn.storyline]);ve.useEffect(()=>{w2(),n.showStoryLine&&r(ur.setShowStoryline(!1))},[n.showStoryLine]);const s=()=>{t(),S_(),r(vw(!1))},c=(u,f)=>{u.stopPropagation(),r(vw(!1)),r(ur.setIsShowUnlock(!0)),j2(f.videoData)};function l(u){return Qt(u,$t.ui)}return B.jsx(B.Fragment,{children:n.showStoryLine&&B.jsxs("div",{className:nu.storyLine,children:[B.jsx(Ki,{item:o.buttons.Storyline_back_button,defaultClass:nu.goBack,onClick:s,onMouseEnter:e}),B.jsx("div",{className:nu.storyLine_content,style:{width:Tt(i.storyLineBgX),height:i.storyLineBgY>720?Tt(i.storyLineBgY):"100%",backgroundImage:`url("${i.storyLineBg}")`,backgroundSize:i.storyLineBgX&&i.storyLineBgY&&`${Tt(i.storyLineBgX)}px ${Tt(i.storyLineBgY)}px`},children:(a==null?void 0:a.map((u,f)=>{const{name:h,thumbnailUrl:d,x:p,y:v,isUnlock:y,isHideName:m}=u.storyLine;return y?B.jsx("div",{className:nu.storyLine_item,style:d?{top:`${Tt(v)}px`,left:`${Tt(p)}px`,backgroundImage:`url("${l(d)}")`}:{},onClick:g=>c(g,u),children:B.jsxs("div",{className:nu.info_card,children:[B.jsx("span",{className:nu.playButton_icon,style:{width:m?"100%":"50%"}}),m?null:B.jsx("span",{className:nu.name,children:h})]})},`storyLine-${f}`):null}))??null})]})})},c3e="_achievement_1ea2o_1",f3e="_goback_1ea2o_13",h3e="_achievement_content_1ea2o_31",d3e="_achievement_current_1ea2o_38",p3e="_text_1ea2o_51",v3e="_number_1ea2o_56",g3e="_pregessBar_1ea2o_61",m3e="_pregressBar_inner_1ea2o_70",y3e="_achievement_content_bg_1ea2o_79",_3e="_achievement_list_1ea2o_87",x3e="_achievement_item_1ea2o_91",b3e="_unlockname_1ea2o_104",S3e="_ripple_1ea2o_121",E3e="_info_card_1ea2o_124",w3e="_condition_1ea2o_156",A3e="_condition_bg_active_1ea2o_165",C3e="_time_1ea2o_168",T3e="_description_1ea2o_169",O3e="_info_card_position_right_1ea2o_174",P3e="_achievement_item_bg_active_1ea2o_178",cn={achievement:c3e,goback:f3e,achievement_content:h3e,achievement_current:d3e,text:p3e,number:v3e,pregessBar:g3e,pregressBar_inner:m3e,achievement_content_bg:y3e,achievement_list:_3e,achievement_item:x3e,unlockname:b3e,ripple:S3e,"ripple-effect":"_ripple-effect_1ea2o_1",info_card:E3e,condition:w3e,condition_bg_active:A3e,time:C3e,description:T3e,info_card_position_right:O3e,achievement_item_bg_active:P3e},R3e=()=>{var O,P;const{playSeClick:t,playSeEnter:e}=ri(),r=it(I=>I.GUI);it(I=>I.stage);const n=it(I=>I.saveData),i=Br(),[a,o]=ve.useState(null),[s,c]=ve.useState(null),[l,u]=ve.useState(null),[f,h]=ve.useState(null),[d,p]=ve.useState(null),[v,y]=ve.useState({unlocked:0,allTotal:0,currentProgress:"0%"}),m=it(I=>I.GUI.gameUIConfigs[Bn.achievement]);ve.useEffect(()=>{r.showAchievement&&(r.achievementUI.Achievement_progress_text&&o(r.achievementUI.Achievement_progress_text),r.achievementUI.Achievement_progress_bg&&c(r.achievementUI.Achievement_progress_bg),r.achievementUI.Achievement_progress&&u(r.achievementUI.Achievement_progress),r.achievementUI.Achievement_notUnlock&&h(r.achievementUI.Achievement_notUnlock),le.dispatch(ur.setIsShowUnlock(!1)),g())},[r.showAchievement]);async function g(){var L,U,Y,ee;const I=Qt(yl.Achieve,$t.scene),R=await ya(I),D=Kd(R,yl.Achieve,I).sentenceList;if((D==null?void 0:D.length)>0&&((L=D[0])==null?void 0:L.commandRaw)==="changeBg"){const J=((U=D[0])==null?void 0:U.content)??"";let X,M;(ee=(Y=D[0])==null?void 0:Y.args)==null||ee.forEach(V=>{(V==null?void 0:V.key)==="x"?X=V==null?void 0:V.value:(V==null?void 0:V.key)==="y"&&(M=V==null?void 0:V.value)}),p({achieveBg:J,achieveBgX:X,achieveBgY:M})}setTimeout(()=>{x()},100)}async function x(){var L;const I=le.getState().saveData.allUnlockAchieveList,R=((L=le.getState().saveData.unlockAchieveData)==null?void 0:L.length)??0,F=I.length||0,D=(R/F*100).toFixed(2)+"%";y({unlocked:R,allTotal:F,currentProgress:D})}const b=I=>Qt(I,$t.ui),S=(I,R)=>I+500>=R,w=(I,R)=>I>=R?R-100:I,A=()=>{t(),S_(),i(_t({component:"showAchievement",visibility:!1}))},C=()=>{var J,X,M,V,$,j,te,ie,de,he,Ee,Oe,ye,Ae,_e,we,$e,Xe,ke,at,vt,gt,tt,ot,dt,Xt,rr,qt,Vt,bt,or,ge,Se,Re,He,je,rt;const I=(J=a==null?void 0:a.args)!=null&&J.hide?"":(a==null?void 0:a.content)??"已获得成就",R=s!=null&&s.content?Qt(s==null?void 0:s.content,$t.background):"",F=(M=(X=l==null?void 0:l.args)==null?void 0:X.style)!=null&&M.image?Qt(l.args.style.image,$t.ui):"",D=($=(V=l==null?void 0:l.args)==null?void 0:V.hoverStyle)!=null&&$.image?Qt(l==null?void 0:l.args.hoverStyle.image,$t.ui):"",L=!((j=s==null?void 0:s.args)!=null&&j.hide)&&R?{...(te=s==null?void 0:s.args)==null?void 0:te.style,backgroundImage:`url(${R})`,transform:((ie=s==null?void 0:s.args.style)==null?void 0:ie.scale)&&`scale(${(de=s==null?void 0:s.args.style)==null?void 0:de.scale})`,width:((he=s==null?void 0:s.args.style)==null?void 0:he.width)&&`${Tt((Ee=s==null?void 0:s.args.style)==null?void 0:Ee.width)}px`,height:((Oe=s==null?void 0:s.args.style)==null?void 0:Oe.height)&&`${Tt((ye=s==null?void 0:s.args.style)==null?void 0:ye.height)}px`}:{},U=(Ae=a==null?void 0:a.args)!=null&&Ae.hide?{}:{...(_e=a==null?void 0:a.args)==null?void 0:_e.style,color:($e=(we=a==null?void 0:a.args)==null?void 0:we.style)==null?void 0:$e.fontColor,transform:(Xe=a==null?void 0:a.args.style)!=null&&Xe.scale?`scale(${a.args.style.scale})`:""},Y=(ke=l==null?void 0:l.args)!=null&&ke.hide?{}:{backgroundImage:`url(${F})`,transform:(vt=(at=l==null?void 0:l.args)==null?void 0:at.style)!=null&&vt.scale?`scale(${l.args.style.scale})`:void 0,width:(tt=(gt=l==null?void 0:l.args)==null?void 0:gt.style)!=null&&tt.width?`${Tt(l.args.style.width)}px`:void 0,height:(dt=(ot=l==null?void 0:l.args)==null?void 0:ot.style)!=null&&dt.height?`${Tt(l.args.style.height)}px`:void 0,top:(rr=(Xt=l==null?void 0:l.args)==null?void 0:Xt.style)!=null&&rr.y?`${Tt(l.args.style.y)}px`:void 0,left:(Vt=(qt=l==null?void 0:l.args)==null?void 0:qt.style)!=null&&Vt.x?`${Tt(l.args.style.x)}px`:void 0},ee=(bt=l==null?void 0:l.args)!=null&&bt.hide?{}:{backgroundImage:`url(${D})`,transform:(ge=(or=l==null?void 0:l.args)==null?void 0:or.hoverStyle)!=null&&ge.scale?`scale(${(Se=l.args.hoverStyle)==null?void 0:Se.scale})`:void 0,width:(He=(Re=l==null?void 0:l.args)==null?void 0:Re.hoverStyle)!=null&&He.width?`${Tt(l.args.hoverStyle.width)}px`:void 0,height:(rt=(je=l==null?void 0:l.args)==null?void 0:je.hoverStyle)!=null&&rt.height?`${Tt(l.args.hoverStyle.height)}px`:void 0};return B.jsx("div",{className:cn.achievement_content,children:B.jsxs("div",{className:cn.achievement_current,style:L||{},children:[B.jsx("span",{className:cn.text,style:U||{},children:I}),B.jsx("span",{className:cn.number,style:U||{},children:`${v.unlocked}/${v.allTotal}`}),B.jsx("span",{className:cn.pregessBar,style:Y||{},children:B.jsx("span",{className:cn.pregressBar_inner,style:{...ee,width:v.currentProgress}})})]})})};return B.jsx(B.Fragment,{children:r.showAchievement&&B.jsxs("div",{className:cn.achievement,children:[B.jsx(Ki,{item:m.buttons.Achievement_back_button,defaultClass:cn.goback,onClick:A,onMouseEnter:e}),C(),B.jsx("div",{className:cn.achievement_content_bg,style:{width:Tt((d==null?void 0:d.achieveBgX)??""),backgroundImage:`url("${d==null?void 0:d.achieveBg}")`,backgroundSize:(d==null?void 0:d.achieveBgX)&&(d==null?void 0:d.achieveBgY)&&`${Tt(d.achieveBgX)}px ${Tt(d.achieveBgY)}px`},children:((O=n.allUnlockAchieveList)==null?void 0:O.length)>0&&B.jsx("div",{className:cn.achievement_list,children:((P=n.allUnlockAchieveList)==null?void 0:P.map(({unlockname:I,x:R,y:F,url:D,isShowUnlock:L,saveTime:U,condition:Y},ee)=>{var X,M,V,$,j,te,ie,de;const J=f!=null&&f.args.hide?{}:{width:(M=(X=f==null?void 0:f.args)==null?void 0:X.style)!=null&&M.width?`${Tt(f.args.style.width)}px`:void 0,height:($=(V=f==null?void 0:f.args)==null?void 0:V.style)!=null&&$.height?`${Tt(f.args.style.height)}px`:void 0};return B.jsxs("div",{className:`${cn.achievement_item} ${L?cn.achievement_item_bg_active:""}`,style:{top:`${Tt(F)}px`,left:`${w(Tt(R),Tt((d==null?void 0:d.achieveBgX)??""))}px`,backgroundImage:`url("${b(L?D:!(f!=null&&f.args.hide)&&((te=(j=f==null?void 0:f.args)==null?void 0:j.style)!=null&&te.image)?(de=(ie=f==null?void 0:f.args)==null?void 0:ie.style)==null?void 0:de.image:"")}")`,...J},children:[L&&B.jsx("div",{className:cn.ripple}),L&&B.jsx("span",{className:cn.unlockname,children:I}),B.jsxs("div",{className:`${cn.info_card} ${S(Tt(R),Tt((d==null?void 0:d.achieveBgX)??0))?cn.info_card_position_right:""}`,children:[Y&&B.jsx("span",{className:`${cn.condition} ${L?cn.condition_bg_active:""}`,children:Y}),U&&B.jsx("span",{className:cn.time,children:`${U}达成`}),B.jsxs("span",{className:cn.description,children:[`${Math.floor(Math.random()*101)}%`,"玩家已达成"]})]})]},`unlockAchieveItem-${ee}`)}))??null})})]})})};var qP=(t=>(t.Video="video",t.Image="image",t))(qP||{});const I3e="_beautyGuideImageDialog_qmqz2_1",F3e="_mark_qmqz2_10",k3e="_content_qmqz2_21",D3e="_content_bg_qmqz2_33",M3e="_imgWrapper_qmqz2_44",L3e="_fade_qmqz2_1",B3e="_btnsWrapper_qmqz2_56",N3e="_btn_qmqz2_56",U3e="_btn_prev_disabled_qmqz2_74",j3e="_btn_next_disabled_qmqz2_75",$3e="_btn_txt_qmqz2_82",Pa={beautyGuideImageDialog:I3e,mark:F3e,content:k3e,content_bg:D3e,imgWrapper:M3e,fade:L3e,btnsWrapper:B3e,btn:N3e,btn_prev_disabled:U3e,btn_next_disabled:j3e,btn_txt:$3e},V3e=t=>{var p,v,y;const e=Br(),{playSeClick:r,playSeEnter:n}=ri(),[i,a]=ve.useState((t==null?void 0:t.imgUrl)??""),[o,s]=ve.useState(0),[c,l]=ve.useState({}),u=it(m=>m.GUI.gameUIConfigs[Bn.collection]);ve.useEffect(()=>{var m,g,x;if(((m=t.imgList)==null?void 0:m.length)>0){const b=t.imgList.findIndex(S=>S.url===t.imgUrl);b>-1&&s(b)}if(t.show){const b=lo((x=(g=u==null?void 0:u.other[ko.Collection_detail_dialog_bg])==null?void 0:g.args)==null?void 0:x.style);l(b)}},[t.imgList,t.show]);const f=()=>{r(),e(_t({component:"showBeautyGuideImageDialog",visibility:!1}))},h=()=>{r();const m=o-1;m<0||(s(m),a(t.imgList[m].url))},d=()=>{r();const m=o+1;m>t.imgList.length-1||(s(m),a(t.imgList[m].url))};return B.jsxs("div",{className:Pa.beautyGuideImageDialog,children:[B.jsx("div",{className:Pa.mark,onClick:f}),B.jsxs("div",{className:Pa.content,style:{width:c==null?void 0:c.width,height:c==null?void 0:c.height},children:[B.jsx(Xp,{item:u.other[ko.Collection_detail_dialog_bg],defaultClass:Pa.content_bg}),B.jsx("div",{className:Pa.imgWrapper,children:t.imgList&&t.imgList.map((m,g)=>m.type===qP.Image&&g===o?B.jsx("img",{src:m.url,className:Pa.transitionImage},`img-${g}`):null)}),B.jsxs("div",{className:Pa.btnsWrapper,children:[B.jsx(Ki,{defaultText:"上一张",item:u.buttons.Collection_detail_dialog_prev_button,defaultClass:`${Pa.btn} 
                            ${o<1?Pa.btn_prev_disabled:""}`,onClick:h,onMouseEnter:n}),B.jsxs("span",{className:Pa.btn_txt,style:lo((v=(p=u==null?void 0:u.other[ko==null?void 0:ko.Collection_detail_dialog_text])==null?void 0:p.args)==null?void 0:v.style)??{},children:[o+1,"/",((y=t.imgList)==null?void 0:y.length)??0,"张截图"]}),B.jsx(Ki,{defaultText:"下一张",item:u.buttons.Collection_detail_dialog_next_button,defaultClass:`${Pa.btn} 
                            ${o+1>=t.imgList.length?Pa.btn_next_disabled:""}`,onClick:d,onMouseEnter:n})]})]})]})},G3e="_beautyGuideDetail_main_1spoc_1",W3e="_beautyGuide_detail_bg_1spoc_15",z3e="_beautyGuideDetail_left_1spoc_26",H3e="_header_1spoc_34",X3e="_goback_1spoc_41",Y3e="_title_1spoc_55",q3e="_pictureUrl_1spoc_59",K3e="_personal_info_1spoc_70",Z3e="_name_1spoc_74",Q3e="_info_1spoc_81",J3e="_beautyGuideDetail_right_1spoc_99",e4e="_contentWrapper_1spoc_106",t4e="_content_1spoc_106",r4e="_content_img_1spoc_119",n4e="_thumbnailWrapper_1spoc_130",i4e="_thumbnail_box_1spoc_141",a4e="_video_mark_1spoc_167",o4e="_desc_text_1spoc_178",Yr={beautyGuideDetail_main:G3e,beautyGuide_detail_bg:W3e,beautyGuideDetail_left:z3e,header:H3e,goback:X3e,title:Y3e,pictureUrl:q3e,personal_info:K3e,name:Z3e,info:Q3e,beautyGuideDetail_right:J3e,contentWrapper:e4e,content:t4e,content_img:r4e,thumbnailWrapper:n4e,thumbnail_box:i4e,video_mark:a4e,desc_text:o4e},s4e=t=>{var d,p,v,y,m,g,x,b,S,w;const e=Br(),{playSeClick:r,playSeEnter:n}=ri(),i=it(A=>A.GUI),[a,o]=ve.useState(null),[s,c]=ve.useState(""),l=it(A=>A.GUI.gameUIConfigs[Bn.collection]);ve.useEffect(()=>{var C;const A=t.info;A!=null&&A.contentList&&((C=A==null?void 0:A.contentList)==null?void 0:C.length)>0&&o(A.contentList[0])},[t]);const u=ve.useMemo(()=>{var O;let A=[];const C=t.info;return C!=null&&C.contentList&&((O=C==null?void 0:C.contentList)==null?void 0:O.length)>0&&(A=C.contentList.filter(P=>P.type==="image")),A},[]),f=()=>{r(),e(_t({component:"showBeautyGuideDetail",visibility:!1}))},h=A=>{r(),c(A),e(_t({component:"showBeautyGuideImageDialog",visibility:!0}))};return B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:Yr.beautyGuideDetail_main,children:[B.jsx(Xp,{item:l.other[ko.Collection_detail_bg],defaultClass:Yr.beautyGuide_detail_bg}),B.jsxs("div",{className:Yr.beautyGuideDetail_left,children:[B.jsxs("div",{className:Yr.header,children:[B.jsx(Ki,{item:l.buttons.Collection_back_button,defaultClass:Yr.goback,onClick:f,onMouseEnter:n}),B.jsx(Ki,{item:l.other.Collection_detail_title,defaultClass:Yr.title})]}),B.jsx("div",{className:Yr.pictureUrl,children:B.jsx("img",{src:(d=t.info)==null?void 0:d.image,alt:""})}),B.jsxs("div",{className:Yr.personal_info,children:[B.jsx("h3",{className:Yr.name,children:((p=t.info)==null?void 0:p.name)??""}),B.jsxs("div",{className:Yr.info,children:[B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:"身高"}),B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:((v=t.info)==null?void 0:v.height)??"-"})]}),B.jsxs("div",{className:Yr.info,children:[B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:"体重"}),B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:((y=t.info)==null?void 0:y.weight)??"-"})]}),B.jsxs("div",{className:Yr.info,children:[B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:"胸围"}),B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:((m=t.info)==null?void 0:m.bustSize)??"-"})]}),B.jsxs("div",{className:Yr.info,children:[B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:"腰围"}),B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:((g=t.info)==null?void 0:g.waistSize)??"-"})]}),B.jsxs("div",{className:Yr.info,children:[B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:"臀围"}),B.jsx("span",{style:(t==null?void 0:t.itemStyle)??{},children:((x=t.info)==null?void 0:x.hipSize)??"-"})]})]})]}),B.jsxs("div",{className:Yr.beautyGuideDetail_right,children:[B.jsxs("div",{className:Yr.contentWrapper,children:[B.jsx("div",{className:Yr.content,children:a&&B.jsxs(B.Fragment,{children:[a.type==="video"&&B.jsx("video",{controls:!0,autoPlay:!0,loop:!0,muted:!0,children:B.jsx("source",{src:a.url,type:"video/mp4"})},a.url),a.type==="image"&&B.jsx("img",{className:Yr.content_img,src:a.url,onClick:()=>{h(a.url)}})]})}),B.jsx("div",{className:Yr.thumbnailWrapper,children:B.jsx("div",{children:((S=(b=t.info)==null?void 0:b.contentList)==null?void 0:S.map((A,C)=>B.jsxs("div",{className:Yr.thumbnail_box,onClick:()=>{o(A)},children:[B.jsx("img",{src:A.url,alt:""}),A.type===qP.Video&&B.jsx("div",{className:Yr.video_mark,children:B.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4276",width:"48",height:"48",children:B.jsx("path",{fill:"#e6e6e6",d:"M315.453793 986.509241Q405.963034 1024 512 1024t196.546207-37.490759q90.509241-37.490759 165.490759-112.463448 74.981517-74.990345 112.472275-165.499586Q1024 618.036966 1024 512t-37.490759-196.546207q-37.490759-90.509241-112.463448-165.490759-74.990345-74.981517-165.499586-112.472275Q618.036966 0 512 0T315.453793 37.490759q-90.509241 37.490759-165.490759 112.463448-74.981517 74.990345-112.472275 165.499586Q0 405.963034 0 512t37.490759 196.546207q37.490759 90.518069 112.463448 165.490759 74.981517 74.981517 165.490759 112.472275z m365.982897-65.447724Q603.409655 953.37931 512 953.37931q-91.409655 0-169.43669-32.317793-78.035862-32.317793-142.66262-96.962207-64.644414-64.635586-96.962207-142.653793Q70.62069 603.400828 70.62069 512t32.317793-169.43669q32.317793-78.027034 96.962207-142.66262 64.635586-64.635586 142.653793-96.962207Q420.599172 70.62069 512 70.62069t169.43669 32.308965v0.008828q78.027034 32.317793 142.66262 96.962207 64.635586 64.635586 96.962207 142.653793Q953.37931 420.599172 953.37931 512t-32.317793 169.43669q-32.317793 78.027034-96.962207 142.66262-64.635586 64.644414-142.653793 96.962207h-0.008827z m-249.979587-650.504827l282.394483 221.007448a25.864828 25.864828 0 0 1 0 40.871724l-282.394483 221.016276c-17.390345 13.594483-43.04331 1.412414-43.04331-20.44469V290.992552c0-21.865931 25.661793-34.048 43.04331-20.44469z"})})})]},`thumbnail-${C}`)))??null})})]}),B.jsx("div",{className:Yr.desc_text,children:B.jsx("span",{children:((w=t.info)==null?void 0:w.description)??""})})]})]}),i.showBeautyGuideImageDialog&&B.jsx(V3e,{imgUrl:s,imgList:u,show:i.showBeautyGuideImageDialog})]})},l4e="_beautyGuide_main_ys1yz_1",u4e="_beautyGuide_bg_ys1yz_15",c4e="_beautyGuide_header_ys1yz_26",f4e="_goback_ys1yz_32",h4e="_title_ys1yz_47",d4e="_beautyGuide_content_ys1yz_53",p4e="_item_ys1yz_59",iu={beautyGuide_main:l4e,beautyGuide_bg:u4e,beautyGuide_header:c4e,goback:f4e,title:h4e,beautyGuide_content:d4e,item:p4e},v4e=()=>{const t=Br(),e=it(v=>v.GUI),{playSeClick:r,playSeEnter:n}=ri(),[i,a]=ve.useState(null),o=it(v=>v.GUI.gameUIConfigs[Bn.collection]),[s,c]=ve.useState([]),[l,u]=ve.useState({}),[f,h]=ve.useState(null);ve.useEffect(()=>{if(e.showBeautyGuide){const v=[],y=(o==null?void 0:o.other)??{},m={};let g=1;Object.entries(y).forEach(([x,b])=>{var S,w,A;if(x!=null&&x.includes("Collection_img")){const C=(S=b==null?void 0:b.args)==null?void 0:S.info;let O=((w=b==null?void 0:b.args)==null?void 0:w.style)??{};const P=(A=b==null?void 0:b.args)==null?void 0:A.images;O=lo(O);const I=qme(P);v.push({name:C==null?void 0:C.name,image:C!=null&&C.image?Qt(C==null?void 0:C.image,$t.ui):"",height:C==null?void 0:C.height,weight:C==null?void 0:C.weight,bustSize:C==null?void 0:C.bustSize,waistSize:C==null?void 0:C.waistSize,hipSize:C==null?void 0:C.hipSize,description:(C==null?void 0:C.description)??"",contentList:I}),m[`Collection_img${g}`]=O,g++}}),u(m),c(v)}},[e.showBeautyGuide]);const d=()=>{r(),a(null),t(_t({component:"showBeautyGuide",visibility:!1}))},p=(v,y)=>{r(),a(v),l[`Collection_img${y+1}`],h(l[`Collection_img${y+1}`]),t(_t({component:"showBeautyGuideDetail",visibility:!0}))};return B.jsxs(B.Fragment,{children:[e.showBeautyGuide&&B.jsxs("div",{className:iu.beautyGuide_main,children:[B.jsx(Xp,{item:o.other[ko.Collection_bg],defaultClass:iu.beautyGuide_bg}),B.jsxs("div",{className:iu.beautyGuide_header,children:[B.jsx(Ki,{item:o.buttons.Collection_back_button,defaultClass:iu.goback,onClick:d,onMouseEnter:n}),B.jsx(Ki,{item:o.other.Collection_title,defaultClass:iu.title})]}),B.jsx("div",{className:iu.beautyGuide_content,children:s.map((v,y)=>B.jsx("div",{className:iu.item,onClick:()=>p(v,y),onMouseEnter:n,children:B.jsx("img",{src:v.image})},`${v==null?void 0:v.name}$-${y}`))})]}),e.showBeautyGuideDetail&&B.jsx(s4e,{info:i,itemStyle:f})]})},g4e="_modalR18_main_167bk_1",m4e="_footer_167bk_16",k3={modalR18_main:g4e,"fade-in":"_fade-in_167bk_1",footer:m4e},y4e=""+new URL("r18-exit-btn-default.png",import.meta.url).href,_4e=""+new URL("r18-exit-btn-active.png",import.meta.url).href,x4e=""+new URL("r18-confirm-btn-default.png",import.meta.url).href,b4e=""+new URL("r18-confirm-btn-active.png",import.meta.url).href,S4e=()=>{Ho("r18.");const t=Br(),e=it(p=>p.GUI),{playSeClick:r,playSeEnter:n}=ri(),[i,a]=ve.useState(!1),[o,s]=ve.useState(!1),[c,l]=ve.useState({width:void 0,height:void 0,opacity:0}),[u,f]=ve.useState({width:void 0,height:void 0,opacity:0}),h=()=>{r(),t(oU(!1))},d=()=>{r(),window.location.href="/"};return B.jsx(B.Fragment,{children:e.isShowR18Modal&&e.openR18Modal&&B.jsx("div",{className:`${k3.modalR18_main} ${e.isShowR18Modal&&e.openR18Modal?"animated fadeIn":""}`,children:B.jsxs("div",{className:k3.footer,children:[B.jsx("div",{id:"exitButton",children:B.jsx("img",{src:i?_4e:y4e,onClick:d,onMouseEnter:()=>{a(!0),n()},onMouseLeave:()=>{a(!1)},onLoad:p=>{l({width:p.target.naturalWidth/.5,height:p.target.naturalHeight/.5,opacity:1})},style:c})}),B.jsx("div",{id:"confirmButton",children:B.jsx("img",{src:o?b4e:x4e,onClick:h,onMouseEnter:()=>{s(!0),n()},onMouseLeave:()=>{s(!1)},onLoad:p=>{f({width:p.target.naturalWidth/.5,height:p.target.naturalHeight/.5,opacity:1})},style:u})})]})})})},E4e="_gameMenuPanelWrapper_i2hjo_1",w4e="_gameMenuPanel_i2hjo_1",A4e="_menuButton_i2hjo_12",C4e="_gameMenuPanelContentWrapper_i2hjo_26",T4e="_mask_i2hjo_34",O4e="_gameMenuPanelContent_i2hjo_26",P4e="_content_i2hjo_54",R4e="_buttons_wrapper_i2hjo_59",I4e="_button_i2hjo_59",F4e="_button_text_i2hjo_93",k4e="_button_custom_i2hjo_96",To={gameMenuPanelWrapper:E4e,gameMenuPanel:w4e,menuButton:A4e,gameMenuPanelContentWrapper:C4e,mask:T4e,gameMenuPanelContent:O4e,content:P4e,buttons_wrapper:R4e,button:I4e,button_text:F4e,button_custom:k4e},D4e=()=>{const t=Ho("gaming."),e=Br(),{playSeEnter:r,playSeClick:n,playSeDialogOpen:i}=ri(),a=it(h=>h.GUI),o=W2("UI/GameMenuPanel/gameMenuPanel.scss"),s=(h,d)=>{e(_t({component:h,visibility:d}))};ve.useEffect(()=>{const h=d=>{d.keyCode===27&&(n(),s("isShowGameMenu",!a.isShowGameMenu))};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[]);const c=h=>{e(im(h))},l=()=>{n(),s("isShowGameMenu",!0)},u={[Oi.Esc_continueGame_button]:()=>{n(),s("isShowGameMenu",!1)},[Oi.Esc_backToLevel_button]:()=>{n(),s("isShowGameMenu",!1),S_()},[Oi.Esc_setting_button]:()=>{n(),c(qi.Option),s("isShowGameMenu",!1),s("showMenuPanel",!0)},[Oi.Esc_exitGame_button]:()=>{n(),i(),Q9({title:t("buttons.quitTips"),leftText:t("$common.cancel"),rightText:t("$common.confirm"),leftFunc:()=>{},rightFunc:()=>{s("isShowGameMenu",!1),window.location.href="/"}})}},f=h=>{var b,S;const d=a.escMenus[h];if(!d||d.args.hide)return null;const p={},v={};let y=To.button;const m=`escMenu-${h}`;if(d.args.style){const w=d.args.style;w.btnPosition!=="custom"&&(p.alignSelf=w.btnPosition),typeof w.align=="string"&&(p.textAlign=w.align),typeof w.fontFamily=="string"&&w.fontFamily&&(p.fontFamily=w.fontFamily),typeof w.x=="number"&&w.btnPosition==="custom"&&(p.position="absolute",p.left=`${w.x}px`,p.transform="translateX(-50%)"),typeof w.y=="number"&&w.btnPosition=="custom"&&(p.position="absolute",p.top=`${w.y}px`,p.transform?p.transform+=" translateY(-50%)":p.transform="translateY(-50%)"),typeof w.scale=="number"&&(p.transform?p.transform+=`scale(${w.scale})`:p.transform=`scale(${w.scale})`),typeof w.fontSize=="number"&&w.fontSize&&(v.fontSize=w.fontSize+"px"),typeof w.fontColor=="string"&&w.fontColor[0]==="#"&&(p.color=w.fontColor)}if((b=d.args.style)!=null&&b.btnImage){let w=document.getElementById(m);if(y=To.button_custom,!w){const A=Qt(d.args.style.btnImage,$t.ui),C=new Image;C.src=A,C.onload=function(){let O=document.getElementById(m);C.style.width=C.naturalWidth+"px",C.style.height=C.naturalHeight+"px",C.alt=d.content,O&&(O.style.width=C.naturalWidth+"px",O.style.height=C.naturalHeight+"px",setTimeout(()=>{O==null||O.prepend(C),O=null},32))}}}const g={Esc_continueGame_button:"继续游戏",Esc_backToLevel_button:"返回关卡",Esc_setting_button:"设置",Esc_exitGame_button:"退出游戏"},x=document.getElementById(`${m}-text`);return x&&(d!=null&&d.content)&&(x.innerText=((S=d.content)==null?void 0:S.replace(/\\n/g,`
`))??""),B.jsx("span",{id:m,className:o("button",y),onMouseEnter:r,onClick:u[h],style:p,children:B.jsx("span",{className:To.button_text,style:v,id:`${m}-text`,children:g[h]})},h)};return B.jsxs(B.Fragment,{children:[B.jsx("div",{className:To.gameMenuPanel,children:B.jsx("div",{className:To.menuButton,onClick:l,onMouseEnter:r})}),a.isShowGameMenu&&B.jsxs("div",{className:To.gameMenuPanelContentWrapper,children:[B.jsx("div",{className:To.mask}),B.jsx("div",{className:To.gameMenuPanelContent,children:B.jsx("div",{className:To.content,children:B.jsxs("div",{className:To.buttons_wrapper,children:[f(Oi.Esc_continueGame_button),f(Oi.Esc_backToLevel_button),f(Oi.Esc_setting_button),f(Oi.Esc_exitGame_button)]})})})]})]})};function M4e(){return ve.useEffect(()=>{Pke()},[]),t3e(),B.jsxs("div",{className:"App",children:[B.jsx(JBe,{}),B.jsx($Le,{}),B.jsx(WLe,{}),B.jsx($Be,{}),B.jsx(rBe,{}),B.jsx(Wbe,{}),B.jsx(Kbe,{}),B.jsx(MBe,{}),B.jsx(PMe,{}),B.jsx(xDe,{}),B.jsx(e3e,{}),B.jsx(zBe,{}),B.jsx(u3e,{}),B.jsx(R3e,{}),B.jsx(v4e,{}),B.jsx(S4e,{}),B.jsx(D4e,{})]})}function bl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mC(t,e){return mC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mC(t,e)}function E_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mC(t,e)}function Jp(t,e){if(e&&($n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bl(t)}function Xo(t){return Xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xo(t)}function L4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function B4e(t){return aV(t)||L4e(t)||oV(t)||sV()}function D3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function M3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var N4e={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,r){console&&console[e]&&console[e].apply(console,r)}},U4e=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yo(this,t),this.init(e,r)}return _o(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||N4e,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,a){return a&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new t(this.logger,M3(M3({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new t(this.logger,r)}}]),t}(),No=new U4e,Fl=function(){function t(){yo(this,t),this.observers={}}return _o(t,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(a){i.observers[a]=i.observers[a]||[],i.observers[a].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(this.observers[r]){var o=[].concat(this.observers[r]);o.forEach(function(c){c.apply(void 0,i)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(c){c.apply(c,[r].concat(i))})}}}]),t}();function Jh(){var t,e,r=new Promise(function(n,i){t=n,e=i});return r.resolve=t,r.reject=e,r}function L3(t){return t==null?"":""+t}function j4e(t,e,r){t.forEach(function(n){e[n]&&(r[n]=e[n])})}function KP(t,e,r){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function i(){return!t||typeof t=="string"}for(var a=typeof e!="string"?[].concat(e):e.split(".");a.length>1;){if(i())return{};var o=n(a.shift());!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={}}return i()?{}:{obj:t,k:n(a.shift())}}function B3(t,e,r){var n=KP(t,e,Object),i=n.obj,a=n.k;i[a]=r}function $4e(t,e,r,n){var i=KP(t,e,Object),a=i.obj,o=i.k;a[o]=a[o]||[],n&&(a[o]=a[o].concat(r)),n||a[o].push(r)}function Im(t,e){var r=KP(t,e),n=r.obj,i=r.k;if(n)return n[i]}function V4e(t,e,r){var n=Im(t,r);return n!==void 0?n:Im(e,r)}function fV(t,e,r){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?typeof t[n]=="string"||t[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?r&&(t[n]=e[n]):fV(t[n],e[n],r):t[n]=e[n]);return t}function Fc(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var G4e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function W4e(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return G4e[e]}):t}var w_=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,z4e=[" ",",","?","!",";"];function H4e(t,e,r){e=e||"",r=r||"";var n=z4e.filter(function(s){return e.indexOf(s)<0&&r.indexOf(s)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),a=!i.test(t);if(!a){var o=t.indexOf(r);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a}function Fm(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var n=e.split(r),i=t,a=0;a<n.length;++a){if(!i||typeof i[n[a]]=="string"&&a+1<n.length)return;if(i[n[a]]===void 0){for(var o=2,s=n.slice(a,a+o).join(r),c=i[s];c===void 0&&n.length>a+o;)o++,s=n.slice(a,a+o).join(r),c=i[s];if(c===void 0)return;if(c===null)return null;if(e.endsWith(s)){if(typeof c=="string")return c;if(s&&typeof c[s]=="string")return c[s]}var l=n.slice(a+o).join(r);return l?Fm(c,l,r):void 0}i=i[n[a]]}return i}}function N3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X4e(t){var e=Y4e();return function(){var n=Xo(t),i;if(e){var a=Xo(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Jp(this,i)}}function Y4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var q4e=function(t){E_(r,t);var e=X4e(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return yo(this,r),i=e.call(this),w_&&Fl.call(bl(i)),i.data=n||{},i.options=a,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return _o(r,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var a=this.options.ns.indexOf(i);a>-1&&this.options.ns.splice(a,1)}},{key:"getResource",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[i,a];o&&typeof o!="string"&&(u=u.concat(o)),o&&typeof o=="string"&&(u=u.concat(c?o.split(c):o)),i.indexOf(".")>-1&&(u=i.split("."));var f=Im(this.data,u);return f||!l||typeof o!="string"?f:Fm(this.data&&this.data[i]&&this.data[i][a],o,c)}},{key:"addResource",value:function(i,a,o,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,u=[i,a];o&&(u=u.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(u=i.split("."),s=a,a=u[1]),this.addNamespaces(a),B3(this.data,u,s),c.silent||this.emit("added",i,a,o,s)}},{key:"addResources",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var c in o)(typeof o[c]=="string"||Object.prototype.toString.apply(o[c])==="[object Array]")&&this.addResource(i,a,c,o[c],{silent:!0});s.silent||this.emit("added",i,a,o)}},{key:"addResourceBundle",value:function(i,a,o,s,c){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[i,a];i.indexOf(".")>-1&&(u=i.split("."),s=o,o=a,a=u[1]),this.addNamespaces(a);var f=Im(this.data,u)||{};s?fV(f,o,c):f=Vv(Vv({},f),o),B3(this.data,u,f),l.silent||this.emit("added",i,a,o)}},{key:"removeResourceBundle",value:function(i,a){this.hasResourceBundle(i,a)&&delete this.data[i][a],this.removeNamespaces(a),this.emit("removed",i,a)}},{key:"hasResourceBundle",value:function(i,a){return this.getResource(i,a)!==void 0}},{key:"getResourceBundle",value:function(i,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Vv(Vv({},{}),this.getResource(i,a)):this.getResource(i,a)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var a=this.getDataByLanguage(i),o=a&&Object.keys(a)||[];return!!o.find(function(s){return a[s]&&Object.keys(a[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(Fl),hV={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,r,n,i,a){var o=this;return e.forEach(function(s){o.processors[s]&&(r=o.processors[s].process(r,n,i,a))}),r}};function U3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K4e(t){var e=Z4e();return function(){var n=Xo(t),i;if(e){var a=Xo(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Jp(this,i)}}function Z4e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j3={},$3=function(t){E_(r,t);var e=K4e(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return yo(this,r),i=e.call(this),w_&&Fl.call(bl(i)),j4e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,bl(i)),i.options=a,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=No.create("translator"),i}return _o(r,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,a);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,a){var o=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ns||this.options.defaultNS||[],l=o&&i.indexOf(o)>-1,u=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!H4e(i,o,s);if(l&&!u){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:c};var h=i.split(o);(o!==s||o===s&&this.options.ns.indexOf(h[0])>-1)&&(c=h.shift()),i=h.join(s)}return typeof c=="string"&&(c=[c]),{key:i,namespaces:c}}},{key:"translate",value:function(i,a,o){var s=this;if($n(a)!=="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),$n(a)==="object"&&(a=si({},a)),a||(a={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var c=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,u=this.extractFromKey(i[i.length-1],a),f=u.key,h=u.namespaces,d=h[h.length-1],p=a.lng||this.language,v=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(v){var y=a.nsSeparator||this.options.nsSeparator;return c?{res:"".concat(d).concat(y).concat(f),usedKey:f,exactUsedKey:f,usedLng:p,usedNS:d}:"".concat(d).concat(y).concat(f)}return c?{res:f,usedKey:f,exactUsedKey:f,usedLng:p,usedNS:d}:f}var m=this.resolve(i,a),g=m&&m.res,x=m&&m.usedKey||f,b=m&&m.exactUsedKey||f,S=Object.prototype.toString.apply(g),w=["[object Number]","[object Function]","[object RegExp]"],A=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,O=typeof g!="string"&&typeof g!="boolean"&&typeof g!="number";if(C&&g&&O&&w.indexOf(S)<0&&!(typeof A=="string"&&S==="[object Array]")){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,g,si(si({},a),{},{ns:h})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return c?(m.res=P,m):P}if(l){var I=S==="[object Array]",R=I?[]:{},F=I?b:x;for(var D in g)if(Object.prototype.hasOwnProperty.call(g,D)){var L="".concat(F).concat(l).concat(D);R[D]=this.translate(L,si(si({},a),{joinArrays:!1,ns:h})),R[D]===L&&(R[D]=g[D])}g=R}}else if(C&&typeof A=="string"&&S==="[object Array]")g=g.join(A),g&&(g=this.extendTranslation(g,i,a,o));else{var U=!1,Y=!1,ee=a.count!==void 0&&typeof a.count!="string",J=r.hasDefaultValue(a),X=ee?this.pluralResolver.getSuffix(p,a.count,a):"",M=a["defaultValue".concat(X)]||a.defaultValue;!this.isValidLookup(g)&&J&&(U=!0,g=M),this.isValidLookup(g)||(Y=!0,g=f);var V=a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,$=V&&Y?void 0:g,j=J&&M!==g&&this.options.updateMissing;if(Y||U||j){if(this.logger.log(j?"updateKey":"missingKey",p,d,f,j?M:g),l){var te=this.resolve(f,si(si({},a),{},{keySeparator:!1}));te&&te.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var ie=[],de=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&de&&de[0])for(var he=0;he<de.length;he++)ie.push(de[he]);else this.options.saveMissingTo==="all"?ie=this.languageUtils.toResolveHierarchy(a.lng||this.language):ie.push(a.lng||this.language);var Ee=function(ye,Ae,_e){var we=J&&_e!==g?_e:$;s.options.missingKeyHandler?s.options.missingKeyHandler(ye,d,Ae,we,j,a):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(ye,d,Ae,we,j,a),s.emit("missingKey",ye,d,Ae,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ee?ie.forEach(function(Oe){s.pluralResolver.getSuffixes(Oe,a).forEach(function(ye){Ee([Oe],f+ye,a["defaultValue".concat(ye)]||M)})}):Ee(ie,f,M))}g=this.extendTranslation(g,i,a,m,o),Y&&g===f&&this.options.appendNamespaceToMissingKey&&(g="".concat(d,":").concat(f)),(Y||U)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(f):f,U?g:void 0):g=this.options.parseMissingKeyHandler(g))}return c?(m.res=g,m):g}},{key:"extendTranslation",value:function(i,a,o,s,c){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,si(si({},this.options.interpolation.defaultVariables),o),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(si(si({},o),{interpolation:si(si({},this.options.interpolation),o.interpolation)}));var u=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(u){var h=i.match(this.interpolator.nestingRegexp);f=h&&h.length}var d=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=si(si({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,o.lng||this.language,o),u){var p=i.match(this.interpolator.nestingRegexp),v=p&&p.length;f<v&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(o.lng=s.usedLng),o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];return c&&c[0]===x[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(x[0]," in key: ").concat(a[0])),null):l.translate.apply(l,x.concat([a]))},o)),o.interpolation&&this.interpolator.reset()}var y=o.postProcess||this.options.postProcess,m=typeof y=="string"?[y]:y;return i!=null&&m&&m.length&&o.applyPostProcessor!==!1&&(i=hV.handle(m,i,a,this.options&&this.options.postProcessPassResolved?si({i18nResolved:s},o):o,this)),i}},{key:"resolve",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,c,l,u,f;return typeof i=="string"&&(i=[i]),i.forEach(function(h){if(!a.isValidLookup(s)){var d=a.extractFromKey(h,o),p=d.key;c=p;var v=d.namespaces;a.options.fallbackNS&&(v=v.concat(a.options.fallbackNS));var y=o.count!==void 0&&typeof o.count!="string",m=y&&!o.ordinal&&o.count===0&&a.pluralResolver.shouldUseIntlApi(),g=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",x=o.lngs?o.lngs:a.languageUtils.toResolveHierarchy(o.lng||a.language,o.fallbackLng);v.forEach(function(b){a.isValidLookup(s)||(f=b,!j3["".concat(x[0],"-").concat(b)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(f)&&(j3["".concat(x[0],"-").concat(b)]=!0,a.logger.warn('key "'.concat(c,'" for languages "').concat(x.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(function(S){if(!a.isValidLookup(s)){u=S;var w=[p];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(w,p,S,b,o);else{var A;y&&(A=a.pluralResolver.getSuffix(S,o.count,o));var C="".concat(a.options.pluralSeparator,"zero");if(y&&(w.push(p+A),m&&w.push(p+C)),g){var O="".concat(p).concat(a.options.contextSeparator).concat(o.context);w.push(O),y&&(w.push(O+A),m&&w.push(O+C))}}for(var P;P=w.pop();)a.isValidLookup(s)||(l=P,s=a.getResource(S,b,P,o))}}))})}}),{res:s,usedKey:c,exactUsedKey:l,usedLng:u,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,a,o,s):this.resourceStore.getResource(i,a,o,s)}}],[{key:"hasDefaultValue",value:function(i){var a="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&a===o.substring(0,a.length)&&i[o]!==void 0)return!0;return!1}}]),r}(Fl);function tE(t){return t.charAt(0).toUpperCase()+t.slice(1)}var V3=function(){function t(e){yo(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=No.create("languageUtils")}return _o(t,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(a){return a.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=tE(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=tE(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=tE(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(a){if(!i){var o=n.formatLanguageCode(a);(!n.options.supportedLngs||n.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&r.forEach(function(a){if(!i){var o=n.getLanguagePartFromCode(a);if(n.isSupportedCode(o))return i=o;i=n.options.supportedLngs.find(function(s){if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&s.indexOf(o)===0)return s})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,a=this.getFallbackCodes(n||this.options.fallbackLng||[],r),o=[],s=function(l){l&&(i.isSupportedCode(l)?o.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(r))):typeof r=="string"&&s(this.formatLanguageCode(r)),a.forEach(function(c){o.indexOf(c)<0&&s(i.formatLanguageCode(c))}),o}}]),t}(),Q4e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],J4e={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},eNe=["v1","v2","v3"],G3={zero:0,one:1,two:2,few:3,many:4,other:5};function tNe(){var t={};return Q4e.forEach(function(e){e.lngs.forEach(function(r){t[r]={numbers:e.nr,plurals:J4e[e.fc]}})}),t}var rNe=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yo(this,t),this.languageUtils=e,this.options=r,this.logger=No.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=tNe()}return _o(t,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,i).map(function(a){return"".concat(n).concat(a)})}},{key:"getSuffixes",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(r,i);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort(function(o,s){return G3[o]-G3[s]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):a.numbers.map(function(o){return n.getSuffix(r,o,i)}):[]}},{key:"getSuffix",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.getRule(r,i);return a?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(a.select(n)):this.getSuffixRetroCompatible(a,n):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,n){var i=this,a=r.noAbs?r.plurals(n):r.plurals(Math.abs(n)),o=r.numbers[a];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var s=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?s():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}},{key:"shouldUseIntlApi",value:function(){return!eNe.includes(this.options.compatibilityJSON)}}]),t}();function W3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ja(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z3(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=V4e(t,e,r);return!a&&i&&typeof r=="string"&&(a=Fm(t,r,n),a===void 0&&(a=Fm(e,r,n))),a}var nNe=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yo(this,t),this.logger=No.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(r){return r},this.init(e)}return _o(t,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:W4e,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Fc(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Fc(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Fc(n.nestingPrefix):n.nestingPrefixEscaped||Fc("$t("),this.nestingSuffix=n.nestingSuffix?Fc(n.nestingSuffix):n.nestingSuffixEscaped||Fc(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,a){var o=this,s,c,l,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(y){return y.replace(/\$/g,"$$$$")}var h=function(m){if(m.indexOf(o.formatSeparator)<0){var g=z3(n,u,m,o.options.keySeparator,o.options.ignoreJSONStructure);return o.alwaysFormat?o.format(g,void 0,i,Ja(Ja(Ja({},a),n),{},{interpolationkey:m})):g}var x=m.split(o.formatSeparator),b=x.shift().trim(),S=x.join(o.formatSeparator).trim();return o.format(z3(n,u,b,o.options.keySeparator,o.options.ignoreJSONStructure),S,i,Ja(Ja(Ja({},a),n),{},{interpolationkey:b}))};this.resetRegExp();var d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,v=[{regex:this.regexpUnescape,safeValue:function(m){return f(m)}},{regex:this.regexp,safeValue:function(m){return o.escapeValue?f(o.escape(m)):f(m)}}];return v.forEach(function(y){for(l=0;s=y.regex.exec(r);){var m=s[1].trim();if(c=h(m),c===void 0)if(typeof d=="function"){var g=d(r,s,a);c=typeof g=="string"?g:""}else if(a&&Object.prototype.hasOwnProperty.call(a,m))c="";else if(p){c=s[0];continue}else o.logger.warn("missed to pass in variable ".concat(m," for interpolating ").concat(r)),c="";else typeof c!="string"&&!o.useRawValueToEscape&&(c=L3(c));var x=y.safeValue(c);if(r=r.replace(s[0],x),p?(y.regex.lastIndex+=c.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,c;function l(d,p){var v=this.nestingOptionsSeparator;if(d.indexOf(v)<0)return d;var y=d.split(new RegExp("".concat(v,"[ ]*{"))),m="{".concat(y[1]);d=y[0],m=this.interpolate(m,c);var g=m.match(/'/g),x=m.match(/"/g);(g&&g.length%2===0&&!x||x.length%2!==0)&&(m=m.replace(/'/g,'"'));try{c=JSON.parse(m),p&&(c=Ja(Ja({},p),c))}catch(b){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),b),"".concat(d).concat(v).concat(m)}return delete c.defaultValue,d}for(;o=this.nestingRegexp.exec(r);){var u=[];c=Ja({},a),c=c.replace&&typeof c.replace!="string"?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;var f=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var h=o[1].split(this.formatSeparator).map(function(d){return d.trim()});o[1]=h.shift(),u=h,f=!0}if(s=n(l.call(this,o[1].trim(),c),c),s&&o[0]===r&&typeof s!="string")return s;typeof s!="string"&&(s=L3(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(r)),s=""),f&&(s=u.reduce(function(d,p){return i.format(d,p,a.lng,Ja(Ja({},a),{},{interpolationkey:o[1].trim()}))},s.trim())),r=r.replace(o[0],s),this.regexp.lastIndex=0}return r}}]),t}();function H3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iNe(t){var e=t.toLowerCase().trim(),r={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var a=i.split(";");a.forEach(function(o){if(o){var s=o.split(":"),c=B4e(s),l=c[0],u=c.slice(1),f=u.join(":").trim().replace(/^'+|'+$/g,"");r[l.trim()]||(r[l.trim()]=f),f==="false"&&(r[l.trim()]=!1),f==="true"&&(r[l.trim()]=!0),isNaN(f)||(r[l.trim()]=parseInt(f,10))}})}}return{formatName:e,formatOptions:r}}function kc(t){var e={};return function(n,i,a){var o=i+JSON.stringify(a),s=e[o];return s||(s=t(i,a),e[o]=s),s(n)}}var aNe=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yo(this,t),this.logger=No.create("formatter"),this.options=e,this.formats={number:kc(function(r,n){var i=new Intl.NumberFormat(r,vs({},n));return function(a){return i.format(a)}}),currency:kc(function(r,n){var i=new Intl.NumberFormat(r,vs(vs({},n),{},{style:"currency"}));return function(a){return i.format(a)}}),datetime:kc(function(r,n){var i=new Intl.DateTimeFormat(r,vs({},n));return function(a){return i.format(a)}}),relativetime:kc(function(r,n){var i=new Intl.RelativeTimeFormat(r,vs({},n));return function(a){return i.format(a,n.range||"day")}}),list:kc(function(r,n){var i=new Intl.ListFormat(r,vs({},n));return function(a){return i.format(a)}})},this.init(e)}return _o(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(r,n){this.formats[r.toLowerCase().trim()]=n}},{key:"addCached",value:function(r,n){this.formats[r.toLowerCase().trim()]=kc(n)}},{key:"format",value:function(r,n,i){var a=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n.split(this.formatSeparator),c=s.reduce(function(l,u){var f=iNe(u),h=f.formatName,d=f.formatOptions;if(a.formats[h]){var p=l;try{var v=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},y=v.locale||v.lng||o.locale||o.lng||i;p=a.formats[h](l,y,vs(vs(vs({},d),o),v))}catch(m){a.logger.warn(m)}return p}else a.logger.warn("there was no format function for ".concat(h));return l},r);return c}}]),t}();function X3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Y3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oNe(t){var e=sNe();return function(){var n=Xo(t),i;if(e){var a=Xo(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Jp(this,i)}}function sNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lNe(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var uNe=function(t){E_(r,t);var e=oNe(r);function r(n,i,a){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return yo(this,r),o=e.call(this),w_&&Fl.call(bl(o)),o.backend=n,o.store=i,o.services=a,o.languageUtils=a.languageUtils,o.options=s,o.logger=No.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(a,s.backend,s),o}return _o(r,[{key:"queueLoad",value:function(i,a,o,s){var c=this,l={},u={},f={},h={};return i.forEach(function(d){var p=!0;a.forEach(function(v){var y="".concat(d,"|").concat(v);!o.reload&&c.store.hasResourceBundle(d,v)?c.state[y]=2:c.state[y]<0||(c.state[y]===1?u[y]===void 0&&(u[y]=!0):(c.state[y]=1,p=!1,u[y]===void 0&&(u[y]=!0),l[y]===void 0&&(l[y]=!0),h[v]===void 0&&(h[v]=!0)))}),p||(f[d]=!0)}),(Object.keys(l).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(l),pending:Object.keys(u),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(h)}}},{key:"loaded",value:function(i,a,o){var s=i.split("|"),c=s[0],l=s[1];a&&this.emit("failedLoading",c,l,a),o&&this.store.addResourceBundle(c,l,o),this.state[i]=a?-1:2;var u={};this.queue.forEach(function(f){$4e(f.loaded,[c],l),lNe(f,i),a&&f.errors.push(a),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(h){u[h]||(u[h]={});var d=f.loaded[h];d.length&&d.forEach(function(p){u[h][p]===void 0&&(u[h][p]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,a,o){var s=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!i.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:a,fcName:o,tried:c,wait:l,callback:u});return}this.readingCalls++;var f=function(v,y){if(s.readingCalls--,s.waitingReads.length>0){var m=s.waitingReads.shift();s.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(v&&y&&c<s.maxRetries){setTimeout(function(){s.read.call(s,i,a,o,c+1,l*2,u)},l);return}u(v,y)},h=this.backend[o].bind(this.backend);if(h.length===2){try{var d=h(i,a);d&&typeof d.then=="function"?d.then(function(p){return f(null,p)}).catch(f):f(null,d)}catch(p){f(p)}return}return h(i,a,f)}},{key:"prepareLoading",value:function(i,a){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof a=="string"&&(a=[a]);var l=this.queueLoad(i,a,s,c);if(!l.toLoad.length)return l.pending.length||c(),null;l.toLoad.forEach(function(u){o.loadOne(u)})}},{key:"load",value:function(i,a,o){this.prepareLoading(i,a,{},o)}},{key:"reload",value:function(i,a,o){this.prepareLoading(i,a,{reload:!0},o)}},{key:"loadOne",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=i.split("|"),c=s[0],l=s[1];this.read(c,l,"read",void 0,void 0,function(u,f){u&&a.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(c," failed"),u),!u&&f&&a.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(c),f),a.loaded(i,u,f)})}},{key:"saveMissing",value:function(i,a,o,s,c){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var f=Y3(Y3({},l),{},{isUpdate:c}),h=this.backend.create.bind(this.backend);if(h.length<6)try{var d;h.length===5?d=h(i,a,o,s,f):d=h(i,a,o,s),d&&typeof d.then=="function"?d.then(function(p){return u(null,p)}).catch(u):u(null,d)}catch(p){u(p)}else h(i,a,o,s,u,f)}!i||!i[0]||this.store.addResource(i[0],a,o,s)}}}]),r}(Fl);function q3(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var r={};if($n(e[1])==="object"&&(r=e[1]),typeof e[1]=="string"&&(r.defaultValue=e[1]),typeof e[2]=="string"&&(r.tDescription=e[2]),$n(e[2])==="object"||$n(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(e,r,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function K3(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Z3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Oo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z3(Object(r),!0).forEach(function(n){ga(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cNe(t){var e=fNe();return function(){var n=Xo(t),i;if(e){var a=Xo(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Jp(this,i)}}function fNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gv(){}function hNe(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(r){typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}var km=function(t){E_(r,t);var e=cNe(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(yo(this,r),n=e.call(this),w_&&Fl.call(bl(n)),n.options=K3(i),n.services={},n.logger=No,n.modules={external:[]},hNe(bl(n)),a&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,a),Jp(n,bl(n));setTimeout(function(){n.init(i,a)},0)}return n}return _o(r,[{key:"init",value:function(){var i=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof a=="function"&&(o=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(typeof a.ns=="string"?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));var s=q3();this.options=Oo(Oo(Oo({},s),this.options),K3(a)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Oo(Oo({},s.interpolation),this.options.interpolation)),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);function c(m){return m?typeof m=="function"?new m:m:null}if(!this.options.isClone){this.modules.logger?No.init(c(this.modules.logger),this.options):No.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=aNe);var u=new V3(this.options);this.store=new q4e(this.options.resources,this.options);var f=this.services;f.logger=No,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new rNe(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=c(l),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new nNe(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new uNe(c(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(m){for(var g=arguments.length,x=new Array(g>1?g-1:0),b=1;b<g;b++)x[b-1]=arguments[b];i.emit.apply(i,[m].concat(x))}),this.modules.languageDetector&&(f.languageDetector=c(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=c(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new $3(this.services,this.options),this.translator.on("*",function(m){for(var g=arguments.length,x=new Array(g>1?g-1:0),b=1;b<g;b++)x[b-1]=arguments[b];i.emit.apply(i,[m].concat(x))}),this.modules.external.forEach(function(m){m.init&&m.init(i)})}if(this.format=this.options.interpolation.format,o||(o=Gv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(m){i[m]=function(){var g;return(g=i.store)[m].apply(g,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(m){i[m]=function(){var g;return(g=i.store)[m].apply(g,arguments),i}});var v=Jh(),y=function(){var g=function(b,S){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),v.resolve(S),o(b,S)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return g(null,i.t.bind(i));i.changeLanguage(i.options.lng,g)};return this.options.resources||!this.options.initImmediate?y():setTimeout(y,0),v}},{key:"loadResources",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gv,s=o,c=typeof i=="string"?i:this.language;if(typeof i=="function"&&(s=i),!this.options.resources||this.options.partialBundledLanguages){if(c&&c.toLowerCase()==="cimode")return s();var l=[],u=function(d){if(d){var p=a.services.languageUtils.toResolveHierarchy(d);p.forEach(function(v){l.indexOf(v)<0&&l.push(v)})}};if(c)u(c);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(h){return u(h)})}this.options.preload&&this.options.preload.forEach(function(h){return u(h)}),this.services.backendConnector.load(l,this.options.ns,function(h){!h&&!a.resolvedLanguage&&a.language&&a.setResolvedLanguage(a.language),s(h)})}else s(null)}},{key:"reloadResources",value:function(i,a,o){var s=Jh();return i||(i=this.languages),a||(a=this.options.ns),o||(o=Gv),this.services.backendConnector.reload(i,a,function(c){s.resolve(),o(c)}),s}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&hV.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var a=0;a<this.languages.length;a++){var o=this.languages[a];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,a){var o=this;this.isLanguageChangingTo=i;var s=Jh();this.emit("languageChanging",i);var c=function(h){o.language=h,o.languages=o.services.languageUtils.toResolveHierarchy(h),o.resolvedLanguage=void 0,o.setResolvedLanguage(h)},l=function(h,d){d?(c(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,s.resolve(function(){return o.t.apply(o,arguments)}),a&&a(h,function(){return o.t.apply(o,arguments)})},u=function(h){!i&&!h&&o.services.languageDetector&&(h=[]);var d=typeof h=="string"?h:o.services.languageUtils.getBestMatchFromCodes(h);d&&(o.language||c(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(p){l(p,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(i),s}},{key:"getFixedT",value:function(i,a,o){var s=this,c=function l(u,f){var h;if($n(f)!=="object"){for(var d=arguments.length,p=new Array(d>2?d-2:0),v=2;v<d;v++)p[v-2]=arguments[v];h=s.options.overloadTranslationOptionHandler([u,f].concat(p))}else h=Oo({},f);h.lng=h.lng||l.lng,h.lngs=h.lngs||l.lngs,h.ns=h.ns||l.ns,h.keyPrefix=h.keyPrefix||o||l.keyPrefix;var y=s.options.keySeparator||".",m;return h.keyPrefix&&Array.isArray(u)?m=u.map(function(g){return"".concat(h.keyPrefix).concat(y).concat(g)}):m=h.keyPrefix?"".concat(h.keyPrefix).concat(y).concat(u):u,s.t(m,h)};return typeof i=="string"?c.lng=i:c.lngs=i,c.ns=a,c.keyPrefix=o,c}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=o.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var u=function(d,p){var v=a.services.backendConnector.state["".concat(d,"|").concat(p)];return v===-1||v===2};if(o.precheck){var f=o.precheck(this,u);if(f!==void 0)return f}return!!(this.hasResourceBundle(s,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(s,i)&&(!c||u(l,i)))}},{key:"loadNamespaces",value:function(i,a){var o=this,s=Jh();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(c){o.options.ns.indexOf(c)<0&&o.options.ns.push(c)}),this.loadResources(function(c){s.resolve(),a&&a(c)}),s):(a&&a(),Promise.resolve())}},{key:"loadLanguages",value:function(i,a){var o=Jh();typeof i=="string"&&(i=[i]);var s=this.options.preload||[],c=i.filter(function(l){return s.indexOf(l)<0});return c.length?(this.options.preload=s.concat(c),this.loadResources(function(l){o.resolve(),a&&a(l)}),o):(a&&a(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new V3(q3());return a.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gv,s=Oo(Oo(Oo({},this.options),a),{isClone:!0}),c=new r(s);(a.debug!==void 0||a.prefix!==void 0)&&(c.logger=c.logger.clone(a));var l=["store","services","language"];return l.forEach(function(u){c[u]=i[u]}),c.services=Oo({},this.services),c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c.translator=new $3(c.services,c.options),c.translator.on("*",function(u){for(var f=arguments.length,h=new Array(f>1?f-1:0),d=1;d<f;d++)h[d-1]=arguments[d];c.emit.apply(c,[u].concat(h))}),c.init(s,o),c.translator.options=c.options,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(Fl);ga(km,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new km(t,e)});var mi=km.createInstance();mi.createInstance=km.createInstance;mi.createInstance;mi.dir;mi.init;mi.loadResources;mi.reloadResources;mi.use;mi.changeLanguage;mi.getFixedT;mi.t;mi.exists;mi.setDefaultNamespace;mi.hasLoadedNamespace;mi.loadNamespaces;mi.loadLanguages;mi.use(VDe).init({resources:Noe||{},lng:zf[Uoe]||"zhCn",fallbackLng:"zhCn",interpolation:{escapeValue:!1}}).then(()=>console.log("IdolTime i18n Ready!"));Mu.render(B.jsx(ei.StrictMode,{children:B.jsx(HDe,{children:B.jsx(Gme,{store:le,children:B.jsx(M4e,{})})})}),document.getElementById("root"));export{Cn as C,ca as S,pt as T,H as W,Tm as a,_Ne as r};
