var KN=Object.defineProperty;var ZN=(t,e,r)=>e in t?KN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Re=(t,e,r)=>(ZN(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function QN(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var xI={exports:{}},Mf={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var AA=Object.getOwnPropertySymbols,JN=Object.prototype.hasOwnProperty,e8=Object.prototype.propertyIsEnumerable;function t8(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r8(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var J1=r8()?Object.assign:function(t,e){for(var r,n=t8(t),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)JN.call(r,o)&&(n[o]=r[o]);if(AA){i=AA(r);for(var s=0;s<i.length;s++)e8.call(r,i[s])&&(n[i[s]]=r[i[s]])}}return n};const n8=vn(J1);var _I={exports:{}},pt={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb=J1,tu=60103,bI=60106;pt.Fragment=60107;pt.StrictMode=60108;pt.Profiler=60114;var SI=60109,EI=60110,wI=60112;pt.Suspense=60113;var AI=60115,CI=60116;if(typeof Symbol=="function"&&Symbol.for){var gi=Symbol.for;tu=gi("react.element"),bI=gi("react.portal"),pt.Fragment=gi("react.fragment"),pt.StrictMode=gi("react.strict_mode"),pt.Profiler=gi("react.profiler"),SI=gi("react.provider"),EI=gi("react.context"),wI=gi("react.forward_ref"),pt.Suspense=gi("react.suspense"),AI=gi("react.memo"),CI=gi("react.lazy")}var CA=typeof Symbol=="function"&&Symbol.iterator;function i8(t){return t===null||typeof t!="object"?null:(t=CA&&t[CA]||t["@@iterator"],typeof t=="function"?t:null)}function Lf(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PI={};function ru(t,e,r){this.props=t,this.context=e,this.refs=PI,this.updater=r||TI}ru.prototype.isReactComponent={};ru.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(Lf(85));this.updater.enqueueSetState(this,t,e,"setState")};ru.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OI(){}OI.prototype=ru.prototype;function tb(t,e,r){this.props=t,this.context=e,this.refs=PI,this.updater=r||TI}var rb=tb.prototype=new OI;rb.constructor=tb;eb(rb,ru.prototype);rb.isPureReactComponent=!0;var nb={current:null},RI=Object.prototype.hasOwnProperty,II={key:!0,ref:!0,__self:!0,__source:!0};function FI(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)RI.call(e,n)&&!II.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:tu,type:t,key:a,ref:o,props:i,_owner:nb.current}}function a8(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ib(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function o8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var TA=/\/+/g;function kv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?o8(""+t.key):e.toString(36)}function td(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tu:case bI:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+kv(o,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(TA,"$&/")+"/"),td(i,e,r,"",function(l){return l})):i!=null&&(ib(i)&&(i=a8(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(TA,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){a=t[s];var c=n+kv(a,s);o+=td(a,e,r,c,i)}else if(c=i8(t),typeof c=="function")for(t=c.call(t),s=0;!(a=t.next()).done;)a=a.value,c=n+kv(a,s++),o+=td(a,e,r,c,i);else if(a==="object")throw e=""+t,Error(Lf(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function sh(t,e,r){if(t==null)return t;var n=[],i=0;return td(t,n,"","",function(a){return e.call(r,a,i++)}),n}function s8(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var kI={current:null};function ja(){var t=kI.current;if(t===null)throw Error(Lf(321));return t}var l8={ReactCurrentDispatcher:kI,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:nb,IsSomeRendererActing:{current:!1},assign:eb};pt.Children={map:sh,forEach:function(t,e,r){sh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return sh(t,function(){e++}),e},toArray:function(t){return sh(t,function(e){return e})||[]},only:function(t){if(!ib(t))throw Error(Lf(143));return t}};pt.Component=ru;pt.PureComponent=tb;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l8;pt.cloneElement=function(t,e,r){if(t==null)throw Error(Lf(267,t));var n=eb({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=nb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)RI.call(e,c)&&!II.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&s!==void 0?s[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:tu,type:t.type,key:i,ref:a,props:n,_owner:o}};pt.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:EI,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:SI,_context:t},t.Consumer=t};pt.createElement=FI;pt.createFactory=function(t){var e=FI.bind(null,t);return e.type=t,e};pt.createRef=function(){return{current:null}};pt.forwardRef=function(t){return{$$typeof:wI,render:t}};pt.isValidElement=ib;pt.lazy=function(t){return{$$typeof:CI,_payload:{_status:-1,_result:t},_init:s8}};pt.memo=function(t,e){return{$$typeof:AI,type:t,compare:e===void 0?null:e}};pt.useCallback=function(t,e){return ja().useCallback(t,e)};pt.useContext=function(t,e){return ja().useContext(t,e)};pt.useDebugValue=function(){};pt.useEffect=function(t,e){return ja().useEffect(t,e)};pt.useImperativeHandle=function(t,e,r){return ja().useImperativeHandle(t,e,r)};pt.useLayoutEffect=function(t,e){return ja().useLayoutEffect(t,e)};pt.useMemo=function(t,e){return ja().useMemo(t,e)};pt.useReducer=function(t,e,r){return ja().useReducer(t,e,r)};pt.useRef=function(t){return ja().useRef(t)};pt.useState=function(t){return ja().useState(t)};pt.version="17.0.2";_I.exports=pt;var ie=_I.exports;const zt=vn(ie);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u8=ie,DI=60103;Mf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var PA=Symbol.for;DI=PA("react.element"),Mf.Fragment=PA("react.fragment")}var c8=u8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f8=Object.prototype.hasOwnProperty,h8={key:!0,ref:!0,__self:!0,__source:!0};function MI(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)f8.call(e,n)&&!h8.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:DI,type:t,key:a,ref:o,props:i,_owner:c8.current}}Mf.jsx=MI;Mf.jsxs=MI;xI.exports=Mf;var k=xI.exports,LI={exports:{}},pi={},BI={exports:{}},NI={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}if(typeof window>"u"||typeof MessageChannel!="function"){var c=null,l=null,u=function(){if(c!==null)try{var I=t.unstable_now();c(!0,I),c=null}catch(B){throw setTimeout(u,0),B}};e=function(I){c!==null?setTimeout(e,0,I):(c=I,setTimeout(u,0))},r=function(I,B){l=setTimeout(I,B)},n=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if(typeof console<"u"){var d=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof d!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,v=null,y=-1,g=5,m=0;t.unstable_shouldYield=function(){return t.unstable_now()>=m},i=function(){},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<I?Math.floor(1e3/I):5};var x=new MessageChannel,b=x.port2;x.port1.onmessage=function(){if(v!==null){var I=t.unstable_now();m=I+g;try{v(!0,I)?b.postMessage(null):(p=!1,v=null)}catch(B){throw b.postMessage(null),B}}else p=!1},e=function(I){v=I,p||(p=!0,b.postMessage(null))},r=function(I,B){y=f(function(){I(t.unstable_now())},B)},n=function(){h(y),y=-1}}function _(I,B){var L=I.length;I.push(B);e:for(;;){var M=L-1>>>1,X=I[M];if(X!==void 0&&0<w(X,B))I[M]=B,I[L]=X,L=M;else break e}}function S(I){return I=I[0],I===void 0?null:I}function E(I){var B=I[0];if(B!==void 0){var L=I.pop();if(L!==B){I[0]=L;e:for(var M=0,X=I.length;M<X;){var K=2*(M+1)-1,ne=I[K],te=K+1,ce=I[te];if(ne!==void 0&&0>w(ne,L))ce!==void 0&&0>w(ce,ne)?(I[M]=ce,I[te]=L,M=te):(I[M]=ne,I[K]=L,M=K);else if(ce!==void 0&&0>w(ce,L))I[M]=ce,I[te]=L,M=te;else break e}}return B}return null}function w(I,B){var L=I.sortIndex-B.sortIndex;return L!==0?L:I.id-B.id}var C=[],A=[],P=1,T=null,O=3,R=!1,F=!1,D=!1;function V(I){for(var B=S(A);B!==null;){if(B.callback===null)E(A);else if(B.startTime<=I)E(A),B.sortIndex=B.expirationTime,_(C,B);else break;B=S(A)}}function Y(I){if(D=!1,V(I),!F)if(S(C)!==null)F=!0,e(W);else{var B=S(A);B!==null&&r(Y,B.startTime-I)}}function W(I,B){F=!1,D&&(D=!1,n()),R=!0;var L=O;try{for(V(B),T=S(C);T!==null&&(!(T.expirationTime>B)||I&&!t.unstable_shouldYield());){var M=T.callback;if(typeof M=="function"){T.callback=null,O=T.priorityLevel;var X=M(T.expirationTime<=B);B=t.unstable_now(),typeof X=="function"?T.callback=X:T===S(C)&&E(C),V(B)}else E(C);T=S(C)}if(T!==null)var K=!0;else{var ne=S(A);ne!==null&&r(Y,ne.startTime-B),K=!1}return K}finally{T=null,O=L,R=!1}}var $=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){F||R||(F=!0,e(W))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(I){switch(O){case 1:case 2:case 3:var B=3;break;default:B=O}var L=O;O=B;try{return I()}finally{O=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=$,t.unstable_runWithPriority=function(I,B){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=O;O=I;try{return B()}finally{O=L}},t.unstable_scheduleCallback=function(I,B,L){var M=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?M+L:M):L=M,I){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=L+X,I={id:P++,callback:B,priorityLevel:I,startTime:L,expirationTime:X,sortIndex:-1},L>M?(I.sortIndex=L,_(A,I),S(C)===null&&I===S(A)&&(D?n():D=!0,r(Y,L-M))):(I.sortIndex=X,_(C,I),F||R||(F=!0,e(W))),I},t.unstable_wrapCallback=function(I){var B=O;return function(){var L=O;O=B;try{return I.apply(this,arguments)}finally{O=L}}}})(NI);BI.exports=NI;var d8=BI.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=ie,Xt=J1,Wr=d8;function xe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!$p)throw Error(xe(227));var jI=new Set,Bc={};function Ps(t,e){Ll(t,e),Ll(t+"Capture",e)}function Ll(t,e){for(Bc[t]=e,t=0;t<e.length;t++)jI.add(e[t])}var Ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OA=Object.prototype.hasOwnProperty,RA={},IA={};function v8(t){return OA.call(IA,t)?!0:OA.call(RA,t)?!1:p8.test(t)?IA[t]=!0:(RA[t]=!0,!1)}function m8(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g8(t,e,r,n){if(e===null||typeof e>"u"||m8(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rn[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rn[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rn[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rn[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rn[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rn[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rn[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rn[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rn[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function ob(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ab,ob);rn[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ab,ob);rn[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ab,ob);rn[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function sb(t,e,r,n){var i=rn.hasOwnProperty(e)?rn[e]:null,a=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");a||(g8(e,r,i,n)&&(r=null),n||i===null?v8(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Os=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sc=60103,es=60106,Ka=60107,lb=60108,gc=60114,ub=60109,cb=60110,Vp=60112,yc=60113,Rd=60120,Gp=60115,fb=60116,hb=60121,db=60128,UI=60129,pb=60130,By=60131;if(typeof Symbol=="function"&&Symbol.for){var Lr=Symbol.for;sc=Lr("react.element"),es=Lr("react.portal"),Ka=Lr("react.fragment"),lb=Lr("react.strict_mode"),gc=Lr("react.profiler"),ub=Lr("react.provider"),cb=Lr("react.context"),Vp=Lr("react.forward_ref"),yc=Lr("react.suspense"),Rd=Lr("react.suspense_list"),Gp=Lr("react.memo"),fb=Lr("react.lazy"),hb=Lr("react.block"),Lr("react.scope"),db=Lr("react.opaque.id"),UI=Lr("react.debug_trace_mode"),pb=Lr("react.offscreen"),By=Lr("react.legacy_hidden")}var FA=typeof Symbol=="function"&&Symbol.iterator;function ku(t){return t===null||typeof t!="object"?null:(t=FA&&t[FA]||t["@@iterator"],typeof t=="function"?t:null)}var Dv;function lc(t){if(Dv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Dv=e&&e[1]||""}return`
`+Dv+t}var Mv=!1;function lh(t,e){if(!t||Mv)return"";Mv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=s);break}}}finally{Mv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?lc(t):""}function y8(t){switch(t.tag){case 5:return lc(t.type);case 16:return lc("Lazy");case 13:return lc("Suspense");case 19:return lc("SuspenseList");case 0:case 2:case 15:return t=lh(t.type,!1),t;case 11:return t=lh(t.type.render,!1),t;case 22:return t=lh(t.type._render,!1),t;case 1:return t=lh(t.type,!0),t;default:return""}}function gl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ka:return"Fragment";case es:return"Portal";case gc:return"Profiler";case lb:return"StrictMode";case yc:return"Suspense";case Rd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cb:return(t.displayName||"Context")+".Consumer";case ub:return(t._context.displayName||"Context")+".Provider";case Vp:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Gp:return gl(t.type);case hb:return gl(t._render);case fb:e=t._payload,t=t._init;try{return gl(t(e))}catch{}}return null}function Eo(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function $I(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x8(t){var e=$I(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uh(t){t._valueTracker||(t._valueTracker=x8(t))}function VI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=$I(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Id(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ny(t,e){var r=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function kA(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Eo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GI(t,e){e=e.checked,e!=null&&sb(t,"checked",e,!1)}function jy(t,e){GI(t,e);var r=Eo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uy(t,e.type,r):e.hasOwnProperty("defaultValue")&&Uy(t,e.type,Eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function DA(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Uy(t,e,r){(e!=="number"||Id(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function _8(t){var e="";return $p.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function $y(t,e){return t=Xt({children:void 0},e),(e=_8(e.children))&&(t.children=e),t}function yl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Eo(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MA(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(xe(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(xe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Eo(r)}}function zI(t,e){var r=Eo(e.value),n=Eo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function LA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Gy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function WI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ch,XI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==Gy.svg||"innerHTML"in t)t.innerHTML=e;else{for(ch=ch||document.createElement("div"),ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ch.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b8=["Webkit","ms","Moz","O"];Object.keys(xc).forEach(function(t){b8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xc[e]=xc[t]})});function HI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||xc.hasOwnProperty(t)&&xc[t]?(""+e).trim():e+"px"}function YI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=HI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var S8=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wy(t,e){if(e){if(S8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function Xy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function vb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hy=null,xl=null,_l=null;function BA(t){if(t=Nf(t)){if(typeof Hy!="function")throw Error(xe(280));var e=t.stateNode;e&&(e=qp(e),Hy(t.stateNode,t.type,e))}}function qI(t){xl?_l?_l.push(t):_l=[t]:xl=t}function KI(){if(xl){var t=xl,e=_l;if(_l=xl=null,BA(t),e)for(t=0;t<e.length;t++)BA(e[t])}}function mb(t,e){return t(e)}function ZI(t,e,r,n,i){return t(e,r,n,i)}function gb(){}var QI=mb,ts=!1,Lv=!1;function yb(){(xl!==null||_l!==null)&&(gb(),KI())}function E8(t,e,r){if(Lv)return t(e,r);Lv=!0;try{return QI(t,e,r)}finally{Lv=!1,yb()}}function jc(t,e){var r=t.stateNode;if(r===null)return null;var n=qp(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(xe(231,e,typeof r));return r}var Yy=!1;if(Ba)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){Yy=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{Yy=!1}function w8(t,e,r,n,i,a,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var _c=!1,Fd=null,kd=!1,qy=null,A8={onError:function(t){_c=!0,Fd=t}};function C8(t,e,r,n,i,a,o,s,c){_c=!1,Fd=null,w8.apply(A8,arguments)}function T8(t,e,r,n,i,a,o,s,c){if(C8.apply(this,arguments),_c){if(_c){var l=Fd;_c=!1,Fd=null}else throw Error(xe(198));kd||(kd=!0,qy=l)}}function Rs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function JI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NA(t){if(Rs(t)!==t)throw Error(xe(188))}function P8(t){var e=t.alternate;if(!e){if(e=Rs(t),e===null)throw Error(xe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return NA(i),t;if(a===n)return NA(i),e;a=a.sibling}throw Error(xe(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,s=i.child;s;){if(s===r){o=!0,r=i,n=a;break}if(s===n){o=!0,n=i,r=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===r){o=!0,r=a,n=i;break}if(s===n){o=!0,n=a,r=i;break}s=s.sibling}if(!o)throw Error(xe(189))}}if(r.alternate!==n)throw Error(xe(190))}if(r.tag!==3)throw Error(xe(188));return r.stateNode.current===r?t:e}function eF(t){if(t=P8(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function jA(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var tF,xb,rF,nF,Ky=!1,Zi=[],so=null,lo=null,uo=null,Uc=new Map,$c=new Map,Mu=[],UA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function $A(t,e){switch(t){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Uc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(e.pointerId)}}function Lu(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t=Zy(e,r,n,i,a),e!==null&&(e=Nf(e),e!==null&&xb(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function O8(t,e,r,n,i){switch(e){case"focusin":return so=Lu(so,t,e,r,n,i),!0;case"dragenter":return lo=Lu(lo,t,e,r,n,i),!0;case"mouseover":return uo=Lu(uo,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Uc.set(a,Lu(Uc.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,$c.set(a,Lu($c.get(a)||null,t,e,r,n,i)),!0}return!1}function R8(t){var e=rs(t.target);if(e!==null){var r=Rs(e);if(r!==null){if(e=r.tag,e===13){if(e=JI(r),e!==null){t.blockedOn=e,nF(t.lanePriority,function(){Wr.unstable_runWithPriority(t.priority,function(){rF(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Eb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=Nf(r),e!==null&&xb(e),t.blockedOn=r,!1;e.shift()}return!0}function VA(t,e,r){rd(t)&&r.delete(e)}function I8(){for(Ky=!1;0<Zi.length;){var t=Zi[0];if(t.blockedOn!==null){t=Nf(t.blockedOn),t!==null&&tF(t);break}for(var e=t.targetContainers;0<e.length;){var r=Eb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&Zi.shift()}so!==null&&rd(so)&&(so=null),lo!==null&&rd(lo)&&(lo=null),uo!==null&&rd(uo)&&(uo=null),Uc.forEach(VA),$c.forEach(VA)}function Bu(t,e){t.blockedOn===e&&(t.blockedOn=null,Ky||(Ky=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,I8)))}function iF(t){function e(i){return Bu(i,t)}if(0<Zi.length){Bu(Zi[0],t);for(var r=1;r<Zi.length;r++){var n=Zi[r];n.blockedOn===t&&(n.blockedOn=null)}}for(so!==null&&Bu(so,t),lo!==null&&Bu(lo,t),uo!==null&&Bu(uo,t),Uc.forEach(e),$c.forEach(e),r=0;r<Mu.length;r++)n=Mu[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Mu.length&&(r=Mu[0],r.blockedOn===null);)R8(r),r.blockedOn===null&&Mu.shift()}function fh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var sl={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},Bv={},aF={};Ba&&(aF=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function zp(t){if(Bv[t])return Bv[t];if(!sl[t])return t;var e=sl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in aF)return Bv[t]=e[r];return t}var oF=zp("animationend"),sF=zp("animationiteration"),lF=zp("animationstart"),uF=zp("transitionend"),cF=new Map,_b=new Map,F8=["abort","abort",oF,"animationEnd",sF,"animationIteration",lF,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",uF,"transitionEnd","waiting","waiting"];function bb(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),_b.set(n,e),cF.set(n,i),Ps(i,[n])}}var k8=Wr.unstable_now;k8();var Dt=8;function il(t){if(1&t)return Dt=15,1;if(2&t)return Dt=14,2;if(4&t)return Dt=13,4;var e=24&t;return e!==0?(Dt=12,e):t&32?(Dt=11,32):(e=192&t,e!==0?(Dt=10,e):t&256?(Dt=9,256):(e=3584&t,e!==0?(Dt=8,e):t&4096?(Dt=7,4096):(e=4186112&t,e!==0?(Dt=6,e):(e=62914560&t,e!==0?(Dt=5,e):t&67108864?(Dt=4,67108864):t&134217728?(Dt=3,134217728):(e=805306368&t,e!==0?(Dt=2,e):1073741824&t?(Dt=1,1073741824):(Dt=8,t))))))}function D8(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function M8(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(xe(358,t))}}function Vc(t,e){var r=t.pendingLanes;if(r===0)return Dt=0;var n=0,i=0,a=t.expiredLanes,o=t.suspendedLanes,s=t.pingedLanes;if(a!==0)n=a,i=Dt=15;else if(a=r&134217727,a!==0){var c=a&~o;c!==0?(n=il(c),i=Dt):(s&=a,s!==0&&(n=il(s),i=Dt))}else a=r&~o,a!==0?(n=il(a),i=Dt):s!==0&&(n=il(s),i=Dt);if(n===0)return 0;if(n=31-wo(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&!(e&o)){if(il(e),i<=Dt)return e;Dt=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-wo(e),i=1<<r,n|=t[r],e&=~i;return n}function fF(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dd(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=al(24&~e),t===0?Dd(10,e):t;case 10:return t=al(192&~e),t===0?Dd(8,e):t;case 8:return t=al(3584&~e),t===0&&(t=al(4186112&~e),t===0&&(t=512)),t;case 2:return e=al(805306368&~e),e===0&&(e=268435456),e}throw Error(xe(358,t))}function al(t){return t&-t}function Nv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wp(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-wo(e),t[e]=r}var wo=Math.clz32?Math.clz32:N8,L8=Math.log,B8=Math.LN2;function N8(t){return t===0?32:31-(L8(t)/B8|0)|0}var j8=Wr.unstable_UserBlockingPriority,U8=Wr.unstable_runWithPriority,nd=!0;function $8(t,e,r,n){ts||gb();var i=Sb,a=ts;ts=!0;try{ZI(i,t,e,r,n)}finally{(ts=a)||yb()}}function V8(t,e,r,n){U8(j8,Sb.bind(null,t,e,r,n))}function Sb(t,e,r,n){if(nd){var i;if((i=(e&4)===0)&&0<Zi.length&&-1<UA.indexOf(t))t=Zy(null,t,e,r,n),Zi.push(t);else{var a=Eb(t,e,r,n);if(a===null)i&&$A(t,n);else{if(i){if(-1<UA.indexOf(t)){t=Zy(a,t,e,r,n),Zi.push(t);return}if(O8(a,t,e,r,n))return;$A(t,n)}wF(t,e,n,null,r)}}}}function Eb(t,e,r,n){var i=vb(n);if(i=rs(i),i!==null){var a=Rs(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=JI(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return wF(t,e,n,i,r),null}var eo=null,wb=null,id=null;function hF(){if(id)return id;var t,e=wb,r=e.length,n,i="value"in eo?eo.value:eo.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return id=i.slice(t,1<n?1-n:void 0)}function ad(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hh(){return!0}function GA(){return!1}function Kn(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?hh:GA,this.isPropagationStopped=GA,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hh)},persist:function(){},isPersistent:hh}),e}var nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ab=Kn(nu),Bf=Xt({},nu,{view:0,detail:0}),G8=Kn(Bf),jv,Uv,Nu,Xp=Xt({},Bf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nu&&(Nu&&t.type==="mousemove"?(jv=t.screenX-Nu.screenX,Uv=t.screenY-Nu.screenY):Uv=jv=0,Nu=t),jv)},movementY:function(t){return"movementY"in t?t.movementY:Uv}}),zA=Kn(Xp),z8=Xt({},Xp,{dataTransfer:0}),W8=Kn(z8),X8=Xt({},Bf,{relatedTarget:0}),$v=Kn(X8),H8=Xt({},nu,{animationName:0,elapsedTime:0,pseudoElement:0}),Y8=Kn(H8),q8=Xt({},nu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K8=Kn(q8),Z8=Xt({},nu,{data:0}),WA=Kn(Z8),Q8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e6[t])?!!e[t]:!1}function Cb(){return t6}var r6=Xt({},Bf,{key:function(t){if(t.key){var e=Q8[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ad(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?J8[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cb,charCode:function(t){return t.type==="keypress"?ad(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ad(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),n6=Kn(r6),i6=Xt({},Xp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XA=Kn(i6),a6=Xt({},Bf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cb}),o6=Kn(a6),s6=Xt({},nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),l6=Kn(s6),u6=Xt({},Xp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c6=Kn(u6),f6=[9,13,27,32],Tb=Ba&&"CompositionEvent"in window,bc=null;Ba&&"documentMode"in document&&(bc=document.documentMode);var h6=Ba&&"TextEvent"in window&&!bc,dF=Ba&&(!Tb||bc&&8<bc&&11>=bc),HA=String.fromCharCode(32),YA=!1;function pF(t,e){switch(t){case"keyup":return f6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ll=!1;function d6(t,e){switch(t){case"compositionend":return vF(e);case"keypress":return e.which!==32?null:(YA=!0,HA);case"textInput":return t=e.data,t===HA&&YA?null:t;default:return null}}function p6(t,e){if(ll)return t==="compositionend"||!Tb&&pF(t,e)?(t=hF(),id=wb=eo=null,ll=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dF&&e.locale!=="ko"?null:e.data;default:return null}}var v6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v6[t.type]:e==="textarea"}function mF(t,e,r,n){qI(n),e=Md(e,"onChange"),0<e.length&&(r=new Ab("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Sc=null,Gc=null;function m6(t){bF(t,0)}function Hp(t){var e=cl(t);if(VI(e))return t}function g6(t,e){if(t==="change")return e}var gF=!1;if(Ba){var Vv;if(Ba){var Gv="oninput"in document;if(!Gv){var KA=document.createElement("div");KA.setAttribute("oninput","return;"),Gv=typeof KA.oninput=="function"}Vv=Gv}else Vv=!1;gF=Vv&&(!document.documentMode||9<document.documentMode)}function ZA(){Sc&&(Sc.detachEvent("onpropertychange",yF),Gc=Sc=null)}function yF(t){if(t.propertyName==="value"&&Hp(Gc)){var e=[];if(mF(e,Gc,t,vb(t)),t=m6,ts)t(e);else{ts=!0;try{mb(t,e)}finally{ts=!1,yb()}}}}function y6(t,e,r){t==="focusin"?(ZA(),Sc=e,Gc=r,Sc.attachEvent("onpropertychange",yF)):t==="focusout"&&ZA()}function x6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hp(Gc)}function _6(t,e){if(t==="click")return Hp(e)}function b6(t,e){if(t==="input"||t==="change")return Hp(e)}function S6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var si=typeof Object.is=="function"?Object.is:S6,E6=Object.prototype.hasOwnProperty;function zc(t,e){if(si(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!E6.call(e,r[n])||!si(t[r[n]],e[r[n]]))return!1;return!0}function QA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function JA(t,e){var r=QA(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=QA(r)}}function xF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eC(){for(var t=window,e=Id();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Id(t.document)}return e}function Qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var w6=Ba&&"documentMode"in document&&11>=document.documentMode,ul=null,Jy=null,Ec=null,ex=!1;function tC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ex||ul==null||ul!==Id(n)||(n=ul,"selectionStart"in n&&Qy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ec&&zc(Ec,n)||(Ec=n,n=Md(Jy,"onSelect"),0<n.length&&(e=new Ab("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ul)))}bb("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);bb("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);bb(F8,2);for(var rC="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),zv=0;zv<rC.length;zv++)_b.set(rC[zv],0);Ll("onMouseEnter",["mouseout","mouseover"]);Ll("onMouseLeave",["mouseout","mouseover"]);Ll("onPointerEnter",["pointerout","pointerover"]);Ll("onPointerLeave",["pointerout","pointerover"]);Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_F=new Set("cancel close invalid load scroll toggle".split(" ").concat(uc));function nC(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,T8(n,e,void 0,t),t.currentTarget=null}function bF(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var s=n[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break e;nC(i,s,l),a=c}else for(o=0;o<n.length;o++){if(s=n[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break e;nC(i,s,l),a=c}}}if(kd)throw t=qy,kd=!1,qy=null,t}function Bt(t,e){var r=CF(e),n=t+"__bubble";r.has(n)||(EF(e,t,2,!1),r.add(n))}var iC="_reactListening"+Math.random().toString(36).slice(2);function SF(t){t[iC]||(t[iC]=!0,jI.forEach(function(e){_F.has(e)||aC(e,!1,t,null),aC(e,!0,t,null)}))}function aC(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=r;if(t==="selectionchange"&&r.nodeType!==9&&(a=r.ownerDocument),n!==null&&!e&&_F.has(t)){if(t!=="scroll")return;i|=2,a=n}var o=CF(a),s=t+"__"+(e?"capture":"bubble");o.has(s)||(e&&(i|=4),EF(a,t,i,e),o.add(s))}function EF(t,e,r,n){var i=_b.get(e);switch(i===void 0?2:i){case 0:i=$8;break;case 1:i=V8;break;default:i=Sb}r=i.bind(null,e,r,t),i=void 0,!Yy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function wF(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;s!==null;){if(o=rs(s),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}s=s.parentNode}}n=n.return}E8(function(){var l=a,u=vb(r),f=[];e:{var h=cF.get(t);if(h!==void 0){var d=Ab,p=t;switch(t){case"keypress":if(ad(r)===0)break e;case"keydown":case"keyup":d=n6;break;case"focusin":p="focus",d=$v;break;case"focusout":p="blur",d=$v;break;case"beforeblur":case"afterblur":d=$v;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=zA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=W8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=o6;break;case oF:case sF:case lF:d=Y8;break;case uF:d=l6;break;case"scroll":d=G8;break;case"wheel":d=c6;break;case"copy":case"cut":case"paste":d=K8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=XA}var v=(e&4)!==0,y=!v&&t==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var m=l,x;m!==null;){x=m;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=jc(m,g),b!=null&&v.push(Wc(m,b,x)))),y)break;m=m.return}0<v.length&&(h=new d(h,p,null,r,u),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&!(e&16)&&(p=r.relatedTarget||r.fromElement)&&(rs(p)||p[iu]))break e;if((d||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=r.relatedTarget||r.toElement,d=l,p=p?rs(p):null,p!==null&&(y=Rs(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(v=zA,b="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=XA,b="onPointerLeave",g="onPointerEnter",m="pointer"),y=d==null?h:cl(d),x=p==null?h:cl(p),h=new v(b,m+"leave",d,r,u),h.target=y,h.relatedTarget=x,b=null,rs(u)===l&&(v=new v(g,m+"enter",p,r,u),v.target=x,v.relatedTarget=y,b=v),y=b,d&&p)t:{for(v=d,g=p,m=0,x=v;x;x=Gs(x))m++;for(x=0,b=g;b;b=Gs(b))x++;for(;0<m-x;)v=Gs(v),m--;for(;0<x-m;)g=Gs(g),x--;for(;m--;){if(v===g||g!==null&&v===g.alternate)break t;v=Gs(v),g=Gs(g)}v=null}else v=null;d!==null&&oC(f,h,d,v,!1),p!==null&&y!==null&&oC(f,y,p,v,!0)}}e:{if(h=l?cl(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var _=g6;else if(qA(h))if(gF)_=b6;else{_=x6;var S=y6}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=_6);if(_&&(_=_(t,l))){mF(f,_,r,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Uy(h,"number",h.value)}switch(S=l?cl(l):window,t){case"focusin":(qA(S)||S.contentEditable==="true")&&(ul=S,Jy=l,Ec=null);break;case"focusout":Ec=Jy=ul=null;break;case"mousedown":ex=!0;break;case"contextmenu":case"mouseup":case"dragend":ex=!1,tC(f,r,u);break;case"selectionchange":if(w6)break;case"keydown":case"keyup":tC(f,r,u)}var E;if(Tb)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ll?pF(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(dF&&r.locale!=="ko"&&(ll||w!=="onCompositionStart"?w==="onCompositionEnd"&&ll&&(E=hF()):(eo=u,wb="value"in eo?eo.value:eo.textContent,ll=!0)),S=Md(l,w),0<S.length&&(w=new WA(w,t,null,r,u),f.push({event:w,listeners:S}),E?w.data=E:(E=vF(r),E!==null&&(w.data=E)))),(E=h6?d6(t,r):p6(t,r))&&(l=Md(l,"onBeforeInput"),0<l.length&&(u=new WA("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:l}),u.data=E))}bF(f,e)})}function Wc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Md(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=jc(t,r),a!=null&&n.unshift(Wc(t,a,i)),a=jc(t,e),a!=null&&n.push(Wc(t,a,i))),t=t.return}return n}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oC(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=jc(r,a),c!=null&&o.unshift(Wc(r,c,s))):i||(c=jc(r,a),c!=null&&o.push(Wc(r,c,s)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}function Ld(){}var Wv=null,Xv=null;function AF(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function tx(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sC=typeof setTimeout=="function"?setTimeout:void 0,A6=typeof clearTimeout=="function"?clearTimeout:void 0;function Pb(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function bl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function lC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Hv=0;function C6(t){return{$$typeof:db,toString:t,valueOf:t}}var Yp=Math.random().toString(36).slice(2),to="__reactFiber$"+Yp,Bd="__reactProps$"+Yp,iu="__reactContainer$"+Yp,uC="__reactEvents$"+Yp;function rs(t){var e=t[to];if(e)return e;for(var r=t.parentNode;r;){if(e=r[iu]||r[to]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=lC(t);t!==null;){if(r=t[to])return r;t=lC(t)}return e}t=r,r=t.parentNode}return null}function Nf(t){return t=t[to]||t[iu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(xe(33))}function qp(t){return t[Bd]||null}function CF(t){var e=t[uC];return e===void 0&&(e=t[uC]=new Set),e}var rx=[],fl=-1;function Do(t){return{current:t}}function Ut(t){0>fl||(t.current=rx[fl],rx[fl]=null,fl--)}function rr(t,e){fl++,rx[fl]=t.current,t.current=e}var Ao={},dn=Do(Ao),Bn=Do(!1),ms=Ao;function Bl(t,e){var r=t.type.contextTypes;if(!r)return Ao;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nn(t){return t=t.childContextTypes,t!=null}function Nd(){Ut(Bn),Ut(dn)}function cC(t,e,r){if(dn.current!==Ao)throw Error(xe(168));rr(dn,e),rr(Bn,r)}function TF(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(xe(108,gl(e)||"Unknown",i));return Xt({},r,n)}function od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ao,ms=dn.current,rr(dn,t),rr(Bn,Bn.current),!0}function fC(t,e,r){var n=t.stateNode;if(!n)throw Error(xe(169));r?(t=TF(t,e,ms),n.__reactInternalMemoizedMergedChildContext=t,Ut(Bn),Ut(dn),rr(dn,t)):Ut(Bn),rr(Bn,r)}var Ob=null,cs=null,T6=Wr.unstable_runWithPriority,Rb=Wr.unstable_scheduleCallback,nx=Wr.unstable_cancelCallback,P6=Wr.unstable_shouldYield,hC=Wr.unstable_requestPaint,ix=Wr.unstable_now,O6=Wr.unstable_getCurrentPriorityLevel,Kp=Wr.unstable_ImmediatePriority,PF=Wr.unstable_UserBlockingPriority,OF=Wr.unstable_NormalPriority,RF=Wr.unstable_LowPriority,IF=Wr.unstable_IdlePriority,Yv={},R6=hC!==void 0?hC:function(){},Pa=null,sd=null,qv=!1,dC=ix(),fn=1e4>dC?ix:function(){return ix()-dC};function Nl(){switch(O6()){case Kp:return 99;case PF:return 98;case OF:return 97;case RF:return 96;case IF:return 95;default:throw Error(xe(332))}}function FF(t){switch(t){case 99:return Kp;case 98:return PF;case 97:return OF;case 96:return RF;case 95:return IF;default:throw Error(xe(332))}}function gs(t,e){return t=FF(t),T6(t,e)}function Xc(t,e,r){return t=FF(t),Rb(t,e,r)}function ha(){if(sd!==null){var t=sd;sd=null,nx(t)}kF()}function kF(){if(!qv&&Pa!==null){qv=!0;var t=0;try{var e=Pa;gs(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),Pa=null}catch(r){throw Pa!==null&&(Pa=Pa.slice(t+1)),Rb(Kp,ha),r}finally{qv=!1}}}var I6=Os.ReactCurrentBatchConfig;function Ci(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var jd=Do(null),Ud=null,hl=null,$d=null;function Ib(){$d=hl=Ud=null}function Fb(t){var e=jd.current;Ut(jd),t.type._context._currentValue=e}function DF(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Sl(t,e){Ud=t,$d=hl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ri=!0),t.firstContext=null)}function hi(t,e){if($d!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&($d=t,e=1073741823),e={context:t,observedBits:e,next:null},hl===null){if(Ud===null)throw Error(xe(308));hl=e,Ud.dependencies={lanes:0,firstContext:e,responders:null}}else hl=hl.next=e;return t._currentValue}var Ha=!1;function kb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function MF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function co(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fo(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function pC(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hc(t,e,r,n){var i=t.updateQueue;Ha=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=t.alternate;if(u!==null){u=u.updateQueue;var f=u.lastBaseUpdate;f!==o&&(f===null?u.firstBaseUpdate=l:f.next=l,u.lastBaseUpdate=c)}}if(a!==null){f=i.baseState,o=0,u=l=c=null;do{s=a.lane;var h=a.eventTime;if((n&s)===s){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=t,p=a;switch(s=e,h=r,p.tag){case 1:if(d=p.payload,typeof d=="function"){f=d.call(h,f,s);break e}f=d;break e;case 3:d.flags=d.flags&-4097|64;case 0:if(d=p.payload,s=typeof d=="function"?d.call(h,f,s):d,s==null)break e;f=Xt({},f,s);break e;case 2:Ha=!0}}a.callback!==null&&(t.flags|=32,s=i.effects,s===null?i.effects=[a]:s.push(a))}else h={eventTime:h,lane:s,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=f):u=u.next=h,o|=s;if(a=a.next,a===null){if(s=i.shared.pending,s===null)break;a=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}while(1);u===null&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,Uf|=o,t.lanes=o,t.memoizedState=f}}function vC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(xe(191,i));i.call(n)}}}var LF=new $p.Component().refs;function Vd(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Xt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Zp={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Xn(),i=ho(t),a=co(n,i);a.payload=e,r!=null&&(a.callback=r),fo(t,a),po(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Xn(),i=ho(t),a=co(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),fo(t,a),po(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Xn(),n=ho(t),i=co(r,n);i.tag=2,e!=null&&(i.callback=e),fo(t,i),po(t,n,r)}};function mC(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!zc(r,n)||!zc(i,a):!0}function BF(t,e,r){var n=!1,i=Ao,a=e.contextType;return typeof a=="object"&&a!==null?a=hi(a):(i=Nn(e)?ms:dn.current,n=e.contextTypes,a=(n=n!=null)?Bl(t,i):Ao),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function gC(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Zp.enqueueReplaceState(e,e.state,null)}function ax(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=LF,kb(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=hi(a):(a=Nn(e)?ms:dn.current,i.context=Bl(t,a)),Hc(t,r,i,n),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Vd(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zp.enqueueReplaceState(i,i.state,null),Hc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var dh=Array.isArray;function ju(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xe(309));var n=r.stateNode}if(!n)throw Error(xe(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=n.refs;o===LF&&(o=n.refs={}),a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(xe(284));if(!r._owner)throw Error(xe(290,t))}return t}function ph(t,e){if(t.type!=="textarea")throw Error(xe(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function NF(t){function e(y,g){if(t){var m=y.lastEffect;m!==null?(m.nextEffect=g,y.lastEffect=g):y.firstEffect=y.lastEffect=g,g.nextEffect=null,g.flags=8}}function r(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=To(y,g),y.index=0,y.sibling=null,y}function a(y,g,m){return y.index=m,t?(m=y.alternate,m!==null?(m=m.index,m<g?(y.flags=2,g):m):(y.flags=2,g)):g}function o(y){return t&&y.alternate===null&&(y.flags=2),y}function s(y,g,m,x){return g===null||g.tag!==6?(g=em(m,y.mode,x),g.return=y,g):(g=i(g,m),g.return=y,g)}function c(y,g,m,x){return g!==null&&g.elementType===m.type?(x=i(g,m.props),x.ref=ju(y,g,m),x.return=y,x):(x=fd(m.type,m.key,m.props,null,y.mode,x),x.ref=ju(y,g,m),x.return=y,x)}function l(y,g,m,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=tm(m,y.mode,x),g.return=y,g):(g=i(g,m.children||[]),g.return=y,g)}function u(y,g,m,x,b){return g===null||g.tag!==7?(g=Cl(m,y.mode,x,b),g.return=y,g):(g=i(g,m),g.return=y,g)}function f(y,g,m){if(typeof g=="string"||typeof g=="number")return g=em(""+g,y.mode,m),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case sc:return m=fd(g.type,g.key,g.props,null,y.mode,m),m.ref=ju(y,null,g),m.return=y,m;case es:return g=tm(g,y.mode,m),g.return=y,g}if(dh(g)||ku(g))return g=Cl(g,y.mode,m,null),g.return=y,g;ph(y,g)}return null}function h(y,g,m,x){var b=g!==null?g.key:null;if(typeof m=="string"||typeof m=="number")return b!==null?null:s(y,g,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case sc:return m.key===b?m.type===Ka?u(y,g,m.props.children,x,b):c(y,g,m,x):null;case es:return m.key===b?l(y,g,m,x):null}if(dh(m)||ku(m))return b!==null?null:u(y,g,m,x,null);ph(y,m)}return null}function d(y,g,m,x,b){if(typeof x=="string"||typeof x=="number")return y=y.get(m)||null,s(g,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sc:return y=y.get(x.key===null?m:x.key)||null,x.type===Ka?u(g,y,x.props.children,b,x.key):c(g,y,x,b);case es:return y=y.get(x.key===null?m:x.key)||null,l(g,y,x,b)}if(dh(x)||ku(x))return y=y.get(m)||null,u(g,y,x,b,null);ph(g,x)}return null}function p(y,g,m,x){for(var b=null,_=null,S=g,E=g=0,w=null;S!==null&&E<m.length;E++){S.index>E?(w=S,S=null):w=S.sibling;var C=h(y,S,m[E],x);if(C===null){S===null&&(S=w);break}t&&S&&C.alternate===null&&e(y,S),g=a(C,g,E),_===null?b=C:_.sibling=C,_=C,S=w}if(E===m.length)return r(y,S),b;if(S===null){for(;E<m.length;E++)S=f(y,m[E],x),S!==null&&(g=a(S,g,E),_===null?b=S:_.sibling=S,_=S);return b}for(S=n(y,S);E<m.length;E++)w=d(S,y,E,m[E],x),w!==null&&(t&&w.alternate!==null&&S.delete(w.key===null?E:w.key),g=a(w,g,E),_===null?b=w:_.sibling=w,_=w);return t&&S.forEach(function(A){return e(y,A)}),b}function v(y,g,m,x){var b=ku(m);if(typeof b!="function")throw Error(xe(150));if(m=b.call(m),m==null)throw Error(xe(151));for(var _=b=null,S=g,E=g=0,w=null,C=m.next();S!==null&&!C.done;E++,C=m.next()){S.index>E?(w=S,S=null):w=S.sibling;var A=h(y,S,C.value,x);if(A===null){S===null&&(S=w);break}t&&S&&A.alternate===null&&e(y,S),g=a(A,g,E),_===null?b=A:_.sibling=A,_=A,S=w}if(C.done)return r(y,S),b;if(S===null){for(;!C.done;E++,C=m.next())C=f(y,C.value,x),C!==null&&(g=a(C,g,E),_===null?b=C:_.sibling=C,_=C);return b}for(S=n(y,S);!C.done;E++,C=m.next())C=d(S,y,E,C.value,x),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?E:C.key),g=a(C,g,E),_===null?b=C:_.sibling=C,_=C);return t&&S.forEach(function(P){return e(y,P)}),b}return function(y,g,m,x){var b=typeof m=="object"&&m!==null&&m.type===Ka&&m.key===null;b&&(m=m.props.children);var _=typeof m=="object"&&m!==null;if(_)switch(m.$$typeof){case sc:e:{for(_=m.key,b=g;b!==null;){if(b.key===_){switch(b.tag){case 7:if(m.type===Ka){r(y,b.sibling),g=i(b,m.props.children),g.return=y,y=g;break e}break;default:if(b.elementType===m.type){r(y,b.sibling),g=i(b,m.props),g.ref=ju(y,b,m),g.return=y,y=g;break e}}r(y,b);break}else e(y,b);b=b.sibling}m.type===Ka?(g=Cl(m.props.children,y.mode,x,m.key),g.return=y,y=g):(x=fd(m.type,m.key,m.props,null,y.mode,x),x.ref=ju(y,g,m),x.return=y,y=x)}return o(y);case es:e:{for(b=m.key;g!==null;){if(g.key===b)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){r(y,g.sibling),g=i(g,m.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else e(y,g);g=g.sibling}g=tm(m,y.mode,x),g.return=y,y=g}return o(y)}if(typeof m=="string"||typeof m=="number")return m=""+m,g!==null&&g.tag===6?(r(y,g.sibling),g=i(g,m),g.return=y,y=g):(r(y,g),g=em(m,y.mode,x),g.return=y,y=g),o(y);if(dh(m))return p(y,g,m,x);if(ku(m))return v(y,g,m,x);if(_&&ph(y,m),typeof m>"u"&&!b)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(xe(152,gl(y.type)||"Component"))}return r(y,g)}}var Gd=NF(!0),jF=NF(!1),jf={},ta=Do(jf),Yc=Do(jf),qc=Do(jf);function ns(t){if(t===jf)throw Error(xe(174));return t}function ox(t,e){switch(rr(qc,e),rr(Yc,t),rr(ta,jf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zy(e,t)}Ut(ta),rr(ta,e)}function jl(){Ut(ta),Ut(Yc),Ut(qc)}function yC(t){ns(qc.current);var e=ns(ta.current),r=zy(e,t.type);e!==r&&(rr(Yc,t),rr(ta,r))}function Db(t){Yc.current===t&&(Ut(ta),Ut(Yc))}var tr=Do(0);function zd(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ia=null,ro=null,ra=!1;function UF(t,e){var r=li(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function xC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function sx(t){if(ra){var e=ro;if(e){var r=e;if(!xC(t,e)){if(e=bl(r.nextSibling),!e||!xC(t,e)){t.flags=t.flags&-1025|2,ra=!1,Ia=t;return}UF(Ia,r)}Ia=t,ro=bl(e.firstChild)}else t.flags=t.flags&-1025|2,ra=!1,Ia=t}}function _C(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ia=t}function vh(t){if(t!==Ia)return!1;if(!ra)return _C(t),ra=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!tx(e,t.memoizedProps))for(e=ro;e;)UF(t,e),e=bl(e.nextSibling);if(_C(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(xe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ro=bl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ro=null}}else ro=Ia?bl(t.stateNode.nextSibling):null;return!0}function Kv(){ro=Ia=null,ra=!1}var El=[];function Mb(){for(var t=0;t<El.length;t++)El[t]._workInProgressVersionPrimary=null;El.length=0}var wc=Os.ReactCurrentDispatcher,fi=Os.ReactCurrentBatchConfig,Kc=0,vr=null,cn=null,Jr=null,Wd=!1,Ac=!1;function Rn(){throw Error(xe(321))}function Lb(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!si(t[r],e[r]))return!1;return!0}function Bb(t,e,r,n,i,a){if(Kc=a,vr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wc.current=t===null||t.memoizedState===null?k6:D6,t=r(n,i),Ac){a=0;do{if(Ac=!1,!(25>a))throw Error(xe(301));a+=1,Jr=cn=null,e.updateQueue=null,wc.current=M6,t=r(n,i)}while(Ac)}if(wc.current=qd,e=cn!==null&&cn.next!==null,Kc=0,Jr=cn=vr=null,Wd=!1,e)throw Error(xe(300));return t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?vr.memoizedState=Jr=t:Jr=Jr.next=t,Jr}function Is(){if(cn===null){var t=vr.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=Jr===null?vr.memoizedState:Jr.next;if(e!==null)Jr=e,cn=t;else{if(t===null)throw Error(xe(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},Jr===null?vr.memoizedState=Jr=t:Jr=Jr.next=t}return Jr}function Qi(t,e){return typeof e=="function"?e(t):e}function Uu(t){var e=Is(),r=e.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=t;var n=cn,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var s=o=a=null,c=i;do{var l=c.lane;if((Kc&l)===l)s!==null&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===t?c.eagerState:t(n,c.action);else{var u={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};s===null?(o=s=u,a=n):s=s.next=u,vr.lanes|=l,Uf|=l}c=c.next}while(c!==null&&c!==i);s===null?a=n:s.next=o,si(n,e.memoizedState)||(Ri=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=s,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function $u(t){var e=Is(),r=e.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);si(a,e.memoizedState)||(Ri=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function bC(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(Kc&t)===t)&&(e._workInProgressVersionPrimary=n,El.push(e))),t)return r(e._source);throw El.push(e),Error(xe(350))}function $F(t,e,r,n){var i=En;if(i===null)throw Error(xe(349));var a=e._getVersion,o=a(e._source),s=wc.current,c=s.useState(function(){return bC(i,e,r)}),l=c[1],u=c[0];c=Jr;var f=t.memoizedState,h=f.refs,d=h.getSnapshot,p=f.source;f=f.subscribe;var v=vr;return t.memoizedState={refs:h,source:e,subscribe:n},s.useEffect(function(){h.getSnapshot=r,h.setSnapshot=l;var y=a(e._source);if(!si(o,y)){y=r(e._source),si(u,y)||(l(y),y=ho(v),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var g=i.entanglements,m=y;0<m;){var x=31-wo(m),b=1<<x;g[x]|=y,m&=~b}}},[r,e,n]),s.useEffect(function(){return n(e._source,function(){var y=h.getSnapshot,g=h.setSnapshot;try{g(y(e._source));var m=ho(v);i.mutableReadLanes|=m&i.pendingLanes}catch(x){g(function(){throw x})}})},[e,n]),si(d,r)&&si(p,e)&&si(f,n)||(t={pending:null,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:u},t.dispatch=l=Ub.bind(null,vr,t),c.queue=t,c.baseQueue=null,u=bC(i,e,r),c.memoizedState=c.baseState=u),u}function VF(t,e,r){var n=Is();return $F(n,t,e,r)}function Vu(t){var e=is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},t=t.dispatch=Ub.bind(null,vr,t),[e.memoizedState,t]}function Xd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=vr.updateQueue,e===null?(e={lastEffect:null},vr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function SC(t){var e=is();return t={current:t},e.memoizedState=t}function Hd(){return Is().memoizedState}function lx(t,e,r,n){var i=is();vr.flags|=t,i.memoizedState=Xd(1|e,r,void 0,n===void 0?null:n)}function Nb(t,e,r,n){var i=Is();n=n===void 0?null:n;var a=void 0;if(cn!==null){var o=cn.memoizedState;if(a=o.destroy,n!==null&&Lb(n,o.deps)){Xd(e,r,a,n);return}}vr.flags|=t,i.memoizedState=Xd(1|e,r,a,n)}function EC(t,e){return lx(516,4,t,e)}function Yd(t,e){return Nb(516,4,t,e)}function GF(t,e){return Nb(4,2,t,e)}function zF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WF(t,e,r){return r=r!=null?r.concat([t]):null,Nb(4,2,zF.bind(null,e,t),r)}function jb(){}function XF(t,e){var r=Is();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Lb(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function HF(t,e){var r=Is();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Lb(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function F6(t,e){var r=Nl();gs(98>r?98:r,function(){t(!0)}),gs(97<r?97:r,function(){var n=fi.transition;fi.transition=1;try{t(!1),e()}finally{fi.transition=n}})}function Ub(t,e,r){var n=Xn(),i=ho(t),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?a.next=a:(a.next=o.next,o.next=a),e.pending=a,o=t.alternate,t===vr||o!==null&&o===vr)Ac=Wd=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,c=o(s,r);if(a.eagerReducer=o,a.eagerState=c,si(c,s))return}catch{}finally{}po(t,i,n)}}var qd={readContext:hi,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useOpaqueIdentifier:Rn,unstable_isNewReconciler:!1},k6={readContext:hi,useCallback:function(t,e){return is().memoizedState=[t,e===void 0?null:e],t},useContext:hi,useEffect:EC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lx(4,2,zF.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lx(4,2,t,e)},useMemo:function(t,e){var r=is();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=is();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Ub.bind(null,vr,t),[n.memoizedState,t]},useRef:SC,useState:Vu,useDebugValue:jb,useDeferredValue:function(t){var e=Vu(t),r=e[0],n=e[1];return EC(function(){var i=fi.transition;fi.transition=1;try{n(t)}finally{fi.transition=i}},[t]),r},useTransition:function(){var t=Vu(!1),e=t[0];return t=F6.bind(null,t[1]),SC(t),[t,e]},useMutableSource:function(t,e,r){var n=is();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},$F(n,t,e,r)},useOpaqueIdentifier:function(){if(ra){var t=!1,e=C6(function(){throw t||(t=!0,r("r:"+(Hv++).toString(36))),Error(xe(355))}),r=Vu(e)[1];return!(vr.mode&2)&&(vr.flags|=516,Xd(5,function(){r("r:"+(Hv++).toString(36))},void 0,null)),e}return e="r:"+(Hv++).toString(36),Vu(e),e},unstable_isNewReconciler:!1},D6={readContext:hi,useCallback:XF,useContext:hi,useEffect:Yd,useImperativeHandle:WF,useLayoutEffect:GF,useMemo:HF,useReducer:Uu,useRef:Hd,useState:function(){return Uu(Qi)},useDebugValue:jb,useDeferredValue:function(t){var e=Uu(Qi),r=e[0],n=e[1];return Yd(function(){var i=fi.transition;fi.transition=1;try{n(t)}finally{fi.transition=i}},[t]),r},useTransition:function(){var t=Uu(Qi)[0];return[Hd().current,t]},useMutableSource:VF,useOpaqueIdentifier:function(){return Uu(Qi)[0]},unstable_isNewReconciler:!1},M6={readContext:hi,useCallback:XF,useContext:hi,useEffect:Yd,useImperativeHandle:WF,useLayoutEffect:GF,useMemo:HF,useReducer:$u,useRef:Hd,useState:function(){return $u(Qi)},useDebugValue:jb,useDeferredValue:function(t){var e=$u(Qi),r=e[0],n=e[1];return Yd(function(){var i=fi.transition;fi.transition=1;try{n(t)}finally{fi.transition=i}},[t]),r},useTransition:function(){var t=$u(Qi)[0];return[Hd().current,t]},useMutableSource:VF,useOpaqueIdentifier:function(){return $u(Qi)[0]},unstable_isNewReconciler:!1},L6=Os.ReactCurrentOwner,Ri=!1;function In(t,e,r,n){e.child=t===null?jF(e,null,r,n):Gd(e,t.child,r,n)}function wC(t,e,r,n,i){r=r.render;var a=e.ref;return Sl(e,i),n=Bb(t,e,r,n,a,i),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Fa(t,e,i)):(e.flags|=1,In(t,e,n,i),e.child)}function AC(t,e,r,n,i,a){if(t===null){var o=r.type;return typeof o=="function"&&!Xb(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,YF(t,e,o,n,i,a)):(t=fd(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,!(i&a)&&(i=o.memoizedProps,r=r.compare,r=r!==null?r:zc,r(i,n)&&t.ref===e.ref)?Fa(t,e,a):(e.flags|=1,t=To(o,n),t.ref=e.ref,t.return=e,e.child=t)}function YF(t,e,r,n,i,a){if(t!==null&&zc(t.memoizedProps,n)&&t.ref===e.ref)if(Ri=!1,(a&i)!==0)t.flags&16384&&(Ri=!0);else return e.lanes=t.lanes,Fa(t,e,a);return ux(t,e,r,n,a)}function Zv(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},gh(e,r);else if(r&1073741824)e.memoizedState={baseLanes:0},gh(e,a!==null?a.baseLanes:r);else return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},gh(e,t),null;else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,gh(e,n);return In(t,e,i,r),e.child}function qF(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function ux(t,e,r,n,i){var a=Nn(r)?ms:dn.current;return a=Bl(e,a),Sl(e,i),r=Bb(t,e,r,n,a,i),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Fa(t,e,i)):(e.flags|=1,In(t,e,r,i),e.child)}function CC(t,e,r,n,i){if(Nn(r)){var a=!0;od(e)}else a=!1;if(Sl(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),BF(e,r,n),ax(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var c=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=hi(l):(l=Nn(r)?ms:dn.current,l=Bl(e,l));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==n||c!==l)&&gC(e,o,n,l),Ha=!1;var h=e.memoizedState;o.state=h,Hc(e,n,o,i),c=e.memoizedState,s!==n||h!==c||Bn.current||Ha?(typeof u=="function"&&(Vd(e,r,u,n),c=e.memoizedState),(s=Ha||mC(e,r,s,n,h,c,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=l,n=s):(typeof o.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{o=e.stateNode,MF(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Ci(e.type,s),o.props=l,f=e.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=hi(c):(c=Nn(r)?ms:dn.current,c=Bl(e,c));var d=r.getDerivedStateFromProps;(u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==c)&&gC(e,o,n,c),Ha=!1,h=e.memoizedState,o.state=h,Hc(e,n,o,i);var p=e.memoizedState;s!==f||h!==p||Bn.current||Ha?(typeof d=="function"&&(Vd(e,r,d,n),p=e.memoizedState),(l=Ha||mC(e,r,l,n,h,p,c))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),n=!1)}return cx(t,e,r,n,a,i)}function cx(t,e,r,n,i,a){qF(t,e);var o=(e.flags&64)!==0;if(!n&&!o)return i&&fC(e,r,!1),Fa(t,e,a);n=e.stateNode,L6.current=e;var s=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Gd(e,t.child,null,a),e.child=Gd(e,null,s,a)):In(t,e,s,a),e.memoizedState=n.state,i&&fC(e,r,!0),e.child}function TC(t){var e=t.stateNode;e.pendingContext?cC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cC(t,e.context,!1),ox(t,e.containerInfo)}var mh={dehydrated:null,retryLane:0};function PC(t,e,r){var n=e.pendingProps,i=tr.current,a=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),rr(tr,i&1),t===null?(n.fallback!==void 0&&sx(e),t=n.children,i=n.fallback,a?(t=OC(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=mh,t):typeof n.unstable_expectedLoadTime=="number"?(t=OC(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=mh,e.lanes=33554432,t):(r=Hb({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?a?(n=IC(t,e,n.children,n.fallback,r),a=e.child,i=t.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=t.childLanes&~r,e.memoizedState=mh,n):(r=RC(t,e,n.children,r),e.memoizedState=null,r):a?(n=IC(t,e,n.children,n.fallback,r),a=e.child,i=t.child.memoizedState,a.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=t.childLanes&~r,e.memoizedState=mh,n):(r=RC(t,e,n.children,r),e.memoizedState=null,r)}function OC(t,e,r,n){var i=t.mode,a=t.child;return e={mode:"hidden",children:e},!(i&2)&&a!==null?(a.childLanes=0,a.pendingProps=e):a=Hb(e,i,0,null),r=Cl(r,i,n,null),a.return=t,r.return=t,a.sibling=r,t.child=a,r}function RC(t,e,r,n){var i=t.child;return t=i.sibling,r=To(i,{mode:"visible",children:r}),!(e.mode&2)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function IC(t,e,r,n,i){var a=e.mode,o=t.child;t=o.sibling;var s={mode:"hidden",children:r};return!(a&2)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=s,o=r.lastEffect,o!==null?(e.firstEffect=r.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):r=To(o,s),t!==null?n=To(t,n):(n=Cl(n,a,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function FC(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),DF(t.return,e)}function Qv(t,e,r,n,i,a){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=a)}function kC(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(In(t,e,n.children,r),n=tr.current,n&2)n=n&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&FC(t,r);else if(t.tag===19)FC(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(rr(tr,n),!(e.mode&2))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&zd(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Qv(e,!1,i,r,a,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zd(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Qv(e,!0,r,null,a,e.lastEffect);break;case"together":Qv(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Fa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Uf|=e.lanes,r&e.childLanes){if(t!==null&&e.child!==t.child)throw Error(xe(153));if(e.child!==null){for(t=e.child,r=To(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=To(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var KF,fx,ZF,QF;KF=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fx=function(){};ZF=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ns(ta.current);var a=null;switch(r){case"input":i=Ny(t,i),n=Ny(t,n),a=[];break;case"option":i=$y(t,i),n=$y(t,n),a=[];break;case"select":i=Xt({},i,{value:void 0}),n=Xt({},n,{value:void 0}),a=[];break;case"textarea":i=Vy(t,i),n=Vy(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ld)}Wy(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Bc.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(a=a||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Bc.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Bt("scroll",t),a||s===c||(a=[])):typeof c=="object"&&c!==null&&c.$$typeof===db?c.toString():(a=a||[]).push(l,c))}r&&(a=a||[]).push("style",r);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};QF=function(t,e,r,n){r!==n&&(e.flags|=4)};function Gu(t,e){if(!ra)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function B6(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Nn(e.type)&&Nd(),null;case 3:return jl(),Ut(Bn),Ut(dn),Mb(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vh(e)?e.flags|=4:n.hydrate||(e.flags|=256)),fx(e),null;case 5:Db(e);var i=ns(qc.current);if(r=e.type,t!==null&&e.stateNode!=null)ZF(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(xe(166));return null}if(t=ns(ta.current),vh(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[to]=e,n[Bd]=a,r){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(t=0;t<uc.length;t++)Bt(uc[t],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":kA(n,a),Bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Bt("invalid",n);break;case"textarea":MA(n,a),Bt("invalid",n)}Wy(r,a),t=null;for(var o in a)a.hasOwnProperty(o)&&(i=a[o],o==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):Bc.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Bt("scroll",n));switch(r){case"input":uh(n),DA(n,a,!0);break;case"textarea":uh(n),LA(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ld)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===Gy.html&&(t=WI(r)),t===Gy.html?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[to]=e,t[Bd]=n,KF(t,e,!1,!1),e.stateNode=t,o=Xy(r,n),r){case"dialog":Bt("cancel",t),Bt("close",t),i=n;break;case"iframe":case"object":case"embed":Bt("load",t),i=n;break;case"video":case"audio":for(i=0;i<uc.length;i++)Bt(uc[i],t);i=n;break;case"source":Bt("error",t),i=n;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),i=n;break;case"details":Bt("toggle",t),i=n;break;case"input":kA(t,n),i=Ny(t,n),Bt("invalid",t);break;case"option":i=$y(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Xt({},n,{value:void 0}),Bt("invalid",t);break;case"textarea":MA(t,n),i=Vy(t,n),Bt("invalid",t);break;default:i=n}Wy(r,i);var s=i;for(a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="style"?YI(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XI(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Nc(t,c):typeof c=="number"&&Nc(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Bc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Bt("scroll",t):c!=null&&sb(t,a,c,o))}switch(r){case"input":uh(t),DA(t,n,!1);break;case"textarea":uh(t),LA(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Eo(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?yl(t,!!n.multiple,a,!1):n.defaultValue!=null&&yl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ld)}AF(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)QF(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(xe(166));r=ns(qc.current),ns(ta.current),vh(e)?(n=e.stateNode,r=e.memoizedProps,n[to]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[to]=e,e.stateNode=n)}return null;case 13:return Ut(tr),n=e.memoizedState,e.flags&64?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&vh(e):r=t.memoizedState!==null,n&&!r&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||tr.current&1?tn===0&&(tn=3):((tn===0||tn===3)&&(tn=4),En===null||!(Uf&134217727)&&!(ou&134217727)||wl(En,hn))),(n||r)&&(e.flags|=4),null);case 4:return jl(),fx(e),t===null&&SF(e.stateNode.containerInfo),null;case 10:return Fb(e),null;case 17:return Nn(e.type)&&Nd(),null;case 19:if(Ut(tr),n=e.memoizedState,n===null)return null;if(a=(e.flags&64)!==0,o=n.rendering,o===null)if(a)Gu(n,!1);else{if(tn!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(o=zd(t),o!==null){for(e.flags|=64,Gu(n,!1),a=o.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return rr(tr,tr.current&1|2),e.child}t=t.sibling}n.tail!==null&&fn()>gx&&(e.flags|=64,a=!0,Gu(n,!1),e.lanes=33554432)}else{if(!a)if(t=zd(o),t!==null){if(e.flags|=64,a=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Gu(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!ra)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*fn()-n.renderingStartTime>gx&&r!==1073741824&&(e.flags|=64,a=!0,Gu(n,!1),e.lanes=33554432);n.isBackwards?(o.sibling=e.child,e.child=o):(r=n.last,r!==null?r.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=fn(),r.sibling=null,e=tr.current,rr(tr,a?e&1|2:e&1),r):null;case 23:case 24:return Wb(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(xe(156,e.tag))}function N6(t){switch(t.tag){case 1:Nn(t.type)&&Nd();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(jl(),Ut(Bn),Ut(dn),Mb(),e=t.flags,e&64)throw Error(xe(285));return t.flags=e&-4097|64,t;case 5:return Db(t),null;case 13:return Ut(tr),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Ut(tr),null;case 4:return jl(),null;case 10:return Fb(t),null;case 23:case 24:return Wb(),null;default:return null}}function $b(t,e){try{var r="",n=e;do r+=y8(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i}}function hx(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var j6=typeof WeakMap=="function"?WeakMap:Map;function JF(t,e,r){r=co(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Zd||(Zd=!0,yx=n),hx(t,e)},r}function ek(t,e,r){r=co(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return hx(t,e),n(i)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this),hx(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}var U6=typeof WeakSet=="function"?WeakSet:Set;function DC(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){vo(t,r)}else e.current=null}function $6(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:Ci(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Pb(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(xe(163))}function V6(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,i&4&&i&1&&(uk(r,t),K6(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:Ci(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&vC(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}vC(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&AF(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&iF(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(xe(163))}function MC(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=HI("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function LC(t,e){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Ob,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)uk(e,r);else{n=e;try{i()}catch(a){vo(n,a)}}r=r.next}while(r!==t)}break;case 1:if(DC(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){vo(e,a)}break;case 5:DC(e);break;case 4:tk(t,e)}}function BC(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function NC(t){return t.tag===5||t.tag===3||t.tag===4}function jC(t){e:{for(var e=t.return;e!==null;){if(NC(e))break e;e=e.return}throw Error(xe(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(xe(161))}r.flags&16&&(Nc(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||NC(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?dx(t,r,e):px(t,r,e)}function dx(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ld));else if(n!==4&&(t=t.child,t!==null))for(dx(t,e,r),t=t.sibling;t!==null;)dx(t,e,r),t=t.sibling}function px(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(px(t,e,r),t=t.sibling;t!==null;)px(t,e,r),t=t.sibling}function tk(t,e){for(var r=e,n=!1,i,a;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(xe(160));switch(i=n.stateNode,n.tag){case 5:a=!1;break e;case 3:i=i.containerInfo,a=!0;break e;case 4:i=i.containerInfo,a=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var o=t,s=r,c=s;;)if(LC(o,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}a?(o=i,s=r.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,a=!0,r.child.return=r,r=r.child;continue}}else if(LC(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Jv(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,a!==null){for(r[Bd]=n,t==="input"&&n.type==="radio"&&n.name!=null&&GI(r,n),Xy(t,i),e=Xy(t,n),i=0;i<a.length;i+=2){var o=a[i],s=a[i+1];o==="style"?YI(r,s):o==="dangerouslySetInnerHTML"?XI(r,s):o==="children"?Nc(r,s):sb(r,o,s,e)}switch(t){case"input":jy(r,n);break;case"textarea":zI(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,a=n.value,a!=null?yl(r,!!n.multiple,a,!1):t!==!!n.multiple&&(n.defaultValue!=null?yl(r,!!n.multiple,n.defaultValue,!0):yl(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(xe(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,iF(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(zb=fn(),MC(e.child,!0)),UC(e);return;case 19:UC(e);return;case 17:return;case 23:case 24:MC(e,e.memoizedState!==null);return}throw Error(xe(163))}function UC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new U6),e.forEach(function(n){var i=J6.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function G6(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var z6=Math.ceil,Kd=Os.ReactCurrentDispatcher,Vb=Os.ReactCurrentOwner,We=0,En=null,Ir=null,hn=0,ys=0,vx=Do(0),tn=0,Qp=null,au=0,Uf=0,ou=0,Gb=0,mx=null,zb=0,gx=1/0;function su(){gx=fn()+500}var ke=null,Zd=!1,yx=null,Ji=null,Co=!1,Cc=null,cc=90,xx=[],_x=[],Da=null,Tc=0,bx=null,ld=-1,Oa=0,ud=0,Pc=null,cd=!1;function Xn(){return We&48?fn():ld!==-1?ld:ld=fn()}function ho(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return Nl()===99?1:2;if(Oa===0&&(Oa=au),I6.transition!==0){ud!==0&&(ud=mx!==null?mx.pendingLanes:0),t=Oa;var e=4186112&~ud;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Nl(),We&4&&t===98?t=Dd(12,Oa):(t=D8(t),t=Dd(t,Oa)),t}function po(t,e,r){if(50<Tc)throw Tc=0,bx=null,Error(xe(185));if(t=Jp(t,e),t===null)return null;Wp(t,e,r),t===En&&(ou|=e,tn===4&&wl(t,hn));var n=Nl();e===1?We&8&&!(We&48)?Sx(t):(di(t,r),We===0&&(su(),ha())):(!(We&4)||n!==98&&n!==99||(Da===null?Da=new Set([t]):Da.add(t)),di(t,r)),mx=t}function Jp(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function di(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-wo(o),c=1<<s,l=a[s];if(l===-1){if(!(c&n)||c&i){l=e,il(c);var u=Dt;a[s]=10<=u?l+250:6<=u?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);o&=~c}if(n=Vc(t,t===En?hn:0),e=Dt,n===0)r!==null&&(r!==Yv&&nx(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==Yv&&nx(r)}e===15?(r=Sx.bind(null,t),Pa===null?(Pa=[r],sd=Rb(Kp,kF)):Pa.push(r),r=Yv):e===14?r=Xc(99,Sx.bind(null,t)):(r=M8(e),r=Xc(r,rk.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function rk(t){if(ld=-1,ud=Oa=0,We&48)throw Error(xe(327));var e=t.callbackNode;if(Mo()&&t.callbackNode!==e)return null;var r=Vc(t,t===En?hn:0);if(r===0)return null;var n=r,i=We;We|=16;var a=ok();(En!==t||hn!==n)&&(su(),Al(t,n));do try{H6();break}catch(s){ak(t,s)}while(1);if(Ib(),Kd.current=a,We=i,Ir!==null?n=0:(En=null,hn=0,n=tn),au&ou)Al(t,0);else if(n!==0){if(n===2&&(We|=64,t.hydrate&&(t.hydrate=!1,Pb(t.containerInfo)),r=fF(t),r!==0&&(n=fc(t,r))),n===1)throw e=Qp,Al(t,0),wl(t,r),di(t,fn()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(xe(345));case 2:Xo(t);break;case 3:if(wl(t,r),(r&62914560)===r&&(n=zb+500-fn(),10<n)){if(Vc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sC(Xo.bind(null,t),n);break}Xo(t);break;case 4:if(wl(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var o=31-wo(r);a=1<<o,o=n[o],o>i&&(i=o),r&=~a}if(r=i,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z6(r/1960))-r,10<r){t.timeoutHandle=sC(Xo.bind(null,t),r);break}Xo(t);break;case 5:Xo(t);break;default:throw Error(xe(329))}}return di(t,fn()),t.callbackNode===e?rk.bind(null,t):null}function wl(t,e){for(e&=~Gb,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-wo(e),n=1<<r;t[r]=-1,e&=~n}}function Sx(t){if(We&48)throw Error(xe(327));if(Mo(),t===En&&t.expiredLanes&hn){var e=hn,r=fc(t,e);au&ou&&(e=Vc(t,e),r=fc(t,e))}else e=Vc(t,0),r=fc(t,e);if(t.tag!==0&&r===2&&(We|=64,t.hydrate&&(t.hydrate=!1,Pb(t.containerInfo)),e=fF(t),e!==0&&(r=fc(t,e))),r===1)throw r=Qp,Al(t,0),wl(t,e),di(t,fn()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xo(t),di(t,fn()),null}function W6(){if(Da!==null){var t=Da;Da=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,di(e,fn())})}ha()}function nk(t,e){var r=We;We|=1;try{return t(e)}finally{We=r,We===0&&(su(),ha())}}function ik(t,e){var r=We;We&=-2,We|=8;try{return t(e)}finally{We=r,We===0&&(su(),ha())}}function gh(t,e){rr(vx,ys),ys|=e,au|=e}function Wb(){ys=vx.current,Ut(vx)}function Al(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,A6(r)),Ir!==null)for(r=Ir.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Nd();break;case 3:jl(),Ut(Bn),Ut(dn),Mb();break;case 5:Db(n);break;case 4:jl();break;case 13:Ut(tr);break;case 19:Ut(tr);break;case 10:Fb(n);break;case 23:case 24:Wb()}r=r.return}En=t,Ir=To(t.current,null),hn=ys=au=e,tn=0,Qp=null,Gb=ou=Uf=0}function ak(t,e){do{var r=Ir;try{if(Ib(),wc.current=qd,Wd){for(var n=vr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Wd=!1}if(Kc=0,Jr=cn=vr=null,Ac=!1,Vb.current=null,r===null||r.return===null){tn=1,Qp=e,Ir=null;break}e:{var a=t,o=r.return,s=r,c=e;if(e=hn,s.flags|=2048,s.firstEffect=s.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c;if(!(s.mode&2)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.lanes=u.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=(tr.current&1)!==0,h=o;do{var d;if(d=h.tag===13){var p=h.memoizedState;if(p!==null)d=p.dehydrated!==null;else{var v=h.memoizedProps;d=v.fallback===void 0?!1:v.unstable_avoidThisFallback!==!0?!0:!f}}if(d){var y=h.updateQueue;if(y===null){var g=new Set;g.add(l),h.updateQueue=g}else y.add(l);if(!(h.mode&2)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var m=co(-1,1);m.tag=2,fo(s,m)}s.lanes|=1;break e}c=void 0,s=e;var x=a.pingCache;if(x===null?(x=a.pingCache=new j6,c=new Set,x.set(l,c)):(c=x.get(l),c===void 0&&(c=new Set,x.set(l,c))),!c.has(s)){c.add(s);var b=Q6.bind(null,a,l,s);l.then(b,b)}h.flags|=4096,h.lanes=e;break e}h=h.return}while(h!==null);c=Error((gl(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}tn!==5&&(tn=2),c=$b(c,s),h=o;do{switch(h.tag){case 3:a=c,h.flags|=4096,e&=-e,h.lanes|=e;var _=JF(h,a,e);pC(h,_);break e;case 1:a=c;var S=h.type,E=h.stateNode;if(!(h.flags&64)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ji===null||!Ji.has(E)))){h.flags|=4096,e&=-e,h.lanes|=e;var w=ek(h,a,e);pC(h,w);break e}}h=h.return}while(h!==null)}lk(r)}catch(C){e=C,Ir===r&&r!==null&&(Ir=r=r.return);continue}break}while(1)}function ok(){var t=Kd.current;return Kd.current=qd,t===null?qd:t}function fc(t,e){var r=We;We|=16;var n=ok();En===t&&hn===e||Al(t,e);do try{X6();break}catch(i){ak(t,i)}while(1);if(Ib(),We=r,Kd.current=n,Ir!==null)throw Error(xe(261));return En=null,hn=0,tn}function X6(){for(;Ir!==null;)sk(Ir)}function H6(){for(;Ir!==null&&!P6();)sk(Ir)}function sk(t){var e=ck(t.alternate,t,ys);t.memoizedProps=t.pendingProps,e===null?lk(t):Ir=e,Vb.current=null}function lk(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&2048){if(r=N6(e),r!==null){r.flags&=2047,Ir=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(r=B6(r,e,ys),r!==null){Ir=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||ys&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){Ir=e;return}Ir=e=t}while(e!==null);tn===0&&(tn=5)}function Xo(t){var e=Nl();return gs(99,Y6.bind(null,t,e)),null}function Y6(t,e){do Mo();while(Cc!==null);if(We&48)throw Error(xe(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(xe(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,s=t.expirationTimes;0<a;){var c=31-wo(a),l=1<<c;i[c]=0,o[c]=-1,s[c]=-1,a&=~l}if(Da!==null&&!(n&24)&&Da.has(t)&&Da.delete(t),t===En&&(Ir=En=null,hn=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=We,We|=32,Vb.current=null,Wv=nd,o=eC(),Qy(o)){if("selectionStart"in o)s={start:o.selectionStart,end:o.selectionEnd};else e:if(s=(s=o.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&l.rangeCount!==0){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var u=0,f=-1,h=-1,d=0,p=0,v=o,y=null;t:for(;;){for(var g;v!==s||a!==0&&v.nodeType!==3||(f=u+a),v!==c||l!==0&&v.nodeType!==3||(h=u+l),v.nodeType===3&&(u+=v.nodeValue.length),(g=v.firstChild)!==null;)y=v,v=g;for(;;){if(v===o)break t;if(y===s&&++d===a&&(f=u),y===c&&++p===l&&(h=u),(g=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=g}s=f===-1||h===-1?null:{start:f,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;Xv={focusedElem:o,selectionRange:s},nd=!1,Pc=null,cd=!1,ke=n;do try{q6()}catch(C){if(ke===null)throw Error(xe(330));vo(ke,C),ke=ke.nextEffect}while(ke!==null);Pc=null,ke=n;do try{for(o=t;ke!==null;){var m=ke.flags;if(m&16&&Nc(ke.stateNode,""),m&128){var x=ke.alternate;if(x!==null){var b=x.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(m&1038){case 2:jC(ke),ke.flags&=-3;break;case 6:jC(ke),ke.flags&=-3,Jv(ke.alternate,ke);break;case 1024:ke.flags&=-1025;break;case 1028:ke.flags&=-1025,Jv(ke.alternate,ke);break;case 4:Jv(ke.alternate,ke);break;case 8:s=ke,tk(o,s);var _=s.alternate;BC(s),_!==null&&BC(_)}ke=ke.nextEffect}}catch(C){if(ke===null)throw Error(xe(330));vo(ke,C),ke=ke.nextEffect}while(ke!==null);if(b=Xv,x=eC(),m=b.focusedElem,o=b.selectionRange,x!==m&&m&&m.ownerDocument&&xF(m.ownerDocument.documentElement,m)){for(o!==null&&Qy(m)&&(x=o.start,b=o.end,b===void 0&&(b=x),"selectionStart"in m?(m.selectionStart=x,m.selectionEnd=Math.min(b,m.value.length)):(b=(x=m.ownerDocument||document)&&x.defaultView||window,b.getSelection&&(b=b.getSelection(),s=m.textContent.length,_=Math.min(o.start,s),o=o.end===void 0?_:Math.min(o.end,s),!b.extend&&_>o&&(s=o,o=_,_=s),s=JA(m,_),a=JA(m,o),s&&a&&(b.rangeCount!==1||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&(x=x.createRange(),x.setStart(s.node,s.offset),b.removeAllRanges(),_>o?(b.addRange(x),b.extend(a.node,a.offset)):(x.setEnd(a.node,a.offset),b.addRange(x)))))),x=[],b=m;b=b.parentNode;)b.nodeType===1&&x.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<x.length;m++)b=x[m],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}nd=!!Wv,Xv=Wv=null,t.current=r,ke=n;do try{for(m=t;ke!==null;){var S=ke.flags;if(S&36&&V6(m,ke.alternate,ke),S&128){x=void 0;var E=ke.ref;if(E!==null){var w=ke.stateNode;switch(ke.tag){case 5:x=w;break;default:x=w}typeof E=="function"?E(x):E.current=x}}ke=ke.nextEffect}}catch(C){if(ke===null)throw Error(xe(330));vo(ke,C),ke=ke.nextEffect}while(ke!==null);ke=null,R6(),We=i}else t.current=r;if(Co)Co=!1,Cc=t,cc=e;else for(ke=n;ke!==null;)e=ke.nextEffect,ke.nextEffect=null,ke.flags&8&&(S=ke,S.sibling=null,S.stateNode=null),ke=e;if(n=t.pendingLanes,n===0&&(Ji=null),n===1?t===bx?Tc++:(Tc=0,bx=t):Tc=0,r=r.stateNode,cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Ob,r,void 0,(r.current.flags&64)===64)}catch{}if(di(t,fn()),Zd)throw Zd=!1,t=yx,yx=null,t;return We&8||ha(),null}function q6(){for(;ke!==null;){var t=ke.alternate;cd||Pc===null||(ke.flags&8?jA(ke,Pc)&&(cd=!0):ke.tag===13&&G6(t,ke)&&jA(ke,Pc)&&(cd=!0));var e=ke.flags;e&256&&$6(t,ke),!(e&512)||Co||(Co=!0,Xc(97,function(){return Mo(),null})),ke=ke.nextEffect}}function Mo(){if(cc!==90){var t=97<cc?97:cc;return cc=90,gs(t,Z6)}return!1}function K6(t,e){xx.push(e,t),Co||(Co=!0,Xc(97,function(){return Mo(),null}))}function uk(t,e){_x.push(e,t),Co||(Co=!0,Xc(97,function(){return Mo(),null}))}function Z6(){if(Cc===null)return!1;var t=Cc;if(Cc=null,We&48)throw Error(xe(331));var e=We;We|=32;var r=_x;_x=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(c){if(a===null)throw Error(xe(330));vo(a,c)}}for(r=xx,xx=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var s=i.create;i.destroy=s()}catch(c){if(a===null)throw Error(xe(330));vo(a,c)}}for(s=t.current.firstEffect;s!==null;)t=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=t;return We=e,ha(),!0}function $C(t,e,r){e=$b(r,e),e=JF(t,e,1),fo(t,e),e=Xn(),t=Jp(t,1),t!==null&&(Wp(t,1,e),di(t,e))}function vo(t,e){if(t.tag===3)$C(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){$C(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ji===null||!Ji.has(n))){t=$b(e,t);var i=ek(r,t,1);if(fo(r,i),i=Xn(),r=Jp(r,1),r!==null)Wp(r,1,i),di(r,i);else if(typeof n.componentDidCatch=="function"&&(Ji===null||!Ji.has(n)))try{n.componentDidCatch(e,t)}catch{}break}}r=r.return}}function Q6(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Xn(),t.pingedLanes|=t.suspendedLanes&r,En===t&&(hn&r)===r&&(tn===4||tn===3&&(hn&62914560)===hn&&500>fn()-zb?Al(t,0):Gb|=r),di(t,e)}function J6(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?(Oa===0&&(Oa=au),e=al(62914560&~Oa),e===0&&(e=4194304)):e=Nl()===99?1:2:e=1),r=Xn(),t=Jp(t,e),t!==null&&(Wp(t,e,r),di(t,r))}var ck;ck=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Ri=!0;else if(r&n)Ri=!!(t.flags&16384);else{switch(Ri=!1,e.tag){case 3:TC(e),Kv();break;case 5:yC(e);break;case 1:Nn(e.type)&&od(e);break;case 4:ox(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;rr(jd,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return r&e.child.childLanes?PC(t,e,r):(rr(tr,tr.current&1),e=Fa(t,e,r),e!==null?e.sibling:null);rr(tr,tr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&64){if(n)return kC(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rr(tr,tr.current),n)break;return null;case 23:case 24:return e.lanes=0,Zv(t,e,r)}return Fa(t,e,r)}else Ri=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=Bl(e,dn.current),Sl(e,r),i=Bb(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(n)){var a=!0;od(e)}else a=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kb(e);var o=n.getDerivedStateFromProps;typeof o=="function"&&Vd(e,n,o,t),i.updater=Zp,e.stateNode=i,i._reactInternals=e,ax(e,n,t,r),e=cx(null,e,n,!0,a,r)}else e.tag=0,In(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=t5(i),t=Ci(i,t),a){case 0:e=ux(null,e,i,t,r);break e;case 1:e=CC(null,e,i,t,r);break e;case 11:e=wC(null,e,i,t,r);break e;case 14:e=AC(null,e,i,Ci(i.type,t),n,r);break e}throw Error(xe(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ci(n,i),ux(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ci(n,i),CC(t,e,n,i,r);case 3:if(TC(e),n=e.updateQueue,t===null||n===null)throw Error(xe(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,MF(t,e),Hc(e,n,null,r),n=e.memoizedState.element,n===i)Kv(),e=Fa(t,e,r);else{if(i=e.stateNode,(a=i.hydrate)&&(ro=bl(e.stateNode.containerInfo.firstChild),Ia=e,a=ra=!0),a){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)a=t[i],a._workInProgressVersionPrimary=t[i+1],El.push(a);for(r=jF(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else In(t,e,n,r),Kv();e=e.child}return e;case 5:return yC(e),t===null&&sx(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,tx(n,i)?o=null:a!==null&&tx(n,a)&&(e.flags|=16),qF(t,e),In(t,e,o,r),e.child;case 6:return t===null&&sx(e),null;case 13:return PC(t,e,r);case 4:return ox(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Gd(e,null,n,r):In(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ci(n,i),wC(t,e,n,i,r);case 7:return In(t,e,e.pendingProps,r),e.child;case 8:return In(t,e,e.pendingProps.children,r),e.child;case 12:return In(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value;var s=e.type._context;if(rr(jd,s._currentValue),s._currentValue=a,o!==null)if(s=o.value,a=si(s,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(s,a):1073741823)|0,a===0){if(o.children===i.children&&!Bn.current){e=Fa(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){o=s.child;for(var l=c.firstContext;l!==null;){if(l.context===n&&l.observedBits&a){s.tag===1&&(l=co(-1,r&-r),l.tag=2,fo(s,l)),s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),DF(s.return,r),c.lanes|=r;break}l=l.next}}else o=s.tag===10&&s.type===e.type?null:s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}In(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,a=e.pendingProps,n=a.children,Sl(e,r),i=hi(i,a.unstable_observedBits),n=n(i),e.flags|=1,In(t,e,n,r),e.child;case 14:return i=e.type,a=Ci(i,e.pendingProps),a=Ci(i.type,a),AC(t,e,i,a,n,r);case 15:return YF(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ci(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Nn(n)?(t=!0,od(e)):t=!1,Sl(e,r),BF(e,n,i),ax(e,n,i,r),cx(null,e,n,!0,t,r);case 19:return kC(t,e,r);case 23:return Zv(t,e,r);case 24:return Zv(t,e,r)}throw Error(xe(156,e.tag))};function e5(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function li(t,e,r,n){return new e5(t,e,r,n)}function Xb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t5(t){if(typeof t=="function")return Xb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vp)return 11;if(t===Gp)return 14}return 2}function To(t,e){var r=t.alternate;return r===null?(r=li(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function fd(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")Xb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ka:return Cl(r.children,i,a,e);case UI:o=8,i|=16;break;case lb:o=8,i|=1;break;case gc:return t=li(12,r,e,i|8),t.elementType=gc,t.type=gc,t.lanes=a,t;case yc:return t=li(13,r,e,i),t.type=yc,t.elementType=yc,t.lanes=a,t;case Rd:return t=li(19,r,e,i),t.elementType=Rd,t.lanes=a,t;case pb:return Hb(r,i,a,e);case By:return t=li(24,r,e,i),t.elementType=By,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ub:o=10;break e;case cb:o=9;break e;case Vp:o=11;break e;case Gp:o=14;break e;case fb:o=16,n=null;break e;case hb:o=22;break e}throw Error(xe(130,t==null?t:typeof t,""))}return e=li(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Cl(t,e,r,n){return t=li(7,t,n,e),t.lanes=r,t}function Hb(t,e,r,n){return t=li(23,t,n,e),t.elementType=pb,t.lanes=r,t}function em(t,e,r){return t=li(6,t,null,e),t.lanes=r,t}function tm(t,e,r){return e=li(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function r5(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Nv(0),this.expirationTimes=Nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nv(0),this.mutableSourceEagerHydrationData=null}function n5(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Qd(t,e,r,n){var i=e.current,a=Xn(),o=ho(i);e:if(r){r=r._reactInternals;t:{if(Rs(r)!==r||r.tag!==1)throw Error(xe(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Nn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(xe(171))}if(r.tag===1){var c=r.type;if(Nn(c)){r=TF(r,c,s);break e}}r=s}else r=Ao;return e.context===null?e.context=r:e.pendingContext=r,e=co(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),fo(i,e),po(i,o,a),o}function rm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Yb(t,e){VC(t,e),(t=t.alternate)&&VC(t,e)}function i5(){return null}function qb(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new r5(t,e,r!=null&&r.hydrate===!0),e=li(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,kb(e),t[iu]=r.current,SF(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}qb.prototype.render=function(t){Qd(t,this._internalRoot,null,null)};qb.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Qd(null,t,null,function(){e[iu]=null})};function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a5(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new qb(t,0,e?{hydrate:!0}:void 0)}function e0(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a._internalRoot;if(typeof i=="function"){var s=i;i=function(){var l=rm(o);s.call(l)}}Qd(e,o,t,i)}else{if(a=r._reactRootContainer=a5(r,n),o=a._internalRoot,typeof i=="function"){var c=i;i=function(){var l=rm(o);c.call(l)}}ik(function(){Qd(e,o,t,i)})}return rm(o)}tF=function(t){if(t.tag===13){var e=Xn();po(t,4,e),Yb(t,4)}};xb=function(t){if(t.tag===13){var e=Xn();po(t,67108864,e),Yb(t,67108864)}};rF=function(t){if(t.tag===13){var e=Xn(),r=ho(t);po(t,r,e),Yb(t,r)}};nF=function(t,e){return e()};Hy=function(t,e,r){switch(e){case"input":if(jy(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=qp(n);if(!i)throw Error(xe(90));VI(n),jy(n,i)}}}break;case"textarea":zI(t,r);break;case"select":e=r.value,e!=null&&yl(t,!!r.multiple,e,!1)}};mb=nk;ZI=function(t,e,r,n,i){var a=We;We|=4;try{return gs(98,t.bind(null,e,r,n,i))}finally{We=a,We===0&&(su(),ha())}};gb=function(){!(We&49)&&(W6(),Mo())};QI=function(t,e){var r=We;We|=2;try{return t(e)}finally{We=r,We===0&&(su(),ha())}};function fk(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(e))throw Error(xe(200));return n5(t,e,null,r)}var o5={Events:[Nf,cl,qp,qI,KI,Mo,{current:!1}]},zu={findFiberByHostInstance:rs,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},s5={bundleType:zu.bundleType,version:zu.version,rendererPackageName:zu.rendererPackageName,rendererConfig:zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=eF(t),t===null?null:t.stateNode},findFiberByHostInstance:zu.findFiberByHostInstance||i5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Ob=yh.inject(s5),cs=yh}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o5;pi.createPortal=fk;pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(xe(188)):Error(xe(268,Object.keys(t)));return t=eF(e),t=t===null?null:t.stateNode,t};pi.flushSync=function(t,e){var r=We;if(r&48)return t(e);We|=1;try{if(t)return gs(99,t.bind(null,e))}finally{We=r,ha()}};pi.hydrate=function(t,e,r){if(!$f(e))throw Error(xe(200));return e0(null,t,e,!0,r)};pi.render=function(t,e,r){if(!$f(e))throw Error(xe(200));return e0(null,t,e,!1,r)};pi.unmountComponentAtNode=function(t){if(!$f(t))throw Error(xe(40));return t._reactRootContainer?(ik(function(){e0(null,null,t,!1,function(){t._reactRootContainer=null,t[iu]=null})}),!0):!1};pi.unstable_batchedUpdates=nk;pi.unstable_createPortal=function(t,e){return fk(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};pi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!$f(r))throw Error(xe(200));if(t==null||t._reactInternals===void 0)throw Error(xe(38));return e0(t,e,r,!1,n)};pi.version="17.0.2";function hk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hk)}catch(t){console.error(t)}}hk(),LI.exports=pi;var dk=LI.exports;const xs=vn(dk);const l5="_Title_main_1gg4a_1",u5="_Title_buttonList_1gg4a_8",c5="_Title_button_1gg4a_8",f5="_Title_button_text_1gg4a_43",h5="_Title_button_custom_1gg4a_48",d5="_Title_backup_background_1gg4a_67",zs={Title_main:l5,Title_buttonList:u5,Title_button:c5,Title_button_text:f5,Title_button_custom:h5,Title_backup_background:d5};function Oi(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Po(t){return!!t&&!!t[Gt]}function Na(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===S5}(t)||Array.isArray(t)||!!t[qC]||!!(!((e=t.constructor)===null||e===void 0)&&e[qC])||Kb(t)||Zb(t))}function _s(t,e,r){r===void 0&&(r=!1),lu(t)===0?(r?Object.keys:Pl)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function lu(t){var e=t[Gt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Kb(t)?2:Zb(t)?3:0}function Tl(t,e){return lu(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function p5(t,e){return lu(t)===2?t.get(e):t[e]}function pk(t,e,r){var n=lu(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function vk(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Kb(t){return _5&&t instanceof Map}function Zb(t){return b5&&t instanceof Set}function Ho(t){return t.o||t.t}function Qb(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=gk(t);delete e[Gt];for(var r=Pl(e),n=0;n<r.length;n++){var i=r[n],a=e[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Jb(t,e){return e===void 0&&(e=!1),eS(t)||Po(t)||!Na(t)||(lu(t)>1&&(t.set=t.add=t.clear=t.delete=v5),Object.freeze(t),e&&_s(t,function(r,n){return Jb(n,!0)},!0)),t}function v5(){Oi(2)}function eS(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function na(t){var e=Cx[t];return e||Oi(18,t),e}function m5(t,e){Cx[t]||(Cx[t]=e)}function Ex(){return Zc}function nm(t,e){e&&(na("Patches"),t.u=[],t.s=[],t.v=e)}function Jd(t){wx(t),t.p.forEach(g5),t.p=null}function wx(t){t===Zc&&(Zc=t.l)}function GC(t){return Zc={p:[],l:Zc,h:t,m:!0,_:0}}function g5(t){var e=t[Gt];e.i===0||e.i===1?e.j():e.g=!0}function im(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||na("ES5").S(e,t,n),n?(r[Gt].P&&(Jd(e),Oi(4)),Na(t)&&(t=ep(e,t),e.l||tp(e,t)),e.u&&na("Patches").M(r[Gt].t,t,e.u,e.s)):t=ep(e,r,[]),Jd(e),e.u&&e.v(e.u,e.s),t!==mk?t:void 0}function ep(t,e,r){if(eS(e))return e;var n=e[Gt];if(!n)return _s(e,function(s,c){return zC(t,n,e,s,c,r)},!0),e;if(n.A!==t)return e;if(!n.P)return tp(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Qb(n.k):n.o,a=i,o=!1;n.i===3&&(a=new Set(i),i.clear(),o=!0),_s(a,function(s,c){return zC(t,n,i,s,c,r,o)}),tp(t,i,!1),r&&t.u&&na("Patches").N(n,r,t.u,t.s)}return n.o}function zC(t,e,r,n,i,a,o){if(Po(i)){var s=ep(t,i,a&&e&&e.i!==3&&!Tl(e.R,n)?a.concat(n):void 0);if(pk(r,n,s),!Po(s))return;t.m=!1}else o&&r.add(i);if(Na(i)&&!eS(i)){if(!t.h.D&&t._<1)return;ep(t,i),e&&e.A.l||tp(t,i)}}function tp(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&Jb(e,r)}function am(t,e){var r=t[Gt];return(r?Ho(r):t)[e]}function WC(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Za(t){t.P||(t.P=!0,t.l&&Za(t.l))}function om(t){t.o||(t.o=Qb(t.t))}function Ax(t,e,r){var n=Kb(e)?na("MapSet").F(e,r):Zb(e)?na("MapSet").T(e,r):t.O?function(i,a){var o=Array.isArray(i),s={i:o?1:0,A:a?a.A:Ex(),P:!1,I:!1,R:{},l:a,t:i,k:null,o:null,j:null,C:!1},c=s,l=Qc;o&&(c=[s],l=hc);var u=Proxy.revocable(c,l),f=u.revoke,h=u.proxy;return s.k=h,s.j=f,h}(e,r):na("ES5").J(e,r);return(r?r.A:Ex()).p.push(n),n}function y5(t){return Po(t)||Oi(22,t),function e(r){if(!Na(r))return r;var n,i=r[Gt],a=lu(r);if(i){if(!i.P&&(i.i<4||!na("ES5").K(i)))return i.t;i.I=!0,n=XC(r,a),i.I=!1}else n=XC(r,a);return _s(n,function(o,s){i&&p5(i.t,o)===s||pk(n,o,e(s))}),a===3?new Set(n):n}(t)}function XC(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Qb(t)}function x5(){function t(a,o){var s=i[a];return s?s.enumerable=o:i[a]=s={configurable:!0,enumerable:o,get:function(){var c=this[Gt];return Qc.get(c,a)},set:function(c){var l=this[Gt];Qc.set(l,a,c)}},s}function e(a){for(var o=a.length-1;o>=0;o--){var s=a[o][Gt];if(!s.P)switch(s.i){case 5:n(s)&&Za(s);break;case 4:r(s)&&Za(s)}}}function r(a){for(var o=a.t,s=a.k,c=Pl(s),l=c.length-1;l>=0;l--){var u=c[l];if(u!==Gt){var f=o[u];if(f===void 0&&!Tl(o,u))return!0;var h=s[u],d=h&&h[Gt];if(d?d.t!==f:!vk(h,f))return!0}}var p=!!o[Gt];return c.length!==Pl(o).length+(p?0:1)}function n(a){var o=a.k;if(o.length!==a.t.length)return!0;var s=Object.getOwnPropertyDescriptor(o,o.length-1);if(s&&!s.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var i={};m5("ES5",{J:function(a,o){var s=Array.isArray(a),c=function(u,f){if(u){for(var h=Array(f.length),d=0;d<f.length;d++)Object.defineProperty(h,""+d,t(d,!0));return h}var p=gk(f);delete p[Gt];for(var v=Pl(p),y=0;y<v.length;y++){var g=v[y];p[g]=t(g,u||!!p[g].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(s,a),l={i:s?5:4,A:o?o.A:Ex(),P:!1,I:!1,R:{},l:o,t:a,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Gt,{value:l,writable:!0}),c},S:function(a,o,s){s?Po(o)&&o[Gt].A===a&&e(a.p):(a.u&&function c(l){if(l&&typeof l=="object"){var u=l[Gt];if(u){var f=u.t,h=u.k,d=u.R,p=u.i;if(p===4)_s(h,function(x){x!==Gt&&(f[x]!==void 0||Tl(f,x)?d[x]||c(h[x]):(d[x]=!0,Za(u)))}),_s(f,function(x){h[x]!==void 0||Tl(h,x)||(d[x]=!1,Za(u))});else if(p===5){if(n(u)&&(Za(u),d.length=!0),h.length<f.length)for(var v=h.length;v<f.length;v++)d[v]=!1;else for(var y=f.length;y<h.length;y++)d[y]=!0;for(var g=Math.min(h.length,f.length),m=0;m<g;m++)h.hasOwnProperty(m)||(d[m]=!0),d[m]===void 0&&c(h[m])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?r(a):n(a)}})}var HC,Zc,tS=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",_5=typeof Map<"u",b5=typeof Set<"u",YC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mk=tS?Symbol.for("immer-nothing"):((HC={})["immer-nothing"]=!0,HC),qC=tS?Symbol.for("immer-draftable"):"__$immer_draftable",Gt=tS?Symbol.for("immer-state"):"__$immer_state",S5=""+Object.prototype.constructor,Pl=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,gk=Object.getOwnPropertyDescriptors||function(t){var e={};return Pl(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Cx={},Qc={get:function(t,e){if(e===Gt)return t;var r=Ho(t);if(!Tl(r,e))return function(i,a,o){var s,c=WC(a,o);return c?"value"in c?c.value:(s=c.get)===null||s===void 0?void 0:s.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!Na(n)?n:n===am(t.t,e)?(om(t),t.o[e]=Ax(t.A.h,n,t)):n},has:function(t,e){return e in Ho(t)},ownKeys:function(t){return Reflect.ownKeys(Ho(t))},set:function(t,e,r){var n=WC(Ho(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=am(Ho(t),e),a=i==null?void 0:i[Gt];if(a&&a.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(vk(r,i)&&(r!==void 0||Tl(t.t,e)))return!0;om(t),Za(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return am(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,om(t),Za(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=Ho(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Oi(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Oi(12)}},hc={};_s(Qc,function(t,e){hc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),hc.deleteProperty=function(t,e){return hc.set.call(this,t,e,void 0)},hc.set=function(t,e,r){return Qc.set.call(this,t[0],e,r,t[0])};var E5=function(){function t(r){var n=this;this.O=YC,this.D=!0,this.produce=function(i,a,o){if(typeof i=="function"&&typeof a!="function"){var s=a;a=i;var c=n;return function(v){var y=this;v===void 0&&(v=s);for(var g=arguments.length,m=Array(g>1?g-1:0),x=1;x<g;x++)m[x-1]=arguments[x];return c.produce(v,function(b){var _;return(_=a).call.apply(_,[y,b].concat(m))})}}var l;if(typeof a!="function"&&Oi(6),o!==void 0&&typeof o!="function"&&Oi(7),Na(i)){var u=GC(n),f=Ax(n,i,void 0),h=!0;try{l=a(f),h=!1}finally{h?Jd(u):wx(u)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(v){return nm(u,o),im(v,u)},function(v){throw Jd(u),v}):(nm(u,o),im(l,u))}if(!i||typeof i!="object"){if((l=a(i))===void 0&&(l=i),l===mk&&(l=void 0),n.D&&Jb(l,!0),o){var d=[],p=[];na("Patches").M(i,l,d,p),o(d,p)}return l}Oi(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(l){for(var u=arguments.length,f=Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];return n.produceWithPatches(l,function(d){return i.apply(void 0,[d].concat(f))})};var o,s,c=n.produce(i,a,function(l,u){o=l,s=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(l){return[l,o,s]}):[c,o,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Na(r)||Oi(8),Po(r)&&(r=y5(r));var n=GC(this),i=Ax(this,r,void 0);return i[Gt].C=!0,wx(n),i},e.finishDraft=function(r,n){var i=r&&r[Gt],a=i.A;return nm(a,n),im(void 0,a)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!YC&&Oi(20),this.O=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}i>-1&&(n=n.slice(i+1));var o=na("Patches").$;return Po(r)?o(r,n):this.produce(r,function(s){return o(s,n)})},t}(),qn=new E5,yk=qn.produce;qn.produceWithPatches.bind(qn);qn.setAutoFreeze.bind(qn);qn.setUseProxies.bind(qn);qn.applyPatches.bind(qn);qn.createDraft.bind(qn);qn.finishDraft.bind(qn);function Gr(t){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(t)}function w5(t,e){if(Gr(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xk(t){var e=w5(t,"string");return Gr(e)=="symbol"?e:e+""}function Zn(t,e,r){return e=xk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KC(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ln(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var QC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),sm=function(){return Math.random().toString(36).substring(7).split("").join(".")},rp={INIT:"@@redux/INIT"+sm(),REPLACE:"@@redux/REPLACE"+sm(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+sm()}};function A5(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _k(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ln(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ln(1));return r(_k)(t,e)}if(typeof t!="function")throw new Error(ln(2));var i=t,a=e,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw new Error(ln(3));return a}function f(v){if(typeof v!="function")throw new Error(ln(4));if(c)throw new Error(ln(5));var y=!0;return l(),s.push(v),function(){if(y){if(c)throw new Error(ln(6));y=!1,l();var m=s.indexOf(v);s.splice(m,1),o=null}}}function h(v){if(!A5(v))throw new Error(ln(7));if(typeof v.type>"u")throw new Error(ln(8));if(c)throw new Error(ln(9));try{c=!0,a=i(a,v)}finally{c=!1}for(var y=o=s,g=0;g<y.length;g++){var m=y[g];m()}return v}function d(v){if(typeof v!="function")throw new Error(ln(10));i=v,h({type:rp.REPLACE})}function p(){var v,y=f;return v={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(ln(11));function x(){m.next&&m.next(u())}x();var b=y(x);return{unsubscribe:b}}},v[QC]=function(){return this},v}return h({type:rp.INIT}),n={dispatch:h,subscribe:f,getState:u,replaceReducer:d},n[QC]=p,n}function C5(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:rp.INIT});if(typeof n>"u")throw new Error(ln(12));if(typeof r(void 0,{type:rp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ln(13))})}function T5(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];typeof t[i]=="function"&&(r[i]=t[i])}var a=Object.keys(r),o;try{C5(r)}catch(s){o=s}return function(c,l){if(c===void 0&&(c={}),o)throw o;for(var u=!1,f={},h=0;h<a.length;h++){var d=a[h],p=r[d],v=c[d],y=p(v,l);if(typeof y>"u")throw l&&l.type,new Error(ln(14));f[d]=y,u=u||y!==v}return u=u||a.length!==Object.keys(c).length,u?f:c}}function np(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function P5(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),a=function(){throw new Error(ln(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=e.map(function(c){return c(o)});return a=np.apply(void 0,s)(i.dispatch),ZC(ZC({},i),{},{dispatch:a})}}}function bk(t){var e=function(n){var i=n.dispatch,a=n.getState;return function(o){return function(s){return typeof s=="function"?s(i,a,t):o(s)}}};return e}var Sk=bk();Sk.withExtraArgument=bk;const JC=Sk;var Ek=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O5=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ul=globalThis&&globalThis.__spreadArray||function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},R5=Object.defineProperty,I5=Object.defineProperties,F5=Object.getOwnPropertyDescriptors,e2=Object.getOwnPropertySymbols,k5=Object.prototype.hasOwnProperty,D5=Object.prototype.propertyIsEnumerable,t2=function(t,e,r){return e in t?R5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},mo=function(t,e){for(var r in e||(e={}))k5.call(e,r)&&t2(t,r,e[r]);if(e2)for(var n=0,i=e2(e);n<i.length;n++){var r=i[n];D5.call(e,r)&&t2(t,r,e[r])}return t},lm=function(t,e){return I5(t,F5(e))},M5=function(t,e,r){return new Promise(function(n,i){var a=function(c){try{s(r.next(c))}catch(l){i(l)}},o=function(c){try{s(r.throw(c))}catch(l){i(l)}},s=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(a,o)};s((r=r.apply(t,e)).next())})},L5=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?np:np.apply(null,arguments)};function B5(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function go(t,e){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var a=e.apply(void 0,n);if(!a)throw new Error("prepareAction did not return an object");return mo(mo({type:t,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var N5=function(t){Ek(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Ul([void 0],r[0].concat(this)))):new(e.bind.apply(e,Ul([void 0],r.concat(this))))},e}(Array),j5=function(t){Ek(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Ul([void 0],r[0].concat(this)))):new(e.bind.apply(e,Ul([void 0],r.concat(this))))},e}(Array);function Tx(t){return Na(t)?yk(t,function(){}):t}function U5(t){return typeof t=="boolean"}function $5(){return function(e){return wk(e)}}function wk(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var n=new N5;return r&&(U5(r)?n.push(JC):n.push(JC.withExtraArgument(r.extraArgument))),n}var V5=!0;function G5(t){var e=$5(),r=t||{},n=r.reducer,i=n===void 0?void 0:n,a=r.middleware,o=a===void 0?e():a,s=r.devTools,c=s===void 0?!0:s,l=r.preloadedState,u=l===void 0?void 0:l,f=r.enhancers,h=f===void 0?void 0:f,d;if(typeof i=="function")d=i;else if(B5(i))d=T5(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var v=P5.apply(void 0,p),y=np;c&&(y=L5(mo({trace:!V5},typeof c=="object"&&c)));var g=new j5(v),m=g;Array.isArray(h)?m=Ul([v],h):typeof h=="function"&&(m=h(g));var x=y.apply(void 0,m);return _k(d,u,x)}function Ak(t){var e={},r=[],n,i={addCase:function(a,o){var s=typeof a=="string"?a:a.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=o,i},addMatcher:function(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase:function(a){return n=a,i}};return t(i),[e,r,n]}function z5(t){return typeof t=="function"}function W5(t,e,r,n){r===void 0&&(r=[]);var i=typeof e=="function"?Ak(e):[e,r,n],a=i[0],o=i[1],s=i[2],c;if(z5(t))c=function(){return Tx(t())};else{var l=Tx(t);c=function(){return l}}function u(f,h){f===void 0&&(f=c());var d=Ul([a[h.type]],o.filter(function(p){var v=p.matcher;return v(h)}).map(function(p){var v=p.reducer;return v}));return d.filter(function(p){return!!p}).length===0&&(d=[s]),d.reduce(function(p,v){if(v)if(Po(p)){var y=p,g=v(y,h);return g===void 0?p:g}else{if(Na(p))return yk(p,function(m){return v(m,h)});var g=v(p,h);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}return p},f)}return u.getInitialState=c,u}function X5(t,e){return t+"/"+e}function t0(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof t.initialState=="function"?t.initialState:Tx(t.initialState),n=t.reducers||{},i=Object.keys(n),a={},o={},s={};i.forEach(function(u){var f=n[u],h=X5(e,u),d,p;"reducer"in f?(d=f.reducer,p=f.prepare):d=f,a[u]=d,o[h]=d,s[u]=p?go(h,p):go(h)});function c(){var u=typeof t.extraReducers=="function"?Ak(t.extraReducers):[t.extraReducers],f=u[0],h=f===void 0?{}:f,d=u[1],p=d===void 0?[]:d,v=u[2],y=v===void 0?void 0:v,g=mo(mo({},h),o);return W5(r,function(m){for(var x in g)m.addCase(x,g[x]);for(var b=0,_=p;b<_.length;b++){var S=_[b];m.addMatcher(S.matcher,S.reducer)}y&&m.addDefaultCase(y)})}var l;return{name:e,reducer:function(u,f){return l||(l=c()),l(u,f)},actions:s,caseReducers:a,getInitialState:function(){return l||(l=c()),l.getInitialState()}}}var H5="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Y5=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=H5[Math.random()*64|0];return e},q5=["name","message","stack","code"],um=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),r2=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),K5=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=q5;r<n.length;r++){var i=n[r];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,r,n){var i=go(e+"/fulfilled",function(l,u,f,h){return{payload:l,meta:lm(mo({},h||{}),{arg:f,requestId:u,requestStatus:"fulfilled"})}}),a=go(e+"/pending",function(l,u,f){return{payload:void 0,meta:lm(mo({},f||{}),{arg:u,requestId:l,requestStatus:"pending"})}}),o=go(e+"/rejected",function(l,u,f,h,d){return{payload:h,error:(n&&n.serializeError||K5)(l||"Rejected"),meta:lm(mo({},d||{}),{arg:f,requestId:u,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function c(l){return function(u,f,h){var d=n!=null&&n.idGenerator?n.idGenerator(l):Y5(),p=new s,v;function y(m){v=m,p.abort()}var g=function(){return M5(this,null,function(){var m,x,b,_,S,E,w;return O5(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),_=(m=n==null?void 0:n.condition)==null?void 0:m.call(n,l,{getState:f,extra:h}),Q5(_)?[4,_]:[3,2];case 1:_=C.sent(),C.label=2;case 2:if(_===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(A,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:v||"Aborted"})})}),u(a(d,l,(x=n==null?void 0:n.getPendingMeta)==null?void 0:x.call(n,{requestId:d,arg:l},{getState:f,extra:h}))),[4,Promise.race([S,Promise.resolve(r(l,{dispatch:u,getState:f,extra:h,requestId:d,signal:p.signal,abort:y,rejectWithValue:function(A,P){return new um(A,P)},fulfillWithValue:function(A,P){return new r2(A,P)}})).then(function(A){if(A instanceof um)throw A;return A instanceof r2?i(A.payload,d,l,A.meta):i(A,d,l)})])];case 3:return b=C.sent(),[3,5];case 4:return E=C.sent(),b=E instanceof um?o(null,d,l,E.payload,E.meta):o(E,d,l),[3,5];case 5:return w=n&&!n.dispatchConditionRejection&&o.match(b)&&b.meta.condition,w||u(b),[2,b]}})})}();return Object.assign(g,{abort:y,requestId:d,arg:l,unwrap:function(){return g.then(Z5)}})}}return Object.assign(c,{pending:a,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function Z5(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Q5(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var rS="listenerMiddleware";go(rS+"/add");go(rS+"/removeAll");go(rS+"/remove");var n2;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);x5();function J5(){this.__data__=[],this.size=0}var ej=J5;function tj(t,e){return t===e||t!==t&&e!==e}var nS=tj,rj=nS;function nj(t,e){for(var r=t.length;r--;)if(rj(t[r][0],e))return r;return-1}var r0=nj,ij=r0,aj=Array.prototype,oj=aj.splice;function sj(t){var e=this.__data__,r=ij(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():oj.call(e,r,1),--this.size,!0}var lj=sj,uj=r0;function cj(t){var e=this.__data__,r=uj(e,t);return r<0?void 0:e[r][1]}var fj=cj,hj=r0;function dj(t){return hj(this.__data__,t)>-1}var pj=dj,vj=r0;function mj(t,e){var r=this.__data__,n=vj(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var gj=mj,yj=ej,xj=lj,_j=fj,bj=pj,Sj=gj;function uu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}uu.prototype.clear=yj;uu.prototype.delete=xj;uu.prototype.get=_j;uu.prototype.has=bj;uu.prototype.set=Sj;var n0=uu,Ej=n0;function wj(){this.__data__=new Ej,this.size=0}var Aj=wj;function Cj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Tj=Cj;function Pj(t){return this.__data__.get(t)}var Oj=Pj;function Rj(t){return this.__data__.has(t)}var Ij=Rj,Fj=typeof je=="object"&&je&&je.Object===Object&&je,Ck=Fj,kj=Ck,Dj=typeof self=="object"&&self&&self.Object===Object&&self,Mj=kj||Dj||Function("return this")(),Di=Mj,Lj=Di,Bj=Lj.Symbol,Vf=Bj,i2=Vf,Tk=Object.prototype,Nj=Tk.hasOwnProperty,jj=Tk.toString,Wu=i2?i2.toStringTag:void 0;function Uj(t){var e=Nj.call(t,Wu),r=t[Wu];try{t[Wu]=void 0;var n=!0}catch{}var i=jj.call(t);return n&&(e?t[Wu]=r:delete t[Wu]),i}var $j=Uj,Vj=Object.prototype,Gj=Vj.toString;function zj(t){return Gj.call(t)}var Wj=zj,a2=Vf,Xj=$j,Hj=Wj,Yj="[object Null]",qj="[object Undefined]",o2=a2?a2.toStringTag:void 0;function Kj(t){return t==null?t===void 0?qj:Yj:o2&&o2 in Object(t)?Xj(t):Hj(t)}var Gf=Kj;function Zj(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var da=Zj,Qj=Gf,Jj=da,eU="[object AsyncFunction]",tU="[object Function]",rU="[object GeneratorFunction]",nU="[object Proxy]";function iU(t){if(!Jj(t))return!1;var e=Qj(t);return e==tU||e==rU||e==eU||e==nU}var Pk=iU,aU=Di,oU=aU["__core-js_shared__"],sU=oU,cm=sU,s2=function(){var t=/[^.]+$/.exec(cm&&cm.keys&&cm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function lU(t){return!!s2&&s2 in t}var uU=lU,cU=Function.prototype,fU=cU.toString;function hU(t){if(t!=null){try{return fU.call(t)}catch{}try{return t+""}catch{}}return""}var Ok=hU,dU=Pk,pU=uU,vU=da,mU=Ok,gU=/[\\^$.*+?()[\]{}|]/g,yU=/^\[object .+?Constructor\]$/,xU=Function.prototype,_U=Object.prototype,bU=xU.toString,SU=_U.hasOwnProperty,EU=RegExp("^"+bU.call(SU).replace(gU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wU(t){if(!vU(t)||pU(t))return!1;var e=dU(t)?EU:yU;return e.test(mU(t))}var AU=wU;function CU(t,e){return t==null?void 0:t[e]}var TU=CU,PU=AU,OU=TU;function RU(t,e){var r=OU(t,e);return PU(r)?r:void 0}var Fs=RU,IU=Fs,FU=Di,kU=IU(FU,"Map"),iS=kU,DU=Fs,MU=DU(Object,"create"),i0=MU,l2=i0;function LU(){this.__data__=l2?l2(null):{},this.size=0}var BU=LU;function NU(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var jU=NU,UU=i0,$U="__lodash_hash_undefined__",VU=Object.prototype,GU=VU.hasOwnProperty;function zU(t){var e=this.__data__;if(UU){var r=e[t];return r===$U?void 0:r}return GU.call(e,t)?e[t]:void 0}var WU=zU,XU=i0,HU=Object.prototype,YU=HU.hasOwnProperty;function qU(t){var e=this.__data__;return XU?e[t]!==void 0:YU.call(e,t)}var KU=qU,ZU=i0,QU="__lodash_hash_undefined__";function JU(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ZU&&e===void 0?QU:e,this}var e9=JU,t9=BU,r9=jU,n9=WU,i9=KU,a9=e9;function cu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cu.prototype.clear=t9;cu.prototype.delete=r9;cu.prototype.get=n9;cu.prototype.has=i9;cu.prototype.set=a9;var o9=cu,u2=o9,s9=n0,l9=iS;function u9(){this.size=0,this.__data__={hash:new u2,map:new(l9||s9),string:new u2}}var c9=u9;function f9(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var h9=f9,d9=h9;function p9(t,e){var r=t.__data__;return d9(e)?r[typeof e=="string"?"string":"hash"]:r.map}var a0=p9,v9=a0;function m9(t){var e=v9(this,t).delete(t);return this.size-=e?1:0,e}var g9=m9,y9=a0;function x9(t){return y9(this,t).get(t)}var _9=x9,b9=a0;function S9(t){return b9(this,t).has(t)}var E9=S9,w9=a0;function A9(t,e){var r=w9(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var C9=A9,T9=c9,P9=g9,O9=_9,R9=E9,I9=C9;function fu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}fu.prototype.clear=T9;fu.prototype.delete=P9;fu.prototype.get=O9;fu.prototype.has=R9;fu.prototype.set=I9;var aS=fu,F9=n0,k9=iS,D9=aS,M9=200;function L9(t,e){var r=this.__data__;if(r instanceof F9){var n=r.__data__;if(!k9||n.length<M9-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new D9(n)}return r.set(t,e),this.size=r.size,this}var B9=L9,N9=n0,j9=Aj,U9=Tj,$9=Oj,V9=Ij,G9=B9;function hu(t){var e=this.__data__=new N9(t);this.size=e.size}hu.prototype.clear=j9;hu.prototype.delete=U9;hu.prototype.get=$9;hu.prototype.has=V9;hu.prototype.set=G9;var oS=hu;function z9(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var W9=z9,X9=Fs,H9=function(){try{var t=X9(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Y9=H9,c2=Y9;function q9(t,e,r){e=="__proto__"&&c2?c2(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Rk=q9,K9=Rk,Z9=nS,Q9=Object.prototype,J9=Q9.hasOwnProperty;function e$(t,e,r){var n=t[e];(!(J9.call(t,e)&&Z9(n,r))||r===void 0&&!(e in t))&&K9(t,e,r)}var sS=e$,t$=sS,r$=Rk;function n$(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],c=n?n(r[s],t[s],s,r,t):void 0;c===void 0&&(c=t[s]),i?r$(r,s,c):t$(r,s,c)}return r}var o0=n$;function i$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var a$=i$;function o$(t){return t!=null&&typeof t=="object"}var ks=o$,s$=Gf,l$=ks,u$="[object Arguments]";function c$(t){return l$(t)&&s$(t)==u$}var f$=c$,f2=f$,h$=ks,Ik=Object.prototype,d$=Ik.hasOwnProperty,p$=Ik.propertyIsEnumerable,v$=f2(function(){return arguments}())?f2:function(t){return h$(t)&&d$.call(t,"callee")&&!p$.call(t,"callee")},Fk=v$,m$=Array.isArray,Ua=m$,ip={exports:{}};function g$(){return!1}var y$=g$;ip.exports;(function(t,e){var r=Di,n=y$,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||n;t.exports=l})(ip,ip.exports);var lS=ip.exports,x$=9007199254740991,_$=/^(?:0|[1-9]\d*)$/;function b$(t,e){var r=typeof t;return e=e??x$,!!e&&(r=="number"||r!="symbol"&&_$.test(t))&&t>-1&&t%1==0&&t<e}var uS=b$,S$=9007199254740991;function E$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=S$}var cS=E$,w$=Gf,A$=cS,C$=ks,T$="[object Arguments]",P$="[object Array]",O$="[object Boolean]",R$="[object Date]",I$="[object Error]",F$="[object Function]",k$="[object Map]",D$="[object Number]",M$="[object Object]",L$="[object RegExp]",B$="[object Set]",N$="[object String]",j$="[object WeakMap]",U$="[object ArrayBuffer]",$$="[object DataView]",V$="[object Float32Array]",G$="[object Float64Array]",z$="[object Int8Array]",W$="[object Int16Array]",X$="[object Int32Array]",H$="[object Uint8Array]",Y$="[object Uint8ClampedArray]",q$="[object Uint16Array]",K$="[object Uint32Array]",Nt={};Nt[V$]=Nt[G$]=Nt[z$]=Nt[W$]=Nt[X$]=Nt[H$]=Nt[Y$]=Nt[q$]=Nt[K$]=!0;Nt[T$]=Nt[P$]=Nt[U$]=Nt[O$]=Nt[$$]=Nt[R$]=Nt[I$]=Nt[F$]=Nt[k$]=Nt[D$]=Nt[M$]=Nt[L$]=Nt[B$]=Nt[N$]=Nt[j$]=!1;function Z$(t){return C$(t)&&A$(t.length)&&!!Nt[w$(t)]}var Q$=Z$;function J$(t){return function(e){return t(e)}}var fS=J$,ap={exports:{}};ap.exports;(function(t,e){var r=Ck,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(ap,ap.exports);var hS=ap.exports,eV=Q$,tV=fS,h2=hS,d2=h2&&h2.isTypedArray,rV=d2?tV(d2):eV,kk=rV,nV=a$,iV=Fk,aV=Ua,oV=lS,sV=uS,lV=kk,uV=Object.prototype,cV=uV.hasOwnProperty;function fV(t,e){var r=aV(t),n=!r&&iV(t),i=!r&&!n&&oV(t),a=!r&&!n&&!i&&lV(t),o=r||n||i||a,s=o?nV(t.length,String):[],c=s.length;for(var l in t)(e||cV.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||sV(l,c)))&&s.push(l);return s}var Dk=fV,hV=Object.prototype;function dV(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||hV;return t===r}var dS=dV;function pV(t,e){return function(r){return t(e(r))}}var Mk=pV,vV=Mk,mV=vV(Object.keys,Object),gV=mV,yV=dS,xV=gV,_V=Object.prototype,bV=_V.hasOwnProperty;function SV(t){if(!yV(t))return xV(t);var e=[];for(var r in Object(t))bV.call(t,r)&&r!="constructor"&&e.push(r);return e}var EV=SV,wV=Pk,AV=cS;function CV(t){return t!=null&&AV(t.length)&&!wV(t)}var Lk=CV,TV=Dk,PV=EV,OV=Lk;function RV(t){return OV(t)?TV(t):PV(t)}var s0=RV,IV=o0,FV=s0;function kV(t,e){return t&&IV(e,FV(e),t)}var DV=kV;function MV(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var LV=MV,BV=da,NV=dS,jV=LV,UV=Object.prototype,$V=UV.hasOwnProperty;function VV(t){if(!BV(t))return jV(t);var e=NV(t),r=[];for(var n in t)n=="constructor"&&(e||!$V.call(t,n))||r.push(n);return r}var GV=VV,zV=Dk,WV=GV,XV=Lk;function HV(t){return XV(t)?zV(t,!0):WV(t)}var pS=HV,YV=o0,qV=pS;function KV(t,e){return t&&YV(e,qV(e),t)}var ZV=KV,op={exports:{}};op.exports;(function(t,e){var r=Di,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var f=l.length,h=s?s(f):new l.constructor(f);return l.copy(h),h}t.exports=c})(op,op.exports);var QV=op.exports;function JV(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var e7=JV;function t7(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var r7=t7;function n7(){return[]}var Bk=n7,i7=r7,a7=Bk,o7=Object.prototype,s7=o7.propertyIsEnumerable,p2=Object.getOwnPropertySymbols,l7=p2?function(t){return t==null?[]:(t=Object(t),i7(p2(t),function(e){return s7.call(t,e)}))}:a7,vS=l7,u7=o0,c7=vS;function f7(t,e){return u7(t,c7(t),e)}var h7=f7;function d7(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Nk=d7,p7=Mk,v7=p7(Object.getPrototypeOf,Object),jk=v7,m7=Nk,g7=jk,y7=vS,x7=Bk,_7=Object.getOwnPropertySymbols,b7=_7?function(t){for(var e=[];t;)m7(e,y7(t)),t=g7(t);return e}:x7,Uk=b7,S7=o0,E7=Uk;function w7(t,e){return S7(t,E7(t),e)}var A7=w7,C7=Nk,T7=Ua;function P7(t,e,r){var n=e(t);return T7(t)?n:C7(n,r(t))}var $k=P7,O7=$k,R7=vS,I7=s0;function F7(t){return O7(t,I7,R7)}var Vk=F7,k7=$k,D7=Uk,M7=pS;function L7(t){return k7(t,M7,D7)}var Gk=L7,B7=Fs,N7=Di,j7=B7(N7,"DataView"),U7=j7,$7=Fs,V7=Di,G7=$7(V7,"Promise"),z7=G7,W7=Fs,X7=Di,H7=W7(X7,"Set"),zk=H7,Y7=Fs,q7=Di,K7=Y7(q7,"WeakMap"),Z7=K7,Px=U7,Ox=iS,Rx=z7,Ix=zk,Fx=Z7,Wk=Gf,du=Ok,v2="[object Map]",Q7="[object Object]",m2="[object Promise]",g2="[object Set]",y2="[object WeakMap]",x2="[object DataView]",J7=du(Px),eG=du(Ox),tG=du(Rx),rG=du(Ix),nG=du(Fx),Yo=Wk;(Px&&Yo(new Px(new ArrayBuffer(1)))!=x2||Ox&&Yo(new Ox)!=v2||Rx&&Yo(Rx.resolve())!=m2||Ix&&Yo(new Ix)!=g2||Fx&&Yo(new Fx)!=y2)&&(Yo=function(t){var e=Wk(t),r=e==Q7?t.constructor:void 0,n=r?du(r):"";if(n)switch(n){case J7:return x2;case eG:return v2;case tG:return m2;case rG:return g2;case nG:return y2}return e});var l0=Yo,iG=Object.prototype,aG=iG.hasOwnProperty;function oG(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&aG.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var sG=oG,lG=Di,uG=lG.Uint8Array,Xk=uG,_2=Xk;function cG(t){var e=new t.constructor(t.byteLength);return new _2(e).set(new _2(t)),e}var mS=cG,fG=mS;function hG(t,e){var r=e?fG(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var dG=hG,pG=/\w*$/;function vG(t){var e=new t.constructor(t.source,pG.exec(t));return e.lastIndex=t.lastIndex,e}var mG=vG,b2=Vf,S2=b2?b2.prototype:void 0,E2=S2?S2.valueOf:void 0;function gG(t){return E2?Object(E2.call(t)):{}}var yG=gG,xG=mS;function _G(t,e){var r=e?xG(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var bG=_G,SG=mS,EG=dG,wG=mG,AG=yG,CG=bG,TG="[object Boolean]",PG="[object Date]",OG="[object Map]",RG="[object Number]",IG="[object RegExp]",FG="[object Set]",kG="[object String]",DG="[object Symbol]",MG="[object ArrayBuffer]",LG="[object DataView]",BG="[object Float32Array]",NG="[object Float64Array]",jG="[object Int8Array]",UG="[object Int16Array]",$G="[object Int32Array]",VG="[object Uint8Array]",GG="[object Uint8ClampedArray]",zG="[object Uint16Array]",WG="[object Uint32Array]";function XG(t,e,r){var n=t.constructor;switch(e){case MG:return SG(t);case TG:case PG:return new n(+t);case LG:return EG(t,r);case BG:case NG:case jG:case UG:case $G:case VG:case GG:case zG:case WG:return CG(t,r);case OG:return new n;case RG:case kG:return new n(t);case IG:return wG(t);case FG:return new n;case DG:return AG(t)}}var HG=XG,YG=da,w2=Object.create,qG=function(){function t(){}return function(e){if(!YG(e))return{};if(w2)return w2(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),KG=qG,ZG=KG,QG=jk,JG=dS;function ez(t){return typeof t.constructor=="function"&&!JG(t)?ZG(QG(t)):{}}var tz=ez,rz=l0,nz=ks,iz="[object Map]";function az(t){return nz(t)&&rz(t)==iz}var oz=az,sz=oz,lz=fS,A2=hS,C2=A2&&A2.isMap,uz=C2?lz(C2):sz,cz=uz,fz=l0,hz=ks,dz="[object Set]";function pz(t){return hz(t)&&fz(t)==dz}var vz=pz,mz=vz,gz=fS,T2=hS,P2=T2&&T2.isSet,yz=P2?gz(P2):mz,xz=yz,_z=oS,bz=W9,Sz=sS,Ez=DV,wz=ZV,Az=QV,Cz=e7,Tz=h7,Pz=A7,Oz=Vk,Rz=Gk,Iz=l0,Fz=sG,kz=HG,Dz=tz,Mz=Ua,Lz=lS,Bz=cz,Nz=da,jz=xz,Uz=s0,$z=pS,Vz=1,Gz=2,zz=4,Hk="[object Arguments]",Wz="[object Array]",Xz="[object Boolean]",Hz="[object Date]",Yz="[object Error]",Yk="[object Function]",qz="[object GeneratorFunction]",Kz="[object Map]",Zz="[object Number]",qk="[object Object]",Qz="[object RegExp]",Jz="[object Set]",eW="[object String]",tW="[object Symbol]",rW="[object WeakMap]",nW="[object ArrayBuffer]",iW="[object DataView]",aW="[object Float32Array]",oW="[object Float64Array]",sW="[object Int8Array]",lW="[object Int16Array]",uW="[object Int32Array]",cW="[object Uint8Array]",fW="[object Uint8ClampedArray]",hW="[object Uint16Array]",dW="[object Uint32Array]",Ft={};Ft[Hk]=Ft[Wz]=Ft[nW]=Ft[iW]=Ft[Xz]=Ft[Hz]=Ft[aW]=Ft[oW]=Ft[sW]=Ft[lW]=Ft[uW]=Ft[Kz]=Ft[Zz]=Ft[qk]=Ft[Qz]=Ft[Jz]=Ft[eW]=Ft[tW]=Ft[cW]=Ft[fW]=Ft[hW]=Ft[dW]=!0;Ft[Yz]=Ft[Yk]=Ft[rW]=!1;function hd(t,e,r,n,i,a){var o,s=e&Vz,c=e&Gz,l=e&zz;if(r&&(o=i?r(t,n,i,a):r(t)),o!==void 0)return o;if(!Nz(t))return t;var u=Mz(t);if(u){if(o=Fz(t),!s)return Cz(t,o)}else{var f=Iz(t),h=f==Yk||f==qz;if(Lz(t))return Az(t,s);if(f==qk||f==Hk||h&&!i){if(o=c||h?{}:Dz(t),!s)return c?Pz(t,wz(o,t)):Tz(t,Ez(o,t))}else{if(!Ft[f])return i?t:{};o=kz(t,f,s)}}a||(a=new _z);var d=a.get(t);if(d)return d;a.set(t,o),jz(t)?t.forEach(function(y){o.add(hd(y,e,r,y,t,a))}):Bz(t)&&t.forEach(function(y,g){o.set(g,hd(y,e,r,g,t,a))});var p=l?c?Rz:Oz:c?$z:Uz,v=u?void 0:p(t);return bz(v||t,function(y,g){v&&(g=y,y=t[g]),Sz(o,g,hd(y,e,r,g,t,a))}),o}var pW=hd,vW=pW,mW=1,gW=4;function yW(t){return vW(t,mW|gW)}var xW=yW;const Zt=vn(xW);var Je=(t=>(t[t.say=0]="say",t[t.changeBg=1]="changeBg",t[t.changeFigure=2]="changeFigure",t[t.bgm=3]="bgm",t[t.video=4]="video",t[t.pixi=5]="pixi",t[t.pixiInit=6]="pixiInit",t[t.intro=7]="intro",t[t.miniAvatar=8]="miniAvatar",t[t.changeScene=9]="changeScene",t[t.choose=10]="choose",t[t.end=11]="end",t[t.setComplexAnimation=12]="setComplexAnimation",t[t.setFilter=13]="setFilter",t[t.label=14]="label",t[t.jumpLabel=15]="jumpLabel",t[t.chooseLabel=16]="chooseLabel",t[t.setVar=17]="setVar",t[t.if=18]="if",t[t.callScene=19]="callScene",t[t.showVars=20]="showVars",t[t.unlockCg=21]="unlockCg",t[t.unlockBgm=22]="unlockBgm",t[t.filmMode=23]="filmMode",t[t.setTextbox=24]="setTextbox",t[t.setAnimation=25]="setAnimation",t[t.playEffect=26]="playEffect",t[t.setTempAnimation=27]="setTempAnimation",t[t.comment=28]="comment",t[t.setTransform=29]="setTransform",t[t.setTransition=30]="setTransition",t[t.getUserInput=31]="getUserInput",t[t.applyStyle=32]="applyStyle",t[t.unlockAchieve=33]="unlockAchieve",t[t.unlockStoryline=34]="unlockStoryline",t[t.showValue=35]="showValue",t))(Je||{});const Kk={oldBgName:"",bgName:"",figName:"",figNameLeft:"",figNameRight:"",freeFigure:[],figureAssociatedAnimation:[],showText:"",showTextSize:-1,showName:"",command:"",choose:[],vocal:"",playVocal:"",vocalVolume:100,bgm:{src:"",enter:0,volume:100},uiSe:"",miniAvatar:"",GameVar:{},effects:[],bgFilter:"",bgTransform:"",PerformList:[],currentDialogKey:"initial",live2dMotion:[],live2dExpression:[],currentConcatDialogPrev:"",enableFilm:"",isDisableTextbox:!1,replacedUIlable:{},storyLineBg:"",storyLineBgX:1280,storyLineBgY:720,achieveBg:"",unlockAchieve:{unlockname:"",saveTime:"",url:"",x:0,y:0},achieveBgX:1280,achieveBgY:720,unlockAchieves:[],totalAchievements:0,unlockedAchievements:0,isShowValueSWitch:!1,showValueName:"",showValueAxisX:0,showValueAxisY:0,showValues:[],showValueList:[]},gS=t0({name:"stage",initialState:Zt(Kk),reducers:{resetStageState:(t,e)=>{Object.assign(t,e.payload)},setStage:(t,e)=>{t[e.payload.key]=e.payload.value},setStageVar:(t,e)=>{t.GameVar[e.payload.key]=e.payload.value},updateEffect:(t,e)=>{const{target:r,transform:n}=e.payload,i=t.effects.findIndex(a=>a.target===r);i>=0?t.effects[i].transform=n:t.effects.push({target:r,transform:n})},removeEffectByTargetId:(t,e)=>{const r=t.effects.findIndex(n=>n.target===e.payload);r>=0&&t.effects.splice(r,1)},addPerform:(t,e)=>{t.PerformList.push(e.payload)},removePerformByName:(t,e)=>{for(let r=0;r<t.PerformList.length;r++)t.PerformList[r].id===e.payload&&(t.PerformList.splice(r,1),r--)},removeAllPixiPerforms:(t,e)=>{for(let r=0;r<t.PerformList.length;r++)t.PerformList[r].script.command===Je.pixi&&(t.PerformList.splice(r,1),r--)},setFreeFigureByKey:(t,e)=>{const r=t.freeFigure,n=e.payload,i=r.findIndex(a=>a.key===n.key);i>=0?(r[i].basePosition=n.basePosition,r[i].name=n.name):n.name!==""&&r.push(n)},setLive2dMotion:(t,e)=>{const{target:r,motion:n}=e.payload,i=t.live2dMotion.findIndex(a=>a.target===r);i<0?t.live2dMotion.push({target:r,motion:n}):t.live2dMotion[i].motion=n},setLive2dExpression:(t,e)=>{const{target:r,expression:n}=e.payload,i=t.live2dExpression.findIndex(a=>a.target===r);i<0?t.live2dExpression.push({target:r,expression:n}):t.live2dExpression[i].expression=n},replaceUIlable:(t,e)=>{t.replacedUIlable[e.payload[0]]=e.payload[1]},setStoryLineBg:(t,e)=>{t.storyLineBg=e.payload},setAchieveBg:(t,e)=>{t.achieveBg=e.payload},setUnlockAchieve:(t,e)=>{t.unlockAchieves.push(e.payload)},addShowValues:(t,e)=>{t.showValues.push(e.payload)},addShowValueList:(t,e)=>{t.showValueList.push(e.payload)},updateShowValueList:(t,e)=>{t.showValueList=e.payload}}}),{resetStageState:u0,setStage:$e,setStageVar:Zk,setAchieveBg:_W,setUnlockAchieve:bCe,setStoryLineBg:SCe,addShowValues:Ws,addShowValueList:bW,updateShowValueList:SW}=gS.actions,Dn=gS.actions,EW=gS.reducer;function dc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qk={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,a){function o(l,u){if(!i[l]){if(!n[l]){var f=typeof dc=="function"&&dc;if(!u&&f)return f(l,!0);if(s)return s(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(p){var v=n[l][1][p];return o(v||p)},d,d.exports,r,n,i,a)}return i[l].exports}for(var s=typeof dc=="function"&&dc,c=0;c<a.length;c++)o(a[c]);return o}({1:[function(r,n,i){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,s;if(o){var c=0,l=new o(p),u=a.document.createTextNode("");l.observe(u,{characterData:!0}),s=function(){u.data=c=++c%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var f=new a.MessageChannel;f.port1.onmessage=p,s=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?s=function(){var y=a.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},a.document.documentElement.appendChild(y)}:s=function(){setTimeout(p,0)};var h,d=[];function p(){h=!0;for(var y,g,m=d.length;m;){for(g=d,d=[],y=-1;++y<m;)g[y]();m=d.length}h=!1}n.exports=v;function v(y){d.push(y)===1&&!h&&s()}}).call(this,typeof je<"u"?je:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var a=r(1);function o(){}var s={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];n.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,_!==o&&v(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,S){if(typeof _!="function"&&this.state===l||typeof S!="function"&&this.state===c)return this;var E=new this.constructor(o);if(this.state!==u){var w=this.state===l?_:S;d(E,w,this.outcome)}else this.queue.push(new h(E,_,S));return E};function h(_,S,E){this.promise=_,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(_){s.resolve(this.promise,_)},h.prototype.otherCallFulfilled=function(_){d(this.promise,this.onFulfilled,_)},h.prototype.callRejected=function(_){s.reject(this.promise,_)},h.prototype.otherCallRejected=function(_){d(this.promise,this.onRejected,_)};function d(_,S,E){a(function(){var w;try{w=S(E)}catch(C){return s.reject(_,C)}w===_?s.reject(_,new TypeError("Cannot resolve promise with itself")):s.resolve(_,w)})}s.resolve=function(_,S){var E=y(p,S);if(E.status==="error")return s.reject(_,E.value);var w=E.value;if(w)v(_,w);else{_.state=l,_.outcome=S;for(var C=-1,A=_.queue.length;++C<A;)_.queue[C].callFulfilled(S)}return _},s.reject=function(_,S){_.state=c,_.outcome=S;for(var E=-1,w=_.queue.length;++E<w;)_.queue[E].callRejected(S);return _};function p(_){var S=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof S=="function")return function(){S.apply(_,arguments)}}function v(_,S){var E=!1;function w(T){E||(E=!0,s.reject(_,T))}function C(T){E||(E=!0,s.resolve(_,T))}function A(){S(C,w)}var P=y(A);P.status==="error"&&w(P.value)}function y(_,S){var E={};try{E.value=_(S),E.status="success"}catch(w){E.status="error",E.value=w}return E}f.resolve=g;function g(_){return _ instanceof this?_:s.resolve(new this(o),_)}f.reject=m;function m(_){var S=new this(o);return s.reject(S,_)}f.all=x;function x(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=_.length,w=!1;if(!E)return this.resolve([]);for(var C=new Array(E),A=0,P=-1,T=new this(o);++P<E;)O(_[P],P);return T;function O(R,F){S.resolve(R).then(D,function(V){w||(w=!0,s.reject(T,V))});function D(V){C[F]=V,++A===E&&!w&&(w=!0,s.resolve(T,C))}}}f.race=b;function b(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=_.length,w=!1;if(!E)return this.resolve([]);for(var C=-1,A=new this(o);++C<E;)P(_[C]);return A;function P(T){S.resolve(T).then(function(O){w||(w=!0,s.resolve(A,O))},function(O){w||(w=!0,s.reject(A,O))})}}},{1:1}],3:[function(r,n,i){(function(a){typeof a.Promise!="function"&&(a.Promise=r(2))}).call(this,typeof je<"u"?je:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U};function o(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=s();function l(){try{if(!c||!c.open)return!1;var U=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),H=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!U||H)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function u(U,H){U=U||[],H=H||{};try{return new Blob(U,H)}catch(q){if(q.name!=="TypeError")throw q;for(var z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Z=new z,ee=0;ee<U.length;ee+=1)Z.append(U[ee]);return Z.getBlob(H.type)}}typeof Promise>"u"&&r(3);var f=Promise;function h(U,H){H&&U.then(function(z){H(null,z)},function(z){H(z)})}function d(U,H,z){typeof H=="function"&&U.then(H),typeof z=="function"&&U.catch(z)}function p(U){return typeof U!="string"&&(console.warn(U+" used as a key, but it is not a string."),U=String(U)),U}function v(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",g=void 0,m={},x=Object.prototype.toString,b="readonly",_="readwrite";function S(U){for(var H=U.length,z=new ArrayBuffer(H),Z=new Uint8Array(z),ee=0;ee<H;ee++)Z[ee]=U.charCodeAt(ee);return z}function E(U){return new f(function(H){var z=U.transaction(y,_),Z=u([""]);z.objectStore(y).put(Z,"key"),z.onabort=function(ee){ee.preventDefault(),ee.stopPropagation(),H(!1)},z.oncomplete=function(){var ee=navigator.userAgent.match(/Chrome\/(\d+)/),q=navigator.userAgent.match(/Edge\//);H(q||!ee||parseInt(ee[1],10)>=43)}}).catch(function(){return!1})}function w(U){return typeof g=="boolean"?f.resolve(g):E(U).then(function(H){return g=H,g})}function C(U){var H=m[U.name],z={};z.promise=new f(function(Z,ee){z.resolve=Z,z.reject=ee}),H.deferredOperations.push(z),H.dbReady?H.dbReady=H.dbReady.then(function(){return z.promise}):H.dbReady=z.promise}function A(U){var H=m[U.name],z=H.deferredOperations.pop();if(z)return z.resolve(),z.promise}function P(U,H){var z=m[U.name],Z=z.deferredOperations.pop();if(Z)return Z.reject(H),Z.promise}function T(U,H){return new f(function(z,Z){if(m[U.name]=m[U.name]||B(),U.db)if(H)C(U),U.db.close();else return z(U.db);var ee=[U.name];H&&ee.push(U.version);var q=c.open.apply(c,ee);H&&(q.onupgradeneeded=function(le){var pe=q.result;try{pe.createObjectStore(U.storeName),le.oldVersion<=1&&pe.createObjectStore(y)}catch(ge){if(ge.name==="ConstraintError")console.warn('The database "'+U.name+'" has been upgraded from version '+le.oldVersion+" to version "+le.newVersion+', but the storage "'+U.storeName+'" already exists.');else throw ge}}),q.onerror=function(le){le.preventDefault(),Z(q.error)},q.onsuccess=function(){var le=q.result;le.onversionchange=function(pe){pe.target.close()},z(le),A(U)}})}function O(U){return T(U,!1)}function R(U){return T(U,!0)}function F(U,H){if(!U.db)return!0;var z=!U.db.objectStoreNames.contains(U.storeName),Z=U.version<U.db.version,ee=U.version>U.db.version;if(Z&&(U.version!==H&&console.warn('The database "'+U.name+`" can't be downgraded from version `+U.db.version+" to version "+U.version+"."),U.version=U.db.version),ee||z){if(z){var q=U.db.version+1;q>U.version&&(U.version=q)}return!0}return!1}function D(U){return new f(function(H,z){var Z=new FileReader;Z.onerror=z,Z.onloadend=function(ee){var q=btoa(ee.target.result||"");H({__local_forage_encoded_blob:!0,data:q,type:U.type})},Z.readAsBinaryString(U)})}function V(U){var H=S(atob(U.data));return u([H],{type:U.type})}function Y(U){return U&&U.__local_forage_encoded_blob}function W(U){var H=this,z=H._initReady().then(function(){var Z=m[H._dbInfo.name];if(Z&&Z.dbReady)return Z.dbReady});return d(z,U,U),z}function $(U){C(U);for(var H=m[U.name],z=H.forages,Z=0;Z<z.length;Z++){var ee=z[Z];ee._dbInfo.db&&(ee._dbInfo.db.close(),ee._dbInfo.db=null)}return U.db=null,O(U).then(function(q){return U.db=q,F(U)?R(U):q}).then(function(q){U.db=H.db=q;for(var le=0;le<z.length;le++)z[le]._dbInfo.db=q}).catch(function(q){throw P(U,q),q})}function I(U,H,z,Z){Z===void 0&&(Z=1);try{var ee=U.db.transaction(U.storeName,H);z(null,ee)}catch(q){if(Z>0&&(!U.db||q.name==="InvalidStateError"||q.name==="NotFoundError"))return f.resolve().then(function(){if(!U.db||q.name==="NotFoundError"&&!U.db.objectStoreNames.contains(U.storeName)&&U.version<=U.db.version)return U.db&&(U.version=U.db.version+1),R(U)}).then(function(){return $(U).then(function(){I(U,H,z,Z-1)})}).catch(z);z(q)}}function B(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(U){var H=this,z={db:null};if(U)for(var Z in U)z[Z]=U[Z];var ee=m[z.name];ee||(ee=B(),m[z.name]=ee),ee.forages.push(H),H._initReady||(H._initReady=H.ready,H.ready=W);var q=[];function le(){return f.resolve()}for(var pe=0;pe<ee.forages.length;pe++){var ge=ee.forages[pe];ge!==H&&q.push(ge._initReady().catch(le))}var ye=ee.forages.slice(0);return f.all(q).then(function(){return z.db=ee.db,O(z)}).then(function(Se){return z.db=Se,F(z,H._defaultConfig.version)?R(z):Se}).then(function(Se){z.db=ee.db=Se,H._dbInfo=z;for(var De=0;De<ye.length;De++){var nt=ye[De];nt!==H&&(nt._dbInfo.db=z.db,nt._dbInfo.version=z.version)}})}function M(U,H){var z=this;U=p(U);var Z=new f(function(ee,q){z.ready().then(function(){I(z._dbInfo,b,function(le,pe){if(le)return q(le);try{var ge=pe.objectStore(z._dbInfo.storeName),ye=ge.get(U);ye.onsuccess=function(){var Se=ye.result;Se===void 0&&(Se=null),Y(Se)&&(Se=V(Se)),ee(Se)},ye.onerror=function(){q(ye.error)}}catch(Se){q(Se)}})}).catch(q)});return h(Z,H),Z}function X(U,H){var z=this,Z=new f(function(ee,q){z.ready().then(function(){I(z._dbInfo,b,function(le,pe){if(le)return q(le);try{var ge=pe.objectStore(z._dbInfo.storeName),ye=ge.openCursor(),Se=1;ye.onsuccess=function(){var De=ye.result;if(De){var nt=De.value;Y(nt)&&(nt=V(nt));var yt=U(nt,De.key,Se++);yt!==void 0?ee(yt):De.continue()}else ee()},ye.onerror=function(){q(ye.error)}}catch(De){q(De)}})}).catch(q)});return h(Z,H),Z}function K(U,H,z){var Z=this;U=p(U);var ee=new f(function(q,le){var pe;Z.ready().then(function(){return pe=Z._dbInfo,x.call(H)==="[object Blob]"?w(pe.db).then(function(ge){return ge?H:D(H)}):H}).then(function(ge){I(Z._dbInfo,_,function(ye,Se){if(ye)return le(ye);try{var De=Se.objectStore(Z._dbInfo.storeName);ge===null&&(ge=void 0);var nt=De.put(ge,U);Se.oncomplete=function(){ge===void 0&&(ge=null),q(ge)},Se.onabort=Se.onerror=function(){var yt=nt.error?nt.error:nt.transaction.error;le(yt)}}catch(yt){le(yt)}})}).catch(le)});return h(ee,z),ee}function ne(U,H){var z=this;U=p(U);var Z=new f(function(ee,q){z.ready().then(function(){I(z._dbInfo,_,function(le,pe){if(le)return q(le);try{var ge=pe.objectStore(z._dbInfo.storeName),ye=ge.delete(U);pe.oncomplete=function(){ee()},pe.onerror=function(){q(ye.error)},pe.onabort=function(){var Se=ye.error?ye.error:ye.transaction.error;q(Se)}}catch(Se){q(Se)}})}).catch(q)});return h(Z,H),Z}function te(U){var H=this,z=new f(function(Z,ee){H.ready().then(function(){I(H._dbInfo,_,function(q,le){if(q)return ee(q);try{var pe=le.objectStore(H._dbInfo.storeName),ge=pe.clear();le.oncomplete=function(){Z()},le.onabort=le.onerror=function(){var ye=ge.error?ge.error:ge.transaction.error;ee(ye)}}catch(ye){ee(ye)}})}).catch(ee)});return h(z,U),z}function ce(U){var H=this,z=new f(function(Z,ee){H.ready().then(function(){I(H._dbInfo,b,function(q,le){if(q)return ee(q);try{var pe=le.objectStore(H._dbInfo.storeName),ge=pe.count();ge.onsuccess=function(){Z(ge.result)},ge.onerror=function(){ee(ge.error)}}catch(ye){ee(ye)}})}).catch(ee)});return h(z,U),z}function de(U,H){var z=this,Z=new f(function(ee,q){if(U<0){ee(null);return}z.ready().then(function(){I(z._dbInfo,b,function(le,pe){if(le)return q(le);try{var ge=pe.objectStore(z._dbInfo.storeName),ye=!1,Se=ge.openKeyCursor();Se.onsuccess=function(){var De=Se.result;if(!De){ee(null);return}U===0||ye?ee(De.key):(ye=!0,De.advance(U))},Se.onerror=function(){q(Se.error)}}catch(De){q(De)}})}).catch(q)});return h(Z,H),Z}function se(U){var H=this,z=new f(function(Z,ee){H.ready().then(function(){I(H._dbInfo,b,function(q,le){if(q)return ee(q);try{var pe=le.objectStore(H._dbInfo.storeName),ge=pe.openKeyCursor(),ye=[];ge.onsuccess=function(){var Se=ge.result;if(!Se){Z(ye);return}ye.push(Se.key),Se.continue()},ge.onerror=function(){ee(ge.error)}}catch(Se){ee(Se)}})}).catch(ee)});return h(z,U),z}function fe(U,H){H=v.apply(this,arguments);var z=this.config();U=typeof U!="function"&&U||{},U.name||(U.name=U.name||z.name,U.storeName=U.storeName||z.storeName);var Z=this,ee;if(!U.name)ee=f.reject("Invalid arguments");else{var q=U.name===z.name&&Z._dbInfo.db,le=q?f.resolve(Z._dbInfo.db):O(U).then(function(pe){var ge=m[U.name],ye=ge.forages;ge.db=pe;for(var Se=0;Se<ye.length;Se++)ye[Se]._dbInfo.db=pe;return pe});U.storeName?ee=le.then(function(pe){if(pe.objectStoreNames.contains(U.storeName)){var ge=pe.version+1;C(U);var ye=m[U.name],Se=ye.forages;pe.close();for(var De=0;De<Se.length;De++){var nt=Se[De];nt._dbInfo.db=null,nt._dbInfo.version=ge}var yt=new f(function(St,_r){var lr=c.open(U.name,ge);lr.onerror=function(ni){var Fu=lr.result;Fu.close(),_r(ni)},lr.onupgradeneeded=function(){var ni=lr.result;ni.deleteObjectStore(U.storeName)},lr.onsuccess=function(){var ni=lr.result;ni.close(),St(ni)}});return yt.then(function(St){ye.db=St;for(var _r=0;_r<Se.length;_r++){var lr=Se[_r];lr._dbInfo.db=St,A(lr._dbInfo)}}).catch(function(St){throw(P(U,St)||f.resolve()).catch(function(){}),St})}}):ee=le.then(function(pe){C(U);var ge=m[U.name],ye=ge.forages;pe.close();for(var Se=0;Se<ye.length;Se++){var De=ye[Se];De._dbInfo.db=null}var nt=new f(function(yt,St){var _r=c.deleteDatabase(U.name);_r.onerror=function(){var lr=_r.result;lr&&lr.close(),St(_r.error)},_r.onblocked=function(){console.warn('dropInstance blocked for database "'+U.name+'" until all open connections are closed')},_r.onsuccess=function(){var lr=_r.result;lr&&lr.close(),yt(lr)}});return nt.then(function(yt){ge.db=yt;for(var St=0;St<ye.length;St++){var _r=ye[St];A(_r._dbInfo)}}).catch(function(yt){throw(P(U,yt)||f.resolve()).catch(function(){}),yt})})}return h(ee,H),ee}var oe={_driver:"asyncStorage",_initStorage:L,_support:l(),iterate:X,getItem:M,setItem:K,removeItem:ne,clear:te,length:ce,key:de,keys:se,dropInstance:fe};function he(){return typeof openDatabase=="function"}var Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ie="~~local_forage_type~",Ee=/^~~local_forage_type~([^~]+)~/,Be="__lfsc__:",qe=Be.length,rt="arbf",Xe="blob",Ge="si08",Qe="ui08",bt="uic8",er="si16",Ct="si32",It="ur16",ht="ui32",Yt="fl32",ae="fl64",ue=qe+rt.length,me=Object.prototype.toString;function Fe(U){var H=U.length*.75,z=U.length,Z,ee=0,q,le,pe,ge;U[U.length-1]==="="&&(H--,U[U.length-2]==="="&&H--);var ye=new ArrayBuffer(H),Se=new Uint8Array(ye);for(Z=0;Z<z;Z+=4)q=Pe.indexOf(U[Z]),le=Pe.indexOf(U[Z+1]),pe=Pe.indexOf(U[Z+2]),ge=Pe.indexOf(U[Z+3]),Se[ee++]=q<<2|le>>4,Se[ee++]=(le&15)<<4|pe>>2,Se[ee++]=(pe&3)<<6|ge&63;return ye}function Te(U){var H=new Uint8Array(U),z="",Z;for(Z=0;Z<H.length;Z+=3)z+=Pe[H[Z]>>2],z+=Pe[(H[Z]&3)<<4|H[Z+1]>>4],z+=Pe[(H[Z+1]&15)<<2|H[Z+2]>>6],z+=Pe[H[Z+2]&63];return H.length%3===2?z=z.substring(0,z.length-1)+"=":H.length%3===1&&(z=z.substring(0,z.length-2)+"=="),z}function Ne(U,H){var z="";if(U&&(z=me.call(U)),U&&(z==="[object ArrayBuffer]"||U.buffer&&me.call(U.buffer)==="[object ArrayBuffer]")){var Z,ee=Be;U instanceof ArrayBuffer?(Z=U,ee+=rt):(Z=U.buffer,z==="[object Int8Array]"?ee+=Ge:z==="[object Uint8Array]"?ee+=Qe:z==="[object Uint8ClampedArray]"?ee+=bt:z==="[object Int16Array]"?ee+=er:z==="[object Uint16Array]"?ee+=It:z==="[object Int32Array]"?ee+=Ct:z==="[object Uint32Array]"?ee+=ht:z==="[object Float32Array]"?ee+=Yt:z==="[object Float64Array]"?ee+=ae:H(new Error("Failed to get type for BinaryArray"))),H(ee+Te(Z))}else if(z==="[object Blob]"){var q=new FileReader;q.onload=function(){var le=Ie+U.type+"~"+Te(this.result);H(Be+Xe+le)},q.readAsArrayBuffer(U)}else try{H(JSON.stringify(U))}catch(le){console.error("Couldn't convert value into a JSON string: ",U),H(null,le)}}function Tt(U){if(U.substring(0,qe)!==Be)return JSON.parse(U);var H=U.substring(ue),z=U.substring(qe,ue),Z;if(z===Xe&&Ee.test(H)){var ee=H.match(Ee);Z=ee[1],H=H.substring(ee[0].length)}var q=Fe(H);switch(z){case rt:return q;case Xe:return u([q],{type:Z});case Ge:return new Int8Array(q);case Qe:return new Uint8Array(q);case bt:return new Uint8ClampedArray(q);case er:return new Int16Array(q);case It:return new Uint16Array(q);case Ct:return new Int32Array(q);case ht:return new Uint32Array(q);case Yt:return new Float32Array(q);case ae:return new Float64Array(q);default:throw new Error("Unkown type: "+z)}}var sr={serialize:Ne,deserialize:Tt,stringToBuffer:Fe,bufferToString:Te};function nn(U,H,z,Z){U.executeSql("CREATE TABLE IF NOT EXISTS "+H.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],z,Z)}function an(U){var H=this,z={db:null};if(U)for(var Z in U)z[Z]=typeof U[Z]!="string"?U[Z].toString():U[Z];var ee=new f(function(q,le){try{z.db=openDatabase(z.name,String(z.version),z.description,z.size)}catch(pe){return le(pe)}z.db.transaction(function(pe){nn(pe,z,function(){H._dbInfo=z,q()},function(ge,ye){le(ye)})},le)});return z.serializer=sr,ee}function $t(U,H,z,Z,ee,q){U.executeSql(z,Z,ee,function(le,pe){pe.code===pe.SYNTAX_ERR?le.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[H.storeName],function(ge,ye){ye.rows.length?q(ge,pe):nn(ge,H,function(){ge.executeSql(z,Z,ee,q)},q)},q):q(le,pe)},q)}function Ui(U,H){var z=this;U=p(U);var Z=new f(function(ee,q){z.ready().then(function(){var le=z._dbInfo;le.db.transaction(function(pe){$t(pe,le,"SELECT * FROM "+le.storeName+" WHERE key = ? LIMIT 1",[U],function(ge,ye){var Se=ye.rows.length?ye.rows.item(0).value:null;Se&&(Se=le.serializer.deserialize(Se)),ee(Se)},function(ge,ye){q(ye)})})}).catch(q)});return h(Z,H),Z}function $n(U,H){var z=this,Z=new f(function(ee,q){z.ready().then(function(){var le=z._dbInfo;le.db.transaction(function(pe){$t(pe,le,"SELECT * FROM "+le.storeName,[],function(ge,ye){for(var Se=ye.rows,De=Se.length,nt=0;nt<De;nt++){var yt=Se.item(nt),St=yt.value;if(St&&(St=le.serializer.deserialize(St)),St=U(St,yt.key,nt+1),St!==void 0){ee(St);return}}ee()},function(ge,ye){q(ye)})})}).catch(q)});return h(Z,H),Z}function Kr(U,H,z,Z){var ee=this;U=p(U);var q=new f(function(le,pe){ee.ready().then(function(){H===void 0&&(H=null);var ge=H,ye=ee._dbInfo;ye.serializer.serialize(H,function(Se,De){De?pe(De):ye.db.transaction(function(nt){$t(nt,ye,"INSERT OR REPLACE INTO "+ye.storeName+" (key, value) VALUES (?, ?)",[U,Se],function(){le(ge)},function(yt,St){pe(St)})},function(nt){if(nt.code===nt.QUOTA_ERR){if(Z>0){le(Kr.apply(ee,[U,ge,z,Z-1]));return}pe(nt)}})})}).catch(pe)});return h(q,z),q}function mi(U,H,z){return Kr.apply(this,[U,H,z,1])}function $i(U,H){var z=this;U=p(U);var Z=new f(function(ee,q){z.ready().then(function(){var le=z._dbInfo;le.db.transaction(function(pe){$t(pe,le,"DELETE FROM "+le.storeName+" WHERE key = ?",[U],function(){ee()},function(ge,ye){q(ye)})})}).catch(q)});return h(Z,H),Z}function $a(U){var H=this,z=new f(function(Z,ee){H.ready().then(function(){var q=H._dbInfo;q.db.transaction(function(le){$t(le,q,"DELETE FROM "+q.storeName,[],function(){Z()},function(pe,ge){ee(ge)})})}).catch(ee)});return h(z,U),z}function ti(U){var H=this,z=new f(function(Z,ee){H.ready().then(function(){var q=H._dbInfo;q.db.transaction(function(le){$t(le,q,"SELECT COUNT(key) as c FROM "+q.storeName,[],function(pe,ge){var ye=ge.rows.item(0).c;Z(ye)},function(pe,ge){ee(ge)})})}).catch(ee)});return h(z,U),z}function $s(U,H){var z=this,Z=new f(function(ee,q){z.ready().then(function(){var le=z._dbInfo;le.db.transaction(function(pe){$t(pe,le,"SELECT key FROM "+le.storeName+" WHERE id = ? LIMIT 1",[U+1],function(ge,ye){var Se=ye.rows.length?ye.rows.item(0).key:null;ee(Se)},function(ge,ye){q(ye)})})}).catch(q)});return h(Z,H),Z}function Vn(U){var H=this,z=new f(function(Z,ee){H.ready().then(function(){var q=H._dbInfo;q.db.transaction(function(le){$t(le,q,"SELECT key FROM "+q.storeName,[],function(pe,ge){for(var ye=[],Se=0;Se<ge.rows.length;Se++)ye.push(ge.rows.item(Se).key);Z(ye)},function(pe,ge){ee(ge)})})}).catch(ee)});return h(z,U),z}function xa(U){return new f(function(H,z){U.transaction(function(Z){Z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ee,q){for(var le=[],pe=0;pe<q.rows.length;pe++)le.push(q.rows.item(pe).name);H({db:U,storeNames:le})},function(ee,q){z(q)})},function(Z){z(Z)})})}function ri(U,H){H=v.apply(this,arguments);var z=this.config();U=typeof U!="function"&&U||{},U.name||(U.name=U.name||z.name,U.storeName=U.storeName||z.storeName);var Z=this,ee;return U.name?ee=new f(function(q){var le;U.name===z.name?le=Z._dbInfo.db:le=openDatabase(U.name,"","",0),U.storeName?q({db:le,storeNames:[U.storeName]}):q(xa(le))}).then(function(q){return new f(function(le,pe){q.db.transaction(function(ge){function ye(yt){return new f(function(St,_r){ge.executeSql("DROP TABLE IF EXISTS "+yt,[],function(){St()},function(lr,ni){_r(ni)})})}for(var Se=[],De=0,nt=q.storeNames.length;De<nt;De++)Se.push(ye(q.storeNames[De]));f.all(Se).then(function(){le()}).catch(function(yt){pe(yt)})},function(ge){pe(ge)})})}):ee=f.reject("Invalid arguments"),h(ee,H),ee}var xr={_driver:"webSQLStorage",_initStorage:an,_support:he(),iterate:$n,getItem:Ui,setItem:mi,removeItem:$i,clear:$a,length:ti,key:$s,keys:Vn,dropInstance:ri};function Vi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ru(U,H){var z=U.name+"/";return U.storeName!==H.storeName&&(z+=U.storeName+"/"),z}function Pv(){var U="_localforage_support_test";try{return localStorage.setItem(U,!0),localStorage.removeItem(U),!1}catch{return!0}}function PN(){return!Pv()||localStorage.length>0}function ON(U){var H=this,z={};if(U)for(var Z in U)z[Z]=U[Z];return z.keyPrefix=Ru(U,H._defaultConfig),PN()?(H._dbInfo=z,z.serializer=sr,f.resolve()):f.reject()}function RN(U){var H=this,z=H.ready().then(function(){for(var Z=H._dbInfo.keyPrefix,ee=localStorage.length-1;ee>=0;ee--){var q=localStorage.key(ee);q.indexOf(Z)===0&&localStorage.removeItem(q)}});return h(z,U),z}function IN(U,H){var z=this;U=p(U);var Z=z.ready().then(function(){var ee=z._dbInfo,q=localStorage.getItem(ee.keyPrefix+U);return q&&(q=ee.serializer.deserialize(q)),q});return h(Z,H),Z}function FN(U,H){var z=this,Z=z.ready().then(function(){for(var ee=z._dbInfo,q=ee.keyPrefix,le=q.length,pe=localStorage.length,ge=1,ye=0;ye<pe;ye++){var Se=localStorage.key(ye);if(Se.indexOf(q)===0){var De=localStorage.getItem(Se);if(De&&(De=ee.serializer.deserialize(De)),De=U(De,Se.substring(le),ge++),De!==void 0)return De}}});return h(Z,H),Z}function kN(U,H){var z=this,Z=z.ready().then(function(){var ee=z._dbInfo,q;try{q=localStorage.key(U)}catch{q=null}return q&&(q=q.substring(ee.keyPrefix.length)),q});return h(Z,H),Z}function DN(U){var H=this,z=H.ready().then(function(){for(var Z=H._dbInfo,ee=localStorage.length,q=[],le=0;le<ee;le++){var pe=localStorage.key(le);pe.indexOf(Z.keyPrefix)===0&&q.push(pe.substring(Z.keyPrefix.length))}return q});return h(z,U),z}function MN(U){var H=this,z=H.keys().then(function(Z){return Z.length});return h(z,U),z}function LN(U,H){var z=this;U=p(U);var Z=z.ready().then(function(){var ee=z._dbInfo;localStorage.removeItem(ee.keyPrefix+U)});return h(Z,H),Z}function BN(U,H,z){var Z=this;U=p(U);var ee=Z.ready().then(function(){H===void 0&&(H=null);var q=H;return new f(function(le,pe){var ge=Z._dbInfo;ge.serializer.serialize(H,function(ye,Se){if(Se)pe(Se);else try{localStorage.setItem(ge.keyPrefix+U,ye),le(q)}catch(De){(De.name==="QuotaExceededError"||De.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pe(De),pe(De)}})})});return h(ee,z),ee}function NN(U,H){if(H=v.apply(this,arguments),U=typeof U!="function"&&U||{},!U.name){var z=this.config();U.name=U.name||z.name,U.storeName=U.storeName||z.storeName}var Z=this,ee;return U.name?ee=new f(function(q){U.storeName?q(Ru(U,Z._defaultConfig)):q(U.name+"/")}).then(function(q){for(var le=localStorage.length-1;le>=0;le--){var pe=localStorage.key(le);pe.indexOf(q)===0&&localStorage.removeItem(pe)}}):ee=f.reject("Invalid arguments"),h(ee,H),ee}var jN={_driver:"localStorageWrapper",_initStorage:ON,_support:Vi(),iterate:FN,getItem:IN,setItem:BN,removeItem:LN,clear:RN,length:MN,key:kN,keys:DN,dropInstance:NN},UN=function(H,z){return H===z||typeof H=="number"&&typeof z=="number"&&isNaN(H)&&isNaN(z)},$N=function(H,z){for(var Z=H.length,ee=0;ee<Z;){if(UN(H[ee],z))return!0;ee++}return!1},SA=Array.isArray||function(U){return Object.prototype.toString.call(U)==="[object Array]"},Iu={},EA={},Vs={INDEXEDDB:oe,WEBSQL:xr,LOCALSTORAGE:jN},VN=[Vs.INDEXEDDB._driver,Vs.WEBSQL._driver,Vs.LOCALSTORAGE._driver],oh=["dropInstance"],Ov=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(oh),GN={description:"",driver:VN.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function zN(U,H){U[H]=function(){var z=arguments;return U.ready().then(function(){return U[H].apply(U,z)})}}function Rv(){for(var U=1;U<arguments.length;U++){var H=arguments[U];if(H)for(var z in H)H.hasOwnProperty(z)&&(SA(H[z])?arguments[0][z]=H[z].slice():arguments[0][z]=H[z])}return arguments[0]}var WN=function(){function U(H){o(this,U);for(var z in Vs)if(Vs.hasOwnProperty(z)){var Z=Vs[z],ee=Z._driver;this[z]=ee,Iu[ee]||this.defineDriver(Z)}this._defaultConfig=Rv({},GN),this._config=Rv({},this._defaultConfig,H),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return U.prototype.config=function(z){if((typeof z>"u"?"undefined":a(z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Z in z){if(Z==="storeName"&&(z[Z]=z[Z].replace(/\W/g,"_")),Z==="version"&&typeof z[Z]!="number")return new Error("Database version must be a number.");this._config[Z]=z[Z]}return"driver"in z&&z.driver?this.setDriver(this._config.driver):!0}else return typeof z=="string"?this._config[z]:this._config},U.prototype.defineDriver=function(z,Z,ee){var q=new f(function(le,pe){try{var ge=z._driver,ye=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!z._driver){pe(ye);return}for(var Se=Ov.concat("_initStorage"),De=0,nt=Se.length;De<nt;De++){var yt=Se[De],St=!$N(oh,yt);if((St||z[yt])&&typeof z[yt]!="function"){pe(ye);return}}var _r=function(){for(var Fu=function(YN){return function(){var qN=new Error("Method "+YN+" is not implemented by the current driver"),wA=f.reject(qN);return h(wA,arguments[arguments.length-1]),wA}},Iv=0,HN=oh.length;Iv<HN;Iv++){var Fv=oh[Iv];z[Fv]||(z[Fv]=Fu(Fv))}};_r();var lr=function(Fu){Iu[ge]&&console.info("Redefining LocalForage driver: "+ge),Iu[ge]=z,EA[ge]=Fu,le()};"_support"in z?z._support&&typeof z._support=="function"?z._support().then(lr,pe):lr(!!z._support):lr(!0)}catch(ni){pe(ni)}});return d(q,Z,ee),q},U.prototype.driver=function(){return this._driver||null},U.prototype.getDriver=function(z,Z,ee){var q=Iu[z]?f.resolve(Iu[z]):f.reject(new Error("Driver not found."));return d(q,Z,ee),q},U.prototype.getSerializer=function(z){var Z=f.resolve(sr);return d(Z,z),Z},U.prototype.ready=function(z){var Z=this,ee=Z._driverSet.then(function(){return Z._ready===null&&(Z._ready=Z._initDriver()),Z._ready});return d(ee,z,z),ee},U.prototype.setDriver=function(z,Z,ee){var q=this;SA(z)||(z=[z]);var le=this._getSupportedDrivers(z);function pe(){q._config.driver=q.driver()}function ge(De){return q._extend(De),pe(),q._ready=q._initStorage(q._config),q._ready}function ye(De){return function(){var nt=0;function yt(){for(;nt<De.length;){var St=De[nt];return nt++,q._dbInfo=null,q._ready=null,q.getDriver(St).then(ge).catch(yt)}pe();var _r=new Error("No available storage method found.");return q._driverSet=f.reject(_r),q._driverSet}return yt()}}var Se=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Se.then(function(){var De=le[0];return q._dbInfo=null,q._ready=null,q.getDriver(De).then(function(nt){q._driver=nt._driver,pe(),q._wrapLibraryMethodsWithReady(),q._initDriver=ye(le)})}).catch(function(){pe();var De=new Error("No available storage method found.");return q._driverSet=f.reject(De),q._driverSet}),d(this._driverSet,Z,ee),this._driverSet},U.prototype.supports=function(z){return!!EA[z]},U.prototype._extend=function(z){Rv(this,z)},U.prototype._getSupportedDrivers=function(z){for(var Z=[],ee=0,q=z.length;ee<q;ee++){var le=z[ee];this.supports(le)&&Z.push(le)}return Z},U.prototype._wrapLibraryMethodsWithReady=function(){for(var z=0,Z=Ov.length;z<Z;z++)zN(this,Ov[z])},U.prototype.createInstance=function(z){return new U(z)},U}(),XN=new WN;n.exports=XN},{3:3}]},{},[4])(4)})})(Qk);var bs=Qk.exports;const pa=vn(bs);var yS={exports:{}},Jk=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},wW=Jk,Ds=Object.prototype.toString;function xS(t){return Ds.call(t)==="[object Array]"}function kx(t){return typeof t>"u"}function AW(t){return t!==null&&!kx(t)&&t.constructor!==null&&!kx(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function CW(t){return Ds.call(t)==="[object ArrayBuffer]"}function TW(t){return typeof FormData<"u"&&t instanceof FormData}function PW(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function OW(t){return typeof t=="string"}function RW(t){return typeof t=="number"}function eD(t){return t!==null&&typeof t=="object"}function dd(t){if(Ds.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function IW(t){return Ds.call(t)==="[object Date]"}function FW(t){return Ds.call(t)==="[object File]"}function kW(t){return Ds.call(t)==="[object Blob]"}function tD(t){return Ds.call(t)==="[object Function]"}function DW(t){return eD(t)&&tD(t.pipe)}function MW(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function LW(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function BW(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function _S(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),xS(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Dx(){var t={};function e(i,a){dd(t[a])&&dd(i)?t[a]=Dx(t[a],i):dd(i)?t[a]=Dx({},i):xS(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)_S(arguments[r],e);return t}function NW(t,e,r){return _S(e,function(i,a){r&&typeof i=="function"?t[a]=wW(i,r):t[a]=i}),t}function jW(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Qn={isArray:xS,isArrayBuffer:CW,isBuffer:AW,isFormData:TW,isArrayBufferView:PW,isString:OW,isNumber:RW,isObject:eD,isPlainObject:dd,isUndefined:kx,isDate:IW,isFile:FW,isBlob:kW,isFunction:tD,isStream:DW,isURLSearchParams:MW,isStandardBrowserEnv:BW,forEach:_S,merge:Dx,extend:NW,trim:LW,stripBOM:jW},Xs=Qn;function O2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var rD=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Xs.isURLSearchParams(r))i=r.toString();else{var a=[];Xs.forEach(r,function(c,l){c===null||typeof c>"u"||(Xs.isArray(c)?l=l+"[]":c=[c],Xs.forEach(c,function(f){Xs.isDate(f)?f=f.toISOString():Xs.isObject(f)&&(f=JSON.stringify(f)),a.push(O2(l)+"="+O2(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},UW=Qn;function c0(){this.handlers=[]}c0.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};c0.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};c0.prototype.forEach=function(e){UW.forEach(this.handlers,function(n){n!==null&&e(n)})};var $W=c0,VW=Qn,GW=function(e,r){VW.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},nD=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},fm,R2;function iD(){if(R2)return fm;R2=1;var t=nD;return fm=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},fm}var hm,I2;function zW(){if(I2)return hm;I2=1;var t=iD();return hm=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},hm}var dm,F2;function WW(){if(F2)return dm;F2=1;var t=Qn;return dm=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(s)&&l.push("domain="+s),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),dm}var pm,k2;function XW(){return k2||(k2=1,pm=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),pm}var vm,D2;function HW(){return D2||(D2=1,vm=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),vm}var mm,M2;function YW(){if(M2)return mm;M2=1;var t=XW(),e=HW();return mm=function(n,i){return n&&!t(i)?e(n,i):i},mm}var gm,L2;function qW(){if(L2)return gm;L2=1;var t=Qn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return gm=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(l){if(s=l.indexOf(":"),a=t.trim(l.substr(0,s)).toLowerCase(),o=t.trim(l.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},gm}var ym,B2;function KW(){if(B2)return ym;B2=1;var t=Qn;return ym=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=t.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),ym}var xm,N2;function f0(){if(N2)return xm;N2=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,xm=t,xm}var _m,j2;function U2(){if(j2)return _m;j2=1;var t=Qn,e=zW(),r=WW(),n=rD,i=YW(),a=qW(),o=KW(),s=iD(),c=h0(),l=f0();return _m=function(f){return new Promise(function(d,p){var v=f.data,y=f.headers,g=f.responseType,m;function x(){f.cancelToken&&f.cancelToken.unsubscribe(m),f.signal&&f.signal.removeEventListener("abort",m)}t.isFormData(v)&&delete y["Content-Type"];var b=new XMLHttpRequest;if(f.auth){var _=f.auth.username||"",S=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";y.Authorization="Basic "+btoa(_+":"+S)}var E=i(f.baseURL,f.url);b.open(f.method.toUpperCase(),n(E,f.params,f.paramsSerializer),!0),b.timeout=f.timeout;function w(){if(b){var A="getAllResponseHeaders"in b?a(b.getAllResponseHeaders()):null,P=!g||g==="text"||g==="json"?b.responseText:b.response,T={data:P,status:b.status,statusText:b.statusText,headers:A,config:f,request:b};e(function(R){d(R),x()},function(R){p(R),x()},T),b=null}}if("onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(p(s("Request aborted",f,"ECONNABORTED",b)),b=null)},b.onerror=function(){p(s("Network Error",f,null,b)),b=null},b.ontimeout=function(){var P=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",T=f.transitional||c.transitional;f.timeoutErrorMessage&&(P=f.timeoutErrorMessage),p(s(P,f,T.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},t.isStandardBrowserEnv()){var C=(f.withCredentials||o(E))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;C&&(y[f.xsrfHeaderName]=C)}"setRequestHeader"in b&&t.forEach(y,function(P,T){typeof v>"u"&&T.toLowerCase()==="content-type"?delete y[T]:b.setRequestHeader(T,P)}),t.isUndefined(f.withCredentials)||(b.withCredentials=!!f.withCredentials),g&&g!=="json"&&(b.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&b.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(m=function(A){b&&(p(!A||A&&A.type?new l("canceled"):A),b.abort(),b=null)},f.cancelToken&&f.cancelToken.subscribe(m),f.signal&&(f.signal.aborted?m():f.signal.addEventListener("abort",m))),v||(v=null),b.send(v)})},_m}var bm,$2;function h0(){if($2)return bm;$2=1;var t=Qn,e=GW,r=nD,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function a(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=U2()),c}function o(c,l,u){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(f){if(f.name!=="SyntaxError")throw f}return(u||JSON.stringify)(c)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:a(),transformRequest:[function(l,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(u,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||u&&u["Content-Type"]==="application/json"?(i(u,"application/json"),o(l)):l}],transformResponse:[function(l){var u=this.transitional||s.transitional,f=u&&u.silentJSONParsing,h=u&&u.forcedJSONParsing,d=!f&&this.responseType==="json";if(d||h&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(p){if(d)throw p.name==="SyntaxError"?r(p,this,"E_JSON_PARSE"):p}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){s.headers[l]={}}),t.forEach(["post","put","patch"],function(l){s.headers[l]=t.merge(n)}),bm=s,bm}var ZW=Qn,QW=h0(),JW=function(e,r,n){var i=this||QW;return ZW.forEach(n,function(o){e=o.call(i,e,r)}),e},Sm,V2;function aD(){return V2||(V2=1,Sm=function(e){return!!(e&&e.__CANCEL__)}),Sm}var G2=Qn,Em=JW,eX=aD(),tX=h0(),rX=f0();function wm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rX("canceled")}var nX=function(e){wm(e),e.headers=e.headers||{},e.data=Em.call(e,e.data,e.headers,e.transformRequest),e.headers=G2.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),G2.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||tX.adapter;return r(e).then(function(i){return wm(e),i.data=Em.call(e,i.data,i.headers,e.transformResponse),i},function(i){return eX(i)||(wm(e),i&&i.response&&(i.response.data=Em.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Gn=Qn,oD=function(e,r){r=r||{};var n={};function i(u,f){return Gn.isPlainObject(u)&&Gn.isPlainObject(f)?Gn.merge(u,f):Gn.isPlainObject(f)?Gn.merge({},f):Gn.isArray(f)?f.slice():f}function a(u){if(Gn.isUndefined(r[u])){if(!Gn.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function o(u){if(!Gn.isUndefined(r[u]))return i(void 0,r[u])}function s(u){if(Gn.isUndefined(r[u])){if(!Gn.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return Gn.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=l[f]||a,d=h(f);Gn.isUndefined(d)&&h!==c||(n[f]=d)}),n},Am,z2;function sD(){return z2||(z2=1,Am={version:"0.24.0"}),Am}var iX=sD().version,bS={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){bS[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var W2={};bS.transitional=function(e,r,n){function i(a,o){return"[Axios v"+iX+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!W2[o]&&(W2[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function aX(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],c=s===void 0||o(s,a,t);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var oX={assertOptions:aX,validators:bS},lD=Qn,sX=rD,X2=$W,H2=nX,d0=oD,uD=oX,Hs=uD.validators;function zf(t){this.defaults=t,this.interceptors={request:new X2,response:new X2}}zf.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=d0(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&uD.assertOptions(r,{silentJSONParsing:Hs.transitional(Hs.boolean),forcedJSONParsing:Hs.transitional(Hs.boolean),clarifyTimeoutError:Hs.transitional(Hs.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(i=i&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var a=[];this.interceptors.response.forEach(function(h){a.push(h.fulfilled,h.rejected)});var o;if(!i){var s=[H2,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(a),o=Promise.resolve(e);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{o=H2(c)}catch(f){return Promise.reject(f)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};zf.prototype.getUri=function(e){return e=d0(this.defaults,e),sX(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};lD.forEach(["delete","get","head","options"],function(e){zf.prototype[e]=function(r,n){return this.request(d0(n||{},{method:e,url:r,data:(n||{}).data}))}});lD.forEach(["post","put","patch"],function(e){zf.prototype[e]=function(r,n,i){return this.request(d0(i||{},{method:e,url:r,data:n}))}});var lX=zf,Cm,Y2;function uX(){if(Y2)return Cm;Y2=1;var t=f0();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Cm=e,Cm}var Tm,q2;function cX(){return q2||(q2=1,Tm=function(e){return function(n){return e.apply(null,n)}}),Tm}var Pm,K2;function fX(){return K2||(K2=1,Pm=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Pm}var Z2=Qn,hX=Jk,pd=lX,dX=oD,pX=h0();function cD(t){var e=new pd(t),r=hX(pd.prototype.request,e);return Z2.extend(r,pd.prototype,e),Z2.extend(r,e),r.create=function(i){return cD(dX(t,i))},r}var va=cD(pX);va.Axios=pd;va.Cancel=f0();va.CancelToken=uX();va.isCancel=aD();va.VERSION=sD().version;va.all=function(e){return Promise.all(e)};va.spread=cX();va.isAxiosError=fX();yS.exports=va;yS.exports.default=va;var vX=yS.exports,mX=vX;const gX=mX;class yX{constructor(){this.url="",this.level="all",this.mongoUrl="mongodb://localhost:27017/",this.collection="main",this.isUpload=!0}init(e,r){this.url=e,r&&(this.mongoUrl=r)}setUpload(e){this.isUpload=e}setCollection(e){this.collection=e}setLevel(e){this.level=e.toUpperCase()}upload(e,r,n,i){typeof e!="string"&&this.error("log的第一个参数不是字符串",void 0,!1);let a={log:{info:e,data:r,level:n,now:i},mongoUrl:this.mongoUrl,collection:this.collection};const o=this;this.url!==""&&this.isUpload&&gX.post(this.url+"/log",a).then(s=>{o.trace("Logged to cloud.",void 0,!1)}).catch(s=>{o.error("Logging to cloud failed!",void 0,!1)})}clog(e,r,n,i,a,o){const s={all:7,ALL:7,TRACE:6,DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,NONE:0,none:0};s[n]<=s[this.level]&&(console.log("%c%s%c%s%c%s%c %s","color:white;background-color:"+i,"["+n+"]",""," ","color:"+i,"["+a.toLocaleString()+"]","",e),r&&(console.log(r),console.log("------------------------"))),o===void 0&&this.upload(e,r,n,a),o!==void 0&&o&&this.upload(e,r,n,a)}trace(e,r,n){const i=new Date,a="TRACE",o="#005CAF";this.clog(e,r,a,o,i,n)}debug(e,r,n){const i=new Date,a="DEBUG",o="#0089A7";this.clog(e,r,a,o,i,n)}info(e,r,n){const i=new Date,a="INFO",o="#00896C";this.clog(e,r,a,o,i,n)}warn(e,r,n){const i=new Date,a="WARN",o="#DDA52D";this.clog(e,r,a,o,i,n)}error(e,r,n){const i=new Date,a="ERROR",o="#AB3B3A";this.clog(e,r,a,o,i,n)}fatal(e,r,n){const i=new Date,a="FATAL",o="#E16B8C";this.clog(e,r,a,o,i,n)}}var xX=yX;const _X=vn(xX),Ae=new _X,bX={common:{yes:"OK",no:"Cancel"},menu:{options:{title:"OPTIONS",pages:{system:{title:"System",options:{autoSpeed:{title:"Autoplay Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},language:{title:"Language"},resetData:{title:"Clear or Reset Data",options:{clearGameSave:"Clear game saving",resetSettings:"Reset settings",clearAll:"Clear all data"},dialogs:{clearGameSave:"Are you sure you want to clear game saving",resetSettings:"Are you sure you want to reset all settings",clearAll:"Are you sure you want to clear all data"}},gameSave:{title:"Import or Export Game Saving and Options",options:{export:"Export game saving and options",import:"Import game saving and options"},dialogs:{import:{title:"Are you sure you want to import game saving and options",tip:"Import game saving",error:"Parse game saving failed"}}},about:{title:"About WebGAL",subTitle:"WebGAL: An Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Display",options:{fullScreen:{title:"Full Screen",options:{on:"ON",off:"OFF"}},textSpeed:{title:"Text Speed",options:{slow:"Slow",medium:"Medium",fast:"Fast"}},textSize:{title:"Text Size",options:{small:"Small",medium:"Medium",large:"Large"}},textFont:{title:"Text Font",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Preview Text Showing",text:"You are previewing the text's font, size and playback speed, now. You can adjust the above options according to your perception."}}},sound:{title:"Sound",options:{volumeMain:{title:"Main Volume"},vocalVolume:{title:"Vocal Volume"},bgmVolume:{title:"BGM Volume"},seVolume:{title:"Sound Effects Volume"},uiSeVolume:{title:"UI Sound Effects Volume"}}}}},saving:{title:"SAVE",isOverwrite:"Are you sure you want to overwrite this save?"},loadSaving:{title:"LOAD"},title:{title:"TITLE"},exit:{title:"BACK"}},title:{start:{title:"START",subtitle:""},continue:{title:"CONTINUE",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"LOAD",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"No saving",buttons:{hide:"Hide",show:"Show",backlog:"Backlog",replay:"Replay",auto:"Auto",forward:"Forward",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Save",load:"Load",options:"Options",title:"Title",titleTips:"Confirm return to the title screen"}},extra:{title:"EXTRA"},r18:{title:"Welcome!",desction:"Please verify that you are 18 years of age or older to enter this site.",agree:"Agree",disagree:"Disagree"}},SX={common:{yes:"はい",no:"いいえ"},menu:{options:{title:"CONFIG",pages:{system:{title:"システム",options:{autoSpeed:{title:"自動再生速度",options:{slow:"遅く",medium:"標準",fast:"速く"}},language:{title:"言語"},resetData:{title:"データの削除またに復元",options:{clearGameSave:"すべてのアーカイブを削除",resetSettings:"デフォルト設置を復元",clearAll:"すべてのデータを削除"},dialogs:{clearGameSave:"アーカイブをクリアしてもよろしいですか？",resetSettings:"デフォルト設定を復元してもよろしいですか？",clearAll:"すべてのデータを削除してもよろしいですか？"}},gameSave:{title:"アーカイブとオプションのインポートまたはエクスポート",options:{export:"アーカイブとオプションのエクスポート",import:"アーカイブとオプションのインポート"},dialogs:{import:{title:"アーカイブとオプションをインポートしますか？",tip:"インポートアーカイブ",error:"アーカイブの解析に失败しました"}}},about:{title:"WebGALについて",subTitle:"WebGAL：開源のウェブ基盤視覚小説エンジン",version:"版数",source:"源コード保管所",contributors:"貢献者",website:"ウェブサイト"}}},display:{title:"ウィンドウ",options:{textSpeed:{title:"テキスト表示速度",options:{slow:"遅く",medium:"標準",fast:"速く"}},textSize:{title:"テキストサイズ",options:{small:"小",medium:"中",large:"大"}},textFont:{title:"フォント",options:{siYuanSimSun:"源ノ明朝",SimHei:"黒体",lxgw:"霞鴎文隷"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"テキスト表示プレビュー",text:"プレビューはテキストボックスのテキストサイズとテキスト表示速度です。上記のオプションでフォントも変更できます。"}}},sound:{title:"サウンド",options:{volumeMain:{title:"MAIN 音量"},vocalVolume:{title:"VOICE 音量"},bgmVolume:{title:"BGM 音量"},seVolume:{title:"SE 音量"},uiSeVolume:{title:"UI 効果音音量"}}}}},saving:{title:"SAVE",isOverwrite:"上書きしますか？"},loadSaving:{title:"LOAD"},title:{title:"HOME"},exit:{title:"BACK"}},title:{start:{title:"初めから",subtitle:"START"},continue:{title:"続きから",subtitle:"CONTINUE"},options:{title:"設定",subtitle:"CONFIG"},load:{title:"ロード",subtitle:"LOAD"},extra:{title:"鑑賞モード",subtitle:"EXTRA"}},gaming:{noSaving:"クイックセーブなし",buttons:{hide:"CLOSE",show:"SHOW",backlog:"LOG",replay:"REPLAY",auto:"AUTO",forward:"SKIP",quicklySave:"QUICK SAVE",quicklyLoad:"QUICK LOAD",save:"SAVE",load:"LOAD",options:"CONFIG",title:"HOME",titleTips:"タイトル画面に戻ることを確認しますか"}},extra:{title:"鑑賞モード"}},EX={common:{yes:"是",no:"否"},menu:{options:{title:"选项",pages:{system:{title:"系统",options:{autoSpeed:{title:"自动播放速度",options:{slow:"慢",medium:"中",fast:"快"}},language:{title:"语言"},resetData:{title:"清除或还原数据",options:{clearGameSave:"清除所有存档",resetSettings:"还原默认设置",clearAll:"清除所有数据"},dialogs:{clearGameSave:"确定要清除存档吗",resetSettings:"确定要还原默认设置吗",clearAll:"确定要清除所有数据吗"}},gameSave:{title:"导入或导出存档与选项",options:{export:"导出存档与选项",import:"导入存档与选项"},dialogs:{import:{title:"确定要导入存档与选项吗",tip:"导入存档",error:"存档解析失败"}}},about:{title:"关于 WebGAL",subTitle:"WebGAL：开源的网页端视觉小说引擎",version:"版本号",source:"源代码仓库",contributors:"贡献者",website:"网站"}}},display:{title:"显示",options:{fullScreen:{title:"全屏模式",options:{on:"开启",off:"关闭"}},textSpeed:{title:"文字显示速度",options:{slow:"慢",medium:"中",fast:"快"}},textSize:{title:"文本大小",options:{small:"小",medium:"中",large:"大"}},textFont:{title:"文本字体",options:{siYuanSimSun:"思源宋体",SimHei:"黑体",lxgw:"霞鹜文楷"}},textboxOpacity:{title:"文本框不透明度"},textPreview:{title:"文本显示预览",text:"现在预览的是文本框字体大小和播放速度的情况，您可以根据您的观感调整上面的选项。"}}},sound:{title:"音频",options:{volumeMain:{title:"主音量"},vocalVolume:{title:"语音音量"},bgmVolume:{title:"背景音乐音量"},seVolume:{title:"音效音量"},uiSeVolume:{title:"用户界面音效音量"},voiceOption:{title:"是否中断语音"},voiceStop:{title:"停止语音"},voiceContinue:{title:"继续语音"}}}}},saving:{title:"存档",isOverwrite:"是否覆盖存档？"},extra:{title:"鉴赏模式"},loadSaving:{title:"读档"},title:{title:"标题",options:{load:"",extra:"鉴赏模式"}},exit:{title:"返回"}},title:{start:{title:"开始游戏",subtitle:"START"},continue:{title:"继续游戏",subtitle:"CONTINUE"},options:{title:"游戏选项",subtitle:"OPTIONS"},load:{title:"读取存档",subtitle:"LOAD"},extra:{title:"鉴赏模式",subtitle:"EXTRA"},storyLine:{title:"故事线",subtitle:"STORYLINE"},achievement:{title:"成就",subtitle:"ACHIEVEMENT"},beautyGuide:{title:"美女图鉴",subtitle:"BEAUTYGUIDE"}},gaming:{noSaving:"暂无存档",buttons:{hide:"隐藏",show:"显示",backlog:"回想",replay:"重播",auto:"自动",forward:"快进",quicklySave:"快速存档",quicklyLoad:"快速读档",save:"存档",load:"读档",options:"选项",title:"标题",titleTips:"确认返回到标题界面吗",collection:"收藏",collected:"已收藏"}},extra:{title:"鉴赏模式"},r18:{title:"欢迎",desction:"请确认您已年满 18 周岁才能进入本网站。",agree:"同意",disagree:"不同意"}},wX={common:{yes:"OK",no:"Annuler"},menu:{options:{title:"OPTIONS",pages:{system:{title:"Système",options:{autoSpeed:{title:"Vitesse de lecture automatique",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},language:{title:"Langue"},resetData:{title:"Effacer ou réinitialiser les données",options:{clearGameSave:"Effacer la sauvegarde du jeu",resetSettings:"Réinitialiser les paramètres",clearAll:"Tout effacer"},dialogs:{clearGameSave:"Êtes-vous sûr de vouloir effacer la sauvegarde du jeu",resetSettings:"Êtes-vous sûr de vouloir réinitialiser tous les paramètres",clearAll:"Êtes-vous sûr de vouloir tout effacer"}},gameSave:{title:"Importer ou exporter la sauvegarde du jeu et les options",options:{export:"Exporter la sauvegarde du jeu et les options",import:"Importer la sauvegarde du jeu et les options"},dialogs:{import:{title:"Êtes-vous sûr de vouloir importer la sauvegarde du jeu et les options",tip:"Importer la sauvegarde du jeu",error:"Impossible d'analyser la sauvegarde du jeu"}}},about:{title:"À propos de WebGAL",subTitle:"WebGAL: Un moteur de visual novel basé sur le web en open-source",version:"Version",source:"Dépôt de code source",contributors:"Contributeurs",website:"Site web"}}},display:{title:"Affichage",options:{textSpeed:{title:"Vitesse d'affichage du texte",options:{slow:"Lente",medium:"Moyenne",fast:"Rapide"}},textSize:{title:"Taille du texte",options:{small:"Petite",medium:"Moyenne",large:"Grande"}},textFont:{title:"Police du texte",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Aperçu de l'affichage du texte",text:"Vous prévisualisez la police, la taille et la vitesse de lecture du texte, maintenant. Vous pouvez ajuster les options ci-dessus selon votre perception."}}},sound:{title:"Son",options:{volumeMain:{title:"Volume principal"},vocalVolume:{title:"Volume des voix"},bgmVolume:{title:"Volume de la musique de fond"},seVolume:{title:"Volume des effets sonores"},uiSeVolume:{title:"Volume de l’interface utilisateur"}}}}},saving:{title:"SAUVEGARDER",isOverwrite:"Êtes-vous sûr de vouloir écraser cette sauvegarde ?"},loadSaving:{title:"CHARGER"},title:{title:"TITRE"},exit:{title:"RETOUR"}},title:{start:{title:"COMMENCER",subtitle:""},continue:{title:"CONTINUER",subtitle:""},options:{title:"OPTIONS",subtitle:""},load:{title:"CHARGER",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Aucune sauvegarde",buttons:{hide:"Masquer",show:"Afficher",backlog:"Journal",replay:"Rejouer",auto:"Automatique",forward:"Avancer",quicklySave:"Sauvegarde rapide",quicklyLoad:"Chargement rapide",save:"Sauvegarder",load:"Charger",options:"Options",title:"Titre",titleTips:"Confirmer le retour à l'écran titre"}},extra:{title:"EXTRA"}},AX={common:{yes:"Ja",no:"Nein"},menu:{options:{title:"OPTIONEN",pages:{system:{title:"System",options:{autoSpeed:{title:"Auto-Geschwindigkeit",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},language:{title:"Sprache"},resetData:{title:"Daten löschen oder zurücksetzen",options:{clearGameSave:"Alle Spielstände löschen",resetSettings:"Alle Einstellungen zurücksetzen",clearAll:"Alle Daten löschen"},dialogs:{clearGameSave:"Sind Sie sicher, dass Sie den Spielstand löschen möchten?",resetSettings:"Sind Sie sicher, dass Sie alle Einstellungen zurücksetzen möchten?",clearAll:"Sind Sie sicher, dass Sie alle Daten löschen möchten?"}},gameSave:{title:"Spielstand und Optionen importieren oder exportieren",options:{export:"Spielstand und Optionen exportieren",import:"Spielstand und Optionen importieren"},dialogs:{import:{title:"Sind Sie sicher, dass Sie den Spielstand und die Optionen importieren möchten?",tip:"Spielstand importieren",error:"Ein Fehler ist beim Analysieren des Spielstands aufgetreten"}}},about:{title:"Über WebGAL",subTitle:"WebGAL: Eine Open-Source Web-Based Visual Novel Engine",version:"Version",source:"Source Code Repository",contributors:"Contributors",website:"Website"}}},display:{title:"Darstellung",options:{textSpeed:{title:"Geschwindigkeit der Textanzeige",options:{slow:"Langsam",medium:"Normal",fast:"Schnell"}},textSize:{title:"Textgröße",options:{small:"Klein",medium:"Normal",large:"Groß"}},textFont:{title:"Schriftart",options:{siYuanSimSun:"Source Han Serif",SimHei:"Sans",lxgw:"LXGW WenKai"}},textboxOpacity:{title:"Textbox Opacity"},textPreview:{title:"Vorschautext wird angezeigt",text:"Sie können jederzeit die Schriftart, Größe und Wiedergabegeschwindigkeit des Textes nach Ihrer Vorliebe anpassen."}}},sound:{title:"Ton",options:{volumeMain:{title:"Hauptlautstärke"},vocalVolume:{title:"Stimmlautstärke"},bgmVolume:{title:"Musiklautstärke"},seVolume:{title:"Soundeffektlautstärke"},uiSeVolume:{title:"UI Soundeffektlautstärke"}}}}},saving:{title:"SPEICHERN",isOverwrite:"Sind Sie sicher, dass Sie diesen Spielstand überschreiben möchten?"},loadSaving:{title:"LADEN"},title:{title:"TITEL"},exit:{title:"ZURÜCK"}},title:{start:{title:"STARTEN",subtitle:""},continue:{title:"WEITERLESEN",subtitle:""},options:{title:"OPTIONEN",subtitle:""},load:{title:"LADEN",subtitle:""},extra:{title:"EXTRA",subtitle:""}},gaming:{noSaving:"Keine Speicherung",buttons:{hide:"Verstecken",show:"Anzeigen",backlog:"Verlauf",replay:"Wiedergabe",auto:"Auto",forward:"Überspringen",quicklySave:"Quickly Save",quicklyLoad:"Quickly Load",save:"Speichern",load:"Laden",options:"Optionen",title:"Titel"}},extra:{title:"EXTRA"}},CX={common:{yes:"是",no:"否"},menu:{options:{title:"選項",pages:{system:{title:"系統",options:{autoSpeed:{title:"自動播放速度",options:{slow:"慢",medium:"中",fast:"快"}},language:{title:"語言"},resetData:{title:"清除或還原數據",options:{clearGameSave:"清除所有存檔",resetSettings:"還原默認設定",clearAll:"清除所有數據"},dialogs:{clearGameSave:"確定要清除存檔嗎",resetSettings:"確定要還原默認設定嗎",clearAll:"確定要清除所有數據嗎"}},gameSave:{title:"導入或導出存檔與選項",options:{export:"導出存檔與選項",import:"導入存檔與選項"},dialogs:{import:{title:"確定要導入存檔與選項嗎",tip:"導入存檔",error:"存檔解析失敗"}}},about:{title:"關於 WebGAL",subTitle:"WebGAL：開源的線上視覺小說製作引擎",version:"版本號",source:"源代碼倉庫",contributors:"貢獻者",website:"網站"}}},display:{title:"顯示",options:{textSpeed:{title:"文字顯示速度",options:{slow:"慢",medium:"中",fast:"快"}},textSize:{title:"文字大小",options:{small:"小",medium:"中",large:"大"}},textFont:{title:"文字字體",options:{siYuanSimSun:"霞鹜文楷",SimHei:"黑體"}},textboxOpacity:{title:"文本框不透明度"},textPreview:{title:"文字顯示預覽",text:"現在預覽的是文字框字體大小和播放速度的情況，您可以根據您的觀感調整上面的選項。"}}},sound:{title:"音量",options:{volumeMain:{title:"主音量"},vocalVolume:{title:"語音音量"},bgmVolume:{title:"背景音樂音量"},seVolume:{title:"音效音量"},uiSeVolume:{title:"用戶界面音效音量"}}}}},saving:{title:"存檔",isOverwrite:"是否要覆蓋存檔?"},loadSaving:{title:"讀檔"},title:{title:"標題",options:{load:"",extra:"CG模式"}},exit:{title:"返回"}},title:{start:{title:"開始遊戲",subtitle:"START"},continue:{title:"繼續遊戲",subtitle:"CONTINUE"},options:{title:"遊戲選項",subtitle:"OPTIONS"},load:{title:"讀取存檔",subtitle:"LOAD"},extra:{title:"CG模式",subtitle:"EXTRA"}},gaming:{noSaving:"暫無存檔",buttons:{hide:"隱藏",show:"顯示",backlog:"回想",replay:"重播",auto:"自動",forward:"加速",quicklySave:"快速存檔",quicklyLoad:"快速讀檔",save:"存檔",load:"讀檔",options:"選項",title:"標題",titleTips:"確認返回到標題界面嗎"}},extra:{title:"CG模式"}};var pu=(t=>(t[t.zhCn=0]="zhCn",t[t.en=1]="en",t[t.jp=2]="jp",t[t.fr=3]="fr",t[t.de=4]="de",t[t.zhTw=5]="zhTw",t))(pu||{});const Q2={zhCn:"中文",en:"English",jp:"日本語",fr:"Français",de:"Deutsch",zhTw:"繁體中文"},TX={en:{translation:bX},zhCn:{translation:EX},jp:{translation:SX},fr:{translation:wX},de:{translation:AX},zhTw:{translation:CX}},PX=0;var Ma=(t=>(t[t.slow=0]="slow",t[t.normal=1]="normal",t[t.fast=2]="fast",t))(Ma||{}),yo=(t=>(t[t.small=0]="small",t[t.medium=1]="medium",t[t.large=2]="large",t))(yo||{}),fs=(t=>(t[t.song=0]="song",t[t.hei=1]="hei",t[t.lxgw=2]="lxgw",t))(fs||{}),SS=(t=>(t[t.yes=0]="yes",t[t.no=1]="no",t))(SS||{}),ia=(t=>(t[t.on=0]="on",t[t.off=1]="off",t))(ia||{});const fD={slPage:1,volumeMain:100,textSpeed:Ma.normal,autoSpeed:Ma.normal,textSize:yo.medium,vocalVolume:100,bgmVolume:25,seVolume:100,uiSeVolume:50,textboxFont:fs.song,textboxOpacity:75,language:pu.zhCn,voiceInterruption:SS.yes,fullScreen:ia.off},Mx={optionData:fD,globalGameVar:{},appreciationData:{bgm:[],cg:[]}},hD=t0({name:"userData",initialState:Zt(Mx),reducers:{setUserData:(t,e)=>{const{key:r,value:n}=e.payload;t[r]=n},unlockCgInUserData:(t,e)=>{const{name:r,url:n,series:i}=e.payload;let a=!1;t.appreciationData.cg.forEach(o=>{n===o.url&&(a=!0,o.url=n,o.series=i)}),a||t.appreciationData.cg.push(e.payload)},unlockBgmInUserData:(t,e)=>{const{name:r,url:n,series:i}=e.payload;let a=!1;t.appreciationData.bgm.forEach(o=>{n===o.url&&(a=!0,o.url=n,o.series=i)}),a||t.appreciationData.bgm.push(e.payload)},resetUserData:(t,e)=>{Object.assign(t,e.payload)},setOptionData:(t,e)=>{const{key:r,value:n}=e.payload;t.optionData[r]=n},setGlobalVar:(t,e)=>{t.globalGameVar[e.payload.key]=e.payload.value},setSlPage:(t,e)=>{t.optionData.slPage=e.payload},resetOptionSet(t){Object.assign(t.optionData,fD)},resetAllData(t){Object.assign(t,Zt(Mx))}}}),{setUserData:ECe,resetUserData:ES,setOptionData:Qa,setGlobalVar:OX,setSlPage:wS,unlockCgInUserData:dD,unlockBgmInUserData:pD,resetOptionSet:wCe,resetAllData:ACe}=hD.actions,RX=hD.reducer,vD={backlog_size:200,fast_timeout:50},IX={textInitialDelay:80};class FX{constructor(e){Re(this,"isSaveBacklogNext",!1);Re(this,"backlog",[]);Re(this,"sceneManager");this.sceneManager=e}getBacklog(){return this.backlog}editLastBacklogItemEffect(e){this.backlog[this.backlog.length-1].currentStageState.effects=e}makeBacklogEmpty(){this.backlog.splice(0,this.backlog.length)}insertBacklogItem(e){this.backlog.push(e)}saveCurrentStateToBacklog(){const e=J.getState().stage,r=Zt(e);r.PerformList.forEach(i=>{i.script.args.forEach(a=>{a.key==="concat"&&(a.value=!1,i.script.content=r.showText)})});const n={currentStageState:r,saveScene:{currentSentenceId:this.sceneManager.sceneData.currentSentenceId,sceneStack:Zt(this.sceneManager.sceneData.sceneStack),sceneName:this.sceneManager.sceneData.currentScene.sceneName,sceneUrl:this.sceneManager.sceneData.currentScene.sceneUrl}};for(this.getBacklog().push(n);this.getBacklog().length>vD.backlog_size;)this.getBacklog().shift()}}var dr=(t=>(t[t.background=0]="background",t[t.bgm=1]="bgm",t[t.figure=2]="figure",t[t.scene=3]="scene",t[t.tex=4]="tex",t[t.vocal=5]="vocal",t[t.video=6]="video",t[t.ui=7]="ui",t))(dr||{});const pr=(t,e)=>{if(t.match("http://")||t.match("https://"))return t;{let r;switch(e){case 0:r=`./game/background/${t}`;break;case 3:r=`./game/scene/${t}`;break;case 5:r=`./game/vocal/${t}`;break;case 2:r=`./game/figure/${t}`;break;case 1:r=`./game/bgm/${t}`;break;case 6:r=`./game/video/${t}`;break;case 7:r=`./game/ui/${t}`;break;default:r="";break}return r}},kX=(t,e)=>{(!j.sceneManager.sceneAssetsList[e]||!Object.values(j.sceneManager.sceneAssetsList[e]).length)&&(j.sceneManager.sceneAssetsList[e]=t.reduce((r,n)=>(r[n.url]="",r),{}));for(const r of t){const n=j.sceneManager.sceneAssetsList[e];n[r.url]==="success"||n[r.url]==="loading"?(Xu(e),Ae.warn("该资源已在预加载列表中，无需重复加载")):(console.log("预加载资源：",r.url),r.url.endsWith(".mp4")||r.url.endsWith(".flv")?(n[r.url]="success",Xu(e),j.videoManager.preloadVideo(r.url)):(n[r.url]="loading",DX(r.url,3,1e3,()=>{n[r.url]="success",Xu(e)},()=>{n[r.url]="error",Xu(e);const i=j.sceneManager.settledAssets.findIndex(a=>a===r.url);i>-1&&j.sceneManager.settledAssets.splice(i,1)}),j.sceneManager.settledAssets.push(r.url)))}t.length===0&&Xu(e)},Xu=t=>{const e=j.sceneManager.sceneAssetsList[t];Object.values(e).every(r=>r==="error"||r==="success"),j.sceneManager.sceneAssetsLoadedList[t]=Object.values(e).every(r=>r==="success")},DX=(t,e,r,n,i)=>{const a=(o,s)=>{const c=()=>{n()},l=()=>{o>0?(console.log(`重试加载资源：${t}，剩余次数：${o}，延迟时间：${s}ms`),setTimeout(()=>{a(o-1,s*2)},s)):i()};if(window.isSafari)fetch(t).then(u=>{if(u.status>=400)throw new Error("Error!");c()}).catch(l);else{const u=document.createElement("link");u.setAttribute("rel","prefetch"),u.setAttribute("href",t);const f=document.getElementsByTagName("head");f.length&&f[0].appendChild(u),u.onload=c,u.onerror=l}};a(e,r)};var Oe;(function(t){t[t.say=0]="say",t[t.changeBg=1]="changeBg",t[t.changeFigure=2]="changeFigure",t[t.bgm=3]="bgm",t[t.video=4]="video",t[t.pixi=5]="pixi",t[t.pixiInit=6]="pixiInit",t[t.intro=7]="intro",t[t.miniAvatar=8]="miniAvatar",t[t.changeScene=9]="changeScene",t[t.choose=10]="choose",t[t.end=11]="end",t[t.setComplexAnimation=12]="setComplexAnimation",t[t.setFilter=13]="setFilter",t[t.label=14]="label",t[t.jumpLabel=15]="jumpLabel",t[t.chooseLabel=16]="chooseLabel",t[t.setVar=17]="setVar",t[t.if=18]="if",t[t.callScene=19]="callScene",t[t.showVars=20]="showVars",t[t.unlockCg=21]="unlockCg",t[t.unlockBgm=22]="unlockBgm",t[t.filmMode=23]="filmMode",t[t.setTextbox=24]="setTextbox",t[t.setAnimation=25]="setAnimation",t[t.playEffect=26]="playEffect",t[t.setTempAnimation=27]="setTempAnimation",t[t.comment=28]="comment",t[t.setTransform=29]="setTransform",t[t.setTransition=30]="setTransition",t[t.getUserInput=31]="getUserInput",t[t.applyStyle=32]="applyStyle",t[t.unlockAchieve=33]="unlockAchieve",t[t.unlockStoryline=34]="unlockStoryline",t[t.showValue=35]="showValue"})(Oe||(Oe={}));Oe.intro,Oe.changeBg,Oe.changeFigure,Oe.miniAvatar,Oe.changeScene,Oe.choose,Oe.end,Oe.bgm,Oe.video,Oe.setComplexAnimation,Oe.setFilter,Oe.pixiInit,Oe.pixi,Oe.label,Oe.jumpLabel,Oe.setVar,Oe.callScene,Oe.showVars,Oe.unlockCg,Oe.unlockBgm,Oe.say,Oe.filmMode,Oe.callScene,Oe.setTextbox,Oe.setAnimation,Oe.playEffect,Oe.applyStyle,Oe.unlockAchieve,Oe.unlockStoryline,Oe.showValue;Oe.bgm,Oe.pixi,Oe.pixiInit,Oe.label,Oe.if,Oe.miniAvatar,Oe.setVar,Oe.unlockBgm,Oe.unlockCg,Oe.filmMode,Oe.playEffect,Oe.showValue;var br;(function(t){t[t.background=0]="background",t[t.bgm=1]="bgm",t[t.figure=2]="figure",t[t.scene=3]="scene",t[t.tex=4]="tex",t[t.vocal=5]="vocal",t[t.video=6]="video"})(br||(br={}));function mD(t,e){const r=[];let i=t.replace(/ /g," ").split(" -");return i=i.filter(a=>a!==""),i.forEach(a=>{const o=a.indexOf("=");let s=a.slice(0,o),c=a.slice(o+1);o<0&&(s=a,c=void 0),s.toLowerCase().match(/.ogg|.mp3|.wav/)?r.push({key:"vocal",value:e(a,br.vocal)}):c===void 0?r.push({key:s,value:!0}):c==="true"||c==="false"?r.push({key:s,value:c==="true"}):isNaN(Number(c))?r.push({key:s,value:c}):r.push({key:s,value:Number(c)})}),r}function MX(t){const e=[];let r,n=t.split(";")[0];if(n==="")return{command:"",args:[],options:[]};const i=/:/.exec(n);i===null?r="":(r=n.substring(0,i.index),n=n.substring(i.index+1,n.length));const a=/ -/.exec(n);if(a){const o=n.substring(a.index,n.length);n=n.substring(0,a.index);for(const s of mD(o,(c,l)=>c))e.push(s)}return{command:r,args:n.split("|").map(o=>o.trim()).filter(o=>o!==""),options:e}}function LX(t){return t.replaceAll("\r","").split(`
`).map(r=>MX(r)).filter(r=>r.command!=="")}const J2=(t,e,r)=>{let n={type:Oe.say,additionalArgs:[]};const i=BX(t,e,r);return n.type=i,i===Oe.say&&t!=="say"&&n.additionalArgs.push({key:"speaker",value:t}),n=NX(n,i,e),n};function BX(t,e,r){var n;return((n=r.get(t))==null?void 0:n.scriptType)??Oe.say}function NX(t,e,r){return r.includes(e)&&t.additionalArgs.push({key:"next",value:!0}),t}const jX=(t,e,r)=>{if(t==="none"||t==="")return"";switch(e){case Oe.playEffect:return r(t,br.vocal);case Oe.changeBg:return r(t,br.background);case Oe.changeFigure:return r(t,br.figure);case Oe.bgm:return r(t,br.bgm);case Oe.callScene:return r(t,br.scene);case Oe.changeScene:return r(t,br.scene);case Oe.miniAvatar:return r(t,br.figure);case Oe.video:return r(t,br.video);case Oe.choose:return UX(t,r);case Oe.unlockBgm:return r(t,br.bgm);case Oe.unlockCg:return r(t,br.background);default:return t}};function UX(t,e){const r=t.split("|"),n=[],i=[];for(const s of r)n.push(s.split(":")[0]??""),i.push(s.split(":")[1]??"");const a=i.map(s=>s.match(/\./)?e(s,br.scene):s);let o="";for(let s=0;s<n.length;s++)s!==0&&(o=o+"|"),o=o+`${n[s]}:${a[s]}`;return o}const $X=(t,e,r)=>{const n=[];return t===Oe.say&&r.forEach(i=>{i.key==="vocal"&&n.push({name:i.value,url:i.value,lineNumber:0,type:br.vocal})}),e==="none"||e===""||(t===Oe.changeBg&&n.push({name:e,url:e,lineNumber:0,type:br.background}),t===Oe.changeFigure&&n.push({name:e,url:e,lineNumber:0,type:br.figure}),t===Oe.miniAvatar&&n.push({name:e,url:e,lineNumber:0,type:br.figure}),t===Oe.video&&n.push({name:e,url:e,lineNumber:0,type:br.video}),t===Oe.bgm&&n.push({name:e,url:e,lineNumber:0,type:br.bgm})),n},VX=(t,e)=>{const r=[];return(t===Oe.changeScene||t===Oe.callScene)&&r.push(e),(t===Oe.choose||t===Oe.video)&&e.split("|").map(a=>a.split(":")[1]??"").forEach(a=>{a.match(/\./)&&r.push(a)}),r},GX=(t,e,r,n)=>{let i,a,o;const s=[];let c,l,u,f=t.split(";")[0];if(f==="")return{command:Oe.comment,commandRaw:"comment",content:t.split(";")[1]??"",args:[{key:"next",value:!0}],sentenceAssets:[],subScene:[]};const h=/:/.exec(f);if(h===null){u=f,l=J2(u,r,n),i=l.type;for(const p of l.additionalArgs)i===Oe.say&&p.key==="speaker"||s.push(p)}else{u=f.substring(0,h.index),f=f.substring(h.index+1,f.length),l=J2(u,r,n),i=l.type;for(const p of l.additionalArgs)s.push(p)}const d=/ -/.exec(f);if(d){const p=f.substring(d.index,t.length);f=f.substring(0,d.index);for(const v of mD(p,e))s.push(v)}return a=jX(f,i,e),c=$X(i,a,s),o=VX(i,a),{command:i,commandRaw:u,content:a,args:s,sentenceAssets:c,subScene:o}};var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zX=typeof xh=="object"&&xh&&xh.Object===Object&&xh,WX=zX,XX=WX,HX=typeof self=="object"&&self&&self.Object===Object&&self,YX=XX||HX||Function("return this")(),p0=YX,qX=p0,KX=qX.Symbol,gD=KX,eT=gD,yD=Object.prototype,ZX=yD.hasOwnProperty,QX=yD.toString,Hu=eT?eT.toStringTag:void 0;function JX(t){var e=ZX.call(t,Hu),r=t[Hu];try{t[Hu]=void 0;var n=!0}catch{}var i=QX.call(t);return n&&(e?t[Hu]=r:delete t[Hu]),i}var eH=JX,tH=Object.prototype,rH=tH.toString;function nH(t){return rH.call(t)}var iH=nH,tT=gD,aH=eH,oH=iH,sH="[object Null]",lH="[object Undefined]",rT=tT?tT.toStringTag:void 0;function uH(t){return t==null?t===void 0?lH:sH:rT&&rT in Object(t)?aH(t):oH(t)}var cH=uH;function fH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var xD=fH,hH=cH,dH=xD,pH="[object AsyncFunction]",vH="[object Function]",mH="[object GeneratorFunction]",gH="[object Proxy]";function yH(t){if(!dH(t))return!1;var e=hH(t);return e==vH||e==mH||e==pH||e==gH}var xH=yH,_H=p0,bH=_H["__core-js_shared__"],SH=bH,Om=SH,nT=function(){var t=/[^.]+$/.exec(Om&&Om.keys&&Om.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function EH(t){return!!nT&&nT in t}var wH=EH,AH=Function.prototype,CH=AH.toString;function TH(t){if(t!=null){try{return CH.call(t)}catch{}try{return t+""}catch{}}return""}var PH=TH,OH=xH,RH=wH,IH=xD,FH=PH,kH=/[\\^$.*+?()[\]{}|]/g,DH=/^\[object .+?Constructor\]$/,MH=Function.prototype,LH=Object.prototype,BH=MH.toString,NH=LH.hasOwnProperty,jH=RegExp("^"+BH.call(NH).replace(kH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function UH(t){if(!IH(t)||RH(t))return!1;var e=OH(t)?jH:DH;return e.test(FH(t))}var $H=UH;function VH(t,e){return t==null?void 0:t[e]}var GH=VH,zH=$H,WH=GH;function XH(t,e){var r=WH(t,e);return zH(r)?r:void 0}var AS=XH,HH=AS,YH=HH(Object,"create"),v0=YH,iT=v0;function qH(){this.__data__=iT?iT(null):{},this.size=0}var KH=qH;function ZH(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var QH=ZH,JH=v0,eY="__lodash_hash_undefined__",tY=Object.prototype,rY=tY.hasOwnProperty;function nY(t){var e=this.__data__;if(JH){var r=e[t];return r===eY?void 0:r}return rY.call(e,t)?e[t]:void 0}var iY=nY,aY=v0,oY=Object.prototype,sY=oY.hasOwnProperty;function lY(t){var e=this.__data__;return aY?e[t]!==void 0:sY.call(e,t)}var uY=lY,cY=v0,fY="__lodash_hash_undefined__";function hY(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=cY&&e===void 0?fY:e,this}var dY=hY,pY=KH,vY=QH,mY=iY,gY=uY,yY=dY;function vu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}vu.prototype.clear=pY;vu.prototype.delete=vY;vu.prototype.get=mY;vu.prototype.has=gY;vu.prototype.set=yY;var xY=vu;function _Y(){this.__data__=[],this.size=0}var bY=_Y;function SY(t,e){return t===e||t!==t&&e!==e}var EY=SY,wY=EY;function AY(t,e){for(var r=t.length;r--;)if(wY(t[r][0],e))return r;return-1}var m0=AY,CY=m0,TY=Array.prototype,PY=TY.splice;function OY(t){var e=this.__data__,r=CY(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():PY.call(e,r,1),--this.size,!0}var RY=OY,IY=m0;function FY(t){var e=this.__data__,r=IY(e,t);return r<0?void 0:e[r][1]}var kY=FY,DY=m0;function MY(t){return DY(this.__data__,t)>-1}var LY=MY,BY=m0;function NY(t,e){var r=this.__data__,n=BY(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var jY=NY,UY=bY,$Y=RY,VY=kY,GY=LY,zY=jY;function mu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}mu.prototype.clear=UY;mu.prototype.delete=$Y;mu.prototype.get=VY;mu.prototype.has=GY;mu.prototype.set=zY;var WY=mu,XY=AS,HY=p0,YY=XY(HY,"Map"),qY=YY,aT=xY,KY=WY,ZY=qY;function QY(){this.size=0,this.__data__={hash:new aT,map:new(ZY||KY),string:new aT}}var JY=QY;function eq(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var tq=eq,rq=tq;function nq(t,e){var r=t.__data__;return rq(e)?r[typeof e=="string"?"string":"hash"]:r.map}var g0=nq,iq=g0;function aq(t){var e=iq(this,t).delete(t);return this.size-=e?1:0,e}var oq=aq,sq=g0;function lq(t){return sq(this,t).get(t)}var uq=lq,cq=g0;function fq(t){return cq(this,t).has(t)}var hq=fq,dq=g0;function pq(t,e){var r=dq(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var vq=pq,mq=JY,gq=oq,yq=uq,xq=hq,_q=vq;function gu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}gu.prototype.clear=mq;gu.prototype.delete=gq;gu.prototype.get=yq;gu.prototype.has=xq;gu.prototype.set=_q;var bq=gu,Sq="__lodash_hash_undefined__";function Eq(t){return this.__data__.set(t,Sq),this}var wq=Eq;function Aq(t){return this.__data__.has(t)}var Cq=Aq,Tq=bq,Pq=wq,Oq=Cq;function sp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Tq;++e<r;)this.add(t[e])}sp.prototype.add=sp.prototype.push=Pq;sp.prototype.has=Oq;var Rq=sp;function Iq(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var Fq=Iq;function kq(t){return t!==t}var Dq=kq;function Mq(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Lq=Mq,Bq=Fq,Nq=Dq,jq=Lq;function Uq(t,e,r){return e===e?jq(t,e,r):Bq(t,Nq,r)}var $q=Uq,Vq=$q;function Gq(t,e){var r=t==null?0:t.length;return!!r&&Vq(t,e,0)>-1}var zq=Gq;function Wq(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Xq=Wq;function Hq(t,e){return t.has(e)}var Yq=Hq,qq=AS,Kq=p0,Zq=qq(Kq,"Set"),Qq=Zq;function Jq(){}var eK=Jq;function tK(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var _D=tK,Rm=Qq,rK=eK,nK=_D,iK=1/0,aK=Rm&&1/nK(new Rm([,-0]))[1]==iK?function(t){return new Rm(t)}:rK,oK=aK,sK=Rq,lK=zq,uK=Xq,cK=Yq,fK=oK,hK=_D,dK=200;function pK(t,e,r){var n=-1,i=lK,a=t.length,o=!0,s=[],c=s;if(r)o=!1,i=uK;else if(a>=dK){var l=e?null:fK(t);if(l)return hK(l);o=!1,i=cK,c=new sK}else c=e?[]:s;e:for(;++n<a;){var u=t[n],f=e?e(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),s.push(u)}else i(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}var vK=pK,mK=vK;function gK(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?mK(t,void 0,e):[]}var yK=gK;const xK=(t,e,r,n,i,a,o)=>{const c=t.split(`
`);let l=[],u=[];const f=c.map(h=>{const d=GX(h,i,a,o);return l=[...l,...d.sentenceAssets],u=[...u,...d.subScene],d});return l=yK(l),n(l,e),{sceneName:e,sceneUrl:r,sentenceList:f,assetsList:l,subSceneList:u}};function _K(t){const[e,r]=bK(t);return{classNameStyles:e,others:r}}function bK(t){const e={};let r="",n;const i=/\.([^{\s]+)\s*{((?:[^{}]*|{[^}]*})*)}/g,a=/(@[^{]+{\s*(?:[^{}]*{[^}]*}[^{}]*)+\s*})/g;for(;(n=i.exec(t))!==null;){const o=n[1],s=n[2].trim().replace(/\s*;\s*/g,`;
`);e[o]=s}for(;(n=a.exec(t))!==null;)r+=n[1].trim()+`
`;return[e,r.trim()]}class SK{constructor(e,r,n,i){Re(this,"assetsPrefetcher");Re(this,"assetSetter");Re(this,"ADD_NEXT_ARG_LIST");Re(this,"SCRIPT_CONFIG_MAP");this.assetsPrefetcher=e,this.assetSetter=r,this.ADD_NEXT_ARG_LIST=n,Array.isArray(i)?(this.SCRIPT_CONFIG_MAP=new Map,i.forEach(a=>{this.SCRIPT_CONFIG_MAP.set(a.scriptString,a)})):this.SCRIPT_CONFIG_MAP=i}parse(e,r,n){return xK(e,r,n,this.assetsPrefetcher,this.assetSetter,this.ADD_NEXT_ARG_LIST,this.SCRIPT_CONFIG_MAP)}parseConfig(e){return LX(e)}stringifyConfig(e){return e.reduce((r,n)=>r+`${n.command}:${n.args.join("|")}${n.options.length<=0?"":n.options.reduce((i,a)=>i+" -"+a.key+"="+a.value,"")};
`,"")}parseScssToWebgalStyleObj(e){return _K(e)}}function ot(t,e){const n=t.args.find(i=>i.key===e);return n?n.value:null}const EK=t=>{let e=t.content,r="",n="default";t.args.forEach(o=>{o.key==="unlockname"&&(r=o.value.toString()),o.key==="series"&&(n=o.value.toString())});const i=ot(t,"enter"),a=ot(t,"volume");return r!==""&&J.dispatch(pD({name:r,url:e,series:n})),uE(e,typeof i=="number"&&i>=0?i:0,typeof a=="number"&&a>=0&&a<=100?a:100),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};var CS={exports:{}},bD=function(e,r){return function(){return e.apply(r,arguments)}},wK=bD,TS=Object.prototype.toString,PS=function(t){return function(e){var r=TS.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Lo(t){return t=t.toLowerCase(),function(r){return PS(r)===t}}function y0(t){return Array.isArray(t)}function Lx(t){return typeof t>"u"}function AK(t){return t!==null&&!Lx(t)&&t.constructor!==null&&!Lx(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var SD=Lo("ArrayBuffer");function CK(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&SD(t.buffer),e}function TK(t){return typeof t=="string"}function ED(t){return typeof t=="number"}function wD(t){return t!==null&&typeof t=="object"}function vd(t){if(PS(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function PK(t){return t&&Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}var OK=Lo("Date"),RK=Lo("File"),IK=Lo("Blob"),FK=Lo("FileList");function OS(t){return TS.call(t)==="[object Function]"}function kK(t){return wD(t)&&OS(t.pipe)}function DK(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||TS.call(t)===e||OS(t.toString)&&t.toString()===e)}var MK=Lo("URLSearchParams");function LK(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function BK(){var t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"}function RS(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),y0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Bx(){var t={};function e(i,a){vd(t[a])&&vd(i)?t[a]=Bx(t[a],i):vd(i)?t[a]=Bx({},i):y0(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)RS(arguments[r],e);return t}function NK(t,e,r){return RS(e,function(i,a){r&&typeof i=="function"?t[a]=wK(i,r):t[a]=i}),t}function jK(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function UK(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function $K(t,e,r,n){var i,a,o,s={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!n||n(o,t,e))&&!s[o]&&(e[o]=t[o],s[o]=!0);t=r!==!1&&Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function VK(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function GK(t){if(!t)return null;if(y0(t))return t;var e=t.length;if(!ED(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var zK=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));function WK(t,e){for(var r=t&&t[Symbol.iterator],n=r.call(t),i;(i=n.next())&&!i.done;){var a=i.value;e.call(t,a[0],a[1])}}function XK(t,e){for(var r,n=[];(r=t.exec(e))!==null;)n.push(r);return n}var HK=Lo("HTMLFormElement"),YK=function(e){return function(r,n){return e.call(r,n)}}(Object.prototype.hasOwnProperty),Mr={isArray:y0,isArrayBuffer:SD,isBuffer:AK,isFormData:DK,isArrayBufferView:CK,isString:TK,isNumber:ED,isObject:wD,isPlainObject:vd,isEmptyObject:PK,isUndefined:Lx,isDate:OK,isFile:RK,isBlob:IK,isFunction:OS,isStream:kK,isURLSearchParams:MK,isStandardBrowserEnv:BK,forEach:RS,merge:Bx,extend:NK,trim:LK,stripBOM:jK,inherits:UK,toFlatObject:$K,kindOf:PS,kindOfTest:Lo,endsWith:VK,toArray:GK,isTypedArray:zK,isFileList:FK,forEachEntry:WK,matchAll:XK,isHTMLForm:HK,hasOwnProperty:YK},AD=Mr;function $l(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}AD.inherits($l,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var CD=$l.prototype,TD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(t){TD[t]={value:t}});Object.defineProperties($l,TD);Object.defineProperty(CD,"isAxiosError",{value:!0});$l.from=function(t,e,r,n,i,a){var o=Object.create(CD);return AD.toFlatObject(t,o,function(c){return c!==Error.prototype}),$l.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};var Ms=$l,qK=typeof self=="object"?self.FormData:window.FormData,KK=qK,kt=Mr,ZK=Ms,QK=KK;function Nx(t){return kt.isPlainObject(t)||kt.isArray(t)}function PD(t){return kt.endsWith(t,"[]")?t.slice(0,-2):t}function oT(t,e,r){return t?t.concat(e).map(function(i,a){return i=PD(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function JK(t){return kt.isArray(t)&&!t.some(Nx)}var eZ=kt.toFlatObject(kt,{},null,function(e){return/^is[A-Z]/.test(e)});function tZ(t){return t&&kt.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function rZ(t,e,r){if(!kt.isObject(t))throw new TypeError("target must be an object");e=e||new(QK||FormData),r=kt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!kt.isUndefined(y[v])});var n=r.metaTokens,i=r.visitor||u,a=r.dots,o=r.indexes,s=r.Blob||typeof Blob<"u"&&Blob,c=s&&tZ(e);if(!kt.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(kt.isDate(p))return p.toISOString();if(!c&&kt.isBlob(p))throw new ZK("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(p)||kt.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,v,y){var g=p;if(p&&!y&&typeof p=="object"){if(kt.endsWith(v,"{}"))v=n?v:v.slice(0,-2),p=JSON.stringify(p);else if(kt.isArray(p)&&JK(p)||kt.isFileList(p)||kt.endsWith(v,"[]")&&(g=kt.toArray(p)))return v=PD(v),g.forEach(function(x,b){!kt.isUndefined(x)&&e.append(o===!0?oT([v],b,a):o===null?v:v+"[]",l(x))}),!1}return Nx(p)?!0:(e.append(oT(y,v,a),l(p)),!1)}var f=[],h=Object.assign(eZ,{defaultVisitor:u,convertValue:l,isVisitable:Nx});function d(p,v){if(!kt.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(p),kt.forEach(p,function(g,m){var x=!kt.isUndefined(g)&&i.call(e,g,kt.isString(m)?m.trim():m,v,h);x===!0&&d(g,v?v.concat(m):[m])}),f.pop()}}if(!kt.isObject(t))throw new TypeError("data must be an object");return d(t),e}var x0=rZ,nZ=x0;function sT(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(n){return e[n]})}function OD(t,e){this._pairs=[],t&&nZ(t,this,e)}var RD=OD.prototype;RD.append=function(e,r){this._pairs.push([e,r])};RD.toString=function(e){var r=e?function(n){return e.call(this,n,sT)}:sT;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};var ID=OD,iZ=Mr,aZ=ID;function oZ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var FD=function(e,r,n){if(!r)return e;var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i));var a=n&&n.encode||oZ,o=iZ.isURLSearchParams(r)?r.toString():new aZ(r,n).toString(a);return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e},sZ=Mr;function Wf(){this.handlers=[]}Wf.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Wf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Wf.prototype.clear=function(){this.handlers&&(this.handlers=[])};Wf.prototype.forEach=function(e){sZ.forEach(this.handlers,function(n){n!==null&&e(n)})};var lZ=Wf,uZ=Mr,kD=function(e,r){uZ.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},DD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cZ=ID,fZ=typeof URLSearchParams<"u"?URLSearchParams:cZ,hZ=FormData,dZ={isBrowser:!0,classes:{URLSearchParams:fZ,FormData:hZ,Blob},protocols:["http","https","file","blob","url","data"]},IS=dZ,pZ=Mr,vZ=x0,lT=IS,mZ=function(e,r){return vZ(e,new lT.classes.URLSearchParams,Object.assign({visitor:function(n,i,a,o){return lT.isNode&&pZ.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},r))},Wa=Mr;function gZ(t){return Wa.matchAll(/\w+|\[(\w*)]/g,t).map(function(e){return e[0]==="[]"?"":e[1]||e[0]})}function yZ(t){var e={},r=Object.keys(t),n,i=r.length,a;for(n=0;n<i;n++)a=r[n],e[a]=t[a];return e}function xZ(t){function e(n,i,a,o){var s=n[o++],c=Number.isFinite(+s),l=o>=n.length;if(s=!s&&Wa.isArray(a)?a.length:s,l)return Wa.hasOwnProperty(a,s)?a[s]=[a[s],i]:a[s]=i,!c;(!a[s]||!Wa.isObject(a[s]))&&(a[s]=[]);var u=e(n,i,a[s],o);return u&&Wa.isArray(a[s])&&(a[s]=yZ(a[s])),!c}if(Wa.isFormData(t)&&Wa.isFunction(t.entries)){var r={};return Wa.forEachEntry(t,function(n,i){e(gZ(n),i,r,0)}),r}return null}var MD=xZ,Im,uT;function _Z(){if(uT)return Im;uT=1;var t=Ms;return Im=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Im}var Fm,cT;function bZ(){if(cT)return Fm;cT=1;var t=Mr;return Fm=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(s)&&l.push("domain="+s),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Fm}var SZ=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},EZ=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},wZ=SZ,AZ=EZ,LD=function(e,r){return e&&!wZ(r)?AZ(e,r):r},km,fT;function CZ(){if(fT)return km;fT=1;var t=Mr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return km=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(l){if(s=l.indexOf(":"),a=t.trim(l.slice(0,s)).toLowerCase(),o=t.trim(l.slice(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},km}var Dm,hT;function TZ(){if(hT)return Dm;hT=1;var t=Mr;return Dm=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=t.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Dm}var Mm,dT;function _0(){if(dT)return Mm;dT=1;var t=Ms,e=Mr;function r(n,i,a){t.call(this,n??"canceled",t.ERR_CANCELED,i,a),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),Mm=r,Mm}var Lm,pT;function PZ(){return pT||(pT=1,Lm=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),Lm}var Bm,vT;function mT(){if(vT)return Bm;vT=1;var t=Mr,e=_Z(),r=bZ(),n=FD,i=LD,a=CZ(),o=TZ(),s=DD,c=Ms,l=_0(),u=PZ(),f=IS;return Bm=function(d){return new Promise(function(v,y){var g=d.data,m=d.headers,x=d.responseType,b=d.withXSRFToken,_;function S(){d.cancelToken&&d.cancelToken.unsubscribe(_),d.signal&&d.signal.removeEventListener("abort",_)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete m["Content-Type"];var E=new XMLHttpRequest;if(d.auth){var w=d.auth.username||"",C=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";m.Authorization="Basic "+btoa(w+":"+C)}var A=i(d.baseURL,d.url);E.open(d.method.toUpperCase(),n(A,d.params,d.paramsSerializer),!0),E.timeout=d.timeout;function P(){if(E){var R="getAllResponseHeaders"in E?a(E.getAllResponseHeaders()):null,F=!x||x==="text"||x==="json"?E.responseText:E.response,D={data:F,status:E.status,statusText:E.statusText,headers:R,config:d,request:E};e(function(Y){v(Y),S()},function(Y){y(Y),S()},D),E=null}}if("onloadend"in E?E.onloadend=P:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(P)},E.onabort=function(){E&&(y(new c("Request aborted",c.ECONNABORTED,d,E)),E=null)},E.onerror=function(){y(new c("Network Error",c.ERR_NETWORK,d,E)),E=null},E.ontimeout=function(){var F=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",D=d.transitional||s;d.timeoutErrorMessage&&(F=d.timeoutErrorMessage),y(new c(F,D.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,d,E)),E=null},t.isStandardBrowserEnv()&&(b&&t.isFunction(b)&&(b=b(d)),b||b!==!1&&o(A))){var T=d.xsrfHeaderName&&d.xsrfCookieName&&r.read(d.xsrfCookieName);T&&(m[d.xsrfHeaderName]=T)}"setRequestHeader"in E&&t.forEach(m,function(F,D){typeof g>"u"&&D.toLowerCase()==="content-type"?delete m[D]:E.setRequestHeader(D,F)}),t.isUndefined(d.withCredentials)||(E.withCredentials=!!d.withCredentials),x&&x!=="json"&&(E.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&E.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(_=function(R){E&&(y(!R||R.type?new l(null,d,req):R),E.abort(),E=null)},d.cancelToken&&d.cancelToken.subscribe(_),d.signal&&(d.signal.aborted?_():d.signal.addEventListener("abort",_))),!g&&g!==!1&&g!==0&&g!==""&&(g=null);var O=u(A);if(O&&f.protocols.indexOf(O)===-1){y(new c("Unsupported protocol "+O+":",c.ERR_BAD_REQUEST,d));return}E.send(g)})},Bm}var Tr=Mr,gT=kD,yT=Ms,OZ=DD,RZ=x0,IZ=mZ,xT=IS,FZ=MD,kZ={"Content-Type":"application/x-www-form-urlencoded"};function _T(t,e){!Tr.isUndefined(t)&&Tr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function DZ(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=mT()),t}function MZ(t,e,r){if(Tr.isString(t))try{return(e||JSON.parse)(t),Tr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var b0={transitional:OZ,adapter:DZ(),transformRequest:[function(e,r){gT(r,"Accept"),gT(r,"Content-Type");var n=r&&r["Content-Type"]||"",i=n.indexOf("application/json")>-1,a=Tr.isObject(e);a&&Tr.isHTMLForm(e)&&(e=new FormData(e));var o=Tr.isFormData(e);if(o)return i?JSON.stringify(FZ(e)):e;if(Tr.isArrayBuffer(e)||Tr.isBuffer(e)||Tr.isStream(e)||Tr.isFile(e)||Tr.isBlob(e))return e;if(Tr.isArrayBufferView(e))return e.buffer;if(Tr.isURLSearchParams(e))return _T(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var s;if(a){if(n.indexOf("application/x-www-form-urlencoded")!==-1)return IZ(e,this.formSerializer).toString();if((s=Tr.isFileList(e))||n.indexOf("multipart/form-data")>-1){var c=this.env&&this.env.FormData;return RZ(s?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(_T(r,"application/json"),MZ(e)):e}],transformResponse:[function(e){var r=this.transitional||b0.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&Tr.isString(e)&&(n&&!this.responseType||i)){var a=r&&r.silentJSONParsing,o=!a&&i;try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?yT.from(s,yT.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xT.classes.FormData,Blob:xT.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tr.forEach(["delete","get","head"],function(e){b0.headers[e]={}});Tr.forEach(["post","put","patch"],function(e){b0.headers[e]=Tr.merge(kZ)});var FS=b0,LZ=Mr,BZ=FS,NZ=function(e,r,n,i){var a=this||BZ;return LZ.forEach(i,function(s){e=s.call(a,e,r,n)}),e},Nm,bT;function BD(){return bT||(bT=1,Nm=function(e){return!!(e&&e.__CANCEL__)}),Nm}var ST=Mr,jm=NZ,jZ=BD(),UZ=FS,$Z=_0(),ET=kD;function Um(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $Z}var VZ=function(e){Um(e),e.headers=e.headers||{},e.data=jm.call(e,e.data,e.headers,null,e.transformRequest),ET(e.headers,"Accept"),ET(e.headers,"Content-Type"),e.headers=ST.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ST.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||UZ.adapter;return r(e).then(function(i){return Um(e),i.data=jm.call(e,i.data,i.headers,i.status,e.transformResponse),i},function(i){return jZ(i)||(Um(e),i&&i.response&&(i.response.data=jm.call(e,i.response.data,i.response.headers,i.response.status,e.transformResponse))),Promise.reject(i)})},gn=Mr,ND=function(e,r){r=r||{};var n={};function i(u,f){return gn.isPlainObject(u)&&gn.isPlainObject(f)?gn.merge(u,f):gn.isEmptyObject(f)?gn.merge({},u):gn.isPlainObject(f)?gn.merge({},f):gn.isArray(f)?f.slice():f}function a(u){if(gn.isUndefined(r[u])){if(!gn.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function o(u){if(!gn.isUndefined(r[u]))return i(void 0,r[u])}function s(u){if(gn.isUndefined(r[u])){if(!gn.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return gn.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=l[f]||a,d=h(f);gn.isUndefined(d)&&h!==c||(n[f]=d)}),n},$m,wT;function jD(){return wT||(wT=1,$m={version:"0.28.0"}),$m}var GZ=jD().version,Ya=Ms,kS={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){kS[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var AT={};kS.transitional=function(e,r,n){function i(a,o){return"[Axios v"+GZ+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Ya(i(o," has been removed"+(r?" in "+r:"")),Ya.ERR_DEPRECATED);return r&&!AT[o]&&(AT[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function zZ(t,e,r){if(typeof t!="object")throw new Ya("options must be an object",Ya.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],c=s===void 0||o(s,a,t);if(c!==!0)throw new Ya("option "+a+" must be "+c,Ya.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ya("Unknown option "+a,Ya.ERR_BAD_OPTION)}}var WZ={assertOptions:zZ,validators:kS},DS=Mr,XZ=FD,CT=lZ,TT=VZ,S0=ND,HZ=LD,UD=WZ,Ys=UD.validators;function Vl(t){this.defaults=t,this.interceptors={request:new CT,response:new CT}}Vl.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=S0(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&UD.assertOptions(n,{silentJSONParsing:Ys.transitional(Ys.boolean),forcedJSONParsing:Ys.transitional(Ys.boolean),clarifyTimeoutError:Ys.transitional(Ys.boolean)},!1);var i=r.paramsSerializer;DS.isFunction(i)&&(r.paramsSerializer={serialize:i});var a=[],o=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(o=o&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});var s=[];this.interceptors.response.forEach(function(p){s.push(p.fulfilled,p.rejected)});var c;if(!o){var l=[TT,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(s),c=Promise.resolve(r);l.length;)c=c.then(l.shift(),l.shift());return c}for(var u=r;a.length;){var f=a.shift(),h=a.shift();try{u=f(u)}catch(d){h(d);break}}try{c=TT(u)}catch(d){return Promise.reject(d)}for(;s.length;)c=c.then(s.shift(),s.shift());return c};Vl.prototype.getUri=function(e){e=S0(this.defaults,e);var r=HZ(e.baseURL,e.url);return XZ(r,e.params,e.paramsSerializer)};DS.forEach(["delete","get","head","options"],function(e){Vl.prototype[e]=function(r,n){return this.request(S0(n||{},{method:e,url:r,data:(n||{}).data}))}});DS.forEach(["post","put","patch"],function(e){function r(n){return function(a,o,s){return this.request(S0(s||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Vl.prototype[e]=r(),Vl.prototype[e+"Form"]=r(!0)});var YZ=Vl,Vm,PT;function qZ(){if(PT)return Vm;PT=1;var t=_0();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){for(var o=i._listeners.length;o-- >0;)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o,s,c){i.reason||(i.reason=new t(o,s,c),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Vm=e,Vm}var Gm,OT;function KZ(){return OT||(OT=1,Gm=function(e){return function(n){return e.apply(null,n)}}),Gm}var zm,RT;function ZZ(){if(RT)return zm;RT=1;var t=Mr;return zm=function(r){return t.isObject(r)&&r.isAxiosError===!0},zm}var jx=Mr,QZ=bD,md=YZ,JZ=ND,eQ=FS,tQ=MD;function $D(t){var e=new md(t),r=QZ(md.prototype.request,e);return jx.extend(r,md.prototype,e),jx.extend(r,e),r.create=function(i){return $D(JZ(t,i))},r}var Cn=$D(eQ);Cn.Axios=md;Cn.CanceledError=_0();Cn.CancelToken=qZ();Cn.isCancel=BD();Cn.VERSION=jD().version;Cn.toFormData=x0;Cn.AxiosError=Ms;Cn.Cancel=Cn.CanceledError;Cn.all=function(e){return Promise.all(e)};Cn.spread=KZ();Cn.isAxiosError=ZZ();Cn.formToJSON=function(t){return tQ(jx.isHTMLForm(t)?new FormData(t):t)};CS.exports=Cn;CS.exports.default=Cn;var rQ=CS.exports,nQ=rQ;const Jc=vn(nQ),Jn=t=>new Promise(e=>{Jc.get(t).then(r=>{const n=r.data.toString();e(n)})}),iQ={performName:"",duration:100,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0},E0=t=>{var n;let e=iQ;e=(((n=d3[t.command])==null?void 0:n.scriptFunction)??p3.say.scriptFunction)(t),e.arrangePerformPromise?e.arrangePerformPromise.then(i=>j.gameplay.performController.arrangeNewPerform(i,t)):j.gameplay.performController.arrangeNewPerform(e,t)},aQ=t=>{Jn(t.sceneUrl).then(async e=>{await j.sceneManager.setCurrentScene(e,t.sceneName,t.sceneUrl,!0)&&(j.sceneManager.sceneData.currentSentenceId=t.continueLine+1,Ae.debug("现在恢复场景，恢复后场景：",j.sceneManager.sceneData.currentScene),gr())})};var MS={},ef={document:{}},VD=Object.prototype.hasOwnProperty,GD=function(t){return w0(t)?t.toLowerCase():t},Oc=Array.isArray,oQ=function(t){return w0(t)?t.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)}):t};"I".toLowerCase()!=="i"&&(GD=oQ);var sQ,LS=Object.prototype.toString,zD=Object.getPrototypeOf,Wm=qD("ng");ef.angular||(ef.angular={});ef.document.documentMode;function lQ(t){if(t==null||jS(t))return!1;if(Oc(t)||w0(t)||sQ)return!0;var e="length"in Object(t)&&t.length;return NS(e)&&(e>=0&&(e-1 in t||t instanceof Array)||typeof t.item=="function")}function qt(t,e,r){var n,i;if(t)if(HD(t))for(n in t)n!=="prototype"&&n!=="length"&&n!=="name"&&t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else if(Oc(t)||lQ(t)){var a=typeof t!="object";for(n=0,i=t.length;n<i;n++)(a||n in t)&&e.call(r,t[n],n,t)}else if(t.forEach&&t.forEach!==qt)t.forEach(e,r,t);else if(XD(t))for(n in t)e.call(r,t[n],n,t);else if(typeof t.hasOwnProperty=="function")for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else for(n in t)VD.call(t,n)&&e.call(r,t[n],n,t);return t}function uQ(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function BS(){}BS.$inject=[];function cQ(t){return typeof t>"u"}function dl(t){return typeof t<"u"}function WD(t){return t!==null&&typeof t=="object"}function XD(t){return t!==null&&typeof t=="object"&&!zD(t)}function w0(t){return typeof t=="string"}function NS(t){return typeof t=="number"}function HD(t){return typeof t=="function"}function jS(t){return t&&t.window===t}function YD(t){return t&&t.$evalAsync&&t.$watch}var fQ=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function hQ(t){return t&&NS(t.length)&&fQ.test(LS.call(t))}function dQ(t){return LS.call(t)==="[object ArrayBuffer]"}function pQ(t,e){var r=[],n=[];if(e){if(hQ(e)||dQ(e))throw Wm("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw Wm("cpi","Can't copy! Source and destination are identical.");return Oc(e)?e.length=0:qt(e,function(s,c){c!=="$$hashKey"&&delete e[c]}),r.push(t),n.push(e),i(t,e)}return a(t);function i(s,c){var l=c.$$hashKey,u;if(Oc(s))for(var f=0,h=s.length;f<h;f++)c.push(a(s[f]));else if(XD(s))for(u in s)c[u]=a(s[u]);else if(s&&typeof s.hasOwnProperty=="function")for(u in s)s.hasOwnProperty(u)&&(c[u]=a(s[u]));else for(u in s)VD.call(s,u)&&(c[u]=a(s[u]));return uQ(c,l),c}function a(s){if(!WD(s))return s;var c=r.indexOf(s);if(c!==-1)return n[c];if(jS(s)||YD(s))throw Wm("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var l=!1,u=o(s);return u===void 0&&(u=Oc(s)?[]:Object.create(zD(s)),l=!0),r.push(s),n.push(u),l?i(s,u):u}function o(s){switch(LS.call(s)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new s.constructor(a(s.buffer),s.byteOffset,s.length);case"[object ArrayBuffer]":if(!s.slice){var c=new ArrayBuffer(s.byteLength);return new Uint8Array(c).set(new Uint8Array(s)),c}return s.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new s.constructor(s.valueOf());case"[object RegExp]":var l=new RegExp(s.source,s.toString().match(/[^\/]*$/)[0]);return l.lastIndex=s.lastIndex,l;case"[object Blob]":return new s.constructor([s],{type:s.type})}if(HD(s.cloneNode))return s.cloneNode(!0)}}function vQ(t,e){var r=e;return typeof t=="string"&&t.charAt(0)==="$"&&t.charAt(1)==="$"?r=void 0:jS(e)?r="$WINDOW":e&&ef.document===e?r="$DOCUMENT":YD(e)&&(r="$SCOPE"),r}function mQ(t){if(!t.currentScript)return!0;var e=t.currentScript.getAttribute("src"),r=t.createElement("a");r.href=e;var n=r.protocol,i=t.location.protocol;return!((n==="resource:"||n==="chrome-extension:")&&i!==n)}mQ(ef.document);function gQ(){return Object.create(null)}function yQ(t){var e=[];return JSON.stringify(t,function(r,n){if(n=vQ(r,n),WD(n)){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}function IT(t){return typeof t=="function"?t.toString().replace(/ \{[\s\S]*$/,""):cQ(t)?"undefined":typeof t!="string"?yQ(t):t}function qD(t,e){return e=e||Error,function(){var r=2,n=arguments,i=n[0],a="["+(t?t+":":"")+i+"] ",o=n[1],s,c;for(a+=o.replace(/\{\d+\}/g,function(l){var u=+l.slice(1,-1),f=u+r;return f<n.length?IT(n[f]):l}),a+=`
http://errors.angularjs.org/"NG_VERSION_FULL"/`+(t?t+"/":"")+i,c=r,s="?";c<n.length;c++,s="&")a+=s+"p"+(c-r)+"="+encodeURIComponent(IT(n[c]));return new e(a)}}var pl=qD("$parse");({}).constructor.prototype.valueOf;function KD(t){return t+""}var gd=gQ();qt("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){gd[t]=!0});var xQ={n:`
`,f:"\f",r:"\r",t:"	",v:"\v","'":"'",'"':'"'},Ux=function(e){this.options=e};Ux.prototype={constructor:Ux,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if(e==='"'||e==="'")this.readString(e);else if(this.isNumber(e)||e==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var r=e+this.peek(),n=r+this.peek(2),i=gd[e],a=gd[r],o=gd[n];if(i||a||o){var s=o?n:a?r:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return e.indexOf(t)!==-1},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return"0"<=t&&t<="9"&&typeof t=="string"},isWhitespace:function(t){return t===" "||t==="\r"||t==="	"||t===`
`||t==="\v"||t===" "},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||t==="_"||t==="$"},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return t.length===1?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var r=t.charCodeAt(0),n=e.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?t+e:t},isExpOperator:function(t){return t==="-"||t==="+"||this.isNumber(t)},throwError:function(t,e,r){r=r||this.index;var n=dl(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,r)+"]":" "+r;throw pl("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var r=GD(this.text.charAt(this.index));if(r==="."||this.isNumber(r))t+=r;else{var n=this.peek();if(r==="e"&&this.isExpOperator(n))t+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&t.charAt(t.length-1)==="e")t+=r;else if(this.isExpOperator(r)&&(!n||!this.isNumber(n))&&t.charAt(t.length-1)==="e")this.throwError("Invalid exponent");else break}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var r="",n=t,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(n+=a,i){if(a==="u"){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,r+=String.fromCharCode(parseInt(o,16))}else{var s=xQ[a];r=r+(s||a)}i=!1}else if(a==="\\")i=!0;else if(a===t){this.index++,this.tokens.push({index:e,text:n,constant:!0,value:r});return}else r+=a;this.index++}this.throwError("Unterminated quote",e)}};var ve=function(e,r){this.lexer=e,this.options=r};ve.Program="Program";ve.ExpressionStatement="ExpressionStatement";ve.AssignmentExpression="AssignmentExpression";ve.ConditionalExpression="ConditionalExpression";ve.LogicalExpression="LogicalExpression";ve.BinaryExpression="BinaryExpression";ve.UnaryExpression="UnaryExpression";ve.CallExpression="CallExpression";ve.MemberExpression="MemberExpression";ve.Identifier="Identifier";ve.Literal="Literal";ve.ArrayExpression="ArrayExpression";ve.Property="Property";ve.ObjectExpression="ObjectExpression";ve.ThisExpression="ThisExpression";ve.LocalsExpression="LocalsExpression";ve.NGValueParameter="NGValueParameter";ve.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:ve.Program,body:t}},expressionStatement:function(){return{type:ve.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!JD(t))throw pl("lval","Trying to assign a value to a non l-value");t={type:ve.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t=this.logicalOR(),e,r;return this.expect("?")&&(e=this.expression(),this.consume(":"))?(r=this.expression(),{type:ve.ConditionalExpression,test:t,alternate:e,consequent:r}):t},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:ve.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:ve.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t=this.relational(),e;e=this.expect("==","!=","===","!==");)t={type:ve.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var t=this.additive(),e;e=this.expect("<",">","<=",">=");)t={type:ve.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var t=this.multiplicative(),e;e=this.expect("+","-");)t={type:ve.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var t=this.unary(),e;e=this.expect("*","/","%");)t={type:ve.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:ve.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=pQ(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:ve.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)e.text==="("?(t={type:ve.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):e.text==="["?(t={type:ve.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):e.text==="."?t={type:ve.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],r={type:ve.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return r},parseArguments:function(){var t=[];if(this.peekToken().text!==")")do t.push(this.filterChain());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:ve.Identifier,name:t.text}},constant:function(){return{type:ve.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:ve.ArrayExpression,elements:t}},object:function(){var t=[],e;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;e={type:ve.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:ve.ObjectExpression,properties:t}},throwError:function(t,e){throw pl("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(this.tokens.length===0)throw pl("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(this.tokens.length===0)throw pl("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,r,n){return this.peekAhead(0,t,e,r,n)},peekAhead:function(t,e,r,n,i){if(this.tokens.length>t){var a=this.tokens[t],o=a.text;if(o===e||o===r||o===n||o===i||!e&&!r&&!n&&!i)return a}return!1},expect:function(t,e,r,n){var i=this.peek(t,e,r,n);return i?(this.tokens.shift(),i):!1},selfReferential:{this:{type:ve.ThisExpression},$locals:{type:ve.LocalsExpression}}};function _Q(t,e){return typeof t<"u"?t:e}function ZD(t,e){return typeof t>"u"?e:typeof e>"u"?t:t+e}function bQ(t,e){var r=t(e);if(!r)throw new Error("Filter '"+e+"' is not defined");return!r.$stateful}function Nr(t,e){var r,n,i;switch(t.type){case ve.Program:r=!0,qt(t.body,function(a){Nr(a.expression,e),r=r&&a.expression.constant}),t.constant=r;break;case ve.Literal:t.constant=!0,t.toWatch=[];break;case ve.UnaryExpression:Nr(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case ve.BinaryExpression:Nr(t.left,e),Nr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case ve.LogicalExpression:Nr(t.left,e),Nr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case ve.ConditionalExpression:Nr(t.test,e),Nr(t.alternate,e),Nr(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case ve.Identifier:t.constant=!1,t.toWatch=[t];break;case ve.MemberExpression:Nr(t.object,e),t.computed&&Nr(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case ve.CallExpression:i=t.filter?bQ(e,t.callee.name):!1,r=i,n=[],qt(t.arguments,function(a){Nr(a,e),r=r&&a.constant,a.constant||n.push.apply(n,a.toWatch)}),t.constant=r,t.toWatch=i?n:[t];break;case ve.AssignmentExpression:Nr(t.left,e),Nr(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case ve.ArrayExpression:r=!0,n=[],qt(t.elements,function(a){Nr(a,e),r=r&&a.constant,a.constant||n.push.apply(n,a.toWatch)}),t.constant=r,t.toWatch=n;break;case ve.ObjectExpression:r=!0,n=[],qt(t.properties,function(a){Nr(a.value,e),r=r&&a.value.constant&&!a.computed,a.value.constant||n.push.apply(n,a.value.toWatch)}),t.constant=r,t.toWatch=n;break;case ve.ThisExpression:t.constant=!1,t.toWatch=[];break;case ve.LocalsExpression:t.constant=!1,t.toWatch=[];break}}function QD(t){if(t.length===1){var e=t[0].expression,r=e.toWatch;return r.length!==1||r[0]!==e?r:void 0}}function JD(t){return t.type===ve.Identifier||t.type===ve.MemberExpression}function eM(t){if(t.body.length===1&&JD(t.body[0].expression))return{type:ve.AssignmentExpression,left:t.body[0].expression,right:{type:ve.NGValueParameter},operator:"="}}function tM(t){return t.body.length===0||t.body.length===1&&(t.body[0].expression.type===ve.Literal||t.body[0].expression.type===ve.ArrayExpression||t.body[0].expression.type===ve.ObjectExpression)}function rM(t){return t.constant}function nM(t,e){this.astBuilder=t,this.$filter=e}nM.prototype={compile:function(t){var e=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Nr(r,e.$filter);var n="",i;if(this.stage="assign",i=eM(r)){this.state.computing="assign";var a=this.nextId();this.recurse(i,a),this.return_(a),n="fn.assign="+this.generateFunction("assign","s,v,l")}var o=QD(r.body);e.stage="inputs",qt(o,function(l,u){var f="fn"+u;e.state[f]={vars:[],body:[],own:{}},e.state.computing=f;var h=e.nextId();e.recurse(l,h),e.return_(h),e.state.inputs.push(f),l.watchId=u}),this.state.computing="fn",this.stage="main",this.recurse(r);var s='"'+this.USE+" "+this.STRICT+`";
`+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",c=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,KD,_Q,ZD);return this.state=this.stage=void 0,c.ast=r,c.literal=tM(r),c.constant=rM(r),c},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,r=this;return qt(e,function(n){t.push("var "+n+"="+r.generateFunction(n,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return qt(this.state.filters,function(r,n){t.push(r+"=$filter("+e.escape(n)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,n,i,a){var o,s,c=this,l,u,f;if(n=n||BS,!a&&dl(t.watchId)){e=e||this.nextId(),this.if_("i",this.lazyAssign(e,this.unsafeComputedMember("i",t.watchId)),this.lazyRecurse(t,e,r,n,i,!0));return}switch(t.type){case ve.Program:qt(t.body,function(d,p){c.recurse(d.expression,void 0,void 0,function(v){s=v}),p!==t.body.length-1?c.current().body.push(s,";"):c.return_(s)});break;case ve.Literal:u=this.escape(t.value),this.assign(e,u),n(e||u);break;case ve.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(d){s=d}),u=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,u),n(u);break;case ve.BinaryExpression:this.recurse(t.left,void 0,void 0,function(d){o=d}),this.recurse(t.right,void 0,void 0,function(d){s=d}),t.operator==="+"?u=this.plus(o,s):t.operator==="-"?u=this.ifDefined(o,0)+t.operator+this.ifDefined(s,0):u="("+o+")"+t.operator+"("+s+")",this.assign(e,u),n(u);break;case ve.LogicalExpression:e=e||this.nextId(),c.recurse(t.left,e),c.if_(t.operator==="&&"?e:c.not(e),c.lazyRecurse(t.right,e)),n(e);break;case ve.ConditionalExpression:e=e||this.nextId(),c.recurse(t.test,e),c.if_(e,c.lazyRecurse(t.alternate,e),c.lazyRecurse(t.consequent,e)),n(e);break;case ve.Identifier:e=e||this.nextId();var h=c.current().inAssignment;r&&(h?r.context=this.assign(this.nextId(),"s"):r.context=c.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),c.if_(c.stage==="inputs"||c.not(c.getHasOwnProperty("l",t.name)),function(){c.if_(c.stage==="inputs"||c.and_("s",c.or_(c.isNull(c.nonComputedMember("s",t.name)),c.hasOwnProperty_("s",t.name))),function(){i&&i!==1&&c.if_(c.isNull(c.nonComputedMember("s",t.name)),c.lazyAssign(c.nonComputedMember("s",t.name),"{}")),c.assign(e,c.nonComputedMember("s",t.name))})},e&&c.lazyAssign(e,c.nonComputedMember("l",t.name))),n(e);break;case ve.MemberExpression:o=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),c.recurse(t.object,o,void 0,function(){var d=null,p=c.current().inAssignment;t.computed?(s=c.nextId(),p||c.state.computing==="assign"?d=c.unsafeComputedMember(o,s):d=c.computedMember(o,s)):(p||c.state.computing==="assign"?d=c.unsafeNonComputedMember(o,t.property.name):d=c.nonComputedMember(o,t.property.name),s=t.property.name),t.computed&&t.property.type===ve.Literal&&c.recurse(t.property,s),c.if_(c.and_(c.notNull(o),c.or_(c.isNull(d),c.hasOwnProperty_(o,s,t.computed))),function(){t.computed?(t.property.type!==ve.Literal&&c.recurse(t.property,s),i&&i!==1&&c.if_(c.not(d),c.lazyAssign(d,"{}")),c.assign(e,d),r&&(r.computed=!0,r.name=s)):(i&&i!==1&&c.if_(c.isNull(d),c.lazyAssign(d,"{}")),c.assign(e,d),r&&(r.computed=!1,r.name=t.property.name))},function(){c.assign(e,"undefined")}),n(e)},!!i);break;case ve.CallExpression:e=e||this.nextId(),t.filter?(s=c.filter(t.callee.name),l=[],qt(t.arguments,function(d){var p=c.nextId();c.recurse(d,p),l.push(p)}),u=s+".call("+s+","+l.join(",")+")",c.assign(e,u),n(e)):(s=c.nextId(),o={},l=[],c.recurse(t.callee,s,o,function(){c.if_(c.notNull(s),function(){if(qt(t.arguments,function(p){c.recurse(p,t.constant?void 0:c.nextId(),void 0,function(v){l.push(v)})}),o.name){var d=c.member(o.context,o.name,o.computed);u="("+d+" === null ? null : "+c.unsafeMember(o.context,o.name,o.computed)+".call("+[o.context].concat(l).join(",")+"))"}else u=s+"("+l.join(",")+")";c.assign(e,u)},function(){c.assign(e,"undefined")}),n(e)}));break;case ve.AssignmentExpression:s=this.nextId(),o={},c.current().inAssignment=!0,this.recurse(t.left,void 0,o,function(){c.if_(c.and_(c.notNull(o.context),c.or_(c.hasOwnProperty_(o.context,o.name),c.isNull(c.member(o.context,o.name,o.computed)))),function(){c.recurse(t.right,s),u=c.member(o.context,o.name,o.computed)+t.operator+s,c.assign(e,u),n(e||u)}),c.current().inAssignment=!1,c.recurse(t.right,s),c.current().inAssignment=!0},1),c.current().inAssignment=!1;break;case ve.ArrayExpression:l=[],qt(t.elements,function(d){c.recurse(d,t.constant?void 0:c.nextId(),void 0,function(p){l.push(p)})}),u="["+l.join(",")+"]",this.assign(e,u),n(e||u);break;case ve.ObjectExpression:l=[],f=!1,qt(t.properties,function(d){d.computed&&(f=!0)}),f?(e=e||this.nextId(),this.assign(e,"{}"),qt(t.properties,function(d){d.computed?(o=c.nextId(),c.recurse(d.key,o)):o=d.key.type===ve.Identifier?d.key.name:""+d.key.value,s=c.nextId(),c.recurse(d.value,s),c.assign(c.unsafeMember(e,o,d.computed),s)})):(qt(t.properties,function(d){c.recurse(d.value,t.constant?void 0:c.nextId(),void 0,function(p){l.push(c.escape(d.key.type===ve.Identifier?d.key.name:""+d.key.value)+":"+p)})}),u="{"+l.join(",")+"}",this.assign(e,u)),n(e||u);break;case ve.ThisExpression:this.assign(e,"s"),n(e||"s");break;case ve.LocalsExpression:this.assign(e,"l"),n(e||"l");break;case ve.NGValueParameter:this.assign(e,"v"),n(e||"v");break}},getHasOwnProperty:function(t,e){var r=t+"."+e,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[r]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,r){if(t===!0)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},or_:function(t,e){return"("+t+") || ("+e+")"},hasOwnProperty_:function(t,e,r){return r?"(Object.prototype.hasOwnProperty.call("+t+","+e+"))":"(Object.prototype.hasOwnProperty.call("+t+",'"+e+"'))"},and_:function(t,e){return"("+t+") && ("+e+")"},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,n=/[^$_a-zA-Z0-9]/g,i="";return r.test(e)?i=t+"."+e:(e=e.replace(n,this.stringEscapeFn),i=t+'["'+e+'"]'),i},unsafeComputedMember:function(t,e){return t+"["+e+"]"},unsafeNonComputedMember:function(t,e){return this.nonComputedMember(t,e)},computedMember:function(t,e){return this.state.computing==="assign"?this.unsafeComputedMember(t,e):"("+t+".hasOwnProperty("+e+") ? "+t+"["+e+"] : null)"},unsafeMember:function(t,e,r){return r?this.unsafeComputedMember(t,e):this.unsafeNonComputedMember(t,e)},member:function(t,e,r){return r?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,r,n,i,a){var o=this;return function(){o.recurse(t,e,r,n,i,a)}},lazyAssign:function(t,e){var r=this;return function(){r.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(w0(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(NS(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(t===null)return"null";if(typeof t>"u")return"undefined";throw pl("esc","IMPOSSIBLE")},nextId:function(t,e){var r="v"+this.state.nextId++;return t||this.current().vars.push(r+(e?"="+e:"")),r},current:function(){return this.state[this.state.computing]}};function iM(t,e){this.astBuilder=t,this.$filter=e}iM.prototype={compile:function(t){var e=this,r=this.astBuilder.ast(t);Nr(r,e.$filter);var n,i;(n=eM(r))&&(i=this.recurse(n));var a=QD(r.body),o;a&&(o=[],qt(a,function(l,u){var f=e.recurse(l);l.input=f,o.push(f),l.watchId=u}));var s=[];qt(r.body,function(l){s.push(e.recurse(l.expression))});var c=r.body.length===0?BS:r.body.length===1?s[0]:function(l,u){var f;return qt(s,function(h){f=h(l,u)}),f};return i&&(c.assign=function(l,u,f){return i(l,f,u)}),o&&(c.inputs=o),c.ast=r,c.literal=tM(r),c.constant=rM(r),c},recurse:function(t,e,r){var n,i,a=this,o;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case ve.Literal:return this.value(t.value,e);case ve.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case ve.BinaryExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case ve.LogicalExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case ve.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case ve.Identifier:return a.identifier(t.name,e,r);case ve.MemberExpression:return n=this.recurse(t.object,!1,!!r),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(n,i,e,r):this.nonComputedMember(n,i,e,r);case ve.CallExpression:return o=[],qt(t.arguments,function(s){o.push(a.recurse(s))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(s,c,l,u){for(var f=[],h=0;h<o.length;++h)f.push(o[h](s,c,l,u));var d=i.apply(void 0,f,u);return e?{context:void 0,name:void 0,value:d}:d}:function(s,c,l,u){var f=i(s,c,l,u),h;if(f.value!=null){for(var d=[],p=0;p<o.length;++p)d.push(o[p](s,c,l,u));h=f.value.apply(f.context,d)}return e?{value:h}:h};case ve.AssignmentExpression:return n=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(s,c,l,u){var f=n(s,!1,l,u),h=i(s,c,l,u);return f.context[f.name]=h,e?{value:h}:h};case ve.ArrayExpression:return o=[],qt(t.elements,function(s){o.push(a.recurse(s))}),function(s,c,l,u){for(var f=[],h=0;h<o.length;++h)f.push(o[h](s,c,l,u));return e?{value:f}:f};case ve.ObjectExpression:return o=[],qt(t.properties,function(s){s.computed?o.push({key:a.recurse(s.key),computed:!0,value:a.recurse(s.value)}):o.push({key:s.key.type===ve.Identifier?s.key.name:""+s.key.value,computed:!1,value:a.recurse(s.value)})}),function(s,c,l,u){for(var f={},h=0;h<o.length;++h)o[h].computed?f[o[h].key(s,c,l,u)]=o[h].value(s,c,l,u):f[o[h].key]=o[h].value(s,c,l,u);return e?{value:f}:f};case ve.ThisExpression:return function(s){return e?{value:s}:s};case ve.LocalsExpression:return function(s,c){return e?{value:c}:c};case ve.NGValueParameter:return function(s,c,l){return e?{value:l}:l}}},"unary+":function(t,e){return function(r,n,i,a){var o=t(r,n,i,a);return dl(o)?o=+o:o=0,e?{value:o}:o}},"unary-":function(t,e){return function(r,n,i,a){var o=t(r,n,i,a);return dl(o)?o=-o:o=-0,e?{value:o}:o}},"unary!":function(t,e){return function(r,n,i,a){var o=!t(r,n,i,a);return e?{value:o}:o}},"binary+":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o),c=e(n,i,a,o),l=ZD(s,c);return r?{value:l}:l}},"binary-":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o),c=e(n,i,a,o),l=(dl(s)?s:0)-(dl(c)?c:0);return r?{value:l}:l}},"binary*":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)*e(n,i,a,o);return r?{value:s}:s}},"binary/":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)/e(n,i,a,o);return r?{value:s}:s}},"binary%":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)%e(n,i,a,o);return r?{value:s}:s}},"binary===":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)===e(n,i,a,o);return r?{value:s}:s}},"binary!==":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)!==e(n,i,a,o);return r?{value:s}:s}},"binary==":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)==e(n,i,a,o);return r?{value:s}:s}},"binary!=":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)!=e(n,i,a,o);return r?{value:s}:s}},"binary<":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)<e(n,i,a,o);return r?{value:s}:s}},"binary>":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)>e(n,i,a,o);return r?{value:s}:s}},"binary<=":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)<=e(n,i,a,o);return r?{value:s}:s}},"binary>=":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)>=e(n,i,a,o);return r?{value:s}:s}},"binary&&":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)&&e(n,i,a,o);return r?{value:s}:s}},"binary||":function(t,e,r){return function(n,i,a,o){var s=t(n,i,a,o)||e(n,i,a,o);return r?{value:s}:s}},"ternary?:":function(t,e,r,n){return function(i,a,o,s){var c=t(i,a,o,s)?e(i,a,o,s):r(i,a,o,s);return n?{value:c}:c}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,r){return function(n,i,a,o){var s=i&&t in i?i:n;r&&r!==1&&s&&s[t]==null&&(s[t]={});var c=s?s[t]:void 0;return e?{context:s,name:t,value:c}:c}},computedMember:function(t,e,r,n){return function(i,a,o,s){var c=t(i,a,o,s),l,u;return c!=null&&(l=e(i,a,o,s),l=KD(l),n&&n!==1&&c&&!c[l]&&(c[l]={}),Object.prototype.hasOwnProperty.call(c,l)&&(u=c[l])),r?{context:c,name:l,value:u}:u}},nonComputedMember:function(t,e,r,n){return function(i,a,o,s){var c=t(i,a,o,s);n&&n!==1&&c&&c[e]==null&&(c[e]={});var l=void 0;return c!=null&&Object.prototype.hasOwnProperty.call(c,e)&&(l=c[e]),r?{context:c,name:e,value:l}:l}},inputs:function(t,e){return function(r,n,i,a){return a?a[e]:t(r,n,i)}}};var $x=function(e,r,n){this.lexer=e,this.$filter=r,this.options=n,this.ast=new ve(e,n),this.astCompiler=n.csp?new iM(this.ast,r):new nM(this.ast,r)};$x.prototype={constructor:$x,parse:function(t){return this.astCompiler.compile(t)}};MS.Lexer=Ux;MS.Parser=$x;var aM=MS,SQ={},EQ=aM.Lexer,wQ=aM.Parser;function US(t,e){e=e||{};var r=e.filters||SQ,n=e.filters?e.cache||{}:US.cache,i=e,a;if(typeof t!="string")throw new TypeError("src must be a string, instead saw '"+typeof t+"'");var o={csp:e.csp!=null?e.csp:!1,literals:e.literals!=null?e.literals:{true:!0,false:!1,null:null,undefined:void 0}},s=new EQ(i),c=new wQ(s,function(u){return r[u]},o);return n?(a=n[t],a||(a=n[t]=c.parse(t)),a):c.parse(t)}US.cache=Object.create(null);var oM=US;const AQ=t=>{let e=!1,r=null,n=null;t.args.forEach(a=>{a.key==="global"?e=!0:a.key==="minValue"?r=a.value:a.key==="maxValue"&&(n=a.value)});let i;if(e?i=OX:i=Zk,t.content.match(/=/)){const a=t.content.split(/=/)[0],o=t.content.split(/=/)[1];if(o==="random()"){const s=Math.random();J.dispatch(i({key:a,value:s})),J.dispatch(Ws({key:a,value:s}))}else if(o.match(/[+\-*\/()]/)){const c=o.split(/([+\-*\/()])/g).map(f=>f.match(/[a-zA-Z]/)?$S(f).toString():f).reduce((f,h)=>f+h,"");let u=oM(c)();typeof u=="number"&&(typeof r=="number"&&u<r&&(u=r),typeof n=="number"&&u>n&&(u=n)),J.dispatch(i({key:a,value:u})),J.dispatch(Ws({key:a,value:u}))}else o.match(/true|false/)?(o.match(/true/)&&(J.dispatch(i({key:a,value:!0})),J.dispatch(Ws({key:a,value:!0}))),o.match(/false/)&&(J.dispatch(i({key:a,value:!1})),J.dispatch(Ws({key:a,value:!1})))):isNaN(Number(o))?(J.dispatch(i({key:a,value:o})),J.dispatch(Ws({key:a,value:o}))):(J.dispatch(i({key:a,value:Number(o)})),J.dispatch(Ws({key:a,value:Number(o)})));e?(Ae.debug("设置全局变量：",{key:a,value:J.getState().userData.globalGameVar[a]}),S3()):Ae.debug("设置变量：",{key:a,value:J.getState().stage.GameVar[a]})}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function $S(t){let e=0;return J.getState().stage.GameVar.hasOwnProperty(t)?e=J.getState().stage.GameVar[t]:J.getState().userData.globalGameVar.hasOwnProperty(t)&&(e=J.getState().userData.globalGameVar[t]),e}function CQ(t){return oM(t)()}const Vx=t=>{if(t===void 0)return!0;const e=t.split(/([+\-*\/()><!]|>=|<=|==|&&|\|\||!=)/g);if(e.every(n=>n.length)){const n=e.map(i=>i.match(/[a-zA-Z]/)?i.match(/true/)||i.match(/false/)?i:$S(i).toString():i).reduce((i,a)=>i+a,"");return!!CQ(n)}return!0},sM=()=>{const t=j.sceneManager.sceneData.currentScene.sceneName;if(j.sceneManager.sceneData.currentSentenceId>j.sceneManager.sceneData.currentScene.sentenceList.length-1&&t!=="storyline.txt"&&t!=="achieve.txt"){if(j.sceneManager.sceneData.sceneStack.length!==0){const u=j.sceneManager.sceneData.sceneStack.pop();u!==void 0&&aQ(u)}return}const e=j.sceneManager.sceneData.currentScene.sentenceList[j.sceneManager.sceneData.currentSentenceId],r=u=>{let f=u,h;if(window.isSafari){const d=f.match(/\{.*?\}/g);d?h=d.filter((p,v)=>{const y=f.indexOf(p,v?f.indexOf(d[v-1])+d[v-1].length:0);return y===0||f[y-1]!=="\\"}):h=null}else h=f.match(new RegExp("(?<!\\\\)\\{(.*?)\\}","g"));return h!==null&&h.forEach(d=>{const p=$S(window.isSafari?d.slice(1,-1):d.replace(new RegExp("(?<!\\\\)\\{(.*)\\}"),"$1"));f=f.replace(d,p?p.toString():d)}),f=f.replace(/\\{/g,"{").replace(/\\}/g,"}"),f};(()=>{e.content=r((e==null?void 0:e.content)??""),e.args.forEach(u=>{u.value&&typeof u.value=="string"&&(u.value=r(u.value))})})();let i=!0,a=!1,o="";if(e.args.forEach(u=>{u.key==="when"&&(a=!0,o=u.value.toString())}),a&&(i=Vx(o)),!i){Ae.warn("不满足条件，跳过本句！"),j.sceneManager.sceneData.currentSentenceId++,gr();return}E0(e);let s=!1;e.args.forEach(u=>{u.key==="next"&&u.value&&(s=!0)});let c=e.command===Je.say;e.args.forEach(u=>{u.key==="notend"&&u.value===!0&&(c=!1)});let l;if(s){j.sceneManager.sceneData.currentSentenceId++,sM();return}setTimeout(()=>{l=J.getState().stage;const u={currentStageState:l,globalGameVar:J.getState().userData.globalGameVar};Ae.debug("本条语句执行结果",u),c&&j.backlogManager.saveCurrentStateToBacklog()},0),j.sceneManager.sceneData.currentSentenceId++},gr=()=>{if(j.events.userInteractNext.emit(),J.getState().GUI.showTitle)return;let e=!1;if(j.gameplay.performController.performList.forEach(i=>{i.blockingNext()&&!j.gameplay.isFast&&!j.gameplay.isSyncingWithOrigine&&(e=!0)}),e){Ae.warn("next 被阻塞！");return}let r=!0;if(j.gameplay.performController.performList.forEach(i=>{!i.isHoldOn&&!i.skipNextCollect&&(r=!1)}),r){const i=J.getState().stage,a=Zt(i);for(let o=0;o<a.PerformList.length;o++)a.PerformList[o].isHoldOn||(a.PerformList.splice(o,1),o--);J.dispatch(u0(a)),sM();return}Ae.warn("提前结束被触发，现在清除普通演出");let n=!1;for(let i=0;i<j.gameplay.performController.performList.length;i++){const a=j.gameplay.performController.performList[i];a.isHoldOn||(a.goNextWhenOver&&(n=!0),a.skipNextCollect||(a.stopFunction(),clearTimeout(a.stopTimeout),j.gameplay.performController.performList.splice(i,1),i--))}n&&gr()};var TQ="__lodash_hash_undefined__";function PQ(t){return this.__data__.set(t,TQ),this}var OQ=PQ;function RQ(t){return this.__data__.has(t)}var IQ=RQ,FQ=aS,kQ=OQ,DQ=IQ;function lp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new FQ;++e<r;)this.add(t[e])}lp.prototype.add=lp.prototype.push=kQ;lp.prototype.has=DQ;var lM=lp;function MQ(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var LQ=MQ;function BQ(t){return t!==t}var NQ=BQ;function jQ(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var UQ=jQ,$Q=LQ,VQ=NQ,GQ=UQ;function zQ(t,e,r){return e===e?GQ(t,e,r):$Q(t,VQ,r)}var WQ=zQ,XQ=WQ;function HQ(t,e){var r=t==null?0:t.length;return!!r&&XQ(t,e,0)>-1}var YQ=HQ;function qQ(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var KQ=qQ;function ZQ(t,e){return t.has(e)}var uM=ZQ;function QQ(){}var JQ=QQ;function eJ(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var VS=eJ,Xm=zk,tJ=JQ,rJ=VS,nJ=1/0,iJ=Xm&&1/rJ(new Xm([,-0]))[1]==nJ?function(t){return new Xm(t)}:tJ,aJ=iJ,oJ=lM,sJ=YQ,lJ=KQ,uJ=uM,cJ=aJ,fJ=VS,hJ=200;function dJ(t,e,r){var n=-1,i=sJ,a=t.length,o=!0,s=[],c=s;if(r)o=!1,i=lJ;else if(a>=hJ){var l=e?null:cJ(t);if(l)return fJ(l);o=!1,i=uJ,c=new oJ}else c=e?[]:s;e:for(;++n<a;){var u=t[n],f=e?e(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),s.push(u)}else i(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}var pJ=dJ,vJ=pJ;function mJ(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?vJ(t,void 0,e):[]}var gJ=mJ;const Xf=vn(gJ),yu=t=>{for(const e of t)j.sceneManager.settledScenes.includes(e)?Ae.warn(`场景${e}已经加载过，无需再次加载`):(Ae.info(`现在预加载场景${e}`),Jn(e).then(r=>{hp(r,e,e)}))},yJ=(t,e)=>{j.sceneManager.sceneData.sceneStack.push({sceneName:j.sceneManager.sceneData.currentScene.sceneName,sceneUrl:j.sceneManager.sceneData.currentScene.sceneUrl,continueLine:j.sceneManager.sceneData.currentSentenceId}),Jn(t).then(async r=>{if(await j.sceneManager.setCurrentScene(r,e,t,!0)){j.sceneManager.sceneData.currentSentenceId=0;const i=j.sceneManager.sceneData.currentScene.subSceneList;j.sceneManager.settledScenes.push(t);const a=Xf(i);yu(a),Ae.debug("现在调用场景，调用结果：",j.sceneManager.sceneData),gr()}})},xJ=t=>{const e=t.content.split("/"),r=e[e.length-1];return yJ(t.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function tf(t,e,r){let n;const a=J.getState().stage.effects.find(o=>o.target===t);if(e.duration=500,r&&typeof r=="number"&&(e.duration=r),n=[e],a){const o={...a.transform,duration:0};n.unshift(o)}else{const o={...e,alpha:0,duration:0};n.unshift(o)}return n}function cM(t,e){const r=j.gameplay.pixiStage.getStageObjByKey(t);function n(){r&&(r.pixiContainer.alpha=0)}function i(){r&&(r.pixiContainer.alpha=1)}function a(o){if(r){const s=r.pixiContainer,c=j.gameplay.pixiStage.frameDuration,u=1/(e/c*o);s.alpha<1&&(s.alpha+=u)}}return{setStartState:n,setEndState:i,tickerFunc:a}}function fM(t,e){const r=j.gameplay.pixiStage.getStageObjByKey(t);function n(){}function i(){r&&(r.pixiContainer.alpha=0)}function a(o){if(r){const s=r.pixiContainer,c=j.gameplay.pixiStage.frameDuration,u=1/(e/c*o);s.alpha>0&&(s.alpha-=u)}}return{setStartState:n,setEndState:i,tickerFunc:a}}const GS={alpha:1,scale:{x:1,y:1},position:{x:0,y:0},rotation:0,blur:0};function hM(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var _J=function(){},FT=function(){};const Gx=(t,e,r)=>Math.min(Math.max(r,t),e),Hm=.001,bJ=.01,kT=10,SJ=.05,EJ=1;function wJ({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,a;_J(t<=kT*1e3);let o=1-e;o=Gx(SJ,EJ,o),t=Gx(bJ,kT,t/1e3),o<1?(i=l=>{const u=l*o,f=u*t,h=u-r,d=zx(l,o),p=Math.exp(-f);return Hm-h/d*p},a=l=>{const f=l*o*t,h=f*r+r,d=Math.pow(o,2)*Math.pow(l,2)*t,p=Math.exp(-f),v=zx(Math.pow(l,2),o);return(-i(l)+Hm>0?-1:1)*((h-d)*p)/v}):(i=l=>{const u=Math.exp(-l*t),f=(l-r)*t+1;return-Hm+u*f},a=l=>{const u=Math.exp(-l*t),f=(r-l)*(t*t);return u*f});const s=5/t,c=CJ(i,a,s);if(t=t*1e3,isNaN(c))return{stiffness:100,damping:10,duration:t};{const l=Math.pow(c,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const AJ=12;function CJ(t,e,r){let n=r;for(let i=1;i<AJ;i++)n=n-t(n)/e(n);return n}function zx(t,e){return t*Math.sqrt(1-e*e)}const TJ=["duration","bounce"],PJ=["stiffness","damping","mass"];function DT(t,e){return e.some(r=>t[r]!==void 0)}function OJ(t){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!DT(t,PJ)&&DT(t,TJ)){const r=wJ(t);e=Object.assign(Object.assign(Object.assign({},e),r),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function zS(t){var{from:e=0,to:r=1,restSpeed:n=2,restDelta:i}=t,a=hM(t,["from","to","restSpeed","restDelta"]);const o={done:!1,value:e};let{stiffness:s,damping:c,mass:l,velocity:u,duration:f,isResolvedFromDuration:h}=OJ(a),d=MT,p=MT;function v(){const y=u?-(u/1e3):0,g=r-e,m=c/(2*Math.sqrt(s*l)),x=Math.sqrt(s/l)/1e3;if(i===void 0&&(i=Math.min(Math.abs(r-e)/100,.4)),m<1){const b=zx(x,m);d=_=>{const S=Math.exp(-m*x*_);return r-S*((y+m*x*g)/b*Math.sin(b*_)+g*Math.cos(b*_))},p=_=>{const S=Math.exp(-m*x*_);return m*x*S*(Math.sin(b*_)*(y+m*x*g)/b+g*Math.cos(b*_))-S*(Math.cos(b*_)*(y+m*x*g)-b*g*Math.sin(b*_))}}else if(m===1)d=b=>r-Math.exp(-x*b)*(g+(y+x*g)*b);else{const b=x*Math.sqrt(m*m-1);d=_=>{const S=Math.exp(-m*x*_),E=Math.min(b*_,300);return r-S*((y+m*x*g)*Math.sinh(E)+b*g*Math.cosh(E))/b}}}return v(),{next:y=>{const g=d(y);if(h)o.done=y>=f;else{const m=p(y)*1e3,x=Math.abs(m)<=n,b=Math.abs(r-g)<=i;o.done=x&&b}return o.value=o.done?r:g,o},flipTarget:()=>{u=-u,[e,r]=[r,e],v()}}}zS.needsInterpolation=(t,e)=>typeof t=="string"||typeof e=="string";const MT=t=>0,dM=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},WS=(t,e,r)=>-r*t+r*e+t,pM=(t,e)=>r=>Math.max(Math.min(r,e),t),Rc=t=>t%1?Number(t.toFixed(5)):t,up=/(-)?([\d]*\.?[\d])+/g,Wx=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,RJ=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Hf(t){return typeof t=="string"}const A0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vM=Object.assign(Object.assign({},A0),{transform:pM(0,1)});Object.assign(Object.assign({},A0),{default:1});const IJ=t=>({test:e=>Hf(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ic=IJ("%");Object.assign(Object.assign({},Ic),{parse:t=>Ic.parse(t)/100,transform:t=>Ic.transform(t*100)});const XS=(t,e)=>r=>!!(Hf(r)&&RJ.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),mM=(t,e,r)=>n=>{if(!Hf(n))return n;const[i,a,o,s]=n.match(up);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},as={test:XS("hsl","hue"),parse:mM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ic.transform(Rc(e))+", "+Ic.transform(Rc(r))+", "+Rc(vM.transform(n))+")"},FJ=pM(0,255),Ym=Object.assign(Object.assign({},A0),{transform:t=>Math.round(FJ(t))}),no={test:XS("rgb","red"),parse:mM("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Ym.transform(t)+", "+Ym.transform(e)+", "+Ym.transform(r)+", "+Rc(vM.transform(n))+")"};function kJ(t){let e="",r="",n="",i="";return t.length>5?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2),i=t.substr(7,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),i=t.substr(4,1),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Xx={test:XS("#"),parse:kJ,transform:no.transform},C0={test:t=>no.test(t)||Xx.test(t)||as.test(t),parse:t=>no.test(t)?no.parse(t):as.test(t)?as.parse(t):Xx.parse(t),transform:t=>Hf(t)?t:t.hasOwnProperty("red")?no.transform(t):as.transform(t)},gM="${c}",yM="${n}";function DJ(t){var e,r,n,i;return isNaN(t)&&Hf(t)&&((r=(e=t.match(up))===null||e===void 0?void 0:e.length)!==null&&r!==void 0?r:0)+((i=(n=t.match(Wx))===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0)>0}function xM(t){typeof t=="number"&&(t=`${t}`);const e=[];let r=0;const n=t.match(Wx);n&&(r=n.length,t=t.replace(Wx,gM),e.push(...n.map(C0.parse)));const i=t.match(up);return i&&(t=t.replace(up,yM),e.push(...i.map(A0.parse))),{values:e,numColors:r,tokenised:t}}function _M(t){return xM(t).values}function bM(t){const{values:e,numColors:r,tokenised:n}=xM(t),i=e.length;return a=>{let o=n;for(let s=0;s<i;s++)o=o.replace(s<r?gM:yM,s<r?C0.transform(a[s]):Rc(a[s]));return o}}const MJ=t=>typeof t=="number"?0:t;function LJ(t){const e=_M(t);return bM(t)(e.map(MJ))}const SM={test:DJ,parse:_M,createTransformer:bM,getAnimatableNone:LJ};function qm(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function LT({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,o=0;if(!e)i=a=o=r;else{const s=r<.5?r*(1+e):r+e-r*e,c=2*r-s;i=qm(c,s,t+1/3),a=qm(c,s,t),o=qm(c,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const BJ=(t,e,r)=>{const n=t*t,i=e*e;return Math.sqrt(Math.max(0,r*(i-n)+n))},NJ=[Xx,no,as],BT=t=>NJ.find(e=>e.test(t)),EM=(t,e)=>{let r=BT(t),n=BT(e),i=r.parse(t),a=n.parse(e);r===as&&(i=LT(i),r=no),n===as&&(a=LT(a),n=no);const o=Object.assign({},i);return s=>{for(const c in o)c!=="alpha"&&(o[c]=BJ(i[c],a[c],s));return o.alpha=WS(i.alpha,a.alpha,s),r.transform(o)}},jJ=t=>typeof t=="number",UJ=(t,e)=>r=>e(t(r)),wM=(...t)=>t.reduce(UJ);function AM(t,e){return jJ(t)?r=>WS(t,e,r):C0.test(t)?EM(t,e):TM(t,e)}const CM=(t,e)=>{const r=[...t],n=r.length,i=t.map((a,o)=>AM(a,e[o]));return a=>{for(let o=0;o<n;o++)r[o]=i[o](a);return r}},$J=(t,e)=>{const r=Object.assign(Object.assign({},t),e),n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=AM(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}};function NT(t){const e=SM.parse(t),r=e.length;let n=0,i=0,a=0;for(let o=0;o<r;o++)n||typeof e[o]=="number"?n++:e[o].hue!==void 0?a++:i++;return{parsed:e,numNumbers:n,numRGB:i,numHSL:a}}const TM=(t,e)=>{const r=SM.createTransformer(e),n=NT(t),i=NT(e);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?wM(CM(n.parsed,i.parsed),r):o=>`${o>0?e:t}`},VJ=(t,e)=>r=>WS(t,e,r);function GJ(t){if(typeof t=="number")return VJ;if(typeof t=="string")return C0.test(t)?EM:TM;if(Array.isArray(t))return CM;if(typeof t=="object")return $J}function zJ(t,e,r){const n=[],i=r||GJ(t[0]),a=t.length-1;for(let o=0;o<a;o++){let s=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]:e;s=wM(c,s)}n.push(s)}return n}function WJ([t,e],[r]){return n=>r(dM(t,e,n))}function XJ(t,e){const r=t.length,n=r-1;return i=>{let a=0,o=!1;if(i<=t[0]?o=!0:i>=t[n]&&(a=n-1,o=!0),!o){let c=1;for(;c<r&&!(t[c]>i||c===n);c++);a=c-1}const s=dM(t[a],t[a+1],i);return e[a](s)}}function PM(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;FT(a===e.length),FT(!n||!Array.isArray(n)||n.length===a-1),t[0]>t[a-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());const o=zJ(e,n,i),s=a===2?WJ(t,o):XJ(t,o);return r?c=>s(Gx(t[0],t[a-1],c)):s}const HJ=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,YJ=t=>e=>Math.pow(e,t),qJ=t=>e=>e*e*((t+1)*e-t),KJ=t=>{const e=qJ(t);return r=>(r*=2)<1?.5*e(r):.5*(2-Math.pow(2,-10*(r-1)))},ZJ=1.525,QJ=YJ(2),JJ=HJ(QJ);KJ(ZJ);function eee(t,e){return t.map(()=>e||JJ).splice(0,t.length-1)}function tee(t){const e=t.length;return t.map((r,n)=>n!==0?n/(e-1):0)}function ree(t,e){return t.map(r=>r*e)}function yd({from:t=0,to:e=1,ease:r,offset:n,duration:i=300}){const a={done:!1,value:t},o=Array.isArray(e)?e:[t,e],s=ree(n&&n.length===o.length?n:tee(o),i);function c(){return PM(s,o,{ease:Array.isArray(r)?r:eee(o,r)})}let l=c();return{next:u=>(a.value=l(u),a.done=u>=i,a),flipTarget:()=>{o.reverse(),l=c()}}}function nee({velocity:t=0,from:e=0,power:r=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:a}){const o={done:!1,value:e};let s=r*t;const c=e+s,l=a===void 0?c:a(c);return l!==c&&(s=l-e),{next:u=>{const f=-s*Math.exp(-u/n);return o.done=!(f>i||f<-i),o.value=o.done?l:l+f,o},flipTarget:()=>{}}}const jT={keyframes:yd,spring:zS,decay:nee};function iee(t){if(Array.isArray(t.to))return yd;if(jT[t.type])return jT[t.type];const e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?yd:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?zS:yd}const OM=1/60*1e3,aee=typeof performance<"u"?()=>performance.now():()=>Date.now(),RM=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(aee()),OM);function oee(t){let e=[],r=[],n=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(c,l=!1,u=!1)=>{const f=u&&i,h=f?e:r;return l&&o.add(c),h.indexOf(c)===-1&&(h.push(c),f&&i&&(n=e.length)),c},cancel:c=>{const l=r.indexOf(c);l!==-1&&r.splice(l,1),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[e,r]=[r,e],r.length=0,n=e.length,n)for(let l=0;l<n;l++){const u=e[l];u(c),o.has(u)&&(s.schedule(u),t())}i=!1,a&&(a=!1,s.process(c))}};return s}const see=40;let Hx=!0,rf=!1,Yx=!1;const Fc={delta:0,timestamp:0},Yf=["read","update","preRender","render","postRender"],T0=Yf.reduce((t,e)=>(t[e]=oee(()=>rf=!0),t),{}),lee=Yf.reduce((t,e)=>{const r=T0[e];return t[e]=(n,i=!1,a=!1)=>(rf||fee(),r.schedule(n,i,a)),t},{}),uee=Yf.reduce((t,e)=>(t[e]=T0[e].cancel,t),{});Yf.reduce((t,e)=>(t[e]=()=>T0[e].process(Fc),t),{});const cee=t=>T0[t].process(Fc),IM=t=>{rf=!1,Fc.delta=Hx?OM:Math.max(Math.min(t-Fc.timestamp,see),1),Fc.timestamp=t,Yx=!0,Yf.forEach(cee),Yx=!1,rf&&(Hx=!1,RM(IM))},fee=()=>{rf=!0,Hx=!0,Yx||RM(IM)},hee=lee;function FM(t,e,r=0){return t-e-r}function dee(t,e,r=0,n=!0){return n?FM(e+-t,e,r):e-(t-e)+r}function pee(t,e,r,n){return n?t>=e+r:t<=-r}const vee=t=>{const e=({delta:r})=>t(r);return{start:()=>hee.update(e,!0),stop:()=>uee.update(e)}};function mee(t){var e,r,{from:n,autoplay:i=!0,driver:a=vee,elapsed:o=0,repeat:s=0,repeatType:c="loop",repeatDelay:l=0,onPlay:u,onStop:f,onComplete:h,onRepeat:d,onUpdate:p}=t,v=hM(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:y}=v,g,m=0,x=v.duration,b,_=!1,S=!0,E;const w=iee(v);!((r=(e=w).needsInterpolation)===null||r===void 0)&&r.call(e,n,y)&&(E=PM([0,100],[n,y],{clamp:!1}),n=0,y=100);const C=w(Object.assign(Object.assign({},v),{from:n,to:y}));function A(){m++,c==="reverse"?(S=m%2===0,o=dee(o,x,l,S)):(o=FM(o,x,l),c==="mirror"&&C.flipTarget()),_=!1,d&&d()}function P(){g.stop(),h&&h()}function T(R){if(S||(R=-R),o+=R,!_){const F=C.next(Math.max(0,o));b=F.value,E&&(b=E(b)),_=S?F.done:o<=0}p==null||p(b),_&&(m===0&&(x??(x=o)),m<s?pee(o,x,l,S)&&A():P())}function O(){u==null||u(),g=a(T),g.start()}return i&&O(),{stop:()=>{f==null||f(),g.stop()}}}function gee(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var yee=gee,xee=lM,_ee=yee,bee=uM,See=1,Eee=2;function wee(t,e,r,n,i,a){var o=r&See,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(t),u=a.get(e);if(l&&u)return l==e&&u==t;var f=-1,h=!0,d=r&Eee?new xee:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var p=t[f],v=e[f];if(n)var y=o?n(v,p,f,e,t,a):n(p,v,f,t,e,a);if(y!==void 0){if(y)continue;h=!1;break}if(d){if(!_ee(e,function(g,m){if(!bee(d,m)&&(p===g||i(p,g,r,n,a)))return d.push(m)})){h=!1;break}}else if(!(p===v||i(p,v,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var kM=wee;function Aee(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var Cee=Aee,UT=Vf,$T=Xk,Tee=nS,Pee=kM,Oee=Cee,Ree=VS,Iee=1,Fee=2,kee="[object Boolean]",Dee="[object Date]",Mee="[object Error]",Lee="[object Map]",Bee="[object Number]",Nee="[object RegExp]",jee="[object Set]",Uee="[object String]",$ee="[object Symbol]",Vee="[object ArrayBuffer]",Gee="[object DataView]",VT=UT?UT.prototype:void 0,Km=VT?VT.valueOf:void 0;function zee(t,e,r,n,i,a,o){switch(r){case Gee:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Vee:return!(t.byteLength!=e.byteLength||!a(new $T(t),new $T(e)));case kee:case Dee:case Bee:return Tee(+t,+e);case Mee:return t.name==e.name&&t.message==e.message;case Nee:case Uee:return t==e+"";case Lee:var s=Oee;case jee:var c=n&Iee;if(s||(s=Ree),t.size!=e.size&&!c)return!1;var l=o.get(t);if(l)return l==e;n|=Fee,o.set(t,e);var u=Pee(s(t),s(e),n,i,a,o);return o.delete(t),u;case $ee:if(Km)return Km.call(t)==Km.call(e)}return!1}var Wee=zee,GT=Vk,Xee=1,Hee=Object.prototype,Yee=Hee.hasOwnProperty;function qee(t,e,r,n,i,a){var o=r&Xee,s=GT(t),c=s.length,l=GT(e),u=l.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=s[f];if(!(o?h in e:Yee.call(e,h)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var v=!0;a.set(t,e),a.set(e,t);for(var y=o;++f<c;){h=s[f];var g=t[h],m=e[h];if(n)var x=o?n(m,g,h,e,t,a):n(g,m,h,t,e,a);if(!(x===void 0?g===m||i(g,m,r,n,a):x)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return a.delete(t),a.delete(e),v}var Kee=qee,Zm=oS,Zee=kM,Qee=Wee,Jee=Kee,zT=l0,WT=Ua,XT=lS,ete=kk,tte=1,HT="[object Arguments]",YT="[object Array]",_h="[object Object]",rte=Object.prototype,qT=rte.hasOwnProperty;function nte(t,e,r,n,i,a){var o=WT(t),s=WT(e),c=o?YT:zT(t),l=s?YT:zT(e);c=c==HT?_h:c,l=l==HT?_h:l;var u=c==_h,f=l==_h,h=c==l;if(h&&XT(t)){if(!XT(e))return!1;o=!0,u=!1}if(h&&!u)return a||(a=new Zm),o||ete(t)?Zee(t,e,r,n,i,a):Qee(t,e,c,r,n,i,a);if(!(r&tte)){var d=u&&qT.call(t,"__wrapped__"),p=f&&qT.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,y=p?e.value():e;return a||(a=new Zm),i(v,y,r,n,a)}}return h?(a||(a=new Zm),Jee(t,e,r,n,i,a)):!1}var ite=nte,ate=ite,KT=ks;function DM(t,e,r,n,i){return t===e?!0:t==null||e==null||!KT(t)&&!KT(e)?t!==t&&e!==e:ate(t,e,r,n,DM,i)}var MM=DM,ote=oS,ste=MM,lte=1,ute=2;function cte(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var c=s[0],l=t[c],u=s[1];if(o&&s[2]){if(l===void 0&&!(c in t))return!1}else{var f=new ote;if(n)var h=n(l,u,c,t,e,f);if(!(h===void 0?ste(u,l,lte|ute,n,f):h))return!1}}return!0}var fte=cte,hte=da;function dte(t){return t===t&&!hte(t)}var LM=dte,pte=LM,vte=s0;function mte(t){for(var e=vte(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,pte(i)]}return e}var gte=mte;function yte(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var BM=yte,xte=fte,_te=gte,bte=BM;function Ste(t){var e=_te(t);return e.length==1&&e[0][2]?bte(e[0][0],e[0][1]):function(r){return r===t||xte(r,t,e)}}var Ete=Ste,wte=Gf,Ate=ks,Cte="[object Symbol]";function Tte(t){return typeof t=="symbol"||Ate(t)&&wte(t)==Cte}var P0=Tte,Pte=Ua,Ote=P0,Rte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ite=/^\w*$/;function Fte(t,e){if(Pte(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ote(t)?!0:Ite.test(t)||!Rte.test(t)||e!=null&&t in Object(e)}var HS=Fte,NM=aS,kte="Expected a function";function YS(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(kte);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(YS.Cache||NM),r}YS.Cache=NM;var Dte=YS,Mte=Dte,Lte=500;function Bte(t){var e=Mte(t,function(n){return r.size===Lte&&r.clear(),n}),r=e.cache;return e}var Nte=Bte,jte=Nte,Ute=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$te=/\\(\\)?/g,Vte=jte(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ute,function(r,n,i,a){e.push(i?a.replace($te,"$1"):n||r)}),e}),Gte=Vte;function zte(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var jM=zte,ZT=Vf,Wte=jM,Xte=Ua,Hte=P0,Yte=1/0,QT=ZT?ZT.prototype:void 0,JT=QT?QT.toString:void 0;function UM(t){if(typeof t=="string")return t;if(Xte(t))return Wte(t,UM)+"";if(Hte(t))return JT?JT.call(t):"";var e=t+"";return e=="0"&&1/t==-Yte?"-0":e}var qte=UM,Kte=qte;function Zte(t){return t==null?"":Kte(t)}var Qte=Zte,Jte=Ua,ere=HS,tre=Gte,rre=Qte;function nre(t,e){return Jte(t)?t:ere(t,e)?[t]:tre(rre(t))}var O0=nre,ire=P0,are=1/0;function ore(t){if(typeof t=="string"||ire(t))return t;var e=t+"";return e=="0"&&1/t==-are?"-0":e}var qf=ore,sre=O0,lre=qf;function ure(t,e){e=sre(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[lre(e[r++])];return r&&r==n?t:void 0}var qS=ure,cre=qS;function fre(t,e,r){var n=t==null?void 0:cre(t,e);return n===void 0?r:n}var hre=fre;function dre(t,e){return t!=null&&e in Object(t)}var pre=dre,vre=O0,mre=Fk,gre=Ua,yre=uS,xre=cS,_re=qf;function bre(t,e,r){e=vre(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=_re(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&xre(i)&&yre(o,i)&&(gre(t)||mre(t)))}var Sre=bre,Ere=pre,wre=Sre;function Are(t,e){return t!=null&&wre(t,e,Ere)}var Cre=Are,Tre=MM,Pre=hre,Ore=Cre,Rre=HS,Ire=LM,Fre=BM,kre=qf,Dre=1,Mre=2;function Lre(t,e){return Rre(t)&&Ire(e)?Fre(kre(t),e):function(r){var n=Pre(r,t);return n===void 0&&n===e?Ore(r,t):Tre(e,n,Dre|Mre)}}var Bre=Lre;function Nre(t){return t}var jre=Nre;function Ure(t){return function(e){return e==null?void 0:e[t]}}var $re=Ure,Vre=qS;function Gre(t){return function(e){return Vre(e,t)}}var zre=Gre,Wre=$re,Xre=zre,Hre=HS,Yre=qf;function qre(t){return Hre(t)?Wre(Yre(t)):Xre(t)}var Kre=qre,Zre=Ete,Qre=Bre,Jre=jre,ene=Ua,tne=Kre;function rne(t){return typeof t=="function"?t:t==null?Jre:typeof t=="object"?ene(t)?Qre(t[0],t[1]):Zre(t):tne(t)}var $M=rne,nne="Expected a function";function ine(t){if(typeof t!="function")throw new TypeError(nne);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var ane=ine,one=sS,sne=O0,lne=uS,eP=da,une=qf;function cne(t,e,r,n){if(!eP(t))return t;e=sne(e,t);for(var i=-1,a=e.length,o=a-1,s=t;s!=null&&++i<a;){var c=une(e[i]),l=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=o){var u=s[c];l=n?n(u,c,s):void 0,l===void 0&&(l=eP(u)?u:lne(e[i+1])?[]:{})}one(s,c,l),s=s[c]}return t}var fne=cne,hne=qS,dne=fne,pne=O0;function vne(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=hne(t,o);r(s,o)&&dne(a,pne(o,t),s)}return a}var mne=vne,gne=jM,yne=$M,xne=mne,_ne=Gk;function bne(t,e){if(t==null)return{};var r=gne(_ne(t),function(n){return[n]});return e=yne(e),xne(t,r,function(n,i){return e(n,i[0])})}var Sne=bne,Ene=$M,wne=ane,Ane=Sne;function Cne(t,e){return Ane(t,wne(Ene(e)))}var Tne=Cne;const Qm=vn(Tne);function Pne(t){return t===void 0}var One=Pne;const _a=vn(One);function VM(t,e,r){const n=j.gameplay.pixiStage.getStageObjByKey(e);let i=0;const a=[],o=[];for(const g of t){const m=g.duration;i+=m;const{position:x,scale:b,..._}=g;a.push({x:x.x,y:x.y,scaleX:b.x,scaleY:b.y,..._}),r!==0?o.push(i/r):o.push(0)}const s=n==null?void 0:n.pixiContainer;let c=null;r>0&&(c=mee({to:a,offset:o,duration:r,onUpdate:g=>{if(s){const{scaleX:m,scaleY:x,...b}=g;Object.assign(s,Qm(b,_a)),_a(m)||(s.scale.x=m),_a(x)||(s.scale.y=x)}}}));const{duration:l,...u}=v();J.dispatch(Dn.updateEffect({target:e,transform:u}));function f(){if(n!=null&&n.pixiContainer){const{position:g,scale:m,...x}=p(),b=Qm({x:g.x,y:g.y,...x},_a);Object.assign(n==null?void 0:n.pixiContainer,b),n!=null&&n.pixiContainer&&(_a(m.x)||(n.pixiContainer.scale.x=m.x),_a(m==null?void 0:m.y)||(n.pixiContainer.scale.y=m.y))}}function h(){if(c&&c.stop(),c=null,n!=null&&n.pixiContainer){const{position:g,scale:m,...x}=v(),b=Qm({x:g.x,y:g.y,...x},_a);Object.assign(n==null?void 0:n.pixiContainer,b),n!=null&&n.pixiContainer&&(_a(m.x)||(n.pixiContainer.scale.x=m.x),_a(m==null?void 0:m.y)||(n.pixiContainer.scale.y=m.y))}}function d(g){}function p(){return t[0]}function v(){return t[t.length-1]}function y(){const g=t[t.length-1],{alpha:m,rotation:x,blur:b,duration:_,scale:S,position:E,...w}=g;return w}return{setStartState:f,setEndState:h,tickerFunc:d,getEndFilterEffect:y}}function cp(t,e,r){const n=j.animationManager.getAnimations().find(i=>i.name===t);if(n){const i=n.effects.map(a=>{const o=J.getState().stage.effects.find(c=>c.target===e),s=Zt({...(o==null?void 0:o.transform)??GS,duration:0});return Object.assign(s,a),s.duration=a.duration,s});return Ae.debug("装载自定义动画",i),VM(i,e,r)}return null}function Mn(t){const e=j.animationManager.getAnimations().find(r=>r.name===t);if(e){let r=0;return e.effects.forEach(n=>{r+=n.duration}),r}return 0}function Ja(t,e,r=!1){if(e==="enter"){let n=500;r&&(n=1500);let i=cM(t,n);const a=j.animationManager.nextEnterAnimationName.get(t);return a&&(Ae.debug("取代默认进入动画",t),i=cp(a,t,Mn(a)),n=Mn(a),j.animationManager.nextEnterAnimationName.delete(t)),{duration:n,animation:i}}else{let n=750;r&&(n=1500);let i=fM(t,n);const a=j.animationManager.nextExitAnimationName.get(t);return a&&(Ae.debug("取代默认退出动画",t),i=cp(a,t,Mn(a)),n=Mn(a),j.animationManager.nextExitAnimationName.delete(t)),{duration:n,animation:i}}}const Rne=t=>{const e=t.content,r=J.dispatch;if(J.getState().GUI.showStoryLine)return r($e({key:"storyLineBg",value:e})),t.args.forEach(l=>{l.key==="x"&&l.value!==""&&r($e({key:"storyLineBgX",value:l.value})),l.key==="y"&&l.value!==""&&r($e({key:"storyLineBgY",value:l.value}))}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};if(J.getState().GUI.showAchievement)return r(_W(e)),t.args.forEach(l=>{l.key==="x"&&l.value!==""&&r($e({key:"achieveBgX",value:l.value})),l.key==="y"&&l.value!==""&&r($e({key:"achieveBgY",value:l.value}))}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};let n="",i="default";t.args.forEach(l=>{l.key==="unlockname"&&(n=l.value.toString()),l.key==="series"&&(i=l.value.toString())}),n!==""&&r(dD({name:n,url:e,series:i})),r(Dn.removeEffectByTargetId("bg-main"));const a=ot(t,"transform");let o=ot(t,"duration");(!o||typeof o!="number")&&(o=1e3);let s;if(a)try{const l=JSON.parse(a.toString());s=tf("bg-main",l,o),s[0].alpha=0;const u=(Math.random()*10).toString(16),f={name:u,effects:s};j.animationManager.addAnimation(f),o=Mn(u),j.animationManager.nextEnterAnimationName.set("bg-main",u)}catch{c()}else c();function c(){s=tf("bg-main",{},o),s[0].alpha=0;const u=(Math.random()*10).toString(16),f={name:u,effects:s};j.animationManager.addAnimation(f),o=Mn(u),j.animationManager.nextEnterAnimationName.set("bg-main",u)}return ot(t,"enter")&&(j.animationManager.nextEnterAnimationName.set("bg-main",ot(t,"enter").toString()),o=Mn(ot(t,"enter").toString())),ot(t,"exit")&&(j.animationManager.nextExitAnimationName.set("bg-main-off",ot(t,"exit").toString()),o=Mn(ot(t,"exit").toString())),r($e({key:"bgName",value:t.content})),{performName:"none",duration:o,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Ine(t){let e="center",r=t.content,n=!1,i="",a="",o="",s=500,c="",l="",u="",f="",h="",d="";const p=J.dispatch;for(const _ of t.args)switch(_.key){case"left":_.value===!0&&(e="left");break;case"right":_.value===!0&&(e="right");break;case"clear":_.value===!0&&(r="");break;case"id":n=!0,o=_.value.toString();break;case"motion":i=_.value.toString();break;case"expression":a=_.value.toString();break;case"mouthOpen":c=_.value.toString(),c=pr(c,dr.figure);break;case"mouthClose":l=_.value.toString(),l=pr(l,dr.figure);break;case"mouthHalfOpen":u=_.value.toString(),u=pr(u,dr.figure);break;case"eyesOpen":f=_.value.toString(),f=pr(f,dr.figure);break;case"eyesClose":h=_.value.toString(),h=pr(h,dr.figure);break;case"animationFlag":d=_.value.toString();break;case"none":r="";break}const v=o||`fig-${e}`,g=J.getState().stage.figureAssociatedAnimation.filter(_=>_.targetId!==v),m={targetId:v,animationFlag:d,mouthAnimation:{open:c,close:l,halfOpen:u},blinkAnimation:{open:f,close:h}};g.push(m),p($e({key:"figureAssociatedAnimation",value:g}));let x=!0;if(o!==""){const _=J.getState().stage.freeFigure.find(S=>S.key===o);_&&_.name===t.content&&(x=!1)}else e==="center"&&J.getState().stage.figName===t.content&&(x=!1),e==="left"&&J.getState().stage.figNameLeft===t.content&&(x=!1),e==="right"&&J.getState().stage.figNameRight===t.content&&(x=!1);if(x){const _=`fig-${e}`,S=`${o}`;J.dispatch(Dn.removeEffectByTargetId(_)),J.dispatch(Dn.removeEffectByTargetId(S))}const b=(_,S)=>{const E=ot(S,"transform"),w=ot(S,"duration");w&&typeof w=="number"&&(s=w);let C;if(E){console.log(E);try{const O=JSON.parse(E.toString());C=tf(_,O,s),C[0].alpha=0;const R=(Math.random()*10).toString(16),F={name:R,effects:C};j.animationManager.addAnimation(F),s=Mn(R),j.animationManager.nextEnterAnimationName.set(_,R)}catch{A()}}else A();function A(){C=tf(_,{},s),C[0].alpha=0;const R=(Math.random()*10).toString(16),F={name:R,effects:C};j.animationManager.addAnimation(F),s=Mn(R),j.animationManager.nextEnterAnimationName.set(_,R)}const P=ot(S,"enter"),T=ot(S,"exit");P&&(j.animationManager.nextEnterAnimationName.set(_,P.toString()),s=Mn(P.toString())),T&&(j.animationManager.nextExitAnimationName.set(_+"-off",T.toString()),s=Mn(T.toString()))};if(n){J.getState().stage.freeFigure;const _={key:o,name:r,basePosition:e};b(o,t),i&&p(Dn.setLive2dMotion({target:o,motion:i})),a&&p(Dn.setLive2dExpression({target:o,expression:a})),p(Dn.setFreeFigureByKey(_))}else{const _={center:"fig-center",left:"fig-left",right:"fig-right"},S={center:"figName",left:"figNameLeft",right:"figNameRight"};o=_[e],b(o,t),i&&p(Dn.setLive2dMotion({target:o,motion:i})),a&&p(Dn.setLive2dExpression({target:o,expression:a})),p($e({key:S[e],value:r}))}return{performName:"none",duration:s,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}}const GM=(t,e)=>{Jn(t).then(async r=>{if(await j.sceneManager.setCurrentScene(r,e,t,!0)){j.sceneManager.sceneData.currentSentenceId=0;const i=[];j.sceneManager.sceneData.currentScene.assetsList.forEach(s=>{(s.url.endsWith(".mp4")||s.url.endsWith(".flv"))&&i.push(s.url)}),j.videoManager.destroyExcept(i);const a=j.sceneManager.sceneData.currentScene.subSceneList;j.sceneManager.settledScenes.push(t);const o=Xf(a);yu(o),Ae.debug("现在切换场景，切换后的结果：",j.sceneManager.sceneData),gr()}})},Fne=t=>{const e=t.content.split("/"),r=e[e.length-1];return GM(t.content,r),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},zM=t=>{const e=j.sceneManager.sceneData.currentSentenceId;let r=e;j.sceneManager.sceneData.currentScene.sentenceList.forEach((n,i)=>{n.command===Je.label&&n.content===t&&i!==e&&(r=i)}),j.sceneManager.sceneData.currentSentenceId=r,setTimeout(gr,1)},kne="_Choose_Main_13clt_1",Dne="_Choose_item_13clt_13",Mne="_Choose_item_image_13clt_30",Lne="_Choose_item_countdown_13clt_45",Bne="_Choose_item_countdown_disabled_13clt_52",Nne="_Choose_item_progress_bar_13clt_59",jne="_Choose_item_disabled_13clt_68",Uo={Choose_Main:kne,Choose_item:Dne,Choose_item_image:Mne,Choose_item_countdown:Lne,Choose_item_countdown_disabled:Bne,Choose_item_progress_bar:Nne,Choose_item_disabled:jne},Une=""+new URL("page-flip-1.mp3",import.meta.url).href,$ne=""+new URL("switch-1.mp3",import.meta.url).href,WM=""+new URL("mouse-enter.mp3",import.meta.url).href,Vne=""+new URL("dialog.mp3",import.meta.url).href,XM=""+new URL("click.mp3",import.meta.url).href;var HM={exports:{}},YM={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gl=ie;function Gne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zne=typeof Object.is=="function"?Object.is:Gne,Wne=Gl.useState,Xne=Gl.useEffect,Hne=Gl.useLayoutEffect,Yne=Gl.useDebugValue;function qne(t,e){var r=e(),n=Wne({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return Hne(function(){i.value=r,i.getSnapshot=e,Jm(i)&&a({inst:i})},[t,r,e]),Xne(function(){return Jm(i)&&a({inst:i}),t(function(){Jm(i)&&a({inst:i})})},[t]),Yne(r),r}function Jm(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!zne(t,r)}catch{return!0}}function Kne(t,e){return e()}var Zne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Kne:qne;YM.useSyncExternalStore=Gl.useSyncExternalStore!==void 0?Gl.useSyncExternalStore:Zne;HM.exports=YM;var Qne=HM.exports,qM={exports:{}},KM={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0=ie,Jne=Qne;function eie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tie=typeof Object.is=="function"?Object.is:eie,rie=Jne.useSyncExternalStore,nie=R0.useRef,iie=R0.useEffect,aie=R0.useMemo,oie=R0.useDebugValue;KM.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var a=nie(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=aie(function(){function c(d){if(!l){if(l=!0,u=d,d=n(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,tie(u,d))return p;var v=n(d);return i!==void 0&&i(p,v)?p:(u=d,f=v)}var l=!1,u,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,i]);var s=rie(t,a[0],a[1]);return iie(function(){o.hasValue=!0,o.value=s},[s]),oie(s),s};qM.exports=KM;var sie=qM.exports;function lie(t){t()}let ZM=lie;const uie=t=>ZM=t,cie=()=>ZM,tP=Symbol.for("react-redux-context"),rP=typeof globalThis<"u"?globalThis:{};function fie(){var t;if(!ie.createContext)return{};const e=(t=rP[tP])!=null?t:rP[tP]=new Map;let r=e.get(ie.createContext);return r||(r=ie.createContext(null),e.set(ie.createContext,r)),r}const Oo=fie();function KS(t=Oo){return function(){return ie.useContext(t)}}const QM=KS(),hie=()=>{throw new Error("uSES not initialized!")};let JM=hie;const die=t=>{JM=t},pie=(t,e)=>t===e;function vie(t=Oo){const e=t===Oo?QM:KS(t);return function(n,i={}){const{equalityFn:a=pie,stabilityCheck:o=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:c,subscription:l,getServerState:u,stabilityCheck:f,noopCheck:h}=e();ie.useRef(!0);const d=ie.useCallback({[n.name](v){return n(v)}}[n.name],[n,f,o]),p=JM(l.addNestedSub,c.getState,u||c.getState,d,a);return ie.useDebugValue(p),p}}const Ue=vie();function mie(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var e3={exports:{}},At={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr=typeof Symbol=="function"&&Symbol.for,ZS=Yr?Symbol.for("react.element"):60103,QS=Yr?Symbol.for("react.portal"):60106,I0=Yr?Symbol.for("react.fragment"):60107,F0=Yr?Symbol.for("react.strict_mode"):60108,k0=Yr?Symbol.for("react.profiler"):60114,D0=Yr?Symbol.for("react.provider"):60109,M0=Yr?Symbol.for("react.context"):60110,JS=Yr?Symbol.for("react.async_mode"):60111,L0=Yr?Symbol.for("react.concurrent_mode"):60111,B0=Yr?Symbol.for("react.forward_ref"):60112,N0=Yr?Symbol.for("react.suspense"):60113,gie=Yr?Symbol.for("react.suspense_list"):60120,j0=Yr?Symbol.for("react.memo"):60115,U0=Yr?Symbol.for("react.lazy"):60116,yie=Yr?Symbol.for("react.block"):60121,xie=Yr?Symbol.for("react.fundamental"):60117,_ie=Yr?Symbol.for("react.responder"):60118,bie=Yr?Symbol.for("react.scope"):60119;function ei(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ZS:switch(t=t.type,t){case JS:case L0:case I0:case k0:case F0:case N0:return t;default:switch(t=t&&t.$$typeof,t){case M0:case B0:case U0:case j0:case D0:return t;default:return e}}case QS:return e}}}function t3(t){return ei(t)===L0}At.AsyncMode=JS;At.ConcurrentMode=L0;At.ContextConsumer=M0;At.ContextProvider=D0;At.Element=ZS;At.ForwardRef=B0;At.Fragment=I0;At.Lazy=U0;At.Memo=j0;At.Portal=QS;At.Profiler=k0;At.StrictMode=F0;At.Suspense=N0;At.isAsyncMode=function(t){return t3(t)||ei(t)===JS};At.isConcurrentMode=t3;At.isContextConsumer=function(t){return ei(t)===M0};At.isContextProvider=function(t){return ei(t)===D0};At.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ZS};At.isForwardRef=function(t){return ei(t)===B0};At.isFragment=function(t){return ei(t)===I0};At.isLazy=function(t){return ei(t)===U0};At.isMemo=function(t){return ei(t)===j0};At.isPortal=function(t){return ei(t)===QS};At.isProfiler=function(t){return ei(t)===k0};At.isStrictMode=function(t){return ei(t)===F0};At.isSuspense=function(t){return ei(t)===N0};At.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===I0||t===L0||t===k0||t===F0||t===N0||t===gie||typeof t=="object"&&t!==null&&(t.$$typeof===U0||t.$$typeof===j0||t.$$typeof===D0||t.$$typeof===M0||t.$$typeof===B0||t.$$typeof===xie||t.$$typeof===_ie||t.$$typeof===bie||t.$$typeof===yie)};At.typeOf=ei;e3.exports=At;var Sie=e3.exports,r3=Sie,Eie={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},wie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n3={};n3[r3.ForwardRef]=Eie;n3[r3.Memo]=wie;var Ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE=Symbol.for("react.element"),tE=Symbol.for("react.portal"),$0=Symbol.for("react.fragment"),V0=Symbol.for("react.strict_mode"),G0=Symbol.for("react.profiler"),z0=Symbol.for("react.provider"),W0=Symbol.for("react.context"),Aie=Symbol.for("react.server_context"),X0=Symbol.for("react.forward_ref"),H0=Symbol.for("react.suspense"),Y0=Symbol.for("react.suspense_list"),q0=Symbol.for("react.memo"),K0=Symbol.for("react.lazy"),Cie=Symbol.for("react.offscreen"),i3;i3=Symbol.for("react.module.reference");function vi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case eE:switch(t=t.type,t){case $0:case G0:case V0:case H0:case Y0:return t;default:switch(t=t&&t.$$typeof,t){case Aie:case W0:case X0:case K0:case q0:case z0:return t;default:return e}}case tE:return e}}}Ot.ContextConsumer=W0;Ot.ContextProvider=z0;Ot.Element=eE;Ot.ForwardRef=X0;Ot.Fragment=$0;Ot.Lazy=K0;Ot.Memo=q0;Ot.Portal=tE;Ot.Profiler=G0;Ot.StrictMode=V0;Ot.Suspense=H0;Ot.SuspenseList=Y0;Ot.isAsyncMode=function(){return!1};Ot.isConcurrentMode=function(){return!1};Ot.isContextConsumer=function(t){return vi(t)===W0};Ot.isContextProvider=function(t){return vi(t)===z0};Ot.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===eE};Ot.isForwardRef=function(t){return vi(t)===X0};Ot.isFragment=function(t){return vi(t)===$0};Ot.isLazy=function(t){return vi(t)===K0};Ot.isMemo=function(t){return vi(t)===q0};Ot.isPortal=function(t){return vi(t)===tE};Ot.isProfiler=function(t){return vi(t)===G0};Ot.isStrictMode=function(t){return vi(t)===V0};Ot.isSuspense=function(t){return vi(t)===H0};Ot.isSuspenseList=function(t){return vi(t)===Y0};Ot.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===$0||t===G0||t===V0||t===H0||t===Y0||t===Cie||typeof t=="object"&&t!==null&&(t.$$typeof===K0||t.$$typeof===q0||t.$$typeof===z0||t.$$typeof===W0||t.$$typeof===X0||t.$$typeof===i3||t.getModuleId!==void 0)};Ot.typeOf=vi;function Tie(){const t=cie();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,a=r={callback:n,next:null,prev:r};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}const nP={notify(){},get:()=>[]};function Pie(t,e){let r,n=nP,i=0,a=!1;function o(v){u();const y=n.subscribe(v);let g=!1;return()=>{g||(g=!0,y(),f())}}function s(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function l(){return a}function u(){i++,r||(r=e?e.addNestedSub(c):t.subscribe(c),n=Tie())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=nP)}function h(){a||(a=!0,u())}function d(){a&&(a=!1,f())}const p={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:l,trySubscribe:h,tryUnsubscribe:d,getListeners:()=>n};return p}const Oie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rie=Oie?ie.useLayoutEffect:ie.useEffect;function Iie({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:a="once"}){const o=ie.useMemo(()=>{const l=Pie(t);return{store:t,subscription:l,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:a}},[t,n,i,a]),s=ie.useMemo(()=>t.getState(),[t]);Rie(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==t.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,s]);const c=e||Oo;return ie.createElement(c.Provider,{value:o},r)}function a3(t=Oo){const e=t===Oo?QM:KS(t);return function(){const{store:n}=e();return n}}const Fie=a3();function kie(t=Oo){const e=t===Oo?Fie:a3(t);return function(){return e().dispatch}}const or=kie();die(sie.useSyncExternalStoreWithSelector);uie(dk.unstable_batchedUpdates);const On=()=>{const t=or();return{playSeEnter:()=>{t($e({key:"uiSe",value:WM}))},playSeClick:()=>{t($e({key:"uiSe",value:XM}))},playSePageChange:()=>{t($e({key:"uiSe",value:Une}))},playSeDialogOpen:()=>{t($e({key:"uiSe",value:Vne}))},playSeSwitch:()=>{t($e({key:"uiSe",value:$ne}))}}},rE=()=>({playSeEnter:()=>{J.dispatch($e({key:"uiSe",value:WM}))},playSeClick:()=>{J.dispatch($e({key:"uiSe",value:XM}))}}),Die=""+new URL("progress-bar-bg.png",import.meta.url).href,Mie=""+new URL("progress-bar.png",import.meta.url).href;class nE{constructor(e,r){Re(this,"text");Re(this,"jump");Re(this,"jumpToScene");Re(this,"showCondition");Re(this,"enableCondition");Re(this,"style");this.text=e,this.jump=r,this.jumpToScene=r.match(/\./)!==null}static parse(e){const r=e.split("->"),n=r.length>1?r[0]:null,i=r.length>1?r[1]:r[0],a=i.split(":"),o=a[0].replace(/\${[^{}]*}/,""),s=new nE(o,a[1]),c=/\$\{(.*?)\}/,l=i.match(c);if(l){const f=l[1].split(","),h={};f.forEach(d=>{const[p,v]=d.split("=");p&&v&&(h[p.trim()]=isNaN(Number(v.trim()))?v.trim():Number(v.trim()))}),s.style=h}if(n!==null){const u=n.match(/\((.*)\)/);u&&(s.showCondition=u[1]);const f=n.match(/\[(.*)\]/);f&&(s.enableCondition=f[1])}return s}}const qx=(t,e)=>{const n=t.content.split("|").map(u=>nE.parse(u)),a=J.getState().userData.optionData.textboxFont===fs.song?'"思源宋体", serif':'"WebgalUI", serif',{playSeEnter:o,playSeClick:s}=rE();let c={current:null};const l=u=>u.filter((f,h)=>Vx(f.showCondition)).map((f,h)=>{var g,m;const d=Vx(f.enableCondition);let p=d?Uo.Choose_item:Uo.Choose_item_disabled;const v=()=>{if(!(!d||c.current)){if(s(),e==null||e(),c.current&&(clearTimeout(c.current),c.current=null),f.jumpToScene){const x=f.jump.split("./game/scene/")[1];GM(f.jump,x)}else zM(f.jump);j.gameplay.performController.unmountPerform("choose")}},y={fontFamily:a};if(f.style&&(typeof f.style.x=="number"&&(y.position="absolute",y.left=f.style.x+"px",y.transform="translateX(-50%)"),typeof f.style.y=="number"&&(y.position="absolute",y.top=f.style.y+"px",y.transform?y.transform+=" translateY(-50%)":y.transform="translateY(-50%)"),typeof f.style.scale=="number"&&(y.transform?y.transform+=" scale("+f.style.scale+")":y.transform="scale("+f.style.scale+")"),typeof f.style.fontSize=="number"&&(y.fontSize=f.style.fontSize+"px"),typeof f.style.fontColor=="string"&&f.style.fontColor[0]==="#"&&(y.color=f.style.fontColor)),typeof((g=f.style)==null?void 0:g.countdown)=="number"){p=d?Uo.Choose_item_countdown:Uo.Choose_item_countdown_disabled;let x=f.style.countdown,b=1082,_=1082/(x*1e3/16);const S=()=>{x<=0&&c.current?(clearTimeout(c),c.current=null,v()):c.current=setTimeout(()=>{x-=.016,b-=_;let E=document.getElementById("rect");E==null||E.setAttribute("width",Math.max(0,b).toString()),S()},16)};return S(),k.jsxs(zt.Fragment,{children:[k.jsxs("div",{className:p,style:y,onClick:v,children:[k.jsx("img",{src:Die,alt:f.text,style:{width:"1082px",height:"106px"}}),k.jsx("img",{src:Mie,className:Uo.Choose_item_progress_bar})]}),k.jsx("svg",{width:"0",height:"0",children:k.jsx("defs",{children:k.jsx("clipPath",{id:"myClip",children:k.jsx("rect",{id:"rect",width:"1082",height:"106",rx:"53",ry:"53",style:{fill:"#ffffff"}})})})})]},f.jump+h)}if((m=f.style)!=null&&m.image){p=Uo.Choose_item_image;const x=pr(f.style.image,dr.ui),b=`img-option-${h}`,_=new Image;return _.src=x,_.onload=function(){let S=document.getElementById(b);_.style.width=_.naturalWidth+"px",_.style.height=_.naturalHeight+"px",_.alt=f.text,S&&(S.style.width=_.naturalWidth+"px",S.style.height=_.naturalHeight+"px",setTimeout(()=>{S==null||S.prepend(_),S=null},32))},k.jsx("div",{id:b,className:p,style:y,onClick:v,onMouseEnter:d?o:void 0,children:k.jsx("span",{children:f.text})},f.jump+h)}return k.jsx("div",{className:p,style:y,onClick:v,onMouseEnter:d?o:void 0,children:f.text},f.jump+h)});return xs.render(k.jsx("div",{className:Uo.Choose_Main,children:l(n)}),document.getElementById("chooseContainer")),{performName:"choose",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{xs.render(k.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},Lie=t=>(Ae.debug(`脚本内注释${t.content}`),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Bie=t=>(t.content!==""&&t.content!=="none"?J.dispatch($e({key:"enableFilm",value:t.content})):J.dispatch($e({key:"enableFilm",value:""})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Nie="_Choose_Main_4xkm5_1",jie="_Choose_item_4xkm5_13",Uie="_glabalDialog_container_inner_4xkm5_28",$ie="_glabalDialog_container_4xkm5_28",Vie="_title_4xkm5_47",Gie="_button_4xkm5_59",qs={Choose_Main:Nie,Choose_item:jie,glabalDialog_container_inner:Uie,glabalDialog_container:$ie,title:Vie,button:Gie},zie=t=>{const e=t.content.toString().trim(),r=ot(t,"title"),n=(r===0?"Please Input":r)??"Please Input",i=ot(t,"buttonText"),a=(i===0?"OK":i)??"OK",s=J.getState().userData.optionData.textboxFont===fs.song?'"思源宋体", serif':'"WebgalUI", serif',{playSeEnter:c,playSeClick:l}=rE(),u=k.jsx("div",{style:{fontFamily:s},className:qs.glabalDialog_container,children:k.jsxs("div",{className:qs.glabalDialog_container_inner,children:[k.jsx("div",{className:qs.title,children:n}),k.jsx("input",{id:"user-input",className:qs.Choose_item}),k.jsx("div",{onMouseEnter:c,onClick:()=>{const f=document.getElementById("user-input");f&&J.dispatch(Zk({key:e,value:((f==null?void 0:f.value)??"")===""?" ":(f==null?void 0:f.value)??""})),l(),j.gameplay.performController.unmountPerform("userInput"),gr()},className:qs.button,children:a})]})});return xs.render(k.jsx("div",{className:qs.Choose_Main,children:u}),document.getElementById("chooseContainer")),{performName:"userInput",duration:1e3*60*60*24,isHoldOn:!1,stopFunction:()=>{xs.render(k.jsx("div",{}),document.getElementById("chooseContainer"))},blockingNext:()=>!0,blockingAuto:()=>!0,stopTimeout:void 0}},Wie="_FullScreenPerform_main_7er8a_2",Xie="_FullScreenPerform_element_7er8a_9",Hie="_fullScreen_video_7er8a_17",Yie="_fadeIn_7er8a_74",qie="_intro_showSoftly_7er8a_1",Kie="_slideIn_7er8a_80",Zie="_typingEffect_7er8a_86",Qie="_typing_7er8a_86",Jie="_blinkCursor_7er8a_1",eae="_pixelateEffect_7er8a_95",tae="_pixelateAnimation_7er8a_1",rae="_revealAnimation_7er8a_101",nae="_videoContainer_7er8a_115",Xa={FullScreenPerform_main:Wie,FullScreenPerform_element:Xie,fullScreen_video:Hie,fadeIn:Yie,intro_showSoftly:qie,slideIn:Kie,typingEffect:Zie,typing:Qie,blinkCursor:Jie,pixelateEffect:eae,pixelateAnimation:tae,revealAnimation:rae,videoContainer:nae},iae=t=>{const e=`introPerform${Math.random().toString()}`;let r,n="rgba(0, 0, 0, 1)",i="rgba(255, 255, 255, 1)";const a=(_,S=0)=>{switch(_){case"fadeIn":return Xa.fadeIn;case"slideIn":return Xa.slideIn;case"typingEffect":return`${Xa.typingEffect} ${S}`;case"pixelateEffect":return Xa.pixelateEffect;case"revealAnimation":return Xa.revealAnimation;default:return Xa.fadeIn}};let o=Xa.fadeIn,s=1500,c=!1;for(const _ of t.args){if(_.key==="backgroundColor"&&(n=_.value||"rgba(0, 0, 0, 1)"),_.key==="fontColor"&&(i=_.value||"rgba(255, 255, 255, 1)"),_.key==="fontSize")switch(_.value){case"small":r="280%";break;case"medium":r="350%";break;case"large":r="420%";break}if(_.key==="animation"&&(o=a(_.value)),_.key==="delayTime"){const S=parseInt(_.value.toString(),10);s=isNaN(S)?s:S}_.key==="hold"&&_.value===!0&&(c=!0)}const l={background:n,color:i,fontSize:r||"350%",width:"100%",height:"100%"},u=t.content.split(/\|/);let h=1e3+s*u.length;const d=c?1e3*60*60*24:1e3+s*u.length;let p=!0,v=setTimeout(()=>{p=!1},h),y=setTimeout(()=>{});const g=()=>{const _=document.getElementById("introContainer");if(h-=s,clearTimeout(v),v=setTimeout(()=>{p=!1},h),_){const S=_.childNodes[0].childNodes[0].childNodes,E=S.length;S.forEach((w,C)=>{const A=Number(w.style.animationDelay.split("ms")[0]);A>0&&(w.style.animationDelay=`${A-s}ms`),C===E-1&&(A===0?(clearTimeout(y),j.gameplay.performController.unmountPerform(e)):(clearTimeout(y),c||(y=setTimeout(()=>{j.gameplay.performController.unmountPerform(e),setTimeout(gr,0)},h))))})}};j.events.userInteractNext.on(g);const m=u.map((_,S)=>k.jsxs("div",{style:{animationDelay:`${s*S}ms`},className:o,children:[_,_===""?" ":""]},"introtext"+S+Math.random().toString())),x=k.jsx("div",{style:l,children:k.jsx("div",{style:{padding:"3em 4em 3em 4em"},children:m})});xs.render(x,document.getElementById("introContainer"));const b=document.getElementById("introContainer");return b&&(b.style.display="block"),{performName:e,duration:d,isHoldOn:!1,stopFunction:()=>{const _=document.getElementById("introContainer");_&&(_.style.display="none"),j.events.userInteractNext.off(g)},blockingNext:()=>p,blockingAuto:()=>p,stopTimeout:void 0,goNextWhenOver:!0}},aae=t=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),oae=t=>{let e=t.content;return(t.content==="none"||t.content==="")&&(e=""),J.dispatch($e({key:"miniAvatar",value:e})),{performName:"none",duration:0,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},sae="modulepreload",lae=function(t,e){return new URL(t,e).href},iP={},uae=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=lae(a,n),a in iP)return;iP[a]=!0;const o=a.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":sae,o||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),o)return new Promise((u,f)=>{l.addEventListener("load",u),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},o3=new Map;function cae(t){return t?typeof t=="string"?t:t():null}function s3(t){const e=cae(t);return e||(Ae.error("Get name of perform failed. There no name of the perform."),"")}function CCe(t,e){if(!e||typeof e!="function")throw new Error(`"${t}" is not a callback.`);o3.set(s3(t),e)}function fae(t,e=[]){const r=o3.get(s3(t));if(!r||!(r instanceof Function))throw Ae.error(`Can't call the perform named "${t}"`),new Error(`"${t}" don't have the pixiPerform callback.`);return r(...e)}uae(()=>import("./initRegister-f2679fbe.js"),[],import.meta.url);const hae=t=>{const e="PixiPerform"+t.content;j.gameplay.performController.performList.forEach(a=>{if(a.performName===e)return{performName:"none",duration:0,isOver:!1,isHoldOn:!0,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}});const r=fae(t.content),{container:n,tickerKey:i}=r;return{performName:e,duration:0,isHoldOn:!0,stopFunction:()=>{var a,o;Ae.warn("现在正在卸载pixi演出"),n.destroy({texture:!0,baseTexture:!0}),(a=j.gameplay.pixiStage)==null||a.effectsContainer.removeChild(n),(o=j.gameplay.pixiStage)==null||o.removeAnimation(i)},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},dae=t=>{var a;Ae.debug("play SE");let e="effect-sound";j.gameplay.performController.unmountPerform(e,!0);let r=t.content,n=!1;ot(t,"id")&&(e=`effect-sound-${((a=ot(t,"id"))==null?void 0:a.toString())??""}`,j.gameplay.performController.unmountPerform(e,!0),n=!0);let i=!1;return{performName:"none",blockingAuto(){return!1},blockingNext(){return!1},isHoldOn:!1,stopFunction(){},stopTimeout:void 0,duration:1e3*60*60,arrangePerformPromise:new Promise(o=>{setTimeout(()=>{var p;const s=ot(t,"volume");let c=document.createElement("audio");c.src=r,n&&(c.loop=!0);const l=J.getState().userData,u=l.optionData.volumeMain,f=typeof s=="number"&&s>=0&&s<=100?s:100,h=u*.01*(((p=l.optionData)==null?void 0:p.seVolume)??100)*.01*f*.01;c.volume=h,c.currentTime=0;const d={performName:e,duration:1e3*60*60,isHoldOn:n,skipNextCollect:!0,stopFunction:()=>{c.pause()},blockingNext:()=>!1,blockingAuto:()=>n?!1:!i,stopTimeout:void 0};o(d),c==null||c.play(),c.onended=()=>{for(const v of j.gameplay.performController.performList)v.performName===e&&(i=!0,v.stopFunction(),j.gameplay.performController.unmountPerform(v.performName))}},1)})}},iE=()=>Math.random().toString().substring(0,10);class pae{constructor(){Re(this,"performList",[]);Re(this,"timeoutList",[])}arrangeNewPerform(e,r,n=!0){if(e.performName!=="none"){if(n){const i={id:e.performName,isHoldOn:e.isHoldOn,script:r};J.dispatch(Dn.addPerform(i))}e.stopTimeout=setTimeout(()=>{e.isHoldOn||(this.unmountPerform(e.performName),e.goNextWhenOver&&this.goNextWhenOver())},e.duration),this.performList.push(e)}}unmountPerform(e,r=!1){if(r)for(let n=0;n<this.performList.length;n++){const i=this.performList[n];i.performName===e&&(i.stopFunction(),clearTimeout(i.stopTimeout),this.performList.splice(n,1),n--,this.erasePerformFromState(e))}else for(let n=0;n<this.performList.length;n++){const i=this.performList[n];!i.isHoldOn&&i.performName===e&&(i.stopFunction(),clearTimeout(i.stopTimeout),this.performList.splice(n,1),n--)}}erasePerformFromState(e){J.dispatch(Dn.removePerformByName(e))}removeAllPerform(){for(const e of this.performList)e.stopFunction();this.performList=[];for(const e of this.timeoutList)clearTimeout(e)}goNextWhenOver(){let e=!1;this.performList.forEach(r=>{r.blockingAuto()&&(e=!0)}),e?setTimeout(this.goNextWhenOver,100):gr()}}const vae={saveData:[],quickSaveData:null,unlockStorylineList:[],saveVideoData:null,unlockAchieveData:[],isShowUnlock:!1,unlockAchieveAllTotal:0,unlockAchieveListAll:[],isLoadVideo:!1,isUnlockStoryline:!1,allUnlockAchieveList:[],allStorylineData:[]},l3=t0({name:"saveData",initialState:Zt(vae),reducers:{setFastSave:(t,e)=>{t.quickSaveData=e.payload},resetFastSave:t=>{t.quickSaveData=null},resetSaves:t=>{t.quickSaveData=null,t.saveData=[]},saveGame:(t,e)=>{t.saveData[e.payload.index]=e.payload.saveData},replaceSaveGame:(t,e)=>{t.saveData=e.payload},setStorylineListFromStorage:(t,e)=>{t.unlockStorylineList=e.payload},addStorylineList:(t,e)=>{t.unlockStorylineList.push(e.payload)},replaceStorylineList:(t,e)=>{t.unlockStorylineList[e.payload.index]={...t.unlockStorylineList[e.payload.index],storyLine:e.payload.data.storyLine}},setSaveVideoData:(t,e)=>{t.saveVideoData=e.payload},setUnlockAchieveData:(t,e)=>{t.unlockAchieveData=[...e.payload]},resetStorylineList:t=>{t.unlockStorylineList=[]},resetUnlockAchieveData:t=>{t.unlockAchieveData=[]},addUnlockAchieveData:(t,e)=>{const r=[...t.unlockAchieveData,e.payload];t.unlockAchieveData=r},replaceUnlockAchieveData:(t,e)=>{t.unlockAchieveData[e.payload.index]=e.payload.data},setIsShowUnlock:(t,e)=>{t.isShowUnlock=e.payload},setShowStoryline:(t,e)=>{t.isUnlockStoryline=e.payload},setUnlockAchieveAllTotal:(t,e)=>{t.unlockAchieveAllTotal=e.payload},setUnlockAchieveAll:(t,e)=>{t.unlockAchieveListAll=e.payload},setLoadVideo:(t,e)=>{t.isLoadVideo=e.payload},saveAllUnlockAchieveList:(t,e)=>{t.allUnlockAchieveList=e.payload},saveAllStorylineData:(t,e)=>{t.allStorylineData=e.payload}}}),_t=l3.actions,mae=l3.reducer;function gae(t,e){for(let r=t;r<=e;r++){const n=J.getState().saveData.saveData[r];n&&pa.setItem(`${j.gameKey}-saves${r}`,n).then(()=>{Ae.info(`存档${r}写入本地存储`)})}}async function Kf(t,e){for(let r=t;r<=e;r++){const n=await pa.getItem(`${j.gameKey}-saves${r}`);J.dispatch(_t.saveGame({index:r,saveData:n})),Ae.info(`存档${r}读取自本地存储`)}}async function yae(){const t=J.getState().saveData.quickSaveData;await pa.setItem(`${j.gameKey}-saves-fast`,t),Ae.info("快速存档写入本地存储")}async function u3(){const t=await pa.getItem(`${j.gameKey}-saves-fast`);J.dispatch(_t.setFastSave(t)),Ae.info("快速存档读取自本地存储")}async function c3(){const t=J.getState().saveData.unlockStorylineList;await pa.setItem(`${j.gameKey}-storyline`,{data:t}),Ae.info("故事线 >> 写入本地存储")}async function aE(){const t=await pa.getItem(`${j.gameKey}-storyline`);J.dispatch(_t.setStorylineListFromStorage((t==null?void 0:t.data)??[])),Ae.info("故事线 >> 读取自本地存储")}async function Kx(){const t=J.getState().saveData.unlockAchieveData;await pa.setItem(`${j.gameKey}-unlock-achieve`,{data:t}),Ae.info("解锁成就 >>> 写入本地存储")}async function xae(){const t=await pa.getItem(`${j.gameKey}-unlock-achieve`);J.dispatch(_t.setUnlockAchieveData((t==null?void 0:t.data)||[])),Ae.info("解锁成就 >>> 读取本地存储")}const fp=async(t,e)=>{const r=await f3(t,!0,e);J.dispatch(_t.saveGame({index:t,saveData:r})),gae(t,t)};async function f3(t,e=!0,r){const n=J.getState().stage,i=Zt(j.backlogManager.getBacklog());let a="";if(e){const c=document.getElementById("pixiCanvas"),l=document.createElement("canvas"),u=l.getContext("2d");l.width=480,l.height=270,u.drawImage(c,0,0,480,270),a=l.toDataURL("image/webp",.5),l.remove()}if(e&&!r){const c=j.videoManager.videosByKey[j.videoManager.currentPlayingVideo];c.player&&(a=c.poster)}const o=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1});return{nowStageState:Zt(n),backlog:i,index:t,saveName:r||o,saveTime:o,sceneData:{currentSentenceId:j.sceneManager.sceneData.currentSentenceId,sceneStack:Zt(j.sceneManager.sceneData.sceneStack),sceneName:j.sceneManager.sceneData.currentScene.sceneName,sceneUrl:j.sceneManager.sceneData.currentScene.sceneUrl},previewImage:a}}function _ae(){const t=J.getState().stage,e=Zt(j.backlogManager.getBacklog()),r=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),n={nowStageState:Zt(t),backlog:e,saveTime:r,saveName:"",index:-1,previewImage:"",sceneData:{currentSentenceId:j.sceneManager.sceneData.currentSentenceId,sceneStack:Zt(j.sceneManager.sceneData.sceneStack),sceneName:j.sceneManager.sceneData.currentScene.sceneName,sceneUrl:j.sceneManager.sceneData.currentScene.sceneUrl}};return J.dispatch(_t.setSaveVideoData(n)),n}const bae=t=>{const e=J.getState().userData,r=e.optionData.volumeMain,n=r*.01*e.optionData.vocalVolume*.01,i=r*.01*e.optionData.bgmVolume*.01,a="videoPlay."+iE();let o="",s=!1,c=!1;const l=Date.now();J.dispatch(nf(!1));const u={current:()=>{console.log("快进状态尝试跳过视频")}};t.args.forEach(p=>{p.key==="choose"&&(o="choose:"+p.value),p.key==="continueBgm"&&(c=p.value===!0),p.key==="loop"&&(s=p.value===!0)});const f=()=>{let p=ot(t,"skipOff"),v=!0;return j.gameplay.isFast&&j.gameplay.isSyncingWithOrigine?(v=!1,p&&(v=!0),s&&(v=!1),o!==""&&(v=!0,u.current())):(p||s||o!=="")&&(v=!0),v};j.videoManager.showVideo(t.content);let h=!1;return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:f,blockingAuto:()=>!0,stopTimeout:void 0,arrangePerformPromise:new Promise(p=>{const v=y=>{h=!0,y.stopFunction(),j.gameplay.performController.unmountPerform(y.performName)};setTimeout(()=>{const y=t.content,g=J.getState().saveData.isLoadVideo;j.videoManager.seek(y,.03),j.videoManager.setVolume(y,i),j.videoManager.setLoop(y,s);const m=o?o.slice(7).split("|").map(w=>"game/scene/"+w.split(":")[1]):[];m.length&&yu(m);const x=()=>{if(!g){for(const w of j.gameplay.performController.performList)if(w.performName===a)if(o!==""&&!s){const C=hp(o,`${l}.txt`,""),A=j.videoManager.getDuration(y);j.videoManager.seek(y,(A||0)-.03),j.videoManager.pauseVideo(y);const P=C.sentenceList[0],T=qx(P,()=>{v(w)});j.gameplay.performController.arrangeNewPerform(T,P)}else v(w),gr()}};u.current=x;const b={performName:a,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:(w=!1)=>{if(!c){const A=document.getElementById("currentBgm");A&&(A.volume=i.toString())}const C=document.getElementById("currentVocal");C&&(C.volume=n.toString()),j.videoManager.destroy(y,w)},blockingNext:f,blockingAuto:()=>!h,stopTimeout:void 0,goNextWhenOver:!0};if(p(b),!c){const C=document.getElementById("currentBgm");C&&(C.volume=0 .toString())}const _=0,S=document.getElementById("currentVocal");S&&(S.volume=_.toString()),j.videoManager.playVideo(y);const E=J.getState().saveData.saveData||[];if(E!=null&&E.length&&E.forEach(w=>{var C,A;(A=(C=w==null?void 0:w.nowStageState)==null?void 0:C.PerformList)==null||A.forEach(P=>{var T;((T=P==null?void 0:P.script)==null?void 0:T.content)===y&&setTimeout(()=>{J.dispatch(nf(!0))})})}),o&&s){const C=hp(o,`${l}.txt`,"").sentenceList[0],A=qx(C,x);j.gameplay.performController.arrangeNewPerform(A,C)}setTimeout(()=>{_ae()},1e3),j.videoManager.onEnded(y,()=>{if(s)j.videoManager.seek(y,.03),j.videoManager.playVideo(y);else{const w=J.getState().stage.showValueList;if(w!=null&&w.length){const C=J.getState().stage.showValueName,A=w.filter(P=>P.showValueName!==C);J.dispatch(SW(A))}x()}})},100)})}},Sae=t=>{var o;J.getState().stage.currentDialogKey;const e=t.content,r=Mn(e),n=(((o=ot(t,"target"))==null?void 0:o.toString())??"default_id").toString(),i=`${n}-${e}-${r}`;let a;return setTimeout(()=>{var c,l;(c=j.gameplay.pixiStage)==null||c.stopPresetAnimationOnTarget(n);const s=cp(e,n,r);s&&(Ae.debug(`动画${e}作用在${n}`,r),(l=j.gameplay.pixiStage)==null||l.registerAnimation(s,i,n))},0),a=()=>{setTimeout(()=>{var s;J.getState().stage.currentDialogKey,(s=j.gameplay.pixiStage)==null||s.removeAnimationWithSetEffects(i)},0)},{performName:i,duration:r,isHoldOn:!1,stopFunction:a,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Eae(t,e){const r=j.gameplay.pixiStage.getStageObjByKey(t);function n(){r&&(r.pixiContainer.alpha=0,r.pixiContainer.blur=0)}function i(){r&&(r.pixiContainer.alpha=1,r.pixiContainer.blur=5)}function a(o){if(r){const s=r.pixiContainer,c=j.gameplay.pixiStage.frameDuration,l=e/c*o,u=1/l,f=5/l;s.alpha<1&&(s.alpha+=u),s.blur<5&&(s.blur+=f)}}return{setStartState:n,setEndState:i,tickerFunc:a}}const wae=[{name:"universalSoftIn",animationGenerateFunc:cM},{name:"universalSoftOff",animationGenerateFunc:fM},{name:"testblur",animationGenerateFunc:Eae}],Aae=t=>{var s,c,l;J.getState().stage.currentDialogKey;const e=t.content,r=ot(t,"duration")??0,n=((s=ot(t,"target"))==null?void 0:s.toString())??"0",i=`${n}-${e}-${r}`,a=Cae(e);let o=()=>{};if(a){Ae.debug(`动画${e}作用在${n}`,r);const u=a(n,r);(c=j.gameplay.pixiStage)==null||c.stopPresetAnimationOnTarget(n),(l=j.gameplay.pixiStage)==null||l.registerAnimation(u,i,n),o=()=>{var f;J.getState().stage.currentDialogKey,(f=j.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(i)}}return{performName:i,duration:r,isHoldOn:!1,stopFunction:o,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Cae(t){const e=wae.find(r=>r.name===t);return Ae.debug("装载动画",e),e?e.animationGenerateFunc:null}const Tae=t=>({performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Pae=t=>{var l;J.getState().stage.currentDialogKey;const e=(Math.random()*10).toString(16),r=t.content;let n;try{n=JSON.parse(r)}catch{n=[]}const i={name:e,effects:n};j.animationManager.addAnimation(i);const a=Mn(e),o=((l=ot(t,"target"))==null?void 0:l.toString())??"0",s=`${o}-${e}-${a}`;let c=()=>{};return setTimeout(()=>{var f,h;(f=j.gameplay.pixiStage)==null||f.stopPresetAnimationOnTarget(o);const u=cp(e,o,a);u&&(Ae.debug(`动画${e}作用在${o}`,a),(h=j.gameplay.pixiStage)==null||h.registerAnimation(u,s,o))},0),c=()=>{setTimeout(()=>{var u;J.getState().stage.currentDialogKey,(u=j.gameplay.pixiStage)==null||u.removeAnimationWithSetEffects(s)},0)},{performName:s,duration:a,isHoldOn:!1,stopFunction:c,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Oae(t){return t.content==="hide"?J.dispatch($e({key:"isDisableTextbox",value:!0})):J.dispatch($e({key:"isDisableTextbox",value:!1})),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const Rae=t=>{var u;J.getState().stage.currentDialogKey;const e=(Math.random()*10).toString(16),r=t.content;let n;const i=ot(t,"duration"),a=((u=ot(t,"target"))==null?void 0:u.toString())??"0";try{const f=JSON.parse(r);n=tf(a,f,i)}catch{n=[]}const o={name:e,effects:n};j.animationManager.addAnimation(o);const s=Fae(e),c=`${a}-${e}-${s}`;let l=()=>{};return setTimeout(()=>{var h,d;(h=j.gameplay.pixiStage)==null||h.stopPresetAnimationOnTarget(a);const f=Iae(e,a,s);f&&(Ae.debug(`动画${e}作用在${a}`,s),(d=j.gameplay.pixiStage)==null||d.registerAnimation(f,c,a))},0),l=()=>{setTimeout(()=>{var f;J.getState().stage.currentDialogKey,(f=j.gameplay.pixiStage)==null||f.removeAnimationWithSetEffects(c)},0)},{performName:c,duration:s,isHoldOn:!1,stopFunction:l,blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Iae(t,e,r){const n=j.animationManager.getAnimations().find(i=>i.name===t);if(n){const i=n.effects.map(a=>{const o=Zt({...GS,duration:0});return Object.assign(o,a),o.duration=a.duration,o});return Ae.debug("装载自定义动画",i),VM(i,e,r)}return null}function Fae(t){const e=j.animationManager.getAnimations().find(r=>r.name===t);if(e){let r=0;return e.effects.forEach(n=>{r+=n.duration}),r}return 0}const kae=t=>{let e="0";for(const r of t.args)r.key==="target"&&(e=r.value.toString());return ot(t,"enter")&&j.animationManager.nextEnterAnimationName.set(e,ot(t,"enter").toString()),ot(t,"exit")&&j.animationManager.nextExitAnimationName.set(e+"-off",ot(t,"exit").toString()),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!1,stopTimeout:void 0}},Dae=t=>{const e=t.content;let r=t.content,n="default";t.args.forEach(a=>{a.key==="name"&&(r=a.value.toString()),a.key==="series"&&(n=a.value.toString())}),Ae.info(`解锁BGM：${r}，路径：${e}，所属系列：${n}`),J.dispatch(pD({name:r,url:e,series:n}));const i=J.getState().userData;return pa.setItem(j.gameKey,i).then(()=>{}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Mae=t=>{const e=t.content;let r=t.content,n="default";t.args.forEach(a=>{a.key==="name"&&(r=a.value.toString()),a.key==="series"&&(n=a.value.toString())}),Ae.info(`解锁CG：${r}，路径：${e}，所属系列：${n}`),J.dispatch(dD({name:r,url:e,series:n}));const i=J.getState().userData;return pa.setItem(j.gameKey,i).then(()=>{}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},oE=(t,e=!0,r=!0)=>{t&&j.backlogManager.makeBacklogEmpty(),r&&j.videoManager.destroyAll(!0),e&&j.sceneManager.resetScene(),j.gameplay.performController.removeAllPerform(),j.gameplay.resetGamePlay();const n=Zt(Kk),i=J.getState().stage.GameVar;J.dispatch(u0(n)),e||J.dispatch($e({key:"GameVar",value:i})),J.dispatch(_t.setLoadVideo(!1))},Lae=t=>{oE(!0);const e=J.dispatch,r=pr("start.txt",dr.scene);return setTimeout(()=>{j.sceneManager.resetScene()},5),e(_t.resetFastSave()),S3(),Jn(r).then(n=>{j.sceneManager.setCurrentScene(n,"start.txt",r)}),e(Ye({component:"showTitle",visibility:!0})),uE(J.getState().GUI.titleBgm),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},Bae=t=>(zM(t.content),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Nae=t=>(j.gameplay.performController.performList.forEach(e=>{if(e.performName.match(/PixiPerform/)){Ae.warn("pixi 被脚本重新初始化",e.performName);for(let r=0;r<j.gameplay.performController.performList.length;r++){const n=j.gameplay.performController.performList[r];n.performName===e.performName&&(n.stopFunction(),clearTimeout(n.stopTimeout),j.gameplay.performController.performList.splice(r,1),r--)}J.dispatch(Dn.removeAllPixiPerforms())}}),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),xt={audioContext:new AudioContext,source:null,analyser:void 0,dataArray:void 0,audioLevelInterval:setInterval(()=>{},0),blinkTimerID:setTimeout(()=>{},0),maxAudioLevel:0},jae=t=>(xt.maxAudioLevel=Math.max(t,xt.maxAudioLevel),{OPEN_THRESHOLD:xt.maxAudioLevel*.75,HALF_OPEN_THRESHOLD:xt.maxAudioLevel*.5}),Uae=t=>{let e=!1;function r(){var n;e||t.animationEndTime&&Date.now()>t.animationEndTime||(e=!0,(n=j.gameplay.pixiStage)==null||n.performBlinkAnimation(t.key,t.animationItem,"closed",t.pos),xt.blinkTimerID=setTimeout(()=>{var a;(a=j.gameplay.pixiStage)==null||a.performBlinkAnimation(t.key,t.animationItem,"open",t.pos),e=!1;const i=Math.random()*300+3500;xt.blinkTimerID=setTimeout(r,i)},200))}r()},$ae=(t,e,r)=>{t.getByteFrequencyData(e);let n=0;for(let i=0;i<r;i++)n+=e[i];return n/r},aP=t=>{var h,d;const{audioLevel:e,OPEN_THRESHOLD:r,HALF_OPEN_THRESHOLD:n,currentMouthValue:i,lerpSpeed:a,key:o,animationItem:s,pos:c}=t;let l;e>r?l=1:e>n?l=.5:l=0;const u=i+(l-i)*a;(h=j.gameplay.pixiStage)==null||h.setModelMouthY(o,e);let f;u>.75?f="open":u>.25?f="half_open":f="closed",s!==void 0&&((d=j.gameplay.pixiStage)==null||d.performMouthSyncAnimation(o,s,f,c))};class Vae{constructor(e){Re(this,"subject");Re(this,"result");Re(this,"isEnd",!1);this.subject=e}with(e,r){return!this.isEnd&&this.subject===e&&(this.result=r(),this.isEnd=!0),this}endsWith(e,r){return!this.isEnd&&this.subject===e&&(this.result=r(),this.isEnd=!0),this.evaluate()}default(e){return this.isEnd||(this.result=e()),this.evaluate()}evaluate(){return this.result}}function Z0(t){return new Vae(t)}const Gae=t=>{Ae.debug("play vocal");const e="vocal-play",r=ot(t,"vocal"),n=ot(t,"volume");let i;i=J.getState().stage;let a="",o="";const s=i.freeFigure,c=i.figureAssociatedAnimation;let l=0,u=0;const f=1;let h=document.getElementById("currentVocal");j.gameplay.performController.unmountPerform("vocal-play",!0),h!==null&&(h.currentTime=0,h.pause());for(const p of t.args)p.value===!0&&Z0(p.key).with("left",()=>{a="left"}).with("right",()=>{a="right"}).endsWith("center",()=>{a="center"}),p.key==="figureId"&&(o=`${p.value.toString()}`);J.dispatch($e({key:"playVocal",value:r})),J.dispatch($e({key:"vocal",value:r}));let d=!1;return{arrangePerformPromise:new Promise(p=>{setTimeout(()=>{let v=document.getElementById("currentVocal");if(typeof n=="number"&&n>=0&&n<=100?J.dispatch($e({key:"vocalVolume",value:n})):J.dispatch($e({key:"vocalVolume",value:100})),v!==null){v.currentTime=0;const y={performName:e,duration:1e3*60*60,isOver:!1,isHoldOn:!1,stopFunction:()=>{clearInterval(xt.audioLevelInterval),v.pause(),o=o||`fig-${a}`;const m=c.find(x=>x.targetId===o);aP({audioLevel:0,OPEN_THRESHOLD:1,HALF_OPEN_THRESHOLD:1,currentMouthValue:u,lerpSpeed:f,key:o,animationItem:m,pos:a}),clearTimeout(xt.blinkTimerID)},blockingNext:()=>!1,blockingAuto:()=>!d,skipNextCollect:!0,stopTimeout:void 0};j.gameplay.performController.arrangeNewPerform(y,t,!1),o=o||`fig-${a}`;const g=c.find(m=>m.targetId===o);if(g){const m=s.find(_=>_.key===o);if(m&&(a=m.basePosition),!xt.audioContext){let _;_=new AudioContext,xt.analyser=_.createAnalyser(),xt.analyser.fftSize=256,xt.dataArray=new Uint8Array(xt.analyser.frequencyBinCount)}xt.analyser||(xt.analyser=xt.audioContext.createAnalyser(),xt.analyser.fftSize=256),l=xt.analyser.frequencyBinCount,xt.dataArray=new Uint8Array(l);let x=document.getElementById("currentVocal");xt.source||(xt.source=xt.audioContext.createMediaElementSource(x),xt.source.connect(xt.analyser)),xt.analyser.connect(xt.audioContext.destination),xt.audioLevelInterval=setInterval(()=>{const _=$ae(xt.analyser,xt.dataArray,l),{OPEN_THRESHOLD:S,HALF_OPEN_THRESHOLD:E}=jae(_);aP({audioLevel:_,OPEN_THRESHOLD:S,HALF_OPEN_THRESHOLD:E,currentMouthValue:u,lerpSpeed:f,key:o,animationItem:g,pos:a})},50);let b;b=Date.now()+1e4,Uae({key:o,animationItem:g,pos:a,animationEndTime:b}),setTimeout(()=>{clearTimeout(xt.blinkTimerID)},1e4)}v==null||v.play(),v.onended=()=>{for(const m of j.gameplay.performController.performList)m.performName===e&&(d=!0,m.stopFunction(),j.gameplay.performController.unmountPerform(m.performName))}}},1)})}};function h3(t){switch(t){case Ma.slow:return 80;case Ma.normal:return 35;case Ma.fast:return 3}}function zae(t){switch(t){case Ma.slow:return 800;case Ma.normal:return 350;case Ma.fast:return 200}}const Wae=t=>{const e=J.getState().stage,r=J.getState().userData,n=J.dispatch;let i=Math.random().toString(),a=t.content;const o=ot(t,"concat"),s=ot(t,"notend"),c=ot(t,"speaker"),l=ot(t,"clear"),u=ot(t,"vocal");o?(i=e.currentDialogKey,a=e.showText+a,n($e({key:"currentConcatDialogPrev",value:e.showText}))):n($e({key:"currentConcatDialogPrev",value:""})),n($e({key:"showText",value:a})),n($e({key:"vocal",value:""})),r.optionData.voiceInterruption===SS.no&&u===null||(n($e({key:"playVocal",value:""})),j.gameplay.performController.unmountPerform("vocal-play",!0)),n($e({key:"currentDialogKey",value:i}));const h=h3(r.optionData.textSpeed)*t.content.length;for(const y of t.args)if(y.key==="fontSize")switch(y.value){case"default":n($e({key:"showTextSize",value:-1}));break;case"small":n($e({key:"showTextSize",value:yo.small}));break;case"medium":n($e({key:"showTextSize",value:yo.medium}));break;case"large":n($e({key:"showTextSize",value:yo.large}));break}let d=e.showName;c!==null&&(d=c),l&&(d=""),n($e({key:"showName",value:d})),u&&Gae(t);const p=iE();let v=750-r.optionData.textSpeed*250;return s&&(v=0),{performName:p,duration:h+v,isHoldOn:!1,stopFunction:()=>{j.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0,goNextWhenOver:s}},Xae=t=>{const e=J.getState().stage,r=J.getState().userData,n=J.dispatch,i={stageGameVar:e.GameVar,globalGameVar:r.globalGameVar};n($e({key:"showText",value:JSON.stringify(i)})),n($e({key:"showName",value:"展示变量"})),Ae.debug("展示变量：",i),setTimeout(()=>{j.events.textSettle.emit()},0);const a=iE(),o=750-r.optionData.textSpeed*250;return{performName:a,duration:o,isHoldOn:!1,stopFunction:()=>{j.events.textSettle.emit()},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function dt(t,e,r){return{scriptType:t,scriptFunction:e,...r}}const d3={};function Hae(t){const e={};for(const[r,n]of Object.entries(t))e[r]=d3[n.scriptType]={scriptString:r,...n};return e}const Fn=t=>(typeof t=="string"?Number(t):t)/.5,Yae=t=>{const{content:e}=t,r=e.split(",");for(const n of r){const i=n.split("->");if(i.length>=2){const a=i[0],o=i[1];J.dispatch(Dn.replaceUIlable([a,o]))}}return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}},qae=t=>(console.log("解锁故事线 >>>>>>>> start : ",{sentence:t}),(async()=>{var s,c;await aE(),t!=null&&t.content;const r={};if(t.args.forEach(l=>{var u;switch(l.key){case"name":r.name=((u=l.value)==null?void 0:u.toString())??"";break;case"x":r.x=l.value&&Number(l.value)||0;break;case"y":r.y=l.value&&Number(l.value)||0;break;case"hideName":r.isHideName=l.value.toString()==="true";break}}),!r.name)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const n=J.getState().saveData,i=(s=n.unlockStorylineList)==null?void 0:s.findIndex(l=>l.storyLine.name===r.name);let a;i!==-1&&(a=n.unlockStorylineList[i]);const o={name:r.name||"",thumbnailUrl:r.thumbnailUrl||"",x:r.x||0,y:r.y||0,isHideName:r.isHideName||!1,isUnlock:((c=a==null?void 0:a.storyLine)==null?void 0:c.isUnlock)||n.isUnlockStoryline||!1};i===-1?J.dispatch(_t.addStorylineList({storyLine:o,videoData:J.getState().saveData.saveVideoData})):J.dispatch(_t.replaceStorylineList({index:i,data:{storyLine:o,videoData:J.getState().saveData.saveVideoData}})),c3()})(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}),Kae=t=>{var l;console.log("解锁成就 >>>>>>>> start : ",{sentence:t});let e=(t==null?void 0:t.content)||"";const r={};if(r.url=e,t.args.forEach(u=>{var f,h;switch(u.key){case"unlockname":r.unlockname=((f=u.value)==null?void 0:f.toString())??"";break;case"x":r.x=u.value&&Number(u.value)||0;break;case"y":r.y=u.value&&Number(u.value)||0;break;case"condition":r.condition=((h=u.value)==null?void 0:h.toString())??"";break}}),!r.unlockname||!r.url)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const n=J.getState().saveData;if(!n.isShowUnlock)return{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0};const i=(l=n.unlockAchieveData)==null?void 0:l.findIndex(u=>u.unlockname===r.unlockname&&u.url===r.url);let a;i!==-1&&(a=n.unlockAchieveData[i]);const o=new Date().toLocaleDateString()+" "+new Date().toLocaleTimeString("chinese",{hour12:!1}),s={unlockname:r.unlockname||"",url:r.url||"",x:r.x||0,y:r.y||0,condition:r.condition||"",saveTime:o,isShowUnlock:(a==null?void 0:a.isShowUnlock)||n.isShowUnlock||!1},c=n.allUnlockAchieveList.map(u=>(u.unlockname===r.unlockname&&r.url&&r.url.includes(u.url)&&(u=s),u));return J.dispatch(_t.saveAllUnlockAchieveList(c)),i===-1?J.dispatch(_t.addUnlockAchieveData(s)):J.dispatch(_t.replaceUnlockAchieveData({index:i,data:s})),Kx(),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}};function Zae(t){const e={isShowValueSWitch:!1,showValueName:"",showValueAxisX:0,showValueAxisY:0};return t!=null&&t.content&&(J.dispatch($e({key:"showValueName",value:t.content})),e.showValueName=t.content),t.args.forEach(r=>{r.key==="switchValue"?(J.dispatch($e({key:"isShowValueSWitch",value:r.value})),e.isShowValueSWitch=!!r.value):r.key==="x"?(J.dispatch($e({key:"showValueAxisX",value:Number(r.value)})),e.showValueAxisX=Number(r.value)):r.key==="y"&&(J.dispatch($e({key:"showValueAxisY",value:Number(r.value)})),e.showValueAxisY=Number(r.value))}),J.dispatch(bW(e)),{performName:"none",duration:0,isHoldOn:!1,stopFunction:()=>{},blockingNext:()=>!1,blockingAuto:()=>!0,stopTimeout:void 0}}const p3=Hae({intro:dt(Je.intro,iae),changeBg:dt(Je.changeBg,Rne),changeFigure:dt(Je.changeFigure,Ine),miniAvatar:dt(Je.miniAvatar,oae,{next:!0}),changeScene:dt(Je.changeScene,Fne),choose:dt(Je.choose,qx),end:dt(Je.end,Lae),bgm:dt(Je.bgm,EK,{next:!0}),playVideo:dt(Je.video,bae),setComplexAnimation:dt(Je.setComplexAnimation,Aae),setFilter:dt(Je.setFilter,Tae),pixiInit:dt(Je.pixiInit,Nae,{next:!0}),pixiPerform:dt(Je.pixi,hae,{next:!0}),label:dt(Je.label,aae,{next:!0}),jumpLabel:dt(Je.jumpLabel,Bae),setVar:dt(Je.setVar,AQ,{next:!0}),showVars:dt(Je.showVars,Xae),unlockCg:dt(Je.unlockCg,Mae,{next:!0}),unlockBgm:dt(Je.unlockBgm,Dae,{next:!0}),say:dt(Je.say,Wae),filmMode:dt(Je.filmMode,Bie,{next:!0}),callScene:dt(Je.callScene,xJ),setTextbox:dt(Je.setTextbox,Oae),setAnimation:dt(Je.setAnimation,Sae),playEffect:dt(Je.playEffect,dae,{next:!0}),setTempAnimation:dt(Je.setTempAnimation,Pae),__commment:dt(Je.comment,Lie,{next:!0}),setTransform:dt(Je.setTransform,Rae),setTransition:dt(Je.setTransition,kae,{next:!0}),getUserInput:dt(Je.getUserInput,zie),applyStyle:dt(Je.applyStyle,Yae,{next:!0}),unlockAchieve:dt(Je.unlockAchieve,Kae,{next:!0}),unlockStoryline:dt(Je.unlockStoryline,qae,{next:!0}),showValue:dt(Je.showValue,Zae,{next:!0})}),v3=Object.values(p3),Qae=v3.filter(t=>t.next).map(t=>t.scriptType),Q0=new SK(kX,pr,Qae,v3),hp=(t,e,r)=>{const n=Q0.parse(t,e,r);return Ae.info(`解析场景：${e}，数据为：`,n),n};var xo=(t=>(t.Start="start.txt",t.Achieve="achieve.txt",t.Storyline="storyline.txt",t))(xo||{});const oP={currentSentenceId:0,sceneStack:[],currentScene:{sceneName:"",sceneUrl:"",sentenceList:[],assetsList:[],subSceneList:[]}};class Jae{constructor(){Re(this,"settledScenes",[]);Re(this,"settledAssets",[]);Re(this,"sceneData",Zt(oP));Re(this,"sceneAssetsList",{});Re(this,"sceneAssetsLoadedList",{})}resetScene(){this.sceneData.currentSentenceId=0,this.sceneData.sceneStack=[],this.sceneData.currentScene=Zt(oP.currentScene)}setCurrentScene(e,r,n,i=!1){return new Promise(a=>{this.sceneData.currentScene=hp(e,r,n);const o=this.sceneData.currentScene.sentenceList;if(o!=null&&o.length&&r==="start.txt"){const s=this.compareFilenames(r,n);o.findIndex(l=>l.command===Je.unlockAchieve)===-1&&s&&(J.dispatch(_t.resetUnlockAchieveData()),Kx())}r==="storyline.txt"&&this.getAllStorylineList(o),r==="achieve.txt"&&this.getAllUnlockAchieveList(o),a(this.sceneData.currentScene)})}async getAllStorylineList(e){await aE();const r=new Map,n=new Map;J.getState().saveData.unlockStorylineList.forEach(o=>{const{name:s,isUnlock:c=!1}=o.storyLine||{};r.set(s,s),n.set(s,o.videoData)});const i=e.filter(o=>o.command===Je.unlockStoryline).map(o=>{const s={thumbnailUrl:(o==null?void 0:o.content)??"",name:"",x:0,y:0,isUnlock:!1,isHideName:!1},c={storyLine:{},videoData:null};return o.args.forEach(l=>{l.key==="name"?s.name=l.value.toString():l.key==="x"?s.x=Number(l.value):l.key==="y"?s.y=Number(l.value):l.key==="hideName"&&(s.isHideName=l.value.toString()==="true")}),r.get(s.name)&&n.get(s.name)?(s.isUnlock=!0,c.videoData=n.get(s.name)):s.isUnlock=!1,c.storyLine=s,c});J.dispatch(_t.saveAllStorylineData(i));const a=i.filter(o=>o.storyLine.isUnlock);J.dispatch(_t.setStorylineListFromStorage(a)),await c3()}async getAllUnlockAchieveList(e){await xae();const r=new Map,n=new Map;J.getState().saveData.unlockAchieveData.forEach(o=>{o.isShowUnlock&&(r.set(o.unlockname,o.isShowUnlock),n.set(o.unlockname,(o==null?void 0:o.saveTime)??""))});const i=e.filter(o=>o.command===Je.unlockAchieve).map(o=>{const s={url:(o==null?void 0:o.content)??"",unlockname:"",condition:"",saveTime:"",x:0,y:0,isShowUnlock:!1};return o.args.forEach(c=>{c.key==="unlockname"?s.unlockname=c.value.toString():c.key==="x"?s.x=Number(c.value):c.key==="y"?s.y=Number(c.value):c.key==="condition"&&(s.condition=c.value.toString())}),r!=null&&r.get(s==null?void 0:s.unlockname)&&(s.isShowUnlock=!0,s.saveTime=n==null?void 0:n.get(s==null?void 0:s.unlockname)),s});J.dispatch(_t.saveAllUnlockAchieveList(i));const a=i.filter(o=>o==null?void 0:o.isShowUnlock);J.dispatch(_t.setUnlockAchieveData(a)),await Kx()}compareFilenames(e,r){const n=e.match(/\/?([^/]+)\.\w+$/),i=r.match(/\/?([^/]+)\.\w+$/);return n&&i?n[1]===i[1]:!1}}class eoe{constructor(){Re(this,"nextEnterAnimationName",new Map);Re(this,"nextExitAnimationName",new Map);Re(this,"animations",[])}addAnimation(e){this.animations.push(e)}getAnimations(){return this.animations}}class toe{constructor(){Re(this,"isAuto",!1);Re(this,"isFast",!1);Re(this,"isSyncingWithOrigine",!1);Re(this,"autoInterval",null);Re(this,"fastInterval",null);Re(this,"autoTimeout",null);Re(this,"pixiStage",null);Re(this,"performController",new pae)}resetGamePlay(){this.performController.timeoutList=[],this.isAuto=!1,this.isFast=!1;const e=this.autoInterval;e!==null&&clearInterval(e),this.autoInterval=null;const r=this.fastInterval;r!==null&&clearInterval(r),this.fastInterval=null;const n=this.autoTimeout;n!==null&&clearInterval(n),this.autoTimeout=null}}function roe(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}class noe{constructor(){Re(this,"textSettle",bh("text-settle"));Re(this,"userInteractNext",bh("__NEXT"));Re(this,"fullscreenDbClick",bh("fullscreen-dbclick"));Re(this,"styleUpdate",bh("style-update"))}}const eg=roe();function bh(t){return{on:(e,r)=>{eg.on(`${t}-${r??""}`,e)},emit:(e,r)=>{eg.emit(`${t}-${r??""}`,e)},off:(e,r)=>{eg.off(`${t}-${r??""}`,e)}}}var m3={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(self,function(){return function(){var r={"./node_modules/es6-promise/dist/es6-promise.js":function(o,s,c){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(l,u){o.exports=u()})(this,function(){function l(ae){var ue=typeof ae;return ae!==null&&(ue==="object"||ue==="function")}function u(ae){return typeof ae=="function"}var f=void 0;Array.isArray?f=Array.isArray:f=function(ae){return Object.prototype.toString.call(ae)==="[object Array]"};var h=f,d=0,p=void 0,v=void 0,y=function(ue,me){O[d]=ue,O[d+1]=me,d+=2,d===2&&(v?v(R):D())};function g(ae){v=ae}function m(ae){y=ae}var x=typeof window<"u"?window:void 0,b=x||{},_=b.MutationObserver||b.WebKitMutationObserver,S=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",E=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function w(){return function(){return process.nextTick(R)}}function C(){return typeof p<"u"?function(){p(R)}:T()}function A(){var ae=0,ue=new _(R),me=document.createTextNode("");return ue.observe(me,{characterData:!0}),function(){me.data=ae=++ae%2}}function P(){var ae=new MessageChannel;return ae.port1.onmessage=R,function(){return ae.port2.postMessage(0)}}function T(){var ae=setTimeout;return function(){return ae(R,1)}}var O=new Array(1e3);function R(){for(var ae=0;ae<d;ae+=2){var ue=O[ae],me=O[ae+1];ue(me),O[ae]=void 0,O[ae+1]=void 0}d=0}function F(){try{var ae=Function("return this")().require("vertx");return p=ae.runOnLoop||ae.runOnContext,C()}catch{return T()}}var D=void 0;S?D=w():_?D=A():E?D=P():x===void 0?D=F():D=T();function V(ae,ue){var me=this,Fe=new this.constructor($);Fe[W]===void 0&&rt(Fe);var Te=me._state;if(Te){var Ne=arguments[Te-1];y(function(){return Ie(Te,Fe,Ne,me._result)})}else he(me,Fe,ae,ue);return Fe}function Y(ae){var ue=this;if(ae&&typeof ae=="object"&&ae.constructor===ue)return ae;var me=new ue($);return de(me,ae),me}var W=Math.random().toString(36).substring(2);function $(){}var I=void 0,B=1,L=2;function M(){return new TypeError("You cannot resolve a promise with itself")}function X(){return new TypeError("A promises callback cannot return that same promise.")}function K(ae,ue,me,Fe){try{ae.call(ue,me,Fe)}catch(Te){return Te}}function ne(ae,ue,me){y(function(Fe){var Te=!1,Ne=K(me,ue,function(Tt){Te||(Te=!0,ue!==Tt?de(Fe,Tt):fe(Fe,Tt))},function(Tt){Te||(Te=!0,oe(Fe,Tt))},"Settle: "+(Fe._label||" unknown promise"));!Te&&Ne&&(Te=!0,oe(Fe,Ne))},ae)}function te(ae,ue){ue._state===B?fe(ae,ue._result):ue._state===L?oe(ae,ue._result):he(ue,void 0,function(me){return de(ae,me)},function(me){return oe(ae,me)})}function ce(ae,ue,me){ue.constructor===ae.constructor&&me===V&&ue.constructor.resolve===Y?te(ae,ue):me===void 0?fe(ae,ue):u(me)?ne(ae,ue,me):fe(ae,ue)}function de(ae,ue){if(ae===ue)oe(ae,M());else if(l(ue)){var me=void 0;try{me=ue.then}catch(Fe){oe(ae,Fe);return}ce(ae,ue,me)}else fe(ae,ue)}function se(ae){ae._onerror&&ae._onerror(ae._result),Pe(ae)}function fe(ae,ue){ae._state===I&&(ae._result=ue,ae._state=B,ae._subscribers.length!==0&&y(Pe,ae))}function oe(ae,ue){ae._state===I&&(ae._state=L,ae._result=ue,y(se,ae))}function he(ae,ue,me,Fe){var Te=ae._subscribers,Ne=Te.length;ae._onerror=null,Te[Ne]=ue,Te[Ne+B]=me,Te[Ne+L]=Fe,Ne===0&&ae._state&&y(Pe,ae)}function Pe(ae){var ue=ae._subscribers,me=ae._state;if(ue.length!==0){for(var Fe=void 0,Te=void 0,Ne=ae._result,Tt=0;Tt<ue.length;Tt+=3)Fe=ue[Tt],Te=ue[Tt+me],Fe?Ie(me,Fe,Te,Ne):Te(Ne);ae._subscribers.length=0}}function Ie(ae,ue,me,Fe){var Te=u(me),Ne=void 0,Tt=void 0,sr=!0;if(Te){try{Ne=me(Fe)}catch(nn){sr=!1,Tt=nn}if(ue===Ne){oe(ue,X());return}}else Ne=Fe;ue._state!==I||(Te&&sr?de(ue,Ne):sr===!1?oe(ue,Tt):ae===B?fe(ue,Ne):ae===L&&oe(ue,Ne))}function Ee(ae,ue){try{ue(function(Fe){de(ae,Fe)},function(Fe){oe(ae,Fe)})}catch(me){oe(ae,me)}}var Be=0;function qe(){return Be++}function rt(ae){ae[W]=Be++,ae._state=void 0,ae._result=void 0,ae._subscribers=[]}function Xe(){return new Error("Array Methods must be provided an Array")}var Ge=function(){function ae(ue,me){this._instanceConstructor=ue,this.promise=new ue($),this.promise[W]||rt(this.promise),h(me)?(this.length=me.length,this._remaining=me.length,this._result=new Array(this.length),this.length===0?fe(this.promise,this._result):(this.length=this.length||0,this._enumerate(me),this._remaining===0&&fe(this.promise,this._result))):oe(this.promise,Xe())}return ae.prototype._enumerate=function(me){for(var Fe=0;this._state===I&&Fe<me.length;Fe++)this._eachEntry(me[Fe],Fe)},ae.prototype._eachEntry=function(me,Fe){var Te=this._instanceConstructor,Ne=Te.resolve;if(Ne===Y){var Tt=void 0,sr=void 0,nn=!1;try{Tt=me.then}catch($t){nn=!0,sr=$t}if(Tt===V&&me._state!==I)this._settledAt(me._state,Fe,me._result);else if(typeof Tt!="function")this._remaining--,this._result[Fe]=me;else if(Te===ht){var an=new Te($);nn?oe(an,sr):ce(an,me,Tt),this._willSettleAt(an,Fe)}else this._willSettleAt(new Te(function($t){return $t(me)}),Fe)}else this._willSettleAt(Ne(me),Fe)},ae.prototype._settledAt=function(me,Fe,Te){var Ne=this.promise;Ne._state===I&&(this._remaining--,me===L?oe(Ne,Te):this._result[Fe]=Te),this._remaining===0&&fe(Ne,this._result)},ae.prototype._willSettleAt=function(me,Fe){var Te=this;he(me,void 0,function(Ne){return Te._settledAt(B,Fe,Ne)},function(Ne){return Te._settledAt(L,Fe,Ne)})},ae}();function Qe(ae){return new Ge(this,ae).promise}function bt(ae){var ue=this;return h(ae)?new ue(function(me,Fe){for(var Te=ae.length,Ne=0;Ne<Te;Ne++)ue.resolve(ae[Ne]).then(me,Fe)}):new ue(function(me,Fe){return Fe(new TypeError("You must pass an array to race."))})}function er(ae){var ue=this,me=new ue($);return oe(me,ae),me}function Ct(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function It(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ht=function(){function ae(ue){this[W]=qe(),this._result=this._state=void 0,this._subscribers=[],$!==ue&&(typeof ue!="function"&&Ct(),this instanceof ae?Ee(this,ue):It())}return ae.prototype.catch=function(me){return this.then(null,me)},ae.prototype.finally=function(me){var Fe=this,Te=Fe.constructor;return u(me)?Fe.then(function(Ne){return Te.resolve(me()).then(function(){return Ne})},function(Ne){return Te.resolve(me()).then(function(){throw Ne})}):Fe.then(me,me)},ae}();ht.prototype.then=V,ht.all=Qe,ht.race=bt,ht.resolve=Y,ht.reject=er,ht._setScheduler=g,ht._setAsap=m,ht._asap=y;function Yt(){var ae=void 0;if(typeof c.g<"u")ae=c.g;else if(typeof self<"u")ae=self;else try{ae=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ue=ae.Promise;if(ue){var me=null;try{me=Object.prototype.toString.call(ue.resolve())}catch{}if(me==="[object Promise]"&&!ue.cast)return}ae.Promise=ht}return ht.polyfill=Yt,ht.Promise=ht,ht})},"./node_modules/events/events.js":function(o){var s=typeof Reflect=="object"?Reflect:null,c=s&&typeof s.apply=="function"?s.apply:function(T,O,R){return Function.prototype.apply.call(T,O,R)},l;s&&typeof s.ownKeys=="function"?l=s.ownKeys:Object.getOwnPropertySymbols?l=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:l=function(T){return Object.getOwnPropertyNames(T)};function u(P){console&&console.warn&&console.warn(P)}var f=Number.isNaN||function(T){return T!==T};function h(){h.init.call(this)}o.exports=h,o.exports.once=w,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var d=10;function p(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(P){if(typeof P!="number"||P<0||f(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");d=P}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||f(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function v(P){return P._maxListeners===void 0?h.defaultMaxListeners:P._maxListeners}h.prototype.getMaxListeners=function(){return v(this)},h.prototype.emit=function(T){for(var O=[],R=1;R<arguments.length;R++)O.push(arguments[R]);var F=T==="error",D=this._events;if(D!==void 0)F=F&&D.error===void 0;else if(!F)return!1;if(F){var V;if(O.length>0&&(V=O[0]),V instanceof Error)throw V;var Y=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw Y.context=V,Y}var W=D[T];if(W===void 0)return!1;if(typeof W=="function")c(W,this,O);else for(var $=W.length,I=_(W,$),R=0;R<$;++R)c(I[R],this,O);return!0};function y(P,T,O,R){var F,D,V;if(p(O),D=P._events,D===void 0?(D=P._events=Object.create(null),P._eventsCount=0):(D.newListener!==void 0&&(P.emit("newListener",T,O.listener?O.listener:O),D=P._events),V=D[T]),V===void 0)V=D[T]=O,++P._eventsCount;else if(typeof V=="function"?V=D[T]=R?[O,V]:[V,O]:R?V.unshift(O):V.push(O),F=v(P),F>0&&V.length>F&&!V.warned){V.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=P,Y.type=T,Y.count=V.length,u(Y)}return P}h.prototype.addListener=function(T,O){return y(this,T,O,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(T,O){return y(this,T,O,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(P,T,O){var R={fired:!1,wrapFn:void 0,target:P,type:T,listener:O},F=g.bind(R);return F.listener=O,R.wrapFn=F,F}h.prototype.once=function(T,O){return p(O),this.on(T,m(this,T,O)),this},h.prototype.prependOnceListener=function(T,O){return p(O),this.prependListener(T,m(this,T,O)),this},h.prototype.removeListener=function(T,O){var R,F,D,V,Y;if(p(O),F=this._events,F===void 0)return this;if(R=F[T],R===void 0)return this;if(R===O||R.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete F[T],F.removeListener&&this.emit("removeListener",T,R.listener||O));else if(typeof R!="function"){for(D=-1,V=R.length-1;V>=0;V--)if(R[V]===O||R[V].listener===O){Y=R[V].listener,D=V;break}if(D<0)return this;D===0?R.shift():S(R,D),R.length===1&&(F[T]=R[0]),F.removeListener!==void 0&&this.emit("removeListener",T,Y||O)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(T){var O,R,F;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[T]),this;if(arguments.length===0){var D=Object.keys(R),V;for(F=0;F<D.length;++F)V=D[F],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=R[T],typeof O=="function")this.removeListener(T,O);else if(O!==void 0)for(F=O.length-1;F>=0;F--)this.removeListener(T,O[F]);return this};function x(P,T,O){var R=P._events;if(R===void 0)return[];var F=R[T];return F===void 0?[]:typeof F=="function"?O?[F.listener||F]:[F]:O?E(F):_(F,F.length)}h.prototype.listeners=function(T){return x(this,T,!0)},h.prototype.rawListeners=function(T){return x(this,T,!1)},h.listenerCount=function(P,T){return typeof P.listenerCount=="function"?P.listenerCount(T):b.call(P,T)},h.prototype.listenerCount=b;function b(P){var T=this._events;if(T!==void 0){var O=T[P];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?l(this._events):[]};function _(P,T){for(var O=new Array(T),R=0;R<T;++R)O[R]=P[R];return O}function S(P,T){for(;T+1<P.length;T++)P[T]=P[T+1];P.pop()}function E(P){for(var T=new Array(P.length),O=0;O<T.length;++O)T[O]=P[O].listener||P[O];return T}function w(P,T){return new Promise(function(O,R){function F(V){P.removeListener(T,D),R(V)}function D(){typeof P.removeListener=="function"&&P.removeListener("error",F),O([].slice.call(arguments))}A(P,T,D,{once:!0}),T!=="error"&&C(P,F,{once:!0})})}function C(P,T,O){typeof P.on=="function"&&A(P,"error",T,O)}function A(P,T,O,R){if(typeof P.on=="function")R.once?P.once(T,O):P.on(T,O);else if(typeof P.addEventListener=="function")P.addEventListener(T,function F(D){R.once&&P.removeEventListener(T,F),O(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}},"./node_modules/webworkify-webpack/index.js":function(o,s,c){function l(g){var m={};function x(_){if(m[_])return m[_].exports;var S=m[_]={i:_,l:!1,exports:{}};return g[_].call(S.exports,S,S.exports,x),S.l=!0,S.exports}x.m=g,x.c=m,x.i=function(_){return _},x.d=function(_,S,E){x.o(_,S)||Object.defineProperty(_,S,{configurable:!1,enumerable:!0,get:E})},x.r=function(_){Object.defineProperty(_,"__esModule",{value:!0})},x.n=function(_){var S=_&&_.__esModule?function(){return _.default}:function(){return _};return x.d(S,"a",S),S},x.o=function(_,S){return Object.prototype.hasOwnProperty.call(_,S)},x.p="/",x.oe=function(_){throw console.error(_),_};var b=x(x.s=ENTRY_MODULE);return b.default||b}var u="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+u+").*?\\)";function h(g){return(g+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function d(g){return!isNaN(1*g)}function p(g,m,x){var b={};b[x]=[];var _=m.toString(),S=_.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!S)return b;for(var E=S[1],w=new RegExp("(\\\\n|\\W)"+h(E)+f,"g"),C;C=w.exec(_);)C[3]!=="dll-reference"&&b[x].push(C[3]);for(w=new RegExp("\\("+h(E)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+f,"g");C=w.exec(_);)g[C[2]]||(b[x].push(C[1]),g[C[2]]=c(C[1]).m),b[C[2]]=b[C[2]]||[],b[C[2]].push(C[4]);for(var A=Object.keys(b),P=0;P<A.length;P++)for(var T=0;T<b[A[P]].length;T++)d(b[A[P]][T])&&(b[A[P]][T]=1*b[A[P]][T]);return b}function v(g){var m=Object.keys(g);return m.reduce(function(x,b){return x||g[b].length>0},!1)}function y(g,m){for(var x={main:[m]},b={main:[]},_={main:{}};v(x);)for(var S=Object.keys(x),E=0;E<S.length;E++){var w=S[E],C=x[w],A=C.pop();if(_[w]=_[w]||{},!(_[w][A]||!g[w][A])){_[w][A]=!0,b[w]=b[w]||[],b[w].push(A);for(var P=p(g,g[w][A],w),T=Object.keys(P),O=0;O<T.length;O++)x[T[O]]=x[T[O]]||[],x[T[O]]=x[T[O]].concat(P[T[O]])}}return b}o.exports=function(g,m){m=m||{};var x={main:c.m},b=m.all?{main:Object.keys(x.main)}:y(x,g),_="";Object.keys(b).filter(function(A){return A!=="main"}).forEach(function(A){for(var P=0;b[A][P];)P++;b[A].push(P),x[A][P]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",_=_+"var "+A+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(P))+")({"+b[A].map(function(T){return""+JSON.stringify(T)+": "+x[A][T].toString()}).join(",")+`});
`}),_=_+"new (("+l.toString().replace("ENTRY_MODULE",JSON.stringify(g))+")({"+b.main.map(function(A){return""+JSON.stringify(A)+": "+x.main[A].toString()}).join(",")+"}))(self);";var S=new window.Blob([_],{type:"text/javascript"});if(m.bare)return S;var E=window.URL||window.webkitURL||window.mozURL||window.msURL,w=E.createObjectURL(S),C=new window.Worker(w);return C.objectURL=w,C}},"./src/config.js":function(o,s,c){c.r(s),c.d(s,{defaultConfig:function(){return l},createDefaultConfig:function(){return u}});var l={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:3*60,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:3*60,autoCleanupMinBackwardDuration:2*60,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function u(){return Object.assign({},l)}},"./src/core/features.js":function(o,s,c){c.r(s);var l=c("./src/io/io-controller.js"),u=c("./src/config.js"),f=function(){function h(){}return h.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},h.supportNetworkStreamIO=function(){var d=new l.default({},(0,u.createDefaultConfig)()),p=d.loaderType;return d.destroy(),p=="fetch-stream-loader"||p=="xhr-moz-chunked-loader"},h.getNetworkLoaderTypeName=function(){var d=new l.default({},(0,u.createDefaultConfig)()),p=d.loaderType;return d.destroy(),p},h.supportNativeMediaPlayback=function(d){h.videoElement==null&&(h.videoElement=window.document.createElement("video"));var p=h.videoElement.canPlayType(d);return p==="probably"||p=="maybe"},h.getFeatureList=function(){var d={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return d.mseFlvPlayback=h.supportMSEH264Playback(),d.networkStreamIO=h.supportNetworkStreamIO(),d.networkLoaderName=h.getNetworkLoaderTypeName(),d.mseLiveFlvPlayback=d.mseFlvPlayback&&d.networkStreamIO,d.nativeMP4H264Playback=h.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),d.nativeWebmVP8Playback=h.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),d.nativeWebmVP9Playback=h.supportNativeMediaPlayback('video/webm; codecs="vp9"'),d},h}();s.default=f},"./src/core/media-info.js":function(o,s,c){c.r(s);var l=function(){function u(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return u.prototype.isComplete=function(){var f=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,h=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&f&&h},u.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},u.prototype.getNearestKeyframe=function(f){if(this.keyframesIndex==null)return null;var h=this.keyframesIndex,d=this._search(h.times,f);return{index:d,milliseconds:h.times[d],fileposition:h.filepositions[d]}},u.prototype._search=function(f,h){var d=0,p=f.length-1,v=0,y=0,g=p;for(h<f[0]&&(d=0,y=g+1);y<=g;)if(v=y+Math.floor((g-y)/2),v===p||h>=f[v]&&h<f[v+1]){d=v;break}else f[v]<h?y=v+1:g=v-1;return d},u}();s.default=l},"./src/core/media-segment-info.js":function(o,s,c){c.r(s),c.d(s,{SampleInfo:function(){return l},MediaSegmentInfo:function(){return u},IDRSampleList:function(){return f},MediaSegmentInfoList:function(){return h}});var l=function(){function d(p,v,y,g,m){this.dts=p,this.pts=v,this.duration=y,this.originalDts=g,this.isSyncPoint=m,this.fileposition=null}return d}(),u=function(){function d(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return d.prototype.appendSyncPoint=function(p){p.isSyncPoint=!0,this.syncPoints.push(p)},d}(),f=function(){function d(){this._list=[]}return d.prototype.clear=function(){this._list=[]},d.prototype.appendArray=function(p){var v=this._list;p.length!==0&&(v.length>0&&p[0].originalDts<v[v.length-1].originalDts&&this.clear(),Array.prototype.push.apply(v,p))},d.prototype.getLastSyncPointBeforeDts=function(p){if(this._list.length==0)return null;var v=this._list,y=0,g=v.length-1,m=0,x=0,b=g;for(p<v[0].dts&&(y=0,x=b+1);x<=b;)if(m=x+Math.floor((b-x)/2),m===g||p>=v[m].dts&&p<v[m+1].dts){y=m;break}else v[m].dts<p?x=m+1:b=m-1;return this._list[y]},d}(),h=function(){function d(p){this._type=p,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(d.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),d.prototype.isEmpty=function(){return this._list.length===0},d.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},d.prototype._searchNearestSegmentBefore=function(p){var v=this._list;if(v.length===0)return-2;var y=v.length-1,g=0,m=0,x=y,b=0;if(p<v[0].originalBeginDts)return b=-1,b;for(;m<=x;)if(g=m+Math.floor((x-m)/2),g===y||p>v[g].lastSample.originalDts&&p<v[g+1].originalBeginDts){b=g;break}else v[g].originalBeginDts<p?m=g+1:x=g-1;return b},d.prototype._searchNearestSegmentAfter=function(p){return this._searchNearestSegmentBefore(p)+1},d.prototype.append=function(p){var v=this._list,y=p,g=this._lastAppendLocation,m=0;g!==-1&&g<v.length&&y.originalBeginDts>=v[g].lastSample.originalDts&&(g===v.length-1||g<v.length-1&&y.originalBeginDts<v[g+1].originalBeginDts)?m=g+1:v.length>0&&(m=this._searchNearestSegmentBefore(y.originalBeginDts)+1),this._lastAppendLocation=m,this._list.splice(m,0,y)},d.prototype.getLastSegmentBefore=function(p){var v=this._searchNearestSegmentBefore(p);return v>=0?this._list[v]:null},d.prototype.getLastSampleBefore=function(p){var v=this.getLastSegmentBefore(p);return v!=null?v.lastSample:null},d.prototype.getLastSyncPointBefore=function(p){for(var v=this._searchNearestSegmentBefore(p),y=this._list[v].syncPoints;y.length===0&&v>0;)v--,y=this._list[v].syncPoints;return y.length>0?y[y.length-1]:null},d}()},"./src/core/mse-controller.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),d=c("./src/core/mse-events.js"),p=c("./src/core/media-segment-info.js"),v=c("./src/utils/exception.js"),y=function(){function g(m){this.TAG="MSEController",this._config=m,this._emitter=new(u()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new p.IDRSampleList}return g.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},g.prototype.on=function(m,x){this._emitter.addListener(m,x)},g.prototype.off=function(m,x){this._emitter.removeListener(m,x)},g.prototype.attachMediaElement=function(m){if(this._mediaSource)throw new v.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var x=this._mediaSource=new window.MediaSource;x.addEventListener("sourceopen",this.e.onSourceOpen),x.addEventListener("sourceended",this.e.onSourceEnded),x.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=m,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),m.src=this._mediaSourceObjectURL},g.prototype.detachMediaElement=function(){if(this._mediaSource){var m=this._mediaSource;for(var x in this._sourceBuffers){var b=this._pendingSegments[x];b.splice(0,b.length),this._pendingSegments[x]=null,this._pendingRemoveRanges[x]=null,this._lastInitSegments[x]=null;var _=this._sourceBuffers[x];if(_){if(m.readyState!=="closed"){try{m.removeSourceBuffer(_)}catch(S){f.default.e(this.TAG,S.message)}_.removeEventListener("error",this.e.onSourceBufferError),_.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[x]=null,this._sourceBuffers[x]=null}}if(m.readyState==="open")try{m.endOfStream()}catch(S){f.default.e(this.TAG,S.message)}m.removeEventListener("sourceopen",this.e.onSourceOpen),m.removeEventListener("sourceended",this.e.onSourceEnded),m.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},g.prototype.appendInitSegment=function(m,x){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(m),this._pendingSegments[m.type].push(m);return}var b=m,_=""+b.container;b.codec&&b.codec.length>0&&(_+=";codecs="+b.codec);var S=!1;if(f.default.v(this.TAG,"Received Initialization Segment, mimeType: "+_),this._lastInitSegments[b.type]=b,_!==this._mimeTypes[b.type]){if(this._mimeTypes[b.type])f.default.v(this.TAG,"Notice: "+b.type+" mimeType changed, origin: "+this._mimeTypes[b.type]+", target: "+_);else{S=!0;try{var E=this._sourceBuffers[b.type]=this._mediaSource.addSourceBuffer(_);E.addEventListener("error",this.e.onSourceBufferError),E.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(w){f.default.e(this.TAG,w.message),this._emitter.emit(d.default.ERROR,{code:w.code,msg:w.message});return}}this._mimeTypes[b.type]=_}x||this._pendingSegments[b.type].push(b),S||this._sourceBuffers[b.type]&&!this._sourceBuffers[b.type].updating&&this._doAppendSegments(),h.default.safari&&b.container==="audio/mpeg"&&b.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=b.mediaDuration/1e3,this._updateMediaSourceDuration())},g.prototype.appendMediaSegment=function(m){var x=m;this._pendingSegments[x.type].push(x),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var b=this._sourceBuffers[x.type];b&&!b.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},g.prototype.seek=function(m){for(var x in this._sourceBuffers)if(this._sourceBuffers[x]){var b=this._sourceBuffers[x];if(this._mediaSource.readyState==="open")try{b.abort()}catch(A){f.default.e(this.TAG,A.message)}this._idrList.clear();var _=this._pendingSegments[x];if(_.splice(0,_.length),this._mediaSource.readyState!=="closed"){for(var S=0;S<b.buffered.length;S++){var E=b.buffered.start(S),w=b.buffered.end(S);this._pendingRemoveRanges[x].push({start:E,end:w})}if(b.updating||this._doRemoveRanges(),h.default.safari){var C=this._lastInitSegments[x];C&&(this._pendingSegments[x].push(C),b.updating||this._doAppendSegments())}}}},g.prototype.endOfStream=function(){var m=this._mediaSource,x=this._sourceBuffers;if(!m||m.readyState!=="open"){m&&m.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}x.video&&x.video.updating||x.audio&&x.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,m.endOfStream())},g.prototype.getNearestKeyframe=function(m){return this._idrList.getLastSyncPointBeforeDts(m)},g.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var m=this._mediaElement.currentTime;for(var x in this._sourceBuffers){var b=this._sourceBuffers[x];if(b){var _=b.buffered;if(_.length>=1&&m-_.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},g.prototype._doCleanupSourceBuffer=function(){var m=this._mediaElement.currentTime;for(var x in this._sourceBuffers){var b=this._sourceBuffers[x];if(b){for(var _=b.buffered,S=!1,E=0;E<_.length;E++){var w=_.start(E),C=_.end(E);if(w<=m&&m<C+3){if(m-w>=this._config.autoCleanupMaxBackwardDuration){S=!0;var A=m-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[x].push({start:w,end:A})}}else C<m&&(S=!0,this._pendingRemoveRanges[x].push({start:w,end:C}))}S&&!b.updating&&this._doRemoveRanges()}}},g.prototype._updateMediaSourceDuration=function(){var m=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(m.video&&m.video.updating||m.audio&&m.audio.updating)){var x=this._mediaSource.duration,b=this._pendingMediaDuration;b>0&&(isNaN(x)||b>x)&&(f.default.v(this.TAG,"Update MediaSource duration from "+x+" to "+b),this._mediaSource.duration=b),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},g.prototype._doRemoveRanges=function(){for(var m in this._pendingRemoveRanges)if(!(!this._sourceBuffers[m]||this._sourceBuffers[m].updating))for(var x=this._sourceBuffers[m],b=this._pendingRemoveRanges[m];b.length&&!x.updating;){var _=b.shift();x.remove(_.start,_.end)}},g.prototype._doAppendSegments=function(){var m=this._pendingSegments;for(var x in m)if(!(!this._sourceBuffers[x]||this._sourceBuffers[x].updating)&&m[x].length>0){var b=m[x].shift();if(b.timestampOffset){var _=this._sourceBuffers[x].timestampOffset,S=b.timestampOffset/1e3,E=Math.abs(_-S);E>.1&&(f.default.v(this.TAG,"Update MPEG audio timestampOffset from "+_+" to "+S),this._sourceBuffers[x].timestampOffset=S),delete b.timestampOffset}if(!b.data||b.data.byteLength===0)continue;try{this._sourceBuffers[x].appendBuffer(b.data),this._isBufferFull=!1,x==="video"&&b.hasOwnProperty("info")&&this._idrList.appendArray(b.info.syncPoints)}catch(w){this._pendingSegments[x].unshift(b),w.code===22?(this._isBufferFull||this._emitter.emit(d.default.BUFFER_FULL),this._isBufferFull=!0):(f.default.e(this.TAG,w.message),this._emitter.emit(d.default.ERROR,{code:w.code,msg:w.message}))}}},g.prototype._onSourceOpen=function(){if(f.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var m=this._pendingSourceBufferInit;m.length;){var x=m.shift();this.appendInitSegment(x,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(d.default.SOURCE_OPEN)},g.prototype._onSourceEnded=function(){f.default.v(this.TAG,"MediaSource onSourceEnded")},g.prototype._onSourceClose=function(){f.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},g.prototype._hasPendingSegments=function(){var m=this._pendingSegments;return m.video.length>0||m.audio.length>0},g.prototype._hasPendingRemoveRanges=function(){var m=this._pendingRemoveRanges;return m.video.length>0||m.audio.length>0},g.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(d.default.UPDATE_END)},g.prototype._onSourceBufferError=function(m){f.default.e(this.TAG,"SourceBuffer Error: "+m)},g}();s.default=y},"./src/core/mse-events.js":function(o,s,c){c.r(s);var l={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};s.default=l},"./src/core/transmuxer.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./node_modules/webworkify-webpack/index.js"),h=c.n(f),d=c("./src/utils/logger.js"),p=c("./src/utils/logging-control.js"),v=c("./src/core/transmuxing-controller.js"),y=c("./src/core/transmuxing-events.js"),g=c("./src/core/media-info.js"),m=function(){function x(b,_){if(this.TAG="Transmuxer",this._emitter=new(u()),_.enableWorker&&typeof Worker<"u")try{this._worker=h()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[b,_]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},p.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:p.default.getConfig()})}catch{d.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new v.default(b,_)}else this._controller=new v.default(b,_);if(this._controller){var S=this._controller;S.on(y.default.IO_ERROR,this._onIOError.bind(this)),S.on(y.default.DEMUX_ERROR,this._onDemuxError.bind(this)),S.on(y.default.INIT_SEGMENT,this._onInitSegment.bind(this)),S.on(y.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),S.on(y.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),S.on(y.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),S.on(y.default.MEDIA_INFO,this._onMediaInfo.bind(this)),S.on(y.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),S.on(y.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),S.on(y.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),S.on(y.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return x.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),p.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},x.prototype.on=function(b,_){this._emitter.addListener(b,_)},x.prototype.off=function(b,_){this._emitter.removeListener(b,_)},x.prototype.hasWorker=function(){return this._worker!=null},x.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},x.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},x.prototype.seek=function(b){this._worker?this._worker.postMessage({cmd:"seek",param:b}):this._controller.seek(b)},x.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},x.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},x.prototype._onInitSegment=function(b,_){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.INIT_SEGMENT,b,_)})},x.prototype._onMediaSegment=function(b,_){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.MEDIA_SEGMENT,b,_)})},x.prototype._onLoadingComplete=function(){var b=this;Promise.resolve().then(function(){b._emitter.emit(y.default.LOADING_COMPLETE)})},x.prototype._onRecoveredEarlyEof=function(){var b=this;Promise.resolve().then(function(){b._emitter.emit(y.default.RECOVERED_EARLY_EOF)})},x.prototype._onMediaInfo=function(b){var _=this;Promise.resolve().then(function(){_._emitter.emit(y.default.MEDIA_INFO,b)})},x.prototype._onMetaDataArrived=function(b){var _=this;Promise.resolve().then(function(){_._emitter.emit(y.default.METADATA_ARRIVED,b)})},x.prototype._onScriptDataArrived=function(b){var _=this;Promise.resolve().then(function(){_._emitter.emit(y.default.SCRIPTDATA_ARRIVED,b)})},x.prototype._onStatisticsInfo=function(b){var _=this;Promise.resolve().then(function(){_._emitter.emit(y.default.STATISTICS_INFO,b)})},x.prototype._onIOError=function(b,_){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.IO_ERROR,b,_)})},x.prototype._onDemuxError=function(b,_){var S=this;Promise.resolve().then(function(){S._emitter.emit(y.default.DEMUX_ERROR,b,_)})},x.prototype._onRecommendSeekpoint=function(b){var _=this;Promise.resolve().then(function(){_._emitter.emit(y.default.RECOMMEND_SEEKPOINT,b)})},x.prototype._onLoggingConfigChanged=function(b){this._worker&&this._worker.postMessage({cmd:"logging_config",param:b})},x.prototype._onWorkerMessage=function(b){var _=b.data,S=_.data;if(_.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(_.msg){case y.default.INIT_SEGMENT:case y.default.MEDIA_SEGMENT:this._emitter.emit(_.msg,S.type,S.data);break;case y.default.LOADING_COMPLETE:case y.default.RECOVERED_EARLY_EOF:this._emitter.emit(_.msg);break;case y.default.MEDIA_INFO:Object.setPrototypeOf(S,g.default.prototype),this._emitter.emit(_.msg,S);break;case y.default.METADATA_ARRIVED:case y.default.SCRIPTDATA_ARRIVED:case y.default.STATISTICS_INFO:this._emitter.emit(_.msg,S);break;case y.default.IO_ERROR:case y.default.DEMUX_ERROR:this._emitter.emit(_.msg,S.type,S.info);break;case y.default.RECOMMEND_SEEKPOINT:this._emitter.emit(_.msg,S);break;case"logcat_callback":d.default.emitter.emit("log",S.type,S.logcat);break}},x}();s.default=m},"./src/core/transmuxing-controller.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),d=c("./src/core/media-info.js"),p=c("./src/demux/flv-demuxer.js"),v=c("./src/remux/mp4-remuxer.js"),y=c("./src/demux/demux-errors.js"),g=c("./src/io/io-controller.js"),m=c("./src/core/transmuxing-events.js"),x=function(){function b(_,S){this.TAG="TransmuxingController",this._emitter=new(u()),this._config=S,_.segments||(_.segments=[{duration:_.duration,filesize:_.filesize,url:_.url}]),typeof _.cors!="boolean"&&(_.cors=!0),typeof _.withCredentials!="boolean"&&(_.withCredentials=!1),this._mediaDataSource=_,this._currentSegmentIndex=0;var E=0;this._mediaDataSource.segments.forEach(function(w){w.timestampBase=E,E+=w.duration,w.cors=_.cors,w.withCredentials=_.withCredentials,S.referrerPolicy&&(w.referrerPolicy=S.referrerPolicy)}),!isNaN(E)&&this._mediaDataSource.duration!==E&&(this._mediaDataSource.duration=E),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return b.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},b.prototype.on=function(_,S){this._emitter.addListener(_,S)},b.prototype.off=function(_,S){this._emitter.removeListener(_,S)},b.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},b.prototype._loadSegment=function(_,S){this._currentSegmentIndex=_;var E=this._mediaDataSource.segments[_],w=this._ioctl=new g.default(E,this._config,_);w.onError=this._onIOException.bind(this),w.onSeeked=this._onIOSeeked.bind(this),w.onComplete=this._onIOComplete.bind(this),w.onRedirect=this._onIORedirect.bind(this),w.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),S?this._demuxer.bindDataSource(this._ioctl):w.onDataArrival=this._onInitChunkArrival.bind(this),w.open(S)},b.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},b.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},b.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},b.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},b.prototype.seek=function(_){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var S=this._searchSegmentIndexContains(_);if(S===this._currentSegmentIndex){var E=this._mediaInfo.segments[S];if(E==null)this._pendingSeekTime=_;else{var w=E.getNearestKeyframe(_);this._remuxer.seek(w.milliseconds),this._ioctl.seek(w.fileposition),this._pendingResolveSeekPoint=w.milliseconds}}else{var C=this._mediaInfo.segments[S];if(C==null)this._pendingSeekTime=_,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(S);else{var w=C.getNearestKeyframe(_);this._internalAbort(),this._remuxer.seek(_),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[S].timestampBase,this._loadSegment(S,w.fileposition),this._pendingResolveSeekPoint=w.milliseconds,this._reportSegmentMediaInfo(S)}}this._enableStatisticsReporter()}},b.prototype._searchSegmentIndexContains=function(_){for(var S=this._mediaDataSource.segments,E=S.length-1,w=0;w<S.length;w++)if(_<S[w].timestampBase){E=w-1;break}return E},b.prototype._onInitChunkArrival=function(_,S){var E=this,w=null,C=0;if(S>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,C=this._demuxer.parseChunks(_,S);else if((w=p.default.probe(_)).match){this._demuxer=new p.default(w,this._config),this._remuxer||(this._remuxer=new v.default(this._config));var A=this._mediaDataSource;A.duration!=null&&!isNaN(A.duration)&&(this._demuxer.overridedDuration=A.duration),typeof A.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=A.hasAudio),typeof A.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=A.hasVideo),this._demuxer.timestampBase=A.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),C=this._demuxer.parseChunks(_,S)}else w=null,f.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){E._internalAbort()}),this._emitter.emit(m.default.DEMUX_ERROR,y.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),C=0;return C},b.prototype._onMediaInfo=function(_){var S=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},_),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,d.default.prototype));var E=Object.assign({},_);Object.setPrototypeOf(E,d.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=E,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var w=S._pendingSeekTime;S._pendingSeekTime=null,S.seek(w)})},b.prototype._onMetaDataArrived=function(_){this._emitter.emit(m.default.METADATA_ARRIVED,_)},b.prototype._onScriptDataArrived=function(_){this._emitter.emit(m.default.SCRIPTDATA_ARRIVED,_)},b.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},b.prototype._onIOComplete=function(_){var S=_,E=S+1;E<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(E)):(this._remuxer.flushStashedSamples(),this._emitter.emit(m.default.LOADING_COMPLETE),this._disableStatisticsReporter())},b.prototype._onIORedirect=function(_){var S=this._ioctl.extraData;this._mediaDataSource.segments[S].redirectedURL=_},b.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(m.default.RECOVERED_EARLY_EOF)},b.prototype._onIOException=function(_,S){f.default.e(this.TAG,"IOException: type = "+_+", code = "+S.code+", msg = "+S.msg),this._emitter.emit(m.default.IO_ERROR,_,S),this._disableStatisticsReporter()},b.prototype._onDemuxException=function(_,S){f.default.e(this.TAG,"DemuxException: type = "+_+", info = "+S),this._emitter.emit(m.default.DEMUX_ERROR,_,S)},b.prototype._onRemuxerInitSegmentArrival=function(_,S){this._emitter.emit(m.default.INIT_SEGMENT,_,S)},b.prototype._onRemuxerMediaSegmentArrival=function(_,S){if(this._pendingSeekTime==null&&(this._emitter.emit(m.default.MEDIA_SEGMENT,_,S),this._pendingResolveSeekPoint!=null&&_==="video")){var E=S.info.syncPoints,w=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,h.default.safari&&E.length>0&&E[0].originalDts===w&&(w=E[0].pts),this._emitter.emit(m.default.RECOMMEND_SEEKPOINT,w)}},b.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},b.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},b.prototype._reportSegmentMediaInfo=function(_){var S=this._mediaInfo.segments[_],E=Object.assign({},S);E.duration=this._mediaInfo.duration,E.segmentCount=this._mediaInfo.segmentCount,delete E.segments,delete E.keyframesIndex,this._emitter.emit(m.default.MEDIA_INFO,E)},b.prototype._reportStatisticsInfo=function(){var _={};_.url=this._ioctl.currentURL,_.hasRedirect=this._ioctl.hasRedirect,_.hasRedirect&&(_.redirectedURL=this._ioctl.currentRedirectedURL),_.speed=this._ioctl.currentSpeed,_.loaderType=this._ioctl.loaderType,_.currentSegmentIndex=this._currentSegmentIndex,_.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(m.default.STATISTICS_INFO,_)},b}();s.default=x},"./src/core/transmuxing-events.js":function(o,s,c){c.r(s);var l={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};s.default=l},"./src/core/transmuxing-worker.js":function(o,s,c){c.r(s);var l=c("./src/utils/logging-control.js"),u=c("./src/utils/polyfill.js"),f=c("./src/core/transmuxing-controller.js"),h=c("./src/core/transmuxing-events.js"),d=function(p){var v=null,y=T.bind(this);u.default.install(),p.addEventListener("message",function(O){switch(O.data.cmd){case"init":v=new f.default(O.data.param[0],O.data.param[1]),v.on(h.default.IO_ERROR,C.bind(this)),v.on(h.default.DEMUX_ERROR,A.bind(this)),v.on(h.default.INIT_SEGMENT,g.bind(this)),v.on(h.default.MEDIA_SEGMENT,m.bind(this)),v.on(h.default.LOADING_COMPLETE,x.bind(this)),v.on(h.default.RECOVERED_EARLY_EOF,b.bind(this)),v.on(h.default.MEDIA_INFO,_.bind(this)),v.on(h.default.METADATA_ARRIVED,S.bind(this)),v.on(h.default.SCRIPTDATA_ARRIVED,E.bind(this)),v.on(h.default.STATISTICS_INFO,w.bind(this)),v.on(h.default.RECOMMEND_SEEKPOINT,P.bind(this));break;case"destroy":v&&(v.destroy(),v=null),p.postMessage({msg:"destroyed"});break;case"start":v.start();break;case"stop":v.stop();break;case"seek":v.seek(O.data.param);break;case"pause":v.pause();break;case"resume":v.resume();break;case"logging_config":{var R=O.data.param;l.default.applyConfig(R),R.enableCallback===!0?l.default.addLogListener(y):l.default.removeLogListener(y);break}}});function g(O,R){var F={msg:h.default.INIT_SEGMENT,data:{type:O,data:R}};p.postMessage(F,[R.data])}function m(O,R){var F={msg:h.default.MEDIA_SEGMENT,data:{type:O,data:R}};p.postMessage(F,[R.data])}function x(){var O={msg:h.default.LOADING_COMPLETE};p.postMessage(O)}function b(){var O={msg:h.default.RECOVERED_EARLY_EOF};p.postMessage(O)}function _(O){var R={msg:h.default.MEDIA_INFO,data:O};p.postMessage(R)}function S(O){var R={msg:h.default.METADATA_ARRIVED,data:O};p.postMessage(R)}function E(O){var R={msg:h.default.SCRIPTDATA_ARRIVED,data:O};p.postMessage(R)}function w(O){var R={msg:h.default.STATISTICS_INFO,data:O};p.postMessage(R)}function C(O,R){p.postMessage({msg:h.default.IO_ERROR,data:{type:O,info:R}})}function A(O,R){p.postMessage({msg:h.default.DEMUX_ERROR,data:{type:O,info:R}})}function P(O){p.postMessage({msg:h.default.RECOMMEND_SEEKPOINT,data:O})}function T(O,R){p.postMessage({msg:"logcat_callback",data:{type:O,logcat:R}})}};s.default=d},"./src/demux/amf-parser.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/utils/utf8-conv.js"),f=c("./src/utils/exception.js"),h=function(){var p=new ArrayBuffer(2);return new DataView(p).setInt16(0,256,!0),new Int16Array(p)[0]===256}(),d=function(){function p(){}return p.parseScriptData=function(v,y,g){var m={};try{var x=p.parseValue(v,y,g),b=p.parseValue(v,y+x.size,g-x.size);m[x.data]=b.data}catch(_){l.default.e("AMF",_.toString())}return m},p.parseObject=function(v,y,g){if(g<3)throw new f.IllegalStateException("Data not enough when parse ScriptDataObject");var m=p.parseString(v,y,g),x=p.parseValue(v,y+m.size,g-m.size),b=x.objectEnd;return{data:{name:m.data,value:x.data},size:m.size+x.size,objectEnd:b}},p.parseVariable=function(v,y,g){return p.parseObject(v,y,g)},p.parseString=function(v,y,g){if(g<2)throw new f.IllegalStateException("Data not enough when parse String");var m=new DataView(v,y,g),x=m.getUint16(0,!h),b;return x>0?b=(0,u.default)(new Uint8Array(v,y+2,x)):b="",{data:b,size:2+x}},p.parseLongString=function(v,y,g){if(g<4)throw new f.IllegalStateException("Data not enough when parse LongString");var m=new DataView(v,y,g),x=m.getUint32(0,!h),b;return x>0?b=(0,u.default)(new Uint8Array(v,y+4,x)):b="",{data:b,size:4+x}},p.parseDate=function(v,y,g){if(g<10)throw new f.IllegalStateException("Data size invalid when parse Date");var m=new DataView(v,y,g),x=m.getFloat64(0,!h),b=m.getInt16(8,!h);return x+=b*60*1e3,{data:new Date(x),size:8+2}},p.parseValue=function(v,y,g){if(g<1)throw new f.IllegalStateException("Data not enough when parse Value");var m=new DataView(v,y,g),x=1,b=m.getUint8(0),_,S=!1;try{switch(b){case 0:_=m.getFloat64(1,!h),x+=8;break;case 1:{var E=m.getUint8(1);_=!!E,x+=1;break}case 2:{var w=p.parseString(v,y+1,g-1);_=w.data,x+=w.size;break}case 3:{_={};var C=0;for((m.getUint32(g-4,!h)&16777215)===9&&(C=3);x<g-4;){var A=p.parseObject(v,y+x,g-x-C);if(A.objectEnd)break;_[A.data.name]=A.data.value,x+=A.size}if(x<=g-3){var P=m.getUint32(x-1,!h)&16777215;P===9&&(x+=3)}break}case 8:{_={},x+=4;var C=0;for((m.getUint32(g-4,!h)&16777215)===9&&(C=3);x<g-8;){var T=p.parseVariable(v,y+x,g-x-C);if(T.objectEnd)break;_[T.data.name]=T.data.value,x+=T.size}if(x<=g-3){var P=m.getUint32(x-1,!h)&16777215;P===9&&(x+=3)}break}case 9:_=void 0,x=1,S=!0;break;case 10:{_=[];var O=m.getUint32(1,!h);x+=4;for(var R=0;R<O;R++){var F=p.parseValue(v,y+x,g-x);_.push(F.data),x+=F.size}break}case 11:{var D=p.parseDate(v,y+1,g-1);_=D.data,x+=D.size;break}case 12:{var V=p.parseString(v,y+1,g-1);_=V.data,x+=V.size;break}default:x=g,l.default.w("AMF","Unsupported AMF value type "+b)}}catch(Y){l.default.e("AMF",Y.toString())}return{data:_,size:x,objectEnd:S}},p}();s.default=d},"./src/demux/demux-errors.js":function(o,s,c){c.r(s);var l={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};s.default=l},"./src/demux/exp-golomb.js":function(o,s,c){c.r(s);var l=c("./src/utils/exception.js"),u=function(){function f(h){this.TAG="ExpGolomb",this._buffer=h,this._buffer_index=0,this._total_bytes=h.byteLength,this._total_bits=h.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return f.prototype.destroy=function(){this._buffer=null},f.prototype._fillCurrentWord=function(){var h=this._total_bytes-this._buffer_index;if(h<=0)throw new l.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var d=Math.min(4,h),p=new Uint8Array(4);p.set(this._buffer.subarray(this._buffer_index,this._buffer_index+d)),this._current_word=new DataView(p.buffer).getUint32(0,!1),this._buffer_index+=d,this._current_word_bits_left=d*8},f.prototype.readBits=function(h){if(h>32)throw new l.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(h<=this._current_word_bits_left){var d=this._current_word>>>32-h;return this._current_word<<=h,this._current_word_bits_left-=h,d}var p=this._current_word_bits_left?this._current_word:0;p=p>>>32-this._current_word_bits_left;var v=h-this._current_word_bits_left;this._fillCurrentWord();var y=Math.min(v,this._current_word_bits_left),g=this._current_word>>>32-y;return this._current_word<<=y,this._current_word_bits_left-=y,p=p<<y|g,p},f.prototype.readBool=function(){return this.readBits(1)===1},f.prototype.readByte=function(){return this.readBits(8)},f.prototype._skipLeadingZero=function(){var h;for(h=0;h<this._current_word_bits_left;h++)if(this._current_word&2147483648>>>h)return this._current_word<<=h,this._current_word_bits_left-=h,h;return this._fillCurrentWord(),h+this._skipLeadingZero()},f.prototype.readUEG=function(){var h=this._skipLeadingZero();return this.readBits(h+1)-1},f.prototype.readSEG=function(){var h=this.readUEG();return h&1?h+1>>>1:-1*(h>>>1)},f}();s.default=u},"./src/demux/flv-demuxer.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/demux/amf-parser.js"),f=c("./src/demux/sps-parser.js"),h=c("./src/demux/demux-errors.js"),d=c("./src/core/media-info.js"),p=c("./src/utils/exception.js");function v(g,m){return g[m]<<24|g[m+1]<<16|g[m+2]<<8|g[m+3]}var y=function(){function g(m,x){this.TAG="FLVDemuxer",this._config=x,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=m.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=m.hasAudioTrack,this._hasVideo=m.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new d.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var b=new ArrayBuffer(2);return new DataView(b).setInt16(0,256,!0),new Int16Array(b)[0]===256}()}return g.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},g.probe=function(m){var x=new Uint8Array(m),b={match:!1};if(x[0]!==70||x[1]!==76||x[2]!==86||x[3]!==1)return b;var _=(x[4]&4)>>>2!==0,S=(x[4]&1)!==0,E=v(x,5);return E<9?b:{match:!0,consumed:E,dataOffset:E,hasAudioTrack:_,hasVideoTrack:S}},g.prototype.bindDataSource=function(m){return m.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(g.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(m){this._onTrackMetadata=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(m){this._onMediaInfo=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(m){this._onMetaDataArrived=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(m){this._onScriptDataArrived=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onError",{get:function(){return this._onError},set:function(m){this._onError=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(m){this._onDataAvailable=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(m){this._timestampBase=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"overridedDuration",{get:function(){return this._duration},set:function(m){this._durationOverrided=!0,this._duration=m,this._mediaInfo.duration=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"overridedHasAudio",{set:function(m){this._hasAudioFlagOverrided=!0,this._hasAudio=m,this._mediaInfo.hasAudio=m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"overridedHasVideo",{set:function(m){this._hasVideoFlagOverrided=!0,this._hasVideo=m,this._mediaInfo.hasVideo=m},enumerable:!1,configurable:!0}),g.prototype.resetMediaInfo=function(){this._mediaInfo=new d.default},g.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},g.prototype.parseChunks=function(m,x){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new p.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var b=0,_=this._littleEndian;if(x===0)if(m.byteLength>13){var S=g.probe(m);b=S.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,x+b!==this._dataOffset&&l.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var E=new DataView(m,b),w=E.getUint32(0,!_);w!==0&&l.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),b+=4}for(;b<m.byteLength;){this._dispatch=!0;var E=new DataView(m,b);if(b+11+4>m.byteLength)break;var C=E.getUint8(0),A=E.getUint32(0,!_)&16777215;if(b+11+A+4>m.byteLength)break;if(C!==8&&C!==9&&C!==18){l.default.w(this.TAG,"Unsupported tag type "+C+", skipped"),b+=11+A+4;continue}var P=E.getUint8(4),T=E.getUint8(5),O=E.getUint8(6),R=E.getUint8(7),F=O|T<<8|P<<16|R<<24,D=E.getUint32(7,!_)&16777215;D!==0&&l.default.w(this.TAG,"Meet tag which has StreamID != 0!");var V=b+11;switch(C){case 8:this._parseAudioData(m,V,A,F);break;case 9:this._parseVideoData(m,V,A,F,x+b);break;case 18:this._parseScriptData(m,V,A);break}var Y=E.getUint32(11+A,!_);Y!==11+A&&l.default.w(this.TAG,"Invalid PrevTagSize "+Y),b+=11+A+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),b},g.prototype._parseScriptData=function(m,x,b){var _=u.default.parseScriptData(m,x,b);if(_.hasOwnProperty("onMetaData")){if(_.onMetaData==null||typeof _.onMetaData!="object"){l.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&l.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=_;var S=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},S)),typeof S.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=S.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof S.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=S.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof S.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=S.audiodatarate),typeof S.videodatarate=="number"&&(this._mediaInfo.videoDataRate=S.videodatarate),typeof S.width=="number"&&(this._mediaInfo.width=S.width),typeof S.height=="number"&&(this._mediaInfo.height=S.height),typeof S.duration=="number"){if(!this._durationOverrided){var E=Math.floor(S.duration*this._timescale);this._duration=E,this._mediaInfo.duration=E}}else this._mediaInfo.duration=0;if(typeof S.framerate=="number"){var w=Math.floor(S.framerate*1e3);if(w>0){var C=w/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=C,this._referenceFrameRate.fps_num=w,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=C}}if(typeof S.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var A=S.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(A),S.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=S,l.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(_).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},_))},g.prototype._parseKeyframesIndex=function(m){for(var x=[],b=[],_=1;_<m.times.length;_++){var S=this._timestampBase+Math.floor(m.times[_]*1e3);x.push(S),b.push(m.filepositions[_])}return{times:x,filepositions:b}},g.prototype._parseAudioData=function(m,x,b,_){if(b<=1){l.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var S=new DataView(m,x,b),E=S.getUint8(0),w=E>>>4;if(w!==2&&w!==10){this._onError(h.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+w);return}var C=0,A=(E&12)>>>2;if(A>=0&&A<=4)C=this._flvSoundRateTable[A];else{this._onError(h.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+A);return}var P=E&1,T=this._audioMetadata,O=this._audioTrack;if(T||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),T=this._audioMetadata={},T.type="audio",T.id=O.id,T.timescale=this._timescale,T.duration=this._duration,T.audioSampleRate=C,T.channelCount=P===0?1:2),w===10){var R=this._parseAACAudioData(m,x+1,b-1);if(R==null)return;if(R.packetType===0){T.config&&l.default.w(this.TAG,"Found another AudioSpecificConfig!");var F=R.data;T.audioSampleRate=F.samplingRate,T.channelCount=F.channelCount,T.codec=F.codec,T.originalCodec=F.originalCodec,T.config=F.config,T.refSampleDuration=1024/T.audioSampleRate*T.timescale,l.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",T);var D=this._mediaInfo;D.audioCodec=T.originalCodec,D.audioSampleRate=T.audioSampleRate,D.audioChannelCount=T.channelCount,D.hasVideo?D.videoCodec!=null&&(D.mimeType='video/x-flv; codecs="'+D.videoCodec+","+D.audioCodec+'"'):D.mimeType='video/x-flv; codecs="'+D.audioCodec+'"',D.isComplete()&&this._onMediaInfo(D)}else if(R.packetType===1){var V=this._timestampBase+_,Y={unit:R.data,length:R.data.byteLength,dts:V,pts:V};O.samples.push(Y),O.length+=R.data.length}else l.default.e(this.TAG,"Flv: Unsupported AAC data type "+R.packetType)}else if(w===2){if(!T.codec){var F=this._parseMP3AudioData(m,x+1,b-1,!0);if(F==null)return;T.audioSampleRate=F.samplingRate,T.channelCount=F.channelCount,T.codec=F.codec,T.originalCodec=F.originalCodec,T.refSampleDuration=1152/T.audioSampleRate*T.timescale,l.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",T);var D=this._mediaInfo;D.audioCodec=T.codec,D.audioSampleRate=T.audioSampleRate,D.audioChannelCount=T.channelCount,D.audioDataRate=F.bitRate,D.hasVideo?D.videoCodec!=null&&(D.mimeType='video/x-flv; codecs="'+D.videoCodec+","+D.audioCodec+'"'):D.mimeType='video/x-flv; codecs="'+D.audioCodec+'"',D.isComplete()&&this._onMediaInfo(D)}var W=this._parseMP3AudioData(m,x+1,b-1,!1);if(W==null)return;var V=this._timestampBase+_,$={unit:W,length:W.byteLength,dts:V,pts:V};O.samples.push($),O.length+=W.length}}},g.prototype._parseAACAudioData=function(m,x,b){if(b<=1){l.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var _={},S=new Uint8Array(m,x,b);return _.packetType=S[0],S[0]===0?_.data=this._parseAACAudioSpecificConfig(m,x+1,b-1):_.data=S.subarray(1),_},g.prototype._parseAACAudioSpecificConfig=function(m,x,b){var _=new Uint8Array(m,x,b),S=null,E=0,w=0,C=0,A=null;if(E=w=_[0]>>>3,C=(_[0]&7)<<1|_[1]>>>7,C<0||C>=this._mpegSamplingRates.length){this._onError(h.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var P=this._mpegSamplingRates[C],T=(_[1]&120)>>>3;if(T<0||T>=8){this._onError(h.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}E===5&&(A=(_[1]&7)<<1|_[2]>>>7,(_[2]&124)>>>2);var O=self.navigator.userAgent.toLowerCase();return O.indexOf("firefox")!==-1?C>=6?(E=5,S=new Array(4),A=C-3):(E=2,S=new Array(2),A=C):O.indexOf("android")!==-1?(E=2,S=new Array(2),A=C):(E=5,A=C,S=new Array(4),C>=6?A=C-3:T===1&&(E=2,S=new Array(2),A=C)),S[0]=E<<3,S[0]|=(C&15)>>>1,S[1]=(C&15)<<7,S[1]|=(T&15)<<3,E===5&&(S[1]|=(A&15)>>>1,S[2]=(A&1)<<7,S[2]|=8,S[3]=0),{config:S,samplingRate:P,channelCount:T,codec:"mp4a.40."+E,originalCodec:"mp4a.40."+w}},g.prototype._parseMP3AudioData=function(m,x,b,_){if(b<4){l.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var S=new Uint8Array(m,x,b),E=null;if(_){if(S[0]!==255)return;var w=S[1]>>>3&3,C=(S[1]&6)>>1,A=(S[2]&240)>>>4,P=(S[2]&12)>>>2,T=S[3]>>>6&3,O=T!==3?2:1,R=0,F=0,D="mp3";switch(w){case 0:R=this._mpegAudioV25SampleRateTable[P];break;case 2:R=this._mpegAudioV20SampleRateTable[P];break;case 3:R=this._mpegAudioV10SampleRateTable[P];break}switch(C){case 1:A<this._mpegAudioL3BitRateTable.length&&(F=this._mpegAudioL3BitRateTable[A]);break;case 2:A<this._mpegAudioL2BitRateTable.length&&(F=this._mpegAudioL2BitRateTable[A]);break;case 3:A<this._mpegAudioL1BitRateTable.length&&(F=this._mpegAudioL1BitRateTable[A]);break}E={bitRate:F,samplingRate:R,channelCount:O,codec:D,originalCodec:D}}else E=S;return E},g.prototype._parseVideoData=function(m,x,b,_,S){if(b<=1){l.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var E=new Uint8Array(m,x,b)[0],w=(E&240)>>>4,C=E&15;if(C!==7){this._onError(h.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+C);return}this._parseAVCVideoPacket(m,x+1,b-1,_,S,w)}},g.prototype._parseAVCVideoPacket=function(m,x,b,_,S,E){if(b<4){l.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var w=this._littleEndian,C=new DataView(m,x,b),A=C.getUint8(0),P=C.getUint32(0,!w)&16777215,T=P<<8>>8;if(A===0)this._parseAVCDecoderConfigurationRecord(m,x+4,b-4);else if(A===1)this._parseAVCVideoData(m,x+4,b-4,_,S,E,T);else if(A!==2){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid video packet type "+A);return}},g.prototype._parseAVCDecoderConfigurationRecord=function(m,x,b){if(b<7){l.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var _=this._videoMetadata,S=this._videoTrack,E=this._littleEndian,w=new DataView(m,x,b);_?typeof _.avcc<"u"&&l.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),_=this._videoMetadata={},_.type="video",_.id=S.id,_.timescale=this._timescale,_.duration=this._duration);var C=w.getUint8(0),A=w.getUint8(1);if(w.getUint8(2),w.getUint8(3),C!==1||A===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(w.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(h.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var P=w.getUint8(5)&31;if(P===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else P>1&&l.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+P);for(var T=6,O=0;O<P;O++){var R=w.getUint16(T,!E);if(T+=2,R!==0){var F=new Uint8Array(m,x+T,R);T+=R;var D=f.default.parseSPS(F);if(O===0){_.codecWidth=D.codec_size.width,_.codecHeight=D.codec_size.height,_.presentWidth=D.present_size.width,_.presentHeight=D.present_size.height,_.profile=D.profile_string,_.level=D.level_string,_.bitDepth=D.bit_depth,_.chromaFormat=D.chroma_format,_.sarRatio=D.sar_ratio,_.frameRate=D.frame_rate,(D.frame_rate.fixed===!1||D.frame_rate.fps_num===0||D.frame_rate.fps_den===0)&&(_.frameRate=this._referenceFrameRate);var V=_.frameRate.fps_den,Y=_.frameRate.fps_num;_.refSampleDuration=_.timescale*(V/Y);for(var W=F.subarray(1,4),$="avc1.",I=0;I<3;I++){var B=W[I].toString(16);B.length<2&&(B="0"+B),$+=B}_.codec=$;var L=this._mediaInfo;L.width=_.codecWidth,L.height=_.codecHeight,L.fps=_.frameRate.fps,L.profile=_.profile,L.level=_.level,L.refFrames=D.ref_frames,L.chromaFormat=D.chroma_format_string,L.sarNum=_.sarRatio.width,L.sarDen=_.sarRatio.height,L.videoCodec=$,L.hasAudio?L.audioCodec!=null&&(L.mimeType='video/x-flv; codecs="'+L.videoCodec+","+L.audioCodec+'"'):L.mimeType='video/x-flv; codecs="'+L.videoCodec+'"',L.isComplete()&&this._onMediaInfo(L)}}}var M=w.getUint8(T);if(M===0){this._onError(h.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else M>1&&l.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+M);T++;for(var O=0;O<M;O++){var R=w.getUint16(T,!E);T+=2,R!==0&&(T+=R)}_.avcc=new Uint8Array(b),_.avcc.set(new Uint8Array(m,x,b),0),l.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",_)},g.prototype._parseAVCVideoData=function(m,x,b,_,S,E,w){for(var C=this._littleEndian,A=new DataView(m,x,b),P=[],T=0,O=0,R=this._naluLengthSize,F=this._timestampBase+_,D=E===1;O<b;){if(O+4>=b){l.default.w(this.TAG,"Malformed Nalu near timestamp "+F+", offset = "+O+", dataSize = "+b);break}var V=A.getUint32(O,!C);if(R===3&&(V>>>=8),V>b-R){l.default.w(this.TAG,"Malformed Nalus near timestamp "+F+", NaluSize > DataSize!");return}var Y=A.getUint8(O+R)&31;Y===5&&(D=!0);var W=new Uint8Array(m,x+O,R+V),$={type:Y,data:W};P.push($),T+=W.byteLength,O+=R+V}if(P.length){var I=this._videoTrack,B={units:P,length:T,isKeyframe:D,dts:F,cts:w,pts:F+w};D&&(B.fileposition=S),I.samples.push(B),I.length+=T}},g}();s.default=y},"./src/demux/sps-parser.js":function(o,s,c){c.r(s);var l=c("./src/demux/exp-golomb.js"),u=function(){function f(){}return f._ebsp2rbsp=function(h){for(var d=h,p=d.byteLength,v=new Uint8Array(p),y=0,g=0;g<p;g++)g>=2&&d[g]===3&&d[g-1]===0&&d[g-2]===0||(v[y]=d[g],y++);return new Uint8Array(v.buffer,0,y)},f.parseSPS=function(h){var d=f._ebsp2rbsp(h),p=new l.default(d);p.readByte();var v=p.readByte();p.readByte();var y=p.readByte();p.readUEG();var g=f.getProfileString(v),m=f.getLevelString(y),x=1,b=420,_=[0,420,422,444],S=8;if((v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128||v===138||v===144)&&(x=p.readUEG(),x===3&&p.readBits(1),x<=3&&(b=_[x]),S=p.readUEG()+8,p.readUEG(),p.readBits(1),p.readBool()))for(var E=x!==3?8:12,w=0;w<E;w++)p.readBool()&&(w<6?f._skipScalingList(p,16):f._skipScalingList(p,64));p.readUEG();var C=p.readUEG();if(C===0)p.readUEG();else if(C===1){p.readBits(1),p.readSEG(),p.readSEG();for(var A=p.readUEG(),w=0;w<A;w++)p.readSEG()}var P=p.readUEG();p.readBits(1);var T=p.readUEG(),O=p.readUEG(),R=p.readBits(1);R===0&&p.readBits(1),p.readBits(1);var F=0,D=0,V=0,Y=0,W=p.readBool();W&&(F=p.readUEG(),D=p.readUEG(),V=p.readUEG(),Y=p.readUEG());var $=1,I=1,B=0,L=!0,M=0,X=0,K=p.readBool();if(K){if(p.readBool()){var ne=p.readByte(),te=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ce=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ne>0&&ne<16?($=te[ne-1],I=ce[ne-1]):ne===255&&($=p.readByte()<<8|p.readByte(),I=p.readByte()<<8|p.readByte())}if(p.readBool()&&p.readBool(),p.readBool()&&(p.readBits(4),p.readBool()&&p.readBits(24)),p.readBool()&&(p.readUEG(),p.readUEG()),p.readBool()){var de=p.readBits(32),se=p.readBits(32);L=p.readBool(),M=se,X=de*2,B=M/X}}var fe=1;($!==1||I!==1)&&(fe=$/I);var oe=0,he=0;if(x===0)oe=1,he=2-R;else{var Pe=x===3?1:2,Ie=x===1?2:1;oe=Pe,he=Ie*(2-R)}var Ee=(T+1)*16,Be=(2-R)*((O+1)*16);Ee-=(F+D)*oe,Be-=(V+Y)*he;var qe=Math.ceil(Ee*fe);return p.destroy(),p=null,{profile_string:g,level_string:m,bit_depth:S,ref_frames:P,chroma_format:b,chroma_format_string:f.getChromaFormatString(b),frame_rate:{fixed:L,fps:B,fps_den:X,fps_num:M},sar_ratio:{width:$,height:I},codec_size:{width:Ee,height:Be},present_size:{width:qe,height:Be}}},f._skipScalingList=function(h,d){for(var p=8,v=8,y=0,g=0;g<d;g++)v!==0&&(y=h.readSEG(),v=(p+y+256)%256),p=v===0?p:v},f.getProfileString=function(h){switch(h){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},f.getLevelString=function(h){return(h/10).toFixed(1)},f.getChromaFormatString=function(h){switch(h){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},f}();s.default=u},"./src/flv.js":function(o,s,c){c.r(s);var l=c("./src/utils/polyfill.js"),u=c("./src/core/features.js"),f=c("./src/io/loader.js"),h=c("./src/player/flv-player.js"),d=c("./src/player/native-player.js"),p=c("./src/player/player-events.js"),v=c("./src/player/player-errors.js"),y=c("./src/utils/logging-control.js"),g=c("./src/utils/exception.js");l.default.install();function m(S,E){var w=S;if(w==null||typeof w!="object")throw new g.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!w.hasOwnProperty("type"))throw new g.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(w.type){case"flv":return new h.default(w,E);default:return new d.default(w,E)}}function x(){return u.default.supportMSEH264Playback()}function b(){return u.default.getFeatureList()}var _={};_.createPlayer=m,_.isSupported=x,_.getFeatureList=b,_.BaseLoader=f.BaseLoader,_.LoaderStatus=f.LoaderStatus,_.LoaderErrors=f.LoaderErrors,_.Events=p.default,_.ErrorTypes=v.ErrorTypes,_.ErrorDetails=v.ErrorDetails,_.FlvPlayer=h.default,_.NativePlayer=d.default,_.LoggingControl=y.default,Object.defineProperty(_,"version",{enumerable:!0,get:function(){return"1.6.2"}}),s.default=_},"./src/index.js":function(o,s,c){o.exports=c("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/browser.js"),u=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),h=function(){var p=function(v,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(g[x]=m[x])},p(v,y)};return function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(v,y);function g(){this.constructor=v}v.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),d=function(p){h(v,p);function v(y,g){var m=p.call(this,"fetch-stream-loader")||this;return m.TAG="FetchStreamLoader",m._seekHandler=y,m._config=g,m._needStash=!0,m._requestAbort=!1,m._contentLength=null,m._receivedLength=0,m}return v.isSupported=function(){try{var y=l.default.msedge&&l.default.version.minor>=15048,g=l.default.msedge?y:!0;return self.fetch&&self.ReadableStream&&g}catch{return!1}},v.prototype.destroy=function(){this.isWorking()&&this.abort(),p.prototype.destroy.call(this)},v.prototype.open=function(y,g){var m=this;this._dataSource=y,this._range=g;var x=y.url;this._config.reuseRedirectedURL&&y.redirectedURL!=null&&(x=y.redirectedURL);var b=this._seekHandler.getConfig(x,g),_=new self.Headers;if(typeof b.headers=="object"){var S=b.headers;for(var E in S)S.hasOwnProperty(E)&&_.append(E,S[E])}var w={method:"GET",headers:_,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var E in this._config.headers)_.append(E,this._config.headers[E]);y.cors===!1&&(w.mode="same-origin"),y.withCredentials&&(w.credentials="include"),y.referrerPolicy&&(w.referrerPolicy=y.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,w.signal=this._abortController.signal),this._status=u.LoaderStatus.kConnecting,self.fetch(b.url,w).then(function(C){if(m._requestAbort){m._status=u.LoaderStatus.kIdle,C.body.cancel();return}if(C.ok&&C.status>=200&&C.status<=299){if(C.url!==b.url&&m._onURLRedirect){var A=m._seekHandler.removeURLParameters(C.url);m._onURLRedirect(A)}var P=C.headers.get("Content-Length");return P!=null&&(m._contentLength=parseInt(P),m._contentLength!==0&&m._onContentLengthKnown&&m._onContentLengthKnown(m._contentLength)),m._pump.call(m,C.body.getReader())}else if(m._status=u.LoaderStatus.kError,m._onError)m._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:C.status,msg:C.statusText});else throw new f.RuntimeException("FetchStreamLoader: Http code invalid, "+C.status+" "+C.statusText)}).catch(function(C){if(!(m._abortController&&m._abortController.signal.aborted))if(m._status=u.LoaderStatus.kError,m._onError)m._onError(u.LoaderErrors.EXCEPTION,{code:-1,msg:C.message});else throw C})},v.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==u.LoaderStatus.kBuffering||!l.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},v.prototype._pump=function(y){var g=this;return y.read().then(function(m){if(m.done)if(g._contentLength!==null&&g._receivedLength<g._contentLength){g._status=u.LoaderStatus.kError;var x=u.LoaderErrors.EARLY_EOF,b={code:-1,msg:"Fetch stream meet Early-EOF"};if(g._onError)g._onError(x,b);else throw new f.RuntimeException(b.msg)}else g._status=u.LoaderStatus.kComplete,g._onComplete&&g._onComplete(g._range.from,g._range.from+g._receivedLength-1);else{if(g._abortController&&g._abortController.signal.aborted){g._status=u.LoaderStatus.kComplete;return}else if(g._requestAbort===!0)return g._status=u.LoaderStatus.kComplete,y.cancel();g._status=u.LoaderStatus.kBuffering;var _=m.value.buffer,S=g._range.from+g._receivedLength;g._receivedLength+=_.byteLength,g._onDataArrival&&g._onDataArrival(_,S,g._receivedLength),g._pump(y)}}).catch(function(m){if(g._abortController&&g._abortController.signal.aborted){g._status=u.LoaderStatus.kComplete;return}if(!(m.code===11&&l.default.msedge)){g._status=u.LoaderStatus.kError;var x=0,b=null;if((m.code===19||m.message==="network error")&&(g._contentLength===null||g._contentLength!==null&&g._receivedLength<g._contentLength)?(x=u.LoaderErrors.EARLY_EOF,b={code:m.code,msg:"Fetch stream meet Early-EOF"}):(x=u.LoaderErrors.EXCEPTION,b={code:m.code,msg:m.message}),g._onError)g._onError(x,b);else throw new f.RuntimeException(b.msg)}})},v}(u.BaseLoader);s.default=d},"./src/io/io-controller.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),h=c("./src/io/fetch-stream-loader.js"),d=c("./src/io/xhr-moz-chunked-loader.js"),p=c("./src/io/xhr-range-loader.js"),v=c("./src/io/websocket-loader.js"),y=c("./src/io/range-seek-handler.js"),g=c("./src/io/param-seek-handler.js"),m=c("./src/utils/exception.js"),x=function(){function b(_,S,E){this.TAG="IOController",this._config=S,this._extraData=E,this._stashInitialSize=1024*384,S.stashInitialSize!=null&&S.stashInitialSize>0&&(this._stashInitialSize=S.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,S.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=_,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(_.url),this._refTotalLength=_.filesize?_.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new u.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return b.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},b.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},b.prototype.isPaused=function(){return this._paused},Object.defineProperty(b.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"extraData",{get:function(){return this._extraData},set:function(_){this._extraData=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(_){this._onDataArrival=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(_){this._onSeeked=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onError",{get:function(){return this._onError},set:function(_){this._onError=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onComplete",{get:function(){return this._onComplete},set:function(_){this._onComplete=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(_){this._onRedirect=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(_){this._onRecoveredEarlyEof=_},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"currentSpeed",{get:function(){return this._loaderClass===p.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),b.prototype._selectSeekHandler=function(){var _=this._config;if(_.seekType==="range")this._seekHandler=new y.default(this._config.rangeLoadZeroStart);else if(_.seekType==="param"){var S=_.seekParamStart||"bstart",E=_.seekParamEnd||"bend";this._seekHandler=new g.default(S,E)}else if(_.seekType==="custom"){if(typeof _.customSeekHandler!="function")throw new m.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new _.customSeekHandler}else throw new m.InvalidArgumentException("Invalid seekType in config: "+_.seekType)},b.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=v.default;else if(h.default.isSupported())this._loaderClass=h.default;else if(d.default.isSupported())this._loaderClass=d.default;else if(p.default.isSupported())this._loaderClass=p.default;else throw new m.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},b.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},b.prototype.open=function(_){this._currentRange={from:0,to:-1},_&&(this._currentRange.from=_),this._speedSampler.reset(),_||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},b.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},b.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},b.prototype.resume=function(){if(this._paused){this._paused=!1;var _=this._resumeFrom;this._resumeFrom=0,this._internalSeek(_,!0)}},b.prototype.seek=function(_){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(_,!0)},b.prototype._internalSeek=function(_,S){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(S),this._loader.destroy(),this._loader=null;var E={from:_,to:-1};this._currentRange={from:E.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,E),this._onSeeked&&this._onSeeked()},b.prototype.updateUrl=function(_){if(!_||typeof _!="string"||_.length===0)throw new m.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=_},b.prototype._expandBuffer=function(_){for(var S=this._stashSize;S+1024*1024*1<_;)S*=2;if(S+=1024*1024*1,S!==this._bufferSize){var E=new ArrayBuffer(S);if(this._stashUsed>0){var w=new Uint8Array(this._stashBuffer,0,this._stashUsed),C=new Uint8Array(E,0,S);C.set(w,0)}this._stashBuffer=E,this._bufferSize=S}},b.prototype._normalizeSpeed=function(_){var S=this._speedNormalizeList,E=S.length-1,w=0,C=0,A=E;if(_<S[0])return S[0];for(;C<=A;){if(w=C+Math.floor((A-C)/2),w===E||_>=S[w]&&_<S[w+1])return S[w];S[w]<_?C=w+1:A=w-1}},b.prototype._adjustStashSize=function(_){var S=0;this._config.isLive||_<512?S=_:_>=512&&_<=1024?S=Math.floor(_*1.5):S=_*2,S>8192&&(S=8192);var E=S*1024+1024*1024*1;this._bufferSize<E&&this._expandBuffer(E),this._stashSize=S*1024},b.prototype._dispatchChunks=function(_,S){return this._currentRange.to=S+_.byteLength-1,this._onDataArrival(_,S)},b.prototype._onURLRedirect=function(_){this._redirectedURL=_,this._onRedirect&&this._onRedirect(_)},b.prototype._onContentLengthKnown=function(_){_&&this._fullRequestFlag&&(this._totalLength=_,this._fullRequestFlag=!1)},b.prototype._onLoaderChunkArrival=function(_,S,E){if(!this._onDataArrival)throw new m.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(_.byteLength);var w=this._speedSampler.lastSecondKBps;if(w!==0){var C=this._normalizeSpeed(w);this._speedNormalized!==C&&(this._speedNormalized=C,this._adjustStashSize(C))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=S),this._stashUsed+_.byteLength<=this._stashSize){var T=new Uint8Array(this._stashBuffer,0,this._stashSize);T.set(new Uint8Array(_),this._stashUsed),this._stashUsed+=_.byteLength}else{var T=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var R=this._stashBuffer.slice(0,this._stashUsed),A=this._dispatchChunks(R,this._stashByteStart);if(A<R.byteLength){if(A>0){var O=new Uint8Array(R,A);T.set(O,0),this._stashUsed=O.byteLength,this._stashByteStart+=A}}else this._stashUsed=0,this._stashByteStart+=A;this._stashUsed+_.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+_.byteLength),T=new Uint8Array(this._stashBuffer,0,this._bufferSize)),T.set(new Uint8Array(_),this._stashUsed),this._stashUsed+=_.byteLength}else{var A=this._dispatchChunks(_,S);if(A<_.byteLength){var P=_.byteLength-A;P>this._bufferSize&&(this._expandBuffer(P),T=new Uint8Array(this._stashBuffer,0,this._bufferSize)),T.set(new Uint8Array(_,A),0),this._stashUsed+=P,this._stashByteStart=S+A}}}else if(this._stashUsed===0){var A=this._dispatchChunks(_,S);if(A<_.byteLength){var P=_.byteLength-A;P>this._bufferSize&&this._expandBuffer(P);var T=new Uint8Array(this._stashBuffer,0,this._bufferSize);T.set(new Uint8Array(_,A),0),this._stashUsed+=P,this._stashByteStart=S+A}}else{this._stashUsed+_.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+_.byteLength);var T=new Uint8Array(this._stashBuffer,0,this._bufferSize);T.set(new Uint8Array(_),this._stashUsed),this._stashUsed+=_.byteLength;var A=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(A<this._stashUsed&&A>0){var O=new Uint8Array(this._stashBuffer,A);T.set(O,0)}this._stashUsed-=A,this._stashByteStart+=A}}},b.prototype._flushStashBuffer=function(_){if(this._stashUsed>0){var S=this._stashBuffer.slice(0,this._stashUsed),E=this._dispatchChunks(S,this._stashByteStart),w=S.byteLength-E;if(E<S.byteLength)if(_)l.default.w(this.TAG,w+" bytes unconsumed data remain when flush buffer, dropped");else{if(E>0){var C=new Uint8Array(this._stashBuffer,0,this._bufferSize),A=new Uint8Array(S,E);C.set(A,0),this._stashUsed=A.byteLength,this._stashByteStart+=E}return 0}return this._stashUsed=0,this._stashByteStart=0,w}return 0},b.prototype._onLoaderComplete=function(_,S){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},b.prototype._onLoaderError=function(_,S){switch(l.default.e(this.TAG,"Loader error, code = "+S.code+", msg = "+S.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,_=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF),_){case f.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var E=this._currentRange.to+1;E<this._totalLength&&(l.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(E,!1));return}_=f.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case f.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case f.LoaderErrors.CONNECTING_TIMEOUT:case f.LoaderErrors.HTTP_STATUS_CODE_INVALID:case f.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(_,S);else throw new m.RuntimeException("IOException: "+S.msg)},b}();s.default=x},"./src/io/loader.js":function(o,s,c){c.r(s),c.d(s,{LoaderStatus:function(){return u},LoaderErrors:function(){return f},BaseLoader:function(){return h}});var l=c("./src/utils/exception.js"),u={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},f={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},h=function(){function d(p){this._type=p||"undefined",this._status=u.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return d.prototype.destroy=function(){this._status=u.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},d.prototype.isWorking=function(){return this._status===u.kConnecting||this._status===u.kBuffering},Object.defineProperty(d.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(p){this._onContentLengthKnown=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(p){this._onURLRedirect=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(p){this._onDataArrival=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onError",{get:function(){return this._onError},set:function(p){this._onError=p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onComplete",{get:function(){return this._onComplete},set:function(p){this._onComplete=p},enumerable:!1,configurable:!0}),d.prototype.open=function(p,v){throw new l.NotImplementedException("Unimplemented abstract function!")},d.prototype.abort=function(){throw new l.NotImplementedException("Unimplemented abstract function!")},d}()},"./src/io/param-seek-handler.js":function(o,s,c){c.r(s);var l=function(){function u(f,h){this._startName=f,this._endName=h}return u.prototype.getConfig=function(f,h){var d=f;if(h.from!==0||h.to!==-1){var p=!0;d.indexOf("?")===-1&&(d+="?",p=!1),p&&(d+="&"),d+=this._startName+"="+h.from.toString(),h.to!==-1&&(d+="&"+this._endName+"="+h.to.toString())}return{url:d,headers:{}}},u.prototype.removeURLParameters=function(f){var h=f.split("?")[0],d=void 0,p=f.indexOf("?");p!==-1&&(d=f.substring(p+1));var v="";if(d!=null&&d.length>0)for(var y=d.split("&"),g=0;g<y.length;g++){var m=y[g].split("="),x=g>0;m[0]!==this._startName&&m[0]!==this._endName&&(x&&(v+="&"),v+=y[g])}return v.length===0?h:h+"?"+v},u}();s.default=l},"./src/io/range-seek-handler.js":function(o,s,c){c.r(s);var l=function(){function u(f){this._zeroStart=f||!1}return u.prototype.getConfig=function(f,h){var d={};if(h.from!==0||h.to!==-1){var p=void 0;h.to!==-1?p="bytes="+h.from.toString()+"-"+h.to.toString():p="bytes="+h.from.toString()+"-",d.Range=p}else this._zeroStart&&(d.Range="bytes=0-");return{url:f,headers:d}},u.prototype.removeURLParameters=function(f){return f},u}();s.default=l},"./src/io/speed-sampler.js":function(o,s,c){c.r(s);var l=function(){function u(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return u.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},u.prototype.addBytes=function(f){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=f,this._totalBytes+=f):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=f,this._totalBytes+=f):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=f,this._totalBytes+=f,this._lastCheckpoint=this._now())},Object.defineProperty(u.prototype,"currentKBps",{get:function(){this.addBytes(0);var f=(this._now()-this._lastCheckpoint)/1e3;return f==0&&(f=1),this._intervalBytes/f/1024},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"averageKBps",{get:function(){var f=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/f/1024},enumerable:!1,configurable:!0}),u}();s.default=l},"./src/io/websocket-loader.js":function(o,s,c){c.r(s);var l=c("./src/io/loader.js"),u=c("./src/utils/exception.js"),f=function(){var d=function(p,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(y[m]=g[m])},d(p,v)};return function(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");d(p,v);function y(){this.constructor=p}p.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}}(),h=function(d){f(p,d);function p(){var v=d.call(this,"websocket-loader")||this;return v.TAG="WebSocketLoader",v._needStash=!0,v._ws=null,v._requestAbort=!1,v._receivedLength=0,v}return p.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},p.prototype.destroy=function(){this._ws&&this.abort(),d.prototype.destroy.call(this)},p.prototype.open=function(v){try{var y=this._ws=new self.WebSocket(v.url);y.binaryType="arraybuffer",y.onopen=this._onWebSocketOpen.bind(this),y.onclose=this._onWebSocketClose.bind(this),y.onmessage=this._onWebSocketMessage.bind(this),y.onerror=this._onWebSocketError.bind(this),this._status=l.LoaderStatus.kConnecting}catch(m){this._status=l.LoaderStatus.kError;var g={code:m.code,msg:m.message};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,g);else throw new u.RuntimeException(g.msg)}},p.prototype.abort=function(){var v=this._ws;v&&(v.readyState===0||v.readyState===1)&&(this._requestAbort=!0,v.close()),this._ws=null,this._status=l.LoaderStatus.kComplete},p.prototype._onWebSocketOpen=function(v){this._status=l.LoaderStatus.kBuffering},p.prototype._onWebSocketClose=function(v){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},p.prototype._onWebSocketMessage=function(v){var y=this;if(v.data instanceof ArrayBuffer)this._dispatchArrayBuffer(v.data);else if(v.data instanceof Blob){var g=new FileReader;g.onload=function(){y._dispatchArrayBuffer(g.result)},g.readAsArrayBuffer(v.data)}else{this._status=l.LoaderStatus.kError;var m={code:-1,msg:"Unsupported WebSocket message type: "+v.data.constructor.name};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,m);else throw new u.RuntimeException(m.msg)}},p.prototype._dispatchArrayBuffer=function(v){var y=v,g=this._receivedLength;this._receivedLength+=y.byteLength,this._onDataArrival&&this._onDataArrival(y,g,this._receivedLength)},p.prototype._onWebSocketError=function(v){this._status=l.LoaderStatus.kError;var y={code:v.code,msg:v.message};if(this._onError)this._onError(l.LoaderErrors.EXCEPTION,y);else throw new u.RuntimeException(y.msg)},p}(l.BaseLoader);s.default=h},"./src/io/xhr-moz-chunked-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/loader.js"),f=c("./src/utils/exception.js"),h=function(){var p=function(v,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(g[x]=m[x])},p(v,y)};return function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(v,y);function g(){this.constructor=v}v.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),d=function(p){h(v,p);function v(y,g){var m=p.call(this,"xhr-moz-chunked-loader")||this;return m.TAG="MozChunkedLoader",m._seekHandler=y,m._config=g,m._needStash=!0,m._xhr=null,m._requestAbort=!1,m._contentLength=null,m._receivedLength=0,m}return v.isSupported=function(){try{var y=new XMLHttpRequest;return y.open("GET","https://example.com",!0),y.responseType="moz-chunked-arraybuffer",y.responseType==="moz-chunked-arraybuffer"}catch(g){return l.default.w("MozChunkedLoader",g.message),!1}},v.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),p.prototype.destroy.call(this)},v.prototype.open=function(y,g){this._dataSource=y,this._range=g;var m=y.url;this._config.reuseRedirectedURL&&y.redirectedURL!=null&&(m=y.redirectedURL);var x=this._seekHandler.getConfig(m,g);this._requestURL=x.url;var b=this._xhr=new XMLHttpRequest;if(b.open("GET",x.url,!0),b.responseType="moz-chunked-arraybuffer",b.onreadystatechange=this._onReadyStateChange.bind(this),b.onprogress=this._onProgress.bind(this),b.onloadend=this._onLoadEnd.bind(this),b.onerror=this._onXhrError.bind(this),y.withCredentials&&(b.withCredentials=!0),typeof x.headers=="object"){var _=x.headers;for(var S in _)_.hasOwnProperty(S)&&b.setRequestHeader(S,_[S])}if(typeof this._config.headers=="object"){var _=this._config.headers;for(var S in _)_.hasOwnProperty(S)&&b.setRequestHeader(S,_[S])}this._status=u.LoaderStatus.kConnecting,b.send()},v.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=u.LoaderStatus.kComplete},v.prototype._onReadyStateChange=function(y){var g=y.target;if(g.readyState===2){if(g.responseURL!=null&&g.responseURL!==this._requestURL&&this._onURLRedirect){var m=this._seekHandler.removeURLParameters(g.responseURL);this._onURLRedirect(m)}if(g.status!==0&&(g.status<200||g.status>299))if(this._status=u.LoaderStatus.kError,this._onError)this._onError(u.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:g.status,msg:g.statusText});else throw new f.RuntimeException("MozChunkedLoader: Http code invalid, "+g.status+" "+g.statusText);else this._status=u.LoaderStatus.kBuffering}},v.prototype._onProgress=function(y){if(this._status!==u.LoaderStatus.kError){this._contentLength===null&&y.total!==null&&y.total!==0&&(this._contentLength=y.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var g=y.target.response,m=this._range.from+this._receivedLength;this._receivedLength+=g.byteLength,this._onDataArrival&&this._onDataArrival(g,m,this._receivedLength)}},v.prototype._onLoadEnd=function(y){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===u.LoaderStatus.kError)return;this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},v.prototype._onXhrError=function(y){this._status=u.LoaderStatus.kError;var g=0,m=null;if(this._contentLength&&y.loaded<this._contentLength?(g=u.LoaderErrors.EARLY_EOF,m={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(g=u.LoaderErrors.EXCEPTION,m={code:-1,msg:y.constructor.name+" "+y.type}),this._onError)this._onError(g,m);else throw new f.RuntimeException(m.msg)},v}(u.BaseLoader);s.default=d},"./src/io/xhr-range-loader.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/io/speed-sampler.js"),f=c("./src/io/loader.js"),h=c("./src/utils/exception.js"),d=function(){var v=function(y,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(m[b]=x[b])},v(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(y,g);function m(){this.constructor=y}y.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),p=function(v){d(y,v);function y(g,m){var x=v.call(this,"xhr-range-loader")||this;return x.TAG="RangeLoader",x._seekHandler=g,x._config=m,x._needStash=!1,x._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],x._currentChunkSizeKB=384,x._currentSpeedNormalized=0,x._zeroSpeedChunkCount=0,x._xhr=null,x._speedSampler=new u.default,x._requestAbort=!1,x._waitForTotalLength=!1,x._totalLengthReceived=!1,x._currentRequestURL=null,x._currentRedirectedURL=null,x._currentRequestRange=null,x._totalLength=null,x._contentLength=null,x._receivedLength=0,x._lastTimeLoaded=0,x}return y.isSupported=function(){try{var g=new XMLHttpRequest;return g.open("GET","https://example.com",!0),g.responseType="arraybuffer",g.responseType==="arraybuffer"}catch(m){return l.default.w("RangeLoader",m.message),!1}},y.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),v.prototype.destroy.call(this)},Object.defineProperty(y.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),y.prototype.open=function(g,m){this._dataSource=g,this._range=m,this._status=f.LoaderStatus.kConnecting;var x=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(x=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!x?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},y.prototype._openSubRange=function(){var g=this._currentChunkSizeKB*1024,m=this._range.from+this._receivedLength,x=m+g;this._contentLength!=null&&x-this._range.from>=this._contentLength&&(x=this._range.from+this._contentLength-1),this._currentRequestRange={from:m,to:x},this._internalOpen(this._dataSource,this._currentRequestRange)},y.prototype._internalOpen=function(g,m){this._lastTimeLoaded=0;var x=g.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?x=this._currentRedirectedURL:g.redirectedURL!=null&&(x=g.redirectedURL));var b=this._seekHandler.getConfig(x,m);this._currentRequestURL=b.url;var _=this._xhr=new XMLHttpRequest;if(_.open("GET",b.url,!0),_.responseType="arraybuffer",_.onreadystatechange=this._onReadyStateChange.bind(this),_.onprogress=this._onProgress.bind(this),_.onload=this._onLoad.bind(this),_.onerror=this._onXhrError.bind(this),g.withCredentials&&(_.withCredentials=!0),typeof b.headers=="object"){var S=b.headers;for(var E in S)S.hasOwnProperty(E)&&_.setRequestHeader(E,S[E])}if(typeof this._config.headers=="object"){var S=this._config.headers;for(var E in S)S.hasOwnProperty(E)&&_.setRequestHeader(E,S[E])}_.send()},y.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=f.LoaderStatus.kComplete},y.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},y.prototype._onReadyStateChange=function(g){var m=g.target;if(m.readyState===2){if(m.responseURL!=null){var x=this._seekHandler.removeURLParameters(m.responseURL);m.responseURL!==this._currentRequestURL&&x!==this._currentRedirectedURL&&(this._currentRedirectedURL=x,this._onURLRedirect&&this._onURLRedirect(x))}if(m.status>=200&&m.status<=299){if(this._waitForTotalLength)return;this._status=f.LoaderStatus.kBuffering}else if(this._status=f.LoaderStatus.kError,this._onError)this._onError(f.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:m.status,msg:m.statusText});else throw new h.RuntimeException("RangeLoader: Http code invalid, "+m.status+" "+m.statusText)}},y.prototype._onProgress=function(g){if(this._status!==f.LoaderStatus.kError){if(this._contentLength===null){var m=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,m=!0;var x=g.total;this._internalAbort(),x!=null&x!==0&&(this._totalLength=x)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,m){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var b=g.loaded-this._lastTimeLoaded;this._lastTimeLoaded=g.loaded,this._speedSampler.addBytes(b)}},y.prototype._normalizeSpeed=function(g){var m=this._chunkSizeKBList,x=m.length-1,b=0,_=0,S=x;if(g<m[0])return m[0];for(;_<=S;){if(b=_+Math.floor((S-_)/2),b===x||g>=m[b]&&g<m[b+1])return m[b];m[b]<g?_=b+1:S=b-1}},y.prototype._onLoad=function(g){if(this._status!==f.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var m=this._speedSampler.lastSecondKBps;if(m===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(m=this._speedSampler.currentKBps)),m!==0){var x=this._normalizeSpeed(m);this._currentSpeedNormalized!==x&&(this._currentSpeedNormalized=x,this._currentChunkSizeKB=x)}var b=g.target.response,_=this._range.from+this._receivedLength;this._receivedLength+=b.byteLength;var S=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():S=!0,this._onDataArrival&&this._onDataArrival(b,_,this._receivedLength),S&&(this._status=f.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},y.prototype._onXhrError=function(g){this._status=f.LoaderStatus.kError;var m=0,x=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(m=f.LoaderErrors.EARLY_EOF,x={code:-1,msg:"RangeLoader meet Early-Eof"}):(m=f.LoaderErrors.EXCEPTION,x={code:-1,msg:g.constructor.name+" "+g.type}),this._onError)this._onError(m,x);else throw new h.RuntimeException(x.msg)},y}(f.BaseLoader);s.default=p},"./src/player/flv-player.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=c("./src/utils/browser.js"),d=c("./src/player/player-events.js"),p=c("./src/core/transmuxer.js"),v=c("./src/core/transmuxing-events.js"),y=c("./src/core/mse-controller.js"),g=c("./src/core/mse-events.js"),m=c("./src/player/player-errors.js"),x=c("./src/config.js"),b=c("./src/utils/exception.js"),_=function(){function S(E,w){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(u()),this._config=(0,x.createDefaultConfig)(),typeof w=="object"&&Object.assign(this._config,w),E.type.toLowerCase()!=="flv")throw new b.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");E.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=E,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var C=h.default.chrome&&(h.default.version.major<50||h.default.version.major===50&&h.default.version.build<2661);this._alwaysSeekKeyframe=!!(C||h.default.msedge||h.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return S.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},S.prototype.on=function(E,w){var C=this;E===d.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){C._emitter.emit(d.default.MEDIA_INFO,C.mediaInfo)}):E===d.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){C._emitter.emit(d.default.STATISTICS_INFO,C.statisticsInfo)}),this._emitter.addListener(E,w)},S.prototype.off=function(E,w){this._emitter.removeListener(E,w)},S.prototype.attachMediaElement=function(E){var w=this;if(this._mediaElement=E,E.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),E.addEventListener("seeking",this.e.onvSeeking),E.addEventListener("canplay",this.e.onvCanPlay),E.addEventListener("stalled",this.e.onvStalled),E.addEventListener("progress",this.e.onvProgress),this._msectl=new y.default(this._config),this._msectl.on(g.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(g.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(g.default.SOURCE_OPEN,function(){w._mseSourceOpened=!0,w._hasPendingLoad&&(w._hasPendingLoad=!1,w.load())}),this._msectl.on(g.default.ERROR,function(C){w._emitter.emit(d.default.ERROR,m.ErrorTypes.MEDIA_ERROR,m.ErrorDetails.MEDIA_MSE_ERROR,C)}),this._msectl.attachMediaElement(E),this._pendingSeekTime!=null)try{E.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},S.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},S.prototype.load=function(){var E=this;if(!this._mediaElement)throw new b.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new b.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new p.default(this._mediaDataSource,this._config),this._transmuxer.on(v.default.INIT_SEGMENT,function(w,C){E._msectl.appendInitSegment(C)}),this._transmuxer.on(v.default.MEDIA_SEGMENT,function(w,C){if(E._msectl.appendMediaSegment(C),E._config.lazyLoad&&!E._config.isLive){var A=E._mediaElement.currentTime;C.info.endDts>=(A+E._config.lazyLoadMaxDuration)*1e3&&E._progressChecker==null&&(f.default.v(E.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),E._suspendTransmuxer())}}),this._transmuxer.on(v.default.LOADING_COMPLETE,function(){E._msectl.endOfStream(),E._emitter.emit(d.default.LOADING_COMPLETE)}),this._transmuxer.on(v.default.RECOVERED_EARLY_EOF,function(){E._emitter.emit(d.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(v.default.IO_ERROR,function(w,C){E._emitter.emit(d.default.ERROR,m.ErrorTypes.NETWORK_ERROR,w,C)}),this._transmuxer.on(v.default.DEMUX_ERROR,function(w,C){E._emitter.emit(d.default.ERROR,m.ErrorTypes.MEDIA_ERROR,w,{code:-1,msg:C})}),this._transmuxer.on(v.default.MEDIA_INFO,function(w){E._mediaInfo=w,E._emitter.emit(d.default.MEDIA_INFO,Object.assign({},w))}),this._transmuxer.on(v.default.METADATA_ARRIVED,function(w){E._emitter.emit(d.default.METADATA_ARRIVED,w)}),this._transmuxer.on(v.default.SCRIPTDATA_ARRIVED,function(w){E._emitter.emit(d.default.SCRIPTDATA_ARRIVED,w)}),this._transmuxer.on(v.default.STATISTICS_INFO,function(w){E._statisticsInfo=E._fillStatisticsInfo(w),E._emitter.emit(d.default.STATISTICS_INFO,Object.assign({},E._statisticsInfo))}),this._transmuxer.on(v.default.RECOMMEND_SEEKPOINT,function(w){E._mediaElement&&!E._config.accurateSeek&&(E._requestSetTime=!0,E._mediaElement.currentTime=w/1e3)}),this._transmuxer.open()}},S.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},S.prototype.play=function(){return this._mediaElement.play()},S.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(S.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(E){this._mediaElement.volume=E},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(E){this._mediaElement.muted=E},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(E){this._mediaElement?this._internalSeek(E):this._pendingSeekTime=E},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),S.prototype._fillStatisticsInfo=function(E){if(E.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return E;var w=!0,C=0,A=0;if(this._mediaElement.getVideoPlaybackQuality){var P=this._mediaElement.getVideoPlaybackQuality();C=P.totalVideoFrames,A=P.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(C=this._mediaElement.webkitDecodedFrameCount,A=this._mediaElement.webkitDroppedFrameCount):w=!1;return w&&(E.decodedFrames=C,E.droppedFrames=A),E},S.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var E=this._mediaElement.buffered,w=this._mediaElement.currentTime,C=0,A=0;A<E.length;A++){var P=E.start(A),T=E.end(A);if(P<=w&&w<T){C=T;break}}C>=w+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(f.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},S.prototype._onmseBufferFull=function(){f.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},S.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},S.prototype._checkProgressAndResume=function(){for(var E=this._mediaElement.currentTime,w=this._mediaElement.buffered,C=!1,A=0;A<w.length;A++){var P=w.start(A),T=w.end(A);if(E>=P&&E<T){E>=T-this._config.lazyLoadRecoverDuration&&(C=!0);break}}C&&(window.clearInterval(this._progressChecker),this._progressChecker=null,C&&(f.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},S.prototype._isTimepointBuffered=function(E){for(var w=this._mediaElement.buffered,C=0;C<w.length;C++){var A=w.start(C),P=w.end(C);if(E>=A&&E<P)return!0}return!1},S.prototype._internalSeek=function(E){var w=this._isTimepointBuffered(E),C=!1,A=0;if(E<1&&this._mediaElement.buffered.length>0){var P=this._mediaElement.buffered.start(0);(P<1&&E<P||h.default.safari)&&(C=!0,A=h.default.safari?.1:P)}if(C)this._requestSetTime=!0,this._mediaElement.currentTime=A;else if(w){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=E;else{var T=this._msectl.getNearestKeyframe(Math.floor(E*1e3));this._requestSetTime=!0,T!=null?this._mediaElement.currentTime=T.dts/1e3:this._mediaElement.currentTime=E}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(E),this._transmuxer.seek(Math.floor(E*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=E)},S.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var E=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(E)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(E),this._transmuxer.seek(Math.floor(E*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=E))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},S.prototype._checkAndResumeStuckPlayback=function(E){var w=this._mediaElement;if(E||!this._receivedCanPlay||w.readyState<2){var C=w.buffered;C.length>0&&w.currentTime<C.start(0)&&(f.default.w(this.TAG,"Playback seems stuck at "+w.currentTime+", seek to "+C.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=C.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},S.prototype._onvLoadedMetadata=function(E){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},S.prototype._onvSeeking=function(E){var w=this._mediaElement.currentTime,C=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(w<1&&C.length>0){var A=C.start(0);if(A<1&&w<A||h.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=h.default.safari?.1:A;return}}if(this._isTimepointBuffered(w)){if(this._alwaysSeekKeyframe){var P=this._msectl.getNearestKeyframe(Math.floor(w*1e3));P!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=P.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:w,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},S.prototype._onvCanPlay=function(E){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},S.prototype._onvStalled=function(E){this._checkAndResumeStuckPlayback(!0)},S.prototype._onvProgress=function(E){this._checkAndResumeStuckPlayback()},S}();s.default=_},"./src/player/native-player.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/player/player-events.js"),h=c("./src/config.js"),d=c("./src/utils/exception.js"),p=function(){function v(y,g){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(u()),this._config=(0,h.createDefaultConfig)(),typeof g=="object"&&Object.assign(this._config,g),y.type.toLowerCase()==="flv")throw new d.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(y.hasOwnProperty("segments"))throw new d.InvalidArgumentException("NativePlayer("+y.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=y,this._mediaElement=null}return v.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},v.prototype.on=function(y,g){var m=this;y===f.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){m._emitter.emit(f.default.MEDIA_INFO,m.mediaInfo)}):y===f.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){m._emitter.emit(f.default.STATISTICS_INFO,m.statisticsInfo)}),this._emitter.addListener(y,g)},v.prototype.off=function(y,g){this._emitter.removeListener(y,g)},v.prototype.attachMediaElement=function(y){if(this._mediaElement=y,y.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{y.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},v.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},v.prototype.load=function(){if(!this._mediaElement)throw new d.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},v.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},v.prototype.play=function(){return this._mediaElement.play()},v.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(v.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(y){this._mediaElement.volume=y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(y){this._mediaElement.muted=y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(y){this._mediaElement?this._mediaElement.currentTime=y:this._pendingSeekTime=y},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"mediaInfo",{get:function(){var y=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",g={mimeType:y+this._mediaDataSource.type};return this._mediaElement&&(g.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(g.width=this._mediaElement.videoWidth,g.height=this._mediaElement.videoHeight)),g},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"statisticsInfo",{get:function(){var y={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return y;var g=!0,m=0,x=0;if(this._mediaElement.getVideoPlaybackQuality){var b=this._mediaElement.getVideoPlaybackQuality();m=b.totalVideoFrames,x=b.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(m=this._mediaElement.webkitDecodedFrameCount,x=this._mediaElement.webkitDroppedFrameCount):g=!1;return g&&(y.decodedFrames=m,y.droppedFrames=x),y},enumerable:!1,configurable:!0}),v.prototype._onvLoadedMetadata=function(y){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(f.default.MEDIA_INFO,this.mediaInfo)},v.prototype._reportStatisticsInfo=function(){this._emitter.emit(f.default.STATISTICS_INFO,this.statisticsInfo)},v}();s.default=p},"./src/player/player-errors.js":function(o,s,c){c.r(s),c.d(s,{ErrorTypes:function(){return f},ErrorDetails:function(){return h}});var l=c("./src/io/loader.js"),u=c("./src/demux/demux-errors.js"),f={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},h={NETWORK_EXCEPTION:l.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:l.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:l.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:l.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:u.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:u.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:u.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(o,s,c){c.r(s);var l={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};s.default=l},"./src/remux/aac-silent.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.getSilentFrame=function(f,h){if(f==="mp4a.40.2"){if(h===1)return new Uint8Array([0,200,0,128,35,128]);if(h===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(h===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(h===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(h===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(h===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(h===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(h===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(h===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},u}();s.default=l},"./src/remux/mp4-generator.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.init=function(){u.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var f in u.types)u.types.hasOwnProperty(f)&&(u.types[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);var h=u.constants={};h.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),h.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),h.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSC=h.STCO=h.STTS,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),h.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),h.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},u.box=function(f){for(var h=8,d=null,p=Array.prototype.slice.call(arguments,1),v=p.length,y=0;y<v;y++)h+=p[y].byteLength;d=new Uint8Array(h),d[0]=h>>>24&255,d[1]=h>>>16&255,d[2]=h>>>8&255,d[3]=h&255,d.set(f,4);for(var g=8,y=0;y<v;y++)d.set(p[y],g),g+=p[y].byteLength;return d},u.generateInitSegment=function(f){var h=u.box(u.types.ftyp,u.constants.FTYP),d=u.moov(f),p=new Uint8Array(h.byteLength+d.byteLength);return p.set(h,0),p.set(d,h.byteLength),p},u.moov=function(f){var h=u.mvhd(f.timescale,f.duration),d=u.trak(f),p=u.mvex(f);return u.box(u.types.moov,h,d,p)},u.mvhd=function(f,h){return u.box(u.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},u.trak=function(f){return u.box(u.types.trak,u.tkhd(f),u.mdia(f))},u.tkhd=function(f){var h=f.id,d=f.duration,p=f.presentWidth,v=f.presentHeight;return u.box(u.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>>8&255,p&255,0,0,v>>>8&255,v&255,0,0]))},u.mdia=function(f){return u.box(u.types.mdia,u.mdhd(f),u.hdlr(f),u.minf(f))},u.mdhd=function(f){var h=f.timescale,d=f.duration;return u.box(u.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255,85,196,0,0]))},u.hdlr=function(f){var h=null;return f.type==="audio"?h=u.constants.HDLR_AUDIO:h=u.constants.HDLR_VIDEO,u.box(u.types.hdlr,h)},u.minf=function(f){var h=null;return f.type==="audio"?h=u.box(u.types.smhd,u.constants.SMHD):h=u.box(u.types.vmhd,u.constants.VMHD),u.box(u.types.minf,h,u.dinf(),u.stbl(f))},u.dinf=function(){var f=u.box(u.types.dinf,u.box(u.types.dref,u.constants.DREF));return f},u.stbl=function(f){var h=u.box(u.types.stbl,u.stsd(f),u.box(u.types.stts,u.constants.STTS),u.box(u.types.stsc,u.constants.STSC),u.box(u.types.stsz,u.constants.STSZ),u.box(u.types.stco,u.constants.STCO));return h},u.stsd=function(f){return f.type==="audio"?f.codec==="mp3"?u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp3(f)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.mp4a(f)):u.box(u.types.stsd,u.constants.STSD_PREFIX,u.avc1(f))},u.mp3=function(f){var h=f.channelCount,d=f.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h,0,16,0,0,0,0,d>>>8&255,d&255,0,0]);return u.box(u.types[".mp3"],p)},u.mp4a=function(f){var h=f.channelCount,d=f.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,h,0,16,0,0,0,0,d>>>8&255,d&255,0,0]);return u.box(u.types.mp4a,p,u.esds(f))},u.esds=function(f){var h=f.config||[],d=h.length,p=new Uint8Array([0,0,0,0,3,23+d,0,1,0,4,15+d,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([d]).concat(h).concat([6,1,2]));return u.box(u.types.esds,p)},u.avc1=function(f){var h=f.avcc,d=f.codecWidth,p=f.codecHeight,v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,d>>>8&255,d&255,p>>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return u.box(u.types.avc1,v,u.box(u.types.avcC,h))},u.mvex=function(f){return u.box(u.types.mvex,u.trex(f))},u.trex=function(f){var h=f.id,d=new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return u.box(u.types.trex,d)},u.moof=function(f,h){return u.box(u.types.moof,u.mfhd(f.sequenceNumber),u.traf(f,h))},u.mfhd=function(f){var h=new Uint8Array([0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255]);return u.box(u.types.mfhd,h)},u.traf=function(f,h){var d=f.id,p=u.box(u.types.tfhd,new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255])),v=u.box(u.types.tfdt,new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255])),y=u.sdtp(f),g=u.trun(f,y.byteLength+16+16+8+16+8+8);return u.box(u.types.traf,p,v,g,y)},u.sdtp=function(f){for(var h=f.samples||[],d=h.length,p=new Uint8Array(4+d),v=0;v<d;v++){var y=h[v].flags;p[v+4]=y.isLeading<<6|y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy}return u.box(u.types.sdtp,p)},u.trun=function(f,h){var d=f.samples||[],p=d.length,v=12+16*p,y=new Uint8Array(v);h+=8+v,y.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,p&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255],0);for(var g=0;g<p;g++){var m=d[g].duration,x=d[g].size,b=d[g].flags,_=d[g].cts;y.set([m>>>24&255,m>>>16&255,m>>>8&255,m&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255,b.isLeading<<2|b.dependsOn,b.isDependedOn<<6|b.hasRedundancy<<4|b.isNonSync,0,0,_>>>24&255,_>>>16&255,_>>>8&255,_&255],12+16*g)}return u.box(u.types.trun,y)},u.mdat=function(f){return u.box(u.types.mdat,f)},u}();l.init(),s.default=l},"./src/remux/mp4-remuxer.js":function(o,s,c){c.r(s);var l=c("./src/utils/logger.js"),u=c("./src/remux/mp4-generator.js"),f=c("./src/remux/aac-silent.js"),h=c("./src/utils/browser.js"),d=c("./src/core/media-segment-info.js"),p=c("./src/utils/exception.js"),v=function(){function y(g){this.TAG="MP4Remuxer",this._config=g,this._isLive=g.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new d.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new d.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(h.default.chrome&&(h.default.version.major<50||h.default.version.major===50&&h.default.version.build<2661)),this._fillSilentAfterSeek=h.default.msedge||h.default.msie,this._mp3UseMpegAudio=!h.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return y.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},y.prototype.bindDataSource=function(g){return g.onDataAvailable=this.remux.bind(this),g.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(y.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(g){this._onInitSegment=g},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(g){this._onMediaSegment=g},enumerable:!1,configurable:!0}),y.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},y.prototype.seek=function(g){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},y.prototype.remux=function(g,m){if(!this._onMediaSegment)throw new p.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(g,m),this._remuxVideo(m),this._remuxAudio(g)},y.prototype._onTrackMetadataReceived=function(g,m){var x=null,b="mp4",_=m.codec;if(g==="audio")this._audioMeta=m,m.codec==="mp3"&&this._mp3UseMpegAudio?(b="mpeg",_="",x=new Uint8Array):x=u.default.generateInitSegment(m);else if(g==="video")this._videoMeta=m,x=u.default.generateInitSegment(m);else return;if(!this._onInitSegment)throw new p.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(g,{type:g,data:x.buffer,codec:_,container:g+"/"+b,mediaDuration:m.duration})},y.prototype._calculateDtsBase=function(g,m){this._dtsBaseInited||(g.samples&&g.samples.length&&(this._audioDtsBase=g.samples[0].dts),m.samples&&m.samples.length&&(this._videoDtsBase=m.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},y.prototype.flushStashedSamples=function(){var g=this._videoStashedLastSample,m=this._audioStashedLastSample,x={type:"video",id:1,sequenceNumber:0,samples:[],length:0};g!=null&&(x.samples.push(g),x.length=g.length);var b={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};m!=null&&(b.samples.push(m),b.length=m.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(x,!0),this._remuxAudio(b,!0)},y.prototype._remuxAudio=function(g,m){if(this._audioMeta!=null){var x=g,b=x.samples,_=void 0,S=-1,E=-1,w=this._audioMeta.refSampleDuration,C=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,A=this._dtsBaseInited&&this._audioNextDts===void 0,P=!1;if(!(!b||b.length===0)&&!(b.length===1&&!m)){var T=0,O=null,R=0;C?(T=0,R=x.length):(T=8,R=8+x.length);var F=null;if(b.length>1&&(F=b.pop(),R-=F.length),this._audioStashedLastSample!=null){var D=this._audioStashedLastSample;this._audioStashedLastSample=null,b.unshift(D),R+=D.length}F!=null&&(this._audioStashedLastSample=F);var V=b[0].dts-this._dtsBase;if(this._audioNextDts)_=V-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())_=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(P=!0);else{var Y=this._audioSegmentInfoList.getLastSampleBefore(V);if(Y!=null){var W=V-(Y.originalDts+Y.duration);W<=3&&(W=0);var $=Y.dts+Y.duration+W;_=V-$}else _=0}if(P){var I=V-_,B=this._videoSegmentInfoList.getLastSegmentBefore(V);if(B!=null&&B.beginDts<I){var L=f.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(L){var M=B.beginDts,X=I-B.beginDts;l.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+M+", duration: "+X),b.unshift({unit:L,dts:M,pts:M}),R+=L.byteLength}}else P=!1}for(var K=[],ne=0;ne<b.length;ne++){var D=b[ne],te=D.unit,ce=D.dts-this._dtsBase,M=ce,de=!1,se=null,fe=0;if(!(ce<-.001)){if(this._audioMeta.codec!=="mp3"){var oe=ce,he=3;if(this._audioNextDts&&(oe=this._audioNextDts),_=ce-oe,_<=-he*w){l.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+ce+" ms ,curRefDts: "+oe+" ms)  due to dtsCorrection: "+_+" ms overlap.");continue}else if(_>=he*w&&this._fillAudioTimestampGap&&!h.default.safari){de=!0;var Pe=Math.floor(_/w);l.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+ce+" ms, curRefDts: "+oe+" ms, ")+("dtsCorrection: "+Math.round(_)+" ms, generate: "+Pe+" frames")),M=Math.floor(oe),fe=Math.floor(oe+w)-M;var L=f.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);L==null&&(l.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),L=te),se=[];for(var Ie=0;Ie<Pe;Ie++){oe=oe+w;var Ee=Math.floor(oe),Be=Math.floor(oe+w)-Ee,qe={dts:Ee,pts:Ee,cts:0,unit:L,size:L.byteLength,duration:Be,originalDts:ce,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};se.push(qe),R+=qe.size}this._audioNextDts=oe+w}else M=Math.floor(oe),fe=Math.floor(oe+w)-M,this._audioNextDts=oe+w}else{if(M=ce-_,ne!==b.length-1){var rt=b[ne+1].dts-this._dtsBase-_;fe=rt-M}else if(F!=null){var rt=F.dts-this._dtsBase-_;fe=rt-M}else K.length>=1?fe=K[K.length-1].duration:fe=Math.floor(w);this._audioNextDts=M+fe}S===-1&&(S=M),K.push({dts:M,pts:M,cts:0,unit:D.unit,size:D.unit.byteLength,duration:fe,originalDts:ce,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),de&&K.push.apply(K,se)}}if(K.length===0){x.samples=[],x.length=0;return}C?O=new Uint8Array(R):(O=new Uint8Array(R),O[0]=R>>>24&255,O[1]=R>>>16&255,O[2]=R>>>8&255,O[3]=R&255,O.set(u.default.types.mdat,4));for(var ne=0;ne<K.length;ne++){var te=K[ne].unit;O.set(te,T),T+=te.byteLength}var Xe=K[K.length-1];E=Xe.dts+Xe.duration;var Ge=new d.MediaSegmentInfo;Ge.beginDts=S,Ge.endDts=E,Ge.beginPts=S,Ge.endPts=E,Ge.originalBeginDts=K[0].originalDts,Ge.originalEndDts=Xe.originalDts+Xe.duration,Ge.firstSample=new d.SampleInfo(K[0].dts,K[0].pts,K[0].duration,K[0].originalDts,!1),Ge.lastSample=new d.SampleInfo(Xe.dts,Xe.pts,Xe.duration,Xe.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(Ge),x.samples=K,x.sequenceNumber++;var Qe=null;C?Qe=new Uint8Array:Qe=u.default.moof(x,S),x.samples=[],x.length=0;var bt={type:"audio",data:this._mergeBoxes(Qe,O).buffer,sampleCount:K.length,info:Ge};C&&A&&(bt.timestampOffset=S),this._onMediaSegment("audio",bt)}}},y.prototype._remuxVideo=function(g,m){if(this._videoMeta!=null){var x=g,b=x.samples,_=void 0,S=-1,E=-1,w=-1,C=-1;if(!(!b||b.length===0)&&!(b.length===1&&!m)){var A=8,P=null,T=8+g.length,O=null;if(b.length>1&&(O=b.pop(),T-=O.length),this._videoStashedLastSample!=null){var R=this._videoStashedLastSample;this._videoStashedLastSample=null,b.unshift(R),T+=R.length}O!=null&&(this._videoStashedLastSample=O);var F=b[0].dts-this._dtsBase;if(this._videoNextDts)_=F-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())_=0;else{var D=this._videoSegmentInfoList.getLastSampleBefore(F);if(D!=null){var V=F-(D.originalDts+D.duration);V<=3&&(V=0);var Y=D.dts+D.duration+V;_=F-Y}else _=0}for(var W=new d.MediaSegmentInfo,$=[],I=0;I<b.length;I++){var R=b[I],B=R.dts-this._dtsBase,L=R.isKeyframe,M=B-_,X=R.cts,K=M+X;S===-1&&(S=M,w=K);var ne=0;if(I!==b.length-1){var te=b[I+1].dts-this._dtsBase-_;ne=te-M}else if(O!=null){var te=O.dts-this._dtsBase-_;ne=te-M}else $.length>=1?ne=$[$.length-1].duration:ne=Math.floor(this._videoMeta.refSampleDuration);if(L){var ce=new d.SampleInfo(M,K,ne,R.dts,!0);ce.fileposition=R.fileposition,W.appendSyncPoint(ce)}$.push({dts:M,pts:K,cts:X,units:R.units,size:R.length,isKeyframe:L,duration:ne,originalDts:B,flags:{isLeading:0,dependsOn:L?2:1,isDependedOn:L?1:0,hasRedundancy:0,isNonSync:L?0:1}})}P=new Uint8Array(T),P[0]=T>>>24&255,P[1]=T>>>16&255,P[2]=T>>>8&255,P[3]=T&255,P.set(u.default.types.mdat,4);for(var I=0;I<$.length;I++)for(var de=$[I].units;de.length;){var se=de.shift(),fe=se.data;P.set(fe,A),A+=fe.byteLength}var oe=$[$.length-1];if(E=oe.dts+oe.duration,C=oe.pts+oe.duration,this._videoNextDts=E,W.beginDts=S,W.endDts=E,W.beginPts=w,W.endPts=C,W.originalBeginDts=$[0].originalDts,W.originalEndDts=oe.originalDts+oe.duration,W.firstSample=new d.SampleInfo($[0].dts,$[0].pts,$[0].duration,$[0].originalDts,$[0].isKeyframe),W.lastSample=new d.SampleInfo(oe.dts,oe.pts,oe.duration,oe.originalDts,oe.isKeyframe),this._isLive||this._videoSegmentInfoList.append(W),x.samples=$,x.sequenceNumber++,this._forceFirstIDR){var he=$[0].flags;he.dependsOn=2,he.isNonSync=0}var Pe=u.default.moof(x,S);x.samples=[],x.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(Pe,P).buffer,sampleCount:$.length,info:W})}}},y.prototype._mergeBoxes=function(g,m){var x=new Uint8Array(g.byteLength+m.byteLength);return x.set(g,0),x.set(m,g.byteLength),x},y}();s.default=v},"./src/utils/browser.js":function(o,s,c){c.r(s);var l={};function u(){var f=self.navigator.userAgent.toLowerCase(),h=/(edge)\/([\w.]+)/.exec(f)||/(opr)[\/]([\w.]+)/.exec(f)||/(chrome)[ \/]([\w.]+)/.exec(f)||/(iemobile)[\/]([\w.]+)/.exec(f)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(f)||/(webkit)[ \/]([\w.]+)/.exec(f)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(f)||/(msie) ([\w.]+)/.exec(f)||f.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(f)||f.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(f)||[],d=/(ipad)/.exec(f)||/(ipod)/.exec(f)||/(windows phone)/.exec(f)||/(iphone)/.exec(f)||/(kindle)/.exec(f)||/(android)/.exec(f)||/(windows)/.exec(f)||/(mac)/.exec(f)||/(linux)/.exec(f)||/(cros)/.exec(f)||[],p={browser:h[5]||h[3]||h[1]||"",version:h[2]||h[4]||"0",majorVersion:h[4]||h[2]||"0",platform:d[0]||""},v={};if(p.browser){v[p.browser]=!0;var y=p.majorVersion.split(".");v.version={major:parseInt(p.majorVersion,10),string:p.version},y.length>1&&(v.version.minor=parseInt(y[1],10)),y.length>2&&(v.version.build=parseInt(y[2],10))}if(p.platform&&(v[p.platform]=!0),(v.chrome||v.opr||v.safari)&&(v.webkit=!0),v.rv||v.iemobile){v.rv&&delete v.rv;var g="msie";p.browser=g,v[g]=!0}if(v.edge){delete v.edge;var m="msedge";p.browser=m,v[m]=!0}if(v.opr){var x="opera";p.browser=x,v[x]=!0}if(v.safari&&v.android){var b="android";p.browser=b,v[b]=!0}v.name=p.browser,v.platform=p.platform;for(var _ in l)l.hasOwnProperty(_)&&delete l[_];Object.assign(l,v)}u(),s.default=l},"./src/utils/exception.js":function(o,s,c){c.r(s),c.d(s,{RuntimeException:function(){return u},IllegalStateException:function(){return f},InvalidArgumentException:function(){return h},NotImplementedException:function(){return d}});var l=function(){var p=function(v,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(g[x]=m[x])},p(v,y)};return function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(v,y);function g(){this.constructor=v}v.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),u=function(){function p(v){this._message=v}return Object.defineProperty(p.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),p.prototype.toString=function(){return this.name+": "+this.message},p}(),f=function(p){l(v,p);function v(y){return p.call(this,y)||this}return Object.defineProperty(v.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),v}(u),h=function(p){l(v,p);function v(y){return p.call(this,y)||this}return Object.defineProperty(v.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),v}(u),d=function(p){l(v,p);function v(y){return p.call(this,y)||this}return Object.defineProperty(v.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),v}(u)},"./src/utils/logger.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=function(){function h(){}return h.e=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","error",v),h.ENABLE_ERROR&&(console.error?console.error(v):console.warn?console.warn(v):console.log(v))},h.i=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","info",v),h.ENABLE_INFO&&(console.info?console.info(v):console.log(v))},h.w=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","warn",v),h.ENABLE_WARN&&(console.warn?console.warn(v):console.log(v))},h.d=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","debug",v),h.ENABLE_DEBUG&&(console.debug?console.debug(v):console.log(v))},h.v=function(d,p){(!d||h.FORCE_GLOBAL_TAG)&&(d=h.GLOBAL_TAG);var v="["+d+"] > "+p;h.ENABLE_CALLBACK&&h.emitter.emit("log","verbose",v),h.ENABLE_VERBOSE&&console.log(v)},h}();f.GLOBAL_TAG="flv.js",f.FORCE_GLOBAL_TAG=!1,f.ENABLE_ERROR=!0,f.ENABLE_INFO=!0,f.ENABLE_WARN=!0,f.ENABLE_DEBUG=!0,f.ENABLE_VERBOSE=!0,f.ENABLE_CALLBACK=!1,f.emitter=new(u()),s.default=f},"./src/utils/logging-control.js":function(o,s,c){c.r(s);var l=c("./node_modules/events/events.js"),u=c.n(l),f=c("./src/utils/logger.js"),h=function(){function d(){}return Object.defineProperty(d,"forceGlobalTag",{get:function(){return f.default.FORCE_GLOBAL_TAG},set:function(p){f.default.FORCE_GLOBAL_TAG=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"globalTag",{get:function(){return f.default.GLOBAL_TAG},set:function(p){f.default.GLOBAL_TAG=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableAll",{get:function(){return f.default.ENABLE_VERBOSE&&f.default.ENABLE_DEBUG&&f.default.ENABLE_INFO&&f.default.ENABLE_WARN&&f.default.ENABLE_ERROR},set:function(p){f.default.ENABLE_VERBOSE=p,f.default.ENABLE_DEBUG=p,f.default.ENABLE_INFO=p,f.default.ENABLE_WARN=p,f.default.ENABLE_ERROR=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableDebug",{get:function(){return f.default.ENABLE_DEBUG},set:function(p){f.default.ENABLE_DEBUG=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableVerbose",{get:function(){return f.default.ENABLE_VERBOSE},set:function(p){f.default.ENABLE_VERBOSE=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableInfo",{get:function(){return f.default.ENABLE_INFO},set:function(p){f.default.ENABLE_INFO=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableWarn",{get:function(){return f.default.ENABLE_WARN},set:function(p){f.default.ENABLE_WARN=p,d._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(d,"enableError",{get:function(){return f.default.ENABLE_ERROR},set:function(p){f.default.ENABLE_ERROR=p,d._notifyChange()},enumerable:!1,configurable:!0}),d.getConfig=function(){return{globalTag:f.default.GLOBAL_TAG,forceGlobalTag:f.default.FORCE_GLOBAL_TAG,enableVerbose:f.default.ENABLE_VERBOSE,enableDebug:f.default.ENABLE_DEBUG,enableInfo:f.default.ENABLE_INFO,enableWarn:f.default.ENABLE_WARN,enableError:f.default.ENABLE_ERROR,enableCallback:f.default.ENABLE_CALLBACK}},d.applyConfig=function(p){f.default.GLOBAL_TAG=p.globalTag,f.default.FORCE_GLOBAL_TAG=p.forceGlobalTag,f.default.ENABLE_VERBOSE=p.enableVerbose,f.default.ENABLE_DEBUG=p.enableDebug,f.default.ENABLE_INFO=p.enableInfo,f.default.ENABLE_WARN=p.enableWarn,f.default.ENABLE_ERROR=p.enableError,f.default.ENABLE_CALLBACK=p.enableCallback},d._notifyChange=function(){var p=d.emitter;if(p.listenerCount("change")>0){var v=d.getConfig();p.emit("change",v)}},d.registerListener=function(p){d.emitter.addListener("change",p)},d.removeListener=function(p){d.emitter.removeListener("change",p)},d.addLogListener=function(p){f.default.emitter.addListener("log",p),f.default.emitter.listenerCount("log")>0&&(f.default.ENABLE_CALLBACK=!0,d._notifyChange())},d.removeLogListener=function(p){f.default.emitter.removeListener("log",p),f.default.emitter.listenerCount("log")===0&&(f.default.ENABLE_CALLBACK=!1,d._notifyChange())},d}();h.emitter=new(u()),s.default=h},"./src/utils/polyfill.js":function(o,s,c){c.r(s);var l=function(){function u(){}return u.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(f,h){return f.__proto__=h,f},Object.assign=Object.assign||function(f){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(f),d=1;d<arguments.length;d++){var p=arguments[d];if(p!=null)for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v])}return h},typeof self.Promise!="function"&&c("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},u}();l.install(),s.default=l},"./src/utils/utf8-conv.js":function(o,s,c){c.r(s);function l(f,h,d){var p=f;if(h+d<p.length){for(;d--;)if((p[++h]&192)!==128)return!1;return!0}else return!1}function u(f){for(var h=[],d=f,p=0,v=f.length;p<v;){if(d[p]<128){h.push(String.fromCharCode(d[p])),++p;continue}else if(!(d[p]<192)){if(d[p]<224){if(l(d,p,1)){var y=(d[p]&31)<<6|d[p+1]&63;if(y>=128){h.push(String.fromCharCode(y&65535)),p+=2;continue}}}else if(d[p]<240){if(l(d,p,2)){var y=(d[p]&15)<<12|(d[p+1]&63)<<6|d[p+2]&63;if(y>=2048&&(y&63488)!==55296){h.push(String.fromCharCode(y&65535)),p+=3;continue}}}else if(d[p]<248&&l(d,p,3)){var y=(d[p]&7)<<18|(d[p+1]&63)<<12|(d[p+2]&63)<<6|d[p+3]&63;if(y>65536&&y<1114112){y-=65536,h.push(String.fromCharCode(y>>>10|55296)),h.push(String.fromCharCode(y&1023|56320)),p+=4;continue}}}h.push(String.fromCharCode(65533)),++p}return h.join("")}s.default=u}},n={};function i(o){var s=n[o];if(s!==void 0)return s.exports;var c=n[o]={exports:{}};return r[o].call(c.exports,c,c.exports,i),c.exports}i.m=r,function(){i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,{a:s}),s}}(),function(){i.d=function(o,s){for(var c in s)i.o(s,c)&&!i.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:s[c]})}}(),function(){i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)}}(),function(){i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}}();var a=i("./src/index.js");return a}()})})(m3);var ioe=m3.exports;const aoe=vn(ioe);var g3={exports:{}},tg={exports:{}};const ooe={},soe=Object.freeze(Object.defineProperty({__proto__:null,default:ooe},Symbol.toStringTag,{value:"Module"})),y3=QN(soe);var sP;function ft(){return sP||(sP=1,function(t,e){(function(r,n){t.exports=n()})(je,function(){var r=r||function(n,i){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof je<"u"&&je.crypto&&(a=je.crypto),!a&&typeof dc=="function")try{a=y3}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function m(){}return function(x){var b;return m.prototype=x,b=new m,m.prototype=null,b}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(m){var x=s(this);return m&&x.mixIn(m),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var x in m)m.hasOwnProperty(x)&&(this[x]=m[x]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(m,x){m=this.words=m||[],x!=i?this.sigBytes=x:this.sigBytes=m.length*4},toString:function(m){return(m||d).stringify(this)},concat:function(m){var x=this.words,b=m.words,_=this.sigBytes,S=m.sigBytes;if(this.clamp(),_%4)for(var E=0;E<S;E++){var w=b[E>>>2]>>>24-E%4*8&255;x[_+E>>>2]|=w<<24-(_+E)%4*8}else for(var C=0;C<S;C+=4)x[_+C>>>2]=b[C>>>2];return this.sigBytes+=S,this},clamp:function(){var m=this.words,x=this.sigBytes;m[x>>>2]&=4294967295<<32-x%4*8,m.length=n.ceil(x/4)},clone:function(){var m=u.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var x=[],b=0;b<m;b+=4)x.push(o());return new f.init(x,m)}}),h=c.enc={},d=h.Hex={stringify:function(m){for(var x=m.words,b=m.sigBytes,_=[],S=0;S<b;S++){var E=x[S>>>2]>>>24-S%4*8&255;_.push((E>>>4).toString(16)),_.push((E&15).toString(16))}return _.join("")},parse:function(m){for(var x=m.length,b=[],_=0;_<x;_+=2)b[_>>>3]|=parseInt(m.substr(_,2),16)<<24-_%8*4;return new f.init(b,x/2)}},p=h.Latin1={stringify:function(m){for(var x=m.words,b=m.sigBytes,_=[],S=0;S<b;S++){var E=x[S>>>2]>>>24-S%4*8&255;_.push(String.fromCharCode(E))}return _.join("")},parse:function(m){for(var x=m.length,b=[],_=0;_<x;_++)b[_>>>2]|=(m.charCodeAt(_)&255)<<24-_%4*8;return new f.init(b,x)}},v=h.Utf8={stringify:function(m){try{return decodeURIComponent(escape(p.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return p.parse(unescape(encodeURIComponent(m)))}},y=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=v.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var x,b=this._data,_=b.words,S=b.sigBytes,E=this.blockSize,w=E*4,C=S/w;m?C=n.ceil(C):C=n.max((C|0)-this._minBufferSize,0);var A=C*E,P=n.min(A*4,S);if(A){for(var T=0;T<A;T+=E)this._doProcessBlock(_,T);x=_.splice(0,A),b.sigBytes-=P}return new f.init(x,P)},clone:function(){var m=u.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});l.Hasher=y.extend({cfg:u.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(m){return function(x,b){return new m.init(b).finalize(x)}},_createHmacHelper:function(m){return function(x,b){return new g.HMAC.init(m,b).finalize(x)}}});var g=c.algo={};return c}(Math);return r})}(tg)),tg.exports}var rg={exports:{}},lP;function J0(){return lP||(lP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(n){var i=r,a=i.lib,o=a.Base,s=a.WordArray,c=i.x64={};c.Word=o.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=o.extend({init:function(l,u){l=this.words=l||[],u!=n?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,f=[],h=0;h<u;h++){var d=l[h];f.push(d.high),f.push(d.low)}return s.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),u=l.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return l}})}(),r})}(rg)),rg.exports}var ng={exports:{}},uP;function loe(){return uP||(uP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,a=i.WordArray,o=a.init,s=a.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],f=0;f<l;f++)u[f>>>2]|=c[f]<<24-f%4*8;o.call(this,u,l)}else o.apply(this,arguments)};s.prototype=a}}(),r.lib.WordArray})}(ng)),ng.exports}var ig={exports:{}},cP;function uoe(){return cP||(cP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],h=0;h<u;h+=2){var d=l[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(d))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return a.create(u,l*2)}},o.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,f=[],h=0;h<u;h+=2){var d=s(l[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(d))}return f.join("")},parse:function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=s(c.charCodeAt(f)<<16-f%2*16);return a.create(u,l*2)}};function s(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(ig)),ig.exports}var ag={exports:{}},fP;function Ls(){return fP||(fP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var h=[],d=0;d<u;d+=3)for(var p=l[d>>>2]>>>24-d%4*8&255,v=l[d+1>>>2]>>>24-(d+1)%4*8&255,y=l[d+2>>>2]>>>24-(d+2)%4*8&255,g=p<<16|v<<8|y,m=0;m<4&&d+m*.75<u;m++)h.push(f.charAt(g>>>6*(3-m)&63));var x=f.charAt(64);if(x)for(;h.length%4;)h.push(x);return h.join("")},parse:function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var d=u.charAt(64);if(d){var p=c.indexOf(d);p!==-1&&(l=p)}return s(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(c,l,u){for(var f=[],h=0,d=0;d<l;d++)if(d%4){var p=u[c.charCodeAt(d-1)]<<d%4*2,v=u[c.charCodeAt(d)]>>>6-d%4*2,y=p|v;f[h>>>2]|=y<<24-h%4*8,h++}return a.create(f,h)}}(),r.enc.Base64})}(ag)),ag.exports}var og={exports:{}},hP;function coe(){return hP||(hP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.enc;o.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,h=l?this._safe_map:this._map;c.clamp();for(var d=[],p=0;p<f;p+=3)for(var v=u[p>>>2]>>>24-p%4*8&255,y=u[p+1>>>2]>>>24-(p+1)%4*8&255,g=u[p+2>>>2]>>>24-(p+2)%4*8&255,m=v<<16|y<<8|g,x=0;x<4&&p+x*.75<f;x++)d.push(h.charAt(m>>>6*(3-x)&63));var b=h.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<f.length;d++)h[f.charCodeAt(d)]=d}var p=f.charAt(64);if(p){var v=c.indexOf(p);v!==-1&&(u=v)}return s(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(c,l,u){for(var f=[],h=0,d=0;d<l;d++)if(d%4){var p=u[c.charCodeAt(d-1)]<<d%4*2,v=u[c.charCodeAt(d)]>>>6-d%4*2,y=p|v;f[h>>>2]|=y<<24-h%4*8,h++}return a.create(f,h)}}(),r.enc.Base64url})}(og)),og.exports}var sg={exports:{}},dP;function Bs(){return dP||(dP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=[];(function(){for(var v=0;v<64;v++)l[v]=n.abs(n.sin(v+1))*4294967296|0})();var u=c.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,y){for(var g=0;g<16;g++){var m=y+g,x=v[m];v[m]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,_=v[y+0],S=v[y+1],E=v[y+2],w=v[y+3],C=v[y+4],A=v[y+5],P=v[y+6],T=v[y+7],O=v[y+8],R=v[y+9],F=v[y+10],D=v[y+11],V=v[y+12],Y=v[y+13],W=v[y+14],$=v[y+15],I=b[0],B=b[1],L=b[2],M=b[3];I=f(I,B,L,M,_,7,l[0]),M=f(M,I,B,L,S,12,l[1]),L=f(L,M,I,B,E,17,l[2]),B=f(B,L,M,I,w,22,l[3]),I=f(I,B,L,M,C,7,l[4]),M=f(M,I,B,L,A,12,l[5]),L=f(L,M,I,B,P,17,l[6]),B=f(B,L,M,I,T,22,l[7]),I=f(I,B,L,M,O,7,l[8]),M=f(M,I,B,L,R,12,l[9]),L=f(L,M,I,B,F,17,l[10]),B=f(B,L,M,I,D,22,l[11]),I=f(I,B,L,M,V,7,l[12]),M=f(M,I,B,L,Y,12,l[13]),L=f(L,M,I,B,W,17,l[14]),B=f(B,L,M,I,$,22,l[15]),I=h(I,B,L,M,S,5,l[16]),M=h(M,I,B,L,P,9,l[17]),L=h(L,M,I,B,D,14,l[18]),B=h(B,L,M,I,_,20,l[19]),I=h(I,B,L,M,A,5,l[20]),M=h(M,I,B,L,F,9,l[21]),L=h(L,M,I,B,$,14,l[22]),B=h(B,L,M,I,C,20,l[23]),I=h(I,B,L,M,R,5,l[24]),M=h(M,I,B,L,W,9,l[25]),L=h(L,M,I,B,w,14,l[26]),B=h(B,L,M,I,O,20,l[27]),I=h(I,B,L,M,Y,5,l[28]),M=h(M,I,B,L,E,9,l[29]),L=h(L,M,I,B,T,14,l[30]),B=h(B,L,M,I,V,20,l[31]),I=d(I,B,L,M,A,4,l[32]),M=d(M,I,B,L,O,11,l[33]),L=d(L,M,I,B,D,16,l[34]),B=d(B,L,M,I,W,23,l[35]),I=d(I,B,L,M,S,4,l[36]),M=d(M,I,B,L,C,11,l[37]),L=d(L,M,I,B,T,16,l[38]),B=d(B,L,M,I,F,23,l[39]),I=d(I,B,L,M,Y,4,l[40]),M=d(M,I,B,L,_,11,l[41]),L=d(L,M,I,B,w,16,l[42]),B=d(B,L,M,I,P,23,l[43]),I=d(I,B,L,M,R,4,l[44]),M=d(M,I,B,L,V,11,l[45]),L=d(L,M,I,B,$,16,l[46]),B=d(B,L,M,I,E,23,l[47]),I=p(I,B,L,M,_,6,l[48]),M=p(M,I,B,L,T,10,l[49]),L=p(L,M,I,B,W,15,l[50]),B=p(B,L,M,I,A,21,l[51]),I=p(I,B,L,M,V,6,l[52]),M=p(M,I,B,L,w,10,l[53]),L=p(L,M,I,B,F,15,l[54]),B=p(B,L,M,I,S,21,l[55]),I=p(I,B,L,M,O,6,l[56]),M=p(M,I,B,L,$,10,l[57]),L=p(L,M,I,B,P,15,l[58]),B=p(B,L,M,I,Y,21,l[59]),I=p(I,B,L,M,C,6,l[60]),M=p(M,I,B,L,D,10,l[61]),L=p(L,M,I,B,E,15,l[62]),B=p(B,L,M,I,R,21,l[63]),b[0]=b[0]+I|0,b[1]=b[1]+B|0,b[2]=b[2]+L|0,b[3]=b[3]+M|0},_doFinalize:function(){var v=this._data,y=v.words,g=this._nDataBytes*8,m=v.sigBytes*8;y[m>>>5]|=128<<24-m%32;var x=n.floor(g/4294967296),b=g;y[(m+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,y[(m+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,v.sigBytes=(y.length+1)*4,this._process();for(var _=this._hash,S=_.words,E=0;E<4;E++){var w=S[E];S[E]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}return _},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v}});function f(v,y,g,m,x,b,_){var S=v+(y&g|~y&m)+x+_;return(S<<b|S>>>32-b)+y}function h(v,y,g,m,x,b,_){var S=v+(y&m|g&~m)+x+_;return(S<<b|S>>>32-b)+y}function d(v,y,g,m,x,b,_){var S=v+(y^g^m)+x+_;return(S<<b|S>>>32-b)+y}function p(v,y,g,m,x,b,_){var S=v+(g^(y|~m))+x+_;return(S<<b|S>>>32-b)+y}i.MD5=s._createHelper(u),i.HmacMD5=s._createHmacHelper(u)}(Math),r.MD5})}(sg)),sg.exports}var lg={exports:{}},pP;function x3(){return pP||(pP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=i.Hasher,s=n.algo,c=[],l=s.SHA1=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,d=h[0],p=h[1],v=h[2],y=h[3],g=h[4],m=0;m<80;m++){if(m<16)c[m]=u[f+m]|0;else{var x=c[m-3]^c[m-8]^c[m-14]^c[m-16];c[m]=x<<1|x>>>31}var b=(d<<5|d>>>27)+g+c[m];m<20?b+=(p&v|~p&y)+1518500249:m<40?b+=(p^v^y)+1859775393:m<60?b+=(p&v|p&y|v&y)-1894007588:b+=(p^v^y)-899497514,g=y,y=v,v=p<<30|p>>>2,p=d,d=b}h[0]=h[0]+d|0,h[1]=h[1]+p|0,h[2]=h[2]+v|0,h[3]=h[3]+y|0,h[4]=h[4]+g|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,d=u.sigBytes*8;return f[d>>>5]|=128<<24-d%32,f[(d+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(d+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});n.SHA1=o._createHelper(l),n.HmacSHA1=o._createHmacHelper(l)}(),r.SHA1})}(lg)),lg.exports}var ug={exports:{}},vP;function sE(){return vP||(vP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=[],u=[];(function(){function d(g){for(var m=n.sqrt(g),x=2;x<=m;x++)if(!(g%x))return!1;return!0}function p(g){return(g-(g|0))*4294967296|0}for(var v=2,y=0;y<64;)d(v)&&(y<8&&(l[y]=p(n.pow(v,1/2))),u[y]=p(n.pow(v,1/3)),y++),v++})();var f=[],h=c.SHA256=s.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(d,p){for(var v=this._hash.words,y=v[0],g=v[1],m=v[2],x=v[3],b=v[4],_=v[5],S=v[6],E=v[7],w=0;w<64;w++){if(w<16)f[w]=d[p+w]|0;else{var C=f[w-15],A=(C<<25|C>>>7)^(C<<14|C>>>18)^C>>>3,P=f[w-2],T=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;f[w]=A+f[w-7]+T+f[w-16]}var O=b&_^~b&S,R=y&g^y&m^g&m,F=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),D=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),V=E+D+O+u[w]+f[w],Y=F+R;E=S,S=_,_=b,b=x+V|0,x=m,m=g,g=y,y=V+Y|0}v[0]=v[0]+y|0,v[1]=v[1]+g|0,v[2]=v[2]+m|0,v[3]=v[3]+x|0,v[4]=v[4]+b|0,v[5]=v[5]+_|0,v[6]=v[6]+S|0,v[7]=v[7]+E|0},_doFinalize:function(){var d=this._data,p=d.words,v=this._nDataBytes*8,y=d.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=n.floor(v/4294967296),p[(y+64>>>9<<4)+15]=v,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});i.SHA256=s._createHelper(h),i.HmacSHA256=s._createHmacHelper(h)}(Math),r.SHA256})}(ug)),ug.exports}var cg={exports:{}},mP;function foe(){return mP||(mP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),sE())})(je,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=n.algo,s=o.SHA256,c=o.SHA224=s.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=s._doFinalize.call(this);return l.sigBytes-=4,l}});n.SHA224=s._createHelper(c),n.HmacSHA224=s._createHmacHelper(c)}(),r.SHA224})}(cg)),cg.exports}var fg={exports:{}},gP;function _3(){return gP||(gP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),J0())})(je,function(r){return function(){var n=r,i=n.lib,a=i.Hasher,o=n.x64,s=o.Word,c=o.WordArray,l=n.algo;function u(){return s.create.apply(s,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var p=0;p<80;p++)h[p]=u()})();var d=l.SHA512=a.extend({_doReset:function(){this._hash=new c.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,v){for(var y=this._hash.words,g=y[0],m=y[1],x=y[2],b=y[3],_=y[4],S=y[5],E=y[6],w=y[7],C=g.high,A=g.low,P=m.high,T=m.low,O=x.high,R=x.low,F=b.high,D=b.low,V=_.high,Y=_.low,W=S.high,$=S.low,I=E.high,B=E.low,L=w.high,M=w.low,X=C,K=A,ne=P,te=T,ce=O,de=R,se=F,fe=D,oe=V,he=Y,Pe=W,Ie=$,Ee=I,Be=B,qe=L,rt=M,Xe=0;Xe<80;Xe++){var Ge,Qe,bt=h[Xe];if(Xe<16)Qe=bt.high=p[v+Xe*2]|0,Ge=bt.low=p[v+Xe*2+1]|0;else{var er=h[Xe-15],Ct=er.high,It=er.low,ht=(Ct>>>1|It<<31)^(Ct>>>8|It<<24)^Ct>>>7,Yt=(It>>>1|Ct<<31)^(It>>>8|Ct<<24)^(It>>>7|Ct<<25),ae=h[Xe-2],ue=ae.high,me=ae.low,Fe=(ue>>>19|me<<13)^(ue<<3|me>>>29)^ue>>>6,Te=(me>>>19|ue<<13)^(me<<3|ue>>>29)^(me>>>6|ue<<26),Ne=h[Xe-7],Tt=Ne.high,sr=Ne.low,nn=h[Xe-16],an=nn.high,$t=nn.low;Ge=Yt+sr,Qe=ht+Tt+(Ge>>>0<Yt>>>0?1:0),Ge=Ge+Te,Qe=Qe+Fe+(Ge>>>0<Te>>>0?1:0),Ge=Ge+$t,Qe=Qe+an+(Ge>>>0<$t>>>0?1:0),bt.high=Qe,bt.low=Ge}var Ui=oe&Pe^~oe&Ee,$n=he&Ie^~he&Be,Kr=X&ne^X&ce^ne&ce,mi=K&te^K&de^te&de,$i=(X>>>28|K<<4)^(X<<30|K>>>2)^(X<<25|K>>>7),$a=(K>>>28|X<<4)^(K<<30|X>>>2)^(K<<25|X>>>7),ti=(oe>>>14|he<<18)^(oe>>>18|he<<14)^(oe<<23|he>>>9),$s=(he>>>14|oe<<18)^(he>>>18|oe<<14)^(he<<23|oe>>>9),Vn=f[Xe],xa=Vn.high,ri=Vn.low,xr=rt+$s,Vi=qe+ti+(xr>>>0<rt>>>0?1:0),xr=xr+$n,Vi=Vi+Ui+(xr>>>0<$n>>>0?1:0),xr=xr+ri,Vi=Vi+xa+(xr>>>0<ri>>>0?1:0),xr=xr+Ge,Vi=Vi+Qe+(xr>>>0<Ge>>>0?1:0),Ru=$a+mi,Pv=$i+Kr+(Ru>>>0<$a>>>0?1:0);qe=Ee,rt=Be,Ee=Pe,Be=Ie,Pe=oe,Ie=he,he=fe+xr|0,oe=se+Vi+(he>>>0<fe>>>0?1:0)|0,se=ce,fe=de,ce=ne,de=te,ne=X,te=K,K=xr+Ru|0,X=Vi+Pv+(K>>>0<xr>>>0?1:0)|0}A=g.low=A+K,g.high=C+X+(A>>>0<K>>>0?1:0),T=m.low=T+te,m.high=P+ne+(T>>>0<te>>>0?1:0),R=x.low=R+de,x.high=O+ce+(R>>>0<de>>>0?1:0),D=b.low=D+fe,b.high=F+se+(D>>>0<fe>>>0?1:0),Y=_.low=Y+he,_.high=V+oe+(Y>>>0<he>>>0?1:0),$=S.low=$+Ie,S.high=W+Pe+($>>>0<Ie>>>0?1:0),B=E.low=B+Be,E.high=I+Ee+(B>>>0<Be>>>0?1:0),M=w.low=M+rt,w.high=L+qe+(M>>>0<rt>>>0?1:0)},_doFinalize:function(){var p=this._data,v=p.words,y=this._nDataBytes*8,g=p.sigBytes*8;v[g>>>5]|=128<<24-g%32,v[(g+128>>>10<<5)+30]=Math.floor(y/4294967296),v[(g+128>>>10<<5)+31]=y,p.sigBytes=v.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});n.SHA512=a._createHelper(d),n.HmacSHA512=a._createHmacHelper(d)}(),r.SHA512})}(fg)),fg.exports}var hg={exports:{}},yP;function hoe(){return yP||(yP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),J0(),_3())})(je,function(r){return function(){var n=r,i=n.x64,a=i.Word,o=i.WordArray,s=n.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});n.SHA384=c._createHelper(l),n.HmacSHA384=c._createHmacHelper(l)}(),r.SHA384})}(hg)),hg.exports}var dg={exports:{}},xP;function doe(){return xP||(xP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),J0())})(je,function(r){return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.x64,l=c.Word,u=i.algo,f=[],h=[],d=[];(function(){for(var y=1,g=0,m=0;m<24;m++){f[y+5*g]=(m+1)*(m+2)/2%64;var x=g%5,b=(2*y+3*g)%5;y=x,g=b}for(var y=0;y<5;y++)for(var g=0;g<5;g++)h[y+5*g]=g+(2*y+3*g)%5*5;for(var _=1,S=0;S<24;S++){for(var E=0,w=0,C=0;C<7;C++){if(_&1){var A=(1<<C)-1;A<32?w^=1<<A:E^=1<<A-32}_&128?_=_<<1^113:_<<=1}d[S]=l.create(E,w)}})();var p=[];(function(){for(var y=0;y<25;y++)p[y]=l.create()})();var v=u.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],g=0;g<25;g++)y[g]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,g){for(var m=this._state,x=this.blockSize/2,b=0;b<x;b++){var _=y[g+2*b],S=y[g+2*b+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var E=m[b];E.high^=S,E.low^=_}for(var w=0;w<24;w++){for(var C=0;C<5;C++){for(var A=0,P=0,T=0;T<5;T++){var E=m[C+5*T];A^=E.high,P^=E.low}var O=p[C];O.high=A,O.low=P}for(var C=0;C<5;C++)for(var R=p[(C+4)%5],F=p[(C+1)%5],D=F.high,V=F.low,A=R.high^(D<<1|V>>>31),P=R.low^(V<<1|D>>>31),T=0;T<5;T++){var E=m[C+5*T];E.high^=A,E.low^=P}for(var Y=1;Y<25;Y++){var A,P,E=m[Y],W=E.high,$=E.low,I=f[Y];I<32?(A=W<<I|$>>>32-I,P=$<<I|W>>>32-I):(A=$<<I-32|W>>>64-I,P=W<<I-32|$>>>64-I);var B=p[h[Y]];B.high=A,B.low=P}var L=p[0],M=m[0];L.high=M.high,L.low=M.low;for(var C=0;C<5;C++)for(var T=0;T<5;T++){var Y=C+5*T,E=m[Y],X=p[Y],K=p[(C+1)%5+5*T],ne=p[(C+2)%5+5*T];E.high=X.high^~K.high&ne.high,E.low=X.low^~K.low&ne.low}var E=m[0],te=d[w];E.high^=te.high,E.low^=te.low}},_doFinalize:function(){var y=this._data,g=y.words;this._nDataBytes*8;var m=y.sigBytes*8,x=this.blockSize*32;g[m>>>5]|=1<<24-m%32,g[(n.ceil((m+1)/x)*x>>>5)-1]|=128,y.sigBytes=g.length*4,this._process();for(var b=this._state,_=this.cfg.outputLength/8,S=_/8,E=[],w=0;w<S;w++){var C=b[w],A=C.high,P=C.low;A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,E.push(P),E.push(A)}return new o.init(E,_)},clone:function(){for(var y=s.clone.call(this),g=y._state=this._state.slice(0),m=0;m<25;m++)g[m]=g[m].clone();return y}});i.SHA3=s._createHelper(v),i.HmacSHA3=s._createHmacHelper(v)}(Math),r.SHA3})}(dg)),dg.exports}var pg={exports:{}},_P;function poe(){return _P||(_P=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,a=i.lib,o=a.WordArray,s=a.Hasher,c=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),v=c.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,E){for(var w=0;w<16;w++){var C=E+w,A=S[C];S[C]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var P=this._hash.words,T=d.words,O=p.words,R=l.words,F=u.words,D=f.words,V=h.words,Y,W,$,I,B,L,M,X,K,ne;L=Y=P[0],M=W=P[1],X=$=P[2],K=I=P[3],ne=B=P[4];for(var te,w=0;w<80;w+=1)te=Y+S[E+R[w]]|0,w<16?te+=y(W,$,I)+T[0]:w<32?te+=g(W,$,I)+T[1]:w<48?te+=m(W,$,I)+T[2]:w<64?te+=x(W,$,I)+T[3]:te+=b(W,$,I)+T[4],te=te|0,te=_(te,D[w]),te=te+B|0,Y=B,B=I,I=_($,10),$=W,W=te,te=L+S[E+F[w]]|0,w<16?te+=b(M,X,K)+O[0]:w<32?te+=x(M,X,K)+O[1]:w<48?te+=m(M,X,K)+O[2]:w<64?te+=g(M,X,K)+O[3]:te+=y(M,X,K)+O[4],te=te|0,te=_(te,V[w]),te=te+ne|0,L=ne,ne=K,K=_(X,10),X=M,M=te;te=P[1]+$+K|0,P[1]=P[2]+I+ne|0,P[2]=P[3]+B+L|0,P[3]=P[4]+Y+M|0,P[4]=P[0]+W+X|0,P[0]=te},_doFinalize:function(){var S=this._data,E=S.words,w=this._nDataBytes*8,C=S.sigBytes*8;E[C>>>5]|=128<<24-C%32,E[(C+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,S.sigBytes=(E.length+1)*4,this._process();for(var A=this._hash,P=A.words,T=0;T<5;T++){var O=P[T];P[T]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return A},clone:function(){var S=s.clone.call(this);return S._hash=this._hash.clone(),S}});function y(S,E,w){return S^E^w}function g(S,E,w){return S&E|~S&w}function m(S,E,w){return(S|~E)^w}function x(S,E,w){return S&w|E&~w}function b(S,E,w){return S^(E|~w)}function _(S,E){return S<<E|S>>>32-E}i.RIPEMD160=s._createHelper(v),i.HmacRIPEMD160=s._createHmacHelper(v)}(),r.RIPEMD160})}(pg)),pg.exports}var vg={exports:{}},bP;function lE(){return bP||(bP=1,function(t,e){(function(r,n){t.exports=n(ft())})(je,function(r){(function(){var n=r,i=n.lib,a=i.Base,o=n.enc,s=o.Utf8,c=n.algo;c.HMAC=a.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=s.parse(u));var f=l.blockSize,h=f*4;u.sigBytes>h&&(u=l.finalize(u)),u.clamp();for(var d=this._oKey=u.clone(),p=this._iKey=u.clone(),v=d.words,y=p.words,g=0;g<f;g++)v[g]^=1549556828,y[g]^=909522486;d.sigBytes=p.sigBytes=h,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,f=u.finalize(l);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(vg)),vg.exports}var mg={exports:{}},SP;function voe(){return SP||(SP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),sE(),lE())})(je,function(r){return function(){var n=r,i=n.lib,a=i.Base,o=i.WordArray,s=n.algo,c=s.SHA256,l=s.HMAC,u=s.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var d=this.cfg,p=l.create(d.hasher,f),v=o.create(),y=o.create([1]),g=v.words,m=y.words,x=d.keySize,b=d.iterations;g.length<x;){var _=p.update(h).finalize(y);p.reset();for(var S=_.words,E=S.length,w=_,C=1;C<b;C++){w=p.finalize(w),p.reset();for(var A=w.words,P=0;P<E;P++)S[P]^=A[P]}v.concat(_),m[0]++}return v.sigBytes=x*4,v}});n.PBKDF2=function(f,h,d){return u.create(d).compute(f,h)}}(),r.PBKDF2})}(mg)),mg.exports}var gg={exports:{}},EP;function Bo(){return EP||(EP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),x3(),lE())})(je,function(r){return function(){var n=r,i=n.lib,a=i.Base,o=i.WordArray,s=n.algo,c=s.MD5,l=s.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,d=this.cfg,p=d.hasher.create(),v=o.create(),y=v.words,g=d.keySize,m=d.iterations;y.length<g;){h&&p.update(h),h=p.update(u).finalize(f),p.reset();for(var x=1;x<m;x++)h=p.finalize(h),p.reset();v.concat(h)}return v.sigBytes=g*4,v}});n.EvpKDF=function(u,f,h){return l.create(h).compute(u,f)}}(),r.EvpKDF})}(gg)),gg.exports}var yg={exports:{}},wP;function qr(){return wP||(wP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Bo())})(je,function(r){r.lib.Cipher||function(n){var i=r,a=i.lib,o=a.Base,s=a.WordArray,c=a.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,f=i.algo,h=f.EvpKDF,d=a.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(A,P){return this.create(this._ENC_XFORM_MODE,A,P)},createDecryptor:function(A,P){return this.create(this._DEC_XFORM_MODE,A,P)},init:function(A,P,T){this.cfg=this.cfg.extend(T),this._xformMode=A,this._key=P,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){A&&this._append(A);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function A(P){return typeof P=="string"?C:S}return function(P){return{encrypt:function(T,O,R){return A(O).encrypt(P,T,O,R)},decrypt:function(T,O,R){return A(O).decrypt(P,T,O,R)}}}}()});a.StreamCipher=d.extend({_doFinalize:function(){var A=this._process(!0);return A},blockSize:1});var p=i.mode={},v=a.BlockCipherMode=o.extend({createEncryptor:function(A,P){return this.Encryptor.create(A,P)},createDecryptor:function(A,P){return this.Decryptor.create(A,P)},init:function(A,P){this._cipher=A,this._iv=P}}),y=p.CBC=function(){var A=v.extend();A.Encryptor=A.extend({processBlock:function(T,O){var R=this._cipher,F=R.blockSize;P.call(this,T,O,F),R.encryptBlock(T,O),this._prevBlock=T.slice(O,O+F)}}),A.Decryptor=A.extend({processBlock:function(T,O){var R=this._cipher,F=R.blockSize,D=T.slice(O,O+F);R.decryptBlock(T,O),P.call(this,T,O,F),this._prevBlock=D}});function P(T,O,R){var F,D=this._iv;D?(F=D,this._iv=n):F=this._prevBlock;for(var V=0;V<R;V++)T[O+V]^=F[V]}return A}(),g=i.pad={},m=g.Pkcs7={pad:function(A,P){for(var T=P*4,O=T-A.sigBytes%T,R=O<<24|O<<16|O<<8|O,F=[],D=0;D<O;D+=4)F.push(R);var V=s.create(F,O);A.concat(V)},unpad:function(A){var P=A.words[A.sigBytes-1>>>2]&255;A.sigBytes-=P}};a.BlockCipher=d.extend({cfg:d.cfg.extend({mode:y,padding:m}),reset:function(){var A;d.reset.call(this);var P=this.cfg,T=P.iv,O=P.mode;this._xformMode==this._ENC_XFORM_MODE?A=O.createEncryptor:(A=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==A?this._mode.init(this,T&&T.words):(this._mode=A.call(O,this,T&&T.words),this._mode.__creator=A)},_doProcessBlock:function(A,P){this._mode.processBlock(A,P)},_doFinalize:function(){var A,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),A=this._process(!0)):(A=this._process(!0),P.unpad(A)),A},blockSize:128/32});var x=a.CipherParams=o.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),b=i.format={},_=b.OpenSSL={stringify:function(A){var P,T=A.ciphertext,O=A.salt;return O?P=s.create([1398893684,1701076831]).concat(O).concat(T):P=T,P.toString(u)},parse:function(A){var P,T=u.parse(A),O=T.words;return O[0]==1398893684&&O[1]==1701076831&&(P=s.create(O.slice(2,4)),O.splice(0,4),T.sigBytes-=16),x.create({ciphertext:T,salt:P})}},S=a.SerializableCipher=o.extend({cfg:o.extend({format:_}),encrypt:function(A,P,T,O){O=this.cfg.extend(O);var R=A.createEncryptor(T,O),F=R.finalize(P),D=R.cfg;return x.create({ciphertext:F,key:T,iv:D.iv,algorithm:A,mode:D.mode,padding:D.padding,blockSize:A.blockSize,formatter:O.format})},decrypt:function(A,P,T,O){O=this.cfg.extend(O),P=this._parse(P,O.format);var R=A.createDecryptor(T,O).finalize(P.ciphertext);return R},_parse:function(A,P){return typeof A=="string"?P.parse(A,this):A}}),E=i.kdf={},w=E.OpenSSL={execute:function(A,P,T,O,R){if(O||(O=s.random(64/8)),R)var F=h.create({keySize:P+T,hasher:R}).compute(A,O);else var F=h.create({keySize:P+T}).compute(A,O);var D=s.create(F.words.slice(P),T*4);return F.sigBytes=P*4,x.create({key:F,iv:D,salt:O})}},C=a.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:w}),encrypt:function(A,P,T,O){O=this.cfg.extend(O);var R=O.kdf.execute(T,A.keySize,A.ivSize,O.salt,O.hasher);O.iv=R.iv;var F=S.encrypt.call(this,A,P,R.key,O);return F.mixIn(R),F},decrypt:function(A,P,T,O){O=this.cfg.extend(O),P=this._parse(P,O.format);var R=O.kdf.execute(T,A.keySize,A.ivSize,P.salt,O.hasher);O.iv=R.iv;var F=S.decrypt.call(this,A,P,R.key,O);return F}})}()})}(yg)),yg.exports}var xg={exports:{}},AP;function moe(){return AP||(AP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize;i.call(this,a,o,c,s),this._prevBlock=a.slice(o,o+c)}}),n.Decryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=a.slice(o,o+c);i.call(this,a,o,c,s),this._prevBlock=l}});function i(a,o,s,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var f=0;f<s;f++)a[o+f]^=l[f]}return n}(),r.mode.CFB})}(xg)),xg.exports}var _g={exports:{}},CP;function goe(){return CP||(CP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var f=u.slice(0);s.encryptBlock(f,0),u[c-1]=u[c-1]+1|0;for(var h=0;h<c;h++)a[o+h]^=f[h]}});return n.Decryptor=i,n}(),r.mode.CTR})}(_g)),_g.exports}var bg={exports:{}},TP;function yoe(){return TP||(TP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(s){if((s>>24&255)===255){var c=s>>16&255,l=s>>8&255,u=s&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,s=0,s+=c<<16,s+=l<<8,s+=u}else s+=1<<24;return s}function a(s){return(s[0]=i(s[0]))===0&&(s[1]=i(s[1])),s}var o=n.Encryptor=n.extend({processBlock:function(s,c){var l=this._cipher,u=l.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),a(h);var d=h.slice(0);l.encryptBlock(d,0);for(var p=0;p<u;p++)s[c+p]^=d[p]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(bg)),bg.exports}var Sg={exports:{}},PP;function xoe(){return PP||(PP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(a,o){var s=this._cipher,c=s.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),s.encryptBlock(u,0);for(var f=0;f<c;f++)a[o+f]^=u[f]}});return n.Decryptor=i,n}(),r.mode.OFB})}(Sg)),Sg.exports}var Eg={exports:{}},OP;function _oe(){return OP||(OP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,a){this._cipher.encryptBlock(i,a)}}),n.Decryptor=n.extend({processBlock:function(i,a){this._cipher.decryptBlock(i,a)}}),n}(),r.mode.ECB})}(Eg)),Eg.exports}var wg={exports:{}},RP;function boe(){return RP||(RP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.pad.AnsiX923={pad:function(n,i){var a=n.sigBytes,o=i*4,s=o-a%o,c=a+s-1;n.clamp(),n.words[c>>>2]|=s<<24-c%4*8,n.sigBytes+=s},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(wg)),wg.exports}var Ag={exports:{}},IP;function Soe(){return IP||(IP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.pad.Iso10126={pad:function(n,i){var a=i*4,o=a-n.sigBytes%a;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(Ag)),Ag.exports}var Cg={exports:{}},FP;function Eoe(){return FP||(FP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Cg)),Cg.exports}var Tg={exports:{}},kP;function woe(){return kP||(kP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.pad.ZeroPadding={pad:function(n,i){var a=i*4;n.clamp(),n.sigBytes+=a-(n.sigBytes%a||a)},unpad:function(n){for(var i=n.words,a=n.sigBytes-1,a=n.sigBytes-1;a>=0;a--)if(i[a>>>2]>>>24-a%4*8&255){n.sigBytes=a+1;break}}},r.pad.ZeroPadding})}(Tg)),Tg.exports}var Pg={exports:{}},DP;function Aoe(){return DP||(DP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Pg)),Pg.exports}var Og={exports:{}},MP;function Coe(){return MP||(MP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),qr())})(je,function(r){return function(n){var i=r,a=i.lib,o=a.CipherParams,s=i.enc,c=s.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var f=c.parse(u);return o.create({ciphertext:f})}}}(),r.format.Hex})}(Og)),Og.exports}var Rg={exports:{}},LP;function Toe(){return LP||(LP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Ls(),Bs(),Bo(),qr())})(je,function(r){return function(){var n=r,i=n.lib,a=i.BlockCipher,o=n.algo,s=[],c=[],l=[],u=[],f=[],h=[],d=[],p=[],v=[],y=[];(function(){for(var x=[],b=0;b<256;b++)b<128?x[b]=b<<1:x[b]=b<<1^283;for(var _=0,S=0,b=0;b<256;b++){var E=S^S<<1^S<<2^S<<3^S<<4;E=E>>>8^E&255^99,s[_]=E,c[E]=_;var w=x[_],C=x[w],A=x[C],P=x[E]*257^E*16843008;l[_]=P<<24|P>>>8,u[_]=P<<16|P>>>16,f[_]=P<<8|P>>>24,h[_]=P;var P=A*16843009^C*65537^w*257^_*16843008;d[E]=P<<24|P>>>8,p[E]=P<<16|P>>>16,v[E]=P<<8|P>>>24,y[E]=P,_?(_=w^x[x[x[A^w]]],S^=x[x[S]]):_=S=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],m=o.AES=a.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,_=b.words,S=b.sigBytes/4,E=this._nRounds=S+6,w=(E+1)*4,C=this._keySchedule=[],A=0;A<w;A++)A<S?C[A]=_[A]:(x=C[A-1],A%S?S>6&&A%S==4&&(x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255]):(x=x<<8|x>>>24,x=s[x>>>24]<<24|s[x>>>16&255]<<16|s[x>>>8&255]<<8|s[x&255],x^=g[A/S|0]<<24),C[A]=C[A-S]^x);for(var P=this._invKeySchedule=[],T=0;T<w;T++){var A=w-T;if(T%4)var x=C[A];else var x=C[A-4];T<4||A<=4?P[T]=x:P[T]=d[s[x>>>24]]^p[s[x>>>16&255]]^v[s[x>>>8&255]]^y[s[x&255]]}}},encryptBlock:function(x,b){this._doCryptBlock(x,b,this._keySchedule,l,u,f,h,s)},decryptBlock:function(x,b){var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_,this._doCryptBlock(x,b,this._invKeySchedule,d,p,v,y,c);var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_},_doCryptBlock:function(x,b,_,S,E,w,C,A){for(var P=this._nRounds,T=x[b]^_[0],O=x[b+1]^_[1],R=x[b+2]^_[2],F=x[b+3]^_[3],D=4,V=1;V<P;V++){var Y=S[T>>>24]^E[O>>>16&255]^w[R>>>8&255]^C[F&255]^_[D++],W=S[O>>>24]^E[R>>>16&255]^w[F>>>8&255]^C[T&255]^_[D++],$=S[R>>>24]^E[F>>>16&255]^w[T>>>8&255]^C[O&255]^_[D++],I=S[F>>>24]^E[T>>>16&255]^w[O>>>8&255]^C[R&255]^_[D++];T=Y,O=W,R=$,F=I}var Y=(A[T>>>24]<<24|A[O>>>16&255]<<16|A[R>>>8&255]<<8|A[F&255])^_[D++],W=(A[O>>>24]<<24|A[R>>>16&255]<<16|A[F>>>8&255]<<8|A[T&255])^_[D++],$=(A[R>>>24]<<24|A[F>>>16&255]<<16|A[T>>>8&255]<<8|A[O&255])^_[D++],I=(A[F>>>24]<<24|A[T>>>16&255]<<16|A[O>>>8&255]<<8|A[R&255])^_[D++];x[b]=Y,x[b+1]=W,x[b+2]=$,x[b+3]=I},keySize:256/32});n.AES=a._createHelper(m)}(),r.AES})}(Rg)),Rg.exports}var Ig={exports:{}},BP;function Poe(){return BP||(BP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Ls(),Bs(),Bo(),qr())})(je,function(r){return function(){var n=r,i=n.lib,a=i.WordArray,o=i.BlockCipher,s=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=o.extend({_doReset:function(){for(var g=this._key,m=g.words,x=[],b=0;b<56;b++){var _=c[b]-1;x[b]=m[_>>>5]>>>31-_%32&1}for(var S=this._subKeys=[],E=0;E<16;E++){for(var w=S[E]=[],C=u[E],b=0;b<24;b++)w[b/6|0]|=x[(l[b]-1+C)%28]<<31-b%6,w[4+(b/6|0)]|=x[28+(l[b+24]-1+C)%28]<<31-b%6;w[0]=w[0]<<1|w[0]>>>31;for(var b=1;b<7;b++)w[b]=w[b]>>>(b-1)*4+3;w[7]=w[7]<<5|w[7]>>>27}for(var A=this._invSubKeys=[],b=0;b<16;b++)A[b]=S[15-b]},encryptBlock:function(g,m){this._doCryptBlock(g,m,this._subKeys)},decryptBlock:function(g,m){this._doCryptBlock(g,m,this._invSubKeys)},_doCryptBlock:function(g,m,x){this._lBlock=g[m],this._rBlock=g[m+1],p.call(this,4,252645135),p.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),p.call(this,1,1431655765);for(var b=0;b<16;b++){for(var _=x[b],S=this._lBlock,E=this._rBlock,w=0,C=0;C<8;C++)w|=f[C][((E^_[C])&h[C])>>>0];this._lBlock=E,this._rBlock=S^w}var A=this._lBlock;this._lBlock=this._rBlock,this._rBlock=A,p.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),g[m]=this._lBlock,g[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(g,m){var x=(this._lBlock>>>g^this._rBlock)&m;this._rBlock^=x,this._lBlock^=x<<g}function v(g,m){var x=(this._rBlock>>>g^this._lBlock)&m;this._lBlock^=x,this._rBlock^=x<<g}n.DES=o._createHelper(d);var y=s.TripleDES=o.extend({_doReset:function(){var g=this._key,m=g.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=m.slice(0,2),b=m.length<4?m.slice(0,2):m.slice(2,4),_=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=d.createEncryptor(a.create(x)),this._des2=d.createEncryptor(a.create(b)),this._des3=d.createEncryptor(a.create(_))},encryptBlock:function(g,m){this._des1.encryptBlock(g,m),this._des2.decryptBlock(g,m),this._des3.encryptBlock(g,m)},decryptBlock:function(g,m){this._des3.decryptBlock(g,m),this._des2.encryptBlock(g,m),this._des1.decryptBlock(g,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(y)}(),r.TripleDES})}(Ig)),Ig.exports}var Fg={exports:{}},NP;function Ooe(){return NP||(NP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Ls(),Bs(),Bo(),qr())})(je,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=o.RC4=a.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,d=this._S=[],p=0;p<256;p++)d[p]=p;for(var p=0,v=0;p<256;p++){var y=p%h,g=f[y>>>2]>>>24-y%4*8&255;v=(v+d[p]+g)%256;var m=d[p];d[p]=d[v],d[v]=m}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,f=this._i,h=this._j,d=0,p=0;p<4;p++){f=(f+1)%256,h=(h+u[f])%256;var v=u[f];u[f]=u[h],u[h]=v,d|=u[(u[f]+u[h])%256]<<24-p*8}return this._i=f,this._j=h,d}n.RC4=a._createHelper(s);var l=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});n.RC4Drop=a._createHelper(l)}(),r.RC4})}(Fg)),Fg.exports}var kg={exports:{}},jP;function Roe(){return jP||(jP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Ls(),Bs(),Bo(),qr())})(je,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=[],c=[],l=[],u=o.Rabbit=a.extend({_doReset:function(){for(var h=this._key.words,d=this.cfg.iv,p=0;p<4;p++)h[p]=(h[p]<<8|h[p]>>>24)&16711935|(h[p]<<24|h[p]>>>8)&4278255360;var v=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],y=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)y[p]^=v[p+4&7];if(d){var g=d.words,m=g[0],x=g[1],b=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,S=b>>>16|_&4294901760,E=_<<16|b&65535;y[0]^=b,y[1]^=S,y[2]^=_,y[3]^=E,y[4]^=b,y[5]^=S,y[6]^=_,y[7]^=E;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(h,d){var p=this._X;f.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,h[d+v]^=s[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,d=this._C,p=0;p<8;p++)c[p]=d[p];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<c[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<c[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<c[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<c[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<c[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<c[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<c[6]>>>0?1:0)|0,this._b=d[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var v=h[p]+d[p],y=v&65535,g=v>>>16,m=((y*y>>>17)+y*g>>>15)+g*g,x=((v&4294901760)*v|0)+((v&65535)*v|0);l[p]=m^x}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.Rabbit=a._createHelper(u)}(),r.Rabbit})}(kg)),kg.exports}var Dg={exports:{}},UP;function Ioe(){return UP||(UP=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Ls(),Bs(),Bo(),qr())})(je,function(r){return function(){var n=r,i=n.lib,a=i.StreamCipher,o=n.algo,s=[],c=[],l=[],u=o.RabbitLegacy=a.extend({_doReset:function(){var h=this._key.words,d=this.cfg.iv,p=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],v=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)v[y]^=p[y+4&7];if(d){var g=d.words,m=g[0],x=g[1],b=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,S=b>>>16|_&4294901760,E=_<<16|b&65535;v[0]^=b,v[1]^=S,v[2]^=_,v[3]^=E,v[4]^=b,v[5]^=S,v[6]^=_,v[7]^=E;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(h,d){var p=this._X;f.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,h[d+v]^=s[v]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,d=this._C,p=0;p<8;p++)c[p]=d[p];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<c[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<c[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<c[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<c[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<c[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<c[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<c[6]>>>0?1:0)|0,this._b=d[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var v=h[p]+d[p],y=v&65535,g=v>>>16,m=((y*y>>>17)+y*g>>>15)+g*g,x=((v&4294901760)*v|0)+((v&65535)*v|0);l[p]=m^x}h[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,h[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,h[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,h[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,h[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,h[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,h[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,h[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}n.RabbitLegacy=a._createHelper(u)}(),r.RabbitLegacy})}(Dg)),Dg.exports}var Mg={exports:{}},$P;function Foe(){return $P||($P=1,function(t,e){(function(r,n,i){t.exports=n(ft(),Ls(),Bs(),Bo(),qr())})(je,function(r){return function(){var n=r,i=n.lib,a=i.BlockCipher,o=n.algo;const s=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function f(y,g){let m=g>>24&255,x=g>>16&255,b=g>>8&255,_=g&255,S=y.sbox[0][m]+y.sbox[1][x];return S=S^y.sbox[2][b],S=S+y.sbox[3][_],S}function h(y,g,m){let x=g,b=m,_;for(let S=0;S<s;++S)x=x^y.pbox[S],b=f(y,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^y.pbox[s],x=x^y.pbox[s+1],{left:x,right:b}}function d(y,g,m){let x=g,b=m,_;for(let S=s+1;S>1;--S)x=x^y.pbox[S],b=f(y,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^y.pbox[1],x=x^y.pbox[0],{left:x,right:b}}function p(y,g,m){for(let E=0;E<4;E++){y.sbox[E]=[];for(let w=0;w<256;w++)y.sbox[E][w]=l[E][w]}let x=0;for(let E=0;E<s+2;E++)y.pbox[E]=c[E]^g[x],x++,x>=m&&(x=0);let b=0,_=0,S=0;for(let E=0;E<s+2;E+=2)S=h(y,b,_),b=S.left,_=S.right,y.pbox[E]=b,y.pbox[E+1]=_;for(let E=0;E<4;E++)for(let w=0;w<256;w+=2)S=h(y,b,_),b=S.left,_=S.right,y.sbox[E][w]=b,y.sbox[E][w+1]=_;return!0}var v=o.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,g=y.words,m=y.sigBytes/4;p(u,g,m)}},encryptBlock:function(y,g){var m=h(u,y[g],y[g+1]);y[g]=m.left,y[g+1]=m.right},decryptBlock:function(y,g){var m=d(u,y[g],y[g+1]);y[g]=m.left,y[g+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=a._createHelper(v)}(),r.Blowfish})}(Mg)),Mg.exports}(function(t,e){(function(r,n,i){t.exports=n(ft(),J0(),loe(),uoe(),Ls(),coe(),Bs(),x3(),sE(),foe(),_3(),hoe(),doe(),poe(),lE(),voe(),Bo(),qr(),moe(),goe(),yoe(),xoe(),_oe(),boe(),Soe(),Eoe(),woe(),Aoe(),Coe(),Toe(),Poe(),Ooe(),Roe(),Ioe(),Foe())})(je,function(r){return r})})(g3);var koe=g3.exports;const xd=vn(koe);function Doe(t){const e=new Uint8Array(t),r=[];for(let n=0;n<e.length;n+=4)r.push(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]);return xd.lib.WordArray.create(r,e.length)}async function Moe(t,e,r,n){const i=xd.enc.Hex.parse(e),a=xd.enc.Hex.parse(r),o=Doe(t),s=xd.AES.decrypt({ciphertext:o},i,{iv:a}),c=new Uint8Array(s.sigBytes);for(let l=0;l<s.sigBytes;l++)c[l]=s.words[l>>>2]>>>24-l%4*8&255;return new Blob([c],{type:`video/${n==="mp4"?"mp4":"x-flv"}`})}class Loe{constructor(){Re(this,"videosByKey");Re(this,"currentPlayingVideo","");Re(this,"videoIndex",0);this.videosByKey={},this.currentPlayingVideo=""}preloadVideo(e,r=!1){var c;if(this.videosByKey[e])return;console.info("开始预加载视频",e);const n="video-"+this.videoIndex++,i=document.createElement("div"),a=document.createElement("video"),o=e.endsWith(".flv")?"flv":"mp4";i.setAttribute("id",n),i.style.width="100%",i.style.height="100%",i.style.zIndex="-99",i.style.display="block",i.style.opacity="0",i.style.background="#000",i.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.zIndex="11",a.style.position="absolute",a.style.display="block",a.playsInline=!0,a.controls=!1,a.addEventListener("play",function(){a.controls=!1}),a.addEventListener("pause",function(){a.controls=!1}),a.volume=0;const s=()=>{this.videosByKey[e].events.ended.callbacks.forEach(u=>u())};i.appendChild(a),(c=document.getElementById("videoContainer"))==null||c.appendChild(i),this.videosByKey[e]={player:null,id:n,progressTimer:null,waitCommands:{},events:{ended:{callbacks:[],handler:s}}},r&&(this.videosByKey[e].waitCommands={playVideo:!0,showVideo:!0}),fetch(e).then(l=>l.status>200?null:l.arrayBuffer()).then(async l=>{if(!l)return;const u="ENCRYPTED",f=u.length,h=new Uint8Array(l.slice(0,f));let d=!1;for(let g=0;g<f;g++){if(String.fromCharCode(h[g])!==u[g]){d=!1;break}d=!0}let p;if(d){const g=l.slice(f);p=await Moe(g,"40e6ad429a13020a07be290c5ef1d7dc7e45e5c4bf34d54a5664282627946e4d","9d6bac74c64ee8714e7959cef75271d0",o)}else p=new Blob([new Uint8Array(l)],{type:`video/${o==="mp4"?"mp4":"x-flv"}`});const v=aoe.createPlayer({type:e.endsWith(".mp4")?"mp4":"flv",url:URL.createObjectURL(p)});v.attachMediaElement(a),v.load();const y={...this.videosByKey[e],player:v};this.videosByKey[e]=y,a.onloadeddata=()=>{const g=Object.keys(y.waitCommands);if(y){const m=document.createElement("canvas"),x=m.getContext("2d");m.width=480,m.height=270,x.drawImage(a,0,0,480,270);const b=m.toDataURL("image/webp",.5);m.remove(),y.poster=b}g.length&&g.forEach(m=>{if(!y){console.log("没有找到视频缓存资源",e);return}this[m](e,y.waitCommands[m])})}})}pauseVideo(e){const r=this.videosByKey[e];r!=null&&r.player&&r.player.pause()}showVideo(e){const r=this.videosByKey[e];if(r!=null&&r.player){const n=document.getElementById(r.id);n&&(n.style.opacity="1",n.style.zIndex="11")}else r?r.waitCommands.showVideo=!0:this.preloadVideo(e,!0)}playVideo(e){const r=this.videosByKey[e];this.currentPlayingVideo=e,r!=null&&r.player?(r.player.play(),this.checkProgress(e)):r?r.waitCommands.playVideo=!0:this.preloadVideo(e,!0)}setLoop(e,r){const n=this.videosByKey[e];if(n!=null&&n.player){const i=document.getElementById(n.id);i&&(i.loop=r)}else n.waitCommands.setLoop=r}seek(e,r){const n=this.videosByKey[e];n!=null&&n.player?n.player.currentTime=r:n.waitCommands.seek=r}backward(e){const r=this.videosByKey[e];r!=null&&r.player&&r.player.currentTime>0&&(r.player.currentTime-=1)}forward(e){const r=this.videosByKey[e];r!=null&&r.player&&(r.player.currentTime+=1)}setVolume(e,r){const n=this.videosByKey[e];n!=null&&n.player?n.player.volume=r:n.waitCommands.setVolume=r}destroy(e,r=!1,n=!1){const i=this.videosByKey[e];if(i!=null&&i.player){i.player.pause(),i.player.volume=0;const a=document.getElementById(i.id);a&&(a.style.opacity="0",a.style.zIndex="-99"),i.progressTimer&&clearTimeout(i.progressTimer),setTimeout(()=>{try{const o=a==null?void 0:a.getElementsByTagName("video");o!=null&&o.length&&i.player.destroy()}catch(o){console.warn(o)}setTimeout(()=>{a==null||a.remove()},r?0:500),delete this.videosByKey[e]},r?0:2e3)}}destroyAll(e=!1){Object.keys(this.videosByKey).forEach(r=>{this.destroy(r,e)})}onEnded(e,r){this.videosByKey[e].events.ended.callbacks.push(r)}getDuration(e){const r=this.videosByKey[e];if(r!=null&&r.player)return r.player.duration}destroyExcept(e){Object.keys(this.videosByKey).forEach(r=>{e.includes(r)||this.destroy(r)})}checkProgress(e){const r=this.videosByKey[e];if(r!=null&&r.player){const n=r.player,i=n.currentTime;if(n.duration-i<=.03){clearTimeout(r.progressTimer),r.progressTimer=null,r.events.ended.handler();return}r.progressTimer=setTimeout(()=>{this.checkProgress(e)},100)}}}class Boe{constructor(){Re(this,"sceneManager",new Jae);Re(this,"backlogManager",new FX(this.sceneManager));Re(this,"animationManager",new eoe);Re(this,"gameplay",new toe);Re(this,"gameName","");Re(this,"gameKey","");Re(this,"events",new noe);Re(this,"videoManager",new Loe)}}const j=new Boe,Sn=b3(()=>{const t=J.getState().userData;bs.setItem(j.gameKey,t).then(()=>{Ae.info("写入本地存储")})},100),dp=b3(()=>{bs.getItem(j.gameKey).then(t=>{if(!t||!E3(t)){Ae.warn("现在重置数据"),Sn();return}J.dispatch(ES(t))})},100);function b3(t,e){let r;function n(...i){clearTimeout(r);let a;return r=setTimeout(()=>{a=t.apply(n,i)},e),a}return n}const S3=()=>{const t=J.getState().userData;bs.setItem(j.gameKey,t).then(()=>{bs.getItem(j.gameKey).then(e=>{if(!e){Sn();return}J.dispatch(ES(e))}),Ae.info("同步本地存储")})};function E3(t){let e=!0;for(const r in Mx)t.hasOwnProperty(r)||(e=!1);return e}async function Noe(){const t=await bs.getItem(j.gameKey);if(!t||!E3(t)){const e=J.getState().userData;return Ae.warn("现在重置数据"),await bs.setItem(j.gameKey,e)}else J.dispatch(ES(t))}var Hn=(t=>(t[t.Save=0]="Save",t[t.Load=1]="Load",t[t.Option=2]="Option",t))(Hn||{}),Rt=(t=>(t.Game_start_button="Game_start_button",t.Game_achievement_button="Game_achievement_button",t.Game_storyline_button="Game_storyline_button",t.Game_extra_button="Game_extra_button",t.Game_collection_button="Game_collection_button",t.Game_option_button="Game_option_button",t.Game_load_button="Game_load_button",t.Game_continue_button="Game_continue_button",t))(Rt||{});const w3={showBacklog:!1,showStarter:!0,showTitle:!0,showMenuPanel:!1,showTextBox:!0,showControls:!0,controlsVisibility:!0,currentMenuTag:Hn.Option,titleBg:"",titleBgm:"",logoImage:[],showExtra:!1,showGlobalDialog:!1,showPanicOverlay:!1,isEnterGame:!1,isShowLogo:!0,showStoryLine:!1,showAchievement:!1,showFavorited:!1,gameMenus:{Game_start_button:{content:"",args:{hide:!0,style:{}}},Game_achievement_button:{content:"",args:{hide:!0,style:{}}},Game_extra_button:{content:"",args:{hide:!0,style:{}}},Game_storyline_button:{content:"",args:{hide:!0,style:{}}},Game_collection_button:{content:"",args:{hide:!0,style:{}}},Game_continue_button:{content:"",args:{hide:!0,style:{}}},Game_load_button:{content:"",args:{hide:!0,style:{}}},Game_option_button:{content:"",args:{hide:!0,style:{}}}},showBeautyGuide:!1,showBeautyGuideDetail:!1,showBeautyGuideImageDialog:!1,isShowR18Modal:!1,openR18Modal:!1},A3=t0({name:"gui",initialState:w3,reducers:{setVisibility:(t,e)=>{dp();const{component:r,visibility:n}=e.payload;t[r]=n},setMenuPanelTag:(t,e)=>{dp(),t.currentMenuTag=e.payload},setGuiAsset:(t,e)=>{const{asset:r,value:n}=e.payload;t[r]=n},setLogoImage:(t,e)=>{t.logoImage=[...e.payload]},setShowStoryLine:(t,e)=>{t.showStoryLine=e.payload},setshowFavorited:(t,e)=>{t.showFavorited=e.payload},setGameMenus:(t,e)=>{t.gameMenus=e.payload},setGameR18:(t,e)=>{t.isShowR18Modal=e.payload}}}),{setVisibility:Ye,setMenuPanelTag:Zx,setGuiAsset:VP,setLogoImage:joe,setShowStoryLine:Qx,setshowFavorited:nf,setGameMenus:Uoe,setGameR18:C3}=A3.actions,$oe=A3.reducer,J=G5({reducer:{stage:EW,GUI:$oe,userData:RX,saveData:mae},middleware:wk({serializableCheck:!1})});let GP;function uE(t,e=0,r=100){if(Ae.info("playing bgm"+t),t===""){GP=setTimeout(()=>{J.dispatch($e({key:"bgm",value:{src:"",enter:0,volume:100}}))},e);const i=J.getState().stage.bgm.src;J.dispatch($e({key:"bgm",value:{src:i,enter:-e,volume:r}}))}else clearTimeout(GP),J.dispatch($e({key:"bgm",value:{src:t,enter:e,volume:r}}));const n=document.getElementById("currentBgm");n.src&&(n==null||n.play())}function Zf(t){const e=document.getElementById("ebg");e&&(e.style.backgroundImage=`url("${t}")`)}const cE=()=>{Ae.warn("清除所有演出");for(let t=0;t<j.gameplay.performController.performList.length;t++){const e=j.gameplay.performController.performList[t];e.performName.startsWith("videoPlay")?e.stopFunction(!0):e.stopFunction(),clearTimeout(e.stopTimeout),j.gameplay.performController.performList.splice(t,1),t--}},fE=()=>{J.getState().stage.PerformList.forEach(e=>{E0(e.script)})},Voe=t=>{const e=J.dispatch,r=j.backlogManager.getBacklog()[t];Ae.debug("读取的backlog数据",r),Jn(r.saveScene.sceneUrl).then(async i=>{if(await j.sceneManager.setCurrentScene(i,r.saveScene.sceneName,r.saveScene.sceneUrl)){const o=j.sceneManager.sceneData.currentScene.subSceneList;j.sceneManager.settledScenes.push(j.sceneManager.sceneData.currentScene.sceneUrl);const s=Xf(o);yu(s)}}),j.sceneManager.sceneData.currentSentenceId=r.saveScene.currentSentenceId,j.sceneManager.sceneData.sceneStack=Zt(r.saveScene.sceneStack),cE();for(let i=j.backlogManager.getBacklog().length-1;i>t;i--)j.backlogManager.getBacklog().pop();j.backlogManager.isSaveBacklogNext=!0;const n=Zt(r.currentStageState);e(u0(n)),setTimeout(fE,0),e(Ye({component:"showBacklog",visibility:!1})),e(Ye({component:"showTextBox",visibility:!0}))},T3=(t,e=!1)=>{const n=J.getState().saveData.saveData[t];Ae.debug("读取的存档数据",n),hE(n,e)};async function hE(t,e=!1){if(!t){Ae.info("暂无存档");return}const r=t;try{const o=await Jn(r.sceneData.sceneUrl);if(!await j.sceneManager.setCurrentScene(o,r.sceneData.sceneName,r.sceneData.sceneUrl,!0))return;const c=j.sceneManager.sceneData.currentScene.subSceneList;j.sceneManager.settledScenes.push(j.sceneManager.sceneData.currentScene.sceneUrl);const l=Xf(c);yu(l)}catch(o){Ae.error("场景加载失败",o);return}j.sceneManager.sceneData.currentSentenceId=r.sceneData.currentSentenceId,j.sceneManager.sceneData.sceneStack=Zt(r.sceneData.sceneStack),cE();const n=r.backlog;j.backlogManager.getBacklog().splice(0,j.backlogManager.getBacklog().length);for(const o of n)j.backlogManager.getBacklog().push(o);const i=Zt(r.nowStageState),a=J.dispatch;a(u0(i)),e?(a(_t.setLoadVideo(!0)),console.log(33333,r),r.nowStageState.PerformList.forEach(o=>{E0(o.script)})):setTimeout(fE,0),a(Ye({component:"showTitle",visibility:!1})),a(Ye({component:"showMenuPanel",visibility:!1})),a(Ye({component:"showExtra",visibility:!1})),Zf(J.getState().stage.bgName)}function Goe(){`${j.gameName}${j.gameKey}`,`${j.gameName}${j.gameKey}`}async function zoe(){const t=await f3(-1,!1),e=Zt(t);J.dispatch(_t.setFastSave(e)),await yae()}async function Woe(){return await Noe(),J.getState().saveData.quickSaveData!==null}async function Xoe(){await u3();const t=J.getState().saveData.quickSaveData;t&&hE(t)}const Hoe=()=>{oE(!0,!0,!1);const t=pr("start.txt",dr.scene);Jn(t).then(e=>{j.sceneManager.setCurrentScene(e,"start.txt",t).then(r=>{r&&gr()})}),J.dispatch(_t.setIsShowUnlock(!0)),J.dispatch(_t.setShowStoryline(!0)),J.dispatch(Ye({component:"showTitle",visibility:!1}))};async function Yoe(){if(Zf(J.getState().stage.bgName),await Woe()&&j.sceneManager.sceneData.currentSentenceId===0){await Xoe();return}j.sceneManager.sceneData.currentSentenceId===0&&j.sceneManager.sceneData.currentScene.sceneName==="start.txt"?gr():fE()}const qoe=()=>{const t=pr(xo.Storyline,dr.scene);j.sceneManager.resetScene(),Jn(t).then(e=>{j.sceneManager.setCurrentScene(e,xo.Storyline,t).then(r=>{r&&gr()})}),J.dispatch(Ye({component:"showTitle",visibility:!1})),J.dispatch(Ye({component:"showMenuPanel",visibility:!1})),J.dispatch(Ye({component:"showTextBox",visibility:!1})),J.dispatch(Qx(!0))},Koe=()=>{J.dispatch(Ye({component:"showBeautyGuide",visibility:!0}))};function dE(t,e){if(t==null)return{};var r=mie(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Zoe={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const Qoe=vn(Zoe);var Joe=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function zP(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=t.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(e.name=r[1],(Qoe[r[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var n=t.indexOf("-->");return{type:"comment",comment:n!==-1?t.slice(4,n):""}}for(var i=new RegExp(Joe),a=null;(a=i.exec(t))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),e.attrs[s[0]]=s[1],i.lastIndex--}else a[2]&&(e.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return e}var ese=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,tse=/^\s*$/,rse=Object.create(null);function P3(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(r){var n=[];for(var i in r)n.push(i+'="'+r[i]+'"');return n.length?" "+n.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(P3,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var nse={parse:function(t,e){e||(e={}),e.components||(e.components=rse);var r,n=[],i=[],a=-1,o=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");n.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace(ese,function(c,l){if(o){if(c!=="</"+r.name+">")return;o=!1}var u,f=c.charAt(1)!=="/",h=c.startsWith("<!--"),d=l+c.length,p=t.charAt(d);if(h){var v=zP(c);return a<0?(n.push(v),n):((u=i[a]).children.push(v),n)}if(f&&(a++,(r=zP(c)).type==="tag"&&e.components[r.name]&&(r.type="component",o=!0),r.voidElement||o||!p||p==="<"||r.children.push({type:"text",content:t.slice(d,t.indexOf("<",d))}),a===0&&n.push(r),(u=i[a-1])&&u.children.push(r),i[a]=r),(!f||r.voidElement)&&(a>-1&&(r.voidElement||r.name===c.slice(2,-1))&&(a--,r=a===-1?n:i[a]),!o&&p!=="<"&&p)){u=a===-1?n:i[a].children;var y=t.indexOf("<",d),g=t.slice(d,y===-1?void 0:y);tse.test(g)&&(g=" "),(y>-1&&a+u.length>=0||g!==" ")&&u.push({type:"text",content:g})}}),n},stringify:function(t){return t.reduce(function(e,r){return e+P3("",r)},"")}};function _d(){if(console&&console.warn){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(t=console).warn.apply(t,r)}}var WP={};function pp(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];typeof e[0]=="string"&&WP[e[0]]||(typeof e[0]=="string"&&(WP[e[0]]=new Date),_d.apply(void 0,e))}var O3=function(e,r){return function(){if(e.isInitialized)r();else{var n=function i(){setTimeout(function(){e.off("initialized",i)},0),r()};e.on("initialized",n)}}};function XP(t,e,r){t.loadNamespaces(e,O3(t,r))}function HP(t,e,r,n){typeof r=="string"&&(r=[r]),r.forEach(function(i){t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,O3(t,n))}function ise(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.languages[0],i=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var o=function(c,l){var u=e.services.backendConnector.state["".concat(c,"|").concat(l)];return u===-1||u===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(n,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(n,t)&&(!i||o(a,t)))}function ase(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return pp("i18n.languages were undefined or empty",e.languages),!0;var n=e.options.ignoreJSONStructure!==void 0;return n?e.hasLoadedNamespace(t,{lng:r.lng,precheck:function(a,o){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,t))return!1}}):ise(t,e,r)}var ose=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,sse={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},lse=function(e){return sse[e]},use=function(e){return e.replace(ose,lse)};function YP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Jx={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:use};function cse(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jx=qP(qP({},Jx),t)}function R3(){return Jx}var I3;function fse(t){I3=t}function pE(){return I3}var hse=["format"],dse=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function KP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lg(t,e){if(!t)return!1;var r=t.props?t.props.children:t.children;return e?r.length>0:!!r}function Bg(t){return t?t.props?t.props.children:t.children:[]}function pse(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(function(e){return ie.isValidElement(e)})}function pc(t){return Array.isArray(t)?t:[t]}function vse(t,e){var r=Pr({},e);return r.props=Object.assign(t.props,e.props),r}function F3(t,e){if(!t)return"";var r="",n=pc(t),i=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return n.forEach(function(a,o){if(typeof a=="string")r+="".concat(a);else if(ie.isValidElement(a)){var s=Object.keys(a.props).length,c=i.indexOf(a.type)>-1,l=a.props.children;if(!l&&c&&s===0)r+="<".concat(a.type,"/>");else if(!l&&(!c||s!==0))r+="<".concat(o,"></").concat(o,">");else if(a.props.i18nIsDynamicList)r+="<".concat(o,"></").concat(o,">");else if(c&&s===1&&typeof l=="string")r+="<".concat(a.type,">").concat(l,"</").concat(a.type,">");else{var u=F3(l,e);r+="<".concat(o,">").concat(u,"</").concat(o,">")}}else if(a===null)_d("Trans: the passed in value is invalid - seems you passed in a null child.");else if(Gr(a)==="object"){var f=a.format,h=dE(a,hse),d=Object.keys(h);if(d.length===1){var p=f?"".concat(d[0],", ").concat(f):d[0];r+="{{".concat(p,"}}")}else _d("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",a)}else _d("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",a)}),r}function mse(t,e,r,n,i,a){if(e==="")return[];var o=n.transKeepBasicHtmlNodesFor||[],s=e&&new RegExp(o.join("|")).test(e);if(!t&&!s)return[e];var c={};function l(y){var g=pc(y);g.forEach(function(m){typeof m!="string"&&(Lg(m)?l(Bg(m)):Gr(m)==="object"&&!ie.isValidElement(m)&&Object.assign(c,m))})}l(t);var u=nse.parse("<0>".concat(e,"</0>")),f=Pr(Pr({},c),i);function h(y,g,m){var x=Bg(y),b=p(x,g.children,m);return pse(x)&&b.length===0?x:b}function d(y,g,m,x,b){y.dummy&&(y.children=g),m.push(ie.cloneElement(y,Pr(Pr({},y.props),{},{key:x}),b?void 0:g))}function p(y,g,m){var x=pc(y),b=pc(g);return b.reduce(function(_,S,E){var w=S.children&&S.children[0]&&S.children[0].content&&r.services.interpolator.interpolate(S.children[0].content,f,r.language);if(S.type==="tag"){var C=x[parseInt(S.name,10)];!C&&m.length===1&&m[0][S.name]&&(C=m[0][S.name]),C||(C={});var A=Object.keys(S.attrs).length!==0?vse({props:S.attrs},C):C,P=ie.isValidElement(A),T=P&&Lg(S,!0)&&!S.voidElement,O=s&&Gr(A)==="object"&&A.dummy&&!P,R=Gr(t)==="object"&&t!==null&&Object.hasOwnProperty.call(t,S.name);if(typeof A=="string"){var F=r.services.interpolator.interpolate(A,f,r.language);_.push(F)}else if(Lg(A)||T){var D=h(A,S,m);d(A,D,_,E)}else if(O){var V=p(x,S.children,m);_.push(ie.cloneElement(A,Pr(Pr({},A.props),{},{key:E}),V))}else if(Number.isNaN(parseFloat(S.name)))if(R){var Y=h(A,S,m);d(A,Y,_,E,S.voidElement)}else if(n.transSupportBasicHtmlNodes&&o.indexOf(S.name)>-1)if(S.voidElement)_.push(ie.createElement(S.name,{key:"".concat(S.name,"-").concat(E)}));else{var W=p(x,S.children,m);_.push(ie.createElement(S.name,{key:"".concat(S.name,"-").concat(E)},W))}else if(S.voidElement)_.push("<".concat(S.name," />"));else{var $=p(x,S.children,m);_.push("<".concat(S.name,">").concat($,"</").concat(S.name,">"))}else if(Gr(A)==="object"&&!P){var I=S.children[0]?w:null;I&&_.push(I)}else S.children.length===1&&w?_.push(ie.cloneElement(A,Pr(Pr({},A.props),{},{key:E}),w)):_.push(ie.cloneElement(A,Pr(Pr({},A.props),{},{key:E})))}else if(S.type==="text"){var B=n.transWrapTextNodes,L=a?n.unescape(r.services.interpolator.interpolate(S.content,f,r.language)):r.services.interpolator.interpolate(S.content,f,r.language);B?_.push(ie.createElement(B,{key:"".concat(S.name,"-").concat(E)},L)):_.push(L)}return _},[])}var v=p([{dummy:!0,children:t||[]}],u,pc(t||[]));return Bg(v[0])}function gse(t){var e=t.children,r=t.count,n=t.parent,i=t.i18nKey,a=t.context,o=t.tOptions,s=o===void 0?{}:o,c=t.values,l=t.defaults,u=t.components,f=t.ns,h=t.i18n,d=t.t,p=t.shouldUnescape,v=dE(t,dse),y=h||pE();if(!y)return pp("You will need to pass in an i18next instance by using i18nextReactModule"),e;var g=d||y.t.bind(y)||function(T){return T};a&&(s.context=a);var m=Pr(Pr({},R3()),y.options&&y.options.react),x=f||g.ns||y.options&&y.options.defaultNS;x=typeof x=="string"?[x]:x||["translation"];var b=l||F3(e,m)||m.transEmptyNodeValue||i,_=m.hashTransKey,S=i||(_?_(b):b),E=c?s.interpolation:{interpolation:Pr(Pr({},s.interpolation),{},{prefix:"#$?",suffix:"?$#"})},w=Pr(Pr(Pr(Pr({},s),{},{count:r},c),E),{},{defaultValue:b,ns:x}),C=S?g(S,w):b,A=mse(u||e,C,y,m,w,p),P=n!==void 0?n:m.defaultTransParent;return P?ie.createElement(P,v,A):A}function Mi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xk(n.key),n)}}function Li(t,e,r){return e&&ZP(t.prototype,e),r&&ZP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var yse={type:"3rdParty",init:function(e){cse(e.options.react),fse(e)}},k3=ie.createContext(),xse=function(){function t(){Mi(this,t),this.usedNamespaces={}}return Li(t,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}(),_se=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function QP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bse(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QP(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sse(t){var e=t.children,r=t.count,n=t.parent,i=t.i18nKey,a=t.context,o=t.tOptions,s=o===void 0?{}:o,c=t.values,l=t.defaults,u=t.components,f=t.ns,h=t.i18n,d=t.t,p=t.shouldUnescape,v=dE(t,_se),y=ie.useContext(k3)||{},g=y.i18n,m=y.defaultNS,x=h||g||pE(),b=d||x&&x.t.bind(x);return gse(bse({children:e,count:r,parent:n,i18nKey:i,context:a,tOptions:s,values:c,defaults:l,components:u,ns:f||b&&b.ns||m||x&&x.options&&x.options.defaultNS,i18n:x,t:d,shouldUnescape:p},v))}function D3(t){if(Array.isArray(t))return t}function Ese(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],c=!0,l=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function JP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M3(t,e){if(t){if(typeof t=="string")return JP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JP(t,e)}}function L3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wse(t,e){return D3(t)||Ese(t,e)||M3(t,e)||L3()}function eO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ng(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ase=function(e,r){var n=ie.useRef();return ie.useEffect(function(){n.current=r?n.current:e},[e,r]),n.current};function ev(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.i18n,n=ie.useContext(k3)||{},i=n.i18n,a=n.defaultNS,o=r||i||pE();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new xse),!o){pp("You will need to pass in an i18next instance by using initReactI18next");var s=function(C,A){return typeof A=="string"?A:A&&Gr(A)==="object"&&typeof A.defaultValue=="string"?A.defaultValue:Array.isArray(C)?C[C.length-1]:C},c=[s,{},!1];return c.t=s,c.i18n={},c.ready=!1,c}o.options.react&&o.options.react.wait!==void 0&&pp("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=Ng(Ng(Ng({},R3()),o.options.react),e),u=l.useSuspense,f=l.keyPrefix,h=t||a||o.options&&o.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(h);var d=(o.isInitialized||o.initializedStoreOnce)&&h.every(function(w){return ase(w,o,l)});function p(){return o.getFixedT(e.lng||null,l.nsMode==="fallback"?h:h[0],f)}var v=ie.useState(p),y=wse(v,2),g=y[0],m=y[1],x=h.join();e.lng&&(x="".concat(e.lng).concat(x));var b=Ase(x),_=ie.useRef(!0);ie.useEffect(function(){var w=l.bindI18n,C=l.bindI18nStore;_.current=!0,!d&&!u&&(e.lng?HP(o,e.lng,h,function(){_.current&&m(p)}):XP(o,h,function(){_.current&&m(p)})),d&&b&&b!==x&&_.current&&m(p);function A(){_.current&&m(p)}return w&&o&&o.on(w,A),C&&o&&o.store.on(C,A),function(){_.current=!1,w&&o&&w.split(" ").forEach(function(P){return o.off(P,A)}),C&&o&&C.split(" ").forEach(function(P){return o.store.off(P,A)})}},[o,x]);var S=ie.useRef(!0);ie.useEffect(function(){_.current&&!S.current&&m(p),S.current=!1},[o,f]);var E=[g,o,d];if(E.t=g,E.i18n=o,E.ready=d,d||!d&&!u)return E;throw new Promise(function(w){e.lng?HP(o,e.lng,h,function(){return w()}):XP(o,h,function(){return w()})})}function oa(t){const{t:e}=ev(),r=i=>e(i[0]==="$"?i.slice(1):t+i);function n(i,...a){return a.length?[r(i),...a.map(o=>r(o))]:r(i)}return n}function Cse(t){return Q0.parseScssToWebgalStyleObj(t)}function Ss(t){const[e,r]=ie.useState(t);return{_value:e,set:function(n){this._value=n,r(n)},get value(){return this._value},set value(n){this.set(n)}}}function Tse(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Pse(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Ose=function(){function t(r){var n=this;this._insertTag=function(i){var a;n.tags.length===0?n.insertionPoint?a=n.insertionPoint.nextSibling:n.prepend?a=n.container.firstChild:a=n.before:a=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,a),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Pse(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=Tse(i);try{a.insertRule(n,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},t}(),sn="-ms-",vp="-moz-",mt="-webkit-",B3="comm",vE="rule",mE="decl",Rse="@import",N3="@keyframes",Ise="@layer",Fse=Math.abs,tv=String.fromCharCode,kse=Object.assign;function Dse(t,e){return en(t,0)^45?(((e<<2^en(t,0))<<2^en(t,1))<<2^en(t,2))<<2^en(t,3):0}function j3(t){return t.trim()}function Mse(t,e){return(t=e.exec(t))?t[0]:t}function gt(t,e,r){return t.replace(e,r)}function e_(t,e){return t.indexOf(e)}function en(t,e){return t.charCodeAt(e)|0}function af(t,e,r){return t.slice(e,r)}function Hi(t){return t.length}function gE(t){return t.length}function Sh(t,e){return e.push(t),t}function Lse(t,e){return t.map(e).join("")}var rv=1,zl=1,U3=0,jn=0,Ar=0,xu="";function nv(t,e,r,n,i,a,o){return{value:t,root:e,parent:r,type:n,props:i,children:a,line:rv,column:zl,length:o,return:""}}function Yu(t,e){return kse(nv("",null,null,"",null,null,0),t,{length:-t.length},e)}function Bse(){return Ar}function Nse(){return Ar=jn>0?en(xu,--jn):0,zl--,Ar===10&&(zl=1,rv--),Ar}function Yn(){return Ar=jn<U3?en(xu,jn++):0,zl++,Ar===10&&(zl=1,rv++),Ar}function aa(){return en(xu,jn)}function bd(){return jn}function Qf(t,e){return af(xu,t,e)}function of(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $3(t){return rv=zl=1,U3=Hi(xu=t),jn=0,[]}function V3(t){return xu="",t}function Sd(t){return j3(Qf(jn-1,t_(t===91?t+2:t===40?t+1:t)))}function jse(t){for(;(Ar=aa())&&Ar<33;)Yn();return of(t)>2||of(Ar)>3?"":" "}function Use(t,e){for(;--e&&Yn()&&!(Ar<48||Ar>102||Ar>57&&Ar<65||Ar>70&&Ar<97););return Qf(t,bd()+(e<6&&aa()==32&&Yn()==32))}function t_(t){for(;Yn();)switch(Ar){case t:return jn;case 34:case 39:t!==34&&t!==39&&t_(Ar);break;case 40:t===41&&t_(t);break;case 92:Yn();break}return jn}function $se(t,e){for(;Yn()&&t+Ar!==47+10;)if(t+Ar===42+42&&aa()===47)break;return"/*"+Qf(e,jn-1)+"*"+tv(t===47?t:Yn())}function Vse(t){for(;!of(aa());)Yn();return Qf(t,jn)}function Gse(t){return V3(Ed("",null,null,null,[""],t=$3(t),0,[0],t))}function Ed(t,e,r,n,i,a,o,s,c){for(var l=0,u=0,f=o,h=0,d=0,p=0,v=1,y=1,g=1,m=0,x="",b=i,_=a,S=n,E=x;y;)switch(p=m,m=Yn()){case 40:if(p!=108&&en(E,f-1)==58){e_(E+=gt(Sd(m),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:E+=Sd(m);break;case 9:case 10:case 13:case 32:E+=jse(p);break;case 92:E+=Use(bd()-1,7);continue;case 47:switch(aa()){case 42:case 47:Sh(zse($se(Yn(),bd()),e,r),c);break;default:E+="/"}break;case 123*v:s[l++]=Hi(E)*g;case 125*v:case 59:case 0:switch(m){case 0:case 125:y=0;case 59+u:g==-1&&(E=gt(E,/\f/g,"")),d>0&&Hi(E)-f&&Sh(d>32?rO(E+";",n,r,f-1):rO(gt(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(Sh(S=tO(E,e,r,l,u,i,s,x,b=[],_=[],f),a),m===123)if(u===0)Ed(E,e,S,S,b,a,f,s,_);else switch(h===99&&en(E,3)===110?100:h){case 100:case 108:case 109:case 115:Ed(t,S,S,n&&Sh(tO(t,S,S,0,0,i,s,x,i,b=[],f),_),i,_,f,s,n?b:_);break;default:Ed(E,S,S,S,[""],_,0,s,_)}}l=u=d=0,v=g=1,x=E="",f=o;break;case 58:f=1+Hi(E),d=p;default:if(v<1){if(m==123)--v;else if(m==125&&v++==0&&Nse()==125)continue}switch(E+=tv(m),m*v){case 38:g=u>0?1:(E+="\f",-1);break;case 44:s[l++]=(Hi(E)-1)*g,g=1;break;case 64:aa()===45&&(E+=Sd(Yn())),h=aa(),u=f=Hi(x=E+=Vse(bd())),m++;break;case 45:p===45&&Hi(E)==2&&(v=0)}}return a}function tO(t,e,r,n,i,a,o,s,c,l,u){for(var f=i-1,h=i===0?a:[""],d=gE(h),p=0,v=0,y=0;p<n;++p)for(var g=0,m=af(t,f+1,f=Fse(v=o[p])),x=t;g<d;++g)(x=j3(v>0?h[g]+" "+m:gt(m,/&\f/g,h[g])))&&(c[y++]=x);return nv(t,e,r,i===0?vE:s,c,l,u)}function zse(t,e,r){return nv(t,e,r,B3,tv(Bse()),af(t,2,-2),0)}function rO(t,e,r,n){return nv(t,e,r,mE,af(t,0,n),af(t,n+1,-1),n)}function Ol(t,e){for(var r="",n=gE(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function Wse(t,e,r,n){switch(t.type){case Ise:if(t.children.length)break;case Rse:case mE:return t.return=t.return||t.value;case B3:return"";case N3:return t.return=t.value+"{"+Ol(t.children,n)+"}";case vE:t.value=t.props.join(",")}return Hi(r=Ol(t.children,n))?t.return=t.value+"{"+r+"}":""}function Xse(t){var e=gE(t);return function(r,n,i,a){for(var o="",s=0;s<e;s++)o+=t[s](r,n,i,a)||"";return o}}function Hse(t){return function(e){e.root||(e=e.return)&&t(e)}}function Yse(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var qse=function(e,r,n){for(var i=0,a=0;i=a,a=aa(),i===38&&a===12&&(r[n]=1),!of(a);)Yn();return Qf(e,jn)},Kse=function(e,r){var n=-1,i=44;do switch(of(i)){case 0:i===38&&aa()===12&&(r[n]=1),e[n]+=qse(jn-1,r,n);break;case 2:e[n]+=Sd(i);break;case 4:if(i===44){e[++n]=aa()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=tv(i)}while(i=Yn());return e},Zse=function(e,r){return V3(Kse($3(e),r))},nO=new WeakMap,Qse=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!nO.get(n))&&!i){nO.set(e,!0);for(var a=[],o=Zse(r,a),s=n.props,c=0,l=0;c<o.length;c++)for(var u=0;u<s.length;u++,l++)e.props[l]=a[c]?o[c].replace(/&\f/g,s[u]):s[u]+" "+o[c]}}},Jse=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function G3(t,e){switch(Dse(t,e)){case 5103:return mt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return mt+t+vp+t+sn+t+t;case 6828:case 4268:return mt+t+sn+t+t;case 6165:return mt+t+sn+"flex-"+t+t;case 5187:return mt+t+gt(t,/(\w+).+(:[^]+)/,mt+"box-$1$2"+sn+"flex-$1$2")+t;case 5443:return mt+t+sn+"flex-item-"+gt(t,/flex-|-self/,"")+t;case 4675:return mt+t+sn+"flex-line-pack"+gt(t,/align-content|flex-|-self/,"")+t;case 5548:return mt+t+sn+gt(t,"shrink","negative")+t;case 5292:return mt+t+sn+gt(t,"basis","preferred-size")+t;case 6060:return mt+"box-"+gt(t,"-grow","")+mt+t+sn+gt(t,"grow","positive")+t;case 4554:return mt+gt(t,/([^-])(transform)/g,"$1"+mt+"$2")+t;case 6187:return gt(gt(gt(t,/(zoom-|grab)/,mt+"$1"),/(image-set)/,mt+"$1"),t,"")+t;case 5495:case 3959:return gt(t,/(image-set\([^]*)/,mt+"$1$`$1");case 4968:return gt(gt(t,/(.+:)(flex-)?(.*)/,mt+"box-pack:$3"+sn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mt+t+t;case 4095:case 3583:case 4068:case 2532:return gt(t,/(.+)-inline(.+)/,mt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hi(t)-1-e>6)switch(en(t,e+1)){case 109:if(en(t,e+4)!==45)break;case 102:return gt(t,/(.+:)(.+)-([^]+)/,"$1"+mt+"$2-$3$1"+vp+(en(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~e_(t,"stretch")?G3(gt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(en(t,e+1)!==115)break;case 6444:switch(en(t,Hi(t)-3-(~e_(t,"!important")&&10))){case 107:return gt(t,":",":"+mt)+t;case 101:return gt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mt+(en(t,14)===45?"inline-":"")+"box$3$1"+mt+"$2$3$1"+sn+"$2box$3")+t}break;case 5936:switch(en(t,e+11)){case 114:return mt+t+sn+gt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return mt+t+sn+gt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return mt+t+sn+gt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return mt+t+sn+t+t}return t}var ele=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case mE:e.return=G3(e.value,e.length);break;case N3:return Ol([Yu(e,{value:gt(e.value,"@","@"+mt)})],i);case vE:if(e.length)return Lse(e.props,function(a){switch(Mse(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ol([Yu(e,{props:[gt(a,/:(read-\w+)/,":"+vp+"$1")]})],i);case"::placeholder":return Ol([Yu(e,{props:[gt(a,/:(plac\w+)/,":"+mt+"input-$1")]}),Yu(e,{props:[gt(a,/:(plac\w+)/,":"+vp+"$1")]}),Yu(e,{props:[gt(a,/:(plac\w+)/,sn+"input-$1")]})],i)}return""})}},tle=[ele],rle=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||tle,a={},o,s=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),g=1;g<y.length;g++)a[y[g]]=!0;s.push(v)});var c,l=[Qse,Jse];{var u,f=[Wse,Hse(function(v){u.insert(v)})],h=Xse(l.concat(i,f)),d=function(y){return Ol(Gse(y),h)};c=function(y,g,m,x){u=m,d(y?y+"{"+g.styles+"}":g.styles),x&&(p.inserted[g.name]=!0)}}var p={key:r,sheet:new Ose({key:r,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:c};return p.sheet.hydrate(s),p};function nle(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var ile={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ale=/[A-Z]|^ms/g,ole=/_EMO_([^_]+?)_([^]*?)_EMO_/g,z3=function(e){return e.charCodeAt(1)===45},iO=function(e){return e!=null&&typeof e!="boolean"},jg=Yse(function(t){return z3(t)?t:t.replace(ale,"-$&").toLowerCase()}),aO=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(ole,function(n,i,a){return Yi={name:i,styles:a,next:Yi},i})}return ile[e]!==1&&!z3(e)&&typeof r=="number"&&r!==0?r+"px":r};function sf(t,e,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Yi={name:r.name,styles:r.styles,next:Yi},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)Yi={name:n.name,styles:n.styles,next:Yi},n=n.next;var i=r.styles+";";return i}return sle(t,e,r)}case"function":{if(t!==void 0){var a=Yi,o=r(t);return Yi=a,sf(t,e,o)}break}}if(e==null)return r;var s=e[r];return s!==void 0?s:r}function sle(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=sf(t,e,r[i])+";";else for(var a in r){var o=r[a];if(typeof o!="object")e!=null&&e[o]!==void 0?n+=a+"{"+e[o]+"}":iO(o)&&(n+=jg(a)+":"+aO(a,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var s=0;s<o.length;s++)iO(o[s])&&(n+=jg(a)+":"+aO(a,o[s])+";");else{var c=sf(t,e,o);switch(a){case"animation":case"animationName":{n+=jg(a)+":"+c+";";break}default:n+=a+"{"+c+"}"}}}return n}var oO=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Yi,Ug=function(e,r,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,a="";Yi=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,a+=sf(n,r,o)):a+=o[0];for(var s=1;s<e.length;s++)a+=sf(n,r,e[s]),i&&(a+=o[s]);oO.lastIndex=0;for(var c="",l;(l=oO.exec(a))!==null;)c+="-"+l[1];var u=nle(a)+c;return{name:u,styles:a,next:Yi}},lle=!0;function W3(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):n+=i+" "}),n}var ule=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||lle===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},cle=function(e,r,n){ule(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var a=r;do e.insert(r===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function sO(t,e){if(t.inserted[e.name]===void 0)return t.insert("",e,t.sheet,!0)}function lO(t,e,r){var n=[],i=W3(t,n,r);return n.length<2?r:i+e(n)}var fle=function(e){var r=rle(e);r.sheet.speedy=function(s){this.isSpeedy=s},r.compat=!0;var n=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=Ug(l,r.registered,void 0);return cle(r,f,!1),r.key+"-"+f.name},i=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=Ug(l,r.registered),h="animation-"+f.name;return sO(r,{name:f.name,styles:"@keyframes "+h+"{"+f.styles+"}"}),h},a=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];var f=Ug(l,r.registered);sO(r,f)},o=function(){for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return lO(r.registered,n,hle(l))};return{css:n,cx:o,injectGlobal:a,keyframes:i,hydrate:function(c){c.forEach(function(l){r.inserted[l]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:W3.bind(null,r.registered),merge:lO.bind(null,r.registered,n)}},hle=function t(e){for(var r="",n=0;n<e.length;n++){var i=e[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=t(i);else{a="";for(var o in i)i[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=i}a&&(r&&(r+=" "),r+=a)}}return r},X3=fle({key:"css"}),dle=X3.injectGlobal,ple=X3.css;function H3(t){const e=Ss({classNameStyles:{},others:""}),r=Ue(a=>a.stage.replacedUIlable),n=(a,o)=>{var c;const s=(r==null?void 0:r[a])??a;if(Object.keys(e.value.classNameStyles).includes(s)){const l=ple(((c=e.value.classNameStyles)==null?void 0:c[s])??"");return`${o} ${l}`}return o},i=async()=>{Ae.debug("更新 Scss 文件",t);const o=(await Jc.get(`game/template/${t}`)).data;e.set(Cse(o))};return ie.useEffect(()=>{i()},[]),ie.useEffect(()=>{dle(e.value.others)},[e.value.others]),vle(i),n}function vle(t){const e=()=>{t()};ie.useEffect(()=>(j.events.styleUpdate.on(e),()=>j.events.styleUpdate.off(e)),[])}function _u(t){const e=Ue(t),r=ie.useRef(e);return ie.useEffect(()=>{r.current=e},[e]),r}function bu(t){ie.useEffect(()=>{t()},[])}function Su(t){ie.useEffect(()=>function(){t()},[])}function mle(t){ie.useEffect(()=>{t()})}const gle="_main_161dl_1",yle="_fallBack_161dl_16",xle="_pause_161dl_32",_le="_advance_161dl_51",ble="_collect_161dl_67",Sle="_autoplay_161dl_83",Ele="_button_161dl_100",wle="_button_text_161dl_107",Ale="_button_on_161dl_115",Cle="_singleButton_161dl_126",Tle="_fastSlPreview_161dl_143",Ple="_fastSlEnter_161dl_1",Ole="_fastsave_161dl_157",Rle="_fastSPreview_161dl_157",Ile="_fastload_161dl_161",Fle="_fastLPreview_161dl_161",kle="_slPreviewMain_161dl_173",Dle="_imgContainer_161dl_181",Mle="_textContainer_161dl_189",un={main:gle,fallBack:yle,pause:xle,advance:_le,collect:ble,autoplay:Sle,button:Ele,button_text:wle,button_on:Ale,singleButton:Cle,fastSlPreview:Tle,fastSlEnter:Ple,fastsave:Ole,fastSPreview:Rle,fastload:Ile,fastLPreview:Fle,slPreviewMain:kle,imgContainer:Dle,textContainer:Mle},Y3=t=>{const e=document.getElementById("Button_ControlPanel_auto");e&&(t?e.className=un.button_on:e.className=un.singleButton)},yE=()=>{j.gameplay.isAuto=!1,Y3(!1),j.gameplay.autoInterval!==null&&(clearInterval(j.gameplay.autoInterval),j.gameplay.autoInterval=null),j.gameplay.autoTimeout!==null&&(clearTimeout(j.gameplay.autoTimeout),j.gameplay.autoTimeout=null)},Lle=()=>{j.gameplay.isAuto?yE():(j.gameplay.isAuto=!0,Y3(!0),j.gameplay.autoInterval=setInterval(Nle,100))},Ble=()=>{gr(),j.gameplay.autoTimeout=null},Nle=()=>{const e=750-250*J.getState().userData.optionData.autoSpeed;let r=!1;j.gameplay.performController.performList.forEach(n=>{n.blockingAuto()&&(r=!0)}),!r&&j.gameplay.autoTimeout===null&&(j.gameplay.autoTimeout=setTimeout(Ble,e))},q3=t=>{const e=document.getElementById("Button_ControlPanel_fast");e&&(t?e.className=un.button_on:e.className=un.singleButton)},Rl=()=>{Z3()&&(j.gameplay.isFast=!1,q3(!1),j.gameplay.fastInterval!==null&&(clearInterval(j.gameplay.fastInterval),j.gameplay.fastInterval=null))},K3=()=>{Z3()||(j.gameplay.isFast=!0,q3(!0),j.gameplay.fastInterval=setInterval(()=>{gr()},vD.fast_timeout))},Z3=function(){return j.gameplay.isFast},xE=()=>{Rl(),yE()},jle=()=>{j.gameplay.isFast?Rl():K3()},Ule="_Backlog_main_zwyao_2",$le="_backlog_soft_in_zwyao_1",Vle="_Backlog_main_out_zwyao_15",Gle="_backlog_soft_out_zwyao_1",zle="_Backlog_main_out_IndexHide_zwyao_28",Wle="_Backlog_main_DisableScroll_zwyao_32",Xle="_backlog_top_zwyao_36",Hle="_backlog_top_icon_zwyao_42",Yle="_backlog_icon_softin_zwyao_1",qle="_backlog_title_zwyao_62",Kle="_backlog_content_zwyao_72",Zle="_backlog_item_zwyao_84",Qle="_backlog_item_in_zwyao_1",Jle="_backlog_item_out_zwyao_94",eue="_backlog_func_area_zwyao_104",tue="_backlog_item_content_name_zwyao_113",rue="_backlog_item_content_zwyao_113",nue="_backlog_item_button_list_zwyao_137",iue="_backlog_item_button_element_zwyao_144",aue="_backlog_item_content_text_zwyao_157",Zr={Backlog_main:Ule,backlog_soft_in:$le,Backlog_main_out:Vle,backlog_soft_out:Gle,Backlog_main_out_IndexHide:zle,Backlog_main_DisableScroll:Wle,backlog_top:Xle,backlog_top_icon:Hle,backlog_icon_softin:Yle,backlog_title:qle,backlog_content:Kle,backlog_item:Zle,backlog_item_in:Qle,backlog_item_out:Jle,backlog_func_area:eue,backlog_item_content_name:tue,backlog_item_content:rue,backlog_item_button_list:nue,backlog_item_button_element:iue,backlog_item_content_text:aue};var oue=Di,sue=function(){return oue.Date.now()},lue=sue,uue=/\s/;function cue(t){for(var e=t.length;e--&&uue.test(t.charAt(e)););return e}var fue=cue,hue=fue,due=/^\s+/;function pue(t){return t&&t.slice(0,hue(t)+1).replace(due,"")}var vue=pue,mue=vue,uO=da,gue=P0,cO=0/0,yue=/^[-+]0x[0-9a-f]+$/i,xue=/^0b[01]+$/i,_ue=/^0o[0-7]+$/i,bue=parseInt;function Sue(t){if(typeof t=="number")return t;if(gue(t))return cO;if(uO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=uO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=mue(t);var r=xue.test(t);return r||_ue.test(t)?bue(t.slice(2),r?2:8):yue.test(t)?cO:+t}var Eue=Sue,wue=da,$g=lue,fO=Eue,Aue="Expected a function",Cue=Math.max,Tue=Math.min;function Pue(t,e,r){var n,i,a,o,s,c,l=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Aue);e=fO(e)||0,wue(r)&&(u=!!r.leading,f="maxWait"in r,a=f?Cue(fO(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function d(S){var E=n,w=i;return n=i=void 0,l=S,o=t.apply(w,E),o}function p(S){return l=S,s=setTimeout(g,e),u?d(S):o}function v(S){var E=S-c,w=S-l,C=e-E;return f?Tue(C,a-w):C}function y(S){var E=S-c,w=S-l;return c===void 0||E>=e||E<0||f&&w>=a}function g(){var S=$g();if(y(S))return m(S);s=setTimeout(g,v(S))}function m(S){return s=void 0,h&&n?d(S):(n=i=void 0,o)}function x(){s!==void 0&&clearTimeout(s),l=0,n=c=i=s=void 0}function b(){return s===void 0?o:m($g())}function _(){var S=$g(),E=y(S);if(n=arguments,i=this,c=S,E){if(s===void 0)return p(c);if(f)return clearTimeout(s),s=setTimeout(g,e),d(c)}return s===void 0&&(s=setTimeout(g,e)),o}return _.cancel=x,_.flush=b,_}var Oue=Pue,Rue=Oue,Iue=da,Fue="Expected a function";function kue(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Fue);return Iue(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Rue(t,e,{leading:n,maxWait:e,trailing:i})}var Due=kue;const Mue=vn(Due),vl="keyboard"in navigator&&navigator.keyboard;function Lue(t){Bue(),jue(),$ue(),Uue(),Vue(),Hue(),que()}function Bue(){const t=_u(c=>c.GUI),e=av(),r=iv(t),n=Q3(t),i=Gue(t),a=Wue(t),o=zue(t),s=ie.useCallback(c=>i()?(e("showGlobalDialog",!1),c.preventDefault(),!1):(o()&&e("showExtra",!1),r()&&e("showTextBox",!t.current.showTextBox),n()&&(e("showBacklog",!1),e("showTextBox",!0)),a()&&e("showMenuPanel",!1),c.preventDefault(),!1),[]);bu(()=>{document.addEventListener("contextmenu",s)}),Su(()=>{document.removeEventListener("contextmenu",s)})}let Nue=setTimeout(()=>{},0);function jue(){const t=_u(s=>s.GUI),e=av(),r=iv(t),n=Q3(t),i=J3(t),a=ie.useCallback(Mue(()=>{gr()},100),[]),o=ie.useRef(0);ie.useCallback(s=>{if(i())return;const c=s.wheelDelta&&(s.wheelDelta>0?"up":"down")||s.detail&&(s.detail<0?"up":"down")||"down",l=s.ctrlKey,u=document.querySelector(`.${Zr.backlog_content}`);if(r()&&c==="up"&&!l)e("showBacklog",!0),e("showTextBox",!1);else if(n()&&c==="down"&&!l){if(u){let f=Yue(u),h=new Date().getTime();f&&h-o.current>100&&(e("showBacklog",!1),e("showTextBox",!0)),o.current=h}}else r()&&c==="down"&&!l&&(clearTimeout(Nue),j.gameplay.isFast=!0,setTimeout(()=>{j.gameplay.isFast=!1},150),a())},[]),bu(()=>{}),Su(()=>{})}function Uue(){const t=["Escape","Backquote"],e=s=>!s.isComposing&&!s.defaultPrevented&&t.includes(s.code),r=_u(s=>s.GUI),n=ie.useCallback(()=>r.current.showTitle,[r]),i=J3(r),a=av(),o=ie.useCallback(s=>{!e(s)||n()||(i()?a("showPanicOverlay",!1):(a("showPanicOverlay",!0),xE()))},[]);bu(()=>{document.addEventListener("keyup",o)}),Su(()=>{document.removeEventListener("keyup",o)})}function $ue(){const t=_u(o=>o.GUI),e=iv(t),r=ie.useCallback(o=>o.keyCode===17,[]),n=ie.useCallback(o=>{r(o)&&e()&&K3()},[]),i=ie.useCallback(o=>{r(o)&&e()&&Rl()},[]),a=ie.useCallback(o=>{Rl()},[]);bu(()=>{document.addEventListener("keydown",n),document.addEventListener("keyup",i),window.addEventListener("blur",a)}),Su(()=>{document.removeEventListener("keydown",n),document.removeEventListener("keyup",i),window.removeEventListener("blur",a)}),mle(()=>{e()||Rl()})}function Vue(){const t=Xue(),e=ie.useCallback(async r=>{t()&&await zoe()},[]);bu(()=>{window.addEventListener("beforeunload",e)}),Su(()=>{window.removeEventListener("beforeunload",e)})}function iv(t){return ie.useCallback(()=>!t.current.showTitle&&!t.current.showMenuPanel&&!t.current.showBacklog&&!t.current.showPanicOverlay,[t])}function Q3(t){return ie.useCallback(()=>t.current.showBacklog,[t])}function Gue(t){return ie.useCallback(()=>t.current.showGlobalDialog,[t])}function zue(t){return ie.useCallback(()=>t.current.showExtra,[t])}function J3(t){return ie.useCallback(()=>t.current.showPanicOverlay,[t])}function Wue(t){return ie.useCallback(()=>[Hn.Save,Hn.Load,Hn.Option].includes(t.current.currentMenuTag),[t])}function Xue(){return ie.useCallback(()=>j.sceneManager.sceneData.currentSentenceId!==0,[j.sceneManager.sceneData])}function av(){const t=or();return(e,r)=>{t(Ye({component:e,visibility:r}))}}function Hue(){const t=_u(c=>c.GUI),e=iv(t),r=av(),n=ie.useRef(!1),i=ie.useCallback(c=>c.keyCode===32||c.keyCode===13,[]),a=ie.useCallback(c=>{if(i(c)&&e()&&!n.current){if(!t.current.showTextBox){r("showTextBox",!0);return}xE(),gr(),n.current=!0}},[]),o=ie.useCallback(c=>{i(c)&&e()&&(n.current=!1)},[]),s=ie.useCallback(c=>{n.current=!1},[]);bu(()=>{document.addEventListener("keydown",a),document.addEventListener("keyup",o),document.addEventListener("blur",s)}),Su(()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",o),document.removeEventListener("blur",s)})}function Yue(t){const{scrollTop:e,clientHeight:r,scrollHeight:n}=t;return e===0}function que(){const t=Ue(n=>n.userData),e=or(),r=t.optionData.fullScreen;ie.useEffect(()=>{const n=i=>{i.code==="F11"&&(i.preventDefault(),r!==ia.on?(e(Qa({key:"fullScreen",value:ia.on})),Sn()):(e(Qa({key:"fullScreen",value:ia.off})),Sn()))};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[r])}const Kue=()=>{J.dispatch(_t.setIsShowUnlock(!1));const t=pr(xo.Achieve,dr.scene);j.sceneManager.resetScene(),Jn(t).then(e=>{j.sceneManager.setCurrentScene(e,xo.Achieve,t).then(r=>{r&&(gr(),j.sceneManager.setCurrentScene(e,xo.Achieve,t))})}),J.dispatch(Ye({component:"showTitle",visibility:!1})),J.dispatch(Ye({component:"showMenuPanel",visibility:!1})),J.dispatch(Ye({component:"showTextBox",visibility:!1})),J.dispatch(Ye({component:"showAchievement",visibility:!0}))},Zue=()=>{const t=Ue(f=>f.userData),e=Ue(f=>f.GUI),r=or(),n=t.optionData.fullScreen,i=e.titleBg,a=i===""?"rgba(0,0,0,1)":`url("${i}")`;oa("title.");const{playSeEnter:o,playSeClick:s}=On(),c=H3("UI/Title/title.scss"),l={[Rt.Game_start_button]:()=>{Hoe(),s(),r(nf(!1))},[Rt.Game_achievement_button]:()=>{Kue(),s()},[Rt.Game_storyline_button]:()=>{qoe(),s()},[Rt.Game_extra_button]:()=>{r(Ye({component:"showExtra",visibility:!0})),s()},[Rt.Game_collection_button]:()=>{Koe(),s()},[Rt.Game_continue_button]:()=>{s(),r(Ye({component:"showTitle",visibility:!1})),Yoe()},[Rt.Game_option_button]:()=>{s(),r(Ye({component:"showMenuPanel",visibility:!0})),r(Zx(Hn.Option))},[Rt.Game_load_button]:()=>{s(),r(Ye({component:"showMenuPanel",visibility:!0})),r(Zx(Hn.Load))}},u=f=>{var y;const h=e.gameMenus[f];if(!h||h.args.hide)return null;const d={};let p=zs.Title_button;const v=`title-${f}`;if(h.args.style){const g=h.args.style;typeof g.x=="number"&&(d.position="fixed",d.left=g.x+"px",d.transform="translateX(-50%)"),typeof g.y=="number"&&(d.position="fixed",d.top=g.y+"px",d.transform?d.transform+=" translateY(-50%)":d.transform="translateY(-50%)"),typeof g.scale=="number"&&(d.transform?d.transform+=" scale("+g.scale+")":d.transform="scale("+g.scale+")"),typeof g.fontSize=="number"&&(d.fontSize=g.fontSize+"px"),typeof g.fontColor=="string"&&g.fontColor[0]==="#"&&(d.color=g.fontColor)}if((y=h.args.style)!=null&&y.image){let g=document.getElementById(v);if(p=zs.Title_button_custom,!g){const m=pr(h.args.style.image,dr.ui),x=new Image;x.src=m,x.onload=function(){let b=document.getElementById(v);x.style.width=x.naturalWidth+"px",x.style.height=x.naturalHeight+"px",x.alt=h.content,b&&(b.style.width=x.naturalWidth+"px",b.style.height=x.naturalHeight+"px",setTimeout(()=>{b==null||b.prepend(x),b=null},32))}}}return k.jsx("div",{id:v,className:c("Title_button",p),onClick:l[f],onMouseEnter:o,style:d,children:k.jsx("span",{className:zs.Title_button_text,children:h.content})},f)};return k.jsxs(k.Fragment,{children:[e.showTitle&&k.jsx("div",{className:c("Title_backup_background",zs.Title_backup_background)}),k.jsx("div",{id:"enter_game_target",onClick:()=>{uE(e.titleBgm),r(Ye({component:"isEnterGame",visibility:!0})),n===ia.on&&(document.documentElement.requestFullscreen(),vl&&vl.lock(["Escape","F11"]))},onMouseEnter:o}),e.showTitle&&k.jsx("div",{className:c("Title_main",zs.Title_main),style:{backgroundImage:a,backgroundSize:"cover"},children:k.jsxs("div",{className:c("Title_buttonList",zs.Title_buttonList),children:[u(Rt.Game_start_button),u(Rt.Game_continue_button),u(Rt.Game_load_button),u(Rt.Game_option_button),u(Rt.Game_achievement_button),u(Rt.Game_storyline_button),u(Rt.Game_extra_button),u(Rt.Game_collection_button)]})})]})},Que="_Logo_main_19jxx_1",Jue="_overlay_19jxx_14",ece="_Logo_Back_19jxx_61",tce="_animationActive_19jxx_75",rce="_fadeout_19jxx_1",Eh={Logo_main:Que,"change-img-anim":"_change-img-anim_19jxx_1",overlay:Jue,"fade-in":"_fade-in_19jxx_1",Logo_Back:ece,animationActive:tce,fadeout:rce,"fade-in-out":"_fade-in-out_19jxx_1"},nce=()=>{const t=or(),e=Ue(l=>l.GUI),r=e.logoImage,n=e.isEnterGame,i=Ss(-1),a=Ss(-1),o=5e3,s=()=>{clearTimeout(a.value),i.value<r.length-1?(i.set(i.value+1),a.set(setTimeout(s,o))):(e!=null&&e.isShowR18Modal&&t(Ye({component:"openR18Modal",visibility:!0})),i.set(-1))};ie.useEffect(()=>{n&&r.length>0&&(i.set(0),a.set(setTimeout(s,o)))},[n,r]);const c=i.value===-1?"":r[i.value];return k.jsxs(k.Fragment,{children:[i.value!==-1&&k.jsx("div",{className:Eh.Logo_Back+" "+(i.value===r.length-1?Eh.animationActive:""),style:{animationDuration:`${o}ms`}},i.value+"wh"),c!==""&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:Eh.Logo_main,onClick:s,style:{backgroundImage:`url("${c}")`,animationDuration:`${o}ms`}},i.value+"bg"),k.jsx("div",{className:Eh.overlay})]})]})},ice=new Map([["true",!0],["false",!1],[!0,!0],[!1,!1]]),ace=t=>{const e=J.getState().GUI,r=J.dispatch;Jc.get(t).then(n=>{var o;let i=n.data;const a=Q0.parseConfig(i);if(Ae.info("获取到游戏信息",a),e){const s={};a.forEach(c=>{var h,d;const{command:l,args:u,options:f}=c;switch(l){case"Title_img":{const p=pr(u.join(""),dr.background);r(VP({asset:"titleBg",value:p})),Zf(p);break}case"Game_Logo":{const p=u.map(v=>pr(v,dr.background));r(joe(p));break}case"Game_cursor":{const p=u.map(v=>pr(v,dr.background));if(p!=null&&p.length){const v=p.map(g=>`url('${g}'), auto`).join(", "),y=document.createElement("style");y.innerHTML=`
                html, body, div, span { cursor: ${v} !important; }
                html:hover, body:hover, div:hover, span:hover { cursor: ${v} !important; }
              `,document.head.appendChild(y)}break}case Rt.Game_start_button:case Rt.Game_achievement_button:case Rt.Game_storyline_button:case Rt.Game_extra_button:case Rt.Game_collection_button:case Rt.Game_continue_button:case Rt.Game_load_button:case Rt.Game_option_button:{const p=((h=f.find(x=>x.key==="hide"))==null?void 0:h.value)||!1,v=((d=f.find(x=>x.key==="style"))==null?void 0:d.value)||"";let y={...w3.gameMenus.Game_achievement_button.args.style};const g=/\{(.*?)\}/,m=v.match(g);if(m){const b=m[1].split(","),_={};b.forEach(S=>{const[E,w]=S.split("=");E&&w&&(_[E.trim()]=isNaN(Number(w.trim()))?w.trim():Number(w.trim()))}),y=_}console.log(33333,y),s[Rt[l]]={content:u[0],args:{hide:p,style:y}};break}case"Title_bgm":{const p=pr(u[0],dr.bgm);r(VP({asset:"titleBgm",value:p}));break}case"Game_name":{j.gameName=u[0],document.title=u[0];break}case"Game_key":{j.gameKey=u[0],dp(),u3(),Kf(0,0);break}case"Game_r18":{(u==null?void 0:u.length)>0&&r(C3(!!ice.get(u[0])));break}}}),r(Uoe(s))}(o=window==null?void 0:window.renderPromise)==null||o.call(window),delete window.renderPromise,Goe()})},oce=(t,e)=>{Ae.warn("正在跳转到"+t+":"+e);const r=J.dispatch;r(Ye({component:"showTitle",visibility:!1})),r(Ye({component:"showMenuPanel",visibility:!1})),r(Ye({component:"isShowLogo",visibility:!1}));const n=document.getElementById("Title_enter_page");n&&(n.style.display="none"),oE(!0);const i=pr(t,dr.scene);setTimeout(()=>{Jn(i).then(async a=>{if(!await j.sceneManager.setCurrentScene(a,"start.txt",i))return;const s=j.sceneManager.sceneData.currentScene.sceneName;j.gameplay.isFast=!0,j.gameplay.isSyncingWithOrigine=!0,_E(e,s)})},16)};function _E(t,e){j.sceneManager.sceneData.currentSentenceId<t&&j.sceneManager.sceneData.currentScene.sceneName===e?(gr(),setTimeout(()=>_E(t,e),100)):(j.gameplay.isSyncingWithOrigine=!1,j.gameplay.isFast=!1)}const sce=()=>{window.JMP=_E};var vc=(t=>(t[t.JUMP=0]="JUMP",t[t.SYNCFC=1]="SYNCFC",t[t.SYNCFE=2]="SYNCFE",t[t.EXE_COMMAND=3]="EXE_COMMAND",t[t.REFETCH_TEMPLATE_FILES=4]="REFETCH_TEMPLATE_FILES",t))(vc||{});const lce=()=>{const t=window.location.hostname,e=window.location.protocol,r=window.location.port;let n="";if(r&&r!=="80"&&r!=="443"&&(n=`:${r}`),e!=="http:"&&e!=="https:")return;let i=`ws://${t}:9999`;e==="https:"&&(i=`wss://${t}${n}/api/webgalsync`),Ae.info("正在启动socket连接位于："+i);const a=new WebSocket(i);a.onopen=()=>{Ae.info("socket已连接"),window.pubsub.publish("isPreviewMode",!0);function o(){const s={event:"message",data:{command:vc.SYNCFC,sceneMsg:{scene:j.sceneManager.sceneData.currentScene.sceneName,sentence:j.sceneManager.sceneData.currentSentenceId},stageSyncMsg:J.getState().stage,message:"sync"}};a.send(JSON.stringify(s)),setTimeout(o,1e3)}o()},a.onmessage=o=>{const s=o.data,l=JSON.parse(s).data;if(l.command===vc.JUMP&&oce(l.sceneMsg.scene,l.sceneMsg.sentence),l.command===vc.EXE_COMMAND){const u=l.message,h=Q0.parse(u,"temp.txt","temp.txt").sentenceList[0];E0(h)}if(l.command===vc.REFETCH_TEMPLATE_FILES){const u=document.getElementById("Title_enter_page");u&&(u.style.display="none"),j.events.styleUpdate.emit()}},a.onerror=o=>{window.pubsub.publish("isPreviewMode",!0),Ae.info("当前没有连接到 Terre 编辑器")}};function uce(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function cce(t){var e=this;return new e(function(r,n){if(!(t&&typeof t.length<"u"))return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(t);if(i.length===0)return r([]);var a=i.length;function o(c,l){if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(f){o(c,f)},function(f){i[c]={status:"rejected",reason:f},--a===0&&r(i)});return}}i[c]={status:"fulfilled",value:l},--a===0&&r(i)}for(var s=0;s<i.length;s++)o(s,i[s])})}function eL(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}eL.prototype=Error.prototype;function fce(t){var e=this;return new e(function(r,n){if(!(t&&typeof t.length<"u"))return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return n();for(var a=[],o=0;o<i.length;o++)try{e.resolve(i[o]).then(r).catch(function(s){a.push(s),a.length===i.length&&n(new eL(a,"All promises were rejected"))})}catch(s){n(s)}})}var hce=setTimeout;function tL(t){return!!(t&&typeof t.length<"u")}function dce(){}function pce(t,e){return function(){t.apply(e,arguments)}}function Qt(t){if(!(this instanceof Qt))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],nL(t,this)}function rL(t,e){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(e);return}t._handled=!0,Qt._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?r_:lf)(e.promise,t._value);return}var n;try{n=r(t._value)}catch(i){lf(e.promise,i);return}r_(e.promise,n)})}function r_(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof Qt){t._state=3,t._value=e,n_(t);return}else if(typeof r=="function"){nL(pce(r,e),t);return}}t._state=1,t._value=e,n_(t)}catch(n){lf(t,n)}}function lf(t,e){t._state=2,t._value=e,n_(t)}function n_(t){t._state===2&&t._deferreds.length===0&&Qt._immediateFn(function(){t._handled||Qt._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)rL(t,t._deferreds[e]);t._deferreds=null}function vce(t,e,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function nL(t,e){var r=!1;try{t(function(n){r||(r=!0,r_(e,n))},function(n){r||(r=!0,lf(e,n))})}catch(n){if(r)return;r=!0,lf(e,n)}}Qt.prototype.catch=function(t){return this.then(null,t)};Qt.prototype.then=function(t,e){var r=new this.constructor(dce);return rL(this,new vce(t,e,r)),r};Qt.prototype.finally=uce;Qt.all=function(t){return new Qt(function(e,r){if(!tL(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(n.length===0)return e([]);var i=n.length;function a(s,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var l=c.then;if(typeof l=="function"){l.call(c,function(u){a(s,u)},r);return}}n[s]=c,--i===0&&e(n)}catch(u){r(u)}}for(var o=0;o<n.length;o++)a(o,n[o])})};Qt.any=fce;Qt.allSettled=cce;Qt.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Qt?t:new Qt(function(e){e(t)})};Qt.reject=function(t){return new Qt(function(e,r){r(t)})};Qt.race=function(t){return new Qt(function(e,r){if(!tL(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)Qt.resolve(t[n]).then(e,r)})};Qt._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){hce(t,0)};Qt._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Qt);Object.assign||(Object.assign=n8);var mce=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var gce=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-gce}}var Vg=Date.now(),hO=["ms","moz","webkit","o"];for(var Gg=0;Gg<hO.length&&!globalThis.requestAnimationFrame;++Gg){var zg=hO[Gg];globalThis.requestAnimationFrame=globalThis[zg+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[zg+"CancelAnimationFrame"]||globalThis[zg+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var e=Date.now(),r=mce+Vg-e;return r<0&&(r=0),Vg=e,globalThis.self.setTimeout(function(){Vg=Date.now(),t(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var sa;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(sa||(sa={}));var Wl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Wl||(Wl={}));var uf;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(uf||(uf={}));var Ce;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Ce||(Ce={}));var Wn;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Wn||(Wn={}));var be;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(be||(be={}));var _o;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(_o||(_o={}));var Le;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Le||(Le={}));var cf;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(cf||(cf={}));var zr;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(zr||(zr={}));var Ii;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ii||(Ii={}));var Tn;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Tn||(Tn={}));var Un;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Un||(Un={}));var oi;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(oi||(oi={}));var ff;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(ff||(ff={}));var Ln;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ln||(Ln={}));var hr;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(hr||(hr={}));var i_;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(i_||(i_={}));var jt;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(jt||(jt={}));var Fi;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Fi||(Fi={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var iL={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Wg=/iPhone/i,dO=/iPod/i,pO=/iPad/i,vO=/\biOS-universal(?:.+)Mac\b/i,Xg=/\bAndroid(?:.+)Mobile\b/i,mO=/Android/i,Ks=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,wh=/Silk/i,ba=/Windows Phone/i,gO=/\bWindows(?:.+)ARM\b/i,yO=/BlackBerry/i,xO=/BB10/i,_O=/Opera Mini/i,bO=/\b(CriOS|Chrome)(?:.+)Mobile/i,SO=/Mobile(?:.+)Firefox\b/i,EO=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function yce(t){return function(e){return e.test(t)}}function xce(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=yce(r),a={apple:{phone:i(Wg)&&!i(ba),ipod:i(dO),tablet:!i(Wg)&&(i(pO)||EO(e))&&!i(ba),universal:i(vO),device:(i(Wg)||i(dO)||i(pO)||i(vO)||EO(e))&&!i(ba)},amazon:{phone:i(Ks),tablet:!i(Ks)&&i(wh),device:i(Ks)||i(wh)},android:{phone:!i(ba)&&i(Ks)||!i(ba)&&i(Xg),tablet:!i(ba)&&!i(Ks)&&!i(Xg)&&(i(wh)||i(mO)),device:!i(ba)&&(i(Ks)||i(wh)||i(Xg)||i(mO))||i(/\bokhttp\b/i)},windows:{phone:i(ba),tablet:i(gO),device:i(ba)||i(gO)},other:{blackberry:i(yO),blackberry10:i(xO),opera:i(_O),firefox:i(SO),chrome:i(bO),device:i(yO)||i(xO)||i(_O)||i(SO)||i(bO)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var ci=xce(globalThis.navigator);function _ce(){return!ci.apple.device}function bce(t){var e=!0;if(ci.tablet||ci.phone){if(ci.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var n=parseInt(r[1],10);n<11&&(e=!1)}}if(ci.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var n=parseInt(r[1],10);n<7&&(e=!1)}}}return e?t:4}var we={ADAPTER:iL,MIPMAP_TEXTURES:Tn.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:jt.NONE,SPRITE_MAX_TEXTURES:bce(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:ff.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Ii.CLAMP,SCALE_MODE:zr.LINEAR,PRECISION_VERTEX:Ln.HIGH,PRECISION_FRAGMENT:ci.apple.device?Ln.HIGH:Ln.MEDIUM,CAN_UPLOAD_SAME_BUFFER:_ce(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},aL={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||c,h),p=r?r+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],d]:c._events[p].push(d):(c._events[p]=d,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],u,f;if(this._eventsCount===0)return l;for(f in u=this._events)e.call(u,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},s.prototype.listeners=function(l){var u=r?r+l:l,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(l){var u=r?r+l:l,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,u,f,h,d,p){var v=r?r+l:l;if(!this._events[v])return!1;var y=this._events[v],g=arguments.length,m,x;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,h),!0;case 5:return y.fn.call(y.context,u,f,h,d),!0;case 6:return y.fn.call(y.context,u,f,h,d,p),!0}for(x=1,m=new Array(g-1);x<g;x++)m[x-1]=arguments[x];y.fn.apply(y.context,m)}else{var b=y.length,_;for(x=0;x<b;x++)switch(y[x].once&&this.removeListener(l,y[x].fn,void 0,!0),g){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,u);break;case 3:y[x].fn.call(y[x].context,u,f);break;case 4:y[x].fn.call(y[x].context,u,f,h);break;default:if(!m)for(_=1,m=new Array(g-1);_<g;_++)m[_-1]=arguments[_];y[x].fn.apply(y[x].context,m)}}return!0},s.prototype.on=function(l,u,f){return a(this,l,u,f,!1)},s.prototype.once=function(l,u,f){return a(this,l,u,f,!0)},s.prototype.removeListener=function(l,u,f,h){var d=r?r+l:l;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var v=0,y=[],g=p.length;v<g;v++)(p[v].fn!==u||h&&!p[v].once||f&&p[v].context!==f)&&y.push(p[v]);y.length?this._events[d]=y.length===1?y[0]:y:o(this,d)}return this},s.prototype.removeAllListeners=function(l){var u;return l?(u=r?r+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(aL);var Sce=aL.exports;const Eu=vn(Sce);var bE={exports:{}};bE.exports=ov;bE.exports.default=ov;function ov(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,a=oL(t,0,i,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,c,l,u,f,h,d;if(n&&(a=Tce(t,e,a,r)),t.length>80*r){s=l=t[0],c=u=t[1];for(var p=r;p<i;p+=r)f=t[p],h=t[p+1],f<s&&(s=f),h<c&&(c=h),f>l&&(l=f),h>u&&(u=h);d=Math.max(l-s,u-c),d=d!==0?32767/d:0}return hf(a,o,r,s,c,d,0),o}function oL(t,e,r,n,i){var a,o;if(i===s_(t,e,r,n)>0)for(a=e;a<r;a+=n)o=wO(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=wO(a,t[a],t[a+1],o);return o&&sv(o,o.next)&&(pf(o),o=o.next),o}function Es(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(sv(r,r.next)||Kt(r.prev,r,r.next)===0)){if(pf(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function hf(t,e,r,n,i,a,o){if(t){!o&&a&&Fce(t,n,i,a);for(var s=t,c,l;t.prev!==t.next;){if(c=t.prev,l=t.next,a?wce(t,n,i,a):Ece(t)){e.push(c.i/r|0),e.push(t.i/r|0),e.push(l.i/r|0),pf(t),t=l.next,s=l.next;continue}if(t=l,t===s){o?o===1?(t=Ace(Es(t),e,r),hf(t,e,r,n,i,a,2)):o===2&&Cce(t,e,r,n,i,a):hf(Es(t),e,r,n,i,a,1);break}}}}function Ece(t){var e=t.prev,r=t,n=t.next;if(Kt(e,r,n)>=0)return!1;for(var i=e.x,a=r.x,o=n.x,s=e.y,c=r.y,l=n.y,u=i<a?i<o?i:o:a<o?a:o,f=s<c?s<l?s:l:c<l?c:l,h=i>a?i>o?i:o:a>o?a:o,d=s>c?s>l?s:l:c>l?c:l,p=n.next;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=f&&p.y<=d&&ml(i,s,a,c,o,l,p.x,p.y)&&Kt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function wce(t,e,r,n){var i=t.prev,a=t,o=t.next;if(Kt(i,a,o)>=0)return!1;for(var s=i.x,c=a.x,l=o.x,u=i.y,f=a.y,h=o.y,d=s<c?s<l?s:l:c<l?c:l,p=u<f?u<h?u:h:f<h?f:h,v=s>c?s>l?s:l:c>l?c:l,y=u>f?u>h?u:h:f>h?f:h,g=a_(d,p,e,r,n),m=a_(v,y,e,r,n),x=t.prevZ,b=t.nextZ;x&&x.z>=g&&b&&b.z<=m;){if(x.x>=d&&x.x<=v&&x.y>=p&&x.y<=y&&x!==i&&x!==o&&ml(s,u,c,f,l,h,x.x,x.y)&&Kt(x.prev,x,x.next)>=0||(x=x.prevZ,b.x>=d&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&ml(s,u,c,f,l,h,b.x,b.y)&&Kt(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;x&&x.z>=g;){if(x.x>=d&&x.x<=v&&x.y>=p&&x.y<=y&&x!==i&&x!==o&&ml(s,u,c,f,l,h,x.x,x.y)&&Kt(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=m;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=y&&b!==i&&b!==o&&ml(s,u,c,f,l,h,b.x,b.y)&&Kt(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Ace(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!sv(i,a)&&sL(i,n,n.next,a)&&df(i,a)&&df(a,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(a.i/r|0),pf(n),pf(n.next),n=t=a),n=n.next}while(n!==t);return Es(n)}function Cce(t,e,r,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Mce(o,s)){var c=lL(o,s);o=Es(o,o.next),c=Es(c,c.next),hf(o,e,r,n,i,a,0),hf(c,e,r,n,i,a,0);return}s=s.next}o=o.next}while(o!==t)}function Tce(t,e,r,n){var i=[],a,o,s,c,l;for(a=0,o=e.length;a<o;a++)s=e[a]*n,c=a<o-1?e[a+1]*n:t.length,l=oL(t,s,c,n,!1),l===l.next&&(l.steiner=!0),i.push(Dce(l));for(i.sort(Pce),a=0;a<i.length;a++)r=Oce(i[a],r);return r}function Pce(t,e){return t.x-e.x}function Oce(t,e){var r=Rce(t,e);if(!r)return e;var n=lL(r,t);return Es(n,n.next),Es(r,r.next)}function Rce(t,e){var r=e,n=t.x,i=t.y,a=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,o=r.x<r.next.x?r:r.next,s===n))return o}r=r.next}while(r!==e);if(!o)return null;var c=o,l=o.x,u=o.y,f=1/0,h;r=o;do n>=r.x&&r.x>=l&&n!==r.x&&ml(i<u?n:a,i,l,u,i<u?a:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),df(r,t)&&(h<f||h===f&&(r.x>o.x||r.x===o.x&&Ice(o,r)))&&(o=r,f=h)),r=r.next;while(r!==c);return o}function Ice(t,e){return Kt(t.prev,t,e.prev)<0&&Kt(e.next,t,t.next)<0}function Fce(t,e,r,n){var i=t;do i.z===0&&(i.z=a_(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,kce(i)}function kce(t){var e,r,n,i,a,o,s,c,l=1;do{for(r=t,t=null,a=null,o=0;r;){for(o++,n=r,s=0,e=0;e<l&&(s++,n=n.nextZ,!!n);e++);for(c=l;s>0||c>0&&n;)s!==0&&(c===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1);return t}function a_(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Dce(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function ml(t,e,r,n,i,a,o,s){return(i-o)*(e-s)>=(t-o)*(a-s)&&(t-o)*(n-s)>=(r-o)*(e-s)&&(r-o)*(a-s)>=(i-o)*(n-s)}function Mce(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Lce(t,e)&&(df(t,e)&&df(e,t)&&Bce(t,e)&&(Kt(t.prev,t,e.prev)||Kt(t,e.prev,e))||sv(t,e)&&Kt(t.prev,t,t.next)>0&&Kt(e.prev,e,e.next)>0)}function Kt(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function sv(t,e){return t.x===e.x&&t.y===e.y}function sL(t,e,r,n){var i=Ch(Kt(t,e,r)),a=Ch(Kt(t,e,n)),o=Ch(Kt(r,n,t)),s=Ch(Kt(r,n,e));return!!(i!==a&&o!==s||i===0&&Ah(t,r,e)||a===0&&Ah(t,n,e)||o===0&&Ah(r,t,n)||s===0&&Ah(r,e,n))}function Ah(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ch(t){return t>0?1:t<0?-1:0}function Lce(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&sL(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function df(t,e){return Kt(t.prev,t,t.next)<0?Kt(t,e,t.next)>=0&&Kt(t,t.prev,e)>=0:Kt(t,e,t.prev)<0||Kt(t,t.next,e)<0}function Bce(t,e){var r=t,n=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function lL(t,e){var r=new o_(t.i,t.x,t.y),n=new o_(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function wO(t,e,r,n){var i=new o_(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function pf(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o_(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}ov.deviation=function(t,e,r,n){var i=e&&e.length,a=i?e[0]*r:t.length,o=Math.abs(s_(t,0,a,r));if(i)for(var s=0,c=e.length;s<c;s++){var l=e[s]*r,u=s<c-1?e[s+1]*r:t.length;o-=Math.abs(s_(t,l,u,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function s_(t,e,r,n){for(var i=0,a=e,o=r-n;a<r;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}ov.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)r.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var Nce=bE.exports;const SE=vn(Nce);var mp={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */mp.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,a=typeof je=="object"&&je;(a.global===a||a.window===a||a.self===a)&&(r=a);var o,s=2147483647,c=36,l=1,u=26,f=38,h=700,d=72,p=128,v="-",y=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=c-l,_=Math.floor,S=String.fromCharCode,E;function w($){throw new RangeError(x[$])}function C($,I){for(var B=$.length,L=[];B--;)L[B]=I($[B]);return L}function A($,I){var B=$.split("@"),L="";B.length>1&&(L=B[0]+"@",$=B[1]),$=$.replace(m,".");var M=$.split("."),X=C(M,I).join(".");return L+X}function P($){for(var I=[],B=0,L=$.length,M,X;B<L;)M=$.charCodeAt(B++),M>=55296&&M<=56319&&B<L?(X=$.charCodeAt(B++),(X&64512)==56320?I.push(((M&1023)<<10)+(X&1023)+65536):(I.push(M),B--)):I.push(M);return I}function T($){return C($,function(I){var B="";return I>65535&&(I-=65536,B+=S(I>>>10&1023|55296),I=56320|I&1023),B+=S(I),B}).join("")}function O($){return $-48<10?$-22:$-65<26?$-65:$-97<26?$-97:c}function R($,I){return $+22+75*($<26)-((I!=0)<<5)}function F($,I,B){var L=0;for($=B?_($/h):$>>1,$+=_($/I);$>b*u>>1;L+=c)$=_($/b);return _(L+(b+1)*$/($+f))}function D($){var I=[],B=$.length,L,M=0,X=p,K=d,ne,te,ce,de,se,fe,oe,he,Pe;for(ne=$.lastIndexOf(v),ne<0&&(ne=0),te=0;te<ne;++te)$.charCodeAt(te)>=128&&w("not-basic"),I.push($.charCodeAt(te));for(ce=ne>0?ne+1:0;ce<B;){for(de=M,se=1,fe=c;ce>=B&&w("invalid-input"),oe=O($.charCodeAt(ce++)),(oe>=c||oe>_((s-M)/se))&&w("overflow"),M+=oe*se,he=fe<=K?l:fe>=K+u?u:fe-K,!(oe<he);fe+=c)Pe=c-he,se>_(s/Pe)&&w("overflow"),se*=Pe;L=I.length+1,K=F(M-de,L,de==0),_(M/L)>s-X&&w("overflow"),X+=_(M/L),M%=L,I.splice(M++,0,X)}return T(I)}function V($){var I,B,L,M,X,K,ne,te,ce,de,se,fe=[],oe,he,Pe,Ie;for($=P($),oe=$.length,I=p,B=0,X=d,K=0;K<oe;++K)se=$[K],se<128&&fe.push(S(se));for(L=M=fe.length,M&&fe.push(v);L<oe;){for(ne=s,K=0;K<oe;++K)se=$[K],se>=I&&se<ne&&(ne=se);for(he=L+1,ne-I>_((s-B)/he)&&w("overflow"),B+=(ne-I)*he,I=ne,K=0;K<oe;++K)if(se=$[K],se<I&&++B>s&&w("overflow"),se==I){for(te=B,ce=c;de=ce<=X?l:ce>=X+u?u:ce-X,!(te<de);ce+=c)Ie=te-de,Pe=c-de,fe.push(S(R(de+Ie%Pe,0))),te=_(Ie/Pe);fe.push(S(R(te,0))),X=F(B,he,L==M),B=0,++L}++B,++I}return fe.join("")}function Y($){return A($,function(I){return y.test(I)?D(I.slice(4).toLowerCase()):I})}function W($){return A($,function(I){return g.test(I)?"xn--"+V(I):I})}if(o={version:"1.4.1",ucs2:{decode:P,encode:T},decode:D,encode:V,toASCII:W,toUnicode:Y},n&&i)if(t.exports==n)i.exports=o;else for(E in o)o.hasOwnProperty(E)&&(n[E]=o[E]);else r.punycode=o})(je)})(mp,mp.exports);var jce=mp.exports,Uce=Error,$ce=EvalError,Vce=RangeError,Gce=ReferenceError,uL=SyntaxError,Jf=TypeError,zce=URIError,Wce=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},AO=typeof Symbol<"u"&&Symbol,Xce=Wce,Hce=function(){return typeof AO!="function"||typeof Symbol!="function"||typeof AO("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Xce()},Hg={__proto__:null,foo:{}},Yce=Object,qce=function(){return{__proto__:Hg}.foo===Hg.foo&&!(Hg instanceof Yce)},Kce="Function.prototype.bind called on incompatible ",Zce=Object.prototype.toString,Qce=Math.max,Jce="[object Function]",CO=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var a=0;a<r.length;a+=1)n[a+e.length]=r[a];return n},efe=function(e,r){for(var n=[],i=r||0,a=0;i<e.length;i+=1,a+=1)n[a]=e[i];return n},tfe=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},rfe=function(e){var r=this;if(typeof r!="function"||Zce.apply(r)!==Jce)throw new TypeError(Kce+r);for(var n=efe(arguments,1),i,a=function(){if(this instanceof i){var u=r.apply(this,CO(n,arguments));return Object(u)===u?u:this}return r.apply(e,CO(n,arguments))},o=Qce(0,r.length-n.length),s=[],c=0;c<o;c++)s[c]="$"+c;if(i=Function("binder","return function ("+tfe(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var l=function(){};l.prototype=r.prototype,i.prototype=new l,l.prototype=null}return i},nfe=rfe,EE=Function.prototype.bind||nfe,ife=Function.prototype.call,afe=Object.prototype.hasOwnProperty,ofe=EE,sfe=ofe.call(ife,afe),st,lfe=Uce,ufe=$ce,cfe=Vce,ffe=Gce,Xl=uL,Il=Jf,hfe=zce,cL=Function,Yg=function(t){try{return cL('"use strict"; return ('+t+").constructor;")()}catch{}},hs=Object.getOwnPropertyDescriptor;if(hs)try{hs({},"")}catch{hs=null}var qg=function(){throw new Il},dfe=hs?function(){try{return arguments.callee,qg}catch{try{return hs(arguments,"callee").get}catch{return qg}}}():qg,Zs=Hce(),pfe=qce(),jr=Object.getPrototypeOf||(pfe?function(t){return t.__proto__}:null),ol={},vfe=typeof Uint8Array>"u"||!jr?st:jr(Uint8Array),ds={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?st:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?st:ArrayBuffer,"%ArrayIteratorPrototype%":Zs&&jr?jr([][Symbol.iterator]()):st,"%AsyncFromSyncIteratorPrototype%":st,"%AsyncFunction%":ol,"%AsyncGenerator%":ol,"%AsyncGeneratorFunction%":ol,"%AsyncIteratorPrototype%":ol,"%Atomics%":typeof Atomics>"u"?st:Atomics,"%BigInt%":typeof BigInt>"u"?st:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?st:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?st:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?st:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":lfe,"%eval%":eval,"%EvalError%":ufe,"%Float32Array%":typeof Float32Array>"u"?st:Float32Array,"%Float64Array%":typeof Float64Array>"u"?st:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?st:FinalizationRegistry,"%Function%":cL,"%GeneratorFunction%":ol,"%Int8Array%":typeof Int8Array>"u"?st:Int8Array,"%Int16Array%":typeof Int16Array>"u"?st:Int16Array,"%Int32Array%":typeof Int32Array>"u"?st:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Zs&&jr?jr(jr([][Symbol.iterator]())):st,"%JSON%":typeof JSON=="object"?JSON:st,"%Map%":typeof Map>"u"?st:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Zs||!jr?st:jr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?st:Promise,"%Proxy%":typeof Proxy>"u"?st:Proxy,"%RangeError%":cfe,"%ReferenceError%":ffe,"%Reflect%":typeof Reflect>"u"?st:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?st:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Zs||!jr?st:jr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?st:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Zs&&jr?jr(""[Symbol.iterator]()):st,"%Symbol%":Zs?Symbol:st,"%SyntaxError%":Xl,"%ThrowTypeError%":dfe,"%TypedArray%":vfe,"%TypeError%":Il,"%Uint8Array%":typeof Uint8Array>"u"?st:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?st:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?st:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?st:Uint32Array,"%URIError%":hfe,"%WeakMap%":typeof WeakMap>"u"?st:WeakMap,"%WeakRef%":typeof WeakRef>"u"?st:WeakRef,"%WeakSet%":typeof WeakSet>"u"?st:WeakSet};if(jr)try{null.error}catch(t){var mfe=jr(jr(t));ds["%Error.prototype%"]=mfe}var gfe=function t(e){var r;if(e==="%AsyncFunction%")r=Yg("async function () {}");else if(e==="%GeneratorFunction%")r=Yg("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Yg("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&jr&&(r=jr(i.prototype))}return ds[e]=r,r},TO={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},eh=EE,gp=sfe,yfe=eh.call(Function.call,Array.prototype.concat),xfe=eh.call(Function.apply,Array.prototype.splice),PO=eh.call(Function.call,String.prototype.replace),yp=eh.call(Function.call,String.prototype.slice),_fe=eh.call(Function.call,RegExp.prototype.exec),bfe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Sfe=/\\(\\)?/g,Efe=function(e){var r=yp(e,0,1),n=yp(e,-1);if(r==="%"&&n!=="%")throw new Xl("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Xl("invalid intrinsic syntax, expected opening `%`");var i=[];return PO(e,bfe,function(a,o,s,c){i[i.length]=s?PO(c,Sfe,"$1"):o||a}),i},wfe=function(e,r){var n=e,i;if(gp(TO,n)&&(i=TO[n],n="%"+i[0]+"%"),gp(ds,n)){var a=ds[n];if(a===ol&&(a=gfe(n)),typeof a>"u"&&!r)throw new Il("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new Xl("intrinsic "+e+" does not exist!")},wu=function(e,r){if(typeof e!="string"||e.length===0)throw new Il("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Il('"allowMissing" argument must be a boolean');if(_fe(/^%?[^%]*%?$/,e)===null)throw new Xl("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Efe(e),i=n.length>0?n[0]:"",a=wfe("%"+i+"%",r),o=a.name,s=a.value,c=!1,l=a.alias;l&&(i=l[0],xfe(n,yfe([0,1],l)));for(var u=1,f=!0;u<n.length;u+=1){var h=n[u],d=yp(h,0,1),p=yp(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Xl("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,o="%"+i+"%",gp(ds,o))s=ds[o];else if(s!=null){if(!(h in s)){if(!r)throw new Il("base intrinsic for "+e+" exists, but the property is not available.");return}if(hs&&u+1>=n.length){var v=hs(s,h);f=!!v,f&&"get"in v&&!("originalValue"in v.get)?s=v.get:s=s[h]}else f=gp(s,h),s=s[h];f&&!c&&(ds[o]=s)}}return s},fL={exports:{}},Kg,OO;function wE(){if(OO)return Kg;OO=1;var t=wu,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Kg=e,Kg}var Afe=wu,wd=Afe("%Object.getOwnPropertyDescriptor%",!0);if(wd)try{wd([],"length")}catch{wd=null}var hL=wd,RO=wE(),Cfe=uL,Qs=Jf,IO=hL,Tfe=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Qs("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Qs("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Qs("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Qs("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Qs("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Qs("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,c=!!IO&&IO(e,r);if(RO)RO(e,r,{configurable:o===null&&c?c.configurable:!o,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:a===null&&c?c.writable:!a});else if(s||!i&&!a&&!o)e[r]=n;else throw new Cfe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},l_=wE(),dL=function(){return!!l_};dL.hasArrayLengthDefineBug=function(){if(!l_)return null;try{return l_([],"length",{value:1}).length!==1}catch{return!0}};var Pfe=dL,Ofe=wu,FO=Tfe,Rfe=Pfe(),kO=hL,DO=Jf,Ife=Ofe("%Math.floor%"),Ffe=function(e,r){if(typeof e!="function")throw new DO("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Ife(r)!==r)throw new DO("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in e&&kO){var o=kO(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(a=!1)}return(i||a||!n)&&(Rfe?FO(e,"length",r,!0,!0):FO(e,"length",r)),e};(function(t){var e=EE,r=wu,n=Ffe,i=Jf,a=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(o,a),c=wE(),l=r("%Math.max%");t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var d=s(e,o,arguments);return n(d,1+l(0,h.length-(arguments.length-1)),!0)};var u=function(){return s(e,a,arguments)};c?c(t.exports,"apply",{value:u}):t.exports.apply=u})(fL);var kfe=fL.exports,pL=wu,vL=kfe,Dfe=vL(pL("String.prototype.indexOf")),Mfe=function(e,r){var n=pL(e,!!r);return typeof n=="function"&&Dfe(e,".prototype.")>-1?vL(n):n},AE=typeof Map=="function"&&Map.prototype,Zg=Object.getOwnPropertyDescriptor&&AE?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,xp=AE&&Zg&&typeof Zg.get=="function"?Zg.get:null,MO=AE&&Map.prototype.forEach,CE=typeof Set=="function"&&Set.prototype,Qg=Object.getOwnPropertyDescriptor&&CE?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,_p=CE&&Qg&&typeof Qg.get=="function"?Qg.get:null,LO=CE&&Set.prototype.forEach,Lfe=typeof WeakMap=="function"&&WeakMap.prototype,kc=Lfe?WeakMap.prototype.has:null,Bfe=typeof WeakSet=="function"&&WeakSet.prototype,Dc=Bfe?WeakSet.prototype.has:null,Nfe=typeof WeakRef=="function"&&WeakRef.prototype,BO=Nfe?WeakRef.prototype.deref:null,jfe=Boolean.prototype.valueOf,Ufe=Object.prototype.toString,$fe=Function.prototype.toString,Vfe=String.prototype.match,TE=String.prototype.slice,io=String.prototype.replace,Gfe=String.prototype.toUpperCase,NO=String.prototype.toLowerCase,mL=RegExp.prototype.test,jO=Array.prototype.concat,qi=Array.prototype.join,zfe=Array.prototype.slice,UO=Math.floor,u_=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Jg=Object.getOwnPropertySymbols,c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Hl||"symbol")?Symbol.toStringTag:null,gL=Object.prototype.propertyIsEnumerable,$O=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function VO(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||mL.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-UO(-t):UO(t);if(n!==t){var i=String(n),a=TE.call(e,i.length+1);return io.call(i,r,"$&_")+"."+io.call(io.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return io.call(e,r,"$&_")}var f_=y3,GO=f_.custom,zO=xL(GO)?GO:null,Wfe=function t(e,r,n,i){var a=r||{};if(qa(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(qa(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=qa(a,"customInspect")?a.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(qa(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(qa(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=a.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return bL(e,a);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return s?VO(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return s?VO(e,l):l}var u=typeof a.depth>"u"?5:a.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return h_(e)?"[Array]":"[Object]";var f=uhe(a,n);if(typeof i>"u")i=[];else if(_L(i,e)>=0)return"[Circular]";function h(O,R,F){if(R&&(i=zfe.call(i),i.push(R)),F){var D={depth:a.depth};return qa(a,"quoteStyle")&&(D.quoteStyle=a.quoteStyle),t(O,D,n+1,i)}return t(O,a,n+1,i)}if(typeof e=="function"&&!WO(e)){var d=ehe(e),p=Th(e,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+qi.call(p,", ")+" }":"")}if(xL(e)){var v=Hl?io.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):c_.call(e);return typeof e=="object"&&!Hl?qu(v):v}if(ohe(e)){for(var y="<"+NO.call(String(e.nodeName)),g=e.attributes||[],m=0;m<g.length;m++)y+=" "+g[m].name+"="+yL(Xfe(g[m].value),"double",a);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+NO.call(String(e.nodeName))+">",y}if(h_(e)){if(e.length===0)return"[]";var x=Th(e,h);return f&&!lhe(x)?"["+d_(x,f)+"]":"[ "+qi.call(x,", ")+" ]"}if(Yfe(e)){var b=Th(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!gL.call(e,"cause")?"{ ["+String(e)+"] "+qi.call(jO.call("[cause]: "+h(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+qi.call(b,", ")+" }"}if(typeof e=="object"&&o){if(zO&&typeof e[zO]=="function"&&f_)return f_(e,{depth:u-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(the(e)){var _=[];return MO&&MO.call(e,function(O,R){_.push(h(R,e,!0)+" => "+h(O,e))}),XO("Map",xp.call(e),_,f)}if(ihe(e)){var S=[];return LO&&LO.call(e,function(O){S.push(h(O,e))}),XO("Set",_p.call(e),S,f)}if(rhe(e))return ey("WeakMap");if(ahe(e))return ey("WeakSet");if(nhe(e))return ey("WeakRef");if(Kfe(e))return qu(h(Number(e)));if(Qfe(e))return qu(h(u_.call(e)));if(Zfe(e))return qu(jfe.call(e));if(qfe(e))return qu(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===je)return"{ [object globalThis] }";if(!Hfe(e)&&!WO(e)){var E=Th(e,h),w=$O?$O(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",A=!w&&pn&&Object(e)===e&&pn in e?TE.call(No(e),8,-1):C?"Object":"",P=w||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",T=P+(A||C?"["+qi.call(jO.call([],A||[],C||[]),": ")+"] ":"");return E.length===0?T+"{}":f?T+"{"+d_(E,f)+"}":T+"{ "+qi.call(E,", ")+" }"}return String(e)};function yL(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Xfe(t){return io.call(String(t),/"/g,"&quot;")}function h_(t){return No(t)==="[object Array]"&&(!pn||!(typeof t=="object"&&pn in t))}function Hfe(t){return No(t)==="[object Date]"&&(!pn||!(typeof t=="object"&&pn in t))}function WO(t){return No(t)==="[object RegExp]"&&(!pn||!(typeof t=="object"&&pn in t))}function Yfe(t){return No(t)==="[object Error]"&&(!pn||!(typeof t=="object"&&pn in t))}function qfe(t){return No(t)==="[object String]"&&(!pn||!(typeof t=="object"&&pn in t))}function Kfe(t){return No(t)==="[object Number]"&&(!pn||!(typeof t=="object"&&pn in t))}function Zfe(t){return No(t)==="[object Boolean]"&&(!pn||!(typeof t=="object"&&pn in t))}function xL(t){if(Hl)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!c_)return!1;try{return c_.call(t),!0}catch{}return!1}function Qfe(t){if(!t||typeof t!="object"||!u_)return!1;try{return u_.call(t),!0}catch{}return!1}var Jfe=Object.prototype.hasOwnProperty||function(t){return t in this};function qa(t,e){return Jfe.call(t,e)}function No(t){return Ufe.call(t)}function ehe(t){if(t.name)return t.name;var e=Vfe.call($fe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function _L(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function the(t){if(!xp||!t||typeof t!="object")return!1;try{xp.call(t);try{_p.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function rhe(t){if(!kc||!t||typeof t!="object")return!1;try{kc.call(t,kc);try{Dc.call(t,Dc)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function nhe(t){if(!BO||!t||typeof t!="object")return!1;try{return BO.call(t),!0}catch{}return!1}function ihe(t){if(!_p||!t||typeof t!="object")return!1;try{_p.call(t);try{xp.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function ahe(t){if(!Dc||!t||typeof t!="object")return!1;try{Dc.call(t,Dc);try{kc.call(t,kc)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function ohe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function bL(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return bL(TE.call(t,0,e.maxStringLength),e)+n}var i=io.call(io.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,she);return yL(i,"single",e)}function she(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Gfe.call(e.toString(16))}function qu(t){return"Object("+t+")"}function ey(t){return t+" { ? }"}function XO(t,e,r,n){var i=n?d_(r,n):qi.call(r,", ");return t+" ("+e+") {"+i+"}"}function lhe(t){for(var e=0;e<t.length;e++)if(_L(t[e],`
`)>=0)return!1;return!0}function uhe(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=qi.call(Array(t.indent+1)," ");else return null;return{base:r,prev:qi.call(Array(e+1),r)}}function d_(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+qi.call(t,","+r)+`
`+e.prev}function Th(t,e){var r=h_(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=qa(t,i)?e(t[i],t):""}var a=typeof Jg=="function"?Jg(t):[],o;if(Hl){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in t)qa(t,c)&&(r&&String(Number(c))===c&&c<t.length||Hl&&o["$"+c]instanceof Symbol||(mL.call(/[^\w$]/,c)?n.push(e(c,t)+": "+e(t[c],t)):n.push(c+": "+e(t[c],t))));if(typeof Jg=="function")for(var l=0;l<a.length;l++)gL.call(t,a[l])&&n.push("["+e(a[l])+"]: "+e(t[a[l]],t));return n}var SL=wu,Au=Mfe,che=Wfe,fhe=Jf,Ph=SL("%WeakMap%",!0),Oh=SL("%Map%",!0),hhe=Au("WeakMap.prototype.get",!0),dhe=Au("WeakMap.prototype.set",!0),phe=Au("WeakMap.prototype.has",!0),vhe=Au("Map.prototype.get",!0),mhe=Au("Map.prototype.set",!0),ghe=Au("Map.prototype.has",!0),PE=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},yhe=function(t,e){var r=PE(t,e);return r&&r.value},xhe=function(t,e,r){var n=PE(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},_he=function(t,e){return!!PE(t,e)},bhe=function(){var e,r,n,i={assert:function(a){if(!i.has(a))throw new fhe("Side channel does not contain "+che(a))},get:function(a){if(Ph&&a&&(typeof a=="object"||typeof a=="function")){if(e)return hhe(e,a)}else if(Oh){if(r)return vhe(r,a)}else if(n)return yhe(n,a)},has:function(a){if(Ph&&a&&(typeof a=="object"||typeof a=="function")){if(e)return phe(e,a)}else if(Oh){if(r)return ghe(r,a)}else if(n)return _he(n,a);return!1},set:function(a,o){Ph&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new Ph),dhe(e,a,o)):Oh?(r||(r=new Oh),mhe(r,a,o)):(n||(n={key:{},next:null}),xhe(n,a,o))}};return i},She=String.prototype.replace,Ehe=/%20/g,ty={RFC1738:"RFC1738",RFC3986:"RFC3986"},OE={default:ty.RFC3986,formatters:{RFC1738:function(t){return She.call(t,Ehe,"+")},RFC3986:function(t){return String(t)}},RFC1738:ty.RFC1738,RFC3986:ty.RFC3986},whe=OE,ry=Object.prototype.hasOwnProperty,Jo=Array.isArray,Gi=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Ahe=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Jo(n)){for(var i=[],a=0;a<n.length;++a)typeof n[a]<"u"&&i.push(n[a]);r.obj[r.prop]=i}}},EL=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Che=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Jo(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!ry.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return Jo(e)&&!Jo(r)&&(i=EL(e,n)),Jo(e)&&Jo(r)?(r.forEach(function(a,o){if(ry.call(e,o)){var s=e[o];s&&typeof s=="object"&&a&&typeof a=="object"?e[o]=t(s,a,n):e.push(a)}else e[o]=a}),e):Object.keys(r).reduce(function(a,o){var s=r[o];return ry.call(a,o)?a[o]=t(a[o],s,n):a[o]=s,a},i)},The=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},Phe=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Ohe=function(e,r,n,i,a){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var s="",c=0;c<o.length;++c){var l=o.charCodeAt(c);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||a===whe.RFC1738&&(l===40||l===41)){s+=o.charAt(c);continue}if(l<128){s=s+Gi[l];continue}if(l<2048){s=s+(Gi[192|l>>6]+Gi[128|l&63]);continue}if(l<55296||l>=57344){s=s+(Gi[224|l>>12]+Gi[128|l>>6&63]+Gi[128|l&63]);continue}c+=1,l=65536+((l&1023)<<10|o.charCodeAt(c)&1023),s+=Gi[240|l>>18]+Gi[128|l>>12&63]+Gi[128|l>>6&63]+Gi[128|l&63]}return s},Rhe=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var a=r[i],o=a.obj[a.prop],s=Object.keys(o),c=0;c<s.length;++c){var l=s[c],u=o[l];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:o,prop:l}),n.push(u))}return Ahe(r),e},Ihe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Fhe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},khe=function(e,r){return[].concat(e,r)},Dhe=function(e,r){if(Jo(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},wL={arrayToObject:EL,assign:The,combine:khe,compact:Rhe,decode:Phe,encode:Ohe,isBuffer:Fhe,isRegExp:Ihe,maybeMap:Dhe,merge:Che},AL=bhe,Ad=wL,Mc=OE,Mhe=Object.prototype.hasOwnProperty,CL={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Xi=Array.isArray,Lhe=Array.prototype.push,TL=function(t,e){Lhe.apply(t,Xi(e)?e:[e])},Bhe=Date.prototype.toISOString,HO=Mc.default,Cr={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ad.encode,encodeValuesOnly:!1,format:HO,formatter:Mc.formatters[HO],indices:!1,serializeDate:function(e){return Bhe.call(e)},skipNulls:!1,strictNullHandling:!1},Nhe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ny={},jhe=function t(e,r,n,i,a,o,s,c,l,u,f,h,d,p,v,y,g,m){for(var x=e,b=m,_=0,S=!1;(b=b.get(ny))!==void 0&&!S;){var E=b.get(e);if(_+=1,typeof E<"u"){if(E===_)throw new RangeError("Cyclic object value");S=!0}typeof b.get(ny)>"u"&&(_=0)}if(typeof u=="function"?x=u(r,x):x instanceof Date?x=d(x):n==="comma"&&Xi(x)&&(x=Ad.maybeMap(x,function($){return $ instanceof Date?d($):$})),x===null){if(o)return l&&!y?l(r,Cr.encoder,g,"key",p):r;x=""}if(Nhe(x)||Ad.isBuffer(x)){if(l){var w=y?r:l(r,Cr.encoder,g,"key",p);return[v(w)+"="+v(l(x,Cr.encoder,g,"value",p))]}return[v(r)+"="+v(String(x))]}var C=[];if(typeof x>"u")return C;var A;if(n==="comma"&&Xi(x))y&&l&&(x=Ad.maybeMap(x,l)),A=[{value:x.length>0?x.join(",")||null:void 0}];else if(Xi(u))A=u;else{var P=Object.keys(x);A=f?P.sort(f):P}var T=c?r.replace(/\./g,"%2E"):r,O=i&&Xi(x)&&x.length===1?T+"[]":T;if(a&&Xi(x)&&x.length===0)return O+"[]";for(var R=0;R<A.length;++R){var F=A[R],D=typeof F=="object"&&typeof F.value<"u"?F.value:x[F];if(!(s&&D===null)){var V=h&&c?F.replace(/\./g,"%2E"):F,Y=Xi(x)?typeof n=="function"?n(O,V):O:O+(h?"."+V:"["+V+"]");m.set(e,_);var W=AL();W.set(ny,m),TL(C,t(D,Y,n,i,a,o,s,c,n==="comma"&&y&&Xi(x)?null:l,u,f,h,d,p,v,y,g,W))}}return C},Uhe=function(e){if(!e)return Cr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Cr.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Mc.default;if(typeof e.format<"u"){if(!Mhe.call(Mc.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Mc.formatters[n],a=Cr.filter;(typeof e.filter=="function"||Xi(e.filter))&&(a=e.filter);var o;if(e.arrayFormat in CL?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Cr.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Cr.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Cr.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Cr.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Cr.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Cr.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Cr.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Cr.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Cr.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Cr.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Cr.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Cr.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Cr.strictNullHandling}},$he=function(t,e){var r=t,n=Uhe(e),i,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):Xi(n.filter)&&(a=n.filter,i=a);var o=[];if(typeof r!="object"||r===null)return"";var s=CL[n.arrayFormat],c=s==="comma"&&n.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var l=AL(),u=0;u<i.length;++u){var f=i[u];n.skipNulls&&r[f]===null||TL(o,jhe(r[f],f,s,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var h=o.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),h.length>0?d+h:""},Yl=wL,p_=Object.prototype.hasOwnProperty,Vhe=Array.isArray,fr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Yl.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Ghe=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},PL=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},zhe="utf8=%26%2310003%3B",Whe="utf8=%E2%9C%93",Xhe=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,a),s=-1,c,l=r.charset;if(r.charsetSentinel)for(c=0;c<o.length;++c)o[c].indexOf("utf8=")===0&&(o[c]===Whe?l="utf-8":o[c]===zhe&&(l="iso-8859-1"),s=c,c=o.length);for(c=0;c<o.length;++c)if(c!==s){var u=o[c],f=u.indexOf("]="),h=f===-1?u.indexOf("="):f+1,d,p;h===-1?(d=r.decoder(u,fr.decoder,l,"key"),p=r.strictNullHandling?null:""):(d=r.decoder(u.slice(0,h),fr.decoder,l,"key"),p=Yl.maybeMap(PL(u.slice(h+1),r),function(y){return r.decoder(y,fr.decoder,l,"value")})),p&&r.interpretNumericEntities&&l==="iso-8859-1"&&(p=Ghe(p)),u.indexOf("[]=")>-1&&(p=Vhe(p)?[p]:p);var v=p_.call(n,d);v&&r.duplicates==="combine"?n[d]=Yl.combine(n[d],p):(!v||r.duplicates==="last")&&(n[d]=p)}return n},Hhe=function(t,e,r,n){for(var i=n?e:PL(e,r),a=t.length-1;a>=0;--a){var o,s=t[a];if(s==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=r.plainObjects?Object.create(null):{};var c=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,l=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(l,10);!r.parseArrays&&l===""?o={0:i}:!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},Yhe=function(e,r,n,i){if(e){var a=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,c=n.depth>0&&o.exec(a),l=c?a.slice(0,c.index):a,u=[];if(l){if(!n.plainObjects&&p_.call(Object.prototype,l)&&!n.allowPrototypes)return;u.push(l)}for(var f=0;n.depth>0&&(c=s.exec(a))!==null&&f<n.depth;){if(f+=1,!n.plainObjects&&p_.call(Object.prototype,c[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(c[1])}return c&&u.push("["+a.slice(c.index)+"]"),Hhe(u,r,n,i)}},qhe=function(e){if(!e)return fr;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?fr.charset:e.charset,n=typeof e.duplicates>"u"?fr.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:fr.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:fr.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:fr.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:fr.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:fr.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:fr.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:fr.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:fr.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:fr.decoder,delimiter:typeof e.delimiter=="string"||Yl.isRegExp(e.delimiter)?e.delimiter:fr.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:fr.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:fr.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:fr.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:fr.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:fr.strictNullHandling}},Khe=function(t,e){var r=qhe(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Xhe(t,r):t,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],c=Yhe(s,n[s],r,typeof t=="string");i=Yl.merge(i,c,r)}return r.allowSparse===!0?i:Yl.compact(i)},Zhe=$he,Qhe=Khe,Jhe=OE,ede={formats:Jhe,parse:Qhe,stringify:Zhe},tde=jce;function ki(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var rde=/^([a-z0-9.+-]+:)/i,nde=/:[0-9]*$/,ide=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ade=["<",">",'"',"`"," ","\r",`
`,"	"],ode=["{","}","|","\\","^","`"].concat(ade),v_=["'"].concat(ode),YO=["%","/","?",";","#"].concat(v_),qO=["/","?","#"],sde=255,KO=/^[+a-z0-9A-Z_-]{0,63}$/,lde=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ude={javascript:!0,"javascript:":!0},m_={javascript:!0,"javascript:":!0},Fl={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g_=ede;function lv(t,e,r){if(t&&typeof t=="object"&&t instanceof ki)return t;var n=new ki;return n.parse(t,e,r),n}ki.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",a=t.split(i),o=/\\/g;a[0]=a[0].replace(o,"/"),t=a.join(i);var s=t;if(s=s.trim(),!r&&t.split("#").length===1){var c=ide.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=g_.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=rde.exec(s);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@/]+@[^@/]+/)){var f=s.substr(0,2)==="//";f&&!(l&&m_[l])&&(s=s.substr(2),this.slashes=!0)}if(!m_[l]&&(f||l&&!Fl[l])){for(var h=-1,d=0;d<qO.length;d++){var p=s.indexOf(qO[d]);p!==-1&&(h===-1||p<h)&&(h=p)}var v,y;h===-1?y=s.lastIndexOf("@"):y=s.lastIndexOf("@",h),y!==-1&&(v=s.slice(0,y),s=s.slice(y+1),this.auth=decodeURIComponent(v)),h=-1;for(var d=0;d<YO.length;d++){var p=s.indexOf(YO[d]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=s.length),this.host=s.slice(0,h),s=s.slice(h),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var m=this.hostname.split(/\./),d=0,x=m.length;d<x;d++){var b=m[d];if(b&&!b.match(KO)){for(var _="",S=0,E=b.length;S<E;S++)b.charCodeAt(S)>127?_+="x":_+=b[S];if(!_.match(KO)){var w=m.slice(0,d),C=m.slice(d+1),A=b.match(lde);A&&(w.push(A[1]),C.unshift(A[2])),C.length&&(s="/"+C.join(".")+s),this.hostname=w.join(".");break}}}this.hostname.length>sde?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=tde.toASCII(this.hostname));var P=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+P,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!ude[u])for(var d=0,x=v_.length;d<x;d++){var O=v_[d];if(s.indexOf(O)!==-1){var R=encodeURIComponent(O);R===O&&(R=escape(O)),s=s.split(O).join(R)}}var F=s.indexOf("#");F!==-1&&(this.hash=s.substr(F),s=s.slice(0,F));var D=s.indexOf("?");if(D!==-1?(this.search=s.substr(D),this.query=s.substr(D+1),e&&(this.query=g_.parse(this.query)),s=s.slice(0,D)):e&&(this.search="",this.query={}),s&&(this.pathname=s),Fl[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this};function cde(t){return typeof t=="string"&&(t=lv(t)),t instanceof ki?t.format():ki.prototype.format.call(t)}ki.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(a=g_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||a&&"?"+a||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Fl[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),o=o.replace("#","%23"),e+i+r+o+n};function fde(t,e){return lv(t,!1,!0).resolve(e)}ki.prototype.resolve=function(t){return this.resolveObject(lv(t,!1,!0)).format()};ki.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new ki;e.parse(t,!1,!0),t=e}for(var r=new ki,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),s=0;s<o.length;s++){var c=o[s];c!=="protocol"&&(r[c]=t[c])}return Fl[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Fl[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var f=l[u];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!m_[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),r.pathname=x.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var h=r.pathname||"",d=r.search||"";r.path=h+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",v=t.host||t.pathname&&t.pathname.charAt(0)==="/",y=v||p||r.host&&t.pathname,g=y,m=r.pathname&&r.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],b=r.protocol&&!Fl[r.protocol];if(b&&(r.hostname="",r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),y=y&&(x[0]===""||m[0]==="")),v)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,m=x;else if(x.length)m||(m=[]),m.pop(),m=m.concat(x),r.search=t.search,r.query=t.query;else if(t.search!=null){if(b){r.host=m.shift(),r.hostname=r.host;var _=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;_&&(r.auth=_.shift(),r.hostname=_.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=m.slice(-1)[0],E=(r.host||t.host||m.length>1)&&(S==="."||S==="..")||S==="",w=0,C=m.length;C>=0;C--)S=m[C],S==="."?m.splice(C,1):S===".."?(m.splice(C,1),w++):w&&(m.splice(C,1),w--);if(!y&&!g)for(;w--;w)m.unshift("..");y&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),E&&m.join("/").substr(-1)!=="/"&&m.push("");var A=m[0]===""||m[0]&&m[0].charAt(0)==="/";if(b){r.hostname=A?"":m.length?m.shift():"",r.host=r.hostname;var _=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;_&&(r.auth=_.shift(),r.hostname=_.shift(),r.host=r.hostname)}return y=y||r.host&&m.length,y&&!A&&m.unshift(""),m.length>0?r.pathname=m.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};ki.prototype.parseHost=function(){var t=this.host,e=nde.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var hde=lv,dde=fde,pde=cde;/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var os={parse:hde,format:pde,resolve:dde};function yi(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function ZO(t){var e=t.split("?")[0];return e.split("#")[0]}function vde(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mde(t,e,r){return t.replace(new RegExp(vde(e),"g"),r)}function gde(t,e){for(var r="",n=0,i=-1,a=0,o,s=0;s<=t.length;++s){if(s<t.length)o=t.charCodeAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=s,a=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=s,a=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,s):r=t.slice(i+1,s),n=s-i-1;i=s,a=0}else o===46&&a!==-1?++a:a=-1}return r}var OL={toPosix:function(t){return mde(t,"\\","/")},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){yi(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){var a=(r==null?void 0:r[0])||(n==null?void 0:n[0])||(i==null?void 0:i[0]);e=a,t=t.slice(a.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var n=ZO(this.toPosix(e??we.ADAPTER.getBaseUrl())),i=ZO(this.toPosix(r??this.rootname(n)));if(yi(t),t=this.toPosix(t),t.startsWith("/"))return OL.join(i,t.slice(1));var a=this.isAbsolute(t)?t:this.join(n,t);return a},normalize:function(t){if(t=this.toPosix(t),yi(t),t.length===0)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var n=t.endsWith("/");return t=gde(t,!1),t.length>0&&n&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return yi(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join:function(){for(var t=arguments,e,r=[],n=0;n<arguments.length;n++)r[n]=t[n];if(r.length===0)return".";for(var i,a=0;a<r.length;++a){var o=r[a];if(yi(o),o.length>0)if(i===void 0)i=o;else{var s=(e=r[a-1])!==null&&e!==void 0?e:"";this.extname(s)?i+="/../"+o:i+="/"+o}}return i===void 0?".":this.normalize(i)},dirname:function(t){if(yi(t),t.length===0)return".";t=this.toPosix(t);var e=t.charCodeAt(0),r=e===47,n=-1,i=!0,a=this.getProtocol(t),o=t;t=t.slice(a.length);for(var s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),e===47){if(!i){n=s;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?a+t:a:r&&n===1?"//":a+t.slice(0,n)},rootname:function(t){yi(t),t=this.toPosix(t);var e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename:function(t,e){yi(t),e&&yi(e),t=this.toPosix(t);var r=0,n=-1,i=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var o=e.length-1,s=-1;for(a=t.length-1;a>=0;--a){var c=t.charCodeAt(a);if(c===47){if(!i){r=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===e.charCodeAt(o)?--o===-1&&(n=a):(o=-1,n=s))}return r===n?n=s:n===-1&&(n=t.length),t.slice(r,n)}for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!i){r=a+1;break}}else n===-1&&(i=!1,n=a+1);return n===-1?"":t.slice(r,n)},extname:function(t){yi(t),t=this.toPosix(t);for(var e=-1,r=0,n=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(s===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),s===46?e===-1?e=o:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||n===-1||a===0||a===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse:function(t){yi(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=this.toPosix(t);var r=t.charCodeAt(0),n=this.isAbsolute(t),i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;for(var a=-1,o=0,s=-1,c=!0,l=t.length-1,u=0;l>=i;--l){if(r=t.charCodeAt(l),r===47){if(!c){o=l+1;break}continue}s===-1&&(c=!1,s=l+1),r===46?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}return a===-1||s===-1||u===0||u===1&&a===s-1&&a===o+1?s!==-1&&(o===0&&n?e.base=e.name=t.slice(1,s):e.base=e.name=t.slice(o,s)):(o===0&&n?(e.name=t.slice(1,a),e.base=t.slice(1,s)):(e.name=t.slice(o,a),e.base=t.slice(o,s)),e.ext=t.slice(a,s)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};we.RETINA_PREFIX=/@([0-9\.]+)x/;we.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var y_=!1,QO="6.5.10";function yde(){y_=!0}function RL(t){var e;if(!y_){if(we.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+QO+" - ✰ "+t+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+QO+" - "+t+" - http://www.pixijs.com/");y_=!0}}var iy;function IL(){return typeof iy>"u"&&(iy=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:we.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!we.ADAPTER.getWebGLRenderingContext())return!1;var r=we.ADAPTER.createCanvas(),n=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),i=!!(n&&n.getContextAttributes().stencil);if(n){var a=n.getExtension("WEBGL_lose_context");a&&a.loseContext()}return n=null,i}catch{return!1}}()),iy}var xde="#f0f8ff",_de="#faebd7",bde="#00ffff",Sde="#7fffd4",Ede="#f0ffff",wde="#f5f5dc",Ade="#ffe4c4",Cde="#000000",Tde="#ffebcd",Pde="#0000ff",Ode="#8a2be2",Rde="#a52a2a",Ide="#deb887",Fde="#5f9ea0",kde="#7fff00",Dde="#d2691e",Mde="#ff7f50",Lde="#6495ed",Bde="#fff8dc",Nde="#dc143c",jde="#00ffff",Ude="#00008b",$de="#008b8b",Vde="#b8860b",Gde="#a9a9a9",zde="#006400",Wde="#a9a9a9",Xde="#bdb76b",Hde="#8b008b",Yde="#556b2f",qde="#ff8c00",Kde="#9932cc",Zde="#8b0000",Qde="#e9967a",Jde="#8fbc8f",epe="#483d8b",tpe="#2f4f4f",rpe="#2f4f4f",npe="#00ced1",ipe="#9400d3",ape="#ff1493",ope="#00bfff",spe="#696969",lpe="#696969",upe="#1e90ff",cpe="#b22222",fpe="#fffaf0",hpe="#228b22",dpe="#ff00ff",ppe="#dcdcdc",vpe="#f8f8ff",mpe="#daa520",gpe="#ffd700",ype="#808080",xpe="#008000",_pe="#adff2f",bpe="#808080",Spe="#f0fff0",Epe="#ff69b4",wpe="#cd5c5c",Ape="#4b0082",Cpe="#fffff0",Tpe="#f0e68c",Ppe="#fff0f5",Ope="#e6e6fa",Rpe="#7cfc00",Ipe="#fffacd",Fpe="#add8e6",kpe="#f08080",Dpe="#e0ffff",Mpe="#fafad2",Lpe="#d3d3d3",Bpe="#90ee90",Npe="#d3d3d3",jpe="#ffb6c1",Upe="#ffa07a",$pe="#20b2aa",Vpe="#87cefa",Gpe="#778899",zpe="#778899",Wpe="#b0c4de",Xpe="#ffffe0",Hpe="#00ff00",Ype="#32cd32",qpe="#faf0e6",Kpe="#ff00ff",Zpe="#800000",Qpe="#66cdaa",Jpe="#0000cd",e0e="#ba55d3",t0e="#9370db",r0e="#3cb371",n0e="#7b68ee",i0e="#00fa9a",a0e="#48d1cc",o0e="#c71585",s0e="#191970",l0e="#f5fffa",u0e="#ffe4e1",c0e="#ffe4b5",f0e="#ffdead",h0e="#000080",d0e="#fdf5e6",p0e="#808000",v0e="#6b8e23",m0e="#ffa500",g0e="#ff4500",y0e="#da70d6",x0e="#eee8aa",_0e="#98fb98",b0e="#afeeee",S0e="#db7093",E0e="#ffefd5",w0e="#ffdab9",A0e="#cd853f",C0e="#ffc0cb",T0e="#dda0dd",P0e="#b0e0e6",O0e="#800080",R0e="#663399",I0e="#ff0000",F0e="#bc8f8f",k0e="#4169e1",D0e="#8b4513",M0e="#fa8072",L0e="#f4a460",B0e="#2e8b57",N0e="#fff5ee",j0e="#a0522d",U0e="#c0c0c0",$0e="#87ceeb",V0e="#6a5acd",G0e="#708090",z0e="#708090",W0e="#fffafa",X0e="#00ff7f",H0e="#4682b4",Y0e="#d2b48c",q0e="#008080",K0e="#d8bfd8",Z0e="#ff6347",Q0e="#40e0d0",J0e="#ee82ee",eve="#f5deb3",tve="#ffffff",rve="#f5f5f5",nve="#ffff00",ive="#9acd32",ave={aliceblue:xde,antiquewhite:_de,aqua:bde,aquamarine:Sde,azure:Ede,beige:wde,bisque:Ade,black:Cde,blanchedalmond:Tde,blue:Pde,blueviolet:Ode,brown:Rde,burlywood:Ide,cadetblue:Fde,chartreuse:kde,chocolate:Dde,coral:Mde,cornflowerblue:Lde,cornsilk:Bde,crimson:Nde,cyan:jde,darkblue:Ude,darkcyan:$de,darkgoldenrod:Vde,darkgray:Gde,darkgreen:zde,darkgrey:Wde,darkkhaki:Xde,darkmagenta:Hde,darkolivegreen:Yde,darkorange:qde,darkorchid:Kde,darkred:Zde,darksalmon:Qde,darkseagreen:Jde,darkslateblue:epe,darkslategray:tpe,darkslategrey:rpe,darkturquoise:npe,darkviolet:ipe,deeppink:ape,deepskyblue:ope,dimgray:spe,dimgrey:lpe,dodgerblue:upe,firebrick:cpe,floralwhite:fpe,forestgreen:hpe,fuchsia:dpe,gainsboro:ppe,ghostwhite:vpe,goldenrod:mpe,gold:gpe,gray:ype,green:xpe,greenyellow:_pe,grey:bpe,honeydew:Spe,hotpink:Epe,indianred:wpe,indigo:Ape,ivory:Cpe,khaki:Tpe,lavenderblush:Ppe,lavender:Ope,lawngreen:Rpe,lemonchiffon:Ipe,lightblue:Fpe,lightcoral:kpe,lightcyan:Dpe,lightgoldenrodyellow:Mpe,lightgray:Lpe,lightgreen:Bpe,lightgrey:Npe,lightpink:jpe,lightsalmon:Upe,lightseagreen:$pe,lightskyblue:Vpe,lightslategray:Gpe,lightslategrey:zpe,lightsteelblue:Wpe,lightyellow:Xpe,lime:Hpe,limegreen:Ype,linen:qpe,magenta:Kpe,maroon:Zpe,mediumaquamarine:Qpe,mediumblue:Jpe,mediumorchid:e0e,mediumpurple:t0e,mediumseagreen:r0e,mediumslateblue:n0e,mediumspringgreen:i0e,mediumturquoise:a0e,mediumvioletred:o0e,midnightblue:s0e,mintcream:l0e,mistyrose:u0e,moccasin:c0e,navajowhite:f0e,navy:h0e,oldlace:d0e,olive:p0e,olivedrab:v0e,orange:m0e,orangered:g0e,orchid:y0e,palegoldenrod:x0e,palegreen:_0e,paleturquoise:b0e,palevioletred:S0e,papayawhip:E0e,peachpuff:w0e,peru:A0e,pink:C0e,plum:T0e,powderblue:P0e,purple:O0e,rebeccapurple:R0e,red:I0e,rosybrown:F0e,royalblue:k0e,saddlebrown:D0e,salmon:M0e,sandybrown:L0e,seagreen:B0e,seashell:N0e,sienna:j0e,silver:U0e,skyblue:$0e,slateblue:V0e,slategray:G0e,slategrey:z0e,snow:W0e,springgreen:X0e,steelblue:H0e,tan:Y0e,teal:q0e,thistle:K0e,tomato:Z0e,turquoise:Q0e,violet:J0e,wheat:eve,white:tve,whitesmoke:rve,yellow:nve,yellowgreen:ive};function kr(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function RE(t){var e=t.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function IE(t){return typeof t=="string"&&(t=ave[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function wn(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function ove(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[Ce.NORMAL_NPM]=Ce.NORMAL,t[Ce.ADD_NPM]=Ce.ADD,t[Ce.SCREEN_NPM]=Ce.SCREEN,e[Ce.NORMAL]=Ce.NORMAL_NPM,e[Ce.ADD]=Ce.ADD_NPM,e[Ce.SCREEN]=Ce.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}var FE=ove();function kE(t,e){return FE[e?1:0][t]}function FL(t,e,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function uv(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,n=t>>8&255,i=t&255;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(e*255<<24)+(r<<16)+(n<<8)+i}function DE(t,e,r,n){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(n||n===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function kL(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function cv(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var sve={Float32Array,Uint32Array,Int32Array,Uint8Array};function lve(t,e){for(var r=0,n=0,i={},a=0;a<t.length;a++)n+=e[a],r+=t[a].length;for(var o=new ArrayBuffer(r*4),s=null,c=0,a=0;a<t.length;a++){var l=e[a],u=t[a],f=cv(u);i[f]||(i[f]=new sve[f](o)),s=i[f];for(var h=0;h<u.length;h++){var d=(h/l|0)*n+c,p=h%l;s[d+p]=u[h]}c+=l}return new Float32Array(o)}function vf(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function x_(t){return!(t&t-1)&&!!t}function __(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function ps(t,e,r){var n=t.length,i;if(!(e>=n||r===0)){r=e+r>n?n-e:r;var a=n-r;for(i=e;i<a;++i)t[i]=t[i+r];t.length=a}}function ss(t){return t===0?0:t<0?-1:1}var uve=0;function Ro(){return++uve}var JO={};function An(t,e,r){if(r===void 0&&(r=3),!JO[e]){var n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(n))),JO[e]=!0}}var b_={},kn=Object.create(null),ii=Object.create(null);function cve(){var t;for(t in kn)kn[t].destroy();for(t in ii)ii[t].destroy()}function DL(){var t;for(t in kn)delete kn[t];for(t in ii)delete ii[t]}var S_=function(){function t(e,r,n){this.canvas=we.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=n||we.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function ML(t){var e=t.width,r=t.height,n=t.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,e,r),a=i.data,o=a.length,s={top:null,left:null,right:null,bottom:null},c=null,l,u,f;for(l=0;l<o;l+=4)a[l+3]!==0&&(u=l/4%e,f=~~(l/4/e),s.top===null&&(s.top=f),(s.left===null||u<s.left)&&(s.left=u),(s.right===null||s.right<u)&&(s.right=u+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(e=s.right-s.left,r=s.bottom-s.top+1,c=n.getImageData(s.left,s.top,e,r)),{height:r,width:e,data:c}}var LL=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function fve(t){var e=LL.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var Rh;function BL(t,e){if(e===void 0&&(e=globalThis.location),t.indexOf("data:")===0)return"";e=e||globalThis.location,Rh||(Rh=document.createElement("a")),Rh.href=t;var r=os.parse(Rh.href),n=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!n||r.protocol!==e.protocol?"anonymous":""}function mf(t,e){var r=we.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}const hve=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:ii,CanvasRenderTarget:S_,DATA_URI:LL,EventEmitter:Eu,ProgramCache:b_,TextureCache:kn,clearTextureCache:DL,correctBlendMode:kE,createIndicesForQuads:kL,decomposeDataUri:fve,deprecation:An,destroyTextureCache:cve,determineCrossOrigin:BL,earcut:SE,getBufferType:cv,getResolutionOfUrl:mf,hex2rgb:kr,hex2string:RE,interleaveTypedArrays:lve,isMobile:ci,isPow2:x_,isWebGLSupported:IL,log2:__,nextPow2:vf,path:OL,premultiplyBlendMode:FE,premultiplyRgba:FL,premultiplyTint:uv,premultiplyTintToRgba:DE,removeItems:ps,rgb2hex:wn,sayHello:RL,sign:ss,skipHello:yde,string2hex:IE,trimCanvas:ML,uid:Ro,url:os},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gf=Math.PI*2,NL=180/Math.PI,Io=Math.PI/180,Rr;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(Rr||(Rr={}));var it=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),Ih=[new it,new it,new it,new it],at=function(){function t(e,r,n,i){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Rr.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.intersects=function(e,r){if(!r){var n=this.x<e.x?e.x:this.x,i=this.right>e.right?e.right:this.right;if(i<=n)return!1;var a=this.y<e.y?e.y:this.y,o=this.bottom>e.bottom?e.bottom:this.bottom;return o>a}var s=this.left,c=this.right,l=this.top,u=this.bottom;if(c<=s||u<=l)return!1;var f=Ih[0].set(e.left,e.top),h=Ih[1].set(e.left,e.bottom),d=Ih[2].set(e.right,e.top),p=Ih[3].set(e.right,e.bottom);if(d.x<=f.x||h.y<=f.y)return!1;var v=Math.sign(r.a*r.d-r.b*r.c);if(v===0||(r.apply(f,f),r.apply(h,h),r.apply(d,d),r.apply(p,p),Math.max(f.x,h.x,d.x,p.x)<=s||Math.min(f.x,h.x,d.x,p.x)>=c||Math.max(f.y,h.y,d.y,p.y)<=l||Math.min(f.y,h.y,d.y,p.y)>=u))return!1;var y=v*(h.y-f.y),g=v*(f.x-h.x),m=y*s+g*l,x=y*c+g*l,b=y*s+g*u,_=y*c+g*u;if(Math.max(m,x,b,_)<=y*f.x+g*f.y||Math.min(m,x,b,_)>=y*p.x+g*p.y)return!1;var S=v*(f.y-d.y),E=v*(d.x-f.x),w=S*s+E*l,C=S*c+E*l,A=S*s+E*u,P=S*c+E*u;return!(Math.max(w,C,A,P)<=S*f.x+E*f.y||Math.min(w,C,A,P)>=S*p.x+E*p.y)},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(a-i,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=a-i,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),jL=function(){function t(e,r,n){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),this.x=e,this.y=r,this.radius=n,this.type=Rr.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var n=this.radius*this.radius,i=this.x-e,a=this.y-r;return i*=i,a*=a,i+a<=n},t.prototype.getBounds=function(){return new at(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),UL=function(){function t(e,r,n,i){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=e,this.y=r,this.width=n,this.height=i,this.type=Rr.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1},t.prototype.getBounds=function(){return new at(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),kl=function(){function t(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=Array.isArray(r[0])?r[0]:r;if(typeof i[0]!="number"){for(var a=[],o=0,s=i.length;o<s;o++)a.push(i[o].x,i[o].y);i=a}this.points=i,this.type=Rr.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var n=!1,i=this.points.length/2,a=0,o=i-1;a<i;o=a++){var s=this.points[a*2],c=this.points[a*2+1],l=this.points[o*2],u=this.points[o*2+1],f=c>r!=u>r&&e<(l-s)*((r-c)/(u-c))+s;f&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),$L=function(){function t(e,r,n,i,a){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=20),this.x=e,this.y=r,this.width=n,this.height=i,this.radius=a,this.type=Rr.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var i=e-(this.x+n),a=r-(this.y+n),o=n*n;if(i*i+a*a<=o||(i=e-(this.x+this.width-n),i*i+a*a<=o)||(a=r-(this.y+this.height-n),i*i+a*a<=o)||(i=e-(this.x+n),i*i+a*a<=o))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),ao=function(){function t(e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=0),this._x=n,this._y=i,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Jt=function(){function t(e,r,n,i,a,o){e===void 0&&(e=1),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=0),o===void 0&&(o=0),this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,n,i,a,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(e,r){r=r||new it;var n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new it;var n=1/(this.a*this.d+this.c*-this.b),i=e.x,a=e.y;return r.x=this.d*n*i+-this.c*n*a+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*a+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),n=Math.sin(e),i=this.a,a=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=a*r-this.d*n,this.d=a*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this},t.prototype.append=function(e){var r=this.a,n=this.b,i=this.c,a=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*a,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*a,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*a+this.ty,this},t.prototype.setTransform=function(e,r,n,i,a,o,s,c,l){return this.a=Math.cos(s+l)*a,this.b=Math.sin(s+l)*a,this.c=-Math.sin(s-c)*o,this.d=Math.cos(s-c)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,n=this.b,i=this.c,a=this.d,o=e.pivot,s=-Math.atan2(-i,a),c=Math.atan2(n,r),l=Math.abs(s+c);return l<1e-5||Math.abs(gf-l)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=c),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+a*a),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*a),e},t.prototype.invert=function(){var e=this.a,r=this.b,n=this.c,i=this.d,a=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*a)/o,this.ty=-(e*this.ty-r*a)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),qo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ko=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Zo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Qo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],E_=[],VL=[],Fh=Math.sign;function dve(){for(var t=0;t<16;t++){var e=[];E_.push(e);for(var r=0;r<16;r++)for(var n=Fh(qo[t]*qo[r]+Zo[t]*Ko[r]),i=Fh(Ko[t]*qo[r]+Qo[t]*Ko[r]),a=Fh(qo[t]*Zo[r]+Zo[t]*Qo[r]),o=Fh(Ko[t]*Zo[r]+Qo[t]*Qo[r]),s=0;s<16;s++)if(qo[s]===n&&Ko[s]===i&&Zo[s]===a&&Qo[s]===o){e.push(s);break}}for(var t=0;t<16;t++){var c=new Jt;c.set(qo[t],Ko[t],Zo[t],Qo[t],0,0),VL.push(c)}}dve();var Vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return qo[t]},uY:function(t){return Ko[t]},vX:function(t){return Zo[t]},vY:function(t){return Qo[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return E_[t][e]},sub:function(t,e){return E_[t][Vt.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?Vt.S:Vt.N:Math.abs(e)*2<=Math.abs(t)?t>0?Vt.E:Vt.W:e>0?t>0?Vt.SE:Vt.SW:t>0?Vt.NE:Vt.NW},matrixAppendRotationInv:function(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=VL[Vt.inv(e)];i.tx=r,i.ty=n,t.append(i)}},fv=function(){function t(){this.worldTransform=new Jt,this.localTransform=new Jt,this.position=new ao(this.onChange,this,0,0),this.scale=new ao(this.onChange,this,1,1),this.pivot=new ao(this.onChange,this,0,0),this.skew=new ao(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,i=this.worldTransform;i.a=r.a*n.a+r.b*n.c,i.b=r.a*n.b+r.b*n.d,i.c=r.c*n.a+r.d*n.c,i.d=r.c*n.b+r.d*n.d,i.tx=r.tx*n.a+r.ty*n.c+n.tx,i.ty=r.tx*n.b+r.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */we.SORTABLE_CHILDREN=!1;var yf=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?at.EMPTY:(e=e||new at(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var n=e.a,i=e.b,a=e.c,o=e.d,s=e.tx,c=e.ty,l=n*r.x+a*r.y+s,u=i*r.x+o*r.y+c;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(e){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY,o=e[0],s=e[1];r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=e[2],s=e[3],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=e[4],s=e[5],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,o=e[6],s=e[7],r=o<r?o:r,n=s<n?s:n,i=o>i?o:i,a=s>a?s:a,this.minX=r,this.minY=n,this.maxX=i,this.maxY=a},t.prototype.addFrame=function(e,r,n,i,a){this.addFrameMatrix(e.worldTransform,r,n,i,a)},t.prototype.addFrameMatrix=function(e,r,n,i,a){var o=e.a,s=e.b,c=e.c,l=e.d,u=e.tx,f=e.ty,h=this.minX,d=this.minY,p=this.maxX,v=this.maxY,y=o*r+c*n+u,g=s*r+l*n+f;h=y<h?y:h,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,y=o*i+c*n+u,g=s*i+l*n+f,h=y<h?y:h,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,y=o*r+c*a+u,g=s*r+l*a+f,h=y<h?y:h,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,y=o*i+c*a+u,g=s*i+l*a+f,h=y<h?y:h,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,this.minX=h,this.minY=d,this.maxX=p,this.maxY=v},t.prototype.addVertexData=function(e,r,n){for(var i=this.minX,a=this.minY,o=this.maxX,s=this.maxY,c=r;c<n;c+=2){var l=e[c],u=e[c+1];i=l<i?l:i,a=u<a?u:a,o=l>o?l:o,s=u>s?u:s}this.minX=i,this.minY=a,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)},t.prototype.addVerticesMatrix=function(e,r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=a);for(var s=e.a,c=e.b,l=e.c,u=e.d,f=e.tx,h=e.ty,d=this.minX,p=this.minY,v=this.maxX,y=this.maxY,g=n;g<i;g+=2){var m=r[g],x=r[g+1],b=s*m+l*x+f,_=u*x+c*m+h;d=Math.min(d,b-a),v=Math.max(v,b+a),p=Math.min(p,_-o),y=Math.max(y,_+o)}this.minX=d,this.minY=p,this.maxX=v,this.maxY=y},t.prototype.addBounds=function(e){var r=this.minX,n=this.minY,i=this.maxX,a=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>a?e.maxY:a},t.prototype.addBoundsMask=function(e,r){var n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,a=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,a=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=a&&i<=o){var s=this.minX,c=this.minY,l=this.maxX,u=this.maxY;this.minX=n<s?n:s,this.minY=i<c?i:c,this.maxX=a>l?a:l,this.maxY=o>u?o:u}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,n,i,a,o){e-=a,r-=o,n+=a,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var w_=function(t,e){return w_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},w_(t,e)};function ME(t,e){w_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ir=function(t){ME(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new fv,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new yf,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var n=Object.keys(r),i=0;i<n.length;++i){var a=n[i];Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(r,a))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,n){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new at),n=this._boundsRect),this._bounds.getRectangle(n)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new at),r=this._localBoundsRect),this._localBounds||(this._localBounds=new yf);var n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var a=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,r);return this.parent=i,this.transform=n,this._bounds=a,this._bounds.updateID+=this._boundsID-o,s},e.prototype.toGlobal=function(r,n,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,n)},e.prototype.toLocal=function(r,n,i,a){return n&&(r=n.toGlobal(r,i,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,i)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,n,i,a,o,s,c,l,u){return r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=1),o===void 0&&(o=0),s===void 0&&(s=0),c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=0),this.position.x=r,this.position.y=n,this.scale.x=i||1,this.scale.y=a||1,this.rotation=o,this.skew.x=s,this.skew.y=c,this.pivot.x=l,this.pivot.y=u,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new LE),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*NL},set:function(r){this.transform.rotation=r*Io},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=r,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(Eu),LE=function(t){ME(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(ir);ir.prototype.displayObjectUpdateTransform=ir.prototype.updateTransform;function pve(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var Fr=function(t){ME(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=we.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.addChild(n[a]);else{var o=n[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return n[0]},e.prototype.addChildAt=function(r,n){if(n<0||n>this.children.length)throw new Error(r+"addChildAt: The index "+n+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(n,0,r),this._boundsID++,this.onChildrenChange(n),r.emit("added",this),this.emit("childAdded",r,this,n),r},e.prototype.swapChildren=function(r,n){if(r!==n){var i=this.getChildIndex(r),a=this.getChildIndex(n);this.children[i]=n,this.children[a]=r,this.onChildrenChange(i<a?i:a)}},e.prototype.getChildIndex=function(r){var n=this.children.indexOf(r);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n},e.prototype.setChildIndex=function(r,n){if(n<0||n>=this.children.length)throw new Error("The index "+n+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(r);ps(this.children,i,1),this.children.splice(n,0,r),this.onChildrenChange(n)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(n.length>1)for(var a=0;a<n.length;a++)this.removeChild(n[a]);else{var o=n[0],s=this.children.indexOf(o);if(s===-1)return null;o.parent=null,o.transform._parentID=-1,ps(this.children,s,1),this._boundsID++,this.onChildrenChange(s),o.emit("removed",this),this.emit("childRemoved",o,this,s)}return n[0]},e.prototype.removeChildAt=function(r){var n=this.getChildAt(r);return n.parent=null,n.transform._parentID=-1,ps(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r),n},e.prototype.removeChildren=function(r,n){r===void 0&&(r=0),n===void 0&&(n=this.children.length);var i=r,a=n,o=a-i,s;if(o>0&&o<=a){s=this.children.splice(i,o);for(var c=0;c<s.length;++c)s[c].parent=null,s[c].transform&&(s[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var c=0;c<s.length;++c)s[c].emit("removed",this),this.emit("childRemoved",s[c],this,c);return s}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,n=0,i=this.children.length;n<i;++n){var a=this.children[n];a._lastSortedIndex=n,!r&&a.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(pve),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,n=this.children.length;r<n;++r){var i=this.children[r];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var n=this.children[r];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){var i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,n){n===void 0&&(n=!1);var i=t.prototype.getLocalBounds.call(this,r);if(!n)for(var a=0,o=this.children.length;a<o;++a){var s=this.children[a];s.visible&&s.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var n=r.renderTexture.sourceFrame;if(n.width>0&&n.height>0){var i,a;if(this.cullArea?(i=this.cullArea,a=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&n.intersects(i,a))this._render(r);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var c=this.children[o],l=c.cullable;c.cullable=l||!this.cullArea,c.render(r),c.cullable=l}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var n=0,i=this.children.length;n<i;++n)this.children[n].render(r)}},e.prototype.renderAdvanced=function(r){var n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<n.length;a++)n[a].enabled&&this._enabledFilters.push(n[a])}var o=n&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==hr.NONE));if(o&&r.batch.flush(),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),i&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var a=0,s=this.children.length;a<s;++a)this.children[a].render(r)}o&&r.batch.flush(),i&&r.mask.pop(this),n&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var n=typeof r=="boolean"?r:r&&r.children,i=this.removeChildren(0,this.children.length);if(n)for(var a=0;a<i.length;++a)i[a].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var n=this.getLocalBounds().width;n!==0?this.scale.x=r/n:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var n=this.getLocalBounds().height;n!==0?this.scale.y=r/n:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(ir);Fr.prototype.containerUpdateTransform=Fr.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lc=function(){return Lc=Object.assign||function(e){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Lc.apply(this,arguments)},wt;(function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"})(wt||(wt={}));var eR=function(t){if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e=typeof t.extension!="object"?{type:t.extension}:t.extension;t=Lc(Lc({},e),{ref:t})}if(typeof t=="object")t=Lc({},t);else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},ma={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(eR).forEach(function(i){i.type.forEach(function(a){var o,s;return(s=(o=e._removeHandlers)[a])===null||s===void 0?void 0:s.call(o,i)})}),this},add:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(eR).forEach(function(i){i.type.forEach(function(a){var o=e._addHandlers,s=e._queue;o[a]?o[a](i):(s[a]=s[a]||[],s[a].push(i))})}),this},handle:function(t,e,r){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[t]||i[t])throw new Error("Extension type "+t+" already has a handler");n[t]=e,i[t]=r;var a=this._queue;return a[t]&&(a[t].forEach(function(o){return e(o)}),delete a[t]),this},handleByMap:function(t,e){return this.handle(t,function(r){e[r.name]=r.ref},function(r){delete e[r.name]})},handleByList:function(t,e){return this.handle(t,function(r){var n,i;e.includes(r.ref)||(e.push(r.ref),t===wt.Loader&&((i=(n=r.ref).add)===null||i===void 0||i.call(n)))},function(r){var n=e.indexOf(r.ref);n!==-1&&e.splice(n,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ur=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,n,i,a,o,s,c){if(arguments.length>8)throw new Error("max arguments reached");var l=this,u=l.name,f=l.items;this._aliasCount++;for(var h=0,d=f.length;h<d;h++)f[h][u](e,r,n,i,a,o,s,c);return f===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Ur.prototype,{dispatch:{value:Ur.prototype.emit},run:{value:Ur.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */we.TARGET_FPMS=.06;var la;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(la||(la={}));var ay=function(){function t(e,r,n,i){r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),Vr=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ay(null,null,1/0),this.deltaMS=1/we.TARGET_FPMS,this.elapsedMS=1/we.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,n){return n===void 0&&(n=la.NORMAL),this._addListener(new ay(e,r,n))},t.prototype.addOnce=function(e,r,n){return n===void 0&&(n=la.NORMAL),this._addListener(new ay(e,r,n,!0))},t.prototype._addListener=function(e){var r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var n=this._head.next;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*we.TARGET_FPMS;for(var i=this._head,a=i.next;a;)a=a.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,we.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),GL=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,la.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Vr.shared:new Vr,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t.extension=wt.Application,t}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */we.PREFER_ENV=ci.any?sa.WEBGL:sa.WEBGL2;we.STRICT_TEXTURE_CACHE=!1;var xf=[];function hv(t,e){if(!t)return null;var r="";if(typeof t=="string"){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(var i=xf.length-1;i>=0;--i){var a=xf[i];if(a.test&&a.test(t,r))return new a(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A_=function(t,e){return A_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},A_(t,e)};function Mt(t,e){A_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var C_=function(){return C_=Object.assign||function(e){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C_.apply(this,arguments)};function vve(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var ws=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Ur("setRealSize"),this.onUpdate=new Ur("update"),this.onError=new Ur("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),Ns=function(t){Mt(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return i=t.call(this,o,s)||this,i.data=r,i}return e.prototype.upload=function(r,n,i){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Un.UNPACK);var o=n.realWidth,s=n.realHeight;return i.width===o&&i.height===s?a.texSubImage2D(n.target,0,0,0,o,s,n.format,i.type,this.data):(i.width=o,i.height=s,a.texImage2D(n.target,0,i.internalFormat,o,s,0,n.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(ws),mve={scaleMode:zr.NEAREST,format:be.RGBA,alphaMode:Un.NPM},ct=function(t){Mt(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=null);var i=t.call(this)||this;n=n||{};var a=n.alphaMode,o=n.mipmap,s=n.anisotropicLevel,c=n.scaleMode,l=n.width,u=n.height,f=n.wrapMode,h=n.format,d=n.type,p=n.target,v=n.resolution,y=n.resourceOptions;return r&&!(r instanceof ws)&&(r=hv(r,y),r.internal=!0),i.resolution=v||we.RESOLUTION,i.width=Math.round((l||0)*i.resolution)/i.resolution,i.height=Math.round((u||0)*i.resolution)/i.resolution,i._mipmap=o!==void 0?o:we.MIPMAP_TEXTURES,i.anisotropicLevel=s!==void 0?s:we.ANISOTROPIC_LEVEL,i._wrapMode=f||we.WRAP_MODE,i._scaleMode=c!==void 0?c:we.SCALE_MODE,i.format=h||be.RGBA,i.type=d||Le.UNSIGNED_BYTE,i.target=p||_o.TEXTURE_2D,i.alphaMode=a!==void 0?a:Un.UNPACK,i.uid=Ro(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=l>0&&u>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(r),i}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,n){var i;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,i=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,n,i){return i=i||this.resolution,this.setRealSize(r*i,n*i,i)},e.prototype.setRealSize=function(r,n,i){return this.resolution=i||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=x_(this.realWidth)&&x_(this.realHeight)},e.prototype.setResolution=function(r){var n=this.resolution;return n===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*n)/r,this.height=Math.round(this.height*n)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ii[this.cacheId],delete kn[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,n,i){i===void 0&&(i=we.STRICT_TEXTURE_CACHE);var a=typeof r=="string",o=null;if(a)o=r;else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+Ro()}o=r._pixiId}var c=ii[o];if(a&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return c||(c=new e(r,n),c.cacheId=o,e.addToCache(c,o)),c},e.fromBuffer=function(r,n,i,a){r=r||new Float32Array(n*i*4);var o=new Ns(r,{width:n,height:i}),s=r instanceof Float32Array?Le.FLOAT:Le.UNSIGNED_BYTE;return new e(o,Object.assign({},mve,a||{width:n,height:i,type:s}))},e.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),ii[n]&&console.warn("BaseTexture added to the cache with an id ["+n+"] that already had an entry"),ii[n]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var n=ii[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete ii[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)delete ii[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(Eu),dv=function(t){Mt(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height;i=t.call(this,o,s)||this,i.items=[],i.itemDirtyIds=[];for(var c=0;c<r;c++){var l=new ct;i.items.push(l),i.itemDirtyIds.push(-2)}return i.length=r,i._load=null,i.baseTexture=null,i}return e.prototype.initFromArray=function(r,n){for(var i=0;i<this.length;i++)r[i]&&(r[i].castToBaseTexture?this.addBaseTextureAt(r[i].castToBaseTexture(),i):r[i]instanceof ws?this.addResourceAt(r[i],i):this.addResourceAt(hv(r[i],n),i))},e.prototype.dispose=function(){for(var r=0,n=this.length;r<n;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,n){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[n].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=r,this.items[n].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(a){return a.resource}).filter(function(a){return a}),i=n.map(function(a){return a.load()});return this._load=Promise.all(i).then(function(){var a=r.items[0],o=a.realWidth,s=a.realHeight;return r.resize(o,s),Promise.resolve(r)}),this._load},e}(ws),BE=function(t){Mt(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height,c,l;return Array.isArray(r)?(c=r,l=r.length):l=r,i=t.call(this,l,{width:o,height:s})||this,c&&i.initFromArray(c,n),i}return e.prototype.addBaseTextureAt=function(r,n){if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=_o.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,n,i){var a=this,o=a.length,s=a.itemDirtyIds,c=a.items,l=r.gl;i.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,o,0,n.format,i.type,null);for(var u=0;u<o;u++){var f=c[u];s[u]<f.dirtyId&&(s[u]=f.dirtyId,f.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,u,f.resource.width,f.resource.height,1,n.format,i.type,f.resource.source))}return!0},e}(dv),ua=function(t){Mt(e,t);function e(r){var n=this,i=r,a=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return n=t.call(this,a,o)||this,n.source=r,n.noSubImage=!1,n}return e.crossOrigin=function(r,n,i){i===void 0&&n.indexOf("data:")!==0?r.crossOrigin=BL(n):i!==!1&&(r.crossOrigin=typeof i=="string"?i:"anonymous")},e.prototype.upload=function(r,n,i,a){var o=r.gl,s=n.realWidth,c=n.realHeight;if(a=a||this.source,a instanceof HTMLImageElement){if(!a.complete||a.naturalWidth===0)return!1}else if(a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Un.UNPACK),!this.noSubImage&&n.target===o.TEXTURE_2D&&i.width===s&&i.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,n.format,i.type,a):(i.width=s,i.height=c,o.texImage2D(n.target,0,i.internalFormat,n.format,i.type,a)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;this.resize(n,i),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ws),NE=function(t){Mt(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var n=globalThis.OffscreenCanvas;return n&&r instanceof n?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(ua),jE=function(t){Mt(e,t);function e(r,n){var i=this,a=n||{},o=a.width,s=a.height,c=a.autoLoad,l=a.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=t.call(this,6,{width:o,height:s})||this;for(var u=0;u<e.SIDES;u++)i.items[u].target=_o.TEXTURE_CUBE_MAP_POSITIVE_X+u;return i.linkBaseTexture=l!==!1,r&&i.initFromArray(r,n),c!==!1&&i.load(),i}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=_o.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,n,i){if(!this.items[n])throw new Error("Index "+n+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=_o.TEXTURE_CUBE_MAP_POSITIVE_X+n,r.parentTextureArray=this.baseTexture,this.items[n]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[n]=r,this},e.prototype.upload=function(r,n,i){for(var a=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];(a[o]<s.dirtyId||i.dirtyId<n.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(r,s,i),a[o]=s.dirtyId):a[o]<-1&&(r.gl.texImage2D(s.target,0,i.internalFormat,n.realWidth,n.realHeight,0,n.format,i.type,null),a[o]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(dv),pv=function(t){Mt(e,t);function e(r,n){var i=this;if(n=n||{},!(r instanceof HTMLImageElement)){var a=new Image;ua.crossOrigin(a,r,n.crossorigin),a.src=r,r=a}return i=t.call(this,r)||this,!r.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=r.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(n.createBitmap!==void 0?n.createBitmap:we.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,i.bitmap=null,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(r){var n=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(i,a){var o=n.source;n.url=o.src;var s=function(){n.destroyed||(o.onload=null,o.onerror=null,n.resize(o.width,o.height),n._load=null,n.createBitmap?i(n.process()):i(n))};o.complete&&o.src?s():(o.onload=s,o.onerror=function(c){a(c),n.onError.emit(c)})}),this._load)},e.prototype.process=function(){var r=this,n=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,a=!n.crossOrigin||n.crossOrigin==="anonymous";return this._process=fetch(n.src,{mode:a?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return i(o,0,0,n.width,n.height,{premultiplyAlpha:r.alphaMode===null||r.alphaMode===Un.UNPACK?"premultiply":"none"})}).then(function(o){return r.destroyed?Promise.reject():(r.bitmap=o,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,n,i,this.bitmap),!this.preserveBitmap){var a=!0,o=n._glTextures;for(var s in o){var c=o[s];if(c!==i&&c.dirtyId!==n.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(ua),UE=function(t){Mt(e,t);function e(r,n){var i=this;return n=n||{},i=t.call(this,we.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=r,i.scale=n.scale||1,i._overrideWidth=n.width,i._overrideHeight=n.height,i._resolve=null,i._crossorigin=n.crossorigin,i._load=null,n.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(n){if(r._resolve=function(){r.resize(r.source.width,r.source.height),n(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,n=new Image;ua.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=function(i){r._resolve&&(n.onerror=null,r.onError.emit(i))},n.onload=function(){if(r._resolve){var i=n.width,a=n.height;if(!i||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=i*r.scale,s=a*r.scale;(r._overrideWidth||r._overrideHeight)&&(o=r._overrideWidth||r._overrideHeight/a*i,s=r._overrideHeight||r._overrideWidth/i*a),o=Math.round(o),s=Math.round(s);var c=r.source;c.width=o,c.height=s,c._pixiId="canvas_"+Ro(),c.getContext("2d").drawImage(n,0,0,i,a,0,0,o,s),r._resolve(),r._resolve=null}}},e.getSize=function(r){var n=e.SVG_SIZE.exec(r),i={};return n&&(i[n[1]]=Math.round(parseFloat(n[3])),i[n[5]]=Math.round(parseFloat(n[7]))),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,n){return n==="svg"||typeof r=="string"&&r.startsWith("data:image/svg+xml")||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(ua),$E=function(t){Mt(e,t);function e(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var o=r[0].src||r[0];ua.crossOrigin(a,o,n.crossorigin);for(var s=0;s<r.length;++s){var c=document.createElement("source"),l=r[s],u=l.src,f=l.mime;u=u||r[s];var h=u.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);f=f||e.MIME_TYPES[d]||"video/"+d,c.src=u,c.type=f,a.appendChild(c)}r=a}return i=t.call(this,r)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=n.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),n.autoLoad!==!1&&i.load(),i}return e.prototype.update=function(r){if(!this.destroyed){var n=Vr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){r.valid?i(r):(r._resolve=i,n.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return!r.paused&&!r.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Vr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Vr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var n=this.valid;this.resize(r.videoWidth,r.videoHeight),!n&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Vr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Vr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Vr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,n){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(ua),VE=function(t){Mt(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&r instanceof ImageBitmap},e}(ua);xf.push(pv,VE,NE,$E,UE,Ns,jE,BE);var zL={__proto__:null,Resource:ws,BaseImageResource:ua,INSTALLED:xf,autoDetectResource:hv,AbstractMultiResource:dv,ArrayResource:BE,BufferResource:Ns,CanvasResource:NE,CubeResource:jE,ImageResource:pv,SVGResource:UE,VideoResource:$E,ImageBitmapResource:VE},gve=function(t){Mt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,n,i){var a=r.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Un.UNPACK);var o=n.realWidth,s=n.realHeight;return i.width===o&&i.height===s?a.texSubImage2D(n.target,0,0,0,o,s,n.format,i.type,this.data):(i.width=o,i.height=s,a.texImage2D(n.target,0,i.internalFormat,o,s,0,n.format,i.type,this.data)),!0},e}(Ns),bp=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ur("disposeFramebuffer"),this.multisample=jt.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new ct(null,{scaleMode:zr.NEAREST,resolution:1,mipmap:Tn.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new ct(new gve(null,{width:this.width,height:this.height}),{scaleMode:zr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Tn.OFF,format:be.DEPTH_COMPONENT,type:Le.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var i=this.colorTextures[n],a=i.resolution;i.setSize(e/a,r/a)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(e/a,r/a)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),GE=function(t){Mt(e,t);function e(r){r===void 0&&(r={});var n=this;if(typeof r=="number"){var i=arguments[0],a=arguments[1],o=arguments[2],s=arguments[3];r={width:i,height:a,scaleMode:o,resolution:s}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:jt.NONE,n=t.call(this,null,r)||this,n.mipmap=Tn.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new bp(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=r.multisample,n.maskStack=[],n.filterStack=[{}],n}return e.prototype.resize=function(r,n){this.framebuffer.resize(r*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(ct),zE=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,n){var i=r.width,a=r.height;if(n){var o=e.width/2/i,s=e.height/2/a,c=e.x/i+o,l=e.y/a+s;n=Vt.add(n,Vt.NW),this.x0=c+o*Vt.uX(n),this.y0=l+s*Vt.uY(n),n=Vt.add(n,2),this.x1=c+o*Vt.uX(n),this.y1=l+s*Vt.uY(n),n=Vt.add(n,2),this.x2=c+o*Vt.uX(n),this.y2=l+s*Vt.uY(n),n=Vt.add(n,2),this.x3=c+o*Vt.uX(n),this.y3=l+s*Vt.uY(n)}else this.x0=e.x/i,this.y0=e.y/a,this.x1=(e.x+e.width)/i,this.y1=e.y/a,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/a,this.x3=e.x/i,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),tR=new zE;function kh(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Ve=function(t){Mt(e,t);function e(r,n,i,a,o,s){var c=t.call(this)||this;if(c.noFrame=!1,n||(c.noFrame=!0,n=new at(0,0,1,1)),r instanceof e&&(r=r.baseTexture),c.baseTexture=r,c._frame=n,c.trim=a,c.valid=!1,c._uvs=tR,c.uvMatrix=null,c.orig=i||n,c._rotate=Number(o||0),o===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new it(s.x,s.y):new it(0,0),c._updateID=0,c.textureCacheIds=[],r.valid?c.noFrame?r.valid&&c.onBaseTextureUpdated(r):c.frame=n:r.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&r.on("update",c.onBaseTextureUpdated,c),c}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var n=this.baseTexture.resource;n&&n.url&&kn[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),n=this._frame===this.orig?r:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&r,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=r),i},e.prototype.updateUvs=function(){this._uvs===tR&&(this._uvs=new zE),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,n,i){n===void 0&&(n={}),i===void 0&&(i=we.STRICT_TEXTURE_CACHE);var a=typeof r=="string",o=null;if(a)o=r;else if(r instanceof ct){if(!r.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";r.cacheId=s+"-"+Ro(),ct.addToCache(r,r.cacheId)}o=r.cacheId}else{if(!r._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";r._pixiId=s+"_"+Ro()}o=r._pixiId}var c=kn[o];if(a&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!c&&!(r instanceof ct)?(n.resolution||(n.resolution=mf(r)),c=new e(new ct(r,n)),c.baseTexture.cacheId=o,ct.addToCache(c.baseTexture,o),e.addToCache(c,o)):!c&&r instanceof ct&&(c=new e(r),e.addToCache(c,o)),c},e.fromURL=function(r,n){var i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),a=e.from(r,Object.assign({resourceOptions:i},n),!1),o=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):o.load().then(function(){return Promise.resolve(a)})},e.fromBuffer=function(r,n,i,a){return new e(ct.fromBuffer(r,n,i,a))},e.fromLoader=function(r,n,i,a){var o=new ct(r,Object.assign({scaleMode:we.SCALE_MODE,resolution:mf(n)},a)),s=o.resource;s instanceof pv&&(s.url=n);var c=new e(o);return i||(i=n),ct.addToCache(c.baseTexture,i),e.addToCache(c,i),i!==n&&(ct.addToCache(c.baseTexture,n),e.addToCache(c,n)),c.baseTexture.valid?Promise.resolve(c):new Promise(function(l){c.baseTexture.once("loaded",function(){return l(c)})})},e.addToCache=function(r,n){n&&(r.textureCacheIds.indexOf(n)===-1&&r.textureCacheIds.push(n),kn[n]&&console.warn("Texture added to the cache with an id ["+n+"] that already had an entry"),kn[n]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var n=kn[r];if(n){var i=n.textureCacheIds.indexOf(r);return i>-1&&n.textureCacheIds.splice(i,1),delete kn[r],n}}else if(r&&r.textureCacheIds){for(var a=0;a<r.textureCacheIds.length;++a)kn[r.textureCacheIds[a]]===r&&delete kn[r.textureCacheIds[a]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var n=r.x,i=r.y,a=r.width,o=r.height,s=n+a>this.baseTexture.width,c=i+o>this.baseTexture.height;if(s||c){var l=s&&c?"and":"or",u="X: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.width,f="Y: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+l+" "+f))}this.valid=a&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new ct),kh(e._EMPTY),kh(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=we.ADAPTER.createCanvas(16,16),n=r.getContext("2d");r.width=16,r.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),e._WHITE=new e(ct.from(r)),kh(e._WHITE),kh(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(Eu),Fo=function(t){Mt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,n,i){i===void 0&&(i=!0);var a=this.baseTexture.resolution,o=Math.round(r*a)/a,s=Math.round(n*a)/a;this.valid=o>0&&s>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(o,s),this.updateUvs()},e.prototype.setResolution=function(r){var n=this.baseTexture;n.resolution!==r&&(n.setResolution(r),this.resize(n.width,n.height,!1))},e.create=function(r){for(var n=arguments,i=[],a=1;a<arguments.length;a++)i[a-1]=n[a];return typeof r=="number"&&(An("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new GE(r))},e}(Ve),WL=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,n){n===void 0&&(n=jt.NONE);var i=new GE(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new Fo(i)},t.prototype.getOptimalTexture=function(e,r,n,i){n===void 0&&(n=1),i===void 0&&(i=jt.NONE);var a;e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=vf(e),r=vf(r),a=((e&65535)<<16|r&65535)>>>0,i>1&&(a+=i*4294967296)):a=i>1?-i:-1,this.texturePool[a]||(this.texturePool[a]=[]);var o=this.texturePool[a].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=a,o.setResolution(n),o},t.prototype.getFilterTexture=function(e,r,n){var i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||jt.NONE);return i.filterFrame=e.filterFrame,i},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var n=this.texturePool[r];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),T_=function(){function t(e,r,n,i,a,o,s){r===void 0&&(r=0),n===void 0&&(n=!1),i===void 0&&(i=Le.FLOAT),this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=a,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,n,i,a){return new t(e,r,n,i,a)},t}(),yve=0,Sr=function(){function t(e,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=yve++,this.disposeRunner=new Ur("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===Fi.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Fi.ELEMENT_ARRAY_BUFFER:Fi.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),xve={Float32Array,Uint32Array,Int32Array,Uint8Array};function _ve(t,e){for(var r=0,n=0,i={},a=0;a<t.length;a++)n+=e[a],r+=t[a].length;for(var o=new ArrayBuffer(r*4),s=null,c=0,a=0;a<t.length;a++){var l=e[a],u=t[a],f=cv(u);i[f]||(i[f]=new xve[f](o)),s=i[f];for(var h=0;h<u.length;h++){var d=(h/l|0)*n+c,p=h%l;s[d+p]=u[h]}c+=l}return new Float32Array(o)}var rR={5126:4,5123:2,5121:1},bve=0,Sve={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Cu=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=bve++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ur("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,n,i,a,o,s,c){if(n===void 0&&(n=0),i===void 0&&(i=!1),c===void 0&&(c=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Sr||(r instanceof Array&&(r=new Float32Array(r)),r=new Sr(r));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],r,n,i,a);return this}var f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new T_(f,n,i,a,o,s,c),this.instanced=this.instanced||c,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof Sr||(e instanceof Array&&(e=new Uint16Array(e)),e=new Sr(e)),e.type=Fi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],n=new Sr,i;for(i in this.attributes){var a=this.attributes[i],o=this.buffers[a.buffer];e.push(o.data),r.push(a.size*rR[a.type]/4),a.buffer=0}for(n.data=_ve(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],n=this.buffers[r.buffer];return n.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new Sr(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];e.attributes[r]=new T_(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Fi.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,n=[],i=[],a=[],o,s=0;s<e.length;s++){o=e[s];for(var c=0;c<o.buffers.length;c++)i[c]=i[c]||0,i[c]+=o.buffers[c].data.length,a[c]=0}for(var s=0;s<o.buffers.length;s++)n[s]=new Sve[cv(o.buffers[s].data)](i[s]),r.buffers[s]=new Sr(n[s]);for(var s=0;s<e.length;s++){o=e[s];for(var c=0;c<o.buffers.length;c++)n[c].set(o.buffers[c].data,a[c]),a[c]+=o.buffers[c].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=Fi.ELEMENT_ARRAY_BUFFER;for(var l=0,u=0,f=0,h=0,s=0;s<o.buffers.length;s++)if(o.buffers[s]!==o.indexBuffer){h=s;break}for(var s in o.attributes){var d=o.attributes[s];(d.buffer|0)===h&&(u+=d.size*rR[d.type]/4)}for(var s=0;s<e.length;s++){for(var p=e[s].indexBuffer.data,c=0;c<p.length;c++)r.indexBuffer.data[c+f]+=l;l+=e[s].buffers[h].data.length/u,f+=p.length}}return r},t}(),XL=function(t){Mt(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(Cu),WE=function(t){Mt(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new Sr(r.vertices),r.uvBuffer=new Sr(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,n){var i=0,a=0;return this.uvs[0]=i,this.uvs[1]=a,this.uvs[2]=i+n.width/r.width,this.uvs[3]=a,this.uvs[4]=i+n.width/r.width,this.uvs[5]=a+n.height/r.height,this.uvs[6]=i,this.uvs[7]=a+n.height/r.height,i=n.x,a=n.y,this.vertices[0]=i,this.vertices[1]=a,this.vertices[2]=i+n.width,this.vertices[3]=a,this.vertices[4]=i+n.width,this.vertices[5]=a+n.height,this.vertices[6]=i,this.vertices[7]=a+n.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Cu),Eve=0,bo=function(){function t(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Eve++,this.static=!!r,this.ubo=!!n,e instanceof Sr?(this.buffer=e,this.buffer.type=Fi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Sr(new Float32Array(1)),this.buffer.type=Fi.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,n){if(!this.ubo)this.uniforms[e]=new t(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,n){return new t(e,r,n)},t.uboFrom=function(e,r){return new t(e,r??!0,!0)},t}(),HL=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=jt.NONE,this.sourceFrame=new at,this.destinationFrame=new at,this.bindingSourceFrame=new at,this.bindingDestinationFrame=new at,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Dh=[new it,new it,new it,new it],oy=new Jt,XE=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new WL,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new XL,this.quadUv=new WE,this.tempRect=new at,this.activeState={},this.globalUniforms=new bo({outputFrame:new at,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var n,i,a=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new HL,c=this.renderer.renderTexture,l=r[0].resolution,u=r[0].multisample,f=r[0].padding,h=r[0].autoFit,d=(n=r[0].legacy)!==null&&n!==void 0?n:!0,p=1;p<r.length;p++){var v=r[p];l=Math.min(l,v.resolution),u=Math.min(u,v.multisample),f=this.useMaxPadding?Math.max(f,v.padding):f+v.padding,h=h&&v.autoFit,d=d||((i=v.legacy)!==null&&i!==void 0?i:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),o.push(s),s.resolution=l,s.multisample=u,s.legacy=d,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(f);var y=this.tempRect.copyFrom(c.sourceFrame);a.projection.transform&&this.transformAABB(oy.copyFrom(a.projection.transform).invert(),y),h?(s.sourceFrame.fit(y),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(y)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,c.current?c.current.resolution:a.resolution,c.sourceFrame,c.destinationFrame,a.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,u),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(c.sourceFrame),s.bindingDestinationFrame.copyFrom(c.destinationFrame),s.transform=a.projection.transform,a.projection.transform=null,c.bind(s.renderTexture,s.sourceFrame,g),a.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;var i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;var a=i.inputSize,o=i.inputPixel,s=i.inputClamp;if(a[0]=r.destinationFrame.width,a[1]=r.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],o[0]=Math.round(a[0]*r.resolution),o[1]=Math.round(a[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=r.sourceFrame.width*a[2]-.5*o[2],s[3]=r.sourceFrame.height*a[3]-.5*o[3],r.legacy){var c=i.filterArea;c[0]=r.destinationFrame.width,c[1]=r.destinationFrame.height,c[2]=r.sourceFrame.x,c[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,oi.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var u=r.renderTexture,f=this.getOptimalFilterTexture(u.width,u.height,r.resolution);f.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){h===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(u.width,u.height,r.resolution),f.filterFrame=u.filterFrame),n[h].apply(this,u,f,oi.CLEAR,r);var d=u;u=f,f=d}n[h].apply(this,u,l.renderTexture,oi.BLEND,r),h>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=oi.CLEAR);var n=this.renderer,i=n.renderTexture,a=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=a.stateId&1||this.forceClear;(r===oi.CLEAR||r===oi.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,n,i){var a=this.renderer;a.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(Wn.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(Wn.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var n=this.activeState,i=n.sourceFrame,a=n.destinationFrame,o=r._texture.orig,s=e.set(a.width,0,0,a.height,i.x,i.y),c=r.worldTransform.copyTo(Jt.TEMP_MATRIX);return c.invert(),s.prepend(c),s.scale(1/o.width,1/o.height),s.translate(r.anchor.x,r.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,n,i){return n===void 0&&(n=1),i===void 0&&(i=jt.NONE),this.texturePool.getOptimalTexture(e,r,n,i)},t.prototype.getFilterTexture=function(e,r,n){if(typeof e=="number"){var i=e;e=r,r=i}e=e||this.activeState.renderTexture;var a=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||jt.NONE);return a.filterFrame=e.filterFrame,a},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var n=Dh[0],i=Dh[1],a=Dh[2],o=Dh[3];n.set(r.left,r.top),i.set(r.left,r.bottom),a.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(a,a),e.apply(o,o);var s=Math.min(n.x,i.x,a.x,o.x),c=Math.min(n.y,i.y,a.y,o.y),l=Math.max(n.x,i.x,a.x,o.x),u=Math.max(n.y,i.y,a.y,o.y);r.x=s,r.y=c,r.width=l-s,r.height=u-c},t.prototype.roundFrame=function(e,r,n,i,a){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(a){var o=a.a,s=a.b,c=a.c,l=a.d;if((Math.abs(s)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}a=a?oy.copyFrom(a):oy.identity(),a.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(a,e),e.ceil(r),this.transformAABB(a.invert(),e)}},t}(),th=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),HE=function(){function t(e){this.renderer=e,this.emptyRenderer=new th(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var n=this.renderer.texture.boundTextures,i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)},t.prototype.boundArray=function(e,r,n,i){for(var a=e.elements,o=e.ids,s=e.count,c=0,l=0;l<s;l++){var u=a[l],f=u._batchLocation;if(f>=0&&f<i&&r[f]===u){o[l]=f;continue}for(;c<i;){var h=r[c];if(h&&h._batchEnabled===n&&h._batchLocation===c){c++;continue}o[l]=c,u._batchLocation=c,r[c]=u;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),nR=0,YE=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=nR++},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=nR++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var n;if(we.PREFER_ENV>=sa.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){var r=this;e.preventDefault(),setTimeout(function(){r.gl.isContextLost()&&r.extensions.loseContext&&r.extensions.loseContext.restoreContext()},0)},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),YL=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=jt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),wve=new at,qE=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new bp(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new at,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;we.PREFER_ENV===sa.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=function(i){return r.drawBuffersWEBGL(i)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,n){n===void 0&&(n=0);var i=this.gl;if(e){var a=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,a.mipLevel=n),a.dirtyId!==e.dirtyId&&(a.dirtyId=e.dirtyId,a.dirtyFormat!==e.dirtyFormat?(a.dirtyFormat=e.dirtyFormat,a.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):a.dirtySize!==e.dirtySize&&(a.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var s=e.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var c=r.width>>n,l=r.height>>n,u=c/r.width;this.setViewport(r.x*u,r.y*u,c,l)}else{var c=e.width>>n,l=e.height>>n;this.setViewport(0,0,c,l)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,n,i){var a=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(a.width!==n||a.height!==i||a.x!==e||a.y!==r)&&(a.x=e,a.y=r,a.width=n,a.height=i,this.gl.viewport(e,r,n,i))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,n,i,a){a===void 0&&(a=uf.COLOR|uf.DEPTH);var o=this.gl;o.clearColor(e,r,n,i),o.clear(a)},t.prototype.initFramebuffer=function(e){var r=this.gl,n=new YL(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var r=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,e.width,e.height)),n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,a=i.length;r.drawBuffers||(a=Math.min(a,1));for(var o=0;o<a;o++){var s=i[o],c=s.parentTextureArray||s;this.renderer.texture.bind(c,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var n=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],a=e.colorTextures,o=a.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.RGBA8,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var s=[],c=0;c<o;c++){var l=a[c],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),!(c===0&&i.msaaBuffer)&&(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+c,l.target,u._glTextures[this.CONTEXT_UID].texture,r),s.push(n.COLOR_ATTACHMENT0+c))}if(s.length>1&&n.drawBuffers(s),e.depthTexture){var f=this.writeDepthTexture;if(f){var h=e.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,n=jt.NONE;if(e<=1||r===null)return n;for(var i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=jt.NONE),n},t.prototype.blit=function(e,r,n){var i=this,a=i.current,o=i.renderer,s=i.gl,c=i.CONTEXT_UID;if(o.context.webGLVersion===2&&a){var l=a.glFramebuffers[c];if(l){if(!e){if(!l.msaaBuffer)return;var u=a.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new bp(a.width,a.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==a.width||e.height!==a.height)&&(e.width=a.width,e.height=a.height,e.dirtyId++,e.dirtySize++)}r||(r=wve,r.width=a.width,r.height=a.height),n||(n=r);var f=r.width===n.width&&r.height===n.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,f?s.NEAREST:s.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(e);a>=0&&this.managedFramebuffers.splice(a,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var n=e.width,i=e.height,a=this.gl,o=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,o),r.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,r.multisample,a.DEPTH24_STENCIL8,n,i):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,i),r.stencil=o,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new at},t.prototype.destroy=function(){this.renderer=null},t}(),sy={5126:4,5123:2,5121:1},KE=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var n=this.renderer.context.extensions.vertexArrayObject;we.PREFER_ENV===sa.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(a){return n.bindVertexArrayOES(a)},e.deleteVertexArray=function(a){return n.deleteVertexArrayOES(a)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(a,o){return i.vertexAttribDivisorANGLE(a,o)},e.drawElementsInstanced=function(a,o,s,c,l){return i.drawElementsInstancedANGLE(a,o,s,c,l)},e.drawArraysInstanced=function(a,o,s,c){return i.drawArraysInstancedANGLE(a,o,s,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var n=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],a=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},a=!0);var o=i[r.program.id]||this.initGeometryVao(e,r,a);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,n=0;n<e.buffers.length;n++){var i=e.buffers[n];r.update(i)}},t.prototype.checkCompatibility=function(e,r){var n=e.attributes,i=r.attributeData;for(var a in i)if(!n[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},t.prototype.getSignature=function(e,r){var n=e.attributes,i=r.attributeData,a=["g",e.id];for(var o in n)i[o]&&a.push(o,i[o].location);return a.join("-")},t.prototype.initGeometryVao=function(e,r,n){n===void 0&&(n=!0);var i=this.gl,a=this.CONTEXT_UID,o=this.renderer.buffer,s=r.program;s.glPrograms[a]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,s);var c=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[c];if(u)return l[s.id]=u,u;var f=e.buffers,h=e.attributes,d={},p={};for(var v in f)d[v]=0,p[v]=0;for(var v in h)!h[v].size&&s.attributeData[v]?h[v].size=s.attributeData[v].size:h[v].size||console.warn("PIXI Geometry attribute '"+v+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[h[v].buffer]+=h[v].size*sy[h[v].type];for(var v in h){var y=h[v],g=y.size;y.stride===void 0&&(d[y.buffer]===g*sy[y.type]?y.stride=0:y.stride=d[y.buffer]),y.start===void 0&&(y.start=p[y.buffer],p[y.buffer]+=g*sy[y.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(var m=0;m<f.length;m++){var x=f[m];o.bind(x),n&&x._glBuffers[a].refCount++}return this.activateVao(e,s),this._activeVao=u,l[s.id]=u,l[c]=u,u},t.prototype.disposeGeometry=function(e,r){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,o=e.buffers,s=(n=this.renderer)===null||n===void 0?void 0:n.buffer;if(e.disposeRunner.remove(this),!!i){if(s)for(var c=0;c<o.length;c++){var l=o[c]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(o[c],r))}if(!r){for(var u in i)if(u[0]==="g"){var f=i[u];this._activeVao===f&&this.unbind(),a.deleteVertexArray(f)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)},t.prototype.activateVao=function(e,r){var n=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,o=e.buffers,s=e.attributes;e.indexBuffer&&a.bind(e.indexBuffer);var c=null;for(var l in s){var u=s[l],f=o[u.buffer],h=f._glBuffers[i];if(r.attributeData[l]){c!==h&&(a.bind(f),c=h);var d=r.attributeData[l].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,n,i){var a=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,c=s===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;s===2||s===4&&this.canUseUInt32ElementIndex?o.instanced?a.drawElementsInstanced(e,r||o.indexBuffer.data.length,c,(n||0)*s,i||1):a.drawElements(e,r||o.indexBuffer.data.length,c,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?a.drawArraysInstanced(e,n,r||o.getSize(),i||1):a.drawArrays(e,n,r||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),qL=function(){function t(e){e===void 0&&(e=null),this.type=hr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=we.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=hr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function iR(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function aR(t,e){var r=t.getShaderSource(e).split(`
`).map(function(l,u){return u+": "+l}),n=t.getShaderInfoLog(e),i=n.split(`
`),a={},o=i.map(function(l){return parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(l){return l&&!a[l]?(a[l]=!0,!0):!1}),s=[""];o.forEach(function(l){r[l-1]="%c"+r[l-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var c=r.join(`
`);s[0]=c,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function Ave(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||aR(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||aR(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function ly(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function KL(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ly(2*e);case"bvec3":return ly(3*e);case"bvec4":return ly(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ZL={},Ku=ZL;function QL(){if(Ku===ZL||Ku&&Ku.isContextLost()){var t=we.ADAPTER.createCanvas(),e=void 0;we.PREFER_ENV>=sa.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ku=e}return Ku}var Mh;function Cve(){if(!Mh){Mh=Ln.MEDIUM;var t=QL();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Mh=e.precision?Ln.HIGH:Ln.MEDIUM}}return Mh}function oR(t,e,r){if(t.substring(0,9)!=="precision"){var n=e;return e===Ln.HIGH&&r!==Ln.HIGH&&(n=Ln.MEDIUM),"precision "+n+` float;
`+t}else if(r!==Ln.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var Tve={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function JL(t){return Tve[t]}var Lh=null,sR={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function eB(t,e){if(!Lh){var r=Object.keys(sR);Lh={};for(var n=0;n<r.length;++n){var i=r[n];Lh[t[i]]=sR[i]}}return Lh[e]}var vs=[{test:function(t){return t.type==="float"&&t.size===1&&!t.isArray},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t,e){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0)},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1&&!t.isArray},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1&&!t.isArray},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Pve={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Ove={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Rve(t,e){var r,n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in t.uniforms){var a=e[i];if(!a){!((r=t.uniforms[i])===null||r===void 0)&&r.group&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var o=t.uniforms[i],s=!1,c=0;c<vs.length;c++)if(vs[c].test(a,o)){n.push(vs[c].code(i,o)),s=!0;break}if(!s){var l=a.size===1&&!a.isArray?Pve:Ove,u=l[a.type].replace("location",'ud["'+i+'"].location');n.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var Ive=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Fve(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function tB(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var n=Ive.replace(/%forloop%/gi,Fve(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var Zu;function kve(){if(typeof Zu=="boolean")return Zu;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Zu=t({a:"b"},"a","b")===!0}catch{Zu=!1}return Zu}var Dve=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Mve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Lve=0,Bh={},Tu=function(){function t(e,r,n){n===void 0&&(n="pixi-shader"),this.id=Lve++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Bh[n]?(Bh[n]++,n+="-"+Bh[n]):Bh[n]=1,this.vertexSrc="#define SHADER_NAME "+n+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+`
`+this.fragmentSrc,this.vertexSrc=oR(this.vertexSrc,we.PRECISION_VERTEX,Ln.HIGH),this.fragmentSrc=oR(this.fragmentSrc,we.PRECISION_FRAGMENT,Cve())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Mve},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Dve},enumerable:!1,configurable:!0}),t.from=function(e,r,n){var i=e+r,a=b_[i];return a||(b_[i]=a=new t(e,r,n)),a},t}(),La=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof bo?this.uniformGroup=r:this.uniformGroup=new bo(r):this.uniformGroup=new bo({}),this.disposeRunner=new Ur("disposeShader")}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var n in r.uniforms){var i=r.uniforms[n];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,n){var i=Tu.from(e,r);return new t(i,n)},t}(),uy=0,cy=1,fy=2,hy=3,dy=4,py=5,jo=function(){function t(){this.data=0,this.blendMode=Ce.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<uy)},set:function(e){!!(this.data&1<<uy)!==e&&(this.data^=1<<uy)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<cy)},set:function(e){!!(this.data&1<<cy)!==e&&(this.data^=1<<cy)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<fy)},set:function(e){!!(this.data&1<<fy)!==e&&(this.data^=1<<fy)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<hy)},set:function(e){!!(this.data&1<<hy)!==e&&(this.data^=1<<hy)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<py)},set:function(e){!!(this.data&1<<py)!==e&&(this.data^=1<<py)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<dy)},set:function(e){!!(this.data&1<<dy)!==e&&(this.data^=1<<dy)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==Ce.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Bve=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Nve=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,He=function(t){Mt(e,t);function e(r,n,i){var a=this,o=Tu.from(r||e.defaultVertexSrc,n||e.defaultFragmentSrc);return a=t.call(this,o,i)||this,a.padding=0,a.resolution=we.FILTER_RESOLUTION,a.multisample=we.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new jo,a}return e.prototype.apply=function(r,n,i,a,o){r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Nve},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return Bve},enumerable:!1,configurable:!0}),e}(La),jve=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Uve=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,lR=new Jt,vv=function(){function t(e,r){this._texture=e,this.mapCoord=new Jt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var n=this.mapCoord,i=0;i<e.length;i+=2){var a=e[i],o=e[i+1];r[i]=a*n.a+o*n.c+n.tx,r[i+1]=a*n.b+o*n.d+n.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var i=r.orig,a=r.trim;a&&(lR.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(lR));var o=r.baseTexture,s=this.uClampFrame,c=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(r._frame.x+c+l)/o.width,s[1]=(r._frame.y+c+l)/o.height,s[2]=(r._frame.x+r._frame.width-c+l)/o.width,s[3]=(r._frame.y+r._frame.height-c+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0},t}(),rB=function(t){Mt(e,t);function e(r,n,i){var a=this,o=null;return typeof r!="string"&&n===void 0&&i===void 0&&(o=r,r=void 0,n=void 0,i=void 0),a=t.call(this,r||jve,n||Uve,i)||this,a.maskSprite=o,a.maskMatrix=new Jt,a}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,n,i,a){var o=this._maskSprite,s=o._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new vv(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,o).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,r.applyFilter(this,n,i,a))},e}(He),ZE=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var n=r;if(!n.isMaskData){var i=this.maskDataPool.pop()||new qL;i.pooled=!0,i.maskObject=r,n=i}var a=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(a),n._colorMask=a?a._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==hr.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case hr.SCISSOR:this.renderer.scissor.push(n);break;case hr.STENCIL:this.renderer.stencil.push(n);break;case hr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case hr.COLOR:this.pushColorMask(n);break}n.type===hr.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case hr.SCISSOR:this.renderer.scissor.pop(r);break;case hr.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case hr.SPRITE:this.popSpriteMask(r);break;case hr.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var n=this.maskStack[this.maskStack.length-1];n.type===hr.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=hr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=hr.SCISSOR:e.type=hr.STENCIL:e.type=hr.COLOR},t.prototype.pushSpriteMask=function(e){var r,n,i=e.maskObject,a=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new rB]));var s=this.renderer,c=s.renderTexture,l,u;if(c.current){var f=c.current;l=e.resolution||f.resolution,u=(r=e.multisample)!==null&&r!==void 0?r:f.multisample}else l=e.resolution||s.resolution,u=(n=e.multisample)!==null&&n!==void 0?n:s.multisample;o[0].resolution=l,o[0].multisample=u,o[0].maskSprite=i;var h=a.filterArea;a.filterArea=i.getBounds(!0),s.filter.push(a,o),a.filterArea=h,e._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(e){var r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},t.prototype.popColorMask=function(e){var r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)},t.prototype.destroy=function(){this.renderer=null},t}(),nB=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),uR=new Jt,cR=[],QE=function(t){Mt(e,t);function e(r){var n=t.call(this,r)||this;return n.glConst=we.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,n}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){var n;if(!r._scissorRectLocal){var i=r._scissorRect,a=r.maskObject,o=this.renderer,s=o.renderTexture,c=a.getBounds(!0,(n=cR.pop())!==null&&n!==void 0?n:new at);this.roundFrameToPixels(c,s.current?s.current.resolution:o.resolution,s.sourceFrame,s.destinationFrame,o.projection.transform),i&&c.fit(i),r._scissorRectLocal=c}},e.isMatrixRotated=function(r){if(!r)return!1;var n=r.a,i=r.b,a=r.c,o=r.d;return(Math.abs(i)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(o)>1e-4)},e.prototype.testScissor=function(r){var n=r.maskObject;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var i=r._scissorRectLocal;return i.width>0&&i.height>0},e.prototype.roundFrameToPixels=function(r,n,i,a,o){e.isMatrixRotated(o)||(o=o?uR.copyFrom(o):uR.identity(),o.translate(-i.x,-i.y).scale(a.width/i.width,a.height/i.height).translate(a.x,a.y),this.renderer.filter.transformAABB(o,r),r.fit(a),r.x=Math.round(r.x*n),r.y=Math.round(r.y*n),r.width=Math.round(r.width*n),r.height=Math.round(r.height*n))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var n=this.renderer.gl;r._scissorRect||n.enable(n.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(r){var n=this.renderer.gl;r&&cR.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,n;this.renderer.renderTexture.current?n=r.y:n=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,n,r.width,r.height)},e}(nB),JE=function(t){Mt(e,t);function e(r){var n=t.call(this,r)||this;return n.glConst=we.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,n}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var n=r.maskObject,i=this.renderer.gl,a=r._stencilCounter;a===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),r._stencilCounter++;var o=r._colorMask;o!==0&&(r._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,a,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,o!==0&&(r._colorMask=o,i.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},e.prototype.pop=function(r){var n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,a=i?i._colorMask:15;a!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,a!==0&&(i._colorMask=a,n.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(nB),ew=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Jt,this.transform=null}return t.prototype.update=function(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,n,i){var a=this.projectionMatrix,o=i?-1:1;a.identity(),a.a=1/r.width*2,a.d=o*(1/r.height*2),a.tx=-1-r.x*a.a,a.ty=-o-r.y*a.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),$o=new at,Qu=new at,tw=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new at,this.destinationFrame=new at,this.viewportFrame=new at}return t.prototype.bind=function(e,r,n){e===void 0&&(e=null);var i=this.renderer;this.current=e;var a,o,s;e?(a=e.baseTexture,s=a.resolution,r||($o.width=e.frame.width,$o.height=e.frame.height,r=$o),n||(Qu.x=e.frame.x,Qu.y=e.frame.y,Qu.width=r.width,Qu.height=r.height,n=Qu),o=a.framebuffer):(s=i.resolution,r||($o.width=i.screen.width,$o.height=i.screen.height,r=$o),n||(n=$o,n.width=r.width,n.height=r.height));var c=this.viewportFrame;c.x=n.x*s,c.y=n.y*s,c.width=n.width*s,c.height=n.height*s,e||(c.y=i.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(o,c),this.renderer.projection.update(n,r,s,!o),e?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var n=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,a=n.width!==i.width||n.height!==i.height;if(a){var o=this.viewportFrame,s=o.x,c=o.y,l=o.width,u=o.height;s=Math.round(s),c=Math.round(c),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,c,l,u)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),a&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function $ve(t,e,r,n,i){r.buffer.update(i)}var Vve={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},iB={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function aB(t){for(var e=t.map(function(c){return{data:c,offset:0,dataLen:0,dirty:0}}),r=0,n=0,i=0,a=0;a<e.length;a++){var o=e[a];if(r=iB[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){var s=n%r%16;n+=s,i+=s}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function oB(t,e){var r=[];for(var n in t)e[n]&&r.push(e[n]);return r.sort(function(i,a){return i.index-a.index}),r}function sB(t,e){if(!t.autoManage)return{size:0,syncFunc:$ve};for(var r=oB(t.uniforms,e),n=aB(r),i=n.uboElements,a=n.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],s=0;s<i.length;s++){for(var c=i[s],l=t.uniforms[c.data.name],u=c.data.name,f=!1,h=0;h<vs.length;h++){var d=vs[h];if(d.codeUbo&&d.test(c.data,l)){o.push("offset = "+c.offset/4+";",vs[h].codeUbo(c.data.name,l)),f=!0;break}}if(!f)if(c.data.size>1){var p=JL(c.data.type),v=Math.max(iB[c.data.type]/16,1),y=p/v,g=(4-y%4)%4;o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+c.offset/4+`;

                t = 0;

                for(var i=0; i < `+c.data.size*v+`; i++)
                {
                    for(var j = 0; j < `+y+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var m=Vve[c.data.type];o.push(`
                cv = ud.`+u+`.value;
                v = uv.`+u+`;
                offset = `+c.offset/4+`;
                `+m+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:a,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var Gve=function(){function t(){}return t}(),lB=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function zve(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=e.getActiveAttrib(t,i);if(a.name.indexOf("gl_")!==0){var o=eB(e,a.type),s={type:o,name:a.name,size:JL(o),location:e.getAttribLocation(t,a.name)};r[a.name]=s}}return r}function Wve(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=e.getActiveUniform(t,i),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),c=eB(e,a.type);r[o]={name:o,index:i,type:c,size:a.size,isArray:s,value:KL(c,a.size)}}return r}function uB(t,e){var r=iR(t,t.VERTEX_SHADER,e.vertexSrc),n=iR(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,r),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||Ave(t,i,r,n),e.attributeData=zve(i,t),e.uniformData=Wve(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var a=Object.keys(e.attributeData);a.sort(function(u,f){return u>f?1:-1});for(var o=0;o<a.length;o++)e.attributeData[a[o]].location=o,t.bindAttribLocation(i,o,a[o]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);var s={};for(var o in e.uniformData){var c=e.uniformData[o];s[o]={location:t.getUniformLocation(i,o),value:KL(c.type,c.size)}}var l=new lB(i,s);return l}var Xve=0,Nh={textureCount:0,uboCount:0},rw=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Xve++}return t.prototype.systemCheck=function(){if(!kve())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Nh.textureCount=0,Nh.uboCount=0,this.syncUniformGroup(e.uniformGroup,Nh)),i},t.prototype.setUniforms=function(e){var r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))},t.prototype.syncUniforms=function(e,r,n){var i=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);i(r.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Rve(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;var i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Nh,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,n){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var a=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=sB(e,this.shader.program.uniformData)),e.autoManage){var c=new Float32Array(s.size/4);e.buffer.update(c)}return r.uniformGroups[e.id]=s.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,n){var i=e.uniforms,a=[n+"-"];for(var o in i)a.push(o),r[o]&&a.push(r[o].type);return a.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,n=e.program,i=uB(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function Hve(t,e){return e===void 0&&(e=[]),e[Ce.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.ADD]=[t.ONE,t.ONE],e[Ce.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.NONE]=[0,0],e[Ce.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Ce.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ce.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Ce.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Ce.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ce.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Ce.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Ce.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Ce.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Ce.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ce.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var Yve=0,qve=1,Kve=2,Zve=3,Qve=4,Jve=5,nw=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ce.NONE,this._blendEq=!1,this.map=[],this.map[Yve]=this.setBlend,this.map[qve]=this.setOffset,this.map[Kve]=this.setCullFace,this.map[Zve]=this.setDepthTest,this.map[Qve]=this.setFrontFace,this.map[Jve]=this.setDepthMask,this.checks=[],this.defaultState=new jo,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=Hve(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,n=0;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),iw=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=we.GC_MAX_IDLE,this.checkCountMax=we.GC_MAX_CHECK_COUNT,this.mode=we.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ff.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,n=!1,i=0;i<r.length;i++){var a=r[i];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(e.destroyTexture(a,!0),r[i]=null,n=!0)}if(n){for(var o=0,i=0;i<r.length;i++)r[i]!==null&&(r[o++]=r[i]);r.length=o}},t.prototype.unload=function(e){var r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},t.prototype.destroy=function(){this.renderer=null},t}();function eme(t){var e,r,n,i,a,o,s,c,l,u,f,h,d,p,v,y,g,m,x,b,_,S,E;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?E=(e={},e[Le.UNSIGNED_BYTE]=(r={},r[be.RGBA]=t.RGBA8,r[be.RGB]=t.RGB8,r[be.RG]=t.RG8,r[be.RED]=t.R8,r[be.RGBA_INTEGER]=t.RGBA8UI,r[be.RGB_INTEGER]=t.RGB8UI,r[be.RG_INTEGER]=t.RG8UI,r[be.RED_INTEGER]=t.R8UI,r[be.ALPHA]=t.ALPHA,r[be.LUMINANCE]=t.LUMINANCE,r[be.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[Le.BYTE]=(n={},n[be.RGBA]=t.RGBA8_SNORM,n[be.RGB]=t.RGB8_SNORM,n[be.RG]=t.RG8_SNORM,n[be.RED]=t.R8_SNORM,n[be.RGBA_INTEGER]=t.RGBA8I,n[be.RGB_INTEGER]=t.RGB8I,n[be.RG_INTEGER]=t.RG8I,n[be.RED_INTEGER]=t.R8I,n),e[Le.UNSIGNED_SHORT]=(i={},i[be.RGBA_INTEGER]=t.RGBA16UI,i[be.RGB_INTEGER]=t.RGB16UI,i[be.RG_INTEGER]=t.RG16UI,i[be.RED_INTEGER]=t.R16UI,i[be.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,i),e[Le.SHORT]=(a={},a[be.RGBA_INTEGER]=t.RGBA16I,a[be.RGB_INTEGER]=t.RGB16I,a[be.RG_INTEGER]=t.RG16I,a[be.RED_INTEGER]=t.R16I,a),e[Le.UNSIGNED_INT]=(o={},o[be.RGBA_INTEGER]=t.RGBA32UI,o[be.RGB_INTEGER]=t.RGB32UI,o[be.RG_INTEGER]=t.RG32UI,o[be.RED_INTEGER]=t.R32UI,o[be.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,o),e[Le.INT]=(s={},s[be.RGBA_INTEGER]=t.RGBA32I,s[be.RGB_INTEGER]=t.RGB32I,s[be.RG_INTEGER]=t.RG32I,s[be.RED_INTEGER]=t.R32I,s),e[Le.FLOAT]=(c={},c[be.RGBA]=t.RGBA32F,c[be.RGB]=t.RGB32F,c[be.RG]=t.RG32F,c[be.RED]=t.R32F,c[be.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,c),e[Le.HALF_FLOAT]=(l={},l[be.RGBA]=t.RGBA16F,l[be.RGB]=t.RGB16F,l[be.RG]=t.RG16F,l[be.RED]=t.R16F,l),e[Le.UNSIGNED_SHORT_5_6_5]=(u={},u[be.RGB]=t.RGB565,u),e[Le.UNSIGNED_SHORT_4_4_4_4]=(f={},f[be.RGBA]=t.RGBA4,f),e[Le.UNSIGNED_SHORT_5_5_5_1]=(h={},h[be.RGBA]=t.RGB5_A1,h),e[Le.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[be.RGBA]=t.RGB10_A2,d[be.RGBA_INTEGER]=t.RGB10_A2UI,d),e[Le.UNSIGNED_INT_10F_11F_11F_REV]=(p={},p[be.RGB]=t.R11F_G11F_B10F,p),e[Le.UNSIGNED_INT_5_9_9_9_REV]=(v={},v[be.RGB]=t.RGB9_E5,v),e[Le.UNSIGNED_INT_24_8]=(y={},y[be.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,y),e[Le.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[be.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,g),e):E=(m={},m[Le.UNSIGNED_BYTE]=(x={},x[be.RGBA]=t.RGBA,x[be.RGB]=t.RGB,x[be.ALPHA]=t.ALPHA,x[be.LUMINANCE]=t.LUMINANCE,x[be.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,x),m[Le.UNSIGNED_SHORT_5_6_5]=(b={},b[be.RGB]=t.RGB,b),m[Le.UNSIGNED_SHORT_4_4_4_4]=(_={},_[be.RGBA]=t.RGBA,_),m[Le.UNSIGNED_SHORT_5_5_5_1]=(S={},S[be.RGBA]=t.RGBA,S),m),E}var Cd=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Le.UNSIGNED_BYTE,this.internalFormat=be.RGBA,this.samplerType=0}return t}(),aw=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ct,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=eme(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var n=0;n<r;n++)this.boundTextures[n]=null;this.emptyTextures={};var i=new Cd(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Cd(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var n=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,n=r.gl,i=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<i.length;a++)i[a]===this.unknownTexture&&this.bind(null,a)}for(var a=0;a<i.length;a++)i[a]===e&&(this.currentLocation!==a&&(n.activeTexture(n.TEXTURE0+a),this.currentLocation=a),n.bindTexture(e.target,this.emptyTextures[e.target].texture),i[a]=null)},t.prototype.ensureSamplerType=function(e){var r=this,n=r.boundTextures,i=r.hasIntegerTextures,a=r.CONTEXT_UID;if(i)for(var o=e-1;o>=0;--o){var s=n[o];if(s){var c=s._glTextures[a];c.samplerType!==cf.FLOAT&&this.renderer.texture.unbind(s)}}},t.prototype.initTexture=function(e){var r=new Cd(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var n,i;r.internalFormat=(i=(n=this.internalFormats[e.type])===null||n===void 0?void 0:n[e.format])!==null&&i!==void 0?i:e.format,this.webGLVersion===2&&e.type===Le.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var n=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(n,e,r))r.samplerType!==cf.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,a=e.realHeight,o=n.gl;(r.width!==i||r.height!==a||r.dirtyId<0)&&(r.width=i,r.height=a,o.texImage2D(e.target,0,r.internalFormat,i,a,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var n=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var i=this.managedTextures.indexOf(e);i!==-1&&ps(this.managedTextures,i,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Tn.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Ii.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var n=this.gl;if(r.mipmap&&e.mipmap!==Tn.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===zr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===zr.LINEAR){var a=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===zr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===zr.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),cB={__proto__:null,FilterSystem:XE,BatchSystem:HE,ContextSystem:YE,FramebufferSystem:qE,GeometrySystem:KE,MaskSystem:ZE,ScissorSystem:QE,StencilSystem:JE,ProjectionSystem:ew,RenderTextureSystem:tw,ShaderSystem:rw,StateSystem:nw,TextureGCSystem:iw,TextureSystem:aw},vy=new Jt,fB=function(t){Mt(e,t);function e(r,n){r===void 0&&(r=Wl.UNKNOWN);var i=t.call(this)||this;return n=Object.assign({},we.RENDER_OPTIONS,n),i.options=n,i.type=r,i.screen=new at(0,0,n.width,n.height),i.view=n.view||we.ADAPTER.createCanvas(),i.resolution=n.resolution||we.RESOLUTION,i.useContextAlpha=n.useContextAlpha,i.autoDensity=!!n.autoDensity,i.preserveDrawingBuffer=n.preserveDrawingBuffer,i.clearBeforeRender=n.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=n.backgroundColor||i._backgroundColor,i.backgroundAlpha=n.backgroundAlpha,n.transparent!==void 0&&(An("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=n.transparent,i.backgroundAlpha=n.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return e.prototype.initPlugins=function(r){for(var n in r)this.plugins[n]=new r[n](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,n){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(n*this.resolution);var i=this.view.width/this.resolution,a=this.view.height/this.resolution;this.screen.width=i,this.screen.height=a,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=a+"px"),this.emit("resize",i,a)},e.prototype.generateTexture=function(r,n,i,a){n===void 0&&(n={}),typeof n=="number"&&(An("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),n={scaleMode:n,resolution:i,region:a});var o=n.region,s=vve(n,["region"]);a=o||r.getLocalBounds(null,!0),a.width===0&&(a.width=1),a.height===0&&(a.height=1);var c=Fo.create(C_({width:a.width,height:a.height},s));return vy.tx=-a.x,vy.ty=-a.y,this.render(r,{renderTexture:c,clear:!1,transform:vy,skipUpdateTransform:!!r.parent}),c},e.prototype.destroy=function(r){for(var n in this.plugins)this.plugins[n].destroy(),this.plugins[n]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Wl.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=RE(r),kr(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(Eu),tme=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),rme=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,n=r.gl,i=r.CONTEXT_UID,a=e._glBuffers[i]||this.createGLBuffer(e);n.bindBuffer(e.type,a.buffer)},t.prototype.bindBufferBase=function(e,r){var n=this,i=n.gl,a=n.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var o=e._glBuffers[a]||this.createGLBuffer(e);this.boundBufferBases[r]=e,i.bindBufferBase(i.UNIFORM_BUFFER,r,o.buffer)}},t.prototype.bindBufferRange=function(e,r,n){var i=this,a=i.gl,o=i.CONTEXT_UID;n=n||0;var s=e._glBuffers[o]||this.createGLBuffer(e);a.bindBufferRange(a.UNIFORM_BUFFER,r||0,s.buffer,n*256,256)},t.prototype.update=function(e){var r=this,n=r.gl,i=r.CONTEXT_UID,a=e._glBuffers[i];if(e._updateID!==a.updateID)if(a.updateID=e._updateID,n.bindBuffer(e.type,a.buffer),a.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{var o=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;a.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,o)}},t.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)},t.prototype.createGLBuffer=function(e){var r=this,n=r.CONTEXT_UID,i=r.gl;return e._glBuffers[n]=new tme(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]},t}(),ow=function(t){Mt(e,t);function e(r){var n=t.call(this,Wl.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Ur("destroy"),contextChange:new Ur("contextChange"),reset:new Ur("reset"),update:new Ur("update"),postrender:new Ur("postrender"),prerender:new Ur("prerender"),resize:new Ur("resize")},n.runners.contextChange.add(n),n.globalUniforms=new bo({projectionMatrix:new Jt},!0),n.addSystem(ZE,"mask").addSystem(YE,"context").addSystem(nw,"state").addSystem(rw,"shader").addSystem(aw,"texture").addSystem(rme,"buffer").addSystem(KE,"geometry").addSystem(qE,"framebuffer").addSystem(QE,"scissor").addSystem(JE,"stencil").addSystem(ew,"projection").addSystem(iw,"textureGC").addSystem(XE,"filter").addSystem(tw,"renderTexture").addSystem(HE,"batch"),n.initPlugins(e.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&n.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,RL(n.context.webGLVersion===2?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return e.create=function(r){if(IL())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,n;if(this.context.webGLVersion===1){var i=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,i)}else{var i=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),n=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,i)}n>=jt.HIGH?this.multisample=jt.HIGH:n>=jt.MEDIUM?this.multisample=jt.MEDIUM:n>=jt.LOW?this.multisample=jt.LOW:this.multisample=jt.NONE},e.prototype.addSystem=function(r,n){var i=new r(this);if(this[n])throw new Error('Whoops! The name "'+n+'" is already in use');this[n]=i;for(var a in this.runners)this.runners[a].add(i);return this},e.prototype.render=function(r,n){var i,a,o,s;if(n&&(n instanceof Fo?(An("6.0.0","Renderer#render arguments changed, use options instead."),i=n,a=arguments[2],o=arguments[3],s=arguments[4]):(i=n.renderTexture,a=n.clear,o=n.transform,s=n.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(i||(this._lastObjectRendered=r),!s){var c=r.enableTempParent();r.updateTransform(),r.disableTempParent(c)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,n,i,a){n===void 0&&(n={});var o=t.prototype.generateTexture.call(this,r,n,i,a);return this.framebuffer.blit(),o},e.prototype.resize=function(r,n){t.prototype.resize.call(this,r,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var n in this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return An("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,n){An("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),ma.add({name:r,type:wt.RendererPlugin,ref:n})},e.__plugins={},e}(fB);ma.handleByMap(wt.RendererPlugin,ow.__plugins);function hB(t){return ow.create(t)}var nme=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ime=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,dB=nme,sw=ime,ame=function(){function t(e){An("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return t.prototype.destroy=function(){this.renderer=null},t}(),Sp=function(){function t(){this.texArray=null,this.blend=0,this.type=Wn.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),Ep=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),wp=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),pB=function(t){Mt(e,t);function e(r){var n=t.call(this,r)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=jo.for2d(),n.size=we.SPRITE_BATCH_SIZE*4,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),r.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return e.prototype.contextChange=function(){var r=this.renderer.gl;we.PREFER_ENV===sa.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),we.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=tB(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,n=e._textureArrayPool,i=this.size/4,a=Math.floor(i/this.MAX_TEXTURES)+1;r.length<i;)r.push(new Sp);for(;n.length<a;)n.push(new Ep);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,n=r._bufferedTextures,i=r.MAX_TEXTURES,a=e._textureArrayPool,o=this.renderer.batch,s=this._tempBoundTextures,c=this.renderer.textureGC.count,l=++ct._globalBatch,u=0,f=a[0],h=0;o.copyBoundTextures(s,i);for(var d=0;d<this._bufferSize;++d){var p=n[d];n[d]=null,p._batchEnabled!==l&&(f.count>=i&&(o.boundArray(f,s,l,i),this.buildDrawCalls(f,h,d),h=d,f=a[++u],++l),p._batchEnabled=l,p.touched=c,f.elements[f.count++]=p)}f.count>0&&(o.boundArray(f,s,l,i),this.buildDrawCalls(f,h,this._bufferSize),++u,++l);for(var d=0;d<s.length;d++)s[d]=null;ct._globalBatch=l},e.prototype.buildDrawCalls=function(r,n,i){var a=this,o=a._bufferedElements,s=a._attributeBuffer,c=a._indexBuffer,l=a.vertexSize,u=e._drawCallPool,f=this._dcIndex,h=this._aIndex,d=this._iIndex,p=u[f];p.start=this._iIndex,p.texArray=r;for(var v=n;v<i;++v){var y=o[v],g=y._texture.baseTexture,m=FE[g.alphaMode?1:0][y.blendMode];o[v]=null,n<v&&p.blend!==m&&(p.size=d-p.start,n=v,p=u[++f],p.texArray=r,p.start=d),this.packInterleavedGeometry(y,s,c,h,d),h+=y.vertexData.length/2*l,d+=y.indices.length,p.blend=m}n<i&&(p.size=d-p.start,++f),this._dcIndex=f,this._aIndex=h,this._iIndex=d},e.prototype.bindAndClearTexArray=function(r){for(var n=this.renderer.texture,i=0;i<r.count;i++)n.bind(r.elements[i],r.ids[i]),r.elements[i]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,n=r._packedGeometries,i=r._attributeBuffer,a=r._indexBuffer;we.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(i.rawBinaryData),n[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,n=this.renderer,i=n.gl,a=n.state,o=e._drawCallPool,s=null,c=0;c<r;c++){var l=o[c],u=l.texArray,f=l.type,h=l.size,d=l.start,p=l.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=p,a.set(this.state),i.drawElements(f,h,i.UNSIGNED_SHORT,d*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),we.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var n=vf(Math.ceil(r/8)),i=__(n),a=n*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[a];return o||(this._aBuffers[a]=o=new wp(a*this.vertexSize*4)),o},e.prototype.getIndexBuffer=function(r){var n=vf(Math.ceil(r/12)),i=__(n),a=n*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(a)),o},e.prototype.packInterleavedGeometry=function(r,n,i,a,o){for(var s=n.uint32View,c=n.float32View,l=a/this.vertexSize,u=r.uvs,f=r.indices,h=r.vertexData,d=r._texture.baseTexture._batchLocation,p=Math.min(r.worldAlpha,1),v=p<1&&r._texture.baseTexture.alphaMode?uv(r._tintRGB,p):r._tintRGB+(p*255<<24),y=0;y<h.length;y+=2)c[a++]=h[y],c[a++]=h[y+1],c[a++]=u[y],c[a++]=u[y+1],s[a++]=v,c[a++]=d;for(var y=0;y<f.length;y++)i[o++]=l+f[y]},e._drawCallPool=[],e._textureArrayPool=[],e}(th),vB=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),n=0;n<e;n++)r[n]=n;this.defaultGroupCache[e]=bo.from({uSamplers:r},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+e),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Tu(this.vertexSrc,i)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jt,default:this.defaultGroupCache[e]};return new La(this.programCache[e],a)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+="if(vTextureId < "+n+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+n+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),lw=function(t){Mt(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this)||this;return n._buffer=new Sr(null,r,!1),n._indexBuffer=new Sr(null,r,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,Le.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,Le.FLOAT).addAttribute("aColor",n._buffer,4,!0,Le.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,Le.FLOAT).addIndex(n._indexBuffer),n}return e}(Cu),fR=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,hR=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,mB=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:fR,fragment:hR,geometryClass:lw,vertexSize:6},e),n=r.vertex,i=r.fragment,a=r.vertexSize,o=r.geometryClass;return function(s){Mt(c,s);function c(l){var u=s.call(this,l)||this;return u.shaderGenerator=new vB(n,i),u.geometryClass=o,u.vertexSize=a,u}return c}(pB)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return fR},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return hR},enumerable:!1,configurable:!0}),t}(),uw=mB.create();Object.assign(uw,{extension:{name:"batch",type:wt.RendererPlugin}});var gB={},ome=function(t){Object.defineProperty(gB,t,{get:function(){return An("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),zL[t]}})};for(var cw in zL)ome(cw);var yB={},sme=function(t){Object.defineProperty(yB,t,{get:function(){return An("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),cB[t]}})};for(var cw in cB)sme(cw);var lme="6.5.10";/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xB={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ir.mixin(xB);var ume=9,jh=100,cme=0,fme=0,dR=2,pR=1,hme=-1e3,dme=-1e3,pme=2,_B=function(){function t(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ci.tablet||ci.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=jh+"px",r.style.height=jh+"px",r.style.position="absolute",r.style.top=cme+"px",r.style.left=fme+"px",r.style.zIndex=dR.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=pR+"px",r.style.height=pR+"px",r.style.position="absolute",r.style.top=hme+"px",r.style.left=dme+"px",r.style.zIndex=pme.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},t.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}},t.prototype.update=function(){var e=performance.now();if(!(ci.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.left,i=r.top,a=r.width,o=r.height,s=this.renderer,c=s.width,l=s.height,u=s.resolution,f=a/c*u,h=o/l*u,d=this.div;d.style.left=n+"px",d.style.top=i+"px",d.style.width=c+"px",d.style.height=l+"px";for(var p=0;p<this.children.length;p++){var v=this.children[p];if(v.renderId!==this.renderId)v._accessibleActive=!1,ps(this.children,p,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,p--;else{d=v._accessibleDiv;var y=v.hitArea,g=v.worldTransform;v.hitArea?(d.style.left=(g.tx+y.x*g.a)*f+"px",d.style.top=(g.ty+y.y*g.d)*h+"px",d.style.width=y.width*g.a*f+"px",d.style.height=y.height*g.d*h+"px"):(y=v.getBounds(),this.capHitArea(y),d.style.left=y.x*f+"px",d.style.top=y.y*h+"px",d.style.width=y.width*f+"px",d.style.height=y.height*h+"px",d.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(d.title=v.accessibleTitle),d.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&d.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==d.title||v.tabIndex!==d.tabIndex)&&(d.title=v.accessibleTitle,d.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},t.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,n=r.width,i=r.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>i&&(e.height=i-e.y)},t.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=jh+"px",r.style.height=jh+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=dR.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},t.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,n=e.target.displayObject,i=r.eventData;r.dispatchEvent(n,"click",i),r.dispatchEvent(n,"pointertap",i),r.dispatchEvent(n,"tap",i)},t.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,n=e.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseover",i)},t.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,n=e.target.displayObject,i=r.eventData;r.dispatchEvent(n,"mouseout",i)},t.prototype._onKeyDown=function(e){e.keyCode===ume&&this.activate()},t.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[wt.RendererPlugin,wt.CanvasRendererPlugin]},t}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var P_=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new it,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)},t.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O_=function(t,e){return O_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},O_(t,e)};function vme(t,e){O_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var bB=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Td=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),mme=function(){function t(){this._tempPoint=new it}return t.prototype.recursiveFindHit=function(e,r,n,i,a){var o;if(!r||!r.visible)return!1;var s=e.data.global;a=r.interactive||a;var c=!1,l=a,u=!0;if(r.hitArea)i&&(r.worldTransform.applyInverse(s,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?c=!0:(i=!1,u=!1)),l=!1;else if(r._mask&&i){var f=r._mask.isMaskData?r._mask.maskObject:r._mask;f&&!(!((o=f.containsPoint)===null||o===void 0)&&o.call(f,s))&&(i=!1)}if(u&&r.interactiveChildren&&r.children)for(var h=r.children,d=h.length-1;d>=0;d--){var p=h[d],v=this.recursiveFindHit(e,p,n,i,l);if(v){if(!p.parent)continue;l=!1,v&&(e.target&&(i=!1),c=!0)}}return a&&(i&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(s)&&(c=!0),r.interactive&&(c&&!e.target&&(e.target=r),n&&n(e,r,!!c))),c},t.prototype.findHit=function(e,r,n,i){this.recursiveFindHit(e,r,n,i,!1)},t}(),SB={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};ir.mixin(SB);var Uh=1,$h={target:null,data:{global:null}},EB=function(t){vme(e,t);function e(r,n){var i=t.call(this)||this;return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new P_,i.mouse.identifier=Uh,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Uh]=i.mouse,i.interactionDataPool=[],i.eventData=new bB,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new mme,i._tempDisplayObject=new LE,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=n.useSystemTicker!==void 0?n.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,n){return $h.target=null,$h.data.global=r,n||(n=this.lastObjectRendered),this.processInteractive($h,n,null,!0),$h.target},e.prototype.setTargetElement=function(r,n){n===void 0&&(n=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=n,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Vr.system.add(this.tickerUpdate,this,la.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Vr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var n=this.activeInteractionData[r];if(n.originalEvent&&n.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var n=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(n=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var i=this.cursorStyles[r];if(i)switch(typeof i){case"string":n&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(r);break;case"object":n&&Object.assign(this.interactionDOMElement.style,i);break}else n&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,n,i){(!i.stopPropagationHint||r===i.stopsPropagatingAt)&&(i.currentTarget=r,i.type=n,r.emit(n,i),r[n]&&r[n](i))},e.prototype.delayDispatchEvent=function(r,n,i){this.delayedEvents.push({displayObject:r,eventString:n,eventData:i})},e.prototype.mapPositionToPoint=function(r,n,i){var a;this.interactionDOMElement.parentElement?a=this.interactionDOMElement.getBoundingClientRect():a={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;r.x=(n-a.left)*(this.interactionDOMElement.width/a.width)*o,r.y=(i-a.top)*(this.interactionDOMElement.height/a.height)*o},e.prototype.processInteractive=function(r,n,i,a){var o=this.search.findHit(r,n,i,a),s=this.delayedEvents;if(!s.length)return o;r.stopPropagationHint=!1;var c=s.length;this.delayedEvents=[];for(var l=0;l<c;l++){var u=s[l],f=u.displayObject,h=u.eventString,d=u.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,h,d)}return o},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);if(this.autoPreventDefault&&n[0].isNormalized){var i=r.cancelable||!("cancelable"in r);i&&r.preventDefault()}for(var a=n.length,o=0;o<a;o++){var s=n[o],c=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,c);if(l.data.originalEvent=r,this.processInteractive(l,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),s.pointerType==="touch")this.emit("touchstart",l);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,n,i){var a=r.data,o=r.data.identifier;if(i){if(n.trackedPointers[o]||(n.trackedPointers[o]=new Td(o)),this.dispatchEvent(n,"pointerdown",r),a.pointerType==="touch")this.dispatchEvent(n,"touchstart",r);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var s=a.button===2;s?n.trackedPointers[o].rightDown=!0:n.trackedPointers[o].leftDown=!0,this.dispatchEvent(n,s?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,n,i){var a=this.normalizeToPointerData(r),o=a.length,s=r.target;r.composedPath&&r.composedPath().length>0&&(s=r.composedPath()[0]);for(var c=s!==this.interactionDOMElement?"outside":"",l=0;l<o;l++){var u=a[l],f=this.getInteractionDataForPointerId(u),h=this.configureInteractionEventForDOMEvent(this.eventData,u,f);if(h.data.originalEvent=r,this.processInteractive(h,this.lastObjectRendered,i,n||!c),this.emit(n?"pointercancel":"pointerup"+c,h),u.pointerType==="mouse"||u.pointerType==="pen"){var d=u.button===2;this.emit(d?"rightup"+c:"mouseup"+c,h)}else u.pointerType==="touch"&&(this.emit(n?"touchcancel":"touchend"+c,h),this.releaseInteractionDataForPointerId(u.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,n){var i=r.data,a=r.data.identifier;n.trackedPointers[a]!==void 0&&(delete n.trackedPointers[a],this.dispatchEvent(n,"pointercancel",r),i.pointerType==="touch"&&this.dispatchEvent(n,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,n,i){var a=r.data,o=r.data.identifier,s=n.trackedPointers[o],c=a.pointerType==="touch",l=a.pointerType==="mouse"||a.pointerType==="pen",u=!1;if(l){var f=a.button===2,h=Td.FLAGS,d=f?h.RIGHT_DOWN:h.LEFT_DOWN,p=s!==void 0&&s.flags&d;i?(this.dispatchEvent(n,f?"rightup":"mouseup",r),p&&(this.dispatchEvent(n,f?"rightclick":"click",r),u=!0)):p&&this.dispatchEvent(n,f?"rightupoutside":"mouseupoutside",r),s&&(f?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(n,"pointerup",r),c&&this.dispatchEvent(n,"touchend",r),s&&((!l||u)&&this.dispatchEvent(n,"pointertap",r),c&&(this.dispatchEvent(n,"tap",r),s.over=!1))):s&&(this.dispatchEvent(n,"pointerupoutside",r),c&&this.dispatchEvent(n,"touchendoutside",r)),s&&s.none&&delete n.trackedPointers[o]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r);(n[0].pointerType==="mouse"||n[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=n.length,a=0;a<i;a++){var o=n[a],s=this.getInteractionDataForPointerId(o),c=this.configureInteractionEventForDOMEvent(this.eventData,o,s);c.data.originalEvent=r,this.processInteractive(c,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",c),o.pointerType==="touch"&&this.emit("touchmove",c),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",c)}n[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,n,i){var a=r.data,o=a.pointerType==="touch",s=a.pointerType==="mouse"||a.pointerType==="pen";s&&this.processPointerOverOut(r,n,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(n,"pointermove",r),o&&this.dispatchEvent(n,"touchmove",r),s&&this.dispatchEvent(n,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=i,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(a.identifier)}},e.prototype.processPointerOverOut=function(r,n,i){var a=r.data,o=r.data.identifier,s=a.pointerType==="mouse"||a.pointerType==="pen",c=n.trackedPointers[o];i&&!c&&(c=n.trackedPointers[o]=new Td(o)),c!==void 0&&(i&&this.mouseOverRenderer?(c.over||(c.over=!0,this.delayDispatchEvent(n,"pointerover",r),s&&this.delayDispatchEvent(n,"mouseover",r)),s&&this.cursor===null&&(this.cursor=n.cursor)):c.over&&(c.over=!1,this.dispatchEvent(n,"pointerout",this.eventData),s&&this.dispatchEvent(n,"mouseout",r),c.none&&delete n.trackedPointers[o]))},e.prototype.onPointerOver=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var n=this.normalizeToPointerData(r),i=n[0],a=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,a);o.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",o)}},e.prototype.getInteractionDataForPointerId=function(r){var n=r.pointerId,i;return n===Uh||r.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[n]?i=this.activeInteractionData[n]:(i=this.interactionDataPool.pop()||new P_,i.identifier=n,this.activeInteractionData[n]=i),i.copyEvent(r),i},e.prototype.releaseInteractionDataForPointerId=function(r){var n=this.activeInteractionData[r];n&&(delete this.activeInteractionData[r],n.reset(),this.interactionDataPool.push(n))},e.prototype.configureInteractionEventForDOMEvent=function(r,n,i){return r.data=i,this.mapPositionToPoint(i.global,n.clientX,n.clientY),n.pointerType==="touch"&&(n.globalX=i.global.x,n.globalY=i.global.y),i.originalEvent=n,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var n=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var i=0,a=r.changedTouches.length;i<a;i++){var o=r.changedTouches[i];typeof o.button>"u"&&(o.button=r.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=r.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,n.push(o)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var s=r;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=Uh),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,n.push(s)}else n.push(r);return n},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[wt.RendererPlugin,wt.CanvasRendererPlugin]},e}(Eu);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gme=new at,yme=4,wB=function(){function t(e){this.renderer=e}return t.prototype.image=function(e,r,n){var i=new Image;return i.src=this.base64(e,r,n),i},t.prototype.base64=function(e,r,n){return this.canvas(e).toDataURL(r,n)},t.prototype.canvas=function(e,r){var n=this._rawPixels(e,r),i=n.pixels,a=n.width,o=n.height,s=n.flipY,c=new S_(a,o,1),l=c.context.getImageData(0,0,a,o);if(t.arrayPostDivide(i,l.data),c.context.putImageData(l,0,0),s){var u=new S_(c.width,c.height,1);u.context.scale(1,-1),u.context.drawImage(c.canvas,0,-o),c.destroy(),c=u}return c.canvas},t.prototype.pixels=function(e,r){var n=this._rawPixels(e,r).pixels;return t.arrayPostDivide(n,n),n},t.prototype._rawPixels=function(e,r){var n=this.renderer,i,a=!1,o,s=!1;if(e)if(e instanceof Fo)o=e;else{var c=n.context.webGLVersion>=2?n.multisample:jt.NONE;if(o=this.renderer.generateTexture(e,{multisample:c}),c!==jt.NONE){var l=Fo.create({width:o.width,height:o.height});n.framebuffer.bind(o.framebuffer),n.framebuffer.blit(l.framebuffer),n.framebuffer.bind(null),o.destroy(!0),o=l}s=!0}o?(i=o.baseTexture.resolution,r=r??o.frame,a=!1,n.renderTexture.bind(o)):(i=n.resolution,r||(r=gme,r.width=n.width,r.height=n.height),a=!0,n.renderTexture.bind(null));var u=Math.round(r.width*i),f=Math.round(r.height*i),h=new Uint8Array(yme*u*f),d=n.gl;return d.readPixels(Math.round(r.x*i),Math.round(r.y*i),u,f,d.RGBA,d.UNSIGNED_BYTE,h),s&&o.destroy(!0),{pixels:h,width:u,height:f,flipY:a}},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(e,r){for(var n=0;n<e.length;n+=4){var i=r[n+3]=e[n+3];i!==0?(r[n]=Math.round(Math.min(e[n]*255/i,255)),r[n+1]=Math.round(Math.min(e[n+1]*255/i,255)),r[n+2]=Math.round(Math.min(e[n+2]*255/i,255))):(r[n]=e[n],r[n+1]=e[n+1],r[n+2]=e[n+2])}},t.extension={name:"extract",type:wt.RendererPlugin},t}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Vh=function(){function t(e,r,n){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function vR(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Ra=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var n=[];r;)n.push(r),r=r._next;return n},t.prototype.has=function(e){if(!(e instanceof Vh))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,r),i=i._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return vR(this,new Vh(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return vR(this,new Vh(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof Vh))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function AB(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},a=14;a--;)i[r.key[a]]=n[a]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(o,s,c){s&&(i[r.q.name][s]=c)}),i}var my,Gh=null,xme=0,mR=200,_me=204,bme=1223,Sme=2;function gR(){}function yR(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function gy(t){return t.toString().replace("object ","")}var Pt=function(){function t(e,r,n){if(this._dequeue=gR,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=gR,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ra,this.onProgress=new Ra,this.onComplete=new Ra,this.onAfterMiddleware=new Ra}return t.setExtensionLoadType=function(e,r){yR(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){yR(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof my>"u"&&(my=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),my&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(r)?r[n]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,n){n||(n=e+"/"+this._getExtension(r));var i=document.createElement("source");return i.src=r,i.type=n,i},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(gy(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(gy(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(gy(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n=typeof e.status>"u"?mR:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(r=e.responseText),n===xme&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=mR:n===bme&&(n=_me);var i=n/100|0;if(i===Sme)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(s){this.abort("Error trying to parse loaded json: "+s);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(s){this.abort("Error trying to parse loaded xml: "+s);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,Gh||(Gh=document.createElement("a")),Gh.href=e;var n=AB(Gh.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,a=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||a!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var n=e.indexOf("/");r=e.substring(n+1,e.indexOf(";",n))}else{var i=e.indexOf("?"),a=e.indexOf("#"),o=Math.min(i>-1?i:e.length,a>-1?a:e.length);e=e.substring(0,o),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,avif:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,avif:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Pt||(Pt={}));function Vo(){}function Eme(t){return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(t===null)throw new Error("Callback was already called.");var a=t;t=null,a.apply(this,n)}}var wme=function(){function t(e,r){this.data=e,this.callback=r}return t}(),yy=function(){function t(e,r){var n=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Vo,this.unsaturated=Vo,this.empty=Vo,this.drain=Vo,this.error=Vo,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,a,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(n.started=!0,i==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var s=new wme(i,typeof o=="function"?o:Vo);a?n._tasks.unshift(s):n._tasks.push(s),setTimeout(n.process,1)},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var i=n._tasks.shift();n._tasks.length===0&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(i.data,Eme(n._next(i)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var n=arguments,i=[],a=0;a<arguments.length;a++)i[a]=n[a];r.workers-=1,e.callback.apply(e,i),i[0]!=null&&r.error(i[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=Vo,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,n,i){var a=0,o=e.length;function s(c){if(c||a===o){n&&n(c);return}i?setTimeout(function(){r(e[a++],s)},1):r(e[a++],s)}s()},t.queue=function(e,r){return new t(e,r)},t}(),xy=100,Ame=/(#[\w-]+)?$/,As=function(){function t(e,r){var n=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return n._loadResource(c,l)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,l){return n._loadResource(c,l)},this._queue=yy.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Ra,this.onError=new Ra,this.onLoad=new Ra,this.onStart=new Ra,this.onComplete=new Ra;for(var i=0;i<t._plugins.length;++i){var a=t._plugins[i],o=a.pre,s=a.use;o&&this.pre(o),s&&this.use(s)}this._protected=!1}return t.prototype._add=function(e,r,n,i){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new Pt(e,r,n),typeof i=="function"&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var a=n.parentResource,o=[],s=0;s<a.children.length;++s)a.children[s].isComplete||o.push(a.children[s]);var c=a.progressChunk*(o.length+1),l=c/(o.length+2);a.children.push(this.resources[e]),a.progressChunk=l;for(var s=0;s<o.length;++s)o[s].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(An("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,n=xy/r,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=AB(e,{strictMode:!0}),n;if(r.protocol||!r.path||e.indexOf("//")===0?n=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?n=this.baseUrl+"/"+e:n=this.baseUrl+e,this.defaultQueryString){var i=Ame.exec(n)[0];n=n.slice(0,n.length-i.length),n.indexOf("?")!==-1?n+="&"+this.defaultQueryString:n+="?"+this.defaultQueryString,n+=i}return n},t.prototype._loadResource=function(e,r){var n=this;e._dequeue=r,yy.eachSeries(this._beforeMiddleware,function(i,a){i.call(n,e,function(){a(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=xy,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),yy.eachSeries(this._afterMiddleware,function(n,i){n.call(r,e,i)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(xy,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return An("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),ma.add({type:wt.Loader,ref:e}),t},t._plugins=[],t}();ma.handleByList(wt.Loader,As._plugins);As.prototype.add=function(e,r,n,i){if(Array.isArray(e)){for(var a=0;a<e.length;++a)this.add(e[a]);return this}if(typeof e=="object"&&(n=e,i=r||n.callback||n.onComplete,r=n.url,e=n.name||n.key||n.url),typeof r!="string"&&(i=n,n=r,r=e),typeof r!="string")throw new Error("No url passed to add resource to loader.");return typeof n=="function"&&(i=n,n=null),this._add(e,r,n,i)};var CB=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?As.shared:new As},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=wt.Application,t}(),TB=function(){function t(){}return t.add=function(){Pt.setExtensionLoadType("svg",Pt.LOAD_TYPE.XHR),Pt.setExtensionXhrType("svg",Pt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===Pt.TYPE.IMAGE||e.extension==="svg")){var n=e.data,i=e.url,a=e.name,o=e.metadata;Ve.fromLoader(n,i,a,o).then(function(s){e.texture=s,r()}).catch(r)}else r()},t.extension=wt.Loader,t}(),Cme="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Tme(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],i=[0,0,0,0],a=0;a<n.length;++a)r<t.length?n[a]=t.charCodeAt(r++)&255:n[a]=0;i[0]=n[0]>>2,i[1]=(n[0]&3)<<4|n[1]>>4,i[2]=(n[1]&15)<<2|n[2]>>6,i[3]=n[2]&63;var o=r-(t.length-1);switch(o){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var a=0;a<i.length;++a)e+=Cme.charAt(i[a])}return e}function Pme(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===Pt.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+Tme(t.xhr.responseText),t.type=Pt.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var n=globalThis.URL||globalThis.webkitURL,i=n.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.type=Pt.TYPE.IMAGE,t.data.onload=function(){n.revokeObjectURL(i),t.data.onload=null,e()};return}}e()}var Ome=function(){function t(){}return t.extension=wt.Loader,t.use=Pme,t}();ma.add(TB,Ome);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Et,Ke;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(Ke||(Ke={}));var _f=(Et={},Et[Ke.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Et[Ke.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Et[Ke.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Et[Ke.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Et[Ke.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Et[Ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Et[Ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Et[Ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Et[Ke.COMPRESSED_R11_EAC]=.5,Et[Ke.COMPRESSED_SIGNED_R11_EAC]=.5,Et[Ke.COMPRESSED_RG11_EAC]=1,Et[Ke.COMPRESSED_SIGNED_RG11_EAC]=1,Et[Ke.COMPRESSED_RGB8_ETC2]=.5,Et[Ke.COMPRESSED_RGBA8_ETC2_EAC]=1,Et[Ke.COMPRESSED_SRGB8_ETC2]=.5,Et[Ke.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Et[Ke.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Et[Ke.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Et[Ke.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Et[Ke.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Et[Ke.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Et[Ke.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Et[Ke.COMPRESSED_RGB_ETC1_WEBGL]=.5,Et[Ke.COMPRESSED_RGB_ATC_WEBGL]=.5,Et[Ke.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Et[Ke.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Et[Ke.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Et);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R_=function(t,e){return R_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},R_(t,e)};function PB(t,e){R_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Rme(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?a(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})}function Ime(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var OB=function(t){PB(e,t);function e(r,n){n===void 0&&(n={width:1,height:1,autoLoad:!0});var i=this,a,o;return typeof r=="string"?(a=r,o=new Uint8Array):(a=null,o=r),i=t.call(this,o,n)||this,i.origin=a,i.buffer=o?new wp(o):null,i.origin&&n.autoLoad!==!1&&i.load(),o&&o.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return Rme(this,void 0,Promise,function(){var r,n,i;return Ime(this,function(a){switch(a.label){case 0:return[4,fetch(this.origin)];case 1:return r=a.sent(),[4,r.blob()];case 2:return n=a.sent(),[4,n.arrayBuffer()];case 3:return i=a.sent(),this.data=new Uint32Array(i),this.buffer=new wp(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},e}(Ns),Ap=function(t){PB(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=e._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return e.prototype.upload=function(r,n,i){var a=r.gl,o=r.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var s=0,c=this.levels;s<c;s++){var l=this._levelBuffers[s],u=l.levelID,f=l.levelWidth,h=l.levelHeight,d=l.levelBuffer;a.compressedTexImage2D(a.TEXTURE_2D,u,this.format,f,h,0,d)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,n,i,a,o,s,c){for(var l=new Array(i),u=r.byteOffset,f=s,h=c,d=f+a-1&~(a-1),p=h+o-1&~(o-1),v=d*p*_f[n],y=0;y<i;y++)l[y]={levelID:y,levelWidth:i>1?f:d,levelHeight:i>1?h:p,levelBuffer:new Uint8Array(r.buffer,u,v)},u+=v,f=f>>1||1,h=h>>1||1,d=f+a-1&~(a-1),p=h+o-1&~(o-1),v=d*p*_f[n];return l},e}(OB),RB=function(){function t(){}return t.use=function(e,r){var n=e.data,i=this;if(e.type===Pt.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var a=n.textures,o=void 0,s=void 0,c=0,l=a.length;c<l;c++){var u=a[c],f=u.src,h=u.format;if(h||(s=f),t.textureFormats[h]){o=f;break}}if(o=o||s,!o){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(o===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=os.resolve(e.url.replace(i.baseUrl,""),o),v=n.cacheID;i.add(v,p,d,function(y){if(y.error){r(y.error);return}var g=y.texture,m=g===void 0?null:g,x=y.textures,b=x===void 0?{}:x;Object.assign(e,{texture:m,textures:b}),r()})}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=we.ADAPTER.createCanvas(),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var n={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=n}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;t._textureFormats={};for(var r in e){var n=e[r];n&&Object.assign(t._textureFormats,Object.getPrototypeOf(n))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=wt.Loader,t}();function IB(t,e,r){var n={textures:{},texture:null};if(!e)return n;var i=e.map(function(a){return new Ve(new ct(a,Object.assign({mipmap:Tn.OFF,alphaMode:Un.NO_PREMULTIPLIED_ALPHA},r)))});return i.forEach(function(a,o){var s=a.baseTexture,c=t+"-"+(o+1);ct.addToCache(s,c),Ve.addToCache(a,c),o===0&&(ct.addToCache(s,t),Ve.addToCache(a,t),n.texture=a),n.textures[c]=a}),n}var Ju,xi,_y=4,zh=124,Fme=32,xR=20,kme=542327876,Wh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Dme={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Xh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Ei;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ei||(Ei={}));var I_;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(I_||(I_={}));var Mme=1,Lme=2,Bme=4,Nme=64,jme=512,Ume=131072,$me=827611204,Vme=861165636,Gme=894720068,zme=808540228,Wme=4,Xme=(Ju={},Ju[$me]=Ke.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ju[Vme]=Ke.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ju[Gme]=Ke.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ju),Hme=(xi={},xi[Ei.DXGI_FORMAT_BC1_TYPELESS]=Ke.COMPRESSED_RGBA_S3TC_DXT1_EXT,xi[Ei.DXGI_FORMAT_BC1_UNORM]=Ke.COMPRESSED_RGBA_S3TC_DXT1_EXT,xi[Ei.DXGI_FORMAT_BC2_TYPELESS]=Ke.COMPRESSED_RGBA_S3TC_DXT3_EXT,xi[Ei.DXGI_FORMAT_BC2_UNORM]=Ke.COMPRESSED_RGBA_S3TC_DXT3_EXT,xi[Ei.DXGI_FORMAT_BC3_TYPELESS]=Ke.COMPRESSED_RGBA_S3TC_DXT5_EXT,xi[Ei.DXGI_FORMAT_BC3_UNORM]=Ke.COMPRESSED_RGBA_S3TC_DXT5_EXT,xi[Ei.DXGI_FORMAT_BC1_UNORM_SRGB]=Ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,xi[Ei.DXGI_FORMAT_BC2_UNORM_SRGB]=Ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,xi[Ei.DXGI_FORMAT_BC3_UNORM_SRGB]=Ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,xi);function FB(t){var e=new Uint32Array(t),r=e[0];if(r!==kme)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,zh/Uint32Array.BYTES_PER_ELEMENT),i=n[Wh.HEIGHT],a=n[Wh.WIDTH],o=n[Wh.MIPMAP_COUNT],s=new Uint32Array(t,Wh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Fme/Uint32Array.BYTES_PER_ELEMENT),c=s[Mme];if(c&Bme){var l=s[Dme.FOURCC];if(l!==zme){var u=Xme[l],f=_y+zh,h=new Uint8Array(t,f),d=new Ap(h,{format:u,width:a,height:i,levels:o});return[d]}var p=_y+zh,v=new Uint32Array(e.buffer,p,xR/Uint32Array.BYTES_PER_ELEMENT),y=v[Xh.DXGI_FORMAT],g=v[Xh.RESOURCE_DIMENSION],m=v[Xh.MISC_FLAG],x=v[Xh.ARRAY_SIZE],b=Hme[y];if(b===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+y);if(m===Wme)throw new Error("DDSParser does not support cubemap textures");if(g===I_.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var _=new Array,S=_y+zh+xR;if(x===1)_.push(new Uint8Array(t,S));else{for(var E=_f[b],w=0,C=a,A=i,P=0;P<o;P++){var T=Math.max(1,C+3&-4),O=Math.max(1,A+3&-4),R=T*O*E;w+=R,C=C>>>1,A=A>>>1}for(var F=S,P=0;P<x;P++)_.push(new Uint8Array(t,F,w)),F+=w}return _.map(function(D){return new Ap(D,{format:b,width:a,height:i,levels:o})})}throw c&Nme?new Error("DDSParser does not support uncompressed texture data."):c&jme?new Error("DDSParser does not supported YUV uncompressed texture data."):c&Ume?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&Lme?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Va,Sa,ec,_R=[171,75,84,88,32,49,49,187,13,10,26,10],Yme=67305985,_i={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},F_=64,k_=(Va={},Va[Le.UNSIGNED_BYTE]=1,Va[Le.UNSIGNED_SHORT]=2,Va[Le.INT]=4,Va[Le.UNSIGNED_INT]=4,Va[Le.FLOAT]=4,Va[Le.HALF_FLOAT]=8,Va),kB=(Sa={},Sa[be.RGBA]=4,Sa[be.RGB]=3,Sa[be.RG]=2,Sa[be.RED]=1,Sa[be.LUMINANCE]=1,Sa[be.LUMINANCE_ALPHA]=2,Sa[be.ALPHA]=1,Sa),DB=(ec={},ec[Le.UNSIGNED_SHORT_4_4_4_4]=2,ec[Le.UNSIGNED_SHORT_5_5_5_1]=2,ec[Le.UNSIGNED_SHORT_5_6_5]=2,ec);function MB(t,e,r){r===void 0&&(r=!1);var n=new DataView(e);if(!qme(t,n))return null;var i=n.getUint32(_i.ENDIANNESS,!0)===Yme,a=n.getUint32(_i.GL_TYPE,i),o=n.getUint32(_i.GL_FORMAT,i),s=n.getUint32(_i.GL_INTERNAL_FORMAT,i),c=n.getUint32(_i.PIXEL_WIDTH,i),l=n.getUint32(_i.PIXEL_HEIGHT,i)||1,u=n.getUint32(_i.PIXEL_DEPTH,i)||1,f=n.getUint32(_i.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=n.getUint32(_i.NUMBER_OF_FACES,i),d=n.getUint32(_i.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(_i.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||u!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var v=4,y=4,g=c+3&-4,m=l+3&-4,x=new Array(f),b=c*l;a===0&&(b=g*m);var _;if(a!==0?k_[a]?_=k_[a]*kB[o]:_=DB[a]:_=_f[s],_===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var S=r?Zme(n,p,i):null,E=b*_,w=E,C=c,A=l,P=g,T=m,O=F_+p,R=0;R<d;R++){for(var F=n.getUint32(O,i),D=O+4,V=0;V<f;V++){var Y=x[V];Y||(Y=x[V]=new Array(d)),Y[R]={levelID:R,levelWidth:d>1||a!==0?C:P,levelHeight:d>1||a!==0?A:T,levelBuffer:new Uint8Array(e,D,w)},D+=w}O+=F+4,O=O%4!==0?O+4-O%4:O,C=C>>1||1,A=A>>1||1,P=C+v-1&~(v-1),T=A+y-1&~(y-1),w=P*T*_}return a!==0?{uncompressed:x.map(function(W){var $=W[0].levelBuffer,I=!1;return a===Le.FLOAT?$=new Float32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4):a===Le.UNSIGNED_INT?(I=!0,$=new Uint32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4)):a===Le.INT&&(I=!0,$=new Int32Array(W[0].levelBuffer.buffer,W[0].levelBuffer.byteOffset,W[0].levelBuffer.byteLength/4)),{resource:new Ns($,{width:W[0].levelWidth,height:W[0].levelHeight}),type:a,format:I?Kme(o):o}}),kvData:S}:{compressed:x.map(function(W){return new Ap(null,{format:s,width:c,height:l,levels:d,levelBuffers:W})}),kvData:S}}function qme(t,e){for(var r=0;r<_R.length;r++)if(e.getUint8(r)!==_R[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}function Kme(t){switch(t){case be.RGBA:return be.RGBA_INTEGER;case be.RGB:return be.RGB_INTEGER;case be.RG:return be.RG_INTEGER;case be.RED:return be.RED_INTEGER;default:return t}}function Zme(t,e,r){for(var n=new Map,i=0;i<e;){var a=t.getUint32(F_+i,r),o=F_+i+4,s=3-(a+3)%4;if(a===0||a>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var c=0;c<a&&t.getUint8(o+c)!==0;c++);if(c===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=new TextDecoder().decode(new Uint8Array(t.buffer,o,c)),u=new DataView(t.buffer,o+c+1,a-c-1);n.set(l,u),i+=4+a+s}return n}Pt.setExtensionXhrType("dds",Pt.XHR_RESPONSE_TYPE.BUFFER);var LB=function(){function t(){}return t.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,IB(e.name||e.url,FB(e.data),e.metadata))}catch(n){r(n);return}r()},t.extension=wt.Loader,t}();Pt.setExtensionXhrType("ktx",Pt.XHR_RESPONSE_TYPE.BUFFER);var BB=function(){function t(){}return t.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var n=e.name||e.url,i=MB(n,e.data,this.loadKeyValueData),a=i.compressed,o=i.uncompressed,s=i.kvData;if(a){var c=IB(n,a,e.metadata);if(s&&c.textures)for(var l in c.textures)c.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(e,c)}else if(o){var u={};o.forEach(function(f,h){var d=new Ve(new ct(f.resource,{mipmap:Tn.OFF,alphaMode:Un.NO_PREMULTIPLIED_ALPHA,type:f.type,format:f.format})),p=n+"-"+(h+1);s&&(d.baseTexture.ktxKeyValueData=s),ct.addToCache(d.baseTexture,p),Ve.addToCache(d,p),h===0&&(u[n]=d,ct.addToCache(d.baseTexture,n),Ve.addToCache(d,n)),u[p]=d}),Object.assign(e,{textures:u})}}catch(f){r(f);return}r()},t.extension=wt.Loader,t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D_=function(t,e){return D_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},D_(t,e)};function NB(t,e){D_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Qme=function(t){NB(e,t);function e(r,n,i,a){r===void 0&&(r=1500),i===void 0&&(i=16384),a===void 0&&(a=!1);var o=t.call(this)||this,s=16384;return i>s&&(i=s),o._properties=[!1,!0,!1,!1,!1],o._maxSize=r,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=Ce.NORMAL,o.autoResize=a,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,kr(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var n=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return n.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var n=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Fr),bR=function(){function t(e,r,n){this.geometry=new Cu,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var a=e[i];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Le.FLOAT,offset:a.offset},r[i]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new Sr(kL(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];i.offset=r,r+=i.size,this.dynamicStride+=i.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=new Sr(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];i.offset=o,o+=i.size,this.staticStride+=i.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Sr(this.staticData,!0,!1);for(var n=0;n<this.dynamicProperties.length;++n){var i=this.dynamicProperties[n];e.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===Le.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var n=0;n<this.staticProperties.length;++n){var i=this.staticProperties[n];e.addAttribute(i.attributeName,this.staticBuffer,0,i.type===Le.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},t.prototype.uploadDynamic=function(e,r,n){for(var i=0;i<this.dynamicProperties.length;i++){var a=this.dynamicProperties[i];a.uploadFunction(e,r,n,a.type===Le.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(e,r,n){for(var i=0;i<this.staticProperties.length;i++){var a=this.staticProperties[i];a.uploadFunction(e,r,n,a.type===Le.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Jme=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,ege=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,jB=function(t){NB(e,t);function e(r){var n=t.call(this,r)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Jt,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Le.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=La.from(ege,Jme,{}),n.state=jo.for2d(),n}return e.prototype.render=function(r){var n=r.children,i=r._maxSize,a=r._batchSize,o=this.renderer,s=n.length;if(s!==0){s>i&&!r.autoResize&&(s=i);var c=r._buffers;c||(c=r._buffers=this.generateBuffers(r));var l=n[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=kE(r.blendMode,u),o.state.set(this.state);var f=o.gl,h=r.worldTransform.copyTo(this.tempMatrix);h.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=FL(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);for(var d=!1,p=0,v=0;p<s;p+=a,v+=1){var y=s-p;y>a&&(y=a),v>=c.length&&c.push(this._generateOneMoreBuffer(r));var g=c[v];g.uploadDynamic(n,p,y);var m=r._bufferUpdateIDs[v]||0;d=d||g._updateID<m,d&&(g._updateID=r._updateID,g.uploadStatic(n,p,y)),o.geometry.bind(g.geometry),f.drawElements(f.TRIANGLES,y*6,f.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var n=[],i=r._maxSize,a=r._batchSize,o=r._properties,s=0;s<i;s+=a)n.push(new bR(this.properties,o,a));return n},e.prototype._generateOneMoreBuffer=function(r){var n=r._batchSize,i=r._properties;return new bR(this.properties,i,n)},e.prototype.uploadVertices=function(r,n,i,a,o,s){for(var c=0,l=0,u=0,f=0,h=0;h<i;++h){var d=r[n+h],p=d._texture,v=d.scale.x,y=d.scale.y,g=p.trim,m=p.orig;g?(l=g.x-d.anchor.x*m.width,c=l+g.width,f=g.y-d.anchor.y*m.height,u=f+g.height):(c=m.width*(1-d.anchor.x),l=m.width*-d.anchor.x,u=m.height*(1-d.anchor.y),f=m.height*-d.anchor.y),a[s]=l*v,a[s+1]=f*y,a[s+o]=c*v,a[s+o+1]=f*y,a[s+o*2]=c*v,a[s+o*2+1]=u*y,a[s+o*3]=l*v,a[s+o*3+1]=u*y,s+=o*4}},e.prototype.uploadPosition=function(r,n,i,a,o,s){for(var c=0;c<i;c++){var l=r[n+c].position;a[s]=l.x,a[s+1]=l.y,a[s+o]=l.x,a[s+o+1]=l.y,a[s+o*2]=l.x,a[s+o*2+1]=l.y,a[s+o*3]=l.x,a[s+o*3+1]=l.y,s+=o*4}},e.prototype.uploadRotation=function(r,n,i,a,o,s){for(var c=0;c<i;c++){var l=r[n+c].rotation;a[s]=l,a[s+o]=l,a[s+o*2]=l,a[s+o*3]=l,s+=o*4}},e.prototype.uploadUvs=function(r,n,i,a,o,s){for(var c=0;c<i;++c){var l=r[n+c]._texture._uvs;l?(a[s]=l.x0,a[s+1]=l.y0,a[s+o]=l.x1,a[s+o+1]=l.y1,a[s+o*2]=l.x2,a[s+o*2+1]=l.y2,a[s+o*3]=l.x3,a[s+o*3+1]=l.y3,s+=o*4):(a[s]=0,a[s+1]=0,a[s+o]=0,a[s+o+1]=0,a[s+o*2]=0,a[s+o*2+1]=0,a[s+o*3]=0,a[s+o*3+1]=0,s+=o*4)}},e.prototype.uploadTint=function(r,n,i,a,o,s){for(var c=0;c<i;++c){var l=r[n+c],u=l._texture.baseTexture.alphaMode>0,f=l.alpha,h=f<1&&u?uv(l._tintRGB,f):l._tintRGB+(f*255<<24);a[s]=h,a[s+o]=h,a[s+o*2]=h,a[s+o*3]=h,s+=o*4}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:wt.RendererPlugin},e}(th);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ki;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(Ki||(Ki={}));var ka;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(ka||(ka={}));var ql={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(e===void 0&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},fw=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Ve.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ve.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M_=function(t,e){return M_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},M_(t,e)};function hw(t,e){M_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function SR(t,e){var r,n;e===void 0&&(e=!1);var i=t.length;if(!(i<6)){for(var a=0,o=0,s=t[i-2],c=t[i-1];o<i;o+=2){var l=t[o],u=t[o+1];a+=(l-s)*(u+c),s=l,c=u}if(!e&&a>0||e&&a<=0)for(var f=i/2,o=f+f%2;o<i;o+=2){var h=i-o-2,d=i-o-1,p=o,v=o+1;r=[t[p],t[h]],t[h]=r[0],t[p]=r[1],n=[t[v],t[d]],t[d]=n[0],t[v]=n[1]}}}var dw={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,n=t.holes,i=e.points,a=e.indices;if(r.length>=6){SR(r,!1);for(var o=[],s=0;s<n.length;s++){var c=n[s];SR(c.points,!0),o.push(r.length/2),r=r.concat(c.points)}var l=SE(r,o,2);if(!l)return;for(var u=i.length/2,s=0;s<l.length;s+=3)a.push(l[s]+u),a.push(l[s+1]+u),a.push(l[s+2]+u);for(var s=0;s<r.length;s++)i.push(r[s])}}},bf={build:function(t){var e=t.points,r,n,i,a,o,s;if(t.type===Rr.CIRC){var c=t.shape;r=c.x,n=c.y,o=s=c.radius,i=a=0}else if(t.type===Rr.ELIP){var l=t.shape;r=l.x,n=l.y,o=l.width,s=l.height,i=a=0}else{var u=t.shape,f=u.width/2,h=u.height/2;r=u.x+f,n=u.y+h,o=s=Math.max(0,Math.min(u.radius,Math.min(f,h))),i=f-o,a=h-s}if(!(o>=0&&s>=0&&i>=0&&a>=0)){e.length=0;return}var d=Math.ceil(2.3*Math.sqrt(o+s)),p=d*8+(i?4:0)+(a?4:0);if(e.length=p,p!==0){if(d===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+a,e[2]=e[4]=r-i,e[5]=e[7]=n-a;return}var v=0,y=d*4+(i?2:0)+2,g=y,m=p;{var x=i+o,b=a,_=r+x,S=r-x,E=n+b;if(e[v++]=_,e[v++]=E,e[--y]=E,e[--y]=S,a){var w=n-b;e[g++]=S,e[g++]=w,e[--m]=w,e[--m]=_}}for(var C=1;C<d;C++){var A=Math.PI/2*(C/d),x=i+Math.cos(A)*o,b=a+Math.sin(A)*s,_=r+x,S=r-x,E=n+b,w=n-b;e[v++]=_,e[v++]=E,e[--y]=E,e[--y]=S,e[g++]=S,e[g++]=w,e[--m]=w,e[--m]=_}{var x=i,b=a+s,_=r+x,S=r-x,E=n+b,w=n-b;e[v++]=_,e[v++]=E,e[--m]=w,e[--m]=_,i&&(e[v++]=S,e[v++]=E,e[--m]=w,e[--m]=S)}}},triangulate:function(t,e){var r=t.points,n=e.points,i=e.indices;if(r.length!==0){var a=n.length/2,o=a,s,c;if(t.type!==Rr.RREC){var l=t.shape;s=l.x,c=l.y}else{var u=t.shape;s=u.x+u.width/2,c=u.y+u.height/2}var f=t.matrix;n.push(t.matrix?f.a*s+f.c*c+f.tx:s,t.matrix?f.b*s+f.d*c+f.ty:c),a++,n.push(r[0],r[1]);for(var h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),i.push(a++,o,a);i.push(o+1,o,a)}}},UB={build:function(t){var e=t.shape,r=e.x,n=e.y,i=e.width,a=e.height,o=t.points;o.length=0,o.push(r,n,r+i,n,r+i,n+a,r,n+a)},triangulate:function(t,e){var r=t.points,n=e.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function Js(t,e,r){var n=e-t;return t+n*r}function Hh(t,e,r,n,i,a,o){o===void 0&&(o=[]);for(var s=20,c=o,l=0,u=0,f=0,h=0,d=0,p=0,v=0,y=0;v<=s;++v)y=v/s,l=Js(t,r,y),u=Js(e,n,y),f=Js(r,i,y),h=Js(n,a,y),d=Js(l,f,y),p=Js(u,h,y),!(v===0&&c[c.length-2]===d&&c[c.length-1]===p)&&c.push(d,p);return c}var $B={build:function(t){if(Kl.nextRoundedRectBehavior){bf.build(t);return}var e=t.shape,r=t.points,n=e.x,i=e.y,a=e.width,o=e.height,s=Math.max(0,Math.min(e.radius,Math.min(a,o)/2));r.length=0,s?(Hh(n,i+s,n,i,n+s,i,r),Hh(n+a-s,i,n+a,i,n+a,i+s,r),Hh(n+a,i+o-s,n+a,i+o,n+a-s,i+o,r),Hh(n+s,i+o,n,i+o,n,i+o-s,r)):r.push(n,i,n+a,i,n+a,i+o,n,i+o)},triangulate:function(t,e){if(Kl.nextRoundedRectBehavior){bf.triangulate(t,e);return}for(var r=t.points,n=e.points,i=e.indices,a=n.length/2,o=SE(r,null,2),s=0,c=o.length;s<c;s+=3)i.push(o[s]+a),i.push(o[s+1]+a),i.push(o[s+2]+a);for(var s=0,c=r.length;s<c;s++)n.push(r[s],r[++s])}};function ER(t,e,r,n,i,a,o,s){var c=t-r*i,l=e-n*i,u=t+r*a,f=e+n*a,h,d;o?(h=n,d=-r):(h=-n,d=r);var p=c+h,v=l+d,y=u+h,g=f+d;return s.push(p,v),s.push(y,g),2}function Go(t,e,r,n,i,a,o,s){var c=r-t,l=n-e,u=Math.atan2(c,l),f=Math.atan2(i-t,a-e);s&&u<f?u+=Math.PI*2:!s&&u>f&&(f+=Math.PI*2);var h=u,d=f-u,p=Math.abs(d),v=Math.sqrt(c*c+l*l),y=(15*p*Math.sqrt(v)/Math.PI>>0)+1,g=d/y;if(h+=g,s){o.push(t,e),o.push(r,n);for(var m=1,x=h;m<y;m++,x+=g)o.push(t,e),o.push(t+Math.sin(x)*v,e+Math.cos(x)*v);o.push(t,e),o.push(i,a)}else{o.push(r,n),o.push(t,e);for(var m=1,x=h;m<y;m++,x+=g)o.push(t+Math.sin(x)*v,e+Math.cos(x)*v),o.push(t,e);o.push(i,a),o.push(t,e)}return y*2}function tge(t,e){var r=t.shape,n=t.points||r.points.slice(),i=e.closePointEps;if(n.length!==0){var a=t.lineStyle,o=new it(n[0],n[1]),s=new it(n[n.length-2],n[n.length-1]),c=r.type!==Rr.POLY||r.closeStroke,l=Math.abs(o.x-s.x)<i&&Math.abs(o.y-s.y)<i;if(c){n=n.slice(),l&&(n.pop(),n.pop(),s.set(n[n.length-2],n[n.length-1]));var u=(o.x+s.x)*.5,f=(s.y+o.y)*.5;n.unshift(u,f),n.push(u,f)}var h=e.points,d=n.length/2,p=n.length,v=h.length/2,y=a.width/2,g=y*y,m=a.miterLimit*a.miterLimit,x=n[0],b=n[1],_=n[2],S=n[3],E=0,w=0,C=-(b-S),A=x-_,P=0,T=0,O=Math.sqrt(C*C+A*A);C/=O,A/=O,C*=y,A*=y;var R=a.alignment,F=(1-R)*2,D=R*2;c||(a.cap===ka.ROUND?p+=Go(x-C*(F-D)*.5,b-A*(F-D)*.5,x-C*F,b-A*F,x+C*D,b+A*D,h,!0)+2:a.cap===ka.SQUARE&&(p+=ER(x,b,C,A,F,D,!0,h))),h.push(x-C*F,b-A*F),h.push(x+C*D,b+A*D);for(var V=1;V<d-1;++V){x=n[(V-1)*2],b=n[(V-1)*2+1],_=n[V*2],S=n[V*2+1],E=n[(V+1)*2],w=n[(V+1)*2+1],C=-(b-S),A=x-_,O=Math.sqrt(C*C+A*A),C/=O,A/=O,C*=y,A*=y,P=-(S-w),T=_-E,O=Math.sqrt(P*P+T*T),P/=O,T/=O,P*=y,T*=y;var Y=_-x,W=b-S,$=_-E,I=w-S,B=Y*$+W*I,L=W*$-I*Y,M=L<0;if(Math.abs(L)<.001*Math.abs(B)){h.push(_-C*F,S-A*F),h.push(_+C*D,S+A*D),B>=0&&(a.join===Ki.ROUND?p+=Go(_,S,_-C*F,S-A*F,_-P*F,S-T*F,h,!1)+4:p+=2,h.push(_-P*D,S-T*D),h.push(_+P*F,S+T*F));continue}var X=(-C+x)*(-A+S)-(-C+_)*(-A+b),K=(-P+E)*(-T+S)-(-P+_)*(-T+w),ne=(Y*K-$*X)/L,te=(I*X-W*K)/L,ce=(ne-_)*(ne-_)+(te-S)*(te-S),de=_+(ne-_)*F,se=S+(te-S)*F,fe=_-(ne-_)*D,oe=S-(te-S)*D,he=Math.min(Y*Y+W*W,$*$+I*I),Pe=M?F:D,Ie=he+Pe*Pe*g,Ee=ce<=Ie;Ee?a.join===Ki.BEVEL||ce/g>m?(M?(h.push(de,se),h.push(_+C*D,S+A*D),h.push(de,se),h.push(_+P*D,S+T*D)):(h.push(_-C*F,S-A*F),h.push(fe,oe),h.push(_-P*F,S-T*F),h.push(fe,oe)),p+=2):a.join===Ki.ROUND?M?(h.push(de,se),h.push(_+C*D,S+A*D),p+=Go(_,S,_+C*D,S+A*D,_+P*D,S+T*D,h,!0)+4,h.push(de,se),h.push(_+P*D,S+T*D)):(h.push(_-C*F,S-A*F),h.push(fe,oe),p+=Go(_,S,_-C*F,S-A*F,_-P*F,S-T*F,h,!1)+4,h.push(_-P*F,S-T*F),h.push(fe,oe)):(h.push(de,se),h.push(fe,oe)):(h.push(_-C*F,S-A*F),h.push(_+C*D,S+A*D),a.join===Ki.ROUND?M?p+=Go(_,S,_+C*D,S+A*D,_+P*D,S+T*D,h,!0)+2:p+=Go(_,S,_-C*F,S-A*F,_-P*F,S-T*F,h,!1)+2:a.join===Ki.MITER&&ce/g<=m&&(M?(h.push(fe,oe),h.push(fe,oe)):(h.push(de,se),h.push(de,se)),p+=2),h.push(_-P*F,S-T*F),h.push(_+P*D,S+T*D),p+=2)}x=n[(d-2)*2],b=n[(d-2)*2+1],_=n[(d-1)*2],S=n[(d-1)*2+1],C=-(b-S),A=x-_,O=Math.sqrt(C*C+A*A),C/=O,A/=O,C*=y,A*=y,h.push(_-C*F,S-A*F),h.push(_+C*D,S+A*D),c||(a.cap===ka.ROUND?p+=Go(_-C*(F-D)*.5,S-A*(F-D)*.5,_-C*F,S-A*F,_+C*D,S+A*D,h,!1)+2:a.cap===ka.SQUARE&&(p+=ER(_,S,C,A,F,D,!1,h)));for(var Be=e.indices,qe=ql.epsilon*ql.epsilon,V=v;V<p+v-2;++V)x=h[V*2],b=h[V*2+1],_=h[(V+1)*2],S=h[(V+1)*2+1],E=h[(V+2)*2],w=h[(V+2)*2+1],!(Math.abs(x*(S-w)+_*(w-b)+E*(b-S))<qe)&&Be.push(V,V+1,V+2)}}function rge(t,e){var r=0,n=t.shape,i=t.points||n.points,a=n.type!==Rr.POLY||n.closeStroke;if(i.length!==0){var o=e.points,s=e.indices,c=i.length/2,l=o.length/2,u=l;for(o.push(i[0],i[1]),r=1;r<c;r++)o.push(i[r*2],i[r*2+1]),s.push(u,u+1),u++;a&&s.push(u,l)}}function L_(t,e){t.lineStyle.native?rge(t,e):tge(t,e)}var B_=function(){function t(){}return t.curveTo=function(e,r,n,i,a,o){var s=o[o.length-2],c=o[o.length-1],l=c-r,u=s-e,f=i-r,h=n-e,d=Math.abs(l*h-u*f);if(d<1e-8||a===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;var p=l*l+u*u,v=f*f+h*h,y=l*f+u*h,g=a*Math.sqrt(p)/d,m=a*Math.sqrt(v)/d,x=g*y/p,b=m*y/v,_=g*h+m*u,S=g*f+m*l,E=u*(m+x),w=l*(m+x),C=h*(g+b),A=f*(g+b),P=Math.atan2(w-S,E-_),T=Math.atan2(A-S,C-_);return{cx:_+e,cy:S+r,radius:a,startAngle:P,endAngle:T,anticlockwise:u*f>h*l}},t.arc=function(e,r,n,i,a,o,s,c,l){for(var u=s-o,f=ql._segmentsCount(Math.abs(u)*a,Math.ceil(Math.abs(u)/gf)*40),h=u/(f*2),d=h*2,p=Math.cos(h),v=Math.sin(h),y=f-1,g=y%1/y,m=0;m<=y;++m){var x=m+g*m,b=h+o+d*x,_=Math.cos(b),S=-Math.sin(b);l.push((p*_+v*S)*a+n,(p*-S+v*_)*a+i)}},t}(),VB=function(){function t(){}return t.curveLength=function(e,r,n,i,a,o,s,c){for(var l=10,u=0,f=0,h=0,d=0,p=0,v=0,y=0,g=0,m=0,x=0,b=0,_=e,S=r,E=1;E<=l;++E)f=E/l,h=f*f,d=h*f,p=1-f,v=p*p,y=v*p,g=y*e+3*v*f*n+3*p*h*a+d*s,m=y*r+3*v*f*i+3*p*h*o+d*c,x=_-g,b=S-m,_=g,S=m,u+=Math.sqrt(x*x+b*b);return u},t.curveTo=function(e,r,n,i,a,o,s){var c=s[s.length-2],l=s[s.length-1];s.length-=2;var u=ql._segmentsCount(t.curveLength(c,l,e,r,n,i,a,o)),f=0,h=0,d=0,p=0,v=0;s.push(c,l);for(var y=1,g=0;y<=u;++y)g=y/u,f=1-g,h=f*f,d=h*f,p=g*g,v=p*g,s.push(d*c+3*h*g*e+3*f*p*n+v*a,d*l+3*h*g*r+3*f*p*i+v*o)},t}(),GB=function(){function t(){}return t.curveLength=function(e,r,n,i,a,o){var s=e-2*n+a,c=r-2*i+o,l=2*n-2*e,u=2*i-2*r,f=4*(s*s+c*c),h=4*(s*l+c*u),d=l*l+u*u,p=2*Math.sqrt(f+h+d),v=Math.sqrt(f),y=2*f*v,g=2*Math.sqrt(d),m=h/v;return(y*p+v*h*(p-g)+(4*d*f-h*h)*Math.log((2*v+m+p)/(m+g)))/(4*y)},t.curveTo=function(e,r,n,i,a){for(var o=a[a.length-2],s=a[a.length-1],c=ql._segmentsCount(t.curveLength(o,s,e,r,n,i)),l=0,u=0,f=1;f<=c;++f){var h=f/c;l=o+(e-o)*h,u=s+(r-s)*h,a.push(l+(e+(n-e)*h-l)*h,u+(r+(i-r)*h-u)*h)}},t}(),zB=function(){function t(){this.reset()}return t.prototype.begin=function(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n},t.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),zo,Pd=(zo={},zo[Rr.POLY]=dw,zo[Rr.CIRC]=bf,zo[Rr.ELIP]=bf,zo[Rr.RECT]=UB,zo[Rr.RREC]=$B,zo),N_=[],mc=[],j_=function(){function t(e,r,n,i){r===void 0&&(r=null),n===void 0&&(n=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),el=new it,WB=function(t){hw(e,t);function e(){var r=t.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new yf,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),mc.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var n=this.batches[r];n.reset(),N_.push(n)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,n,i,a){n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=null);var o=new j_(r,n,i,a);return this.graphicsData.push(o),this.dirty++,this},e.prototype.drawHole=function(r,n){if(n===void 0&&(n=null),!this.graphicsData.length)return null;var i=new j_(r,null,null,n),a=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=a.lineStyle,a.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var n=this.graphicsData,i=0;i<n.length;++i){var a=n[i];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(r,el):el.copyFrom(r),a.shape.contains(el.x,el.y))){var o=!1;if(a.holes)for(var s=0;s<a.holes.length;s++){var c=a.holes[s];if(c.shape.contains(el.x,el.y)){o=!0;break}}if(!o)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,n=this.graphicsData,i=null,a=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],a=i.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var s=n[o],c=s.fillStyle,l=s.lineStyle,u=Pd[s.type];u.build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(c.visible||l.visible)&&this.processHoles(s.holes);for(var f=0;f<2;f++){var h=f===0?c:l;if(h.visible){var d=h.texture.baseTexture,p=this.indices.length,v=this.points.length/2;d.wrapMode=Ii.REPEAT,f===0?this.processFill(s):this.processLine(s);var y=this.points.length/2-v;y!==0&&(i&&!this._compareStyles(a,h)&&(i.end(p,v),i=null),i||(i=N_.pop()||new zB,i.begin(h,p,v),this.batches.push(i),a=h),this.addUvs(this.points,r,h.texture,v,y,h.matrix))}}}var g=this.indices.length,m=this.points.length/2;if(i&&i.end(g,m),this.batches.length===0){this.batchable=!0;return}var x=m>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&x===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=x?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,n){return!(!r||!n||r.texture.baseTexture!==n.texture.baseTexture||r.color+r.alpha!==n.color+n.alpha||!!r.native!=!!n.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,n=this.graphicsData.length;r<n;r++){var i=this.graphicsData[r],a=i.fillStyle,o=i.lineStyle;if(a&&!a.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,n=0,i=r.length;n<i;n++)for(var a=r[n],o=0;o<a.size;o++){var s=a.start+o;this.indicesUint16[s]=this.indicesUint16[s]-a.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,n=0;n<r.length;n++)if(r[n].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++ct._globalBatch,n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),mc.push(this.drawCalls[n]);this.drawCalls.length=0;var i=this.colors,a=this.textureIds,o=mc.pop();o||(o=new Sp,o.texArray=new Ep),o.texArray.count=0,o.start=0,o.size=0,o.type=Wn.TRIANGLES;var s=0,c=null,l=0,u=!1,f=Wn.TRIANGLES,h=0;this.drawCalls.push(o);for(var n=0;n<this.batches.length;n++){var d=this.batches[n],p=8,v=d.style,y=v.texture.baseTexture;u!==!!v.native&&(u=!!v.native,f=u?Wn.LINES:Wn.TRIANGLES,c=null,s=p,r++),c!==y&&(c=y,y._batchEnabled!==r&&(s===p&&(r++,s=0,o.size>0&&(o=mc.pop(),o||(o=new Sp,o.texArray=new Ep),this.drawCalls.push(o)),o.start=h,o.size=0,o.texArray.count=0,o.type=f),y.touched=1,y._batchEnabled=r,y._batchLocation=s,y.wrapMode=Ii.REPEAT,o.texArray.elements[o.texArray.count++]=y,s++)),o.size+=d.size,h+=d.size,l=y._batchLocation,this.addColors(i,v.color,v.alpha,d.attribSize,d.attribStart),this.addTextureIds(a,l,d.attribSize,d.attribStart)}ct._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,n=this.uvs,i=this.colors,a=this.textureIds,o=new ArrayBuffer(r.length*3*4),s=new Float32Array(o),c=new Uint32Array(o),l=0,u=0;u<r.length/2;u++)s[l++]=r[u*2],s[l++]=r[u*2+1],s[l++]=n[u*2],s[l++]=n[u*2+1],c[l++]=i[u],s[l++]=a[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)dw.triangulate(r,this);else{var n=Pd[r.type];n.triangulate(r,this)}},e.prototype.processLine=function(r){L_(r,this);for(var n=0;n<r.holes.length;n++)L_(r.holes[n],this)},e.prototype.processHoles=function(r){for(var n=0;n<r.length;n++){var i=r[n],a=Pd[i.type];a.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,n){for(var i=0;i<r.length/2;i++){var a=r[i*2],o=r[i*2+1];r[i*2]=n.a*a+n.c*o+n.tx,r[i*2+1]=n.b*a+n.d*o+n.ty}},e.prototype.addColors=function(r,n,i,a,o){o===void 0&&(o=0);var s=(n>>16)+(n&65280)+((n&255)<<16),c=uv(s,i);r.length=Math.max(r.length,o+a);for(var l=0;l<a;l++)r[o+l]=c},e.prototype.addTextureIds=function(r,n,i,a){a===void 0&&(a=0),r.length=Math.max(r.length,a+i);for(var o=0;o<i;o++)r[a+o]=n},e.prototype.addUvs=function(r,n,i,a,o,s){s===void 0&&(s=null);for(var c=0,l=n.length,u=i.frame;c<o;){var f=r[(a+c)*2],h=r[(a+c)*2+1];if(s){var d=s.a*f+s.c*h+s.tx;h=s.b*f+s.d*h+s.ty,f=d}c++,n.push(f/u.width,h/u.height)}var p=i.baseTexture;(u.width<p.width||u.height<p.height)&&this.adjustUvs(n,i,l,o)},e.prototype.adjustUvs=function(r,n,i,a){for(var o=n.baseTexture,s=1e-6,c=i+a*2,l=n.frame,u=l.width/o.width,f=l.height/o.height,h=l.x/l.width,d=l.y/l.height,p=Math.floor(r[i]+s),v=Math.floor(r[i+1]+s),y=i+2;y<c;y+=2)p=Math.min(p,Math.floor(r[y]+s)),v=Math.min(v,Math.floor(r[y+1]+s));h-=p,d-=v;for(var y=i;y<c;y+=2)r[y]=(r[y]+h)*u,r[y+1]=(r[y+1]+d)*f},e.BATCHABLE_SIZE=100,e}(lw),XB=function(t){hw(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=ka.BUTT,r.join=Ki.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(fw),nge=new Float32Array(3),by={},Kl=function(t){hw(e,t);function e(r){r===void 0&&(r=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new fw,n._lineStyle=new XB,n._matrix=null,n._holeMode=!1,n.state=jo.for2d(),n._geometry=r||new WB,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=Ce.NORMAL,n}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,n,i,a,o){return r===void 0&&(r=null),n===void 0&&(n=0),i===void 0&&(i=1),a===void 0&&(a=.5),o===void 0&&(o=!1),typeof r=="number"&&(r={width:r,color:n,alpha:i,alignment:a,native:o}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:Ve.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ka.BUTT,join:Ki.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var n=r.width>0&&r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:n},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new kl,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[n-2],r[n-1]))}else this.currentPath=new kl,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,n){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=n,this},e.prototype.lineTo=function(r,n){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,a=i[i.length-2],o=i[i.length-1];return(a!==r||o!==n)&&i.push(r,n),this},e.prototype._initCurve=function(r,n){r===void 0&&(r=0),n===void 0&&(n=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,n]):this.moveTo(r,n)},e.prototype.quadraticCurveTo=function(r,n,i,a){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),GB.curveTo(r,n,i,a,o),this},e.prototype.bezierCurveTo=function(r,n,i,a,o,s){return this._initCurve(),VB.curveTo(r,n,i,a,o,s,this.currentPath.points),this},e.prototype.arcTo=function(r,n,i,a,o){this._initCurve(r,n);var s=this.currentPath.points,c=B_.curveTo(r,n,i,a,o,s);if(c){var l=c.cx,u=c.cy,f=c.radius,h=c.startAngle,d=c.endAngle,p=c.anticlockwise;this.arc(l,u,f,h,d,p)}return this},e.prototype.arc=function(r,n,i,a,o,s){if(s===void 0&&(s=!1),a===o)return this;!s&&o<=a?o+=gf:s&&a<=o&&(a+=gf);var c=o-a;if(c===0)return this;var l=r+Math.cos(a)*i,u=n+Math.sin(a)*i,f=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var d=Math.abs(h[h.length-2]-l),p=Math.abs(h[h.length-1]-u);d<f&&p<f||h.push(l,u)}else this.moveTo(l,u),h=this.currentPath.points;return B_.arc(l,u,r,n,i,a,o,s,h),this},e.prototype.beginFill=function(r,n){return r===void 0&&(r=0),n===void 0&&(n=1),this.beginTextureFill({texture:Ve.WHITE,color:r,alpha:n})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:Ve.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var n=r.alpha>0;return n?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:n},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,n,i,a){return this.drawShape(new at(r,n,i,a))},e.prototype.drawRoundedRect=function(r,n,i,a,o){return this.drawShape(new $L(r,n,i,a,o))},e.prototype.drawCircle=function(r,n,i){return this.drawShape(new jL(r,n,i))},e.prototype.drawEllipse=function(r,n,i,a){return this.drawShape(new UL(r,n,i,a))},e.prototype.drawPolygon=function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];var a,o=!0,s=n[0];s.points?(o=s.closeStroke,a=s.points):Array.isArray(n[0])?a=n[0]:a=n;var c=new kl(a);return c.closeStroke=o,this.drawShape(c),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===Rr.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,n=this.blendMode,i=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(r.points);for(var a=0;a<i;a++){var o=r.batches[a],s=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(r.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(r.indicesUint16.buffer,o.start*2,o.size),f={vertexData:c,blendMode:n,indices:u,uvs:l,_batchRGB:kr(s),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[a]=f}},e.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var n=0,i=this.batches.length;n<i;n++){var a=this.batches[n];a.worldAlpha=this.worldAlpha*a.alpha,r.plugins[this.pluginName].render(a)}}},e.prototype._renderDirect=function(r){var n=this._resolveDirectShader(r),i=this._geometry,a=this.tint,o=this.worldAlpha,s=n.uniforms,c=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(a>>16&255)/255*o,s.tint[1]=(a>>8&255)/255*o,s.tint[2]=(a&255)/255*o,s.tint[3]=o,r.shader.bind(n),r.geometry.bind(i,n),r.state.set(this.state);for(var l=0,u=c.length;l<u;l++)this._renderDrawCallDirect(r,i.drawCalls[l])},e.prototype._renderDrawCallDirect=function(r,n){for(var i=n.texArray,a=n.type,o=n.size,s=n.start,c=i.count,l=0;l<c;l++)r.texture.bind(i.elements[l],l);r.geometry.draw(a,o,s)},e.prototype._resolveDirectShader=function(r){var n=this.shader,i=this.pluginName;if(!n){if(!by[i]){for(var a=r.plugins[i].MAX_TEXTURES,o=new Int32Array(a),s=0;s<a;s++)o[s]=s;var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jt,default:bo.from({uSamplers:o},!0)},l=r.plugins[i]._shader.program;by[i]=new La(l,c)}n=by[i]}return n},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var n=r.bounds,i=n.minX,a=n.minY,o=n.maxX,s=n.maxY;this._bounds.addFrame(this.transform,i,a,o,s)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=kr(this.tint,nge),n=0;n<this.batches.length;n++){var i=this.batches[n],a=i._batchRGB,o=r[0]*a[0]*255,s=r[1]*a[1]*255,c=r[2]*a[2]*255,l=(o<<16)+(s<<8)+(c|0);i._tintRGB=(l>>16)+(l&65280)+((l&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var n=this.transform.worldTransform,i=n.a,a=n.b,o=n.c,s=n.d,c=n.tx,l=n.ty,u=this._geometry.points,f=this.vertexData,h=0,d=0;d<u.length;d+=2){var p=u[d],v=u[d+1];f[h++]=i*p+o*v+c,f[h++]=s*v+a*p+l}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new it,e}(Fr),ige={buildPoly:dw,buildCircle:bf,buildRectangle:UB,buildRoundedRectangle:$B,buildLine:L_,ArcUtils:B_,BezierUtils:VB,QuadraticUtils:GB,BatchPart:zB,FILL_COMMANDS:Pd,BATCH_POOL:N_,DRAW_CALL_POOL:mc};/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U_=function(t,e){return U_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},U_(t,e)};function age(t,e){U_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var tc=new it,oge=new Uint16Array([0,1,2,0,2,3]),ui=function(t){age(e,t);function e(r){var n=t.call(this)||this;return n._anchor=new ao(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Ce.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=r||Ve.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=oge,n.pluginName="batch",n.isSprite=!0,n._roundPixels=we.ROUND_PIXELS,n}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ss(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ss(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var n=this.transform.worldTransform,i=n.a,a=n.b,o=n.c,s=n.d,c=n.tx,l=n.ty,u=this.vertexData,f=r.trim,h=r.orig,d=this._anchor,p=0,v=0,y=0,g=0;if(f?(v=f.x-d._x*h.width,p=v+f.width,g=f.y-d._y*h.height,y=g+f.height):(v=-d._x*h.width,p=v+h.width,g=-d._y*h.height,y=g+h.height),u[0]=i*v+o*g+c,u[1]=s*g+a*v+l,u[2]=i*p+o*g+c,u[3]=s*g+a*p+l,u[4]=i*p+o*y+c,u[5]=s*y+a*p+l,u[6]=i*v+o*y+c,u[7]=s*y+a*v+l,this._roundPixels)for(var m=we.RESOLUTION,x=0;x<u.length;++x)u[x]=Math.round((u[x]*m|0)/m)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,n=this.vertexTrimmedData,i=r.orig,a=this._anchor,o=this.transform.worldTransform,s=o.a,c=o.b,l=o.c,u=o.d,f=o.tx,h=o.ty,d=-a._x*i.width,p=d+i.width,v=-a._y*i.height,y=v+i.height;n[0]=s*d+l*v+f,n[1]=u*v+c*d+h,n[2]=s*p+l*v+f,n[3]=u*v+c*p+h,n[4]=s*p+l*y+f,n[5]=u*y+c*p+h,n[6]=s*d+l*y+f,n[7]=u*y+c*d+h},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,n=this._texture.orig;!r||r.width===n.width&&r.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new yf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new at),r=this._localBoundsRect),this._localBounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,tc);var n=this._texture.orig.width,i=this._texture.orig.height,a=-n*this.anchor.x,o=0;return tc.x>=a&&tc.x<a+n&&(o=-i*this.anchor.y,tc.y>=o&&tc.y<o+i)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n=typeof r=="boolean"?r:r&&r.texture;if(n){var i=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(r,n){var i=r instanceof Ve?r:Ve.from(r,n);return new e(i)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var n=ss(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var n=ss(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Ve.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Fr);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $_=function(t,e){return $_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},$_(t,e)};function sge(t,e){$_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Zl;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Zl||(Zl={}));var Sy={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Zl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},lge=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Cs=function(){function t(e){this.styleID=0,this.reset(),wy(this,e,e)}return t.prototype.clone=function(){var e={};return wy(e,this,Sy),new t(e)},t.prototype.reset=function(){wy(this,Sy,Sy)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=Ey(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=Ey(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){uge(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=Ey(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var n=r.length-1;n>=0;n--){var i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&lge.indexOf(i)<0&&(i='"'+i+'"'),r[n]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},t}();function wR(t){return typeof t=="number"?RE(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function Ey(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=wR(t[e]);return t}else return wR(t)}function uge(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function wy(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var Yh={willReadFrequently:!0},Bi=function(){function t(e,r,n,i,a,o,s,c,l){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=a,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=c,this.fontProperties=l}return t.measureText=function(e,r,n,i){i===void 0&&(i=t._canvas),n=n??r.wordWrap;var a=r.toFontString(),o=t.measureFont(a);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);var s=i.getContext("2d",Yh);s.font=a;for(var c=n?t.wordWrap(e,r,i):e,l=c.split(/(?:\r\n|\r|\n)/),u=new Array(l.length),f=0,h=0;h<l.length;h++){var d=s.measureText(l[h]).width+(l[h].length-1)*r.letterSpacing;u[h]=d,f=Math.max(f,d)}var p=f+r.strokeThickness;r.dropShadow&&(p+=r.dropShadowDistance);var v=r.lineHeight||o.fontSize+r.strokeThickness,y=Math.max(v,o.fontSize+r.strokeThickness)+(l.length-1)*(v+r.leading);return r.dropShadow&&(y+=r.dropShadowDistance),new t(e,r,p,y,l,u,v+r.leading,f,o)},t.wordWrap=function(e,r,n){n===void 0&&(n=t._canvas);for(var i=n.getContext("2d",Yh),a=0,o="",s="",c=Object.create(null),l=r.letterSpacing,u=r.whiteSpace,f=t.collapseSpaces(u),h=t.collapseNewlines(u),d=!f,p=r.wordWrapWidth+l,v=t.tokenize(e),y=0;y<v.length;y++){var g=v[y];if(t.isNewline(g)){if(!h){s+=t.addLine(o),d=!f,o="",a=0;continue}g=" "}if(f){var m=t.isBreakingSpace(g),x=t.isBreakingSpace(o[o.length-1]);if(m&&x)continue}var b=t.getFromCache(g,l,c,i);if(b>p)if(o!==""&&(s+=t.addLine(o),o="",a=0),t.canBreakWords(g,r.breakWords))for(var _=t.wordWrapSplit(g),S=0;S<_.length;S++){for(var E=_[S],w=1;_[S+w];){var C=_[S+w],A=E[E.length-1];if(!t.canBreakChars(A,C,g,S,r.breakWords))E+=C;else break;w++}S+=E.length-1;var P=t.getFromCache(E,l,c,i);P+a>p&&(s+=t.addLine(o),d=!1,o="",a=0),o+=E,a+=P}else{o.length>0&&(s+=t.addLine(o),o="",a=0);var T=y===v.length-1;s+=t.addLine(g,!T),d=!1,o="",a=0}else b+a>p&&(d=!1,s+=t.addLine(o),o="",a=0),(o.length>0||!t.isBreakingSpace(g)||d)&&(o+=g,a+=b)}return s+=t.addLine(o,!1),s},t.addLine=function(e,r){return r===void 0&&(r=!0),e=t.trimRight(e),e=r?e+`
`:e,e},t.getFromCache=function(e,r,n,i){var a=n[e];if(typeof a!="number"){var o=e.length*r;a=i.measureText(e).width+o,n[e]=a}return a},t.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},t.collapseNewlines=function(e){return e==="normal"},t.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return typeof e!="string"?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return typeof e!="string"?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],n="";if(typeof e!="string")return r;for(var i=0;i<e.length;i++){var a=e[i],o=e[i+1];if(t.isBreakingSpace(a,o)||t.isNewline(a)){n!==""&&(r.push(n),n=""),r.push(a);continue}n+=a}return n!==""&&r.push(n),r},t.canBreakWords=function(e,r){return r},t.canBreakChars=function(e,r,n,i,a){return!0},t.wordWrapSplit=function(e){return e.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},n=t._canvas,i=t._context;i.font=e;var a=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),c=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,n.width=o,n.height=c,i.fillStyle="#f00",i.fillRect(0,0,o,c),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var l=i.getImageData(0,0,o,c).data,u=l.length,f=o*4,h=0,d=0,p=!1;for(h=0;h<s;++h){for(var v=0;v<f;v+=4)if(l[d+v]!==255){p=!0;break}if(!p)d+=f;else break}for(r.ascent=s-h,d=u-f,p=!1,h=c;h>s;--h){for(var v=0;v<f;v+=4)if(l[d+v]!==255){p=!0;break}if(!p)d-=f;else break}return r.descent=h-s,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){e===void 0&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",Yh);if(n&&n.measureText)return t.__canvas=r,r;e=we.ADAPTER.createCanvas()}catch{e=we.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d",Yh)),t.__context},enumerable:!1,configurable:!0}),t}();Bi._fonts={};Bi.METRICS_STRING="|ÉqÅ";Bi.BASELINE_SYMBOL="M";Bi.BASELINE_MULTIPLIER=1.4;Bi.HEIGHT_MULTIPLIER=2;Bi._newlines=[10,13];Bi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var cge={texture:!0,children:!1,baseTexture:!0},pw=function(t){sge(e,t);function e(r,n,i){var a=this,o=!1;i||(i=we.ADAPTER.createCanvas(),o=!0),i.width=3,i.height=3;var s=Ve.from(i);return s.orig=new at,s.trim=new at,a=t.call(this,s)||this,a._ownCanvas=o,a.canvas=i,a.context=i.getContext("2d",{willReadFrequently:!0}),a._resolution=we.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=r,a.style=n,a.localStyleID=-1,a}return e.prototype.updateText=function(r){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var i=this.context,a=Bi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=a.width,s=a.height,c=a.lines,l=a.lineHeight,u=a.lineWidths,f=a.maxLineWidth,h=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=n.strokeThickness,i.textBaseline=n.textBaseline,i.lineJoin=n.lineJoin,i.miterLimit=n.miterLimit;for(var d,p,v=n.dropShadow?2:1,y=0;y<v;++y){var g=n.dropShadow&&y===0,m=g?Math.ceil(Math.max(1,s)+n.padding*2):0,x=m*this._resolution;if(g){i.fillStyle="black",i.strokeStyle="black";var b=n.dropShadowColor,_=kr(typeof b=="number"?b:IE(b)),S=n.dropShadowBlur*this._resolution,E=n.dropShadowDistance*this._resolution;i.shadowColor="rgba("+_[0]*255+","+_[1]*255+","+_[2]*255+","+n.dropShadowAlpha+")",i.shadowBlur=S,i.shadowOffsetX=Math.cos(n.dropShadowAngle)*E,i.shadowOffsetY=Math.sin(n.dropShadowAngle)*E+x}else i.fillStyle=this._generateFillStyle(n,c,a),i.strokeStyle=n.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var w=(l-h.fontSize)/2;(!e.nextLineHeightBehavior||l-h.fontSize<0)&&(w=0);for(var C=0;C<c.length;C++)d=n.strokeThickness/2,p=n.strokeThickness/2+C*l+h.ascent+w,n.align==="right"?d+=f-u[C]:n.align==="center"&&(d+=(f-u[C])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(c[C],d+n.padding,p+n.padding-m,!0),n.fill&&this.drawLetterSpacing(c[C],d+n.padding,p+n.padding-m)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,n,i,a){a===void 0&&(a=!1);var o=this._style,s=o.letterSpacing,c=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(s===0||c){c&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),a?this.context.strokeText(r,n,i):this.context.fillText(r,n,i);return}for(var l=n,u=Array.from?Array.from(r):r.split(""),f=this.context.measureText(r).width,h=0,d=0;d<u.length;++d){var p=u[d];a?this.context.strokeText(p,l,i):this.context.fillText(p,l,i);for(var v="",y=d+1;y<u.length;++y)v+=u[y];h=this.context.measureText(v).width,l+=f-h+s,f=h}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var n=ML(r);n.data&&(r.width=n.width,r.height=n.height,this.context.putImageData(n.data,0,0))}var i=this._texture,a=this._style,o=a.trim?0:a.padding,s=i.baseTexture;i.trim.width=i._frame.width=r.width/this._resolution,i.trim.height=i._frame.height=r.height/this._resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,n){return this.updateText(!0),this._textureID===-1&&(r=!1),t.prototype.getBounds.call(this,r,n)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),t.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,n,i){var a=r.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,s=r.dropShadow?r.dropShadowDistance:0,c=r.padding||0,l=this.canvas.width/this._resolution-s-c*2,u=this.canvas.height/this._resolution-s-c*2,f=a.slice(),h=r.fillGradientStops.slice();if(!h.length)for(var d=f.length+1,p=1;p<d;++p)h.push(p/d);if(f.unshift(a[0]),h.unshift(0),f.push(a[a.length-1]),h.push(1),r.fillGradientType===Zl.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,c,l/2,u+c);for(var v=i.fontProperties.fontSize+r.strokeThickness,p=0;p<n.length;p++){var y=i.lineHeight*(p-1)+v,g=i.lineHeight*p,m=g;p>0&&y>g&&(m=(g+y)/2);var x=g+v,b=i.lineHeight*(p+1),_=x;p+1<n.length&&b<x&&(_=(x+b)/2);for(var S=(_-m)/u,E=0;E<f.length;E++){var w=0;typeof h[E]=="number"?w=h[E]:w=E/f.length;var C=Math.min(1,Math.max(0,m/u+w*S));C=Number(C.toFixed(5)),o.addColorStop(C,f[E])}}}else{o=this.context.createLinearGradient(c,u/2,l+c,u/2);for(var A=f.length+1,P=1,p=0;p<f.length;p++){var T=void 0;typeof h[p]=="number"?T=h[p]:T=P/A,o.addColorStop(T,f[p]),P++}}return o},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},cge,r),t.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var n=ss(this.scale.x)||1;this.scale.x=n*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var n=ss(this.scale.y)||1;this.scale.y=n*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof Cs?this._style=r:this._style=new Cs(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(ui);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */we.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V_=function(t,e){return V_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},V_(t,e)};function fge(t,e){V_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var HB=function(){function t(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function hge(t,e){var r=!1;if(t&&t._textures&&t._textures.length){for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof Ve){var i=t._textures[n].baseTexture;e.indexOf(i)===-1&&(e.push(i),r=!0)}}return r}function dge(t,e){if(t.baseTexture instanceof ct){var r=t.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function pge(t,e){if(t._texture&&t._texture instanceof Ve){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function vge(t,e){return e instanceof pw?(e.updateText(!0),!0):!1}function mge(t,e){if(e instanceof Cs){var r=e.toFontString();return Bi.measureFont(r),!0}return!1}function gge(t,e){if(t instanceof pw){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function yge(t,e){return t instanceof Cs?(e.indexOf(t)===-1&&e.push(t),!0):!1}var YB=function(){function t(e){var r=this;this.limiter=new HB(we.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(gge),this.registerFindHook(yge),this.registerFindHook(hge),this.registerFindHook(dge),this.registerFindHook(pge),this.registerUploadHook(vge),this.registerUploadHook(mge)}return t.prototype.upload=function(e,r){var n=this;return typeof e=="function"&&(r=e,e=null),r&&An("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){e&&n.add(e);var a=function(){r==null||r(),i()};n.queue.length?(n.completes.push(a),n.ticking||(n.ticking=!0,Vr.system.addOnce(n.tick,n,la.UTILITY))):a()})},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Vr.system.addOnce(this.tick,this,la.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(var n=0,i=a.length;n<i;n++)a[n]()}},t.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},t.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},t.prototype.add=function(e){for(var r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof Fr)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},t.prototype.destroy=function(){this.ticking&&Vr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function qB(t,e){return e instanceof ct?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function xge(t,e){if(!(e instanceof Kl))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var a=n[i].style.texture;a&&qB(t,a.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function _ge(t,e){return t instanceof Kl?(e.push(t),!0):!1}var KB=function(t){fge(e,t);function e(r){var n=t.call(this,r)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(_ge),n.registerUploadHook(qB),n.registerUploadHook(xge),n}return e.extension={name:"prepare",type:wt.RendererPlugin},e}(YB),bge=function(){function t(e){this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ZB=function(){function t(e,r,n){n===void 0&&(n=null),this.linkedSheets=[],this._texture=e instanceof Ve?e:null,this.baseTexture=e instanceof ct?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,n=mf(e,null);return n===null&&(n=r!==void 0?parseFloat(r):1),n!==1&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){var r=this;return e&&An("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(n){r._callback=function(i){e==null||e(i),n(i)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE;r-e<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],a=this._frames[i],o=a.frame;if(o){var s=null,c=null,l=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,u=new at(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);a.rotated?s=new at(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):s=new at(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(c=new at(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Ve(this.baseTexture,s,u,c,a.rotated?2:0,a.anchor),Ve.addToCache(this.textures[i],i)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var n=0;n<e[r].length;n++){var i=e[r][n];this.animations[r].push(this.textures[i])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),QB=function(){function t(){}return t.use=function(e,r){var n,i,a=this,o=e.name+"_image";if(!e.data||e.type!==Pt.TYPE.JSON||!e.data.frames||a.resources[o]){r();return}var s=(i=(n=e.data)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(s))for(var c=function(p){if(typeof p!="string")return"continue";var v=p.replace(".json",""),y=os.resolve(e.url.replace(a.baseUrl,""),p);if(a.resources[v]||Object.values(a.resources).some(function(m){return os.format(os.parse(m.url))===y}))return"continue";var g={crossOrigin:e.crossOrigin,loadType:Pt.LOAD_TYPE.XHR,xhrType:Pt.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};a.add(v,y,g)},l=0,u=s;l<u.length;l++){var f=u[l];c(f)}var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,a.baseUrl);a.add(o,d,h,function(v){if(v.error){r(v.error);return}var y=new ZB(v.texture,e.data,e.url);y.parse().then(function(){e.spritesheet=y,e.textures=y.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:os.resolve(e.url.replace(r,""),e.data.meta.image)},t.extension=wt.Loader,t}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G_=function(t,e){return G_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},G_(t,e)};function JB(t,e){G_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var rc=new it,Sge=function(t){JB(e,t);function e(r,n,i){n===void 0&&(n=100),i===void 0&&(i=100);var a=t.call(this,r)||this;return a.tileTransform=new fv,a._width=n,a._height=i,a.uvMatrix=a.texture.uvMatrix||new vv(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,n=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),a=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,n,i,a)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new at),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,rc);var n=this._width,i=this._height,a=-n*this.anchor._x;if(rc.x>=a&&rc.x<a+n){var o=-i*this.anchor._y;if(rc.y>=o&&rc.y<o+i)return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,n){var i=r instanceof Ve?r:Ve.from(r,n);return new e(i,n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e}(ui),Ege=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,AR=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,wge=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Age=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Cge=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,qh=new Jt,e4=function(t){JB(e,t);function e(r){var n=t.call(this,r)||this;return r.runners.contextChange.add(n),n.quad=new WE,n.state=jo.for2d(),n}return e.prototype.contextChange=function(){var r=this.renderer,n={globals:r.globalUniforms};this.simpleShader=La.from(AR,Ege,n),this.shader=r.context.webGLVersion>1?La.from(Age,Cge,n):La.from(AR,wge,n)},e.prototype.render=function(r){var n=this.renderer,i=this.quad,a=i.vertices;a[0]=a[6]=r._width*-r.anchor.x,a[1]=a[3]=r._height*-r.anchor.y,a[2]=a[4]=r._width*(1-r.anchor.x),a[5]=a[7]=r._height*(1-r.anchor.y);var o=r.uvRespectAnchor?r.anchor.x:0,s=r.uvRespectAnchor?r.anchor.y:0;a=i.uvs,a[0]=a[6]=-o,a[1]=a[3]=-s,a[2]=a[4]=1-o,a[5]=a[7]=1-s,i.invalidate();var c=r._texture,l=c.baseTexture,u=l.alphaMode>0,f=r.tileTransform.localTransform,h=r.uvMatrix,d=l.isPowerOfTwo&&c.frame.width===l.width&&c.frame.height===l.height;d&&(l._glTextures[n.CONTEXT_UID]?d=l.wrapMode!==Ii.CLAMP:l.wrapMode===Ii.CLAMP&&(l.wrapMode=Ii.REPEAT));var p=d?this.simpleShader:this.shader,v=c.width,y=c.height,g=r._width,m=r._height;qh.set(f.a*v/g,f.b*v/m,f.c*y/g,f.d*y/m,f.tx/g,f.ty/m),qh.invert(),d?qh.prepend(h.mapCoord):(p.uniforms.uMapCoord=h.mapCoord.toArray(!0),p.uniforms.uClampFrame=h.uClampFrame,p.uniforms.uClampOffset=h.uClampOffset),p.uniforms.uTransform=qh.toArray(!0),p.uniforms.uColor=DE(r.tint,r.worldAlpha,p.uniforms.uColor,u),p.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),p.uniforms.uSampler=c,n.shader.bind(p),n.geometry.bind(i),this.state.blendMode=kE(r.blendMode,u),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:wt.RendererPlugin},e}(th);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z_=function(t,e){return z_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},z_(t,e)};function vw(t,e){z_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var t4=function(){function t(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},t}(),Ay=new it,CR=new kl,Ql=function(t){vw(e,t);function e(r,n,i,a){a===void 0&&(a=Wn.TRIANGLES);var o=t.call(this)||this;return o.geometry=r,o.shader=n,o.state=i||jo.for2d(),o.drawMode=a,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=we.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var n=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Wn.TRIANGLES&&n.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),r.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(n),r.state.set(this.state),r.geometry.bind(this.geometry,n),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var a=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[a]),r.plugins[a].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,n=r.buffers[0],i=n.data,a=n._updateID;if(!(a===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var o=this.transform.worldTransform,s=o.a,c=o.b,l=o.c,u=o.d,f=o.tx,h=o.ty,d=this.vertexData,p=0;p<d.length/2;p++){var v=i[p*2],y=i[p*2+1];d[p*2]=s*v+l*y+f,d[p*2+1]=c*v+u*y+h}if(this._roundPixels)for(var g=we.RESOLUTION,p=0;p<d.length;++p)d[p]=Math.round((d[p]*g|0)/g);this.vertexDirty=a}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new t4(r,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,Ay);for(var n=this.geometry.getBuffer("aVertexPosition").data,i=CR.points,a=this.geometry.getIndex().data,o=a.length,s=this.drawMode===4?3:1,c=0;c+2<o;c+=s){var l=a[c]*2,u=a[c+1]*2,f=a[c+2]*2;if(i[0]=n[l],i[1]=n[l+1],i[2]=n[u],i[3]=n[u+1],i[4]=n[f],i[5]=n[f+1],CR.contains(Ay.x,Ay.y))return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Fr),Tge=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Pge=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Jl=function(t){vw(e,t);function e(r,n){var i=this,a={uSampler:r,alpha:1,uTextureMatrix:Jt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(a,n.uniforms),i=t.call(this,n.program||Tu.from(Pge,Tge),a)||this,i._colorDirty=!1,i.uvMatrix=new vv(r),i.batchable=n.program===void 0,i.pluginName=n.pluginName,i.tint=n.tint,i.alpha=n.alpha,i}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;DE(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(La),rh=function(t){vw(e,t);function e(r,n,i){var a=t.call(this)||this,o=new Sr(r),s=new Sr(n,!0),c=new Sr(i,!0,!0);return a.addAttribute("aVertexPosition",o,2,!1,Le.FLOAT).addAttribute("aTextureCoord",s,2,!1,Le.FLOAT).addIndex(c),a._updateId=-1,a}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Cu);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var W_=function(t,e){return W_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},W_(t,e)};function Oge(t,e){W_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Sf=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),r4=function(){function t(){}return t.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},t.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in r){var a=r[i].match(/^[a-z]+/gm)[0],o=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var c in o){var l=o[c].split("="),u=l[0],f=l[1].replace(/"/gm,""),h=parseFloat(f),d=isNaN(h)?f:h;s[u]=d}n[a].push(s)}var p=new Sf;return n.info.forEach(function(v){return p.info.push({face:v.face,size:parseInt(v.size,10)})}),n.common.forEach(function(v){return p.common.push({lineHeight:parseInt(v.lineHeight,10)})}),n.page.forEach(function(v){return p.page.push({id:parseInt(v.id,10),file:v.file})}),n.char.forEach(function(v){return p.char.push({id:parseInt(v.id,10),page:parseInt(v.page,10),x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xoffset:parseInt(v.xoffset,10),yoffset:parseInt(v.yoffset,10),xadvance:parseInt(v.xadvance,10)})}),n.kerning.forEach(function(v){return p.kerning.push({first:parseInt(v.first,10),second:parseInt(v.second,10),amount:parseInt(v.amount,10)})}),n.distanceField.forEach(function(v){return p.distanceField.push({distanceRange:parseInt(v.distanceRange,10),fieldType:v.fieldType})}),p},t}(),Cp=function(){function t(){}return t.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(e){for(var r=new Sf,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),a=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),s=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField"),l=0;l<n.length;l++)r.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var l=0;l<i.length;l++)r.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(var l=0;l<a.length;l++)r.page.push({id:parseInt(a[l].getAttribute("id"),10)||0,file:a[l].getAttribute("file")});for(var l=0;l<o.length;l++){var u=o[l];r.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var l=0;l<s.length;l++)r.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(var l=0;l<c.length;l++)r.distanceField.push({fieldType:c[l].getAttribute("fieldType"),distanceRange:parseInt(c[l].getAttribute("distanceRange"),10)});return r},t}(),n4=function(){function t(){}return t.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return Cp.test(r)}return!1},t.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return Cp.parse(r)},t}(),Cy=[r4,Cp,n4];function mw(t){for(var e=0;e<Cy.length;e++)if(Cy[e].test(t))return Cy[e];return null}function Rge(t,e,r,n,i,a){var o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,c=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=t.width/n-c-l*2,f=t.height/n-c-l*2,h=o.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var p=h.length+1,v=1;v<p;++v)d.push(v/p);if(h.unshift(o[0]),d.unshift(0),h.push(o[o.length-1]),d.push(1),r.fillGradientType===Zl.LINEAR_VERTICAL){s=e.createLinearGradient(u/2,l,u/2,f+l);for(var y=0,g=a.fontProperties.fontSize+r.strokeThickness,m=g/f,v=0;v<i.length;v++)for(var x=a.lineHeight*v,b=0;b<h.length;b++){var _=0;typeof d[b]=="number"?_=d[b]:_=b/h.length;var S=x/f+_*m,E=Math.max(y,S);E=Math.min(E,1),s.addColorStop(E,h[b]),y=E}}else{s=e.createLinearGradient(l,f/2,u+l,f/2);for(var w=h.length+1,C=1,v=0;v<h.length;v++){var A=void 0;typeof d[v]=="number"?A=d[v]:A=C/w,s.addColorStop(A,h[v]),C++}}return s}function Ige(t,e,r,n,i,a,o){var s=r.text,c=r.fontProperties;e.translate(n,i),e.scale(a,a);var l=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Rge(t,e,o,a,[s],r),e.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,h=kr(typeof f=="number"?f:IE(f)),d=o.dropShadowBlur*a,p=o.dropShadowDistance*a;e.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+o.dropShadowAlpha+")",e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(s,l,u+r.lineHeight-c.descent),o.fill&&e.fillText(s,l,u+r.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function i4(t){return Array.from?Array.from(t):t.split("")}function Fge(t){typeof t=="string"&&(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var a=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,c=o;s<=c;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,i4(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function Od(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Ta=function(){function t(e,r,n){var i,a,o=e.info[0],s=e.common[0],c=e.page[0],l=e.distanceField[0],u=mf(c.file),f={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=f;for(var h=0;h<e.page.length;h++){var d=e.page[h],p=d.id,v=d.file;f[p]=r instanceof Array?r[h]:r[v],l!=null&&l.fieldType&&l.fieldType!=="none"&&(f[p].baseTexture.alphaMode=Un.NO_PREMULTIPLIED_ALPHA,f[p].baseTexture.mipmap=Tn.OFF)}for(var h=0;h<e.char.length;h++){var y=e.char[h],p=y.id,g=y.page,m=e.char[h],x=m.x,b=m.y,_=m.width,S=m.height,E=m.xoffset,w=m.yoffset,C=m.xadvance;x/=u,b/=u,_/=u,S/=u,E/=u,w/=u,C/=u;var A=new at(x+f[g].frame.x/u,b+f[g].frame.y/u,_,S);this.chars[p]={xOffset:E,yOffset:w,xAdvance:C,kerning:{},texture:new Ve(f[g].baseTexture,A),page:g}}for(var h=0;h<e.kerning.length;h++){var P=e.kerning[h],T=P.first,O=P.second,R=P.amount;T/=u,O/=u,R/=u,this.chars[O]&&(this.chars[O].kerning[T]=R)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=(a=(i=l==null?void 0:l.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&a!==void 0?a:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,n){var i;if(e instanceof Sf)i=e;else{var a=mw(e);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(e)}r instanceof Ve&&(r=[r]);var o=new t(i,r,n);return t.available[o.font]=o,o},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,n),a=i.chars,o=i.padding,s=i.resolution,c=i.textureWidth,l=i.textureHeight,u=Fge(a),f=r instanceof Cs?r:new Cs(r),h=c,d=new Sf;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var p=0,v=0,y,g,m,x=0,b=[],_=0;_<u.length;_++){y||(y=we.ADAPTER.createCanvas(),y.width=c,y.height=l,g=y.getContext("2d"),m=new ct(y,{resolution:s}),b.push(new Ve(m)),d.page.push({id:b.length-1,file:""}));var S=u[_],E=Bi.measureText(S,f,!1,y),w=E.width,C=Math.ceil(E.height),A=Math.ceil((f.fontStyle==="italic"?2:1)*w);if(v>=l-C*s){if(v===0)throw new Error("[BitmapFont] textureHeight "+l+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+S+"')"));--_,y=null,g=null,m=null,v=0,p=0,x=0;continue}if(x=Math.max(C+E.fontProperties.descent,x),A*s+p>=h){if(p===0)throw new Error("[BitmapFont] textureWidth "+c+"px is too small "+("(fontFamily: '"+f.fontFamily+"', fontSize: "+f.fontSize+"px, char: '"+S+"')"));--_,v+=x*s,v=Math.ceil(v),p=0,x=0;continue}Ige(y,g,E,p,v,s,f);var P=Od(E.text);d.char.push({id:P,page:b.length-1,x:p/s,y:v/s,width:A,height:C,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),p+=(A+2*o)*s,p=Math.ceil(p)}if(!(n!=null&&n.skipKerning))for(var _=0,T=u.length;_<T;_++)for(var O=u[_],R=0;R<T;R++){var F=u[R],D=g.measureText(O).width,V=g.measureText(F).width,Y=g.measureText(O+F).width,W=Y-(D+V);W&&d.kerning.push({first:Od(O),second:Od(F),amount:W})}var $=new t(d,b,!0);return t.available[e]!==void 0&&t.uninstall(e),t.available[e]=$,$},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),kge=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,Dge=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,TR=[],PR=[],OR=[],Mge=function(t){Oge(e,t);function e(r,n){n===void 0&&(n={});var i=t.call(this)||this;i._tint=16777215;var a=Object.assign({},e.styleDefaults,n),o=a.align,s=a.tint,c=a.maxWidth,l=a.letterSpacing,u=a.fontName,f=a.fontSize;if(!Ta.available[u])throw new Error('Missing BitmapFont "'+u+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=s,i._font=void 0,i._fontName=u,i._fontSize=f,i.text=r,i._maxWidth=c,i._maxLineHeight=0,i._letterSpacing=l,i._anchor=new ao(function(){i.dirty=!0},i,0,0),i._roundPixels=we.ROUND_PIXELS,i.dirty=!0,i._resolution=we.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return e.prototype.updateText=function(){for(var r,n=Ta.available[this._fontName],i=this.fontSize,a=i/n.size,o=new it,s=[],c=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",f=i4(u),h=this._maxWidth*n.size/i,d=n.distanceFieldType==="none"?TR:PR,p=null,v=0,y=0,g=0,m=-1,x=0,b=0,_=0,S=0,E=0;E<f.length;E++){var w=f[E],C=Od(w);if(/(?:\s)/.test(w)&&(m=E,x=v,S++),w==="\r"||w===`
`){c.push(v),l.push(-1),y=Math.max(y,v),++g,++b,o.x=0,o.y+=n.lineHeight,p=null,S=0;continue}var A=n.chars[C];if(A){p&&A.kerning[p]&&(o.x+=A.kerning[p]);var P=OR.pop()||{texture:Ve.EMPTY,line:0,charCode:0,prevSpaces:0,position:new it};P.texture=A.texture,P.line=g,P.charCode=C,P.position.x=o.x+A.xOffset+this._letterSpacing/2,P.position.y=o.y+A.yOffset,P.prevSpaces=S,s.push(P),v=P.position.x+Math.max(A.xAdvance-A.xOffset,A.texture.orig.width),o.x+=A.xAdvance+this._letterSpacing,_=Math.max(_,A.yOffset+A.texture.height),p=C,m!==-1&&h>0&&o.x>h&&(++b,ps(s,1+m-b,1+E-m),E=m,m=-1,c.push(x),l.push(s.length>0?s[s.length-1].prevSpaces:0),y=Math.max(y,x),g++,o.x=0,o.y+=n.lineHeight,p=null,S=0)}}var T=f[f.length-1];T!=="\r"&&T!==`
`&&(/(?:\s)/.test(T)&&(v=x),c.push(v),y=Math.max(y,v),l.push(-1));for(var O=[],E=0;E<=g;E++){var R=0;this._align==="right"?R=y-c[E]:this._align==="center"?R=(y-c[E])/2:this._align==="justify"&&(R=l[E]<0?0:(y-c[E])/l[E]),O.push(R)}var F=s.length,D={},V=[],Y=this._activePagesMeshData;d.push.apply(d,Y);for(var E=0;E<F;E++){var W=s[E].texture,$=W.baseTexture.uid;if(!D[$]){var I=d.pop();if(!I){var B=new rh,L=void 0,M=void 0;n.distanceFieldType==="none"?(L=new Jl(Ve.EMPTY),M=Ce.NORMAL):(L=new Jl(Ve.EMPTY,{program:Tu.from(Dge,kge),uniforms:{uFWidth:0}}),M=Ce.NORMAL_NPM);var X=new Ql(B,L);X.blendMode=M,I={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:X,vertices:null,uvs:null,indices:null}}I.index=0,I.indexCount=0,I.vertexCount=0,I.uvsCount=0,I.total=0;var K=this._textureCache;K[$]=K[$]||new Ve(W.baseTexture),I.mesh.texture=K[$],I.mesh.tint=this._tint,V.push(I),D[$]=I}D[$].total++}for(var E=0;E<Y.length;E++)V.indexOf(Y[E])===-1&&this.removeChild(Y[E].mesh);for(var E=0;E<V.length;E++)V[E].mesh.parent!==this&&this.addChild(V[E].mesh);this._activePagesMeshData=V;for(var E in D){var I=D[E],ne=I.total;if(!(((r=I.indices)===null||r===void 0?void 0:r.length)>6*ne)||I.vertices.length<Ql.BATCHABLE_SIZE*2)I.vertices=new Float32Array(4*2*ne),I.uvs=new Float32Array(4*2*ne),I.indices=new Uint16Array(6*ne);else for(var te=I.total,ce=I.vertices,de=te*4*2;de<ce.length;de++)ce[de]=0;I.mesh.size=6*ne}for(var E=0;E<F;E++){var w=s[E],se=w.position.x+O[w.line]*(this._align==="justify"?w.prevSpaces:1);this._roundPixels&&(se=Math.round(se));var fe=se*a,oe=w.position.y*a,W=w.texture,he=D[W.baseTexture.uid],Pe=W.frame,Ie=W._uvs,Ee=he.index++;he.indices[Ee*6+0]=0+Ee*4,he.indices[Ee*6+1]=1+Ee*4,he.indices[Ee*6+2]=2+Ee*4,he.indices[Ee*6+3]=0+Ee*4,he.indices[Ee*6+4]=2+Ee*4,he.indices[Ee*6+5]=3+Ee*4,he.vertices[Ee*8+0]=fe,he.vertices[Ee*8+1]=oe,he.vertices[Ee*8+2]=fe+Pe.width*a,he.vertices[Ee*8+3]=oe,he.vertices[Ee*8+4]=fe+Pe.width*a,he.vertices[Ee*8+5]=oe+Pe.height*a,he.vertices[Ee*8+6]=fe,he.vertices[Ee*8+7]=oe+Pe.height*a,he.uvs[Ee*8+0]=Ie.x0,he.uvs[Ee*8+1]=Ie.y0,he.uvs[Ee*8+2]=Ie.x1,he.uvs[Ee*8+3]=Ie.y1,he.uvs[Ee*8+4]=Ie.x2,he.uvs[Ee*8+5]=Ie.y2,he.uvs[Ee*8+6]=Ie.x3,he.uvs[Ee*8+7]=Ie.y3}this._textWidth=y*a,this._textHeight=(o.y+n.lineHeight)*a;for(var E in D){var I=D[E];if(this.anchor.x!==0||this.anchor.y!==0)for(var Be=0,qe=this._textWidth*this.anchor.x,rt=this._textHeight*this.anchor.y,Xe=0;Xe<I.total;Xe++)I.vertices[Be++]-=qe,I.vertices[Be++]-=rt,I.vertices[Be++]-=qe,I.vertices[Be++]-=rt,I.vertices[Be++]-=qe,I.vertices[Be++]-=rt,I.vertices[Be++]-=qe,I.vertices[Be++]-=rt;this._maxLineHeight=_*a;var Ge=I.mesh.geometry.getBuffer("aVertexPosition"),Qe=I.mesh.geometry.getBuffer("aTextureCoord"),bt=I.mesh.geometry.getIndex();Ge.data=I.vertices,Qe.data=I.uvs,bt.data=I.indices,Ge.update(),Qe.update(),bt.update()}for(var E=0;E<s.length;E++)OR.push(s[E]);this._font=n,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var n=Ta.available[this._fontName],i=n.distanceFieldRange,a=n.distanceFieldType,o=n.size;if(a!=="none")for(var s=this.worldTransform,c=s.a,l=s.b,u=s.c,f=s.d,h=Math.sqrt(c*c+l*l),d=Math.sqrt(u*u+f*f),p=(Math.abs(h)+Math.abs(d))/2,v=this.fontSize/o,y=0,g=this._activePagesMeshData;y<g.length;y++){var m=g[y];m.mesh.shader.uniforms.uFWidth=p*i*v*this._resolution}t.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var r=Ta.available[this._fontName];if(!r)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==r&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Ta.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var r;return(r=this._fontSize)!==null&&r!==void 0?r:Ta.available[this._fontName].size},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var n=this._textureCache,i=Ta.available[this._fontName],a=i.distanceFieldType==="none"?TR:PR;a.push.apply(a,this._activePagesMeshData);for(var o=0,s=this._activePagesMeshData;o<s.length;o++){var c=s[o];this.removeChild(c.mesh)}this._activePagesMeshData=[],a.filter(function(f){return n[f.mesh.texture.baseTexture.uid]}).forEach(function(f){f.mesh.texture=Ve.EMPTY});for(var l in n){var u=n[l];u.destroy(),delete n[l]}this._font=null,this._textureCache=null,t.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Fr),a4=function(){function t(){}return t.add=function(){Pt.setExtensionXhrType("fnt",Pt.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var n=mw(e.data);if(!n){r();return}for(var i=t.getBaseUrl(this,e),a=n.parse(e.data),o={},s=function(v){o[v.metadata.pageFile]=v.texture,Object.keys(o).length===a.page.length&&(e.bitmapFont=Ta.install(a,o,!0),r())},c=0;c<a.page.length;++c){var l=a.page[c].file,u=i+l,f=!1;for(var h in this.resources){var d=this.resources[h];if(d.url===u){d.metadata.pageFile=l,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var p={crossOrigin:e.crossOrigin,loadType:Pt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(u,p,s)}}},t.getBaseUrl=function(e,r){var n=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&(n==="."&&(n=""),e.baseUrl&&n&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(e.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/"),n},t.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},t.extension=wt.Loader,t}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X_=function(t,e){return X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},X_(t,e)};function Lge(t,e){X_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bge=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,o4=function(t){Lge(e,t);function e(r){r===void 0&&(r=1);var n=t.call(this,dB,Bge,{uAlpha:1})||this;return n.alpha=r,n}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H_=function(t,e){return H_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},H_(t,e)};function s4(t,e){H_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nge=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function jge(t,e){var r=Math.ceil(t/2),n=Nge,i="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var s=a.replace("%index%",o.toString());s=s.replace("%sampleIndex%",o-(r-1)+".0"),i+=s,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}var Uge={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},$ge=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Vge(t){for(var e=Uge[t],r=e.length,n=$ge,i="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,s=0;s<t;s++){var c=a.replace("%index%",s.toString());o=s,s>=r&&(o=t-s-1),c=c.replace("%value%",e[o].toString()),i+=c,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}var Ef=function(t){s4(e,t);function e(r,n,i,a,o){n===void 0&&(n=8),i===void 0&&(i=4),a===void 0&&(a=we.FILTER_RESOLUTION),o===void 0&&(o=5);var s=this,c=jge(o,r),l=Vge(o);return s=t.call(this,c,l)||this,s.horizontal=r,s.resolution=a,s._quality=0,s.quality=i,s.blur=n,s}return e.prototype.apply=function(r,n,i,a){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/n.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,n,i,a);else{var o=r.getFilterTexture(),s=r.renderer,c=n,l=o;this.state.blend=!1,r.applyFilter(this,c,l,oi.CLEAR);for(var u=1;u<this.passes-1;u++){r.bindAndClear(c,oi.BLIT),this.uniforms.uSampler=l;var f=l;l=c,c=f,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,l,i,a),r.returnFilterTexture(o)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}(He),Gge=function(t){s4(e,t);function e(r,n,i,a){r===void 0&&(r=8),n===void 0&&(n=4),i===void 0&&(i=we.FILTER_RESOLUTION),a===void 0&&(a=5);var o=t.call(this)||this;return o.blurXFilter=new Ef(!0,r,n,i,a),o.blurYFilter=new Ef(!1,r,n,i,a),o.resolution=i,o.quality=n,o.blur=r,o.repeatEdgePixels=!1,o}return e.prototype.apply=function(r,n,i,a){var o=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(o&&s){var c=r.getFilterTexture();this.blurXFilter.apply(r,n,c,oi.CLEAR),this.blurYFilter.apply(r,c,i,a),r.returnFilterTexture(c)}else s?this.blurYFilter.apply(r,n,i,a):this.blurXFilter.apply(r,n,i,a)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y_=function(t,e){return Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Y_(t,e)};function zge(t,e){Y_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Wge=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,q_=function(t){zge(e,t);function e(){var r=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=t.call(this,sw,Wge,n)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,n){n===void 0&&(n=!1);var i=r;n&&(this._multiply(i,this.uniforms.m,r),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(r,n,i){return r[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],r[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],r[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],r[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],r[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],r[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],r[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],r[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],r[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],r[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],r[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],r[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],r[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],r[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],r[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],r[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],r[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],r[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],r[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],r[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],r},e.prototype._colorMatrix=function(r){var n=new Float32Array(r);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},e.prototype.brightness=function(r,n){var i=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.tint=function(r,n){var i=r>>16&255,a=r>>8&255,o=r&255,s=[i/255,0,0,0,0,0,a/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(s,n)},e.prototype.greyscale=function(r,n){var i=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.blackAndWhite=function(r){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.hue=function(r,n){r=(r||0)/180*Math.PI;var i=Math.cos(r),a=Math.sin(r),o=Math.sqrt,s=1/3,c=o(s),l=i+(1-i)*s,u=s*(1-i)-c*a,f=s*(1-i)+c*a,h=s*(1-i)+c*a,d=i+s*(1-i),p=s*(1-i)-c*a,v=s*(1-i)-c*a,y=s*(1-i)+c*a,g=i+s*(1-i),m=[l,u,f,0,0,h,d,p,0,0,v,y,g,0,0,0,0,0,1,0];this._loadMatrix(m,n)},e.prototype.contrast=function(r,n){var i=(r||0)+1,a=-.5*(i-1),o=[i,0,0,0,a,0,i,0,0,a,0,0,i,0,a,0,0,0,1,0];this._loadMatrix(o,n)},e.prototype.saturate=function(r,n){r===void 0&&(r=0);var i=r*2/3+1,a=(i-1)*-.5,o=[i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0];this._loadMatrix(o,n)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.sepia=function(r){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.technicolor=function(r){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.polaroid=function(r){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.toBGR=function(r){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.kodachrome=function(r){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.browni=function(r){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.vintage=function(r){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.colorTone=function(r,n,i,a,o){r=r||.2,n=n||.15,i=i||16770432,a=a||3375104;var s=(i>>16&255)/255,c=(i>>8&255)/255,l=(i&255)/255,u=(a>>16&255)/255,f=(a>>8&255)/255,h=(a&255)/255,d=[.3,.59,.11,0,0,s,c,l,r,0,u,f,h,n,0,s-u,c-f,l-h,0,0];this._loadMatrix(d,o)},e.prototype.night=function(r,n){r=r||.1;var i=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.predator=function(r,n){var i=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(i,n)},e.prototype.lsd=function(r){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(He);q_.prototype.grayscale=q_.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K_=function(t,e){return K_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},K_(t,e)};function Xge(t,e){K_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Hge=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,Yge=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,qge=function(t){Xge(e,t);function e(r,n){var i=this,a=new Jt;return r.renderable=!1,i=t.call(this,Yge,Hge,{mapSampler:r._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=r,i.maskMatrix=a,n==null&&(n=20),i.scale=new it(n,n),i}return e.prototype.apply=function(r,n,i,a){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,s=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);s!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/s,this.uniforms.rotation[1]=o.b/s,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Z_=function(t,e){return Z_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Z_(t,e)};function Kge(t,e){Z_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Zge=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,Qge=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Jge=function(t){Kge(e,t);function e(){return t.call(this,Zge,Qge)||this}return e}(He);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q_=function(t,e){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Q_(t,e)};function eye(t,e){Q_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var tye=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,rye=function(t){eye(e,t);function e(r,n){r===void 0&&(r=.5),n===void 0&&(n=Math.random());var i=t.call(this,sw,tye,{uNoise:0,uSeed:0})||this;return i.noise=r,i.seed=n,i}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var l4=new Jt;ir.prototype._cacheAsBitmap=!1;ir.prototype._cacheData=null;ir.prototype._cacheAsBitmapResolution=null;ir.prototype._cacheAsBitmapMultisample=jt.NONE;var nye=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(ir.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new nye),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});ir.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};ir.prototype._initCachedDisplayObject=function(e){var r;if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var a=this.filters[0].padding;i.pad(a)}i.ceil(we.RESOLUTION);var o=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),c=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,u=Fo.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(r=this.cacheAsBitmapMultisample)!==null&&r!==void 0?r:e.multisample}),f="cacheAsBitmap_"+Ro();this._cacheData.textureCacheId=f,ct.addToCache(u.baseTexture,f),Ve.addToCache(u,f);var h=this.transform.localTransform.copyTo(l4).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=l,e.renderTexture.bind(o,s,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var d=new ui(u);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(i.x/i.width),d.anchor.y=-(i.y/i.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};ir.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};ir.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var i=e.context,a=e._projTransform;r.ceil(we.RESOLUTION);var o=Fo.create({width:r.width,height:r.height}),s="cacheAsBitmap_"+Ro();this._cacheData.textureCacheId=s,ct.addToCache(o.baseTexture,s),Ve.addToCache(o,s);var c=l4;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=r.x,c.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:c,skipUpdateTransform:!1}),e.context=i,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var l=new ui(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(r.x/r.width),l.anchor.y=-(r.y/r.height),l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}};ir.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ir.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ir.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ct.removeFromCache(this._cacheData.textureCacheId),Ve.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ir.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ir.prototype.name=null;Fr.prototype.getChildByName=function(e,r){for(var n=0,i=this.children.length;n<i;n++)if(this.children[n].name===e)return this.children[n];if(r)for(var n=0,i=this.children.length;n<i;n++){var a=this.children[n];if(a.getChildByName){var o=a.getChildByName(e,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ir.prototype.getGlobalPosition=function(e,r){return e===void 0&&(e=new it),r===void 0&&(r=!1),this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var u4=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var n,i;if(r._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{var a=r._resizeTo,o=a.clientWidth,s=a.clientHeight;n=o,i=s}r.renderer.resize(n,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=wt.Application,t}(),gw=function(){function t(e){var r=this;this.stage=new Fr,e=Object.assign({forceCanvas:!1},e),this.renderer=hB(e),t._plugins.forEach(function(n){n.init.call(r,e)})}return t.registerPlugin=function(e){An("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),ma.add({type:wt.Application,ref:e})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var n=this,i=t._plugins.slice(0);i.reverse(),i.forEach(function(a){a.destroy.call(n)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();ma.handleByList(wt.Application,gw._plugins);ma.add(u4);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var J_=function(t,e){return J_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},J_(t,e)};function Pu(t,e){J_(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var c4=function(t){Pu(e,t);function e(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=100),i===void 0&&(i=10),a===void 0&&(a=10);var o=t.call(this)||this;return o.segWidth=i,o.segHeight=a,o.width=r,o.height=n,o.build(),o}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,n=[],i=[],a=[],o=this.segWidth-1,s=this.segHeight-1,c=this.width/o,l=this.height/s,u=0;u<r;u++){var f=u%this.segWidth,h=u/this.segWidth|0;n.push(f*c,h*l),i.push(f/o,h/s)}for(var d=o*s,u=0;u<d;u++){var p=u%o,v=u/o|0,y=v*this.segWidth+p,g=v*this.segWidth+p+1,m=(v+1)*this.segWidth+p,x=(v+1)*this.segWidth+p+1;a.push(y,g,m,g,x,m)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(rh),f4=function(t){Pu(e,t);function e(r,n,i){r===void 0&&(r=200),i===void 0&&(i=0);var a=t.call(this,new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6))||this;return a.points=n,a._width=r,a.textureScale=i,a.build(),a}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(r){var n=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),a=this.getIndex();if(!(r.length<1)){n.data.length/4!==r.length&&(n.data=new Float32Array(r.length*4),i.data=new Float32Array(r.length*4),a.data=new Uint16Array((r.length-1)*6));var o=i.data,s=a.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var c=0,l=r[0],u=this._width*this.textureScale,f=r.length,h=0;h<f;h++){var d=h*4;if(this.textureScale>0){var p=l.x-r[h].x,v=l.y-r[h].y,y=Math.sqrt(p*p+v*v);l=r[h],c+=y/u}else c=h/(f-1);o[d]=c,o[d+1]=0,o[d+2]=c,o[d+3]=1}for(var g=0,h=0;h<f-1;h++){var d=h*2;s[g++]=d,s[g++]=d+1,s[g++]=d+2,s[g++]=d+2,s[g++]=d+1,s[g++]=d+3}i.update(),a.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var n=r[0],i,a=0,o=0,s=this.buffers[0].data,c=r.length,l=0;l<c;l++){var u=r[l],f=l*4;l<r.length-1?i=r[l+1]:i=u,o=-(i.x-n.x),a=i.y-n.y;var h=Math.sqrt(a*a+o*o),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;a/=h,o/=h,a*=d,o*=d,s[f]=u.x+a,s[f+1]=u.y+o,s[f+2]=u.x-a,s[f+3]=u.y-o,n=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(rh),iye=function(t){Pu(e,t);function e(r,n,i){i===void 0&&(i=0);var a=this,o=new f4(r.height,n,i),s=new Jl(r);return i>0&&(r.baseTexture.wrapMode=Ii.REPEAT),a=t.call(this,o,s)||this,a.autoUpdate=!0,a}return e.prototype._render=function(r){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,r)},e}(Ql),h4=function(t){Pu(e,t);function e(r,n,i){var a=this,o=new c4(r.width,r.height,n,i),s=new Jl(Ve.WHITE);return a=t.call(this,o,s)||this,a.texture=r,a.autoResize=!0,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,n=this.shader.texture,i=n.width,a=n.height;this.autoResize&&(r.width!==i||r.height!==a)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,r)},e}(Ql),d4=function(t){Pu(e,t);function e(r,n,i,a,o){r===void 0&&(r=Ve.EMPTY);var s=this,c=new rh(n,i,a);c.getBuffer("aVertexPosition").static=!1;var l=new Jl(r);return s=t.call(this,c,l,null,o)||this,s.autoUpdate=!0,s}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,r)},e}(Ql),Kh=10,aye=function(t){Pu(e,t);function e(r,n,i,a,o){n===void 0&&(n=Kh),i===void 0&&(i=Kh),a===void 0&&(a=Kh),o===void 0&&(o=Kh);var s=t.call(this,Ve.WHITE,4,4)||this;return s._origWidth=r.orig.width,s._origHeight=r.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=a,s._topHeight=i,s._bottomHeight=o,s.texture=r,s}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,n=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*n,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*n,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,n=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*n,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*n,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,n=this._width>r?1:this._width/r,i=this._topHeight+this._bottomHeight,a=this._height>i?1:this._height/i,o=Math.min(n,a);return o},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,n=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var i=1/this._origWidth,a=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=i*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-i*this._rightWidth,n[9]=n[11]=n[13]=n[15]=a*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(h4);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var e1=function(t,e){return e1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},e1(t,e)};function oye(t,e){e1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var sye=function(t){oye(e,t);function e(r,n){n===void 0&&(n=!0);var i=t.call(this,r[0]instanceof Ve?r[0]:r[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=n,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=r,i}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Vr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Vr.shared.add(this.update,this,la.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var n=this.currentFrame;this._currentTime=r,n!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(this._playing){var n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){var a=this._currentTime%1*this._durations[this.currentFrame];for(a+=n/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),t.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var n=[],i=0;i<r.length;++i)n.push(Ve.from(r[i]));return new e(n)},e.fromImages=function(r){for(var n=[],i=0;i<r.length;++i)n.push(Ve.from(r[i]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Ve)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<r.length;n++)this._textures.push(r[n].texture),this._durations.push(r[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(Vr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Vr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(ui);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ma.add(_B,wB,EB,jB,KB,uw,e4,a4,RB,LB,BB,QB,GL,CB);var p4={AlphaFilter:o4,BlurFilter:Gge,BlurFilterPass:Ef,ColorMatrixFilter:q_,DisplacementFilter:qge,FXAAFilter:Jge,NoiseFilter:rye};const lye=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Un},AbstractBatchRenderer:pB,AbstractMultiResource:dv,AbstractRenderer:fB,AccessibilityManager:_B,AnimatedSprite:sye,AppLoaderPlugin:CB,Application:gw,ArrayResource:BE,Attribute:T_,get BLEND_MODES(){return Ce},get BUFFER_BITS(){return uf},get BUFFER_TYPE(){return Fi},BaseImageResource:ua,BasePrepare:YB,BaseRenderTexture:GE,BaseTexture:ct,BatchDrawCall:Sp,BatchGeometry:lw,BatchPluginFactory:mB,BatchRenderer:uw,BatchShaderGenerator:vB,BatchSystem:HE,BatchTextureArray:Ep,BitmapFont:Ta,BitmapFontData:Sf,BitmapFontLoader:a4,BitmapText:Mge,BlobResource:OB,Bounds:yf,BrowserAdapter:iL,Buffer:Sr,BufferResource:Ns,get CLEAR_MODES(){return oi},get COLOR_MASK_BITS(){return i_},CanvasResource:NE,Circle:jL,CompressedTextureLoader:RB,CompressedTextureResource:Ap,Container:Fr,ContextSystem:YE,CountLimiter:HB,CubeResource:jE,DDSLoader:LB,DEG_TO_RAD:Io,get DRAW_MODES(){return Wn},DisplayObject:ir,get ENV(){return sa},Ellipse:UL,get ExtensionType(){return wt},Extract:wB,get FORMATS(){return be},FORMATS_TO_COMPONENTS:kB,FillStyle:fw,Filter:He,FilterState:HL,FilterSystem:XE,Framebuffer:bp,FramebufferSystem:qE,get GC_MODES(){return ff},GLFramebuffer:YL,GLProgram:lB,GLTexture:Cd,GRAPHICS_CURVES:ql,Geometry:Cu,GeometrySystem:KE,Graphics:Kl,GraphicsData:j_,GraphicsGeometry:WB,IGLUniformData:Gve,INSTALLED:xf,get INTERNAL_FORMATS(){return Ke},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:_f,ImageBitmapResource:VE,ImageResource:pv,InteractionData:P_,InteractionEvent:bB,InteractionManager:EB,InteractionTrackingData:Td,KTXLoader:BB,get LINE_CAP(){return ka},get LINE_JOIN(){return Ki},LineStyle:XB,Loader:As,get LoaderResource(){return Pt},get MASK_TYPES(){return hr},get MIPMAP_MODES(){return Tn},get MSAA_QUALITY(){return jt},MaskData:qL,MaskSystem:ZE,Matrix:Jt,Mesh:Ql,MeshBatchUvs:t4,MeshGeometry:rh,MeshMaterial:Jl,NineSlicePlane:aye,ObjectRenderer:th,ObservablePoint:ao,PI_2:gf,get PRECISION(){return Ln},ParticleContainer:Qme,ParticleRenderer:jB,PlaneGeometry:c4,Point:it,Polygon:kl,Prepare:KB,Program:Tu,ProjectionSystem:ew,Quad:XL,QuadUv:WE,RAD_TO_DEG:NL,get RENDERER_TYPE(){return Wl},Rectangle:at,RenderTexture:Fo,RenderTexturePool:WL,RenderTextureSystem:tw,Renderer:ow,ResizePlugin:u4,Resource:ws,RopeGeometry:f4,RoundedRectangle:$L,Runner:Ur,get SAMPLER_TYPES(){return cf},get SCALE_MODES(){return zr},get SHAPES(){return Rr},SVGResource:UE,ScissorSystem:QE,Shader:La,ShaderSystem:rw,SimpleMesh:d4,SimplePlane:h4,SimpleRope:iye,Sprite:ui,SpriteMaskFilter:rB,Spritesheet:ZB,SpritesheetLoader:QB,State:jo,StateSystem:nw,StencilSystem:JE,System:ame,get TARGETS(){return _o},get TEXT_GRADIENT(){return Zl},get TYPES(){return Le},TYPES_TO_BYTES_PER_COMPONENT:k_,TYPES_TO_BYTES_PER_PIXEL:DB,TemporaryDisplayObject:LE,Text:pw,TextFormat:r4,TextMetrics:Bi,TextStyle:Cs,Texture:Ve,TextureGCSystem:iw,TextureLoader:TB,TextureMatrix:vv,TextureSystem:aw,TextureUvs:zE,Ticker:Vr,TickerPlugin:GL,TilingSprite:Sge,TilingSpriteRenderer:e4,TimeLimiter:bge,Transform:fv,get UPDATE_PRIORITY(){return la},UniformGroup:bo,VERSION:lme,VideoResource:$E,ViewableBuffer:wp,get WRAP_MODES(){return Ii},XMLFormat:Cp,XMLStringFormat:n4,accessibleTarget:xB,autoDetectFormat:mw,autoDetectRenderer:hB,autoDetectResource:hv,checkMaxIfStatementsInShader:tB,createUBOElements:aB,defaultFilterVertex:sw,defaultVertex:dB,extensions:ma,filters:p4,generateProgram:uB,generateUniformBufferSync:sB,getTestContext:QL,getUBOData:oB,graphicsUtils:ige,groupD8:Vt,interactiveTarget:SB,isMobile:ci,parseDDS:FB,parseKTX:MB,resources:gB,settings:we,systems:yB,uniformParsers:vs,utils:hve},Symbol.toStringTag,{value:"Module"}));let Zh;const uye=new Uint8Array(16);function cye(){if(!Zh&&(Zh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zh(uye)}const Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function fye(t,e=0){return Qr[t[e+0]]+Qr[t[e+1]]+Qr[t[e+2]]+Qr[t[e+3]]+"-"+Qr[t[e+4]]+Qr[t[e+5]]+"-"+Qr[t[e+6]]+Qr[t[e+7]]+"-"+Qr[t[e+8]]+Qr[t[e+9]]+"-"+Qr[t[e+10]]+Qr[t[e+11]]+Qr[t[e+12]]+Qr[t[e+13]]+Qr[t[e+14]]+Qr[t[e+15]]}const hye=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),RR={randomUUID:hye};function nc(t,e,r){if(RR.randomUUID&&!e&&!t)return RR.randomUUID();t=t||{};const n=t.random||(t.rng||cye)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return fye(n)}/*!
 * @pixi/filter-old-film - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-old-film is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t1=function(t,e){return t1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},t1(t,e)};function dye(t,e){t1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vye=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`,mye=function(t){dye(e,t);function e(r,n){n===void 0&&(n=0);var i=t.call(this,pye,vye)||this;return i.seed=0,i.uniforms.dimensions=new Float32Array(2),typeof r=="number"?(i.seed=r,r=void 0):i.seed=n,Object.assign(i,e.defaults,r),i}return e.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.seed=this.seed,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(r){this.uniforms.sepia=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(r){this.uniforms.scratch=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(r){this.uniforms.scratchDensity=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(r){this.uniforms.scratchWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),e.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},e}(He);/*!
 * @pixi/filter-dot - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-dot is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r1=function(t,e){return r1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},r1(t,e)};function gye(t,e){r1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var yye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xye=`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,_ye=function(t){gye(e,t);function e(r,n){r===void 0&&(r=1),n===void 0&&(n=5);var i=t.call(this,yye,xye)||this;return i.scale=r,i.angle=n,i}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(r){this.uniforms.scale=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/filter-reflection - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-reflection is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n1=function(t,e){return n1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},n1(t,e)};function bye(t,e){n1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Sye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Eye=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`,wye=function(t){bye(e,t);function e(r){var n=t.call(this,Sye,Eye)||this;return n.time=0,n.uniforms.amplitude=new Float32Array(2),n.uniforms.waveLength=new Float32Array(2),n.uniforms.alpha=new Float32Array(2),n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(r){this.uniforms.mirror=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(r){this.uniforms.boundary=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude[0]=r[0],this.uniforms.amplitude[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(r){this.uniforms.waveLength[0]=r[0],this.uniforms.waveLength[1]=r[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha[0]=r[0],this.uniforms.alpha[1]=r[1]},enumerable:!1,configurable:!0}),e.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},e}(He);/*!
 * @pixi/filter-glitch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glitch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i1=function(t,e){return i1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},i1(t,e)};function Aye(t,e){i1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Cye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Tye=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`,Pye=function(t){Aye(e,t);function e(r){var n=t.call(this,Cye,Tye)||this;return n.offset=100,n.fillMode=e.TRANSPARENT,n.average=!1,n.seed=0,n.minSize=8,n.sampleSize=512,n._slices=0,n._offsets=new Float32Array(1),n._sizes=new Float32Array(1),n._direction=-1,n.uniforms.dimensions=new Float32Array(2),n._canvas=document.createElement("canvas"),n._canvas.width=4,n._canvas.height=n.sampleSize,n.texture=Ve.from(n._canvas,{scaleMode:zr.NEAREST}),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.aspect=c/s,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,r.applyFilter(this,n,i,a)},e.prototype._randomizeSizes=function(){var r=this._sizes,n=this._slices-1,i=this.sampleSize,a=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var o=this._slices,s=1,c=0;c<n;c++){var l=s/(o-c),u=Math.max(l*(1-Math.random()*.6),a);r[c]=u,s-=u}r[n]=s}else{for(var s=1,f=Math.sqrt(1/this._slices),c=0;c<n;c++){var u=Math.max(f*s*Math.random(),a);r[c]=u,s-=u}r[n]=s}this.shuffle()},e.prototype.shuffle=function(){for(var r=this._sizes,n=this._slices-1,i=n;i>0;i--){var a=Math.random()*i>>0,o=r[i];r[i]=r[a],r[a]=o}},e.prototype._randomizeOffsets=function(){for(var r=0;r<this._slices;r++)this._offsets[r]=Math.random()*(Math.random()<.5?-1:1)},e.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},e.prototype.redraw=function(){var r=this.sampleSize,n=this.texture,i=this._canvas.getContext("2d");i.clearRect(0,0,8,r);for(var a,o=0,s=0;s<this._slices;s++){a=Math.floor(this._offsets[s]*256);var c=this._sizes[s]*r,l=a>0?a:0,u=a<0?-a:0;i.fillStyle="rgba("+l+", "+u+", 0, 1)",i.fillRect(0,o>>0,r,c+1>>0),o+=c}n.baseTexture.update(),this.uniforms.displacementMap=n},Object.defineProperty(e.prototype,"sizes",{get:function(){return this._sizes},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._sizes[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return this._offsets},set:function(r){for(var n=Math.min(this._slices,r.length),i=0;i<n;i++)this._offsets[i]=r[i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"slices",{get:function(){return this._slices},set:function(r){this._slices!==r&&(this._slices=r,this.uniforms.slices=r,this._sizes=this.uniforms.slicesWidth=new Float32Array(r),this._offsets=this.uniforms.slicesOffset=new Float32Array(r),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(r){if(this._direction!==r){this._direction=r;var n=r*Io;this.uniforms.sinDir=Math.sin(n),this.uniforms.cosDir=Math.cos(n)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var r;(r=this.texture)===null||r===void 0||r.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},e.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},e.TRANSPARENT=0,e.ORIGINAL=1,e.LOOP=2,e.CLAMP=3,e.MIRROR=4,e}(He);/*!
 * @pixi/filter-rgb-split - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-rgb-split is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var a1=function(t,e){return a1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},a1(t,e)};function Oye(t,e){a1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Rye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Iye=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,Fye=function(t){Oye(e,t);function e(r,n,i){r===void 0&&(r=[-10,0]),n===void 0&&(n=[0,10]),i===void 0&&(i=[0,0]);var a=t.call(this,Rye,Iye)||this;return a.red=r,a.green=n,a.blue=i,a}return Object.defineProperty(e.prototype,"red",{get:function(){return this.uniforms.red},set:function(r){this.uniforms.red=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.uniforms.green},set:function(r){this.uniforms.green=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(r){this.uniforms.blue=r},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/filter-godray - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-godray is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o1=function(t,e){return o1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},o1(t,e)};function kye(t,e){o1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Dye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Mye=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,Lye=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`,Bye=function(t){kye(e,t);function e(r){var n=t.call(this,Dye,Lye.replace("${perlin}",Mye))||this;n.parallel=!0,n.time=0,n._angle=0,n.uniforms.dimensions=new Float32Array(2);var i=Object.assign(e.defaults,r);return n._angleLight=new it,n.angle=i.angle,n.gain=i.gain,n.lacunarity=i.lacunarity,n.alpha=i.alpha,n.parallel=i.parallel,n.center=i.center,n.time=i.time,n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.aspect=c/s,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r;var n=r*Io;this._angleLight.x=Math.cos(n),this._angleLight.y=Math.sin(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(r){this.uniforms.gain=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(r){this.uniforms.lacunarity=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(r){this.uniforms.alpha=r},enumerable:!1,configurable:!0}),e.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},e}(He);/*!
 * @pixi/filter-adjustment - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-adjustment is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s1=function(t,e){return s1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},s1(t,e)};function Nye(t,e){s1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Uye=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`;(function(t){Nye(e,t);function e(r){var n=t.call(this,jye,Uye)||this;return n.gamma=1,n.saturation=1,n.contrast=1,n.brightness=1,n.red=1,n.green=1,n.blue=1,n.alpha=1,Object.assign(n,r),n}return e.prototype.apply=function(r,n,i,a){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,r.applyFilter(this,n,i,a)},e})(He);/*!
 * @pixi/filter-kawase-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-kawase-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var l1=function(t,e){return l1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},l1(t,e)};function $ye(t,e){l1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Vye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Gye=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,zye=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`,Tp=function(t){$ye(e,t);function e(r,n,i){r===void 0&&(r=4),n===void 0&&(n=3),i===void 0&&(i=!1);var a=t.call(this,Vye,i?zye:Gye)||this;return a._kernels=[],a._blur=4,a._quality=3,a.uniforms.uOffset=new Float32Array(2),a._pixelSize=new it,a.pixelSize=1,a._clamp=i,Array.isArray(r)?a.kernels=r:(a._blur=r,a.quality=n),a}return e.prototype.apply=function(r,n,i,a){var o=this._pixelSize.x/n._frame.width,s=this._pixelSize.y/n._frame.height,c;if(this._quality===1||this._blur===0)c=this._kernels[0]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,n,i,a);else{for(var l=r.getFilterTexture(),u=n,f=l,h=void 0,d=this._quality-1,p=0;p<d;p++)c=this._kernels[p]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,u,f,1),h=u,u=f,f=h;c=this._kernels[d]+.5,this.uniforms.uOffset[0]=c*o,this.uniforms.uOffset[1]=c*s,r.applyFilter(this,u,i,a),r.returnFilterTexture(l)}},e.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(r,n){return r+n+.5},0))},e.prototype._generateKernels=function(){var r=this._blur,n=this._quality,i=[r];if(r>0)for(var a=r,o=r/n,s=1;s<n;s++)a-=o,i.push(a);this._kernels=i,this._updatePadding()},Object.defineProperty(e.prototype,"kernels",{get:function(){return this._kernels},set:function(r){Array.isArray(r)&&r.length>0?(this._kernels=r,this._quality=r.length,this._blur=Math.max.apply(Math,r)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(r){typeof r=="number"?(this._pixelSize.x=r,this._pixelSize.y=r):Array.isArray(r)?(this._pixelSize.x=r[0],this._pixelSize.y=r[1]):r instanceof it?(this._pixelSize.x=r.x,this._pixelSize.y=r.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=Math.max(1,Math.round(r)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blur},set:function(r){this._blur=r,this._generateKernels()},enumerable:!1,configurable:!0}),e}(He);/*!
 * @pixi/filter-advanced-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-advanced-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u1=function(t,e){return u1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},u1(t,e)};function v4(t,e){u1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var m4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Wye=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`,Xye=function(t){v4(e,t);function e(r){r===void 0&&(r=.5);var n=t.call(this,m4,Wye)||this;return n.threshold=r,n}return Object.defineProperty(e.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(r){this.uniforms.threshold=r},enumerable:!1,configurable:!0}),e}(He),Hye=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;(function(t){v4(e,t);function e(r){var n=t.call(this,m4,Hye)||this;n.bloomScale=1,n.brightness=1,n._resolution=we.FILTER_RESOLUTION,typeof r=="number"&&(r={threshold:r});var i=Object.assign(e.defaults,r);n.bloomScale=i.bloomScale,n.brightness=i.brightness;var a=i.kernels,o=i.blur,s=i.quality,c=i.pixelSize,l=i.resolution;return n._extractFilter=new Xye(i.threshold),n._extractFilter.resolution=l,n._blurFilter=a?new Tp(a):new Tp(o,s),n.pixelSize=c,n.resolution=l,n}return e.prototype.apply=function(r,n,i,a,o){var s=r.getFilterTexture();this._extractFilter.apply(r,n,s,1,o);var c=r.getFilterTexture();this._blurFilter.apply(r,s,c,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=c,r.applyFilter(this,n,i,a),r.returnFilterTexture(c),r.returnFilterTexture(s)},Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._extractFilter&&(this._extractFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(r){this._extractFilter.threshold=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),e.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:we.FILTER_RESOLUTION},e})(He);/*!
 * @pixi/filter-ascii - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-ascii is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c1=function(t,e){return c1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},c1(t,e)};function Yye(t,e){c1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Kye=`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`;(function(t){Yye(e,t);function e(r){r===void 0&&(r=8);var n=t.call(this,qye,Kye)||this;return n.size=r,n}return Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(r){this.uniforms.pixelSize=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-bevel - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bevel is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f1=function(t,e){return f1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},f1(t,e)};function Zye(t,e){f1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Qye=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Jye=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`;(function(t){Zye(e,t);function e(r){var n=t.call(this,Qye,Jye)||this;return n._thickness=2,n._angle=0,n.uniforms.lightColor=new Float32Array(3),n.uniforms.shadowColor=new Float32Array(3),Object.assign(n,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},r),n.padding=1,n}return e.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._angle/Io},set:function(r){this._angle=r*Io,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return wn(this.uniforms.lightColor)},set:function(r){kr(r,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(r){this.uniforms.lightAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return wn(this.uniforms.shadowColor)},set:function(r){kr(r,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(r){this.uniforms.shadowAlpha=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-bloom - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bloom is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var h1=function(t,e){return h1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},h1(t,e)};function exe(t,e){h1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}(function(t){exe(e,t);function e(r,n,i,a){r===void 0&&(r=2),n===void 0&&(n=4),i===void 0&&(i=we.FILTER_RESOLUTION),a===void 0&&(a=5);var o=t.call(this)||this,s,c;return typeof r=="number"?(s=r,c=r):r instanceof it?(s=r.x,c=r.y):Array.isArray(r)&&(s=r[0],c=r[1]),o.blurXFilter=new Ef(!0,s,n,i,a),o.blurYFilter=new Ef(!1,c,n,i,a),o.blurYFilter.blendMode=Ce.SCREEN,o.defaultFilter=new o4,o}return e.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this.defaultFilter.apply(r,n,i,a),this.blurXFilter.apply(r,n,o,1),this.blurYFilter.apply(r,o,i,0),r.returnFilterTexture(o)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-bulge-pinch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-bulge-pinch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d1=function(t,e){return d1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},d1(t,e)};function txe(t,e){d1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var rxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,nxe=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;(function(t){txe(e,t);function e(r){var n=t.call(this,rxe,nxe)||this;return n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),e.defaults={center:[.5,.5],radius:100,strength:1},e})(He);/*!
 * @pixi/filter-color-map - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-map is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var p1=function(t,e){return p1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},p1(t,e)};function ixe(t,e){p1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var axe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,oxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`;(function(t){ixe(e,t);function e(r,n,i){n===void 0&&(n=!1),i===void 0&&(i=1);var a=t.call(this,axe,oxe)||this;return a.mix=1,a._size=0,a._sliceSize=0,a._slicePixelSize=0,a._sliceInnerSize=0,a._nearest=!1,a._scaleMode=null,a._colorMap=null,a._scaleMode=null,a.nearest=n,a.mix=i,a.colorMap=r,a}return e.prototype.apply=function(r,n,i,a){this.uniforms._mix=this.mix,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorMap",{get:function(){return this._colorMap},set:function(r){var n;r&&(r instanceof Ve||(r=Ve.from(r)),!((n=r)===null||n===void 0)&&n.baseTexture&&(r.baseTexture.scaleMode=this._scaleMode,r.baseTexture.mipmap=Tn.OFF,this._size=r.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=r),this._colorMap=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nearest",{get:function(){return this._nearest},set:function(r){this._nearest=r,this._scaleMode=r?zr.NEAREST:zr.LINEAR;var n=this._colorMap;n&&n.baseTexture&&(n.baseTexture._glTextures={},n.baseTexture.scaleMode=this._scaleMode,n.baseTexture.mipmap=Tn.OFF,n._updateID++,n.baseTexture.emit("update",n.baseTexture))},enumerable:!1,configurable:!0}),e.prototype.updateColorMap=function(){var r=this._colorMap;r&&r.baseTexture&&(r._updateID++,r.baseTexture.emit("update",r.baseTexture),this.colorMap=r)},e.prototype.destroy=function(r){r===void 0&&(r=!1),this._colorMap&&this._colorMap.destroy(r),t.prototype.destroy.call(this)},e})(He);/*!
 * @pixi/filter-color-overlay - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-overlay is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v1=function(t,e){return v1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},v1(t,e)};function sxe(t,e){v1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var lxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,uxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`;(function(t){sxe(e,t);function e(r,n){r===void 0&&(r=0),n===void 0&&(n=1);var i=t.call(this,lxe,uxe)||this;return i._color=0,i._alpha=1,i.uniforms.color=new Float32Array(3),i.color=r,i.alpha=n,i}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.color;typeof r=="number"?(kr(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._color=wn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){this.uniforms.alpha=r,this._alpha=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var m1=function(t,e){return m1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},m1(t,e)};function cxe(t,e){m1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,hxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`;(function(t){cxe(e,t);function e(r,n,i){r===void 0&&(r=16711680),n===void 0&&(n=0),i===void 0&&(i=.4);var a=t.call(this,fxe,hxe)||this;return a._originalColor=16711680,a._newColor=0,a.uniforms.originalColor=new Float32Array(3),a.uniforms.newColor=new Float32Array(3),a.originalColor=r,a.newColor=n,a.epsilon=i,a}return Object.defineProperty(e.prototype,"originalColor",{get:function(){return this._originalColor},set:function(r){var n=this.uniforms.originalColor;typeof r=="number"?(kr(r,n),this._originalColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._originalColor=wn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newColor",{get:function(){return this._newColor},set:function(r){var n=this.uniforms.newColor;typeof r=="number"?(kr(r,n),this._newColor=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],this._newColor=wn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-convolution - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-convolution is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g1=function(t,e){return g1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},g1(t,e)};function dxe(t,e){g1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vxe=`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`;(function(t){dxe(e,t);function e(r,n,i){n===void 0&&(n=200),i===void 0&&(i=200);var a=t.call(this,pxe,vxe)||this;return a.uniforms.texelSize=new Float32Array(2),a.uniforms.matrix=new Float32Array(9),r!==void 0&&(a.matrix=r),a.width=n,a.height=i,a}return Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(r){var n=this;r.forEach(function(i,a){n.uniforms.matrix[a]=i})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(r){this.uniforms.texelSize[0]=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(r){this.uniforms.texelSize[1]=1/r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-cross-hatch - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-cross-hatch is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y1=function(t,e){return y1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},y1(t,e)};function mxe(t,e){y1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var gxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,yxe=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`;(function(t){mxe(e,t);function e(){return t.call(this,gxe,yxe)||this}return e})(He);/*!
 * @pixi/filter-crt - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-crt is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var x1=function(t,e){return x1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},x1(t,e)};function xxe(t,e){x1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _xe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,bxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;(function(t){xxe(e,t);function e(r){var n=t.call(this,_xe,bxe)||this;return n.time=0,n.seed=0,n.uniforms.dimensions=new Float32Array(2),Object.assign(n,e.defaults,r),n}return e.prototype.apply=function(r,n,i,a){var o=n.filterFrame,s=o.width,c=o.height;this.uniforms.dimensions[0]=s,this.uniforms.dimensions[1]=c,this.uniforms.seed=this.seed,this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(r){this.uniforms.curvature=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(r){this.uniforms.lineWidth=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(r){this.uniforms.lineContrast=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(r){this.uniforms.verticalLine=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(r){this.uniforms.noise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(r){this.uniforms.noiseSize=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(r){this.uniforms.vignetting=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(r){this.uniforms.vignettingAlpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(r){this.uniforms.vignettingBlur=r},enumerable:!1,configurable:!0}),e.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},e})(He);/*!
 * @pixi/filter-drop-shadow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-drop-shadow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _1=function(t,e){return _1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_1(t,e)};function Sxe(t,e){_1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Pp=function(){return Pp=Object.assign||function(e){for(var r=arguments,n,i=1,a=arguments.length;i<a;i++){n=r[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Pp.apply(this,arguments)},Exe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,wxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`;(function(t){Sxe(e,t);function e(r){var n=t.call(this)||this;n.angle=45,n._distance=5,n._resolution=we.FILTER_RESOLUTION;var i=r?Pp(Pp({},e.defaults),r):e.defaults,a=i.kernels,o=i.blur,s=i.quality,c=i.pixelSize,l=i.resolution;n._tintFilter=new He(Exe,wxe),n._tintFilter.uniforms.color=new Float32Array(4),n._tintFilter.uniforms.shift=new it,n._tintFilter.resolution=l,n._blurFilter=a?new Tp(a):new Tp(o,s),n.pixelSize=c,n.resolution=l;var u=i.shadowOnly,f=i.rotation,h=i.distance,d=i.alpha,p=i.color;return n.shadowOnly=u,n.rotation=f,n.distance=h,n.alpha=d,n.color=p,n._updatePadding(),n}return e.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this._tintFilter.apply(r,n,o,1),this._blurFilter.apply(r,o,i,a),this.shadowOnly!==!0&&r.applyFilter(this,n,i,0),r.returnFilterTexture(o)},e.prototype._updatePadding=function(){this.padding=this.distance+this.blur*2},e.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r,this._tintFilter&&(this._tintFilter.resolution=r),this._blurFilter&&(this._blurFilter.resolution=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(r){this._distance=r,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.angle/Io},set:function(r){this.angle=r*Io,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(r){this._tintFilter.uniforms.alpha=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return wn(this._tintFilter.uniforms.color)},set:function(r){kr(r,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(r){this._blurFilter.kernels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(r){this._blurFilter.blur=r,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(r){this._blurFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(r){this._blurFilter.pixelSize=r},enumerable:!1,configurable:!0}),e.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:we.FILTER_RESOLUTION},e})(He);/*!
 * @pixi/filter-emboss - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-emboss is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b1=function(t,e){return b1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},b1(t,e)};function Axe(t,e){b1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Cxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Txe=`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`;(function(t){Axe(e,t);function e(r){r===void 0&&(r=5);var n=t.call(this,Cxe,Txe)||this;return n.strength=r,n}return Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(r){this.uniforms.strength=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-glow - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-glow is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S1=function(t,e){return S1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},S1(t,e)};function Pxe(t,e){S1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Oxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Rxe=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;(function(t){Pxe(e,t);function e(r){var n=this,i=Object.assign({},e.defaults,r),a=i.outerStrength,o=i.innerStrength,s=i.color,c=i.knockout,l=i.quality,u=Math.round(i.distance);return n=t.call(this,Oxe,Rxe.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/l/u).toFixed(7)).replace(/__DIST__/gi,u.toFixed(0)+".0"))||this,n.uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(n,{color:s,outerStrength:a,innerStrength:o,padding:u,knockout:c}),n}return Object.defineProperty(e.prototype,"color",{get:function(){return wn(this.uniforms.glowColor)},set:function(r){kr(r,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(r){this.uniforms.outerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(r){this.uniforms.innerStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(r){this.uniforms.knockout=r},enumerable:!1,configurable:!0}),e.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},e})(He);/*!
 * @pixi/filter-motion-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-motion-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E1=function(t,e){return E1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},E1(t,e)};function Ixe(t,e){E1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Fxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,kxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`;(function(t){Ixe(e,t);function e(r,n,i){r===void 0&&(r=[0,0]),n===void 0&&(n=5),i===void 0&&(i=0);var a=t.call(this,Fxe,kxe)||this;return a.kernelSize=5,a.uniforms.uVelocity=new Float32Array(2),a._velocity=new ao(a.velocityChanged,a),a.setVelocity(r),a.kernelSize=n,a.offset=i,a}return e.prototype.apply=function(r,n,i,a){var o=this.velocity,s=o.x,c=o.y;this.uniforms.uKernelSize=s!==0||c!==0?this.kernelSize:0,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"velocity",{get:function(){return this._velocity},set:function(r){this.setVelocity(r)},enumerable:!1,configurable:!0}),e.prototype.setVelocity=function(r){if(Array.isArray(r)){var n=r[0],i=r[1];this._velocity.set(n,i)}else this._velocity.copyFrom(r)},e.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1},Object.defineProperty(e.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(r){this.uniforms.uOffset=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-multi-color-replace - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-multi-color-replace is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var w1=function(t,e){return w1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},w1(t,e)};function Dxe(t,e){w1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Lxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`;(function(t){Dxe(e,t);function e(r,n,i){n===void 0&&(n=.05),i===void 0&&(i=r.length);var a=t.call(this,Mxe,Lxe.replace(/%maxColors%/g,i.toFixed(0)))||this;return a._replacements=[],a._maxColors=0,a.epsilon=n,a._maxColors=i,a.uniforms.originalColors=new Float32Array(i*3),a.uniforms.targetColors=new Float32Array(i*3),a.replacements=r,a}return Object.defineProperty(e.prototype,"replacements",{get:function(){return this._replacements},set:function(r){var n=this.uniforms.originalColors,i=this.uniforms.targetColors,a=r.length;if(a>this._maxColors)throw new Error("Length of replacements ("+a+") exceeds the maximum colors length ("+this._maxColors+")");n[a*3]=-1;for(var o=0;o<a;o++){var s=r[o],c=s[0];typeof c=="number"?c=kr(c):s[0]=wn(c),n[o*3]=c[0],n[o*3+1]=c[1],n[o*3+2]=c[2];var l=s[1];typeof l=="number"?l=kr(l):s[1]=wn(l),i[o*3]=l[0],i[o*3+1]=l[1],i[o*3+2]=l[2]}this._replacements=r},enumerable:!1,configurable:!0}),e.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(e.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(r){this.uniforms.epsilon=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-outline - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-outline is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A1=function(t,e){return A1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},A1(t,e)};function Bxe(t,e){A1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Nxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,jxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`;(function(t){Bxe(e,t);function e(r,n,i){r===void 0&&(r=1),n===void 0&&(n=0),i===void 0&&(i=.1);var a=t.call(this,Nxe,jxe.replace(/\$\{angleStep\}/,e.getAngleStep(i)))||this;return a._thickness=1,a.uniforms.thickness=new Float32Array([0,0]),a.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(a,{thickness:r,color:n,quality:i}),a}return e.getAngleStep=function(r){var n=Math.max(r*e.MAX_SAMPLES,e.MIN_SAMPLES);return(Math.PI*2/n).toFixed(7)},e.prototype.apply=function(r,n,i,a){this.uniforms.thickness[0]=this._thickness/n._frame.width,this.uniforms.thickness[1]=this._thickness/n._frame.height,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"color",{get:function(){return wn(this.uniforms.outlineColor)},set:function(r){kr(r,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(r){this._thickness=r,this.padding=r},enumerable:!1,configurable:!0}),e.MIN_SAMPLES=1,e.MAX_SAMPLES=100,e})(He);/*!
 * @pixi/filter-pixelate - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-pixelate is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var C1=function(t,e){return C1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},C1(t,e)};function Uxe(t,e){C1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var $xe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Vxe=`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`;(function(t){Uxe(e,t);function e(r){r===void 0&&(r=10);var n=t.call(this,$xe,Vxe)||this;return n.size=r,n}return Object.defineProperty(e.prototype,"size",{get:function(){return this.uniforms.size},set:function(r){typeof r=="number"&&(r=[r,r]),this.uniforms.size=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-radial-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-radial-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T1=function(t,e){return T1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},T1(t,e)};function Gxe(t,e){T1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var zxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Wxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`;(function(t){Gxe(e,t);function e(r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=[0,0]),i===void 0&&(i=5),a===void 0&&(a=-1);var o=t.call(this,zxe,Wxe)||this;return o._angle=0,o.angle=r,o.center=n,o.kernelSize=i,o.radius=a,o}return e.prototype.apply=function(r,n,i,a){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this.uniforms.uRadian=r*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-shockwave - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-shockwave is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P1=function(t,e){return P1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},P1(t,e)};function Xxe(t,e){P1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Hxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Yxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`,qxe=function(t){Xxe(e,t);function e(r,n,i){r===void 0&&(r=[0,0]),i===void 0&&(i=0);var a=t.call(this,Hxe,Yxe)||this;return a.center=r,Object.assign(a,e.defaults,n),a.time=i,a}return e.prototype.apply=function(r,n,i,a){this.uniforms.time=this.time,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.center},set:function(r){this.uniforms.center=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(r){this.uniforms.amplitude=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(r){this.uniforms.wavelength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(r){this.uniforms.brightness=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(r){this.uniforms.speed=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),e.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},e}(He);/*!
 * @pixi/filter-simple-lightmap - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-simple-lightmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O1=function(t,e){return O1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},O1(t,e)};function Kxe(t,e){O1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Zxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Qxe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`;(function(t){Kxe(e,t);function e(r,n,i){n===void 0&&(n=0),i===void 0&&(i=1);var a=t.call(this,Zxe,Qxe)||this;return a._color=0,a.uniforms.dimensions=new Float32Array(2),a.uniforms.ambientColor=new Float32Array([0,0,0,i]),a.texture=r,a.color=n,a}return e.prototype.apply=function(r,n,i,a){var o,s;this.uniforms.dimensions[0]=(o=n.filterFrame)===null||o===void 0?void 0:o.width,this.uniforms.dimensions[1]=(s=n.filterFrame)===null||s===void 0?void 0:s.height,r.applyFilter(this,n,i,a)},Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(r){this.uniforms.uLightmap=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(r){var n=this.uniforms.ambientColor;typeof r=="number"?(kr(r,n),this._color=r):(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],this._color=wn(n))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(r){this.uniforms.ambientColor[3]=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-tilt-shift - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-tilt-shift is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R1=function(t,e){return R1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},R1(t,e)};function mv(t,e){R1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Jxe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,e_e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,g4=function(t){mv(e,t);function e(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=600);var o=t.call(this,Jxe,e_e)||this;return o.uniforms.blur=r,o.uniforms.gradientBlur=n,o.uniforms.start=i||new it(0,window.innerHeight/2),o.uniforms.end=a||new it(600,window.innerHeight/2),o.uniforms.delta=new it(30,30),o.uniforms.texSize=new it(window.innerWidth,window.innerHeight),o.updateDelta(),o}return e.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(e.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(r){this.uniforms.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(r){this.uniforms.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.uniforms.start},set:function(r){this.uniforms.start=r,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.uniforms.end},set:function(r){this.uniforms.end=r,this.updateDelta()},enumerable:!1,configurable:!0}),e}(He),t_e=function(t){mv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=r/i,this.uniforms.delta.y=n/i},e}(g4),r_e=function(t){mv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.updateDelta=function(){var r=this.uniforms.end.x-this.uniforms.start.x,n=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(r*r+n*n);this.uniforms.delta.x=-n/i,this.uniforms.delta.y=r/i},e}(g4);(function(t){mv(e,t);function e(r,n,i,a){r===void 0&&(r=100),n===void 0&&(n=600);var o=t.call(this)||this;return o.tiltShiftXFilter=new t_e(r,n,i,a),o.tiltShiftYFilter=new r_e(r,n,i,a),o}return e.prototype.apply=function(r,n,i,a){var o=r.getFilterTexture();this.tiltShiftXFilter.apply(r,n,o,1),this.tiltShiftYFilter.apply(r,o,i,a),r.returnFilterTexture(o)},Object.defineProperty(e.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(r){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(r){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(r){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(r){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=r},enumerable:!1,configurable:!0}),e})(He);/*!
 * @pixi/filter-twist - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-twist is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I1=function(t,e){return I1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},I1(t,e)};function n_e(t,e){I1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var i_e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,a_e=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;(function(t){n_e(e,t);function e(r){var n=t.call(this,i_e,a_e)||this;return Object.assign(n,e.defaults,r),n}return Object.defineProperty(e.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(r){this.uniforms.offset=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(r){this.uniforms.radius=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(r){this.uniforms.angle=r},enumerable:!1,configurable:!0}),e.defaults={radius:200,angle:4,padding:20,offset:new it},e})(He);/*!
 * @pixi/filter-zoom-blur - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * @pixi/filter-zoom-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F1=function(t,e){return F1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},F1(t,e)};function o_e(t,e){F1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function s_e(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}var l_e=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,u_e=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;(function(t){o_e(e,t);function e(r){var n=this,i=Object.assign(e.defaults,r),a=i.maxKernelSize,o=s_e(i,["maxKernelSize"]);return n=t.call(this,l_e,u_e.replace("${maxKernelSize}",a.toFixed(1)))||this,Object.assign(n,o),n}return Object.defineProperty(e.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(r){this.uniforms.uCenter=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(r){this.uniforms.uStrength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(r){this.uniforms.uInnerRadius=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(r){(r<0||r===1/0)&&(r=-1),this.uniforms.uRadius=r},enumerable:!1,configurable:!0}),e.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},e})(He);const k1="shockwaveFilter";function c_e(t,e){const r=t.containerFilters.get(k1);if(r)return r;if(e){const n=new qxe([1280,720]);return n.time=0,t.addFilter(n),t.containerFilters.set(k1,n),n}}function f_e(t){return t.getOrCreateShockwaveFilter(!1)?t.getOrCreateShockwaveFilter().time:0}function h_e(t,e){if(e===0)t.removeFilter(k1);else{const r=t.getOrCreateShockwaveFilter();r&&(r.time=e)}}const D1=0,M1="radiusAlphaFilter";class d_e extends He{constructor(e,r){const n=`
// 半径透明度的fragment shader
precision mediump float;

uniform sampler2D uSampler;  // 输入纹理
varying vec2 vTextureCoord;  // 当前片元的纹理坐标
uniform vec2 center;         // 圆心坐标
uniform float radius;        // 圆的半径

void main(void) {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // 计算屏幕宽高比
    float aspect = 16.0 / 9.0;

    // 根据宽高比校正纹理坐标
    vec2 aspectCorrectCoord = vTextureCoord;
    aspectCorrectCoord.x *= aspect;

    // 计算片元到圆心的距离
    float dist = distance(aspectCorrectCoord, center * vec2(aspect, 1.0));

    // 使用smoothstep函数计算alpha值,实现边缘羽化效果
    float alpha = smoothstep(radius, radius + 0.05, dist);

    // 输出最终颜色
    gl_FragColor = color * (1.0 - alpha);
}
    `;super(null,n),this.uniforms.center=[e.x,e.y],this.uniforms.radius=r}set center(e){this.uniforms.center=[e.x,e.y]}get center(){return new it(this.uniforms.center[0],this.uniforms.center[1])}set radius(e){this.uniforms.radius=e}get radius(){return this.uniforms.radius}}function p_e(t,e){const r=t.containerFilters.get(M1);if(r)return r;if(e){const n=new d_e(new it(.5,.5),D1);return n.radius=D1,t.addFilter(n),t.containerFilters.set(M1,n),n}}function v_e(t){return t.getOrCreateShockwaveFilter(!1)?t.getOrCreateRadiusAlphaFilter().radius:D1}function m_e(t,e){if(e===0)t.removeFilter(M1);else{const r=t.getOrCreateRadiusAlphaFilter();r&&(r.radius=e)}}class Ty extends Fr{constructor(){super();Re(this,"containerFilters",new Map);Re(this,"baseX",0);Re(this,"baseY",0)}addFilter(r){this.filters?this.filters.push(r):this.filters=[r]}removeFilter(r){const n=this.containerFilters.get(r);if(n){const i=((this==null?void 0:this.filters)??[]).findIndex(a=>a===n);this.filters&&(this.filters.splice(i,1),this.containerFilters.delete(r))}}get blur(){return this.getOrCreateBlurFilter().blur}set blur(r){this.getOrCreateBlurFilter().blur=r}get x(){var n;return(((n=super.position)==null?void 0:n.x)??0)-this.baseX}set x(r){super.position&&(super.position.x=r+this.baseX)}get y(){var n;return(((n=super.position)==null?void 0:n.y)??0)-this.baseY}set y(r){super.position&&(super.position.y=r+this.baseY)}setBaseX(r){const n=this.x;this.baseX=r,this.x=n}setBaseY(r){const n=this.y;this.baseY=r,this.y=n}getOrCreateBlurFilter(){const r=this.containerFilters.get("blur");if(r)return r;{const n=new p4.BlurFilter;return n.blur=0,this.addFilter(n),this.containerFilters.set("blur",n),n}}getOrCreateOldFilmFilter(r=!0){const n=this.containerFilters.get("oldFilm");if(n)return n;if(r){const i=new mye;return this.addFilter(i),this.containerFilters.set("oldFilm",i),i}else return null}get oldFilm(){return this.getOrCreateOldFilmFilter(!1)?1:0}set oldFilm(r){r===0?this.removeFilter("oldFilm"):this.getOrCreateOldFilmFilter()}getOrCreateDotFilter(r=!0){const n=this.containerFilters.get("dotFilm");if(n)return n;if(r){const i=new _ye;return this.addFilter(i),this.containerFilters.set("dotFilm",i),i}else return null}get dotFilm(){return this.getOrCreateDotFilter(!1)?1:0}set dotFilm(r){r===0?this.removeFilter("dotFilm"):this.getOrCreateDotFilter()}getOrCreateReflectionFilter(r=!0){const n=this.containerFilters.get("reflectionFilm");if(n)return n;if(r){const i=new wye;return this.addFilter(i),this.containerFilters.set("reflectionFilm",i),i}else return null}get reflectionFilm(){return this.getOrCreateReflectionFilter(!1)?1:0}set reflectionFilm(r){r===0?this.removeFilter("reflectionFilm"):this.getOrCreateReflectionFilter()}getOrCreateGlitchFilter(r=!0){const n=this.containerFilters.get("glitchFilm");if(n)return n;if(r){const i=new Pye;return this.addFilter(i),this.containerFilters.set("glitchFilm",i),i}else return null}get glitchFilm(){return this.getOrCreateGlitchFilter(!1)?1:0}set glitchFilm(r){r===0?this.removeFilter("glitchFilm"):this.getOrCreateGlitchFilter()}getOrCreateRGBSplitFilter(r=!0){const n=this.containerFilters.get("rgbFilm");if(n)return n;if(r){const i=new Fye;return this.addFilter(i),this.containerFilters.set("rgbFilm",i),i}}get rgbFilm(){return this.getOrCreateRGBSplitFilter(!1)?1:0}set rgbFilm(r){r===0?this.removeFilter("rgbFilm"):this.getOrCreateRGBSplitFilter()}getOrCreateGodrayFilter(r=!0){const n=this.containerFilters.get("godrayFilm");if(n)return n;if(r){const i=new Bye;return this.addFilter(i),this.containerFilters.set("godrayFilm",i),i}}get godrayFilm(){return this.getOrCreateGodrayFilter(!1)?1:0}set godrayFilm(r){r===0?this.removeFilter("godrayFilm"):this.getOrCreateGodrayFilter()}getOrCreateShockwaveFilter(r=!0){return c_e(this,r)}get shockwaveFilter(){return f_e(this)}set shockwaveFilter(r){h_e(this,r)}getOrCreateRadiusAlphaFilter(r=!0){return p_e(this,r)}get radiusAlphaFilter(){return v_e(this)}set radiusAlphaFilter(r){m_e(this,r)}}var et;(function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"})(et||(et={}));var Op=function(){function t(e,r,n,i){r===void 0&&(r=new Array),n===void 0&&(n=0),i===void 0&&(i=new DataView(e.buffer)),this.strings=r,this.index=n,this.buffer=i}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},t.prototype.readShort=function(){var e=this.buffer.getInt16(this.index);return this.index+=2,e},t.prototype.readInt32=function(){var e=this.buffer.getInt32(this.index);return this.index+=4,e},t.prototype.readInt=function(e){var r=this.readByte(),n=r&127;return r&128&&(r=this.readByte(),n|=(r&127)<<7,r&128&&(r=this.readByte(),n|=(r&127)<<14,r&128&&(r=this.readByte(),n|=(r&127)<<21,r&128&&(r=this.readByte(),n|=(r&127)<<28)))),e?n:n>>>1^-(n&1)},t.prototype.readStringRef=function(){var e=this.readInt(!0);return e==0?null:this.strings[e-1]},t.prototype.readString=function(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;for(var r="",n=0;n<e;){var i=this.readUnsignedByte();switch(i>>4){case 12:case 13:r+=String.fromCharCode((i&31)<<6|this.readByte()&63),n+=2;break;case 14:r+=String.fromCharCode((i&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:r+=String.fromCharCode(i),n++}}return r},t.prototype.readFloat=function(){var e=this.buffer.getFloat32(this.index);return this.index+=4,e},t.prototype.readBoolean=function(){return this.readByte()!=0},t}(),N;(function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"})(N||(N={}));var Ze;(function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"})(Ze||(Ze={}));var Wt;(function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"})(Wt||(Wt={}));var nr;(function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"})(nr||(nr={}));var ze;(function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"})(ze||(ze={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var L1=function(t,e){return L1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},L1(t,e)};function Ou(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");L1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function IR(t){switch(t.toLowerCase()){case"nearest":return bn.Nearest;case"linear":return bn.Linear;case"mipmap":return bn.MipMap;case"mipmapnearestnearest":return bn.MipMapNearestNearest;case"mipmaplinearnearest":return bn.MipMapLinearNearest;case"mipmapnearestlinear":return bn.MipMapNearestLinear;case"mipmaplinearlinear":return bn.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}}var bn;(function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"})(bn||(bn={}));var oo;(function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"})(oo||(oo={}));var B1=function(){function t(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(t.prototype,"width",{get:function(){var e=this.texture;return e.trim?e.trim.width:e.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var e=this.texture;return e.trim?e.trim.height:e.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var e=this.texture;return e.trim?e.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var e=this.texture;return e.trim?e.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var e=this.texture;return this.originalHeight-this.height-(e.trim?e.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this.texture.rotate!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"degrees",{get:function(){return(360-this.texture.rotate*45)%360},enumerable:!1,configurable:!0}),t}(),g_e=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}return t}(),y_e=function(){function t(e,r,n){this.pages=new Array,this.regions=new Array,e&&this.addSpineAtlas(e,r,n)}return t.prototype.addTexture=function(e,r){for(var n=this.pages,i=null,a=0;a<n.length;a++)if(n[a].baseTexture===r.baseTexture){i=n[a];break}if(i===null){i=new FR,i.name="texturePage";var o=r.baseTexture;i.width=o.realWidth,i.height=o.realHeight,i.baseTexture=o,i.minFilter=i.magFilter=bn.Nearest,i.uWrap=oo.ClampToEdge,i.vWrap=oo.ClampToEdge,n.push(i)}var s=new kR;return s.name=e,s.page=i,s.texture=r,s.index=-1,this.regions.push(s),s},t.prototype.addTextureHash=function(e,r){for(var n in e)e.hasOwnProperty(n)&&this.addTexture(r&&n.indexOf(".")!==-1?n.substr(0,n.lastIndexOf(".")):n,e[n])},t.prototype.addSpineAtlas=function(e,r,n){return this.load(e,r,n)},t.prototype.load=function(e,r,n){var i=this;if(r==null)throw new Error("textureLoader cannot be null.");var a=new x_e(e),o=new Array(4),s=null,c={},l=null;c.size=function(){s.width=parseInt(o[1]),s.height=parseInt(o[2])},c.format=function(){},c.filter=function(){s.minFilter=IR(o[1]),s.magFilter=IR(o[2])},c.repeat=function(){o[1].indexOf("x")!=-1&&(s.uWrap=oo.Repeat),o[1].indexOf("y")!=-1&&(s.vWrap=oo.Repeat)},c.pma=function(){s.pma=o[1]=="true"};var u={};u.xy=function(){l.x=parseInt(o[1]),l.y=parseInt(o[2])},u.size=function(){l.width=parseInt(o[1]),l.height=parseInt(o[2])},u.bounds=function(){l.x=parseInt(o[1]),l.y=parseInt(o[2]),l.width=parseInt(o[3]),l.height=parseInt(o[4])},u.offset=function(){l.offsetX=parseInt(o[1]),l.offsetY=parseInt(o[2])},u.orig=function(){l.originalWidth=parseInt(o[1]),l.originalHeight=parseInt(o[2])},u.offsets=function(){l.offsetX=parseInt(o[1]),l.offsetY=parseInt(o[2]),l.originalWidth=parseInt(o[3]),l.originalHeight=parseInt(o[4])},u.rotate=function(){var d=o[1],p=0;d.toLocaleLowerCase()=="true"?p=6:d.toLocaleLowerCase()=="false"?p=0:p=(720-parseFloat(d))%360/45,l.rotate=p},u.index=function(){l.index=parseInt(o[1])};for(var f=a.readLine();f!=null&&f.trim().length==0;)f=a.readLine();for(;!(f==null||f.trim().length==0||a.readEntry(o,f)==0);)f=a.readLine();var h=function(){for(;;){if(f==null)return n&&n(i);if(f.trim().length==0)s=null,f=a.readLine();else if(s===null){for(s=new FR,s.name=f.trim();a.readEntry(o,f=a.readLine())!=0;){var d=c[o[0]];d&&d()}i.pages.push(s),r(s.name,function(C){if(C===null)return i.pages.splice(i.pages.indexOf(s),1),n&&n(null);s.baseTexture=C,s.pma&&(C.alphaMode=Un.PMA),C.valid||C.setSize(s.width,s.height),s.setFilters(),(!s.width||!s.height)&&(s.width=C.realWidth,s.height=C.realHeight,(!s.width||!s.height)&&console.log("ERROR spine atlas page "+s.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),h()});break}else{l=new g_e;var p=new kR;p.name=f,p.page=s;for(var v=null,y=null;;){var g=a.readEntry(o,f=a.readLine());if(g==0)break;var d=u[o[0]];if(d)d();else{v==null&&(v=[],y=[]),v.push(o[0]);for(var m=[],x=0;x<g;x++)m.push(parseInt(o[x+1]));y.push(m)}}l.originalWidth==0&&l.originalHeight==0&&(l.originalWidth=l.width,l.originalHeight=l.height);var b=s.baseTexture.resolution;l.x/=b,l.y/=b,l.width/=b,l.height/=b,l.originalWidth/=b,l.originalHeight/=b,l.offsetX/=b,l.offsetY/=b;var _=l.rotate%4!==0,S=new at(l.x,l.y,_?l.height:l.width,_?l.width:l.height),E=new at(0,0,l.originalWidth,l.originalHeight),w=new at(l.offsetX,l.originalHeight-l.height-l.offsetY,l.width,l.height);p.texture=new Ve(p.page.baseTexture,S,E,w,l.rotate),p.index=l.index,p.texture.updateUvs(),i.regions.push(p)}}};h()},t.prototype.findRegion=function(e){for(var r=0;r<this.regions.length;r++)if(this.regions[r].name==e)return this.regions[r];return null},t.prototype.dispose=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].baseTexture.dispose()},t}(),x_e=function(){function t(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readEntry=function(e,r){if(r==null||(r=r.trim(),r.length==0))return 0;var n=r.indexOf(":");if(n==-1)return 0;e[0]=r.substr(0,n).trim();for(var i=1,a=n+1;;i++){var o=r.indexOf(",",a);if(o==-1)return e[i]=r.substr(a).trim(),i;if(e[i]=r.substr(a,o-a).trim(),a=o+1,i==4)return 4}},t}(),FR=function(){function t(){this.minFilter=bn.Nearest,this.magFilter=bn.Nearest,this.uWrap=oo.ClampToEdge,this.vWrap=oo.ClampToEdge}return t.prototype.setFilters=function(){var e=this.baseTexture,r=this.minFilter;r==bn.Linear?e.scaleMode=zr.LINEAR:this.minFilter==bn.Nearest?e.scaleMode=zr.NEAREST:(e.mipmap=Tn.POW2,r==bn.MipMapNearestNearest?e.scaleMode=zr.NEAREST:e.scaleMode=zr.LINEAR)},t}(),kR=function(t){Ou(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(B1),__e=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)),b_e=Math.fround||__e,y4=function(){function t(){this.array=new Array}return t.prototype.add=function(e){var r=this.contains(e);return this.array[e|0]=e|0,!r},t.prototype.contains=function(e){return this.array[e|0]!=null},t.prototype.remove=function(e){this.array[e|0]=void 0},t.prototype.clear=function(){this.array.length=0},t}(),x4=function(){function t(){this.entries={},this.size=0}return t.prototype.add=function(e){var r=this.entries[e];return this.entries[e]=!0,r?!1:(this.size++,!0)},t.prototype.addAll=function(e){for(var r=this.size,n=0,i=e.length;n<i;n++)this.add(e[n]);return r!=this.size},t.prototype.contains=function(e){return this.entries[e]},t.prototype.clear=function(){this.entries={},this.size=0},t}(),_e=function(){function t(e,r,n,i){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),i===void 0&&(i=0),this.r=e,this.g=r,this.b=n,this.a=i}return t.prototype.set=function(e,r,n,i){return this.r=e,this.g=r,this.b=n,this.a=i,this.clamp()},t.prototype.setFromColor=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},t.prototype.setFromString=function(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this},t.prototype.add=function(e,r,n,i){return this.r+=e,this.g+=r,this.b+=n,this.a+=i,this.clamp()},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(e,r){e.r=((r&4278190080)>>>24)/255,e.g=((r&16711680)>>>16)/255,e.b=((r&65280)>>>8)/255,e.a=(r&255)/255},t.rgb888ToColor=function(e,r){e.r=((r&16711680)>>>16)/255,e.g=((r&65280)>>>8)/255,e.b=(r&255)/255},t.fromString=function(e){return new t().setFromString(e)},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}(),G=function(){function t(){}return t.clamp=function(e,r,n){return e<r?r:e>n?n:e},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(e){return e>0?1:e<0?-1:0},t.toInt=function(e){return e>0?Math.floor(e):Math.ceil(e)},t.cbrt=function(e){var r=Math.pow(Math.abs(e),.3333333333333333);return e<0?-r:r},t.randomTriangular=function(e,r){return t.randomTriangularWith(e,r,(e+r)*.5)},t.randomTriangularWith=function(e,r,n){var i=Math.random(),a=r-e;return i<=(n-e)/a?e+Math.sqrt(i*a*(n-e)):r-Math.sqrt((1-i)*a*(r-n))},t.isPowerOfTwo=function(e){return e&&(e&e-1)===0},t.PI=3.1415927,t.PI2=t.PI*2,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}(),S_e=function(){function t(){}return t.prototype.apply=function(e,r,n){return e+(r-e)*this.applyInternal(n)},t}(),E_e=function(t){Ou(e,t);function e(r){var n=t.call(this)||this;return n.power=2,n.power=r,n}return e.prototype.applyInternal=function(r){return r<=.5?Math.pow(r*2,this.power)/2:Math.pow((r-1)*2,this.power)/(this.power%2==0?-2:2)+1},e}(S_e),_4=function(t){Ou(e,t);function e(r){return t.call(this,r)||this}return e.prototype.applyInternal=function(r){return Math.pow(r-1,this.power)*(this.power%2==0?-1:1)+1},e}(E_e),Q=function(){function t(){}return t.arrayCopy=function(e,r,n,i,a){for(var o=r,s=i;o<r+a;o++,s++)n[s]=e[o]},t.arrayFill=function(e,r,n,i){for(var a=r;a<n;a++)e[a]=i},t.setArraySize=function(e,r,n){n===void 0&&(n=0);var i=e.length;if(i==r)return e;if(e.length=r,i<r)for(var a=i;a<r;a++)e[a]=n;return e},t.ensureArrayCapacity=function(e,r,n){return n===void 0&&(n=0),e.length>=r?e:t.setArraySize(e,r,n)},t.newArray=function(e,r){for(var n=new Array(e),i=0;i<e;i++)n[i]=r;return n},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var r=new Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?b_e(e):e},t.webkit602BugfixHelper=function(e,r){},t.contains=function(e,r,n){for(var i=0;i<e.length;i++)if(e[i]==r)return!0;return!1},t.enumValue=function(e,r){return e[r[0].toUpperCase()+r.slice(1)]},t.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u",t}(),gv=function(){function t(e){this.items=new Array,this.instantiator=e}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(e){e.reset&&e.reset(),this.items.push(e)},t.prototype.freeAll=function(e){for(var r=0;r<e.length;r++)this.free(e[r])},t.prototype.clear=function(){this.items.length=0},t}(),wf=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=e,this.y=r}return t.prototype.set=function(e,r){return this.x=e,this.y=r,this},t.prototype.length=function(){var e=this.x,r=this.y;return Math.sqrt(e*e+r*r)},t.prototype.normalize=function(){var e=this.length();return e!=0&&(this.x/=e,this.y/=e),this},t}(),yw=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new gv(function(){return Q.newFloatArray(16)})}return t.prototype.update=function(e,r){if(!e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,i=this.polygons,a=this.polygonPool,o=e.slots,s=o.length;n.length=0,a.freeAll(i),i.length=0;for(var c=0;c<s;c++){var l=o[c];if(l.bone.active){var u=l.getAttachment();if(u!=null&&u.type===et.BoundingBox){var f=u;n.push(f);var h=a.obtain();h.length!=f.worldVerticesLength&&(h=Q.newFloatArray(f.worldVerticesLength)),i.push(h),f.computeWorldVertices(l,0,f.worldVerticesLength,h,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var e=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=this.polygons,o=0,s=a.length;o<s;o++)for(var c=a[o],l=c,u=0,f=c.length;u<f;u+=2){var h=l[u],d=l[u+1];e=Math.min(e,h),r=Math.min(r,d),n=Math.max(n,h),i=Math.max(i,d)}this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.aabbContainsPoint=function(e,r){return e>=this.minX&&e<=this.maxX&&r>=this.minY&&r<=this.maxY},t.prototype.aabbIntersectsSegment=function(e,r,n,i){var a=this.minX,o=this.minY,s=this.maxX,c=this.maxY;if(e<=a&&n<=a||r<=o&&i<=o||e>=s&&n>=s||r>=c&&i>=c)return!1;var l=(i-r)/(n-e),u=l*(a-e)+r;if(u>o&&u<c||(u=l*(s-e)+r,u>o&&u<c))return!0;var f=(o-r)/l+e;return f>a&&f<s||(f=(c-r)/l+e,f>a&&f<s)},t.prototype.aabbIntersectsSkeleton=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},t.prototype.containsPoint=function(e,r){for(var n=this.polygons,i=0,a=n.length;i<a;i++)if(this.containsPointPolygon(n[i],e,r))return this.boundingBoxes[i];return null},t.prototype.containsPointPolygon=function(e,r,n){for(var i=e,a=e.length,o=a-2,s=!1,c=0;c<a;c+=2){var l=i[c+1],u=i[o+1];if(l<n&&u>=n||u<n&&l>=n){var f=i[c];f+(n-l)/(u-l)*(i[o]-f)<r&&(s=!s)}o=c}return s},t.prototype.intersectsSegment=function(e,r,n,i){for(var a=this.polygons,o=0,s=a.length;o<s;o++)if(this.intersectsSegmentPolygon(a[o],e,r,n,i))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(e,r,n,i,a){for(var o=e,s=e.length,c=r-i,l=n-a,u=r*a-n*i,f=o[s-2],h=o[s-1],d=0;d<s;d+=2){var p=o[d],v=o[d+1],y=f*v-h*p,g=f-p,m=h-v,x=c*m-l*g,b=(u*g-c*y)/x;if((b>=f&&b<=p||b>=p&&b<=f)&&(b>=r&&b<=i||b>=i&&b<=r)){var _=(u*m-l*y)/x;if((_>=h&&_<=v||_>=v&&_<=h)&&(_>=n&&_<=a||_>=a&&_<=n))return!0}f=p,h=v}return!1},t.prototype.getPolygon=function(e){if(!e)throw new Error("boundingBox cannot be null.");var r=this.boundingBoxes.indexOf(e);return r==-1?null:this.polygons[r]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),w_e={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},Ga=[0,0,0],A_e=function(t){Ou(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.region=null,r.attachment=null,r}return e}(ui),C_e=function(t){Ou(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i,a,o)||this;return s.region=null,s.attachment=null,s}return e}(d4),nh=function(t){Ou(e,t);function e(r){var n=t.call(this)||this;if(!r)throw new Error("The spineData param is required.");if(typeof r=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=r,n.createSkeleton(r),n.slotContainers=[],n.tempClipContainers=[];for(var i=0,a=n.skeleton.slots.length;i<a;i++){var o=n.skeleton.slots[i],s=o.getAttachment(),c=n.newContainer();if(n.slotContainers.push(c),n.addChild(c),n.tempClipContainers.push(null),!!s)if(s.type===et.Region){var l=s.name,u=n.createSprite(o,s,l);o.currentSprite=u,o.currentSpriteName=l,c.addChild(u)}else if(s.type===et.Mesh){var f=n.createMesh(o,s);o.currentMesh=f,o.currentMeshId=s.id,o.currentMeshName=s.name,c.addChild(f)}else s.type===et.Clipping&&(n.createGraphics(o,s),c.addChild(o.clippingContainer),c.addChild(o.currentGraphics))}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(r){var n;r!=this._debug&&((n=this._debug)===null||n===void 0||n.unregisterSpine(this),r==null||r.registerSpine(this),this._debug=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,this.updateTransform=r?e.prototype.autoUpdateTransform:Fr.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return wn(this.tintRgb)},set:function(r){this.tintRgb=kr(r,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delayLimit",{get:function(){var r=typeof this.localDelayLimit<"u"?this.localDelayLimit:w_e.GLOBAL_DELAY_LIMIT;return r||Number.MAX_VALUE},enumerable:!1,configurable:!0}),e.prototype.update=function(r){var n,i=this.delayLimit;if(r>i&&(r=i),this.state.update(r),this.state.apply(this.skeleton),!!this.skeleton){this.skeleton.updateWorldTransform();var a=this.skeleton.slots,o=this.color,s=null,c=null;o?(s=o.light,c=o.dark):s=this.tintRgb;for(var l=0,u=a.length;l<u;l++){var f=a[l],h=f.getAttachment(),d=this.slotContainers[l];if(!h){d.visible=!1;continue}var p=null;h.sequence&&h.sequence.apply(f,h);var v=h.region,y=h.color;switch(h!=null&&h.type){case et.Region:var g=d.transform;if(g.setFromMatrix(f.bone.matrix),v=h.region,f.currentMesh&&(f.currentMesh.visible=!1,f.currentMesh=null,f.currentMeshId=void 0,f.currentMeshName=void 0),!v){f.currentSprite&&(f.currentSprite.renderable=!1);break}if(!f.currentSpriteName||f.currentSpriteName!==h.name){var m=h.name;if(f.currentSprite&&(f.currentSprite.visible=!1),f.sprites=f.sprites||{},f.sprites[m]!==void 0)f.sprites[m].visible=!0;else{var x=this.createSprite(f,h,m);d.addChild(x)}f.currentSprite=f.sprites[m],f.currentSpriteName=m}f.currentSprite.renderable=!0,f.hackRegion||this.setSpriteRegion(h,f.currentSprite,v),f.currentSprite.color?p=f.currentSprite.color:(Ga[0]=s[0]*f.color.r*y.r,Ga[1]=s[1]*f.color.g*y.g,Ga[2]=s[2]*f.color.b*y.b,f.currentSprite.tint=wn(Ga)),f.currentSprite.blendMode=f.blendMode;break;case et.Mesh:if(f.currentSprite){f.currentSprite.visible=!1,f.currentSprite=null,f.currentSpriteName=void 0;var b=new fv;b._parentID=-1,b._worldID=d.transform._worldID,d.transform=b}if(!v){f.currentMesh&&(f.currentMesh.renderable=!1);break}var _=h.id;if(f.currentMeshId===void 0||f.currentMeshId!==_){var S=_;if(f.currentMesh&&(f.currentMesh.visible=!1),f.meshes=f.meshes||{},f.meshes[S]!==void 0)f.meshes[S].visible=!0;else{var E=this.createMesh(f,h);d.addChild(E)}f.currentMesh=f.meshes[S],f.currentMeshName=h.name,f.currentMeshId=S}f.currentMesh.renderable=!0,h.computeWorldVerticesOld(f,f.currentMesh.vertices),f.currentMesh.color?p=f.currentMesh.color:(Ga[0]=s[0]*f.color.r*y.r,Ga[1]=s[1]*f.color.g*y.g,Ga[2]=s[2]*f.color.b*y.b,f.currentMesh.tint=wn(Ga)),f.currentMesh.blendMode=f.blendMode,f.hackRegion||this.setMeshRegion(h,f.currentMesh,v);break;case et.Clipping:f.currentGraphics||(this.createGraphics(f,h),d.addChild(f.clippingContainer),d.addChild(f.currentGraphics)),this.updateGraphics(f,h),d.alpha=1,d.visible=!0;continue;default:d.visible=!1;continue}if(d.visible=!0,p){var w=f.color.r*y.r,C=f.color.g*y.g,A=f.color.b*y.b;p.setLight(s[0]*w+c[0]*(1-w),s[1]*C+c[1]*(1-C),s[2]*A+c[2]*(1-A)),f.darkColor?(w=f.darkColor.r,C=f.darkColor.g,A=f.darkColor.b):(w=0,C=0,A=0),p.setDark(s[0]*w+c[0]*(1-w),s[1]*C+c[1]*(1-C),s[2]*A+c[2]*(1-A))}d.alpha=f.color.a}for(var P=this.skeleton.drawOrder,T=null,O=null,l=0,u=P.length;l<u;l++){var f=a[P[l].data.index],d=this.slotContainers[P[l].data.index];if(O||d.parent!==null&&d.parent!==this&&(d.parent.removeChild(d),d.parent=this),f.currentGraphics&&f.getAttachment())O=f.clippingContainer,T=f.getAttachment(),O.children.length=0,this.children[l]=d,T.endSlot===f.data&&(T.endSlot=null);else if(O){var R=this.tempClipContainers[l];R||(R=this.tempClipContainers[l]=this.newContainer(),R.visible=!1),this.children[l]=R,d.parent=null,O.addChild(d),T.endSlot==f.data&&(O.renderable=!0,O=null,T=null)}else this.children[l]=d}(n=this._debug)===null||n===void 0||n.renderDebug(this)}},e.prototype.setSpriteRegion=function(r,n,i){n.attachment===r&&n.region===i||(n.region=i,n.attachment=r,n.texture=i.texture,n.rotation=r.rotation*G.degRad,n.position.x=r.x,n.position.y=r.y,n.alpha=r.color.a,i.size?(n.scale.x=i.size.width/i.originalWidth,n.scale.y=-i.size.height/i.originalHeight):(n.scale.x=r.scaleX*r.width/i.originalWidth,n.scale.y=-r.scaleY*r.height/i.originalHeight))},e.prototype.setMeshRegion=function(r,n,i){n.attachment===r&&n.region===i||(n.region=i,n.attachment=r,n.texture=i.texture,i.texture.updateUvs(),n.uvBuffer.update(r.regionUVs))},e.prototype.autoUpdateTransform=function(){{this.lastTime=this.lastTime||Date.now();var r=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(r)}Fr.prototype.updateTransform.call(this)},e.prototype.createSprite=function(r,n,i){var a=n.region;r.hackAttachment===n&&(a=r.hackRegion);var o=a?a.texture:null,s=this.newSprite(o);return s.anchor.set(.5),a&&this.setSpriteRegion(n,s,n.region),r.sprites=r.sprites||{},r.sprites[i]=s,s},e.prototype.createMesh=function(r,n){var i=n.region;r.hackAttachment===n&&(i=r.hackRegion,r.hackAttachment=null,r.hackRegion=null);var a=this.newMesh(i?i.texture:null,new Float32Array(n.regionUVs.length),n.regionUVs,new Uint16Array(n.triangles),Wn.TRIANGLES);return typeof a._canvasPadding<"u"&&(a._canvasPadding=1.5),a.alpha=n.color.a,a.region=n.region,i&&this.setMeshRegion(n,a,i),r.meshes=r.meshes||{},r.meshes[n.id]=a,a},e.prototype.createGraphics=function(r,n){var i=this.newGraphics(),a=new kl([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(a),i.renderable=!1,r.currentGraphics=i,r.clippingContainer=this.newContainer(),r.clippingContainer.mask=r.currentGraphics,i},e.prototype.updateGraphics=function(r,n){var i=r.currentGraphics.geometry,a=i.graphicsData[0].shape.points,o=n.worldVerticesLength;a.length=o,n.computeWorldVertices(r,0,o,a,0,2),i.invalidate()},e.prototype.hackTextureBySlotIndex=function(r,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var a=this.skeleton.slots[r];if(!a)return!1;var o=a.getAttachment(),s=o.region;return n?(s=new B1,s.texture=n,s.size=i,a.hackRegion=s,a.hackAttachment=o):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite?this.setSpriteRegion(o,a.currentSprite,s):a.currentMesh&&this.setMeshRegion(o,a.currentMesh,s),!0},e.prototype.hackTextureBySlotName=function(r,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var a=this.skeleton.findSlotIndex(r);return a==-1?!1:this.hackTextureBySlotIndex(a,n,i)},e.prototype.hackTextureAttachment=function(r,n,i,a){a===void 0&&(a=null);var o=this.skeleton.findSlotIndex(r),s=this.skeleton.getAttachmentByName(r,n);s.region.texture=i;var c=this.skeleton.slots[o];if(!c)return!1;var l=c.getAttachment();if(n===l.name){var u=s.region;return i?(u=new B1,u.texture=i,u.size=a,c.hackRegion=u,c.hackAttachment=l):(c.hackRegion=null,c.hackAttachment=null),c.currentSprite&&c.currentSprite.region!=u?(this.setSpriteRegion(l,c.currentSprite,u),c.currentSprite.region=u):c.currentMesh&&c.currentMesh.region!=u&&this.setMeshRegion(l,c.currentMesh,u),!0}return!1},e.prototype.newContainer=function(){return new Fr},e.prototype.newSprite=function(r){return new A_e(r)},e.prototype.newGraphics=function(){return new Kl},e.prototype.newMesh=function(r,n,i,a,o){return new C_e(r,n,i,a,o)},e.prototype.transformHack=function(){return 1},e.prototype.hackAttachmentGroups=function(r,n,i){if(r){for(var a=[],o=[],s=0,c=this.skeleton.slots.length;s<c;s++){var l=this.skeleton.slots[s],u=l.currentSpriteName||l.currentMeshName||"",f=l.currentSprite||l.currentMesh;u.endsWith(r)?(f.parentGroup=n,o.push(f)):i&&f&&(f.parentGroup=i,a.push(f))}return[a,o]}},e.prototype.destroy=function(r){this.debug=null;for(var n=0,i=this.skeleton.slots.length;n<i;n++){var a=this.skeleton.slots[n];for(var o in a.meshes)a.meshes[o].destroy(r);a.meshes=null;for(var s in a.sprites)a.sprites[s].destroy(r);a.sprites=null}for(var n=0,i=this.slotContainers.length;n<i;n++)this.slotContainers[n].destroy(r);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,t.prototype.destroy.call(this,r)},e.clippingPolygon=[],e}(Fr);Object.defineProperty(nh.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}});function T_e(t){return t.type===Pt.TYPE.JSON}function P_e(t){return t.xhrType===Pt.XHR_RESPONSE_TYPE.BUFFER}Pt.setExtensionXhrType("skel",Pt.XHR_RESPONSE_TYPE.BUFFER);var O_e=function(){function t(){}return t.prototype.genMiddleware=function(){var e=this;return{use:function(r,n){if(!r.data)return n();var i=T_e(r)&&r.data.bones,a=P_e(r)&&(r.extension==="skel"||r.metadata&&r.metadata.spineMetadata);if(!i&&!a)return n();var o=null,s=r.data;i?o=e.createJsonParser():(o=e.createBinaryParser(),r.data instanceof ArrayBuffer&&(s=new Uint8Array(r.data)));var c=r.metadata||{},l=c?c.spineSkeletonScale:null;l&&(o.scale=l);var u=c.spineAtlas;if(u===!1)return n();if(u&&u.pages)return e.parseData(r,o,u,s),n();var f=c.spineAtlasSuffix||".atlas",h=r.url,d=h.indexOf("?");d>0&&(h=h.substr(0,d)),h=h.substr(0,h.lastIndexOf("."))+f,c.spineAtlasFile&&(h=c.spineAtlasFile),h=h.replace(this.baseUrl,"");var p={crossOrigin:r.crossOrigin,xhrType:Pt.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:r},v={crossOrigin:r.crossOrigin,metadata:c.imageMetadata||null,parentResource:r},y=r.url.substr(0,r.url.lastIndexOf("/")+1);y=y.replace(this.baseUrl,"");var g=c.imageNamePrefix||r.name+"_atlas_page_",m=c.images?DR(c.images):c.image?DR({default:c.image}):c.imageLoader?c.imageLoader(this,g,y,v):R_e(this,g,y,v);function x(b){new y_e(b,m,function(_){_&&e.parseData(r,o,_,s),n()})}c.atlasRawData?x(c.atlasRawData):this.add(r.name+"_atlas",h,p,function(b){b.error?n():x(b.data)})}}},t}();function R_e(t,e,r,n){return r&&r.lastIndexOf("/")!==r.length-1&&(r+="/"),function(i,a){var o=e+i,s=r+i,c=t.resources[o];if(c){var l=function(){a(c.texture.baseTexture)};c.texture?l():c.onAfterMiddleware.add(l)}else t.add(o,s,n,function(u){u.error?a(null):(i.indexOf("-pma.")>=0&&(u.texture.baseTexture.alphaMode=Un.PMA),a(u.texture.baseTexture))})}}function DR(t){return function(e,r){var n=t[e]||t.default;n&&n.baseTexture?r(n.baseTexture):r(n)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var N1=function(t,e){return N1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},N1(t,e)};function Ht(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xw=function(){function t(e){if(e==null)throw new Error("name cannot be null.");this.name=e}return t}(),js=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.id=(e.nextID++&65535)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return e.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.deform,u=this.vertices,f=this.bones;if(f==null){l.length>0&&(u=l);for(var h=r.bone.matrix,d=h.tx,p=h.ty,v=h.a,y=h.c,g=h.b,m=h.d,x=n,b=o;b<i;x+=2,b+=s){var _=u[x],S=u[x+1];a[b]=_*v+S*y+d,a[b+1]=_*g+S*m+p}return}for(var E=0,w=0,C=0;C<n;C+=2){var A=f[E];E+=A+1,w+=A}var P=c.bones;if(l.length==0)for(var b=o,y=w*3;b<i;b+=s){var T=0,O=0,A=f[E++];for(A+=E;E<A;E++,y+=3){var h=P[f[E]].matrix,_=u[y],S=u[y+1],R=u[y+2];T+=(_*h.a+S*h.c+h.tx)*R,O+=(_*h.b+S*h.d+h.ty)*R}a[b]=T,a[b+1]=O}else for(var F=l,b=o,y=w*3,D=w<<1;b<i;b+=s){var T=0,O=0,A=f[E++];for(A+=E;E<A;E++,y+=3,D+=2){var h=P[f[E]].matrix,_=u[y]+F[D],S=u[y+1]+F[D+1],R=u[y+2];T+=(_*h.a+S*h.c+h.tx)*R,O+=(_*h.b+S*h.d+h.ty)*R}a[b]=T,a[b+1]=O}},e.prototype.copyTo=function(r){this.bones!=null?(r.bones=new Array(this.bones.length),Q.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,this.vertices!=null?(r.vertices=Q.newFloatArray(this.vertices.length),Q.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)):r.vertices=null,r.worldVerticesLength=this.worldVerticesLength,r.deformAttachment=this.deformAttachment},e.nextID=0,e}(xw),b4=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.BoundingBox,n.color=new _e(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},e}(js),S4=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Clipping,n.color=new _e(.2275,.2275,.8078,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},e}(js),yv=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Mesh,n.color=new _e(1,1,1,1),n.tempColor=new _e(0,0,0,0),n}return e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},e.prototype.copy=function(){if(this.parentMesh!=null)return this.newLinkedMesh();var r=new e(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Float32Array(this.regionUVs.length),Q.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.triangles=new Array(this.triangles.length),Q.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,this.edges!=null&&(r.edges=new Array(this.edges.length),Q.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},e.prototype.newLinkedMesh=function(){var r=new e(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),r.deformAttachment=this.deformAttachment,r.setParentMesh(this.parentMesh!=null?this.parentMesh:this),r},e}(js),Af=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Path,n.closed=!1,n.constantSpeed=!1,n.color=new _e(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),Q.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},e}(js),E4=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Point,n.color=new _e(.38,.94,0,1),n}return e.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},e.prototype.computeWorldRotation=function(r){var n=r.matrix,i=G.cosDeg(this.rotation),a=G.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*G.radDeg},e.prototype.copy=function(){var r=new e(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},e}(js),_w=function(){function t(e,r){if(this.deform=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new _e,this.darkColor=e.darkColor==null?null:new _e,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),bw=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new _e(1,1,1,1),n.offset=Q.newFloatArray(8),n.uvs=Q.newFloatArray(8),n.tempColor=new _e(1,1,1,1),n}return e.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*n,o=i+this.region.width*r,s=a+this.region.height*n,c=this.rotation*Math.PI/180,l=Math.cos(c),u=Math.sin(c),f=i*l+this.x,h=i*u,d=a*l+this.y,p=a*u,v=o*l+this.x,y=o*u,g=s*l+this.y,m=s*u,x=this.offset;x[e.OX1]=f-p,x[e.OY1]=d+h,x[e.OX2]=f-m,x[e.OY2]=g+h,x[e.OX3]=v-m,x[e.OY3]=g+y,x[e.OX4]=v-p,x[e.OY4]=d+y},e.prototype.setRegion=function(r){this.region=r;var n=this.uvs;r.rotate?(n[2]=r.u,n[3]=r.v2,n[4]=r.u,n[5]=r.v,n[6]=r.u2,n[7]=r.v,n[0]=r.u2,n[1]=r.v2):(n[0]=r.u,n[1]=r.v2,n[2]=r.u,n[3]=r.v,n[4]=r.u2,n[5]=r.v,n[6]=r.u2,n[7]=r.v2)},e.prototype.computeWorldVertices=function(r,n,i,a){var o=this.offset,s=r instanceof _w?r.bone.matrix:r.matrix,c=s.tx,l=s.ty,u=s.a,f=s.c,h=s.b,d=s.d,p=0,v=0;p=o[e.OX1],v=o[e.OY1],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX2],v=o[e.OY2],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX3],v=o[e.OY3],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX4],v=o[e.OY4],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l},e.prototype.copy=function(){var r=new e(this.name);return r.region=this.region,r.rendererObject=this.rendererObject,r.path=this.path,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,Q.arrayCopy(this.uvs,0,r.uvs,0,8),Q.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(xw),I_e=function(){function t(e,r){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=r}return t.prototype.begin=function(e){},t.prototype.transform=function(e,r,n,i){e.x+=G.randomTriangular(-this.jitterX,this.jitterY),e.y+=G.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),F_e=function(){function t(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return t.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},t.prototype.transform=function(e,r,n,i){var a=this.angle*G.degreesToRadians,o=e.x-this.worldX,s=e.y-this.worldY,c=Math.sqrt(o*o+s*s);if(c<this.radius){var l=t.interpolation.apply(0,a,(this.radius-c)/this.radius),u=Math.cos(l),f=Math.sin(l);e.x=u*o-f*s+this.worldX,e.y=f*o+u*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new _4(2),t}(),mr=function(){function t(e,r,n){if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=e,this.timelines=r,this.timelineIds=[];for(var i=0;i<r.length;i++)this.timelineIds[r[i].getPropertyId()]=!0;this.duration=n}return t.prototype.hasTimeline=function(e){return this.timelineIds[e]==!0},t.prototype.apply=function(e,r,n,i,a,o,s,c){if(e==null)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(e,r,n,a,o,s,c)},t.binarySearch=function(e,r,n){n===void 0&&(n=1);var i=0,a=e.length/n-2;if(a==0)return n;for(var o=a>>>1;;){if(e[(o+1)*n]<=r?i=o+1:a=o,i==a)return(i+1)*n;o=i+a>>>1}},t.linearSearch=function(e,r,n){for(var i=0,a=e.length-n;i<=a;i+=n)if(e[i]>r)return i;return-1},t}(),Xr;(function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"})(Xr||(Xr={}));var ga=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=Q.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var r=e*t.BEZIER_SIZE;if(r==this.curves.length)return t.LINEAR;var n=this.curves[r];return n==t.LINEAR?t.LINEAR:n==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,r,n,i,a){var o=(-r*2+i)*.03,s=(-n*2+a)*.03,c=((r-i)*3+1)*.006,l=((n-a)*3+1)*.006,u=o*2+c,f=s*2+l,h=r*.3+o+c*.16666667,d=n*.3+s+l*.16666667,p=e*t.BEZIER_SIZE,v=this.curves;v[p++]=t.BEZIER;for(var y=h,g=d,m=p+t.BEZIER_SIZE-1;p<m;p+=2)v[p]=y,v[p+1]=g,h+=u,d+=f,u+=c,f+=l,y+=h,g+=d},t.prototype.getCurvePercent=function(e,r){r=G.clamp(r,0,1);var n=this.curves,i=e*t.BEZIER_SIZE,a=n[i];if(a==t.LINEAR)return r;if(a==t.STEPPED)return 0;i++;for(var o=0,s=i,c=i+t.BEZIER_SIZE-1;i<c;i+=2)if(o=n[i],o>=r){var l=void 0,u=void 0;return i==s?(l=0,u=0):(l=n[i-2],u=n[i-1]),u+(n[i+1]-u)*(r-l)/(o-l)}var f=n[i-1];return f+(1-f)*(r-o)/(1-o)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=10*2-1,t}(),zn=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r<<1),n}return e.prototype.getPropertyId=function(){return(Xr.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+e.ROTATION]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.rotation=u.data.rotation;return;case N.first:var f=u.data.rotation-u.rotation;u.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*o}return}if(i>=l[l.length-e.ENTRIES]){var h=l[l.length+e.PREV_ROTATION];switch(s){case N.setup:u.rotation=u.data.rotation+h*o;break;case N.first:case N.replace:h+=u.data.rotation-u.rotation,h-=(16384-(16384.499999999996-h/360|0))*360;case N.add:u.rotation+=h*o}return}var d=mr.binarySearch(l,i,e.ENTRIES),p=l[d+e.PREV_ROTATION],v=l[d],y=this.getCurvePercent((d>>1)-1,1-(i-v)/(l[d+e.PREV_TIME]-v)),g=l[d+e.ROTATION]-p;switch(g=p+(g-(16384-(16384.499999999996-g/360|0))*360)*y,s){case N.setup:u.rotation=u.data.rotation+(g-(16384-(16384.499999999996-g/360|0))*360)*o;break;case N.first:case N.replace:g+=u.data.rotation-u.rotation;case N.add:u.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*o}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(ga),Ts=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.translate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.X]=i,this.frames[r+e.Y]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.x=u.data.x,u.y=u.data.y;return;case N.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=mr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.X]-f)*v,h+=(l[d+e.Y]-h)*v}switch(s){case N.setup:u.x=u.data.x+f*o,u.y=u.data.y+h*o;break;case N.first:case N.replace:u.x+=(u.data.x+f-u.x)*o,u.y+=(u.data.y+h-u.y)*o;break;case N.add:u.x+=f*o,u.y+=h*o}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(ga),Sw=function(t){Ht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Xr.scale<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case N.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X]*u.data.scaleX,h=l[l.length+e.PREV_Y]*u.data.scaleY;else{var d=mr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=(f+(l[d+e.X]-f)*v)*u.data.scaleX,h=(h+(l[d+e.Y]-h)*v)*u.data.scaleY}if(o==1)s==N.add?(u.scaleX+=f-u.data.scaleX,u.scaleY+=h-u.data.scaleY):(u.scaleX=f,u.scaleY=h);else{var y=0,g=0;if(c==Ze.mixOut)switch(s){case N.setup:y=u.data.scaleX,g=u.data.scaleY,u.scaleX=y+(Math.abs(f)*G.signum(y)-y)*o,u.scaleY=g+(Math.abs(h)*G.signum(g)-g)*o;break;case N.first:case N.replace:y=u.scaleX,g=u.scaleY,u.scaleX=y+(Math.abs(f)*G.signum(y)-y)*o,u.scaleY=g+(Math.abs(h)*G.signum(g)-g)*o;break;case N.add:y=u.scaleX,g=u.scaleY,u.scaleX=y+(Math.abs(f)*G.signum(y)-u.data.scaleX)*o,u.scaleY=g+(Math.abs(h)*G.signum(g)-u.data.scaleY)*o}else switch(s){case N.setup:y=Math.abs(u.data.scaleX)*G.signum(f),g=Math.abs(u.data.scaleY)*G.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=g+(h-g)*o;break;case N.first:case N.replace:y=Math.abs(u.scaleX)*G.signum(f),g=Math.abs(u.scaleY)*G.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=g+(h-g)*o;break;case N.add:y=G.signum(f),g=G.signum(h),u.scaleX=Math.abs(u.scaleX)*y+(f-Math.abs(u.data.scaleX)*y)*o,u.scaleY=Math.abs(u.scaleY)*g+(h-Math.abs(u.data.scaleY)*g)*o}}}},e}(Ts),Ew=function(t){Ht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Xr.shear<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case N.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=mr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=f+(l[d+e.X]-f)*v,h=h+(l[d+e.Y]-h)*v}switch(s){case N.setup:u.shearX=u.data.shearX+f*o,u.shearY=u.data.shearY+h*o;break;case N.first:case N.replace:u.shearX+=(u.data.shearX+f-u.shearX)*o,u.shearY+=(u.data.shearY+h-u.shearY)*o;break;case N.add:u.shearX+=f*o,u.shearY+=h*o}}},e}(Ts),Cf=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.color<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.color.setFromColor(l.data.color);return;case N.first:var f=l.color,h=l.data.color;f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var d=0,p=0,v=0,y=0;if(i>=u[u.length-e.ENTRIES]){var g=u.length;d=u[g+e.PREV_R],p=u[g+e.PREV_G],v=u[g+e.PREV_B],y=u[g+e.PREV_A]}else{var m=mr.binarySearch(u,i,e.ENTRIES);d=u[m+e.PREV_R],p=u[m+e.PREV_G],v=u[m+e.PREV_B],y=u[m+e.PREV_A];var x=u[m],b=this.getCurvePercent(m/e.ENTRIES-1,1-(i-x)/(u[m+e.PREV_TIME]-x));d+=(u[m+e.R]-d)*b,p+=(u[m+e.G]-p)*b,v+=(u[m+e.B]-v)*b,y+=(u[m+e.A]-y)*b}if(o==1)l.color.set(d,p,v,y);else{var f=l.color;s==N.setup&&f.setFromColor(l.data.color),f.add((d-f.r)*o,(p-f.g)*o,(v-f.b)*o,(y-f.a)*o)}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(ga),Tf=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s,this.frames[r+e.R2]=c,this.frames[r+e.G2]=l,this.frames[r+e.B2]=u},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case N.first:var f=l.color,h=l.darkColor,d=l.data.color,p=l.data.darkColor;f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),h.add((p.r-h.r)*o,(p.g-h.g)*o,(p.b-h.b)*o,0)}return}var v=0,y=0,g=0,m=0,x=0,b=0,_=0;if(i>=u[u.length-e.ENTRIES]){var S=u.length;v=u[S+e.PREV_R],y=u[S+e.PREV_G],g=u[S+e.PREV_B],m=u[S+e.PREV_A],x=u[S+e.PREV_R2],b=u[S+e.PREV_G2],_=u[S+e.PREV_B2]}else{var E=mr.binarySearch(u,i,e.ENTRIES);v=u[E+e.PREV_R],y=u[E+e.PREV_G],g=u[E+e.PREV_B],m=u[E+e.PREV_A],x=u[E+e.PREV_R2],b=u[E+e.PREV_G2],_=u[E+e.PREV_B2];var w=u[E],C=this.getCurvePercent(E/e.ENTRIES-1,1-(i-w)/(u[E+e.PREV_TIME]-w));v+=(u[E+e.R]-v)*C,y+=(u[E+e.G]-y)*C,g+=(u[E+e.B]-g)*C,m+=(u[E+e.A]-m)*C,x+=(u[E+e.R2]-x)*C,b+=(u[E+e.G2]-b)*C,_+=(u[E+e.B2]-_)*C}if(o==1)l.color.set(v,y,g,m),l.darkColor.set(x,b,_,1);else{var f=l.color,h=l.darkColor;s==N.setup&&(f.setFromColor(l.data.color),h.setFromColor(l.data.darkColor)),f.add((v-f.r)*o,(y-f.g)*o,(g-f.b)*o,(m-f.a)*o),h.add((x-h.r)*o,(b-h.g)*o,(_-h.b)*o,0)}}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(ga),ls=function(){function t(e){this.frames=Q.newFloatArray(e),this.attachmentNames=new Array(e)}return t.prototype.getPropertyId=function(){return(Xr.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.attachmentNames[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.slots[this.slotIndex];if(c.bone.active){if(s==Ze.mixOut){o==N.setup&&this.setAttachment(e,c,c.data.attachmentName);return}var l=this.frames;if(n<l[0]){(o==N.setup||o==N.first)&&this.setAttachment(e,c,c.data.attachmentName);return}var u=0;n>=l[l.length-1]?u=l.length-1:u=mr.binarySearch(l,n,1)-1;var f=this.attachmentNames[u];e.slots[this.slotIndex].setAttachment(f==null?null:e.getAttachment(this.slotIndex,f))}},t.prototype.setAttachment=function(e,r,n){r.setAttachment(n==null?null:e.getAttachment(this.slotIndex,n))},t}(),MR=null,ww=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r),n.frameVertices=new Array(r),MR==null&&(MR=Q.newFloatArray(64)),n}return e.prototype.getPropertyId=function(){return(Xr.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.frameVertices[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(!(!(u instanceof js)||u.deformAttachment!=this.attachment)){var f=l.deform;f.length==0&&(s=N.setup);var h=this.frameVertices,d=h[0].length,p=this.frames;if(i<p[0]){var v=u;switch(s){case N.setup:f.length=0;return;case N.first:if(o==1){f.length=0;break}var y=Q.setArraySize(f,d);if(v.bones==null)for(var g=v.vertices,m=0;m<d;m++)y[m]+=(g[m]-y[m])*o;else{o=1-o;for(var m=0;m<d;m++)y[m]*=o}}return}var x=Q.setArraySize(f,d);if(i>=p[p.length-1]){var b=h[p.length-1];if(o==1)if(s==N.add){var v=u;if(v.bones==null)for(var g=v.vertices,_=0;_<d;_++)x[_]+=b[_]-g[_];else for(var S=0;S<d;S++)x[S]+=b[S]}else Q.arrayCopy(b,0,x,0,d);else switch(s){case N.setup:{var E=u;if(E.bones==null)for(var g=E.vertices,w=0;w<d;w++){var C=g[w];x[w]=C+(b[w]-C)*o}else for(var A=0;A<d;A++)x[A]=b[A]*o;break}case N.first:case N.replace:for(var P=0;P<d;P++)x[P]+=(b[P]-x[P])*o;break;case N.add:var v=u;if(v.bones==null)for(var g=v.vertices,T=0;T<d;T++)x[T]+=(b[T]-g[T])*o;else for(var O=0;O<d;O++)x[O]+=b[O]*o}return}var R=mr.binarySearch(p,i),F=h[R-1],D=h[R],V=p[R],Y=this.getCurvePercent(R-1,1-(i-V)/(p[R-1]-V));if(o==1)if(s==N.add){var v=u;if(v.bones==null)for(var g=v.vertices,W=0;W<d;W++){var $=F[W];x[W]+=$+(D[W]-$)*Y-g[W]}else for(var I=0;I<d;I++){var $=F[I];x[I]+=$+(D[I]-$)*Y}}else for(var B=0;B<d;B++){var $=F[B];x[B]=$+(D[B]-$)*Y}else switch(s){case N.setup:{var L=u;if(L.bones==null)for(var g=L.vertices,M=0;M<d;M++){var $=F[M],C=g[M];x[M]=C+($+(D[M]-$)*Y-C)*o}else for(var X=0;X<d;X++){var $=F[X];x[X]=($+(D[X]-$)*Y)*o}break}case N.first:case N.replace:for(var K=0;K<d;K++){var $=F[K];x[K]+=($+(D[K]-$)*Y-x[K])*o}break;case N.add:var v=u;if(v.bones==null)for(var g=v.vertices,ne=0;ne<d;ne++){var $=F[ne];x[ne]+=($+(D[ne]-$)*Y-g[ne])*o}else for(var te=0;te<d;te++){var $=F[te];x[te]+=($+(D[te]-$)*Y)*o}}}}},e}(ga),xv=function(){function t(e){this.frames=Q.newFloatArray(e),this.events=new Array(e)}return t.prototype.getPropertyId=function(){return Xr.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r){this.frames[e]=r.time,this.events[e]=r},t.prototype.apply=function(e,r,n,i,a,o,s){if(i!=null){var c=this.frames,l=this.frames.length;if(r>n)this.apply(e,r,Number.MAX_VALUE,i,a,o,s),r=-1;else if(r>=c[l-1])return;if(!(n<c[0])){var u=0;if(r<c[0])u=0;else{u=mr.binarySearch(c,r);for(var f=c[u];u>0&&c[u-1]==f;)u--}for(;u<l&&n>=c[u];u++)i.push(this.events[u])}}},t}(),Dl=function(){function t(e){this.frames=Q.newFloatArray(e),this.drawOrders=new Array(e)}return t.prototype.getPropertyId=function(){return Xr.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.drawOrders[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.drawOrder,l=e.slots;if(s==Ze.mixOut&&o==N.setup){Q.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var u=this.frames;if(n<u[0]){(o==N.setup||o==N.first)&&Q.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var f=0;n>=u[u.length-1]?f=u.length-1:f=mr.binarySearch(u,n)-1;var h=this.drawOrders[f];if(h==null)Q.arrayCopy(l,0,c,0,l.length);else for(var d=0,p=h.length;d<p;d++)c[d]=l[h[d]]},t}(),Pf=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s,c){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.MIX]=i,this.frames[r+e.SOFTNESS]=a,this.frames[r+e.BEND_DIRECTION]=o,this.frames[r+e.COMPRESS]=s?1:0,this.frames[r+e.STRETCH]=c?1:0},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.ikConstraints[this.ikConstraintIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case N.first:u.mix+=(u.data.mix-u.mix)*o,u.softness+=(u.data.softness-u.softness)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}if(i>=l[l.length-e.ENTRIES]){s==N.setup?(u.mix=u.data.mix+(l[l.length+e.PREV_MIX]-u.data.mix)*o,u.softness=u.data.softness+(l[l.length+e.PREV_SOFTNESS]-u.data.softness)*o,c==Ze.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0)):(u.mix+=(l[l.length+e.PREV_MIX]-u.mix)*o,u.softness+=(l[l.length+e.PREV_SOFTNESS]-u.softness)*o,c==Ze.mixIn&&(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0));return}var f=mr.binarySearch(l,i,e.ENTRIES),h=l[f+e.PREV_MIX],d=l[f+e.PREV_SOFTNESS],p=l[f],v=this.getCurvePercent(f/e.ENTRIES-1,1-(i-p)/(l[f+e.PREV_TIME]-p));s==N.setup?(u.mix=u.data.mix+(h+(l[f+e.MIX]-h)*v-u.data.mix)*o,u.softness=u.data.softness+(d+(l[f+e.SOFTNESS]-d)*v-u.data.softness)*o,c==Ze.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0)):(u.mix+=(h+(l[f+e.MIX]-h)*v-u.mix)*o,u.softness+=(d+(l[f+e.SOFTNESS]-d)*v-u.softness)*o,c==Ze.mixIn&&(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0))}},e.ENTRIES=6,e.PREV_TIME=-6,e.PREV_MIX=-5,e.PREV_SOFTNESS=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.SOFTNESS=2,e.BEND_DIRECTION=3,e.COMPRESS=4,e.STRETCH=5,e}(ga),Of=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a,this.frames[r+e.SCALE]=o,this.frames[r+e.SHEAR]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.transformConstraints[this.transformConstraintIndex];if(u.active){if(i<l[0]){var f=u.data;switch(s){case N.setup:u.rotateMix=f.rotateMix,u.translateMix=f.translateMix,u.scaleMix=f.scaleMix,u.shearMix=f.shearMix;return;case N.first:u.rotateMix+=(f.rotateMix-u.rotateMix)*o,u.translateMix+=(f.translateMix-u.translateMix)*o,u.scaleMix+=(f.scaleMix-u.scaleMix)*o,u.shearMix+=(f.shearMix-u.shearMix)*o}return}var h=0,d=0,p=0,v=0;if(i>=l[l.length-e.ENTRIES]){var y=l.length;h=l[y+e.PREV_ROTATE],d=l[y+e.PREV_TRANSLATE],p=l[y+e.PREV_SCALE],v=l[y+e.PREV_SHEAR]}else{var g=mr.binarySearch(l,i,e.ENTRIES);h=l[g+e.PREV_ROTATE],d=l[g+e.PREV_TRANSLATE],p=l[g+e.PREV_SCALE],v=l[g+e.PREV_SHEAR];var m=l[g],x=this.getCurvePercent(g/e.ENTRIES-1,1-(i-m)/(l[g+e.PREV_TIME]-m));h+=(l[g+e.ROTATE]-h)*x,d+=(l[g+e.TRANSLATE]-d)*x,p+=(l[g+e.SCALE]-p)*x,v+=(l[g+e.SHEAR]-v)*x}if(s==N.setup){var f=u.data;u.rotateMix=f.rotateMix+(h-f.rotateMix)*o,u.translateMix=f.translateMix+(d-f.translateMix)*o,u.scaleMix=f.scaleMix+(p-f.scaleMix)*o,u.shearMix=f.shearMix+(v-f.shearMix)*o}else u.rotateMix+=(h-u.rotateMix)*o,u.translateMix+=(d-u.translateMix)*o,u.scaleMix+=(p-u.scaleMix)*o,u.shearMix+=(v-u.shearMix)*o}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(ga),eu=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.VALUE]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.position=u.data.position;return;case N.first:u.position+=(u.data.position-u.position)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=mr.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==N.setup?u.position=u.data.position+(f-u.data.position)*o:u.position+=(f-u.position)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(ga),Aw=function(t){Ht(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Xr.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.spacing=u.data.spacing;return;case N.first:u.spacing+=(u.data.spacing-u.spacing)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=mr.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==N.setup?u.spacing=u.data.spacing+(f-u.data.spacing)*o:u.spacing+=(f-u.spacing)*o}},e}(eu),Rf=function(t){Ht(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Xr.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(u.active){if(i<l[0]){switch(s){case N.setup:u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix;return;case N.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*o,u.translateMix+=(u.data.translateMix-u.translateMix)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_ROTATE],h=l[l.length+e.PREV_TRANSLATE];else{var d=mr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_ROTATE],h=l[d+e.PREV_TRANSLATE];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.ROTATE]-f)*v,h+=(l[d+e.TRANSLATE]-h)*v}s==N.setup?(u.rotateMix=u.data.rotateMix+(f-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(h-u.data.translateMix)*o):(u.rotateMix+=(f-u.rotateMix)*o,u.translateMix+=(h-u.translateMix)*o)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(ga),w4=function(){function t(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new C4(this),this.propertyIDs=new y4,this.animationsChanged=!1,this.trackEntryPool=new gv(function(){return new A4}),this.data=e}return t.prototype.update=function(e){e*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a!=null){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=e*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s!=null){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime+=a.timeScale==0?0:(c/a.timeScale+e)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom!=null;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&a.mixingFrom==null){r[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(a.mixingFrom!=null&&this.updateMixingFrom(a,e)){var l=a.mixingFrom;for(a.mixingFrom=null,l!=null&&(l.mixingTo=null);l!=null;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,r){var n=e.mixingFrom;if(n==null)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,e.mixTime+=r,!1)},t.prototype.apply=function(e){if(e==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(s==null||s.delay>0)){i=!0;var c=a==0?N.first:s.mixBlend,l=s.alpha;s.mixingFrom!=null?l*=this.applyMixingFrom(s,e,c):s.trackTime>=s.trackEnd&&s.next==null&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=s.animation.timelines.length,d=s.animation.timelines;if(a==0&&l==1||c==N.add)for(var p=0;p<h;p++){Q.webkit602BugfixHelper(l,c);var v=d[p];v instanceof ls?this.applyAttachmentTimeline(v,e,f,c,!0):v.apply(e,u,f,r,l,c,Ze.mixIn)}else{var y=s.timelineMode,g=s.timelinesRotation.length==0;g&&Q.setArraySize(s.timelinesRotation,h<<1,null);for(var m=s.timelinesRotation,p=0;p<h;p++){var x=d[p],b=y[p]==t.SUBSEQUENT?c:N.setup;x instanceof zn?this.applyRotateTimeline(x,e,f,l,b,m,p<<1,g):x instanceof ls?this.applyAttachmentTimeline(x,e,f,c,!0):(Q.webkit602BugfixHelper(l,c),x.apply(e,u,f,r,l,b,Ze.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}for(var _=this.unkeyedState+t.SETUP,S=e.slots,E=0,w=e.slots.length;E<w;E++){var C=S[E];if(C.attachmentState==_){var A=C.data.attachmentName;C.setAttachment(A==null?null:e.getAttachment(C.data.index,A))}}return this.unkeyedState+=2,this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,r,n){var i=e.mixingFrom;i.mixingFrom!=null&&this.applyMixingFrom(i,r,n);var a=0;e.mixDuration==0?(a=1,n==N.first&&(n=N.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),n!=N.first&&(n=i.mixBlend));var o=a<i.eventThreshold?this.events:null,s=a<i.attachmentThreshold,c=a<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,h=i.animation.timelines,d=i.alpha*e.interruptAlpha,p=d*(1-a);if(n==N.add)for(var v=0;v<f;v++)h[v].apply(r,l,u,o,p,n,Ze.mixOut);else{var y=i.timelineMode,g=i.timelineHoldMix,m=i.timelinesRotation.length==0;m&&Q.setArraySize(i.timelinesRotation,f<<1,null);var x=i.timelinesRotation;i.totalAlpha=0;for(var v=0;v<f;v++){var b=h[v],_=Ze.mixOut,S=void 0,E=0;switch(y[v]){case t.SUBSEQUENT:if(!c&&b instanceof Dl)continue;S=n,E=p;break;case t.FIRST:S=N.setup,E=p;break;case t.HOLD_SUBSEQUENT:S=n,E=d;break;case t.HOLD_FIRST:S=N.setup,E=d;break;default:S=N.setup;var w=g[v];E=d*Math.max(0,1-w.mixTime/w.mixDuration);break}i.totalAlpha+=E,b instanceof zn?this.applyRotateTimeline(b,r,u,E,S,x,v<<1,m):b instanceof ls?this.applyAttachmentTimeline(b,r,u,S,s):(Q.webkit602BugfixHelper(E,n),c&&b instanceof Dl&&S==N.setup&&(_=Ze.mixIn),b.apply(r,l,u,o,E,S,_))}}return e.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,a},t.prototype.applyAttachmentTimeline=function(e,r,n,i,a){var o=r.slots[e.slotIndex];if(o.bone.active){var s=e.frames;if(n<s[0])(i==N.setup||i==N.first)&&this.setAttachment(r,o,o.data.attachmentName,a);else{var c;n>=s[s.length-1]?c=s.length-1:c=mr.binarySearch(s,n)-1,this.setAttachment(r,o,e.attachmentNames[c],a)}o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(e,r,n,i){r.setAttachment(n==null?null:e.getAttachment(r.data.index,n)),i&&(r.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(e,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){e.apply(r,0,n,null,1,a,Ze.mixIn);return}var l=e,u=l.frames,f=r.bones[l.boneIndex];if(f.active){var h=0,d=0;if(n<u[0])switch(a){case N.setup:f.rotation=f.data.rotation;default:return;case N.first:h=f.rotation,d=f.data.rotation}else if(h=a==N.setup?f.data.rotation:f.rotation,n>=u[u.length-zn.ENTRIES])d=f.data.rotation+u[u.length+zn.PREV_ROTATION];else{var p=mr.binarySearch(u,n,zn.ENTRIES),v=u[p+zn.PREV_ROTATION],y=u[p],g=l.getCurvePercent((p>>1)-1,1-(n-y)/(u[p+zn.PREV_TIME]-y));d=u[p+zn.ROTATION]-v,d-=(16384-(16384.499999999996-d/360|0))*360,d=v+d*g+f.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var m=0,x=d-h;if(x-=(16384-(16384.499999999996-x/360|0))*360,x==0)m=o[s];else{var b=0,_=0;c?(b=0,_=x):(b=o[s],_=o[s+1]);var S=x>0,E=b>=0;G.signum(_)!=G.signum(x)&&Math.abs(_)<=90&&(Math.abs(b)>180&&(b+=360*G.signum(b)),E=S),m=x+b-b%360,E!=S&&(m+=360*G.signum(b)),o[s]=m}o[s+1]=x,h+=m*i,f.rotation=h-(16384-(16384.499999999996-h/360|0))*360}},t.prototype.queueEvents=function(e,r){for(var n=e.animationStart,i=e.animationEnd,a=i-n,o=e.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(e,u)}var f=!1;for(e.loop?f=a==0||o>e.trackTime%a:f=r>=i&&e.animationLast<i,f&&this.queue.complete(e);c<l;c++){var h=s[c];h.time<n||this.queue.event(e,s[c])}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var r=this.tracks[e];if(r!=null){this.queue.end(r),this.disposeNext(r);for(var n=r;;){var i=n.mixingFrom;if(i==null)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,r,n){var i=this.expandToIndex(e);this.tracks[e]=r,i!=null&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom!=null&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},t.prototype.setAnimation=function(e,r,n){var i=this.data.skeletonData.findAnimation(r);if(i==null)throw new Error("Animation not found: "+r);return this.setAnimationWith(e,i,n)},t.prototype.setAnimationWith=function(e,r,n){if(r==null)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(e);a!=null&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,i=!1):this.disposeNext(a));var o=this.trackEntry(e,r,n,a);return this.setCurrent(e,o,i),this.queue.drain(),o},t.prototype.addAnimation=function(e,r,n,i){var a=this.data.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);return this.addAnimationWith(e,a,n,i)},t.prototype.addAnimationWith=function(e,r,n,i){if(r==null)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(a!=null)for(;a.next!=null;)a=a.next;var o=this.trackEntry(e,r,n,a);if(a==null)this.setCurrent(e,o,!0),this.queue.drain();else if(a.next=o,i<=0){var s=a.animationEnd-a.animationStart;s!=0?(a.loop?i+=s*(1+(a.trackTime/s|0)):i+=Math.max(s,a.trackTime),i-=this.data.getMix(a.animation,r)):i=a.trackTime}return o.delay=i,o},t.prototype.setEmptyAnimation=function(e,r){var n=this.setAnimationWith(e,t.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},t.prototype.addEmptyAnimation=function(e,r,n){n<=0&&(n-=r);var i=this.addAnimationWith(e,t.emptyAnimation,!1,n);return i.mixDuration=r,i.trackEnd=r,i},t.prototype.setEmptyAnimations=function(e){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a!=null&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=r,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(Q.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,r,n,i){var a=this.trackEntryPool.obtain();return a.trackIndex=e,a.animation=r,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=i==null?0:this.data.getMix(i.animation,r),a.mixBlend=N.replace,a},t.prototype.disposeNext=function(e){for(var r=e.next;r!=null;)this.queue.dispose(r),r=r.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var n=this.tracks[e];if(n!=null){for(;n.mixingFrom!=null;)n=n.mixingFrom;do(n.mixingFrom==null||n.mixBlend!=N.add)&&this.computeHold(n),n=n.mixingTo;while(n!=null)}}},t.prototype.computeHold=function(e){var r=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,a=Q.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var o=Q.setArraySize(e.timelineHoldMix,i),s=this.propertyIDs;if(r!=null&&r.holdPrevious){for(var c=0;c<i;c++)a[c]=s.add(n[c].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;return}e:for(var c=0;c<i;c++){var l=n[c],u=l.getPropertyId();if(!s.add(u))a[c]=t.SUBSEQUENT;else if(r==null||l instanceof ls||l instanceof Dl||l instanceof xv||!r.animation.hasTimeline(u))a[c]=t.FIRST;else{for(var f=r.mixingTo;f!=null;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(e.mixDuration>0){a[c]=t.HOLD_MIX,o[c]=f;continue e}break}a[c]=t.HOLD_FIRST}}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(e==null)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,r,n)},t.prototype.addAnimationByName=function(e,r,n,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,r,n,i)},t.prototype.hasAnimation=function(e){var r=this.data.skeletonData.findAnimation(e);return r!==null},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new mr("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),A4=function(){function t(){this.mixBlend=N.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),C4=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(yn.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(yn.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(yn.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(yn.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(yn.complete),this.objects.push(e)},t.prototype.event=function(e,r){this.objects.push(yn.event),this.objects.push(e),this.objects.push(r)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];switch(i){case yn.start:a.listener!=null&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++)r[o].start&&r[o].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case yn.interrupt:a.listener!=null&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++)r[o].interrupt&&r[o].interrupt(a);break;case yn.end:a.listener!=null&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++)r[o].end&&r[o].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case yn.dispose:a.listener!=null&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++)r[o].dispose&&r[o].dispose(a);this.animState.trackEntryPool.free(a);break;case yn.complete:a.listener!=null&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++)r[o].complete&&r[o].complete(a);var s=G.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,s);break;case yn.event:var c=e[n+++2];a.listener!=null&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++)r[o].event&&r[o].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}(),yn;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(yn||(yn={}));var k_e=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,r){},t}(),T4=function(){function t(e){if(this.animationToMixTime={},this.defaultMix=0,e==null)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return t.prototype.setMix=function(e,r,n){var i=this.skeletonData.findAnimation(e);if(i==null)throw new Error("Animation not found: "+e);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},t.prototype.setMixByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,r,n)},t.prototype.setMixWith=function(e,r,n){if(e==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var i=e.name+"."+r.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(e,r){var n=e.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},t.deprecatedWarning1=!1,t}(),Cw=function(){function t(e){this.atlas=e}return t.prototype.newRegionAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var a=new bw(r);return a.region=i,a},t.prototype.newMeshAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var a=new yv(r);return a.region=i,a},t.prototype.newBoundingBoxAttachment=function(e,r){return new b4(r)},t.prototype.newPathAttachment=function(e,r){return new Af(r)},t.prototype.newPointAttachment=function(e,r){return new E4(r)},t.prototype.newClippingAttachment=function(e,r){return new S4(r)},t}(),j1=function(){function t(e,r,n){if(this.matrix=new Jt,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,r,n,i,a,o,s){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(c==null){var h=this.skeleton,d=n+90+s;l.a=G.cosDeg(n+o)*i*u,l.c=G.cosDeg(d)*a*u,l.b=G.sinDeg(n+o)*i*f,l.d=G.sinDeg(d)*a*f,l.tx=e*u+h.x,l.ty=r*f+h.y;return}var p=c.matrix.a,v=c.matrix.c,y=c.matrix.b,g=c.matrix.d;switch(l.tx=p*e+v*r+c.matrix.tx,l.ty=y*e+g*r+c.matrix.ty,this.data.transformMode){case ze.Normal:{var d=n+90+s,m=G.cosDeg(n+o)*i,x=G.cosDeg(d)*a,b=G.sinDeg(n+o)*i,_=G.sinDeg(d)*a;l.a=p*m+v*b,l.c=p*x+v*_,l.b=y*m+g*b,l.d=y*x+g*_;return}case ze.OnlyTranslation:{var d=n+90+s;l.a=G.cosDeg(n+o)*i,l.c=G.cosDeg(d)*a,l.b=G.sinDeg(n+o)*i,l.d=G.sinDeg(d)*a;break}case ze.NoRotationOrReflection:{var S=p*p+y*y,E=0;S>1e-4?(S=Math.abs(p*g-v*y)/S,p/=this.skeleton.scaleX,y/=this.skeleton.scaleY,v=y*S,g=p*S,E=Math.atan2(y,p)*G.radDeg):(p=0,y=0,E=90-Math.atan2(g,v)*G.radDeg);var w=n+o-E,C=n+s-E+90,m=G.cosDeg(w)*i,x=G.cosDeg(C)*a,b=G.sinDeg(w)*i,_=G.sinDeg(C)*a;l.a=p*m-v*b,l.c=p*x-v*_,l.b=y*m+g*b,l.d=y*x+g*_;break}case ze.NoScale:case ze.NoScaleOrReflection:{var A=G.cosDeg(n),P=G.sinDeg(n),T=(p*A+v*P)/u,O=(y*A+g*P)/f,S=Math.sqrt(T*T+O*O);S>1e-5&&(S=1/S),T*=S,O*=S,S=Math.sqrt(T*T+O*O),this.data.transformMode==ze.NoScale&&p*g-v*y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(S=-S);var R=Math.PI/2+Math.atan2(O,T),F=Math.cos(R)*S,D=Math.sin(R)*S,m=G.cosDeg(o)*i,x=G.cosDeg(90+s)*a,b=G.sinDeg(o)*i,_=G.sinDeg(90+s)*a;l.a=T*m+F*b,l.c=T*x+F*_,l.b=O*m+D*b,l.d=O*x+D*_;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*G.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*G.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,r=this.matrix;if(e==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*G.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*G.radDeg;return}var n=e.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,d=c*r.b-u*r.a,p=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+d*d),this.ascaleX>1e-4){var v=f*p-h*d;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(f*h+d*p,v)*G.radDeg,this.arotation=Math.atan2(d,f)*G.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*G.radDeg},t.prototype.worldToLocal=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=e.x-r.tx,l=e.y-r.ty;return e.x=c*o*s-l*i*s,e.y=l*n*s-c*a*s,e},t.prototype.localToWorld=function(e){var r=this.matrix,n=e.x,i=e.y;return e.x=n*r.a+i*r.c+r.tx,e.y=n*r.b+i*r.d+r.ty,e},t.prototype.worldToLocalRotation=function(e){var r=G.sinDeg(e),n=G.cosDeg(e),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*G.radDeg},t.prototype.localToWorldRotation=function(e){var r=G.sinDeg(e),n=G.cosDeg(e),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*G.radDeg},t.prototype.rotateWorld=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=G.cosDeg(e),c=G.sinDeg(e);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o,this.appliedValid=!1},t}(),Tw=function(){function t(e,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ze.Normal,this.skinRequired=!1,this.color=new _e,e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}return t}(),_v=function(){function t(e,r,n){this.name=e,this.order=r,this.skinRequired=n}return t}(),Pw=function(){function t(e,r){if(r==null)throw new Error("data cannot be null.");this.time=e,this.data=r}return t}(),Ow=function(){function t(e){this.name=e}return t}(),P4=function(){function t(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},t.prototype.apply1=function(e,r,n,i,a,o,s){e.appliedValid||e.updateAppliedTransform();var c=e.parent.matrix,l=c.a,u=c.c,f=c.b,h=c.d,d=-e.ashearX-e.arotation,p=0,v=0;switch(e.data.transformMode){case ze.OnlyTranslation:p=r-e.worldX,v=n-e.worldY;break;case ze.NoRotationOrReflection:var y=Math.abs(l*h-u*f)/(l*l+f*f),g=l/e.skeleton.scaleX,m=f/e.skeleton.scaleY;u=-m*y*e.skeleton.scaleX,h=g*y*e.skeleton.scaleY,d+=Math.atan2(m,g)*G.radDeg;default:var x=r-c.tx,b=n-c.ty,_=l*h-u*f;p=(x*h-b*u)/_-e.ax,v=(b*l-x*f)/_-e.ay}d+=Math.atan2(v,p)*G.radDeg,e.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var S=e.ascaleX,E=e.ascaleY;if(i||a){switch(e.data.transformMode){case ze.NoScale:case ze.NoScaleOrReflection:p=r-e.worldX,v=n-e.worldY}var w=e.data.length*S,C=Math.sqrt(p*p+v*v);if(i&&C<w||a&&C>w&&w>1e-4){var y=(C/w-1)*s+1;S*=y,o&&(E*=y)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+d*s,S,E,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,r,n,i,a,o,s,c){if(c==0){r.updateWorldTransform();return}e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var l=e.ax,u=e.ay,f=e.ascaleX,h=f,d=e.ascaleY,p=r.ascaleX,v=e.matrix,y=0,g=0,m=0;f<0?(f=-f,y=180,m=-1):(y=0,m=1),d<0&&(d=-d,m=-m),p<0?(p=-p,g=180):g=0;var x=r.ax,b=0,_=0,S=0,E=v.a,w=v.c,C=v.b,A=v.d,P=Math.abs(f-d)<=1e-4;P?(b=r.ay,_=E*x+w*b+v.tx,S=C*x+A*b+v.ty):(b=0,_=E*x+v.tx,S=C*x+v.ty);var T=e.parent.matrix;E=T.a,w=T.c,C=T.b,A=T.d;var O=1/(E*A-w*C),R=_-T.tx,F=S-T.ty,D=(R*A-F*w)*O-l,V=(F*E-R*C)*O-u,Y=Math.sqrt(D*D+V*V),W=r.data.length*p,$,I;if(Y<1e-4){this.apply1(e,n,i,!1,o,!1,c),r.updateWorldTransformWith(x,b,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}R=n-T.tx,F=i-T.ty;var B=(R*A-F*w)*O-l,L=(F*E-R*C)*O-u,M=B*B+L*L;if(s!=0){s*=f*(p+1)/2;var X=Math.sqrt(M),K=X-Y-W*f+s;if(K>0){var ne=Math.min(1,K/(s*2))-1;ne=(K-s*(1-ne*ne))/X,B-=ne*B,L-=ne*L,M=B*B+L*L}}e:if(P){W*=f;var te=(M-Y*Y-W*W)/(2*Y*W);te<-1?te=-1:te>1&&(te=1,o&&(h*=(Math.sqrt(M)/(Y+W)-1)*c+1)),I=Math.acos(te)*a,E=Y+W*te,w=W*Math.sin(I),$=Math.atan2(L*E-B*w,B*E+L*w)}else{E=f*W,w=d*W;var ce=E*E,de=w*w,se=Math.atan2(L,B);C=de*Y*Y+ce*M-ce*de;var fe=-2*de*Y,oe=de-ce;if(A=fe*fe-4*oe*C,A>=0){var he=Math.sqrt(A);fe<0&&(he=-he),he=-(fe+he)/2;var Pe=he/oe,Ie=C/he,Ee=Math.abs(Pe)<Math.abs(Ie)?Pe:Ie;if(Ee*Ee<=M){F=Math.sqrt(M-Ee*Ee)*a,$=se-Math.atan2(F,Ee),I=Math.atan2(F/d,(Ee-Y)/f);break e}}var Be=G.PI,qe=Y-E,rt=qe*qe,Xe=0,Ge=0,Qe=Y+E,bt=Qe*Qe,er=0;C=-E*Y/(ce-de),C>=-1&&C<=1&&(C=Math.acos(C),R=E*Math.cos(C)+Y,F=w*Math.sin(C),A=R*R+F*F,A<rt&&(Be=C,rt=A,qe=R,Xe=F),A>bt&&(Ge=C,bt=A,Qe=R,er=F)),M<=(rt+bt)/2?($=se-Math.atan2(Xe*a,qe),I=Be*a):($=se-Math.atan2(er*a,Qe),I=Ge*a)}var Ct=Math.atan2(b,x)*m,It=e.arotation;$=($-Ct)*G.radDeg+y-It,$>180?$-=360:$<-180&&($+=360),e.updateWorldTransformWith(l,u,It+$*c,h,e.ascaleY,0,0),It=r.arotation,I=((I+Ct)*G.radDeg-r.ashearX)*m+g-It,I>180?I-=360:I<-180&&(I+=360),r.updateWorldTransformWith(x,b,It+I*c,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},t}(),Rw=function(t){Ht(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return e}(_v),Iw=function(t){Ht(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n}return e}(_v),Or;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"})(Or||(Or={}));var O4=function(){function t(e,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,i=e.bones.length;n<i;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof Af){var r=this.rotateMix,n=this.translateMix,i=n>0,a=r>0;if(!(!i&&!a)){var o=this.data,s=o.spacingMode,c=s==Or.Length,l=o.rotateMode,u=l==nr.Tangent,f=l==nr.ChainScale,h=this.bones.length,d=u?h:h+1,p=this.bones,v=Q.setArraySize(this.spaces,d),y=null,g=this.spacing;if(f||c){f&&(y=Q.setArraySize(this.lengths,h));for(var m=0,x=d-1;m<x;){var b=p[m],_=b.data.length;if(_<t.epsilon)f&&(y[m]=0),v[++m]=0;else{var S=_*b.matrix.a,E=_*b.matrix.b,w=Math.sqrt(S*S+E*E);f&&(y[m]=w),v[++m]=(c?_+g:g)*w/_}}}else for(var m=1;m<d;m++)v[m]=g;var C=this.computeWorldPositions(e,d,u,o.positionMode==Wt.Percent,s==Or.Percent),A=C[0],P=C[1],T=o.offsetRotation,O=!1;if(T==0)O=l==nr.Chain;else{O=!1;var R=this.target.bone.matrix;T*=R.a*R.d-R.b*R.c>0?G.degRad:-G.degRad}for(var m=0,R=3;m<h;m++,R+=3){var b=p[m],F=b.matrix;F.tx+=(A-F.tx)*n,F.ty+=(P-F.ty)*n;var S=C[R],E=C[R+1],D=S-A,V=E-P;if(f){var Y=y[m];if(Y!=0){var W=(Math.sqrt(D*D+V*V)/Y-1)*r+1;F.a*=W,F.b*=W}}if(A=S,P=E,a){var $=F.a,I=F.c,B=F.b,L=F.d,M=0,X=0,K=0;if(u?M=C[R-1]:v[m+1]==0?M=C[R+2]:M=Math.atan2(V,D),M-=Math.atan2(B,$),O){X=Math.cos(M),K=Math.sin(M);var ne=b.data.length;A+=(ne*(X*$-K*B)-D)*r,P+=(ne*(K*$+X*B)-V)*r}else M+=T;M>G.PI?M-=G.PI2:M<-G.PI&&(M+=G.PI2),M*=r,X=Math.cos(M),K=Math.sin(M),F.a=X*$-K*B,F.c=X*I-K*L,F.b=K*$+X*B,F.d=K*I+X*L}b.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,r,n,i,a){var o=this.target,s=this.position,c=this.spaces,l=Q.setArraySize(this.positions,r*3+2),u=null,f=e.closed,h=e.worldVerticesLength,d=h/6,p=t.NONE;if(!e.constantSpeed){var v=e.lengths;d-=f?1:2;var y=v[d];if(i&&(s*=y),a)for(var g=0;g<r;g++)c[g]*=y;u=Q.setArraySize(this.world,8);for(var g=0,m=0,x=0;g<r;g++,m+=3){var b=c[g];s+=b;var _=s;if(f)_%=y,_<0&&(_+=y),x=0;else if(_<0){p!=t.BEFORE&&(p=t.BEFORE,e.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(_,u,0,l,m);continue}else if(_>y){p!=t.AFTER&&(p=t.AFTER,e.computeWorldVertices(o,h-6,4,u,0,2)),this.addAfterPosition(_-y,u,0,l,m);continue}for(;;x++){var S=v[x];if(!(_>S)){if(x==0)_/=S;else{var E=v[x-1];_=(_-E)/(S-E)}break}}x!=p&&(p=x,f&&x==d?(e.computeWorldVertices(o,h-4,4,u,0,2),e.computeWorldVertices(o,0,4,u,4,2)):e.computeWorldVertices(o,x*6+2,8,u,0,2)),this.addCurvePosition(_,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,m,n||g>0&&b==0)}return l}f?(h+=2,u=Q.setArraySize(this.world,h),e.computeWorldVertices(o,2,h-4,u,0,2),e.computeWorldVertices(o,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(d--,h-=4,u=Q.setArraySize(this.world,h),e.computeWorldVertices(o,2,h,u,0,2));for(var w=Q.setArraySize(this.curves,d),C=0,A=u[0],P=u[1],T=0,O=0,R=0,F=0,D=0,V=0,Y=0,W=0,$=0,I=0,B=0,L=0,M=0,X=0,g=0,K=2;g<d;g++,K+=6)T=u[K],O=u[K+1],R=u[K+2],F=u[K+3],D=u[K+4],V=u[K+5],Y=(A-T*2+R)*.1875,W=(P-O*2+F)*.1875,$=((T-R)*3-A+D)*.09375,I=((O-F)*3-P+V)*.09375,B=Y*2+$,L=W*2+I,M=(T-A)*.75+Y+$*.16666667,X=(O-P)*.75+W+I*.16666667,C+=Math.sqrt(M*M+X*X),M+=B,X+=L,B+=$,L+=I,C+=Math.sqrt(M*M+X*X),M+=B,X+=L,C+=Math.sqrt(M*M+X*X),M+=B+$,X+=L+I,C+=Math.sqrt(M*M+X*X),w[g]=C,A=D,P=V;if(i&&(s*=C),a)for(var g=0;g<r;g++)c[g]*=C;for(var ne=this.segments,te=0,g=0,m=0,x=0,ce=0;g<r;g++,m+=3){var b=c[g];s+=b;var _=s;if(f)_%=C,_<0&&(_+=C),x=0;else if(_<0){this.addBeforePosition(_,u,0,l,m);continue}else if(_>C){this.addAfterPosition(_-C,u,h-4,l,m);continue}for(;;x++){var de=w[x];if(!(_>de)){if(x==0)_/=de;else{var E=w[x-1];_=(_-E)/(de-E)}break}}if(x!=p){p=x;var se=x*6;for(A=u[se],P=u[se+1],T=u[se+2],O=u[se+3],R=u[se+4],F=u[se+5],D=u[se+6],V=u[se+7],Y=(A-T*2+R)*.03,W=(P-O*2+F)*.03,$=((T-R)*3-A+D)*.006,I=((O-F)*3-P+V)*.006,B=Y*2+$,L=W*2+I,M=(T-A)*.3+Y+$*.16666667,X=(O-P)*.3+W+I*.16666667,te=Math.sqrt(M*M+X*X),ne[0]=te,se=1;se<8;se++)M+=B,X+=L,B+=$,L+=I,te+=Math.sqrt(M*M+X*X),ne[se]=te;M+=B,X+=L,te+=Math.sqrt(M*M+X*X),ne[8]=te,M+=B+$,X+=L+I,te+=Math.sqrt(M*M+X*X),ne[9]=te,ce=0}for(_*=te;;ce++){var fe=ne[ce];if(!(_>fe)){if(ce==0)_/=fe;else{var E=ne[ce-1];_=ce+(_-E)/(fe-E)}break}}this.addCurvePosition(_*.1,A,P,T,O,R,F,D,V,l,m,n||g>0&&b==0)}return l},t.prototype.addBeforePosition=function(e,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addAfterPosition=function(e,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addCurvePosition=function(e,r,n,i,a,o,s,c,l,u,f,h){(e==0||isNaN(e))&&(e=1e-4);var d=e*e,p=d*e,v=1-e,y=v*v,g=y*v,m=v*e,x=m*3,b=v*x,_=x*e,S=r*g+i*b+o*_+c*p,E=n*g+a*b+s*_+l*p;u[f]=S,u[f+1]=E,h&&(u[f+2]=Math.atan2(E-(n*y+a*m*2+s*d),S-(r*y+i*m*2+o*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),R4=function(){function t(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new wf,this.active=!1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?G.degRad:-G.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var g=p[v],m=!1,x=g.matrix;if(e!=0){var b=x.a,_=x.c,S=x.b,E=x.d,w=Math.atan2(l,s)-Math.atan2(S,b)+h;w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2),w*=e;var C=Math.cos(w),A=Math.sin(w);x.a=C*b-A*S,x.c=C*_-A*E,x.b=A*b+C*S,x.d=A*_+C*E,m=!0}if(r!=0){var P=this.temp;a.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),x.tx+=(P.x-x.tx)*r,x.ty+=(P.y-x.ty)*r,m=!0}if(n>0){var T=Math.sqrt(x.a*x.a+x.b*x.b),O=Math.sqrt(s*s+l*l);T>1e-5&&(T=(T+(O-T+this.data.offsetScaleX)*n)/T),x.a*=T,x.b*=T,T=Math.sqrt(x.c*x.c+x.d*x.d),O=Math.sqrt(c*c+u*u),T>1e-5&&(T=(T+(O-T+this.data.offsetScaleY)*n)/T),x.c*=T,x.d*=T,m=!0}if(i>0){var _=x.c,E=x.d,R=Math.atan2(E,_),w=Math.atan2(u,c)-Math.atan2(l,s)-(R-Math.atan2(x.b,x.a));w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2),w=R+(w+d)*i;var T=Math.sqrt(_*_+E*E);x.c=Math.cos(w)*T,x.d=Math.sin(w)*T,m=!0}m&&(g.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?G.degRad:-G.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var g=p[v],m=!1,x=g.matrix;if(e!=0){var b=x.a,_=x.c,S=x.b,E=x.d,w=Math.atan2(l,s)+h;w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2),w*=e;var C=Math.cos(w),A=Math.sin(w);x.a=C*b-A*S,x.c=C*_-A*E,x.b=A*b+C*S,x.d=A*_+C*E,m=!0}if(r!=0){var P=this.temp;a.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),x.tx+=P.x*r,x.ty+=P.y*r,m=!0}if(n>0){var T=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*n+1;x.a*=T,x.b*=T,T=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1,x.c*=T,x.d*=T,m=!0}if(i>0){var w=Math.atan2(u,c)-Math.atan2(l,s);w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2);var _=x.c,E=x.d;w=Math.atan2(E,_)+(w-G.PI/2+d)*i;var T=Math.sqrt(_*_+E*E);x.c=Math.cos(w)*T,x.d=Math.sin(w)*T,m=!0}m&&(g.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(e!=0){var f=a.arotation-u+this.data.offsetRotation;f-=(16384-(16384.499999999996-f/360|0))*360,u+=f*e}var h=l.ax,d=l.ay;r!=0&&(h+=(a.ax-h+this.data.offsetX)*r,d+=(a.ay-d+this.data.offsetY)*r);var p=l.ascaleX,v=l.ascaleY;n>0&&(p>1e-5&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*n)/p),v>1e-5&&(v=(v+(a.ascaleY-v+this.data.offsetScaleY)*n)/v));var y=l.ashearY;if(i>0){var f=a.ashearY-y+this.data.offsetShearY;f-=(16384-(16384.499999999996-f/360|0))*360,l.shearY+=f*i}l.updateWorldTransformWith(h,d,u,p,v,l.ashearX,y)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;e!=0&&(u+=(a.arotation+this.data.offsetRotation)*e);var f=l.ax,h=l.ay;r!=0&&(f+=(a.ax+this.data.offsetX)*r,h+=(a.ay+this.data.offsetY)*r);var d=l.ascaleX,p=l.ascaleY;n>0&&(d>1e-5&&(d*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var v=l.ashearY;i>0&&(v+=(a.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(f,h,u,d,p,l.ashearX,v)}},t}(),I4=function(){function t(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,e==null)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var n=e.bones[r],i=void 0;if(n.parent==null)i=new j1(n,this,null);else{var a=this.bones[n.parent.index];i=new j1(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<e.slots.length;r++){var o=e.slots[r],i=this.bones[o.boneData.index],s=new _w(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<e.ikConstraints.length;r++){var c=e.ikConstraints[r];this.ikConstraints.push(new P4(c,this))}this.transformConstraints=new Array;for(var r=0;r<e.transformConstraints.length;r++){var l=e.transformConstraints[r];this.transformConstraints.push(new R4(l,this))}this.pathConstraints=new Array;for(var r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new O4(u,this))}this.color=new _e(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var e=this._updateCache;e.length=0,this.updateCacheReset.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin!=null)for(var o=this.skin.bones,n=0,i=this.skin.bones.length;n<i;n++){var a=this.bones[o[n].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a!=null)}var s=this.ikConstraints,c=this.transformConstraints,l=this.pathConstraints,u=s.length,f=c.length,h=l.length,d=u+f+h;e:for(var n=0;n<d;n++){for(var p=0;p<u;p++){var v=s[p];if(v.data.order==n){this.sortIkConstraint(v);continue e}}for(var p=0;p<f;p++){var v=c[p];if(v.data.order==n){this.sortTransformConstraint(v);continue e}}for(var p=0;p<h;p++){var v=l[p];if(v.data.order==n){this.sortPathConstraint(v);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},t.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin!=null&&Q.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target;this.sortBone(r);var n=e.bones,i=n[0];if(this.sortBone(i),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(e),this.sortReset(i.children),n[n.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin!=null&&Q.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target,n=r.data.index,i=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof Af&&this.sortPathConstraintAttachmentWith(s,i);for(var c=e.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(e);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0}},t.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin!=null&&Q.contains(this.skin.constraints,e.data,!0)),!!e.active){this.sortBone(e.target);var r=e.bones,n=r.length;if(e.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(var o=0;o<n;o++)r[o].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(e,r,n){var i=e.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},t.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof Af){var n=e.bones;if(n==null)this.sortBone(r);else for(var i=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var c=n[a];this.sortBone(i[c])}}},t.prototype.sortBone=function(e){if(!e.sorted){var r=e.parent;r!=null&&this.sortBone(r),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var r=0,n=e.length;r<n;r++){var i=e[r];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,r=0,n=e.length;r<n;r++){var i=e[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++)e[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;Q.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,n=e.length;r<n;r++)e[r].setToSetupPose()},t.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var r=this.data.findSkin(e);if(r==null)throw new Error("Skin not found: "+e);this.setSkin(r)},t.prototype.setSkin=function(e){if(e!=this.skin){if(e!=null)if(this.skin!=null)e.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o!=null){var s=e.getAttachment(n,o);s!=null&&a.setAttachment(s)}}this.skin=e,this.updateCache()}},t.prototype.getAttachmentByName=function(e,r){return this.getAttachment(this.data.findSlotIndex(e),r)},t.prototype.getAttachment=function(e,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(e,r);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(e,r):null},t.prototype.setAttachment=function(e,r){if(e==null)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==e){var s=null;if(r!=null&&(s=this.getAttachment(i,r),s==null))throw new Error("Attachment not found: "+r+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.getBounds=function(e,r,n){if(n===void 0&&(n=new Array(2)),e==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l];if(f.bone.active){var h=0,d=null,p=f.getAttachment();if(p instanceof bw)h=8,d=Q.setArraySize(n,h,0),p.computeWorldVertices(f.bone,d,0,2);else if(p instanceof yv){var v=p;h=v.worldVerticesLength,d=Q.setArraySize(n,h,0),v.computeWorldVertices(f,0,h,d,0,2)}if(d!=null)for(var y=0,g=d.length;y<g;y+=2){var m=d[y],x=d[y+1];a=Math.min(a,m),o=Math.min(o,x),s=Math.max(s,m),c=Math.max(c,x)}}}e.set(a,o),r.set(s-a,c-o)},t.prototype.update=function(e){this.time+=e},Object.defineProperty(t.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),Fw=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSkin=function(e){if(e==null)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findEvent=function(e){if(e==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findAnimation=function(e){if(e==null)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraintIndex=function(e){if(e==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t}(),kw=function(){function t(e,r,n){if(this.color=new _e(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}return t}(),Dw=function(t){Ht(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return e}(_v),U1=function(){function t(e,r,n){this.slotIndex=e,this.name=r,this.attachment=n}return t}(),Rp=function(){function t(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,e==null)throw new Error("name cannot be null.");this.name=e}return t.prototype.setAttachment=function(e,r,n){if(n==null)throw new Error("attachment cannot be null.");var i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][r]=n},t.prototype.addSkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];this.setAttachment(c.slotIndex,c.name,c.attachment)}},t.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];c.attachment!=null&&(c.attachment instanceof yv?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},t.prototype.getAttachment=function(e,r){var n=this.attachments[e];return n?n[r]:null},t.prototype.removeAttachment=function(e,r){var n=this.attachments[e];n&&(n[r]=null)},t.prototype.getAttachments=function(){for(var e=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var i in n){var a=n[i];a&&e.push(new U1(r,i,a))}}return e},t.prototype.getAttachmentsForSlot=function(e,r){var n=this.attachments[e];if(n)for(var i in n){var a=n[i];a&&r.push(new U1(e,i,a))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(e,r){for(var n=0,i=0;i<e.slots.length;i++){var a=e.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u!=null&&a.setAttachment(u);break}}}n++}},t}(),F4=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new Fw;n.name="";var i=new Op(e);if(n.hash=i.readString(),n.version=i.readString(),n.version==="3.8.75"){var a="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(a)}n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();var o=i.readBoolean();o&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());var s=0;s=i.readInt(!0);for(var c=0;c<s;c++)i.strings.push(i.readString());s=i.readInt(!0);for(var c=0;c<s;c++){var l=i.readString(),u=c==0?null:n.bones[i.readInt(!0)],f=new Tw(c,l,u);f.rotation=i.readFloat(),f.x=i.readFloat()*r,f.y=i.readFloat()*r,f.scaleX=i.readFloat(),f.scaleY=i.readFloat(),f.shearX=i.readFloat(),f.shearY=i.readFloat(),f.length=i.readFloat()*r,f.transformMode=t.TransformModeValues[i.readInt(!0)],f.skinRequired=i.readBoolean(),o&&_e.rgba8888ToColor(f.color,i.readInt32()),n.bones.push(f)}s=i.readInt(!0);for(var c=0;c<s;c++){var h=i.readString(),d=n.bones[i.readInt(!0)],f=new kw(c,h,d);_e.rgba8888ToColor(f.color,i.readInt32());var p=i.readInt32();p!=-1&&_e.rgb888ToColor(f.darkColor=new _e,p),f.attachmentName=i.readStringRef(),f.blendMode=t.BlendModeValues[i.readInt(!0)],n.slots.push(f)}s=i.readInt(!0);for(var c=0,v=void 0;c<s;c++){var f=new Rw(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var y=0;y<v;y++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)],f.mix=i.readFloat(),f.softness=i.readFloat()*r,f.bendDirection=i.readByte(),f.compress=i.readBoolean(),f.stretch=i.readBoolean(),f.uniform=i.readBoolean(),n.ikConstraints.push(f)}s=i.readInt(!0);for(var c=0,v=void 0;c<s;c++){var f=new Dw(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var y=0;y<v;y++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)],f.local=i.readBoolean(),f.relative=i.readBoolean(),f.offsetRotation=i.readFloat(),f.offsetX=i.readFloat()*r,f.offsetY=i.readFloat()*r,f.offsetScaleX=i.readFloat(),f.offsetScaleY=i.readFloat(),f.offsetShearY=i.readFloat(),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),f.scaleMix=i.readFloat(),f.shearMix=i.readFloat(),n.transformConstraints.push(f)}s=i.readInt(!0);for(var c=0,v=void 0;c<s;c++){var f=new Iw(i.readString());f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var y=0;y<v;y++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.slots[i.readInt(!0)],f.positionMode=t.PositionModeValues[i.readInt(!0)],f.spacingMode=t.SpacingModeValues[i.readInt(!0)],f.rotateMode=t.RotateModeValues[i.readInt(!0)],f.offsetRotation=i.readFloat(),f.position=i.readFloat(),f.positionMode==Wt.Fixed&&(f.position*=r),f.spacing=i.readFloat(),(f.spacingMode==Or.Length||f.spacingMode==Or.Fixed)&&(f.spacing*=r),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),n.pathConstraints.push(f)}var g=this.readSkin(i,n,!0,o);g!=null&&(n.defaultSkin=g,n.skins.push(g));{var c=n.skins.length;for(Q.setArraySize(n.skins,s=c+i.readInt(!0));c<s;c++)n.skins[c]=this.readSkin(i,n,!1,o)}s=this.linkedMeshes.length;for(var c=0;c<s;c++){var m=this.linkedMeshes[c],x=m.skin==null?n.defaultSkin:n.findSkin(m.skin);if(x==null)throw new Error("Skin not found: "+m.skin);var b=x.getAttachment(m.slotIndex,m.parent);if(b==null)throw new Error("Parent mesh not found: "+m.parent);m.mesh.deformAttachment=m.inheritDeform?b:m.mesh,m.mesh.setParentMesh(b)}this.linkedMeshes.length=0,s=i.readInt(!0);for(var c=0;c<s;c++){var f=new Ow(i.readStringRef());f.intValue=i.readInt(!1),f.floatValue=i.readFloat(),f.stringValue=i.readString(),f.audioPath=i.readString(),f.audioPath!=null&&(f.volume=i.readFloat(),f.balance=i.readFloat()),n.events.push(f)}s=i.readInt(!0);for(var c=0;c<s;c++)n.animations.push(this.readAnimation(i,i.readString(),n));return n},t.prototype.readSkin=function(e,r,n,i){var a=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;a=new Rp("default")}else{a=new Rp(e.readStringRef()),a.bones.length=e.readInt(!0);for(var s=0,c=a.bones.length;s<c;s++)a.bones[s]=r.bones[e.readInt(!0)];for(var s=0,c=e.readInt(!0);s<c;s++)a.constraints.push(r.ikConstraints[e.readInt(!0)]);for(var s=0,c=e.readInt(!0);s<c;s++)a.constraints.push(r.transformConstraints[e.readInt(!0)]);for(var s=0,c=e.readInt(!0);s<c;s++)a.constraints.push(r.pathConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(var s=0;s<o;s++)for(var l=e.readInt(!0),u=0,f=e.readInt(!0);u<f;u++){var h=e.readStringRef(),d=this.readAttachment(e,r,a,l,h,i);d!=null&&a.setAttachment(l,h,d)}return a},t.prototype.readAttachment=function(e,r,n,i,a,o){var s=this.scale,c=e.readStringRef();c==null&&(c=a);var l=e.readByte(),u=t.AttachmentTypeValues[l];switch(u){case et.Region:{var f=e.readStringRef(),h=e.readFloat(),d=e.readFloat(),p=e.readFloat(),v=e.readFloat(),y=e.readFloat(),g=e.readFloat(),m=e.readFloat(),x=e.readInt32();f==null&&(f=c);var b=this.attachmentLoader.newRegionAttachment(n,c,f);return b==null?null:(b.path=f,b.x=d*s,b.y=p*s,b.scaleX=v,b.scaleY=y,b.rotation=h,b.width=g*s,b.height=m*s,_e.rgba8888ToColor(b.color,x),b)}case et.BoundingBox:{var _=e.readInt(!0),S=this.readVertices(e,_),x=o?e.readInt32():0,E=this.attachmentLoader.newBoundingBoxAttachment(n,c);return E==null?null:(E.worldVerticesLength=_<<1,E.vertices=S.vertices,E.bones=S.bones,o&&_e.rgba8888ToColor(E.color,x),E)}case et.Mesh:{var f=e.readStringRef(),x=e.readInt32(),_=e.readInt(!0),w=this.readFloatArray(e,_<<1,1),C=this.readShortArray(e),S=this.readVertices(e,_),A=e.readInt(!0),P=null,g=0,m=0;o&&(P=this.readShortArray(e),g=e.readFloat(),m=e.readFloat()),f==null&&(f=c);var T=this.attachmentLoader.newMeshAttachment(n,c,f);return T==null?null:(T.path=f,_e.rgba8888ToColor(T.color,x),T.bones=S.bones,T.vertices=S.vertices,T.worldVerticesLength=_<<1,T.triangles=C,T.regionUVs=new Float32Array(w),T.hullLength=A<<1,o&&(T.edges=P,T.width=g*s,T.height=m*s),T)}case et.LinkedMesh:{var f=e.readStringRef(),x=e.readInt32(),O=e.readStringRef(),R=e.readStringRef(),F=e.readBoolean(),g=0,m=0;o&&(g=e.readFloat(),m=e.readFloat()),f==null&&(f=c);var T=this.attachmentLoader.newMeshAttachment(n,c,f);return T==null?null:(T.path=f,_e.rgba8888ToColor(T.color,x),o&&(T.width=g*s,T.height=m*s),this.linkedMeshes.push(new D_e(T,O,i,R,F)),T)}case et.Path:{for(var D=e.readBoolean(),V=e.readBoolean(),_=e.readInt(!0),S=this.readVertices(e,_),Y=Q.newArray(_/3,0),W=0,$=Y.length;W<$;W++)Y[W]=e.readFloat()*s;var x=o?e.readInt32():0,f=this.attachmentLoader.newPathAttachment(n,c);return f==null?null:(f.closed=D,f.constantSpeed=V,f.worldVerticesLength=_<<1,f.vertices=S.vertices,f.bones=S.bones,f.lengths=Y,o&&_e.rgba8888ToColor(f.color,x),f)}case et.Point:{var h=e.readFloat(),d=e.readFloat(),p=e.readFloat(),x=o?e.readInt32():0,I=this.attachmentLoader.newPointAttachment(n,c);return I==null?null:(I.x=d*s,I.y=p*s,I.rotation=h,o&&_e.rgba8888ToColor(I.color,x),I)}case et.Clipping:{var B=e.readInt(!0),_=e.readInt(!0),S=this.readVertices(e,_),x=o?e.readInt32():0,L=this.attachmentLoader.newClippingAttachment(n,c);return L==null?null:(L.endSlot=r.slots[B],L.worldVerticesLength=_<<1,L.vertices=S.vertices,L.bones=S.bones,o&&_e.rgba8888ToColor(L.color,x),L)}}return null},t.prototype.readVertices=function(e,r){var n=r<<1,i=new M_e,a=this.scale;if(!e.readBoolean())return i.vertices=this.readFloatArray(e,n,a),i;for(var o=new Array,s=new Array,c=0;c<r;c++){var l=e.readInt(!0);s.push(l);for(var u=0;u<l;u++)s.push(e.readInt(!0)),o.push(e.readFloat()*a),o.push(e.readFloat()*a),o.push(e.readFloat())}return i.vertices=Q.toFloatArray(o),i.bones=s,i},t.prototype.readFloatArray=function(e,r,n){var i=new Array(r);if(n==1)for(var a=0;a<r;a++)i[a]=e.readFloat();else for(var a=0;a<r;a++)i[a]=e.readFloat()*n;return i},t.prototype.readShortArray=function(e){for(var r=e.readInt(!0),n=new Array(r),i=0;i<r;i++)n[i]=e.readShort();return n},t.prototype.readAnimation=function(e,r,n){for(var i=new Array,a=this.scale,o=0,s=new _e,c=new _e,l=0,u=e.readInt(!0);l<u;l++)for(var f=e.readInt(!0),h=0,d=e.readInt(!0);h<d;h++){var p=e.readByte(),v=e.readInt(!0);switch(p){case t.SLOT_ATTACHMENT:{var y=new ls(v);y.slotIndex=f;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readStringRef());i.push(y),o=Math.max(o,y.frames[v-1]);break}case t.SLOT_COLOR:{var y=new Cf(v);y.slotIndex=f;for(var g=0;g<v;g++){var m=e.readFloat();_e.rgba8888ToColor(s,e.readInt32()),y.setFrame(g,m,s.r,s.g,s.b,s.a),g<v-1&&this.readCurve(e,g,y)}i.push(y),o=Math.max(o,y.frames[(v-1)*Cf.ENTRIES]);break}case t.SLOT_TWO_COLOR:{var y=new Tf(v);y.slotIndex=f;for(var g=0;g<v;g++){var m=e.readFloat();_e.rgba8888ToColor(s,e.readInt32()),_e.rgb888ToColor(c,e.readInt32()),y.setFrame(g,m,s.r,s.g,s.b,s.a,c.r,c.g,c.b),g<v-1&&this.readCurve(e,g,y)}i.push(y),o=Math.max(o,y.frames[(v-1)*Tf.ENTRIES]);break}}}for(var l=0,u=e.readInt(!0);l<u;l++)for(var x=e.readInt(!0),h=0,d=e.readInt(!0);h<d;h++){var p=e.readByte(),v=e.readInt(!0);switch(p){case t.BONE_ROTATE:{var y=new zn(v);y.boneIndex=x;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readFloat()),g<v-1&&this.readCurve(e,g,y);i.push(y),o=Math.max(o,y.frames[(v-1)*zn.ENTRIES]);break}case t.BONE_TRANSLATE:case t.BONE_SCALE:case t.BONE_SHEAR:{var y=void 0,b=1;p==t.BONE_SCALE?y=new Sw(v):p==t.BONE_SHEAR?y=new Ew(v):(y=new Ts(v),b=a),y.boneIndex=x;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readFloat()*b,e.readFloat()*b),g<v-1&&this.readCurve(e,g,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Ts.ENTRIES]);break}}}for(var l=0,u=e.readInt(!0);l<u;l++){var _=e.readInt(!0),v=e.readInt(!0),y=new Pf(v);y.ikConstraintIndex=_;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readFloat(),e.readFloat()*a,e.readByte(),e.readBoolean(),e.readBoolean()),g<v-1&&this.readCurve(e,g,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Pf.ENTRIES])}for(var l=0,u=e.readInt(!0);l<u;l++){var _=e.readInt(!0),v=e.readInt(!0),y=new Of(v);y.transformConstraintIndex=_;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()),g<v-1&&this.readCurve(e,g,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Of.ENTRIES])}for(var l=0,u=e.readInt(!0);l<u;l++)for(var _=e.readInt(!0),S=n.pathConstraints[_],h=0,d=e.readInt(!0);h<d;h++){var p=e.readByte(),v=e.readInt(!0);switch(p){case t.PATH_POSITION:case t.PATH_SPACING:{var y=void 0,b=1;p==t.PATH_SPACING?(y=new Aw(v),(S.spacingMode==Or.Length||S.spacingMode==Or.Fixed)&&(b=a)):(y=new eu(v),S.positionMode==Wt.Fixed&&(b=a)),y.pathConstraintIndex=_;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readFloat()*b),g<v-1&&this.readCurve(e,g,y);i.push(y),o=Math.max(o,y.frames[(v-1)*eu.ENTRIES]);break}case t.PATH_MIX:{var y=new Rf(v);y.pathConstraintIndex=_;for(var g=0;g<v;g++)y.setFrame(g,e.readFloat(),e.readFloat(),e.readFloat()),g<v-1&&this.readCurve(e,g,y);i.push(y),o=Math.max(o,y.frames[(v-1)*Rf.ENTRIES]);break}}}for(var l=0,u=e.readInt(!0);l<u;l++)for(var E=n.skins[e.readInt(!0)],h=0,d=e.readInt(!0);h<d;h++)for(var f=e.readInt(!0),w=0,C=e.readInt(!0);w<C;w++){var A=E.getAttachment(f,e.readStringRef()),P=A.bones!=null,T=A.vertices,O=P?T.length/3*2:T.length,v=e.readInt(!0),y=new ww(v);y.slotIndex=f,y.attachment=A;for(var g=0;g<v;g++){var m=e.readFloat(),R=void 0,F=e.readInt(!0);if(F==0)R=P?Q.newFloatArray(O):T;else{R=Q.newFloatArray(O);var D=e.readInt(!0);if(F+=D,a==1)for(var V=D;V<F;V++)R[V]=e.readFloat();else for(var V=D;V<F;V++)R[V]=e.readFloat()*a;if(!P)for(var V=0,Y=R.length;V<Y;V++)R[V]+=T[V]}y.setFrame(g,m,R),g<v-1&&this.readCurve(e,g,y)}i.push(y),o=Math.max(o,y.frames[v-1])}var W=e.readInt(!0);if(W>0){for(var y=new Dl(W),$=n.slots.length,l=0;l<W;l++){for(var m=e.readFloat(),I=e.readInt(!0),B=Q.newArray($,0),h=$-1;h>=0;h--)B[h]=-1;for(var L=Q.newArray($-I,0),M=0,X=0,h=0;h<I;h++){for(var f=e.readInt(!0);M!=f;)L[X++]=M++;B[M+e.readInt(!0)]=M++}for(;M<$;)L[X++]=M++;for(var h=$-1;h>=0;h--)B[h]==-1&&(B[h]=L[--X]);y.setFrame(l,m,B)}i.push(y),o=Math.max(o,y.frames[W-1])}var K=e.readInt(!0);if(K>0){for(var y=new xv(K),l=0;l<K;l++){var m=e.readFloat(),ne=n.events[e.readInt(!0)],te=new Pw(m,ne);te.intValue=e.readInt(!1),te.floatValue=e.readFloat(),te.stringValue=e.readBoolean()?e.readString():ne.stringValue,te.data.audioPath!=null&&(te.volume=e.readFloat(),te.balance=e.readFloat()),y.setFrame(l,te)}i.push(y),o=Math.max(o,y.frames[K-1])}return new mr(r,i,o)},t.prototype.readCurve=function(e,r,n){switch(e.readByte()){case t.CURVE_STEPPED:n.setStepped(r);break;case t.CURVE_BEZIER:this.setCurve(n,r,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat());break}},t.prototype.setCurve=function(e,r,n,i,a,o){e.setCurve(r,n,i,a,o)},t.AttachmentTypeValues=[0,1,2,3,4,5,6],t.TransformModeValues=[ze.Normal,ze.OnlyTranslation,ze.NoRotationOrReflection,ze.NoScale,ze.NoScaleOrReflection],t.PositionModeValues=[Wt.Fixed,Wt.Percent],t.SpacingModeValues=[Or.Length,Or.Fixed,Or.Percent],t.RotateModeValues=[nr.Tangent,nr.Chain,nr.ChainScale],t.BlendModeValues=[Ce.NORMAL,Ce.ADD,Ce.MULTIPLY,Ce.SCREEN],t.BONE_ROTATE=0,t.BONE_TRANSLATE=1,t.BONE_SCALE=2,t.BONE_SHEAR=3,t.SLOT_ATTACHMENT=0,t.SLOT_COLOR=1,t.SLOT_TWO_COLOR=2,t.PATH_POSITION=0,t.PATH_SPACING=1,t.PATH_MIX=2,t.CURVE_LINEAR=0,t.CURVE_STEPPED=1,t.CURVE_BEZIER=2,t}(),D_e=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritDeform=a}return t}(),M_e=function(){function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null),this.bones=e,this.vertices=r}return t}(),L_e=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(yw),k4=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new Fw,i=typeof e=="string"?JSON.parse(e):e,a=i.skeleton;if(a!=null){if(n.hash=a.hash,n.version=a.spine,n.version.substr(0,3)!=="3.8"){var o="Spine 3.8 loader cant load version "+a.spine+". Please configure your pixi-spine bundle";console.error(o)}if(n.version==="3.8.75"){var o="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(o)}n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(i.bones)for(var s=0;s<i.bones.length;s++){var c=i.bones[s],l=null,u=this.getValue(c,"parent",null);if(u!=null&&(l=n.findBone(u),l==null))throw new Error("Parent bone not found: "+u);var f=new Tw(n.bones.length,c.name,l);f.length=this.getValue(c,"length",0)*r,f.x=this.getValue(c,"x",0)*r,f.y=this.getValue(c,"y",0)*r,f.rotation=this.getValue(c,"rotation",0),f.scaleX=this.getValue(c,"scaleX",1),f.scaleY=this.getValue(c,"scaleY",1),f.shearX=this.getValue(c,"shearX",0),f.shearY=this.getValue(c,"shearY",0),f.transformMode=t.transformModeFromString(this.getValue(c,"transform","normal")),f.skinRequired=this.getValue(c,"skin",!1),n.bones.push(f)}if(i.slots)for(var s=0;s<i.slots.length;s++){var h=i.slots[s],d=h.name,p=h.bone,v=n.findBone(p);if(v==null)throw new Error("Slot bone not found: "+p);var f=new kw(n.slots.length,d,v),y=this.getValue(h,"color",null);y!=null&&f.color.setFromString(y);var g=this.getValue(h,"dark",null);g!=null&&(f.darkColor=new _e(1,1,1,1),f.darkColor.setFromString(g)),f.attachmentName=this.getValue(h,"attachment",null),f.blendMode=t.blendModeFromString(this.getValue(h,"blend","normal")),n.slots.push(f)}if(i.ik)for(var s=0;s<i.ik.length;s++){var m=i.ik[s],f=new Rw(m.name);f.order=this.getValue(m,"order",0),f.skinRequired=this.getValue(m,"skin",!1);for(var x=0;x<m.bones.length;x++){var p=m.bones[x],b=n.findBone(p);if(b==null)throw new Error("IK bone not found: "+p);f.bones.push(b)}var _=m.target;if(f.target=n.findBone(_),f.target==null)throw new Error("IK target bone not found: "+_);f.mix=this.getValue(m,"mix",1),f.softness=this.getValue(m,"softness",0)*r,f.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,f.compress=this.getValue(m,"compress",!1),f.stretch=this.getValue(m,"stretch",!1),f.uniform=this.getValue(m,"uniform",!1),n.ikConstraints.push(f)}if(i.transform)for(var s=0;s<i.transform.length;s++){var m=i.transform[s],f=new Dw(m.name);f.order=this.getValue(m,"order",0),f.skinRequired=this.getValue(m,"skin",!1);for(var x=0;x<m.bones.length;x++){var p=m.bones[x],b=n.findBone(p);if(b==null)throw new Error("Transform constraint bone not found: "+p);f.bones.push(b)}var _=m.target;if(f.target=n.findBone(_),f.target==null)throw new Error("Transform constraint target bone not found: "+_);f.local=this.getValue(m,"local",!1),f.relative=this.getValue(m,"relative",!1),f.offsetRotation=this.getValue(m,"rotation",0),f.offsetX=this.getValue(m,"x",0)*r,f.offsetY=this.getValue(m,"y",0)*r,f.offsetScaleX=this.getValue(m,"scaleX",0),f.offsetScaleY=this.getValue(m,"scaleY",0),f.offsetShearY=this.getValue(m,"shearY",0),f.rotateMix=this.getValue(m,"rotateMix",1),f.translateMix=this.getValue(m,"translateMix",1),f.scaleMix=this.getValue(m,"scaleMix",1),f.shearMix=this.getValue(m,"shearMix",1),n.transformConstraints.push(f)}if(i.path)for(var s=0;s<i.path.length;s++){var m=i.path[s],f=new Iw(m.name);f.order=this.getValue(m,"order",0),f.skinRequired=this.getValue(m,"skin",!1);for(var x=0;x<m.bones.length;x++){var p=m.bones[x],b=n.findBone(p);if(b==null)throw new Error("Transform constraint bone not found: "+p);f.bones.push(b)}var _=m.target;if(f.target=n.findSlot(_),f.target==null)throw new Error("Path target slot not found: "+_);f.positionMode=t.positionModeFromString(this.getValue(m,"positionMode","percent")),f.spacingMode=t.spacingModeFromString(this.getValue(m,"spacingMode","length")),f.rotateMode=t.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),f.offsetRotation=this.getValue(m,"rotation",0),f.position=this.getValue(m,"position",0),f.positionMode==Wt.Fixed&&(f.position*=r),f.spacing=this.getValue(m,"spacing",0),(f.spacingMode==Or.Length||f.spacingMode==Or.Fixed)&&(f.spacing*=r),f.rotateMix=this.getValue(m,"rotateMix",1),f.translateMix=this.getValue(m,"translateMix",1),n.pathConstraints.push(f)}if(i.skins)for(var s=0;s<i.skins.length;s++){var S=i.skins[s],E=new Rp(S.name);if(S.bones)for(var w=0;w<S.bones.length;w++){var b=n.findBone(S.bones[w]);if(b==null)throw new Error("Skin bone not found: "+S.bones[s]);E.bones.push(b)}if(S.ik)for(var w=0;w<S.ik.length;w++){var C=n.findIkConstraint(S.ik[w]);if(C==null)throw new Error("Skin IK constraint not found: "+S.ik[s]);E.constraints.push(C)}if(S.transform)for(var w=0;w<S.transform.length;w++){var C=n.findTransformConstraint(S.transform[w]);if(C==null)throw new Error("Skin transform constraint not found: "+S.transform[s]);E.constraints.push(C)}if(S.path)for(var w=0;w<S.path.length;w++){var C=n.findPathConstraint(S.path[w]);if(C==null)throw new Error("Skin path constraint not found: "+S.path[s]);E.constraints.push(C)}for(var d in S.attachments){var A=n.findSlot(d);if(A==null)throw new Error("Slot not found: "+d);var h=S.attachments[d];for(var P in h){var T=this.readAttachment(h[P],E,A.index,P,n);T!=null&&E.setAttachment(A.index,P,T)}}n.skins.push(E),E.name=="default"&&(n.defaultSkin=E)}for(var s=0,O=this.linkedMeshes.length;s<O;s++){var R=this.linkedMeshes[s],E=R.skin==null?n.defaultSkin:n.findSkin(R.skin);if(E==null)throw new Error("Skin not found: "+R.skin);var F=E.getAttachment(R.slotIndex,R.parent);if(F==null)throw new Error("Parent mesh not found: "+R.parent);R.mesh.deformAttachment=R.inheritDeform?F:R.mesh,R.mesh.setParentMesh(F)}if(this.linkedMeshes.length=0,i.events)for(var D in i.events){var V=i.events[D],f=new Ow(D);f.intValue=this.getValue(V,"int",0),f.floatValue=this.getValue(V,"float",0),f.stringValue=this.getValue(V,"string",""),f.audioPath=this.getValue(V,"audio",null),f.audioPath!=null&&(f.volume=this.getValue(V,"volume",1),f.balance=this.getValue(V,"balance",0)),n.events.push(f)}if(i.animations)for(var Y in i.animations){var W=i.animations[Y];this.readAnimation(W,Y,n)}return n},t.prototype.readAttachment=function(e,r,n,i,a){var o=this.scale;i=this.getValue(e,"name",i);var s=this.getValue(e,"type","region");switch(s){case"region":{var c=this.getValue(e,"path",i),l=this.attachmentLoader.newRegionAttachment(r,i,c);if(l==null)return null;l.path=c,l.x=this.getValue(e,"x",0)*o,l.y=this.getValue(e,"y",0)*o,l.scaleX=this.getValue(e,"scaleX",1),l.scaleY=this.getValue(e,"scaleY",1),l.rotation=this.getValue(e,"rotation",0),l.width=e.width*o,l.height=e.height*o;var u=this.getValue(e,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(f==null)return null;this.readVertices(e,f,e.vertexCount<<1);var u=this.getValue(e,"color",null);return u!=null&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var c=this.getValue(e,"path",i),h=this.attachmentLoader.newMeshAttachment(r,i,c);if(h==null)return null;h.path=c;var u=this.getValue(e,"color",null);u!=null&&h.color.setFromString(u),h.width=this.getValue(e,"width",0)*o,h.height=this.getValue(e,"height",0)*o;var d=this.getValue(e,"parent",null);if(d!=null)return this.linkedMeshes.push(new B_e(h,this.getValue(e,"skin",null),n,d,this.getValue(e,"deform",!0))),h;var p=e.uvs;return this.readVertices(e,h,p.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(p),h.edges=this.getValue(e,"edges",null),h.hullLength=this.getValue(e,"hull",0)*2,h}case"path":{var c=this.attachmentLoader.newPathAttachment(r,i);if(c==null)return null;c.closed=this.getValue(e,"closed",!1),c.constantSpeed=this.getValue(e,"constantSpeed",!0);var v=e.vertexCount;this.readVertices(e,c,v<<1);for(var y=Q.newArray(v/3,0),g=0;g<e.lengths.length;g++)y[g]=e.lengths[g]*o;c.lengths=y;var u=this.getValue(e,"color",null);return u!=null&&c.color.setFromString(u),c}case"point":{var m=this.attachmentLoader.newPointAttachment(r,i);if(m==null)return null;m.x=this.getValue(e,"x",0)*o,m.y=this.getValue(e,"y",0)*o,m.rotation=this.getValue(e,"rotation",0);var u=this.getValue(e,"color",null);return u!=null&&m.color.setFromString(u),m}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(r,i);if(x==null)return null;var b=this.getValue(e,"end",null);if(b!=null){var _=a.findSlot(b);if(_==null)throw new Error("Clipping end slot not found: "+b);x.endSlot=_}var v=e.vertexCount;this.readVertices(e,x,v<<1);var u=this.getValue(e,"color",null);return u!=null&&x.color.setFromString(u),x}}return null},t.prototype.readVertices=function(e,r,n){var i=this.scale;r.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=Q.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=Q.toFloatArray(l)},t.prototype.readAnimation=function(e,r,n){var i=this.scale,a=new Array,o=0;if(e.slots)for(var s in e.slots){var c=e.slots[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+s);for(var u in c){var f=c[u];if(u=="attachment"){var h=new ls(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d++,this.getValue(v,"time",0),v.name)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}else if(u=="color"){var h=new Cf(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],y=new _e;y.setFromString(v.color||"ffffffff"),h.setFrame(d,this.getValue(v,"time",0),y.r,y.g,y.b,y.a),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Cf.ENTRIES])}else if(u=="twoColor"){var h=new Tf(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],g=new _e,m=new _e;g.setFromString(v.light),m.setFromString(v.dark),h.setFrame(d,this.getValue(v,"time",0),g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Tf.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+u+" ("+s+")")}}if(e.bones)for(var x in e.bones){var b=e.bones[x],_=n.findBoneIndex(x);if(_==-1)throw new Error("Bone not found: "+x);for(var u in b){var f=b[u];if(u==="rotate"){var h=new zn(f.length);h.boneIndex=_;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"angle",0)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*zn.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){var h=null,S=1,E=0;u==="scale"?(h=new Sw(f.length),E=1):u==="shear"?h=new Ew(f.length):(h=new Ts(f.length),S=i),h.boneIndex=_;for(var d=0,p=0;p<f.length;p++){var v=f[p],w=this.getValue(v,"x",E),C=this.getValue(v,"y",E);h.setFrame(d,this.getValue(v,"time",0),w*S,C*S),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Ts.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+u+" ("+x+")")}}if(e.ik)for(var A in e.ik){var P=e.ik[A],T=n.findIkConstraint(A),h=new Pf(P.length);h.ikConstraintIndex=n.ikConstraints.indexOf(T);for(var d=0,p=0;p<P.length;p++){var v=P[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"mix",1),this.getValue(v,"softness",0)*i,this.getValue(v,"bendPositive",!0)?1:-1,this.getValue(v,"compress",!1),this.getValue(v,"stretch",!1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Pf.ENTRIES])}if(e.transform)for(var A in e.transform){var P=e.transform[A],T=n.findTransformConstraint(A),h=new Of(P.length);h.transformConstraintIndex=n.transformConstraints.indexOf(T);for(var d=0,p=0;p<P.length;p++){var v=P[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1),this.getValue(v,"scaleMix",1),this.getValue(v,"shearMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Of.ENTRIES])}if(e.path)for(var A in e.path){var P=e.path[A],O=n.findPathConstraintIndex(A);if(O==-1)throw new Error("Path constraint not found: "+A);var R=n.pathConstraints[O];for(var u in P){var f=P[u];if(u==="position"||u==="spacing"){var h=null,S=1;u==="spacing"?(h=new Aw(f.length),(R.spacingMode==Or.Length||R.spacingMode==Or.Fixed)&&(S=i)):(h=new eu(f.length),R.positionMode==Wt.Fixed&&(S=i)),h.pathConstraintIndex=O;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,u,0)*S),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*eu.ENTRIES])}else if(u==="mix"){var h=new Rf(f.length);h.pathConstraintIndex=O;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,this.getValue(v,"time",0),this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Rf.ENTRIES])}}}if(e.deform)for(var F in e.deform){var D=e.deform[F],V=n.findSkin(F);if(V!=null)for(var s in D){var c=D[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+c.name);for(var u in c){var f=c[u],Y=V.getAttachment(l,u);if(Y==null)throw new Error("Deform attachment not found: "+f.name);var W=Y.bones!=null,$=Y.vertices,I=W?$.length/3*2:$.length,h=new ww(f.length);h.slotIndex=l,h.attachment=Y;for(var d=0,B=0;B<f.length;B++){var v=f[B],L=void 0,M=this.getValue(v,"vertices",null);if(M==null)L=W?Q.newFloatArray(I):$;else{L=Q.newFloatArray(I);var X=this.getValue(v,"offset",0);if(Q.arrayCopy(M,0,L,X,M.length),i!=1)for(var p=X,K=p+M.length;p<K;p++)L[p]*=i;if(!W)for(var p=0;p<I;p++)L[p]+=$[p]}h.setFrame(d,this.getValue(v,"time",0),L),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var ne=e.drawOrder;if(ne==null&&(ne=e.draworder),ne!=null){for(var h=new Dl(ne.length),te=n.slots.length,d=0,B=0;B<ne.length;B++){var ce=ne[B],de=null,se=this.getValue(ce,"offsets",null);if(se!=null){de=Q.newArray(te,-1);for(var fe=Q.newArray(te-se.length,0),oe=0,he=0,p=0;p<se.length;p++){var Pe=se[p],l=n.findSlotIndex(Pe.slot);if(l==-1)throw new Error("Slot not found: "+Pe.slot);for(;oe!=l;)fe[he++]=oe++;de[oe+Pe.offset]=oe++}for(;oe<te;)fe[he++]=oe++;for(var p=te-1;p>=0;p--)de[p]==-1&&(de[p]=fe[--he])}h.setFrame(d++,this.getValue(ce,"time",0),de)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(e.events){for(var h=new xv(e.events.length),d=0,p=0;p<e.events.length;p++){var Ie=e.events[p],Ee=n.findEvent(Ie.name);if(Ee==null)throw new Error("Event not found: "+Ie.name);var Be=new Pw(Q.toSinglePrecision(this.getValue(Ie,"time",0)),Ee);Be.intValue=this.getValue(Ie,"int",Ee.intValue),Be.floatValue=this.getValue(Ie,"float",Ee.floatValue),Be.stringValue=this.getValue(Ie,"string",Ee.stringValue),Be.data.audioPath!=null&&(Be.volume=this.getValue(Ie,"volume",1),Be.balance=this.getValue(Ie,"balance",0)),h.setFrame(d++,Be)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new mr(r,a,o))},t.prototype.readCurve=function(e,r,n){if(e.hasOwnProperty("curve"))if(e.curve==="stepped")r.setStepped(n);else{var i=e.curve;r.setCurve(n,i,this.getValue(e,"c2",0),this.getValue(e,"c3",1),this.getValue(e,"c4",1))}},t.prototype.getValue=function(e,r,n){return e[r]!==void 0?e[r]:n},t.blendModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return Ce.NORMAL;if(e=="additive")return Ce.ADD;if(e=="multiply")return Ce.MULTIPLY;if(e=="screen")return Ce.SCREEN;throw new Error("Unknown blend mode: "+e)},t.positionModeFromString=function(e){if(e=e.toLowerCase(),e=="fixed")return Wt.Fixed;if(e=="percent")return Wt.Percent;throw new Error("Unknown position mode: "+e)},t.spacingModeFromString=function(e){if(e=e.toLowerCase(),e=="length")return Or.Length;if(e=="fixed")return Or.Fixed;if(e=="percent")return Or.Percent;throw new Error("Unknown position mode: "+e)},t.rotateModeFromString=function(e){if(e=e.toLowerCase(),e=="tangent")return nr.Tangent;if(e=="chain")return nr.Chain;if(e=="chainscale")return nr.ChainScale;throw new Error("Unknown rotate mode: "+e)},t.transformModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return ze.Normal;if(e=="onlytranslation")return ze.OnlyTranslation;if(e=="norotationorreflection")return ze.NoRotationOrReflection;if(e=="noscale")return ze.NoScale;if(e=="noscaleorreflection")return ze.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},t}(),B_e=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritDeform=a}return t}(),N_e=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){this.skeleton=new I4(r),this.skeleton.updateWorldTransform(),this.stateData=new T4(r),this.state=new w4(this.stateData)},e}(nh);const j_e=Object.freeze(Object.defineProperty({__proto__:null,Animation:mr,AnimationState:w4,AnimationStateAdapter:k_e,AnimationStateData:T4,AtlasAttachmentLoader:Cw,Attachment:xw,AttachmentTimeline:ls,Bone:j1,BoneData:Tw,BoundingBoxAttachment:b4,ClippingAttachment:S4,ColorTimeline:Cf,ConstraintData:_v,CurveTimeline:ga,DeformTimeline:ww,DrawOrderTimeline:Dl,Event:Pw,EventData:Ow,EventQueue:C4,EventTimeline:xv,get EventType(){return yn},IkConstraint:P4,IkConstraintData:Rw,IkConstraintTimeline:Pf,JitterEffect:I_e,MeshAttachment:yv,PathAttachment:Af,PathConstraint:O4,PathConstraintData:Iw,PathConstraintMixTimeline:Rf,PathConstraintPositionTimeline:eu,PathConstraintSpacingTimeline:Aw,PointAttachment:E4,RegionAttachment:bw,RotateTimeline:zn,ScaleTimeline:Sw,ShearTimeline:Ew,Skeleton:I4,SkeletonBinary:F4,SkeletonBounds:L_e,SkeletonData:Fw,SkeletonJson:k4,Skin:Rp,SkinEntry:U1,Slot:_w,SlotData:kw,get SpacingMode(){return Or},Spine:N_e,SwirlEffect:F_e,get TimelineType(){return Xr},TrackEntry:A4,TransformConstraint:R4,TransformConstraintData:Dw,TransformConstraintTimeline:Of,TranslateTimeline:Ts,TwoColorTimeline:Tf,VertexAttachment:js},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $1=function(t,e){return $1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},$1(t,e)};function yr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mw=function(){function t(e){if(e==null)throw new Error("name cannot be null.");this.name=e}return t}(),Us=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.id=(e.nextID++&65535)<<11,n.worldVerticesLength=0,n}return e.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.attachmentVertices,u=this.vertices,f=this.bones;if(f==null){l.length>0&&(u=l);for(var h=r.bone.matrix,d=h.tx,p=h.ty,v=h.a,y=h.c,g=h.b,m=h.d,x=n,b=o;b<i;x+=2,b+=s){var _=u[x],S=u[x+1];a[b]=_*v+S*y+d,a[b+1]=_*g+S*m+p}return}for(var E=0,w=0,C=0;C<n;C+=2){var A=f[E];E+=A+1,w+=A}var P=c.bones;if(l.length==0)for(var b=o,y=w*3;b<i;b+=s){var T=0,O=0,A=f[E++];for(A+=E;E<A;E++,y+=3){var h=P[f[E]].matrix,_=u[y],S=u[y+1],R=u[y+2];T+=(_*h.a+S*h.c+h.tx)*R,O+=(_*h.b+S*h.d+h.ty)*R}a[b]=T,a[b+1]=O}else for(var F=l,b=o,y=w*3,D=w<<1;b<i;b+=s){var T=0,O=0,A=f[E++];for(A+=E;E<A;E++,y+=3,D+=2){var h=P[f[E]].matrix,_=u[y]+F[D],S=u[y+1]+F[D+1],R=u[y+2];T+=(_*h.a+S*h.c+h.tx)*R,O+=(_*h.b+S*h.d+h.ty)*R}a[b]=T,a[b+1]=O}},e.prototype.applyDeform=function(r){return this==r},e.nextID=0,e}(Mw),D4=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.BoundingBox,n.color=new _e(1,1,1,1),n}return e}(Us),M4=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Clipping,n.color=new _e(.2275,.2275,.8078,1),n}return e}(Us),Lw=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Mesh,n.color=new _e(1,1,1,1),n.inheritDeform=!1,n.tempColor=new _e(0,0,0,0),n}return e.prototype.applyDeform=function(r){return this==r||this.inheritDeform&&this.parentMesh==r},e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(r){this.parentMesh=r,r!=null&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},e}(Us),If=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Path,n.closed=!1,n.constantSpeed=!1,n.color=new _e(1,1,1,1),n}return e}(Us),L4=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Point,n.color=new _e(.38,.94,0,1),n}return e.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},e.prototype.computeWorldRotation=function(r){var n=r.matrix,i=G.cosDeg(this.rotation),a=G.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*G.radDeg},e}(Us),Bw=function(){function t(e,r){if(this.attachmentVertices=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new _e,this.darkColor=e.darkColor==null?null:new _e,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),Nw=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new _e(1,1,1,1),n.offset=Q.newFloatArray(8),n.uvs=Q.newFloatArray(8),n.tempColor=new _e(1,1,1,1),n}return e.prototype.updateOffset=function(){var r=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*r,a=-this.height/2*this.scaleY+this.region.offsetY*n,o=i+this.region.width*r,s=a+this.region.height*n,c=this.rotation*Math.PI/180,l=Math.cos(c),u=Math.sin(c),f=i*l+this.x,h=i*u,d=a*l+this.y,p=a*u,v=o*l+this.x,y=o*u,g=s*l+this.y,m=s*u,x=this.offset;x[e.OX1]=f-p,x[e.OY1]=d+h,x[e.OX2]=f-m,x[e.OY2]=g+h,x[e.OX3]=v-m,x[e.OY3]=g+y,x[e.OX4]=v-p,x[e.OY4]=d+y},e.prototype.setRegion=function(r){this.region=r;var n=this.uvs;r.rotate?(n[2]=r.u,n[3]=r.v2,n[4]=r.u,n[5]=r.v,n[6]=r.u2,n[7]=r.v,n[0]=r.u2,n[1]=r.v2):(n[0]=r.u,n[1]=r.v2,n[2]=r.u,n[3]=r.v,n[4]=r.u2,n[5]=r.v,n[6]=r.u2,n[7]=r.v2)},e.prototype.computeWorldVertices=function(r,n,i,a){var o=this.offset,s=r instanceof Bw?r.bone.matrix:r.matrix,c=s.tx,l=s.ty,u=s.a,f=s.c,h=s.b,d=s.d,p=0,v=0;p=o[e.OX1],v=o[e.OY1],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX2],v=o[e.OY2],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX3],v=o[e.OY3],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l,i+=a,p=o[e.OX4],v=o[e.OY4],n[i]=p*u+v*f+c,n[i+1]=p*h+v*d+l},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(Mw),U_e=function(){function t(e,r){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=r}return t.prototype.begin=function(e){},t.prototype.transform=function(e,r,n,i){e.x+=G.randomTriangular(-this.jitterX,this.jitterY),e.y+=G.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),$_e=function(){function t(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return t.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},t.prototype.transform=function(e,r,n,i){var a=this.angle*G.degreesToRadians,o=e.x-this.worldX,s=e.y-this.worldY,c=Math.sqrt(o*o+s*s);if(c<this.radius){var l=t.interpolation.apply(0,a,(this.radius-c)/this.radius),u=Math.cos(l),f=Math.sin(l);e.x=u*o-f*s+this.worldX,e.y=f*o+u*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new _4(2),t}(),Dr=function(){function t(e,r,n){if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("timelines cannot be null.");this.name=e,this.timelines=r,this.duration=n}return t.prototype.apply=function(e,r,n,i,a,o,s,c){if(e==null)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(e,r,n,a,o,s,c)},t.binarySearch=function(e,r,n){n===void 0&&(n=1);var i=0,a=e.length/n-2;if(a==0)return n;for(var o=a>>>1;;){if(e[(o+1)*n]<=r?i=o+1:a=o,i==a)return(i+1)*n;o=i+a>>>1}},t.linearSearch=function(e,r,n){for(var i=0,a=e.length-n;i<=a;i+=n)if(e[i]>r)return i;return-1},t}(),Hr;(function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"})(Hr||(Hr={}));var ya=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=Q.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var r=e*t.BEZIER_SIZE;if(r==this.curves.length)return t.LINEAR;var n=this.curves[r];return n==t.LINEAR?t.LINEAR:n==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,r,n,i,a){var o=(-r*2+i)*.03,s=(-n*2+a)*.03,c=((r-i)*3+1)*.006,l=((n-a)*3+1)*.006,u=o*2+c,f=s*2+l,h=r*.3+o+c*.16666667,d=n*.3+s+l*.16666667,p=e*t.BEZIER_SIZE,v=this.curves;v[p++]=t.BEZIER;for(var y=h,g=d,m=p+t.BEZIER_SIZE-1;p<m;p+=2)v[p]=y,v[p+1]=g,h+=u,d+=f,u+=c,f+=l,y+=h,g+=d},t.prototype.getCurvePercent=function(e,r){r=G.clamp(r,0,1);var n=this.curves,i=e*t.BEZIER_SIZE,a=n[i];if(a==t.LINEAR)return r;if(a==t.STEPPED)return 0;i++;for(var o=0,s=i,c=i+t.BEZIER_SIZE-1;i<c;i+=2)if(o=n[i],o>=r){var l=void 0,u=void 0;return i==s?(l=0,u=0):(l=n[i-2],u=n[i-1]),u+(n[i+1]-u)*(r-l)/(o-l)}var f=n[i-1];return f+(1-f)*(r-o)/(1-o)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=10*2-1,t}(),Ti=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r<<1),n}return e.prototype.getPropertyId=function(){return(Hr.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+e.ROTATION]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case N.setup:u.rotation=u.data.rotation;return;case N.first:var f=u.data.rotation-u.rotation;u.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*o}return}if(i>=l[l.length-e.ENTRIES]){var h=l[l.length+e.PREV_ROTATION];switch(s){case N.setup:u.rotation=u.data.rotation+h*o;break;case N.first:case N.replace:h+=u.data.rotation-u.rotation,h-=(16384-(16384.499999999996-h/360|0))*360;case N.add:u.rotation+=h*o}return}var d=Dr.binarySearch(l,i,e.ENTRIES),p=l[d+e.PREV_ROTATION],v=l[d],y=this.getCurvePercent((d>>1)-1,1-(i-v)/(l[d+e.PREV_TIME]-v)),g=l[d+e.ROTATION]-p;switch(g=p+(g-(16384-(16384.499999999996-g/360|0))*360)*y,s){case N.setup:u.rotation=u.data.rotation+(g-(16384-(16384.499999999996-g/360|0))*360)*o;break;case N.first:case N.replace:g+=u.data.rotation-u.rotation;case N.add:u.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(ya),Ff=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.translate<<24)+this.boneIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.X]=i,this.frames[r+e.Y]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case N.setup:u.x=u.data.x,u.y=u.data.y;return;case N.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=Dr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.X]-f)*v,h+=(l[d+e.Y]-h)*v}switch(s){case N.setup:u.x=u.data.x+f*o,u.y=u.data.y+h*o;break;case N.first:case N.replace:u.x+=(u.data.x+f-u.x)*o,u.y+=(u.data.y+h-u.y)*o;break;case N.add:u.x+=f*o,u.y+=h*o}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(ya),B4=function(t){yr(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Hr.scale<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case N.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case N.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X]*u.data.scaleX,h=l[l.length+e.PREV_Y]*u.data.scaleY;else{var d=Dr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=(f+(l[d+e.X]-f)*v)*u.data.scaleX,h=(h+(l[d+e.Y]-h)*v)*u.data.scaleY}if(o==1)s==N.add?(u.scaleX+=f-u.data.scaleX,u.scaleY+=h-u.data.scaleY):(u.scaleX=f,u.scaleY=h);else{var y=0,g=0;if(c==Ze.mixOut)switch(s){case N.setup:y=u.data.scaleX,g=u.data.scaleY,u.scaleX=y+(Math.abs(f)*G.signum(y)-y)*o,u.scaleY=g+(Math.abs(h)*G.signum(g)-g)*o;break;case N.first:case N.replace:y=u.scaleX,g=u.scaleY,u.scaleX=y+(Math.abs(f)*G.signum(y)-y)*o,u.scaleY=g+(Math.abs(h)*G.signum(g)-g)*o;break;case N.add:y=u.scaleX,g=u.scaleY,u.scaleX=y+(Math.abs(f)*G.signum(y)-u.data.scaleX)*o,u.scaleY=g+(Math.abs(h)*G.signum(g)-u.data.scaleY)*o}else switch(s){case N.setup:y=Math.abs(u.data.scaleX)*G.signum(f),g=Math.abs(u.data.scaleY)*G.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=g+(h-g)*o;break;case N.first:case N.replace:y=Math.abs(u.scaleX)*G.signum(f),g=Math.abs(u.scaleY)*G.signum(h),u.scaleX=y+(f-y)*o,u.scaleY=g+(h-g)*o;break;case N.add:y=G.signum(f),g=G.signum(h),u.scaleX=Math.abs(u.scaleX)*y+(f-Math.abs(u.data.scaleX)*y)*o,u.scaleY=Math.abs(u.scaleY)*g+(h-Math.abs(u.data.scaleY)*g)*o}}},e}(Ff),N4=function(t){yr(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Hr.shear<<24)+this.boneIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.bones[this.boneIndex];if(i<l[0]){switch(s){case N.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case N.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_X],h=l[l.length+e.PREV_Y];else{var d=Dr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_X],h=l[d+e.PREV_Y];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f=f+(l[d+e.X]-f)*v,h=h+(l[d+e.Y]-h)*v}switch(s){case N.setup:u.shearX=u.data.shearX+f*o,u.shearY=u.data.shearY+h*o;break;case N.first:case N.replace:u.shearX+=(u.data.shearX+f-u.shearX)*o,u.shearY+=(u.data.shearY+h-u.shearY)*o;break;case N.add:u.shearX+=f*o,u.shearY+=h*o}},e}(Ff),V1=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.color<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=this.frames;if(i<u[0]){switch(s){case N.setup:l.color.setFromColor(l.data.color);return;case N.first:var f=l.color,h=l.data.color;f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var d=0,p=0,v=0,y=0;if(i>=u[u.length-e.ENTRIES]){var g=u.length;d=u[g+e.PREV_R],p=u[g+e.PREV_G],v=u[g+e.PREV_B],y=u[g+e.PREV_A]}else{var m=Dr.binarySearch(u,i,e.ENTRIES);d=u[m+e.PREV_R],p=u[m+e.PREV_G],v=u[m+e.PREV_B],y=u[m+e.PREV_A];var x=u[m],b=this.getCurvePercent(m/e.ENTRIES-1,1-(i-x)/(u[m+e.PREV_TIME]-x));d+=(u[m+e.R]-d)*b,p+=(u[m+e.G]-p)*b,v+=(u[m+e.B]-v)*b,y+=(u[m+e.A]-y)*b}if(o==1)l.color.set(d,p,v,y);else{var f=l.color;s==N.setup&&f.setFromColor(l.data.color),f.add((d-f.r)*o,(p-f.g)*o,(v-f.b)*o,(y-f.a)*o)}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(ya),G1=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.R]=i,this.frames[r+e.G]=a,this.frames[r+e.B]=o,this.frames[r+e.A]=s,this.frames[r+e.R2]=c,this.frames[r+e.G2]=l,this.frames[r+e.B2]=u},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=this.frames;if(i<u[0]){switch(s){case N.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case N.first:var f=l.color,h=l.darkColor,d=l.data.color,p=l.data.darkColor;f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),h.add((p.r-h.r)*o,(p.g-h.g)*o,(p.b-h.b)*o,0)}return}var v=0,y=0,g=0,m=0,x=0,b=0,_=0;if(i>=u[u.length-e.ENTRIES]){var S=u.length;v=u[S+e.PREV_R],y=u[S+e.PREV_G],g=u[S+e.PREV_B],m=u[S+e.PREV_A],x=u[S+e.PREV_R2],b=u[S+e.PREV_G2],_=u[S+e.PREV_B2]}else{var E=Dr.binarySearch(u,i,e.ENTRIES);v=u[E+e.PREV_R],y=u[E+e.PREV_G],g=u[E+e.PREV_B],m=u[E+e.PREV_A],x=u[E+e.PREV_R2],b=u[E+e.PREV_G2],_=u[E+e.PREV_B2];var w=u[E],C=this.getCurvePercent(E/e.ENTRIES-1,1-(i-w)/(u[E+e.PREV_TIME]-w));v+=(u[E+e.R]-v)*C,y+=(u[E+e.G]-y)*C,g+=(u[E+e.B]-g)*C,m+=(u[E+e.A]-m)*C,x+=(u[E+e.R2]-x)*C,b+=(u[E+e.G2]-b)*C,_+=(u[E+e.B2]-_)*C}if(o==1)l.color.set(v,y,g,m),l.darkColor.set(x,b,_,1);else{var f=l.color,h=l.darkColor;s==N.setup&&(f.setFromColor(l.data.color),h.setFromColor(l.data.darkColor)),f.add((v-f.r)*o,(y-f.g)*o,(g-f.b)*o,(m-f.a)*o),h.add((x-h.r)*o,(b-h.g)*o,(_-h.b)*o,0)}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(ya),Ip=function(){function t(e){this.frames=Q.newFloatArray(e),this.attachmentNames=new Array(e)}return t.prototype.getPropertyId=function(){return(Hr.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.attachmentNames[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.slots[this.slotIndex];if(s==Ze.mixOut&&o==N.setup){var l=c.data.attachmentName;c.setAttachment(l==null?null:e.getAttachment(this.slotIndex,l));return}var u=this.frames;if(n<u[0]){if(o==N.setup||o==N.first){var f=c.data.attachmentName;c.setAttachment(f==null?null:e.getAttachment(this.slotIndex,f))}return}var h=0;n>=u[u.length-1]?h=u.length-1:h=Dr.binarySearch(u,n,1)-1;var d=this.attachmentNames[h];e.slots[this.slotIndex].setAttachment(d==null?null:e.getAttachment(this.slotIndex,d))},t}(),LR=null,j4=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r),n.frameVertices=new Array(r),LR==null&&(LR=Q.newFloatArray(64)),n}return e.prototype.getPropertyId=function(){return(Hr.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.frameVertices[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex],u=l.getAttachment();if(!(!(u instanceof Us)||!u.applyDeform(this.attachment))){var f=l.attachmentVertices;f.length==0&&(s=N.setup);var h=this.frameVertices,d=h[0].length,p=this.frames;if(i<p[0]){var v=u;switch(s){case N.setup:f.length=0;return;case N.first:if(o==1){f.length=0;break}var y=Q.setArraySize(f,d);if(v.bones==null)for(var g=v.vertices,m=0;m<d;m++)y[m]+=(g[m]-y[m])*o;else{o=1-o;for(var m=0;m<d;m++)y[m]*=o}}return}var x=Q.setArraySize(f,d);if(i>=p[p.length-1]){var b=h[p.length-1];if(o==1)if(s==N.add){var v=u;if(v.bones==null)for(var g=v.vertices,m=0;m<d;m++)x[m]+=b[m]-g[m];else for(var m=0;m<d;m++)x[m]+=b[m]}else Q.arrayCopy(b,0,x,0,d);else switch(s){case N.setup:{var _=u;if(_.bones==null)for(var g=_.vertices,m=0;m<d;m++){var S=g[m];x[m]=S+(b[m]-S)*o}else for(var m=0;m<d;m++)x[m]=b[m]*o;break}case N.first:case N.replace:for(var m=0;m<d;m++)x[m]+=(b[m]-x[m])*o;case N.add:var v=u;if(v.bones==null)for(var g=v.vertices,m=0;m<d;m++)x[m]+=(b[m]-g[m])*o;else for(var m=0;m<d;m++)x[m]+=b[m]*o}return}var E=Dr.binarySearch(p,i),w=h[E-1],C=h[E],A=p[E],P=this.getCurvePercent(E-1,1-(i-A)/(p[E-1]-A));if(o==1)if(s==N.add){var v=u;if(v.bones==null)for(var g=v.vertices,m=0;m<d;m++){var T=w[m];x[m]+=T+(C[m]-T)*P-g[m]}else for(var m=0;m<d;m++){var T=w[m];x[m]+=T+(C[m]-T)*P}}else for(var m=0;m<d;m++){var T=w[m];x[m]=T+(C[m]-T)*P}else switch(s){case N.setup:{var O=u;if(O.bones==null)for(var g=O.vertices,m=0;m<d;m++){var T=w[m],S=g[m];x[m]=S+(T+(C[m]-T)*P-S)*o}else for(var m=0;m<d;m++){var T=w[m];x[m]=(T+(C[m]-T)*P)*o}break}case N.first:case N.replace:for(var m=0;m<d;m++){var T=w[m];x[m]+=(T+(C[m]-T)*P-x[m])*o}break;case N.add:var v=u;if(v.bones==null)for(var g=v.vertices,m=0;m<d;m++){var T=w[m];x[m]+=(T+(C[m]-T)*P-g[m])*o}else for(var m=0;m<d;m++){var T=w[m];x[m]+=(T+(C[m]-T)*P)*o}}}},e}(ya),U4=function(){function t(e){this.frames=Q.newFloatArray(e),this.events=new Array(e)}return t.prototype.getPropertyId=function(){return Hr.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r){this.frames[e]=r.time,this.events[e]=r},t.prototype.apply=function(e,r,n,i,a,o,s){if(i!=null){var c=this.frames,l=this.frames.length;if(r>n)this.apply(e,r,Number.MAX_VALUE,i,a,o,s),r=-1;else if(r>=c[l-1])return;if(!(n<c[0])){var u=0;if(r<c[0])u=0;else{u=Dr.binarySearch(c,r);for(var f=c[u];u>0&&c[u-1]==f;)u--}for(;u<l&&n>=c[u];u++)i.push(this.events[u])}}},t}(),Fp=function(){function t(e){this.frames=Q.newFloatArray(e),this.drawOrders=new Array(e)}return t.prototype.getPropertyId=function(){return Hr.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,r,n){this.frames[e]=r,this.drawOrders[e]=n},t.prototype.apply=function(e,r,n,i,a,o,s){var c=e.drawOrder,l=e.slots;if(s==Ze.mixOut&&o==N.setup){Q.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var u=this.frames;if(n<u[0]){(o==N.setup||o==N.first)&&Q.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var f=0;n>=u[u.length-1]?f=u.length-1:f=Dr.binarySearch(u,n)-1;var h=this.drawOrders[f];if(h==null)Q.arrayCopy(l,0,c,0,l.length);else for(var d=0,p=h.length;d<p;d++)c[d]=l[h[d]]},t}(),z1=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.MIX]=i,this.frames[r+e.BEND_DIRECTION]=a,this.frames[r+e.COMPRESS]=o?1:0,this.frames[r+e.STRETCH]=s?1:0},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.ikConstraints[this.ikConstraintIndex];if(i<l[0]){switch(s){case N.setup:u.mix=u.data.mix,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case N.first:u.mix+=(u.data.mix-u.mix)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}if(i>=l[l.length-e.ENTRIES]){s==N.setup?(u.mix=u.data.mix+(l[l.length+e.PREV_MIX]-u.data.mix)*o,c==Ze.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0)):(u.mix+=(l[l.length+e.PREV_MIX]-u.mix)*o,c==Ze.mixIn&&(u.bendDirection=l[l.length+e.PREV_BEND_DIRECTION],u.compress=l[l.length+e.PREV_COMPRESS]!=0,u.stretch=l[l.length+e.PREV_STRETCH]!=0));return}var f=Dr.binarySearch(l,i,e.ENTRIES),h=l[f+e.PREV_MIX],d=l[f],p=this.getCurvePercent(f/e.ENTRIES-1,1-(i-d)/(l[f+e.PREV_TIME]-d));s==N.setup?(u.mix=u.data.mix+(h+(l[f+e.MIX]-h)*p-u.data.mix)*o,c==Ze.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0)):(u.mix+=(h+(l[f+e.MIX]-h)*p-u.mix)*o,c==Ze.mixIn&&(u.bendDirection=l[f+e.PREV_BEND_DIRECTION],u.compress=l[f+e.PREV_COMPRESS]!=0,u.stretch=l[f+e.PREV_STRETCH]!=0))},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_MIX=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.BEND_DIRECTION=2,e.COMPRESS=3,e.STRETCH=4,e}(ya),W1=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(r,n,i,a,o,s){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a,this.frames[r+e.SCALE]=o,this.frames[r+e.SHEAR]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.transformConstraints[this.transformConstraintIndex];if(i<l[0]){var f=u.data;switch(s){case N.setup:u.rotateMix=f.rotateMix,u.translateMix=f.translateMix,u.scaleMix=f.scaleMix,u.shearMix=f.shearMix;return;case N.first:u.rotateMix+=(f.rotateMix-u.rotateMix)*o,u.translateMix+=(f.translateMix-u.translateMix)*o,u.scaleMix+=(f.scaleMix-u.scaleMix)*o,u.shearMix+=(f.shearMix-u.shearMix)*o}return}var h=0,d=0,p=0,v=0;if(i>=l[l.length-e.ENTRIES]){var y=l.length;h=l[y+e.PREV_ROTATE],d=l[y+e.PREV_TRANSLATE],p=l[y+e.PREV_SCALE],v=l[y+e.PREV_SHEAR]}else{var g=Dr.binarySearch(l,i,e.ENTRIES);h=l[g+e.PREV_ROTATE],d=l[g+e.PREV_TRANSLATE],p=l[g+e.PREV_SCALE],v=l[g+e.PREV_SHEAR];var m=l[g],x=this.getCurvePercent(g/e.ENTRIES-1,1-(i-m)/(l[g+e.PREV_TIME]-m));h+=(l[g+e.ROTATE]-h)*x,d+=(l[g+e.TRANSLATE]-d)*x,p+=(l[g+e.SCALE]-p)*x,v+=(l[g+e.SHEAR]-v)*x}if(s==N.setup){var f=u.data;u.rotateMix=f.rotateMix+(h-f.rotateMix)*o,u.translateMix=f.translateMix+(d-f.translateMix)*o,u.scaleMix=f.scaleMix+(p-f.scaleMix)*o,u.shearMix=f.shearMix+(v-f.shearMix)*o}else u.rotateMix+=(h-u.rotateMix)*o,u.translateMix+=(d-u.translateMix)*o,u.scaleMix+=(p-u.scaleMix)*o,u.shearMix+=(v-u.shearMix)*o},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(ya),kp=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.VALUE]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case N.setup:u.position=u.data.position;return;case N.first:u.position+=(u.data.position-u.position)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=Dr.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==N.setup?u.position=u.data.position+(f-u.data.position)*o:u.position+=(f-u.position)*o},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(ya),$4=function(t){yr(e,t);function e(r){return t.call(this,r)||this}return e.prototype.getPropertyId=function(){return(Hr.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case N.setup:u.spacing=u.data.spacing;return;case N.first:u.spacing+=(u.data.spacing-u.spacing)*o}return}var f=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_VALUE];else{var h=Dr.binarySearch(l,i,e.ENTRIES);f=l[h+e.PREV_VALUE];var d=l[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(i-d)/(l[h+e.PREV_TIME]-d));f+=(l[h+e.VALUE]-f)*p}s==N.setup?u.spacing=u.data.spacing+(f-u.data.spacing)*o:u.spacing+=(f-u.spacing)*o},e}(kp),X1=function(t){yr(e,t);function e(r){var n=t.call(this,r)||this;return n.frames=Q.newFloatArray(r*e.ENTRIES),n}return e.prototype.getPropertyId=function(){return(Hr.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(r,n,i,a){r*=e.ENTRIES,this.frames[r]=n,this.frames[r+e.ROTATE]=i,this.frames[r+e.TRANSLATE]=a},e.prototype.apply=function(r,n,i,a,o,s,c){var l=this.frames,u=r.pathConstraints[this.pathConstraintIndex];if(i<l[0]){switch(s){case N.setup:u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix;return;case N.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*o,u.translateMix+=(u.data.translateMix-u.translateMix)*o}return}var f=0,h=0;if(i>=l[l.length-e.ENTRIES])f=l[l.length+e.PREV_ROTATE],h=l[l.length+e.PREV_TRANSLATE];else{var d=Dr.binarySearch(l,i,e.ENTRIES);f=l[d+e.PREV_ROTATE],h=l[d+e.PREV_TRANSLATE];var p=l[d],v=this.getCurvePercent(d/e.ENTRIES-1,1-(i-p)/(l[d+e.PREV_TIME]-p));f+=(l[d+e.ROTATE]-f)*v,h+=(l[d+e.TRANSLATE]-h)*v}s==N.setup?(u.rotateMix=u.data.rotateMix+(f-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(h-u.data.translateMix)*o):(u.rotateMix+=(f-u.rotateMix)*o,u.translateMix+=(h-u.translateMix)*o)},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(ya),V4=function(){function t(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new z4(this),this.propertyIDs=new y4,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new gv(function(){return new G4}),this.data=e}return t.prototype.update=function(e){e*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a!=null){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=e*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s!=null){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime=a.timeScale==0?0:(c/a.timeScale+e)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom!=null;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&a.mixingFrom==null){r[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(a.mixingFrom!=null&&this.updateMixingFrom(a,e)){var l=a.mixingFrom;for(a.mixingFrom=null,l!=null&&(l.mixingTo=null);l!=null;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,r){var n=e.mixingFrom;if(n==null)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom!=null&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,e.mixTime+=r,!1)},t.prototype.apply=function(e){if(e==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(s==null||s.delay>0)){i=!0;var c=a==0?N.first:s.mixBlend,l=s.alpha;s.mixingFrom!=null?l*=this.applyMixingFrom(s,e,c):s.trackTime>=s.trackEnd&&s.next==null&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=s.animation.timelines.length,d=s.animation.timelines;if(a==0&&l==1||c==N.add)for(var p=0;p<h;p++)Q.webkit602BugfixHelper(l,c),d[p].apply(e,u,f,r,l,c,Ze.mixIn);else{var v=s.timelineMode,y=s.timelinesRotation.length==0;y&&Q.setArraySize(s.timelinesRotation,h<<1,null);for(var g=s.timelinesRotation,p=0;p<h;p++){var m=d[p],x=v[p]==t.SUBSEQUENT?c:N.setup;m instanceof Ti?this.applyRotateTimeline(m,e,f,l,x,g,p<<1,y):(Q.webkit602BugfixHelper(l,c),m.apply(e,u,f,r,l,x,Ze.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}return this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,r,n){var i=e.mixingFrom;i.mixingFrom!=null&&this.applyMixingFrom(i,r,n);var a=0;e.mixDuration==0?(a=1,n==N.first&&(n=N.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),n!=N.first&&(n=i.mixBlend));var o=a<i.eventThreshold?this.events:null,s=a<i.attachmentThreshold,c=a<i.drawOrderThreshold,l=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,h=i.animation.timelines,d=i.alpha*e.interruptAlpha,p=d*(1-a);if(n==N.add)for(var v=0;v<f;v++)h[v].apply(r,l,u,o,p,n,Ze.mixOut);else{var y=i.timelineMode,g=i.timelineHoldMix,m=i.timelinesRotation.length==0;m&&Q.setArraySize(i.timelinesRotation,f<<1,null);var x=i.timelinesRotation;i.totalAlpha=0;for(var v=0;v<f;v++){var b=h[v],_=Ze.mixOut,S=void 0,E=0;switch(y[v]){case t.SUBSEQUENT:if(!s&&b instanceof Ip||!c&&b instanceof Fp)continue;S=n,E=p;break;case t.FIRST:S=N.setup,E=p;break;case t.HOLD:S=N.setup,E=d;break;default:S=N.setup;var w=g[v];E=d*Math.max(0,1-w.mixTime/w.mixDuration);break}i.totalAlpha+=E,b instanceof Ti?this.applyRotateTimeline(b,r,u,E,S,x,v<<1,m):(Q.webkit602BugfixHelper(E,n),S==N.setup&&(b instanceof Ip?s&&(_=Ze.mixOut):b instanceof Fp&&c&&(_=Ze.mixOut)),b.apply(r,l,u,o,E,S,_))}}return e.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,a},t.prototype.applyRotateTimeline=function(e,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){e.apply(r,0,n,null,1,a,Ze.mixIn);return}var l=e,u=l.frames,f=r.bones[l.boneIndex],h=0,d=0;if(n<u[0])switch(a){case N.setup:f.rotation=f.data.rotation;default:return;case N.first:h=f.rotation,d=f.data.rotation}else if(h=a==N.setup?f.data.rotation:f.rotation,n>=u[u.length-Ti.ENTRIES])d=f.data.rotation+u[u.length+Ti.PREV_ROTATION];else{var p=Dr.binarySearch(u,n,Ti.ENTRIES),v=u[p+Ti.PREV_ROTATION],y=u[p],g=l.getCurvePercent((p>>1)-1,1-(n-y)/(u[p+Ti.PREV_TIME]-y));d=u[p+Ti.ROTATION]-v,d-=(16384-(16384.499999999996-d/360|0))*360,d=v+d*g+f.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var m=0,x=d-h;if(x-=(16384-(16384.499999999996-x/360|0))*360,x==0)m=o[s];else{var b=0,_=0;c?(b=0,_=x):(b=o[s],_=o[s+1]);var S=x>0,E=b>=0;G.signum(_)!=G.signum(x)&&Math.abs(_)<=90&&(Math.abs(b)>180&&(b+=360*G.signum(b)),E=S),m=x+b-b%360,E!=S&&(m+=360*G.signum(b)),o[s]=m}o[s+1]=x,h+=m*i,f.rotation=h-(16384-(16384.499999999996-h/360|0))*360},t.prototype.queueEvents=function(e,r){for(var n=e.animationStart,i=e.animationEnd,a=i-n,o=e.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(e,u)}var f=!1;for(e.loop?f=a==0||o>e.trackTime%a:f=r>=i&&e.animationLast<i,f&&this.queue.complete(e);c<l;c++){var h=s[c];h.time<n||this.queue.event(e,s[c])}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var r=this.tracks[e];if(r!=null){this.queue.end(r),this.disposeNext(r);for(var n=r;;){var i=n.mixingFrom;if(i==null)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,r,n){var i=this.expandToIndex(e);this.tracks[e]=r,i!=null&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom!=null&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},t.prototype.setAnimation=function(e,r,n){var i=this.data.skeletonData.findAnimation(r);if(i==null)throw new Error("Animation not found: "+r);return this.setAnimationWith(e,i,n)},t.prototype.setAnimationWith=function(e,r,n){if(r==null)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(e);a!=null&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,i=!1):this.disposeNext(a));var o=this.trackEntry(e,r,n,a);return this.setCurrent(e,o,i),this.queue.drain(),o},t.prototype.addAnimation=function(e,r,n,i){var a=this.data.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);return this.addAnimationWith(e,a,n,i)},t.prototype.addAnimationWith=function(e,r,n,i){if(r==null)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(a!=null)for(;a.next!=null;)a=a.next;var o=this.trackEntry(e,r,n,a);if(a==null)this.setCurrent(e,o,!0),this.queue.drain();else if(a.next=o,i<=0){var s=a.animationEnd-a.animationStart;s!=0?(a.loop?i+=s*(1+(a.trackTime/s|0)):i+=Math.max(s,a.trackTime),i-=this.data.getMix(a.animation,r)):i=a.trackTime}return o.delay=i,o},t.prototype.setEmptyAnimation=function(e,r){var n=this.setAnimationWith(e,t.emptyAnimation,!1);return n.mixDuration=r,n.trackEnd=r,n},t.prototype.addEmptyAnimation=function(e,r,n){n<=0&&(n-=r);var i=this.addAnimationWith(e,t.emptyAnimation,!1,n);return i.mixDuration=r,i.trackEnd=r,i},t.prototype.setEmptyAnimations=function(e){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a!=null&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=r,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(Q.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,r,n,i){var a=this.trackEntryPool.obtain();return a.trackIndex=e,a.animation=r,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=i==null?0:this.data.getMix(i.animation,r),a},t.prototype.disposeNext=function(e){for(var r=e.next;r!=null;)this.queue.dispose(r),r=r.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,r=this.tracks.length;e<r;e++){var n=this.tracks[e];if(n!=null){for(;n.mixingFrom!=null;)n=n.mixingFrom;do(n.mixingFrom==null||n.mixBlend!=N.add)&&this.setTimelineModes(n),n=n.mixingTo;while(n!=null)}}},t.prototype.setTimelineModes=function(e){var r=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,a=Q.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var o=Q.setArraySize(e.timelineHoldMix,i),s=this.propertyIDs;if(r!=null&&r.holdPrevious){for(var c=0;c<i;c++)s.add(n[c].getPropertyId()),a[c]=t.HOLD;return}e:for(var c=0;c<i;c++){var l=n[c].getPropertyId();if(!s.add(l))a[c]=t.SUBSEQUENT;else if(r==null||!this.hasTimeline(r,l))a[c]=t.FIRST;else{for(var u=r.mixingTo;u!=null;u=u.mixingTo)if(!this.hasTimeline(u,l)){if(e.mixDuration>0){a[c]=t.HOLD_MIX,o[c]=u;continue e}break}a[c]=t.HOLD}}},t.prototype.hasTimeline=function(e,r){for(var n=e.animation.timelines,i=0,a=n.length;i<a;i++)if(n[i].getPropertyId()==r)return!0;return!1},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(e==null)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,r,n)},t.prototype.addAnimationByName=function(e,r,n,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,r,n,i)},t.prototype.hasAnimation=function(e){var r=this.data.skeletonData.findAnimation(e);return r!==null},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new Dr("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD=2,t.HOLD_MIX=3,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),G4=function(){function t(){this.mixBlend=N.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),z4=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(xn.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(xn.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(xn.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(xn.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(xn.complete),this.objects.push(e)},t.prototype.event=function(e,r){this.objects.push(xn.event),this.objects.push(e),this.objects.push(r)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];switch(i){case xn.start:a.listener!=null&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++)r[o].start&&r[o].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case xn.interrupt:a.listener!=null&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++)r[o].interrupt&&r[o].interrupt(a);break;case xn.end:a.listener!=null&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++)r[o].end&&r[o].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case xn.dispose:a.listener!=null&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++)r[o].dispose&&r[o].dispose(a);this.animState.trackEntryPool.free(a);break;case xn.complete:a.listener!=null&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++)r[o].complete&&r[o].complete(a);var s=G.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,s);break;case xn.event:var c=e[n+++2];a.listener!=null&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++)r[o].event&&r[o].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}(),xn;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(xn||(xn={}));var V_e=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,r){},t}(),W4=function(){function t(e){if(this.animationToMixTime={},this.defaultMix=0,e==null)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return t.prototype.setMix=function(e,r,n){var i=this.skeletonData.findAnimation(e);if(i==null)throw new Error("Animation not found: "+e);var a=this.skeletonData.findAnimation(r);if(a==null)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},t.prototype.setMixByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,r,n)},t.prototype.setMixWith=function(e,r,n){if(e==null)throw new Error("from cannot be null.");if(r==null)throw new Error("to cannot be null.");var i=e.name+"."+r.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(e,r){var n=e.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},t.deprecatedWarning1=!1,t}(),X4=function(){function t(e){this.atlas=e}return t.prototype.newRegionAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");var a=new Nw(r);return a.region=i,a},t.prototype.newMeshAttachment=function(e,r,n){var i=this.atlas.findRegion(n);if(i==null)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");var a=new Lw(r);return a.region=i,a},t.prototype.newBoundingBoxAttachment=function(e,r){return new D4(r)},t.prototype.newPathAttachment=function(e,r){return new If(r)},t.prototype.newPointAttachment=function(e,r){return new L4(r)},t.prototype.newClippingAttachment=function(e,r){return new M4(r)},t}(),H1=function(){function t(e,r,n){if(this.matrix=new Jt,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,r,n,i,a,o,s){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(c==null){var h=this.skeleton,d=n+90+s;l.a=G.cosDeg(n+o)*i*u,l.c=G.cosDeg(d)*a*u,l.b=G.sinDeg(n+o)*i*f,l.d=G.sinDeg(d)*a*f,l.tx=e*u+h.x,l.ty=r*f+h.y;return}var p=c.matrix.a,v=c.matrix.c,y=c.matrix.b,g=c.matrix.d;switch(l.tx=p*e+v*r+c.matrix.tx,l.ty=y*e+g*r+c.matrix.ty,this.data.transformMode){case ze.Normal:{var d=n+90+s,m=G.cosDeg(n+o)*i,x=G.cosDeg(d)*a,b=G.sinDeg(n+o)*i,_=G.sinDeg(d)*a;l.a=p*m+v*b,l.c=p*x+v*_,l.b=y*m+g*b,l.d=y*x+g*_;return}case ze.OnlyTranslation:{var d=n+90+s;l.a=G.cosDeg(n+o)*i,l.c=G.cosDeg(d)*a,l.b=G.sinDeg(n+o)*i,l.d=G.sinDeg(d)*a;break}case ze.NoRotationOrReflection:{var S=p*p+y*y,E=0;S>1e-4?(S=Math.abs(p*g-v*y)/S,v=y*S,g=p*S,E=Math.atan2(y,p)*G.radDeg):(p=0,y=0,E=90-Math.atan2(g,v)*G.radDeg);var w=n+o-E,C=n+s-E+90,m=G.cosDeg(w)*i,x=G.cosDeg(C)*a,b=G.sinDeg(w)*i,_=G.sinDeg(C)*a;l.a=p*m-v*b,l.c=p*x-v*_,l.b=y*m+g*b,l.d=y*x+g*_;break}case ze.NoScale:case ze.NoScaleOrReflection:{var A=G.cosDeg(n),P=G.sinDeg(n),T=(p*A+v*P)/u,O=(y*A+g*P)/f,S=Math.sqrt(T*T+O*O);S>1e-5&&(S=1/S),T*=S,O*=S,S=Math.sqrt(T*T+O*O),this.data.transformMode==ze.NoScale&&p*g-v*y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(S=-S);var R=Math.PI/2+Math.atan2(O,T),F=Math.cos(R)*S,D=Math.sin(R)*S,m=G.cosDeg(o)*i,x=G.cosDeg(90+s)*a,b=G.sinDeg(o)*i,_=G.sinDeg(90+s)*a;l.a=T*m+F*b,l.c=T*x+F*_,l.b=O*m+D*b,l.d=O*x+D*_;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*G.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*G.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.c*e.c)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.b*e.b+e.d*e.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,r=this.matrix;if(e==null){this.ax=r.tx,this.ay=r.ty,this.arotation=Math.atan2(r.b,r.a)*G.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*G.radDeg;return}var n=e.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,d=c*r.b-u*r.a,p=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+d*d),this.ascaleX>1e-4){var v=f*p-h*d;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(f*h+d*p,v)*G.radDeg,this.arotation=Math.atan2(d,f)*G.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*G.radDeg},t.prototype.worldToLocal=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=e.x-r.tx,l=e.y-r.ty;return e.x=c*o*s-l*i*s,e.y=l*n*s-c*a*s,e},t.prototype.localToWorld=function(e){var r=this.matrix,n=e.x,i=e.y;return e.x=n*r.a+i*r.c+r.tx,e.y=n*r.b+i*r.d+r.ty,e},t.prototype.worldToLocalRotation=function(e){var r=G.sinDeg(e),n=G.cosDeg(e),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*G.radDeg},t.prototype.localToWorldRotation=function(e){var r=G.sinDeg(e),n=G.cosDeg(e),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*G.radDeg},t.prototype.rotateWorld=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=G.cosDeg(e),c=G.sinDeg(e);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o,this.appliedValid=!1},t}(),H4=function(){function t(e,r,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ze.Normal,e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}return t}(),Y4=function(){function t(e,r){if(r==null)throw new Error("data cannot be null.");this.time=e,this.data=r}return t}(),q4=function(){function t(e){this.name=e}return t}(),K4=function(){function t(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.mix);break}},t.prototype.apply1=function(e,r,n,i,a,o,s){e.appliedValid||e.updateAppliedTransform();var c=e.parent.matrix,l=1/(c.a*c.d-c.b*c.c),u=r-c.tx,f=n-c.ty,h=(u*c.d-f*c.c)*l-e.ax,d=(f*c.a-u*c.b)*l-e.ay,p=Math.atan2(d,h)*G.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var v=e.ascaleX,y=e.ascaleY;if(i||a){var g=e.data.length*v,m=Math.sqrt(h*h+d*d);if(i&&m<g||a&&m>g&&g>1e-4){var x=(m/g-1)*s+1;v*=x,o&&(y*=x)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*s,v,y,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,r,n,i,a,o,s){if(s==0){r.updateWorldTransform();return}e.appliedValid||e.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var c=e.ax,l=e.ay,u=e.ascaleX,f=u,h=e.ascaleY,d=r.ascaleX,p=e.matrix,v=0,y=0,g=0;u<0?(u=-u,v=180,g=-1):(v=0,g=1),h<0&&(h=-h,g=-g),d<0?(d=-d,y=180):y=0;var m=r.ax,x=0,b=0,_=0,S=p.a,E=p.c,w=p.b,C=p.d,A=Math.abs(u-h)<=1e-4;A?(x=r.ay,b=S*m+E*x+p.tx,_=w*m+C*x+p.ty):(x=0,b=S*m+p.tx,_=w*m+p.ty);var P=e.parent.matrix;S=P.a,E=P.c,w=P.b,C=P.d;var T=1/(S*C-E*w),O=n-P.tx,R=i-P.ty,F=(O*C-R*E)*T-c,D=(R*S-O*w)*T-l,V=F*F+D*D;O=b-P.tx,R=_-P.ty;var Y=(O*C-R*E)*T-c,W=(R*S-O*w)*T-l,$=Math.sqrt(Y*Y+W*W),I=r.data.length*d,B=0,L=0;e:if(A){I*=u;var M=(V-$*$-I*I)/(2*$*I);M<-1?M=-1:M>1&&(M=1,o&&$+I>1e-4&&(f*=(Math.sqrt(V)/($+I)-1)*s+1)),L=Math.acos(M)*a,S=$+I*M,E=I*Math.sin(L),B=Math.atan2(D*S-F*E,F*S+D*E)}else{S=u*I,E=h*I;var X=S*S,K=E*E,ne=Math.atan2(D,F);w=K*$*$+X*V-X*K;var te=-2*K*$,ce=K-X;if(C=te*te-4*ce*w,C>=0){var de=Math.sqrt(C);te<0&&(de=-de),de=-(te+de)/2;var se=de/ce,fe=w/de,oe=Math.abs(se)<Math.abs(fe)?se:fe;if(oe*oe<=V){R=Math.sqrt(V-oe*oe)*a,B=ne-Math.atan2(R,oe),L=Math.atan2(R/h,(oe-$)/u);break e}}var he=G.PI,Pe=$-S,Ie=Pe*Pe,Ee=0,Be=0,qe=$+S,rt=qe*qe,Xe=0;w=-S*$/(X-K),w>=-1&&w<=1&&(w=Math.acos(w),O=S*Math.cos(w)+$,R=E*Math.sin(w),C=O*O+R*R,C<Ie&&(he=w,Ie=C,Pe=O,Ee=R),C>rt&&(Be=w,rt=C,qe=O,Xe=R)),V<=(Ie+rt)/2?(B=ne-Math.atan2(Ee*a,Pe),L=he*a):(B=ne-Math.atan2(Xe*a,qe),L=Be*a)}var Ge=Math.atan2(x,m)*g,Qe=e.arotation;B=(B-Ge)*G.radDeg+v-Qe,B>180?B-=360:B<-180&&(B+=360),e.updateWorldTransformWith(c,l,Qe+B*s,f,e.ascaleY,0,0),Qe=r.arotation,L=((L+Ge)*G.radDeg-r.ashearX)*g+y-Qe,L>180?L-=360:L<-180&&(L+=360),r.updateWorldTransformWith(m,x,Qe+L*s,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},t}(),Z4=function(){function t(e){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=e}return t}(),Q4=function(){function t(e){this.order=0,this.bones=new Array,this.name=e}return t}(),ai;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"})(ai||(ai={}));var J4=function(){function t(e,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,i=e.bones.length;n<i;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof If){var r=this.rotateMix,n=this.translateMix,i=n>0,a=r>0;if(!(!i&&!a)){var o=this.data,s=o.spacingMode,c=s==ai.Length,l=o.rotateMode,u=l==nr.Tangent,f=l==nr.ChainScale,h=this.bones.length,d=u?h:h+1,p=this.bones,v=Q.setArraySize(this.spaces,d),y=null,g=this.spacing;if(f||c){f&&(y=Q.setArraySize(this.lengths,h));for(var m=0,x=d-1;m<x;){var b=p[m],_=b.data.length;if(_<t.epsilon)f&&(y[m]=0),v[++m]=0;else{var S=_*b.matrix.a,E=_*b.matrix.b,w=Math.sqrt(S*S+E*E);f&&(y[m]=w),v[++m]=(c?_+g:g)*w/_}}}else for(var m=1;m<d;m++)v[m]=g;var C=this.computeWorldPositions(e,d,u,o.positionMode==Wt.Percent,s==ai.Percent),A=C[0],P=C[1],T=o.offsetRotation,O=!1;if(T==0)O=l==nr.Chain;else{O=!1;var R=this.target.bone.matrix;T*=R.a*R.d-R.b*R.c>0?G.degRad:-G.degRad}for(var m=0,R=3;m<h;m++,R+=3){var b=p[m],F=b.matrix;F.tx+=(A-F.tx)*n,F.ty+=(P-F.ty)*n;var S=C[R],E=C[R+1],D=S-A,V=E-P;if(f){var Y=y[m];if(Y!=0){var W=(Math.sqrt(D*D+V*V)/Y-1)*r+1;F.a*=W,F.b*=W}}if(A=S,P=E,a){var $=F.a,I=F.c,B=F.b,L=F.d,M=0,X=0,K=0;if(u?M=C[R-1]:v[m+1]==0?M=C[R+2]:M=Math.atan2(V,D),M-=Math.atan2(B,$),O){X=Math.cos(M),K=Math.sin(M);var ne=b.data.length;A+=(ne*(X*$-K*B)-D)*r,P+=(ne*(K*$+X*B)-V)*r}else M+=T;M>G.PI?M-=G.PI2:M<-G.PI&&(M+=G.PI2),M*=r,X=Math.cos(M),K=Math.sin(M),F.a=X*$-K*B,F.c=X*I-K*L,F.b=K*$+X*B,F.d=K*I+X*L}b.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,r,n,i,a){var o=this.target,s=this.position,c=this.spaces,l=Q.setArraySize(this.positions,r*3+2),u=null,f=e.closed,h=e.worldVerticesLength,d=h/6,p=t.NONE;if(!e.constantSpeed){var v=e.lengths;d-=f?1:2;var y=v[d];if(i&&(s*=y),a)for(var g=0;g<r;g++)c[g]*=y;u=Q.setArraySize(this.world,8);for(var g=0,m=0,x=0;g<r;g++,m+=3){var b=c[g];s+=b;var _=s;if(f)_%=y,_<0&&(_+=y),x=0;else if(_<0){p!=t.BEFORE&&(p=t.BEFORE,e.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(_,u,0,l,m);continue}else if(_>y){p!=t.AFTER&&(p=t.AFTER,e.computeWorldVertices(o,h-6,4,u,0,2)),this.addAfterPosition(_-y,u,0,l,m);continue}for(;;x++){var S=v[x];if(!(_>S)){if(x==0)_/=S;else{var E=v[x-1];_=(_-E)/(S-E)}break}}x!=p&&(p=x,f&&x==d?(e.computeWorldVertices(o,h-4,4,u,0,2),e.computeWorldVertices(o,0,4,u,4,2)):e.computeWorldVertices(o,x*6+2,8,u,0,2)),this.addCurvePosition(_,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,m,n||g>0&&b==0)}return l}f?(h+=2,u=Q.setArraySize(this.world,h),e.computeWorldVertices(o,2,h-4,u,0,2),e.computeWorldVertices(o,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(d--,h-=4,u=Q.setArraySize(this.world,h),e.computeWorldVertices(o,2,h,u,0,2));for(var w=Q.setArraySize(this.curves,d),C=0,A=u[0],P=u[1],T=0,O=0,R=0,F=0,D=0,V=0,Y=0,W=0,$=0,I=0,B=0,L=0,M=0,X=0,g=0,K=2;g<d;g++,K+=6)T=u[K],O=u[K+1],R=u[K+2],F=u[K+3],D=u[K+4],V=u[K+5],Y=(A-T*2+R)*.1875,W=(P-O*2+F)*.1875,$=((T-R)*3-A+D)*.09375,I=((O-F)*3-P+V)*.09375,B=Y*2+$,L=W*2+I,M=(T-A)*.75+Y+$*.16666667,X=(O-P)*.75+W+I*.16666667,C+=Math.sqrt(M*M+X*X),M+=B,X+=L,B+=$,L+=I,C+=Math.sqrt(M*M+X*X),M+=B,X+=L,C+=Math.sqrt(M*M+X*X),M+=B+$,X+=L+I,C+=Math.sqrt(M*M+X*X),w[g]=C,A=D,P=V;if(i&&(s*=C),a)for(var g=0;g<r;g++)c[g]*=C;for(var ne=this.segments,te=0,g=0,m=0,x=0,ce=0;g<r;g++,m+=3){var b=c[g];s+=b;var _=s;if(f)_%=C,_<0&&(_+=C),x=0;else if(_<0){this.addBeforePosition(_,u,0,l,m);continue}else if(_>C){this.addAfterPosition(_-C,u,h-4,l,m);continue}for(;;x++){var de=w[x];if(!(_>de)){if(x==0)_/=de;else{var E=w[x-1];_=(_-E)/(de-E)}break}}if(x!=p){p=x;var se=x*6;for(A=u[se],P=u[se+1],T=u[se+2],O=u[se+3],R=u[se+4],F=u[se+5],D=u[se+6],V=u[se+7],Y=(A-T*2+R)*.03,W=(P-O*2+F)*.03,$=((T-R)*3-A+D)*.006,I=((O-F)*3-P+V)*.006,B=Y*2+$,L=W*2+I,M=(T-A)*.3+Y+$*.16666667,X=(O-P)*.3+W+I*.16666667,te=Math.sqrt(M*M+X*X),ne[0]=te,se=1;se<8;se++)M+=B,X+=L,B+=$,L+=I,te+=Math.sqrt(M*M+X*X),ne[se]=te;M+=B,X+=L,te+=Math.sqrt(M*M+X*X),ne[8]=te,M+=B+$,X+=L+I,te+=Math.sqrt(M*M+X*X),ne[9]=te,ce=0}for(_*=te;;ce++){var fe=ne[ce];if(!(_>fe)){if(ce==0)_/=fe;else{var E=ne[ce-1];_=ce+(_-E)/(fe-E)}break}}this.addCurvePosition(_*.1,A,P,T,O,R,F,D,V,l,m,n||g>0&&b==0)}return l},t.prototype.addBeforePosition=function(e,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addAfterPosition=function(e,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addCurvePosition=function(e,r,n,i,a,o,s,c,l,u,f,h){(e==0||isNaN(e))&&(e=1e-4);var d=e*e,p=d*e,v=1-e,y=v*v,g=y*v,m=v*e,x=m*3,b=v*x,_=x*e,S=r*g+i*b+o*_+c*p,E=n*g+a*b+s*_+l*p;u[f]=S,u[f+1]=E,h&&(u[f+2]=Math.atan2(E-(n*y+a*m*2+s*d),S-(r*y+i*m*2+o*d)))},t.prototype.getOrder=function(){return this.data.order},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),eN=function(){function t(e,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new wf,e==null)throw new Error("data cannot be null.");if(r==null)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(r.findBone(e.bones[n].name));this.target=r.findBone(e.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?G.degRad:-G.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var g=p[v],m=!1,x=g.matrix;if(e!=0){var b=x.a,_=x.c,S=x.b,E=x.d,w=Math.atan2(l,s)-Math.atan2(S,b)+h;w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2),w*=e;var C=Math.cos(w),A=Math.sin(w);x.a=C*b-A*S,x.c=C*_-A*E,x.b=A*b+C*S,x.d=A*_+C*E,m=!0}if(r!=0){var P=this.temp;a.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),x.tx+=(P.x-x.tx)*r,x.ty+=(P.y-x.ty)*r,m=!0}if(n>0){var T=Math.sqrt(x.a*x.a+x.b*x.b),O=Math.sqrt(s*s+l*l);T>1e-5&&(T=(T+(O-T+this.data.offsetScaleX)*n)/T),x.a*=T,x.b*=T,T=Math.sqrt(x.c*x.c+x.d*x.d),O=Math.sqrt(c*c+u*u),T>1e-5&&(T=(T+(O-T+this.data.offsetScaleY)*n)/T),x.c*=T,x.d*=T,m=!0}if(i>0){var _=x.c,E=x.d,R=Math.atan2(E,_),w=Math.atan2(u,c)-Math.atan2(l,s)-(R-Math.atan2(x.b,x.a));w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2),w=R+(w+d)*i;var T=Math.sqrt(_*_+E*E);x.c=Math.cos(w)*T,x.d=Math.sin(w)*T,m=!0}m&&(g.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target,o=a.matrix,s=o.a,c=o.c,l=o.b,u=o.d,f=s*u-c*l>0?G.degRad:-G.degRad,h=this.data.offsetRotation*f,d=this.data.offsetShearY*f,p=this.bones,v=0,y=p.length;v<y;v++){var g=p[v],m=!1,x=g.matrix;if(e!=0){var b=x.a,_=x.c,S=x.b,E=x.d,w=Math.atan2(l,s)+h;w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2),w*=e;var C=Math.cos(w),A=Math.sin(w);x.a=C*b-A*S,x.c=C*_-A*E,x.b=A*b+C*S,x.d=A*_+C*E,m=!0}if(r!=0){var P=this.temp;a.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),x.tx+=P.x*r,x.ty+=P.y*r,m=!0}if(n>0){var T=(Math.sqrt(s*s+l*l)-1+this.data.offsetScaleX)*n+1;x.a*=T,x.b*=T,T=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*n+1,x.c*=T,x.d*=T,m=!0}if(i>0){var w=Math.atan2(u,c)-Math.atan2(l,s);w>G.PI?w-=G.PI2:w<-G.PI&&(w+=G.PI2);var _=x.c,E=x.d;w=Math.atan2(E,_)+(w-G.PI/2+d)*i;var T=Math.sqrt(_*_+E*E);x.c=Math.cos(w)*T,x.d=Math.sin(w)*T,m=!0}m&&(g.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(e!=0){var f=a.arotation-u+this.data.offsetRotation;f-=(16384-(16384.499999999996-f/360|0))*360,u+=f*e}var h=l.ax,d=l.ay;r!=0&&(h+=(a.ax-h+this.data.offsetX)*r,d+=(a.ay-d+this.data.offsetY)*r);var p=l.ascaleX,v=l.ascaleY;n>0&&(p>1e-5&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*n)/p),v>1e-5&&(v=(v+(a.ascaleY-v+this.data.offsetScaleY)*n)/v));var y=l.ashearY;if(i>0){var f=a.ashearY-y+this.data.offsetShearY;f-=(16384-(16384.499999999996-f/360|0))*360,l.shearY+=f*i}l.updateWorldTransformWith(h,d,u,p,v,l.ashearX,y)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,r=this.translateMix,n=this.scaleMix,i=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var o=this.bones,s=0,c=o.length;s<c;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;e!=0&&(u+=(a.arotation+this.data.offsetRotation)*e);var f=l.ax,h=l.ay;r!=0&&(f+=(a.ax+this.data.offsetX)*r,h+=(a.ay+this.data.offsetY)*r);var d=l.ascaleX,p=l.ascaleY;n>0&&(d>1e-5&&(d*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var v=l.ashearY;i>0&&(v+=(a.ashearY+this.data.offsetShearY)*i),l.updateWorldTransformWith(f,h,u,d,p,l.ashearX,v)}},t.prototype.getOrder=function(){return this.data.order},t}(),tN=function(){function t(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,e==null)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var n=e.bones[r],i=void 0;if(n.parent==null)i=new H1(n,this,null);else{var a=this.bones[n.parent.index];i=new H1(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<e.slots.length;r++){var o=e.slots[r],i=this.bones[o.boneData.index],s=new Bw(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<e.ikConstraints.length;r++){var c=e.ikConstraints[r];this.ikConstraints.push(new K4(c,this))}this.transformConstraints=new Array;for(var r=0;r<e.transformConstraints.length;r++){var l=e.transformConstraints[r];this.transformConstraints.push(new eN(l,this))}this.pathConstraints=new Array;for(var r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new J4(u,this))}this.color=new _e(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var e=this._updateCache;e.length=0,this.updateCacheReset.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++)r[n].sorted=!1;var a=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,c=a.length,l=o.length,u=s.length,f=c+l+u;e:for(var n=0;n<f;n++){for(var h=0;h<c;h++){var d=a[h];if(d.data.order==n){this.sortIkConstraint(d);continue e}}for(var h=0;h<l;h++){var d=o[h];if(d.data.order==n){this.sortTransformConstraint(d);continue e}}for(var h=0;h<u;h++){var d=s[h];if(d.data.order==n){this.sortPathConstraint(d);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},t.prototype.sortIkConstraint=function(e){var r=e.target;this.sortBone(r);var n=e.bones,i=n[0];if(this.sortBone(i),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(e),this.sortReset(i.children),n[n.length-1].sorted=!0},t.prototype.sortPathConstraint=function(e){var r=e.target,n=r.data.index,i=r.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof If&&this.sortPathConstraintAttachmentWith(s,i);for(var c=e.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(e);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0},t.prototype.sortTransformConstraint=function(e){this.sortBone(e.target);var r=e.bones,n=r.length;if(e.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var o=0;o<n;o++)this.sortReset(r[o].children);for(var o=0;o<n;o++)r[o].sorted=!0},t.prototype.sortPathConstraintAttachment=function(e,r,n){var i=e.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},t.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof If){var n=e.bones;if(n==null)this.sortBone(r);else for(var i=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var c=n[a];this.sortBone(i[c])}}},t.prototype.sortBone=function(e){if(!e.sorted){var r=e.parent;r!=null&&this.sortBone(r),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var r=0,n=e.length;r<n;r++){var i=e[r];i.sorted&&this.sortReset(i.children),i.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,r=0,n=e.length;r<n;r++){var i=e[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++)e[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.bendDirection=a.data.bendDirection,a.mix=a.data.mix}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;Q.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,n=e.length;r<n;r++)e[r].setToSetupPose()},t.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var r=this.data.findSkin(e);if(r==null)throw new Error("Skin not found: "+e);this.setSkin(r)},t.prototype.setSkin=function(e){if(e!=null)if(this.skin!=null)e.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o!=null){var s=e.getAttachment(n,o);s!=null&&a.setAttachment(s)}}this.skin=e},t.prototype.getAttachmentByName=function(e,r){return this.getAttachment(this.data.findSlotIndex(e),r)},t.prototype.getAttachment=function(e,r){if(r==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){var n=this.skin.getAttachment(e,r);if(n!=null)return n}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(e,r):null},t.prototype.setAttachment=function(e,r){if(e==null)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==e){var s=null;if(r!=null&&(s=this.getAttachment(i,r),s==null))throw new Error("Attachment not found: "+r+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.getBounds=function(e,r,n){if(e==null)throw new Error("offset cannot be null.");if(r==null)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l],h=0,d=null,p=f.getAttachment();if(p instanceof Nw)h=8,d=Q.setArraySize(n,h,0),p.computeWorldVertices(f.bone,d,0,2);else if(p instanceof Lw){var v=p;h=v.worldVerticesLength,d=Q.setArraySize(n,h,0),v.computeWorldVertices(f,0,h,d,0,2)}if(d!=null)for(var y=0,g=d.length;y<g;y+=2){var m=d[y],x=d[y+1];a=Math.min(a,m),o=Math.min(o,x),s=Math.max(s,m),c=Math.max(c,x)}}e.set(a,o),r.set(s-a,c-o)},t.prototype.update=function(e){this.time+=e},Object.defineProperty(t.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),G_e=function(t){yr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(yw),rN=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(e==null)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSlot=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(e==null)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSkin=function(e){if(e==null)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findEvent=function(e){if(e==null)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findAnimation=function(e){if(e==null)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findIkConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(e==null)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraintIndex=function(e){if(e==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t}(),nN=function(){function t(e,r,n){if(this.color=new _e(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(r==null)throw new Error("name cannot be null.");if(n==null)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}return t}(),iN=function(){function t(e){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,e==null)throw new Error("name cannot be null.");this.name=e}return t}(),aN=function(){function t(e){if(this.attachments=new Array,e==null)throw new Error("name cannot be null.");this.name=e}return t.prototype.addAttachment=function(e,r,n){if(n==null)throw new Error("attachment cannot be null.");var i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][r]=n},t.prototype.getAttachment=function(e,r){var n=this.attachments[e];return n?n[r]:null},t.prototype.attachAll=function(e,r){for(var n=0,i=0;i<e.slots.length;i++){var a=e.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u!=null&&a.setAttachment(u);break}}}n++}},t}(),oN=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new rN,i=typeof e=="string"?JSON.parse(e):e,a=i.skeleton;if(a!=null&&(n.hash=a.hash,n.version=a.spine,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images),i.bones)for(var o=0;o<i.bones.length;o++){var s=i.bones[o],c=null,l=this.getValue(s,"parent",null);if(l!=null&&(c=n.findBone(l),c==null))throw new Error("Parent bone not found: "+l);var u=new H4(n.bones.length,s.name,c);u.length=this.getValue(s,"length",0)*r,u.x=this.getValue(s,"x",0)*r,u.y=this.getValue(s,"y",0)*r,u.rotation=this.getValue(s,"rotation",0),u.scaleX=this.getValue(s,"scaleX",1),u.scaleY=this.getValue(s,"scaleY",1),u.shearX=this.getValue(s,"shearX",0),u.shearY=this.getValue(s,"shearY",0),u.transformMode=t.transformModeFromString(this.getValue(s,"transform","normal")),n.bones.push(u)}if(i.slots)for(var o=0;o<i.slots.length;o++){var f=i.slots[o],h=f.name,d=f.bone,p=n.findBone(d);if(p==null)throw new Error("Slot bone not found: "+d);var u=new nN(n.slots.length,h,p),v=this.getValue(f,"color",null);v!=null&&u.color.setFromString(v);var y=this.getValue(f,"dark",null);y!=null&&(u.darkColor=new _e(1,1,1,1),u.darkColor.setFromString(y)),u.attachmentName=this.getValue(f,"attachment",null),u.blendMode=t.blendModeFromString(this.getValue(f,"blend","normal")),n.slots.push(u)}if(i.ik)for(var o=0;o<i.ik.length;o++){var g=i.ik[o],u=new Z4(g.name);u.order=this.getValue(g,"order",0);for(var m=0;m<g.bones.length;m++){var d=g.bones[m],x=n.findBone(d);if(x==null)throw new Error("IK bone not found: "+d);u.bones.push(x)}var b=g.target;if(u.target=n.findBone(b),u.target==null)throw new Error("IK target bone not found: "+b);u.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,u.mix=this.getValue(g,"mix",1),n.ikConstraints.push(u)}if(i.transform)for(var o=0;o<i.transform.length;o++){var g=i.transform[o],u=new iN(g.name);u.order=this.getValue(g,"order",0);for(var m=0;m<g.bones.length;m++){var d=g.bones[m],x=n.findBone(d);if(x==null)throw new Error("Transform constraint bone not found: "+d);u.bones.push(x)}var b=g.target;if(u.target=n.findBone(b),u.target==null)throw new Error("Transform constraint target bone not found: "+b);u.local=this.getValue(g,"local",!1),u.relative=this.getValue(g,"relative",!1),u.offsetRotation=this.getValue(g,"rotation",0),u.offsetX=this.getValue(g,"x",0)*r,u.offsetY=this.getValue(g,"y",0)*r,u.offsetScaleX=this.getValue(g,"scaleX",0),u.offsetScaleY=this.getValue(g,"scaleY",0),u.offsetShearY=this.getValue(g,"shearY",0),u.rotateMix=this.getValue(g,"rotateMix",1),u.translateMix=this.getValue(g,"translateMix",1),u.scaleMix=this.getValue(g,"scaleMix",1),u.shearMix=this.getValue(g,"shearMix",1),n.transformConstraints.push(u)}if(i.path)for(var o=0;o<i.path.length;o++){var g=i.path[o],u=new Q4(g.name);u.order=this.getValue(g,"order",0);for(var m=0;m<g.bones.length;m++){var d=g.bones[m],x=n.findBone(d);if(x==null)throw new Error("Transform constraint bone not found: "+d);u.bones.push(x)}var b=g.target;if(u.target=n.findSlot(b),u.target==null)throw new Error("Path target slot not found: "+b);u.positionMode=t.positionModeFromString(this.getValue(g,"positionMode","percent")),u.spacingMode=t.spacingModeFromString(this.getValue(g,"spacingMode","length")),u.rotateMode=t.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),u.offsetRotation=this.getValue(g,"rotation",0),u.position=this.getValue(g,"position",0),u.positionMode==Wt.Fixed&&(u.position*=r),u.spacing=this.getValue(g,"spacing",0),(u.spacingMode==ai.Length||u.spacingMode==ai.Fixed)&&(u.spacing*=r),u.rotateMix=this.getValue(g,"rotateMix",1),u.translateMix=this.getValue(g,"translateMix",1),n.pathConstraints.push(u)}if(i.skins)for(var _ in i.skins){var S=i.skins[_],E=new aN(_);for(var h in S){var w=n.findSlotIndex(h);if(w==-1)throw new Error("Slot not found: "+h);var f=S[h];for(var C in f){var A=this.readAttachment(f[C],E,w,C,n);A!=null&&E.addAttachment(w,C,A)}}n.skins.push(E),E.name=="default"&&(n.defaultSkin=E)}for(var o=0,P=this.linkedMeshes.length;o<P;o++){var T=this.linkedMeshes[o],E=T.skin==null?n.defaultSkin:n.findSkin(T.skin);if(E==null)throw new Error("Skin not found: "+T.skin);var O=E.getAttachment(T.slotIndex,T.parent);if(O==null)throw new Error("Parent mesh not found: "+T.parent);T.mesh.setParentMesh(O)}if(this.linkedMeshes.length=0,i.events)for(var R in i.events){var F=i.events[R],u=new q4(R);u.intValue=this.getValue(F,"int",0),u.floatValue=this.getValue(F,"float",0),u.stringValue=this.getValue(F,"string",""),u.audioPath=this.getValue(F,"audio",null),u.audioPath!=null&&(u.volume=this.getValue(F,"volume",1),u.balance=this.getValue(F,"balance",0)),n.events.push(u)}if(i.animations)for(var D in i.animations){var V=i.animations[D];this.readAnimation(V,D,n)}return n},t.prototype.readAttachment=function(e,r,n,i,a){var o=this.scale;i=this.getValue(e,"name",i);var s=this.getValue(e,"type","region");switch(s){case"region":{var c=this.getValue(e,"path",i),l=this.attachmentLoader.newRegionAttachment(r,i,c);if(l==null)return null;l.path=c,l.x=this.getValue(e,"x",0)*o,l.y=this.getValue(e,"y",0)*o,l.scaleX=this.getValue(e,"scaleX",1),l.scaleY=this.getValue(e,"scaleY",1),l.rotation=this.getValue(e,"rotation",0),l.width=e.width*o,l.height=e.height*o;var u=this.getValue(e,"color",null);return u!=null&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(f==null)return null;this.readVertices(e,f,e.vertexCount<<1);var u=this.getValue(e,"color",null);return u!=null&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var c=this.getValue(e,"path",i),h=this.attachmentLoader.newMeshAttachment(r,i,c);if(h==null)return null;h.path=c;var u=this.getValue(e,"color",null);u!=null&&h.color.setFromString(u);var d=this.getValue(e,"parent",null);if(d!=null)return h.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new z_e(h,this.getValue(e,"skin",null),n,d)),h;var p=e.uvs;return this.readVertices(e,h,p.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(p),h.hullLength=this.getValue(e,"hull",0)*2,h}case"path":{var c=this.attachmentLoader.newPathAttachment(r,i);if(c==null)return null;c.closed=this.getValue(e,"closed",!1),c.constantSpeed=this.getValue(e,"constantSpeed",!0);var v=e.vertexCount;this.readVertices(e,c,v<<1);for(var y=Q.newArray(v/3,0),g=0;g<e.lengths.length;g++)y[g]=e.lengths[g]*o;c.lengths=y;var u=this.getValue(e,"color",null);return u!=null&&c.color.setFromString(u),c}case"point":{var m=this.attachmentLoader.newPointAttachment(r,i);if(m==null)return null;m.x=this.getValue(e,"x",0)*o,m.y=this.getValue(e,"y",0)*o,m.rotation=this.getValue(e,"rotation",0);var u=this.getValue(e,"color",null);return u!=null&&m.color.setFromString(u),m}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(r,i);if(x==null)return null;var b=this.getValue(e,"end",null);if(b!=null){var _=a.findSlot(b);if(_==null)throw new Error("Clipping end slot not found: "+b);x.endSlot=_}var v=e.vertexCount;this.readVertices(e,x,v<<1);var u=this.getValue(e,"color",null);return u!=null&&x.color.setFromString(u),x}}return null},t.prototype.readVertices=function(e,r,n){var i=this.scale;r.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=Q.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=Q.toFloatArray(l)},t.prototype.readAnimation=function(e,r,n){var i=this.scale,a=new Array,o=0;if(e.slots)for(var s in e.slots){var c=e.slots[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+s);for(var u in c){var f=c[u];if(u=="attachment"){var h=new Ip(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d++,v.time,v.name)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}else if(u=="color"){var h=new V1(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],y=new _e;y.setFromString(v.color||"ffffffff"),h.setFrame(d,v.time,y.r,y.g,y.b,y.a),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*V1.ENTRIES])}else if(u=="twoColor"){var h=new G1(f.length);h.slotIndex=l;for(var d=0,p=0;p<f.length;p++){var v=f[p],g=new _e,m=new _e;g.setFromString(v.light),m.setFromString(v.dark),h.setFrame(d,v.time,g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*G1.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+u+" ("+s+")")}}if(e.bones)for(var x in e.bones){var b=e.bones[x],_=n.findBoneIndex(x);if(_==-1)throw new Error("Bone not found: "+x);for(var u in b){var f=b[u];if(u==="rotate"){var h=new Ti(f.length);h.boneIndex=_;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,v.time,v.angle),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Ti.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){var h=null,S=1;u==="scale"?h=new B4(f.length):u==="shear"?h=new N4(f.length):(h=new Ff(f.length),S=i),h.boneIndex=_;for(var d=0,p=0;p<f.length;p++){var v=f[p],E=this.getValue(v,"x",0),w=this.getValue(v,"y",0);h.setFrame(d,v.time,E*S,w*S),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*Ff.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+u+" ("+x+")")}}if(e.ik)for(var C in e.ik){var A=e.ik[C],P=n.findIkConstraint(C),h=new z1(A.length);h.ikConstraintIndex=n.ikConstraints.indexOf(P);for(var d=0,p=0;p<A.length;p++){var v=A[p];h.setFrame(d,v.time,this.getValue(v,"mix",1),this.getValue(v,"bendPositive",!0)?1:-1,this.getValue(v,"compress",!1),this.getValue(v,"stretch",!1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*z1.ENTRIES])}if(e.transform)for(var C in e.transform){var A=e.transform[C],P=n.findTransformConstraint(C),h=new W1(A.length);h.transformConstraintIndex=n.transformConstraints.indexOf(P);for(var d=0,p=0;p<A.length;p++){var v=A[p];h.setFrame(d,v.time,this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1),this.getValue(v,"scaleMix",1),this.getValue(v,"shearMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*W1.ENTRIES])}if(e.paths)for(var C in e.paths){var A=e.paths[C],T=n.findPathConstraintIndex(C);if(T==-1)throw new Error("Path constraint not found: "+C);var O=n.pathConstraints[T];for(var u in A){var f=A[u];if(u==="position"||u==="spacing"){var h=null,S=1;u==="spacing"?(h=new $4(f.length),(O.spacingMode==ai.Length||O.spacingMode==ai.Fixed)&&(S=i)):(h=new kp(f.length),O.positionMode==Wt.Fixed&&(S=i)),h.pathConstraintIndex=T;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,v.time,this.getValue(v,u,0)*S),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*kp.ENTRIES])}else if(u==="mix"){var h=new X1(f.length);h.pathConstraintIndex=T;for(var d=0,p=0;p<f.length;p++){var v=f[p];h.setFrame(d,v.time,this.getValue(v,"rotateMix",1),this.getValue(v,"translateMix",1)),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[(h.getFrameCount()-1)*X1.ENTRIES])}}}if(e.deform)for(var R in e.deform){var F=e.deform[R],D=n.findSkin(R);if(D!=null)for(var s in F){var c=F[s],l=n.findSlotIndex(s);if(l==-1)throw new Error("Slot not found: "+c.name);for(var u in c){var f=c[u],V=D.getAttachment(l,u);if(V==null)throw new Error("Deform attachment not found: "+f.name);var Y=V.bones!=null,W=V.vertices,$=Y?W.length/3*2:W.length,h=new j4(f.length);h.slotIndex=l,h.attachment=V;for(var d=0,I=0;I<f.length;I++){var v=f[I],B=void 0,L=this.getValue(v,"vertices",null);if(L==null)B=Y?Q.newFloatArray($):W;else{B=Q.newFloatArray($);var M=this.getValue(v,"offset",0);if(Q.arrayCopy(L,0,B,M,L.length),i!=1)for(var p=M,X=p+L.length;p<X;p++)B[p]*=i;if(!Y)for(var p=0;p<$;p++)B[p]+=W[p]}h.setFrame(d,v.time,B),this.readCurve(v,h,d),d++}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}}}var K=e.drawOrder;if(K==null&&(K=e.draworder),K!=null){for(var h=new Fp(K.length),ne=n.slots.length,d=0,I=0;I<K.length;I++){var te=K[I],ce=null,de=this.getValue(te,"offsets",null);if(de!=null){ce=Q.newArray(ne,-1);for(var se=Q.newArray(ne-de.length,0),fe=0,oe=0,p=0;p<de.length;p++){var he=de[p],l=n.findSlotIndex(he.slot);if(l==-1)throw new Error("Slot not found: "+he.slot);for(;fe!=l;)se[oe++]=fe++;ce[fe+he.offset]=fe++}for(;fe<ne;)se[oe++]=fe++;for(var p=ne-1;p>=0;p--)ce[p]==-1&&(ce[p]=se[--oe])}h.setFrame(d++,te.time,ce)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(e.events){for(var h=new U4(e.events.length),d=0,p=0;p<e.events.length;p++){var Pe=e.events[p],Ie=n.findEvent(Pe.name);if(Ie==null)throw new Error("Event not found: "+Pe.name);var Ee=new Y4(Q.toSinglePrecision(Pe.time),Ie);Ee.intValue=this.getValue(Pe,"int",Ie.intValue),Ee.floatValue=this.getValue(Pe,"float",Ie.floatValue),Ee.stringValue=this.getValue(Pe,"string",Ie.stringValue),Ee.data.audioPath!=null&&(Ee.volume=this.getValue(Pe,"volume",1),Ee.balance=this.getValue(Pe,"balance",0)),h.setFrame(d++,Ee)}a.push(h),o=Math.max(o,h.frames[h.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new Dr(r,a,o))},t.prototype.readCurve=function(e,r,n){if(e.curve){if(e.curve==="stepped")r.setStepped(n);else if(Object.prototype.toString.call(e.curve)==="[object Array]"){var i=e.curve;r.setCurve(n,i[0],i[1],i[2],i[3])}}},t.prototype.getValue=function(e,r,n){return e[r]!==void 0?e[r]:n},t.blendModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return Ce.NORMAL;if(e=="additive")return Ce.ADD;if(e=="multiply")return Ce.MULTIPLY;if(e=="screen")return Ce.SCREEN;throw new Error("Unknown blend mode: "+e)},t.positionModeFromString=function(e){if(e=e.toLowerCase(),e=="fixed")return Wt.Fixed;if(e=="percent")return Wt.Percent;throw new Error("Unknown position mode: "+e)},t.spacingModeFromString=function(e){if(e=e.toLowerCase(),e=="length")return ai.Length;if(e=="fixed")return ai.Fixed;if(e=="percent")return ai.Percent;throw new Error("Unknown position mode: "+e)},t.rotateModeFromString=function(e){if(e=e.toLowerCase(),e=="tangent")return nr.Tangent;if(e=="chain")return nr.Chain;if(e=="chainscale")return nr.ChainScale;throw new Error("Unknown rotate mode: "+e)},t.transformModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return ze.Normal;if(e=="onlytranslation")return ze.OnlyTranslation;if(e=="norotationorreflection")return ze.NoRotationOrReflection;if(e=="noscale")return ze.NoScale;if(e=="noscaleorreflection")return ze.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},t}(),z_e=function(){function t(e,r,n,i){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i}return t}(),W_e=function(t){yr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){this.skeleton=new tN(r),this.skeleton.updateWorldTransform(),this.stateData=new W4(r),this.state=new V4(this.stateData)},e}(nh);const X_e=Object.freeze(Object.defineProperty({__proto__:null,Animation:Dr,AnimationState:V4,AnimationStateAdapter2:V_e,AnimationStateData:W4,AtlasAttachmentLoader:X4,Attachment:Mw,AttachmentTimeline:Ip,Bone:H1,BoneData:H4,BoundingBoxAttachment:D4,ClippingAttachment:M4,ColorTimeline:V1,CurveTimeline:ya,DeformTimeline:j4,DrawOrderTimeline:Fp,Event:Y4,EventData:q4,EventQueue:z4,EventTimeline:U4,get EventType(){return xn},IkConstraint:K4,IkConstraintData:Z4,IkConstraintTimeline:z1,JitterEffect:U_e,MeshAttachment:Lw,PathAttachment:If,PathConstraint:J4,PathConstraintData:Q4,PathConstraintMixTimeline:X1,PathConstraintPositionTimeline:kp,PathConstraintSpacingTimeline:$4,PointAttachment:L4,RegionAttachment:Nw,RotateTimeline:Ti,ScaleTimeline:B4,ShearTimeline:N4,Skeleton:tN,SkeletonBounds:G_e,SkeletonData:rN,SkeletonJson:oN,Skin:aN,Slot:Bw,SlotData:nN,get SpacingMode(){return ai},Spine:W_e,SwirlEffect:$_e,get TimelineType(){return Hr},TrackEntry:G4,TransformConstraint:eN,TransformConstraintData:iN,TransformConstraintTimeline:W1,TranslateTimeline:Ff,TwoColorTimeline:G1,VertexAttachment:Us},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y1=function(t,e){return Y1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Y1(t,e)};function tt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Y1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jw=function(){function t(e){if(!e)throw new Error("name cannot be null.");this.name=e}return t}(),ca=function(t){tt(e,t);function e(r){var n=t.call(this,r)||this;return n.id=e.nextID++,n.bones=null,n.vertices=[],n.worldVerticesLength=0,n.timelineAttachment=n,n}return e.prototype.computeWorldVerticesOld=function(r,n){this.computeWorldVertices(r,0,this.worldVerticesLength,n,0,2)},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){i=o+(i>>1)*s;var c=r.bone.skeleton,l=r.deform,u=this.vertices,f=this.bones;if(!f){l.length>0&&(u=l);for(var h=r.bone.matrix,d=h.tx,p=h.ty,v=h.a,y=h.c,g=h.b,m=h.d,x=n,b=o;b<i;x+=2,b+=s){var _=u[x],S=u[x+1];a[b]=_*v+S*y+d,a[b+1]=_*g+S*m+p}return}for(var E=0,w=0,C=0;C<n;C+=2){var A=f[E];E+=A+1,w+=A}var P=c.bones;if(l.length==0)for(var b=o,y=w*3;b<i;b+=s){var T=0,O=0,A=f[E++];for(A+=E;E<A;E++,y+=3){var h=P[f[E]].matrix,_=u[y],S=u[y+1],R=u[y+2];T+=(_*h.a+S*h.c+h.tx)*R,O+=(_*h.b+S*h.d+h.ty)*R}a[b]=T,a[b+1]=O}else for(var F=l,b=o,y=w*3,D=w<<1;b<i;b+=s){var T=0,O=0,A=f[E++];for(A+=E;E<A;E++,y+=3,D+=2){var h=P[f[E]].matrix,_=u[y]+F[D],S=u[y+1]+F[D+1],R=u[y+2];T+=(_*h.a+S*h.c+h.tx)*R,O+=(_*h.b+S*h.d+h.ty)*R}a[b]=T,a[b+1]=O}},e.prototype.copyTo=function(r){this.bones?(r.bones=new Array(this.bones.length),Q.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,this.vertices&&(r.vertices=Q.newFloatArray(this.vertices.length),Q.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)),r.worldVerticesLength=this.worldVerticesLength,r.timelineAttachment=this.timelineAttachment},e.nextID=0,e}(jw),sN=function(t){tt(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.BoundingBox,n.color=new _e(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.color.setFromColor(this.color),r},e}(ca),lN=function(t){tt(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Clipping,n.endSlot=null,n.color=new _e(.2275,.2275,.8078,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.endSlot=this.endSlot,r.color.setFromColor(this.color),r},e}(ca),bv=function(t){tt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.type=et.Mesh,i.region=null,i.triangles=[],i.color=new _e(1,1,1,1),i.width=0,i.height=0,i.hullLength=0,i.edges=[],i.parentMesh=null,i.sequence=null,i.tempColor=new _e(0,0,0,0),i.path=n,i}return e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(r){this.parentMesh=r,r&&(this.bones=r.bones,this.vertices=r.vertices,this.worldVerticesLength=r.worldVerticesLength,this.regionUVs=r.regionUVs,this.triangles=r.triangles,this.hullLength=r.hullLength,this.worldVerticesLength=r.worldVerticesLength)},e.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var r=new e(this.name,this.path);return r.region=this.region,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Float32Array(this.regionUVs.length),Q.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.triangles=new Array(this.triangles.length),Q.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,r.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(r.edges=new Array(this.edges.length),Q.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},e.prototype.computeWorldVertices=function(r,n,i,a,o,s){this.sequence!=null&&this.sequence.apply(r,this),t.prototype.computeWorldVertices.call(this,r,n,i,a,o,s)},e.prototype.newLinkedMesh=function(){var r=new e(this.name,this.path);return r.region=this.region,r.color.setFromColor(this.color),r.timelineAttachment=this.timelineAttachment,r.setParentMesh(this.parentMesh?this.parentMesh:this),r},e}(ca),kf=function(t){tt(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Path,n.lengths=[],n.closed=!1,n.constantSpeed=!1,n.color=new _e(1,1,1,1),n}return e.prototype.copy=function(){var r=new e(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),Q.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},e}(ca),uN=function(t){tt(e,t);function e(r){var n=t.call(this,r)||this;return n.type=et.Point,n.x=0,n.y=0,n.rotation=0,n.color=new _e(.38,.94,0,1),n}return e.prototype.computeWorldPosition=function(r,n){var i=r.matrix;return n.x=this.x*i.a+this.y*i.c+r.worldX,n.y=this.x*i.b+this.y*i.d+r.worldY,n},e.prototype.computeWorldRotation=function(r){var n=r.matrix,i=G.cosDeg(this.rotation),a=G.sinDeg(this.rotation),o=i*n.a+a*n.c,s=i*n.b+a*n.d;return Math.atan2(s,o)*G.radDeg},e.prototype.copy=function(){var r=new e(this.name);return r.x=this.x,r.y=this.y,r.rotation=this.rotation,r.color.setFromColor(this.color),r},e}(ca),Uw=function(t){tt(e,t);function e(r,n){var i=t.call(this,r)||this;return i.type=et.Region,i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new _e(1,1,1,1),i.rendererObject=null,i.region=null,i.sequence=null,i.offset=Q.newFloatArray(8),i.uvs=Q.newFloatArray(8),i.tempColor=new _e(1,1,1,1),i.path=n,i}return e.prototype.updateRegion=function(){if(!this.region)throw new Error("Region not set.");var r=this.region,n=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*n,o=-this.height/2*this.scaleY+this.region.offsetY*i,s=a+this.region.width*n,c=o+this.region.height*i,l=this.rotation*Math.PI/180,u=Math.cos(l),f=Math.sin(l),h=this.x,d=this.y,p=a*u+h,v=a*f,y=o*u+d,g=o*f,m=s*u+h,x=s*f,b=c*u+d,_=c*f,S=this.offset;S[0]=p-g,S[1]=y+v,S[2]=p-_,S[3]=b+v,S[4]=m-_,S[5]=b+x,S[6]=m-g,S[7]=y+x;var E=this.uvs;r.degrees==90?(E[2]=r.u,E[3]=r.v2,E[4]=r.u,E[5]=r.v,E[6]=r.u2,E[7]=r.v,E[0]=r.u2,E[1]=r.v2):(E[0]=r.u,E[1]=r.v2,E[2]=r.u,E[3]=r.v,E[4]=r.u2,E[5]=r.v,E[6]=r.u2,E[7]=r.v2)},e.prototype.computeWorldVertices=function(r,n,i,a){this.sequence!=null&&this.sequence.apply(r,this);var o=r.bone,s=this.offset,c=o.matrix,l=c.tx,u=c.ty,f=c.a,h=c.c,d=c.b,p=c.d,v=0,y=0;v=s[0],y=s[1],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u,i+=a,v=s[2],y=s[3],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u,i+=a,v=s[4],y=s[5],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u,i+=a,v=s[6],y=s[7],n[i]=v*f+y*h+l,n[i+1]=v*d+y*p+u},e.prototype.copy=function(){var r=new e(this.name,this.path);return r.region=this.region,r.rendererObject=this.rendererObject,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,Q.arrayCopy(this.uvs,0,r.uvs,0,8),Q.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r.sequence=this.sequence!=null?this.sequence.copy():null,r},e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(jw),$w=function(){function t(e){this.id=t.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(e)}return t.prototype.copy=function(){var e=new t(this.regions.length);return Q.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e},t.prototype.apply=function(e,r){var n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);var i=this.regions[n];r.region!=i&&(r.region=i)},t.prototype.getPath=function(e,r){for(var n=e,i=(this.start+r).toString(),a=this.digits-i.length;a>0;a--)n+="0";return n+=i,n},t.nextID=function(){return t._nextID++},t._nextID=0,t}(),$r;(function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"})($r||($r={}));var Vw=[$r.hold,$r.once,$r.loop,$r.pingpong,$r.onceReverse,$r.loopReverse,$r.pingpongReverse],Sv=function(){function t(e,r,n){if(this.timelines=[],this.timelineIds=new x4,!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(r),this.duration=n}return t.prototype.setTimelines=function(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var r=0;r<e.length;r++)this.timelineIds.addAll(e[r].getPropertyIds())},t.prototype.hasTimeline=function(e){for(var r=0;r<e.length;r++)if(this.timelineIds.contains(e[r]))return!0;return!1},t.prototype.apply=function(e,r,n,i,a,o,s,c){if(!e)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,r>0&&(r%=this.duration));for(var l=this.timelines,u=0,f=l.length;u<f;u++)l[u].apply(e,r,n,a,o,s,c)},t}(),vt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},ar=function(){function t(e,r){this.propertyIds=r,this.frames=Q.newFloatArray(e*this.getFrameEntries())}return t.prototype.getPropertyIds=function(){return this.propertyIds},t.prototype.getFrameEntries=function(){return 1},t.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},t.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},t.search1=function(e,r){for(var n=e.length,i=1;i<n;i++)if(e[i]>r)return i-1;return n-1},t.search=function(e,r,n){for(var i=e.length,a=n;a<i;a+=n)if(e[a]>r)return a-n;return i-n},t}(),Ni=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,i)||this;return a.curves=Q.newFloatArray(r+n*18),a.curves[r-1]=1,a}return e.prototype.setLinear=function(r){this.curves[r]=0},e.prototype.setStepped=function(r){this.curves[r]=1},e.prototype.shrink=function(r){var n=this.getFrameCount()+r*18;if(this.curves.length>n){var i=Q.newFloatArray(n);Q.arrayCopy(this.curves,0,i,0,n),this.curves=i}},e.prototype.setBezier=function(r,n,i,a,o,s,c,l,u,f,h){var d=this.curves,p=this.getFrameCount()+r*18;i==0&&(d[n]=2+p);for(var v=(a-s*2+l)*.03,y=(o-c*2+u)*.03,g=((s-l)*3-a+f)*.006,m=((c-u)*3-o+h)*.006,x=v*2+g,b=y*2+m,_=(s-a)*.3+v+g*.16666667,S=(c-o)*.3+y+m*.16666667,E=a+_,w=o+S,C=p+18;p<C;p+=2)d[p]=E,d[p+1]=w,_+=x,S+=b,x+=g,b+=m,E+=_,w+=S},e.prototype.getBezierValue=function(r,n,i,a){var o=this.curves;if(o[a]>r){var s=this.frames[n],c=this.frames[n+i];return c+(r-s)/(o[a]-s)*(o[a+1]-c)}var l=a+18;for(a+=2;a<l;a+=2)if(o[a]>=r){var u=o[a-2],f=o[a-1];return f+(r-u)/(o[a]-u)*(o[a+1]-f)}n+=this.getFrameEntries();var h=o[l-2],d=o[l-1];return d+(r-h)/(this.frames[n]-h)*(this.frames[n+i]-d)},e}(ar),ji=function(t){tt(e,t);function e(r,n,i){return t.call(this,r,n,[i])||this}return e.prototype.getFrameEntries=function(){return 2},e.prototype.setFrame=function(r,n,i){r<<=1,this.frames[r]=n,this.frames[r+1]=i},e.prototype.getCurveValue=function(r){for(var n=this.frames,i=n.length-2,a=2;a<=i;a+=2)if(n[a]>r){i=a-2;break}var o=this.curves[i>>1];switch(o){case 0:var s=n[i],c=n[i+1];return c+(r-s)/(n[i+2]-s)*(n[i+2+1]-c);case 1:return n[i+1]}return this.getBezierValue(r,i,1,o-2)},e}(Ni),Ev=function(t){tt(e,t);function e(r,n,i,a){return t.call(this,r,n,[i,a])||this}return e.prototype.getFrameEntries=function(){return 3},e.prototype.setFrame=function(r,n,i,a){r*=3,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a},e}(Ni),Df=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.rotate+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.rotation=l.data.rotation;return;case N.first:l.rotation+=(l.data.rotation-l.rotation)*o}return}var f=this.getCurveValue(i);switch(s){case N.setup:l.rotation=l.data.rotation+f*o;break;case N.first:case N.replace:f+=l.data.rotation-l.rotation;case N.add:l.rotation+=f*o}}},e}(ji),Gw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.x+"|"+i,vt.y+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.x=l.data.x,l.y=l.data.y;return;case N.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}return}var f=0,h=0,d=ar.search(u,i,3),p=this.curves[d/3];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+3]-v);f+=(u[d+3+1]-f)*y,h+=(u[d+3+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}switch(s){case N.setup:l.x=l.data.x+f*o,l.y=l.data.y+h*o;break;case N.first:case N.replace:l.x+=(l.data.x+f-l.x)*o,l.y+=(l.data.y+h-l.y)*o;break;case N.add:l.x+=f*o,l.y+=h*o}}},e}(Ev),zw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.x+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.x=l.data.x;return;case N.first:l.x+=(l.data.x-l.x)*o}return}var f=this.getCurveValue(i);switch(s){case N.setup:l.x=l.data.x+f*o;break;case N.first:case N.replace:l.x+=(l.data.x+f-l.x)*o;break;case N.add:l.x+=f*o}}},e}(ji),Ww=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.y+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.y=l.data.y;return;case N.first:l.y+=(l.data.y-l.y)*o}return}var f=this.getCurveValue(i);switch(s){case N.setup:l.y=l.data.y+f*o;break;case N.first:case N.replace:l.y+=(l.data.y+f-l.y)*o;break;case N.add:l.y+=f*o}}},e}(ji),Xw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.scaleX+"|"+i,vt.scaleY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case N.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var f,h,d=ar.search(u,i,3),p=this.curves[d/3];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+3]-v);f+=(u[d+3+1]-f)*y,h+=(u[d+3+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}if(f*=l.data.scaleX,h*=l.data.scaleY,o==1)s==N.add?(l.scaleX+=f-l.data.scaleX,l.scaleY+=h-l.data.scaleY):(l.scaleX=f,l.scaleY=h);else{var g=0,m=0;if(c==Ze.mixOut)switch(s){case N.setup:g=l.data.scaleX,m=l.data.scaleY,l.scaleX=g+(Math.abs(f)*G.signum(g)-g)*o,l.scaleY=m+(Math.abs(h)*G.signum(m)-m)*o;break;case N.first:case N.replace:g=l.scaleX,m=l.scaleY,l.scaleX=g+(Math.abs(f)*G.signum(g)-g)*o,l.scaleY=m+(Math.abs(h)*G.signum(m)-m)*o;break;case N.add:l.scaleX+=(f-l.data.scaleX)*o,l.scaleY+=(h-l.data.scaleY)*o}else switch(s){case N.setup:g=Math.abs(l.data.scaleX)*G.signum(f),m=Math.abs(l.data.scaleY)*G.signum(h),l.scaleX=g+(f-g)*o,l.scaleY=m+(h-m)*o;break;case N.first:case N.replace:g=Math.abs(l.scaleX)*G.signum(f),m=Math.abs(l.scaleY)*G.signum(h),l.scaleX=g+(f-g)*o,l.scaleY=m+(h-m)*o;break;case N.add:l.scaleX+=(f-l.data.scaleX)*o,l.scaleY+=(h-l.data.scaleY)*o}}}},e}(Ev),Hw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.scaleX+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.scaleX=l.data.scaleX;return;case N.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o}return}var f=this.getCurveValue(i)*l.data.scaleX;if(o==1)s==N.add?l.scaleX+=f-l.data.scaleX:l.scaleX=f;else{var h=0;if(c==Ze.mixOut)switch(s){case N.setup:h=l.data.scaleX,l.scaleX=h+(Math.abs(f)*G.signum(h)-h)*o;break;case N.first:case N.replace:h=l.scaleX,l.scaleX=h+(Math.abs(f)*G.signum(h)-h)*o;break;case N.add:l.scaleX+=(f-l.data.scaleX)*o}else switch(s){case N.setup:h=Math.abs(l.data.scaleX)*G.signum(f),l.scaleX=h+(f-h)*o;break;case N.first:case N.replace:h=Math.abs(l.scaleX)*G.signum(f),l.scaleX=h+(f-h)*o;break;case N.add:l.scaleX+=(f-l.data.scaleX)*o}}}},e}(ji),Yw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.scaleY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.scaleY=l.data.scaleY;return;case N.first:l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}var f=this.getCurveValue(i)*l.data.scaleY;if(o==1)s==N.add?l.scaleY+=f-l.data.scaleY:l.scaleY=f;else{var h=0;if(c==Ze.mixOut)switch(s){case N.setup:h=l.data.scaleY,l.scaleY=h+(Math.abs(f)*G.signum(h)-h)*o;break;case N.first:case N.replace:h=l.scaleY,l.scaleY=h+(Math.abs(f)*G.signum(h)-h)*o;break;case N.add:l.scaleY+=(f-l.data.scaleY)*o}else switch(s){case N.setup:h=Math.abs(l.data.scaleY)*G.signum(f),l.scaleY=h+(f-h)*o;break;case N.first:case N.replace:h=Math.abs(l.scaleY)*G.signum(f),l.scaleY=h+(f-h)*o;break;case N.add:l.scaleY+=(f-l.data.scaleY)*o}}}},e}(ji),qw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.shearX+"|"+i,vt.shearY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case N.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}return}var f=0,h=0,d=ar.search(u,i,3),p=this.curves[d/3];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+3]-v);f+=(u[d+3+1]-f)*y,h+=(u[d+3+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}switch(s){case N.setup:l.shearX=l.data.shearX+f*o,l.shearY=l.data.shearY+h*o;break;case N.first:case N.replace:l.shearX+=(l.data.shearX+f-l.shearX)*o,l.shearY+=(l.data.shearY+h-l.shearY)*o;break;case N.add:l.shearX+=f*o,l.shearY+=h*o}}},e}(Ev),Kw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.shearX+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.shearX=l.data.shearX;return;case N.first:l.shearX+=(l.data.shearX-l.shearX)*o}return}var f=this.getCurveValue(i);switch(s){case N.setup:l.shearX=l.data.shearX+f*o;break;case N.first:case N.replace:l.shearX+=(l.data.shearX+f-l.shearX)*o;break;case N.add:l.shearX+=f*o}}},e}(ji),Zw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.shearY+"|"+i)||this;return a.boneIndex=0,a.boneIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.bones[this.boneIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.shearY=l.data.shearY;return;case N.first:l.shearY+=(l.data.shearY-l.shearY)*o}return}var f=this.getCurveValue(i);switch(s){case N.setup:l.shearY=l.data.shearY+f*o;break;case N.first:case N.replace:l.shearY+=(l.data.shearY+f-l.shearY)*o;break;case N.add:l.shearY+=f*o}}},e}(ji),Qw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.rgb+"|"+i,vt.alpha+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 5},e.prototype.setFrame=function(r,n,i,a,o,s){r*=5,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color;if(i<u[0]){var h=l.data.color;switch(s){case N.setup:f.setFromColor(h);return;case N.first:f.add((h.r-f.r)*o,(h.g-f.g)*o,(h.b-f.b)*o,(h.a-f.a)*o)}return}var d=0,p=0,v=0,y=0,g=ar.search(u,i,5),m=this.curves[g/5];switch(m){case 0:var x=u[g];d=u[g+1],p=u[g+2],v=u[g+3],y=u[g+4];var b=(i-x)/(u[g+5]-x);d+=(u[g+5+1]-d)*b,p+=(u[g+5+2]-p)*b,v+=(u[g+5+3]-v)*b,y+=(u[g+5+4]-y)*b;break;case 1:d=u[g+1],p=u[g+2],v=u[g+3],y=u[g+4];break;default:d=this.getBezierValue(i,g,1,m-2),p=this.getBezierValue(i,g,2,m+18-2),v=this.getBezierValue(i,g,3,m+18*2-2),y=this.getBezierValue(i,g,4,m+18*3-2)}o==1?f.set(d,p,v,y):(s==N.setup&&f.setFromColor(l.data.color),f.add((d-f.r)*o,(p-f.g)*o,(v-f.b)*o,(y-f.a)*o))}},e}(Ni),Jw=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.rgb+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(r,n,i,a,o){r<<=2,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color;if(i<u[0]){var h=l.data.color;switch(s){case N.setup:f.r=h.r,f.g=h.g,f.b=h.b;return;case N.first:f.r+=(h.r-f.r)*o,f.g+=(h.g-f.g)*o,f.b+=(h.b-f.b)*o}return}var d=0,p=0,v=0,y=ar.search(u,i,4),g=this.curves[y>>2];switch(g){case 0:var m=u[y];d=u[y+1],p=u[y+2],v=u[y+3];var x=(i-m)/(u[y+4]-m);d+=(u[y+4+1]-d)*x,p+=(u[y+4+2]-p)*x,v+=(u[y+4+3]-v)*x;break;case 1:d=u[y+1],p=u[y+2],v=u[y+3];break;default:d=this.getBezierValue(i,y,1,g-2),p=this.getBezierValue(i,y,2,g+18-2),v=this.getBezierValue(i,y,3,g+18*2-2)}if(o==1)f.r=d,f.g=p,f.b=v;else{if(s==N.setup){var h=l.data.color;f.r=h.r,f.g=h.g,f.b=h.b}f.r+=(d-f.r)*o,f.g+=(p-f.g)*o,f.b+=(v-f.b)*o}}},e}(Ni),eA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.alpha+"|"+i)||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.color;if(i<this.frames[0]){var f=l.data.color;switch(s){case N.setup:u.a=f.a;return;case N.first:u.a+=(f.a-u.a)*o}return}var h=this.getCurveValue(i);o==1?u.a=h:(s==N.setup&&(u.a=l.data.color.a),u.a+=(h-u.a)*o)}},e}(ji),tA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.rgb+"|"+i,vt.alpha+"|"+i,vt.rgb2+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 8},e.prototype.setFrame=function(r,n,i,a,o,s,c,l,u){r<<=3,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s,this.frames[r+5]=c,this.frames[r+6]=l,this.frames[r+7]=u},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color,h=l.darkColor;if(i<u[0]){var d=l.data.color,p=l.data.darkColor;switch(s){case N.setup:f.setFromColor(d),h.r=p.r,h.g=p.g,h.b=p.b;return;case N.first:f.add((d.r-f.r)*o,(d.g-f.g)*o,(d.b-f.b)*o,(d.a-f.a)*o),h.r+=(p.r-h.r)*o,h.g+=(p.g-h.g)*o,h.b+=(p.b-h.b)*o}return}var v=0,y=0,g=0,m=0,x=0,b=0,_=0,S=ar.search(u,i,8),E=this.curves[S>>3];switch(E){case 0:var w=u[S];v=u[S+1],y=u[S+2],g=u[S+3],m=u[S+4],x=u[S+5],b=u[S+6],_=u[S+7];var C=(i-w)/(u[S+8]-w);v+=(u[S+8+1]-v)*C,y+=(u[S+8+2]-y)*C,g+=(u[S+8+3]-g)*C,m+=(u[S+8+4]-m)*C,x+=(u[S+8+5]-x)*C,b+=(u[S+8+6]-b)*C,_+=(u[S+8+7]-_)*C;break;case 1:v=u[S+1],y=u[S+2],g=u[S+3],m=u[S+4],x=u[S+5],b=u[S+6],_=u[S+7];break;default:v=this.getBezierValue(i,S,1,E-2),y=this.getBezierValue(i,S,2,E+18-2),g=this.getBezierValue(i,S,3,E+18*2-2),m=this.getBezierValue(i,S,4,E+18*3-2),x=this.getBezierValue(i,S,5,E+18*4-2),b=this.getBezierValue(i,S,6,E+18*5-2),_=this.getBezierValue(i,S,7,E+18*6-2)}if(o==1)f.set(v,y,g,m),h.r=x,h.g=b,h.b=_;else{if(s==N.setup){f.setFromColor(l.data.color);var p=l.data.darkColor;h.r=p.r,h.g=p.g,h.b=p.b}f.add((v-f.r)*o,(y-f.g)*o,(g-f.b)*o,(m-f.a)*o),h.r+=(x-h.r)*o,h.g+=(b-h.g)*o,h.b+=(_-h.b)*o}}},e}(Ni),rA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.rgb+"|"+i,vt.rgb2+"|"+i])||this;return a.slotIndex=0,a.slotIndex=i,a}return e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(r,n,i,a,o,s,c,l){r*=7,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s,this.frames[r+5]=c,this.frames[r+6]=l},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=this.frames,f=l.color,h=l.darkColor;if(i<u[0]){var d=l.data.color,p=l.data.darkColor;switch(s){case N.setup:f.r=d.r,f.g=d.g,f.b=d.b,h.r=p.r,h.g=p.g,h.b=p.b;return;case N.first:f.r+=(d.r-f.r)*o,f.g+=(d.g-f.g)*o,f.b+=(d.b-f.b)*o,h.r+=(p.r-h.r)*o,h.g+=(p.g-h.g)*o,h.b+=(p.b-h.b)*o}return}var v=0,y=0,g=0,m=0,x=0,b=0,_=ar.search(u,i,7),S=this.curves[_/7];switch(S){case 0:var E=u[_];v=u[_+1],y=u[_+2],g=u[_+3],m=u[_+4],x=u[_+5],b=u[_+6];var w=(i-E)/(u[_+7]-E);v+=(u[_+7+1]-v)*w,y+=(u[_+7+2]-y)*w,g+=(u[_+7+3]-g)*w,m+=(u[_+7+4]-m)*w,x+=(u[_+7+5]-x)*w,b+=(u[_+7+6]-b)*w;break;case 1:v=u[_+1],y=u[_+2],g=u[_+3],m=u[_+4],x=u[_+5],b=u[_+6];break;default:v=this.getBezierValue(i,_,1,S-2),y=this.getBezierValue(i,_,2,S+18-2),g=this.getBezierValue(i,_,3,S+18*2-2),m=this.getBezierValue(i,_,4,S+18*3-2),x=this.getBezierValue(i,_,5,S+18*4-2),b=this.getBezierValue(i,_,6,S+18*5-2)}if(o==1)f.r=v,f.g=y,f.b=g,h.r=m,h.g=x,h.b=b;else{if(s==N.setup){var d=l.data.color,p=l.data.darkColor;f.r=d.r,f.g=d.g,f.b=d.b,h.r=p.r,h.g=p.g,h.b=p.b}f.r+=(v-f.r)*o,f.g+=(y-f.g)*o,f.b+=(g-f.b)*o,h.r+=(m-h.r)*o,h.g+=(x-h.g)*o,h.b+=(b-h.b)*o}}},e}(Ni),us=function(t){tt(e,t);function e(r,n){var i=t.call(this,r,[vt.attachment+"|"+n])||this;return i.slotIndex=0,i.slotIndex=n,i.attachmentNames=new Array(r),i}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.attachmentNames[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){if(c==Ze.mixOut){s==N.setup&&this.setAttachment(r,l,l.data.attachmentName);return}if(i<this.frames[0]){(s==N.setup||s==N.first)&&this.setAttachment(r,l,l.data.attachmentName);return}this.setAttachment(r,l,this.attachmentNames[ar.search1(this.frames,i)])}},e.prototype.setAttachment=function(r,n,i){n.setAttachment(i?r.getAttachment(this.slotIndex,i):null)},e}(ar),nA=function(t){tt(e,t);function e(r,n,i,a){var o=t.call(this,r,n,[vt.deform+"|"+i+"|"+a.id])||this;return o.slotIndex=0,o.slotIndex=i,o.attachment=a,o.vertices=new Array(r),o}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.vertices[r]=i},e.prototype.setBezier=function(r,n,i,a,o,s,c,l,u,f,h){var d=this.curves,p=this.getFrameCount()+r*18;i==0&&(d[n]=2+p);for(var v=(a-s*2+l)*.03,y=u*.03-c*.06,g=((s-l)*3-a+f)*.006,m=(c-u+.33333333)*.018,x=v*2+g,b=y*2+m,_=(s-a)*.3+v+g*.16666667,S=c*.3+y+m*.16666667,E=a+_,w=S,C=p+18;p<C;p+=2)d[p]=E,d[p+1]=w,_+=x,S+=b,x+=g,b+=m,E+=_,w+=S},e.prototype.getCurvePercent=function(r,n){var i=this.curves,a=i[n];switch(a){case 0:var o=this.frames[n];return(r-o)/(this.frames[n+this.getFrameEntries()]-o);case 1:return 0}if(a-=2,i[a]>r){var s=this.frames[n];return i[a+1]*(r-s)/(i[a]-s)}var c=a+18;for(a+=2;a<c;a+=2)if(i[a]>=r){var l=i[a-2],u=i[a-1];return u+(r-l)/(i[a]-l)*(i[a+1]-u)}var f=i[c-2],h=i[c-1];return h+(1-h)*(r-f)/(this.frames[n+this.getFrameEntries()]-f)},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.getAttachment();if(u&&!(!(u instanceof ca)||u.timelineAttachment!=this.attachment)){var f=l.deform;f.length==0&&(s=N.setup);var h=this.vertices,d=h[0].length,p=this.frames;if(i<p[0]){switch(s){case N.setup:f.length=0;return;case N.first:if(o==1){f.length=0;return}f.length=d;var v=u;if(v.bones){o=1-o;for(var g=0;g<d;g++)f[g]*=o}else for(var y=v.vertices,g=0;g<d;g++)f[g]+=(y[g]-f[g])*o}return}if(f.length=d,i>=p[p.length-1]){var m=h[p.length-1];if(o==1)if(s==N.add){var v=u;if(v.bones)for(var b=0;b<d;b++)f[b]+=m[b];else for(var y=v.vertices,x=0;x<d;x++)f[x]+=m[x]-y[x]}else Q.arrayCopy(m,0,f,0,d);else switch(s){case N.setup:{var _=u;if(_.bones)for(var w=0;w<d;w++)f[w]=m[w]*o;else for(var y=_.vertices,S=0;S<d;S++){var E=y[S];f[S]=E+(m[S]-E)*o}break}case N.first:case N.replace:for(var C=0;C<d;C++)f[C]+=(m[C]-f[C])*o;break;case N.add:var v=u;if(v.bones)for(var P=0;P<d;P++)f[P]+=m[P]*o;else for(var y=v.vertices,A=0;A<d;A++)f[A]+=(m[A]-y[A])*o}return}var T=ar.search1(p,i),O=this.getCurvePercent(i,T),R=h[T],F=h[T+1];if(o==1)if(s==N.add){var v=u;if(v.bones)for(var Y=0;Y<d;Y++){var V=R[Y];f[Y]+=V+(F[Y]-V)*O}else for(var y=v.vertices,D=0;D<d;D++){var V=R[D];f[D]+=V+(F[D]-V)*O-y[D]}}else for(var W=0;W<d;W++){var V=R[W];f[W]=V+(F[W]-V)*O}else switch(s){case N.setup:{var $=u;if($.bones)for(var B=0;B<d;B++){var V=R[B];f[B]=(V+(F[B]-V)*O)*o}else for(var y=$.vertices,I=0;I<d;I++){var V=R[I],E=y[I];f[I]=E+(V+(F[I]-V)*O-E)*o}break}case N.first:case N.replace:for(var L=0;L<d;L++){var V=R[L];f[L]+=(V+(F[L]-V)*O-f[L])*o}break;case N.add:var v=u;if(v.bones)for(var X=0;X<d;X++){var V=R[X];f[X]+=(V+(F[X]-V)*O)*o}else for(var y=v.vertices,M=0;M<d;M++){var V=R[M];f[M]+=(V+(F[M]-V)*O-y[M])*o}}}}},e}(Ni),wv=function(t){tt(e,t);function e(r){var n=t.call(this,r,e.propertyIds)||this;return n.events=new Array(r),n}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n){this.frames[r]=n.time,this.events[r]=n},e.prototype.apply=function(r,n,i,a,o,s,c){if(a){var l=this.frames,u=this.frames.length;if(n>i)this.apply(r,n,Number.MAX_VALUE,a,o,s,c),n=-1;else if(n>=l[u-1])return;if(!(i<l[0])){var f=0;if(n<l[0])f=0;else{f=ar.search1(l,n)+1;for(var h=l[f];f>0&&l[f-1]==h;)f--}for(;f<u&&i>=l[f];f++)a.push(this.events[f])}}},e.propertyIds=[""+vt.event],e}(ar),Ml=function(t){tt(e,t);function e(r){var n=t.call(this,r,e.propertyIds)||this;return n.drawOrders=new Array(r),n}return e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(r,n,i){this.frames[r]=n,this.drawOrders[r]=i},e.prototype.apply=function(r,n,i,a,o,s,c){if(c==Ze.mixOut){s==N.setup&&Q.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);return}if(i<this.frames[0]){(s==N.setup||s==N.first)&&Q.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);return}var l=ar.search1(this.frames,i),u=this.drawOrders[l];if(!u)Q.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);else for(var f=r.drawOrder,h=r.slots,d=0,p=u.length;d<p;d++)f[d]=h[u[d]]},e.propertyIds=[""+vt.drawOrder],e}(ar),iA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.ikConstraint+"|"+i])||this;return a.ikConstraintIndex=0,a.ikConstraintIndex=i,a}return e.prototype.getFrameEntries=function(){return 6},e.prototype.setFrame=function(r,n,i,a,o,s,c){r*=6,this.frames[r]=n,this.frames[r+1]=i,this.frames[r+2]=a,this.frames[r+3]=o,this.frames[r+4]=s?1:0,this.frames[r+5]=c?1:0},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.ikConstraints[this.ikConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case N.first:l.mix+=(l.data.mix-l.mix)*o,l.softness+=(l.data.softness-l.softness)*o,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}var f=0,h=0,d=ar.search(u,i,6),p=this.curves[d/6];switch(p){case 0:var v=u[d];f=u[d+1],h=u[d+2];var y=(i-v)/(u[d+6]-v);f+=(u[d+6+1]-f)*y,h+=(u[d+6+2]-h)*y;break;case 1:f=u[d+1],h=u[d+2];break;default:f=this.getBezierValue(i,d,1,p-2),h=this.getBezierValue(i,d,2,p+18-2)}s==N.setup?(l.mix=l.data.mix+(f-l.data.mix)*o,l.softness=l.data.softness+(h-l.data.softness)*o,c==Ze.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=u[d+3],l.compress=u[d+4]!=0,l.stretch=u[d+5]!=0)):(l.mix+=(f-l.mix)*o,l.softness+=(h-l.softness)*o,c==Ze.mixIn&&(l.bendDirection=u[d+3],l.compress=u[d+4]!=0,l.stretch=u[d+5]!=0))}},e}(Ni),aA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.transformConstraint+"|"+i])||this;return a.transformConstraintIndex=0,a.transformConstraintIndex=i,a}return e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(r,n,i,a,o,s,c,l){var u=this.frames;r*=7,u[r]=n,u[r+1]=i,u[r+2]=a,u[r+3]=o,u[r+4]=s,u[r+5]=c,u[r+6]=l},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.transformConstraints[this.transformConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){var f=l.data;switch(s){case N.setup:l.mixRotate=f.mixRotate,l.mixX=f.mixX,l.mixY=f.mixY,l.mixScaleX=f.mixScaleX,l.mixScaleY=f.mixScaleY,l.mixShearY=f.mixShearY;return;case N.first:l.mixRotate+=(f.mixRotate-l.mixRotate)*o,l.mixX+=(f.mixX-l.mixX)*o,l.mixY+=(f.mixY-l.mixY)*o,l.mixScaleX+=(f.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(f.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(f.mixShearY-l.mixShearY)*o}return}var h,d,p,v,y,g,m=ar.search(u,i,7),x=this.curves[m/7];switch(x){case 0:var b=u[m];h=u[m+1],d=u[m+2],p=u[m+3],v=u[m+4],y=u[m+5],g=u[m+6];var _=(i-b)/(u[m+7]-b);h+=(u[m+7+1]-h)*_,d+=(u[m+7+2]-d)*_,p+=(u[m+7+3]-p)*_,v+=(u[m+7+4]-v)*_,y+=(u[m+7+5]-y)*_,g+=(u[m+7+6]-g)*_;break;case 1:h=u[m+1],d=u[m+2],p=u[m+3],v=u[m+4],y=u[m+5],g=u[m+6];break;default:h=this.getBezierValue(i,m,1,x-2),d=this.getBezierValue(i,m,2,x+18-2),p=this.getBezierValue(i,m,3,x+18*2-2),v=this.getBezierValue(i,m,4,x+18*3-2),y=this.getBezierValue(i,m,5,x+18*4-2),g=this.getBezierValue(i,m,6,x+18*5-2)}if(s==N.setup){var f=l.data;l.mixRotate=f.mixRotate+(h-f.mixRotate)*o,l.mixX=f.mixX+(d-f.mixX)*o,l.mixY=f.mixY+(p-f.mixY)*o,l.mixScaleX=f.mixScaleX+(v-f.mixScaleX)*o,l.mixScaleY=f.mixScaleY+(y-f.mixScaleY)*o,l.mixShearY=f.mixShearY+(g-f.mixShearY)*o}else l.mixRotate+=(h-l.mixRotate)*o,l.mixX+=(d-l.mixX)*o,l.mixY+=(p-l.mixY)*o,l.mixScaleX+=(v-l.mixScaleX)*o,l.mixScaleY+=(y-l.mixScaleY)*o,l.mixShearY+=(g-l.mixShearY)*o}},e}(Ni),oA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.pathConstraintPosition+"|"+i)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.position=l.data.position;return;case N.first:l.position+=(l.data.position-l.position)*o}return}var f=this.getCurveValue(i);s==N.setup?l.position=l.data.position+(f-l.data.position)*o:l.position+=(f-l.position)*o}},e}(ji),sA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,vt.pathConstraintSpacing+"|"+i)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.spacing=l.data.spacing;return;case N.first:l.spacing+=(l.data.spacing-l.spacing)*o}return}var f=this.getCurveValue(i);s==N.setup?l.spacing=l.data.spacing+(f-l.data.spacing)*o:l.spacing+=(f-l.spacing)*o}},e}(ji),lA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,n,[vt.pathConstraintMix+"|"+i])||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=i,a}return e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(r,n,i,a,o){var s=this.frames;r<<=2,s[r]=n,s[r+1]=i,s[r+2]=a,s[r+3]=o},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.pathConstraints[this.pathConstraintIndex];if(l.active){var u=this.frames;if(i<u[0]){switch(s){case N.setup:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;return;case N.first:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*o,l.mixX+=(l.data.mixX-l.mixX)*o,l.mixY+=(l.data.mixY-l.mixY)*o}return}var f,h,d,p=ar.search(u,i,4),v=this.curves[p>>2];switch(v){case 0:var y=u[p];f=u[p+1],h=u[p+2],d=u[p+3];var g=(i-y)/(u[p+4]-y);f+=(u[p+4+1]-f)*g,h+=(u[p+4+2]-h)*g,d+=(u[p+4+3]-d)*g;break;case 1:f=u[p+1],h=u[p+2],d=u[p+3];break;default:f=this.getBezierValue(i,p,1,v-2),h=this.getBezierValue(i,p,2,v+18-2),d=this.getBezierValue(i,p,3,v+18*2-2)}if(s==N.setup){var m=l.data;l.mixRotate=m.mixRotate+(f-m.mixRotate)*o,l.mixX=m.mixX+(h-m.mixX)*o,l.mixY=m.mixY+(d-m.mixY)*o}else l.mixRotate+=(f-l.mixRotate)*o,l.mixX+=(h-l.mixX)*o,l.mixY+=(d-l.mixY)*o}},e}(Ni),uA=function(t){tt(e,t);function e(r,n,i){var a=t.call(this,r,[vt.sequence+"|"+n+"|"+i.sequence.id])||this;return a.slotIndex=n,a.attachment=i,a}return e.prototype.getFrameEntries=function(){return e.ENTRIES},e.prototype.getSlotIndex=function(){return this.slotIndex},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setFrame=function(r,n,i,a,o){var s=this.frames;r*=e.ENTRIES,s[r]=n,s[r+e.MODE]=i|a<<4,s[r+e.DELAY]=o},e.prototype.apply=function(r,n,i,a,o,s,c){var l=r.slots[this.slotIndex];if(l.bone.active){var u=l.attachment,f=this.attachment;if(!(u!=f&&(!(u instanceof ca)||u.timelineAttachment!=f))){var h=this.frames;if(i<h[0]){(s==N.setup||s==N.first)&&(l.sequenceIndex=-1);return}var d=ar.search(h,i,e.ENTRIES),p=h[d],v=h[d+e.MODE],y=h[d+e.DELAY];if(this.attachment.sequence){var g=v>>4,m=this.attachment.sequence.regions.length,x=Vw[v&15];if(x!=$r.hold)switch(g+=(i-p)/y+1e-5|0,x){case $r.once:g=Math.min(m-1,g);break;case $r.loop:g%=m;break;case $r.pingpong:{var b=(m<<1)-2;g=b==0?0:g%b,g>=m&&(g=b-g);break}case $r.onceReverse:g=Math.max(m-1-g,0);break;case $r.loopReverse:g=m-1-g%m;break;case $r.pingpongReverse:{var b=(m<<1)-2;g=b==0?0:(g+m-1)%b,g>=m&&(g=b-g)}}l.sequenceIndex=g}}}},e.ENTRIES=3,e.MODE=1,e.DELAY=2,e}(ar),cN=function(){function t(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new hN(this),this.propertyIDs=new x4,this.animationsChanged=!1,this.trackEntryPool=new gv(function(){return new fN}),this.data=e}return t.emptyAnimation=function(){return t._emptyAnimation},t.prototype.update=function(e){e*=this.timeScale;for(var r=this.tracks,n=0,i=r.length;n<i;n++){var a=r[n];if(a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var o=e*a.timeScale;if(a.delay>0){if(a.delay-=o,a.delay>0)continue;o=-a.delay,a.delay=0}var s=a.next;if(s){var c=a.trackLast-s.delay;if(c>=0){for(s.delay=0,s.trackTime+=a.timeScale==0?0:(c/a.timeScale+e)*s.timeScale,a.trackTime+=o,this.setCurrent(n,s,!0);s.mixingFrom;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){r[n]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,e)){var l=a.mixingFrom;for(a.mixingFrom=null,l&&(l.mixingTo=null);l;)this.queue.end(l),l=l.mixingFrom}a.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,r){var n=e.mixingFrom;if(!n)return!0;var i=this.updateMixingFrom(n,r);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=r*n.timeScale,e.mixTime+=r,!1)},t.prototype.apply=function(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,i=!1,a=0,o=n.length;a<o;a++){var s=n[a];if(!(!s||s.delay>0)){i=!0;var c=a==0?N.first:s.mixBlend,l=s.alpha;s.mixingFrom?l*=this.applyMixingFrom(s,e,c):s.trackTime>=s.trackEnd&&!s.next&&(l=0);var u=s.animationLast,f=s.getAnimationTime(),h=f,d=r;s.reverse&&(h=s.animation.duration-h,d=null);var p=s.animation.timelines,v=p.length;if(a==0&&l==1||c==N.add)for(var y=0;y<v;y++){Q.webkit602BugfixHelper(l,c);var g=p[y];g instanceof us?this.applyAttachmentTimeline(g,e,h,c,!0):g.apply(e,u,h,d,l,c,Ze.mixIn)}else{var m=s.timelineMode,x=s.shortestRotation,b=!x&&s.timelinesRotation.length!=v<<1;b&&(s.timelinesRotation.length=v<<1);for(var y=0;y<v;y++){var _=p[y],S=m[y]==Py?c:N.setup;!x&&_ instanceof Df?this.applyRotateTimeline(_,e,h,l,S,s.timelinesRotation,y<<1,b):_ instanceof us?this.applyAttachmentTimeline(_,e,h,c,!0):(Q.webkit602BugfixHelper(l,c),_.apply(e,u,h,d,l,S,Ze.mixIn))}}this.queueEvents(s,f),r.length=0,s.nextAnimationLast=f,s.nextTrackLast=s.trackTime}}for(var E=this.unkeyedState+jR,w=e.slots,C=0,A=e.slots.length;C<A;C++){var P=w[C];if(P.attachmentState==E){var T=P.data.attachmentName;P.setAttachment(T?e.getAttachment(P.data.index,T):null)}}return this.unkeyedState+=2,this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,r,n){var i=e.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,r,n);var a=0;e.mixDuration==0?(a=1,n==N.first&&(n=N.setup)):(a=e.mixTime/e.mixDuration,a>1&&(a=1),n!=N.first&&(n=i.mixBlend));var o=a<i.attachmentThreshold,s=a<i.drawOrderThreshold,c=i.animation.timelines,l=c.length,u=i.alpha*e.interruptAlpha,f=u*(1-a),h=i.animationLast,d=i.getAnimationTime(),p=d,v=null;if(i.reverse?p=i.animation.duration-p:a<i.eventThreshold&&(v=this.events),n==N.add)for(var y=0;y<l;y++)c[y].apply(r,h,p,v,f,n,Ze.mixOut);else{var g=i.timelineMode,m=i.timelineHoldMix,x=i.shortestRotation,b=!x&&i.timelinesRotation.length!=l<<1;b&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(var y=0;y<l;y++){var _=c[y],S=Ze.mixOut,E=void 0,w=0;switch(g[y]){case Py:if(!s&&_ instanceof Ml)continue;E=n,w=f;break;case BR:E=N.setup,w=f;break;case NR:E=n,w=u;break;case Oy:E=N.setup,w=u;break;default:E=N.setup;var C=m[y];w=u*Math.max(0,1-C.mixTime/C.mixDuration);break}i.totalAlpha+=w,!x&&_ instanceof Df?this.applyRotateTimeline(_,r,p,w,E,i.timelinesRotation,y<<1,b):_ instanceof us?this.applyAttachmentTimeline(_,r,p,E,o):(Q.webkit602BugfixHelper(w,n),s&&_ instanceof Ml&&E==N.setup&&(S=Ze.mixIn),_.apply(r,h,p,v,w,E,S))}}return e.mixDuration>0&&this.queueEvents(i,d),this.events.length=0,i.nextAnimationLast=d,i.nextTrackLast=i.trackTime,a},t.prototype.applyAttachmentTimeline=function(e,r,n,i,a){var o=r.slots[e.slotIndex];o.bone.active&&(n<e.frames[0]?(i==N.setup||i==N.first)&&this.setAttachment(r,o,o.data.attachmentName,a):this.setAttachment(r,o,e.attachmentNames[ar.search1(e.frames,n)],a),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+jR))},t.prototype.setAttachment=function(e,r,n,i){r.setAttachment(n?e.getAttachment(r.data.index,n):null),i&&(r.attachmentState=this.unkeyedState+q_e)},t.prototype.applyRotateTimeline=function(e,r,n,i,a,o,s,c){if(c&&(o[s]=0),i==1){e.apply(r,0,n,null,1,a,Ze.mixIn);return}var l=r.bones[e.boneIndex];if(l.active){var u=e.frames,f=0,h=0;if(n<u[0])switch(a){case N.setup:l.rotation=l.data.rotation;default:return;case N.first:f=l.rotation,h=l.data.rotation}else f=a==N.setup?l.data.rotation:l.rotation,h=l.data.rotation+e.getCurveValue(n);var d=0,p=h-f;if(p-=(16384-(16384.499999999996-p/360|0))*360,p==0)d=o[s];else{var v=0,y=0;c?(v=0,y=p):(v=o[s],y=o[s+1]);var g=p>0,m=v>=0;G.signum(y)!=G.signum(p)&&Math.abs(y)<=90&&(Math.abs(v)>180&&(v+=360*G.signum(v)),m=g),d=p+v-v%360,m!=g&&(d+=360*G.signum(v)),o[s]=d}o[s+1]=p,l.rotation=f+d*i}},t.prototype.queueEvents=function(e,r){for(var n=e.animationStart,i=e.animationEnd,a=i-n,o=e.trackLast%a,s=this.events,c=0,l=s.length;c<l;c++){var u=s[c];if(u.time<o)break;u.time>i||this.queue.event(e,u)}var f=!1;for(e.loop?f=a==0||o>e.trackTime%a:f=r>=i&&e.animationLast<i,f&&this.queue.complete(e);c<l;c++){var h=s[c];h.time<n||this.queue.event(e,h)}},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var r=this.tracks[e];if(r){this.queue.end(r),this.clearNext(r);for(var n=r;;){var i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[r.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,r,n){var i=this.expandToIndex(e);this.tracks[e]=r,r.previous=null,i&&(n&&this.queue.interrupt(i),r.mixingFrom=i,i.mixingTo=r,r.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(r.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(r)},t.prototype.setAnimation=function(e,r,n){n===void 0&&(n=!1);var i=this.data.skeletonData.findAnimation(r);if(!i)throw new Error("Animation not found: "+r);return this.setAnimationWith(e,i,n)},t.prototype.setAnimationWith=function(e,r,n){if(n===void 0&&(n=!1),!r)throw new Error("animation cannot be null.");var i=!0,a=this.expandToIndex(e);a&&(a.nextTrackLast==-1?(this.tracks[e]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,i=!1):this.clearNext(a));var o=this.trackEntry(e,r,n,a);return this.setCurrent(e,o,i),this.queue.drain(),o},t.prototype.addAnimation=function(e,r,n,i){n===void 0&&(n=!1),i===void 0&&(i=0);var a=this.data.skeletonData.findAnimation(r);if(!a)throw new Error("Animation not found: "+r);return this.addAnimationWith(e,a,n,i)},t.prototype.addAnimationWith=function(e,r,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=0),!r)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(a)for(;a.next;)a=a.next;var o=this.trackEntry(e,r,n,a);return a?(a.next=o,o.previous=a,i<=0&&(i+=a.getTrackComplete()-o.mixDuration)):(this.setCurrent(e,o,!0),this.queue.drain()),o.delay=i,o},t.prototype.setEmptyAnimation=function(e,r){r===void 0&&(r=0);var n=this.setAnimationWith(e,t.emptyAnimation(),!1);return n.mixDuration=r,n.trackEnd=r,n},t.prototype.addEmptyAnimation=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var i=this.addAnimationWith(e,t.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-r),i.mixDuration=r,i.trackEnd=r,i},t.prototype.setEmptyAnimations=function(e){e===void 0&&(e=0);var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var a=this.tracks[n];a&&this.setEmptyAnimation(a.trackIndex,e)}this.queue.drainDisabled=r,this.queue.drain()},t.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(Q.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},t.prototype.trackEntry=function(e,r,n,i){var a=this.trackEntryPool.obtain();return a.reset(),a.trackIndex=e,a.animation=r,a.loop=n,a.holdPrevious=!1,a.reverse=!1,a.shortestRotation=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=r.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.mixTime=0,a.mixDuration=i?this.data.getMix(i.animation,r):0,a.interruptAlpha=1,a.totalAlpha=0,a.mixBlend=N.replace,a},t.prototype.clearNext=function(e){for(var r=e.next;r;)this.queue.dispose(r),r=r.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=this.tracks,r=0,n=e.length;r<n;r++){var i=e[r];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=N.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}},t.prototype.computeHold=function(e){var r=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,a=e.timelineMode;a.length=i;var o=e.timelineHoldMix;o.length=0;var s=this.propertyIDs;if(r&&r.holdPrevious){for(var c=0;c<i;c++)a[c]=s.addAll(n[c].getPropertyIds())?Oy:NR;return}e:for(var c=0;c<i;c++){var l=n[c],u=l.getPropertyIds();if(!s.addAll(u))a[c]=Py;else if(!r||l instanceof us||l instanceof Ml||l instanceof wv||!r.animation.hasTimeline(u))a[c]=BR;else{for(var f=r.mixingTo;f;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(e.mixDuration>0){a[c]=Y_e,o[c]=f;continue e}break}a[c]=Oy}}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var r=this.listeners.indexOf(e);r>=0&&this.listeners.splice(r,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,r,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,r,n)},t.prototype.addAnimationByName=function(e,r,n,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,r,n,i)},t.prototype.hasAnimation=function(e){var r=this.data.skeletonData.findAnimation(e);return r!==null},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t._emptyAnimation=new Sv("<empty>",[],0),t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),fN=function(){function t(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=N.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t.prototype.getTrackComplete=function(){var e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),hN=function(){function t(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return t.prototype.start=function(e){this.objects.push(_n.start),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.interrupt=function(e){this.objects.push(_n.interrupt),this.objects.push(e)},t.prototype.end=function(e){this.objects.push(_n.end),this.objects.push(e),this.animState.animationsChanged=!0},t.prototype.dispose=function(e){this.objects.push(_n.dispose),this.objects.push(e)},t.prototype.complete=function(e){this.objects.push(_n.complete),this.objects.push(e)},t.prototype.event=function(e,r){this.objects.push(_n.event),this.objects.push(e),this.objects.push(r)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];switch(i){case _n.start:a.listener&&a.listener.start&&a.listener.start(a);for(var o=0;o<r.length;o++){var s=r[o];s.start&&s.start(a)}break;case _n.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<r.length;o++){var s=r[o];s.interrupt&&s.interrupt(a)}break;case _n.end:a.listener&&a.listener.end&&a.listener.end(a);for(var o=0;o<r.length;o++){var s=r[o];s.end&&s.end(a)}case _n.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var o=0;o<r.length;o++){var s=r[o];s.dispose&&s.dispose(a)}this.animState.trackEntryPool.free(a);break;case _n.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(var o=0;o<r.length;o++){var s=r[o];s.complete&&s.complete(a)}break;case _n.event:var c=e[n+++2];a.listener&&a.listener.event&&a.listener.event(a,c);for(var o=0;o<r.length;o++){var s=r[o];s.event&&s.event(a,c)}break}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}(),_n;(function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"})(_n||(_n={}));var H_e=function(){function t(){}return t.prototype.start=function(e){},t.prototype.interrupt=function(e){},t.prototype.end=function(e){},t.prototype.dispose=function(e){},t.prototype.complete=function(e){},t.prototype.event=function(e,r){},t}(),Py=0,BR=1,NR=2,Oy=3,Y_e=4,jR=1,q_e=2,dN=function(){function t(e){if(this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return t.prototype.setMix=function(e,r,n){var i=this.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);var a=this.skeletonData.findAnimation(r);if(!a)throw new Error("Animation not found: "+r);this.setMixWith(i,a,n)},t.prototype.setMixWith=function(e,r,n){if(!e)throw new Error("from cannot be null.");if(!r)throw new Error("to cannot be null.");var i=e.name+"."+r.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(e,r){var n=e.name+"."+r.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i},t}(),cA=function(){function t(e){this.atlas=e}return t.prototype.loadSequence=function(e,r,n){for(var i=n.regions,a=0,o=i.length;a<o;a++){var s=n.getPath(r,a),c=this.atlas.findRegion(s);if(c==null)throw new Error("Region not found in atlas: "+s+" (sequence: "+e+")");i[a]=c,i[a].renderObject=i[a]}},t.prototype.newRegionAttachment=function(e,r,n,i){var a=new Uw(r,n);if(i!=null)this.loadSequence(r,n,i);else{var o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+r+")");o.renderObject=o,a.region=o}return a},t.prototype.newMeshAttachment=function(e,r,n,i){var a=new bv(r,n);if(i!=null)this.loadSequence(r,n,i);else{var o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+r+")");o.renderObject=o,a.region=o}return a},t.prototype.newBoundingBoxAttachment=function(e,r){return new sN(r)},t.prototype.newPathAttachment=function(e,r){return new kf(r)},t.prototype.newPointAttachment=function(e,r){return new uN(r)},t.prototype.newClippingAttachment=function(e,r){return new lN(r)},t}(),q1=function(){function t(e,r,n){if(this.matrix=new Jt,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=r,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,r,n,i,a,o,s){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=i,this.ascaleY=a,this.ashearX=o,this.ashearY=s;var c=this.parent,l=this.matrix,u=this.skeleton.scaleX,f=-this.skeleton.scaleY;if(!c){var h=this.skeleton,d=n+90+s;l.a=G.cosDeg(n+o)*i*u,l.c=G.cosDeg(d)*a*u,l.b=G.sinDeg(n+o)*i*f,l.d=G.sinDeg(d)*a*f,l.tx=e*u+h.x,l.ty=r*f+h.y;return}var p=c.matrix.a,v=c.matrix.c,y=c.matrix.b,g=c.matrix.d;switch(l.tx=p*e+v*r+c.matrix.tx,l.ty=y*e+g*r+c.matrix.ty,this.data.transformMode){case ze.Normal:{var d=n+90+s,m=G.cosDeg(n+o)*i,x=G.cosDeg(d)*a,b=G.sinDeg(n+o)*i,_=G.sinDeg(d)*a;l.a=p*m+v*b,l.c=p*x+v*_,l.b=y*m+g*b,l.d=y*x+g*_;return}case ze.OnlyTranslation:{var d=n+90+s;l.a=G.cosDeg(n+o)*i,l.c=G.cosDeg(d)*a,l.b=G.sinDeg(n+o)*i,l.d=G.sinDeg(d)*a;break}case ze.NoRotationOrReflection:{var S=p*p+y*y,E=0;S>1e-4?(S=Math.abs(p*g-v*y)/S,p/=u,y/=f,v=y*S,g=p*S,E=Math.atan2(y,p)*G.radDeg):(p=0,y=0,E=90-Math.atan2(g,v)*G.radDeg);var w=n+o-E,C=n+s-E+90,m=G.cosDeg(w)*i,x=G.cosDeg(C)*a,b=G.sinDeg(w)*i,_=G.sinDeg(C)*a;l.a=p*m-v*b,l.c=p*x-v*_,l.b=y*m+g*b,l.d=y*x+g*_;break}case ze.NoScale:case ze.NoScaleOrReflection:{var A=G.cosDeg(n),P=G.sinDeg(n),T=(p*A+v*P)/u,O=(y*A+g*P)/f,S=Math.sqrt(T*T+O*O);S>1e-5&&(S=1/S),T*=S,O*=S,S=Math.sqrt(T*T+O*O),this.data.transformMode==ze.NoScale&&p*g-v*y<0!=(u<0!=f<0)&&(S=-S);var R=Math.PI/2+Math.atan2(O,T),F=Math.cos(R)*S,D=Math.sin(R)*S,m=G.cosDeg(o)*i,x=G.cosDeg(90+s)*a,b=G.sinDeg(o)*i,_=G.sinDeg(90+s)*a;l.a=T*m+F*b,l.c=T*x+F*_,l.b=O*m+D*b,l.d=O*x+D*_;break}}l.a*=u,l.c*=u,l.b*=f,l.d*=f},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*G.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*G.radDeg},t.prototype.getWorldScaleX=function(){var e=this.matrix;return Math.sqrt(e.a*e.a+e.b*e.b)},t.prototype.getWorldScaleY=function(){var e=this.matrix;return Math.sqrt(e.c*e.c+e.d*e.d)},t.prototype.updateAppliedTransform=function(){var e=this.parent,r=this.matrix;if(!e){this.ax=r.tx-this.skeleton.x,this.ay=r.ty-this.skeleton.y,this.arotation=Math.atan2(r.b,r.a)*G.radDeg,this.ascaleX=Math.sqrt(r.a*r.a+r.b*r.b),this.ascaleY=Math.sqrt(r.c*r.c+r.d*r.d),this.ashearX=0,this.ashearY=Math.atan2(r.a*r.c+r.b*r.d,r.a*r.d-r.b*r.c)*G.radDeg;return}var n=e.matrix,i=1/(n.a*n.d-n.b*n.c),a=r.tx-n.tx,o=r.ty-n.ty;this.ax=a*n.d*i-o*n.c*i,this.ay=o*n.a*i-a*n.b*i;var s=i*n.d,c=i*n.a,l=i*n.c,u=i*n.b,f=s*r.a-l*r.b,h=s*r.c-l*r.d,d=c*r.b-u*r.a,p=c*r.d-u*r.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+d*d),this.ascaleX>1e-4){var v=f*p-h*d;this.ascaleY=v/this.ascaleX,this.ashearY=Math.atan2(f*h+d*p,v)*G.radDeg,this.arotation=Math.atan2(d,f)*G.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*G.radDeg},t.prototype.worldToLocal=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=1/(n*o-i*a),c=e.x-r.tx,l=e.y-r.ty;return e.x=c*o*s-l*i*s,e.y=l*n*s-c*a*s,e},t.prototype.localToWorld=function(e){var r=this.matrix,n=e.x,i=e.y;return e.x=n*r.a+i*r.c+r.tx,e.y=n*r.b+i*r.d+r.ty,e},t.prototype.worldToLocalRotation=function(e){var r=G.sinDeg(e),n=G.cosDeg(e),i=this.matrix;return Math.atan2(i.a*r-i.b*n,i.d*n-i.c*r)*G.radDeg},t.prototype.localToWorldRotation=function(e){e-=this.rotation-this.shearX;var r=G.sinDeg(e),n=G.cosDeg(e),i=this.matrix;return Math.atan2(n*i.b+r*i.d,n*i.a+r*i.c)*G.radDeg},t.prototype.rotateWorld=function(e){var r=this.matrix,n=r.a,i=r.c,a=r.b,o=r.d,s=G.cosDeg(e),c=G.sinDeg(e);r.a=s*n-c*a,r.c=s*i-c*o,r.b=c*n+s*a,r.d=c*i+s*o},t}(),fA=function(){function t(e,r,n){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ze.Normal,this.skinRequired=!1,this.color=new _e,e<0)throw new Error("index must be >= 0.");if(!r)throw new Error("name cannot be null.");this.index=e,this.name=r,this.parent=n}return t}(),Av=function(){function t(e,r,n){this.name=e,this.order=r,this.skinRequired=n}return t}(),hA=function(){function t(e,r){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!r)throw new Error("data cannot be null.");this.time=e,this.data=r}return t}(),dA=function(){function t(e){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=e}return t}(),pN=function(){function t(e,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=r.findBone(e.bones[n].name);if(!i)throw new Error("Couldn't find bone "+e.bones[n].name);this.bones.push(i)}var a=r.findBone(e.target.name);if(!a)throw new Error("Couldn't find bone "+e.target.name);this.target=a}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){if(this.mix!=0){var e=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}},t.prototype.apply1=function(e,r,n,i,a,o,s){var c=e.parent.matrix;if(!c)throw new Error("IK bone must have parent.");var l=c.a,u=c.c,f=c.b,h=c.d,d=-e.ashearX-e.arotation,p=0,v=0,y=e.skeleton.scaleX,g=-e.skeleton.scaleY;switch(e.data.transformMode){case ze.OnlyTranslation:p=r-e.worldX,v=n-e.worldY,v=-v;break;case ze.NoRotationOrReflection:var m=Math.abs(l*h-u*f)/(l*l+f*f),x=l/y,b=f/g;u=-b*m*y,h=x*m*g,d+=Math.atan2(b,x)*G.radDeg;default:var _=r-c.tx,S=n-c.ty,E=l*h-u*f;p=(_*h-S*u)/E-e.ax,v=(S*l-_*f)/E-e.ay}d+=Math.atan2(v,p)*G.radDeg,e.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var w=e.ascaleX,C=e.ascaleY;if(i||a){switch(e.data.transformMode){case ze.NoScale:case ze.NoScaleOrReflection:p=r-e.worldX,v=n-e.worldY}var A=e.data.length*w,P=Math.sqrt(p*p+v*v);if(i&&P<A||a&&P>A&&A>1e-4){var m=(P/A-1)*s+1;w*=m,o&&(C*=m)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+d*s,w,C,e.ashearX,e.ashearY)},t.prototype.apply2=function(e,r,n,i,a,o,s,c,l){var u=e.ax,f=e.ay,h=e.ascaleX,d=e.ascaleY,p=h,v=d,y=r.ascaleX,g=e.matrix,m=0,x=0,b=0;h<0?(h=-h,m=180,b=-1):(m=0,b=1),d<0&&(d=-d,b=-b),y<0?(y=-y,x=180):x=0;var _=r.ax,S=0,E=0,w=0,C=g.a,A=g.c,P=g.b,T=g.d,O=Math.abs(h-d)<=1e-4;!O||o?(S=0,E=C*_+g.tx,w=P*_+g.ty):(S=r.ay,E=C*_+A*S+g.tx,w=P*_+T*S+g.ty);var R=e.parent.matrix;if(!R)throw new Error("IK parent must itself have a parent.");C=R.a,A=R.c,P=R.b,T=R.d;var F=1/(C*T-A*P),D=E-R.tx,V=w-R.ty,Y=(D*T-V*A)*F-u,W=(V*C-D*P)*F-f,$=Math.sqrt(Y*Y+W*W),I=r.data.length*y,B,L;if($<1e-4){this.apply1(e,n,i,!1,o,!1,l),r.updateWorldTransformWith(_,S,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);return}D=n-R.tx,V=i-R.ty;var M=(D*T-V*A)*F-u,X=(V*C-D*P)*F-f,K=M*M+X*X;if(c!=0){c*=h*(y+1)*.5;var ne=Math.sqrt(K),te=ne-$-I*h+c;if(te>0){var ce=Math.min(1,te/(c*2))-1;ce=(te-c*(1-ce*ce))/ne,M-=ce*M,X-=ce*X,K=M*M+X*X}}e:if(O){I*=h;var de=(K-$*$-I*I)/(2*$*I);de<-1?(de=-1,L=Math.PI*a):de>1?(de=1,L=0,o&&(C=(Math.sqrt(K)/($+I)-1)*l+1,p*=C,s&&(v*=C))):L=Math.acos(de)*a,C=$+I*de,A=I*Math.sin(L),B=Math.atan2(X*C-M*A,M*C+X*A)}else{C=h*I,A=d*I;var se=C*C,fe=A*A,oe=Math.atan2(X,M);P=fe*$*$+se*K-se*fe;var he=-2*fe*$,Pe=fe-se;if(T=he*he-4*Pe*P,T>=0){var Ie=Math.sqrt(T);he<0&&(Ie=-Ie),Ie=-(he+Ie)*.5;var Ee=Ie/Pe,Be=P/Ie,qe=Math.abs(Ee)<Math.abs(Be)?Ee:Be;if(qe*qe<=K){V=Math.sqrt(K-qe*qe)*a,B=oe-Math.atan2(V,qe),L=Math.atan2(V/d,(qe-$)/h);break e}}var rt=G.PI,Xe=$-C,Ge=Xe*Xe,Qe=0,bt=0,er=$+C,Ct=er*er,It=0;P=-C*$/(se-fe),P>=-1&&P<=1&&(P=Math.acos(P),D=C*Math.cos(P)+$,V=A*Math.sin(P),T=D*D+V*V,T<Ge&&(rt=P,Ge=T,Xe=D,Qe=V),T>Ct&&(bt=P,Ct=T,er=D,It=V)),K<=(Ge+Ct)*.5?(B=oe-Math.atan2(Qe*a,Xe),L=rt*a):(B=oe-Math.atan2(It*a,er),L=bt*a)}var ht=Math.atan2(S,_)*b,Yt=e.arotation;B=(B-ht)*G.radDeg+m-Yt,B>180?B-=360:B<-180&&(B+=360),e.updateWorldTransformWith(u,f,Yt+B*l,p,v,0,0),Yt=r.arotation,L=((L+ht)*G.radDeg-r.ashearX)*b+x-Yt,L>180?L-=360:L<-180&&(L+=360),r.updateWorldTransformWith(_,S,Yt+L*l,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)},t}(),pA=function(t){tt(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return Object.defineProperty(e.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),e}(Av),vA=function(t){tt(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.positionMode=Wt.Fixed,n.spacingMode=Er.Fixed,n.rotateMode=nr.Chain,n.offsetRotation=0,n.position=0,n.spacing=0,n.mixRotate=0,n.mixX=0,n.mixY=0,n}return Object.defineProperty(e.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),e}(Av),Er;(function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"})(Er||(Er={}));var vN=function(){function t(e,r){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,i=e.bones.length;n<i;n++){var a=r.findBone(e.bones[n].name);if(!a)throw new Error("Couldn't find bone "+e.bones[n].name+".");this.bones.push(a)}var o=r.findSlot(e.target.name);if(!o)throw new Error("Couldn't find target bone "+e.target.name);this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof kf){var r=this.mixRotate,n=this.mixX,i=this.mixY;if(!(r==0&&n==0&&i==0)){var a=this.data,o=a.rotateMode==nr.Tangent,s=a.rotateMode==nr.ChainScale,c=this.bones,l=c.length,u=o?l:l+1,f=Q.setArraySize(this.spaces,u),h=s?this.lengths=Q.setArraySize(this.lengths,l):[],d=this.spacing;switch(a.spacingMode){case Er.Percent:if(s)for(var p=0,v=u-1;p<v;p++){var y=c[p],g=y.data.length;if(g<t.epsilon)h[p]=0;else{var m=g*y.matrix.a,x=g*y.matrix.b;h[p]=Math.sqrt(m*m+x*x)}}Q.arrayFill(f,1,u,d);break;case Er.Proportional:for(var b=0,p=0,v=u-1;p<v;){var y=c[p],g=y.data.length;if(g<t.epsilon)s&&(h[p]=0),f[++p]=d;else{var m=g*y.matrix.a,x=g*y.matrix.b,_=Math.sqrt(m*m+x*x);s&&(h[p]=_),f[++p]=_,b+=_}}if(b>0){b=u/b*d;for(var p=1;p<u;p++)f[p]*=b}break;default:for(var S=a.spacingMode==Er.Length,p=0,v=u-1;p<v;){var y=c[p],g=y.data.length;if(g<t.epsilon)s&&(h[p]=0),f[++p]=d;else{var m=g*y.matrix.a,x=g*y.matrix.b,E=Math.sqrt(m*m+x*x);s&&(h[p]=E),f[++p]=(S?g+d:d)*E/g}}}var w=this.computeWorldPositions(e,u,o),C=w[0],A=w[1],P=a.offsetRotation,T=!1;if(P==0)T=a.rotateMode==nr.Chain;else{T=!1;var O=this.target.bone.matrix;P*=O.a*O.d-O.b*O.c>0?G.degRad:-G.degRad}for(var p=0,O=3;p<l;p++,O+=3){var y=c[p],R=y.matrix;R.tx+=(C-R.tx)*n,R.ty+=(A-R.ty)*i;var m=w[O],x=w[O+1],F=m-C,D=x-A;if(s){var V=h[p];if(V!=0){var Y=(Math.sqrt(F*F+D*D)/V-1)*r+1;R.a*=Y,R.b*=Y}}if(C=m,A=x,r>0){var W=R.a,$=R.c,I=R.b,B=R.d,L=0,M=0,X=0;if(o?L=w[O-1]:f[p+1]==0?L=w[O+2]:L=Math.atan2(D,F),L-=Math.atan2(I,W),T){M=Math.cos(L),X=Math.sin(L);var K=y.data.length;C+=(K*(M*W-X*I)-F)*r,A+=(K*(X*W+M*I)-D)*r}else L+=P;L>G.PI?L-=G.PI2:L<-G.PI&&(L+=G.PI2),L*=r,M=Math.cos(L),X=Math.sin(L),R.a=M*W-X*I,R.c=M*$-X*B,R.b=X*W+M*I,R.d=X*$+M*B}y.updateAppliedTransform()}}}},t.prototype.computeWorldPositions=function(e,r,n){var i=this.target,a=this.position,o=this.spaces,s=Q.setArraySize(this.positions,r*3+2),c=this.world,l=e.closed,u=e.worldVerticesLength,f=u/6,h=t.NONE;if(!e.constantSpeed){var d=e.lengths;f-=l?1:2;var p=d[f];this.data.positionMode==Wt.Percent&&(a*=p);var v;switch(this.data.spacingMode){case Er.Percent:v=p;break;case Er.Proportional:v=p/r;break;default:v=1}c=Q.setArraySize(this.world,8);for(var y=0,g=0,m=0;y<r;y++,g+=3){var x=o[y]*v;a+=x;var b=a;if(l)b%=p,b<0&&(b+=p),m=0;else if(b<0){h!=t.BEFORE&&(h=t.BEFORE,e.computeWorldVertices(i,2,4,c,0,2)),this.addBeforePosition(b,c,0,s,g);continue}else if(b>p){h!=t.AFTER&&(h=t.AFTER,e.computeWorldVertices(i,u-6,4,c,0,2)),this.addAfterPosition(b-p,c,0,s,g);continue}for(;;m++){var _=d[m];if(!(b>_)){if(m==0)b/=_;else{var S=d[m-1];b=(b-S)/(_-S)}break}}m!=h&&(h=m,l&&m==f?(e.computeWorldVertices(i,u-4,4,c,0,2),e.computeWorldVertices(i,0,4,c,4,2)):e.computeWorldVertices(i,m*6+2,8,c,0,2)),this.addCurvePosition(b,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],s,g,n||y>0&&x==0)}return s}l?(u+=2,c=Q.setArraySize(this.world,u),e.computeWorldVertices(i,2,u-4,c,0,2),e.computeWorldVertices(i,0,2,c,u-4,2),c[u-2]=c[0],c[u-1]=c[1]):(f--,u-=4,c=Q.setArraySize(this.world,u),e.computeWorldVertices(i,2,u,c,0,2));for(var E=Q.setArraySize(this.curves,f),w=0,C=c[0],A=c[1],P=0,T=0,O=0,R=0,F=0,D=0,V=0,Y=0,W=0,$=0,I=0,B=0,L=0,M=0,y=0,X=2;y<f;y++,X+=6)P=c[X],T=c[X+1],O=c[X+2],R=c[X+3],F=c[X+4],D=c[X+5],V=(C-P*2+O)*.1875,Y=(A-T*2+R)*.1875,W=((P-O)*3-C+F)*.09375,$=((T-R)*3-A+D)*.09375,I=V*2+W,B=Y*2+$,L=(P-C)*.75+V+W*.16666667,M=(T-A)*.75+Y+$*.16666667,w+=Math.sqrt(L*L+M*M),L+=I,M+=B,I+=W,B+=$,w+=Math.sqrt(L*L+M*M),L+=I,M+=B,w+=Math.sqrt(L*L+M*M),L+=I+W,M+=B+$,w+=Math.sqrt(L*L+M*M),E[y]=w,C=F,A=D;this.data.positionMode==Wt.Percent&&(a*=w);var K;switch(this.data.spacingMode){case Er.Percent:K=w;break;case Er.Proportional:K=w/r;break;default:K=1}for(var ne=this.segments,te=0,y=0,g=0,m=0,ce=0;y<r;y++,g+=3){var x=o[y]*K;a+=x;var b=a;if(l)b%=w,b<0&&(b+=w),m=0;else if(b<0){this.addBeforePosition(b,c,0,s,g);continue}else if(b>w){this.addAfterPosition(b-w,c,u-4,s,g);continue}for(;;m++){var de=E[m];if(!(b>de)){if(m==0)b/=de;else{var S=E[m-1];b=(b-S)/(de-S)}break}}if(m!=h){h=m;var se=m*6;for(C=c[se],A=c[se+1],P=c[se+2],T=c[se+3],O=c[se+4],R=c[se+5],F=c[se+6],D=c[se+7],V=(C-P*2+O)*.03,Y=(A-T*2+R)*.03,W=((P-O)*3-C+F)*.006,$=((T-R)*3-A+D)*.006,I=V*2+W,B=Y*2+$,L=(P-C)*.3+V+W*.16666667,M=(T-A)*.3+Y+$*.16666667,te=Math.sqrt(L*L+M*M),ne[0]=te,se=1;se<8;se++)L+=I,M+=B,I+=W,B+=$,te+=Math.sqrt(L*L+M*M),ne[se]=te;L+=I,M+=B,te+=Math.sqrt(L*L+M*M),ne[8]=te,L+=I+W,M+=B+$,te+=Math.sqrt(L*L+M*M),ne[9]=te,ce=0}for(b*=te;;ce++){var fe=ne[ce];if(!(b>fe)){if(ce==0)b/=fe;else{var S=ne[ce-1];b=ce+(b-S)/(fe-S)}break}}this.addCurvePosition(b*.1,C,A,P,T,O,R,F,D,s,g,n||y>0&&x==0)}return s},t.prototype.addBeforePosition=function(e,r,n,i,a){var o=r[n],s=r[n+1],c=r[n+2]-o,l=r[n+3]-s,u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addAfterPosition=function(e,r,n,i,a){var o=r[n+2],s=r[n+3],c=o-r[n],l=s-r[n+1],u=Math.atan2(l,c);i[a]=o+e*Math.cos(u),i[a+1]=s+e*Math.sin(u),i[a+2]=u},t.prototype.addCurvePosition=function(e,r,n,i,a,o,s,c,l,u,f,h){if(e==0||isNaN(e)){u[f]=r,u[f+1]=n,u[f+2]=Math.atan2(a-n,i-r);return}var d=e*e,p=d*e,v=1-e,y=v*v,g=y*v,m=v*e,x=m*3,b=v*x,_=x*e,S=r*g+i*b+o*_+c*p,E=n*g+a*b+s*_+l*p;u[f]=S,u[f+1]=E,h&&(e<.001?u[f+2]=Math.atan2(a-n,i-r):u[f+2]=Math.atan2(E-(n*y+a*m*2+s*d),S-(r*y+i*m*2+o*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),mN=function(){function t(e,r){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!e)throw new Error("data cannot be null.");if(!r)throw new Error("bone cannot be null.");this.data=e,this.bone=r,this.color=new _e,this.darkColor=e.darkColor?new _e:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getSkeleton=function(){return this.bone.skeleton},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&((!(e instanceof ca)||!(this.attachment instanceof ca)||e.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null},t}(),gN=function(){function t(e,r){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new wf,this.active=!1,!e)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=r.findBone(e.bones[n].name);if(!i)throw new Error("Couldn't find bone "+e.bones[n].name+".");this.bones.push(i)}var a=r.findBone(e.target.name);if(!a)throw new Error("Couldn't find target bone "+e.target.name+".");this.target=a}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},t.prototype.applyAbsoluteWorld=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=r!=0||n!=0,c=this.target,l=c.matrix,u=l.a,f=l.c,h=l.b,d=l.d,p=u*d-f*h>0?G.degRad:-G.degRad,v=this.data.offsetRotation*p,y=this.data.offsetShearY*p,g=this.bones,m=0,x=g.length;m<x;m++){var b=g[m],_=b.matrix;if(e!=0){var S=_.a,E=_.c,w=_.b,C=_.d,A=Math.atan2(h,u)-Math.atan2(w,S)+v;A>G.PI?A-=G.PI2:A<-G.PI&&(A+=G.PI2),A*=e;var P=Math.cos(A),T=Math.sin(A);_.a=P*S-T*w,_.c=P*E-T*C,_.b=T*S+P*w,_.d=T*E+P*C}if(s){var O=this.temp;c.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),_.tx+=(O.x-_.tx)*r,_.ty+=(O.y-_.ty)*n}if(i!=0){var R=Math.sqrt(_.a*_.a+_.b*_.b);R!=0&&(R=(R+(Math.sqrt(u*u+h*h)-R+this.data.offsetScaleX)*i)/R),_.a*=R,_.b*=R}if(a!=0){var R=Math.sqrt(_.c*_.c+_.d*_.d);R!=0&&(R=(R+(Math.sqrt(f*f+d*d)-R+this.data.offsetScaleY)*a)/R),_.c*=R,_.d*=R}if(o>0){var E=_.c,C=_.d,F=Math.atan2(C,E),A=Math.atan2(d,f)-Math.atan2(h,u)-(F-Math.atan2(_.b,_.a));A>G.PI?A-=G.PI2:A<-G.PI&&(A+=G.PI2),A=F+(A+y)*o;var R=Math.sqrt(E*E+C*C);_.c=Math.cos(A)*R,_.d=Math.sin(A)*R}b.updateAppliedTransform()}},t.prototype.applyRelativeWorld=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=r!=0||n!=0,c=this.target,l=c.matrix,u=l.a,f=l.c,h=l.b,d=l.d,p=u*d-f*h>0?G.degRad:-G.degRad,v=this.data.offsetRotation*p,y=this.data.offsetShearY*p,g=this.bones,m=0,x=g.length;m<x;m++){var b=g[m],_=b.matrix;if(e!=0){var S=_.a,E=_.c,w=_.b,C=_.d,A=Math.atan2(h,u)+v;A>G.PI?A-=G.PI2:A<-G.PI&&(A+=G.PI2),A*=e;var P=Math.cos(A),T=Math.sin(A);_.a=P*S-T*w,_.c=P*E-T*C,_.b=T*S+P*w,_.d=T*E+P*C}if(s){var O=this.temp;c.localToWorld(O.set(this.data.offsetX,this.data.offsetY)),_.tx+=O.x*r,_.ty+=O.y*n}if(i!=0){var R=(Math.sqrt(u*u+h*h)-1+this.data.offsetScaleX)*i+1;_.a*=R,_.b*=R}if(a!=0){var R=(Math.sqrt(f*f+d*d)-1+this.data.offsetScaleY)*a+1;_.c*=R,_.d*=R}if(o>0){var A=Math.atan2(d,f)-Math.atan2(h,u);A>G.PI?A-=G.PI2:A<-G.PI&&(A+=G.PI2);var E=_.c,C=_.d;A=Math.atan2(C,E)+(A-G.PI/2+y)*o;var R=Math.sqrt(E*E+C*C);_.c=Math.cos(A)*R,_.d=Math.sin(A)*R}b.updateAppliedTransform()}},t.prototype.applyAbsoluteLocal=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=this.target,c=this.bones,l=0,u=c.length;l<u;l++){var f=c[l],h=f.arotation;if(e!=0){var d=s.arotation-h+this.data.offsetRotation;d-=(16384-(16384.499999999996-d/360|0))*360,h+=d*e}var p=f.ax,v=f.ay;p+=(s.ax-p+this.data.offsetX)*r,v+=(s.ay-v+this.data.offsetY)*n;var y=f.ascaleX,g=f.ascaleY;i!=0&&y!=0&&(y=(y+(s.ascaleX-y+this.data.offsetScaleX)*i)/y),a!=0&&g!=0&&(g=(g+(s.ascaleY-g+this.data.offsetScaleY)*a)/g);var m=f.ashearY;if(o!=0){var d=s.ashearY-m+this.data.offsetShearY;d-=(16384-(16384.499999999996-d/360|0))*360,m+=d*o}f.updateWorldTransformWith(p,v,h,y,g,f.ashearX,m)}},t.prototype.applyRelativeLocal=function(){for(var e=this.mixRotate,r=this.mixX,n=this.mixY,i=this.mixScaleX,a=this.mixScaleY,o=this.mixShearY,s=this.target,c=this.bones,l=0,u=c.length;l<u;l++){var f=c[l],h=f.arotation+(s.arotation+this.data.offsetRotation)*e,d=f.ax+(s.ax+this.data.offsetX)*r,p=f.ay+(s.ay+this.data.offsetY)*n,v=f.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*i+1),y=f.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*a+1),g=f.ashearY+(s.ashearY+this.data.offsetShearY)*o;f.updateWorldTransformWith(d,p,h,v,y,f.ashearX,g)}},t}(),yN=function(){function t(e){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var n=e.bones[r],i=void 0;if(!n.parent)i=new q1(n,this,null);else{var a=this.bones[n.parent.index];i=new q1(n,this,a),a.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(var r=0;r<e.slots.length;r++){var o=e.slots[r],i=this.bones[o.boneData.index],s=new mN(o,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var r=0;r<e.ikConstraints.length;r++){var c=e.ikConstraints[r];this.ikConstraints.push(new pN(c,this))}this.transformConstraints=new Array;for(var r=0;r<e.transformConstraints.length;r++){var l=e.transformConstraints[r];this.transformConstraints.push(new gN(l,this))}this.pathConstraints=new Array;for(var r=0;r<e.pathConstraints.length;r++){var u=e.pathConstraints[r];this.pathConstraints.push(new vN(u,this))}this.color=new _e(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var e=this._updateCache;e.length=0;for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin)for(var o=this.skin.bones,n=0,i=this.skin.bones.length;n<i;n++){var a=this.bones[o[n].index];do a.sorted=!1,a.active=!0,a=a.parent;while(a)}var s=this.ikConstraints,c=this.transformConstraints,l=this.pathConstraints,u=s.length,f=c.length,h=l.length,d=u+f+h;e:for(var n=0;n<d;n++){for(var p=0;p<u;p++){var v=s[p];if(v.data.order==n){this.sortIkConstraint(v);continue e}}for(var p=0;p<f;p++){var v=c[p];if(v.data.order==n){this.sortTransformConstraint(v);continue e}}for(var p=0;p<h;p++){var v=l[p];if(v.data.order==n){this.sortPathConstraint(v);continue e}}}for(var n=0,i=r.length;n<i;n++)this.sortBone(r[n])},t.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&Q.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target;this.sortBone(r);var n=e.bones,i=n[0];if(this.sortBone(i),n.length==1)this._updateCache.push(e),this.sortReset(i.children);else{var a=n[n.length-1];this.sortBone(a),this._updateCache.push(e),this.sortReset(i.children),a.sorted=!0}}},t.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&Q.contains(this.skin.constraints,e.data,!0)),!!e.active){var r=e.target,n=r.data.index,i=r.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,i);var s=r.getAttachment();s instanceof kf&&this.sortPathConstraintAttachmentWith(s,i);for(var c=e.bones,l=c.length,a=0;a<l;a++)this.sortBone(c[a]);this._updateCache.push(e);for(var a=0;a<l;a++)this.sortReset(c[a].children);for(var a=0;a<l;a++)c[a].sorted=!0}},t.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&Q.contains(this.skin.constraints,e.data,!0)),!!e.active){this.sortBone(e.target);var r=e.bones,n=r.length;if(e.data.local)for(var i=0;i<n;i++){var a=r[i];this.sortBone(a.parent),this.sortBone(a)}else for(var i=0;i<n;i++)this.sortBone(r[i]);this._updateCache.push(e);for(var i=0;i<n;i++)this.sortReset(r[i].children);for(var i=0;i<n;i++)r[i].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(e,r,n){var i=e.attachments[r];if(i)for(var a in i)this.sortPathConstraintAttachmentWith(i[a],n)},t.prototype.sortPathConstraintAttachmentWith=function(e,r){if(e instanceof kf){var n=e.bones;if(!n)this.sortBone(r);else for(var i=this.bones,a=0,o=n.length;a<o;){var s=n[a++];for(s+=a;a<s;)this.sortBone(i[n[a++]])}}},t.prototype.sortBone=function(e){if(e&&!e.sorted){var r=e.parent;r&&this.sortBone(r),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var r=0,n=e.length;r<n;r++){var i=e[r];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++){var i=e[r];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}for(var a=this._updateCache,r=0,n=a.length;r<n;r++)a[r].update()},t.prototype.updateWorldTransformWith=function(e){var r=this.getRootBone(),n=e.matrix.a,i=e.matrix.c,a=e.matrix.b,o=e.matrix.d;r.matrix.tx=n*this.x+i*this.y+e.worldX,r.matrix.ty=a*this.x+o*this.y+e.worldY;var s=r.rotation+90+r.shearY,c=G.cosDeg(r.rotation+r.shearX)*r.scaleX,l=G.cosDeg(s)*r.scaleY,u=G.sinDeg(r.rotation+r.shearX)*r.scaleX,f=G.sinDeg(s)*r.scaleY,h=this.scaleX,d=-this.scaleY;r.matrix.a=(n*c+i*u)*h,r.matrix.c=(n*l+i*f)*h,r.matrix.b=(a*c+o*u)*d,r.matrix.d=(a*l+o*f)*d;for(var p=this._updateCache,v=0,y=p.length;v<y;v++){var g=p[v];g!=r&&g.update()}},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,r=0,n=e.length;r<n;r++)e[r].setToSetupPose();for(var i=this.ikConstraints,r=0,n=i.length;r<n;r++){var a=i[r];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var o=this.transformConstraints,r=0,n=o.length;r<n;r++){var a=o[r],s=a.data;a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY,a.mixScaleX=s.mixScaleX,a.mixScaleY=s.mixScaleY,a.mixShearY=s.mixShearY}for(var c=this.pathConstraints,r=0,n=c.length;r<n;r++){var a=c[r],s=a.data;a.position=s.position,a.spacing=s.spacing,a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY}},t.prototype.setSlotsToSetupPose=function(){var e=this.slots;Q.arrayCopy(e,0,this.drawOrder,0,e.length);for(var r=0,n=e.length;r<n;r++)e[r].setToSetupPose()},t.prototype.getRootBone=function(){return this.bones.length==0?null:this.bones[0]},t.prototype.findBone=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var r=this.data.findSkin(e);if(!r)throw new Error("Skin not found: "+e);this.setSkin(r)},t.prototype.setSkin=function(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n],o=a.data.attachmentName;if(o){var s=e.getAttachment(n,o);s&&a.setAttachment(s)}}this.skin=e,this.updateCache()}},t.prototype.getAttachmentByName=function(e,r){var n=this.data.findSlot(e);if(!n)throw new Error("Can't find slot with name "+e);return this.getAttachment(n.index,r)},t.prototype.getAttachment=function(e,r){if(!r)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(e,r);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,r):null},t.prototype.setAttachment=function(e,r){if(!e)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,a=n.length;i<a;i++){var o=n[i];if(o.data.name==e){var s=null;if(r&&(s=this.getAttachment(i,r),!s))throw new Error("Attachment not found: "+r+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.data.name==e)return a}return null},t.prototype.getBoundsRect=function(){var e=new wf,r=new wf;return this.getBounds(e,r),{x:e.x,y:e.y,width:r.x,height:r.y}},t.prototype.getBounds=function(e,r,n){if(n===void 0&&(n=new Array(2)),!e)throw new Error("offset cannot be null.");if(!r)throw new Error("size cannot be null.");for(var i=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=0,u=i.length;l<u;l++){var f=i[l];if(f.bone.active){var h=0,d=null,p=f.getAttachment();if(p instanceof Uw)h=8,d=Q.setArraySize(n,h,0),p.computeWorldVertices(f,d,0,2);else if(p instanceof bv){var v=p;h=v.worldVerticesLength,d=Q.setArraySize(n,h,0),v.computeWorldVertices(f,0,h,d,0,2)}if(d)for(var y=0,g=d.length;y<g;y+=2){var m=d[y],x=d[y+1];a=Math.min(a,m),o=Math.min(o,x),s=Math.max(s,m),c=Math.max(c,x)}}}e.set(a,o),r.set(s-a,c-o)},Object.defineProperty(t.prototype,"flipX",{get:function(){return this.scaleX==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this.scaleY==-1},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),mA=function(){function t(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return t.prototype.findBone=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findBoneIndex=function(e){if(!e)throw new Error("boneName cannot be null.");for(var r=this.bones,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSlot=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findSlotIndex=function(e){if(!e)throw new Error("slotName cannot be null.");for(var r=this.slots,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t.prototype.findSkin=function(e){if(!e)throw new Error("skinName cannot be null.");for(var r=this.skins,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findEvent=function(e){if(!e)throw new Error("eventDataName cannot be null.");for(var r=this.events,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findAnimation=function(e){if(!e)throw new Error("animationName cannot be null.");for(var r=this.animations,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findIkConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findTransformConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraint=function(e){if(!e)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++){var a=r[n];if(a.name==e)return a}return null},t.prototype.findPathConstraintIndex=function(e){if(e==null)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,n=0,i=r.length;n<i;n++)if(r[n].name==e)return n;return-1},t}(),gA=function(){function t(e,r,n){if(this.index=0,this.color=new _e(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Ce.NORMAL,e<0)throw new Error("index must be >= 0.");if(!r)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n}return t}(),yA=function(t){tt(e,t);function e(r){var n=t.call(this,r,0,!1)||this;return n.bones=new Array,n._target=null,n.mixRotate=0,n.mixX=0,n.mixY=0,n.mixScaleX=0,n.mixScaleY=0,n.mixShearY=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return Object.defineProperty(e.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(r){this._target=r},enumerable:!1,configurable:!0}),e}(Av),K1=function(){function t(e,r,n){this.slotIndex=e,this.name=r,this.attachment=n}return t}(),Dp=function(){function t(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}return t.prototype.setAttachment=function(e,r,n){if(!n)throw new Error("attachment cannot be null.");var i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][r]=n},t.prototype.addSkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];this.setAttachment(c.slotIndex,c.name,c.attachment)}},t.prototype.copySkin=function(e){for(var r=0;r<e.bones.length;r++){for(var n=e.bones[r],i=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){i=!0;break}i||this.bones.push(n)}for(var r=0;r<e.constraints.length;r++){for(var o=e.constraints[r],i=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){i=!0;break}i||this.constraints.push(o)}for(var s=e.getAttachments(),r=0;r<s.length;r++){var c=s[r];c.attachment&&(c.attachment instanceof bv?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},t.prototype.getAttachment=function(e,r){var n=this.attachments[e];return n?n[r]:null},t.prototype.removeAttachment=function(e,r){var n=this.attachments[e];n&&delete n[r]},t.prototype.getAttachments=function(){for(var e=new Array,r=0;r<this.attachments.length;r++){var n=this.attachments[r];if(n)for(var i in n){var a=n[i];a&&e.push(new K1(r,i,a))}}return e},t.prototype.getAttachmentsForSlot=function(e,r){var n=this.attachments[e];if(n)for(var i in n){var a=n[i];a&&r.push(new K1(e,i,a))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(e,r){for(var n=0,i=0;i<e.slots.length;i++){var a=e.slots[i],o=a.getAttachment();if(o&&n<r.attachments.length){var s=r.attachments[n];for(var c in s){var l=s[c];if(o==l){var u=this.getAttachment(n,c);u&&a.setAttachment(u);break}}}n++}},t}(),xN=function(){function t(e){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new mA;n.name="";var i=new Op(e),a=i.readInt32(),o=i.readInt32();n.hash=o==0&&a==0?null:o.toString(16)+a.toString(16),n.version=i.readString();var s=n.version.substr(0,3);if(s!=="4.0"&&s!=="4.1"){var c="Spine 4.1 loader cant load version "+n.version+". Please configure your pixi-spine bundle";console.error(c)}this.ver40=s==="4.0",n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat();var l=i.readBoolean();l&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());var u=0;u=i.readInt(!0);for(var f=0;f<u;f++){var h=i.readString();if(!h)throw new Error("String in string table must not be null.");i.strings.push(h)}u=i.readInt(!0);for(var f=0;f<u;f++){var d=i.readString();if(!d)throw new Error("Bone name must not be null.");var p=f==0?null:n.bones[i.readInt(!0)],v=new fA(f,d,p);v.rotation=i.readFloat(),v.x=i.readFloat()*r,v.y=i.readFloat()*r,v.scaleX=i.readFloat(),v.scaleY=i.readFloat(),v.shearX=i.readFloat(),v.shearY=i.readFloat(),v.length=i.readFloat()*r,v.transformMode=i.readInt(!0),v.skinRequired=i.readBoolean(),l&&_e.rgba8888ToColor(v.color,i.readInt32()),n.bones.push(v)}u=i.readInt(!0);for(var f=0;f<u;f++){var y=i.readString();if(!y)throw new Error("Slot name must not be null.");var g=n.bones[i.readInt(!0)],v=new gA(f,y,g);_e.rgba8888ToColor(v.color,i.readInt32());var m=i.readInt32();m!=-1&&_e.rgb888ToColor(v.darkColor=new _e,m),v.attachmentName=i.readStringRef(),v.blendMode=i.readInt(!0),n.slots.push(v)}u=i.readInt(!0);for(var f=0,x=void 0;f<u;f++){var b=i.readString();if(!b)throw new Error("IK constraint data name must not be null.");var v=new pA(b);v.order=i.readInt(!0),v.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var _=0;_<x;_++)v.bones.push(n.bones[i.readInt(!0)]);v.target=n.bones[i.readInt(!0)],v.mix=i.readFloat(),v.softness=i.readFloat()*r,v.bendDirection=i.readByte(),v.compress=i.readBoolean(),v.stretch=i.readBoolean(),v.uniform=i.readBoolean(),n.ikConstraints.push(v)}u=i.readInt(!0);for(var f=0,x=void 0;f<u;f++){var S=i.readString();if(!S)throw new Error("Transform constraint data name must not be null.");var v=new yA(S);v.order=i.readInt(!0),v.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var _=0;_<x;_++)v.bones.push(n.bones[i.readInt(!0)]);v.target=n.bones[i.readInt(!0)],v.local=i.readBoolean(),v.relative=i.readBoolean(),v.offsetRotation=i.readFloat(),v.offsetX=i.readFloat()*r,v.offsetY=i.readFloat()*r,v.offsetScaleX=i.readFloat(),v.offsetScaleY=i.readFloat(),v.offsetShearY=i.readFloat(),v.mixRotate=i.readFloat(),v.mixX=i.readFloat(),v.mixY=i.readFloat(),v.mixScaleX=i.readFloat(),v.mixScaleY=i.readFloat(),v.mixShearY=i.readFloat(),n.transformConstraints.push(v)}u=i.readInt(!0);for(var f=0,x=void 0;f<u;f++){var E=i.readString();if(!E)throw new Error("Path constraint data name must not be null.");var v=new vA(E);v.order=i.readInt(!0),v.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var _=0;_<x;_++)v.bones.push(n.bones[i.readInt(!0)]);v.target=n.slots[i.readInt(!0)],v.positionMode=i.readInt(!0),v.spacingMode=i.readInt(!0),v.rotateMode=i.readInt(!0),v.offsetRotation=i.readFloat(),v.position=i.readFloat(),v.positionMode==Wt.Fixed&&(v.position*=r),v.spacing=i.readFloat(),(v.spacingMode==Er.Length||v.spacingMode==Er.Fixed)&&(v.spacing*=r),v.mixRotate=i.readFloat(),v.mixX=i.readFloat(),v.mixY=i.readFloat(),n.pathConstraints.push(v)}var w=this.readSkin(i,n,!0,l);w&&(n.defaultSkin=w,n.skins.push(w));{var f=n.skins.length;for(Q.setArraySize(n.skins,u=f+i.readInt(!0));f<u;f++){var C=this.readSkin(i,n,!1,l);if(!C)throw new Error("readSkin() should not have returned null.");n.skins[f]=C}}u=this.linkedMeshes.length;for(var f=0;f<u;f++){var A=this.linkedMeshes[f],C=A.skin?n.findSkin(A.skin):n.defaultSkin;if(!C)throw new Error("Not skin found for linked mesh.");if(!A.parent)throw new Error("Linked mesh parent must not be null");var P=C.getAttachment(A.slotIndex,A.parent);if(!P)throw new Error("Parent mesh not found: "+A.parent);A.mesh.timelineAttachment=A.inheritTimeline?P:A.mesh,A.mesh.setParentMesh(P)}this.linkedMeshes.length=0,u=i.readInt(!0);for(var f=0;f<u;f++){var T=i.readStringRef();if(!T)throw new Error;var v=new dA(T);v.intValue=i.readInt(!1),v.floatValue=i.readFloat(),v.stringValue=i.readString(),v.audioPath=i.readString(),v.audioPath&&(v.volume=i.readFloat(),v.balance=i.readFloat()),n.events.push(v)}u=i.readInt(!0);for(var f=0;f<u;f++){var O=i.readString();if(!O)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(i,O,n))}return n},t.prototype.readSkin=function(e,r,n,i){var a=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;a=new Dp("default")}else{var s=e.readStringRef();if(!s)throw new Error("Skin name must not be null.");a=new Dp(s),a.bones.length=e.readInt(!0);for(var c=0,l=a.bones.length;c<l;c++)a.bones[c]=r.bones[e.readInt(!0)];for(var c=0,l=e.readInt(!0);c<l;c++)a.constraints.push(r.ikConstraints[e.readInt(!0)]);for(var c=0,l=e.readInt(!0);c<l;c++)a.constraints.push(r.transformConstraints[e.readInt(!0)]);for(var c=0,l=e.readInt(!0);c<l;c++)a.constraints.push(r.pathConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(var c=0;c<o;c++)for(var u=e.readInt(!0),f=0,h=e.readInt(!0);f<h;f++){var d=e.readStringRef();if(!d)throw new Error("Attachment name must not be null");var p=this.readAttachment(e,r,a,u,d,i);p&&a.setAttachment(u,d,p)}return a},t.prototype.readAttachment=function(e,r,n,i,a,o){var s=this.scale,c=e.readStringRef();switch(c||(c=a),e.readByte()){case et.Region:{var l=e.readStringRef(),u=e.readFloat(),f=e.readFloat(),h=e.readFloat(),d=e.readFloat(),p=e.readFloat(),v=e.readFloat(),y=e.readFloat(),g=e.readInt32(),m=this.readSequence(e);l||(l=c);var x=this.attachmentLoader.newRegionAttachment(n,c,l,m);return x?(x.path=l,x.x=f*s,x.y=h*s,x.scaleX=d,x.scaleY=p,x.rotation=u,x.width=v*s,x.height=y*s,_e.rgba8888ToColor(x.color,g),x.sequence=m,m==null&&x.updateRegion(),x):null}case et.BoundingBox:{var b=e.readInt(!0),_=this.readVertices(e,b),g=o?e.readInt32():0,S=this.attachmentLoader.newBoundingBoxAttachment(n,c);return S?(S.worldVerticesLength=b<<1,S.vertices=_.vertices,S.bones=_.bones,o&&_e.rgba8888ToColor(S.color,g),S):null}case et.Mesh:{var l=e.readStringRef(),g=e.readInt32(),b=e.readInt(!0),E=this.readFloatArray(e,b<<1,1),w=this.readShortArray(e),_=this.readVertices(e,b),C=e.readInt(!0),m=this.readSequence(e),A=[],v=0,y=0;o&&(A=this.readShortArray(e),v=e.readFloat(),y=e.readFloat()),l||(l=c);var P=this.attachmentLoader.newMeshAttachment(n,c,l,m);return P?(P.path=l,_e.rgba8888ToColor(P.color,g),P.bones=_.bones,P.vertices=_.vertices,P.worldVerticesLength=b<<1,P.triangles=w,P.regionUVs=new Float32Array(E),P.hullLength=C<<1,P.sequence=m,o&&(P.edges=A,P.width=v*s,P.height=y*s),P):null}case et.LinkedMesh:{var l=e.readStringRef(),g=e.readInt32(),T=e.readStringRef(),O=e.readStringRef(),R=e.readBoolean(),m=this.readSequence(e),v=0,y=0;o&&(v=e.readFloat(),y=e.readFloat()),l||(l=c);var P=this.attachmentLoader.newMeshAttachment(n,c,l,m);return P?(P.path=l,_e.rgba8888ToColor(P.color,g),P.sequence=m,o&&(P.width=v*s,P.height=y*s),this.linkedMeshes.push(new K_e(P,T,i,O,R)),P):null}case et.Path:{for(var F=e.readBoolean(),D=e.readBoolean(),b=e.readInt(!0),_=this.readVertices(e,b),V=Q.newArray(b/3,0),Y=0,W=V.length;Y<W;Y++)V[Y]=e.readFloat()*s;var g=o?e.readInt32():0,l=this.attachmentLoader.newPathAttachment(n,c);return l?(l.closed=F,l.constantSpeed=D,l.worldVerticesLength=b<<1,l.vertices=_.vertices,l.bones=_.bones,l.lengths=V,o&&_e.rgba8888ToColor(l.color,g),l):null}case et.Point:{var u=e.readFloat(),f=e.readFloat(),h=e.readFloat(),g=o?e.readInt32():0,$=this.attachmentLoader.newPointAttachment(n,c);return $?($.x=f*s,$.y=h*s,$.rotation=u,o&&_e.rgba8888ToColor($.color,g),$):null}case et.Clipping:{var I=e.readInt(!0),b=e.readInt(!0),_=this.readVertices(e,b),g=o?e.readInt32():0,B=this.attachmentLoader.newClippingAttachment(n,c);return B?(B.endSlot=r.slots[I],B.worldVerticesLength=b<<1,B.vertices=_.vertices,B.bones=_.bones,o&&_e.rgba8888ToColor(B.color,g),B):null}}return null},t.prototype.readSequence=function(e){if(this.ver40||!e.readBoolean())return null;var r=new $w(e.readInt(!0));return r.start=e.readInt(!0),r.digits=e.readInt(!0),r.setupIndex=e.readInt(!0),r},t.prototype.readDeformTimelineType=function(e){return this.ver40?UR:e.readByte()},t.prototype.readVertices=function(e,r){var n=this.scale,i=r<<1,a=new Z_e;if(!e.readBoolean())return a.vertices=this.readFloatArray(e,i,n),a;for(var o=new Array,s=new Array,c=0;c<r;c++){var l=e.readInt(!0);s.push(l);for(var u=0;u<l;u++)s.push(e.readInt(!0)),o.push(e.readFloat()*n),o.push(e.readFloat()*n),o.push(e.readFloat())}return a.vertices=Q.toFloatArray(o),a.bones=s,a},t.prototype.readFloatArray=function(e,r,n){var i=new Array(r);if(n==1)for(var a=0;a<r;a++)i[a]=e.readFloat();else for(var a=0;a<r;a++)i[a]=e.readFloat()*n;return i},t.prototype.readShortArray=function(e){for(var r=e.readInt(!0),n=new Array(r),i=0;i<r;i++)n[i]=e.readShort();return n},t.prototype.readAnimation=function(e,r,n){e.readInt(!0);for(var i=new Array,a=this.scale,o=0,s=e.readInt(!0);o<s;o++)for(var c=e.readInt(!0),l=0,u=e.readInt(!0);l<u;l++){var f=e.readByte(),h=e.readInt(!0),d=h-1;switch(f){case l1e:{for(var p=new us(h,c),v=0;v<h;v++)p.setFrame(v,e.readFloat(),e.readStringRef());i.push(p);break}case u1e:{for(var y=e.readInt(!0),p=new Qw(h,y,c),g=e.readFloat(),m=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,_=e.readUnsignedByte()/255,v=0,S=0;p.setFrame(v,g,m,x,b,_),v!=d;v++){var E=e.readFloat(),w=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,P=e.readUnsignedByte()/255;switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,m,w,1),lt(e,p,S++,v,1,g,E,x,C,1),lt(e,p,S++,v,2,g,E,b,A,1),lt(e,p,S++,v,3,g,E,_,P,1)}g=E,m=w,x=C,b=A,_=P}i.push(p);break}case c1e:{for(var y=e.readInt(!0),p=new Jw(h,y,c),g=e.readFloat(),m=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,v=0,S=0;p.setFrame(v,g,m,x,b),v!=d;v++){var E=e.readFloat(),w=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255;switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,m,w,1),lt(e,p,S++,v,1,g,E,x,C,1),lt(e,p,S++,v,2,g,E,b,A,1)}g=E,m=w,x=C,b=A}i.push(p);break}case f1e:{for(var y=e.readInt(!0),p=new tA(h,y,c),g=e.readFloat(),m=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,_=e.readUnsignedByte()/255,w=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,v=0,S=0;p.setFrame(v,g,m,x,b,_,w,C,A),v!=d;v++){var E=e.readFloat(),T=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,R=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,V=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255;switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,m,T,1),lt(e,p,S++,v,1,g,E,x,O,1),lt(e,p,S++,v,2,g,E,b,R,1),lt(e,p,S++,v,3,g,E,_,F,1),lt(e,p,S++,v,4,g,E,w,D,1),lt(e,p,S++,v,5,g,E,C,V,1),lt(e,p,S++,v,6,g,E,A,Y,1)}g=E,m=T,x=O,b=R,_=F,w=D,C=V,A=Y}i.push(p);break}case h1e:{for(var y=e.readInt(!0),p=new rA(h,y,c),g=e.readFloat(),m=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,w=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,v=0,S=0;p.setFrame(v,g,m,x,b,w,C,A),v!=d;v++){var E=e.readFloat(),T=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,R=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,V=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255;switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,m,T,1),lt(e,p,S++,v,1,g,E,x,O,1),lt(e,p,S++,v,2,g,E,b,R,1),lt(e,p,S++,v,3,g,E,w,D,1),lt(e,p,S++,v,4,g,E,C,V,1),lt(e,p,S++,v,5,g,E,A,Y,1)}g=E,m=T,x=O,b=R,w=D,C=V,A=Y}i.push(p);break}case d1e:{for(var p=new eA(h,e.readInt(!0),c),g=e.readFloat(),_=e.readUnsignedByte()/255,v=0,S=0;p.setFrame(v,g,_),v!=d;v++){var E=e.readFloat(),P=e.readUnsignedByte()/255;switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,_,P,1)}g=E,_=P}i.push(p)}}}for(var o=0,s=e.readInt(!0);o<s;o++)for(var W=e.readInt(!0),l=0,u=e.readInt(!0);l<u;l++){var $=e.readByte(),h=e.readInt(!0),y=e.readInt(!0);switch($){case Q_e:i.push(Ea(e,new Df(h,y,W),1));break;case J_e:i.push(Ry(e,new Gw(h,y,W),a));break;case e1e:i.push(Ea(e,new zw(h,y,W),a));break;case t1e:i.push(Ea(e,new Ww(h,y,W),a));break;case r1e:i.push(Ry(e,new Xw(h,y,W),1));break;case n1e:i.push(Ea(e,new Hw(h,y,W),1));break;case i1e:i.push(Ea(e,new Yw(h,y,W),1));break;case a1e:i.push(Ry(e,new qw(h,y,W),1));break;case o1e:i.push(Ea(e,new Kw(h,y,W),1));break;case s1e:i.push(Ea(e,new Zw(h,y,W),1))}}for(var o=0,s=e.readInt(!0);o<s;o++){for(var I=e.readInt(!0),h=e.readInt(!0),d=h-1,p=new iA(h,e.readInt(!0),I),g=e.readFloat(),B=e.readFloat(),L=e.readFloat()*a,v=0,S=0;p.setFrame(v,g,B,L,e.readByte(),e.readBoolean(),e.readBoolean()),v!=d;v++){var E=e.readFloat(),M=e.readFloat(),X=e.readFloat()*a;switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,B,M,1),lt(e,p,S++,v,1,g,E,L,X,a)}g=E,B=M,L=X}i.push(p)}for(var o=0,s=e.readInt(!0);o<s;o++){for(var I=e.readInt(!0),h=e.readInt(!0),d=h-1,p=new aA(h,e.readInt(!0),I),g=e.readFloat(),K=e.readFloat(),ne=e.readFloat(),te=e.readFloat(),ce=e.readFloat(),de=e.readFloat(),se=e.readFloat(),v=0,S=0;p.setFrame(v,g,K,ne,te,ce,de,se),v!=d;v++){var E=e.readFloat(),fe=e.readFloat(),oe=e.readFloat(),he=e.readFloat(),Pe=e.readFloat(),Ie=e.readFloat(),Ee=e.readFloat();switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,K,fe,1),lt(e,p,S++,v,1,g,E,ne,oe,1),lt(e,p,S++,v,2,g,E,te,he,1),lt(e,p,S++,v,3,g,E,ce,Pe,1),lt(e,p,S++,v,4,g,E,de,Ie,1),lt(e,p,S++,v,5,g,E,se,Ee,1)}g=E,K=fe,ne=oe,te=he,ce=Pe,de=Ie,se=Ee}i.push(p)}for(var o=0,s=e.readInt(!0);o<s;o++)for(var I=e.readInt(!0),Be=n.pathConstraints[I],l=0,u=e.readInt(!0);l<u;l++)switch(e.readByte()){case v1e:i.push(Ea(e,new oA(e.readInt(!0),e.readInt(!0),I),Be.positionMode==Wt.Fixed?a:1));break;case m1e:i.push(Ea(e,new sA(e.readInt(!0),e.readInt(!0),I),Be.spacingMode==Er.Length||Be.spacingMode==Er.Fixed?a:1));break;case g1e:for(var p=new lA(e.readInt(!0),e.readInt(!0),I),g=e.readFloat(),K=e.readFloat(),ne=e.readFloat(),te=e.readFloat(),v=0,S=0,d=p.getFrameCount()-1;p.setFrame(v,g,K,ne,te),v!=d;v++){var E=e.readFloat(),fe=e.readFloat(),oe=e.readFloat(),he=e.readFloat();switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,K,fe,1),lt(e,p,S++,v,1,g,E,ne,oe,1),lt(e,p,S++,v,2,g,E,te,he,1)}g=E,K=fe,ne=oe,te=he}i.push(p)}for(var o=0,s=e.readInt(!0);o<s;o++)for(var qe=n.skins[e.readInt(!0)],l=0,u=e.readInt(!0);l<u;l++)for(var c=e.readInt(!0),rt=0,Xe=e.readInt(!0);rt<Xe;rt++){var Ge=e.readStringRef();if(!Ge)throw new Error("attachmentName must not be null.");var Qe=qe.getAttachment(c,Ge),f=this.readDeformTimelineType(e),h=e.readInt(!0),d=h-1;switch(f){case UR:{for(var bt=Qe,er=bt.bones,Ct=bt.vertices,It=er?Ct.length/3*2:Ct.length,y=e.readInt(!0),p=new nA(h,y,c,bt),g=e.readFloat(),v=0,S=0;;v++){var ht=void 0,Yt=e.readInt(!0);if(Yt==0)ht=er?Q.newFloatArray(It):Ct;else{ht=Q.newFloatArray(It);var ae=e.readInt(!0);if(Yt+=ae,a==1)for(var ue=ae;ue<Yt;ue++)ht[ue]=e.readFloat();else for(var ue=ae;ue<Yt;ue++)ht[ue]=e.readFloat()*a;if(!er)for(var ue=0,me=ht.length;ue<me;ue++)ht[ue]+=Ct[ue]}if(p.setFrame(v,g,ht),v==d)break;var E=e.readFloat();switch(e.readByte()){case wi:p.setStepped(v);break;case Ai:lt(e,p,S++,v,0,g,E,0,1,1)}g=E}i.push(p);break}case p1e:{for(var p=new uA(h,c,Qe),v=0;v<h;v++){var g=e.readFloat(),Fe=e.readInt32();p.setFrame(v,g,Vw[Fe&15],Fe>>4,e.readFloat())}i.push(p);break}}}var Te=e.readInt(!0);if(Te>0){for(var p=new Ml(Te),Ne=n.slots.length,o=0;o<Te;o++){for(var g=e.readFloat(),Tt=e.readInt(!0),sr=Q.newArray(Ne,0),l=Ne-1;l>=0;l--)sr[l]=-1;for(var nn=Q.newArray(Ne-Tt,0),an=0,$t=0,l=0;l<Tt;l++){for(var c=e.readInt(!0);an!=c;)nn[$t++]=an++;sr[an+e.readInt(!0)]=an++}for(;an<Ne;)nn[$t++]=an++;for(var l=Ne-1;l>=0;l--)sr[l]==-1&&(sr[l]=nn[--$t]);p.setFrame(o,g,sr)}i.push(p)}var Ui=e.readInt(!0);if(Ui>0){for(var p=new wv(Ui),o=0;o<Ui;o++){var g=e.readFloat(),$n=n.events[e.readInt(!0)],Kr=new hA(g,$n);Kr.intValue=e.readInt(!1),Kr.floatValue=e.readFloat(),Kr.stringValue=e.readBoolean()?e.readString():$n.stringValue,Kr.data.audioPath&&(Kr.volume=e.readFloat(),Kr.balance=e.readFloat()),p.setFrame(o,Kr)}i.push(p)}for(var mi=0,o=0,s=i.length;o<s;o++)mi=Math.max(mi,i[o].getDuration());return new Sv(r,i,mi)},t.BlendModeValues=[Ce.NORMAL,Ce.ADD,Ce.MULTIPLY,Ce.SCREEN],t}(),K_e=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritTimeline=a}return t}(),Z_e=function(){function t(e,r){e===void 0&&(e=null),r===void 0&&(r=null),this.bones=e,this.vertices=r}return t}();function Ea(t,e,r){for(var n=t.readFloat(),i=t.readFloat()*r,a=0,o=0,s=e.getFrameCount()-1;e.setFrame(a,n,i),a!=s;a++){var c=t.readFloat(),l=t.readFloat()*r;switch(t.readByte()){case wi:e.setStepped(a);break;case Ai:lt(t,e,o++,a,0,n,c,i,l,r)}n=c,i=l}return e}function Ry(t,e,r){for(var n=t.readFloat(),i=t.readFloat()*r,a=t.readFloat()*r,o=0,s=0,c=e.getFrameCount()-1;e.setFrame(o,n,i,a),o!=c;o++){var l=t.readFloat(),u=t.readFloat()*r,f=t.readFloat()*r;switch(t.readByte()){case wi:e.setStepped(o);break;case Ai:lt(t,e,s++,o,0,n,l,i,u,r),lt(t,e,s++,o,1,n,l,a,f,r)}n=l,i=u,a=f}return e}function lt(t,e,r,n,i,a,o,s,c,l){e.setBezier(r,n,i,a,s,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,o,c)}var Q_e=0,J_e=1,e1e=2,t1e=3,r1e=4,n1e=5,i1e=6,a1e=7,o1e=8,s1e=9,l1e=0,u1e=1,c1e=2,f1e=3,h1e=4,d1e=5,UR=0,p1e=1,v1e=0,m1e=1,g1e=2,wi=1,Ai=2,y1e=function(t){tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(yw),_N=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(e){var r=this.scale,n=new mA,i=typeof e=="string"?JSON.parse(e):e,a=i.skeleton;if(a){n.hash=a.hash,n.version=a.spine;var o=n.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){var s="Spine 4.1 loader cant load version "+a.spine+". Please configure your pixi-spine bundle";console.error(s)}n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(i.bones)for(var c=0;c<i.bones.length;c++){var l=i.bones[c],u=null,f=re(l,"parent",null);if(f!=null&&(u=n.findBone(f),u==null))throw new Error("Parent bone not found: "+f);var h=new fA(n.bones.length,l.name,u);h.length=re(l,"length",0)*r,h.x=re(l,"x",0)*r,h.y=re(l,"y",0)*r,h.rotation=re(l,"rotation",0),h.scaleX=re(l,"scaleX",1),h.scaleY=re(l,"scaleY",1),h.shearX=re(l,"shearX",0),h.shearY=re(l,"shearY",0),h.transformMode=Q.enumValue(ze,re(l,"transform","Normal")),h.skinRequired=re(l,"skin",!1);var d=re(l,"color",null);d&&h.color.setFromString(d),n.bones.push(h)}if(i.slots)for(var c=0;c<i.slots.length;c++){var p=i.slots[c],v=n.findBone(p.bone);if(!v)throw new Error("Couldn't find bone "+p.bone+" for slot "+p.name);var h=new gA(n.slots.length,p.name,v),d=re(p,"color",null);d&&h.color.setFromString(d);var y=re(p,"dark",null);y&&(h.darkColor=_e.fromString(y)),h.attachmentName=re(p,"attachment",null),h.blendMode=t.blendModeFromString(re(p,"blend","normal")),n.slots.push(h)}if(i.ik)for(var c=0;c<i.ik.length;c++){var g=i.ik[c],h=new pA(g.name);h.order=re(g,"order",0),h.skinRequired=re(g,"skin",!1);for(var m=0;m<g.bones.length;m++){var x=g.bones[m],b=n.findBone(x);if(b==null)throw new Error("IK bone not found: "+x);h.bones.push(b)}h.target=n.findBone(g.target),h.mix=re(g,"mix",1),h.softness=re(g,"softness",0)*r,h.bendDirection=re(g,"bendPositive",!0)?1:-1,h.compress=re(g,"compress",!1),h.stretch=re(g,"stretch",!1),h.uniform=re(g,"uniform",!1),n.ikConstraints.push(h)}if(i.transform)for(var c=0;c<i.transform.length;c++){var g=i.transform[c],h=new yA(g.name);h.order=re(g,"order",0),h.skinRequired=re(g,"skin",!1);for(var m=0;m<g.bones.length;m++){var x=g.bones[m],b=n.findBone(x);if(!b)throw new Error("Couldn't find bone "+x+" for transform constraint "+g.name+".");h.bones.push(b)}var _=g.target,S=n.findBone(_);if(!S)throw new Error("Couldn't find target bone "+_+" for transform constraint "+g.name+".");h.target=S,h.local=re(g,"local",!1),h.relative=re(g,"relative",!1),h.offsetRotation=re(g,"rotation",0),h.offsetX=re(g,"x",0)*r,h.offsetY=re(g,"y",0)*r,h.offsetScaleX=re(g,"scaleX",0),h.offsetScaleY=re(g,"scaleY",0),h.offsetShearY=re(g,"shearY",0),h.mixRotate=re(g,"mixRotate",1),h.mixX=re(g,"mixX",1),h.mixY=re(g,"mixY",h.mixX),h.mixScaleX=re(g,"mixScaleX",1),h.mixScaleY=re(g,"mixScaleY",h.mixScaleX),h.mixShearY=re(g,"mixShearY",1),n.transformConstraints.push(h)}if(i.path)for(var c=0;c<i.path.length;c++){var g=i.path[c],h=new vA(g.name);h.order=re(g,"order",0),h.skinRequired=re(g,"skin",!1);for(var m=0;m<g.bones.length;m++){var x=g.bones[m],b=n.findBone(x);if(!b)throw new Error("Couldn't find bone "+x+" for path constraint "+g.name+".");h.bones.push(b)}var _=g.target,S=n.findSlot(_);if(!S)throw new Error("Couldn't find target slot "+_+" for path constraint "+g.name+".");h.target=S,h.positionMode=Q.enumValue(Wt,re(g,"positionMode","Percent")),h.spacingMode=Q.enumValue(Er,re(g,"spacingMode","Length")),h.rotateMode=Q.enumValue(nr,re(g,"rotateMode","Tangent")),h.offsetRotation=re(g,"rotation",0),h.position=re(g,"position",0),h.positionMode==Wt.Fixed&&(h.position*=r),h.spacing=re(g,"spacing",0),(h.spacingMode==Er.Length||h.spacingMode==Er.Fixed)&&(h.spacing*=r),h.mixRotate=re(g,"mixRotate",1),h.mixX=re(g,"mixX",1),h.mixY=re(g,"mixY",h.mixX),n.pathConstraints.push(h)}if(i.skins)for(var c=0;c<i.skins.length;c++){var E=i.skins[c],w=new Dp(E.name);if(E.bones)for(var m=0;m<E.bones.length;m++){var x=E.bones[m],b=n.findBone(x);if(!b)throw new Error("Couldn't find bone "+x+" for skin "+E.name+".");w.bones.push(b)}if(E.ik)for(var m=0;m<E.ik.length;m++){var C=E.ik[m],A=n.findIkConstraint(C);if(!A)throw new Error("Couldn't find IK constraint "+C+" for skin "+E.name+".");w.constraints.push(A)}if(E.transform)for(var m=0;m<E.transform.length;m++){var C=E.transform[m],A=n.findTransformConstraint(C);if(!A)throw new Error("Couldn't find transform constraint "+C+" for skin "+E.name+".");w.constraints.push(A)}if(E.path)for(var m=0;m<E.path.length;m++){var C=E.path[m],A=n.findPathConstraint(C);if(!A)throw new Error("Couldn't find path constraint "+C+" for skin "+E.name+".");w.constraints.push(A)}for(var P in E.attachments){var T=n.findSlot(P);if(!T)throw new Error("Couldn't find slot "+P+" for skin "+E.name+".");var p=E.attachments[P];for(var O in p){var R=this.readAttachment(p[O],w,T.index,O,n);R&&w.setAttachment(T.index,O,R)}}n.skins.push(w),w.name=="default"&&(n.defaultSkin=w)}for(var c=0,F=this.linkedMeshes.length;c<F;c++){var D=this.linkedMeshes[c],w=D.skin?n.findSkin(D.skin):n.defaultSkin;if(!w)throw new Error("Skin not found: "+D.skin);var V=w.getAttachment(D.slotIndex,D.parent);if(!V)throw new Error("Parent mesh not found: "+D.parent);D.mesh.timelineAttachment=D.inheritTimeline?V:D.mesh,D.mesh.setParentMesh(V)}if(this.linkedMeshes.length=0,i.events)for(var Y in i.events){var W=i.events[Y],h=new dA(Y);h.intValue=re(W,"int",0),h.floatValue=re(W,"float",0),h.stringValue=re(W,"string",""),h.audioPath=re(W,"audio",null),h.audioPath&&(h.volume=re(W,"volume",1),h.balance=re(W,"balance",0)),n.events.push(h)}if(i.animations)for(var $ in i.animations){var I=i.animations[$];this.readAnimation(I,$,n)}return n},t.prototype.readAttachment=function(e,r,n,i,a){var o=this.scale;switch(i=re(e,"name",i),re(e,"type","region")){case"region":{var s=re(e,"path",i),c=this.readSequence(re(e,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(r,i,s,c);if(!l)return null;l.path=s,l.x=re(e,"x",0)*o,l.y=re(e,"y",0)*o,l.scaleX=re(e,"scaleX",1),l.scaleY=re(e,"scaleY",1),l.rotation=re(e,"rotation",0),l.width=e.width*o,l.height=e.height*o,l.sequence=c;var u=re(e,"color",null);return u&&l.color.setFromString(u),l}case"boundingbox":{var f=this.attachmentLoader.newBoundingBoxAttachment(r,i);if(!f)return null;this.readVertices(e,f,e.vertexCount<<1);var u=re(e,"color",null);return u&&f.color.setFromString(u),f}case"mesh":case"linkedmesh":{var s=re(e,"path",i),c=this.readSequence(re(e,"sequence",null)),h=this.attachmentLoader.newMeshAttachment(r,i,s,c);if(!h)return null;h.path=s;var u=re(e,"color",null);u&&h.color.setFromString(u),h.width=re(e,"width",0)*o,h.height=re(e,"height",0)*o,h.sequence=c;var d=re(e,"parent",null);if(d)return this.linkedMeshes.push(new x1e(h,re(e,"skin",null),n,d,re(e,"timelines",!0))),h;var p=e.uvs;return this.readVertices(e,h,p.length),h.triangles=e.triangles,h.regionUVs=new Float32Array(p),h.edges=re(e,"edges",null),h.hullLength=re(e,"hull",0)*2,h}case"path":{var s=this.attachmentLoader.newPathAttachment(r,i);if(!s)return null;s.closed=re(e,"closed",!1),s.constantSpeed=re(e,"constantSpeed",!0);var v=e.vertexCount;this.readVertices(e,s,v<<1);for(var y=Q.newArray(v/3,0),g=0;g<e.lengths.length;g++)y[g]=e.lengths[g]*o;s.lengths=y;var u=re(e,"color",null);return u&&s.color.setFromString(u),s}case"point":{var m=this.attachmentLoader.newPointAttachment(r,i);if(!m)return null;m.x=re(e,"x",0)*o,m.y=re(e,"y",0)*o,m.rotation=re(e,"rotation",0);var u=re(e,"color",null);return u&&m.color.setFromString(u),m}case"clipping":{var x=this.attachmentLoader.newClippingAttachment(r,i);if(!x)return null;var b=re(e,"end",null);if(b!=null){var _=a.findSlot(b);if(_==null)throw new Error("Clipping end slot not found: "+b);x.endSlot=_}var v=e.vertexCount;this.readVertices(e,x,v<<1);var u=re(e,"color",null);return u&&x.color.setFromString(u),x}}return null},t.prototype.readSequence=function(e){if(e==null)return null;var r=new $w(re(e,"count",0));return r.start=re(e,"start",1),r.digits=re(e,"digits",0),r.setupIndex=re(e,"setup",0),r},t.prototype.readVertices=function(e,r,n){var i=this.scale;r.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=Q.toFloatArray(a);if(i!=1)for(var s=0,c=a.length;s<c;s++)o[s]*=i;r.vertices=o;return}for(var l=new Array,u=new Array,s=0,c=a.length;s<c;){var f=a[s++];u.push(f);for(var h=s+f*4;s<h;s+=4)u.push(a[s]),l.push(a[s+1]*i),l.push(a[s+2]*i),l.push(a[s+3])}r.bones=u,r.vertices=Q.toFloatArray(l)},t.prototype.readAnimation=function(e,r,n){var i=this.scale,a=new Array;if(e.slots)for(var o in e.slots){var s=e.slots[o],c=n.findSlot(o);if(!c)throw new Error("Slot not found: "+o);var l=c.index;for(var u in s){var f=s[u];if(f){var h=f.length;if(u=="attachment"){for(var d=new us(h,l),p=0;p<h;p++){var v=f[p];d.setFrame(p,re(v,"time",0),re(v,"name",null))}a.push(d)}else if(u=="rgba"){for(var d=new Qw(h,h<<2,l),v=f[0],y=re(v,"time",0),g=_e.fromString(v.color),p=0,m=0;;p++){d.setFrame(p,y,g.r,g.g,g.b,g.a);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),_=_e.fromString(x.color),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,g.r,_.r,1),m=ut(S,d,m,p,1,y,b,g.g,_.g,1),m=ut(S,d,m,p,2,y,b,g.b,_.b,1),m=ut(S,d,m,p,3,y,b,g.a,_.a,1)),y=b,g=_,v=x}a.push(d)}else if(u=="rgb"){for(var d=new Jw(h,h*3,l),v=f[0],y=re(v,"time",0),g=_e.fromString(v.color),p=0,m=0;;p++){d.setFrame(p,y,g.r,g.g,g.b);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),_=_e.fromString(x.color),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,g.r,_.r,1),m=ut(S,d,m,p,1,y,b,g.g,_.g,1),m=ut(S,d,m,p,2,y,b,g.b,_.b,1)),y=b,g=_,v=x}a.push(d)}else if(u=="alpha")a.push(zi(f,new eA(h,h,l),0,1));else if(u=="rgba2"){for(var d=new tA(h,h*7,l),v=f[0],y=re(v,"time",0),g=_e.fromString(v.light),E=_e.fromString(v.dark),p=0,m=0;;p++){d.setFrame(p,y,g.r,g.g,g.b,g.a,E.r,E.g,E.b);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),_=_e.fromString(x.light),w=_e.fromString(x.dark),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,g.r,_.r,1),m=ut(S,d,m,p,1,y,b,g.g,_.g,1),m=ut(S,d,m,p,2,y,b,g.b,_.b,1),m=ut(S,d,m,p,3,y,b,g.a,_.a,1),m=ut(S,d,m,p,4,y,b,E.r,w.r,1),m=ut(S,d,m,p,5,y,b,E.g,w.g,1),m=ut(S,d,m,p,6,y,b,E.b,w.b,1)),y=b,g=_,E=w,v=x}a.push(d)}else if(u=="rgb2"){for(var d=new rA(h,h*6,l),v=f[0],y=re(v,"time",0),g=_e.fromString(v.light),E=_e.fromString(v.dark),p=0,m=0;;p++){d.setFrame(p,y,g.r,g.g,g.b,E.r,E.g,E.b);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),_=_e.fromString(x.light),w=_e.fromString(x.dark),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,g.r,_.r,1),m=ut(S,d,m,p,1,y,b,g.g,_.g,1),m=ut(S,d,m,p,2,y,b,g.b,_.b,1),m=ut(S,d,m,p,3,y,b,E.r,w.r,1),m=ut(S,d,m,p,4,y,b,E.g,w.g,1),m=ut(S,d,m,p,5,y,b,E.b,w.b,1)),y=b,g=_,E=w,v=x}a.push(d)}}}}if(e.bones)for(var C in e.bones){var A=e.bones[C],P=n.findBone(C);if(!P)throw new Error("Bone not found: "+C);var T=P.index;for(var u in A){var f=A[u],O=f.length;if(O!=0){if(u==="rotate")a.push(zi(f,new Df(O,O,T),0,1));else if(u==="translate"){var d=new Gw(O,O<<1,T);a.push(Iy(f,d,"x","y",0,i))}else if(u==="translatex"){var d=new zw(O,O,T);a.push(zi(f,d,0,i))}else if(u==="translatey"){var d=new Ww(O,O,T);a.push(zi(f,d,0,i))}else if(u==="scale"){var d=new Xw(O,O<<1,T);a.push(Iy(f,d,"x","y",1,1))}else if(u==="scalex"){var d=new Hw(O,O,T);a.push(zi(f,d,1,1))}else if(u==="scaley"){var d=new Yw(O,O,T);a.push(zi(f,d,1,1))}else if(u==="shear"){var d=new qw(O,O<<1,T);a.push(Iy(f,d,"x","y",0,1))}else if(u==="shearx"){var d=new Kw(O,O,T);a.push(zi(f,d,0,1))}else if(u==="sheary"){var d=new Zw(O,O,T);a.push(zi(f,d,0,1))}}}}if(e.ik)for(var R in e.ik){var F=e.ik[R],v=F[0];if(v){var D=n.findIkConstraint(R);if(!D)throw new Error("IK Constraint not found: "+R);for(var V=n.ikConstraints.indexOf(D),d=new iA(F.length,F.length<<1,V),y=re(v,"time",0),Y=re(v,"mix",1),W=re(v,"softness",0)*i,p=0,m=0;;p++){d.setFrame(p,y,Y,W,re(v,"bendPositive",!0)?1:-1,re(v,"compress",!1),re(v,"stretch",!1));var x=F[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),$=re(x,"mix",1),I=re(x,"softness",0)*i,S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,Y,$,1),m=ut(S,d,m,p,1,y,b,W,I,i)),y=b,Y=$,W=I,v=x}a.push(d)}}if(e.transform)for(var R in e.transform){var f=e.transform[R],v=f[0];if(v){var D=n.findTransformConstraint(R);if(!D)throw new Error("Transform constraint not found: "+R);for(var V=n.transformConstraints.indexOf(D),d=new aA(f.length,f.length*6,V),y=re(v,"time",0),B=re(v,"mixRotate",1),L=re(v,"mixX",1),M=re(v,"mixY",L),X=re(v,"mixScaleX",1),K=re(v,"mixScaleY",X),ne=re(v,"mixShearY",1),p=0,m=0;;p++){d.setFrame(p,y,B,L,M,X,K,ne);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),te=re(x,"mixRotate",1),ce=re(x,"mixX",1),de=re(x,"mixY",ce),se=re(x,"mixScaleX",1),fe=re(x,"mixScaleY",se),oe=re(x,"mixShearY",1),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,B,te,1),m=ut(S,d,m,p,1,y,b,L,ce,1),m=ut(S,d,m,p,2,y,b,M,de,1),m=ut(S,d,m,p,3,y,b,X,se,1),m=ut(S,d,m,p,4,y,b,K,fe,1),m=ut(S,d,m,p,5,y,b,ne,oe,1)),y=b,B=te,L=ce,M=de,X=se,K=fe,X=se,v=x}a.push(d)}}if(e.path)for(var R in e.path){var F=e.path[R],D=n.findPathConstraint(R);if(!D)throw new Error("Path constraint not found: "+R);var V=n.pathConstraints.indexOf(D);for(var u in F){var f=F[u],v=f[0];if(v){var he=f.length;if(u==="position"){var d=new oA(he,he,V);a.push(zi(f,d,0,D.positionMode==Wt.Fixed?i:1))}else if(u==="spacing"){var d=new sA(he,he,V);a.push(zi(f,d,0,D.spacingMode==Er.Length||D.spacingMode==Er.Fixed?i:1))}else if(u==="mix"){for(var d=new lA(he,he*3,V),y=re(v,"time",0),B=re(v,"mixRotate",1),L=re(v,"mixX",1),M=re(v,"mixY",L),p=0,m=0;;p++){d.setFrame(p,y,B,L,M);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),te=re(x,"mixRotate",1),ce=re(x,"mixX",1),de=re(x,"mixY",ce),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,B,te,1),m=ut(S,d,m,p,1,y,b,L,ce,1),m=ut(S,d,m,p,2,y,b,M,de,1)),y=b,B=te,L=ce,M=de,v=x}a.push(d)}}}}if(e.deform){e.attachments={};for(var Pe in e.deform){var Ie=e.deform[Pe],Ee=e.attachments[Pe]={};for(var o in Ie){var s=Ie[o],Be=Ee[o]={};for(var qe in s)Be[qe]={deform:s[qe]}}}}if(e.attachments)for(var rt in e.attachments){var Xe=e.attachments[rt],Ge=n.findSkin(rt);if(Ge!=null)for(var Qe in Xe){var s=Xe[Qe],c=n.findSlot(Qe);if(!c)throw new Error("Slot not found: "+Qe);var l=c.index;for(var bt in s){var er=s[bt],Ct=Ge.getAttachment(l,bt);for(var It in er){var f=er[It],v=f[0];if(v){if(It=="deform"){for(var ht=Ct.bones,Yt=Ct.vertices,ae=ht?Yt.length/3*2:Yt.length,d=new nA(f.length,f.length,l,Ct),y=re(v,"time",0),p=0,m=0;;p++){var ue=void 0,me=re(v,"vertices",null);if(!me)ue=ht?Q.newFloatArray(ae):Yt;else{ue=Q.newFloatArray(ae);var Fe=re(v,"offset",0);if(Q.arrayCopy(me,0,ue,Fe,me.length),i!=1)for(var Te=Fe,Ne=Te+me.length;Te<Ne;Te++)ue[Te]*=i;if(!ht)for(var Te=0;Te<ae;Te++)ue[Te]+=Yt[Te]}d.setFrame(p,y,ue);var x=f[p+1];if(!x){d.shrink(m);break}var b=re(x,"time",0),S=v.curve;S&&(m=ut(S,d,m,p,0,y,b,0,1,1)),y=b,v=x}a.push(d)}else if(It=="sequence"){for(var d=new uA(f.length,l,Ct),Tt=0,p=0;p<f.length;p++){var sr=re(v,"delay",Tt),y=re(v,"time",0),nn=$r[re(v,"mode","hold")],an=re(v,"index",0);d.setFrame(p,y,nn,an,sr),Tt=sr,v=f[p+1]}a.push(d)}}}}}}if(e.drawOrder){for(var d=new Ml(e.drawOrder.length),$t=n.slots.length,p=0,Te=0;Te<e.drawOrder.length;Te++,p++){var Ui=e.drawOrder[Te],$n=null,Kr=re(Ui,"offsets",null);if(Kr){$n=Q.newArray($t,-1);for(var mi=Q.newArray($t-Kr.length,0),$i=0,$a=0,ti=0;ti<Kr.length;ti++){var $s=Kr[ti],c=n.findSlot($s.slot);if(!c)throw new Error("Slot not found: "+c);for(var l=c.index;$i!=l;)mi[$a++]=$i++;$n[$i+$s.offset]=$i++}for(;$i<$t;)mi[$a++]=$i++;for(var ti=$t-1;ti>=0;ti--)$n[ti]==-1&&($n[ti]=mi[--$a])}d.setFrame(p,re(Ui,"time",0),$n)}a.push(d)}if(e.events){for(var d=new wv(e.events.length),p=0,Te=0;Te<e.events.length;Te++,p++){var Vn=e.events[Te],xa=n.findEvent(Vn.name);if(!xa)throw new Error("Event not found: "+Vn.name);var ri=new hA(Q.toSinglePrecision(re(Vn,"time",0)),xa);ri.intValue=re(Vn,"int",xa.intValue),ri.floatValue=re(Vn,"float",xa.floatValue),ri.stringValue=re(Vn,"string",xa.stringValue),ri.data.audioPath&&(ri.volume=re(Vn,"volume",1),ri.balance=re(Vn,"balance",0)),d.setFrame(p,ri)}a.push(d)}for(var xr=0,Te=0,Ne=a.length;Te<Ne;Te++)xr=Math.max(xr,a[Te].getDuration());if(isNaN(xr))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new Sv(r,a,xr))},t.blendModeFromString=function(e){if(e=e.toLowerCase(),e=="normal")return Ce.NORMAL;if(e=="additive")return Ce.ADD;if(e=="multiply")return Ce.MULTIPLY;if(e=="screen")return Ce.SCREEN;throw new Error("Unknown blend mode: "+e)},t}(),x1e=function(){function t(e,r,n,i,a){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=i,this.inheritTimeline=a}return t}();function zi(t,e,r,n){for(var i=t[0],a=re(i,"time",0),o=re(i,"value",r)*n,s=0,c=0;;c++){e.setFrame(c,a,o);var l=t[c+1];if(!l)return e.shrink(s),e;var u=re(l,"time",0),f=re(l,"value",r)*n;i.curve&&(s=ut(i.curve,e,s,c,0,a,u,o,f,n)),a=u,o=f,i=l}}function Iy(t,e,r,n,i,a){for(var o=t[0],s=re(o,"time",0),c=re(o,r,i)*a,l=re(o,n,i)*a,u=0,f=0;;f++){e.setFrame(f,s,c,l);var h=t[f+1];if(!h)return e.shrink(u),e;var d=re(h,"time",0),p=re(h,r,i)*a,v=re(h,n,i)*a,y=o.curve;y&&(u=ut(y,e,u,f,0,s,d,c,p,a),u=ut(y,e,u,f,1,s,d,l,v,a)),s=d,c=p,l=v,o=h}}function ut(t,e,r,n,i,a,o,s,c,l){if(t=="stepped")return e.setStepped(n),r;var u=i<<2,f=t[u],h=t[u+1]*l,d=t[u+2],p=t[u+3]*l;return e.setBezier(r,n,i,a,s,f,h,d,p,o,c),r+1}function re(t,e,r){return t[e]!==void 0?t[e]:r}var _1e=function(t){tt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){this.skeleton=new yN(r),this.skeleton.updateWorldTransform(),this.stateData=new dN(r),this.state=new cN(this.stateData)},e}(nh);const b1e=Object.freeze(Object.defineProperty({__proto__:null,AlphaTimeline:eA,Animation:Sv,AnimationState:cN,AnimationStateAdapter:H_e,AnimationStateData:dN,AtlasAttachmentLoader:cA,Attachment:jw,AttachmentTimeline:us,Bone:q1,BoneData:fA,BoundingBoxAttachment:sN,ClippingAttachment:lN,ConstraintData:Av,CurveTimeline:Ni,CurveTimeline1:ji,CurveTimeline2:Ev,DeformTimeline:nA,DrawOrderTimeline:Ml,Event:hA,EventData:dA,EventQueue:hN,EventTimeline:wv,get EventType(){return _n},IkConstraint:pN,IkConstraintData:pA,IkConstraintTimeline:iA,MeshAttachment:bv,PathAttachment:kf,PathConstraint:vN,PathConstraintData:vA,PathConstraintMixTimeline:lA,PathConstraintPositionTimeline:oA,PathConstraintSpacingTimeline:sA,PointAttachment:uN,RGB2Timeline:rA,RGBA2Timeline:tA,RGBATimeline:Qw,RGBTimeline:Jw,RegionAttachment:Uw,RotateTimeline:Df,ScaleTimeline:Xw,ScaleXTimeline:Hw,ScaleYTimeline:Yw,Sequence:$w,get SequenceMode(){return $r},SequenceModeValues:Vw,SequenceTimeline:uA,ShearTimeline:qw,ShearXTimeline:Kw,ShearYTimeline:Zw,Skeleton:yN,SkeletonBinary:xN,SkeletonBounds:y1e,SkeletonData:mA,SkeletonJson:_N,Skin:Dp,SkinEntry:K1,Slot:mN,SlotData:gA,get SpacingMode(){return Er},Spine:_1e,Timeline:ar,TrackEntry:fN,TransformConstraint:gN,TransformConstraintData:yA,TransformConstraintTimeline:aA,TranslateTimeline:Gw,TranslateXTimeline:zw,TranslateYTimeline:Ww,VertexAttachment:ca},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Z1=function(t,e){return Z1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Z1(t,e)};function bN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Z1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var wr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VER37=37]="VER37",t[t.VER38=38]="VER38",t[t.VER40=40]="VER40",t[t.VER41=41]="VER41"})(wr||(wr={}));function Mp(t){var e=t.substr(0,3),r=Math.floor(+e*10+.001);return e==="3.7"?wr.VER37:e==="3.8"?wr.VER38:e==="4.0"?wr.VER40:e==="4.1"?wr.VER41:r<wr.VER37?wr.VER37:wr.UNKNOWN}var S1e=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(e,r){var n=null,i=this.readVersionOldFormat(r),a=Mp(i);if(a===wr.VER38&&(n=new F4(new Cw(e))),i=this.readVersionNewFormat(r),a=Mp(i),(a===wr.VER40||a===wr.VER41)&&(n=new xN(new cA(e))),!n){var o="Unsupported version of spine model "+i+", please update pixi-spine";console.error(o)}return n.scale=this.scale,n.readSkeletonData(r)},t.prototype.readVersionOldFormat=function(e){var r=new Op(e),n;try{r.readString(),n=r.readString()}catch{n=""}return n||""},t.prototype.readVersionNewFormat=function(e){var r=new Op(e);r.readInt32(),r.readInt32();var n;try{n=r.readString()}catch{n=""}return n||""},t}(),E1e=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(e,r){var n=r.skeleton.spine,i=Mp(n),a=null;if(i===wr.VER37&&(a=new oN(new X4(e))),i===wr.VER38&&(a=new k4(new Cw(e))),(i===wr.VER40||i===wr.VER41)&&(a=new _N(new cA(e))),!a){var o="Unsupported version of spine model "+n+", please update pixi-spine";console.error(o)}return a.scale=this.scale,a.readSkeletonData(r)},t}(),w1e=function(t){bN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createBinaryParser=function(){return new S1e},e.prototype.createJsonParser=function(){return new E1e},e.prototype.parseData=function(r,n,i,a){var o=n;r.spineData=o.readSkeletonData(i,a),r.spineAtlas=i},e.registerLoaderPlugin=function(){As.registerPlugin(e)},e.use=new e().genMiddleware().use,e}(O_e),A1e=function(t){bN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createSkeleton=function(r){var n=Mp(r.version),i=null;if(n===wr.VER37&&(i=X_e),n===wr.VER38&&(i=j_e),(n===wr.VER40||n===wr.VER41)&&(i=b1e),!i){var a="Cant detect version of spine model "+r.version;console.error(a)}this.skeleton=new i.Skeleton(r),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(r),this.state=new i.AnimationState(this.stateData)},e}(nh);w1e.registerLoaderPlugin();const Lp={height:1440,width:2560};window.PIXI=lye;class C1e{constructor(){Re(this,"currentApp",null);Re(this,"effectsContainer");Re(this,"frameDuration",16.67);Re(this,"notUpdateBacklogEffects",!1);Re(this,"figureContainer");Re(this,"figureObjects",[]);Re(this,"backgroundContainer");Re(this,"backgroundObjects",[]);Re(this,"stageAnimations",[]);Re(this,"assetLoader",new As);Re(this,"loadQueue",[]);Re(this,"live2dFigureRecorder",[]);Re(this,"lockTransformTarget",[]);Re(this,"stageWidth",Lp.width);Re(this,"stageHeight",Lp.height);Re(this,"MAX_TEX_COUNT",10);const e=new gw({backgroundAlpha:0,preserveDrawingBuffer:!0});window.PIXIapp=this,window.__PIXI_APP__=e;const r=document.getElementById("pixiContianer");r&&(r.innerHTML="",r.appendChild(e.view)),e.renderer.view.style.position="absolute",e.renderer.view.style.display="block",e.renderer.view.id="pixiCanvas",e.renderer.autoResize=!0;const n=document.getElementById("root");n&&e.renderer.resize(n.clientWidth,n.clientHeight),xA&&(e.renderer.view.style.zIndex="-5"),e.stage.sortableChildren=!0,this.effectsContainer=new Fr,this.effectsContainer.zIndex=3,this.figureContainer=new Fr,this.figureContainer.zIndex=2,this.backgroundContainer=new Fr,this.backgroundContainer.zIndex=0,e.stage.addChild(this.effectsContainer,this.figureContainer,this.backgroundContainer),this.currentApp=e;const i=()=>{this.updateFps(),setTimeout(i,1e4)};i();const a=()=>{setTimeout(a,500),this.callLoader()};a()}getFigureObjects(){return this.figureObjects}getAllLockedObject(){return this.lockTransformTarget}registerAnimation(e,r,n="default"){var i;e&&(this.stageAnimations.push({uuid:nc(),animationObject:e,key:r,targetKey:n,type:"common"}),this.lockStageObject(n),e.setStartState(),(i=this.currentApp)==null||i.ticker.add(e.tickerFunc))}registerPresetAnimation(e,r,n="default",i){var o;if(!e)return;const a=i.find(s=>s.target===n);if(a){const s=this.getStageObjByKey(n);if(s){const c=s.pixiContainer;Object.assign(c,a.transform)}return}this.stageAnimations.push({uuid:nc(),animationObject:e,key:r,targetKey:n,type:"preset"}),this.lockStageObject(n),e.setStartState(),(o=this.currentApp)==null||o.ticker.add(e.tickerFunc)}stopPresetAnimationOnTarget(e){const r=this.stageAnimations.find(n=>n.targetKey===e&&n.type==="preset");r&&this.removeAnimation(r.key)}removeAnimation(e){var n;const r=this.stageAnimations.findIndex(i=>i.key===e);if(r>=0){const i=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(i.animationObject.tickerFunc),i.animationObject.setEndState(),this.unlockStageObject(i.targetKey??"default"),this.stageAnimations.splice(r,1)}}removeAnimationWithSetEffects(e){var n,i,a;const r=this.stageAnimations.findIndex(o=>o.key===e);if(r>=0){const o=this.stageAnimations[r];(n=this.currentApp)==null||n.ticker.remove(o.animationObject.tickerFunc),o.animationObject.setEndState();const s=((a=(i=o.animationObject).getEndFilterEffect)==null?void 0:a.call(i))??{};if(this.unlockStageObject(o.targetKey??"default"),o.targetKey){const c=this.getStageObjByKey(o.targetKey);if(c){const l={alpha:c.pixiContainer.alpha,scale:{x:c.pixiContainer.scale.x,y:c.pixiContainer.scale.y},position:{x:c.pixiContainer.x,y:c.pixiContainer.y},rotation:c.pixiContainer.rotation,blur:c.pixiContainer.blur,...s};let u={target:o.targetKey,transform:l};J.dispatch(Dn.updateEffect(u))}}this.stageAnimations.splice(r,1)}}performMouthSyncAnimation(e,r,n,i){var s;const a=(s=this.getStageObjByKey(e))==null?void 0:s.pixiContainer;if(!a)return;const o={open:r.mouthAnimation.open,half_open:r.mouthAnimation.halfOpen,closed:r.mouthAnimation.close};this.loadAsset(o[n],()=>{const c=this.assetLoader.resources[o[n]].texture;if(!c)return;const l=c.width,u=c.height,f=this.stageWidth/l,h=this.stageHeight/u,d=Math.min(f,h),p=new ui(c);p.scale.x=d,p.scale.y=d,p.anchor.set(.5),p.position.y=this.stageHeight/2;const v=l*d,y=u*d;a.setBaseY(this.stageHeight/2),y<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-y/2),i==="center"&&a.setBaseX(this.stageWidth/2),i==="left"&&a.setBaseX(v/2),i==="right"&&a.setBaseX(this.stageWidth-v/2),a.pivot.set(0,this.stageHeight/2),a.addChild(p)})}performBlinkAnimation(e,r,n,i){var s;const a=(s=this.getStageObjByKey(e))==null?void 0:s.pixiContainer;if(!a)return;const o={open:r.blinkAnimation.open,closed:r.blinkAnimation.close};this.loadAsset(o[n],()=>{const c=this.assetLoader.resources[o[n]].texture;if(!c)return;const l=c.width,u=c.height,f=this.stageWidth/l,h=this.stageHeight/u,d=Math.min(f,h),p=new ui(c);p.scale.x=d,p.scale.y=d,p.anchor.set(.5),p.position.y=this.stageHeight/2;const v=l*d,y=u*d;a.setBaseY(this.stageHeight/2),y<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-y/2),i==="center"&&a.setBaseX(this.stageWidth/2),i==="left"&&a.setBaseX(v/2),i==="right"&&a.setBaseX(this.stageWidth-v/2),a.pivot.set(0,this.stageHeight/2),a.addChild(p)})}addBg(e,r){var l,u;const n=this.assetLoader,i=new Ty;this.backgroundObjects.findIndex(f=>f.key===e)>=0&&this.removeStageObjectByKey(e),this.backgroundContainer.addChild(i);const s=nc();this.backgroundObjects.push({uuid:s,key:e,pixiContainer:i,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)});const c=()=>{var h,d;const f=(d=(h=n.resources)==null?void 0:h[r])==null?void 0:d.texture;if(f&&this.getStageObjByUuid(s)){const p=f.width,v=f.height,y=this.stageWidth/p,g=this.stageHeight/v,m=Math.max(y,g),x=new ui(f);x.scale.x=m,x.scale.y=m,x.anchor.set(.5),x.position.y=this.stageHeight/2,i.setBaseX(this.stageWidth/2),i.setBaseY(this.stageHeight/2),i.pivot.set(0,this.stageHeight/2),i.addChild(x)}};this.cacheGC(),(u=(l=n.resources)==null?void 0:l[r])!=null&&u.texture?c():this.loadAsset(r,c)}addFigure(e,r,n="center"){var u,f;const i=this.assetLoader,a=new Ty;this.figureObjects.findIndex(h=>h.key===e)>=0&&this.removeStageObjectByKey(e),this.figureContainer.addChild(a);const c=nc();this.figureObjects.push({uuid:c,key:e,pixiContainer:a,sourceUrl:r,sourceType:"img",sourceExt:this.getExtName(r)});const l=()=>{var d,p;const h=(p=(d=i.resources)==null?void 0:d[r])==null?void 0:p.texture;if(h&&this.getStageObjByUuid(c)){const v=h.width,y=h.height,g=this.stageWidth/v,m=this.stageHeight/y,x=Math.min(g,m),b=new ui(h);b.scale.x=x,b.scale.y=x,b.anchor.set(.5),b.position.y=this.stageHeight/2;const _=v*x,S=y*x;a.setBaseY(this.stageHeight/2),S<this.stageHeight&&a.setBaseY(this.stageHeight/2+this.stageHeight-S/2),n==="center"&&a.setBaseX(this.stageWidth/2),n==="left"&&a.setBaseX(_/2),n==="right"&&a.setBaseX(this.stageWidth-_/2),a.pivot.set(0,this.stageHeight/2),a.addChild(b)}};this.cacheGC(),(f=(u=i.resources)==null?void 0:u[r])!=null&&f.texture?l():this.loadAsset(r,l)}addSpineFigure(e,r,n="center"){var f;const i=`spine-${r}`,a=this.assetLoader,o=new Ty;this.figureObjects.findIndex(h=>h.key===e)>=0&&this.removeStageObjectByKey(e),this.figureContainer.addChild(o);const l=nc();this.figureObjects.push({uuid:l,key:e,pixiContainer:o,sourceUrl:r,sourceType:"live2d",sourceExt:this.getExtName(r)});const u=()=>{var d,p;console.log(this.assetLoader.resources);const h=(d=this.assetLoader.resources)==null?void 0:d[i];if(h&&this.getStageObjByUuid(l)){const v=new A1e(h.spineData),y=((p=h==null?void 0:h.spineData)==null?void 0:p.y)??0;console.log(v);const g=v.width,m=v.height,x=this.stageWidth/g,b=this.stageHeight/m;v.y=-(b*y)/2,console.log(v.state),v.state.setAnimation(0,"07",!0);const _=Math.min(x,b),S=new ui;S.addChild(v),S.scale.x=_,S.scale.y=_,S.anchor.set(.5),S.position.y=this.stageHeight/2;const E=g*_,w=m*_;o.setBaseY(this.stageHeight/2),w<this.stageHeight&&o.setBaseY(this.stageHeight/2+this.stageHeight-w/2),n==="center"&&o.setBaseX(this.stageWidth/2),n==="left"&&o.setBaseX(E/2),n==="right"&&o.setBaseX(this.stageWidth-E/2),o.pivot.set(0,this.stageHeight/2),o.addChild(S)}};this.cacheGC(),(f=a.resources)!=null&&f[r]?u():this.loadAsset(r,u,i)}changeModelMotionByKey(e,r){var a,o;const n=this.figureObjects.find(s=>s.key===e);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(s=>s.target===e);if(n&&(i==null?void 0:i.motion)!==r){const c=n.pixiContainer.children;for(const l of c){let u=r,f=0,h=3;const d=(l==null?void 0:l.internalModel)??void 0;(o=(a=d==null?void 0:d.motionManager)==null?void 0:a.stopAllMotions)==null||o.call(a),l.motion(u,f,h)}this.updateL2dMotionByKey(e,r)}}changeModelExpressionByKey(e,r){const n=this.figureObjects.find(a=>a.key===e);if((n==null?void 0:n.sourceType)!=="live2d")return;const i=this.live2dFigureRecorder.find(a=>a.target===e);if(n&&(i==null?void 0:i.expression)!==r){const o=n.pixiContainer.children;for(const s of o)s.expression(r);this.updateL2dExpressionByKey(e,r)}}setModelMouthY(e,r){var o,s,c,l,u,f,h,d,p;function n(v){return v<50?0:(v-50)/50}const i=n(r),a=this.figureObjects.find(v=>v.key===e);if(a){const y=a.pixiContainer.children;for(const g of y)g!=null&&g.internalModel&&((s=(o=g==null?void 0:g.internalModel)==null?void 0:o.coreModel)!=null&&s.setParamFloat&&((u=(l=(c=g==null?void 0:g.internalModel)==null?void 0:c.coreModel)==null?void 0:l.setParamFloat)==null||u.call(l,"PARAM_MOUTH_OPEN_Y",i)),(h=(f=g==null?void 0:g.internalModel)==null?void 0:f.coreModel)!=null&&h.setParameterValueById&&((p=(d=g==null?void 0:g.internalModel)==null?void 0:d.coreModel)==null||p.setParameterValueById("ParamMouthOpenY",i)))}}getStageObjByKey(e){return[...this.figureObjects,...this.backgroundObjects].find(r=>r.key===e)}getStageObjByUuid(e){return[...this.figureObjects,...this.backgroundObjects].find(r=>r.uuid===e)}getAllStageObj(){return[...this.figureObjects,...this.backgroundObjects]}removeStageObjectByKey(e){const r=this.figureObjects.findIndex(i=>i.key===e),n=this.backgroundObjects.findIndex(i=>i.key===e);if(r>=0){const i=this.figureObjects[r];for(const a of i.pixiContainer.children)a.destroy();i.pixiContainer.destroy(),this.figureContainer.removeChild(i.pixiContainer),this.figureObjects.splice(r,1)}if(n>=0){const i=this.backgroundObjects[n];for(const a of i.pixiContainer.children)a.destroy();i.pixiContainer.destroy(),this.backgroundContainer.removeChild(i.pixiContainer),this.backgroundObjects.splice(n,1)}}cacheGC(){DL()}updateL2dMotionByKey(e,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===e);n>=0?this.live2dFigureRecorder[n].motion=r:this.live2dFigureRecorder.push({target:e,motion:r,expression:""})}updateL2dExpressionByKey(e,r){const n=this.live2dFigureRecorder.findIndex(i=>i.target===e);n>=0?this.live2dFigureRecorder[n].expression=r:this.live2dFigureRecorder.push({target:e,motion:"",expression:r})}loadAsset(e,r,n){this.loadQueue.unshift({url:e,callback:r,name:n}),this.callLoader()}callLoader(){if(!this.assetLoader.loading){const e=this.loadQueue.shift();if(e)try{this.assetLoader.resources[e.url]?(e.callback(),this.callLoader()):e.name?this.assetLoader.add(e.name,e.url).load(()=>{e.callback(),this.callLoader()}):this.assetLoader.add(e.url).load(()=>{e.callback(),this.callLoader()})}catch(r){Ae.fatal("PIXI Loader 故障",r),e.callback(),this.callLoader()}}}updateFps(){Fy==null||Fy(120).then(e=>{this.frameDuration=1e3/e})}lockStageObject(e){this.lockTransformTarget.push(e)}unlockStageObject(e){const r=this.lockTransformTarget.findIndex(n=>n===e);r>=0&&this.lockTransformTarget.splice(r,1)}getExtName(e){return e.split(".").pop()??"png"}}const Fy=(()=>{const t=[window.requestAnimationFrame,window.webkitRequestAnimationFrame,window.mozRequestAnimationFrame].find(e=>e);if(!t){console.error("requestAnimationFrame is not supported!");return}return(e=60)=>{if(e<1)throw new Error("targetCount cannot be less than 1.");const r=Date.now();let n=0;return new Promise(i=>{(function a(){t(()=>{if(++n>=e){const o=Date.now()-r,s=n/o*1e3;return i(s)}a()})})()})}})(),T1e={version:"IdolTime 1.0.0"},P1e=navigator.userAgent,xA=!!P1e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),O1e=()=>{Ae.info(T1e.version),Ae.info("Made with ❤ by IdolTime"),xA&&alert(`iOS 用户请横屏使用以获得最佳体验
| iOS 用戶請橫屏使用以獲得最佳體驗`),R1e("./game/userStyleSheet.css"),I1e(),ace("./game/config.txt");const t=pr("start.txt",dr.scene);Jn(t).then(async e=>{const r=await j.sceneManager.setCurrentScene(e,"start.txt",t);if(!r)return;const n=j.sceneManager.sceneData.currentScene.subSceneList;j.sceneManager.settledScenes.push(t);const i=Xf(n);yu(i);const a=(r==null?void 0:r.sentenceList)??[],o=a==null?void 0:a.filter(s=>(s==null?void 0:s.commandRaw)==="unlockAchieve");J.dispatch(_t.setUnlockAchieveAllTotal((o==null?void 0:o.length)??0))}),j.gameplay.pixiStage=new C1e,sce(),lce()};function R1e(t){const e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}function I1e(){Jc.get("./game/animation/animationTable.json").then(t=>{const e=t.data;for(const r of e)Jc.get(`./game/animation/${r}.json`).then(n=>{if(n.data){const i={name:r,effects:n.data};j.animationManager.addAnimation(i)}})})}const F1e="_Menu_main_x2m75_1",k1e="_Menu_ShowSoftly_x2m75_1",D1e="_Menu_TagContent_x2m75_10",$R={Menu_main:F1e,Menu_ShowSoftly:k1e,Menu_TagContent:D1e},M1e="_Save_Load_main_1azof_2",L1e="_Save_Load_top_1azof_9",B1e="_Elements_in_1azof_1",N1e="_Save_Load_title_1azof_17",j1e="_Save_title_text_1azof_35",U1e="_Load_title_text_1azof_43",$1e="_Save_Load_top_buttonList_1azof_51",V1e="_Save_Load_top_button_1azof_51",G1e="_Save_Load_top_button_text_1azof_69",z1e="_Save_Load_top_button_on_1azof_80",W1e="_Load_top_button_on_1azof_93",X1e="_Load_top_button_1azof_93",H1e="_Save_Load_content_1azof_106",Y1e="_Save_Load_content_element_1azof_115",q1e="_Elements_in_transform_1azof_1",K1e="_Save_Load_content_element_top_1azof_131",Z1e="_Save_Load_content_element_top_index_1azof_138",Q1e="_Load_content_elememt_top_index_1azof_147",J1e="_Save_Load_content_element_top_date_1azof_151",ebe="_Load_content_element_top_date_1azof_162",tbe="_Save_Load_content_text_1azof_166",rbe="_Save_Load_content_text_padding_1azof_180",nbe="_Save_Load_content_speaker_1azof_184",ibe="_Load_content_speaker_1azof_193",abe="_Load_content_text_1azof_197",obe="_Save_Load_content_miniRen_1azof_201",sbe="_Save_Load_content_miniRen_bg_1azof_208",lbe="_Save_Load_content_miniRen_figure_1azof_215",ube="_Save_Load_content_miniRen_figLeft_1azof_223",cbe="_Save_Load_content_miniRen_figRight_1azof_228",Me={Save_Load_main:M1e,Save_Load_top:L1e,Elements_in:B1e,Save_Load_title:N1e,Save_title_text:j1e,Load_title_text:U1e,Save_Load_top_buttonList:$1e,Save_Load_top_button:V1e,Save_Load_top_button_text:G1e,Save_Load_top_button_on:z1e,Load_top_button_on:W1e,Load_top_button:X1e,Save_Load_content:H1e,Save_Load_content_element:Y1e,Elements_in_transform:q1e,Save_Load_content_element_top:K1e,Save_Load_content_element_top_index:Z1e,Load_content_elememt_top_index:Q1e,Save_Load_content_element_top_date:J1e,Load_content_element_top_date:ebe,Save_Load_content_text:tbe,Save_Load_content_text_padding:rbe,Save_Load_content_speaker:nbe,Load_content_speaker:ibe,Load_content_text:abe,Save_Load_content_miniRen:obe,Save_Load_content_miniRen_bg:sbe,Save_Load_content_miniRen_figure:lbe,Save_Load_content_miniRen_figLeft:ube,Save_Load_content_miniRen_figRight:cbe},fbe="_GlobalDialog_main_101j8_2",hbe="_showGlobalDialog_101j8_1",dbe="_glabalDialog_container_inner_101j8_17",pbe="_glabalDialog_container_101j8_17",vbe="_title_101j8_36",mbe="_button_list_101j8_41",gbe="_button_101j8_41",Wo={GlobalDialog_main:fbe,showGlobalDialog:hbe,glabalDialog_container_inner:dbe,glabalDialog_container:pbe,title:vbe,button_list:mbe,button:gbe};function ybe(){const t=Ue(e=>e.GUI.showGlobalDialog);return k.jsx(k.Fragment,{children:t&&k.jsx("div",{id:"globalDialogContainer"})})}function xbe(t){const{playSeClick:e,playSeEnter:r}=rE();J.dispatch(Ye({component:"showGlobalDialog",visibility:!0}));const n=()=>{e(),t.leftFunc(),VR()},i=()=>{e(),t.rightFunc(),VR()},a=k.jsx("div",{className:Wo.GlobalDialog_main,children:k.jsx("div",{className:Wo.glabalDialog_container,children:k.jsxs("div",{className:Wo.glabalDialog_container_inner,children:[k.jsx("div",{className:Wo.title,children:t.title}),k.jsxs("div",{className:Wo.button_list,children:[k.jsx("div",{className:Wo.button,onClick:n,onMouseEnter:r,children:t.leftText}),k.jsx("div",{className:Wo.button,onClick:i,onMouseEnter:r,children:t.rightText})]})]})})});setTimeout(()=>{xs.render(a,document.getElementById("globalDialogContainer"))},100)}function VR(){J.dispatch(Ye({component:"showGlobalDialog",visibility:!1}))}const _be=()=>{const{playSePageChange:t,playSeEnter:e,playSeDialogOpen:r}=On(),n=Ue(d=>d.userData),i=Ue(d=>d.saveData),a=or(),o=[];for(let d=1;d<=20;d++){let p=Me.Save_Load_top_button;d===n.optionData.slPage&&(p=p+" "+Me.Save_Load_top_button_on);const v=k.jsx("div",{onClick:()=>{a(wS(d)),Sn(),t()},onMouseEnter:e,className:p,children:k.jsx("div",{className:Me.Save_Load_top_button_text,children:d})},"Save_element_page"+d);o.push(v)}const s=oa("common."),c=[],l=(n.optionData.slPage-1)*10+1,u=l+9;ie.useEffect(()=>{Kf(l,u)},[l,u]);let f=0;for(let d=l;d<=u;d++){f++;const p=i.saveData[d];let v=k.jsx("div",{});if(p){const g=p.nowStageState.showName===""?" ":`${p.nowStageState.showName}`;v=k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:Me.Save_Load_content_element_top,children:[k.jsx("div",{className:Me.Save_Load_content_element_top_index,children:p.index}),k.jsx("div",{className:Me.Save_Load_content_element_top_date,children:p.saveTime})]}),k.jsx("div",{className:Me.Save_Load_content_miniRen,children:k.jsx("img",{className:Me.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:p.previewImage})}),k.jsxs("div",{className:Me.Save_Load_content_text,children:[k.jsx("div",{className:Me.Save_Load_content_speaker,children:g}),k.jsx("div",{className:Me.Save_Load_content_text_padding,children:p.nowStageState.showText})]})]})}const y=k.jsx("div",{onClick:()=>{i.saveData[d]?(r(),xbe({title:h("saving.isOverwrite"),leftText:s("yes"),rightText:s("no"),leftFunc:()=>{fp(d),Sn()},rightFunc:()=>{}})):(t(),fp(d))},onMouseEnter:e,className:Me.Save_Load_content_element,style:{animationDelay:`${f*30}ms`},children:v},"saveElement_"+d);c.push(y)}const h=oa("menu.");return k.jsxs("div",{className:Me.Save_Load_main,children:[k.jsxs("div",{className:Me.Save_Load_top,children:[k.jsx("div",{className:Me.Save_Load_title,children:k.jsx("div",{className:Me.Save_title_text,children:h("saving.title")})}),k.jsx("div",{className:Me.Save_Load_top_buttonList,children:o})]}),k.jsx("div",{className:Me.Save_Load_content,id:"Save_content_page_"+n.optionData.slPage,children:c})]})},bbe=()=>{const{playSeClick:t,playSeEnter:e,playSePageChange:r}=On(),n=Ue(h=>h.userData),i=Ue(h=>h.saveData),a=or(),o=[];for(let h=1;h<=20;h++){let d=Me.Save_Load_top_button+" "+Me.Load_top_button;h===n.optionData.slPage&&(d=d+" "+Me.Save_Load_top_button_on+" "+Me.Load_top_button_on);const p=k.jsx("div",{onClick:()=>{a(wS(h)),Sn(),r()},onMouseEnter:e,className:d,children:k.jsx("div",{className:Me.Save_Load_top_button_text,children:h})},"Load_element_page"+h);o.push(p)}const s=[],c=(n.optionData.slPage-1)*10+1,l=c+9;ie.useEffect(()=>{Kf(c,l)},[c,l]);let u=0;for(let h=c;h<=l;h++){u++;const d=i.saveData[h];let p=k.jsx("div",{});if(d){const y=d.nowStageState.showName===""?" ":`${d.nowStageState.showName}`;p=k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:Me.Save_Load_content_element_top,children:[k.jsx("div",{className:Me.Save_Load_content_element_top_index+" "+Me.Load_content_elememt_top_index,children:d.index}),k.jsx("div",{className:Me.Save_Load_content_element_top_date+" "+Me.Load_content_element_top_date,children:d.saveTime})]}),k.jsx("div",{className:Me.Save_Load_content_miniRen,children:k.jsx("img",{className:Me.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:d.previewImage})}),k.jsxs("div",{className:Me.Save_Load_content_text,children:[k.jsx("div",{className:Me.Save_Load_content_speaker+" "+Me.Load_content_speaker,children:y}),k.jsx("div",{className:Me.Save_Load_content_text_padding,children:d.nowStageState.showText})]})]})}const v=k.jsx("div",{onClick:()=>{T3(h),t()},onMouseEnter:e,className:Me.Save_Load_content_element,style:{animationDelay:`${u*30}ms`},children:p},"loadElement_"+h);s.push(v)}const f=oa("menu.");return k.jsxs("div",{className:Me.Save_Load_main,children:[k.jsxs("div",{className:Me.Save_Load_top,children:[k.jsx("div",{className:Me.Save_Load_title,children:k.jsx("div",{className:Me.Load_title_text,children:f("loadSaving.title")})}),k.jsx("div",{className:Me.Save_Load_top_buttonList,children:o})]}),k.jsx("div",{className:Me.Save_Load_content,id:"Load_content_page_"+n.optionData.slPage,children:s})]})},Sbe="_Options_main_962m2_2",Ebe="_Options_back_962m2_12",wbe="_Options_checkbox_962m2_28",Abe="_Options_main_slider_962m2_40",Cbe="_Options_sound_slider_962m2_46",Tbe="_Options_checkbox_window_962m2_52",Pbe="_Options_checkbox_active_962m2_56",Obe="_Options_top_962m2_60",Rbe="_Options_title_962m2_67",Ibe="_Option_title_text_962m2_76",Fbe="_Elements_in_962m2_1",kbe="_Option_title_text_shadow_962m2_85",Dbe="_Option_title_text_ts_962m2_92",Mbe="_Options_main_content_962m2_99",Lbe="_Options_main_content_half_962m2_106",Bbe="_About_title_text_962m2_116",Nbe="_About_text_962m2_124",jbe="_Options_page_container_962m2_143",Ube="_Options_button_list_962m2_149",$be="_Options_page_button_962m2_153",Vbe="_Options_page_button_active_962m2_165",wa={Options_main:Sbe,Options_back:Ebe,Options_checkbox:wbe,Options_main_slider:Abe,Options_sound_slider:Cbe,Options_checkbox_window:Tbe,Options_checkbox_active:Pbe,Options_top:Obe,Options_title:Rbe,Option_title_text:Ibe,Elements_in:Fbe,Option_title_text_shadow:kbe,Option_title_text_ts:Dbe,Options_main_content:Mbe,Options_main_content_half:Lbe,About_title_text:Bbe,About_text:Nbe,Options_page_container:jbe,Options_button_list:Ube,Options_page_button:$be,Options_page_button_active:Vbe};const GR=t=>{const{playSeEnter:e}=On();ie.useEffect(()=>{setTimeout(()=>{const n=document.getElementById(t.uniqueID);n!==null&&n.setAttribute("value",t.initValue.toString()),r()},1)},[]),ie.useEffect(()=>{r()},[t.initValue]);function r(){const n=document.getElementById(`${t.uniqueID}-bg`);n!==null&&(n.style.width=Number(t.initValue.toString())/100*342/.5+"px")}return k.jsxs("div",{className:"Option_WebGAL_slider",children:[k.jsx("input",{className:"Rang_input",id:t.uniqueID,type:"range",onChange:t.onChange,onFocus:e,onMouseEnter:e}),k.jsxs("div",{className:"Slider_group",children:[k.jsx("div",{className:"Slider_bg",id:`${t.uniqueID}-bg`}),k.jsx("div",{className:"Slider_bg_under"})]})]})},Gbe=()=>{const{playSeEnter:t,playSeSwitch:e,playSeClick:r}=On(),n=Ue(a=>a.userData);Ss(0),ie.useEffect(dp,[]);const i=or();return oa("menu.options."),k.jsxs("div",{className:wa.Options_main,children:[k.jsx("div",{className:wa.Options_back,onMouseEnter:t,onClick:()=>{r(),i(Ye({component:"showMenuPanel",visibility:!1}))}}),k.jsx("div",{className:`${wa.Options_checkbox} ${n.optionData.fullScreen?"":wa.Options_checkbox_active}`,onMouseEnter:t,onClick:()=>{r(),i(Qa({key:"fullScreen",value:ia.on})),Sn()}}),k.jsx("div",{className:`${wa.Options_checkbox} ${wa.Options_checkbox_window} ${n.optionData.fullScreen?wa.Options_checkbox_active:""}`,onMouseEnter:t,onClick:()=>{r(),console.log(4444),i(Qa({key:"fullScreen",value:ia.off})),Sn()}}),k.jsx("div",{className:wa.Options_sound_slider,children:k.jsx(GR,{initValue:n.optionData.seVolume,uniqueID:"音效",onChange:a=>{const o=a.target.value;i(Qa({key:"seVolume",value:Number(o)})),i(Qa({key:"uiSeVolume",value:Number(o)})),Sn()}})}),k.jsx("div",{className:wa.Options_main_slider,children:k.jsx(GR,{initValue:n.optionData.volumeMain,uniqueID:"全局音量",onChange:a=>{const o=a.target.value;i(Qa({key:"volumeMain",value:Number(o)})),Sn()}})})]})},zbe=()=>{const t=Ue(r=>r.GUI);let e;switch(t.currentMenuTag){case Hn.Save:e=k.jsx(_be,{});break;case Hn.Load:e=k.jsx(bbe,{});break;case Hn.Option:e=k.jsx(Gbe,{});break}return k.jsx(k.Fragment,{children:t.showMenuPanel&&k.jsx("div",{className:$R.Menu_main,children:k.jsx("div",{className:$R.Menu_TagContent,children:e})})})},Wbe="_MainStage_main_9enex_1",Xbe="_MainStage_main_container_9enex_10",Hbe="_MainStage_bgContainer_9enex_17",Ybe="_MainStage_showBgSoftly_9enex_1",qbe="_MainStage_bgContainer_Settled_9enex_27",Kbe="_MainStage_oldBgContainer_9enex_37",Zbe="_MainStage_oldBgFadeout_9enex_1",Qbe="_MainStage_oldBgContainer_Settled_9enex_47",Jbe="_pixiContainer_9enex_72",eSe="_chooseContainer_9enex_77",ky={MainStage_main:Wbe,MainStage_main_container:Xbe,MainStage_bgContainer:Hbe,MainStage_showBgSoftly:Ybe,MainStage_bgContainer_Settled:qbe,MainStage_oldBgContainer:Kbe,MainStage_oldBgFadeout:Zbe,MainStage_oldBgContainer_Settled:Qbe,pixiContainer:Jbe,chooseContainer:eSe};function tSe(){const t=Ue(r=>r.userData.optionData.textboxFont);function e(){return Z0(t).with(fs.song,()=>'"思源宋体", serif').with(fs.lxgw,()=>'"LXGW", serif').with(fs.hei,()=>'"WebgalUI", serif').default(()=>'"WebgalUI", serif')}return e()}function zR(t){switch(t){case 0:return 150;case 1:return 205;case 2:return 240;default:return 205}}const rSe="_TextBox_EventHandler_1junu_1",nSe="_TextBox_Container_1junu_9",iSe="_showSoftly_1junu_1",aSe="_TextBox_main_1junu_17",oSe="_TextBox_Background_1junu_38",sSe="_TextBox_textElement_start_1junu_51",lSe="_TextDelayShow_1junu_1",uSe="_outer_1junu_57",cSe="_inner_1junu_69",fSe="_zhanwei_1junu_78",hSe="_TextBox_textElement_Settled_1junu_83",dSe="_TextBox_showName_1junu_88",pSe="_TextBox_ShowName_Background_1junu_101",vSe="_miniAvatarContainer_1junu_116",mSe="_miniAvatarImg_1junu_126",gSe="_nameContainer_1junu_134",ySe="_outerName_1junu_140",xSe="_innerName_1junu_151",_Se="_text_1junu_158",Lt={TextBox_EventHandler:rSe,TextBox_Container:nSe,showSoftly:iSe,TextBox_main:aSe,TextBox_Background:oSe,TextBox_textElement_start:sSe,TextDelayShow:lSe,outer:uSe,inner:cSe,zhanwei:fSe,TextBox_textElement_Settled:hSe,TextBox_showName:dSe,TextBox_ShowName_Background:pSe,miniAvatarContainer:vSe,miniAvatarImg:mSe,nameContainer:gSe,outerName:ySe,innerName:xSe,text:_Se};function bSe(t){const{textArray:e,textDelay:r,currentConcatDialogPrev:n,currentDialogKey:i,isText:a,isSafari:o,isFirefox:s,fontSize:c,miniAvatar:l,showName:u,font:f,textDuration:h,isUseStroke:d,textboxOpacity:p}=t,v=H3("Stage/TextBox/textbox.scss");ie.useEffect(()=>{function m(){[...document.querySelectorAll(".Textelement_start")].forEach(_=>{_.className=v("TextBox_textElement_Settled",Lt.TextBox_textElement_Settled)})}return j.events.textSettle.on(m),()=>{j.events.textSettle.off(m)}},[]);let y=0;const g=e.map((m,x)=>{const b=m.map((_,S)=>{let E=y*r;y++;let w=n.length;return n!==""&&S>=w&&(E=E-w*r),S<w?k.jsx("span",{id:`${E}`,className:v("TextBox_textElement_Settled",Lt.TextBox_textElement_Settled),style:{animationDelay:`${E}ms`,animationDuration:`${h}ms`},children:k.jsxs("span",{className:Lt.zhanwei,children:[_,k.jsx("span",{className:v("outer",Lt.outer),children:_}),d&&k.jsx("span",{className:v("inner",Lt.inner),children:_})]})},i+S):k.jsx("span",{"data-text":_,id:`${E}`,className:`${v("TextBox_textElement_start",Lt.TextBox_textElement_start)} Textelement_start`,style:{animationDelay:`${E}ms`,position:"relative"},children:k.jsxs("span",{className:Lt.zhanwei,children:[_,k.jsx("span",{className:v("outer",Lt.outer),children:_}),d&&k.jsx("span",{className:v("inner",Lt.inner),children:_})]})},i+S)});return k.jsx("div",{style:{wordBreak:o||t.isFirefox?"break-all":void 0,display:o?"flex":void 0,flexWrap:o?"wrap":void 0},children:b},`text-line-${x}`)});return console.log(`${p/100}`),k.jsx(k.Fragment,{children:a&&k.jsxs("div",{className:Lt.TextBox_Container,children:[k.jsx("div",{className:v("TextBox_main",Lt.TextBox_main)+" "+v("TextBox_Background",Lt.TextBox_Background),style:{opacity:`${p/100}`,left:l===""?25:void 0}}),k.jsxs("div",{id:"textBoxMain",className:v("TextBox_main",Lt.TextBox_main),style:{fontFamily:f,left:l===""?25:void 0},children:[k.jsx("div",{id:"miniAvatar",className:v("miniAvatarContainer",Lt.miniAvatarContainer),children:l!==""&&k.jsx("img",{className:v("miniAvatarImg",Lt.miniAvatarImg),alt:"miniAvatar",src:l})}),u!==""&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:v("TextBox_showName",Lt.TextBox_showName)+" "+v("TextBox_ShowName_Background",Lt.TextBox_ShowName_Background),style:{opacity:`${p/100}`,fontSize:"200%"},children:k.jsx("div",{style:{opacity:0},children:u.split("").map((m,x)=>k.jsx("span",{style:{position:"relative"},children:k.jsxs("span",{className:Lt.zhanwei,children:[m,k.jsx("span",{className:v("outerName",Lt.outerName),children:m}),d&&k.jsx("span",{className:v("innerName",Lt.innerName),children:m})]})},m+x))})}),k.jsx("div",{className:v("TextBox_showName",Lt.TextBox_showName),style:{fontSize:"200%"},children:u.split("").map((m,x)=>k.jsx("span",{style:{position:"relative"},children:k.jsxs("span",{className:Lt.zhanwei,children:[m,k.jsx("span",{className:v("outerName",Lt.outerName),children:m}),d&&k.jsx("span",{className:v("innerName",Lt.innerName),children:m})]})},m+x))},u)]}),k.jsx("div",{className:v("text",Lt.text),style:{fontSize:c,flexFlow:"column",overflow:"hidden",paddingLeft:"0.1em"},children:g})]})]})})}const SN=navigator.userAgent,SSe=/firefox/i.test(SN),ESe=/^((?!chrome|android).)*safari/i.test(SN),wSe=()=>{const[t,e]=ie.useState(!0);ie.useEffect(()=>{const m=()=>{const x=Lp.height,b=Lp.width,_=window.innerHeight,S=window.innerWidth,E=_/x,w=S/b,C=S/x,A=_/b;[E,w,C,A].forEach(P=>{P<=.2?e(!1):e(!0)})};return window.addEventListener("resize",m),m(),()=>{window.removeEventListener("resize",m)}},[]);const r=Ue(m=>m.stage),n=Ue(m=>m.userData),i=h3(n.optionData.textSpeed),a=zae(n.optionData.textSpeed);let o=zR(n.optionData.textSize)+"%";const s=tSe(),c=r.showText!==""||r.showName!=="";let l=n.optionData.textSize;c&&r.showTextSize!==-1&&(o=zR(r.showTextSize)+"%",l=r.showTextSize);const u=Z0(n.optionData.textSize).with(yo.small,()=>3).with(yo.medium,()=>2).with(yo.large,()=>2).default(()=>2),f=EN(r.showText,u),h=r.showName,d=r.currentConcatDialogPrev,p=r.currentDialogKey,v=r.miniAvatar,y=n.optionData.textboxOpacity,g=bSe;return k.jsx(g,{textArray:f,isText:c,textDelay:i,showName:h,currentConcatDialogPrev:d,fontSize:o,currentDialogKey:p,isSafari:ESe,isFirefox:SSe,miniAvatar:v,textDuration:a,font:s,textSizeState:l,lineLimit:u,isUseStroke:t,textboxOpacity:y})};function WR(t){return!!t.match(/[\u4e00-\u9fa5]|[\u0800-\u4e00]|[\uac00-\ud7ff]/)}function EN(t,e,r){return t.split("|").map(o=>CSe(o)).map(o=>{const s=[];return o.forEach((c,l)=>{Z0(c.type).with("SegmentType.String",()=>{const u=ASe(c.value);s.push(...u)}).endsWith("SegmentType.Link",()=>{const u=c.value,f=k.jsxs("ruby",{children:[u.text,k.jsx("rt",{children:u.link})]},l+u.text);s.push(f)})}),s}).slice(0,r?void 0:e)}function ASe(t){if(!t)return[];const e=[];let r="",n=WR(t[0]);const i=a=>/[!-\/:-@\[-`{-~\u2000-\u206F\u3000-\u303F\uff00-\uffef]/g.test(a);for(const a of t)if(a===" ")r&&(e.push(r),r=""),e.push(" "),n=!1;else if(WR(a)&&!i(a))!n&&r&&(e.push(r),r=""),e.push(a),n=!0;else{if(i(a)){r?(r+=a,e.push(r),r=""):e.length>0?e[e.length-1]+=a:e.push(a);continue}n&&r&&(e.push(r),r=""),r+=a,n=!1}return r&&e.push(r),e}function CSe(t){const e=/(\[(.*?)\]\((.*?)\))|([^\[\]]+)/g,r=[];let n;for(;(n=e.exec(t))!==null;)if(n[1]){const i=n[2],a=n[3];r.push({type:"SegmentType.Link",value:{text:i,link:a}})}else{const i=n[0];r.push({type:"SegmentType.String",value:i})}return r}async function XR(t){if(!window.isSafari||!t.toLowerCase().endsWith(".ogg"))return t;try{const r=await(await fetch(t)).arrayBuffer();return await TSe(r)}catch(e){throw console.error("Error fetching or decoding Ogg file:",e),e}}function TSe(t){return new Promise((e,r)=>{let n=new Uint8Array(t),i=new Worker("./decoderWorker.js"),a=new Worker("./waveWorker.js"),o=8e3;i.postMessage({command:"init",decoderSampleRate:o,outputBufferSampleRate:o}),a.postMessage({command:"init",wavBitDepth:16,wavSampleRate:o}),i.onmessage=function(s){s.data===null?a.postMessage({command:"done"}):a.postMessage({command:"encode",buffers:s.data},s.data.map(function(c){return c.buffer}))},a.onmessage=function(s){if(s.data.message==="page"){let c=new Blob([s.data.page],{type:"audio/wav"}),l=URL.createObjectURL(c);e(l)}},i.postMessage({command:"decode",pages:n},[n.buffer])})}const PSe=()=>{var g;const t=Ue(m=>m.stage),e=Ue(m=>m.GUI.titleBgm),r=Ue(m=>m.GUI.showTitle),n=Ue(m=>m.userData),i=n.optionData.volumeMain,a=i*.01*n.optionData.vocalVolume*.01*t.vocalVolume*.01,o=i*.01*n.optionData.bgmVolume*.01*t.bgm.volume*.01,s=t.bgm.enter,c=t.uiSe,l=i*.01*(((g=n.optionData)==null?void 0:g.seVolume)??100)*.01,u=i*.01*(n.optionData.uiSeVolume??50)*.01,f=Ue(m=>m.GUI.isEnterGame),[h,d]=ie.useState(""),[p,v]=ie.useState(setTimeout(()=>{},0)),y=(m,x,b)=>{b>=0?m.volume=0:m.volume=x;const _=10,S=x/b*_,E=()=>{const w=setTimeout(()=>{m.volume+S>=x?m.volume=x:m.volume+S<=0?(m.volume=0,J.dispatch($e({key:"bgm",value:{src:"",enter:0,volume:100}}))):(m.volume+=S,E())},_);v(w)};E()};return ie.useEffect(()=>{clearTimeout(p);const m=document.getElementById("currentBgm");m&&(s===0?m.volume=o:y(m,o,s))},[h,o,s]),ie.useEffect(()=>{(async()=>{const x=await XR(r?e:t.bgm.src);d(x)})()},[r,e,t.bgm.src]),ie.useEffect(()=>{Ae.debug(`设置背景音量：${o}`)},[o]),ie.useEffect(()=>{Ae.debug(`设置背景音量淡入时间: ${s}`)},[s]),ie.useEffect(()=>{Ae.debug(`设置语音音量：${a}`);const m=document.getElementById("currentVocal");m&&(m.volume=a.toString())},[a]),ie.useEffect(()=>{if(c==="")return;(async()=>{const x=await XR(c),b=document.createElement("audio");b.src=x,b.loop=!1,isNaN(u)?(Ae.error("UI SE Vol is NaN"),b.volume=isNaN(l)?i/100:l/100):b.volume=u,b.play(),b.addEventListener("ended",()=>{b.remove()}),J.dispatch($e({key:"uiSe",value:""}))})()},[c]),ie.useEffect(()=>{Ae.debug(`设置音效音量: ${l}`)},[l]),ie.useEffect(()=>{Ae.debug(`设置用户界面音效音量: ${u}`)},[u]),k.jsxs("div",{children:[k.jsx("audio",{id:"currentBgm",src:h,loop:!0,autoPlay:f},r.toString()+h),k.jsx("audio",{id:"currentVocal",src:t.playVocal})]})},OSe=()=>{const t=Ue(i=>i.stage);let e="100%",r="100%",n="0";return t.enableFilm!==""&&(r="76%",n="12%"),k.jsx("div",{className:Xa.FullScreenPerform_main,style:{width:e,height:r,top:n},children:k.jsx("div",{id:"videoContainer"})})},RSe="_TextBox_EventHandler_449dq_2",ISe="_TextBox_main_449dq_10",FSe="_showSoftly_449dq_1",kSe="_TextBox_textElement_449dq_38",DSe="_TextBox_textElement_start_449dq_43",MSe="_TextDelayShow_449dq_1",LSe="_TextBox_textElement_Settled_449dq_48",BSe="_TextBox_showName_449dq_52",NSe="_miniAvatarContainer_449dq_68",jSe="_miniAvatarImg_449dq_76",Dy={TextBox_EventHandler:RSe,TextBox_main:ISe,showSoftly:FSe,TextBox_textElement:kSe,TextBox_textElement_start:DSe,TextDelayShow:MSe,TextBox_textElement_Settled:LSe,TextBox_showName:BSe,miniAvatarContainer:NSe,miniAvatarImg:jSe},USe=()=>{const t=Ue(o=>o.stage),e=Ue(o=>o.userData);ie.useEffect(()=>{});const r=IX.textInitialDelay-20*e.optionData.textSpeed,n=e.optionData.textSize*50+200+"%",a=t.showText.split("").map((o,s)=>{let c=s*r,l=t.currentConcatDialogPrev.length;return t.currentConcatDialogPrev!==""&&s>=l&&(c=c-l*r),s<l?k.jsx("span",{id:`${c}`,className:Dy.TextBox_textElement_Settled,style:{animationDelay:`${c}ms`},children:o},t.currentDialogKey+s):k.jsx("span",{id:`${c}`,className:Dy.TextBox_textElement_start,style:{animationDelay:`${c}ms`},children:o},t.currentDialogKey+s)});return k.jsx("div",{id:"textBoxMain",className:Dy.TextBox_main,children:k.jsx("div",{style:{fontSize:n},children:a})})};function $Se(t){const e=t.bgName;ie.useEffect(()=>{var n,i,a;const r="bg-main";if(e!==""){const o=(n=j.gameplay.pixiStage)==null?void 0:n.getStageObjByKey(r);o&&o.sourceUrl!==e&&HR(o),(i=j.gameplay.pixiStage)==null||i.addBg(r,e),Zf(e),Ae.debug("重设背景"),setTimeout(()=>{const{duration:s,animation:c}=Ja("bg-main","enter",!0);j.gameplay.pixiStage.registerPresetAnimation(c,"bg-main-softin",r,t.effects),setTimeout(()=>j.gameplay.pixiStage.removeAnimationWithSetEffects("bg-main-softin"),s)},0)}else{const o=(a=j.gameplay.pixiStage)==null?void 0:a.getStageObjByKey(r);o&&HR(o)}},[e])}function HR(t){var i,a;(i=j.gameplay.pixiStage)==null||i.removeAnimationWithSetEffects("bg-main-softin");const e=t.key;t.key="bg-main-off",(a=j.gameplay.pixiStage)==null||a.removeStageObjectByKey(e);const{duration:r,animation:n}=Ja("bg-main-off","exit",!0);j.gameplay.pixiStage.registerAnimation(n,"bg-main-softoff","bg-main-off"),setTimeout(()=>{var o,s;(o=j.gameplay.pixiStage)==null||o.removeAnimation("bg-main-softoff"),(s=j.gameplay.pixiStage)==null||s.removeStageObjectByKey("bg-main-off")},r)}function VSe(t){const{figNameLeft:e,figName:r,figNameRight:n,freeFigure:i,live2dMotion:a,live2dExpression:o}=t;ie.useEffect(()=>{var s;for(const c of a)(s=j.gameplay.pixiStage)==null||s.changeModelMotionByKey(c.target,c.motion)},[a]),ie.useEffect(()=>{var s;for(const c of o)(s=j.gameplay.pixiStage)==null||s.changeModelExpressionByKey(c.target,c.expression)},[o]),ie.useEffect(()=>{var l,u;const s="fig-center",c="fig-center-softin";if(r!==""){const f=(l=j.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(s);f&&f.sourceUrl!==r&&Aa(f,c,t.effects),ic(void 0,s,r,"center"),Ae.debug("中立绘已重设"),setTimeout(()=>{const{duration:h,animation:d}=Ja(s,"enter");j.gameplay.pixiStage.registerPresetAnimation(d,c,s,t.effects),setTimeout(()=>j.gameplay.pixiStage.removeAnimationWithSetEffects(c),h)},0)}else{Ae.debug("移除中立绘");const f=(u=j.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==r&&Aa(f,c,t.effects)}},[r]),ie.useEffect(()=>{var l,u;const s="fig-left",c="fig-left-softin";if(e!==""){const f=(l=j.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(s);f&&f.sourceUrl!==e&&Aa(f,c,t.effects),ic(void 0,s,e,"left"),Ae.debug("左立绘已重设"),setTimeout(()=>{const{duration:h,animation:d}=Ja(s,"enter");j.gameplay.pixiStage.registerPresetAnimation(d,c,s,t.effects),setTimeout(()=>j.gameplay.pixiStage.removeAnimationWithSetEffects(c),h)},0)}else{Ae.debug("移除左立绘");const f=(u=j.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==e&&Aa(f,c,t.effects)}},[e]),ie.useEffect(()=>{var l,u;const s="fig-right",c="fig-right-softin";if(n!==""){const f=(l=j.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(s);f&&f.sourceUrl!==n&&Aa(f,c,t.effects),ic(void 0,s,n,"right"),Ae.debug("右立绘已重设"),setTimeout(()=>{const{duration:h,animation:d}=Ja(s,"enter");j.gameplay.pixiStage.registerPresetAnimation(d,c,s,t.effects),setTimeout(()=>j.gameplay.pixiStage.removeAnimationWithSetEffects(c),h)},0)}else{const f=(u=j.gameplay.pixiStage)==null?void 0:u.getStageObjByKey(s);f&&f.sourceUrl!==n&&Aa(f,c,t.effects)}},[n]),ie.useEffect(()=>{var c,l,u;for(const f of i){const h=`${f.key}`,d=`${f.key}-softin`;if(f.name!==""){const p=(c=j.gameplay.pixiStage)==null?void 0:c.getStageObjByKey(h);p?p.sourceUrl!==f.name&&(Aa(p,d,t.effects),ic(void 0,h,f.name,f.basePosition),Ae.debug(`${f.key}立绘已重设`),setTimeout(()=>{const{duration:v,animation:y}=Ja(h,"enter");j.gameplay.pixiStage.registerPresetAnimation(y,d,h,t.effects),setTimeout(()=>j.gameplay.pixiStage.removeAnimationWithSetEffects(d),v)},0)):(ic(void 0,h,f.name,f.basePosition),Ae.debug(`${f.key}立绘已重设`),setTimeout(()=>{const{duration:v,animation:y}=Ja(h,"enter");j.gameplay.pixiStage.registerPresetAnimation(y,d,h,t.effects),setTimeout(()=>j.gameplay.pixiStage.removeAnimationWithSetEffects(d),v)},0))}else{const p=(l=j.gameplay.pixiStage)==null?void 0:l.getStageObjByKey(h);p&&p.sourceUrl!==f.name&&Aa(p,d,t.effects)}}const s=(u=j.gameplay.pixiStage)==null?void 0:u.getFigureObjects();if(s){for(const f of s)if(!(f.key==="fig-left"||f.key==="fig-center"||f.key==="fig-right"||f.key.endsWith("-off"))){const h=f.key;if(i.findIndex(p=>p.key===h)<0){const p=`${f.key}-softin`;Aa(f,p,t.effects)}}}},[i])}function Aa(t,e,r){var c,l,u;if((c=j.gameplay.pixiStage)==null||c.removeAnimationWithSetEffects(e),j.gameplay.isFast){Ae.info("快速模式，立刻关闭立绘"),(l=j.gameplay.pixiStage)==null||l.removeStageObjectByKey(t.key);return}const n=t.key;t.key=t.key+"-off",(u=j.gameplay.pixiStage)==null||u.removeStageObjectByKey(n);const i=t.key,a=i+"-softoff",{duration:o,animation:s}=Ja(i,"exit");j.gameplay.pixiStage.registerPresetAnimation(s,a,i,r),setTimeout(()=>{var f,h;(f=j.gameplay.pixiStage)==null||f.removeAnimation(a),(h=j.gameplay.pixiStage)==null||h.removeStageObjectByKey(i)},o)}function ic(t,...e){var n,i;const r=e[1];return r.endsWith(".json")?GSe(...e):r.endsWith(".skel")?(n=j.gameplay.pixiStage)==null?void 0:n.addSpineFigure(...e):(i=j.gameplay.pixiStage)==null?void 0:i.addFigure(...e)}function GSe(...t){}function zSe(t){const e=t.effects;setTimeout(()=>{WSe(e)},10)}function WSe(t){var r,n,i,a;const e=((r=j.gameplay.pixiStage)==null?void 0:r.getAllStageObj())??[];for(const o of e){const s=o.key,c=t.find(u=>u.target===s);if(!(((n=j.gameplay.pixiStage)==null?void 0:n.getAllLockedObject())??[]).includes(s))if(c){const u=(i=j.gameplay.pixiStage)==null?void 0:i.getStageObjByKey(s);if(u){const f=u.pixiContainer;Object.assign(f,YR(c.transform))}}else{const u=(a=j.gameplay.pixiStage)==null?void 0:a.getStageObjByKey(s);if(u){const f=u.pixiContainer;Object.assign(f,YR(GS))}}}}function YR(t){if(!t)return{};const{position:e,...r}=t;return{...r,x:e.x,y:e.y}}function XSe(){const t=Ue(e=>e.stage);return $Se(t),VSe(t),zSe(t),k.jsx("div",{style:{display:"none"}})}const HSe="_introContainer_119k8_1",YSe={introContainer:HSe};function qSe(){return k.jsx("div",{className:YSe.introContainer,id:"introContainer"})}const KSe="_variableNameWrapper_eflox_1",ZSe={variableNameWrapper:KSe},QSe=()=>{var r,n;const t=Ue(i=>i.stage),e=ie.useMemo(()=>{const i=new Map,a=t.showValues;return a!=null&&a.length&&a.forEach(o=>{i.set(o.key,o.value)}),i},[t]);return k.jsx(k.Fragment,{children:((r=t.showValueList)==null?void 0:r.length)&&((n=t.showValueList)==null?void 0:n.map(i=>i.isShowValueSWitch?k.jsx("div",{className:ZSe.variableNameWrapper,style:{position:"fixed",left:i.showValueAxisX+"px",top:i.showValueAxisY+"px"},children:e.get(i.showValueName)||""}):null))||null})};function qR(t){const e=document.getElementById("textBoxMain");if(!e)return!1;let r=e.getBoundingClientRect();return t.clientX>r.left&&t.clientX<r.right&&t.clientY>r.top&&t.clientY<r.bottom}function JSe(t,e,r){!e.controlsVisibility&&qR(t)&&r(Ye({component:"controlsVisibility",visibility:!0})),e.controlsVisibility&&!qR(t)&&r(Ye({component:"controlsVisibility",visibility:!1}))}function eEe(t,e){var i;return!!(!e.showTextBox||t.isDisableTextbox||!(t.showText!==""||t.showName!=="")||((i=document.getElementById("introContainer"))==null?void 0:i.style.display)==="block")}let My=null;function tEe(t,e,r,n){eEe(e,r)?(My&&clearTimeout(My),n(Ye({component:"controlsVisibility",visibility:!0})),My=setTimeout(()=>{n(Ye({component:"controlsVisibility",visibility:!1}))},1e3)):JSe(t,r,n)}const rEe=()=>{const t=Ue(n=>n.stage),e=Ue(n=>n.GUI),r=or();return Lue(),k.jsxs("div",{className:ky.MainStage_main,children:[k.jsx(OSe,{}),k.jsx(XSe,{}),k.jsx("div",{id:"pixiContianer",className:ky.pixiContainer,style:{zIndex:xA?"-5":void 0}}),k.jsx("div",{id:"chooseContainer",className:ky.chooseContainer}),e.showTextBox&&t.enableFilm===""&&!t.isDisableTextbox&&k.jsx(wSe,{}),e.showTextBox&&t.enableFilm!==""&&k.jsx(USe,{}),k.jsx(PSe,{}),k.jsx("div",{onClick:()=>{if(!e.showTextBox){r(Ye({component:"showTextBox",visibility:!0}));return}xE(),gr()},onDoubleClick:()=>{j.events.fullscreenDbClick.emit()},id:"FullScreenClick",style:{width:"100%",height:"100%",position:"absolute",zIndex:"12",top:"0"},onMouseMove:n=>!e.showControls&&tEe(n,t,e,r)}),k.jsx(qSe,{}),t.isShowValueSWitch&&k.jsx(QSe,{})]})};var nEe=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function KR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KR(Object(r),!0).forEach(function(n){iEe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iEe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aEe(t,e){if(t==null)return{};var r=oEe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function oEe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var sEe={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function lEe(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function uEe(t,e,r){var n=typeof e.fill=="string"?[e.fill]:e.fill||[],i=[],a=e.theme||r.theme;switch(a){case"outline":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none");break;case"filled":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("#FFF"),i.push("#FFF");break;case"two-tone":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone);break;case"multi-color":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.multiColor.outFillColor),i.push(typeof n[2]=="string"?n[2]:r.colors.multiColor.innerStrokeColor),i.push(typeof n[3]=="string"?n[3]:r.colors.multiColor.innerFillColor);break}return{size:e.size||r.size,strokeWidth:e.strokeWidth||r.strokeWidth,strokeLinecap:e.strokeLinecap||r.strokeLinecap,strokeLinejoin:e.strokeLinejoin||r.strokeLinejoin,colors:i,id:t}}var wN=ie.createContext(sEe);wN.Provider;function ih(t,e,r){return function(n){var i=n.size,a=n.strokeWidth,o=n.strokeLinecap,s=n.strokeLinejoin,c=n.theme,l=n.fill,u=n.className,f=n.spin,h=aEe(n,nEe),d=ie.useContext(wN),p=ie.useMemo(lEe,[]),v=uEe(p,{size:i,strokeWidth:a,strokeLinecap:o,strokeLinejoin:s,theme:c,fill:l},d),y=[d.prefix+"-icon"];return y.push(d.prefix+"-icon-"+t),e&&d.rtl&&y.push(d.prefix+"-icon-rtl"),f&&y.push(d.prefix+"-icon-spin"),u&&y.push(u),zt.createElement("span",ZR(ZR({},h),{},{className:y.join(" ")}),r(v))}}const AN=ih("close-small",!1,function(t){return zt.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},zt.createElement("path",{d:"M14 14L34 34",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M14 34L34 14",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),cEe=ih("hamburger-button",!1,function(t){return zt.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},zt.createElement("path",{d:"M7.94971 11.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M7.94971 23.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M7.94971 35.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),fEe=ih("return",!0,function(t){return zt.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},zt.createElement("path",{d:"M12.9998 8L6 14L12.9998 21",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),hEe=ih("save",!0,function(t){return zt.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},zt.createElement("path",{d:"M6 9C6 7.34315 7.34315 6 9 6H34.2814L42 13.2065V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6",fill:t.colors[3]}),zt.createElement("path",{d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6H24.0083Z",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M9 6H34.2814",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M14 26H34",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M14 34H24.0083",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),dEe=ih("volume-notice",!0,function(t){return zt.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},zt.createElement("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M32 15L32 15C32.6232 15.5565 33.1881 16.1797 33.6841 16.8588C35.1387 18.8504 36 21.3223 36 24C36 26.6545 35.1535 29.1067 33.7218 31.0893C33.2168 31.7885 32.6391 32.4293 32 33",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),zt.createElement("path",{d:"M34.2359 41.1857C40.0836 37.6953 44 31.305 44 24C44 16.8085 40.2043 10.5035 34.507 6.97906",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}))}),pEe=""+new URL("gaming-continue.png",import.meta.url).href,vEe=""+new URL("gaming-stop.png",import.meta.url).href,mEe=()=>{const t=oa("gaming."),e=2.5,{i18n:r}=ev(),{playSeEnter:n,playSeClick:i,playSeDialogOpen:a}=On();ie.useState(!1);const[o,s]=ie.useState(!1),[c,l]=ie.useState(!1);let u=null;const h=r.language==="fr";let d=42,p="150%";h&&(p="125%",d=40);const v=Ue(P=>P.GUI),y=Ue(P=>P.stage),g=or(),m=Ue(P=>P.saveData.saveData);if(t("noSaving"),m[0]){const P=m[0];un.slPreviewMain,un.imgContainer,P.previewImage,un.textContainer,P.nowStageState.showName,P.nowStageState.showText}const x=async()=>{for(let P=1;P<=20;P++){const T=(P-1)*10+1,O=T+9;await Kf(T,O);const R=J.getState().saveData.saveData;for(let F=1;F<R.length;F++){const D=(P-1)*10+F;if(!R[F])return D}}return(20-1)*10+9},b=async P=>{if(P.stopPropagation(),i(),v.showFavorited)return;g(nf(!0));const T=await x();fp(T),Sn()},_=P=>{l(!0);const T=()=>{l(!1),clearTimeout(u),clearInterval(u),document.removeEventListener("mouseup",T)};document.addEventListener("mouseup",T),u=setTimeout(()=>{u=setInterval(()=>{P==="fallBack"?S():P==="forward"&&E()},200)},500)},S=()=>{c||i();const P=j.videoManager.currentPlayingVideo;j.videoManager.backward(P)},E=()=>{c||i();const P=j.videoManager.currentPlayingVideo;j.videoManager.forward(P)},w=()=>{i();const P=j.videoManager.currentPlayingVideo;o?(s(!1),j.videoManager.playVideo(P)):(s(!0),j.videoManager.pauseVideo(P))},C=()=>{i();const P=j.videoManager.currentPlayingVideo;j.videoManager.destroy(P),j.gameplay.isFast=!0,j.gameplay.isSyncingWithOrigine=!0,gr(),setTimeout(()=>{j.gameplay.isFast=!1,j.gameplay.isSyncingWithOrigine=!1},1e3)},A=()=>{const P=v.gameMenus[Rt.Game_extra_button];return!(!P||P.args.hide)};return k.jsx(k.Fragment,{children:v.showTextBox&&y.enableFilm===""&&k.jsxs("div",{className:un.main,style:{visibility:v.controlsVisibility?"visible":"hidden"},children:[k.jsx("span",{className:un.fallBack,onMouseEnter:n,onClick:()=>{S()},onMouseDown:()=>_("fallBack")}),k.jsx("span",{className:un.pause,onMouseEnter:n,onClick:w,children:k.jsx("img",{src:o?vEe:pEe,className:un.icon})}),k.jsx("span",{className:un.advance,onMouseEnter:n,onClick:E,onMouseDown:()=>_("forward")}),k.jsx("span",{className:un.autoplay,onMouseEnter:n,onClick:C}),A()&&k.jsxs("span",{className:un.singleButton,style:{fontSize:p},onClick:b,onMouseEnter:n,children:[k.jsx(hEe,{className:un.button,theme:"outline",size:d,fill:"#f5f5f7",strokeWidth:e}),k.jsx("span",{className:un.button_text,children:t(`${v.showFavorited?"buttons.collected":"buttons.collection"}`)})]})]})})},gEe=()=>{var h,d;const t=oa("gaming."),{playSeEnter:e,playSeClick:r}=On(),n=Ue(p=>p.GUI),i=or(),a="0.8em",[o,s]=ie.useState(!1),[c,l]=ie.useState(!1);let u=ie.useRef();const f=ie.useMemo(()=>{let p=[];for(let v=0;v<j.backlogManager.getBacklog().length;v++){const y=j.backlogManager.getBacklog()[v],g=EN(y.currentStageState.showText,3,!0),x=yEe(g).map((_,S)=>k.jsx("div",{children:_.map((E,w)=>E==="<br />"?k.jsx("br",{},`br${w}`):E)},`backlog-line-${S}`)),b=k.jsxs("div",{className:Zr.backlog_item,style:{animationDelay:`${20*(j.backlogManager.getBacklog().length-v)}ms`},children:[k.jsxs("div",{className:Zr.backlog_func_area,children:[k.jsxs("div",{className:Zr.backlog_item_button_list,children:[k.jsx("div",{onClick:_=>{r(),Voe(v),_.preventDefault(),_.stopPropagation()},onMouseEnter:e,className:Zr.backlog_item_button_element,children:k.jsx(fEe,{theme:"outline",size:a,fill:"#ffffff",strokeWidth:3})}),y.currentStageState.vocal?k.jsx("div",{onClick:()=>{r();const _=document.getElementById("backlog_audio_play_element_"+v);if(_){_.currentTime=0;const S=J.getState().userData,E=S.optionData.volumeMain;_.volume=E*.01*S.optionData.vocalVolume*.01,_==null||_.play()}},onMouseEnter:e,className:Zr.backlog_item_button_element,children:k.jsx(dEe,{theme:"outline",size:a,fill:"#ffffff",strokeWidth:3})}):null]}),k.jsx("div",{className:Zr.backlog_item_content_name,children:y.currentStageState.showName})]}),k.jsx("div",{className:Zr.backlog_item_content,children:k.jsx("span",{className:Zr.backlog_item_content_text,children:x})}),k.jsx("audio",{id:"backlog_audio_play_element_"+v,src:y.currentStageState.vocal})]},"backlogItem"+y.currentStageState.showText+y.saveScene.currentSentenceId);p.unshift(b)}return p},[((d=(h=j.backlogManager.getBacklog()[j.backlogManager.getBacklog().length-1])==null?void 0:h.saveScene)==null?void 0:d.currentSentenceId)??0]);return ie.useEffect(()=>{n.showBacklog?(u.current&&clearTimeout(u.current),s(!1),l(!0),setTimeout(()=>{l(!1)},0)):u.current=setTimeout(()=>{s(!0),u.current=void 0},700+80)},[n.showBacklog]),k.jsx(k.Fragment,{children:k.jsxs("div",{className:`
          ${n.showBacklog?Zr.Backlog_main:Zr.Backlog_main_out}
          ${o?Zr.Backlog_main_out_IndexHide:""}
          `,children:[k.jsxs("div",{className:Zr.backlog_top,children:[k.jsx(AN,{className:Zr.backlog_top_icon,onClick:()=>{r(),i(Ye({component:"showBacklog",visibility:!1})),i(Ye({component:"showTextBox",visibility:!0}))},onMouseEnter:e,theme:"outline",size:"4em",fill:"#ffffff",strokeWidth:3}),k.jsx("div",{className:Zr.backlog_title,onClick:()=>{Ae.info("Rua! Testing")},children:t("buttons.backlog")})]}),n.showBacklog&&k.jsx("div",{className:`${Zr.backlog_content} ${c?Zr.Backlog_main_DisableScroll:""}`,children:f})]})})};function yEe(t){let e=[],r="";for(let n=0;n<t.length;n++){const i=t[n];typeof i=="string"?r+=i:(r!==""&&(e.push(r),r=""),e.push(i))}return r!==""&&e.push(r),e}const xEe="_extra_y6zkm_2",_Ee="_extra_top_y6zkm_14",bEe="_extra_top_icon_y6zkm_20",SEe="_extra_icon_softin_y6zkm_1",EEe="_extra_title_y6zkm_40",wEe="_mainContainer_y6zkm_51",AEe="_bgmContainer_y6zkm_59",CEe="_bgmListContainer_y6zkm_76",TEe="_bgmPlayerMain_y6zkm_91",PEe="_bgmControlButton_y6zkm_95",OEe="_bgmName_y6zkm_110",REe="_bgmElement_y6zkm_118",IEe="_bgmElement_active_y6zkm_148",FEe="_cgMain_y6zkm_153",kEe="_cgContainer_y6zkm_158",DEe="_cgElement_y6zkm_170",MEe="_cgShowDiv_y6zkm_185",LEe="_cgShowDivWarpper_y6zkm_194",BEe="_cgNav_y6zkm_203",NEe="_cgNav_active_y6zkm_222",jEe="_showFullContainer_y6zkm_232",UEe="_showFullCgMain_y6zkm_245",$Ee="_fullCgIn_y6zkm_1",VEe="_editDialogMark_y6zkm_266",GEe="_editDialog_y6zkm_266",zEe="_editDialog_content_y6zkm_288",WEe="_editDialog_footer_y6zkm_304",XEe="_button_y6zkm_311",HEe="_bgmElement_In_y6zkm_1",Pi={extra:xEe,extra_top:_Ee,extra_top_icon:bEe,extra_icon_softin:SEe,extra_title:EEe,mainContainer:wEe,bgmContainer:AEe,bgmListContainer:CEe,bgmPlayerMain:TEe,bgmControlButton:PEe,bgmName:OEe,bgmElement:REe,bgmElement_active:IEe,cgMain:FEe,cgContainer:kEe,cgElement:DEe,cgShowDiv:MEe,cgShowDivWarpper:LEe,cgNav:BEe,cgNav_active:NEe,showFullContainer:jEe,showFullCgMain:UEe,fullCgIn:$Ee,editDialogMark:VEe,editDialog:GEe,editDialog_content:zEe,editDialog_footer:WEe,button:XEe,bgmElement_In:HEe},YEe=t=>{const[e,r]=ie.useState("");ie.useEffect(()=>{t.value&&r(t.value)},[]);const n=()=>{t.onConfirm(e)},i=()=>{t.onCancel()};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:Pi.editDialogMark}),k.jsxs("div",{className:Pi.editDialog,children:[k.jsxs("div",{className:Pi.editDialog_content,children:[k.jsx("label",{children:"重新命名为："}),k.jsx("input",{value:e,onChange:a=>{r(a.target.value)}})]}),k.jsxs("div",{className:Pi.editDialog_footer,children:[k.jsx("span",{className:Pi.button,onClick:n,children:"确认"}),k.jsx("span",{className:Pi.button,onClick:i,children:"取消"})]})]})]})};let Qh="",QR=0;const qEe=()=>{const{playSeClick:t,playSeEnter:e,playSePageChange:r}=On(),n=Ue(g=>g.userData),i=Ue(g=>g.saveData),a=or(),[o,s]=ie.useState(!1),c=[];for(let g=1;g<=20;g++){let m=Me.Save_Load_top_button+" "+Me.Load_top_button;g===n.optionData.slPage&&(m=m+" "+Me.Save_Load_top_button_on+" "+Me.Load_top_button_on);const x=k.jsx("div",{onClick:()=>{a(wS(g)),Sn(),r()},onMouseEnter:e,className:m,children:k.jsx("div",{className:Me.Save_Load_top_button_text,children:g})},"Load_element_page"+g);c.push(x)}const l=[],u=(n.optionData.slPage-1)*10+1,f=u+9;ie.useEffect(()=>{Kf(u,f)},[u,f]);const h=(g,m,x)=>{g.stopPropagation(),Qh=m.saveName||m.saveTime,QR=x,setTimeout(()=>{s(!0)},100)},d=()=>{s(!1),Qh=""},p=g=>{Qh="",fp(QR,g),Sn(),s(!1)};let v=0;for(let g=u;g<=f;g++){v++;const m=i.saveData[g];let x=k.jsx("div",{});m&&(x=k.jsxs(k.Fragment,{children:[k.jsx("div",{className:Me.Save_Load_content_element_top,children:k.jsx("div",{className:Me.Save_Load_content_element_top_index+" "+Me.Load_content_elememt_top_index,children:m.index})}),k.jsx("div",{className:Me.Save_Load_content_miniRen,children:k.jsx("img",{className:Me.Save_Load_content_miniRen_bg,alt:"Save_img_preview",src:m.previewImage})}),k.jsx("div",{children:k.jsx("div",{className:Me.Save_Load_content_element_top_date+" "+Me.Load_content_element_top_date,style:{width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},onClick:_=>h(_,m,g),title:`${m.saveName||m.saveTime}`,children:m.saveName||m.saveTime})})]}));const b=k.jsx("div",{onClick:()=>{a(nf(!0)),T3(g,!0),t()},onMouseEnter:e,className:Me.Save_Load_content_element,style:{animationDelay:`${v*30}ms`},children:x},"loadElement_"+g);l.push(b)}const y=oa("menu.");return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:Me.Save_Load_main,children:[k.jsxs("div",{className:Me.Save_Load_top,children:[k.jsx("div",{className:Me.Save_Load_title,children:k.jsx("div",{className:Me.Load_title_text,children:y("extra.title")})}),k.jsx("div",{className:Me.Save_Load_top_buttonList,children:c})]}),k.jsx("div",{className:Me.Save_Load_content,id:"Load_content_page_"+n.optionData.slPage,children:l})]}),o&&k.jsx(YEe,{value:Qh,onCancel:d,onConfirm:p})]})};function KEe(){const{playSeClick:t,playSeEnter:e}=On(),r=Ue(a=>a.GUI.showExtra),n=or(),i=oa("extra.");return ie.useEffect(()=>{r&&n(_t.setLoadVideo(!0))},[r]),k.jsx(k.Fragment,{children:r&&k.jsxs("div",{className:Pi.extra,children:[k.jsxs("div",{className:Pi.extra_top,children:[k.jsx(AN,{className:Pi.extra_top_icon,onClick:()=>{n(Ye({component:"showExtra",visibility:!1})),n(_t.setLoadVideo(!1)),t()},onMouseEnter:e,theme:"outline",size:"3em",fill:"#fff",strokeWidth:3}),k.jsx("div",{className:Pi.extra_title,children:i("title")})]}),k.jsx("div",{className:Pi.mainContainer,children:k.jsx(qEe,{})})]})})}const ZEe="_tag_yghix_2",QEe="_container_yghix_17",JEe="_showContainer_yghix_1",ewe="_singleButton_yghix_33",twe="_button_text_yghix_37",Br={tag:ZEe,container:QEe,showContainer:JEe,singleButton:ewe,button_text:twe},_A=()=>{const t=J.dispatch;cE(),yE(),Rl(),t($e({key:"playVocal",value:""})),t(Ye({component:"showTitle",visibility:!0})),t(_t.setIsShowUnlock(!1)),t(_t.setShowStoryline(!1)),Zf(J.getState().GUI.titleBg)},rwe=()=>{const t=Ss(!1),e=Ue(a=>a.stage),r=or(),n=(a,o)=>{r(Ye({component:a,visibility:o}))},i=a=>{r(Zx(a))};return k.jsx(k.Fragment,{children:e.enableFilm!==""&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:Br.tag,onClick:()=>{t.set(!t.value)},children:k.jsx(cEe,{theme:"outline",size:"32",fill:"#fff"})}),t.value&&k.jsxs("div",{className:Br.container,children:[k.jsx("span",{className:Br.singleButton,onClick:()=>{n("showBacklog",!0),n("showTextBox",!1),t.set(!t.value)},children:k.jsx("span",{className:Br.button_text,children:"剧情回想 / BACKLOG"})}),k.jsx("span",{className:Br.singleButton,onClick:()=>{t.set(!t.value);let a=document.getElementById("currentVocal");a!==null&&(a.currentTime=0,a.pause(),a==null||a.play())},children:k.jsx("span",{className:Br.button_text,children:"重播语音 / REPLAY VOICE"})}),k.jsx("span",{id:"Button_ControlPanel_auto",className:Br.singleButton,onClick:()=>{Lle(),t.set(!t.value)},children:k.jsx("span",{className:Br.button_text,children:"自动模式 / AUTO"})}),k.jsx("span",{id:"Button_ControlPanel_fast",className:Br.singleButton,onClick:()=>{jle(),t.set(!t.value)},children:k.jsx("span",{className:Br.button_text,children:"快进 / FAST"})}),k.jsx("span",{className:Br.singleButton,onClick:()=>{t.set(!t.value),i(Hn.Save),n("showMenuPanel",!0)},children:k.jsx("span",{className:Br.button_text,children:"存档 / SAVE"})}),k.jsx("span",{className:Br.singleButton,onClick:()=>{t.set(!t.value),i(Hn.Load),n("showMenuPanel",!0)},children:k.jsx("span",{className:Br.button_text,children:"读档 / LOAD"})}),k.jsx("span",{className:Br.singleButton,onClick:()=>{t.set(!t.value),i(Hn.Option),n("showMenuPanel",!0)},children:k.jsx("span",{className:Br.button_text,children:"选项 / OPTIONS"})}),k.jsx("span",{className:Br.singleButton,onClick:()=>{t.set(!t.value),_A()},children:k.jsx("span",{className:Br.button_text,children:"标题 / TITLE"})})]})]})})},nwe="_devPanelMain_11x6i_1",iwe="_devPanelOpener_11x6i_13",JR={devPanelMain:nwe,devPanelOpener:iwe};function awe(){document.getElementById("pixiCanvas").toBlob(e=>{if(e){const r=document.createElement("a");document.body.append(r),r.download="screenshot",r.href=URL.createObjectURL(e),r.click(),r.remove()}},"image/png")}function owe(){function t(){return!!window.location.hash.match(/dev/)}const e=Ss(!1),r=Ss(window.location.hash),n=Ue(c=>c.stage);ie.useEffect(()=>{window.onhashchange=()=>{r.set(window.location.hash)}},[]);const i=t(),{t:a,i18n:o}=ev(),s=k.jsxs(k.Fragment,{children:[k.jsx("div",{onClick:()=>awe(),children:"Save PIXI Screenshot"}),k.jsxs("div",{children:["Current Language:",o.language]}),k.jsx("div",{onClick:()=>{var c;return(c=j.gameplay.pixiStage)==null?void 0:c.removeAnimation("snow-Ticker")},children:"Remove Snow Ticker"}),k.jsx("div",{children:"Stage State"}),k.jsx("div",{children:JSON.stringify(n,null,"  ")})]});return k.jsxs(k.Fragment,{children:[i&&e.value&&k.jsxs("div",{className:JR.devPanelMain,children:[k.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[k.jsx("div",{onClick:()=>e.set(!1),style:{fontSize:"150%",padding:"0 0 0 15px",cursor:"pointer"},children:"×"}),k.jsx("div",{style:{padding:"0 0 0 15px",fontSize:"115%"},children:"WebGAL DEV PANEL"})]}),k.jsx("div",{style:{padding:"10px 10px 10px 10px",overflow:"auto"},children:s})]}),!e.value&&i&&k.jsx("div",{onClick:()=>e.set(!0),className:JR.devPanelOpener,children:"Open Dev Panel"})]})}function swe(t){return pu[t]}function lwe(){const{i18n:t}=ev(),e=_u(n=>n.userData),r=or();return(n,i=!0)=>{var s;const a=n??((s=e.current)==null?void 0:s.optionData.language)??pu.zhCn,o=swe(a);t.changeLanguage(o),r(Qa({key:"language",value:a})),Ae.info("设置语言: "+o),window==null||window.localStorage.setItem("lang",a.toString()),i&&Sn()}}const uwe="_trans_8uz61_2",cwe="_langWrapper_8uz61_10",fwe="_lang_8uz61_10",hwe="_langSelect_8uz61_29",dwe="_langSelectButton_8uz61_35",ac={trans:uwe,langWrapper:cwe,lang:fwe,langSelect:hwe,langSelectButton:dwe};function pwe(){const t=lwe(),[e,r]=ie.useState(!1);ie.useEffect(()=>{(window==null?void 0:window.localStorage.getItem("lang"))||"0"?t(Number(window==null?void 0:window.localStorage.getItem("lang")),!1):r(!0)},[]);const n=i=>{r(!1),t(i)};return k.jsx(k.Fragment,{children:e&&k.jsx("div",{className:ac.trans,children:k.jsxs("div",{className:ac.langWrapper,children:[k.jsx("div",{className:ac.lang,children:"LANGUAGE SELECT"}),k.jsx("div",{className:ac.langSelect,children:Object.keys(Q2).map(i=>k.jsx("div",{className:ac.langSelectButton,onClick:()=>n(pu[i]),children:Q2[i]},i))})]})})})}const vwe=()=>{const t=Ue(n=>n.GUI),[e,r]=ie.useState(!1);return ie.useEffect(()=>{r(t.showPanicOverlay)},[t.showPanicOverlay]),null};function mwe(){const t=Ue(i=>i.userData),e=Ue(i=>i.GUI);or();const r=t.optionData.fullScreen,n=e.isEnterGame;ie.useEffect(()=>{switch(r){case ia.on:{n&&(document.documentElement.requestFullscreen(),vl&&vl.lock(["Escape","F11"]));break}case ia.off:{document.fullscreenElement&&(document.exitFullscreen(),vl&&vl.unlock());break}}},[r])}const gwe="_storyLine_t3ve8_2",ywe="_storyLine_header_t3ve8_11",xwe="_goBack_t3ve8_18",_we="_storyLine_content_t3ve8_32",bwe="_storyLine_item_t3ve8_40",Swe="_info_card_t3ve8_49",Ewe="_playButton_icon_t3ve8_68",wwe="_name_t3ve8_85",za={storyLine:gwe,storyLine_header:ywe,goBack:xwe,storyLine_content:_we,storyLine_item:bwe,info_card:Swe,playButton_icon:Ewe,name:wwe},Awe=()=>{const{playSeClick:t,playSeEnter:e}=On(),r=or(),n=Ue(l=>l.GUI),i=Ue(l=>l.stage),a=Ue(l=>l.saveData.allStorylineData);ie.useEffect(()=>{aE(),n.showStoryLine&&r(_t.setShowStoryline(!1))},[n.showStoryLine]);const o=()=>{t(),_A(),r(Qx(!1))},s=(l,u)=>{l.stopPropagation(),r(Qx(!1)),hE(u.videoData)};function c(l){return pr(l,dr.ui)}return k.jsx(k.Fragment,{children:n.showStoryLine&&k.jsxs("div",{className:za.storyLine,children:[k.jsx("div",{className:za.storyLine_header,children:k.jsx("span",{className:za.goBack,onClick:o,onMouseEnter:e})}),k.jsx("div",{className:za.storyLine_content,style:{width:Fn(i.storyLineBgX),height:i.storyLineBgY>720?Fn(i.storyLineBgY):"100%",backgroundImage:`url("${i.storyLineBg}")`,backgroundSize:i.storyLineBgX&&i.storyLineBgY&&`${Fn(i.storyLineBgX)}px ${Fn(i.storyLineBgY)}px`},children:(a==null?void 0:a.map((l,u)=>{const{name:f,thumbnailUrl:h,x:d,y:p,isUnlock:v,isHideName:y}=l.storyLine;return v?k.jsx("div",{className:za.storyLine_item,style:h?{top:`${Fn(p)}px`,left:`${Fn(d)}px`,backgroundImage:`url("${c(h)}")`}:{},onClick:g=>s(g,l),children:k.jsxs("div",{className:za.info_card,children:[k.jsx("span",{className:za.playButton_icon,style:{width:y?"100%":"50%"}}),y?null:k.jsx("span",{className:za.name,children:f})]})},`storyLine-${u}`):null}))??null})]})})},Cwe="_achievement_k9zh7_1",Twe="_achievement_header_k9zh7_12",Pwe="_goback_k9zh7_20",Owe="_achievement_content_k9zh7_34",Rwe="_achievement_current_k9zh7_41",Iwe="_text_k9zh7_52",Fwe="_number_k9zh7_57",kwe="_pregessBar_k9zh7_62",Dwe="_pregressBar_inner_k9zh7_70",Mwe="_achievement_content_bg_k9zh7_78",Lwe="_achievement_list_k9zh7_86",Bwe="_achievement_item_k9zh7_90",Nwe="_unlockname_k9zh7_105",jwe="_ripple_k9zh7_122",Uwe="_info_card_k9zh7_125",$we="_condition_k9zh7_157",Vwe="_condition_bg_active_k9zh7_166",Gwe="_time_k9zh7_169",zwe="_description_k9zh7_170",Wwe="_info_card_position_right_k9zh7_175",Xwe="_achievement_item_bg_active_k9zh7_179",ur={achievement:Cwe,achievement_header:Twe,goback:Pwe,achievement_content:Owe,achievement_current:Rwe,text:Iwe,number:Fwe,pregessBar:kwe,pregressBar_inner:Dwe,achievement_content_bg:Mwe,achievement_list:Lwe,achievement_item:Bwe,unlockname:Nwe,ripple:jwe,"ripple-effect":"_ripple-effect_k9zh7_1",info_card:Uwe,condition:$we,condition_bg_active:Vwe,time:Gwe,description:zwe,info_card_position_right:Wwe,achievement_item_bg_active:Xwe},Hwe=()=>{var p,v;const{playSeClick:t,playSeEnter:e}=On(),r=Ue(y=>y.GUI),n=Ue(y=>y.stage),i=Ue(y=>y.saveData),a=or(),[o,s]=ie.useState({unlocked:0,allTotal:0,currentProgress:"0%"});ie.useEffect(()=>{r.showAchievement&&(J.dispatch(_t.setIsShowUnlock(!1)),c())},[r.showAchievement]);async function c(){const y=pr(xo.Achieve,dr.scene),g=await Jn(y);await j.sceneManager.setCurrentScene(g,xo.Achieve,y),setTimeout(()=>{l()},100)}async function l(){var b;const y=J.getState().saveData.allUnlockAchieveList,g=((b=J.getState().saveData.unlockAchieveData)==null?void 0:b.length)??0,m=y.length||0,x=(g/m*100).toFixed(2)+"%";s({unlocked:g,allTotal:m,currentProgress:x})}const u=y=>pr(y,dr.ui),f=(y,g)=>y+500>=g,h=(y,g)=>y>=g?g-100:y,d=()=>{t(),_A(),a(Ye({component:"showAchievement",visibility:!1}))};return k.jsx(k.Fragment,{children:r.showAchievement&&k.jsxs("div",{className:ur.achievement,children:[k.jsx("div",{className:ur.achievement_header,children:k.jsx("span",{className:ur.goback,onClick:d,onMouseEnter:e})}),k.jsx("div",{className:ur.achievement_content,children:k.jsxs("div",{className:ur.achievement_current,children:[k.jsx("span",{className:ur.text,children:"已获得成就"}),k.jsx("span",{className:ur.number,children:`${o.unlocked}/${o.allTotal}`}),k.jsx("span",{className:ur.pregessBar,children:k.jsx("span",{className:ur.pregressBar_inner,style:{width:o.currentProgress}})})]})}),k.jsx("div",{className:ur.achievement_content_bg,style:{width:Fn(n.achieveBgX),backgroundImage:`url("${n.achieveBg}")`,backgroundSize:n.achieveBgX&&n.achieveBgY&&`${Fn(n.achieveBgX)}px ${Fn(n.achieveBgY)}px`},children:((p=i.allUnlockAchieveList)==null?void 0:p.length)>0&&k.jsx("div",{className:ur.achievement_list,children:((v=i.allUnlockAchieveList)==null?void 0:v.map(({unlockname:y,x:g,y:m,url:x,isShowUnlock:b,saveTime:_,condition:S},E)=>k.jsxs("div",{className:`${ur.achievement_item} ${b?ur.achievement_item_bg_active:""}`,style:{top:`${Fn(m)}px`,left:`${h(Fn(g),Fn(n.achieveBgX))}px`,backgroundImage:`url("${b&&u(x)}")`},children:[b&&k.jsx("div",{className:ur.ripple}),b&&k.jsx("span",{className:ur.unlockname,children:y}),k.jsxs("div",{className:`${ur.info_card} ${f(Fn(g),Fn(n.achieveBgX))?ur.info_card_position_right:""}`,children:[S&&k.jsx("span",{className:`${ur.condition} ${b?ur.condition_bg_active:""}`,children:S}),_&&k.jsx("span",{className:ur.time,children:`${_}达成`}),k.jsxs("span",{className:ur.description,children:[`${Math.floor(Math.random()*101)}%`,"玩家已达成"]})]})]},`unlockAchieveItem-${E}`)))??null})})]})})},Ywe=""+new URL("pictureUrl_1.png",import.meta.url).href,qwe=""+new URL("pictureUrl_2.png",import.meta.url).href,Kwe=""+new URL("pictureUrl_3.png",import.meta.url).href;var Bp=(t=>(t.Video="video",t.Image="image",t))(Bp||{});const Zwe=[{name:"Una",pictureUrl:Ywe,height:"168cm",weight:"48kg",bustSize:"90cm",waistSize:"58cm",hipSize:"86cm",description:"这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。",contentList:[{type:"video",url:"https://videos.pexels.com/video-files/26957373/12036862_2560_1440_25fps.mp4",thumbnailUrl:"http://gips0.baidu.com/it/u=3560029307,576412274&fm=3028&app=3028&f=JPEG&fmt=auto?w=960&h=1280"},{type:"video",url:"https://videos.pexels.com/video-files/7204909/7204909-sd_360_640_30fps.mp4",thumbnailUrl:"http://gips2.baidu.com/it/u=3944689179,983354166&fm=3028&app=3028&f=JPEG&fmt=auto?w=1024&h=1024"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"}]},{name:"Nanyi",pictureUrl:qwe,height:"175cm",weight:"45kg",bustSize:"95cm",waistSize:"54cm",hipSize:"85cm",description:"这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。",contentList:[{type:"video",url:"https://videos.pexels.com/video-files/26957373/12036862_2560_1440_25fps.mp4",thumbnailUrl:"http://gips0.baidu.com/it/u=3560029307,576412274&fm=3028&app=3028&f=JPEG&fmt=auto?w=960&h=1280"},{type:"video",url:"https://videos.pexels.com/video-files/7204909/7204909-sd_360_640_30fps.mp4",thumbnailUrl:"http://gips2.baidu.com/it/u=3944689179,983354166&fm=3028&app=3028&f=JPEG&fmt=auto?w=1024&h=1024"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"}]},{name:"Bonni",pictureUrl:Kwe,height:"172cm",weight:"47kg",bustSize:"93cm",waistSize:"55cm",hipSize:"88cm",description:"这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。这是一段描述文字，字数控制在300字以内。",contentList:[{type:"video",url:"https://videos.pexels.com/video-files/26957373/12036862_2560_1440_25fps.mp4",thumbnailUrl:"http://gips0.baidu.com/it/u=3560029307,576412274&fm=3028&app=3028&f=JPEG&fmt=auto?w=960&h=1280"},{type:"video",url:"https://videos.pexels.com/video-files/7204909/7204909-sd_360_640_30fps.mp4",thumbnailUrl:"http://gips2.baidu.com/it/u=3944689179,983354166&fm=3028&app=3028&f=JPEG&fmt=auto?w=1024&h=1024"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"},{type:"image",url:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg",thumbnailUrl:"https://wx2.sinaimg.cn/orj360/006TJIxply1hriwi6kxvrj31401e01kx.jpg"},{type:"image",url:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg",thumbnailUrl:"https://wx4.sinaimg.cn/large/002diGk7ly1hrkdnwdu4zj60hi09uq3s02.jpg"},{type:"image",url:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load",thumbnailUrl:"https://images.pexels.com/photos/19640282/pexels-photo-19640282.jpeg?auto=compress&cs=tinysrgb&w=800&lazy=load"}]}],Qwe="_beautyGuideImageDialog_1utrw_1",Jwe="_mark_1utrw_10",eAe="_content_1utrw_21",tAe="_imgWrapper_1utrw_33",rAe="_fade_1utrw_1",nAe="_btnsWrapper_1utrw_45",iAe="_btn_1utrw_45",aAe="_btn_prev_disabled_1utrw_64",oAe="_btn_next_disabled_1utrw_65",sAe="_btn_txt_1utrw_72",bi={beautyGuideImageDialog:Qwe,mark:Jwe,content:eAe,imgWrapper:tAe,fade:rAe,btnsWrapper:nAe,btn:iAe,btn_prev_disabled:aAe,btn_next_disabled:oAe,btn_txt:sAe},lAe=t=>{var f;const e=or(),{playSeClick:r,playSeEnter:n}=On(),[i,a]=ie.useState((t==null?void 0:t.imgUrl)??""),[o,s]=ie.useState(0);ie.useEffect(()=>{var h;if(((h=t.imgList)==null?void 0:h.length)>0){const d=t.imgList.findIndex(p=>p.url===t.imgUrl);d>-1&&s(d)}},[t.imgList]);const c=()=>{r(),e(Ye({component:"showBeautyGuideImageDialog",visibility:!1}))},l=()=>{r();const h=o-1;h<0||(s(h),a(t.imgList[h].url))},u=()=>{r();const h=o+1;h>t.imgList.length-1||(s(h),a(t.imgList[h].url))};return k.jsxs("div",{className:bi.beautyGuideImageDialog,children:[k.jsx("div",{className:bi.mark,onClick:c}),k.jsxs("div",{className:bi.content,children:[k.jsx("div",{className:bi.imgWrapper,children:t.imgList&&t.imgList.map((h,d)=>h.type===Bp.Image&&d===o?k.jsx("img",{src:h.url,className:bi.transitionImage},`img-${d}`):null)}),k.jsxs("div",{className:bi.btnsWrapper,children:[k.jsx("span",{className:`${bi.btn} ${o<1?bi.btn_prev_disabled:""}`,onMouseEnter:n,onClick:l,children:"上一个"}),k.jsxs("span",{className:bi.btn_txt,children:[o+1,"/",((f=t.imgList)==null?void 0:f.length)??0,"张截图"]}),k.jsx("span",{className:`${bi.btn} ${o+1>=t.imgList.length?bi.btn_next_disabled:""}`,onMouseEnter:n,onClick:u,children:"下一个"})]})]})]})},uAe="_beautyGuideDetail_main_kr4kf_1",cAe="_beautyGuideDetail_left_kr4kf_15",fAe="_header_kr4kf_23",hAe="_goback_kr4kf_30",dAe="_title_kr4kf_44",pAe="_pictureUrl_kr4kf_48",vAe="_personal_info_kr4kf_59",mAe="_name_kr4kf_63",gAe="_info_kr4kf_70",yAe="_beautyGuideDetail_right_kr4kf_88",xAe="_contentWrapper_kr4kf_95",_Ae="_content_kr4kf_95",bAe="_content_img_kr4kf_108",SAe="_thumbnailWrapper_kr4kf_119",EAe="_thumbnail_box_kr4kf_130",wAe="_video_mark_kr4kf_156",AAe="_desc_text_kr4kf_167",cr={beautyGuideDetail_main:uAe,beautyGuideDetail_left:cAe,header:fAe,goback:hAe,title:dAe,pictureUrl:pAe,personal_info:vAe,name:mAe,info:gAe,beautyGuideDetail_right:yAe,contentWrapper:xAe,content:_Ae,content_img:bAe,thumbnailWrapper:SAe,thumbnail_box:EAe,video_mark:wAe,desc_text:AAe},CAe=t=>{var h,d,p,v,y,g,m,x,b,_;const e=or(),{playSeClick:r,playSeEnter:n}=On(),i=Ue(S=>S.GUI),[a,o]=ie.useState(null),[s,c]=ie.useState("");ie.useEffect(()=>{var E;const S=t.info;S!=null&&S.contentList&&((E=S==null?void 0:S.contentList)==null?void 0:E.length)>0&&o(S.contentList[0])},[t]);const l=ie.useMemo(()=>{var w;let S=[];const E=t.info;return E!=null&&E.contentList&&((w=E==null?void 0:E.contentList)==null?void 0:w.length)>0&&(S=E.contentList.filter(C=>C.type===Bp.Image)),S},[]),u=()=>{r(),e(Ye({component:"showBeautyGuideDetail",visibility:!1}))},f=S=>{r(),c(S),e(Ye({component:"showBeautyGuideImageDialog",visibility:!0}))};return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:cr.beautyGuideDetail_main,children:[k.jsxs("div",{className:cr.beautyGuideDetail_left,children:[k.jsxs("div",{className:cr.header,children:[k.jsx("span",{className:cr.goback,onClick:u,onMouseEnter:n}),k.jsx("span",{className:cr.title,children:"个人档案馆"})]}),k.jsx("div",{className:cr.pictureUrl,children:k.jsx("img",{src:((h=t.info)==null?void 0:h.pictureUrl)??"",alt:""})}),k.jsxs("div",{className:cr.personal_info,children:[k.jsx("h3",{className:cr.name,children:((d=t.info)==null?void 0:d.name)??""}),k.jsxs("div",{className:cr.info,children:[k.jsx("span",{children:"身高"}),k.jsx("span",{children:((p=t.info)==null?void 0:p.height)??"-"})]}),k.jsxs("div",{className:cr.info,children:[k.jsx("span",{children:"体重"}),k.jsx("span",{children:((v=t.info)==null?void 0:v.weight)??"-"})]}),k.jsxs("div",{className:cr.info,children:[k.jsx("span",{children:"胸围"}),k.jsx("span",{children:((y=t.info)==null?void 0:y.bustSize)??"-"})]}),k.jsxs("div",{className:cr.info,children:[k.jsx("span",{children:"腰围"}),k.jsx("span",{children:((g=t.info)==null?void 0:g.waistSize)??"-"})]}),k.jsxs("div",{className:cr.info,children:[k.jsx("span",{children:"臀围"}),k.jsx("span",{children:((m=t.info)==null?void 0:m.hipSize)??"-"})]})]})]}),k.jsxs("div",{className:cr.beautyGuideDetail_right,children:[k.jsxs("div",{className:cr.contentWrapper,children:[k.jsx("div",{className:cr.content,children:a&&k.jsxs(k.Fragment,{children:[a.type==="video"&&k.jsx("video",{controls:!0,autoPlay:!0,loop:!0,muted:!0,children:k.jsx("source",{src:a.url,type:"video/mp4"})},a.url),a.type==="image"&&k.jsx("img",{className:cr.content_img,src:a.url,onClick:()=>{f(a.url)}})]})}),k.jsx("div",{className:cr.thumbnailWrapper,children:k.jsx("div",{children:((b=(x=t.info)==null?void 0:x.contentList)==null?void 0:b.map((S,E)=>k.jsxs("div",{className:cr.thumbnail_box,onClick:()=>{o(S)},children:[k.jsx("img",{src:S.thumbnailUrl,alt:""}),S.type===Bp.Video&&k.jsx("div",{className:cr.video_mark,children:k.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4276",width:"48",height:"48",children:k.jsx("path",{fill:"#e6e6e6",d:"M315.453793 986.509241Q405.963034 1024 512 1024t196.546207-37.490759q90.509241-37.490759 165.490759-112.463448 74.981517-74.990345 112.472275-165.499586Q1024 618.036966 1024 512t-37.490759-196.546207q-37.490759-90.509241-112.463448-165.490759-74.990345-74.981517-165.499586-112.472275Q618.036966 0 512 0T315.453793 37.490759q-90.509241 37.490759-165.490759 112.463448-74.981517 74.990345-112.472275 165.499586Q0 405.963034 0 512t37.490759 196.546207q37.490759 90.518069 112.463448 165.490759 74.981517 74.981517 165.490759 112.472275z m365.982897-65.447724Q603.409655 953.37931 512 953.37931q-91.409655 0-169.43669-32.317793-78.035862-32.317793-142.66262-96.962207-64.644414-64.635586-96.962207-142.653793Q70.62069 603.400828 70.62069 512t32.317793-169.43669q32.317793-78.027034 96.962207-142.66262 64.635586-64.635586 142.653793-96.962207Q420.599172 70.62069 512 70.62069t169.43669 32.308965v0.008828q78.027034 32.317793 142.66262 96.962207 64.635586 64.635586 96.962207 142.653793Q953.37931 420.599172 953.37931 512t-32.317793 169.43669q-32.317793 78.027034-96.962207 142.66262-64.635586 64.644414-142.653793 96.962207h-0.008827z m-249.979587-650.504827l282.394483 221.007448a25.864828 25.864828 0 0 1 0 40.871724l-282.394483 221.016276c-17.390345 13.594483-43.04331 1.412414-43.04331-20.44469V290.992552c0-21.865931 25.661793-34.048 43.04331-20.44469z"})})})]},`thumbnail-${E}`)))??null})})]}),k.jsx("div",{className:cr.desc_text,children:k.jsx("span",{children:((_=t.info)==null?void 0:_.description)??""})})]})]}),i.showBeautyGuideImageDialog&&k.jsx(lAe,{imgUrl:s,imgList:l})]})},TAe="_beautyGuide_main_1erby_1",PAe="_beautyGuide_header_1erby_15",OAe="_goback_1erby_22",RAe="_title_1erby_36",IAe="_beautyGuide_content_1erby_42",FAe="_item_1erby_49",tl={beautyGuide_main:TAe,beautyGuide_header:PAe,goback:OAe,title:RAe,beautyGuide_content:IAe,item:FAe},kAe=()=>{const t=or(),e=Ue(c=>c.GUI),{playSeClick:r,playSeEnter:n}=On(),[i,a]=ie.useState(null),o=()=>{r(),a(null),t(Ye({component:"showBeautyGuide",visibility:!1}))},s=c=>{r(),a(c),t(Ye({component:"showBeautyGuideDetail",visibility:!0}))};return k.jsxs(k.Fragment,{children:[e.showBeautyGuide&&k.jsxs("div",{className:tl.beautyGuide_main,children:[k.jsxs("div",{className:tl.beautyGuide_header,children:[k.jsx("span",{className:tl.goback,onClick:o,onMouseEnter:n}),k.jsx("span",{className:tl.title,children:"美女图鉴"})]}),k.jsx("div",{className:tl.beautyGuide_content,children:Zwe.map((c,l)=>k.jsx("div",{className:tl.item,onClick:()=>s(c),onMouseEnter:n,children:k.jsx("img",{src:c.pictureUrl})},`${c.name}$-${l}`))})]}),e.showBeautyGuideDetail&&k.jsx(CAe,{info:i})]})},DAe="_modalR18_main_167bk_1",MAe="_footer_167bk_16",eI={modalR18_main:DAe,"fade-in":"_fade-in_167bk_1",footer:MAe},LAe=""+new URL("r18-exit-btn-default.png",import.meta.url).href,BAe=""+new URL("r18-exit-btn-active.png",import.meta.url).href,NAe=""+new URL("r18-confirm-btn-default.png",import.meta.url).href,jAe=""+new URL("r18-confirm-btn-active.png",import.meta.url).href,UAe=()=>{oa("r18.");const t=or(),e=Ue(p=>p.GUI),{playSeClick:r,playSeEnter:n}=On(),[i,a]=ie.useState(!1),[o,s]=ie.useState(!1),[c,l]=ie.useState({width:void 0,height:void 0,opacity:0}),[u,f]=ie.useState({width:void 0,height:void 0,opacity:0}),h=()=>{r(),t(C3(!1))},d=()=>{r(),window.location.href="/"};return k.jsx(k.Fragment,{children:e.isShowR18Modal&&e.openR18Modal&&k.jsx("div",{className:`${eI.modalR18_main} ${e.isShowR18Modal&&e.openR18Modal?"animated fadeIn":""}`,children:k.jsxs("div",{className:eI.footer,children:[k.jsx("div",{id:"exitButton",children:k.jsx("img",{src:i?BAe:LAe,onClick:d,onMouseEnter:()=>{a(!0),n()},onMouseLeave:()=>{a(!1)},onLoad:p=>{l({width:p.target.naturalWidth/.5,height:p.target.naturalHeight/.5,opacity:1})},style:c})}),k.jsx("div",{id:"confirmButton",children:k.jsx("img",{src:o?jAe:NAe,onClick:h,onMouseEnter:()=>{s(!0),n()},onMouseLeave:()=>{s(!1)},onLoad:p=>{f({width:p.target.naturalWidth/.5,height:p.target.naturalHeight/.5,opacity:1})},style:u})})]})})})};function $Ae(){return ie.useEffect(()=>{O1e()},[]),mwe(),k.jsxs("div",{className:"App",children:[k.jsx(pwe,{}),k.jsx(rEe,{}),k.jsx(mEe,{}),k.jsx(rwe,{}),k.jsx(gEe,{}),k.jsx(Zue,{}),k.jsx(nce,{}),k.jsx(KEe,{}),k.jsx(zbe,{}),k.jsx(ybe,{}),k.jsx(vwe,{}),k.jsx(owe,{}),k.jsx(Awe,{}),k.jsx(Hwe,{}),k.jsx(kAe,{}),k.jsx(UAe,{})]})}function So(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q1(t,e){return Q1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Q1(t,e)}function Cv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q1(t,e)}function ah(t,e){if(e&&(Gr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return So(t)}function fa(t){return fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fa(t)}function VAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GAe(t){return D3(t)||VAe(t)||M3(t)||L3()}function tI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var zAe={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,r){console&&console[e]&&console[e].apply(console,r)}},WAe=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mi(this,t),this.init(e,r)}return Li(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||zAe,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,a){return a&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new t(this.logger,rI(rI({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new t(this.logger,r)}}]),t}(),ea=new WAe,ko=function(){function t(){Mi(this,t),this.observers={}}return Li(t,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(a){i.observers[a]=i.observers[a]||[],i.observers[a].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(this.observers[r]){var o=[].concat(this.observers[r]);o.forEach(function(c){c.apply(void 0,i)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(c){c.apply(c,[r].concat(i))})}}}]),t}();function oc(){var t,e,r=new Promise(function(n,i){t=n,e=i});return r.resolve=t,r.reject=e,r}function nI(t){return t==null?"":""+t}function XAe(t,e,r){t.forEach(function(n){e[n]&&(r[n]=e[n])})}function bA(t,e,r){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function i(){return!t||typeof t=="string"}for(var a=typeof e!="string"?[].concat(e):e.split(".");a.length>1;){if(i())return{};var o=n(a.shift());!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={}}return i()?{}:{obj:t,k:n(a.shift())}}function iI(t,e,r){var n=bA(t,e,Object),i=n.obj,a=n.k;i[a]=r}function HAe(t,e,r,n){var i=bA(t,e,Object),a=i.obj,o=i.k;a[o]=a[o]||[],n&&(a[o]=a[o].concat(r)),n||a[o].push(r)}function Np(t,e){var r=bA(t,e),n=r.obj,i=r.k;if(n)return n[i]}function YAe(t,e,r){var n=Np(t,r);return n!==void 0?n:Np(e,r)}function CN(t,e,r){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?typeof t[n]=="string"||t[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?r&&(t[n]=e[n]):CN(t[n],e[n],r):t[n]=e[n]);return t}function rl(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var qAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function KAe(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return qAe[e]}):t}var Tv=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,ZAe=[" ",",","?","!",";"];function QAe(t,e,r){e=e||"",r=r||"";var n=ZAe.filter(function(s){return e.indexOf(s)<0&&r.indexOf(s)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),a=!i.test(t);if(!a){var o=t.indexOf(r);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a}function jp(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var n=e.split(r),i=t,a=0;a<n.length;++a){if(!i||typeof i[n[a]]=="string"&&a+1<n.length)return;if(i[n[a]]===void 0){for(var o=2,s=n.slice(a,a+o).join(r),c=i[s];c===void 0&&n.length>a+o;)o++,s=n.slice(a,a+o).join(r),c=i[s];if(c===void 0)return;if(c===null)return null;if(e.endsWith(s)){if(typeof c=="string")return c;if(s&&typeof c[s]=="string")return c[s]}var l=n.slice(a+o).join(r);return l?jp(c,l,r):void 0}i=i[n[a]]}return i}}function aI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JAe(t){var e=eCe();return function(){var n=fa(t),i;if(e){var a=fa(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ah(this,i)}}function eCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var tCe=function(t){Cv(r,t);var e=JAe(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Mi(this,r),i=e.call(this),Tv&&ko.call(So(i)),i.data=n||{},i.options=a,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Li(r,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var a=this.options.ns.indexOf(i);a>-1&&this.options.ns.splice(a,1)}},{key:"getResource",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[i,a];o&&typeof o!="string"&&(u=u.concat(o)),o&&typeof o=="string"&&(u=u.concat(c?o.split(c):o)),i.indexOf(".")>-1&&(u=i.split("."));var f=Np(this.data,u);return f||!l||typeof o!="string"?f:jp(this.data&&this.data[i]&&this.data[i][a],o,c)}},{key:"addResource",value:function(i,a,o,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,u=[i,a];o&&(u=u.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(u=i.split("."),s=a,a=u[1]),this.addNamespaces(a),iI(this.data,u,s),c.silent||this.emit("added",i,a,o,s)}},{key:"addResources",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var c in o)(typeof o[c]=="string"||Object.prototype.toString.apply(o[c])==="[object Array]")&&this.addResource(i,a,c,o[c],{silent:!0});s.silent||this.emit("added",i,a,o)}},{key:"addResourceBundle",value:function(i,a,o,s,c){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[i,a];i.indexOf(".")>-1&&(u=i.split("."),s=o,o=a,a=u[1]),this.addNamespaces(a);var f=Np(this.data,u)||{};s?CN(f,o,c):f=Jh(Jh({},f),o),iI(this.data,u,f),l.silent||this.emit("added",i,a,o)}},{key:"removeResourceBundle",value:function(i,a){this.hasResourceBundle(i,a)&&delete this.data[i][a],this.removeNamespaces(a),this.emit("removed",i,a)}},{key:"hasResourceBundle",value:function(i,a){return this.getResource(i,a)!==void 0}},{key:"getResourceBundle",value:function(i,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Jh(Jh({},{}),this.getResource(i,a)):this.getResource(i,a)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var a=this.getDataByLanguage(i),o=a&&Object.keys(a)||[];return!!o.find(function(s){return a[s]&&Object.keys(a[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(ko),TN={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,r,n,i,a){var o=this;return e.forEach(function(s){o.processors[s]&&(r=o.processors[s].process(r,n,i,a))}),r}};function oI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function on(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rCe(t){var e=nCe();return function(){var n=fa(t),i;if(e){var a=fa(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ah(this,i)}}function nCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sI={},lI=function(t){Cv(r,t);var e=rCe(r);function r(n){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Mi(this,r),i=e.call(this),Tv&&ko.call(So(i)),XAe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,So(i)),i.options=a,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=ea.create("translator"),i}return Li(r,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,a);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,a){var o=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ns||this.options.defaultNS||[],l=o&&i.indexOf(o)>-1,u=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!QAe(i,o,s);if(l&&!u){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:c};var h=i.split(o);(o!==s||o===s&&this.options.ns.indexOf(h[0])>-1)&&(c=h.shift()),i=h.join(s)}return typeof c=="string"&&(c=[c]),{key:i,namespaces:c}}},{key:"translate",value:function(i,a,o){var s=this;if(Gr(a)!=="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),Gr(a)==="object"&&(a=on({},a)),a||(a={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var c=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,u=this.extractFromKey(i[i.length-1],a),f=u.key,h=u.namespaces,d=h[h.length-1],p=a.lng||this.language,v=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(v){var y=a.nsSeparator||this.options.nsSeparator;return c?{res:"".concat(d).concat(y).concat(f),usedKey:f,exactUsedKey:f,usedLng:p,usedNS:d}:"".concat(d).concat(y).concat(f)}return c?{res:f,usedKey:f,exactUsedKey:f,usedLng:p,usedNS:d}:f}var g=this.resolve(i,a),m=g&&g.res,x=g&&g.usedKey||f,b=g&&g.exactUsedKey||f,_=Object.prototype.toString.apply(m),S=["[object Number]","[object Function]","[object RegExp]"],E=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,C=typeof m!="string"&&typeof m!="boolean"&&typeof m!="number";if(w&&m&&C&&S.indexOf(_)<0&&!(typeof E=="string"&&_==="[object Array]")){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,m,on(on({},a),{},{ns:h})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return c?(g.res=A,g):A}if(l){var P=_==="[object Array]",T=P?[]:{},O=P?b:x;for(var R in m)if(Object.prototype.hasOwnProperty.call(m,R)){var F="".concat(O).concat(l).concat(R);T[R]=this.translate(F,on(on({},a),{joinArrays:!1,ns:h})),T[R]===F&&(T[R]=m[R])}m=T}}else if(w&&typeof E=="string"&&_==="[object Array]")m=m.join(E),m&&(m=this.extendTranslation(m,i,a,o));else{var D=!1,V=!1,Y=a.count!==void 0&&typeof a.count!="string",W=r.hasDefaultValue(a),$=Y?this.pluralResolver.getSuffix(p,a.count,a):"",I=a["defaultValue".concat($)]||a.defaultValue;!this.isValidLookup(m)&&W&&(D=!0,m=I),this.isValidLookup(m)||(V=!0,m=f);var B=a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,L=B&&V?void 0:m,M=W&&I!==m&&this.options.updateMissing;if(V||D||M){if(this.logger.log(M?"updateKey":"missingKey",p,d,f,M?I:m),l){var X=this.resolve(f,on(on({},a),{},{keySeparator:!1}));X&&X.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var K=[],ne=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ne&&ne[0])for(var te=0;te<ne.length;te++)K.push(ne[te]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(a.lng||this.language):K.push(a.lng||this.language);var ce=function(se,fe,oe){var he=W&&oe!==m?oe:L;s.options.missingKeyHandler?s.options.missingKeyHandler(se,d,fe,he,M,a):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(se,d,fe,he,M,a),s.emit("missingKey",se,d,fe,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Y?K.forEach(function(de){s.pluralResolver.getSuffixes(de,a).forEach(function(se){ce([de],f+se,a["defaultValue".concat(se)]||I)})}):ce(K,f,I))}m=this.extendTranslation(m,i,a,g,o),V&&m===f&&this.options.appendNamespaceToMissingKey&&(m="".concat(d,":").concat(f)),(V||D)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(f):f,D?m:void 0):m=this.options.parseMissingKeyHandler(m))}return c?(g.res=m,g):m}},{key:"extendTranslation",value:function(i,a,o,s,c){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,on(on({},this.options.interpolation.defaultVariables),o),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(on(on({},o),{interpolation:on(on({},this.options.interpolation),o.interpolation)}));var u=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(u){var h=i.match(this.interpolator.nestingRegexp);f=h&&h.length}var d=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=on(on({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,o.lng||this.language,o),u){var p=i.match(this.interpolator.nestingRegexp),v=p&&p.length;f<v&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(o.lng=s.usedLng),o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var m=arguments.length,x=new Array(m),b=0;b<m;b++)x[b]=arguments[b];return c&&c[0]===x[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(x[0]," in key: ").concat(a[0])),null):l.translate.apply(l,x.concat([a]))},o)),o.interpolation&&this.interpolator.reset()}var y=o.postProcess||this.options.postProcess,g=typeof y=="string"?[y]:y;return i!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(i=TN.handle(g,i,a,this.options&&this.options.postProcessPassResolved?on({i18nResolved:s},o):o,this)),i}},{key:"resolve",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,c,l,u,f;return typeof i=="string"&&(i=[i]),i.forEach(function(h){if(!a.isValidLookup(s)){var d=a.extractFromKey(h,o),p=d.key;c=p;var v=d.namespaces;a.options.fallbackNS&&(v=v.concat(a.options.fallbackNS));var y=o.count!==void 0&&typeof o.count!="string",g=y&&!o.ordinal&&o.count===0&&a.pluralResolver.shouldUseIntlApi(),m=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",x=o.lngs?o.lngs:a.languageUtils.toResolveHierarchy(o.lng||a.language,o.fallbackLng);v.forEach(function(b){a.isValidLookup(s)||(f=b,!sI["".concat(x[0],"-").concat(b)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(f)&&(sI["".concat(x[0],"-").concat(b)]=!0,a.logger.warn('key "'.concat(c,'" for languages "').concat(x.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(function(_){if(!a.isValidLookup(s)){u=_;var S=[p];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(S,p,_,b,o);else{var E;y&&(E=a.pluralResolver.getSuffix(_,o.count,o));var w="".concat(a.options.pluralSeparator,"zero");if(y&&(S.push(p+E),g&&S.push(p+w)),m){var C="".concat(p).concat(a.options.contextSeparator).concat(o.context);S.push(C),y&&(S.push(C+E),g&&S.push(C+w))}}for(var A;A=S.pop();)a.isValidLookup(s)||(l=A,s=a.getResource(_,b,A,o))}}))})}}),{res:s,usedKey:c,exactUsedKey:l,usedLng:u,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,a,o,s):this.resourceStore.getResource(i,a,o,s)}}],[{key:"hasDefaultValue",value:function(i){var a="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&a===o.substring(0,a.length)&&i[o]!==void 0)return!0;return!1}}]),r}(ko);function Ly(t){return t.charAt(0).toUpperCase()+t.slice(1)}var uI=function(){function t(e){Mi(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ea.create("languageUtils")}return Li(t,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(a){return a.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=Ly(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=Ly(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=Ly(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(a){if(!i){var o=n.formatLanguageCode(a);(!n.options.supportedLngs||n.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&r.forEach(function(a){if(!i){var o=n.getLanguagePartFromCode(a);if(n.isSupportedCode(o))return i=o;i=n.options.supportedLngs.find(function(s){if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&s.indexOf(o)===0)return s})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,a=this.getFallbackCodes(n||this.options.fallbackLng||[],r),o=[],s=function(l){l&&(i.isSupportedCode(l)?o.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(r))):typeof r=="string"&&s(this.formatLanguageCode(r)),a.forEach(function(c){o.indexOf(c)<0&&s(i.formatLanguageCode(c))}),o}}]),t}(),iCe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],aCe={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},oCe=["v1","v2","v3"],cI={zero:0,one:1,two:2,few:3,many:4,other:5};function sCe(){var t={};return iCe.forEach(function(e){e.lngs.forEach(function(r){t[r]={numbers:e.nr,plurals:aCe[e.fc]}})}),t}var lCe=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mi(this,t),this.languageUtils=e,this.options=r,this.logger=ea.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=sCe()}return Li(t,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,i).map(function(a){return"".concat(n).concat(a)})}},{key:"getSuffixes",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(r,i);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort(function(o,s){return cI[o]-cI[s]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):a.numbers.map(function(o){return n.getSuffix(r,o,i)}):[]}},{key:"getSuffix",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.getRule(r,i);return a?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(a.select(n)):this.getSuffixRetroCompatible(a,n):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,n){var i=this,a=r.noAbs?r.plurals(n):r.plurals(Math.abs(n)),o=r.numbers[a];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var s=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?s():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}},{key:"shouldUseIntlApi",value:function(){return!oCe.includes(this.options.compatibilityJSON)}}]),t}();function fI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hI(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=YAe(t,e,r);return!a&&i&&typeof r=="string"&&(a=jp(t,r,n),a===void 0&&(a=jp(e,r,n))),a}var uCe=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mi(this,t),this.logger=ea.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(r){return r},this.init(e)}return Li(t,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:KAe,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?rl(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?rl(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?rl(n.nestingPrefix):n.nestingPrefixEscaped||rl("$t("),this.nestingSuffix=n.nestingSuffix?rl(n.nestingSuffix):n.nestingSuffixEscaped||rl(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,a){var o=this,s,c,l,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(y){return y.replace(/\$/g,"$$$$")}var h=function(g){if(g.indexOf(o.formatSeparator)<0){var m=hI(n,u,g,o.options.keySeparator,o.options.ignoreJSONStructure);return o.alwaysFormat?o.format(m,void 0,i,Si(Si(Si({},a),n),{},{interpolationkey:g})):m}var x=g.split(o.formatSeparator),b=x.shift().trim(),_=x.join(o.formatSeparator).trim();return o.format(hI(n,u,b,o.options.keySeparator,o.options.ignoreJSONStructure),_,i,Si(Si(Si({},a),n),{},{interpolationkey:b}))};this.resetRegExp();var d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,p=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,v=[{regex:this.regexpUnescape,safeValue:function(g){return f(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?f(o.escape(g)):f(g)}}];return v.forEach(function(y){for(l=0;s=y.regex.exec(r);){var g=s[1].trim();if(c=h(g),c===void 0)if(typeof d=="function"){var m=d(r,s,a);c=typeof m=="string"?m:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))c="";else if(p){c=s[0];continue}else o.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(r)),c="";else typeof c!="string"&&!o.useRawValueToEscape&&(c=nI(c));var x=y.safeValue(c);if(r=r.replace(s[0],x),p?(y.regex.lastIndex+=c.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,c;function l(d,p){var v=this.nestingOptionsSeparator;if(d.indexOf(v)<0)return d;var y=d.split(new RegExp("".concat(v,"[ ]*{"))),g="{".concat(y[1]);d=y[0],g=this.interpolate(g,c);var m=g.match(/'/g),x=g.match(/"/g);(m&&m.length%2===0&&!x||x.length%2!==0)&&(g=g.replace(/'/g,'"'));try{c=JSON.parse(g),p&&(c=Si(Si({},p),c))}catch(b){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),b),"".concat(d).concat(v).concat(g)}return delete c.defaultValue,d}for(;o=this.nestingRegexp.exec(r);){var u=[];c=Si({},a),c=c.replace&&typeof c.replace!="string"?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;var f=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var h=o[1].split(this.formatSeparator).map(function(d){return d.trim()});o[1]=h.shift(),u=h,f=!0}if(s=n(l.call(this,o[1].trim(),c),c),s&&o[0]===r&&typeof s!="string")return s;typeof s!="string"&&(s=nI(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(r)),s=""),f&&(s=u.reduce(function(d,p){return i.format(d,p,a.lng,Si(Si({},a),{},{interpolationkey:o[1].trim()}))},s.trim())),r=r.replace(o[0],s),this.regexp.lastIndex=0}return r}}]),t}();function dI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cCe(t){var e=t.toLowerCase().trim(),r={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var a=i.split(";");a.forEach(function(o){if(o){var s=o.split(":"),c=GAe(s),l=c[0],u=c.slice(1),f=u.join(":").trim().replace(/^'+|'+$/g,"");r[l.trim()]||(r[l.trim()]=f),f==="false"&&(r[l.trim()]=!1),f==="true"&&(r[l.trim()]=!0),isNaN(f)||(r[l.trim()]=parseInt(f,10))}})}}return{formatName:e,formatOptions:r}}function nl(t){var e={};return function(n,i,a){var o=i+JSON.stringify(a),s=e[o];return s||(s=t(i,a),e[o]=s),s(n)}}var fCe=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mi(this,t),this.logger=ea.create("formatter"),this.options=e,this.formats={number:nl(function(r,n){var i=new Intl.NumberFormat(r,Ca({},n));return function(a){return i.format(a)}}),currency:nl(function(r,n){var i=new Intl.NumberFormat(r,Ca(Ca({},n),{},{style:"currency"}));return function(a){return i.format(a)}}),datetime:nl(function(r,n){var i=new Intl.DateTimeFormat(r,Ca({},n));return function(a){return i.format(a)}}),relativetime:nl(function(r,n){var i=new Intl.RelativeTimeFormat(r,Ca({},n));return function(a){return i.format(a,n.range||"day")}}),list:nl(function(r,n){var i=new Intl.ListFormat(r,Ca({},n));return function(a){return i.format(a)}})},this.init(e)}return Li(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(r,n){this.formats[r.toLowerCase().trim()]=n}},{key:"addCached",value:function(r,n){this.formats[r.toLowerCase().trim()]=nl(n)}},{key:"format",value:function(r,n,i){var a=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n.split(this.formatSeparator),c=s.reduce(function(l,u){var f=cCe(u),h=f.formatName,d=f.formatOptions;if(a.formats[h]){var p=l;try{var v=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},y=v.locale||v.lng||o.locale||o.lng||i;p=a.formats[h](l,y,Ca(Ca(Ca({},d),o),v))}catch(g){a.logger.warn(g)}return p}else a.logger.warn("there was no format function for ".concat(h));return l},r);return c}}]),t}();function pI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hCe(t){var e=dCe();return function(){var n=fa(t),i;if(e){var a=fa(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ah(this,i)}}function dCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pCe(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var vCe=function(t){Cv(r,t);var e=hCe(r);function r(n,i,a){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Mi(this,r),o=e.call(this),Tv&&ko.call(So(o)),o.backend=n,o.store=i,o.services=a,o.languageUtils=a.languageUtils,o.options=s,o.logger=ea.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(a,s.backend,s),o}return Li(r,[{key:"queueLoad",value:function(i,a,o,s){var c=this,l={},u={},f={},h={};return i.forEach(function(d){var p=!0;a.forEach(function(v){var y="".concat(d,"|").concat(v);!o.reload&&c.store.hasResourceBundle(d,v)?c.state[y]=2:c.state[y]<0||(c.state[y]===1?u[y]===void 0&&(u[y]=!0):(c.state[y]=1,p=!1,u[y]===void 0&&(u[y]=!0),l[y]===void 0&&(l[y]=!0),h[v]===void 0&&(h[v]=!0)))}),p||(f[d]=!0)}),(Object.keys(l).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(l),pending:Object.keys(u),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(h)}}},{key:"loaded",value:function(i,a,o){var s=i.split("|"),c=s[0],l=s[1];a&&this.emit("failedLoading",c,l,a),o&&this.store.addResourceBundle(c,l,o),this.state[i]=a?-1:2;var u={};this.queue.forEach(function(f){HAe(f.loaded,[c],l),pCe(f,i),a&&f.errors.push(a),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(h){u[h]||(u[h]={});var d=f.loaded[h];d.length&&d.forEach(function(p){u[h][p]===void 0&&(u[h][p]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,a,o){var s=this,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!i.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:a,fcName:o,tried:c,wait:l,callback:u});return}this.readingCalls++;var f=function(v,y){if(s.readingCalls--,s.waitingReads.length>0){var g=s.waitingReads.shift();s.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(v&&y&&c<s.maxRetries){setTimeout(function(){s.read.call(s,i,a,o,c+1,l*2,u)},l);return}u(v,y)},h=this.backend[o].bind(this.backend);if(h.length===2){try{var d=h(i,a);d&&typeof d.then=="function"?d.then(function(p){return f(null,p)}).catch(f):f(null,d)}catch(p){f(p)}return}return h(i,a,f)}},{key:"prepareLoading",value:function(i,a){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),c&&c();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof a=="string"&&(a=[a]);var l=this.queueLoad(i,a,s,c);if(!l.toLoad.length)return l.pending.length||c(),null;l.toLoad.forEach(function(u){o.loadOne(u)})}},{key:"load",value:function(i,a,o){this.prepareLoading(i,a,{},o)}},{key:"reload",value:function(i,a,o){this.prepareLoading(i,a,{reload:!0},o)}},{key:"loadOne",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=i.split("|"),c=s[0],l=s[1];this.read(c,l,"read",void 0,void 0,function(u,f){u&&a.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(c," failed"),u),!u&&f&&a.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(c),f),a.loaded(i,u,f)})}},{key:"saveMissing",value:function(i,a,o,s,c){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var f=vI(vI({},l),{},{isUpdate:c}),h=this.backend.create.bind(this.backend);if(h.length<6)try{var d;h.length===5?d=h(i,a,o,s,f):d=h(i,a,o,s),d&&typeof d.then=="function"?d.then(function(p){return u(null,p)}).catch(u):u(null,d)}catch(p){u(p)}else h(i,a,o,s,u,f)}!i||!i[0]||this.store.addResource(i[0],a,o,s)}}}]),r}(ko);function mI(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var r={};if(Gr(e[1])==="object"&&(r=e[1]),typeof e[1]=="string"&&(r.defaultValue=e[1]),typeof e[2]=="string"&&(r.tDescription=e[2]),Gr(e[2])==="object"||Gr(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(e,r,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function gI(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function yI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yI(Object(r),!0).forEach(function(n){Zn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mCe(t){var e=gCe();return function(){var n=fa(t),i;if(e){var a=fa(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ah(this,i)}}function gCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ed(){}function yCe(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(r){typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}var Up=function(t){Cv(r,t);var e=mCe(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(Mi(this,r),n=e.call(this),Tv&&ko.call(So(n)),n.options=gI(i),n.services={},n.logger=ea,n.modules={external:[]},yCe(So(n)),a&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,a),ah(n,So(n));setTimeout(function(){n.init(i,a)},0)}return n}return Li(r,[{key:"init",value:function(){var i=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof a=="function"&&(o=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(typeof a.ns=="string"?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));var s=mI();this.options=Wi(Wi(Wi({},s),this.options),gI(a)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Wi(Wi({},s.interpolation),this.options.interpolation)),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);function c(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?ea.init(c(this.modules.logger),this.options):ea.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=fCe);var u=new uI(this.options);this.store=new tCe(this.options.resources,this.options);var f=this.services;f.logger=ea,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new lCe(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(f.formatter=c(l),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new uCe(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new vCe(c(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(g){for(var m=arguments.length,x=new Array(m>1?m-1:0),b=1;b<m;b++)x[b-1]=arguments[b];i.emit.apply(i,[g].concat(x))}),this.modules.languageDetector&&(f.languageDetector=c(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=c(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new lI(this.services,this.options),this.translator.on("*",function(g){for(var m=arguments.length,x=new Array(m>1?m-1:0),b=1;b<m;b++)x[b-1]=arguments[b];i.emit.apply(i,[g].concat(x))}),this.modules.external.forEach(function(g){g.init&&g.init(i)})}if(this.format=this.options.interpolation.format,o||(o=ed),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(g){i[g]=function(){var m;return(m=i.store)[g].apply(m,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(g){i[g]=function(){var m;return(m=i.store)[g].apply(m,arguments),i}});var v=oc(),y=function(){var m=function(b,_){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),v.resolve(_),o(b,_)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return m(null,i.t.bind(i));i.changeLanguage(i.options.lng,m)};return this.options.resources||!this.options.initImmediate?y():setTimeout(y,0),v}},{key:"loadResources",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ed,s=o,c=typeof i=="string"?i:this.language;if(typeof i=="function"&&(s=i),!this.options.resources||this.options.partialBundledLanguages){if(c&&c.toLowerCase()==="cimode")return s();var l=[],u=function(d){if(d){var p=a.services.languageUtils.toResolveHierarchy(d);p.forEach(function(v){l.indexOf(v)<0&&l.push(v)})}};if(c)u(c);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(h){return u(h)})}this.options.preload&&this.options.preload.forEach(function(h){return u(h)}),this.services.backendConnector.load(l,this.options.ns,function(h){!h&&!a.resolvedLanguage&&a.language&&a.setResolvedLanguage(a.language),s(h)})}else s(null)}},{key:"reloadResources",value:function(i,a,o){var s=oc();return i||(i=this.languages),a||(a=this.options.ns),o||(o=ed),this.services.backendConnector.reload(i,a,function(c){s.resolve(),o(c)}),s}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&TN.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var a=0;a<this.languages.length;a++){var o=this.languages[a];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,a){var o=this;this.isLanguageChangingTo=i;var s=oc();this.emit("languageChanging",i);var c=function(h){o.language=h,o.languages=o.services.languageUtils.toResolveHierarchy(h),o.resolvedLanguage=void 0,o.setResolvedLanguage(h)},l=function(h,d){d?(c(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,s.resolve(function(){return o.t.apply(o,arguments)}),a&&a(h,function(){return o.t.apply(o,arguments)})},u=function(h){!i&&!h&&o.services.languageDetector&&(h=[]);var d=typeof h=="string"?h:o.services.languageUtils.getBestMatchFromCodes(h);d&&(o.language||c(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(p){l(p,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(i),s}},{key:"getFixedT",value:function(i,a,o){var s=this,c=function l(u,f){var h;if(Gr(f)!=="object"){for(var d=arguments.length,p=new Array(d>2?d-2:0),v=2;v<d;v++)p[v-2]=arguments[v];h=s.options.overloadTranslationOptionHandler([u,f].concat(p))}else h=Wi({},f);h.lng=h.lng||l.lng,h.lngs=h.lngs||l.lngs,h.ns=h.ns||l.ns,h.keyPrefix=h.keyPrefix||o||l.keyPrefix;var y=s.options.keySeparator||".",g;return h.keyPrefix&&Array.isArray(u)?g=u.map(function(m){return"".concat(h.keyPrefix).concat(y).concat(m)}):g=h.keyPrefix?"".concat(h.keyPrefix).concat(y).concat(u):u,s.t(g,h)};return typeof i=="string"?c.lng=i:c.lngs=i,c.ns=a,c.keyPrefix=o,c}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=o.lng||this.resolvedLanguage||this.languages[0],c=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var u=function(d,p){var v=a.services.backendConnector.state["".concat(d,"|").concat(p)];return v===-1||v===2};if(o.precheck){var f=o.precheck(this,u);if(f!==void 0)return f}return!!(this.hasResourceBundle(s,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(s,i)&&(!c||u(l,i)))}},{key:"loadNamespaces",value:function(i,a){var o=this,s=oc();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(c){o.options.ns.indexOf(c)<0&&o.options.ns.push(c)}),this.loadResources(function(c){s.resolve(),a&&a(c)}),s):(a&&a(),Promise.resolve())}},{key:"loadLanguages",value:function(i,a){var o=oc();typeof i=="string"&&(i=[i]);var s=this.options.preload||[],c=i.filter(function(l){return s.indexOf(l)<0});return c.length?(this.options.preload=s.concat(c),this.loadResources(function(l){o.resolve(),a&&a(l)}),o):(a&&a(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new uI(mI());return a.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ed,s=Wi(Wi(Wi({},this.options),a),{isClone:!0}),c=new r(s);(a.debug!==void 0||a.prefix!==void 0)&&(c.logger=c.logger.clone(a));var l=["store","services","language"];return l.forEach(function(u){c[u]=i[u]}),c.services=Wi({},this.services),c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c.translator=new lI(c.services,c.options),c.translator.on("*",function(u){for(var f=arguments.length,h=new Array(f>1?f-1:0),d=1;d<f;d++)h[d-1]=arguments[d];c.emit.apply(c,[u].concat(h))}),c.init(s,o),c.translator.options=c.options,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(ko);Zn(Up,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Up(t,e)});var mn=Up.createInstance();mn.createInstance=Up.createInstance;mn.createInstance;mn.dir;mn.init;mn.loadResources;mn.reloadResources;mn.use;mn.changeLanguage;mn.getFixedT;mn.t;mn.exists;mn.setDefaultNamespace;mn.hasLoadedNamespace;mn.loadNamespaces;mn.loadLanguages;mn.use(yse).init({resources:TX||{},lng:pu[PX]||"zhCn",fallbackLng:"zhCn",interpolation:{escapeValue:!1}}).then(()=>console.log("IdolTime i18n Ready!"));xs.render(k.jsx(zt.StrictMode,{children:k.jsx(Sse,{children:k.jsx(Iie,{store:J,children:k.jsx($Ae,{})})})}),document.getElementById("root"));export{Fr as C,ui as S,Ve as T,j as W,Lp as a,CCe as r};
